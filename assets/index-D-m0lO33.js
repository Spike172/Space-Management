function _mergeNamespaces(e,t){for(var n=0;n<t.length;n++){const o=t[n];if(typeof o!="string"&&!Array.isArray(o)){for(const u in o)if(u!=="default"&&!(u in e)){const d=Object.getOwnPropertyDescriptor(o,u);d&&Object.defineProperty(e,u,d.get?d:{enumerable:!0,get:()=>o[u]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function n(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(u){if(u.ep)return;u.ep=!0;const d=n(u);fetch(u.href,d)}})();function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function o(){var u=!1;try{u=this instanceof o}catch{}return u?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var u=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(n,o,u.get?u:{enumerable:!0,get:function(){return e[o]}})}),n}var jsxRuntime={exports:{}},reactJsxRuntime_production={};var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(o,u,d){var f=null;if(d!==void 0&&(f=""+d),u.key!==void 0&&(f=""+u.key),"key"in u){d={};for(var v in u)v!=="key"&&(d[v]=u[v])}else d=u;return u=d.ref,{$$typeof:e,type:o,key:f,ref:u!==void 0?u:null,props:d}}return reactJsxRuntime_production.Fragment=t,reactJsxRuntime_production.jsx=n,reactJsxRuntime_production.jsxs=n,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),D=Symbol.iterator;function O(K){return K===null||typeof K!="object"?null:(K=D&&K[D]||K["@@iterator"],typeof K=="function"?K:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,I={};function B(K,ne,ue){this.props=K,this.context=ne,this.refs=I,this.updater=ue||M}B.prototype.isReactComponent={},B.prototype.setState=function(K,ne){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,ne,"setState")},B.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function V(){}V.prototype=B.prototype;function j(K,ne,ue){this.props=K,this.context=ne,this.refs=I,this.updater=ue||M}var q=j.prototype=new V;q.constructor=j,N(q,B.prototype),q.isPureReactComponent=!0;var z=Array.isArray;function $(){}var ee={H:null,A:null,T:null,S:null},ie=Object.prototype.hasOwnProperty;function ae(K,ne,ue){var ye=ue.ref;return{$$typeof:e,type:K,key:ne,ref:ye!==void 0?ye:null,props:ue}}function pe(K,ne){return ae(K.type,ne,K.props)}function he(K){return typeof K=="object"&&K!==null&&K.$$typeof===e}function be(K){var ne={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(ue){return ne[ue]})}var xe=/\/+/g;function Ee(K,ne){return typeof K=="object"&&K!==null&&K.key!=null?be(""+K.key):ne.toString(36)}function we(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then($,$):(K.status="pending",K.then(function(ne){K.status==="pending"&&(K.status="fulfilled",K.value=ne)},function(ne){K.status==="pending"&&(K.status="rejected",K.reason=ne)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function oe(K,ne,ue,ye,fe){var X=typeof K;(X==="undefined"||X==="boolean")&&(K=null);var le=!1;if(K===null)le=!0;else switch(X){case"bigint":case"string":case"number":le=!0;break;case"object":switch(K.$$typeof){case e:case t:le=!0;break;case C:return le=K._init,oe(le(K._payload),ne,ue,ye,fe)}}if(le)return fe=fe(K),le=ye===""?"."+Ee(K,0):ye,z(fe)?(ue="",le!=null&&(ue=le.replace(xe,"$&/")+"/"),oe(fe,ne,ue,"",function(me){return me})):fe!=null&&(he(fe)&&(fe=pe(fe,ue+(fe.key==null||K&&K.key===fe.key?"":(""+fe.key).replace(xe,"$&/")+"/")+le)),ne.push(fe)),1;le=0;var de=ye===""?".":ye+":";if(z(K))for(var ce=0;ce<K.length;ce++)ye=K[ce],X=de+Ee(ye,ce),le+=oe(ye,ne,ue,X,fe);else if(ce=O(K),typeof ce=="function")for(K=ce.call(K),ce=0;!(ye=K.next()).done;)ye=ye.value,X=de+Ee(ye,ce++),le+=oe(ye,ne,ue,X,fe);else if(X==="object"){if(typeof K.then=="function")return oe(we(K),ne,ue,ye,fe);throw ne=String(K),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return le}function se(K,ne,ue){if(K==null)return K;var ye=[],fe=0;return oe(K,ye,"","",function(X){return ne.call(ue,X,fe++)}),ye}function J(K){if(K._status===-1){var ne=K._result;ne=ne(),ne.then(function(ue){(K._status===0||K._status===-1)&&(K._status=1,K._result=ue)},function(ue){(K._status===0||K._status===-1)&&(K._status=2,K._result=ue)}),K._status===-1&&(K._status=0,K._result=ne)}if(K._status===1)return K._result.default;throw K._result}var Q=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)},Z={map:se,forEach:function(K,ne,ue){se(K,function(){ne.apply(this,arguments)},ue)},count:function(K){var ne=0;return se(K,function(){ne++}),ne},toArray:function(K){return se(K,function(ne){return ne})||[]},only:function(K){if(!he(K))throw Error("React.Children.only expected to receive a single React element child.");return K}};return react_production.Activity=_,react_production.Children=Z,react_production.Component=B,react_production.Fragment=n,react_production.Profiler=u,react_production.PureComponent=j,react_production.StrictMode=o,react_production.Suspense=w,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ee,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(K){return ee.H.useMemoCache(K)}},react_production.cache=function(K){return function(){return K.apply(null,arguments)}},react_production.cacheSignal=function(){return null},react_production.cloneElement=function(K,ne,ue){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var ye=N({},K.props),fe=K.key;if(ne!=null)for(X in ne.key!==void 0&&(fe=""+ne.key),ne)!ie.call(ne,X)||X==="key"||X==="__self"||X==="__source"||X==="ref"&&ne.ref===void 0||(ye[X]=ne[X]);var X=arguments.length-2;if(X===1)ye.children=ue;else if(1<X){for(var le=Array(X),de=0;de<X;de++)le[de]=arguments[de+2];ye.children=le}return ae(K.type,fe,ye)},react_production.createContext=function(K){return K={$$typeof:f,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:d,_context:K},K},react_production.createElement=function(K,ne,ue){var ye,fe={},X=null;if(ne!=null)for(ye in ne.key!==void 0&&(X=""+ne.key),ne)ie.call(ne,ye)&&ye!=="key"&&ye!=="__self"&&ye!=="__source"&&(fe[ye]=ne[ye]);var le=arguments.length-2;if(le===1)fe.children=ue;else if(1<le){for(var de=Array(le),ce=0;ce<le;ce++)de[ce]=arguments[ce+2];fe.children=de}if(K&&K.defaultProps)for(ye in le=K.defaultProps,le)fe[ye]===void 0&&(fe[ye]=le[ye]);return ae(K,X,fe)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(K){return{$$typeof:v,render:K}},react_production.isValidElement=he,react_production.lazy=function(K){return{$$typeof:C,_payload:{_status:-1,_result:K},_init:J}},react_production.memo=function(K,ne){return{$$typeof:E,type:K,compare:ne===void 0?null:ne}},react_production.startTransition=function(K){var ne=ee.T,ue={};ee.T=ue;try{var ye=K(),fe=ee.S;fe!==null&&fe(ue,ye),typeof ye=="object"&&ye!==null&&typeof ye.then=="function"&&ye.then($,Q)}catch(X){Q(X)}finally{ne!==null&&ue.types!==null&&(ne.types=ue.types),ee.T=ne}},react_production.unstable_useCacheRefresh=function(){return ee.H.useCacheRefresh()},react_production.use=function(K){return ee.H.use(K)},react_production.useActionState=function(K,ne,ue){return ee.H.useActionState(K,ne,ue)},react_production.useCallback=function(K,ne){return ee.H.useCallback(K,ne)},react_production.useContext=function(K){return ee.H.useContext(K)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(K,ne){return ee.H.useDeferredValue(K,ne)},react_production.useEffect=function(K,ne){return ee.H.useEffect(K,ne)},react_production.useEffectEvent=function(K){return ee.H.useEffectEvent(K)},react_production.useId=function(){return ee.H.useId()},react_production.useImperativeHandle=function(K,ne,ue){return ee.H.useImperativeHandle(K,ne,ue)},react_production.useInsertionEffect=function(K,ne){return ee.H.useInsertionEffect(K,ne)},react_production.useLayoutEffect=function(K,ne){return ee.H.useLayoutEffect(K,ne)},react_production.useMemo=function(K,ne){return ee.H.useMemo(K,ne)},react_production.useOptimistic=function(K,ne){return ee.H.useOptimistic(K,ne)},react_production.useReducer=function(K,ne,ue){return ee.H.useReducer(K,ne,ue)},react_production.useRef=function(K){return ee.H.useRef(K)},react_production.useState=function(K){return ee.H.useState(K)},react_production.useSyncExternalStore=function(K,ne,ue){return ee.H.useSyncExternalStore(K,ne,ue)},react_production.useTransition=function(){return ee.H.useTransition()},react_production.version="19.2.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(e){function t(oe,se){var J=oe.length;oe.push(se);e:for(;0<J;){var Q=J-1>>>1,Z=oe[Q];if(0<u(Z,se))oe[Q]=se,oe[J]=Z,J=Q;else break e}}function n(oe){return oe.length===0?null:oe[0]}function o(oe){if(oe.length===0)return null;var se=oe[0],J=oe.pop();if(J!==se){oe[0]=J;e:for(var Q=0,Z=oe.length,K=Z>>>1;Q<K;){var ne=2*(Q+1)-1,ue=oe[ne],ye=ne+1,fe=oe[ye];if(0>u(ue,J))ye<Z&&0>u(fe,ue)?(oe[Q]=fe,oe[ye]=J,Q=ye):(oe[Q]=ue,oe[ne]=J,Q=ne);else if(ye<Z&&0>u(fe,J))oe[Q]=fe,oe[ye]=J,Q=ye;else break e}}return se}function u(oe,se){var J=oe.sortIndex-se.sortIndex;return J!==0?J:oe.id-se.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var f=Date,v=f.now();e.unstable_now=function(){return f.now()-v}}var w=[],E=[],C=1,_=null,D=3,O=!1,M=!1,N=!1,I=!1,B=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function q(oe){for(var se=n(E);se!==null;){if(se.callback===null)o(E);else if(se.startTime<=oe)o(E),se.sortIndex=se.expirationTime,t(w,se);else break;se=n(E)}}function z(oe){if(N=!1,q(oe),!M)if(n(w)!==null)M=!0,$||($=!0,be());else{var se=n(E);se!==null&&we(z,se.startTime-oe)}}var $=!1,ee=-1,ie=5,ae=-1;function pe(){return I?!0:!(e.unstable_now()-ae<ie)}function he(){if(I=!1,$){var oe=e.unstable_now();ae=oe;var se=!0;try{e:{M=!1,N&&(N=!1,V(ee),ee=-1),O=!0;var J=D;try{t:{for(q(oe),_=n(w);_!==null&&!(_.expirationTime>oe&&pe());){var Q=_.callback;if(typeof Q=="function"){_.callback=null,D=_.priorityLevel;var Z=Q(_.expirationTime<=oe);if(oe=e.unstable_now(),typeof Z=="function"){_.callback=Z,q(oe),se=!0;break t}_===n(w)&&o(w),q(oe)}else o(w);_=n(w)}if(_!==null)se=!0;else{var K=n(E);K!==null&&we(z,K.startTime-oe),se=!1}}break e}finally{_=null,D=J,O=!1}se=void 0}}finally{se?be():$=!1}}}var be;if(typeof j=="function")be=function(){j(he)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,Ee=xe.port2;xe.port1.onmessage=he,be=function(){Ee.postMessage(null)}}else be=function(){B(he,0)};function we(oe,se){ee=B(function(){oe(e.unstable_now())},se)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(oe){oe.callback=null},e.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<oe?Math.floor(1e3/oe):5},e.unstable_getCurrentPriorityLevel=function(){return D},e.unstable_next=function(oe){switch(D){case 1:case 2:case 3:var se=3;break;default:se=D}var J=D;D=se;try{return oe()}finally{D=J}},e.unstable_requestPaint=function(){I=!0},e.unstable_runWithPriority=function(oe,se){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var J=D;D=oe;try{return se()}finally{D=J}},e.unstable_scheduleCallback=function(oe,se,J){var Q=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?Q+J:Q):J=Q,oe){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=J+Z,oe={id:C++,callback:se,priorityLevel:oe,startTime:J,expirationTime:Z,sortIndex:-1},J>Q?(oe.sortIndex=J,t(E,oe),n(w)===null&&oe===n(E)&&(N?(V(ee),ee=-1):N=!0,we(z,J-Q))):(oe.sortIndex=Z,t(w,oe),M||O||(M=!0,$||($=!0,be()))),oe},e.unstable_shouldYield=pe,e.unstable_wrapCallback=function(oe){var se=D;return function(){var J=D;D=se;try{return oe.apply(this,arguments)}finally{D=J}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var e=requireReact();function t(w){var E="https://react.dev/errors/"+w;if(1<arguments.length){E+="?args[]="+encodeURIComponent(arguments[1]);for(var C=2;C<arguments.length;C++)E+="&args[]="+encodeURIComponent(arguments[C])}return"Minified React error #"+w+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},u=Symbol.for("react.portal");function d(w,E,C){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:_==null?null:""+_,children:w,containerInfo:E,implementation:C}}var f=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function v(w,E){if(w==="font")return"";if(typeof E=="string")return E==="use-credentials"?E:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,reactDom_production.createPortal=function(w,E){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!E||E.nodeType!==1&&E.nodeType!==9&&E.nodeType!==11)throw Error(t(299));return d(w,E,null,C)},reactDom_production.flushSync=function(w){var E=f.T,C=o.p;try{if(f.T=null,o.p=2,w)return w()}finally{f.T=E,o.p=C,o.d.f()}},reactDom_production.preconnect=function(w,E){typeof w=="string"&&(E?(E=E.crossOrigin,E=typeof E=="string"?E==="use-credentials"?E:"":void 0):E=null,o.d.C(w,E))},reactDom_production.prefetchDNS=function(w){typeof w=="string"&&o.d.D(w)},reactDom_production.preinit=function(w,E){if(typeof w=="string"&&E&&typeof E.as=="string"){var C=E.as,_=v(C,E.crossOrigin),D=typeof E.integrity=="string"?E.integrity:void 0,O=typeof E.fetchPriority=="string"?E.fetchPriority:void 0;C==="style"?o.d.S(w,typeof E.precedence=="string"?E.precedence:void 0,{crossOrigin:_,integrity:D,fetchPriority:O}):C==="script"&&o.d.X(w,{crossOrigin:_,integrity:D,fetchPriority:O,nonce:typeof E.nonce=="string"?E.nonce:void 0})}},reactDom_production.preinitModule=function(w,E){if(typeof w=="string")if(typeof E=="object"&&E!==null){if(E.as==null||E.as==="script"){var C=v(E.as,E.crossOrigin);o.d.M(w,{crossOrigin:C,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0})}}else E==null&&o.d.M(w)},reactDom_production.preload=function(w,E){if(typeof w=="string"&&typeof E=="object"&&E!==null&&typeof E.as=="string"){var C=E.as,_=v(C,E.crossOrigin);o.d.L(w,C,{crossOrigin:_,integrity:typeof E.integrity=="string"?E.integrity:void 0,nonce:typeof E.nonce=="string"?E.nonce:void 0,type:typeof E.type=="string"?E.type:void 0,fetchPriority:typeof E.fetchPriority=="string"?E.fetchPriority:void 0,referrerPolicy:typeof E.referrerPolicy=="string"?E.referrerPolicy:void 0,imageSrcSet:typeof E.imageSrcSet=="string"?E.imageSrcSet:void 0,imageSizes:typeof E.imageSizes=="string"?E.imageSizes:void 0,media:typeof E.media=="string"?E.media:void 0})}},reactDom_production.preloadModule=function(w,E){if(typeof w=="string")if(E){var C=v(E.as,E.crossOrigin);o.d.m(w,{as:typeof E.as=="string"&&E.as!=="script"?E.as:void 0,crossOrigin:C,integrity:typeof E.integrity=="string"?E.integrity:void 0})}else o.d.m(w)},reactDom_production.requestFormReset=function(w){o.d.r(w)},reactDom_production.unstable_batchedUpdates=function(w,E){return w(E)},reactDom_production.useFormState=function(w,E,C){return f.H.useFormState(w,E,C)},reactDom_production.useFormStatus=function(){return f.H.useHostTransitionStatus()},reactDom_production.version="19.2.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),reactDom.exports=requireReactDom_production(),reactDom.exports}var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var e=requireScheduler(),t=requireReact(),n=requireReactDom();function o(g){var S="https://react.dev/errors/"+g;if(1<arguments.length){S+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)S+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+g+"; visit "+S+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(g){return!(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)}function d(g){var S=g,T=g;if(g.alternate)for(;S.return;)S=S.return;else{g=S;do S=g,(S.flags&4098)!==0&&(T=S.return),g=S.return;while(g)}return S.tag===3?T:null}function f(g){if(g.tag===13){var S=g.memoizedState;if(S===null&&(g=g.alternate,g!==null&&(S=g.memoizedState)),S!==null)return S.dehydrated}return null}function v(g){if(g.tag===31){var S=g.memoizedState;if(S===null&&(g=g.alternate,g!==null&&(S=g.memoizedState)),S!==null)return S.dehydrated}return null}function w(g){if(d(g)!==g)throw Error(o(188))}function E(g){var S=g.alternate;if(!S){if(S=d(g),S===null)throw Error(o(188));return S!==g?null:g}for(var T=g,F=S;;){var G=T.return;if(G===null)break;var U=G.alternate;if(U===null){if(F=G.return,F!==null){T=F;continue}break}if(G.child===U.child){for(U=G.child;U;){if(U===T)return w(G),g;if(U===F)return w(G),S;U=U.sibling}throw Error(o(188))}if(T.return!==F.return)T=G,F=U;else{for(var te=!1,ve=G.child;ve;){if(ve===T){te=!0,T=G,F=U;break}if(ve===F){te=!0,F=G,T=U;break}ve=ve.sibling}if(!te){for(ve=U.child;ve;){if(ve===T){te=!0,T=U,F=G;break}if(ve===F){te=!0,F=U,T=G;break}ve=ve.sibling}if(!te)throw Error(o(189))}}if(T.alternate!==F)throw Error(o(190))}if(T.tag!==3)throw Error(o(188));return T.stateNode.current===T?g:S}function C(g){var S=g.tag;if(S===5||S===26||S===27||S===6)return g;for(g=g.child;g!==null;){if(S=C(g),S!==null)return S;g=g.sibling}return null}var _=Object.assign,D=Symbol.for("react.element"),O=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),V=Symbol.for("react.consumer"),j=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),ae=Symbol.for("react.activity"),pe=Symbol.for("react.memo_cache_sentinel"),he=Symbol.iterator;function be(g){return g===null||typeof g!="object"?null:(g=he&&g[he]||g["@@iterator"],typeof g=="function"?g:null)}var xe=Symbol.for("react.client.reference");function Ee(g){if(g==null)return null;if(typeof g=="function")return g.$$typeof===xe?null:g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case N:return"Fragment";case B:return"Profiler";case I:return"StrictMode";case z:return"Suspense";case $:return"SuspenseList";case ae:return"Activity"}if(typeof g=="object")switch(g.$$typeof){case M:return"Portal";case j:return g.displayName||"Context";case V:return(g._context.displayName||"Context")+".Consumer";case q:var S=g.render;return g=g.displayName,g||(g=S.displayName||S.name||"",g=g!==""?"ForwardRef("+g+")":"ForwardRef"),g;case ee:return S=g.displayName||null,S!==null?S:Ee(g.type)||"Memo";case ie:S=g._payload,g=g._init;try{return Ee(g(S))}catch{}}return null}var we=Array.isArray,oe=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},Q=[],Z=-1;function K(g){return{current:g}}function ne(g){0>Z||(g.current=Q[Z],Q[Z]=null,Z--)}function ue(g,S){Z++,Q[Z]=g.current,g.current=S}var ye=K(null),fe=K(null),X=K(null),le=K(null);function de(g,S){switch(ue(X,S),ue(fe,g),ue(ye,null),S.nodeType){case 9:case 11:g=(g=S.documentElement)&&(g=g.namespaceURI)?Vf(g):0;break;default:if(g=S.tagName,S=S.namespaceURI)S=Vf(S),g=zf(S,g);else switch(g){case"svg":g=1;break;case"math":g=2;break;default:g=0}}ne(ye),ue(ye,g)}function ce(){ne(ye),ne(fe),ne(X)}function me(g){g.memoizedState!==null&&ue(le,g);var S=ye.current,T=zf(S,g.type);S!==T&&(ue(fe,g),ue(ye,T))}function Se(g){fe.current===g&&(ne(ye),ne(fe)),le.current===g&&(ne(le),ld._currentValue=J)}var Ce,Te;function je(g){if(Ce===void 0)try{throw Error()}catch(T){var S=T.stack.trim().match(/\n( *(at )?)/);Ce=S&&S[1]||"",Te=-1<T.stack.indexOf(`
    at`)?" (<anonymous>)":-1<T.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ce+g+Te}var Oe=!1;function Ne(g,S){if(!g||Oe)return"";Oe=!0;var T=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var F={DetermineComponentFrameRoot:function(){try{if(S){var Ke=function(){throw Error()};if(Object.defineProperty(Ke.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ke,[])}catch(Ue){var Ge=Ue}Reflect.construct(g,[],Ke)}else{try{Ke.call()}catch(Ue){Ge=Ue}g.call(Ke.prototype)}}else{try{throw Error()}catch(Ue){Ge=Ue}(Ke=g())&&typeof Ke.catch=="function"&&Ke.catch(function(){})}}catch(Ue){if(Ue&&Ge&&typeof Ue.stack=="string")return[Ue.stack,Ge.stack]}return[null,null]}};F.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var G=Object.getOwnPropertyDescriptor(F.DetermineComponentFrameRoot,"name");G&&G.configurable&&Object.defineProperty(F.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var U=F.DetermineComponentFrameRoot(),te=U[0],ve=U[1];if(te&&ve){var Ae=te.split(`
`),ke=ve.split(`
`);for(G=F=0;F<Ae.length&&!Ae[F].includes("DetermineComponentFrameRoot");)F++;for(;G<ke.length&&!ke[G].includes("DetermineComponentFrameRoot");)G++;if(F===Ae.length||G===ke.length)for(F=Ae.length-1,G=ke.length-1;1<=F&&0<=G&&Ae[F]!==ke[G];)G--;for(;1<=F&&0<=G;F--,G--)if(Ae[F]!==ke[G]){if(F!==1||G!==1)do if(F--,G--,0>G||Ae[F]!==ke[G]){var We=`
`+Ae[F].replace(" at new "," at ");return g.displayName&&We.includes("<anonymous>")&&(We=We.replace("<anonymous>",g.displayName)),We}while(1<=F&&0<=G);break}}}finally{Oe=!1,Error.prepareStackTrace=T}return(T=g?g.displayName||g.name:"")?je(T):""}function De(g,S){switch(g.tag){case 26:case 27:case 5:return je(g.type);case 16:return je("Lazy");case 13:return g.child!==S&&S!==null?je("Suspense Fallback"):je("Suspense");case 19:return je("SuspenseList");case 0:case 15:return Ne(g.type,!1);case 11:return Ne(g.type.render,!1);case 1:return Ne(g.type,!0);case 31:return je("Activity");default:return""}}function Be(g){try{var S="",T=null;do S+=De(g,T),T=g,g=g.return;while(g);return S}catch(F){return`
Error generating stack: `+F.message+`
`+F.stack}}var $e=Object.prototype.hasOwnProperty,Qe=e.unstable_scheduleCallback,Ye=e.unstable_cancelCallback,nt=e.unstable_shouldYield,rt=e.unstable_requestPaint,at=e.unstable_now,vt=e.unstable_getCurrentPriorityLevel,nn=e.unstable_ImmediatePriority,en=e.unstable_UserBlockingPriority,Dt=e.unstable_NormalPriority,wt=e.unstable_LowPriority,Bn=e.unstable_IdlePriority,Ba=e.log,wl=e.unstable_setDisableYieldValue,Ss=null,Xe=null;function Le(g){if(typeof Ba=="function"&&wl(g),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode(Ss,g)}catch{}}var Pe=Math.clz32?Math.clz32:Pn,st=Math.log,Vt=Math.LN2;function Pn(g){return g>>>=0,g===0?32:31-(st(g)/Vt|0)|0}var Cn=256,Mr=262144,Sr=4194304;function nr(g){var S=g&42;if(S!==0)return S;switch(g&-g){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return g&261888;case 262144:case 524288:case 1048576:case 2097152:return g&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return g&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return g}}function bn(g,S,T){var F=g.pendingLanes;if(F===0)return 0;var G=0,U=g.suspendedLanes,te=g.pingedLanes;g=g.warmLanes;var ve=F&134217727;return ve!==0?(F=ve&~U,F!==0?G=nr(F):(te&=ve,te!==0?G=nr(te):T||(T=ve&~g,T!==0&&(G=nr(T))))):(ve=F&~U,ve!==0?G=nr(ve):te!==0?G=nr(te):T||(T=F&~g,T!==0&&(G=nr(T)))),G===0?0:S!==0&&S!==G&&(S&U)===0&&(U=G&-G,T=S&-S,U>=T||U===32&&(T&4194048)!==0)?S:G}function Or(g,S){return(g.pendingLanes&~(g.suspendedLanes&~g.pingedLanes)&S)===0}function fi(g,S){switch(g){case 1:case 2:case 4:case 8:case 64:return S+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return S+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fr(){var g=Sr;return Sr<<=1,(Sr&62914560)===0&&(Sr=4194304),g}function un(g){for(var S=[],T=0;31>T;T++)S.push(g);return S}function gi(g,S){g.pendingLanes|=S,S!==268435456&&(g.suspendedLanes=0,g.pingedLanes=0,g.warmLanes=0)}function Yi(g,S,T,F,G,U){var te=g.pendingLanes;g.pendingLanes=T,g.suspendedLanes=0,g.pingedLanes=0,g.warmLanes=0,g.expiredLanes&=T,g.entangledLanes&=T,g.errorRecoveryDisabledLanes&=T,g.shellSuspendCounter=0;var ve=g.entanglements,Ae=g.expirationTimes,ke=g.hiddenUpdates;for(T=te&~T;0<T;){var We=31-Pe(T),Ke=1<<We;ve[We]=0,Ae[We]=-1;var Ge=ke[We];if(Ge!==null)for(ke[We]=null,We=0;We<Ge.length;We++){var Ue=Ge[We];Ue!==null&&(Ue.lane&=-536870913)}T&=~Ke}F!==0&&wi(g,F,0),U!==0&&G===0&&g.tag!==0&&(g.suspendedLanes|=U&~(te&~S))}function wi(g,S,T){g.pendingLanes|=S,g.suspendedLanes&=~S;var F=31-Pe(S);g.entangledLanes|=S,g.entanglements[F]=g.entanglements[F]|1073741824|T&261930}function Xi(g,S){var T=g.entangledLanes|=S;for(g=g.entanglements;T;){var F=31-Pe(T),G=1<<F;G&S|g[F]&S&&(g[F]|=S),T&=~G}}function Zi(g,S){var T=S&-S;return T=(T&42)!==0?1:Mn(T),(T&(g.suspendedLanes|S))!==0?0:T}function Mn(g){switch(g){case 2:g=1;break;case 8:g=4;break;case 32:g=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:g=128;break;case 268435456:g=134217728;break;default:g=0}return g}function qr(g){return g&=-g,2<g?8<g?(g&134217727)!==0?32:268435456:8:2}function ws(){var g=se.p;return g!==0?g:(g=window.event,g===void 0?32:dp(g.type))}function xs(g,S){var T=se.p;try{return se.p=g,S()}finally{se.p=T}}var Qi=Math.random().toString(36).slice(2),On="__reactFiber$"+Qi,rr="__reactProps$"+Qi,Es="__reactContainer$"+Qi,xi="__reactEvents$"+Qi,As="__reactListeners$"+Qi,Fo="__reactHandles$"+Qi,xl="__reactResources$"+Qi,Ji="__reactMarker$"+Qi;function na(g){delete g[On],delete g[rr],delete g[xi],delete g[As],delete g[Fo]}function ra(g){var S=g[On];if(S)return S;for(var T=g.parentNode;T;){if(S=T[Es]||T[On]){if(T=S.alternate,S.child!==null||T!==null&&T.child!==null)for(g=Yf(g);g!==null;){if(T=g[On])return T;g=Yf(g)}return S}g=T,T=g.parentNode}return null}function ia(g){if(g=g[On]||g[Es]){var S=g.tag;if(S===5||S===6||S===13||S===31||S===26||S===27||S===3)return g}return null}function Ha(g){var S=g.tag;if(S===5||S===26||S===27||S===6)return g.stateNode;throw Error(o(33))}function _s(g){var S=g[xl];return S||(S=g[xl]={hoistableStyles:new Map,hoistableScripts:new Map}),S}function Fn(g){g[Ji]=!0}var es=new Set,El={};function Rs(g,S){Lr(g,S),Lr(g+"Capture",S)}function Lr(g,S){for(El[g]=S,g=0;g<S.length;g++)es.add(S[g])}var Nr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lo={},dn={};function kc(g){return $e.call(dn,g)?!0:$e.call(Lo,g)?!1:Nr.test(g)?dn[g]=!0:(Lo[g]=!0,!1)}function Ga(g,S,T){if(kc(S))if(T===null)g.removeAttribute(S);else{switch(typeof T){case"undefined":case"function":case"symbol":g.removeAttribute(S);return;case"boolean":var F=S.toLowerCase().slice(0,5);if(F!=="data-"&&F!=="aria-"){g.removeAttribute(S);return}}g.setAttribute(S,""+T)}}function No(g,S,T){if(T===null)g.removeAttribute(S);else{switch(typeof T){case"undefined":case"function":case"symbol":case"boolean":g.removeAttribute(S);return}g.setAttribute(S,""+T)}}function Ei(g,S,T,F){if(F===null)g.removeAttribute(T);else{switch(typeof F){case"undefined":case"function":case"symbol":case"boolean":g.removeAttribute(T);return}g.setAttributeNS(S,T,""+F)}}function Kr(g){switch(typeof g){case"bigint":case"boolean":case"number":case"string":case"undefined":return g;case"object":return g;default:return""}}function Al(g){var S=g.type;return(g=g.nodeName)&&g.toLowerCase()==="input"&&(S==="checkbox"||S==="radio")}function Bc(g,S,T){var F=Object.getOwnPropertyDescriptor(g.constructor.prototype,S);if(!g.hasOwnProperty(S)&&typeof F<"u"&&typeof F.get=="function"&&typeof F.set=="function"){var G=F.get,U=F.set;return Object.defineProperty(g,S,{configurable:!0,get:function(){return G.call(this)},set:function(te){T=""+te,U.call(this,te)}}),Object.defineProperty(g,S,{enumerable:F.enumerable}),{getValue:function(){return T},setValue:function(te){T=""+te},stopTracking:function(){g._valueTracker=null,delete g[S]}}}}function Io(g){if(!g._valueTracker){var S=Al(g)?"checked":"value";g._valueTracker=Bc(g,S,""+g[S])}}function ir(g){if(!g)return!1;var S=g._valueTracker;if(!S)return!0;var T=S.getValue(),F="";return g&&(F=Al(g)?g.checked?"true":"false":g.value),g=F,g!==T?(S.setValue(g),!0):!1}function rn(g){if(g=g||(typeof document<"u"?document:void 0),typeof g>"u")return null;try{return g.activeElement||g.body}catch{return g.body}}var _l=/[\n"\\]/g;function sr(g){return g.replace(_l,function(S){return"\\"+S.charCodeAt(0).toString(16)+" "})}function Va(g,S,T,F,G,U,te,ve){g.name="",te!=null&&typeof te!="function"&&typeof te!="symbol"&&typeof te!="boolean"?g.type=te:g.removeAttribute("type"),S!=null?te==="number"?(S===0&&g.value===""||g.value!=S)&&(g.value=""+Kr(S)):g.value!==""+Kr(S)&&(g.value=""+Kr(S)):te!=="submit"&&te!=="reset"||g.removeAttribute("value"),S!=null?mi(g,te,Kr(S)):T!=null?mi(g,te,Kr(T)):F!=null&&g.removeAttribute("value"),G==null&&U!=null&&(g.defaultChecked=!!U),G!=null&&(g.checked=G&&typeof G!="function"&&typeof G!="symbol"),ve!=null&&typeof ve!="function"&&typeof ve!="symbol"&&typeof ve!="boolean"?g.name=""+Kr(ve):g.removeAttribute("name")}function Rl(g,S,T,F,G,U,te,ve){if(U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"&&(g.type=U),S!=null||T!=null){if(!(U!=="submit"&&U!=="reset"||S!=null)){Io(g);return}T=T!=null?""+Kr(T):"",S=S!=null?""+Kr(S):T,ve||S===g.value||(g.value=S),g.defaultValue=S}F=F??G,F=typeof F!="function"&&typeof F!="symbol"&&!!F,g.checked=ve?g.checked:!!F,g.defaultChecked=!!F,te!=null&&typeof te!="function"&&typeof te!="symbol"&&typeof te!="boolean"&&(g.name=te),Io(g)}function mi(g,S,T){S==="number"&&rn(g.ownerDocument)===g||g.defaultValue===""+T||(g.defaultValue=""+T)}function ts(g,S,T,F){if(g=g.options,S){S={};for(var G=0;G<T.length;G++)S["$"+T[G]]=!0;for(T=0;T<g.length;T++)G=S.hasOwnProperty("$"+g[T].value),g[T].selected!==G&&(g[T].selected=G),G&&F&&(g[T].defaultSelected=!0)}else{for(T=""+Kr(T),S=null,G=0;G<g.length;G++){if(g[G].value===T){g[G].selected=!0,F&&(g[G].defaultSelected=!0);return}S!==null||g[G].disabled||(S=g[G])}S!==null&&(S.selected=!0)}}function Tl(g,S,T){if(S!=null&&(S=""+Kr(S),S!==g.value&&(g.value=S),T==null)){g.defaultValue!==S&&(g.defaultValue=S);return}g.defaultValue=T!=null?""+Kr(T):""}function Dl(g,S,T,F){if(S==null){if(F!=null){if(T!=null)throw Error(o(92));if(we(F)){if(1<F.length)throw Error(o(93));F=F[0]}T=F}T==null&&(T=""),S=T}T=Kr(S),g.defaultValue=T,F=g.textContent,F===T&&F!==""&&F!==null&&(g.value=F),Io(g)}function sa(g,S){if(S){var T=g.firstChild;if(T&&T===g.lastChild&&T.nodeType===3){T.nodeValue=S;return}}g.textContent=S}var gd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hc(g,S,T){var F=S.indexOf("--")===0;T==null||typeof T=="boolean"||T===""?F?g.setProperty(S,""):S==="float"?g.cssFloat="":g[S]="":F?g.setProperty(S,T):typeof T!="number"||T===0||gd.has(S)?S==="float"?g.cssFloat=T:g[S]=(""+T).trim():g[S]=T+"px"}function Gc(g,S,T){if(S!=null&&typeof S!="object")throw Error(o(62));if(g=g.style,T!=null){for(var F in T)!T.hasOwnProperty(F)||S!=null&&S.hasOwnProperty(F)||(F.indexOf("--")===0?g.setProperty(F,""):F==="float"?g.cssFloat="":g[F]="");for(var G in S)F=S[G],S.hasOwnProperty(G)&&T[G]!==F&&Hc(g,G,F)}else for(var U in S)S.hasOwnProperty(U)&&Hc(g,U,S[U])}function Pl(g){if(g.indexOf("-")===-1)return!1;switch(g){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var md=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ko(g){return Vc.test(""+g)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":g}function ns(){}var Ml=null;function Ol(g){return g=g.target||g.srcElement||window,g.correspondingUseElement&&(g=g.correspondingUseElement),g.nodeType===3?g.parentNode:g}var aa=null,Ts=null;function zc(g){var S=ia(g);if(S&&(g=S.stateNode)){var T=g[rr]||null;e:switch(g=S.stateNode,S.type){case"input":if(Va(g,T.value,T.defaultValue,T.defaultValue,T.checked,T.defaultChecked,T.type,T.name),S=T.name,T.type==="radio"&&S!=null){for(T=g;T.parentNode;)T=T.parentNode;for(T=T.querySelectorAll('input[name="'+sr(""+S)+'"][type="radio"]'),S=0;S<T.length;S++){var F=T[S];if(F!==g&&F.form===g.form){var G=F[rr]||null;if(!G)throw Error(o(90));Va(F,G.value,G.defaultValue,G.defaultValue,G.checked,G.defaultChecked,G.type,G.name)}}for(S=0;S<T.length;S++)F=T[S],F.form===g.form&&ir(F)}break e;case"textarea":Tl(g,T.value,T.defaultValue);break e;case"select":S=T.value,S!=null&&ts(g,!!T.multiple,S,!1)}}}var Fl=!1;function Uc(g,S,T){if(Fl)return g(S,T);Fl=!0;try{var F=g(S);return F}finally{if(Fl=!1,(aa!==null||Ts!==null)&&(Si(),aa&&(S=aa,g=Ts,Ts=aa=null,zc(S),g)))for(S=0;S<g.length;S++)zc(g[S])}}function za(g,S){var T=g.stateNode;if(T===null)return null;var F=T[rr]||null;if(F===null)return null;T=F[S];e:switch(S){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(F=!F.disabled)||(g=g.type,F=!(g==="button"||g==="input"||g==="select"||g==="textarea")),g=!F;break e;default:g=!1}if(g)return null;if(T&&typeof T!="function")throw Error(o(231,S,typeof T));return T}var Ai=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jc=!1;if(Ai)try{var Ua={};Object.defineProperty(Ua,"passive",{get:function(){jc=!0}}),window.addEventListener("test",Ua,Ua),window.removeEventListener("test",Ua,Ua)}catch{jc=!1}var Ir=null,Ll=null,oa=null;function Bo(){if(oa)return oa;var g,S=Ll,T=S.length,F,G="value"in Ir?Ir.value:Ir.textContent,U=G.length;for(g=0;g<T&&S[g]===G[g];g++);var te=T-g;for(F=1;F<=te&&S[T-F]===G[U-F];F++);return oa=G.slice(g,1<F?1-F:void 0)}function Ho(g){var S=g.keyCode;return"charCode"in g?(g=g.charCode,g===0&&S===13&&(g=13)):g=S,g===10&&(g=13),32<=g||g===13?g:0}function ja(){return!0}function vd(){return!1}function ur(g){function S(T,F,G,U,te){this._reactName=T,this._targetInst=G,this.type=F,this.nativeEvent=U,this.target=te,this.currentTarget=null;for(var ve in g)g.hasOwnProperty(ve)&&(T=g[ve],this[ve]=T?T(U):U[ve]);return this.isDefaultPrevented=(U.defaultPrevented!=null?U.defaultPrevented:U.returnValue===!1)?ja:vd,this.isPropagationStopped=vd,this}return _(S.prototype,{preventDefault:function(){this.defaultPrevented=!0;var T=this.nativeEvent;T&&(T.preventDefault?T.preventDefault():typeof T.returnValue!="unknown"&&(T.returnValue=!1),this.isDefaultPrevented=ja)},stopPropagation:function(){var T=this.nativeEvent;T&&(T.stopPropagation?T.stopPropagation():typeof T.cancelBubble!="unknown"&&(T.cancelBubble=!0),this.isPropagationStopped=ja)},persist:function(){},isPersistent:ja}),S}var Ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(g){return g.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Go=ur(Ds),Wa=_({},Ds,{view:0,detail:0}),yd=ur(Wa),Vo,Nl,$a,qa=_({},Wa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hl,button:0,buttons:0,relatedTarget:function(g){return g.relatedTarget===void 0?g.fromElement===g.srcElement?g.toElement:g.fromElement:g.relatedTarget},movementX:function(g){return"movementX"in g?g.movementX:(g!==$a&&($a&&g.type==="mousemove"?(Vo=g.screenX-$a.screenX,Nl=g.screenY-$a.screenY):Nl=Vo=0,$a=g),Vo)},movementY:function(g){return"movementY"in g?g.movementY:Nl}}),Wc=ur(qa),Cd=_({},qa,{dataTransfer:0}),bd=ur(Cd),$c=_({},Wa,{relatedTarget:0}),Il=ur($c),Sd=_({},Ds,{animationName:0,elapsedTime:0,pseudoElement:0}),ef=ur(Sd),tf=_({},Ds,{clipboardData:function(g){return"clipboardData"in g?g.clipboardData:window.clipboardData}}),wd=ur(tf),zo=_({},Ds,{data:0}),kl=ur(zo),Bl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ed={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qc(g){var S=this.nativeEvent;return S.getModifierState?S.getModifierState(g):(g=Ed[g])?!!S[g]:!1}function Hl(){return qc}var Ad=_({},Wa,{key:function(g){if(g.key){var S=Bl[g.key]||g.key;if(S!=="Unidentified")return S}return g.type==="keypress"?(g=Ho(g),g===13?"Enter":String.fromCharCode(g)):g.type==="keydown"||g.type==="keyup"?xd[g.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hl,charCode:function(g){return g.type==="keypress"?Ho(g):0},keyCode:function(g){return g.type==="keydown"||g.type==="keyup"?g.keyCode:0},which:function(g){return g.type==="keypress"?Ho(g):g.type==="keydown"||g.type==="keyup"?g.keyCode:0}}),la=ur(Ad),Gl=_({},qa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kc=ur(Gl),Yc=_({},Wa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hl}),_d=ur(Yc),Rd=_({},Ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),nf=ur(Rd),Zn=_({},qa,{deltaX:function(g){return"deltaX"in g?g.deltaX:"wheelDeltaX"in g?-g.wheelDeltaX:0},deltaY:function(g){return"deltaY"in g?g.deltaY:"wheelDeltaY"in g?-g.wheelDeltaY:"wheelDelta"in g?-g.wheelDelta:0},deltaZ:0,deltaMode:0}),Td=ur(Zn),Dd=_({},Ds,{newState:0,oldState:0}),Pd=ur(Dd),Md=[9,13,27,32],ca=Ai&&"CompositionEvent"in window,Ka=null;Ai&&"documentMode"in document&&(Ka=document.documentMode);var Vl=Ai&&"TextEvent"in window&&!Ka,Xc=Ai&&(!ca||Ka&&8<Ka&&11>=Ka),Od=" ",Uo=!1;function zl(g,S){switch(g){case"keyup":return Md.indexOf(S.keyCode)!==-1;case"keydown":return S.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zc(g){return g=g.detail,typeof g=="object"&&"data"in g?g.data:null}var ua=!1;function Fd(g,S){switch(g){case"compositionend":return Zc(S);case"keypress":return S.which!==32?null:(Uo=!0,Od);case"textInput":return g=S.data,g===Od&&Uo?null:g;default:return null}}function Qc(g,S){if(ua)return g==="compositionend"||!ca&&zl(g,S)?(g=Bo(),oa=Ll=Ir=null,ua=!1,g):null;switch(g){case"paste":return null;case"keypress":if(!(S.ctrlKey||S.altKey||S.metaKey)||S.ctrlKey&&S.altKey){if(S.char&&1<S.char.length)return S.char;if(S.which)return String.fromCharCode(S.which)}return null;case"compositionend":return Xc&&S.locale!=="ko"?null:S.data;default:return null}}var Jc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eu(g){var S=g&&g.nodeName&&g.nodeName.toLowerCase();return S==="input"?!!Jc[g.type]:S==="textarea"}function Ul(g,S,T,F){aa?Ts?Ts.push(F):Ts=[F]:aa=F,S=Hh(S,"onChange"),0<S.length&&(T=new Go("onChange","change",null,T,F),g.push({event:T,listeners:S}))}var Ps=null,da=null;function Ld(g){Nf(g,0)}function Ya(g){var S=Ha(g);if(ir(S))return g}function tu(g,S){if(g==="change")return S}var _i=!1;if(Ai){var jo;if(Ai){var nu="oninput"in document;if(!nu){var ru=document.createElement("div");ru.setAttribute("oninput","return;"),nu=typeof ru.oninput=="function"}jo=nu}else jo=!1;_i=jo&&(!document.documentMode||9<document.documentMode)}function Yr(){Ps&&(Ps.detachEvent("onpropertychange",Wo),da=Ps=null)}function Wo(g){if(g.propertyName==="value"&&Ya(da)){var S=[];Ul(S,da,g,Ol(g)),Uc(Ld,S)}}function Nd(g,S,T){g==="focusin"?(Yr(),Ps=S,da=T,Ps.attachEvent("onpropertychange",Wo)):g==="focusout"&&Yr()}function iu(g){if(g==="selectionchange"||g==="keyup"||g==="keydown")return Ya(da)}function Id(g,S){if(g==="click")return Ya(S)}function kd(g,S){if(g==="input"||g==="change")return Ya(S)}function su(g,S){return g===S&&(g!==0||1/g===1/S)||g!==g&&S!==S}var dr=typeof Object.is=="function"?Object.is:su;function Xa(g,S){if(dr(g,S))return!0;if(typeof g!="object"||g===null||typeof S!="object"||S===null)return!1;var T=Object.keys(g),F=Object.keys(S);if(T.length!==F.length)return!1;for(F=0;F<T.length;F++){var G=T[F];if(!$e.call(S,G)||!dr(g[G],S[G]))return!1}return!0}function $o(g){for(;g&&g.firstChild;)g=g.firstChild;return g}function Za(g,S){var T=$o(g);g=0;for(var F;T;){if(T.nodeType===3){if(F=g+T.textContent.length,g<=S&&F>=S)return{node:T,offset:S-g};g=F}e:{for(;T;){if(T.nextSibling){T=T.nextSibling;break e}T=T.parentNode}T=void 0}T=$o(T)}}function Yt(g,S){return g&&S?g===S?!0:g&&g.nodeType===3?!1:S&&S.nodeType===3?Yt(g,S.parentNode):"contains"in g?g.contains(S):g.compareDocumentPosition?!!(g.compareDocumentPosition(S)&16):!1:!1}function Bd(g){g=g!=null&&g.ownerDocument!=null&&g.ownerDocument.defaultView!=null?g.ownerDocument.defaultView:window;for(var S=rn(g.document);S instanceof g.HTMLIFrameElement;){try{var T=typeof S.contentWindow.location.href=="string"}catch{T=!1}if(T)g=S.contentWindow;else break;S=rn(g.document)}return S}function au(g){var S=g&&g.nodeName&&g.nodeName.toLowerCase();return S&&(S==="input"&&(g.type==="text"||g.type==="search"||g.type==="tel"||g.type==="url"||g.type==="password")||S==="textarea"||g.contentEditable==="true")}var Hd=Ai&&"documentMode"in document&&11>=document.documentMode,Ri=null,Ti=null,Qa=null,jl=!1;function Ja(g,S,T){var F=T.window===T?T.document:T.nodeType===9?T:T.ownerDocument;jl||Ri==null||Ri!==rn(F)||(F=Ri,"selectionStart"in F&&au(F)?F={start:F.selectionStart,end:F.selectionEnd}:(F=(F.ownerDocument&&F.ownerDocument.defaultView||window).getSelection(),F={anchorNode:F.anchorNode,anchorOffset:F.anchorOffset,focusNode:F.focusNode,focusOffset:F.focusOffset}),Qa&&Xa(Qa,F)||(Qa=F,F=Hh(Ti,"onSelect"),0<F.length&&(S=new Go("onSelect","select",null,S,T),g.push({event:S,listeners:F}),S.target=Ri)))}function ar(g,S){var T={};return T[g.toLowerCase()]=S.toLowerCase(),T["Webkit"+g]="webkit"+S,T["Moz"+g]="moz"+S,T}var ha={animationend:ar("Animation","AnimationEnd"),animationiteration:ar("Animation","AnimationIteration"),animationstart:ar("Animation","AnimationStart"),transitionrun:ar("Transition","TransitionRun"),transitionstart:ar("Transition","TransitionStart"),transitioncancel:ar("Transition","TransitionCancel"),transitionend:ar("Transition","TransitionEnd")},qo={},ou={};Ai&&(ou=document.createElement("div").style,"AnimationEvent"in window||(delete ha.animationend.animation,delete ha.animationiteration.animation,delete ha.animationstart.animation),"TransitionEvent"in window||delete ha.transitionend.transition);function rs(g){if(qo[g])return qo[g];if(!ha[g])return g;var S=ha[g],T;for(T in S)if(S.hasOwnProperty(T)&&T in ou)return qo[g]=S[T];return g}var Wl=rs("animationend"),Ko=rs("animationiteration"),lu=rs("animationstart"),Gd=rs("transitionrun"),rf=rs("transitionstart"),Vd=rs("transitioncancel"),cu=rs("transitionend"),Xr=new Map,Yo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yo.push("scrollEnd");function Zr(g,S){Xr.set(g,S),Rs(S,[g])}var Xo=typeof reportError=="function"?reportError:function(g){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var S=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof g=="object"&&g!==null&&typeof g.message=="string"?String(g.message):String(g),error:g});if(!window.dispatchEvent(S))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",g);return}console.error(g)},Qr=[],ss=0,jn=0;function Zo(){for(var g=ss,S=jn=ss=0;S<g;){var T=Qr[S];Qr[S++]=null;var F=Qr[S];Qr[S++]=null;var G=Qr[S];Qr[S++]=null;var U=Qr[S];if(Qr[S++]=null,F!==null&&G!==null){var te=F.pending;te===null?G.next=G:(G.next=te.next,te.next=G),F.pending=G}U!==0&&Ms(T,G,U)}}function Wn(g,S,T,F){Qr[ss++]=g,Qr[ss++]=S,Qr[ss++]=T,Qr[ss++]=F,jn|=F,g.lanes|=F,g=g.alternate,g!==null&&(g.lanes|=F)}function $l(g,S,T,F){return Wn(g,S,T,F),Jr(g)}function hr(g,S){return Wn(g,null,null,S),Jr(g)}function Ms(g,S,T){g.lanes|=T;var F=g.alternate;F!==null&&(F.lanes|=T);for(var G=!1,U=g.return;U!==null;)U.childLanes|=T,F=U.alternate,F!==null&&(F.childLanes|=T),U.tag===22&&(g=U.stateNode,g===null||g._visibility&1||(G=!0)),g=U,U=U.return;return g.tag===3?(U=g.stateNode,G&&S!==null&&(G=31-Pe(T),g=U.hiddenUpdates,F=g[G],F===null?g[G]=[S]:F.push(S),S.lane=T|536870912),U):null}function Jr(g){if(50<Xs)throw Xs=0,Oa=null,Error(o(185));for(var S=g.return;S!==null;)g=S,S=g.return;return g.tag===3?g.stateNode:null}var Os={};function uu(g,S,T,F){this.tag=g,this.key=T,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=S,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=F,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(g,S,T,F){return new uu(g,S,T,F)}function ql(g){return g=g.prototype,!(!g||!g.isReactComponent)}function wr(g,S){var T=g.alternate;return T===null?(T=hn(g.tag,S,g.key,g.mode),T.elementType=g.elementType,T.type=g.type,T.stateNode=g.stateNode,T.alternate=g,g.alternate=T):(T.pendingProps=S,T.type=g.type,T.flags=0,T.subtreeFlags=0,T.deletions=null),T.flags=g.flags&65011712,T.childLanes=g.childLanes,T.lanes=g.lanes,T.child=g.child,T.memoizedProps=g.memoizedProps,T.memoizedState=g.memoizedState,T.updateQueue=g.updateQueue,S=g.dependencies,T.dependencies=S===null?null:{lanes:S.lanes,firstContext:S.firstContext},T.sibling=g.sibling,T.index=g.index,T.ref=g.ref,T.refCleanup=g.refCleanup,T}function eo(g,S){g.flags&=65011714;var T=g.alternate;return T===null?(g.childLanes=0,g.lanes=S,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=T.childLanes,g.lanes=T.lanes,g.child=T.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=T.memoizedProps,g.memoizedState=T.memoizedState,g.updateQueue=T.updateQueue,g.type=T.type,S=T.dependencies,g.dependencies=S===null?null:{lanes:S.lanes,firstContext:S.firstContext}),g}function Di(g,S,T,F,G,U){var te=0;if(F=g,typeof g=="function")ql(g)&&(te=1);else if(typeof g=="string")te=Wp(g,T,ye.current)?26:g==="html"||g==="head"||g==="body"?27:5;else e:switch(g){case ae:return g=hn(31,T,S,G),g.elementType=ae,g.lanes=U,g;case N:return Fs(T.children,G,U,S);case I:te=8,G|=24;break;case B:return g=hn(12,T,S,G|2),g.elementType=B,g.lanes=U,g;case z:return g=hn(13,T,S,G),g.elementType=z,g.lanes=U,g;case $:return g=hn(19,T,S,G),g.elementType=$,g.lanes=U,g;default:if(typeof g=="object"&&g!==null)switch(g.$$typeof){case j:te=10;break e;case V:te=9;break e;case q:te=11;break e;case ee:te=14;break e;case ie:te=16,F=null;break e}te=29,T=Error(o(130,g===null?"null":typeof g,"")),F=null}return S=hn(te,T,S,G),S.elementType=g,S.type=F,S.lanes=U,S}function Fs(g,S,T,F){return g=hn(7,g,F,S),g.lanes=T,g}function Kl(g,S,T){return g=hn(6,g,null,S),g.lanes=T,g}function no(g){var S=hn(18,null,null,0);return S.stateNode=g,S}function Yl(g,S,T){return S=hn(4,g.children!==null?g.children:[],g.key,S),S.lanes=T,S.stateNode={containerInfo:g.containerInfo,pendingChildren:null,implementation:g.implementation},S}var Qo=new WeakMap;function Br(g,S){if(typeof g=="object"&&g!==null){var T=Qo.get(g);return T!==void 0?T:(S={value:g,source:S,stack:Be(S)},Qo.set(g,S),S)}return{value:g,source:S,stack:Be(S)}}var Ls=[],Ns=0,ro=null,io=0,xr=[],sn=0,as=null,fn=1,vi="";function Pi(g,S){Ls[Ns++]=io,Ls[Ns++]=ro,ro=g,io=S}function zd(g,S,T){xr[sn++]=fn,xr[sn++]=vi,xr[sn++]=as,as=g;var F=fn;g=vi;var G=32-Pe(F)-1;F&=~(1<<G),T+=1;var U=32-Pe(S)+G;if(30<U){var te=G-G%5;U=(F&(1<<te)-1).toString(32),F>>=te,G-=te,fn=1<<32-Pe(S)+G|T<<G|F,vi=U+g}else fn=1<<U|T<<G|F,vi=g}function Mi(g){g.return!==null&&(Pi(g,1),zd(g,1,0))}function Xl(g){for(;g===ro;)ro=Ls[--Ns],Ls[Ns]=null,io=Ls[--Ns],Ls[Ns]=null;for(;g===as;)as=xr[--sn],xr[sn]=null,vi=xr[--sn],xr[sn]=null,fn=xr[--sn],xr[sn]=null}function Zl(g,S){xr[sn++]=fn,xr[sn++]=vi,xr[sn++]=as,fn=S.id,vi=S.overflow,as=g}var Sn=null,Xt=null,Ft=!1,os=null,Hr=!1,so=Error(o(519));function Oi(g){var S=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Fi(Br(S,g)),so}function Ud(g){var S=g.stateNode,T=g.type,F=g.memoizedProps;switch(S[On]=g,S[rr]=F,T){case"dialog":It("cancel",S),It("close",S);break;case"iframe":case"object":case"embed":It("load",S);break;case"video":case"audio":for(T=0;T<hi.length;T++)It(hi[T],S);break;case"source":It("error",S);break;case"img":case"image":case"link":It("error",S),It("load",S);break;case"details":It("toggle",S);break;case"input":It("invalid",S),Rl(S,F.value,F.defaultValue,F.checked,F.defaultChecked,F.type,F.name,!0);break;case"select":It("invalid",S);break;case"textarea":It("invalid",S),Dl(S,F.value,F.defaultValue,F.children)}T=F.children,typeof T!="string"&&typeof T!="number"&&typeof T!="bigint"||S.textContent===""+T||F.suppressHydrationWarning===!0||Hf(S.textContent,T)?(F.popover!=null&&(It("beforetoggle",S),It("toggle",S)),F.onScroll!=null&&It("scroll",S),F.onScrollEnd!=null&&It("scrollend",S),F.onClick!=null&&(S.onclick=ns),S=!0):S=!1,S||Oi(g,!0)}function jd(g){for(Sn=g.return;Sn;)switch(Sn.tag){case 5:case 31:case 13:Hr=!1;return;case 27:case 3:Hr=!0;return;default:Sn=Sn.return}}function ao(g){if(g!==Sn)return!1;if(!Ft)return jd(g),Ft=!0,!1;var S=g.tag,T;if((T=S!==3&&S!==27)&&((T=S===5)&&(T=g.type,T=!(T!=="form"&&T!=="button")||bf(g.type,g.memoizedProps)),T=!T),T&&Xt&&Oi(g),jd(g),S===13){if(g=g.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(o(317));Xt=Kf(g)}else if(S===31){if(g=g.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(o(317));Xt=Kf(g)}else S===27?(S=Xt,Ro(g.type)?(g=Af,Af=null,Xt=g):Xt=S):Xt=Sn?qi(g.stateNode.nextSibling):null;return!0}function Is(){Xt=Sn=null,Ft=!1}function Ql(){var g=os;return g!==null&&(xn===null?xn=g:xn.push.apply(xn,g),os=null),g}function Fi(g){os===null?os=[g]:os.push(g)}var oo=K(null),ks=null,Li=null;function ls(g,S,T){ue(oo,S._currentValue),S._currentValue=T}function Ni(g){g._currentValue=oo.current,ne(oo)}function Jl(g,S,T){for(;g!==null;){var F=g.alternate;if((g.childLanes&S)!==S?(g.childLanes|=S,F!==null&&(F.childLanes|=S)):F!==null&&(F.childLanes&S)!==S&&(F.childLanes|=S),g===T)break;g=g.return}}function ec(g,S,T,F){var G=g.child;for(G!==null&&(G.return=g);G!==null;){var U=G.dependencies;if(U!==null){var te=G.child;U=U.firstContext;e:for(;U!==null;){var ve=U;U=G;for(var Ae=0;Ae<S.length;Ae++)if(ve.context===S[Ae]){U.lanes|=T,ve=U.alternate,ve!==null&&(ve.lanes|=T),Jl(U.return,T,g),F||(te=null);break e}U=ve.next}}else if(G.tag===18){if(te=G.return,te===null)throw Error(o(341));te.lanes|=T,U=te.alternate,U!==null&&(U.lanes|=T),Jl(te,T,g),te=null}else te=G.child;if(te!==null)te.return=G;else for(te=G;te!==null;){if(te===g){te=null;break}if(G=te.sibling,G!==null){G.return=te.return,te=G;break}te=te.return}G=te}}function Ii(g,S,T,F){g=null;for(var G=S,U=!1;G!==null;){if(!U){if((G.flags&524288)!==0)U=!0;else if((G.flags&262144)!==0)break}if(G.tag===10){var te=G.alternate;if(te===null)throw Error(o(387));if(te=te.memoizedProps,te!==null){var ve=G.type;dr(G.pendingProps.value,te.value)||(g!==null?g.push(ve):g=[ve])}}else if(G===le.current){if(te=G.alternate,te===null)throw Error(o(387));te.memoizedState.memoizedState!==G.memoizedState.memoizedState&&(g!==null?g.push(ld):g=[ld])}G=G.return}g!==null&&ec(S,g,T,F),S.flags|=262144}function Jo(g){for(g=g.firstContext;g!==null;){if(!dr(g.context._currentValue,g.memoizedValue))return!0;g=g.next}return!1}function Bs(g){ks=g,Li=null,g=g.dependencies,g!==null&&(g.firstContext=null)}function gt(g){return Wd(ks,g)}function lo(g,S){return ks===null&&Bs(g),Wd(g,S)}function Wd(g,S){var T=S._currentValue;if(S={context:S,memoizedValue:T,next:null},Li===null){if(g===null)throw Error(o(308));Li=S,g.dependencies={lanes:0,firstContext:S},g.flags|=524288}else Li=Li.next=S;return T}var $d=typeof AbortController<"u"?AbortController:function(){var g=[],S=this.signal={aborted:!1,addEventListener:function(T,F){g.push(F)}};this.abort=function(){S.aborted=!0,g.forEach(function(T){return T()})}},sf=e.unstable_scheduleCallback,af=e.unstable_NormalPriority,Ln={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function du(){return{controller:new $d,data:new Map,refCount:0}}function fa(g){g.refCount--,g.refCount===0&&sf(af,function(){g.controller.abort()})}var Gr=null,tc=0,cs=0,ei=null;function hu(g,S){if(Gr===null){var T=Gr=[];tc=0,cs=Ve(),ei={status:"pending",value:void 0,then:function(F){T.push(F)}}}return tc++,S.then(fu,fu),S}function fu(){if(--tc===0&&Gr!==null){ei!==null&&(ei.status="fulfilled");var g=Gr;Gr=null,cs=0,ei=null;for(var S=0;S<g.length;S++)(0,g[S])()}}function pu(g,S){var T=[],F={status:"pending",value:null,reason:null,then:function(G){T.push(G)}};return g.then(function(){F.status="fulfilled",F.value=S;for(var G=0;G<T.length;G++)(0,T[G])(S)},function(G){for(F.status="rejected",F.reason=G,G=0;G<T.length;G++)(0,T[G])(void 0)}),F}var qd=oe.S;oe.S=function(g,S){td=at(),typeof S=="object"&&S!==null&&typeof S.then=="function"&&hu(g,S),qd!==null&&qd(g,S)};var Hs=K(null);function nc(){var g=Hs.current;return g!==null?g:mt.pooledCache}function el(g,S){S===null?ue(Hs,Hs.current):ue(Hs,S.pool)}function gu(){var g=nc();return g===null?null:{parent:Ln._currentValue,pool:g}}var pa=Error(o(460)),tl=Error(o(474)),xt=Error(o(542)),rc={then:function(){}};function Er(g){return g=g.status,g==="fulfilled"||g==="rejected"}function ic(g,S,T){switch(T=g[T],T===void 0?g.push(S):T!==S&&(S.then(ns,ns),S=T),S.status){case"fulfilled":return S.value;case"rejected":throw g=S.reason,va(g),g;default:if(typeof S.status=="string")S.then(ns,ns);else{if(g=mt,g!==null&&100<g.shellSuspendCounter)throw Error(o(482));g=S,g.status="pending",g.then(function(F){if(S.status==="pending"){var G=S;G.status="fulfilled",G.value=F}},function(F){if(S.status==="pending"){var G=S;G.status="rejected",G.reason=F}})}switch(S.status){case"fulfilled":return S.value;case"rejected":throw g=S.reason,va(g),g}throw ki=S,pa}}function ga(g){try{var S=g._init;return S(g._payload)}catch(T){throw T!==null&&typeof T=="object"&&typeof T.then=="function"?(ki=T,pa):T}}var ki=null;function ma(){if(ki===null)throw Error(o(459));var g=ki;return ki=null,g}function va(g){if(g===pa||g===xt)throw Error(o(483))}var ya=null,Ca=0;function nl(g){var S=Ca;return Ca+=1,ya===null&&(ya=[]),ic(ya,g,S)}function ti(g,S){S=S.props.ref,g.ref=S!==void 0?S:null}function co(g,S){throw S.$$typeof===D?Error(o(525)):(g=Object.prototype.toString.call(S),Error(o(31,g==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":g)))}function sc(g){function S(Me,Re){if(g){var Ie=Me.deletions;Ie===null?(Me.deletions=[Re],Me.flags|=16):Ie.push(Re)}}function T(Me,Re){if(!g)return null;for(;Re!==null;)S(Me,Re),Re=Re.sibling;return null}function F(Me){for(var Re=new Map;Me!==null;)Me.key!==null?Re.set(Me.key,Me):Re.set(Me.index,Me),Me=Me.sibling;return Re}function G(Me,Re){return Me=wr(Me,Re),Me.index=0,Me.sibling=null,Me}function U(Me,Re,Ie){return Me.index=Ie,g?(Ie=Me.alternate,Ie!==null?(Ie=Ie.index,Ie<Re?(Me.flags|=67108866,Re):Ie):(Me.flags|=67108866,Re)):(Me.flags|=1048576,Re)}function te(Me){return g&&Me.alternate===null&&(Me.flags|=67108866),Me}function ve(Me,Re,Ie,qe){return Re===null||Re.tag!==6?(Re=Kl(Ie,Me.mode,qe),Re.return=Me,Re):(Re=G(Re,Ie),Re.return=Me,Re)}function Ae(Me,Re,Ie,qe){var dt=Ie.type;return dt===N?We(Me,Re,Ie.props.children,qe,Ie.key):Re!==null&&(Re.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===ie&&ga(dt)===Re.type)?(Re=G(Re,Ie.props),ti(Re,Ie),Re.return=Me,Re):(Re=Di(Ie.type,Ie.key,Ie.props,null,Me.mode,qe),ti(Re,Ie),Re.return=Me,Re)}function ke(Me,Re,Ie,qe){return Re===null||Re.tag!==4||Re.stateNode.containerInfo!==Ie.containerInfo||Re.stateNode.implementation!==Ie.implementation?(Re=Yl(Ie,Me.mode,qe),Re.return=Me,Re):(Re=G(Re,Ie.children||[]),Re.return=Me,Re)}function We(Me,Re,Ie,qe,dt){return Re===null||Re.tag!==7?(Re=Fs(Ie,Me.mode,qe,dt),Re.return=Me,Re):(Re=G(Re,Ie),Re.return=Me,Re)}function Ke(Me,Re,Ie){if(typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint")return Re=Kl(""+Re,Me.mode,Ie),Re.return=Me,Re;if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case O:return Ie=Di(Re.type,Re.key,Re.props,null,Me.mode,Ie),ti(Ie,Re),Ie.return=Me,Ie;case M:return Re=Yl(Re,Me.mode,Ie),Re.return=Me,Re;case ie:return Re=ga(Re),Ke(Me,Re,Ie)}if(we(Re)||be(Re))return Re=Fs(Re,Me.mode,Ie,null),Re.return=Me,Re;if(typeof Re.then=="function")return Ke(Me,nl(Re),Ie);if(Re.$$typeof===j)return Ke(Me,lo(Me,Re),Ie);co(Me,Re)}return null}function Ge(Me,Re,Ie,qe){var dt=Re!==null?Re.key:null;if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return dt!==null?null:ve(Me,Re,""+Ie,qe);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case O:return Ie.key===dt?Ae(Me,Re,Ie,qe):null;case M:return Ie.key===dt?ke(Me,Re,Ie,qe):null;case ie:return Ie=ga(Ie),Ge(Me,Re,Ie,qe)}if(we(Ie)||be(Ie))return dt!==null?null:We(Me,Re,Ie,qe,null);if(typeof Ie.then=="function")return Ge(Me,Re,nl(Ie),qe);if(Ie.$$typeof===j)return Ge(Me,Re,lo(Me,Ie),qe);co(Me,Ie)}return null}function Ue(Me,Re,Ie,qe,dt){if(typeof qe=="string"&&qe!==""||typeof qe=="number"||typeof qe=="bigint")return Me=Me.get(Ie)||null,ve(Re,Me,""+qe,dt);if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case O:return Me=Me.get(qe.key===null?Ie:qe.key)||null,Ae(Re,Me,qe,dt);case M:return Me=Me.get(qe.key===null?Ie:qe.key)||null,ke(Re,Me,qe,dt);case ie:return qe=ga(qe),Ue(Me,Re,Ie,qe,dt)}if(we(qe)||be(qe))return Me=Me.get(Ie)||null,We(Re,Me,qe,dt,null);if(typeof qe.then=="function")return Ue(Me,Re,Ie,nl(qe),dt);if(qe.$$typeof===j)return Ue(Me,Re,Ie,lo(Re,qe),dt);co(Re,qe)}return null}function ot(Me,Re,Ie,qe){for(var dt=null,zt=null,lt=Re,_t=Re=0,Bt=null;lt!==null&&_t<Ie.length;_t++){lt.index>_t?(Bt=lt,lt=null):Bt=lt.sibling;var Ut=Ge(Me,lt,Ie[_t],qe);if(Ut===null){lt===null&&(lt=Bt);break}g&&lt&&Ut.alternate===null&&S(Me,lt),Re=U(Ut,Re,_t),zt===null?dt=Ut:zt.sibling=Ut,zt=Ut,lt=Bt}if(_t===Ie.length)return T(Me,lt),Ft&&Pi(Me,_t),dt;if(lt===null){for(;_t<Ie.length;_t++)lt=Ke(Me,Ie[_t],qe),lt!==null&&(Re=U(lt,Re,_t),zt===null?dt=lt:zt.sibling=lt,zt=lt);return Ft&&Pi(Me,_t),dt}for(lt=F(lt);_t<Ie.length;_t++)Bt=Ue(lt,Me,_t,Ie[_t],qe),Bt!==null&&(g&&Bt.alternate!==null&&lt.delete(Bt.key===null?_t:Bt.key),Re=U(Bt,Re,_t),zt===null?dt=Bt:zt.sibling=Bt,zt=Bt);return g&&lt.forEach(function(Oo){return S(Me,Oo)}),Ft&&Pi(Me,_t),dt}function pt(Me,Re,Ie,qe){if(Ie==null)throw Error(o(151));for(var dt=null,zt=null,lt=Re,_t=Re=0,Bt=null,Ut=Ie.next();lt!==null&&!Ut.done;_t++,Ut=Ie.next()){lt.index>_t?(Bt=lt,lt=null):Bt=lt.sibling;var Oo=Ge(Me,lt,Ut.value,qe);if(Oo===null){lt===null&&(lt=Bt);break}g&&lt&&Oo.alternate===null&&S(Me,lt),Re=U(Oo,Re,_t),zt===null?dt=Oo:zt.sibling=Oo,zt=Oo,lt=Bt}if(Ut.done)return T(Me,lt),Ft&&Pi(Me,_t),dt;if(lt===null){for(;!Ut.done;_t++,Ut=Ie.next())Ut=Ke(Me,Ut.value,qe),Ut!==null&&(Re=U(Ut,Re,_t),zt===null?dt=Ut:zt.sibling=Ut,zt=Ut);return Ft&&Pi(Me,_t),dt}for(lt=F(lt);!Ut.done;_t++,Ut=Ie.next())Ut=Ue(lt,Me,_t,Ut.value,qe),Ut!==null&&(g&&Ut.alternate!==null&&lt.delete(Ut.key===null?_t:Ut.key),Re=U(Ut,Re,_t),zt===null?dt=Ut:zt.sibling=Ut,zt=Ut);return g&&lt.forEach(function(ng){return S(Me,ng)}),Ft&&Pi(Me,_t),dt}function Jt(Me,Re,Ie,qe){if(typeof Ie=="object"&&Ie!==null&&Ie.type===N&&Ie.key===null&&(Ie=Ie.props.children),typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case O:e:{for(var dt=Ie.key;Re!==null;){if(Re.key===dt){if(dt=Ie.type,dt===N){if(Re.tag===7){T(Me,Re.sibling),qe=G(Re,Ie.props.children),qe.return=Me,Me=qe;break e}}else if(Re.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===ie&&ga(dt)===Re.type){T(Me,Re.sibling),qe=G(Re,Ie.props),ti(qe,Ie),qe.return=Me,Me=qe;break e}T(Me,Re);break}else S(Me,Re);Re=Re.sibling}Ie.type===N?(qe=Fs(Ie.props.children,Me.mode,qe,Ie.key),qe.return=Me,Me=qe):(qe=Di(Ie.type,Ie.key,Ie.props,null,Me.mode,qe),ti(qe,Ie),qe.return=Me,Me=qe)}return te(Me);case M:e:{for(dt=Ie.key;Re!==null;){if(Re.key===dt)if(Re.tag===4&&Re.stateNode.containerInfo===Ie.containerInfo&&Re.stateNode.implementation===Ie.implementation){T(Me,Re.sibling),qe=G(Re,Ie.children||[]),qe.return=Me,Me=qe;break e}else{T(Me,Re);break}else S(Me,Re);Re=Re.sibling}qe=Yl(Ie,Me.mode,qe),qe.return=Me,Me=qe}return te(Me);case ie:return Ie=ga(Ie),Jt(Me,Re,Ie,qe)}if(we(Ie))return ot(Me,Re,Ie,qe);if(be(Ie)){if(dt=be(Ie),typeof dt!="function")throw Error(o(150));return Ie=dt.call(Ie),pt(Me,Re,Ie,qe)}if(typeof Ie.then=="function")return Jt(Me,Re,nl(Ie),qe);if(Ie.$$typeof===j)return Jt(Me,Re,lo(Me,Ie),qe);co(Me,Ie)}return typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint"?(Ie=""+Ie,Re!==null&&Re.tag===6?(T(Me,Re.sibling),qe=G(Re,Ie),qe.return=Me,Me=qe):(T(Me,Re),qe=Kl(Ie,Me.mode,qe),qe.return=Me,Me=qe),te(Me)):T(Me,Re)}return function(Me,Re,Ie,qe){try{Ca=0;var dt=Jt(Me,Re,Ie,qe);return ya=null,dt}catch(lt){if(lt===pa||lt===xt)throw lt;var zt=hn(29,lt,null,Me.mode);return zt.lanes=qe,zt.return=Me,zt}finally{}}}var us=sc(!0),ac=sc(!1),fr=!1;function rl(g){g.updateQueue={baseState:g.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mu(g,S){g=g.updateQueue,S.updateQueue===g&&(S.updateQueue={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,callbacks:null})}function ds(g){return{lane:g,tag:0,payload:null,callback:null,next:null}}function Gs(g,S,T){var F=g.updateQueue;if(F===null)return null;if(F=F.shared,(ct&2)!==0){var G=F.pending;return G===null?S.next=S:(S.next=G.next,G.next=S),F.pending=S,S=Jr(g),Ms(g,null,T),S}return Wn(g,F,S,T),Jr(g)}function Vs(g,S,T){if(S=S.updateQueue,S!==null&&(S=S.shared,(T&4194048)!==0)){var F=S.lanes;F&=g.pendingLanes,T|=F,S.lanes=T,Xi(g,T)}}function ut(g,S){var T=g.updateQueue,F=g.alternate;if(F!==null&&(F=F.updateQueue,T===F)){var G=null,U=null;if(T=T.firstBaseUpdate,T!==null){do{var te={lane:T.lane,tag:T.tag,payload:T.payload,callback:null,next:null};U===null?G=U=te:U=U.next=te,T=T.next}while(T!==null);U===null?G=U=S:U=U.next=S}else G=U=S;T={baseState:F.baseState,firstBaseUpdate:G,lastBaseUpdate:U,shared:F.shared,callbacks:F.callbacks},g.updateQueue=T;return}g=T.lastBaseUpdate,g===null?T.firstBaseUpdate=S:g.next=S,T.lastBaseUpdate=S}var vu=!1;function il(){if(vu){var g=ei;if(g!==null)throw g}}function uo(g,S,T,F){vu=!1;var G=g.updateQueue;fr=!1;var U=G.firstBaseUpdate,te=G.lastBaseUpdate,ve=G.shared.pending;if(ve!==null){G.shared.pending=null;var Ae=ve,ke=Ae.next;Ae.next=null,te===null?U=ke:te.next=ke,te=Ae;var We=g.alternate;We!==null&&(We=We.updateQueue,ve=We.lastBaseUpdate,ve!==te&&(ve===null?We.firstBaseUpdate=ke:ve.next=ke,We.lastBaseUpdate=Ae))}if(U!==null){var Ke=G.baseState;te=0,We=ke=Ae=null,ve=U;do{var Ge=ve.lane&-536870913,Ue=Ge!==ve.lane;if(Ue?(St&Ge)===Ge:(F&Ge)===Ge){Ge!==0&&Ge===cs&&(vu=!0),We!==null&&(We=We.next={lane:0,tag:ve.tag,payload:ve.payload,callback:null,next:null});e:{var ot=g,pt=ve;Ge=S;var Jt=T;switch(pt.tag){case 1:if(ot=pt.payload,typeof ot=="function"){Ke=ot.call(Jt,Ke,Ge);break e}Ke=ot;break e;case 3:ot.flags=ot.flags&-65537|128;case 0:if(ot=pt.payload,Ge=typeof ot=="function"?ot.call(Jt,Ke,Ge):ot,Ge==null)break e;Ke=_({},Ke,Ge);break e;case 2:fr=!0}}Ge=ve.callback,Ge!==null&&(g.flags|=64,Ue&&(g.flags|=8192),Ue=G.callbacks,Ue===null?G.callbacks=[Ge]:Ue.push(Ge))}else Ue={lane:Ge,tag:ve.tag,payload:ve.payload,callback:ve.callback,next:null},We===null?(ke=We=Ue,Ae=Ke):We=We.next=Ue,te|=Ge;if(ve=ve.next,ve===null){if(ve=G.shared.pending,ve===null)break;Ue=ve,ve=Ue.next,Ue.next=null,G.lastBaseUpdate=Ue,G.shared.pending=null}}while(!0);We===null&&(Ae=Ke),G.baseState=Ae,G.firstBaseUpdate=ke,G.lastBaseUpdate=We,U===null&&(G.shared.lanes=0),ji|=te,g.lanes=te,g.memoizedState=Ke}}function ho(g,S){if(typeof g!="function")throw Error(o(191,g));g.call(S)}function Kd(g,S){var T=g.callbacks;if(T!==null)for(g.callbacks=null,g=0;g<T.length;g++)ho(T[g],S)}var fo=K(null),oc=K(0);function Yd(g,S){g=jr,ue(oc,g),ue(fo,S),jr=g|S.baseLanes}function yu(){ue(oc,jr),ue(fo,fo.current)}function sl(){jr=oc.current,ne(fo),ne(oc)}var Ar=K(null),pr=null;function hs(g){var S=g.alternate;ue(Lt,Lt.current&1),ue(Ar,g),pr===null&&(S===null||fo.current!==null||S.memoizedState!==null)&&(pr=g)}function Cu(g){ue(Lt,Lt.current),ue(Ar,g),pr===null&&(pr=g)}function Xd(g){g.tag===22?(ue(Lt,Lt.current),ue(Ar,g),pr===null&&(pr=g)):_r()}function _r(){ue(Lt,Lt.current),ue(Ar,Ar.current)}function An(g){ne(Ar),pr===g&&(pr=null),ne(Lt)}var Lt=K(0);function Vr(g){for(var S=g;S!==null;){if(S.tag===13){var T=S.memoizedState;if(T!==null&&(T=T.dehydrated,T===null||xf(T)||Ef(T)))return S}else if(S.tag===19&&(S.memoizedProps.revealOrder==="forwards"||S.memoizedProps.revealOrder==="backwards"||S.memoizedProps.revealOrder==="unstable_legacy-backwards"||S.memoizedProps.revealOrder==="together")){if((S.flags&128)!==0)return S}else if(S.child!==null){S.child.return=S,S=S.child;continue}if(S===g)break;for(;S.sibling===null;){if(S.return===null||S.return===g)return null;S=S.return}S.sibling.return=S.return,S=S.sibling}return null}var an=0,Ct=null,qt=null,Pt=null,ni=!1,po=!1,ba=!1,lc=0,al=0,go=null,bu=0;function pn(){throw Error(o(321))}function Su(g,S){if(S===null)return!1;for(var T=0;T<S.length&&T<g.length;T++)if(!dr(g[T],S[T]))return!1;return!0}function cc(g,S,T,F,G,U){return an=U,Ct=S,S.memoizedState=null,S.updateQueue=null,S.lanes=0,oe.H=g===null||g.memoizedState===null?Dh:Vu,ba=!1,U=T(F,G),ba=!1,po&&(U=Sa(S,T,F,G)),Zd(g),U}function Zd(g){oe.H=mo;var S=qt!==null&&qt.next!==null;if(an=0,Pt=qt=Ct=null,ni=!1,al=0,go=null,S)throw Error(o(300));g===null||Nn||(g=g.dependencies,g!==null&&Jo(g)&&(Nn=!0))}function Sa(g,S,T,F){Ct=g;var G=0;do{if(po&&(go=null),al=0,po=!1,25<=G)throw Error(o(301));if(G+=1,Pt=qt=null,g.updateQueue!=null){var U=g.updateQueue;U.lastEffect=null,U.events=null,U.stores=null,U.memoCache!=null&&(U.memoCache.index=0)}oe.H=ri,U=S(T,F)}while(po);return U}function wa(){var g=oe.H,S=g.useState()[0];return S=typeof S.then=="function"?ol(S):S,g=g.useState()[0],(qt!==null?qt.memoizedState:null)!==g&&(Ct.flags|=1024),S}function wu(){var g=lc!==0;return lc=0,g}function xu(g,S,T){S.updateQueue=g.updateQueue,S.flags&=-2053,g.lanes&=~T}function Eu(g){if(ni){for(g=g.memoizedState;g!==null;){var S=g.queue;S!==null&&(S.pending=null),g=g.next}ni=!1}an=0,Pt=qt=Ct=null,po=!1,al=lc=0,go=null}function Hn(){var g={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?Ct.memoizedState=Pt=g:Pt=Pt.next=g,Pt}function _n(){if(qt===null){var g=Ct.alternate;g=g!==null?g.memoizedState:null}else g=qt.next;var S=Pt===null?Ct.memoizedState:Pt.next;if(S!==null)Pt=S,qt=g;else{if(g===null)throw Ct.alternate===null?Error(o(467)):Error(o(310));qt=g,g={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},Pt===null?Ct.memoizedState=Pt=g:Pt=Pt.next=g}return Pt}function uc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ol(g){var S=al;return al+=1,go===null&&(go=[]),g=ic(go,g,S),S=Ct,(Pt===null?S.memoizedState:Pt.next)===null&&(S=S.alternate,oe.H=S===null||S.memoizedState===null?Dh:Vu),g}function zs(g){if(g!==null&&typeof g=="object"){if(typeof g.then=="function")return ol(g);if(g.$$typeof===j)return gt(g)}throw Error(o(438,String(g)))}function Au(g){var S=null,T=Ct.updateQueue;if(T!==null&&(S=T.memoCache),S==null){var F=Ct.alternate;F!==null&&(F=F.updateQueue,F!==null&&(F=F.memoCache,F!=null&&(S={data:F.data.map(function(G){return G.slice()}),index:0})))}if(S==null&&(S={data:[],index:0}),T===null&&(T=uc(),Ct.updateQueue=T),T.memoCache=S,T=S.data[S.index],T===void 0)for(T=S.data[S.index]=Array(g),F=0;F<g;F++)T[F]=pe;return S.index++,T}function fs(g,S){return typeof S=="function"?S(g):S}function dc(g){var S=_n();return _u(S,qt,g)}function _u(g,S,T){var F=g.queue;if(F===null)throw Error(o(311));F.lastRenderedReducer=T;var G=g.baseQueue,U=F.pending;if(U!==null){if(G!==null){var te=G.next;G.next=U.next,U.next=te}S.baseQueue=G=U,F.pending=null}if(U=g.baseState,G===null)g.memoizedState=U;else{S=G.next;var ve=te=null,Ae=null,ke=S,We=!1;do{var Ke=ke.lane&-536870913;if(Ke!==ke.lane?(St&Ke)===Ke:(an&Ke)===Ke){var Ge=ke.revertLane;if(Ge===0)Ae!==null&&(Ae=Ae.next={lane:0,revertLane:0,gesture:null,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null}),Ke===cs&&(We=!0);else if((an&Ge)===Ge){ke=ke.next,Ge===cs&&(We=!0);continue}else Ke={lane:0,revertLane:ke.revertLane,gesture:null,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null},Ae===null?(ve=Ae=Ke,te=U):Ae=Ae.next=Ke,Ct.lanes|=Ge,ji|=Ge;Ke=ke.action,ba&&T(U,Ke),U=ke.hasEagerState?ke.eagerState:T(U,Ke)}else Ge={lane:Ke,revertLane:ke.revertLane,gesture:ke.gesture,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null},Ae===null?(ve=Ae=Ge,te=U):Ae=Ae.next=Ge,Ct.lanes|=Ke,ji|=Ke;ke=ke.next}while(ke!==null&&ke!==S);if(Ae===null?te=U:Ae.next=ve,!dr(U,g.memoizedState)&&(Nn=!0,We&&(T=ei,T!==null)))throw T;g.memoizedState=U,g.baseState=te,g.baseQueue=Ae,F.lastRenderedState=U}return G===null&&(F.lanes=0),[g.memoizedState,F.dispatch]}function Ru(g){var S=_n(),T=S.queue;if(T===null)throw Error(o(311));T.lastRenderedReducer=g;var F=T.dispatch,G=T.pending,U=S.memoizedState;if(G!==null){T.pending=null;var te=G=G.next;do U=g(U,te.action),te=te.next;while(te!==G);dr(U,S.memoizedState)||(Nn=!0),S.memoizedState=U,S.baseQueue===null&&(S.baseState=U),T.lastRenderedState=U}return[U,F]}function Qd(g,S,T){var F=Ct,G=_n(),U=Ft;if(U){if(T===void 0)throw Error(o(407));T=T()}else T=S();var te=!dr((qt||G).memoizedState,T);if(te&&(G.memoizedState=T,Nn=!0),G=G.queue,Nu(th.bind(null,F,G,g),[g]),G.getSnapshot!==S||te||Pt!==null&&Pt.memoizedState.tag&1){if(F.flags|=2048,Us(9,{destroy:void 0},eh.bind(null,F,G,T,S),null),mt===null)throw Error(o(349));U||(an&127)!==0||Jd(F,S,T)}return T}function Jd(g,S,T){g.flags|=16384,g={getSnapshot:S,value:T},S=Ct.updateQueue,S===null?(S=uc(),Ct.updateQueue=S,S.stores=[g]):(T=S.stores,T===null?S.stores=[g]:T.push(g))}function eh(g,S,T,F){S.value=T,S.getSnapshot=F,nh(S)&&rh(g)}function th(g,S,T){return T(function(){nh(S)&&rh(g)})}function nh(g){var S=g.getSnapshot;g=g.value;try{var T=S();return!dr(g,T)}catch{return!0}}function rh(g){var S=hr(g,2);S!==null&&At(S,g,2)}function Tu(g){var S=Hn();if(typeof g=="function"){var T=g;if(g=T(),ba){Le(!0);try{T()}finally{Le(!1)}}}return S.memoizedState=S.baseState=g,S.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:g},S}function Du(g,S,T,F){return g.baseState=T,_u(g,qt,typeof F=="function"?F:fs)}function of(g,S,T,F,G){if(gc(g))throw Error(o(485));if(g=S.action,g!==null){var U={payload:G,action:g,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(te){U.listeners.push(te)}};oe.T!==null?T(!0):U.isTransition=!1,F(U),T=S.pending,T===null?(U.next=S.pending=U,ih(S,U)):(U.next=T.next,S.pending=T.next=U)}}function ih(g,S){var T=S.action,F=S.payload,G=g.state;if(S.isTransition){var U=oe.T,te={};oe.T=te;try{var ve=T(G,F),Ae=oe.S;Ae!==null&&Ae(te,ve),sh(g,S,ve)}catch(ke){Pu(g,S,ke)}finally{U!==null&&te.types!==null&&(U.types=te.types),oe.T=U}}else try{U=T(G,F),sh(g,S,U)}catch(ke){Pu(g,S,ke)}}function sh(g,S,T){T!==null&&typeof T=="object"&&typeof T.then=="function"?T.then(function(F){ah(g,S,F)},function(F){return Pu(g,S,F)}):ah(g,S,T)}function ah(g,S,T){S.status="fulfilled",S.value=T,oh(S),g.state=T,S=g.pending,S!==null&&(T=S.next,T===S?g.pending=null:(T=T.next,S.next=T,ih(g,T)))}function Pu(g,S,T){var F=g.pending;if(g.pending=null,F!==null){F=F.next;do S.status="rejected",S.reason=T,oh(S),S=S.next;while(S!==F)}g.action=null}function oh(g){g=g.listeners;for(var S=0;S<g.length;S++)(0,g[S])()}function Mu(g,S){return S}function Ou(g,S){if(Ft){var T=mt.formState;if(T!==null){e:{var F=Ct;if(Ft){if(Xt){t:{for(var G=Xt,U=Hr;G.nodeType!==8;){if(!U){G=null;break t}if(G=qi(G.nextSibling),G===null){G=null;break t}}U=G.data,G=U==="F!"||U==="F"?G:null}if(G){Xt=qi(G.nextSibling),F=G.data==="F!";break e}}Oi(F)}F=!1}F&&(S=T[0])}}return T=Hn(),T.memoizedState=T.baseState=S,F={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mu,lastRenderedState:S},T.queue=F,T=_h.bind(null,Ct,F),F.dispatch=T,F=Tu(!1),U=Gu.bind(null,Ct,!1,F.queue),F=Hn(),G={state:S,dispatch:null,action:g,pending:null},F.queue=G,T=of.bind(null,Ct,G,U,T),G.dispatch=T,F.memoizedState=g,[S,T,!1]}function lh(g){var S=_n();return Fu(S,qt,g)}function Fu(g,S,T){if(S=_u(g,S,Mu)[0],g=dc(fs)[0],typeof S=="object"&&S!==null&&typeof S.then=="function")try{var F=ol(S)}catch(te){throw te===pa?xt:te}else F=S;S=_n();var G=S.queue,U=G.dispatch;return T!==S.memoizedState&&(Ct.flags|=2048,Us(9,{destroy:void 0},ch.bind(null,G,T),null)),[F,U,g]}function ch(g,S){g.action=S}function Lu(g){var S=_n(),T=qt;if(T!==null)return Fu(S,T,g);_n(),S=S.memoizedState,T=_n();var F=T.queue.dispatch;return T.memoizedState=g,[S,F,!1]}function Us(g,S,T,F){return g={tag:g,create:T,deps:F,inst:S,next:null},S=Ct.updateQueue,S===null&&(S=uc(),Ct.updateQueue=S),T=S.lastEffect,T===null?S.lastEffect=g.next=g:(F=T.next,T.next=g,g.next=F,S.lastEffect=g),g}function hc(){return _n().memoizedState}function fc(g,S,T,F){var G=Hn();Ct.flags|=g,G.memoizedState=Us(1|S,{destroy:void 0},T,F===void 0?null:F)}function pc(g,S,T,F){var G=_n();F=F===void 0?null:F;var U=G.memoizedState.inst;qt!==null&&F!==null&&Su(F,qt.memoizedState.deps)?G.memoizedState=Us(S,U,T,F):(Ct.flags|=g,G.memoizedState=Us(1|S,U,T,F))}function uh(g,S){fc(8390656,8,g,S)}function Nu(g,S){pc(2048,8,g,S)}function dh(g){Ct.flags|=4;var S=Ct.updateQueue;if(S===null)S=uc(),Ct.updateQueue=S,S.events=[g];else{var T=S.events;T===null?S.events=[g]:T.push(g)}}function hh(g){var S=_n().memoizedState;return dh({ref:S,nextImpl:g}),function(){if((ct&2)!==0)throw Error(o(440));return S.impl.apply(void 0,arguments)}}function fh(g,S){return pc(4,2,g,S)}function ph(g,S){return pc(4,4,g,S)}function gh(g,S){if(typeof S=="function"){g=g();var T=S(g);return function(){typeof T=="function"?T():S(null)}}if(S!=null)return g=g(),S.current=g,function(){S.current=null}}function mh(g,S,T){T=T!=null?T.concat([g]):null,pc(4,4,gh.bind(null,S,g),T)}function Iu(){}function yh(g,S){var T=_n();S=S===void 0?null:S;var F=T.memoizedState;return S!==null&&Su(S,F[1])?F[0]:(T.memoizedState=[g,S],g)}function Ch(g,S){var T=_n();S=S===void 0?null:S;var F=T.memoizedState;if(S!==null&&Su(S,F[1]))return F[0];if(F=g(),ba){Le(!0);try{g()}finally{Le(!1)}}return T.memoizedState=[F,S],F}function ku(g,S,T){return T===void 0||(an&1073741824)!==0&&(St&261930)===0?g.memoizedState=S:(g.memoizedState=T,g=Rt(),Ct.lanes|=g,ji|=g,T)}function bh(g,S,T,F){return dr(T,S)?T:fo.current!==null?(g=ku(g,T,F),dr(g,S)||(Nn=!0),g):(an&42)===0||(an&1073741824)!==0&&(St&261930)===0?(Nn=!0,g.memoizedState=T):(g=Rt(),Ct.lanes|=g,ji|=g,S)}function Sh(g,S,T,F,G){var U=se.p;se.p=U!==0&&8>U?U:8;var te=oe.T,ve={};oe.T=ve,Gu(g,!1,S,T);try{var Ae=G(),ke=oe.S;if(ke!==null&&ke(ve,Ae),Ae!==null&&typeof Ae=="object"&&typeof Ae.then=="function"){var We=pu(Ae,F);ll(g,S,We,$r(g))}else ll(g,S,F,$r(g))}catch(Ke){ll(g,S,{then:function(){},status:"rejected",reason:Ke},$r())}finally{se.p=U,te!==null&&ve.types!==null&&(te.types=ve.types),oe.T=te}}function lf(){}function Bu(g,S,T,F){if(g.tag!==5)throw Error(o(476));var G=wh(g).queue;Sh(g,G,S,J,T===null?lf:function(){return xh(g),T(F)})}function wh(g){var S=g.memoizedState;if(S!==null)return S;S={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:J},next:null};var T={};return S.next={memoizedState:T,baseState:T,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:T},next:null},g.memoizedState=S,g=g.alternate,g!==null&&(g.memoizedState=S),S}function xh(g){var S=wh(g);S.next===null&&(S=g.alternate.memoizedState),ll(g,S.next.queue,{},$r())}function Hu(){return gt(ld)}function Eh(){return _n().memoizedState}function Ah(){return _n().memoizedState}function cf(g){for(var S=g.return;S!==null;){switch(S.tag){case 24:case 3:var T=$r();g=ds(T);var F=Gs(S,g,T);F!==null&&(At(F,S,T),Vs(F,S,T)),S={cache:du()},g.payload=S;return}S=S.return}}function uf(g,S,T){var F=$r();T={lane:F,revertLane:0,gesture:null,action:T,hasEagerState:!1,eagerState:null,next:null},gc(g)?Rh(S,T):(T=$l(g,S,T,F),T!==null&&(At(T,g,F),Th(T,S,F)))}function _h(g,S,T){var F=$r();ll(g,S,T,F)}function ll(g,S,T,F){var G={lane:F,revertLane:0,gesture:null,action:T,hasEagerState:!1,eagerState:null,next:null};if(gc(g))Rh(S,G);else{var U=g.alternate;if(g.lanes===0&&(U===null||U.lanes===0)&&(U=S.lastRenderedReducer,U!==null))try{var te=S.lastRenderedState,ve=U(te,T);if(G.hasEagerState=!0,G.eagerState=ve,dr(ve,te))return Wn(g,S,G,0),mt===null&&Zo(),!1}catch{}finally{}if(T=$l(g,S,G,F),T!==null)return At(T,g,F),Th(T,S,F),!0}return!1}function Gu(g,S,T,F){if(F={lane:2,revertLane:Ve(),gesture:null,action:F,hasEagerState:!1,eagerState:null,next:null},gc(g)){if(S)throw Error(o(479))}else S=$l(g,T,F,2),S!==null&&At(S,g,2)}function gc(g){var S=g.alternate;return g===Ct||S!==null&&S===Ct}function Rh(g,S){po=ni=!0;var T=g.pending;T===null?S.next=S:(S.next=T.next,T.next=S),g.pending=S}function Th(g,S,T){if((T&4194048)!==0){var F=S.lanes;F&=g.pendingLanes,T|=F,S.lanes=T,Xi(g,T)}}var mo={readContext:gt,use:zs,useCallback:pn,useContext:pn,useEffect:pn,useImperativeHandle:pn,useLayoutEffect:pn,useInsertionEffect:pn,useMemo:pn,useReducer:pn,useRef:pn,useState:pn,useDebugValue:pn,useDeferredValue:pn,useTransition:pn,useSyncExternalStore:pn,useId:pn,useHostTransitionStatus:pn,useFormState:pn,useActionState:pn,useOptimistic:pn,useMemoCache:pn,useCacheRefresh:pn};mo.useEffectEvent=pn;var Dh={readContext:gt,use:zs,useCallback:function(g,S){return Hn().memoizedState=[g,S===void 0?null:S],g},useContext:gt,useEffect:uh,useImperativeHandle:function(g,S,T){T=T!=null?T.concat([g]):null,fc(4194308,4,gh.bind(null,S,g),T)},useLayoutEffect:function(g,S){return fc(4194308,4,g,S)},useInsertionEffect:function(g,S){fc(4,2,g,S)},useMemo:function(g,S){var T=Hn();S=S===void 0?null:S;var F=g();if(ba){Le(!0);try{g()}finally{Le(!1)}}return T.memoizedState=[F,S],F},useReducer:function(g,S,T){var F=Hn();if(T!==void 0){var G=T(S);if(ba){Le(!0);try{T(S)}finally{Le(!1)}}}else G=S;return F.memoizedState=F.baseState=G,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:g,lastRenderedState:G},F.queue=g,g=g.dispatch=uf.bind(null,Ct,g),[F.memoizedState,g]},useRef:function(g){var S=Hn();return g={current:g},S.memoizedState=g},useState:function(g){g=Tu(g);var S=g.queue,T=_h.bind(null,Ct,S);return S.dispatch=T,[g.memoizedState,T]},useDebugValue:Iu,useDeferredValue:function(g,S){var T=Hn();return ku(T,g,S)},useTransition:function(){var g=Tu(!1);return g=Sh.bind(null,Ct,g.queue,!0,!1),Hn().memoizedState=g,[!1,g]},useSyncExternalStore:function(g,S,T){var F=Ct,G=Hn();if(Ft){if(T===void 0)throw Error(o(407));T=T()}else{if(T=S(),mt===null)throw Error(o(349));(St&127)!==0||Jd(F,S,T)}G.memoizedState=T;var U={value:T,getSnapshot:S};return G.queue=U,uh(th.bind(null,F,U,g),[g]),F.flags|=2048,Us(9,{destroy:void 0},eh.bind(null,F,U,T,S),null),T},useId:function(){var g=Hn(),S=mt.identifierPrefix;if(Ft){var T=vi,F=fn;T=(F&~(1<<32-Pe(F)-1)).toString(32)+T,S="_"+S+"R_"+T,T=lc++,0<T&&(S+="H"+T.toString(32)),S+="_"}else T=bu++,S="_"+S+"r_"+T.toString(32)+"_";return g.memoizedState=S},useHostTransitionStatus:Hu,useFormState:Ou,useActionState:Ou,useOptimistic:function(g){var S=Hn();S.memoizedState=S.baseState=g;var T={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return S.queue=T,S=Gu.bind(null,Ct,!0,T),T.dispatch=S,[g,S]},useMemoCache:Au,useCacheRefresh:function(){return Hn().memoizedState=cf.bind(null,Ct)},useEffectEvent:function(g){var S=Hn(),T={impl:g};return S.memoizedState=T,function(){if((ct&2)!==0)throw Error(o(440));return T.impl.apply(void 0,arguments)}}},Vu={readContext:gt,use:zs,useCallback:yh,useContext:gt,useEffect:Nu,useImperativeHandle:mh,useInsertionEffect:fh,useLayoutEffect:ph,useMemo:Ch,useReducer:dc,useRef:hc,useState:function(){return dc(fs)},useDebugValue:Iu,useDeferredValue:function(g,S){var T=_n();return bh(T,qt.memoizedState,g,S)},useTransition:function(){var g=dc(fs)[0],S=_n().memoizedState;return[typeof g=="boolean"?g:ol(g),S]},useSyncExternalStore:Qd,useId:Eh,useHostTransitionStatus:Hu,useFormState:lh,useActionState:lh,useOptimistic:function(g,S){var T=_n();return Du(T,qt,g,S)},useMemoCache:Au,useCacheRefresh:Ah};Vu.useEffectEvent=hh;var ri={readContext:gt,use:zs,useCallback:yh,useContext:gt,useEffect:Nu,useImperativeHandle:mh,useInsertionEffect:fh,useLayoutEffect:ph,useMemo:Ch,useReducer:Ru,useRef:hc,useState:function(){return Ru(fs)},useDebugValue:Iu,useDeferredValue:function(g,S){var T=_n();return qt===null?ku(T,g,S):bh(T,qt.memoizedState,g,S)},useTransition:function(){var g=Ru(fs)[0],S=_n().memoizedState;return[typeof g=="boolean"?g:ol(g),S]},useSyncExternalStore:Qd,useId:Eh,useHostTransitionStatus:Hu,useFormState:Lu,useActionState:Lu,useOptimistic:function(g,S){var T=_n();return qt!==null?Du(T,qt,g,S):(T.baseState=g,[g,T.queue.dispatch])},useMemoCache:Au,useCacheRefresh:Ah};ri.useEffectEvent=hh;function mc(g,S,T,F){S=g.memoizedState,T=T(F,S),T=T==null?S:_({},S,T),g.memoizedState=T,g.lanes===0&&(g.updateQueue.baseState=T)}var cl={enqueueSetState:function(g,S,T){g=g._reactInternals;var F=$r(),G=ds(F);G.payload=S,T!=null&&(G.callback=T),S=Gs(g,G,F),S!==null&&(At(S,g,F),Vs(S,g,F))},enqueueReplaceState:function(g,S,T){g=g._reactInternals;var F=$r(),G=ds(F);G.tag=1,G.payload=S,T!=null&&(G.callback=T),S=Gs(g,G,F),S!==null&&(At(S,g,F),Vs(S,g,F))},enqueueForceUpdate:function(g,S){g=g._reactInternals;var T=$r(),F=ds(T);F.tag=2,S!=null&&(F.callback=S),S=Gs(g,F,T),S!==null&&(At(S,g,T),Vs(S,g,T))}};function zu(g,S,T,F,G,U,te){return g=g.stateNode,typeof g.shouldComponentUpdate=="function"?g.shouldComponentUpdate(F,U,te):S.prototype&&S.prototype.isPureReactComponent?!Xa(T,F)||!Xa(G,U):!0}function Uu(g,S,T,F){g=S.state,typeof S.componentWillReceiveProps=="function"&&S.componentWillReceiveProps(T,F),typeof S.UNSAFE_componentWillReceiveProps=="function"&&S.UNSAFE_componentWillReceiveProps(T,F),S.state!==g&&cl.enqueueReplaceState(S,S.state,null)}function js(g,S){var T=S;if("ref"in S){T={};for(var F in S)F!=="ref"&&(T[F]=S[F])}if(g=g.defaultProps){T===S&&(T=_({},T));for(var G in g)T[G]===void 0&&(T[G]=g[G])}return T}function Ph(g){Xo(g)}function ju(g){console.error(g)}function Wu(g){Xo(g)}function vc(g,S){try{var T=g.onUncaughtError;T(S.value,{componentStack:S.stack})}catch(F){setTimeout(function(){throw F})}}function Mh(g,S,T){try{var F=g.onCaughtError;F(T.value,{componentStack:T.stack,errorBoundary:S.tag===1?S.stateNode:null})}catch(G){setTimeout(function(){throw G})}}function $u(g,S,T){return T=ds(T),T.tag=3,T.payload={element:null},T.callback=function(){vc(g,S)},T}function qu(g){return g=ds(g),g.tag=3,g}function Oh(g,S,T,F){var G=T.type.getDerivedStateFromError;if(typeof G=="function"){var U=F.value;g.payload=function(){return G(U)},g.callback=function(){Mh(S,T,F)}}var te=T.stateNode;te!==null&&typeof te.componentDidCatch=="function"&&(g.callback=function(){Mh(S,T,F),typeof G!="function"&&(Dn===null?Dn=new Set([this]):Dn.add(this));var ve=F.stack;this.componentDidCatch(F.value,{componentStack:ve!==null?ve:""})})}function Gn(g,S,T,F,G){if(T.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){if(S=T.alternate,S!==null&&Ii(S,T,G,!0),T=Ar.current,T!==null){switch(T.tag){case 31:case 13:return pr===null?xo():T.alternate===null&&gn===0&&(gn=3),T.flags&=-257,T.flags|=65536,T.lanes=G,F===rc?T.flags|=16384:(S=T.updateQueue,S===null?T.updateQueue=new Set([F]):S.add(F),Sl(g,F,G)),!1;case 22:return T.flags|=65536,F===rc?T.flags|=16384:(S=T.updateQueue,S===null?(S={transitions:null,markerInstances:null,retryQueue:new Set([F])},T.updateQueue=S):(T=S.retryQueue,T===null?S.retryQueue=new Set([F]):T.add(F)),Sl(g,F,G)),!1}throw Error(o(435,T.tag))}return Sl(g,F,G),xo(),!1}if(Ft)return S=Ar.current,S!==null?((S.flags&65536)===0&&(S.flags|=256),S.flags|=65536,S.lanes=G,F!==so&&(g=Error(o(422),{cause:F}),Fi(Br(g,T)))):(F!==so&&(S=Error(o(423),{cause:F}),Fi(Br(S,T))),g=g.current.alternate,g.flags|=65536,G&=-G,g.lanes|=G,F=Br(F,T),G=$u(g.stateNode,F,G),ut(g,G),gn!==4&&(gn=2)),!1;var U=Error(o(520),{cause:F});if(U=Br(U,T),Ma===null?Ma=[U]:Ma.push(U),gn!==4&&(gn=2),S===null)return!0;F=Br(F,T),T=S;do{switch(T.tag){case 3:return T.flags|=65536,g=G&-G,T.lanes|=g,g=$u(T.stateNode,F,g),ut(T,g),!1;case 1:if(S=T.type,U=T.stateNode,(T.flags&128)===0&&(typeof S.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(Dn===null||!Dn.has(U))))return T.flags|=65536,G&=-G,T.lanes|=G,G=qu(G),Oh(G,g,T,F),ut(T,G),!1}T=T.return}while(T!==null);return!1}var yc=Error(o(461)),Nn=!1;function $n(g,S,T,F){S.child=g===null?ac(S,null,T,F):us(S,g.child,T,F)}function Ku(g,S,T,F,G){T=T.render;var U=S.ref;if("ref"in F){var te={};for(var ve in F)ve!=="ref"&&(te[ve]=F[ve])}else te=F;return Bs(S),F=cc(g,S,T,te,U,G),ve=wu(),g!==null&&!Nn?(xu(g,S,G),Rn(g,S,G)):(Ft&&ve&&Mi(S),S.flags|=1,$n(g,S,F,G),S.child)}function xa(g,S,T,F,G){if(g===null){var U=T.type;return typeof U=="function"&&!ql(U)&&U.defaultProps===void 0&&T.compare===null?(S.tag=15,S.type=U,Cc(g,S,U,F,G)):(g=Di(T.type,null,F,S,S.mode,G),g.ref=S.ref,g.return=S,S.child=g)}if(U=g.child,!Ac(g,G)){var te=U.memoizedProps;if(T=T.compare,T=T!==null?T:Xa,T(te,F)&&g.ref===S.ref)return Rn(g,S,G)}return S.flags|=1,g=wr(U,F),g.ref=S.ref,g.return=S,S.child=g}function Cc(g,S,T,F,G){if(g!==null){var U=g.memoizedProps;if(Xa(U,F)&&g.ref===S.ref)if(Nn=!1,S.pendingProps=F=U,Ac(g,G))(g.flags&131072)!==0&&(Nn=!0);else return S.lanes=g.lanes,Rn(g,S,G)}return vo(g,S,T,F,G)}function Ea(g,S,T,F){var G=F.children,U=g!==null?g.memoizedState:null;if(g===null&&S.stateNode===null&&(S.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),F.mode==="hidden"){if((S.flags&128)!==0){if(U=U!==null?U.baseLanes|T:T,g!==null){for(F=S.child=g.child,G=0;F!==null;)G=G|F.lanes|F.childLanes,F=F.sibling;F=G&~U}else F=0,S.child=null;return Rr(g,S,U,T,F)}if((T&536870912)!==0)S.memoizedState={baseLanes:0,cachePool:null},g!==null&&el(S,U!==null?U.cachePool:null),U!==null?Yd(S,U):yu(),Xd(S);else return F=S.lanes=536870912,Rr(g,S,U!==null?U.baseLanes|T:T,T,F)}else U!==null?(el(S,U.cachePool),Yd(S,U),_r(),S.memoizedState=null):(g!==null&&el(S,null),yu(),_r());return $n(g,S,G,T),S.child}function Bi(g,S){return g!==null&&g.tag===22||S.stateNode!==null||(S.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),S.sibling}function Rr(g,S,T,F,G){var U=nc();return U=U===null?null:{parent:Ln._currentValue,pool:U},S.memoizedState={baseLanes:T,cachePool:U},g!==null&&el(S,null),yu(),Xd(S),g!==null&&Ii(g,S,F,!0),S.childLanes=G,null}function bc(g,S){return S=Ec({mode:S.mode,children:S.children},g.mode),S.ref=g.ref,g.child=S,S.return=g,S}function Fh(g,S,T){return us(S,g.child,null,T),g=bc(S,S.pendingProps),g.flags|=2,An(S),S.memoizedState=null,g}function Sc(g,S,T){var F=S.pendingProps,G=(S.flags&128)!==0;if(S.flags&=-129,g===null){if(Ft){if(F.mode==="hidden")return g=bc(S,F),S.lanes=536870912,Bi(null,g);if(Cu(S),(g=Xt)?(g=qf(g,Hr),g=g!==null&&g.data==="&"?g:null,g!==null&&(S.memoizedState={dehydrated:g,treeContext:as!==null?{id:fn,overflow:vi}:null,retryLane:536870912,hydrationErrors:null},T=no(g),T.return=S,S.child=T,Sn=S,Xt=null)):g=null,g===null)throw Oi(S);return S.lanes=536870912,null}return bc(S,F)}var U=g.memoizedState;if(U!==null){var te=U.dehydrated;if(Cu(S),G)if(S.flags&256)S.flags&=-257,S=Fh(g,S,T);else if(S.memoizedState!==null)S.child=g.child,S.flags|=128,S=null;else throw Error(o(558));else if(Nn||Ii(g,S,T,!1),G=(T&g.childLanes)!==0,Nn||G){if(F=mt,F!==null&&(te=Zi(F,T),te!==0&&te!==U.retryLane))throw U.retryLane=te,hr(g,te),At(F,g,te),yc;xo(),S=Fh(g,S,T)}else g=U.treeContext,Xt=qi(te.nextSibling),Sn=S,Ft=!0,os=null,Hr=!1,g!==null&&Zl(S,g),S=bc(S,F),S.flags|=4096;return S}return g=wr(g.child,{mode:F.mode,children:F.children}),g.ref=S.ref,S.child=g,g.return=S,g}function Aa(g,S){var T=S.ref;if(T===null)g!==null&&g.ref!==null&&(S.flags|=4194816);else{if(typeof T!="function"&&typeof T!="object")throw Error(o(284));(g===null||g.ref!==T)&&(S.flags|=4194816)}}function vo(g,S,T,F,G){return Bs(S),T=cc(g,S,T,F,void 0,G),F=wu(),g!==null&&!Nn?(xu(g,S,G),Rn(g,S,G)):(Ft&&F&&Mi(S),S.flags|=1,$n(g,S,T,G),S.child)}function ul(g,S,T,F,G,U){return Bs(S),S.updateQueue=null,T=Sa(S,F,T,G),Zd(g),F=wu(),g!==null&&!Nn?(xu(g,S,U),Rn(g,S,U)):(Ft&&F&&Mi(S),S.flags|=1,$n(g,S,T,U),S.child)}function wc(g,S,T,F,G){if(Bs(S),S.stateNode===null){var U=Os,te=T.contextType;typeof te=="object"&&te!==null&&(U=gt(te)),U=new T(F,U),S.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,U.updater=cl,S.stateNode=U,U._reactInternals=S,U=S.stateNode,U.props=F,U.state=S.memoizedState,U.refs={},rl(S),te=T.contextType,U.context=typeof te=="object"&&te!==null?gt(te):Os,U.state=S.memoizedState,te=T.getDerivedStateFromProps,typeof te=="function"&&(mc(S,T,te,F),U.state=S.memoizedState),typeof T.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(te=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),te!==U.state&&cl.enqueueReplaceState(U,U.state,null),uo(S,F,U,G),il(),U.state=S.memoizedState),typeof U.componentDidMount=="function"&&(S.flags|=4194308),F=!0}else if(g===null){U=S.stateNode;var ve=S.memoizedProps,Ae=js(T,ve);U.props=Ae;var ke=U.context,We=T.contextType;te=Os,typeof We=="object"&&We!==null&&(te=gt(We));var Ke=T.getDerivedStateFromProps;We=typeof Ke=="function"||typeof U.getSnapshotBeforeUpdate=="function",ve=S.pendingProps!==ve,We||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(ve||ke!==te)&&Uu(S,U,F,te),fr=!1;var Ge=S.memoizedState;U.state=Ge,uo(S,F,U,G),il(),ke=S.memoizedState,ve||Ge!==ke||fr?(typeof Ke=="function"&&(mc(S,T,Ke,F),ke=S.memoizedState),(Ae=fr||zu(S,T,Ae,F,Ge,ke,te))?(We||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(S.flags|=4194308)):(typeof U.componentDidMount=="function"&&(S.flags|=4194308),S.memoizedProps=F,S.memoizedState=ke),U.props=F,U.state=ke,U.context=te,F=Ae):(typeof U.componentDidMount=="function"&&(S.flags|=4194308),F=!1)}else{U=S.stateNode,mu(g,S),te=S.memoizedProps,We=js(T,te),U.props=We,Ke=S.pendingProps,Ge=U.context,ke=T.contextType,Ae=Os,typeof ke=="object"&&ke!==null&&(Ae=gt(ke)),ve=T.getDerivedStateFromProps,(ke=typeof ve=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(te!==Ke||Ge!==Ae)&&Uu(S,U,F,Ae),fr=!1,Ge=S.memoizedState,U.state=Ge,uo(S,F,U,G),il();var Ue=S.memoizedState;te!==Ke||Ge!==Ue||fr||g!==null&&g.dependencies!==null&&Jo(g.dependencies)?(typeof ve=="function"&&(mc(S,T,ve,F),Ue=S.memoizedState),(We=fr||zu(S,T,We,F,Ge,Ue,Ae)||g!==null&&g.dependencies!==null&&Jo(g.dependencies))?(ke||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(F,Ue,Ae),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(F,Ue,Ae)),typeof U.componentDidUpdate=="function"&&(S.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(S.flags|=1024)):(typeof U.componentDidUpdate!="function"||te===g.memoizedProps&&Ge===g.memoizedState||(S.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||te===g.memoizedProps&&Ge===g.memoizedState||(S.flags|=1024),S.memoizedProps=F,S.memoizedState=Ue),U.props=F,U.state=Ue,U.context=Ae,F=We):(typeof U.componentDidUpdate!="function"||te===g.memoizedProps&&Ge===g.memoizedState||(S.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||te===g.memoizedProps&&Ge===g.memoizedState||(S.flags|=1024),F=!1)}return U=F,Aa(g,S),F=(S.flags&128)!==0,U||F?(U=S.stateNode,T=F&&typeof T.getDerivedStateFromError!="function"?null:U.render(),S.flags|=1,g!==null&&F?(S.child=us(S,g.child,null,G),S.child=us(S,null,T,G)):$n(g,S,T,G),S.memoizedState=U.state,g=S.child):g=Rn(g,S,G),g}function Lh(g,S,T,F){return Is(),S.flags|=256,$n(g,S,T,F),S.child}var Yu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function or(g){return{baseLanes:g,cachePool:gu()}}function xc(g,S,T){return g=g!==null?g.childLanes&~T:0,S&&(g|=yr),g}function Nh(g,S,T){var F=S.pendingProps,G=!1,U=(S.flags&128)!==0,te;if((te=U)||(te=g!==null&&g.memoizedState===null?!1:(Lt.current&2)!==0),te&&(G=!0,S.flags&=-129),te=(S.flags&32)!==0,S.flags&=-33,g===null){if(Ft){if(G?hs(S):_r(),(g=Xt)?(g=qf(g,Hr),g=g!==null&&g.data!=="&"?g:null,g!==null&&(S.memoizedState={dehydrated:g,treeContext:as!==null?{id:fn,overflow:vi}:null,retryLane:536870912,hydrationErrors:null},T=no(g),T.return=S,S.child=T,Sn=S,Xt=null)):g=null,g===null)throw Oi(S);return Ef(g)?S.lanes=32:S.lanes=536870912,null}var ve=F.children;return F=F.fallback,G?(_r(),G=S.mode,ve=Ec({mode:"hidden",children:ve},G),F=Fs(F,G,T,null),ve.return=S,F.return=S,ve.sibling=F,S.child=ve,F=S.child,F.memoizedState=or(T),F.childLanes=xc(g,te,T),S.memoizedState=Yu,Bi(null,F)):(hs(S),dl(S,ve))}var Ae=g.memoizedState;if(Ae!==null&&(ve=Ae.dehydrated,ve!==null)){if(U)S.flags&256?(hs(S),S.flags&=-257,S=Xu(g,S,T)):S.memoizedState!==null?(_r(),S.child=g.child,S.flags|=128,S=null):(_r(),ve=F.fallback,G=S.mode,F=Ec({mode:"visible",children:F.children},G),ve=Fs(ve,G,T,null),ve.flags|=2,F.return=S,ve.return=S,F.sibling=ve,S.child=F,us(S,g.child,null,T),F=S.child,F.memoizedState=or(T),F.childLanes=xc(g,te,T),S.memoizedState=Yu,S=Bi(null,F));else if(hs(S),Ef(ve)){if(te=ve.nextSibling&&ve.nextSibling.dataset,te)var ke=te.dgst;te=ke,F=Error(o(419)),F.stack="",F.digest=te,Fi({value:F,source:null,stack:null}),S=Xu(g,S,T)}else if(Nn||Ii(g,S,T,!1),te=(T&g.childLanes)!==0,Nn||te){if(te=mt,te!==null&&(F=Zi(te,T),F!==0&&F!==Ae.retryLane))throw Ae.retryLane=F,hr(g,F),At(te,g,F),yc;xf(ve)||xo(),S=Xu(g,S,T)}else xf(ve)?(S.flags|=192,S.child=g.child,S=null):(g=Ae.treeContext,Xt=qi(ve.nextSibling),Sn=S,Ft=!0,os=null,Hr=!1,g!==null&&Zl(S,g),S=dl(S,F.children),S.flags|=4096);return S}return G?(_r(),ve=F.fallback,G=S.mode,Ae=g.child,ke=Ae.sibling,F=wr(Ae,{mode:"hidden",children:F.children}),F.subtreeFlags=Ae.subtreeFlags&65011712,ke!==null?ve=wr(ke,ve):(ve=Fs(ve,G,T,null),ve.flags|=2),ve.return=S,F.return=S,F.sibling=ve,S.child=F,Bi(null,F),F=S.child,ve=g.child.memoizedState,ve===null?ve=or(T):(G=ve.cachePool,G!==null?(Ae=Ln._currentValue,G=G.parent!==Ae?{parent:Ae,pool:Ae}:G):G=gu(),ve={baseLanes:ve.baseLanes|T,cachePool:G}),F.memoizedState=ve,F.childLanes=xc(g,te,T),S.memoizedState=Yu,Bi(g.child,F)):(hs(S),T=g.child,g=T.sibling,T=wr(T,{mode:"visible",children:F.children}),T.return=S,T.sibling=null,g!==null&&(te=S.deletions,te===null?(S.deletions=[g],S.flags|=16):te.push(g)),S.child=T,S.memoizedState=null,T)}function dl(g,S){return S=Ec({mode:"visible",children:S},g.mode),S.return=g,g.child=S}function Ec(g,S){return g=hn(22,g,null,S),g.lanes=0,g}function Xu(g,S,T){return us(S,g.child,null,T),g=dl(S,S.pendingProps.children),g.flags|=2,S.memoizedState=null,g}function Ih(g,S,T){g.lanes|=S;var F=g.alternate;F!==null&&(F.lanes|=S),Jl(g.return,S,T)}function Ra(g,S,T,F,G,U){var te=g.memoizedState;te===null?g.memoizedState={isBackwards:S,rendering:null,renderingStartTime:0,last:F,tail:T,tailMode:G,treeForkCount:U}:(te.isBackwards=S,te.rendering=null,te.renderingStartTime=0,te.last=F,te.tail=T,te.tailMode=G,te.treeForkCount=U)}function Tr(g,S,T){var F=S.pendingProps,G=F.revealOrder,U=F.tail;F=F.children;var te=Lt.current,ve=(te&2)!==0;if(ve?(te=te&1|2,S.flags|=128):te&=1,ue(Lt,te),$n(g,S,F,T),F=Ft?io:0,!ve&&g!==null&&(g.flags&128)!==0)e:for(g=S.child;g!==null;){if(g.tag===13)g.memoizedState!==null&&Ih(g,T,S);else if(g.tag===19)Ih(g,T,S);else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===S)break e;for(;g.sibling===null;){if(g.return===null||g.return===S)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}switch(G){case"forwards":for(T=S.child,G=null;T!==null;)g=T.alternate,g!==null&&Vr(g)===null&&(G=T),T=T.sibling;T=G,T===null?(G=S.child,S.child=null):(G=T.sibling,T.sibling=null),Ra(S,!1,G,T,U,F);break;case"backwards":case"unstable_legacy-backwards":for(T=null,G=S.child,S.child=null;G!==null;){if(g=G.alternate,g!==null&&Vr(g)===null){S.child=G;break}g=G.sibling,G.sibling=T,T=G,G=g}Ra(S,!0,T,null,U,F);break;case"together":Ra(S,!1,null,null,void 0,F);break;default:S.memoizedState=null}return S.child}function Rn(g,S,T){if(g!==null&&(S.dependencies=g.dependencies),ji|=S.lanes,(T&S.childLanes)===0)if(g!==null){if(Ii(g,S,T,!1),(T&S.childLanes)===0)return null}else return null;if(g!==null&&S.child!==g.child)throw Error(o(153));if(S.child!==null){for(g=S.child,T=wr(g,g.pendingProps),S.child=T,T.return=S;g.sibling!==null;)g=g.sibling,T=T.sibling=wr(g,g.pendingProps),T.return=S;T.sibling=null}return S.child}function Ac(g,S){return(g.lanes&S)!==0?!0:(g=g.dependencies,!!(g!==null&&Jo(g)))}function df(g,S,T){switch(S.tag){case 3:de(S,S.stateNode.containerInfo),ls(S,Ln,g.memoizedState.cache),Is();break;case 27:case 5:me(S);break;case 4:de(S,S.stateNode.containerInfo);break;case 10:ls(S,S.type,S.memoizedProps.value);break;case 31:if(S.memoizedState!==null)return S.flags|=128,Cu(S),null;break;case 13:var F=S.memoizedState;if(F!==null)return F.dehydrated!==null?(hs(S),S.flags|=128,null):(T&S.child.childLanes)!==0?Nh(g,S,T):(hs(S),g=Rn(g,S,T),g!==null?g.sibling:null);hs(S);break;case 19:var G=(g.flags&128)!==0;if(F=(T&S.childLanes)!==0,F||(Ii(g,S,T,!1),F=(T&S.childLanes)!==0),G){if(F)return Tr(g,S,T);S.flags|=128}if(G=S.memoizedState,G!==null&&(G.rendering=null,G.tail=null,G.lastEffect=null),ue(Lt,Lt.current),F)break;return null;case 22:return S.lanes=0,Ea(g,S,T,S.pendingProps);case 24:ls(S,Ln,g.memoizedState.cache)}return Rn(g,S,T)}function _c(g,S,T){if(g!==null)if(g.memoizedProps!==S.pendingProps)Nn=!0;else{if(!Ac(g,T)&&(S.flags&128)===0)return Nn=!1,df(g,S,T);Nn=(g.flags&131072)!==0}else Nn=!1,Ft&&(S.flags&1048576)!==0&&zd(S,io,S.index);switch(S.lanes=0,S.tag){case 16:e:{var F=S.pendingProps;if(g=ga(S.elementType),S.type=g,typeof g=="function")ql(g)?(F=js(g,F),S.tag=1,S=wc(null,S,g,F,T)):(S.tag=0,S=vo(null,S,g,F,T));else{if(g!=null){var G=g.$$typeof;if(G===q){S.tag=11,S=Ku(null,S,g,F,T);break e}else if(G===ee){S.tag=14,S=xa(null,S,g,F,T);break e}}throw S=Ee(g)||g,Error(o(306,S,""))}}return S;case 0:return vo(g,S,S.type,S.pendingProps,T);case 1:return F=S.type,G=js(F,S.pendingProps),wc(g,S,F,G,T);case 3:e:{if(de(S,S.stateNode.containerInfo),g===null)throw Error(o(387));F=S.pendingProps;var U=S.memoizedState;G=U.element,mu(g,S),uo(S,F,null,T);var te=S.memoizedState;if(F=te.cache,ls(S,Ln,F),F!==U.cache&&ec(S,[Ln],T,!0),il(),F=te.element,U.isDehydrated)if(U={element:F,isDehydrated:!1,cache:te.cache},S.updateQueue.baseState=U,S.memoizedState=U,S.flags&256){S=Lh(g,S,F,T);break e}else if(F!==G){G=Br(Error(o(424)),S),Fi(G),S=Lh(g,S,F,T);break e}else{switch(g=S.stateNode.containerInfo,g.nodeType){case 9:g=g.body;break;default:g=g.nodeName==="HTML"?g.ownerDocument.body:g}for(Xt=qi(g.firstChild),Sn=S,Ft=!0,os=null,Hr=!0,T=ac(S,null,F,T),S.child=T;T;)T.flags=T.flags&-3|4096,T=T.sibling}else{if(Is(),F===G){S=Rn(g,S,T);break e}$n(g,S,F,T)}S=S.child}return S;case 26:return Aa(g,S),g===null?(T=Jf(S.type,null,S.pendingProps,null))?S.memoizedState=T:Ft||(T=S.type,g=S.pendingProps,F=Gh(X.current).createElement(T),F[On]=S,F[rr]=g,br(F,T,g),Fn(F),S.stateNode=F):S.memoizedState=Jf(S.type,g.memoizedProps,S.pendingProps,g.memoizedState),null;case 27:return me(S),g===null&&Ft&&(F=S.stateNode=Xf(S.type,S.pendingProps,X.current),Sn=S,Hr=!0,G=Xt,Ro(S.type)?(Af=G,Xt=qi(F.firstChild)):Xt=G),$n(g,S,S.pendingProps.children,T),Aa(g,S),g===null&&(S.flags|=4194304),S.child;case 5:return g===null&&Ft&&((G=F=Xt)&&(F=Op(F,S.type,S.pendingProps,Hr),F!==null?(S.stateNode=F,Sn=S,Xt=qi(F.firstChild),Hr=!1,G=!0):G=!1),G||Oi(S)),me(S),G=S.type,U=S.pendingProps,te=g!==null?g.memoizedProps:null,F=U.children,bf(G,U)?F=null:te!==null&&bf(G,te)&&(S.flags|=32),S.memoizedState!==null&&(G=cc(g,S,wa,null,null,T),ld._currentValue=G),Aa(g,S),$n(g,S,F,T),S.child;case 6:return g===null&&Ft&&((g=T=Xt)&&(T=Fp(T,S.pendingProps,Hr),T!==null?(S.stateNode=T,Sn=S,Xt=null,g=!0):g=!1),g||Oi(S)),null;case 13:return Nh(g,S,T);case 4:return de(S,S.stateNode.containerInfo),F=S.pendingProps,g===null?S.child=us(S,null,F,T):$n(g,S,F,T),S.child;case 11:return Ku(g,S,S.type,S.pendingProps,T);case 7:return $n(g,S,S.pendingProps,T),S.child;case 8:return $n(g,S,S.pendingProps.children,T),S.child;case 12:return $n(g,S,S.pendingProps.children,T),S.child;case 10:return F=S.pendingProps,ls(S,S.type,F.value),$n(g,S,F.children,T),S.child;case 9:return G=S.type._context,F=S.pendingProps.children,Bs(S),G=gt(G),F=F(G),S.flags|=1,$n(g,S,F,T),S.child;case 14:return xa(g,S,S.type,S.pendingProps,T);case 15:return Cc(g,S,S.type,S.pendingProps,T);case 19:return Tr(g,S,T);case 31:return Sc(g,S,T);case 22:return Ea(g,S,T,S.pendingProps);case 24:return Bs(S),F=gt(Ln),g===null?(G=nc(),G===null&&(G=mt,U=du(),G.pooledCache=U,U.refCount++,U!==null&&(G.pooledCacheLanes|=T),G=U),S.memoizedState={parent:F,cache:G},rl(S),ls(S,Ln,G)):((g.lanes&T)!==0&&(mu(g,S),uo(S,null,null,T),il()),G=g.memoizedState,U=S.memoizedState,G.parent!==F?(G={parent:F,cache:F},S.memoizedState=G,S.lanes===0&&(S.memoizedState=S.updateQueue.baseState=G),ls(S,Ln,F)):(F=U.cache,ls(S,Ln,F),F!==G.cache&&ec(S,[Ln],T,!0))),$n(g,S,S.pendingProps.children,T),S.child;case 29:throw S.pendingProps}throw Error(o(156,S.tag))}function Hi(g){g.flags|=4}function hl(g,S,T,F,G){if((S=(g.mode&32)!==0)&&(S=!1),S){if(g.flags|=16777216,(G&335544128)===G)if(g.stateNode.complete)g.flags|=8192;else if(vn())g.flags|=8192;else throw ki=rc,tl}else g.flags&=-16777217}function Zu(g,S){if(S.type!=="stylesheet"||(S.state.loading&4)!==0)g.flags&=-16777217;else if(g.flags|=16777216,!ip(S))if(vn())g.flags|=8192;else throw ki=rc,tl}function ps(g,S){S!==null&&(g.flags|=4),g.flags&16384&&(S=g.tag!==22?Fr():536870912,g.lanes|=S,tn|=S)}function Gi(g,S){if(!Ft)switch(g.tailMode){case"hidden":S=g.tail;for(var T=null;S!==null;)S.alternate!==null&&(T=S),S=S.sibling;T===null?g.tail=null:T.sibling=null;break;case"collapsed":T=g.tail;for(var F=null;T!==null;)T.alternate!==null&&(F=T),T=T.sibling;F===null?S||g.tail===null?g.tail=null:g.tail.sibling=null:F.sibling=null}}function Kt(g){var S=g.alternate!==null&&g.alternate.child===g.child,T=0,F=0;if(S)for(var G=g.child;G!==null;)T|=G.lanes|G.childLanes,F|=G.subtreeFlags&65011712,F|=G.flags&65011712,G.return=g,G=G.sibling;else for(G=g.child;G!==null;)T|=G.lanes|G.childLanes,F|=G.subtreeFlags,F|=G.flags,G.return=g,G=G.sibling;return g.subtreeFlags|=F,g.childLanes=T,S}function fl(g,S,T){var F=S.pendingProps;switch(Xl(S),S.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(S),null;case 1:return Kt(S),null;case 3:return T=S.stateNode,F=null,g!==null&&(F=g.memoizedState.cache),S.memoizedState.cache!==F&&(S.flags|=2048),Ni(Ln),ce(),T.pendingContext&&(T.context=T.pendingContext,T.pendingContext=null),(g===null||g.child===null)&&(ao(S)?Hi(S):g===null||g.memoizedState.isDehydrated&&(S.flags&256)===0||(S.flags|=1024,Ql())),Kt(S),null;case 26:var G=S.type,U=S.memoizedState;return g===null?(Hi(S),U!==null?(Kt(S),Zu(S,U)):(Kt(S),hl(S,G,null,F,T))):U?U!==g.memoizedState?(Hi(S),Kt(S),Zu(S,U)):(Kt(S),S.flags&=-16777217):(g=g.memoizedProps,g!==F&&Hi(S),Kt(S),hl(S,G,g,F,T)),null;case 27:if(Se(S),T=X.current,G=S.type,g!==null&&S.stateNode!=null)g.memoizedProps!==F&&Hi(S);else{if(!F){if(S.stateNode===null)throw Error(o(166));return Kt(S),null}g=ye.current,ao(S)?Ud(S):(g=Xf(G,F,T),S.stateNode=g,Hi(S))}return Kt(S),null;case 5:if(Se(S),G=S.type,g!==null&&S.stateNode!=null)g.memoizedProps!==F&&Hi(S);else{if(!F){if(S.stateNode===null)throw Error(o(166));return Kt(S),null}if(U=ye.current,ao(S))Ud(S);else{var te=Gh(X.current);switch(U){case 1:U=te.createElementNS("http://www.w3.org/2000/svg",G);break;case 2:U=te.createElementNS("http://www.w3.org/1998/Math/MathML",G);break;default:switch(G){case"svg":U=te.createElementNS("http://www.w3.org/2000/svg",G);break;case"math":U=te.createElementNS("http://www.w3.org/1998/Math/MathML",G);break;case"script":U=te.createElement("div"),U.innerHTML="<script><\/script>",U=U.removeChild(U.firstChild);break;case"select":U=typeof F.is=="string"?te.createElement("select",{is:F.is}):te.createElement("select"),F.multiple?U.multiple=!0:F.size&&(U.size=F.size);break;default:U=typeof F.is=="string"?te.createElement(G,{is:F.is}):te.createElement(G)}}U[On]=S,U[rr]=F;e:for(te=S.child;te!==null;){if(te.tag===5||te.tag===6)U.appendChild(te.stateNode);else if(te.tag!==4&&te.tag!==27&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===S)break e;for(;te.sibling===null;){if(te.return===null||te.return===S)break e;te=te.return}te.sibling.return=te.return,te=te.sibling}S.stateNode=U;e:switch(br(U,G,F),G){case"button":case"input":case"select":case"textarea":F=!!F.autoFocus;break e;case"img":F=!0;break e;default:F=!1}F&&Hi(S)}}return Kt(S),hl(S,S.type,g===null?null:g.memoizedProps,S.pendingProps,T),null;case 6:if(g&&S.stateNode!=null)g.memoizedProps!==F&&Hi(S);else{if(typeof F!="string"&&S.stateNode===null)throw Error(o(166));if(g=X.current,ao(S)){if(g=S.stateNode,T=S.memoizedProps,F=null,G=Sn,G!==null)switch(G.tag){case 27:case 5:F=G.memoizedProps}g[On]=S,g=!!(g.nodeValue===T||F!==null&&F.suppressHydrationWarning===!0||Hf(g.nodeValue,T)),g||Oi(S,!0)}else g=Gh(g).createTextNode(F),g[On]=S,S.stateNode=g}return Kt(S),null;case 31:if(T=S.memoizedState,g===null||g.memoizedState!==null){if(F=ao(S),T!==null){if(g===null){if(!F)throw Error(o(318));if(g=S.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(o(557));g[On]=S}else Is(),(S.flags&128)===0&&(S.memoizedState=null),S.flags|=4;Kt(S),g=!1}else T=Ql(),g!==null&&g.memoizedState!==null&&(g.memoizedState.hydrationErrors=T),g=!0;if(!g)return S.flags&256?(An(S),S):(An(S),null);if((S.flags&128)!==0)throw Error(o(558))}return Kt(S),null;case 13:if(F=S.memoizedState,g===null||g.memoizedState!==null&&g.memoizedState.dehydrated!==null){if(G=ao(S),F!==null&&F.dehydrated!==null){if(g===null){if(!G)throw Error(o(318));if(G=S.memoizedState,G=G!==null?G.dehydrated:null,!G)throw Error(o(317));G[On]=S}else Is(),(S.flags&128)===0&&(S.memoizedState=null),S.flags|=4;Kt(S),G=!1}else G=Ql(),g!==null&&g.memoizedState!==null&&(g.memoizedState.hydrationErrors=G),G=!0;if(!G)return S.flags&256?(An(S),S):(An(S),null)}return An(S),(S.flags&128)!==0?(S.lanes=T,S):(T=F!==null,g=g!==null&&g.memoizedState!==null,T&&(F=S.child,G=null,F.alternate!==null&&F.alternate.memoizedState!==null&&F.alternate.memoizedState.cachePool!==null&&(G=F.alternate.memoizedState.cachePool.pool),U=null,F.memoizedState!==null&&F.memoizedState.cachePool!==null&&(U=F.memoizedState.cachePool.pool),U!==G&&(F.flags|=2048)),T!==g&&T&&(S.child.flags|=8192),ps(S,S.updateQueue),Kt(S),null);case 4:return ce(),g===null&&gf(S.stateNode.containerInfo),Kt(S),null;case 10:return Ni(S.type),Kt(S),null;case 19:if(ne(Lt),F=S.memoizedState,F===null)return Kt(S),null;if(G=(S.flags&128)!==0,U=F.rendering,U===null)if(G)Gi(F,!1);else{if(gn!==0||g!==null&&(g.flags&128)!==0)for(g=S.child;g!==null;){if(U=Vr(g),U!==null){for(S.flags|=128,Gi(F,!1),g=U.updateQueue,S.updateQueue=g,ps(S,g),S.subtreeFlags=0,g=T,T=S.child;T!==null;)eo(T,g),T=T.sibling;return ue(Lt,Lt.current&1|2),Ft&&Pi(S,F.treeForkCount),S.child}g=g.sibling}F.tail!==null&&at()>Tn&&(S.flags|=128,G=!0,Gi(F,!1),S.lanes=4194304)}else{if(!G)if(g=Vr(U),g!==null){if(S.flags|=128,G=!0,g=g.updateQueue,S.updateQueue=g,ps(S,g),Gi(F,!0),F.tail===null&&F.tailMode==="hidden"&&!U.alternate&&!Ft)return Kt(S),null}else 2*at()-F.renderingStartTime>Tn&&T!==536870912&&(S.flags|=128,G=!0,Gi(F,!1),S.lanes=4194304);F.isBackwards?(U.sibling=S.child,S.child=U):(g=F.last,g!==null?g.sibling=U:S.child=U,F.last=U)}return F.tail!==null?(g=F.tail,F.rendering=g,F.tail=g.sibling,F.renderingStartTime=at(),g.sibling=null,T=Lt.current,ue(Lt,G?T&1|2:T&1),Ft&&Pi(S,F.treeForkCount),g):(Kt(S),null);case 22:case 23:return An(S),sl(),F=S.memoizedState!==null,g!==null?g.memoizedState!==null!==F&&(S.flags|=8192):F&&(S.flags|=8192),F?(T&536870912)!==0&&(S.flags&128)===0&&(Kt(S),S.subtreeFlags&6&&(S.flags|=8192)):Kt(S),T=S.updateQueue,T!==null&&ps(S,T.retryQueue),T=null,g!==null&&g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(T=g.memoizedState.cachePool.pool),F=null,S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(F=S.memoizedState.cachePool.pool),F!==T&&(S.flags|=2048),g!==null&&ne(Hs),null;case 24:return T=null,g!==null&&(T=g.memoizedState.cache),S.memoizedState.cache!==T&&(S.flags|=2048),Ni(Ln),Kt(S),null;case 25:return null;case 30:return null}throw Error(o(156,S.tag))}function ii(g,S){switch(Xl(S),S.tag){case 1:return g=S.flags,g&65536?(S.flags=g&-65537|128,S):null;case 3:return Ni(Ln),ce(),g=S.flags,(g&65536)!==0&&(g&128)===0?(S.flags=g&-65537|128,S):null;case 26:case 27:case 5:return Se(S),null;case 31:if(S.memoizedState!==null){if(An(S),S.alternate===null)throw Error(o(340));Is()}return g=S.flags,g&65536?(S.flags=g&-65537|128,S):null;case 13:if(An(S),g=S.memoizedState,g!==null&&g.dehydrated!==null){if(S.alternate===null)throw Error(o(340));Is()}return g=S.flags,g&65536?(S.flags=g&-65537|128,S):null;case 19:return ne(Lt),null;case 4:return ce(),null;case 10:return Ni(S.type),null;case 22:case 23:return An(S),sl(),g!==null&&ne(Hs),g=S.flags,g&65536?(S.flags=g&-65537|128,S):null;case 24:return Ni(Ln),null;case 25:return null;default:return null}}function zr(g,S){switch(Xl(S),S.tag){case 3:Ni(Ln),ce();break;case 26:case 27:case 5:Se(S);break;case 4:ce();break;case 31:S.memoizedState!==null&&An(S);break;case 13:An(S);break;case 19:ne(Lt);break;case 10:Ni(S.type);break;case 22:case 23:An(S),sl(),g!==null&&ne(Hs);break;case 24:Ni(Ln)}}function si(g,S){try{var T=S.updateQueue,F=T!==null?T.lastEffect:null;if(F!==null){var G=F.next;T=G;do{if((T.tag&g)===g){F=void 0;var U=T.create,te=T.inst;F=U(),te.destroy=F}T=T.next}while(T!==G)}}catch(ve){Ht(S,S.return,ve)}}function Qn(g,S,T){try{var F=S.updateQueue,G=F!==null?F.lastEffect:null;if(G!==null){var U=G.next;F=U;do{if((F.tag&g)===g){var te=F.inst,ve=te.destroy;if(ve!==void 0){te.destroy=void 0,G=S;var Ae=T,ke=ve;try{ke()}catch(We){Ht(G,Ae,We)}}}F=F.next}while(F!==U)}}catch(We){Ht(S,S.return,We)}}function yi(g){var S=g.updateQueue;if(S!==null){var T=g.stateNode;try{Kd(S,T)}catch(F){Ht(g,g.return,F)}}}function qn(g,S,T){T.props=js(g.type,g.memoizedProps),T.state=g.memoizedState;try{T.componentWillUnmount()}catch(F){Ht(g,S,F)}}function gs(g,S){try{var T=g.ref;if(T!==null){switch(g.tag){case 26:case 27:case 5:var F=g.stateNode;break;case 30:F=g.stateNode;break;default:F=g.stateNode}typeof T=="function"?g.refCleanup=T(F):T.current=F}}catch(G){Ht(g,S,G)}}function Jn(g,S){var T=g.ref,F=g.refCleanup;if(T!==null)if(typeof F=="function")try{F()}catch(G){Ht(g,S,G)}finally{g.refCleanup=null,g=g.alternate,g!=null&&(g.refCleanup=null)}else if(typeof T=="function")try{T(null)}catch(G){Ht(g,S,G)}else T.current=null}function pl(g){var S=g.type,T=g.memoizedProps,F=g.stateNode;try{e:switch(S){case"button":case"input":case"select":case"textarea":T.autoFocus&&F.focus();break e;case"img":T.src?F.src=T.src:T.srcSet&&(F.srcset=T.srcSet)}}catch(G){Ht(g,g.return,G)}}function Vn(g,S,T){try{var F=g.stateNode;_p(F,g.type,T,S),F[rr]=S}catch(G){Ht(g,g.return,G)}}function on(g){return g.tag===5||g.tag===3||g.tag===26||g.tag===27&&Ro(g.type)||g.tag===4}function Mt(g){e:for(;;){for(;g.sibling===null;){if(g.return===null||on(g.return))return null;g=g.return}for(g.sibling.return=g.return,g=g.sibling;g.tag!==5&&g.tag!==6&&g.tag!==18;){if(g.tag===27&&Ro(g.type)||g.flags&2||g.child===null||g.tag===4)continue e;g.child.return=g,g=g.child}if(!(g.flags&2))return g.stateNode}}function Vi(g,S,T){var F=g.tag;if(F===5||F===6)g=g.stateNode,S?(T.nodeType===9?T.body:T.nodeName==="HTML"?T.ownerDocument.body:T).insertBefore(g,S):(S=T.nodeType===9?T.body:T.nodeName==="HTML"?T.ownerDocument.body:T,S.appendChild(g),T=T._reactRootContainer,T!=null||S.onclick!==null||(S.onclick=ns));else if(F!==4&&(F===27&&Ro(g.type)&&(T=g.stateNode,S=null),g=g.child,g!==null))for(Vi(g,S,T),g=g.sibling;g!==null;)Vi(g,S,T),g=g.sibling}function gr(g,S,T){var F=g.tag;if(F===5||F===6)g=g.stateNode,S?T.insertBefore(g,S):T.appendChild(g);else if(F!==4&&(F===27&&Ro(g.type)&&(T=g.stateNode),g=g.child,g!==null))for(gr(g,S,T),g=g.sibling;g!==null;)gr(g,S,T),g=g.sibling}function Rc(g){var S=g.stateNode,T=g.memoizedProps;try{for(var F=g.type,G=S.attributes;G.length;)S.removeAttributeNode(G[0]);br(S,F,T),S[On]=g,S[rr]=T}catch(U){Ht(g,g.return,U)}}var ai=!1,Zt=!1,Ci=!1,kh=typeof WeakSet=="function"?WeakSet:Set,Kn=null;function hf(g,S){if(g=g.containerInfo,yf=qh,g=Bd(g),au(g)){if("selectionStart"in g)var T={start:g.selectionStart,end:g.selectionEnd};else e:{T=(T=g.ownerDocument)&&T.defaultView||window;var F=T.getSelection&&T.getSelection();if(F&&F.rangeCount!==0){T=F.anchorNode;var G=F.anchorOffset,U=F.focusNode;F=F.focusOffset;try{T.nodeType,U.nodeType}catch{T=null;break e}var te=0,ve=-1,Ae=-1,ke=0,We=0,Ke=g,Ge=null;t:for(;;){for(var Ue;Ke!==T||G!==0&&Ke.nodeType!==3||(ve=te+G),Ke!==U||F!==0&&Ke.nodeType!==3||(Ae=te+F),Ke.nodeType===3&&(te+=Ke.nodeValue.length),(Ue=Ke.firstChild)!==null;)Ge=Ke,Ke=Ue;for(;;){if(Ke===g)break t;if(Ge===T&&++ke===G&&(ve=te),Ge===U&&++We===F&&(Ae=te),(Ue=Ke.nextSibling)!==null)break;Ke=Ge,Ge=Ke.parentNode}Ke=Ue}T=ve===-1||Ae===-1?null:{start:ve,end:Ae}}else T=null}T=T||{start:0,end:0}}else T=null;for(Cf={focusedElem:g,selectionRange:T},qh=!1,Kn=S;Kn!==null;)if(S=Kn,g=S.child,(S.subtreeFlags&1028)!==0&&g!==null)g.return=S,Kn=g;else for(;Kn!==null;){switch(S=Kn,U=S.alternate,g=S.flags,S.tag){case 0:if((g&4)!==0&&(g=S.updateQueue,g=g!==null?g.events:null,g!==null))for(T=0;T<g.length;T++)G=g[T],G.ref.impl=G.nextImpl;break;case 11:case 15:break;case 1:if((g&1024)!==0&&U!==null){g=void 0,T=S,G=U.memoizedProps,U=U.memoizedState,F=T.stateNode;try{var ot=js(T.type,G);g=F.getSnapshotBeforeUpdate(ot,U),F.__reactInternalSnapshotBeforeUpdate=g}catch(pt){Ht(T,T.return,pt)}}break;case 3:if((g&1024)!==0){if(g=S.stateNode.containerInfo,T=g.nodeType,T===9)wf(g);else if(T===1)switch(g.nodeName){case"HEAD":case"HTML":case"BODY":wf(g);break;default:g.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((g&1024)!==0)throw Error(o(163))}if(g=S.sibling,g!==null){g.return=S.return,Kn=g;break}Kn=S.return}}function cn(g,S,T){var F=T.flags;switch(T.tag){case 0:case 11:case 15:ci(g,T),F&4&&si(5,T);break;case 1:if(ci(g,T),F&4)if(g=T.stateNode,S===null)try{g.componentDidMount()}catch(te){Ht(T,T.return,te)}else{var G=js(T.type,S.memoizedProps);S=S.memoizedState;try{g.componentDidUpdate(G,S,g.__reactInternalSnapshotBeforeUpdate)}catch(te){Ht(T,T.return,te)}}F&64&&yi(T),F&512&&gs(T,T.return);break;case 3:if(ci(g,T),F&64&&(g=T.updateQueue,g!==null)){if(S=null,T.child!==null)switch(T.child.tag){case 27:case 5:S=T.child.stateNode;break;case 1:S=T.child.stateNode}try{Kd(g,S)}catch(te){Ht(T,T.return,te)}}break;case 27:S===null&&F&4&&Rc(T);case 26:case 5:ci(g,T),S===null&&F&4&&pl(T),F&512&&gs(T,T.return);break;case 12:ci(g,T);break;case 31:ci(g,T),F&4&&Ws(g,T);break;case 13:ci(g,T),F&4&&yo(g,T),F&64&&(g=T.memoizedState,g!==null&&(g=g.dehydrated,g!==null&&(T=L.bind(null,T),Lp(g,T))));break;case 22:if(F=T.memoizedState!==null||ai,!F){S=S!==null&&S.memoizedState!==null||Zt,G=ai;var U=Zt;ai=F,(Zt=S)&&!U?mr(g,T,(T.subtreeFlags&8772)!==0):ci(g,T),ai=G,Zt=U}break;case 30:break;default:ci(g,T)}}function gl(g){var S=g.alternate;S!==null&&(g.alternate=null,gl(S)),g.child=null,g.deletions=null,g.sibling=null,g.tag===5&&(S=g.stateNode,S!==null&&na(S)),g.stateNode=null,g.return=null,g.dependencies=null,g.memoizedProps=null,g.memoizedState=null,g.pendingProps=null,g.stateNode=null,g.updateQueue=null}var jt=null,lr=!1;function oi(g,S,T){for(T=T.child;T!==null;)Tc(g,S,T),T=T.sibling}function Tc(g,S,T){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount(Ss,T)}catch{}switch(T.tag){case 26:Zt||Jn(T,S),oi(g,S,T),T.memoizedState?T.memoizedState.count--:T.stateNode&&(T=T.stateNode,T.parentNode.removeChild(T));break;case 27:Zt||Jn(T,S);var F=jt,G=lr;Ro(T.type)&&(jt=T.stateNode,lr=!1),oi(g,S,T),sd(T.stateNode),jt=F,lr=G;break;case 5:Zt||Jn(T,S);case 6:if(F=jt,G=lr,jt=null,oi(g,S,T),jt=F,lr=G,jt!==null)if(lr)try{(jt.nodeType===9?jt.body:jt.nodeName==="HTML"?jt.ownerDocument.body:jt).removeChild(T.stateNode)}catch(U){Ht(T,S,U)}else try{jt.removeChild(T.stateNode)}catch(U){Ht(T,S,U)}break;case 18:jt!==null&&(lr?(g=jt,Wf(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,T.stateNode),Ic(g)):Wf(jt,T.stateNode));break;case 4:F=jt,G=lr,jt=T.stateNode.containerInfo,lr=!0,oi(g,S,T),jt=F,lr=G;break;case 0:case 11:case 14:case 15:Qn(2,T,S),Zt||Qn(4,T,S),oi(g,S,T);break;case 1:Zt||(Jn(T,S),F=T.stateNode,typeof F.componentWillUnmount=="function"&&qn(T,S,F)),oi(g,S,T);break;case 21:oi(g,S,T);break;case 22:Zt=(F=Zt)||T.memoizedState!==null,oi(g,S,T),Zt=F;break;default:oi(g,S,T)}}function Ws(g,S){if(S.memoizedState===null&&(g=S.alternate,g!==null&&(g=g.memoizedState,g!==null))){g=g.dehydrated;try{Ic(g)}catch(T){Ht(S,S.return,T)}}}function yo(g,S){if(S.memoizedState===null&&(g=S.alternate,g!==null&&(g=g.memoizedState,g!==null&&(g=g.dehydrated,g!==null))))try{Ic(g)}catch(T){Ht(S,S.return,T)}}function Qu(g){switch(g.tag){case 31:case 13:case 19:var S=g.stateNode;return S===null&&(S=g.stateNode=new kh),S;case 22:return g=g.stateNode,S=g._retryCache,S===null&&(S=g._retryCache=new kh),S;default:throw Error(o(435,g.tag))}}function ms(g,S){var T=Qu(g);S.forEach(function(F){if(!T.has(F)){T.add(F);var G=H.bind(null,g,F);F.then(G,G)}})}function zn(g,S){var T=S.deletions;if(T!==null)for(var F=0;F<T.length;F++){var G=T[F],U=g,te=S,ve=te;e:for(;ve!==null;){switch(ve.tag){case 27:if(Ro(ve.type)){jt=ve.stateNode,lr=!1;break e}break;case 5:jt=ve.stateNode,lr=!1;break e;case 3:case 4:jt=ve.stateNode.containerInfo,lr=!0;break e}ve=ve.return}if(jt===null)throw Error(o(160));Tc(U,te,G),jt=null,lr=!1,U=G.alternate,U!==null&&(U.return=null),G.return=null}if(S.subtreeFlags&13886)for(S=S.child;S!==null;)$s(S,g),S=S.sibling}var li=null;function $s(g,S){var T=g.alternate,F=g.flags;switch(g.tag){case 0:case 11:case 14:case 15:zn(S,g),Un(g),F&4&&(Qn(3,g,g.return),si(3,g),Qn(5,g,g.return));break;case 1:zn(S,g),Un(g),F&512&&(Zt||T===null||Jn(T,T.return)),F&64&&ai&&(g=g.updateQueue,g!==null&&(F=g.callbacks,F!==null&&(T=g.shared.hiddenCallbacks,g.shared.hiddenCallbacks=T===null?F:T.concat(F))));break;case 26:var G=li;if(zn(S,g),Un(g),F&512&&(Zt||T===null||Jn(T,T.return)),F&4){var U=T!==null?T.memoizedState:null;if(F=g.memoizedState,T===null)if(F===null)if(g.stateNode===null){e:{F=g.type,T=g.memoizedProps,G=G.ownerDocument||G;t:switch(F){case"title":U=G.getElementsByTagName("title")[0],(!U||U[Ji]||U[On]||U.namespaceURI==="http://www.w3.org/2000/svg"||U.hasAttribute("itemprop"))&&(U=G.createElement(F),G.head.insertBefore(U,G.querySelector("head > title"))),br(U,F,T),U[On]=g,Fn(U),F=U;break e;case"link":var te=np("link","href",G).get(F+(T.href||""));if(te){for(var ve=0;ve<te.length;ve++)if(U=te[ve],U.getAttribute("href")===(T.href==null||T.href===""?null:T.href)&&U.getAttribute("rel")===(T.rel==null?null:T.rel)&&U.getAttribute("title")===(T.title==null?null:T.title)&&U.getAttribute("crossorigin")===(T.crossOrigin==null?null:T.crossOrigin)){te.splice(ve,1);break t}}U=G.createElement(F),br(U,F,T),G.head.appendChild(U);break;case"meta":if(te=np("meta","content",G).get(F+(T.content||""))){for(ve=0;ve<te.length;ve++)if(U=te[ve],U.getAttribute("content")===(T.content==null?null:""+T.content)&&U.getAttribute("name")===(T.name==null?null:T.name)&&U.getAttribute("property")===(T.property==null?null:T.property)&&U.getAttribute("http-equiv")===(T.httpEquiv==null?null:T.httpEquiv)&&U.getAttribute("charset")===(T.charSet==null?null:T.charSet)){te.splice(ve,1);break t}}U=G.createElement(F),br(U,F,T),G.head.appendChild(U);break;default:throw Error(o(468,F))}U[On]=g,Fn(U),F=U}g.stateNode=F}else rp(G,g.type,g.stateNode);else g.stateNode=tp(G,F,g.memoizedProps);else U!==F?(U===null?T.stateNode!==null&&(T=T.stateNode,T.parentNode.removeChild(T)):U.count--,F===null?rp(G,g.type,g.stateNode):tp(G,F,g.memoizedProps)):F===null&&g.stateNode!==null&&Vn(g,g.memoizedProps,T.memoizedProps)}break;case 27:zn(S,g),Un(g),F&512&&(Zt||T===null||Jn(T,T.return)),T!==null&&F&4&&Vn(g,g.memoizedProps,T.memoizedProps);break;case 5:if(zn(S,g),Un(g),F&512&&(Zt||T===null||Jn(T,T.return)),g.flags&32){G=g.stateNode;try{sa(G,"")}catch(ot){Ht(g,g.return,ot)}}F&4&&g.stateNode!=null&&(G=g.memoizedProps,Vn(g,G,T!==null?T.memoizedProps:G)),F&1024&&(Ci=!0);break;case 6:if(zn(S,g),Un(g),F&4){if(g.stateNode===null)throw Error(o(162));F=g.memoizedProps,T=g.stateNode;try{T.nodeValue=F}catch(ot){Ht(g,g.return,ot)}}break;case 3:if(Uh=null,G=li,li=Vh(S.containerInfo),zn(S,g),li=G,Un(g),F&4&&T!==null&&T.memoizedState.isDehydrated)try{Ic(S.containerInfo)}catch(ot){Ht(g,g.return,ot)}Ci&&(Ci=!1,Dc(g));break;case 4:F=li,li=Vh(g.stateNode.containerInfo),zn(S,g),Un(g),li=F;break;case 12:zn(S,g),Un(g);break;case 31:zn(S,g),Un(g),F&4&&(F=g.updateQueue,F!==null&&(g.updateQueue=null,ms(g,F)));break;case 13:zn(S,g),Un(g),g.child.flags&8192&&g.memoizedState!==null!=(T!==null&&T.memoizedState!==null)&&(Co=at()),F&4&&(F=g.updateQueue,F!==null&&(g.updateQueue=null,ms(g,F)));break;case 22:G=g.memoizedState!==null;var Ae=T!==null&&T.memoizedState!==null,ke=ai,We=Zt;if(ai=ke||G,Zt=We||Ae,zn(S,g),Zt=We,ai=ke,Un(g),F&8192)e:for(S=g.stateNode,S._visibility=G?S._visibility&-2:S._visibility|1,G&&(T===null||Ae||ai||Zt||zi(g)),T=null,S=g;;){if(S.tag===5||S.tag===26){if(T===null){Ae=T=S;try{if(U=Ae.stateNode,G)te=U.style,typeof te.setProperty=="function"?te.setProperty("display","none","important"):te.display="none";else{ve=Ae.stateNode;var Ke=Ae.memoizedProps.style,Ge=Ke!=null&&Ke.hasOwnProperty("display")?Ke.display:null;ve.style.display=Ge==null||typeof Ge=="boolean"?"":(""+Ge).trim()}}catch(ot){Ht(Ae,Ae.return,ot)}}}else if(S.tag===6){if(T===null){Ae=S;try{Ae.stateNode.nodeValue=G?"":Ae.memoizedProps}catch(ot){Ht(Ae,Ae.return,ot)}}}else if(S.tag===18){if(T===null){Ae=S;try{var Ue=Ae.stateNode;G?$f(Ue,!0):$f(Ae.stateNode,!1)}catch(ot){Ht(Ae,Ae.return,ot)}}}else if((S.tag!==22&&S.tag!==23||S.memoizedState===null||S===g)&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===g)break e;for(;S.sibling===null;){if(S.return===null||S.return===g)break e;T===S&&(T=null),S=S.return}T===S&&(T=null),S.sibling.return=S.return,S=S.sibling}F&4&&(F=g.updateQueue,F!==null&&(T=F.retryQueue,T!==null&&(F.retryQueue=null,ms(g,T))));break;case 19:zn(S,g),Un(g),F&4&&(F=g.updateQueue,F!==null&&(g.updateQueue=null,ms(g,F)));break;case 30:break;case 21:break;default:zn(S,g),Un(g)}}function Un(g){var S=g.flags;if(S&2){try{for(var T,F=g.return;F!==null;){if(on(F)){T=F;break}F=F.return}if(T==null)throw Error(o(160));switch(T.tag){case 27:var G=T.stateNode,U=Mt(g);gr(g,U,G);break;case 5:var te=T.stateNode;T.flags&32&&(sa(te,""),T.flags&=-33);var ve=Mt(g);gr(g,ve,te);break;case 3:case 4:var Ae=T.stateNode.containerInfo,ke=Mt(g);Vi(g,ke,Ae);break;default:throw Error(o(161))}}catch(We){Ht(g,g.return,We)}g.flags&=-3}S&4096&&(g.flags&=-4097)}function Dc(g){if(g.subtreeFlags&1024)for(g=g.child;g!==null;){var S=g;Dc(S),S.tag===5&&S.flags&1024&&S.stateNode.reset(),g=g.sibling}}function ci(g,S){if(S.subtreeFlags&8772)for(S=S.child;S!==null;)cn(g,S.alternate,S),S=S.sibling}function zi(g){for(g=g.child;g!==null;){var S=g;switch(S.tag){case 0:case 11:case 14:case 15:Qn(4,S,S.return),zi(S);break;case 1:Jn(S,S.return);var T=S.stateNode;typeof T.componentWillUnmount=="function"&&qn(S,S.return,T),zi(S);break;case 27:sd(S.stateNode);case 26:case 5:Jn(S,S.return),zi(S);break;case 22:S.memoizedState===null&&zi(S);break;case 30:zi(S);break;default:zi(S)}g=g.sibling}}function mr(g,S,T){for(T=T&&(S.subtreeFlags&8772)!==0,S=S.child;S!==null;){var F=S.alternate,G=g,U=S,te=U.flags;switch(U.tag){case 0:case 11:case 15:mr(G,U,T),si(4,U);break;case 1:if(mr(G,U,T),F=U,G=F.stateNode,typeof G.componentDidMount=="function")try{G.componentDidMount()}catch(ke){Ht(F,F.return,ke)}if(F=U,G=F.updateQueue,G!==null){var ve=F.stateNode;try{var Ae=G.shared.hiddenCallbacks;if(Ae!==null)for(G.shared.hiddenCallbacks=null,G=0;G<Ae.length;G++)ho(Ae[G],ve)}catch(ke){Ht(F,F.return,ke)}}T&&te&64&&yi(U),gs(U,U.return);break;case 27:Rc(U);case 26:case 5:mr(G,U,T),T&&F===null&&te&4&&pl(U),gs(U,U.return);break;case 12:mr(G,U,T);break;case 31:mr(G,U,T),T&&te&4&&Ws(G,U);break;case 13:mr(G,U,T),T&&te&4&&yo(G,U);break;case 22:U.memoizedState===null&&mr(G,U,T),gs(U,U.return);break;case 30:break;default:mr(G,U,T)}S=S.sibling}}function qs(g,S){var T=null;g!==null&&g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(T=g.memoizedState.cachePool.pool),g=null,S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(g=S.memoizedState.cachePool.pool),g!==T&&(g!=null&&g.refCount++,T!=null&&fa(T))}function Ta(g,S){g=null,S.alternate!==null&&(g=S.alternate.memoizedState.cache),S=S.memoizedState.cache,S!==g&&(S.refCount++,g!=null&&fa(g))}function er(g,S,T,F){if(S.subtreeFlags&10256)for(S=S.child;S!==null;)Ju(g,S,T,F),S=S.sibling}function Ju(g,S,T,F){var G=S.flags;switch(S.tag){case 0:case 11:case 15:er(g,S,T,F),G&2048&&si(9,S);break;case 1:er(g,S,T,F);break;case 3:er(g,S,T,F),G&2048&&(g=null,S.alternate!==null&&(g=S.alternate.memoizedState.cache),S=S.memoizedState.cache,S!==g&&(S.refCount++,g!=null&&fa(g)));break;case 12:if(G&2048){er(g,S,T,F),g=S.stateNode;try{var U=S.memoizedProps,te=U.id,ve=U.onPostCommit;typeof ve=="function"&&ve(te,S.alternate===null?"mount":"update",g.passiveEffectDuration,-0)}catch(Ae){Ht(S,S.return,Ae)}}else er(g,S,T,F);break;case 31:er(g,S,T,F);break;case 13:er(g,S,T,F);break;case 23:break;case 22:U=S.stateNode,te=S.alternate,S.memoizedState!==null?U._visibility&2?er(g,S,T,F):Ui(g,S):U._visibility&2?er(g,S,T,F):(U._visibility|=2,tr(g,S,T,F,(S.subtreeFlags&10256)!==0||!1)),G&2048&&qs(te,S);break;case 24:er(g,S,T,F),G&2048&&Ta(S.alternate,S);break;default:er(g,S,T,F)}}function tr(g,S,T,F,G){for(G=G&&((S.subtreeFlags&10256)!==0||!1),S=S.child;S!==null;){var U=g,te=S,ve=T,Ae=F,ke=te.flags;switch(te.tag){case 0:case 11:case 15:tr(U,te,ve,Ae,G),si(8,te);break;case 23:break;case 22:var We=te.stateNode;te.memoizedState!==null?We._visibility&2?tr(U,te,ve,Ae,G):Ui(U,te):(We._visibility|=2,tr(U,te,ve,Ae,G)),G&&ke&2048&&qs(te.alternate,te);break;case 24:tr(U,te,ve,Ae,G),G&&ke&2048&&Ta(te.alternate,te);break;default:tr(U,te,ve,Ae,G)}S=S.sibling}}function Ui(g,S){if(S.subtreeFlags&10256)for(S=S.child;S!==null;){var T=g,F=S,G=F.flags;switch(F.tag){case 22:Ui(T,F),G&2048&&qs(F.alternate,F);break;case 24:Ui(T,F),G&2048&&Ta(F.alternate,F);break;default:Ui(T,F)}S=S.sibling}}var Da=8192;function Ur(g,S,T){if(g.subtreeFlags&Da)for(g=g.child;g!==null;)Pc(g,S,T),g=g.sibling}function Pc(g,S,T){switch(g.tag){case 26:Ur(g,S,T),g.flags&Da&&g.memoizedState!==null&&$p(T,li,g.memoizedState,g.memoizedProps);break;case 5:Ur(g,S,T);break;case 3:case 4:var F=li;li=Vh(g.stateNode.containerInfo),Ur(g,S,T),li=F;break;case 22:g.memoizedState===null&&(F=g.alternate,F!==null&&F.memoizedState!==null?(F=Da,Da=16777216,Ur(g,S,T),Da=F):Ur(g,S,T));break;default:Ur(g,S,T)}}function Pa(g){var S=g.alternate;if(S!==null&&(g=S.child,g!==null)){S.child=null;do S=g.sibling,g.sibling=null,g=S;while(g!==null)}}function Ks(g){var S=g.deletions;if((g.flags&16)!==0){if(S!==null)for(var T=0;T<S.length;T++){var F=S[T];Kn=F,wn(F,g)}Pa(g)}if(g.subtreeFlags&10256)for(g=g.child;g!==null;)Dr(g),g=g.sibling}function Dr(g){switch(g.tag){case 0:case 11:case 15:Ks(g),g.flags&2048&&Qn(9,g,g.return);break;case 3:Ks(g);break;case 12:Ks(g);break;case 22:var S=g.stateNode;g.memoizedState!==null&&S._visibility&2&&(g.return===null||g.return.tag!==13)?(S._visibility&=-3,vr(g)):Ks(g);break;default:Ks(g)}}function vr(g){var S=g.deletions;if((g.flags&16)!==0){if(S!==null)for(var T=0;T<S.length;T++){var F=S[T];Kn=F,wn(F,g)}Pa(g)}for(g=g.child;g!==null;){switch(S=g,S.tag){case 0:case 11:case 15:Qn(8,S,S.return),vr(S);break;case 22:T=S.stateNode,T._visibility&2&&(T._visibility&=-3,vr(S));break;default:vr(S)}g=g.sibling}}function wn(g,S){for(;Kn!==null;){var T=Kn;switch(T.tag){case 0:case 11:case 15:Qn(8,T,S);break;case 23:case 22:if(T.memoizedState!==null&&T.memoizedState.cachePool!==null){var F=T.memoizedState.cachePool.pool;F!=null&&F.refCount++}break;case 24:fa(T.memoizedState.cache)}if(F=T.child,F!==null)F.return=T,Kn=F;else e:for(T=g;Kn!==null;){F=Kn;var G=F.sibling,U=F.return;if(gl(F),F===T){Kn=null;break e}if(G!==null){G.return=U,Kn=G;break e}Kn=U}}}var vs={getCacheForType:function(g){var S=gt(Ln),T=S.data.get(g);return T===void 0&&(T=g(),S.data.set(g,T)),T},cacheSignal:function(){return gt(Ln).controller.signal}},bt=typeof WeakMap=="function"?WeakMap:Map,ct=0,mt=null,Et=null,St=0,Nt=0,cr=null,ui=!1,bi=!1,ed=!1,jr=0,gn=0,ji=0,Ys=0,ml=0,yr=0,tn=0,Ma=null,xn=null,En=!1,Co=0,td=0,Tn=1/0,mn=null,Dn=null,Wt=0,Wr=null,bo=null,di=0,So=0,wo=null,vl=null,Xs=0,Oa=null;function $r(){return(ct&2)!==0&&St!==0?St&-St:oe.T!==null?Ve():ws()}function Rt(){if(yr===0)if((St&536870912)===0||Ft){var g=Mr;Mr<<=1,(Mr&3932160)===0&&(Mr=262144),yr=g}else yr=536870912;return g=Ar.current,g!==null&&(g.flags|=32),yr}function At(g,S,T){(g===mt&&(Nt===2||Nt===9)||g.cancelPendingCommit!==null)&&(Qs(g,0),In(g,St,yr,!1)),gi(g,T),((ct&2)===0||g!==mt)&&(g===mt&&((ct&2)===0&&(Ys|=T),gn===4&&In(g,St,yr,!1)),Je(g))}function Tt(g,S,T){if((ct&6)!==0)throw Error(o(327));var F=!T&&(S&127)===0&&(S&g.expiredLanes)===0||Or(g,S),G=F?yl(g,S):Cr(g,S,!0),U=F;do{if(G===0){bi&&!F&&In(g,S,0,!1);break}else{if(T=g.current.alternate,U&&!$t(T)){G=Cr(g,S,!1),U=!1;continue}if(G===2){if(U=S,g.errorRecoveryDisabledLanes&U)var te=0;else te=g.pendingLanes&-536870913,te=te!==0?te:te&536870912?536870912:0;if(te!==0){S=te;e:{var ve=g;G=Ma;var Ae=ve.current.memoizedState.isDehydrated;if(Ae&&(Qs(ve,te).flags|=256),te=Cr(ve,te,!1),te!==2){if(ed&&!Ae){ve.errorRecoveryDisabledLanes|=U,Ys|=U,G=4;break e}U=xn,xn=G,U!==null&&(xn===null?xn=U:xn.push.apply(xn,U))}G=te}if(U=!1,G!==2)continue}}if(G===1){Qs(g,0),In(g,S,0,!0);break}e:{switch(F=g,U=G,U){case 0:case 1:throw Error(o(345));case 4:if((S&4194048)!==S)break;case 6:In(F,S,yr,!ui);break e;case 2:xn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((S&62914560)===S&&(G=Co+300-at(),10<G)){if(In(F,S,yr,!ui),bn(F,0,!0)!==0)break e;di=S,F.timeoutHandle=Uf(Ot.bind(null,F,T,xn,mn,En,S,yr,Ys,tn,ui,U,"Throttled",-0,0),G);break e}Ot(F,T,xn,mn,En,S,yr,Ys,tn,ui,U,null,-0,0)}}break}while(!0);Je(g)}function Ot(g,S,T,F,G,U,te,ve,Ae,ke,We,Ke,Ge,Ue){if(g.timeoutHandle=-1,Ke=S.subtreeFlags,Ke&8192||(Ke&16785408)===16785408){Ke={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ns},Pc(S,U,Ke);var ot=(U&62914560)===U?Co-at():(U&4194048)===U?td-at():0;if(ot=qp(Ke,ot),ot!==null){di=U,g.cancelPendingCommit=ot(Cs.bind(null,g,S,U,T,F,G,te,ve,Ae,We,Ke,null,Ge,Ue)),In(g,U,te,!ke);return}}Cs(g,S,U,T,F,G,te,ve,Ae)}function $t(g){for(var S=g;;){var T=S.tag;if((T===0||T===11||T===15)&&S.flags&16384&&(T=S.updateQueue,T!==null&&(T=T.stores,T!==null)))for(var F=0;F<T.length;F++){var G=T[F],U=G.getSnapshot;G=G.value;try{if(!dr(U(),G))return!1}catch{return!1}}if(T=S.child,S.subtreeFlags&16384&&T!==null)T.return=S,S=T;else{if(S===g)break;for(;S.sibling===null;){if(S.return===null||S.return===g)return!0;S=S.return}S.sibling.return=S.return,S=S.sibling}}return!0}function In(g,S,T,F){S&=~ml,S&=~Ys,g.suspendedLanes|=S,g.pingedLanes&=~S,F&&(g.warmLanes|=S),F=g.expirationTimes;for(var G=S;0<G;){var U=31-Pe(G),te=1<<U;F[U]=-1,G&=~te}T!==0&&wi(g,T,S)}function Si(){return(ct&6)===0?(it(0),!1):!0}function Zs(){if(Et!==null){if(Nt===0)var g=Et.return;else g=Et,Li=ks=null,Eu(g),ya=null,Ca=0,g=Et;for(;g!==null;)zr(g.alternate,g),g=g.return;Et=null}}function Qs(g,S){var T=g.timeoutHandle;T!==-1&&(g.timeoutHandle=-1,Dp(T)),T=g.cancelPendingCommit,T!==null&&(g.cancelPendingCommit=null,T()),di=0,Zs(),mt=g,Et=T=wr(g.current,null),St=S,Nt=0,cr=null,ui=!1,bi=Or(g,S),ed=!1,tn=yr=ml=Ys=ji=gn=0,xn=Ma=null,En=!1,(S&8)!==0&&(S|=S&32);var F=g.entangledLanes;if(F!==0)for(g=g.entanglements,F&=S;0<F;){var G=31-Pe(F),U=1<<G;S|=g[G],F&=~U}return jr=S,Zo(),T}function Wi(g,S){Ct=null,oe.H=mo,S===pa||S===xt?(S=ma(),Nt=3):S===tl?(S=ma(),Nt=4):Nt=S===yc?8:S!==null&&typeof S=="object"&&typeof S.then=="function"?6:1,cr=S,Et===null&&(gn=1,vc(g,Br(S,g.current)))}function vn(){var g=Ar.current;return g===null?!0:(St&4194048)===St?pr===null:(St&62914560)===St||(St&536870912)!==0?g===pr:!1}function ys(){var g=oe.H;return oe.H=mo,g===null?mo:g}function Js(){var g=oe.A;return oe.A=vs,g}function xo(){gn=4,ui||(St&4194048)!==St&&Ar.current!==null||(bi=!0),(ji&134217727)===0&&(Ys&134217727)===0||mt===null||In(mt,St,yr,!1)}function Cr(g,S,T){var F=ct;ct|=2;var G=ys(),U=Js();(mt!==g||St!==S)&&(mn=null,Qs(g,S)),S=!1;var te=gn;e:do try{if(Nt!==0&&Et!==null){var ve=Et,Ae=cr;switch(Nt){case 8:Zs(),te=6;break e;case 3:case 2:case 9:case 6:Ar.current===null&&(S=!0);var ke=Nt;if(Nt=0,cr=null,Fa(g,ve,Ae,ke),T&&bi){te=0;break e}break;default:ke=Nt,Nt=0,cr=null,Fa(g,ve,Ae,ke)}}Eo(),te=gn;break}catch(We){Wi(g,We)}while(!0);return S&&g.shellSuspendCounter++,Li=ks=null,ct=F,oe.H=G,oe.A=U,Et===null&&(mt=null,St=0,Zo()),te}function Eo(){for(;Et!==null;)Mc(Et)}function yl(g,S){var T=ct;ct|=2;var F=ys(),G=Js();mt!==g||St!==S?(mn=null,Tn=at()+500,Qs(g,S)):bi=Or(g,S);e:do try{if(Nt!==0&&Et!==null){S=Et;var U=cr;t:switch(Nt){case 1:Nt=0,cr=null,Fa(g,S,U,1);break;case 2:case 9:if(Er(U)){Nt=0,cr=null,Cl(S);break}S=function(){Nt!==2&&Nt!==9||mt!==g||(Nt=7),Je(g)},U.then(S,S);break e;case 3:Nt=7;break e;case 4:Nt=5;break e;case 7:Er(U)?(Nt=0,cr=null,Cl(S)):(Nt=0,cr=null,Fa(g,S,U,7));break;case 5:var te=null;switch(Et.tag){case 26:te=Et.memoizedState;case 5:case 27:var ve=Et;if(te?ip(te):ve.stateNode.complete){Nt=0,cr=null;var Ae=ve.sibling;if(Ae!==null)Et=Ae;else{var ke=ve.return;ke!==null?(Et=ke,ea(ke)):Et=null}break t}}Nt=0,cr=null,Fa(g,S,U,5);break;case 6:Nt=0,cr=null,Fa(g,S,U,6);break;case 8:Zs(),gn=6;break e;default:throw Error(o(462))}}Pr();break}catch(We){Wi(g,We)}while(!0);return Li=ks=null,oe.H=F,oe.A=G,ct=T,Et!==null?0:(mt=null,St=0,Zo(),gn)}function Pr(){for(;Et!==null&&!nt();)Mc(Et)}function Mc(g){var S=_c(g.alternate,g,jr);g.memoizedProps=g.pendingProps,S===null?ea(g):Et=S}function Cl(g){var S=g,T=S.alternate;switch(S.tag){case 15:case 0:S=ul(T,S,S.pendingProps,S.type,void 0,St);break;case 11:S=ul(T,S,S.pendingProps,S.type.render,S.ref,St);break;case 5:Eu(S);default:zr(T,S),S=Et=eo(S,jr),S=_c(T,S,jr)}g.memoizedProps=g.pendingProps,S===null?ea(g):Et=S}function Fa(g,S,T,F){Li=ks=null,Eu(S),ya=null,Ca=0;var G=S.return;try{if(Gn(g,G,S,T,St)){gn=1,vc(g,Br(T,g.current)),Et=null;return}}catch(U){if(G!==null)throw Et=G,U;gn=1,vc(g,Br(T,g.current)),Et=null;return}S.flags&32768?(Ft||F===1?g=!0:bi||(St&536870912)!==0?g=!1:(ui=g=!0,(F===2||F===9||F===3||F===6)&&(F=Ar.current,F!==null&&F.tag===13&&(F.flags|=16384))),bl(S,g)):ea(S)}function ea(g){var S=g;do{if((S.flags&32768)!==0){bl(S,ui);return}g=S.return;var T=fl(S.alternate,S,jr);if(T!==null){Et=T;return}if(S=S.sibling,S!==null){Et=S;return}Et=S=g}while(S!==null);gn===0&&(gn=5)}function bl(g,S){do{var T=ii(g.alternate,g);if(T!==null){T.flags&=32767,Et=T;return}if(T=g.return,T!==null&&(T.flags|=32768,T.subtreeFlags=0,T.deletions=null),!S&&(g=g.sibling,g!==null)){Et=g;return}Et=g=T}while(g!==null);gn=6,Et=null}function Cs(g,S,T,F,G,U,te,ve,Ae){g.cancelPendingCommit=null;do Ao();while(Wt!==0);if((ct&6)!==0)throw Error(o(327));if(S!==null){if(S===g.current)throw Error(o(177));if(U=S.lanes|S.childLanes,U|=jn,Yi(g,T,U,te,ve,Ae),g===mt&&(Et=mt=null,St=0),bo=S,Wr=g,di=T,So=U,wo=G,vl=F,(S.subtreeFlags&10256)!==0||(S.flags&10256)!==0?(g.callbackNode=null,g.callbackPriority=0,W(Dt,function(){return Oc(),null})):(g.callbackNode=null,g.callbackPriority=0),F=(S.flags&13878)!==0,(S.subtreeFlags&13878)!==0||F){F=oe.T,oe.T=null,G=se.p,se.p=2,te=ct,ct|=4;try{hf(g,S,T)}finally{ct=te,se.p=G,oe.T=F}}Wt=1,kn(),bs(),La()}}function kn(){if(Wt===1){Wt=0;var g=Wr,S=bo,T=(S.flags&13878)!==0;if((S.subtreeFlags&13878)!==0||T){T=oe.T,oe.T=null;var F=se.p;se.p=2;var G=ct;ct|=4;try{$s(S,g);var U=Cf,te=Bd(g.containerInfo),ve=U.focusedElem,Ae=U.selectionRange;if(te!==ve&&ve&&ve.ownerDocument&&Yt(ve.ownerDocument.documentElement,ve)){if(Ae!==null&&au(ve)){var ke=Ae.start,We=Ae.end;if(We===void 0&&(We=ke),"selectionStart"in ve)ve.selectionStart=ke,ve.selectionEnd=Math.min(We,ve.value.length);else{var Ke=ve.ownerDocument||document,Ge=Ke&&Ke.defaultView||window;if(Ge.getSelection){var Ue=Ge.getSelection(),ot=ve.textContent.length,pt=Math.min(Ae.start,ot),Jt=Ae.end===void 0?pt:Math.min(Ae.end,ot);!Ue.extend&&pt>Jt&&(te=Jt,Jt=pt,pt=te);var Me=Za(ve,pt),Re=Za(ve,Jt);if(Me&&Re&&(Ue.rangeCount!==1||Ue.anchorNode!==Me.node||Ue.anchorOffset!==Me.offset||Ue.focusNode!==Re.node||Ue.focusOffset!==Re.offset)){var Ie=Ke.createRange();Ie.setStart(Me.node,Me.offset),Ue.removeAllRanges(),pt>Jt?(Ue.addRange(Ie),Ue.extend(Re.node,Re.offset)):(Ie.setEnd(Re.node,Re.offset),Ue.addRange(Ie))}}}}for(Ke=[],Ue=ve;Ue=Ue.parentNode;)Ue.nodeType===1&&Ke.push({element:Ue,left:Ue.scrollLeft,top:Ue.scrollTop});for(typeof ve.focus=="function"&&ve.focus(),ve=0;ve<Ke.length;ve++){var qe=Ke[ve];qe.element.scrollLeft=qe.left,qe.element.scrollTop=qe.top}}qh=!!yf,Cf=yf=null}finally{ct=G,se.p=F,oe.T=T}}g.current=S,Wt=2}}function bs(){if(Wt===2){Wt=0;var g=Wr,S=bo,T=(S.flags&8772)!==0;if((S.subtreeFlags&8772)!==0||T){T=oe.T,oe.T=null;var F=se.p;se.p=2;var G=ct;ct|=4;try{cn(g,S.alternate,S)}finally{ct=G,se.p=F,oe.T=T}}Wt=3}}function La(){if(Wt===4||Wt===3){Wt=0,rt();var g=Wr,S=bo,T=di,F=vl;(S.subtreeFlags&10256)!==0||(S.flags&10256)!==0?Wt=5:(Wt=0,bo=Wr=null,$i(g,g.pendingLanes));var G=g.pendingLanes;if(G===0&&(Dn=null),qr(T),S=S.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot(Ss,S,void 0,(S.current.flags&128)===128)}catch{}if(F!==null){S=oe.T,G=se.p,se.p=2,oe.T=null;try{for(var U=g.onRecoverableError,te=0;te<F.length;te++){var ve=F[te];U(ve.value,{componentStack:ve.stack})}}finally{oe.T=S,se.p=G}}(di&3)!==0&&Ao(),Je(g),G=g.pendingLanes,(T&261930)!==0&&(G&42)!==0?g===Oa?Xs++:(Xs=0,Oa=g):Xs=0,it(0)}}function $i(g,S){(g.pooledCacheLanes&=S)===0&&(S=g.pooledCache,S!=null&&(g.pooledCache=null,fa(S)))}function Ao(){return kn(),bs(),La(),Oc()}function Oc(){if(Wt!==5)return!1;var g=Wr,S=So;So=0;var T=qr(di),F=oe.T,G=se.p;try{se.p=32>T?32:T,oe.T=null,T=wo,wo=null;var U=Wr,te=di;if(Wt=0,bo=Wr=null,di=0,(ct&6)!==0)throw Error(o(331));var ve=ct;if(ct|=4,Dr(U.current),Ju(U,U.current,te,T),ct=ve,it(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot(Ss,U)}catch{}return!0}finally{se.p=G,oe.T=F,$i(g,S)}}function nd(g,S,T){S=Br(T,S),S=$u(g.stateNode,S,2),g=Gs(g,S,2),g!==null&&(gi(g,2),Je(g))}function Ht(g,S,T){if(g.tag===3)nd(g,g,T);else for(;S!==null;){if(S.tag===3){nd(S,g,T);break}else if(S.tag===1){var F=S.stateNode;if(typeof S.type.getDerivedStateFromError=="function"||typeof F.componentDidCatch=="function"&&(Dn===null||!Dn.has(F))){g=Br(T,g),T=qu(2),F=Gs(S,T,2),F!==null&&(Oh(T,F,S,g),gi(F,2),Je(F));break}}S=S.return}}function Sl(g,S,T){var F=g.pingCache;if(F===null){F=g.pingCache=new bt;var G=new Set;F.set(S,G)}else G=F.get(S),G===void 0&&(G=new Set,F.set(S,G));G.has(T)||(ed=!0,G.add(T),g=A.bind(null,g,S,T),S.then(g,g))}function A(g,S,T){var F=g.pingCache;F!==null&&F.delete(S),g.pingedLanes|=g.suspendedLanes&T,g.warmLanes&=~T,mt===g&&(St&T)===T&&(gn===4||gn===3&&(St&62914560)===St&&300>at()-Co?(ct&2)===0&&Qs(g,0):ml|=T,tn===St&&(tn=0)),Je(g)}function R(g,S){S===0&&(S=Fr()),g=hr(g,S),g!==null&&(gi(g,S),Je(g))}function L(g){var S=g.memoizedState,T=0;S!==null&&(T=S.retryLane),R(g,T)}function H(g,S){var T=0;switch(g.tag){case 31:case 13:var F=g.stateNode,G=g.memoizedState;G!==null&&(T=G.retryLane);break;case 19:F=g.stateNode;break;case 22:F=g.stateNode._retryCache;break;default:throw Error(o(314))}F!==null&&F.delete(S),R(g,T)}function W(g,S){return Qe(g,S)}var Y=null,ge=null,_e=!1,ze=!1,Ze=!1,tt=0;function Je(g){g!==ge&&g.next===null&&(ge===null?Y=ge=g:ge=ge.next=g),ze=!0,_e||(_e=!0,Fe())}function it(g,S){if(!Ze&&ze){Ze=!0;do for(var T=!1,F=Y;F!==null;){if(g!==0){var G=F.pendingLanes;if(G===0)var U=0;else{var te=F.suspendedLanes,ve=F.pingedLanes;U=(1<<31-Pe(42|g)+1)-1,U&=G&~(te&~ve),U=U&201326741?U&201326741|1:U?U|2:0}U!==0&&(T=!0,He(F,U))}else U=St,U=bn(F,F===mt?U:0,F.cancelPendingCommit!==null||F.timeoutHandle!==-1),(U&3)===0||Or(F,U)||(T=!0,He(F,U));F=F.next}while(T);Ze=!1}}function yt(){Yn()}function Yn(){ze=_e=!1;var g=0;tt!==0&&Tp()&&(g=tt);for(var S=at(),T=null,F=Y;F!==null;){var G=F.next,U=_o(F,S);U===0?(F.next=null,T===null?Y=G:T.next=G,G===null&&(ge=T)):(T=F,(g!==0||(U&3)!==0)&&(ze=!0)),F=G}Wt!==0&&Wt!==5||it(g),tt!==0&&(tt=0)}function _o(g,S){for(var T=g.suspendedLanes,F=g.pingedLanes,G=g.expirationTimes,U=g.pendingLanes&-62914561;0<U;){var te=31-Pe(U),ve=1<<te,Ae=G[te];Ae===-1?((ve&T)===0||(ve&F)!==0)&&(G[te]=fi(ve,S)):Ae<=S&&(g.expiredLanes|=ve),U&=~ve}if(S=mt,T=St,T=bn(g,g===S?T:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),F=g.callbackNode,T===0||g===S&&(Nt===2||Nt===9)||g.cancelPendingCommit!==null)return F!==null&&F!==null&&Ye(F),g.callbackNode=null,g.callbackPriority=0;if((T&3)===0||Or(g,T)){if(S=T&-T,S===g.callbackPriority)return S;switch(F!==null&&Ye(F),qr(T)){case 2:case 8:T=en;break;case 32:T=Dt;break;case 268435456:T=Bn;break;default:T=Dt}return F=ta.bind(null,g),T=Qe(T,F),g.callbackPriority=S,g.callbackNode=T,S}return F!==null&&F!==null&&Ye(F),g.callbackPriority=2,g.callbackNode=null,2}function ta(g,S){if(Wt!==0&&Wt!==5)return g.callbackNode=null,g.callbackPriority=0,null;var T=g.callbackNode;if(Ao()&&g.callbackNode!==T)return null;var F=St;return F=bn(g,g===mt?F:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),F===0?null:(Tt(g,F,S),_o(g,at()),g.callbackNode!=null&&g.callbackNode===T?ta.bind(null,g):null)}function He(g,S){if(Ao())return null;Tt(g,S,!0)}function Fe(){Pp(function(){(ct&6)!==0?Qe(nn,yt):Yn()})}function Ve(){if(tt===0){var g=cs;g===0&&(g=Cn,Cn<<=1,(Cn&261888)===0&&(Cn=256)),tt=g}return tt}function et(g){return g==null||typeof g=="symbol"||typeof g=="boolean"?null:typeof g=="function"?g:ko(""+g)}function ht(g,S){var T=S.ownerDocument.createElement("input");return T.name=S.name,T.value=S.value,g.id&&T.setAttribute("form",g.id),S.parentNode.insertBefore(T,S),g=new FormData(g),T.parentNode.removeChild(T),g}function yn(g,S,T,F,G){if(S==="submit"&&T&&T.stateNode===G){var U=et((G[rr]||null).action),te=F.submitter;te&&(S=(S=te[rr]||null)?et(S.formAction):te.getAttribute("formAction"),S!==null&&(U=S,te=null));var ve=new Go("action","action",null,F,G);g.push({event:ve,listeners:[{instance:null,listener:function(){if(F.defaultPrevented){if(tt!==0){var Ae=te?ht(G,te):new FormData(G);Bu(T,{pending:!0,data:Ae,method:G.method,action:U},null,Ae)}}else typeof U=="function"&&(ve.preventDefault(),Ae=te?ht(G,te):new FormData(G),Bu(T,{pending:!0,data:Ae,method:G.method,action:U},U,Ae))},currentTarget:G}]})}}for(var ft=0;ft<Yo.length;ft++){var kt=Yo[ft],Xn=kt.toLowerCase(),Gt=kt[0].toUpperCase()+kt.slice(1);Zr(Xn,"on"+Gt)}Zr(Wl,"onAnimationEnd"),Zr(Ko,"onAnimationIteration"),Zr(lu,"onAnimationStart"),Zr("dblclick","onDoubleClick"),Zr("focusin","onFocus"),Zr("focusout","onBlur"),Zr(Gd,"onTransitionRun"),Zr(rf,"onTransitionStart"),Zr(Vd,"onTransitionCancel"),Zr(cu,"onTransitionEnd"),Lr("onMouseEnter",["mouseout","mouseover"]),Lr("onMouseLeave",["mouseout","mouseover"]),Lr("onPointerEnter",["pointerout","pointerover"]),Lr("onPointerLeave",["pointerout","pointerover"]),Rs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Rs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Rs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Rs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Rs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Rs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ff=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hi));function Nf(g,S){S=(S&4)!==0;for(var T=0;T<g.length;T++){var F=g[T],G=F.event;F=F.listeners;e:{var U=void 0;if(S)for(var te=F.length-1;0<=te;te--){var ve=F[te],Ae=ve.instance,ke=ve.currentTarget;if(ve=ve.listener,Ae!==U&&G.isPropagationStopped())break e;U=ve,G.currentTarget=ke;try{U(G)}catch(We){Xo(We)}G.currentTarget=null,U=Ae}else for(te=0;te<F.length;te++){if(ve=F[te],Ae=ve.instance,ke=ve.currentTarget,ve=ve.listener,Ae!==U&&G.isPropagationStopped())break e;U=ve,G.currentTarget=ke;try{U(G)}catch(We){Xo(We)}G.currentTarget=null,U=Ae}}}}function It(g,S){var T=S[xi];T===void 0&&(T=S[xi]=new Set);var F=g+"__bubble";T.has(F)||(If(S,g,2,!1),T.add(F))}function pf(g,S,T){var F=0;S&&(F|=4),If(T,g,F,S)}var Bh="_reactListening"+Math.random().toString(36).slice(2);function gf(g){if(!g[Bh]){g[Bh]=!0,es.forEach(function(T){T!=="selectionchange"&&(ff.has(T)||pf(T,!1,g),pf(T,!0,g))});var S=g.nodeType===9?g:g.ownerDocument;S===null||S[Bh]||(S[Bh]=!0,pf("selectionchange",!1,S))}}function If(g,S,T,F){switch(dp(S)){case 2:var G=Xp;break;case 8:G=Zp;break;default:G=Pf}T=G.bind(null,S,T,g),G=void 0,!jc||S!=="touchstart"&&S!=="touchmove"&&S!=="wheel"||(G=!0),F?G!==void 0?g.addEventListener(S,T,{capture:!0,passive:G}):g.addEventListener(S,T,!0):G!==void 0?g.addEventListener(S,T,{passive:G}):g.addEventListener(S,T,!1)}function mf(g,S,T,F,G){var U=F;if((S&1)===0&&(S&2)===0&&F!==null)e:for(;;){if(F===null)return;var te=F.tag;if(te===3||te===4){var ve=F.stateNode.containerInfo;if(ve===G)break;if(te===4)for(te=F.return;te!==null;){var Ae=te.tag;if((Ae===3||Ae===4)&&te.stateNode.containerInfo===G)return;te=te.return}for(;ve!==null;){if(te=ra(ve),te===null)return;if(Ae=te.tag,Ae===5||Ae===6||Ae===26||Ae===27){F=U=te;continue e}ve=ve.parentNode}}F=F.return}Uc(function(){var ke=U,We=Ol(T),Ke=[];e:{var Ge=Xr.get(g);if(Ge!==void 0){var Ue=Go,ot=g;switch(g){case"keypress":if(Ho(T)===0)break e;case"keydown":case"keyup":Ue=la;break;case"focusin":ot="focus",Ue=Il;break;case"focusout":ot="blur",Ue=Il;break;case"beforeblur":case"afterblur":Ue=Il;break;case"click":if(T.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ue=Wc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ue=bd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ue=_d;break;case Wl:case Ko:case lu:Ue=ef;break;case cu:Ue=nf;break;case"scroll":case"scrollend":Ue=yd;break;case"wheel":Ue=Td;break;case"copy":case"cut":case"paste":Ue=wd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ue=Kc;break;case"toggle":case"beforetoggle":Ue=Pd}var pt=(S&4)!==0,Jt=!pt&&(g==="scroll"||g==="scrollend"),Me=pt?Ge!==null?Ge+"Capture":null:Ge;pt=[];for(var Re=ke,Ie;Re!==null;){var qe=Re;if(Ie=qe.stateNode,qe=qe.tag,qe!==5&&qe!==26&&qe!==27||Ie===null||Me===null||(qe=za(Re,Me),qe!=null&&pt.push(rd(Re,qe,Ie))),Jt)break;Re=Re.return}0<pt.length&&(Ge=new Ue(Ge,ot,null,T,We),Ke.push({event:Ge,listeners:pt}))}}if((S&7)===0){e:{if(Ge=g==="mouseover"||g==="pointerover",Ue=g==="mouseout"||g==="pointerout",Ge&&T!==Ml&&(ot=T.relatedTarget||T.fromElement)&&(ra(ot)||ot[Es]))break e;if((Ue||Ge)&&(Ge=We.window===We?We:(Ge=We.ownerDocument)?Ge.defaultView||Ge.parentWindow:window,Ue?(ot=T.relatedTarget||T.toElement,Ue=ke,ot=ot?ra(ot):null,ot!==null&&(Jt=d(ot),pt=ot.tag,ot!==Jt||pt!==5&&pt!==27&&pt!==6)&&(ot=null)):(Ue=null,ot=ke),Ue!==ot)){if(pt=Wc,qe="onMouseLeave",Me="onMouseEnter",Re="mouse",(g==="pointerout"||g==="pointerover")&&(pt=Kc,qe="onPointerLeave",Me="onPointerEnter",Re="pointer"),Jt=Ue==null?Ge:Ha(Ue),Ie=ot==null?Ge:Ha(ot),Ge=new pt(qe,Re+"leave",Ue,T,We),Ge.target=Jt,Ge.relatedTarget=Ie,qe=null,ra(We)===ke&&(pt=new pt(Me,Re+"enter",ot,T,We),pt.target=Ie,pt.relatedTarget=Jt,qe=pt),Jt=qe,Ue&&ot)t:{for(pt=xp,Me=Ue,Re=ot,Ie=0,qe=Me;qe;qe=pt(qe))Ie++;qe=0;for(var dt=Re;dt;dt=pt(dt))qe++;for(;0<Ie-qe;)Me=pt(Me),Ie--;for(;0<qe-Ie;)Re=pt(Re),qe--;for(;Ie--;){if(Me===Re||Re!==null&&Me===Re.alternate){pt=Me;break t}Me=pt(Me),Re=pt(Re)}pt=null}else pt=null;Ue!==null&&kf(Ke,Ge,Ue,pt,!1),ot!==null&&Jt!==null&&kf(Ke,Jt,ot,pt,!0)}}e:{if(Ge=ke?Ha(ke):window,Ue=Ge.nodeName&&Ge.nodeName.toLowerCase(),Ue==="select"||Ue==="input"&&Ge.type==="file")var zt=tu;else if(eu(Ge))if(_i)zt=kd;else{zt=iu;var lt=Nd}else Ue=Ge.nodeName,!Ue||Ue.toLowerCase()!=="input"||Ge.type!=="checkbox"&&Ge.type!=="radio"?ke&&Pl(ke.elementType)&&(zt=tu):zt=Id;if(zt&&(zt=zt(g,ke))){Ul(Ke,zt,T,We);break e}lt&&lt(g,Ge,ke),g==="focusout"&&ke&&Ge.type==="number"&&ke.memoizedProps.value!=null&&mi(Ge,"number",Ge.value)}switch(lt=ke?Ha(ke):window,g){case"focusin":(eu(lt)||lt.contentEditable==="true")&&(Ri=lt,Ti=ke,Qa=null);break;case"focusout":Qa=Ti=Ri=null;break;case"mousedown":jl=!0;break;case"contextmenu":case"mouseup":case"dragend":jl=!1,Ja(Ke,T,We);break;case"selectionchange":if(Hd)break;case"keydown":case"keyup":Ja(Ke,T,We)}var _t;if(ca)e:{switch(g){case"compositionstart":var Bt="onCompositionStart";break e;case"compositionend":Bt="onCompositionEnd";break e;case"compositionupdate":Bt="onCompositionUpdate";break e}Bt=void 0}else ua?zl(g,T)&&(Bt="onCompositionEnd"):g==="keydown"&&T.keyCode===229&&(Bt="onCompositionStart");Bt&&(Xc&&T.locale!=="ko"&&(ua||Bt!=="onCompositionStart"?Bt==="onCompositionEnd"&&ua&&(_t=Bo()):(Ir=We,Ll="value"in Ir?Ir.value:Ir.textContent,ua=!0)),lt=Hh(ke,Bt),0<lt.length&&(Bt=new kl(Bt,g,null,T,We),Ke.push({event:Bt,listeners:lt}),_t?Bt.data=_t:(_t=Zc(T),_t!==null&&(Bt.data=_t)))),(_t=Vl?Fd(g,T):Qc(g,T))&&(Bt=Hh(ke,"onBeforeInput"),0<Bt.length&&(lt=new kl("onBeforeInput","beforeinput",null,T,We),Ke.push({event:lt,listeners:Bt}),lt.data=_t)),yn(Ke,g,ke,T,We)}Nf(Ke,S)})}function rd(g,S,T){return{instance:g,listener:S,currentTarget:T}}function Hh(g,S){for(var T=S+"Capture",F=[];g!==null;){var G=g,U=G.stateNode;if(G=G.tag,G!==5&&G!==26&&G!==27||U===null||(G=za(g,T),G!=null&&F.unshift(rd(g,G,U)),G=za(g,S),G!=null&&F.push(rd(g,G,U))),g.tag===3)return F;g=g.return}return[]}function xp(g){if(g===null)return null;do g=g.return;while(g&&g.tag!==5&&g.tag!==27);return g||null}function kf(g,S,T,F,G){for(var U=S._reactName,te=[];T!==null&&T!==F;){var ve=T,Ae=ve.alternate,ke=ve.stateNode;if(ve=ve.tag,Ae!==null&&Ae===F)break;ve!==5&&ve!==26&&ve!==27||ke===null||(Ae=ke,G?(ke=za(T,U),ke!=null&&te.unshift(rd(T,ke,Ae))):G||(ke=za(T,U),ke!=null&&te.push(rd(T,ke,Ae)))),T=T.return}te.length!==0&&g.push({event:S,listeners:te})}var Ep=/\r\n?/g,Ap=/\u0000|\uFFFD/g;function Bf(g){return(typeof g=="string"?g:""+g).replace(Ep,`
`).replace(Ap,"")}function Hf(g,S){return S=Bf(S),Bf(g)===S}function Qt(g,S,T,F,G,U){switch(T){case"children":typeof F=="string"?S==="body"||S==="textarea"&&F===""||sa(g,F):(typeof F=="number"||typeof F=="bigint")&&S!=="body"&&sa(g,""+F);break;case"className":No(g,"class",F);break;case"tabIndex":No(g,"tabindex",F);break;case"dir":case"role":case"viewBox":case"width":case"height":No(g,T,F);break;case"style":Gc(g,F,U);break;case"data":if(S!=="object"){No(g,"data",F);break}case"src":case"href":if(F===""&&(S!=="a"||T!=="href")){g.removeAttribute(T);break}if(F==null||typeof F=="function"||typeof F=="symbol"||typeof F=="boolean"){g.removeAttribute(T);break}F=ko(""+F),g.setAttribute(T,F);break;case"action":case"formAction":if(typeof F=="function"){g.setAttribute(T,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof U=="function"&&(T==="formAction"?(S!=="input"&&Qt(g,S,"name",G.name,G,null),Qt(g,S,"formEncType",G.formEncType,G,null),Qt(g,S,"formMethod",G.formMethod,G,null),Qt(g,S,"formTarget",G.formTarget,G,null)):(Qt(g,S,"encType",G.encType,G,null),Qt(g,S,"method",G.method,G,null),Qt(g,S,"target",G.target,G,null)));if(F==null||typeof F=="symbol"||typeof F=="boolean"){g.removeAttribute(T);break}F=ko(""+F),g.setAttribute(T,F);break;case"onClick":F!=null&&(g.onclick=ns);break;case"onScroll":F!=null&&It("scroll",g);break;case"onScrollEnd":F!=null&&It("scrollend",g);break;case"dangerouslySetInnerHTML":if(F!=null){if(typeof F!="object"||!("__html"in F))throw Error(o(61));if(T=F.__html,T!=null){if(G.children!=null)throw Error(o(60));g.innerHTML=T}}break;case"multiple":g.multiple=F&&typeof F!="function"&&typeof F!="symbol";break;case"muted":g.muted=F&&typeof F!="function"&&typeof F!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(F==null||typeof F=="function"||typeof F=="boolean"||typeof F=="symbol"){g.removeAttribute("xlink:href");break}T=ko(""+F),g.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",T);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":F!=null&&typeof F!="function"&&typeof F!="symbol"?g.setAttribute(T,""+F):g.removeAttribute(T);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":F&&typeof F!="function"&&typeof F!="symbol"?g.setAttribute(T,""):g.removeAttribute(T);break;case"capture":case"download":F===!0?g.setAttribute(T,""):F!==!1&&F!=null&&typeof F!="function"&&typeof F!="symbol"?g.setAttribute(T,F):g.removeAttribute(T);break;case"cols":case"rows":case"size":case"span":F!=null&&typeof F!="function"&&typeof F!="symbol"&&!isNaN(F)&&1<=F?g.setAttribute(T,F):g.removeAttribute(T);break;case"rowSpan":case"start":F==null||typeof F=="function"||typeof F=="symbol"||isNaN(F)?g.removeAttribute(T):g.setAttribute(T,F);break;case"popover":It("beforetoggle",g),It("toggle",g),Ga(g,"popover",F);break;case"xlinkActuate":Ei(g,"http://www.w3.org/1999/xlink","xlink:actuate",F);break;case"xlinkArcrole":Ei(g,"http://www.w3.org/1999/xlink","xlink:arcrole",F);break;case"xlinkRole":Ei(g,"http://www.w3.org/1999/xlink","xlink:role",F);break;case"xlinkShow":Ei(g,"http://www.w3.org/1999/xlink","xlink:show",F);break;case"xlinkTitle":Ei(g,"http://www.w3.org/1999/xlink","xlink:title",F);break;case"xlinkType":Ei(g,"http://www.w3.org/1999/xlink","xlink:type",F);break;case"xmlBase":Ei(g,"http://www.w3.org/XML/1998/namespace","xml:base",F);break;case"xmlLang":Ei(g,"http://www.w3.org/XML/1998/namespace","xml:lang",F);break;case"xmlSpace":Ei(g,"http://www.w3.org/XML/1998/namespace","xml:space",F);break;case"is":Ga(g,"is",F);break;case"innerText":case"textContent":break;default:(!(2<T.length)||T[0]!=="o"&&T[0]!=="O"||T[1]!=="n"&&T[1]!=="N")&&(T=md.get(T)||T,Ga(g,T,F))}}function vf(g,S,T,F,G,U){switch(T){case"style":Gc(g,F,U);break;case"dangerouslySetInnerHTML":if(F!=null){if(typeof F!="object"||!("__html"in F))throw Error(o(61));if(T=F.__html,T!=null){if(G.children!=null)throw Error(o(60));g.innerHTML=T}}break;case"children":typeof F=="string"?sa(g,F):(typeof F=="number"||typeof F=="bigint")&&sa(g,""+F);break;case"onScroll":F!=null&&It("scroll",g);break;case"onScrollEnd":F!=null&&It("scrollend",g);break;case"onClick":F!=null&&(g.onclick=ns);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!El.hasOwnProperty(T))e:{if(T[0]==="o"&&T[1]==="n"&&(G=T.endsWith("Capture"),S=T.slice(2,G?T.length-7:void 0),U=g[rr]||null,U=U!=null?U[T]:null,typeof U=="function"&&g.removeEventListener(S,U,G),typeof F=="function")){typeof U!="function"&&U!==null&&(T in g?g[T]=null:g.hasAttribute(T)&&g.removeAttribute(T)),g.addEventListener(S,F,G);break e}T in g?g[T]=F:F===!0?g.setAttribute(T,""):Ga(g,T,F)}}}function br(g,S,T){switch(S){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":It("error",g),It("load",g);var F=!1,G=!1,U;for(U in T)if(T.hasOwnProperty(U)){var te=T[U];if(te!=null)switch(U){case"src":F=!0;break;case"srcSet":G=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,S));default:Qt(g,S,U,te,T,null)}}G&&Qt(g,S,"srcSet",T.srcSet,T,null),F&&Qt(g,S,"src",T.src,T,null);return;case"input":It("invalid",g);var ve=U=te=G=null,Ae=null,ke=null;for(F in T)if(T.hasOwnProperty(F)){var We=T[F];if(We!=null)switch(F){case"name":G=We;break;case"type":te=We;break;case"checked":Ae=We;break;case"defaultChecked":ke=We;break;case"value":U=We;break;case"defaultValue":ve=We;break;case"children":case"dangerouslySetInnerHTML":if(We!=null)throw Error(o(137,S));break;default:Qt(g,S,F,We,T,null)}}Rl(g,U,ve,Ae,ke,te,G,!1);return;case"select":It("invalid",g),F=te=U=null;for(G in T)if(T.hasOwnProperty(G)&&(ve=T[G],ve!=null))switch(G){case"value":U=ve;break;case"defaultValue":te=ve;break;case"multiple":F=ve;default:Qt(g,S,G,ve,T,null)}S=U,T=te,g.multiple=!!F,S!=null?ts(g,!!F,S,!1):T!=null&&ts(g,!!F,T,!0);return;case"textarea":It("invalid",g),U=G=F=null;for(te in T)if(T.hasOwnProperty(te)&&(ve=T[te],ve!=null))switch(te){case"value":F=ve;break;case"defaultValue":G=ve;break;case"children":U=ve;break;case"dangerouslySetInnerHTML":if(ve!=null)throw Error(o(91));break;default:Qt(g,S,te,ve,T,null)}Dl(g,F,G,U);return;case"option":for(Ae in T)if(T.hasOwnProperty(Ae)&&(F=T[Ae],F!=null))switch(Ae){case"selected":g.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:Qt(g,S,Ae,F,T,null)}return;case"dialog":It("beforetoggle",g),It("toggle",g),It("cancel",g),It("close",g);break;case"iframe":case"object":It("load",g);break;case"video":case"audio":for(F=0;F<hi.length;F++)It(hi[F],g);break;case"image":It("error",g),It("load",g);break;case"details":It("toggle",g);break;case"embed":case"source":case"link":It("error",g),It("load",g);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ke in T)if(T.hasOwnProperty(ke)&&(F=T[ke],F!=null))switch(ke){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,S));default:Qt(g,S,ke,F,T,null)}return;default:if(Pl(S)){for(We in T)T.hasOwnProperty(We)&&(F=T[We],F!==void 0&&vf(g,S,We,F,T,void 0));return}}for(ve in T)T.hasOwnProperty(ve)&&(F=T[ve],F!=null&&Qt(g,S,ve,F,T,null))}function _p(g,S,T,F){switch(S){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var G=null,U=null,te=null,ve=null,Ae=null,ke=null,We=null;for(Ue in T){var Ke=T[Ue];if(T.hasOwnProperty(Ue)&&Ke!=null)switch(Ue){case"checked":break;case"value":break;case"defaultValue":Ae=Ke;default:F.hasOwnProperty(Ue)||Qt(g,S,Ue,null,F,Ke)}}for(var Ge in F){var Ue=F[Ge];if(Ke=T[Ge],F.hasOwnProperty(Ge)&&(Ue!=null||Ke!=null))switch(Ge){case"type":U=Ue;break;case"name":G=Ue;break;case"checked":ke=Ue;break;case"defaultChecked":We=Ue;break;case"value":te=Ue;break;case"defaultValue":ve=Ue;break;case"children":case"dangerouslySetInnerHTML":if(Ue!=null)throw Error(o(137,S));break;default:Ue!==Ke&&Qt(g,S,Ge,Ue,F,Ke)}}Va(g,te,ve,Ae,ke,We,U,G);return;case"select":Ue=te=ve=Ge=null;for(U in T)if(Ae=T[U],T.hasOwnProperty(U)&&Ae!=null)switch(U){case"value":break;case"multiple":Ue=Ae;default:F.hasOwnProperty(U)||Qt(g,S,U,null,F,Ae)}for(G in F)if(U=F[G],Ae=T[G],F.hasOwnProperty(G)&&(U!=null||Ae!=null))switch(G){case"value":Ge=U;break;case"defaultValue":ve=U;break;case"multiple":te=U;default:U!==Ae&&Qt(g,S,G,U,F,Ae)}S=ve,T=te,F=Ue,Ge!=null?ts(g,!!T,Ge,!1):!!F!=!!T&&(S!=null?ts(g,!!T,S,!0):ts(g,!!T,T?[]:"",!1));return;case"textarea":Ue=Ge=null;for(ve in T)if(G=T[ve],T.hasOwnProperty(ve)&&G!=null&&!F.hasOwnProperty(ve))switch(ve){case"value":break;case"children":break;default:Qt(g,S,ve,null,F,G)}for(te in F)if(G=F[te],U=T[te],F.hasOwnProperty(te)&&(G!=null||U!=null))switch(te){case"value":Ge=G;break;case"defaultValue":Ue=G;break;case"children":break;case"dangerouslySetInnerHTML":if(G!=null)throw Error(o(91));break;default:G!==U&&Qt(g,S,te,G,F,U)}Tl(g,Ge,Ue);return;case"option":for(var ot in T)if(Ge=T[ot],T.hasOwnProperty(ot)&&Ge!=null&&!F.hasOwnProperty(ot))switch(ot){case"selected":g.selected=!1;break;default:Qt(g,S,ot,null,F,Ge)}for(Ae in F)if(Ge=F[Ae],Ue=T[Ae],F.hasOwnProperty(Ae)&&Ge!==Ue&&(Ge!=null||Ue!=null))switch(Ae){case"selected":g.selected=Ge&&typeof Ge!="function"&&typeof Ge!="symbol";break;default:Qt(g,S,Ae,Ge,F,Ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pt in T)Ge=T[pt],T.hasOwnProperty(pt)&&Ge!=null&&!F.hasOwnProperty(pt)&&Qt(g,S,pt,null,F,Ge);for(ke in F)if(Ge=F[ke],Ue=T[ke],F.hasOwnProperty(ke)&&Ge!==Ue&&(Ge!=null||Ue!=null))switch(ke){case"children":case"dangerouslySetInnerHTML":if(Ge!=null)throw Error(o(137,S));break;default:Qt(g,S,ke,Ge,F,Ue)}return;default:if(Pl(S)){for(var Jt in T)Ge=T[Jt],T.hasOwnProperty(Jt)&&Ge!==void 0&&!F.hasOwnProperty(Jt)&&vf(g,S,Jt,void 0,F,Ge);for(We in F)Ge=F[We],Ue=T[We],!F.hasOwnProperty(We)||Ge===Ue||Ge===void 0&&Ue===void 0||vf(g,S,We,Ge,F,Ue);return}}for(var Me in T)Ge=T[Me],T.hasOwnProperty(Me)&&Ge!=null&&!F.hasOwnProperty(Me)&&Qt(g,S,Me,null,F,Ge);for(Ke in F)Ge=F[Ke],Ue=T[Ke],!F.hasOwnProperty(Ke)||Ge===Ue||Ge==null&&Ue==null||Qt(g,S,Ke,Ge,F,Ue)}function Gf(g){switch(g){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Rp(){if(typeof performance.getEntriesByType=="function"){for(var g=0,S=0,T=performance.getEntriesByType("resource"),F=0;F<T.length;F++){var G=T[F],U=G.transferSize,te=G.initiatorType,ve=G.duration;if(U&&ve&&Gf(te)){for(te=0,ve=G.responseEnd,F+=1;F<T.length;F++){var Ae=T[F],ke=Ae.startTime;if(ke>ve)break;var We=Ae.transferSize,Ke=Ae.initiatorType;We&&Gf(Ke)&&(Ae=Ae.responseEnd,te+=We*(Ae<ve?1:(ve-ke)/(Ae-ke)))}if(--F,S+=8*(U+te)/(G.duration/1e3),g++,10<g)break}}if(0<g)return S/g/1e6}return navigator.connection&&(g=navigator.connection.downlink,typeof g=="number")?g:5}var yf=null,Cf=null;function Gh(g){return g.nodeType===9?g:g.ownerDocument}function Vf(g){switch(g){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zf(g,S){if(g===0)switch(S){case"svg":return 1;case"math":return 2;default:return 0}return g===1&&S==="foreignObject"?0:g}function bf(g,S){return g==="textarea"||g==="noscript"||typeof S.children=="string"||typeof S.children=="number"||typeof S.children=="bigint"||typeof S.dangerouslySetInnerHTML=="object"&&S.dangerouslySetInnerHTML!==null&&S.dangerouslySetInnerHTML.__html!=null}var Sf=null;function Tp(){var g=window.event;return g&&g.type==="popstate"?g===Sf?!1:(Sf=g,!0):(Sf=null,!1)}var Uf=typeof setTimeout=="function"?setTimeout:void 0,Dp=typeof clearTimeout=="function"?clearTimeout:void 0,jf=typeof Promise=="function"?Promise:void 0,Pp=typeof queueMicrotask=="function"?queueMicrotask:typeof jf<"u"?function(g){return jf.resolve(null).then(g).catch(Mp)}:Uf;function Mp(g){setTimeout(function(){throw g})}function Ro(g){return g==="head"}function Wf(g,S){var T=S,F=0;do{var G=T.nextSibling;if(g.removeChild(T),G&&G.nodeType===8)if(T=G.data,T==="/$"||T==="/&"){if(F===0){g.removeChild(G),Ic(S);return}F--}else if(T==="$"||T==="$?"||T==="$~"||T==="$!"||T==="&")F++;else if(T==="html")sd(g.ownerDocument.documentElement);else if(T==="head"){T=g.ownerDocument.head,sd(T);for(var U=T.firstChild;U;){var te=U.nextSibling,ve=U.nodeName;U[Ji]||ve==="SCRIPT"||ve==="STYLE"||ve==="LINK"&&U.rel.toLowerCase()==="stylesheet"||T.removeChild(U),U=te}}else T==="body"&&sd(g.ownerDocument.body);T=G}while(T);Ic(S)}function $f(g,S){var T=g;g=0;do{var F=T.nextSibling;if(T.nodeType===1?S?(T._stashedDisplay=T.style.display,T.style.display="none"):(T.style.display=T._stashedDisplay||"",T.getAttribute("style")===""&&T.removeAttribute("style")):T.nodeType===3&&(S?(T._stashedText=T.nodeValue,T.nodeValue=""):T.nodeValue=T._stashedText||""),F&&F.nodeType===8)if(T=F.data,T==="/$"){if(g===0)break;g--}else T!=="$"&&T!=="$?"&&T!=="$~"&&T!=="$!"||g++;T=F}while(T)}function wf(g){var S=g.firstChild;for(S&&S.nodeType===10&&(S=S.nextSibling);S;){var T=S;switch(S=S.nextSibling,T.nodeName){case"HTML":case"HEAD":case"BODY":wf(T),na(T);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(T.rel.toLowerCase()==="stylesheet")continue}g.removeChild(T)}}function Op(g,S,T,F){for(;g.nodeType===1;){var G=T;if(g.nodeName.toLowerCase()!==S.toLowerCase()){if(!F&&(g.nodeName!=="INPUT"||g.type!=="hidden"))break}else if(F){if(!g[Ji])switch(S){case"meta":if(!g.hasAttribute("itemprop"))break;return g;case"link":if(U=g.getAttribute("rel"),U==="stylesheet"&&g.hasAttribute("data-precedence"))break;if(U!==G.rel||g.getAttribute("href")!==(G.href==null||G.href===""?null:G.href)||g.getAttribute("crossorigin")!==(G.crossOrigin==null?null:G.crossOrigin)||g.getAttribute("title")!==(G.title==null?null:G.title))break;return g;case"style":if(g.hasAttribute("data-precedence"))break;return g;case"script":if(U=g.getAttribute("src"),(U!==(G.src==null?null:G.src)||g.getAttribute("type")!==(G.type==null?null:G.type)||g.getAttribute("crossorigin")!==(G.crossOrigin==null?null:G.crossOrigin))&&U&&g.hasAttribute("async")&&!g.hasAttribute("itemprop"))break;return g;default:return g}}else if(S==="input"&&g.type==="hidden"){var U=G.name==null?null:""+G.name;if(G.type==="hidden"&&g.getAttribute("name")===U)return g}else return g;if(g=qi(g.nextSibling),g===null)break}return null}function Fp(g,S,T){if(S==="")return null;for(;g.nodeType!==3;)if((g.nodeType!==1||g.nodeName!=="INPUT"||g.type!=="hidden")&&!T||(g=qi(g.nextSibling),g===null))return null;return g}function qf(g,S){for(;g.nodeType!==8;)if((g.nodeType!==1||g.nodeName!=="INPUT"||g.type!=="hidden")&&!S||(g=qi(g.nextSibling),g===null))return null;return g}function xf(g){return g.data==="$?"||g.data==="$~"}function Ef(g){return g.data==="$!"||g.data==="$?"&&g.ownerDocument.readyState!=="loading"}function Lp(g,S){var T=g.ownerDocument;if(g.data==="$~")g._reactRetry=S;else if(g.data!=="$?"||T.readyState!=="loading")S();else{var F=function(){S(),T.removeEventListener("DOMContentLoaded",F)};T.addEventListener("DOMContentLoaded",F),g._reactRetry=F}}function qi(g){for(;g!=null;g=g.nextSibling){var S=g.nodeType;if(S===1||S===3)break;if(S===8){if(S=g.data,S==="$"||S==="$!"||S==="$?"||S==="$~"||S==="&"||S==="F!"||S==="F")break;if(S==="/$"||S==="/&")return null}}return g}var Af=null;function Kf(g){g=g.nextSibling;for(var S=0;g;){if(g.nodeType===8){var T=g.data;if(T==="/$"||T==="/&"){if(S===0)return qi(g.nextSibling);S--}else T!=="$"&&T!=="$!"&&T!=="$?"&&T!=="$~"&&T!=="&"||S++}g=g.nextSibling}return null}function Yf(g){g=g.previousSibling;for(var S=0;g;){if(g.nodeType===8){var T=g.data;if(T==="$"||T==="$!"||T==="$?"||T==="$~"||T==="&"){if(S===0)return g;S--}else T!=="/$"&&T!=="/&"||S++}g=g.previousSibling}return null}function Xf(g,S,T){switch(S=Gh(T),g){case"html":if(g=S.documentElement,!g)throw Error(o(452));return g;case"head":if(g=S.head,!g)throw Error(o(453));return g;case"body":if(g=S.body,!g)throw Error(o(454));return g;default:throw Error(o(451))}}function sd(g){for(var S=g.attributes;S.length;)g.removeAttributeNode(S[0]);na(g)}var Ki=new Map,Zf=new Set;function Vh(g){return typeof g.getRootNode=="function"?g.getRootNode():g.nodeType===9?g:g.ownerDocument}var Na=se.d;se.d={f:Np,r:Ip,D:kp,C:Bp,L:Hp,m:Gp,X:zp,S:Vp,M:Up};function Np(){var g=Na.f(),S=Si();return g||S}function Ip(g){var S=ia(g);S!==null&&S.tag===5&&S.type==="form"?xh(S):Na.r(g)}var Fc=typeof document>"u"?null:document;function Qf(g,S,T){var F=Fc;if(F&&typeof S=="string"&&S){var G=sr(S);G='link[rel="'+g+'"][href="'+G+'"]',typeof T=="string"&&(G+='[crossorigin="'+T+'"]'),Zf.has(G)||(Zf.add(G),g={rel:g,crossOrigin:T,href:S},F.querySelector(G)===null&&(S=F.createElement("link"),br(S,"link",g),Fn(S),F.head.appendChild(S)))}}function kp(g){Na.D(g),Qf("dns-prefetch",g,null)}function Bp(g,S){Na.C(g,S),Qf("preconnect",g,S)}function Hp(g,S,T){Na.L(g,S,T);var F=Fc;if(F&&g&&S){var G='link[rel="preload"][as="'+sr(S)+'"]';S==="image"&&T&&T.imageSrcSet?(G+='[imagesrcset="'+sr(T.imageSrcSet)+'"]',typeof T.imageSizes=="string"&&(G+='[imagesizes="'+sr(T.imageSizes)+'"]')):G+='[href="'+sr(g)+'"]';var U=G;switch(S){case"style":U=Lc(g);break;case"script":U=Nc(g)}Ki.has(U)||(g=_({rel:"preload",href:S==="image"&&T&&T.imageSrcSet?void 0:g,as:S},T),Ki.set(U,g),F.querySelector(G)!==null||S==="style"&&F.querySelector(ad(U))||S==="script"&&F.querySelector(od(U))||(S=F.createElement("link"),br(S,"link",g),Fn(S),F.head.appendChild(S)))}}function Gp(g,S){Na.m(g,S);var T=Fc;if(T&&g){var F=S&&typeof S.as=="string"?S.as:"script",G='link[rel="modulepreload"][as="'+sr(F)+'"][href="'+sr(g)+'"]',U=G;switch(F){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":U=Nc(g)}if(!Ki.has(U)&&(g=_({rel:"modulepreload",href:g},S),Ki.set(U,g),T.querySelector(G)===null)){switch(F){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(T.querySelector(od(U)))return}F=T.createElement("link"),br(F,"link",g),Fn(F),T.head.appendChild(F)}}}function Vp(g,S,T){Na.S(g,S,T);var F=Fc;if(F&&g){var G=_s(F).hoistableStyles,U=Lc(g);S=S||"default";var te=G.get(U);if(!te){var ve={loading:0,preload:null};if(te=F.querySelector(ad(U)))ve.loading=5;else{g=_({rel:"stylesheet",href:g,"data-precedence":S},T),(T=Ki.get(U))&&_f(g,T);var Ae=te=F.createElement("link");Fn(Ae),br(Ae,"link",g),Ae._p=new Promise(function(ke,We){Ae.onload=ke,Ae.onerror=We}),Ae.addEventListener("load",function(){ve.loading|=1}),Ae.addEventListener("error",function(){ve.loading|=2}),ve.loading|=4,zh(te,S,F)}te={type:"stylesheet",instance:te,count:1,state:ve},G.set(U,te)}}}function zp(g,S){Na.X(g,S);var T=Fc;if(T&&g){var F=_s(T).hoistableScripts,G=Nc(g),U=F.get(G);U||(U=T.querySelector(od(G)),U||(g=_({src:g,async:!0},S),(S=Ki.get(G))&&Rf(g,S),U=T.createElement("script"),Fn(U),br(U,"link",g),T.head.appendChild(U)),U={type:"script",instance:U,count:1,state:null},F.set(G,U))}}function Up(g,S){Na.M(g,S);var T=Fc;if(T&&g){var F=_s(T).hoistableScripts,G=Nc(g),U=F.get(G);U||(U=T.querySelector(od(G)),U||(g=_({src:g,async:!0,type:"module"},S),(S=Ki.get(G))&&Rf(g,S),U=T.createElement("script"),Fn(U),br(U,"link",g),T.head.appendChild(U)),U={type:"script",instance:U,count:1,state:null},F.set(G,U))}}function Jf(g,S,T,F){var G=(G=X.current)?Vh(G):null;if(!G)throw Error(o(446));switch(g){case"meta":case"title":return null;case"style":return typeof T.precedence=="string"&&typeof T.href=="string"?(S=Lc(T.href),T=_s(G).hoistableStyles,F=T.get(S),F||(F={type:"style",instance:null,count:0,state:null},T.set(S,F)),F):{type:"void",instance:null,count:0,state:null};case"link":if(T.rel==="stylesheet"&&typeof T.href=="string"&&typeof T.precedence=="string"){g=Lc(T.href);var U=_s(G).hoistableStyles,te=U.get(g);if(te||(G=G.ownerDocument||G,te={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},U.set(g,te),(U=G.querySelector(ad(g)))&&!U._p&&(te.instance=U,te.state.loading=5),Ki.has(g)||(T={rel:"preload",as:"style",href:T.href,crossOrigin:T.crossOrigin,integrity:T.integrity,media:T.media,hrefLang:T.hrefLang,referrerPolicy:T.referrerPolicy},Ki.set(g,T),U||jp(G,g,T,te.state))),S&&F===null)throw Error(o(528,""));return te}if(S&&F!==null)throw Error(o(529,""));return null;case"script":return S=T.async,T=T.src,typeof T=="string"&&S&&typeof S!="function"&&typeof S!="symbol"?(S=Nc(T),T=_s(G).hoistableScripts,F=T.get(S),F||(F={type:"script",instance:null,count:0,state:null},T.set(S,F)),F):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,g))}}function Lc(g){return'href="'+sr(g)+'"'}function ad(g){return'link[rel="stylesheet"]['+g+"]"}function ep(g){return _({},g,{"data-precedence":g.precedence,precedence:null})}function jp(g,S,T,F){g.querySelector('link[rel="preload"][as="style"]['+S+"]")?F.loading=1:(S=g.createElement("link"),F.preload=S,S.addEventListener("load",function(){return F.loading|=1}),S.addEventListener("error",function(){return F.loading|=2}),br(S,"link",T),Fn(S),g.head.appendChild(S))}function Nc(g){return'[src="'+sr(g)+'"]'}function od(g){return"script[async]"+g}function tp(g,S,T){if(S.count++,S.instance===null)switch(S.type){case"style":var F=g.querySelector('style[data-href~="'+sr(T.href)+'"]');if(F)return S.instance=F,Fn(F),F;var G=_({},T,{"data-href":T.href,"data-precedence":T.precedence,href:null,precedence:null});return F=(g.ownerDocument||g).createElement("style"),Fn(F),br(F,"style",G),zh(F,T.precedence,g),S.instance=F;case"stylesheet":G=Lc(T.href);var U=g.querySelector(ad(G));if(U)return S.state.loading|=4,S.instance=U,Fn(U),U;F=ep(T),(G=Ki.get(G))&&_f(F,G),U=(g.ownerDocument||g).createElement("link"),Fn(U);var te=U;return te._p=new Promise(function(ve,Ae){te.onload=ve,te.onerror=Ae}),br(U,"link",F),S.state.loading|=4,zh(U,T.precedence,g),S.instance=U;case"script":return U=Nc(T.src),(G=g.querySelector(od(U)))?(S.instance=G,Fn(G),G):(F=T,(G=Ki.get(U))&&(F=_({},T),Rf(F,G)),g=g.ownerDocument||g,G=g.createElement("script"),Fn(G),br(G,"link",F),g.head.appendChild(G),S.instance=G);case"void":return null;default:throw Error(o(443,S.type))}else S.type==="stylesheet"&&(S.state.loading&4)===0&&(F=S.instance,S.state.loading|=4,zh(F,T.precedence,g));return S.instance}function zh(g,S,T){for(var F=T.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),G=F.length?F[F.length-1]:null,U=G,te=0;te<F.length;te++){var ve=F[te];if(ve.dataset.precedence===S)U=ve;else if(U!==G)break}U?U.parentNode.insertBefore(g,U.nextSibling):(S=T.nodeType===9?T.head:T,S.insertBefore(g,S.firstChild))}function _f(g,S){g.crossOrigin==null&&(g.crossOrigin=S.crossOrigin),g.referrerPolicy==null&&(g.referrerPolicy=S.referrerPolicy),g.title==null&&(g.title=S.title)}function Rf(g,S){g.crossOrigin==null&&(g.crossOrigin=S.crossOrigin),g.referrerPolicy==null&&(g.referrerPolicy=S.referrerPolicy),g.integrity==null&&(g.integrity=S.integrity)}var Uh=null;function np(g,S,T){if(Uh===null){var F=new Map,G=Uh=new Map;G.set(T,F)}else G=Uh,F=G.get(T),F||(F=new Map,G.set(T,F));if(F.has(g))return F;for(F.set(g,null),T=T.getElementsByTagName(g),G=0;G<T.length;G++){var U=T[G];if(!(U[Ji]||U[On]||g==="link"&&U.getAttribute("rel")==="stylesheet")&&U.namespaceURI!=="http://www.w3.org/2000/svg"){var te=U.getAttribute(S)||"";te=g+te;var ve=F.get(te);ve?ve.push(U):F.set(te,[U])}}return F}function rp(g,S,T){g=g.ownerDocument||g,g.head.insertBefore(T,S==="title"?g.querySelector("head > title"):null)}function Wp(g,S,T){if(T===1||S.itemProp!=null)return!1;switch(g){case"meta":case"title":return!0;case"style":if(typeof S.precedence!="string"||typeof S.href!="string"||S.href==="")break;return!0;case"link":if(typeof S.rel!="string"||typeof S.href!="string"||S.href===""||S.onLoad||S.onError)break;switch(S.rel){case"stylesheet":return g=S.disabled,typeof S.precedence=="string"&&g==null;default:return!0}case"script":if(S.async&&typeof S.async!="function"&&typeof S.async!="symbol"&&!S.onLoad&&!S.onError&&S.src&&typeof S.src=="string")return!0}return!1}function ip(g){return!(g.type==="stylesheet"&&(g.state.loading&3)===0)}function $p(g,S,T,F){if(T.type==="stylesheet"&&(typeof F.media!="string"||matchMedia(F.media).matches!==!1)&&(T.state.loading&4)===0){if(T.instance===null){var G=Lc(F.href),U=S.querySelector(ad(G));if(U){S=U._p,S!==null&&typeof S=="object"&&typeof S.then=="function"&&(g.count++,g=jh.bind(g),S.then(g,g)),T.state.loading|=4,T.instance=U,Fn(U);return}U=S.ownerDocument||S,F=ep(F),(G=Ki.get(G))&&_f(F,G),U=U.createElement("link"),Fn(U);var te=U;te._p=new Promise(function(ve,Ae){te.onload=ve,te.onerror=Ae}),br(U,"link",F),T.instance=U}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(T,S),(S=T.state.preload)&&(T.state.loading&3)===0&&(g.count++,T=jh.bind(g),S.addEventListener("load",T),S.addEventListener("error",T))}}var Tf=0;function qp(g,S){return g.stylesheets&&g.count===0&&$h(g,g.stylesheets),0<g.count||0<g.imgCount?function(T){var F=setTimeout(function(){if(g.stylesheets&&$h(g,g.stylesheets),g.unsuspend){var U=g.unsuspend;g.unsuspend=null,U()}},6e4+S);0<g.imgBytes&&Tf===0&&(Tf=62500*Rp());var G=setTimeout(function(){if(g.waitingForImages=!1,g.count===0&&(g.stylesheets&&$h(g,g.stylesheets),g.unsuspend)){var U=g.unsuspend;g.unsuspend=null,U()}},(g.imgBytes>Tf?50:800)+S);return g.unsuspend=T,function(){g.unsuspend=null,clearTimeout(F),clearTimeout(G)}}:null}function jh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$h(this,this.stylesheets);else if(this.unsuspend){var g=this.unsuspend;this.unsuspend=null,g()}}}var Wh=null;function $h(g,S){g.stylesheets=null,g.unsuspend!==null&&(g.count++,Wh=new Map,S.forEach(Kp,g),Wh=null,jh.call(g))}function Kp(g,S){if(!(S.state.loading&4)){var T=Wh.get(g);if(T)var F=T.get(null);else{T=new Map,Wh.set(g,T);for(var G=g.querySelectorAll("link[data-precedence],style[data-precedence]"),U=0;U<G.length;U++){var te=G[U];(te.nodeName==="LINK"||te.getAttribute("media")!=="not all")&&(T.set(te.dataset.precedence,te),F=te)}F&&T.set(null,F)}G=S.instance,te=G.getAttribute("data-precedence"),U=T.get(te)||F,U===F&&T.set(null,G),T.set(te,G),this.count++,F=jh.bind(this),G.addEventListener("load",F),G.addEventListener("error",F),U?U.parentNode.insertBefore(G,U.nextSibling):(g=g.nodeType===9?g.head:g,g.insertBefore(G,g.firstChild)),S.state.loading|=4}}var ld={$$typeof:j,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function Yp(g,S,T,F,G,U,te,ve,Ae){this.tag=1,this.containerInfo=g,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=un(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=un(0),this.hiddenUpdates=un(null),this.identifierPrefix=F,this.onUncaughtError=G,this.onCaughtError=U,this.onRecoverableError=te,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ae,this.incompleteTransitions=new Map}function sp(g,S,T,F,G,U,te,ve,Ae,ke,We,Ke){return g=new Yp(g,S,T,te,Ae,ke,We,Ke,ve),S=1,U===!0&&(S|=24),U=hn(3,null,null,S),g.current=U,U.stateNode=g,S=du(),S.refCount++,g.pooledCache=S,S.refCount++,U.memoizedState={element:F,isDehydrated:T,cache:S},rl(U),g}function ap(g){return g?(g=Os,g):Os}function op(g,S,T,F,G,U){G=ap(G),F.context===null?F.context=G:F.pendingContext=G,F=ds(S),F.payload={element:T},U=U===void 0?null:U,U!==null&&(F.callback=U),T=Gs(g,F,S),T!==null&&(At(T,g,S),Vs(T,g,S))}function lp(g,S){if(g=g.memoizedState,g!==null&&g.dehydrated!==null){var T=g.retryLane;g.retryLane=T!==0&&T<S?T:S}}function Df(g,S){lp(g,S),(g=g.alternate)&&lp(g,S)}function cp(g){if(g.tag===13||g.tag===31){var S=hr(g,67108864);S!==null&&At(S,g,67108864),Df(g,67108864)}}function up(g){if(g.tag===13||g.tag===31){var S=$r();S=Mn(S);var T=hr(g,S);T!==null&&At(T,g,S),Df(g,S)}}var qh=!0;function Xp(g,S,T,F){var G=oe.T;oe.T=null;var U=se.p;try{se.p=2,Pf(g,S,T,F)}finally{se.p=U,oe.T=G}}function Zp(g,S,T,F){var G=oe.T;oe.T=null;var U=se.p;try{se.p=8,Pf(g,S,T,F)}finally{se.p=U,oe.T=G}}function Pf(g,S,T,F){if(qh){var G=Mf(F);if(G===null)mf(g,S,F,Kh,T),hp(g,F);else if(Jp(G,g,S,T,F))F.stopPropagation();else if(hp(g,F),S&4&&-1<Qp.indexOf(g)){for(;G!==null;){var U=ia(G);if(U!==null)switch(U.tag){case 3:if(U=U.stateNode,U.current.memoizedState.isDehydrated){var te=nr(U.pendingLanes);if(te!==0){var ve=U;for(ve.pendingLanes|=2,ve.entangledLanes|=2;te;){var Ae=1<<31-Pe(te);ve.entanglements[1]|=Ae,te&=~Ae}Je(U),(ct&6)===0&&(Tn=at()+500,it(0))}}break;case 31:case 13:ve=hr(U,2),ve!==null&&At(ve,U,2),Si(),Df(U,2)}if(U=Mf(F),U===null&&mf(g,S,F,Kh,T),U===G)break;G=U}G!==null&&F.stopPropagation()}else mf(g,S,F,null,T)}}function Mf(g){return g=Ol(g),Of(g)}var Kh=null;function Of(g){if(Kh=null,g=ra(g),g!==null){var S=d(g);if(S===null)g=null;else{var T=S.tag;if(T===13){if(g=f(S),g!==null)return g;g=null}else if(T===31){if(g=v(S),g!==null)return g;g=null}else if(T===3){if(S.stateNode.current.memoizedState.isDehydrated)return S.tag===3?S.stateNode.containerInfo:null;g=null}else S!==g&&(g=null)}}return Kh=g,null}function dp(g){switch(g){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vt()){case nn:return 2;case en:return 8;case Dt:case wt:return 32;case Bn:return 268435456;default:return 32}default:return 32}}var Ff=!1,To=null,Do=null,Po=null,cd=new Map,ud=new Map,Mo=[],Qp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hp(g,S){switch(g){case"focusin":case"focusout":To=null;break;case"dragenter":case"dragleave":Do=null;break;case"mouseover":case"mouseout":Po=null;break;case"pointerover":case"pointerout":cd.delete(S.pointerId);break;case"gotpointercapture":case"lostpointercapture":ud.delete(S.pointerId)}}function dd(g,S,T,F,G,U){return g===null||g.nativeEvent!==U?(g={blockedOn:S,domEventName:T,eventSystemFlags:F,nativeEvent:U,targetContainers:[G]},S!==null&&(S=ia(S),S!==null&&cp(S)),g):(g.eventSystemFlags|=F,S=g.targetContainers,G!==null&&S.indexOf(G)===-1&&S.push(G),g)}function Jp(g,S,T,F,G){switch(S){case"focusin":return To=dd(To,g,S,T,F,G),!0;case"dragenter":return Do=dd(Do,g,S,T,F,G),!0;case"mouseover":return Po=dd(Po,g,S,T,F,G),!0;case"pointerover":var U=G.pointerId;return cd.set(U,dd(cd.get(U)||null,g,S,T,F,G)),!0;case"gotpointercapture":return U=G.pointerId,ud.set(U,dd(ud.get(U)||null,g,S,T,F,G)),!0}return!1}function fp(g){var S=ra(g.target);if(S!==null){var T=d(S);if(T!==null){if(S=T.tag,S===13){if(S=f(T),S!==null){g.blockedOn=S,xs(g.priority,function(){up(T)});return}}else if(S===31){if(S=v(T),S!==null){g.blockedOn=S,xs(g.priority,function(){up(T)});return}}else if(S===3&&T.stateNode.current.memoizedState.isDehydrated){g.blockedOn=T.tag===3?T.stateNode.containerInfo:null;return}}}g.blockedOn=null}function Yh(g){if(g.blockedOn!==null)return!1;for(var S=g.targetContainers;0<S.length;){var T=Mf(g.nativeEvent);if(T===null){T=g.nativeEvent;var F=new T.constructor(T.type,T);Ml=F,T.target.dispatchEvent(F),Ml=null}else return S=ia(T),S!==null&&cp(S),g.blockedOn=T,!1;S.shift()}return!0}function pp(g,S,T){Yh(g)&&T.delete(S)}function eg(){Ff=!1,To!==null&&Yh(To)&&(To=null),Do!==null&&Yh(Do)&&(Do=null),Po!==null&&Yh(Po)&&(Po=null),cd.forEach(pp),ud.forEach(pp)}function Xh(g,S){g.blockedOn===S&&(g.blockedOn=null,Ff||(Ff=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,eg)))}var Zh=null;function gp(g){Zh!==g&&(Zh=g,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Zh===g&&(Zh=null);for(var S=0;S<g.length;S+=3){var T=g[S],F=g[S+1],G=g[S+2];if(typeof F!="function"){if(Of(F||T)===null)continue;break}var U=ia(T);U!==null&&(g.splice(S,3),S-=3,Bu(U,{pending:!0,data:G,method:T.method,action:F},F,G))}}))}function Ic(g){function S(Ae){return Xh(Ae,g)}To!==null&&Xh(To,g),Do!==null&&Xh(Do,g),Po!==null&&Xh(Po,g),cd.forEach(S),ud.forEach(S);for(var T=0;T<Mo.length;T++){var F=Mo[T];F.blockedOn===g&&(F.blockedOn=null)}for(;0<Mo.length&&(T=Mo[0],T.blockedOn===null);)fp(T),T.blockedOn===null&&Mo.shift();if(T=(g.ownerDocument||g).$$reactFormReplay,T!=null)for(F=0;F<T.length;F+=3){var G=T[F],U=T[F+1],te=G[rr]||null;if(typeof U=="function")te||gp(T);else if(te){var ve=null;if(U&&U.hasAttribute("formAction")){if(G=U,te=U[rr]||null)ve=te.formAction;else if(Of(G)!==null)continue}else ve=te.action;typeof ve=="function"?T[F+1]=ve:(T.splice(F,3),F-=3),gp(T)}}}function mp(){function g(U){U.canIntercept&&U.info==="react-transition"&&U.intercept({handler:function(){return new Promise(function(te){return G=te})},focusReset:"manual",scroll:"manual"})}function S(){G!==null&&(G(),G=null),F||setTimeout(T,20)}function T(){if(!F&&!navigation.transition){var U=navigation.currentEntry;U&&U.url!=null&&navigation.navigate(U.url,{state:U.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var F=!1,G=null;return navigation.addEventListener("navigate",g),navigation.addEventListener("navigatesuccess",S),navigation.addEventListener("navigateerror",S),setTimeout(T,100),function(){F=!0,navigation.removeEventListener("navigate",g),navigation.removeEventListener("navigatesuccess",S),navigation.removeEventListener("navigateerror",S),G!==null&&(G(),G=null)}}}function Lf(g){this._internalRoot=g}Qh.prototype.render=Lf.prototype.render=function(g){var S=this._internalRoot;if(S===null)throw Error(o(409));var T=S.current,F=$r();op(T,F,g,S,null,null)},Qh.prototype.unmount=Lf.prototype.unmount=function(){var g=this._internalRoot;if(g!==null){this._internalRoot=null;var S=g.containerInfo;op(g.current,2,null,g,null,null),Si(),S[Es]=null}};function Qh(g){this._internalRoot=g}Qh.prototype.unstable_scheduleHydration=function(g){if(g){var S=ws();g={blockedOn:null,target:g,priority:S};for(var T=0;T<Mo.length&&S!==0&&S<Mo[T].priority;T++);Mo.splice(T,0,g),T===0&&fp(g)}};var vp=t.version;if(vp!=="19.2.0")throw Error(o(527,vp,"19.2.0"));se.findDOMNode=function(g){var S=g._reactInternals;if(S===void 0)throw typeof g.render=="function"?Error(o(188)):(g=Object.keys(g).join(","),Error(o(268,g)));return g=E(S),g=g!==null?C(g):null,g=g===null?null:g.stateNode,g};var tg={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:oe,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jh.isDisabled&&Jh.supportsFiber)try{Ss=Jh.inject(tg),Xe=Jh}catch{}}return reactDomClient_production.createRoot=function(g,S){if(!u(g))throw Error(o(299));var T=!1,F="",G=Ph,U=ju,te=Wu;return S!=null&&(S.unstable_strictMode===!0&&(T=!0),S.identifierPrefix!==void 0&&(F=S.identifierPrefix),S.onUncaughtError!==void 0&&(G=S.onUncaughtError),S.onCaughtError!==void 0&&(U=S.onCaughtError),S.onRecoverableError!==void 0&&(te=S.onRecoverableError)),S=sp(g,1,!1,null,null,T,F,null,G,U,te,mp),g[Es]=S.current,gf(g),new Lf(S)},reactDomClient_production.hydrateRoot=function(g,S,T){if(!u(g))throw Error(o(299));var F=!1,G="",U=Ph,te=ju,ve=Wu,Ae=null;return T!=null&&(T.unstable_strictMode===!0&&(F=!0),T.identifierPrefix!==void 0&&(G=T.identifierPrefix),T.onUncaughtError!==void 0&&(U=T.onUncaughtError),T.onCaughtError!==void 0&&(te=T.onCaughtError),T.onRecoverableError!==void 0&&(ve=T.onRecoverableError),T.formState!==void 0&&(Ae=T.formState)),S=sp(g,1,!0,S,T??null,F,G,Ae,U,te,ve,mp),S.context=ap(null),T=S.current,F=$r(),F=Mn(F),G=ds(F),G.callback=null,Gs(T,G,F),T=F,S.current.lanes=T,gi(S,T),Je(S),g[Es]=S.current,gf(g),new Qh(S)},reactDomClient_production.version="19.2.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();var PopStateEventType="popstate";function createHashHistory(e={}){function t(u,d){let{pathname:f="/",search:v="",hash:w=""}=parsePath(u.location.hash.substring(1));return!f.startsWith("/")&&!f.startsWith(".")&&(f="/"+f),createLocation("",{pathname:f,search:v,hash:w},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function n(u,d){let f=u.document.querySelector("base"),v="";if(f&&f.getAttribute("href")){let w=u.location.href,E=w.indexOf("#");v=E===-1?w:w.slice(0,E)}return v+"#"+(typeof d=="string"?d:createPath(d))}function o(u,d){warning(u.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(d)})`)}return getUrlBasedHistory(t,n,o,e)}function invariant$1(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function warning(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(e,t){return{usr:e.state,key:e.key,idx:t}}function createLocation(e,t,n=null,o){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?parsePath(t):t,state:n,key:t&&t.key||o||createKey()}}function createPath({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function parsePath(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let o=e.indexOf("?");o>=0&&(t.search=e.substring(o),e=e.substring(0,o)),e&&(t.pathname=e)}return t}function getUrlBasedHistory(e,t,n,o={}){let{window:u=document.defaultView,v5Compat:d=!1}=o,f=u.history,v="POP",w=null,E=C();E==null&&(E=0,f.replaceState({...f.state,idx:E},""));function C(){return(f.state||{idx:null}).idx}function _(){v="POP";let I=C(),B=I==null?null:I-E;E=I,w&&w({action:v,location:N.location,delta:B})}function D(I,B){v="PUSH";let V=createLocation(N.location,I,B);n&&n(V,I),E=C()+1;let j=getHistoryState(V,E),q=N.createHref(V);try{f.pushState(j,"",q)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;u.location.assign(q)}d&&w&&w({action:v,location:N.location,delta:1})}function O(I,B){v="REPLACE";let V=createLocation(N.location,I,B);n&&n(V,I),E=C();let j=getHistoryState(V,E),q=N.createHref(V);f.replaceState(j,"",q),d&&w&&w({action:v,location:N.location,delta:0})}function M(I){return createBrowserURLImpl(I)}let N={get action(){return v},get location(){return e(u,f)},listen(I){if(w)throw new Error("A history only accepts one active listener");return u.addEventListener(PopStateEventType,_),w=I,()=>{u.removeEventListener(PopStateEventType,_),w=null}},createHref(I){return t(u,I)},createURL:M,encodeLocation(I){let B=M(I);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:D,replace:O,go(I){return f.go(I)}};return N}function createBrowserURLImpl(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),invariant$1(n,"No window.location.(origin|href) available to create URL");let o=typeof e=="string"?e:createPath(e);return o=o.replace(/ $/,"%20"),!t&&o.startsWith("//")&&(o=n+o),new URL(o,n)}function matchRoutes(e,t,n="/"){return matchRoutesImpl(e,t,n,!1)}function matchRoutesImpl(e,t,n,o){let u=typeof t=="string"?parsePath(t):t,d=stripBasename(u.pathname||"/",n);if(d==null)return null;let f=flattenRoutes(e);rankRouteBranches(f);let v=null;for(let w=0;v==null&&w<f.length;++w){let E=decodePath(d);v=matchRouteBranch(f[w],E,o)}return v}function flattenRoutes(e,t=[],n=[],o="",u=!1){let d=(f,v,w=u,E)=>{let C={relativePath:E===void 0?f.path||"":E,caseSensitive:f.caseSensitive===!0,childrenIndex:v,route:f};if(C.relativePath.startsWith("/")){if(!C.relativePath.startsWith(o)&&w)return;invariant$1(C.relativePath.startsWith(o),`Absolute route path "${C.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),C.relativePath=C.relativePath.slice(o.length)}let _=joinPaths([o,C.relativePath]),D=n.concat(C);f.children&&f.children.length>0&&(invariant$1(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),flattenRoutes(f.children,t,D,_,w)),!(f.path==null&&!f.index)&&t.push({path:_,score:computeScore(_,f.index),routesMeta:D})};return e.forEach((f,v)=>{if(f.path===""||!f.path?.includes("?"))d(f,v);else for(let w of explodeOptionalSegments(f.path))d(f,v,!0,w)}),t}function explodeOptionalSegments(e){let t=e.split("/");if(t.length===0)return[];let[n,...o]=t,u=n.endsWith("?"),d=n.replace(/\?$/,"");if(o.length===0)return u?[d,""]:[d];let f=explodeOptionalSegments(o.join("/")),v=[];return v.push(...f.map(w=>w===""?d:[d,w].join("/"))),u&&v.push(...f),v.map(w=>e.startsWith("/")&&w===""?"/":w)}function rankRouteBranches(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:compareIndexes(t.routesMeta.map(o=>o.childrenIndex),n.routesMeta.map(o=>o.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=e=>e==="*";function computeScore(e,t){let n=e.split("/"),o=n.length;return n.some(isSplat)&&(o+=splatPenalty),t&&(o+=indexRouteValue),n.filter(u=>!isSplat(u)).reduce((u,d)=>u+(paramRe.test(d)?dynamicSegmentValue:d===""?emptySegmentValue:staticSegmentValue),o)}function compareIndexes(e,t){return e.length===t.length&&e.slice(0,-1).every((o,u)=>o===t[u])?e[e.length-1]-t[t.length-1]:0}function matchRouteBranch(e,t,n=!1){let{routesMeta:o}=e,u={},d="/",f=[];for(let v=0;v<o.length;++v){let w=o[v],E=v===o.length-1,C=d==="/"?t:t.slice(d.length)||"/",_=matchPath({path:w.relativePath,caseSensitive:w.caseSensitive,end:E},C),D=w.route;if(!_&&E&&n&&!o[o.length-1].route.index&&(_=matchPath({path:w.relativePath,caseSensitive:w.caseSensitive,end:!1},C)),!_)return null;Object.assign(u,_.params),f.push({params:u,pathname:joinPaths([d,_.pathname]),pathnameBase:normalizePathname(joinPaths([d,_.pathnameBase])),route:D}),_.pathnameBase!=="/"&&(d=joinPaths([d,_.pathnameBase]))}return f}function matchPath(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,o]=compilePath(e.path,e.caseSensitive,e.end),u=t.match(n);if(!u)return null;let d=u[0],f=d.replace(/(.)\/+$/,"$1"),v=u.slice(1);return{params:o.reduce((E,{paramName:C,isOptional:_},D)=>{if(C==="*"){let M=v[D]||"";f=d.slice(0,d.length-M.length).replace(/(.)\/+$/,"$1")}const O=v[D];return _&&!O?E[C]=void 0:E[C]=(O||"").replace(/%2F/g,"/"),E},{}),pathname:d,pathnameBase:f,pattern:e}}function compilePath(e,t=!1,n=!0){warning(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let o=[],u="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,v,w)=>(o.push({paramName:v,isOptional:w!=null}),w?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(o.push({paramName:"*"}),u+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?u+="\\/*$":e!==""&&e!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,t?void 0:"i"),o]}function decodePath(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return warning(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function stripBasename(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,o=e.charAt(n);return o&&o!=="/"?null:e.slice(n)||"/"}var ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function resolvePath(e,t="/"){let{pathname:n,search:o="",hash:u=""}=typeof e=="string"?parsePath(e):e,d;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?d=resolvePathname(n.substring(1),"/"):d=resolvePathname(n,t)):d=t,{pathname:d,search:normalizeSearch(o),hash:normalizeHash(u)}}function resolvePathname(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(u=>{u===".."?n.length>1&&n.pop():u!=="."&&n.push(u)}),n.length>1?n.join("/"):"/"}function getInvalidPathError(e,t,n,o){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function getResolveToMatches(e){let t=getPathContributingMatches(e);return t.map((n,o)=>o===t.length-1?n.pathname:n.pathnameBase)}function resolveTo(e,t,n,o=!1){let u;typeof e=="string"?u=parsePath(e):(u={...e},invariant$1(!u.pathname||!u.pathname.includes("?"),getInvalidPathError("?","pathname","search",u)),invariant$1(!u.pathname||!u.pathname.includes("#"),getInvalidPathError("#","pathname","hash",u)),invariant$1(!u.search||!u.search.includes("#"),getInvalidPathError("#","search","hash",u)));let d=e===""||u.pathname==="",f=d?"/":u.pathname,v;if(f==null)v=n;else{let _=t.length-1;if(!o&&f.startsWith("..")){let D=f.split("/");for(;D[0]==="..";)D.shift(),_-=1;u.pathname=D.join("/")}v=_>=0?t[_]:"/"}let w=resolvePath(u,v),E=f&&f!=="/"&&f.endsWith("/"),C=(d||f===".")&&n.endsWith("/");return!w.pathname.endsWith("/")&&(E||C)&&(w.pathname+="/"),w}var joinPaths=e=>e.join("/").replace(/\/\/+/g,"/"),normalizePathname=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,normalizeHash=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,ErrorResponseImpl=class{constructor(e,t,n,o=!1){this.status=e,this.statusText=t||"",this.internal=o,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function isRouteErrorResponse(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function getRoutePattern(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var isBrowser$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function parseToInfo(e,t){let n=e;if(typeof n!="string"||!ABSOLUTE_URL_REGEX.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let o=n,u=!1;if(isBrowser$1)try{let d=new URL(window.location.href),f=n.startsWith("//")?new URL(d.protocol+n):new URL(n),v=stripBasename(f.pathname,t);f.origin===d.origin&&v!=null?n=v+f.search+f.hash:u=!0}catch{warning(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:o,isExternal:u,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";var RSCRouterContext=reactExports.createContext(!1),ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";var ERROR_DIGEST_BASE="REACT_ROUTER_ERROR",ERROR_DIGEST_REDIRECT="REDIRECT",ERROR_DIGEST_ROUTE_ERROR_RESPONSE="ROUTE_ERROR_RESPONSE";function decodeRedirectErrorDigest(e){if(e.startsWith(`${ERROR_DIGEST_BASE}:${ERROR_DIGEST_REDIRECT}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function decodeRouteErrorResponseDigest(e){if(e.startsWith(`${ERROR_DIGEST_BASE}:${ERROR_DIGEST_ROUTE_ERROR_RESPONSE}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new ErrorResponseImpl(t.status,t.statusText,t.data)}catch{}}function useHref(e,{relative:t}={}){invariant$1(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:o}=reactExports.useContext(NavigationContext),{hash:u,pathname:d,search:f}=useResolvedPath(e,{relative:t}),v=d;return n!=="/"&&(v=d==="/"?n:joinPaths([n,d])),o.createHref({pathname:v,search:f,hash:u})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant$1(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect$3(e){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(e)}function useNavigate(){let{isDataRoute:e}=reactExports.useContext(RouteContext);return e?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant$1(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let e=reactExports.useContext(DataRouterContext),{basename:t,navigator:n}=reactExports.useContext(NavigationContext),{matches:o}=reactExports.useContext(RouteContext),{pathname:u}=useLocation(),d=JSON.stringify(getResolveToMatches(o)),f=reactExports.useRef(!1);return useIsomorphicLayoutEffect$3(()=>{f.current=!0}),reactExports.useCallback((w,E={})=>{if(warning(f.current,navigateEffectWarning),!f.current)return;if(typeof w=="number"){n.go(w);return}let C=resolveTo(w,JSON.parse(d),u,E.relative==="path");e==null&&t!=="/"&&(C.pathname=C.pathname==="/"?t:joinPaths([t,C.pathname])),(E.replace?n.replace:n.push)(C,E.state,E)},[t,n,d,u,e])}reactExports.createContext(null);function useResolvedPath(e,{relative:t}={}){let{matches:n}=reactExports.useContext(RouteContext),{pathname:o}=useLocation(),u=JSON.stringify(getResolveToMatches(n));return reactExports.useMemo(()=>resolveTo(e,JSON.parse(u),o,t==="path"),[e,u,o,t])}function useRoutes(e,t){return useRoutesImpl(e,t)}function useRoutesImpl(e,t,n,o,u){invariant$1(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:d}=reactExports.useContext(NavigationContext),{matches:f}=reactExports.useContext(RouteContext),v=f[f.length-1],w=v?v.params:{},E=v?v.pathname:"/",C=v?v.pathnameBase:"/",_=v&&v.route;{let V=_&&_.path||"";warningOnce(E,!_||V.endsWith("*")||V.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${E}" (under <Route path="${V}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${V}"> to <Route path="${V==="/"?"*":`${V}/*`}">.`)}let D=useLocation(),O;if(t){let V=typeof t=="string"?parsePath(t):t;invariant$1(C==="/"||V.pathname?.startsWith(C),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${C}" but pathname "${V.pathname}" was given in the \`location\` prop.`),O=V}else O=D;let M=O.pathname||"/",N=M;if(C!=="/"){let V=C.replace(/^\//,"").split("/");N="/"+M.replace(/^\//,"").split("/").slice(V.length).join("/")}let I=matchRoutes(e,{pathname:N});warning(_||I!=null,`No routes matched location "${O.pathname}${O.search}${O.hash}" `),warning(I==null||I[I.length-1].route.element!==void 0||I[I.length-1].route.Component!==void 0||I[I.length-1].route.lazy!==void 0,`Matched leaf route at location "${O.pathname}${O.search}${O.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let B=_renderMatches(I&&I.map(V=>Object.assign({},V,{params:Object.assign({},w,V.params),pathname:joinPaths([C,d.encodeLocation?d.encodeLocation(V.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?C:joinPaths([C,d.encodeLocation?d.encodeLocation(V.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:V.pathnameBase])})),f,n,o,u);return t&&B?reactExports.createElement(LocationContext.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...O},navigationType:"POP"}},B):B}function DefaultErrorComponent(){let e=useRouteError(),t=isRouteErrorResponse(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,o="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:o},d={padding:"2px 4px",backgroundColor:o},f=null;return console.error("Error handled by React Router default ErrorBoundary:",e),f=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null," Hey developer "),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:d},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:d},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},t),n?reactExports.createElement("pre",{style:u},n):null,f)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const n=decodeRouteErrorResponseDigest(e.digest);n&&(e=n)}let t=e!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?reactExports.createElement(RSCErrorHandler,{error:e},t):t}};RenderErrorBoundary.contextType=RSCRouterContext;var errorRedirectHandledMap=new WeakMap;function RSCErrorHandler({children:e,error:t}){let{basename:n}=reactExports.useContext(NavigationContext);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let o=decodeRedirectErrorDigest(t.digest);if(o){let u=errorRedirectHandledMap.get(t);if(u)throw u;let d=parseToInfo(o.location,n);if(isBrowser$1&&!errorRedirectHandledMap.get(t))if(d.isExternal||o.reloadDocument)window.location.href=d.absoluteURL||d.to;else{const f=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(d.to,{replace:o.replace}));throw errorRedirectHandledMap.set(t,f),f}return reactExports.createElement("meta",{httpEquiv:"refresh",content:`0;url=${d.absoluteURL||d.to}`})}}return e}function RenderedRoute({routeContext:e,match:t,children:n}){let o=reactExports.useContext(DataRouterContext);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),reactExports.createElement(RouteContext.Provider,{value:e},n)}function _renderMatches(e,t=[],n=null,o=null,u=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let d=e,f=n?.errors;if(f!=null){let C=d.findIndex(_=>_.route.id&&f?.[_.route.id]!==void 0);invariant$1(C>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),d=d.slice(0,Math.min(d.length,C+1))}let v=!1,w=-1;if(n)for(let C=0;C<d.length;C++){let _=d[C];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(w=C),_.route.id){let{loaderData:D,errors:O}=n,M=_.route.loader&&!D.hasOwnProperty(_.route.id)&&(!O||O[_.route.id]===void 0);if(_.route.lazy||M){v=!0,w>=0?d=d.slice(0,w+1):d=[d[0]];break}}}let E=n&&o?(C,_)=>{o(C,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:getRoutePattern(n.matches),errorInfo:_})}:void 0;return d.reduceRight((C,_,D)=>{let O,M=!1,N=null,I=null;n&&(O=f&&_.route.id?f[_.route.id]:void 0,N=_.route.errorElement||defaultErrorElement,v&&(w<0&&D===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),M=!0,I=null):w===D&&(M=!0,I=_.route.hydrateFallbackElement||null)));let B=t.concat(d.slice(0,D+1)),V=()=>{let j;return O?j=N:M?j=I:_.route.Component?j=reactExports.createElement(_.route.Component,null):_.route.element?j=_.route.element:j=C,reactExports.createElement(RenderedRoute,{match:_,routeContext:{outlet:C,matches:B,isDataRoute:n!=null},children:j})};return n&&(_.route.ErrorBoundary||_.route.errorElement||D===0)?reactExports.createElement(RenderErrorBoundary,{location:n.location,revalidation:n.revalidation,component:N,error:O,children:V(),routeContext:{outlet:null,matches:B,isDataRoute:!0},onError:E}):V()},null)}function getDataRouterConsoleError(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(e){let t=reactExports.useContext(DataRouterContext);return invariant$1(t,getDataRouterConsoleError(e)),t}function useDataRouterState(e){let t=reactExports.useContext(DataRouterStateContext);return invariant$1(t,getDataRouterConsoleError(e)),t}function useRouteContext(e){let t=reactExports.useContext(RouteContext);return invariant$1(t,getDataRouterConsoleError(e)),t}function useCurrentRouteId(e){let t=useRouteContext(e),n=t.matches[t.matches.length-1];return invariant$1(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){let e=reactExports.useContext(RouteErrorContext),t=useDataRouterState("useRouteError"),n=useCurrentRouteId("useRouteError");return e!==void 0?e:t.errors?.[n]}function useNavigateStable(){let{router:e}=useDataRouterContext("useNavigate"),t=useCurrentRouteId("useNavigate"),n=reactExports.useRef(!1);return useIsomorphicLayoutEffect$3(()=>{n.current=!0}),reactExports.useCallback(async(u,d={})=>{warning(n.current,navigateEffectWarning),n.current&&(typeof u=="number"?await e.navigate(u):await e.navigate(u,{fromRouteId:t,...d}))},[e,t])}var alreadyWarned={};function warningOnce(e,t,n){!t&&!alreadyWarned[e]&&(alreadyWarned[e]=!0,warning(!1,n))}reactExports.memo(DataRoutes);function DataRoutes({routes:e,future:t,state:n,onError:o}){return useRoutesImpl(e,void 0,n,o,t)}function Route(e){invariant$1(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Router({basename:e="/",children:t=null,location:n,navigationType:o="POP",navigator:u,static:d=!1,unstable_useTransitions:f}){invariant$1(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let v=e.replace(/^\/*/,"/"),w=reactExports.useMemo(()=>({basename:v,navigator:u,static:d,unstable_useTransitions:f,future:{}}),[v,u,d,f]);typeof n=="string"&&(n=parsePath(n));let{pathname:E="/",search:C="",hash:_="",state:D=null,key:O="default"}=n,M=reactExports.useMemo(()=>{let N=stripBasename(E,v);return N==null?null:{location:{pathname:N,search:C,hash:_,state:D,key:O},navigationType:o}},[v,E,C,_,D,O,o]);return warning(M!=null,`<Router basename="${v}"> is not able to match the URL "${E}${C}${_}" because it does not start with the basename, so the <Router> won't render anything.`),M==null?null:reactExports.createElement(NavigationContext.Provider,{value:w},reactExports.createElement(LocationContext.Provider,{children:t,value:M}))}function Routes({children:e,location:t}){return useRoutes(createRoutesFromChildren(e),t)}function createRoutesFromChildren(e,t=[]){let n=[];return reactExports.Children.forEach(e,(o,u)=>{if(!reactExports.isValidElement(o))return;let d=[...t,u];if(o.type===reactExports.Fragment){n.push.apply(n,createRoutesFromChildren(o.props.children,d));return}invariant$1(o.type===Route,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),invariant$1(!o.props.index||!o.props.children,"An index route cannot have child routes.");let f={id:o.props.id||d.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(f.children=createRoutesFromChildren(o.props.children,d)),n.push(f)}),n}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function isButtonElement(e){return isHtmlElement(e)&&e.tagName.toLowerCase()==="button"}function isFormElement(e){return isHtmlElement(e)&&e.tagName.toLowerCase()==="form"}function isInputElement(e){return isHtmlElement(e)&&e.tagName.toLowerCase()==="input"}function isModifiedEvent(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function shouldProcessLinkClick(e,t){return e.button===0&&(!t||t==="_self")&&!isModifiedEvent(e)}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(e){return e!=null&&!supportedFormEncTypes.has(e)?(warning(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):e}function getFormSubmissionInfo(e,t){let n,o,u,d,f;if(isFormElement(e)){let v=e.getAttribute("action");o=v?stripBasename(v,t):null,n=e.getAttribute("method")||defaultMethod,u=getFormEncType(e.getAttribute("enctype"))||defaultEncType,d=new FormData(e)}else if(isButtonElement(e)||isInputElement(e)&&(e.type==="submit"||e.type==="image")){let v=e.form;if(v==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let w=e.getAttribute("formaction")||v.getAttribute("action");if(o=w?stripBasename(w,t):null,n=e.getAttribute("formmethod")||v.getAttribute("method")||defaultMethod,u=getFormEncType(e.getAttribute("formenctype"))||getFormEncType(v.getAttribute("enctype"))||defaultEncType,d=new FormData(v,e),!isFormDataSubmitterSupported()){let{name:E,type:C,value:_}=e;if(C==="image"){let D=E?`${E}.`:"";d.append(`${D}x`,"0"),d.append(`${D}y`,"0")}else E&&d.append(E,_)}}else{if(isHtmlElement(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=defaultMethod,o=null,u=defaultEncType,f=e}return d&&u==="text/plain"&&(f=d,d=void 0),{action:o,method:n.toLowerCase(),encType:u,formData:d,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function singleFetchUrl(e,t,n,o){let u=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n?u.pathname.endsWith("/")?u.pathname=`${u.pathname}_.${o}`:u.pathname=`${u.pathname}.${o}`:u.pathname==="/"?u.pathname=`_root.${o}`:t&&stripBasename(u.pathname,t)==="/"?u.pathname=`${t.replace(/\/$/,"")}/_root.${o}`:u.pathname=`${u.pathname.replace(/\/$/,"")}.${o}`,u}async function loadRouteModule(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function getKeyedPrefetchLinks(e,t,n){let o=await Promise.all(e.map(async u=>{let d=t.routes[u.route.id];if(d){let f=await loadRouteModule(d,n);return f.links?f.links():[]}return[]}));return dedupeLinkDescriptors(o.flat(1).filter(isHtmlLinkDescriptor).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function getNewMatchesForLinks(e,t,n,o,u,d){let f=(w,E)=>n[E]?w.route.id!==n[E].route.id:!0,v=(w,E)=>n[E].pathname!==w.pathname||n[E].route.path?.endsWith("*")&&n[E].params["*"]!==w.params["*"];return d==="assets"?t.filter((w,E)=>f(w,E)||v(w,E)):d==="data"?t.filter((w,E)=>{let C=o.routes[w.route.id];if(!C||!C.hasLoader)return!1;if(f(w,E)||v(w,E))return!0;if(w.route.shouldRevalidate){let _=w.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:w.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function getModuleLinkHrefs(e,t,{includeHydrateFallback:n}={}){return dedupeHrefs(e.map(o=>{let u=t.routes[o.route.id];if(!u)return[];let d=[u.module];return u.clientActionModule&&(d=d.concat(u.clientActionModule)),u.clientLoaderModule&&(d=d.concat(u.clientLoaderModule)),n&&u.hydrateFallbackModule&&(d=d.concat(u.hydrateFallbackModule)),u.imports&&(d=d.concat(u.imports)),d}).flat(1))}function dedupeHrefs(e){return[...new Set(e)]}function sortKeys(e){let t={},n=Object.keys(e).sort();for(let o of n)t[o]=e[o];return t}function dedupeLinkDescriptors(e,t){let n=new Set;return new Set(t),e.reduce((o,u)=>{let d=JSON.stringify(sortKeys(u));return n.has(d)||(n.add(d),o.push({key:d,link:u})),o},[])}function useDataRouterContext2(){let e=reactExports.useContext(DataRouterContext);return invariant2(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function useDataRouterStateContext(){let e=reactExports.useContext(DataRouterStateContext);return invariant2(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let e=reactExports.useContext(FrameworkContext);return invariant2(e,"You must render this element inside a <HydratedRouter> element"),e}function usePrefetchBehavior(e,t){let n=reactExports.useContext(FrameworkContext),[o,u]=reactExports.useState(!1),[d,f]=reactExports.useState(!1),{onFocus:v,onBlur:w,onMouseEnter:E,onMouseLeave:C,onTouchStart:_}=t,D=reactExports.useRef(null);reactExports.useEffect(()=>{if(e==="render"&&f(!0),e==="viewport"){let N=B=>{B.forEach(V=>{f(V.isIntersecting)})},I=new IntersectionObserver(N,{threshold:.5});return D.current&&I.observe(D.current),()=>{I.disconnect()}}},[e]),reactExports.useEffect(()=>{if(o){let N=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(N)}}},[o]);let O=()=>{u(!0)},M=()=>{u(!1),f(!1)};return n?e!=="intent"?[d,D,{}]:[d,D,{onFocus:composeEventHandlers(v,O),onBlur:composeEventHandlers(w,M),onMouseEnter:composeEventHandlers(E,O),onMouseLeave:composeEventHandlers(C,M),onTouchStart:composeEventHandlers(_,O)}]:[!1,D,{}]}function composeEventHandlers(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function PrefetchPageLinks({page:e,...t}){let{router:n}=useDataRouterContext2(),o=reactExports.useMemo(()=>matchRoutes(n.routes,e,n.basename),[n.routes,e,n.basename]);return o?reactExports.createElement(PrefetchPageLinksImpl,{page:e,matches:o,...t}):null}function useKeyedPrefetchLinks(e){let{manifest:t,routeModules:n}=useFrameworkContext(),[o,u]=reactExports.useState([]);return reactExports.useEffect(()=>{let d=!1;return getKeyedPrefetchLinks(e,t,n).then(f=>{d||u(f)}),()=>{d=!0}},[e,t,n]),o}function PrefetchPageLinksImpl({page:e,matches:t,...n}){let o=useLocation(),{future:u,manifest:d,routeModules:f}=useFrameworkContext(),{basename:v}=useDataRouterContext2(),{loaderData:w,matches:E}=useDataRouterStateContext(),C=reactExports.useMemo(()=>getNewMatchesForLinks(e,t,E,d,o,"data"),[e,t,E,d,o]),_=reactExports.useMemo(()=>getNewMatchesForLinks(e,t,E,d,o,"assets"),[e,t,E,d,o]),D=reactExports.useMemo(()=>{if(e===o.pathname+o.search+o.hash)return[];let N=new Set,I=!1;if(t.forEach(V=>{let j=d.routes[V.route.id];!j||!j.hasLoader||(!C.some(q=>q.route.id===V.route.id)&&V.route.id in w&&f[V.route.id]?.shouldRevalidate||j.hasClientLoader?I=!0:N.add(V.route.id))}),N.size===0)return[];let B=singleFetchUrl(e,v,u.unstable_trailingSlashAwareDataRequests,"data");return I&&N.size>0&&B.searchParams.set("_routes",t.filter(V=>N.has(V.route.id)).map(V=>V.route.id).join(",")),[B.pathname+B.search]},[v,u.unstable_trailingSlashAwareDataRequests,w,o,d,C,t,e,f]),O=reactExports.useMemo(()=>getModuleLinkHrefs(_,d),[_,d]),M=useKeyedPrefetchLinks(_);return reactExports.createElement(reactExports.Fragment,null,D.map(N=>reactExports.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...n})),O.map(N=>reactExports.createElement("link",{key:N,rel:"modulepreload",href:N,...n})),M.map(({key:N,link:I})=>reactExports.createElement("link",{key:N,nonce:n.nonce,...I,crossOrigin:I.crossOrigin??n.crossOrigin})))}function mergeRefs(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var isBrowser2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser2&&(window.__reactRouterVersion="7.13.0")}catch{}function HashRouter({basename:e,children:t,unstable_useTransitions:n,window:o}){let u=reactExports.useRef();u.current==null&&(u.current=createHashHistory({window:o,v5Compat:!0}));let d=u.current,[f,v]=reactExports.useState({action:d.action,location:d.location}),w=reactExports.useCallback(E=>{n===!1?v(E):reactExports.startTransition(()=>v(E))},[n]);return reactExports.useLayoutEffect(()=>d.listen(w),[d,w]),reactExports.createElement(Router,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:d,unstable_useTransitions:n})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:t,discover:n="render",prefetch:o="none",relative:u,reloadDocument:d,replace:f,state:v,target:w,to:E,preventScrollReset:C,viewTransition:_,unstable_defaultShouldRevalidate:D,...O},M){let{basename:N,unstable_useTransitions:I}=reactExports.useContext(NavigationContext),B=typeof E=="string"&&ABSOLUTE_URL_REGEX2.test(E),V=parseToInfo(E,N);E=V.to;let j=useHref(E,{relative:u}),[q,z,$]=usePrefetchBehavior(o,O),ee=useLinkClickHandler(E,{replace:f,state:v,target:w,preventScrollReset:C,relative:u,viewTransition:_,unstable_defaultShouldRevalidate:D,unstable_useTransitions:I});function ie(pe){t&&t(pe),pe.defaultPrevented||ee(pe)}let ae=reactExports.createElement("a",{...O,...$,href:V.absoluteURL||j,onClick:V.isExternal||d?t:ie,ref:mergeRefs(M,z),target:w,"data-discover":!B&&n==="render"?"true":void 0});return q&&!B?reactExports.createElement(reactExports.Fragment,null,ae,reactExports.createElement(PrefetchPageLinks,{page:j})):ae});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:o="",end:u=!1,style:d,to:f,viewTransition:v,children:w,...E},C){let _=useResolvedPath(f,{relative:E.relative}),D=useLocation(),O=reactExports.useContext(DataRouterStateContext),{navigator:M,basename:N}=reactExports.useContext(NavigationContext),I=O!=null&&useViewTransitionState(_)&&v===!0,B=M.encodeLocation?M.encodeLocation(_).pathname:_.pathname,V=D.pathname,j=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;n||(V=V.toLowerCase(),j=j?j.toLowerCase():null,B=B.toLowerCase()),j&&N&&(j=stripBasename(j,N)||j);const q=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let z=V===B||!u&&V.startsWith(B)&&V.charAt(q)==="/",$=j!=null&&(j===B||!u&&j.startsWith(B)&&j.charAt(B.length)==="/"),ee={isActive:z,isPending:$,isTransitioning:I},ie=z?t:void 0,ae;typeof o=="function"?ae=o(ee):ae=[o,z?"active":null,$?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let pe=typeof d=="function"?d(ee):d;return reactExports.createElement(Link,{...E,"aria-current":ie,className:ae,ref:C,style:pe,to:f,viewTransition:v},typeof w=="function"?w(ee):w)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:o,replace:u,state:d,method:f=defaultMethod,action:v,onSubmit:w,relative:E,preventScrollReset:C,viewTransition:_,unstable_defaultShouldRevalidate:D,...O},M)=>{let{unstable_useTransitions:N}=reactExports.useContext(NavigationContext),I=useSubmit(),B=useFormAction(v,{relative:E}),V=f.toLowerCase()==="get"?"get":"post",j=typeof v=="string"&&ABSOLUTE_URL_REGEX2.test(v),q=z=>{if(w&&w(z),z.defaultPrevented)return;z.preventDefault();let $=z.nativeEvent.submitter,ee=$?.getAttribute("formmethod")||f,ie=()=>I($||z.currentTarget,{fetcherKey:t,method:ee,navigate:n,replace:u,state:d,relative:E,preventScrollReset:C,viewTransition:_,unstable_defaultShouldRevalidate:D});N&&n!==!1?reactExports.startTransition(()=>ie()):ie()};return reactExports.createElement("form",{ref:M,method:V,action:B,onSubmit:o?w:q,...O,"data-discover":!j&&e==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(e){let t=reactExports.useContext(DataRouterContext);return invariant$1(t,getDataRouterConsoleError2(e)),t}function useLinkClickHandler(e,{target:t,replace:n,state:o,preventScrollReset:u,relative:d,viewTransition:f,unstable_defaultShouldRevalidate:v,unstable_useTransitions:w}={}){let E=useNavigate(),C=useLocation(),_=useResolvedPath(e,{relative:d});return reactExports.useCallback(D=>{if(shouldProcessLinkClick(D,t)){D.preventDefault();let O=n!==void 0?n:createPath(C)===createPath(_),M=()=>E(e,{replace:O,state:o,preventScrollReset:u,relative:d,viewTransition:f,unstable_defaultShouldRevalidate:v});w?reactExports.startTransition(()=>M()):M()}},[C,E,_,n,o,t,e,u,d,f,v,w])}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:e}=useDataRouterContext3("useSubmit"),{basename:t}=reactExports.useContext(NavigationContext),n=useRouteId(),o=e.fetch,u=e.navigate;return reactExports.useCallback(async(d,f={})=>{let{action:v,method:w,encType:E,formData:C,body:_}=getFormSubmissionInfo(d,t);if(f.navigate===!1){let D=f.fetcherKey||getUniqueFetcherId();await o(D,n,f.action||v,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:C,body:_,formMethod:f.method||w,formEncType:f.encType||E,flushSync:f.flushSync})}else await u(f.action||v,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:C,body:_,formMethod:f.method||w,formEncType:f.encType||E,replace:f.replace,state:f.state,fromRouteId:n,flushSync:f.flushSync,viewTransition:f.viewTransition})},[o,u,t,n])}function useFormAction(e,{relative:t}={}){let{basename:n}=reactExports.useContext(NavigationContext),o=reactExports.useContext(RouteContext);invariant$1(o,"useFormAction must be used inside a RouteContext");let[u]=o.matches.slice(-1),d={...useResolvedPath(e||".",{relative:t})},f=useLocation();if(e==null){d.search=f.search;let v=new URLSearchParams(d.search),w=v.getAll("index");if(w.some(C=>C==="")){v.delete("index"),w.filter(_=>_).forEach(_=>v.append("index",_));let C=v.toString();d.search=C?`?${C}`:""}}return(!e||e===".")&&u.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(d.pathname=d.pathname==="/"?n:joinPaths([n,d.pathname])),createPath(d)}function useViewTransitionState(e,{relative:t}={}){let n=reactExports.useContext(ViewTransitionContext);invariant$1(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=useDataRouterContext3("useViewTransitionState"),u=useResolvedPath(e,{relative:t});if(!n.isTransitioning)return!1;let d=stripBasename(n.currentLocation.pathname,o)||n.currentLocation.pathname,f=stripBasename(n.nextLocation.pathname,o)||n.nextLocation.pathname;return matchPath(u.pathname,f)!=null||matchPath(u.pathname,d)!=null}var reactDomExports=requireReactDom();const ReactDOM=getDefaultExportFromCjs(reactDomExports);function r(e){var t,n,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var u=e.length;for(t=0;t<u;t++)e[t]&&(n=r(e[t]))&&(o&&(o+=" "),o+=n)}else for(n in e)e[n]&&(o&&(o+=" "),o+=n);return o}function clsx(){for(var e,t,n=0,o="",u=arguments.length;n<u;n++)(e=arguments[n])&&(t=r(e))&&(o&&(o+=" "),o+=t);return o}var EventKeys=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function isEventKey(e){if(typeof e!="string")return!1;var t=EventKeys;return t.includes(e)}var SVGElementPropKeys=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function isSvgElementPropKey(e){if(typeof e!="string")return!1;var t=SVGElementPropKeys;return t.includes(e)}function isDataAttribute(e){return typeof e=="string"&&e.startsWith("data-")}function svgPropertiesNoEvents(e){var t=Object.entries(e).filter(n=>{var[o]=n;return isSvgElementPropKey(o)||isDataAttribute(o)});return Object.fromEntries(t)}function svgPropertiesNoEventsFromUnknown(e){if(e==null)return null;if(reactExports.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return svgPropertiesNoEvents(t)}return typeof e=="object"&&!Array.isArray(e)?svgPropertiesNoEvents(e):null}function svgPropertiesAndEvents(e){var t=Object.entries(e).filter(n=>{var[o]=n;return isSvgElementPropKey(o)||isDataAttribute(o)||isEventKey(o)});return Object.fromEntries(t)}var _excluded$d=["children","width","height","viewBox","className","style","title","desc"];function _extends$h(){return _extends$h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$h.apply(null,arguments)}function _objectWithoutProperties$d(e,t){if(e==null)return{};var n,o,u=_objectWithoutPropertiesLoose$d(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(o=0;o<d.length;o++)n=d[o],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(u[n]=e[n])}return u}function _objectWithoutPropertiesLoose$d(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;n[o]=e[o]}return n}var Surface=reactExports.forwardRef((e,t)=>{var{children:n,width:o,height:u,viewBox:d,className:f,style:v,title:w,desc:E}=e,C=_objectWithoutProperties$d(e,_excluded$d),_=d||{width:o,height:u,x:0,y:0},D=clsx("recharts-surface",f);return reactExports.createElement("svg",_extends$h({},svgPropertiesAndEvents(C),{className:D,width:o,height:u,style:v,viewBox:"".concat(_.x," ").concat(_.y," ").concat(_.width," ").concat(_.height),ref:t}),reactExports.createElement("title",null,w),reactExports.createElement("desc",null,E),n)}),_excluded$c=["children","className"];function _extends$g(){return _extends$g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$g.apply(null,arguments)}function _objectWithoutProperties$c(e,t){if(e==null)return{};var n,o,u=_objectWithoutPropertiesLoose$c(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(o=0;o<d.length;o++)n=d[o],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(u[n]=e[n])}return u}function _objectWithoutPropertiesLoose$c(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;n[o]=e[o]}return n}var Layer$2=reactExports.forwardRef((e,t)=>{var{children:n,className:o}=e,u=_objectWithoutProperties$c(e,_excluded$c),d=clsx("recharts-layer",o);return reactExports.createElement("g",_extends$g({className:d},svgPropertiesAndEvents(u),{ref:t}),n)}),LegendPortalContext=reactExports.createContext(null);function constant$1(e){return function(){return e}}const cos=Math.cos,sin=Math.sin,sqrt$1=Math.sqrt,pi$1=Math.PI,tau$1=2*pi$1,pi=Math.PI,tau=2*pi,epsilon=1e-6,tauEpsilon=tau-epsilon;function append(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function appendRound(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return append;const n=10**t;return function(o){this._+=o[0];for(let u=1,d=o.length;u<d;++u)this._+=Math.round(arguments[u]*n)/n+o[u]}}let Path$1=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?append:appendRound(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,o,u){this._append`Q${+t},${+n},${this._x1=+o},${this._y1=+u}`}bezierCurveTo(t,n,o,u,d,f){this._append`C${+t},${+n},${+o},${+u},${this._x1=+d},${this._y1=+f}`}arcTo(t,n,o,u,d){if(t=+t,n=+n,o=+o,u=+u,d=+d,d<0)throw new Error(`negative radius: ${d}`);let f=this._x1,v=this._y1,w=o-t,E=u-n,C=f-t,_=v-n,D=C*C+_*_;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(D>epsilon)if(!(Math.abs(_*w-E*C)>epsilon)||!d)this._append`L${this._x1=t},${this._y1=n}`;else{let O=o-f,M=u-v,N=w*w+E*E,I=O*O+M*M,B=Math.sqrt(N),V=Math.sqrt(D),j=d*Math.tan((pi-Math.acos((N+D-I)/(2*B*V)))/2),q=j/V,z=j/B;Math.abs(q-1)>epsilon&&this._append`L${t+q*C},${n+q*_}`,this._append`A${d},${d},0,0,${+(_*O>C*M)},${this._x1=t+z*w},${this._y1=n+z*E}`}}arc(t,n,o,u,d,f){if(t=+t,n=+n,o=+o,f=!!f,o<0)throw new Error(`negative radius: ${o}`);let v=o*Math.cos(u),w=o*Math.sin(u),E=t+v,C=n+w,_=1^f,D=f?u-d:d-u;this._x1===null?this._append`M${E},${C}`:(Math.abs(this._x1-E)>epsilon||Math.abs(this._y1-C)>epsilon)&&this._append`L${E},${C}`,o&&(D<0&&(D=D%tau+tau),D>tauEpsilon?this._append`A${o},${o},0,1,${_},${t-v},${n-w}A${o},${o},0,1,${_},${this._x1=E},${this._y1=C}`:D>epsilon&&this._append`A${o},${o},0,${+(D>=pi)},${_},${this._x1=t+o*Math.cos(d)},${this._y1=n+o*Math.sin(d)}`)}rect(t,n,o,u){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${o=+o}v${+u}h${-o}Z`}toString(){return this._}};function withPath(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const o=Math.floor(n);if(!(o>=0))throw new RangeError(`invalid digits: ${n}`);t=o}return e},()=>new Path$1(t)}function array(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Linear(e){this._context=e}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function curveLinear(e){return new Linear(e)}function x$1(e){return e[0]}function y(e){return e[1]}function shapeLine(e,t){var n=constant$1(!0),o=null,u=curveLinear,d=null,f=withPath(v);e=typeof e=="function"?e:e===void 0?x$1:constant$1(e),t=typeof t=="function"?t:t===void 0?y:constant$1(t);function v(w){var E,C=(w=array(w)).length,_,D=!1,O;for(o==null&&(d=u(O=f())),E=0;E<=C;++E)!(E<C&&n(_=w[E],E,w))===D&&((D=!D)?d.lineStart():d.lineEnd()),D&&d.point(+e(_,E,w),+t(_,E,w));if(O)return d=null,O+""||null}return v.x=function(w){return arguments.length?(e=typeof w=="function"?w:constant$1(+w),v):e},v.y=function(w){return arguments.length?(t=typeof w=="function"?w:constant$1(+w),v):t},v.defined=function(w){return arguments.length?(n=typeof w=="function"?w:constant$1(!!w),v):n},v.curve=function(w){return arguments.length?(u=w,o!=null&&(d=u(o)),v):u},v.context=function(w){return arguments.length?(w==null?o=d=null:d=u(o=w),v):o},v}function shapeArea(e,t,n){var o=null,u=constant$1(!0),d=null,f=curveLinear,v=null,w=withPath(E);e=typeof e=="function"?e:e===void 0?x$1:constant$1(+e),t=typeof t=="function"?t:constant$1(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?y:constant$1(+n);function E(_){var D,O,M,N=(_=array(_)).length,I,B=!1,V,j=new Array(N),q=new Array(N);for(d==null&&(v=f(V=w())),D=0;D<=N;++D){if(!(D<N&&u(I=_[D],D,_))===B)if(B=!B)O=D,v.areaStart(),v.lineStart();else{for(v.lineEnd(),v.lineStart(),M=D-1;M>=O;--M)v.point(j[M],q[M]);v.lineEnd(),v.areaEnd()}B&&(j[D]=+e(I,D,_),q[D]=+t(I,D,_),v.point(o?+o(I,D,_):j[D],n?+n(I,D,_):q[D]))}if(V)return v=null,V+""||null}function C(){return shapeLine().defined(u).curve(f).context(d)}return E.x=function(_){return arguments.length?(e=typeof _=="function"?_:constant$1(+_),o=null,E):e},E.x0=function(_){return arguments.length?(e=typeof _=="function"?_:constant$1(+_),E):e},E.x1=function(_){return arguments.length?(o=_==null?null:typeof _=="function"?_:constant$1(+_),E):o},E.y=function(_){return arguments.length?(t=typeof _=="function"?_:constant$1(+_),n=null,E):t},E.y0=function(_){return arguments.length?(t=typeof _=="function"?_:constant$1(+_),E):t},E.y1=function(_){return arguments.length?(n=_==null?null:typeof _=="function"?_:constant$1(+_),E):n},E.lineX0=E.lineY0=function(){return C().x(e).y(t)},E.lineY1=function(){return C().x(e).y(n)},E.lineX1=function(){return C().x(o).y(t)},E.defined=function(_){return arguments.length?(u=typeof _=="function"?_:constant$1(!!_),E):u},E.curve=function(_){return arguments.length?(f=_,d!=null&&(v=f(d)),E):f},E.context=function(_){return arguments.length?(_==null?d=v=null:v=f(d=_),E):d},E}class Bump{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function bumpX(e){return new Bump(e,!0)}function bumpY(e){return new Bump(e,!1)}const symbolCircle={draw(e,t){const n=sqrt$1(t/pi$1);e.moveTo(n,0),e.arc(0,0,n,0,tau$1)}},symbolCross={draw(e,t){const n=sqrt$1(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},tan30=sqrt$1(1/3),tan30_2=tan30*2,symbolDiamond={draw(e,t){const n=sqrt$1(t/tan30_2),o=n*tan30;e.moveTo(0,-n),e.lineTo(o,0),e.lineTo(0,n),e.lineTo(-o,0),e.closePath()}},symbolSquare={draw(e,t){const n=sqrt$1(t),o=-n/2;e.rect(o,o,n,n)}},ka=.8908130915292852,kr=sin(pi$1/10)/sin(7*pi$1/10),kx=sin(tau$1/10)*kr,ky=-cos(tau$1/10)*kr,symbolStar={draw(e,t){const n=sqrt$1(t*ka),o=kx*n,u=ky*n;e.moveTo(0,-n),e.lineTo(o,u);for(let d=1;d<5;++d){const f=tau$1*d/5,v=cos(f),w=sin(f);e.lineTo(w*n,-v*n),e.lineTo(v*o-w*u,w*o+v*u)}e.closePath()}},sqrt3=sqrt$1(3),symbolTriangle={draw(e,t){const n=-sqrt$1(t/(sqrt3*3));e.moveTo(0,n*2),e.lineTo(-sqrt3*n,-n),e.lineTo(sqrt3*n,-n),e.closePath()}},c$1=-.5,s=sqrt$1(3)/2,k=1/sqrt$1(12),a$1=(k/2+1)*3,symbolWye={draw(e,t){const n=sqrt$1(t/a$1),o=n/2,u=n*k,d=o,f=n*k+n,v=-d,w=f;e.moveTo(o,u),e.lineTo(d,f),e.lineTo(v,w),e.lineTo(c$1*o-s*u,s*o+c$1*u),e.lineTo(c$1*d-s*f,s*d+c$1*f),e.lineTo(c$1*v-s*w,s*v+c$1*w),e.lineTo(c$1*o+s*u,c$1*u-s*o),e.lineTo(c$1*d+s*f,c$1*f-s*d),e.lineTo(c$1*v+s*w,c$1*w-s*v),e.closePath()}};function Symbol$1(e,t){let n=null,o=withPath(u);e=typeof e=="function"?e:constant$1(e||symbolCircle),t=typeof t=="function"?t:constant$1(t===void 0?64:+t);function u(){let d;if(n||(n=d=o()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),d)return n=null,d+""||null}return u.type=function(d){return arguments.length?(e=typeof d=="function"?d:constant$1(d),u):e},u.size=function(d){return arguments.length?(t=typeof d=="function"?d:constant$1(+d),u):t},u.context=function(d){return arguments.length?(n=d??null,u):n},u}function noop$7(){}function point$2(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Basis(e){this._context=e}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$2(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function curveBasis(e){return new Basis(e)}function BasisClosed(e){this._context=e}BasisClosed.prototype={areaStart:noop$7,areaEnd:noop$7,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:point$2(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function curveBasisClosed(e){return new BasisClosed(e)}function BasisOpen(e){this._context=e}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,o=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,o):this._context.moveTo(n,o);break;case 3:this._point=4;default:point$2(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function curveBasisOpen(e){return new BasisOpen(e)}function LinearClosed(e){this._context=e}LinearClosed.prototype={areaStart:noop$7,areaEnd:noop$7,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function curveLinearClosed(e){return new LinearClosed(e)}function sign(e){return e<0?-1:1}function slope3(e,t,n){var o=e._x1-e._x0,u=t-e._x1,d=(e._y1-e._y0)/(o||u<0&&-0),f=(n-e._y1)/(u||o<0&&-0),v=(d*u+f*o)/(o+u);return(sign(d)+sign(f))*Math.min(Math.abs(d),Math.abs(f),.5*Math.abs(v))||0}function slope2(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function point$1(e,t,n){var o=e._x0,u=e._y0,d=e._x1,f=e._y1,v=(d-o)/3;e._context.bezierCurveTo(o+v,u+v*t,d-v,f-v*n,d,f)}function MonotoneX(e){this._context=e}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$1(this,this._t0,slope2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,point$1(this,slope2(this,n=slope3(this,e,t)),n);break;default:point$1(this,this._t0,n=slope3(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function MonotoneY(e){this._context=new ReflectContext(e)}(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(e,t){MonotoneX.prototype.point.call(this,t,e)};function ReflectContext(e){this._context=e}ReflectContext.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,o,u,d){this._context.bezierCurveTo(t,e,o,n,d,u)}};function monotoneX(e){return new MonotoneX(e)}function monotoneY(e){return new MonotoneY(e)}function Natural(e){this._context=e}Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var o=controlPoints(e),u=controlPoints(t),d=0,f=1;f<n;++d,++f)this._context.bezierCurveTo(o[0][d],u[0][d],o[1][d],u[1][d],e[f],t[f]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function controlPoints(e){var t,n=e.length-1,o,u=new Array(n),d=new Array(n),f=new Array(n);for(u[0]=0,d[0]=2,f[0]=e[0]+2*e[1],t=1;t<n-1;++t)u[t]=1,d[t]=4,f[t]=4*e[t]+2*e[t+1];for(u[n-1]=2,d[n-1]=7,f[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)o=u[t]/d[t-1],d[t]-=o,f[t]-=o*f[t-1];for(u[n-1]=f[n-1]/d[n-1],t=n-2;t>=0;--t)u[t]=(f[t]-u[t+1])/d[t];for(d[n-1]=(e[n]+u[n-1])/2,t=0;t<n-1;++t)d[t]=2*e[t+1]-u[t+1];return[u,d]}function curveNatural(e){return new Natural(e)}function Step(e,t){this._context=e,this._t=t}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function curveStep(e){return new Step(e,.5)}function stepBefore(e){return new Step(e,0)}function stepAfter(e){return new Step(e,1)}function stackOffsetNone(e,t){if((f=e.length)>1)for(var n=1,o,u,d=e[t[0]],f,v=d.length;n<f;++n)for(u=d,d=e[t[n]],o=0;o<v;++o)d[o][1]+=d[o][0]=isNaN(u[o][1])?u[o][0]:u[o][1]}function stackOrderNone(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function stackValue(e,t){return e[t]}function stackSeries(e){const t=[];return t.key=e,t}function shapeStack(){var e=constant$1([]),t=stackOrderNone,n=stackOffsetNone,o=stackValue;function u(d){var f=Array.from(e.apply(this,arguments),stackSeries),v,w=f.length,E=-1,C;for(const _ of d)for(v=0,++E;v<w;++v)(f[v][E]=[0,+o(_,f[v].key,E,d)]).data=_;for(v=0,C=array(t(f));v<w;++v)f[C[v]].index=v;return n(f,C),f}return u.keys=function(d){return arguments.length?(e=typeof d=="function"?d:constant$1(Array.from(d)),u):e},u.value=function(d){return arguments.length?(o=typeof d=="function"?d:constant$1(+d),u):o},u.order=function(d){return arguments.length?(t=d==null?stackOrderNone:typeof d=="function"?d:constant$1(Array.from(d)),u):t},u.offset=function(d){return arguments.length?(n=d??stackOffsetNone,u):n},u}function stackOffsetExpand(e,t){if((o=e.length)>0){for(var n,o,u=0,d=e[0].length,f;u<d;++u){for(f=n=0;n<o;++n)f+=e[n][u][1]||0;if(f)for(n=0;n<o;++n)e[n][u][1]/=f}stackOffsetNone(e,t)}}function stackOffsetSilhouette(e,t){if((u=e.length)>0){for(var n=0,o=e[t[0]],u,d=o.length;n<d;++n){for(var f=0,v=0;f<u;++f)v+=e[f][n][1]||0;o[n][1]+=o[n][0]=-v/2}stackOffsetNone(e,t)}}function stackOffsetWiggle(e,t){if(!(!((f=e.length)>0)||!((d=(u=e[t[0]]).length)>0))){for(var n=0,o=1,u,d,f;o<d;++o){for(var v=0,w=0,E=0;v<f;++v){for(var C=e[t[v]],_=C[o][1]||0,D=C[o-1][1]||0,O=(_-D)/2,M=0;M<v;++M){var N=e[t[M]],I=N[o][1]||0,B=N[o-1][1]||0;O+=I-B}w+=_,E+=O*_}u[o-1][1]+=u[o-1][0]=n,w&&(n-=E/w)}u[o-1][1]+=u[o-1][0]=n,stackOffsetNone(e,t)}}var get$2={},isUnsafeProperty={},hasRequiredIsUnsafeProperty;function requireIsUnsafeProperty(){return hasRequiredIsUnsafeProperty||(hasRequiredIsUnsafeProperty=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(isUnsafeProperty)),isUnsafeProperty}var isDeepKey={},hasRequiredIsDeepKey;function requireIsDeepKey(){return hasRequiredIsDeepKey||(hasRequiredIsDeepKey=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(isDeepKey)),isDeepKey}var toKey={},hasRequiredToKey;function requireToKey(){return hasRequiredToKey||(hasRequiredToKey=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(toKey)),toKey}var toPath={},toString$2={},hasRequiredToString;function requireToString(){return hasRequiredToString||(hasRequiredToString=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(t).join(",");const o=String(n);return o==="0"&&Object.is(Number(n),-0)?"-0":o}e.toString=t})(toString$2)),toString$2}var hasRequiredToPath;function requireToPath(){return hasRequiredToPath||(hasRequiredToPath=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireToString(),n=requireToKey();function o(u){if(Array.isArray(u))return u.map(n.toKey);if(typeof u=="symbol")return[u];u=t.toString(u);const d=[],f=u.length;if(f===0)return d;let v=0,w="",E="",C=!1;for(u.charCodeAt(0)===46&&(d.push(""),v++);v<f;){const _=u[v];E?_==="\\"&&v+1<f?(v++,w+=u[v]):_===E?E="":w+=_:C?_==='"'||_==="'"?E=_:_==="]"?(C=!1,d.push(w),w=""):w+=_:_==="["?(C=!0,w&&(d.push(w),w="")):_==="."?w&&(d.push(w),w=""):w+=_,v++}return w&&d.push(w),d}e.toPath=o})(toPath)),toPath}var hasRequiredGet$1;function requireGet$1(){return hasRequiredGet$1||(hasRequiredGet$1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIsUnsafeProperty(),n=requireIsDeepKey(),o=requireToKey(),u=requireToPath();function d(v,w,E){if(v==null)return E;switch(typeof w){case"string":{if(t.isUnsafeProperty(w))return E;const C=v[w];return C===void 0?n.isDeepKey(w)?d(v,u.toPath(w),E):E:C}case"number":case"symbol":{typeof w=="number"&&(w=o.toKey(w));const C=v[w];return C===void 0?E:C}default:{if(Array.isArray(w))return f(v,w,E);if(Object.is(w?.valueOf(),-0)?w="-0":w=String(w),t.isUnsafeProperty(w))return E;const C=v[w];return C===void 0?E:C}}}function f(v,w,E){if(w.length===0)return E;let C=v;for(let _=0;_<w.length;_++){if(C==null||t.isUnsafeProperty(w[_]))return E;C=C[w[_]]}return C===void 0?E:C}e.get=d})(get$2)),get$2}var get$1,hasRequiredGet;function requireGet(){return hasRequiredGet||(hasRequiredGet=1,get$1=requireGet$1().get),get$1}var getExports=requireGet();const get=getDefaultExportFromCjs(getExports);var mathSign=e=>e===0?0:e>0?1:-1,isNan=e=>typeof e=="number"&&e!=+e,isPercent=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,isNumber$1=e=>(typeof e=="number"||e instanceof Number)&&!isNan(e),isNumOrStr=e=>isNumber$1(e)||typeof e=="string",idCounter$2=0,uniqueId=e=>{var t=++idCounter$2;return"".concat(e||"").concat(t)},getPercentValue=function(t,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!isNumber$1(t)&&typeof t!="string")return o;var d;if(isPercent(t)){if(n==null)return o;var f=t.indexOf("%");d=n*parseFloat(t.slice(0,f))/100}else d=+t;return isNan(d)&&(d=o),u&&n!=null&&d>n&&(d=n),d},hasDuplicate=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},o=0;o<t;o++)if(!n[e[o]])n[e[o]]=!0;else return!0;return!1};function interpolate$2(e,t,n){return isNumber$1(e)&&isNumber$1(t)?e+n*(t-e):t}function findEntryInArray(e,t,n){if(!(!e||!e.length))return e.find(o=>o&&(typeof t=="function"?t(o):get(o,t))===n)}var isNullish$1=e=>e===null||typeof e>"u",upperFirst=e=>isNullish$1(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),_excluded$b=["type","size","sizeType"];function _extends$f(){return _extends$f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$f.apply(null,arguments)}function ownKeys$r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$r(Object(n),!0).forEach(function(o){_defineProperty$s(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$r(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$s(e,t,n){return(t=_toPropertyKey$s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$s(e){var t=_toPrimitive$s(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$s(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _objectWithoutProperties$b(e,t){if(e==null)return{};var n,o,u=_objectWithoutPropertiesLoose$b(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(o=0;o<d.length;o++)n=d[o],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(u[n]=e[n])}return u}function _objectWithoutPropertiesLoose$b(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;n[o]=e[o]}return n}var symbolFactories={symbolCircle,symbolCross,symbolDiamond,symbolSquare,symbolStar,symbolTriangle,symbolWye},RADIAN$1=Math.PI/180,getSymbolFactory=e=>{var t="symbol".concat(upperFirst(e));return symbolFactories[t]||symbolCircle},calculateAreaSize=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var o=18*RADIAN$1;return 1.25*e*e*(Math.tan(o)-Math.tan(o*2)*Math.tan(o)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},registerSymbol=(e,t)=>{symbolFactories["symbol".concat(upperFirst(e))]=t},Symbols=e=>{var{type:t="circle",size:n=64,sizeType:o="area"}=e,u=_objectWithoutProperties$b(e,_excluded$b),d=_objectSpread$r(_objectSpread$r({},u),{},{type:t,size:n,sizeType:o}),f="circle";typeof t=="string"&&(f=t);var v=()=>{var D=getSymbolFactory(f),O=Symbol$1().type(D).size(calculateAreaSize(n,o,f)),M=O();if(M!==null)return M},{className:w,cx:E,cy:C}=d,_=svgPropertiesAndEvents(d);return E===+E&&C===+C&&n===+n?reactExports.createElement("path",_extends$f({},_,{className:clsx("recharts-symbols",w),transform:"translate(".concat(E,", ").concat(C,")"),d:v()})):null};Symbols.registerSymbol=registerSymbol;var adaptEventHandlers=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(reactExports.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var o={};return Object.keys(n).forEach(u=>{isEventKey(u)&&(o[u]=(d=>n[u](n,d)))}),o},getEventHandlerOfChild=(e,t,n)=>o=>(e(t,n,o),null),adaptEventsOfChild=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var o=null;return Object.keys(e).forEach(u=>{var d=e[u];isEventKey(u)&&typeof d=="function"&&(o||(o={}),o[u]=getEventHandlerOfChild(d,t,n))}),o},uniqBy$3={},uniqBy$2={},hasRequiredUniqBy$2;function requireUniqBy$2(){return hasRequiredUniqBy$2||(hasRequiredUniqBy$2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,o){const u=new Map;for(let d=0;d<n.length;d++){const f=n[d],v=o(f);u.has(v)||u.set(v,f)}return Array.from(u.values())}e.uniqBy=t})(uniqBy$2)),uniqBy$2}var identity$4={},hasRequiredIdentity;function requireIdentity(){return hasRequiredIdentity||(hasRequiredIdentity=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(identity$4)),identity$4}var isArrayLikeObject={},isArrayLike={},isLength={},hasRequiredIsLength;function requireIsLength(){return hasRequiredIsLength||(hasRequiredIsLength=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(isLength)),isLength}var hasRequiredIsArrayLike;function requireIsArrayLike(){return hasRequiredIsArrayLike||(hasRequiredIsArrayLike=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIsLength();function n(o){return o!=null&&typeof o!="function"&&t.isLength(o.length)}e.isArrayLike=n})(isArrayLike)),isArrayLike}var isObjectLike={},hasRequiredIsObjectLike;function requireIsObjectLike(){return hasRequiredIsObjectLike||(hasRequiredIsObjectLike=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(isObjectLike)),isObjectLike}var hasRequiredIsArrayLikeObject;function requireIsArrayLikeObject(){return hasRequiredIsArrayLikeObject||(hasRequiredIsArrayLikeObject=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIsArrayLike(),n=requireIsObjectLike();function o(u){return n.isObjectLike(u)&&t.isArrayLike(u)}e.isArrayLikeObject=o})(isArrayLikeObject)),isArrayLikeObject}var iteratee={},property={},hasRequiredProperty;function requireProperty(){return hasRequiredProperty||(hasRequiredProperty=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireGet$1();function n(o){return function(u){return t.get(u,o)}}e.property=n})(property)),property}var matches={},isMatch={},isMatchWith={},isObject$2={},hasRequiredIsObject;function requireIsObject(){return hasRequiredIsObject||(hasRequiredIsObject=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(isObject$2)),isObject$2}var isPrimitive={},hasRequiredIsPrimitive;function requireIsPrimitive(){return hasRequiredIsPrimitive||(hasRequiredIsPrimitive=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(isPrimitive)),isPrimitive}var eq={},hasRequiredEq;function requireEq(){return hasRequiredEq||(hasRequiredEq=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,o){return n===o||Number.isNaN(n)&&Number.isNaN(o)}e.eq=t})(eq)),eq}var hasRequiredIsMatchWith;function requireIsMatchWith(){return hasRequiredIsMatchWith||(hasRequiredIsMatchWith=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIsObject(),n=requireIsPrimitive(),o=requireEq();function u(C,_,D){return typeof D!="function"?u(C,_,()=>{}):d(C,_,function O(M,N,I,B,V,j){const q=D(M,N,I,B,V,j);return q!==void 0?!!q:d(M,N,O,j)},new Map)}function d(C,_,D,O){if(_===C)return!0;switch(typeof _){case"object":return f(C,_,D,O);case"function":return Object.keys(_).length>0?d(C,{..._},D,O):o.eq(C,_);default:return t.isObject(C)?typeof _=="string"?_==="":!0:o.eq(C,_)}}function f(C,_,D,O){if(_==null)return!0;if(Array.isArray(_))return w(C,_,D,O);if(_ instanceof Map)return v(C,_,D,O);if(_ instanceof Set)return E(C,_,D,O);const M=Object.keys(_);if(C==null)return M.length===0;if(M.length===0)return!0;if(O?.has(_))return O.get(_)===C;O?.set(_,C);try{for(let N=0;N<M.length;N++){const I=M[N];if(!n.isPrimitive(C)&&!(I in C)||_[I]===void 0&&C[I]!==void 0||_[I]===null&&C[I]!==null||!D(C[I],_[I],I,C,_,O))return!1}return!0}finally{O?.delete(_)}}function v(C,_,D,O){if(_.size===0)return!0;if(!(C instanceof Map))return!1;for(const[M,N]of _.entries()){const I=C.get(M);if(D(I,N,M,C,_,O)===!1)return!1}return!0}function w(C,_,D,O){if(_.length===0)return!0;if(!Array.isArray(C))return!1;const M=new Set;for(let N=0;N<_.length;N++){const I=_[N];let B=!1;for(let V=0;V<C.length;V++){if(M.has(V))continue;const j=C[V];let q=!1;if(D(j,I,N,C,_,O)&&(q=!0),q){M.add(V),B=!0;break}}if(!B)return!1}return!0}function E(C,_,D,O){return _.size===0?!0:C instanceof Set?w([...C],[..._],D,O):!1}e.isMatchWith=u,e.isSetMatch=E})(isMatchWith)),isMatchWith}var hasRequiredIsMatch;function requireIsMatch(){return hasRequiredIsMatch||(hasRequiredIsMatch=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIsMatchWith();function n(o,u){return t.isMatchWith(o,u,()=>{})}e.isMatch=n})(isMatch)),isMatch}var cloneDeep$1={},cloneDeepWith$1={},getSymbols={},hasRequiredGetSymbols;function requireGetSymbols(){return hasRequiredGetSymbols||(hasRequiredGetSymbols=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(o=>Object.prototype.propertyIsEnumerable.call(n,o))}e.getSymbols=t})(getSymbols)),getSymbols}var getTag={},hasRequiredGetTag;function requireGetTag(){return hasRequiredGetTag||(hasRequiredGetTag=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(getTag)),getTag}var tags={},hasRequiredTags;function requireTags(){return hasRequiredTags||(hasRequiredTags=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",o="[object Number]",u="[object Boolean]",d="[object Arguments]",f="[object Symbol]",v="[object Date]",w="[object Map]",E="[object Set]",C="[object Array]",_="[object Function]",D="[object ArrayBuffer]",O="[object Object]",M="[object Error]",N="[object DataView]",I="[object Uint8Array]",B="[object Uint8ClampedArray]",V="[object Uint16Array]",j="[object Uint32Array]",q="[object BigUint64Array]",z="[object Int8Array]",$="[object Int16Array]",ee="[object Int32Array]",ie="[object BigInt64Array]",ae="[object Float32Array]",pe="[object Float64Array]";e.argumentsTag=d,e.arrayBufferTag=D,e.arrayTag=C,e.bigInt64ArrayTag=ie,e.bigUint64ArrayTag=q,e.booleanTag=u,e.dataViewTag=N,e.dateTag=v,e.errorTag=M,e.float32ArrayTag=ae,e.float64ArrayTag=pe,e.functionTag=_,e.int16ArrayTag=$,e.int32ArrayTag=ee,e.int8ArrayTag=z,e.mapTag=w,e.numberTag=o,e.objectTag=O,e.regexpTag=t,e.setTag=E,e.stringTag=n,e.symbolTag=f,e.uint16ArrayTag=V,e.uint32ArrayTag=j,e.uint8ArrayTag=I,e.uint8ClampedArrayTag=B})(tags)),tags}var isTypedArray$1={},hasRequiredIsTypedArray;function requireIsTypedArray(){return hasRequiredIsTypedArray||(hasRequiredIsTypedArray=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(isTypedArray$1)),isTypedArray$1}var hasRequiredCloneDeepWith$1;function requireCloneDeepWith$1(){return hasRequiredCloneDeepWith$1||(hasRequiredCloneDeepWith$1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireGetSymbols(),n=requireGetTag(),o=requireTags(),u=requireIsPrimitive(),d=requireIsTypedArray();function f(C,_){return v(C,void 0,C,new Map,_)}function v(C,_,D,O=new Map,M=void 0){const N=M?.(C,_,D,O);if(N!==void 0)return N;if(u.isPrimitive(C))return C;if(O.has(C))return O.get(C);if(Array.isArray(C)){const I=new Array(C.length);O.set(C,I);for(let B=0;B<C.length;B++)I[B]=v(C[B],B,D,O,M);return Object.hasOwn(C,"index")&&(I.index=C.index),Object.hasOwn(C,"input")&&(I.input=C.input),I}if(C instanceof Date)return new Date(C.getTime());if(C instanceof RegExp){const I=new RegExp(C.source,C.flags);return I.lastIndex=C.lastIndex,I}if(C instanceof Map){const I=new Map;O.set(C,I);for(const[B,V]of C)I.set(B,v(V,B,D,O,M));return I}if(C instanceof Set){const I=new Set;O.set(C,I);for(const B of C)I.add(v(B,void 0,D,O,M));return I}if(typeof Buffer<"u"&&Buffer.isBuffer(C))return C.subarray();if(d.isTypedArray(C)){const I=new(Object.getPrototypeOf(C)).constructor(C.length);O.set(C,I);for(let B=0;B<C.length;B++)I[B]=v(C[B],B,D,O,M);return I}if(C instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&C instanceof SharedArrayBuffer)return C.slice(0);if(C instanceof DataView){const I=new DataView(C.buffer.slice(0),C.byteOffset,C.byteLength);return O.set(C,I),w(I,C,D,O,M),I}if(typeof File<"u"&&C instanceof File){const I=new File([C],C.name,{type:C.type});return O.set(C,I),w(I,C,D,O,M),I}if(typeof Blob<"u"&&C instanceof Blob){const I=new Blob([C],{type:C.type});return O.set(C,I),w(I,C,D,O,M),I}if(C instanceof Error){const I=new C.constructor;return O.set(C,I),I.message=C.message,I.name=C.name,I.stack=C.stack,I.cause=C.cause,w(I,C,D,O,M),I}if(C instanceof Boolean){const I=new Boolean(C.valueOf());return O.set(C,I),w(I,C,D,O,M),I}if(C instanceof Number){const I=new Number(C.valueOf());return O.set(C,I),w(I,C,D,O,M),I}if(C instanceof String){const I=new String(C.valueOf());return O.set(C,I),w(I,C,D,O,M),I}if(typeof C=="object"&&E(C)){const I=Object.create(Object.getPrototypeOf(C));return O.set(C,I),w(I,C,D,O,M),I}return C}function w(C,_,D=C,O,M){const N=[...Object.keys(_),...t.getSymbols(_)];for(let I=0;I<N.length;I++){const B=N[I],V=Object.getOwnPropertyDescriptor(C,B);(V==null||V.writable)&&(C[B]=v(_[B],B,D,O,M))}}function E(C){switch(n.getTag(C)){case o.argumentsTag:case o.arrayTag:case o.arrayBufferTag:case o.dataViewTag:case o.booleanTag:case o.dateTag:case o.float32ArrayTag:case o.float64ArrayTag:case o.int8ArrayTag:case o.int16ArrayTag:case o.int32ArrayTag:case o.mapTag:case o.numberTag:case o.objectTag:case o.regexpTag:case o.setTag:case o.stringTag:case o.symbolTag:case o.uint8ArrayTag:case o.uint8ClampedArrayTag:case o.uint16ArrayTag:case o.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=f,e.cloneDeepWithImpl=v,e.copyProperties=w})(cloneDeepWith$1)),cloneDeepWith$1}var hasRequiredCloneDeep$1;function requireCloneDeep$1(){return hasRequiredCloneDeep$1||(hasRequiredCloneDeep$1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireCloneDeepWith$1();function n(o){return t.cloneDeepWithImpl(o,void 0,o,new Map,void 0)}e.cloneDeep=n})(cloneDeep$1)),cloneDeep$1}var hasRequiredMatches;function requireMatches(){return hasRequiredMatches||(hasRequiredMatches=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIsMatch(),n=requireCloneDeep$1();function o(u){return u=n.cloneDeep(u),d=>t.isMatch(d,u)}e.matches=o})(matches)),matches}var matchesProperty={},cloneDeep={},cloneDeepWith={},hasRequiredCloneDeepWith;function requireCloneDeepWith(){return hasRequiredCloneDeepWith||(hasRequiredCloneDeepWith=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireCloneDeepWith$1(),n=requireTags();function o(u,d){return t.cloneDeepWith(u,(f,v,w,E)=>{const C=d?.(f,v,w,E);if(C!==void 0)return C;if(typeof u=="object")switch(Object.prototype.toString.call(u)){case n.numberTag:case n.stringTag:case n.booleanTag:{const _=new u.constructor(u?.valueOf());return t.copyProperties(_,u),_}case n.argumentsTag:{const _={};return t.copyProperties(_,u),_.length=u.length,_[Symbol.iterator]=u[Symbol.iterator],_}default:return}})}e.cloneDeepWith=o})(cloneDeepWith)),cloneDeepWith}var hasRequiredCloneDeep;function requireCloneDeep(){return hasRequiredCloneDeep||(hasRequiredCloneDeep=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireCloneDeepWith();function n(o){return t.cloneDeepWith(o)}e.cloneDeep=n})(cloneDeep)),cloneDeep}var has$1={},isIndex={},hasRequiredIsIndex;function requireIsIndex(){return hasRequiredIsIndex||(hasRequiredIsIndex=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(o,u=Number.MAX_SAFE_INTEGER){switch(typeof o){case"number":return Number.isInteger(o)&&o>=0&&o<u;case"symbol":return!1;case"string":return t.test(o)}}e.isIndex=n})(isIndex)),isIndex}var isArguments={},hasRequiredIsArguments;function requireIsArguments(){return hasRequiredIsArguments||(hasRequiredIsArguments=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireGetTag();function n(o){return o!==null&&typeof o=="object"&&t.getTag(o)==="[object Arguments]"}e.isArguments=n})(isArguments)),isArguments}var hasRequiredHas;function requireHas(){return hasRequiredHas||(hasRequiredHas=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIsDeepKey(),n=requireIsIndex(),o=requireIsArguments(),u=requireToPath();function d(f,v){let w;if(Array.isArray(v)?w=v:typeof v=="string"&&t.isDeepKey(v)&&f?.[v]==null?w=u.toPath(v):w=[v],w.length===0)return!1;let E=f;for(let C=0;C<w.length;C++){const _=w[C];if((E==null||!Object.hasOwn(E,_))&&!((Array.isArray(E)||o.isArguments(E))&&n.isIndex(_)&&_<E.length))return!1;E=E[_]}return!0}e.has=d})(has$1)),has$1}var hasRequiredMatchesProperty;function requireMatchesProperty(){return hasRequiredMatchesProperty||(hasRequiredMatchesProperty=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIsMatch(),n=requireToKey(),o=requireCloneDeep(),u=requireGet$1(),d=requireHas();function f(v,w){switch(typeof v){case"object":{Object.is(v?.valueOf(),-0)&&(v="-0");break}case"number":{v=n.toKey(v);break}}return w=o.cloneDeep(w),function(E){const C=u.get(E,v);return C===void 0?d.has(E,v):w===void 0?C===void 0:t.isMatch(C,w)}}e.matchesProperty=f})(matchesProperty)),matchesProperty}var hasRequiredIteratee;function requireIteratee(){return hasRequiredIteratee||(hasRequiredIteratee=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIdentity(),n=requireProperty(),o=requireMatches(),u=requireMatchesProperty();function d(f){if(f==null)return t.identity;switch(typeof f){case"function":return f;case"object":return Array.isArray(f)&&f.length===2?u.matchesProperty(f[0],f[1]):o.matches(f);case"string":case"symbol":case"number":return n.property(f)}}e.iteratee=d})(iteratee)),iteratee}var hasRequiredUniqBy$1;function requireUniqBy$1(){return hasRequiredUniqBy$1||(hasRequiredUniqBy$1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireUniqBy$2(),n=requireIdentity(),o=requireIsArrayLikeObject(),u=requireIteratee();function d(f,v=n.identity){return o.isArrayLikeObject(f)?t.uniqBy(Array.from(f),u.iteratee(v)):[]}e.uniqBy=d})(uniqBy$3)),uniqBy$3}var uniqBy$1,hasRequiredUniqBy;function requireUniqBy(){return hasRequiredUniqBy||(hasRequiredUniqBy=1,uniqBy$1=requireUniqBy$1().uniqBy),uniqBy$1}var uniqByExports=requireUniqBy();const uniqBy=getDefaultExportFromCjs(uniqByExports);function getUniqPayload(e,t,n){return t===!0?uniqBy(e,n):typeof t=="function"?uniqBy(e,t):e}var withSelector$1={exports:{}},withSelector_production={},shim={exports:{}},useSyncExternalStoreShim_production={};var hasRequiredUseSyncExternalStoreShim_production;function requireUseSyncExternalStoreShim_production(){if(hasRequiredUseSyncExternalStoreShim_production)return useSyncExternalStoreShim_production;hasRequiredUseSyncExternalStoreShim_production=1;var e=requireReact();function t(_,D){return _===D&&(_!==0||1/_===1/D)||_!==_&&D!==D}var n=typeof Object.is=="function"?Object.is:t,o=e.useState,u=e.useEffect,d=e.useLayoutEffect,f=e.useDebugValue;function v(_,D){var O=D(),M=o({inst:{value:O,getSnapshot:D}}),N=M[0].inst,I=M[1];return d(function(){N.value=O,N.getSnapshot=D,w(N)&&I({inst:N})},[_,O,D]),u(function(){return w(N)&&I({inst:N}),_(function(){w(N)&&I({inst:N})})},[_]),f(O),O}function w(_){var D=_.getSnapshot;_=_.value;try{var O=D();return!n(_,O)}catch{return!0}}function E(_,D){return D()}var C=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?E:v;return useSyncExternalStoreShim_production.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:C,useSyncExternalStoreShim_production}var hasRequiredShim;function requireShim(){return hasRequiredShim||(hasRequiredShim=1,shim.exports=requireUseSyncExternalStoreShim_production()),shim.exports}var hasRequiredWithSelector_production;function requireWithSelector_production(){if(hasRequiredWithSelector_production)return withSelector_production;hasRequiredWithSelector_production=1;var e=requireReact(),t=requireShim();function n(E,C){return E===C&&(E!==0||1/E===1/C)||E!==E&&C!==C}var o=typeof Object.is=="function"?Object.is:n,u=t.useSyncExternalStore,d=e.useRef,f=e.useEffect,v=e.useMemo,w=e.useDebugValue;return withSelector_production.useSyncExternalStoreWithSelector=function(E,C,_,D,O){var M=d(null);if(M.current===null){var N={hasValue:!1,value:null};M.current=N}else N=M.current;M=v(function(){function B($){if(!V){if(V=!0,j=$,$=D($),O!==void 0&&N.hasValue){var ee=N.value;if(O(ee,$))return q=ee}return q=$}if(ee=q,o(j,$))return ee;var ie=D($);return O!==void 0&&O(ee,ie)?(j=$,ee):(j=$,q=ie)}var V=!1,j,q,z=_===void 0?null:_;return[function(){return B(C())},z===null?void 0:function(){return B(z())}]},[C,_,D,O]);var I=u(E,M[0],M[1]);return f(function(){N.hasValue=!0,N.value=I},[I]),w(I),I},withSelector_production}var hasRequiredWithSelector$1;function requireWithSelector$1(){return hasRequiredWithSelector$1||(hasRequiredWithSelector$1=1,withSelector$1.exports=requireWithSelector_production()),withSelector$1.exports}var withSelectorExports=requireWithSelector$1(),RechartsReduxContext=reactExports.createContext(null),noopDispatch=e=>e,useAppDispatch=()=>{var e=reactExports.useContext(RechartsReduxContext);return e?e.store.dispatch:noopDispatch},noop$6=()=>{},addNestedSubNoop=()=>noop$6,refEquality=(e,t)=>e===t;function useAppSelector(e){var t=reactExports.useContext(RechartsReduxContext);return withSelectorExports.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:addNestedSubNoop,t?t.store.getState:noop$6,t?t.store.getState:noop$6,t?e:noop$6,refEquality)}function assertIsFunction(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function assertIsObject(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function assertIsArrayOfFunctions(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(o=>typeof o=="function"?`function ${o.name||"unnamed"}()`:typeof o).join(", ");throw new TypeError(`${t}[${n}]`)}}var ensureIsArray=e=>Array.isArray(e)?e:[e];function getDependencies(e){const t=Array.isArray(e[0])?e[0]:e;return assertIsArrayOfFunctions(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function collectInputSelectorResults(e,t){const n=[],{length:o}=e;for(let u=0;u<o;u++)n.push(e[u].apply(null,t));return n}var StrongRef=class{constructor(e){this.value=e}deref(){return this.value}},Ref=typeof WeakRef<"u"?WeakRef:StrongRef,UNTERMINATED=0,TERMINATED=1;function createCacheNode(){return{s:UNTERMINATED,v:void 0,o:null,p:null}}function weakMapMemoize(e,t={}){let n=createCacheNode();const{resultEqualityCheck:o}=t;let u,d=0;function f(){let v=n;const{length:w}=arguments;for(let _=0,D=w;_<D;_++){const O=arguments[_];if(typeof O=="function"||typeof O=="object"&&O!==null){let M=v.o;M===null&&(v.o=M=new WeakMap);const N=M.get(O);N===void 0?(v=createCacheNode(),M.set(O,v)):v=N}else{let M=v.p;M===null&&(v.p=M=new Map);const N=M.get(O);N===void 0?(v=createCacheNode(),M.set(O,v)):v=N}}const E=v;let C;if(v.s===TERMINATED)C=v.v;else if(C=e.apply(null,arguments),d++,o){const _=u?.deref?.()??u;_!=null&&o(_,C)&&(C=_,d!==0&&d--),u=typeof C=="object"&&C!==null||typeof C=="function"?new Ref(C):C}return E.s=TERMINATED,E.v=C,C}return f.clearCache=()=>{n=createCacheNode(),f.resetResultsCount()},f.resultsCount=()=>d,f.resetResultsCount=()=>{d=0},f}function createSelectorCreator(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,o=(...u)=>{let d=0,f=0,v,w={},E=u.pop();typeof E=="object"&&(w=E,E=u.pop()),assertIsFunction(E,`createSelector expects an output function after the inputs, but received: [${typeof E}]`);const C={...n,...w},{memoize:_,memoizeOptions:D=[],argsMemoize:O=weakMapMemoize,argsMemoizeOptions:M=[]}=C,N=ensureIsArray(D),I=ensureIsArray(M),B=getDependencies(u),V=_(function(){return d++,E.apply(null,arguments)},...N),j=O(function(){f++;const z=collectInputSelectorResults(B,arguments);return v=V.apply(null,z),v},...I);return Object.assign(j,{resultFunc:E,memoizedResultFunc:V,dependencies:B,dependencyRecomputations:()=>f,resetDependencyRecomputations:()=>{f=0},lastResult:()=>v,recomputations:()=>d,resetRecomputations:()=>{d=0},memoize:_,argsMemoize:O})};return Object.assign(o,{withTypes:()=>o}),o}var createSelector=createSelectorCreator(weakMapMemoize),createStructuredSelector=Object.assign((e,t=createSelector)=>{assertIsObject(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),o=n.map(d=>e[d]);return t(o,(...d)=>d.reduce((f,v,w)=>(f[n[w]]=v,f),{}))},{withTypes:()=>createStructuredSelector}),sortBy$2={},orderBy={},compareValues={},hasRequiredCompareValues;function requireCompareValues(){return hasRequiredCompareValues||(hasRequiredCompareValues=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(o){return typeof o=="symbol"?1:o===null?2:o===void 0?3:o!==o?4:0}const n=(o,u,d)=>{if(o!==u){const f=t(o),v=t(u);if(f===v&&f===0){if(o<u)return d==="desc"?1:-1;if(o>u)return d==="desc"?-1:1}return d==="desc"?v-f:f-v}return 0};e.compareValues=n})(compareValues)),compareValues}var isKey={},isSymbol={},hasRequiredIsSymbol;function requireIsSymbol(){return hasRequiredIsSymbol||(hasRequiredIsSymbol=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(isSymbol)),isSymbol}var hasRequiredIsKey;function requireIsKey(){return hasRequiredIsKey||(hasRequiredIsKey=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIsSymbol(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;function u(d,f){return Array.isArray(d)?!1:typeof d=="number"||typeof d=="boolean"||d==null||t.isSymbol(d)?!0:typeof d=="string"&&(o.test(d)||!n.test(d))||f!=null&&Object.hasOwn(f,d)}e.isKey=u})(isKey)),isKey}var hasRequiredOrderBy;function requireOrderBy(){return hasRequiredOrderBy||(hasRequiredOrderBy=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireCompareValues(),n=requireIsKey(),o=requireToPath();function u(d,f,v,w){if(d==null)return[];v=w?void 0:v,Array.isArray(d)||(d=Object.values(d)),Array.isArray(f)||(f=f==null?[null]:[f]),f.length===0&&(f=[null]),Array.isArray(v)||(v=v==null?[]:[v]),v=v.map(O=>String(O));const E=(O,M)=>{let N=O;for(let I=0;I<M.length&&N!=null;++I)N=N[M[I]];return N},C=(O,M)=>M==null||O==null?M:typeof O=="object"&&"key"in O?Object.hasOwn(M,O.key)?M[O.key]:E(M,O.path):typeof O=="function"?O(M):Array.isArray(O)?E(M,O):typeof M=="object"?M[O]:M,_=f.map(O=>(Array.isArray(O)&&O.length===1&&(O=O[0]),O==null||typeof O=="function"||Array.isArray(O)||n.isKey(O)?O:{key:O,path:o.toPath(O)}));return d.map(O=>({original:O,criteria:_.map(M=>C(M,O))})).slice().sort((O,M)=>{for(let N=0;N<_.length;N++){const I=t.compareValues(O.criteria[N],M.criteria[N],v[N]);if(I!==0)return I}return 0}).map(O=>O.original)}e.orderBy=u})(orderBy)),orderBy}var flatten={},hasRequiredFlatten;function requireFlatten(){return hasRequiredFlatten||(hasRequiredFlatten=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,o=1){const u=[],d=Math.floor(o),f=(v,w)=>{for(let E=0;E<v.length;E++){const C=v[E];Array.isArray(C)&&w<d?f(C,w+1):u.push(C)}};return f(n,0),u}e.flatten=t})(flatten)),flatten}var isIterateeCall={},hasRequiredIsIterateeCall;function requireIsIterateeCall(){return hasRequiredIsIterateeCall||(hasRequiredIsIterateeCall=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIsIndex(),n=requireIsArrayLike(),o=requireIsObject(),u=requireEq();function d(f,v,w){return o.isObject(w)&&(typeof v=="number"&&n.isArrayLike(w)&&t.isIndex(v)&&v<w.length||typeof v=="string"&&v in w)?u.eq(w[v],f):!1}e.isIterateeCall=d})(isIterateeCall)),isIterateeCall}var hasRequiredSortBy$1;function requireSortBy$1(){return hasRequiredSortBy$1||(hasRequiredSortBy$1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireOrderBy(),n=requireFlatten(),o=requireIsIterateeCall();function u(d,...f){const v=f.length;return v>1&&o.isIterateeCall(d,f[0],f[1])?f=[]:v>2&&o.isIterateeCall(f[0],f[1],f[2])&&(f=[f[0]]),t.orderBy(d,n.flatten(f),["asc"])}e.sortBy=u})(sortBy$2)),sortBy$2}var sortBy$1,hasRequiredSortBy;function requireSortBy(){return hasRequiredSortBy||(hasRequiredSortBy=1,sortBy$1=requireSortBy$1().sortBy),sortBy$1}var sortByExports=requireSortBy();const sortBy=getDefaultExportFromCjs(sortByExports);var selectLegendSettings=e=>e.legend.settings,selectLegendSize=e=>e.legend.size,selectAllLegendPayload2DArray=e=>e.legend.payload;createSelector([selectAllLegendPayload2DArray,selectLegendSettings],(e,t)=>{var{itemSorter:n}=t,o=e.flat(1);return n?sortBy(o,n):o});var EPS$1=1;function useElementOffset(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=reactExports.useState({height:0,left:0,top:0,width:0}),o=reactExports.useCallback(u=>{if(u!=null){var d=u.getBoundingClientRect(),f={height:d.height,left:d.left,top:d.top,width:d.width};(Math.abs(f.height-t.height)>EPS$1||Math.abs(f.left-t.left)>EPS$1||Math.abs(f.top-t.top)>EPS$1||Math.abs(f.width-t.width)>EPS$1)&&n({height:f.height,left:f.left,top:f.top,width:f.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,o]}function formatProdErrorMessage$1(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var $$observable=typeof Symbol=="function"&&Symbol.observable||"@@observable",symbol_observable_default=$$observable,randomString=()=>Math.random().toString(36).substring(7).split("").join("."),ActionTypes={INIT:`@@redux/INIT${randomString()}`,REPLACE:`@@redux/REPLACE${randomString()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${randomString()}`},actionTypes_default=ActionTypes;function isPlainObject$5(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function createStore(e,t,n){if(typeof e!="function")throw new Error(formatProdErrorMessage$1(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(formatProdErrorMessage$1(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(formatProdErrorMessage$1(1));return n(createStore)(e,t)}let o=e,u=t,d=new Map,f=d,v=0,w=!1;function E(){f===d&&(f=new Map,d.forEach((I,B)=>{f.set(B,I)}))}function C(){if(w)throw new Error(formatProdErrorMessage$1(3));return u}function _(I){if(typeof I!="function")throw new Error(formatProdErrorMessage$1(4));if(w)throw new Error(formatProdErrorMessage$1(5));let B=!0;E();const V=v++;return f.set(V,I),function(){if(B){if(w)throw new Error(formatProdErrorMessage$1(6));B=!1,E(),f.delete(V),d=null}}}function D(I){if(!isPlainObject$5(I))throw new Error(formatProdErrorMessage$1(7));if(typeof I.type>"u")throw new Error(formatProdErrorMessage$1(8));if(typeof I.type!="string")throw new Error(formatProdErrorMessage$1(17));if(w)throw new Error(formatProdErrorMessage$1(9));try{w=!0,u=o(u,I)}finally{w=!1}return(d=f).forEach(V=>{V()}),I}function O(I){if(typeof I!="function")throw new Error(formatProdErrorMessage$1(10));o=I,D({type:actionTypes_default.REPLACE})}function M(){const I=_;return{subscribe(B){if(typeof B!="object"||B===null)throw new Error(formatProdErrorMessage$1(11));function V(){const q=B;q.next&&q.next(C())}return V(),{unsubscribe:I(V)}},[symbol_observable_default](){return this}}}return D({type:actionTypes_default.INIT}),{dispatch:D,subscribe:_,getState:C,replaceReducer:O,[symbol_observable_default]:M}}function assertReducerShape(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:actionTypes_default.INIT})>"u")throw new Error(formatProdErrorMessage$1(12));if(typeof n(void 0,{type:actionTypes_default.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(formatProdErrorMessage$1(13))})}function combineReducers(e){const t=Object.keys(e),n={};for(let d=0;d<t.length;d++){const f=t[d];typeof e[f]=="function"&&(n[f]=e[f])}const o=Object.keys(n);let u;try{assertReducerShape(n)}catch(d){u=d}return function(f={},v){if(u)throw u;let w=!1;const E={};for(let C=0;C<o.length;C++){const _=o[C],D=n[_],O=f[_],M=D(O,v);if(typeof M>"u")throw v&&v.type,new Error(formatProdErrorMessage$1(14));E[_]=M,w=w||M!==O}return w=w||o.length!==Object.keys(f).length,w?E:f}}function compose$1(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...o)=>t(n(...o)))}function applyMiddleware(...e){return t=>(n,o)=>{const u=t(n,o);let d=()=>{throw new Error(formatProdErrorMessage$1(15))};const f={getState:u.getState,dispatch:(w,...E)=>d(w,...E)},v=e.map(w=>w(f));return d=compose$1(...v)(u.dispatch),{...u,dispatch:d}}}function isAction(e){return isPlainObject$5(e)&&"type"in e&&typeof e.type=="string"}var NOTHING=Symbol.for("immer-nothing"),DRAFTABLE=Symbol.for("immer-draftable"),DRAFT_STATE=Symbol.for("immer-state");function die(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var getPrototypeOf$1=Object.getPrototypeOf;function isDraft(e){return!!e&&!!e[DRAFT_STATE]}function isDraftable(e){return e?isPlainObject$4(e)||Array.isArray(e)||!!e[DRAFTABLE]||!!e.constructor?.[DRAFTABLE]||isMap(e)||isSet(e):!1}var objectCtorString=Object.prototype.constructor.toString(),cachedCtorStrings=new WeakMap;function isPlainObject$4(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let o=cachedCtorStrings.get(n);return o===void 0&&(o=Function.toString.call(n),cachedCtorStrings.set(n,o)),o===objectCtorString}function each(e,t,n=!0){getArchtype(e)===0?(n?Reflect.ownKeys(e):Object.keys(e)).forEach(u=>{t(u,e[u],e)}):e.forEach((o,u)=>t(u,o,e))}function getArchtype(e){const t=e[DRAFT_STATE];return t?t.type_:Array.isArray(e)?1:isMap(e)?2:isSet(e)?3:0}function has(e,t){return getArchtype(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function set(e,t,n){const o=getArchtype(e);o===2?e.set(t,n):o===3?e.add(n):e[t]=n}function is(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function isMap(e){return e instanceof Map}function isSet(e){return e instanceof Set}function latest(e){return e.copy_||e.base_}function shallowCopy(e,t){if(isMap(e))return new Map(e);if(isSet(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=isPlainObject$4(e);if(t===!0||t==="class_only"&&!n){const o=Object.getOwnPropertyDescriptors(e);delete o[DRAFT_STATE];let u=Reflect.ownKeys(o);for(let d=0;d<u.length;d++){const f=u[d],v=o[f];v.writable===!1&&(v.writable=!0,v.configurable=!0),(v.get||v.set)&&(o[f]={configurable:!0,writable:!0,enumerable:v.enumerable,value:e[f]})}return Object.create(getPrototypeOf$1(e),o)}else{const o=getPrototypeOf$1(e);if(o!==null&&n)return{...e};const u=Object.create(o);return Object.assign(u,e)}}function freeze(e,t=!1){return isFrozen(e)||isDraft(e)||!isDraftable(e)||(getArchtype(e)>1&&Object.defineProperties(e,{set:dontMutateMethodOverride,add:dontMutateMethodOverride,clear:dontMutateMethodOverride,delete:dontMutateMethodOverride}),Object.freeze(e),t&&Object.values(e).forEach(n=>freeze(n,!0))),e}function dontMutateFrozenCollections(){die(2)}var dontMutateMethodOverride={value:dontMutateFrozenCollections};function isFrozen(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var plugins={};function getPlugin(e){const t=plugins[e];return t||die(0,e),t}var currentScope;function getCurrentScope(){return currentScope}function createScope(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function usePatchesInScope(e,t){t&&(getPlugin("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function revokeScope(e){leaveScope(e),e.drafts_.forEach(revokeDraft),e.drafts_=null}function leaveScope(e){e===currentScope&&(currentScope=e.parent_)}function enterScope(e){return currentScope=createScope(currentScope,e)}function revokeDraft(e){const t=e[DRAFT_STATE];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function processResult(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[DRAFT_STATE].modified_&&(revokeScope(t),die(4)),isDraftable(e)&&(e=finalize(t,e),t.parent_||maybeFreeze(t,e)),t.patches_&&getPlugin("Patches").generateReplacementPatches_(n[DRAFT_STATE].base_,e,t.patches_,t.inversePatches_)):e=finalize(t,n,[]),revokeScope(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==NOTHING?e:void 0}function finalize(e,t,n){if(isFrozen(t))return t;const o=e.immer_.shouldUseStrictIteration(),u=t[DRAFT_STATE];if(!u)return each(t,(d,f)=>finalizeProperty(e,u,t,d,f,n),o),t;if(u.scope_!==e)return t;if(!u.modified_)return maybeFreeze(e,u.base_,!0),u.base_;if(!u.finalized_){u.finalized_=!0,u.scope_.unfinalizedDrafts_--;const d=u.copy_;let f=d,v=!1;u.type_===3&&(f=new Set(d),d.clear(),v=!0),each(f,(w,E)=>finalizeProperty(e,u,d,w,E,n,v),o),maybeFreeze(e,d,!1),n&&e.patches_&&getPlugin("Patches").generatePatches_(u,n,e.patches_,e.inversePatches_)}return u.copy_}function finalizeProperty(e,t,n,o,u,d,f){if(u==null||typeof u!="object"&&!f)return;const v=isFrozen(u);if(!(v&&!f)){if(isDraft(u)){const w=d&&t&&t.type_!==3&&!has(t.assigned_,o)?d.concat(o):void 0,E=finalize(e,u,w);if(set(n,o,E),isDraft(E))e.canAutoFreeze_=!1;else return}else f&&n.add(u);if(isDraftable(u)&&!v){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[o]===u&&v)return;finalize(e,u),(!t||!t.scope_.parent_)&&typeof o!="symbol"&&(isMap(n)?n.has(o):Object.prototype.propertyIsEnumerable.call(n,o))&&maybeFreeze(e,u)}}}function maybeFreeze(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&freeze(t,n)}function createProxyProxy(e,t){const n=Array.isArray(e),o={type_:n?1:0,scope_:t?t.scope_:getCurrentScope(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let u=o,d=objectTraps;n&&(u=[o],d=arrayTraps);const{revoke:f,proxy:v}=Proxy.revocable(u,d);return o.draft_=v,o.revoke_=f,v}var objectTraps={get(e,t){if(t===DRAFT_STATE)return e;const n=latest(e);if(!has(n,t))return readPropFromProto(e,n,t);const o=n[t];return e.finalized_||!isDraftable(o)?o:o===peek(e.base_,t)?(prepareCopy(e),e.copy_[t]=createProxy(o,e)):o},has(e,t){return t in latest(e)},ownKeys(e){return Reflect.ownKeys(latest(e))},set(e,t,n){const o=getDescriptorFromProto(latest(e),t);if(o?.set)return o.set.call(e.draft_,n),!0;if(!e.modified_){const u=peek(latest(e),t),d=u?.[DRAFT_STATE];if(d&&d.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(is(n,u)&&(n!==void 0||has(e.base_,t)))return!0;prepareCopy(e),markChanged(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return peek(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,prepareCopy(e),markChanged(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=latest(e),o=Reflect.getOwnPropertyDescriptor(n,t);return o&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:o.enumerable,value:n[t]}},defineProperty(){die(11)},getPrototypeOf(e){return getPrototypeOf$1(e.base_)},setPrototypeOf(){die(12)}},arrayTraps={};each(objectTraps,(e,t)=>{arrayTraps[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});arrayTraps.deleteProperty=function(e,t){return arrayTraps.set.call(this,e,t,void 0)};arrayTraps.set=function(e,t,n){return objectTraps.set.call(this,e[0],t,n,e[0])};function peek(e,t){const n=e[DRAFT_STATE];return(n?latest(n):e)[t]}function readPropFromProto(e,t,n){const o=getDescriptorFromProto(t,n);return o?"value"in o?o.value:o.get?.call(e.draft_):void 0}function getDescriptorFromProto(e,t){if(!(t in e))return;let n=getPrototypeOf$1(e);for(;n;){const o=Object.getOwnPropertyDescriptor(n,t);if(o)return o;n=getPrototypeOf$1(n)}}function markChanged(e){e.modified_||(e.modified_=!0,e.parent_&&markChanged(e.parent_))}function prepareCopy(e){e.copy_||(e.copy_=shallowCopy(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Immer2=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,n,o)=>{if(typeof t=="function"&&typeof n!="function"){const d=n;n=t;const f=this;return function(w=d,...E){return f.produce(w,C=>n.call(this,C,...E))}}typeof n!="function"&&die(6),o!==void 0&&typeof o!="function"&&die(7);let u;if(isDraftable(t)){const d=enterScope(this),f=createProxy(t,void 0);let v=!0;try{u=n(f),v=!1}finally{v?revokeScope(d):leaveScope(d)}return usePatchesInScope(d,o),processResult(u,d)}else if(!t||typeof t!="object"){if(u=n(t),u===void 0&&(u=t),u===NOTHING&&(u=void 0),this.autoFreeze_&&freeze(u,!0),o){const d=[],f=[];getPlugin("Patches").generateReplacementPatches_(t,u,d,f),o(d,f)}return u}else die(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(f,...v)=>this.produceWithPatches(f,w=>t(w,...v));let o,u;return[this.produce(t,n,(f,v)=>{o=f,u=v}),o,u]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){isDraftable(e)||die(8),isDraft(e)&&(e=current(e));const t=enterScope(this),n=createProxy(e,void 0);return n[DRAFT_STATE].isManual_=!0,leaveScope(t),n}finishDraft(e,t){const n=e&&e[DRAFT_STATE];(!n||!n.isManual_)&&die(9);const{scope_:o}=n;return usePatchesInScope(o,t),processResult(void 0,o)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const u=t[n];if(u.path.length===0&&u.op==="replace"){e=u.value;break}}n>-1&&(t=t.slice(n+1));const o=getPlugin("Patches").applyPatches_;return isDraft(e)?o(e,t):this.produce(e,u=>o(u,t))}};function createProxy(e,t){const n=isMap(e)?getPlugin("MapSet").proxyMap_(e,t):isSet(e)?getPlugin("MapSet").proxySet_(e,t):createProxyProxy(e,t);return(t?t.scope_:getCurrentScope()).drafts_.push(n),n}function current(e){return isDraft(e)||die(10,e),currentImpl(e)}function currentImpl(e){if(!isDraftable(e)||isFrozen(e))return e;const t=e[DRAFT_STATE];let n,o=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=shallowCopy(e,t.scope_.immer_.useStrictShallowCopy_),o=t.scope_.immer_.shouldUseStrictIteration()}else n=shallowCopy(e,!0);return each(n,(u,d)=>{set(n,u,currentImpl(d))},o),t&&(t.finalized_=!1),n}var immer=new Immer2,produce=immer.produce,setUseStrictIteration=immer.setUseStrictIteration.bind(immer);function castDraft(e){return e}function createThunkMiddleware(e){return({dispatch:n,getState:o})=>u=>d=>typeof d=="function"?d(n,o,e):u(d)}var thunk=createThunkMiddleware(),withExtraArgument=createThunkMiddleware,composeWithDevTools=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?compose$1:compose$1.apply(null,arguments)};function createAction(e,t){function n(...o){if(t){let u=t(...o);if(!u)throw new Error(formatProdErrorMessage(0));return{type:e,payload:u.payload,..."meta"in u&&{meta:u.meta},..."error"in u&&{error:u.error}}}return{type:e,payload:o[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=o=>isAction(o)&&o.type===e,n}var Tuple=class hd extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,hd.prototype)}static get[Symbol.species](){return hd}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new hd(...t[0].concat(this)):new hd(...t.concat(this))}};function freezeDraftable(e){return isDraftable(e)?produce(e,()=>{}):e}function getOrInsertComputed(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function isBoolean$1(e){return typeof e=="boolean"}var buildGetDefaultMiddleware=()=>function(t){const{thunk:n=!0,immutableCheck:o=!0,serializableCheck:u=!0,actionCreatorCheck:d=!0}=t??{};let f=new Tuple;return n&&(isBoolean$1(n)?f.push(thunk):f.push(withExtraArgument(n.extraArgument))),f},SHOULD_AUTOBATCH="RTK_autoBatch",prepareAutoBatched=()=>e=>({payload:e,meta:{[SHOULD_AUTOBATCH]:!0}}),createQueueWithTimer=e=>t=>{setTimeout(t,e)},autoBatchEnhancer=(e={type:"raf"})=>t=>(...n)=>{const o=t(...n);let u=!0,d=!1,f=!1;const v=new Set,w=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:createQueueWithTimer(10):e.type==="callback"?e.queueNotification:createQueueWithTimer(e.timeout),E=()=>{f=!1,d&&(d=!1,v.forEach(C=>C()))};return Object.assign({},o,{subscribe(C){const _=()=>u&&C(),D=o.subscribe(_);return v.add(C),()=>{D(),v.delete(C)}},dispatch(C){try{return u=!C?.meta?.[SHOULD_AUTOBATCH],d=!u,d&&(f||(f=!0,w(E))),o.dispatch(C)}finally{u=!0}}})},buildGetDefaultEnhancers=e=>function(n){const{autoBatch:o=!0}=n??{};let u=new Tuple(e);return o&&u.push(autoBatchEnhancer(typeof o=="object"?o:void 0)),u};function configureStore(e){const t=buildGetDefaultMiddleware(),{reducer:n=void 0,middleware:o,devTools:u=!0,preloadedState:d=void 0,enhancers:f=void 0}=e||{};let v;if(typeof n=="function")v=n;else if(isPlainObject$5(n))v=combineReducers(n);else throw new Error(formatProdErrorMessage(1));let w;typeof o=="function"?w=o(t):w=t();let E=compose$1;u&&(E=composeWithDevTools({trace:!1,...typeof u=="object"&&u}));const C=applyMiddleware(...w),_=buildGetDefaultEnhancers(C);let D=typeof f=="function"?f(_):_();const O=E(...D);return createStore(v,d,O)}function executeReducerBuilderCallback(e){const t={},n=[];let o;const u={addCase(d,f){const v=typeof d=="string"?d:d.type;if(!v)throw new Error(formatProdErrorMessage(28));if(v in t)throw new Error(formatProdErrorMessage(29));return t[v]=f,u},addAsyncThunk(d,f){return f.pending&&(t[d.pending.type]=f.pending),f.rejected&&(t[d.rejected.type]=f.rejected),f.fulfilled&&(t[d.fulfilled.type]=f.fulfilled),f.settled&&n.push({matcher:d.settled,reducer:f.settled}),u},addMatcher(d,f){return n.push({matcher:d,reducer:f}),u},addDefaultCase(d){return o=d,u}};return e(u),[t,n,o]}setUseStrictIteration(!1);function isStateFunction(e){return typeof e=="function"}function createReducer(e,t){let[n,o,u]=executeReducerBuilderCallback(t),d;if(isStateFunction(e))d=()=>freezeDraftable(e());else{const v=freezeDraftable(e);d=()=>v}function f(v=d(),w){let E=[n[w.type],...o.filter(({matcher:C})=>C(w)).map(({reducer:C})=>C)];return E.filter(C=>!!C).length===0&&(E=[u]),E.reduce((C,_)=>{if(_)if(isDraft(C)){const O=_(C,w);return O===void 0?C:O}else{if(isDraftable(C))return produce(C,D=>_(D,w));{const D=_(C,w);if(D===void 0){if(C===null)return C;throw Error("A case reducer on a non-draftable value must not return undefined")}return D}}return C},v)}return f.getInitialState=d,f}var urlAlphabet="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",nanoid=(e=21)=>{let t="",n=e;for(;n--;)t+=urlAlphabet[Math.random()*64|0];return t},asyncThunkSymbol=Symbol.for("rtk-slice-createasyncthunk");function getType(e,t){return`${e}/${t}`}function buildCreateSlice({creators:e}={}){const t=e?.asyncThunk?.[asyncThunkSymbol];return function(o){const{name:u,reducerPath:d=u}=o;if(!u)throw new Error(formatProdErrorMessage(11));const f=(typeof o.reducers=="function"?o.reducers(buildReducerCreators()):o.reducers)||{},v=Object.keys(f),w={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},E={addCase(j,q){const z=typeof j=="string"?j:j.type;if(!z)throw new Error(formatProdErrorMessage(12));if(z in w.sliceCaseReducersByType)throw new Error(formatProdErrorMessage(13));return w.sliceCaseReducersByType[z]=q,E},addMatcher(j,q){return w.sliceMatchers.push({matcher:j,reducer:q}),E},exposeAction(j,q){return w.actionCreators[j]=q,E},exposeCaseReducer(j,q){return w.sliceCaseReducersByName[j]=q,E}};v.forEach(j=>{const q=f[j],z={reducerName:j,type:getType(u,j),createNotation:typeof o.reducers=="function"};isAsyncThunkSliceReducerDefinition(q)?handleThunkCaseReducerDefinition(z,q,E,t):handleNormalReducerDefinition(z,q,E)});function C(){const[j={},q=[],z=void 0]=typeof o.extraReducers=="function"?executeReducerBuilderCallback(o.extraReducers):[o.extraReducers],$={...j,...w.sliceCaseReducersByType};return createReducer(o.initialState,ee=>{for(let ie in $)ee.addCase(ie,$[ie]);for(let ie of w.sliceMatchers)ee.addMatcher(ie.matcher,ie.reducer);for(let ie of q)ee.addMatcher(ie.matcher,ie.reducer);z&&ee.addDefaultCase(z)})}const _=j=>j,D=new Map,O=new WeakMap;let M;function N(j,q){return M||(M=C()),M(j,q)}function I(){return M||(M=C()),M.getInitialState()}function B(j,q=!1){function z(ee){let ie=ee[j];return typeof ie>"u"&&q&&(ie=getOrInsertComputed(O,z,I)),ie}function $(ee=_){const ie=getOrInsertComputed(D,q,()=>new WeakMap);return getOrInsertComputed(ie,ee,()=>{const ae={};for(const[pe,he]of Object.entries(o.selectors??{}))ae[pe]=wrapSelector(he,ee,()=>getOrInsertComputed(O,ee,I),q);return ae})}return{reducerPath:j,getSelectors:$,get selectors(){return $(z)},selectSlice:z}}const V={name:u,reducer:N,actions:w.actionCreators,caseReducers:w.sliceCaseReducersByName,getInitialState:I,...B(d),injectInto(j,{reducerPath:q,...z}={}){const $=q??d;return j.inject({reducerPath:$,reducer:N},z),{...V,...B($,!0)}}};return V}}function wrapSelector(e,t,n,o){function u(d,...f){let v=t(d);return typeof v>"u"&&o&&(v=n()),e(v,...f)}return u.unwrapped=e,u}var createSlice=buildCreateSlice();function buildReducerCreators(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function handleNormalReducerDefinition({type:e,reducerName:t,createNotation:n},o,u){let d,f;if("reducer"in o){if(n&&!isCaseReducerWithPrepareDefinition(o))throw new Error(formatProdErrorMessage(17));d=o.reducer,f=o.prepare}else d=o;u.addCase(e,d).exposeCaseReducer(t,d).exposeAction(t,f?createAction(e,f):createAction(e))}function isAsyncThunkSliceReducerDefinition(e){return e._reducerDefinitionType==="asyncThunk"}function isCaseReducerWithPrepareDefinition(e){return e._reducerDefinitionType==="reducerWithPrepare"}function handleThunkCaseReducerDefinition({type:e,reducerName:t},n,o,u){if(!u)throw new Error(formatProdErrorMessage(18));const{payloadCreator:d,fulfilled:f,pending:v,rejected:w,settled:E,options:C}=n,_=u(e,d,C);o.exposeAction(t,_),f&&o.addCase(_.fulfilled,f),v&&o.addCase(_.pending,v),w&&o.addCase(_.rejected,w),E&&o.addMatcher(_.settled,E),o.exposeCaseReducer(t,{fulfilled:f||noop$5,pending:v||noop$5,rejected:w||noop$5,settled:E||noop$5})}function noop$5(){}var task="task",listener="listener",completed="completed",cancelled="cancelled",taskCancelled=`task-${cancelled}`,taskCompleted=`task-${completed}`,listenerCancelled=`${listener}-${cancelled}`,listenerCompleted=`${listener}-${completed}`,TaskAbortError=class{constructor(e){this.code=e,this.message=`${task} ${cancelled} (reason: ${e})`}name="TaskAbortError";message},assertFunction=(e,t)=>{if(typeof e!="function")throw new TypeError(formatProdErrorMessage(32))},noop2=()=>{},catchRejection=(e,t=noop2)=>(e.catch(t),e),addAbortSignalListener=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),abortControllerWithReason=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},validateActive=e=>{if(e.aborted){const{reason:t}=e;throw new TaskAbortError(t)}};function raceWithSignal(e,t){let n=noop2;return new Promise((o,u)=>{const d=()=>u(new TaskAbortError(e.reason));if(e.aborted){d();return}n=addAbortSignalListener(e,d),t.finally(()=>n()).then(o,u)}).finally(()=>{n=noop2})}var runTask=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof TaskAbortError?"cancelled":"rejected",error:n}}finally{t?.()}},createPause=e=>t=>catchRejection(raceWithSignal(e,t).then(n=>(validateActive(e),n))),createDelay=e=>{const t=createPause(e);return n=>t(new Promise(o=>setTimeout(o,n)))},{assign}=Object,INTERNAL_NIL_TOKEN={},alm="listenerMiddleware",createFork=(e,t)=>{const n=o=>addAbortSignalListener(e,()=>abortControllerWithReason(o,e.reason));return(o,u)=>{assertFunction(o);const d=new AbortController;n(d);const f=runTask(async()=>{validateActive(e),validateActive(d.signal);const v=await o({pause:createPause(d.signal),delay:createDelay(d.signal),signal:d.signal});return validateActive(d.signal),v},()=>abortControllerWithReason(d,taskCompleted));return u?.autoJoin&&t.push(f.catch(noop2)),{result:createPause(e)(f),cancel(){abortControllerWithReason(d,taskCancelled)}}}},createTakePattern=(e,t)=>{const n=async(o,u)=>{validateActive(t);let d=()=>{};const v=[new Promise((w,E)=>{let C=e({predicate:o,effect:(_,D)=>{D.unsubscribe(),w([_,D.getState(),D.getOriginalState()])}});d=()=>{C(),E()}})];u!=null&&v.push(new Promise(w=>setTimeout(w,u,null)));try{const w=await raceWithSignal(t,Promise.race(v));return validateActive(t),w}finally{d()}};return(o,u)=>catchRejection(n(o,u))},getListenerEntryPropsFrom=e=>{let{type:t,actionCreator:n,matcher:o,predicate:u,effect:d}=e;if(t)u=createAction(t).match;else if(n)t=n.type,u=n.match;else if(o)u=o;else if(!u)throw new Error(formatProdErrorMessage(21));return assertFunction(d),{predicate:u,type:t,effect:d}},createListenerEntry=assign(e=>{const{type:t,predicate:n,effect:o}=getListenerEntryPropsFrom(e);return{id:nanoid(),effect:o,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(formatProdErrorMessage(22))}}},{withTypes:()=>createListenerEntry}),findListenerEntry=(e,t)=>{const{type:n,effect:o,predicate:u}=getListenerEntryPropsFrom(t);return Array.from(e.values()).find(d=>(typeof n=="string"?d.type===n:d.predicate===u)&&d.effect===o)},cancelActiveListeners=e=>{e.pending.forEach(t=>{abortControllerWithReason(t,listenerCancelled)})},createClearListenerMiddleware=(e,t)=>()=>{for(const n of t.keys())cancelActiveListeners(n);e.clear()},safelyNotifyError=(e,t,n)=>{try{e(t,n)}catch(o){setTimeout(()=>{throw o},0)}},addListener=assign(createAction(`${alm}/add`),{withTypes:()=>addListener}),clearAllListeners=createAction(`${alm}/removeAll`),removeListener=assign(createAction(`${alm}/remove`),{withTypes:()=>removeListener}),defaultErrorHandler=(...e)=>{console.error(`${alm}/error`,...e)},createListenerMiddleware=(e={})=>{const t=new Map,n=new Map,o=O=>{const M=n.get(O)??0;n.set(O,M+1)},u=O=>{const M=n.get(O)??1;M===1?n.delete(O):n.set(O,M-1)},{extra:d,onError:f=defaultErrorHandler}=e;assertFunction(f);const v=O=>(O.unsubscribe=()=>t.delete(O.id),t.set(O.id,O),M=>{O.unsubscribe(),M?.cancelActive&&cancelActiveListeners(O)}),w=O=>{const M=findListenerEntry(t,O)??createListenerEntry(O);return v(M)};assign(w,{withTypes:()=>w});const E=O=>{const M=findListenerEntry(t,O);return M&&(M.unsubscribe(),O.cancelActive&&cancelActiveListeners(M)),!!M};assign(E,{withTypes:()=>E});const C=async(O,M,N,I)=>{const B=new AbortController,V=createTakePattern(w,B.signal),j=[];try{O.pending.add(B),o(O),await Promise.resolve(O.effect(M,assign({},N,{getOriginalState:I,condition:(q,z)=>V(q,z).then(Boolean),take:V,delay:createDelay(B.signal),pause:createPause(B.signal),extra:d,signal:B.signal,fork:createFork(B.signal,j),unsubscribe:O.unsubscribe,subscribe:()=>{t.set(O.id,O)},cancelActiveListeners:()=>{O.pending.forEach((q,z,$)=>{q!==B&&(abortControllerWithReason(q,listenerCancelled),$.delete(q))})},cancel:()=>{abortControllerWithReason(B,listenerCancelled),O.pending.delete(B)},throwIfCancelled:()=>{validateActive(B.signal)}})))}catch(q){q instanceof TaskAbortError||safelyNotifyError(f,q,{raisedBy:"effect"})}finally{await Promise.all(j),abortControllerWithReason(B,listenerCompleted),u(O),O.pending.delete(B)}},_=createClearListenerMiddleware(t,n);return{middleware:O=>M=>N=>{if(!isAction(N))return M(N);if(addListener.match(N))return w(N.payload);if(clearAllListeners.match(N)){_();return}if(removeListener.match(N))return E(N.payload);let I=O.getState();const B=()=>{if(I===INTERNAL_NIL_TOKEN)throw new Error(formatProdErrorMessage(23));return I};let V;try{if(V=M(N),t.size>0){const j=O.getState(),q=Array.from(t.values());for(const z of q){let $=!1;try{$=z.predicate(N,j,I)}catch(ee){$=!1,safelyNotifyError(f,ee,{raisedBy:"predicate"})}$&&C(z,N,O,B)}}}finally{I=INTERNAL_NIL_TOKEN}return V},startListening:w,stopListening:E,clearListeners:_}};function formatProdErrorMessage(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var initialState$a={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},chartLayoutSlice=createSlice({name:"chartLayout",initialState:initialState$a,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,o,u,d;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(o=t.payload.right)!==null&&o!==void 0?o:0,e.margin.bottom=(u=t.payload.bottom)!==null&&u!==void 0?u:0,e.margin.left=(d=t.payload.left)!==null&&d!==void 0?d:0},setScale(e,t){e.scale=t.payload}}}),{setMargin,setLayout,setChartSize,setScale}=chartLayoutSlice.actions,chartLayoutReducer=chartLayoutSlice.reducer;function ownKeys$q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$q(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$q(Object(n),!0).forEach(function(o){_defineProperty$r(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$q(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$r(e,t,n){return(t=_toPropertyKey$r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$r(e){var t=_toPrimitive$r(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$r(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RADIAN=Math.PI/180,radianToDegree=e=>e*180/Math.PI,polarToCartesian=(e,t,n,o)=>({x:e+Math.cos(-RADIAN*o)*n,y:t+Math.sin(-RADIAN*o)*n}),getMaxRadius=function(t,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(o.left||0)-(o.right||0)),Math.abs(n-(o.top||0)-(o.bottom||0)))/2},distanceBetweenPoints=(e,t)=>{var{x:n,y:o}=e,{x:u,y:d}=t;return Math.sqrt((n-u)**2+(o-d)**2)},getAngleOfPoint=(e,t)=>{var{x:n,y:o}=e,{cx:u,cy:d}=t,f=distanceBetweenPoints({x:n,y:o},{x:u,y:d});if(f<=0)return{radius:f,angle:0};var v=(n-u)/f,w=Math.acos(v);return o>d&&(w=2*Math.PI-w),{radius:f,angle:radianToDegree(w),angleInRadian:w}},formatAngleOfSector=e=>{var{startAngle:t,endAngle:n}=e,o=Math.floor(t/360),u=Math.floor(n/360),d=Math.min(o,u);return{startAngle:t-d*360,endAngle:n-d*360}},reverseFormatAngleOfSector=(e,t)=>{var{startAngle:n,endAngle:o}=t,u=Math.floor(n/360),d=Math.floor(o/360),f=Math.min(u,d);return e+f*360},inRangeOfSector=(e,t)=>{var{x:n,y:o}=e,{radius:u,angle:d}=getAngleOfPoint({x:n,y:o},t),{innerRadius:f,outerRadius:v}=t;if(u<f||u>v||u===0)return null;var{startAngle:w,endAngle:E}=formatAngleOfSector(t),C=d,_;if(w<=E){for(;C>E;)C-=360;for(;C<w;)C+=360;_=C>=w&&C<=E}else{for(;C>w;)C-=360;for(;C<E;)C+=360;_=C>=E&&C<=w}return _?_objectSpread$q(_objectSpread$q({},t),{},{radius:u,angle:reverseFormatAngleOfSector(C,t)}):null};function getSliced(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function ownKeys$p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$p(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$p(Object(n),!0).forEach(function(o){_defineProperty$q(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$p(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$q(e,t,n){return(t=_toPropertyKey$q(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$q(e){var t=_toPrimitive$q(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$q(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function getValueByDataKey(e,t,n){return isNullish$1(e)||isNullish$1(t)?n:isNumOrStr(t)?get(e,t,n):typeof t=="function"?t(e):n}var calculateActiveTickIndex=(e,t,n,o,u)=>{var d,f=-1,v=(d=t?.length)!==null&&d!==void 0?d:0;if(v<=1||e==null)return 0;if(o==="angleAxis"&&u!=null&&Math.abs(Math.abs(u[1]-u[0])-360)<=1e-6)for(var w=0;w<v;w++){var E=w>0?n[w-1].coordinate:n[v-1].coordinate,C=n[w].coordinate,_=w>=v-1?n[0].coordinate:n[w+1].coordinate,D=void 0;if(mathSign(C-E)!==mathSign(_-C)){var O=[];if(mathSign(_-C)===mathSign(u[1]-u[0])){D=_;var M=C+u[1]-u[0];O[0]=Math.min(M,(M+E)/2),O[1]=Math.max(M,(M+E)/2)}else{D=E;var N=_+u[1]-u[0];O[0]=Math.min(C,(N+C)/2),O[1]=Math.max(C,(N+C)/2)}var I=[Math.min(C,(D+C)/2),Math.max(C,(D+C)/2)];if(e>I[0]&&e<=I[1]||e>=O[0]&&e<=O[1]){({index:f}=n[w]);break}}else{var B=Math.min(E,_),V=Math.max(E,_);if(e>(B+C)/2&&e<=(V+C)/2){({index:f}=n[w]);break}}}else if(t){for(var j=0;j<v;j++)if(j===0&&e<=(t[j].coordinate+t[j+1].coordinate)/2||j>0&&j<v-1&&e>(t[j].coordinate+t[j-1].coordinate)/2&&e<=(t[j].coordinate+t[j+1].coordinate)/2||j===v-1&&e>(t[j].coordinate+t[j-1].coordinate)/2){({index:f}=t[j]);break}}return f},appendOffsetOfLegend=(e,t,n)=>{if(t&&n){var{width:o,height:u}=n,{align:d,verticalAlign:f,layout:v}=t;if((v==="vertical"||v==="horizontal"&&f==="middle")&&d!=="center"&&isNumber$1(e[d]))return _objectSpread$p(_objectSpread$p({},e),{},{[d]:e[d]+(o||0)});if((v==="horizontal"||v==="vertical"&&d==="center")&&f!=="middle"&&isNumber$1(e[f]))return _objectSpread$p(_objectSpread$p({},e),{},{[f]:e[f]+(u||0)})}return e},isCategoricalAxis=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",EPS=1e-4,checkDomainOfScale=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,o=e.range(),u=Math.min(o[0],o[1])-EPS,d=Math.max(o[0],o[1])+EPS,f=e(t[0]),v=e(t[n-1]);(f<u||f>d||v<u||v>d)&&e.domain([t[0],t[n-1]])}},offsetSign=e=>{var t=e.length;if(!(t<=0))for(var n=0,o=e[0].length;n<o;++n)for(var u=0,d=0,f=0;f<t;++f){var v=isNan(e[f][n][1])?e[f][n][0]:e[f][n][1];v>=0?(e[f][n][0]=u,e[f][n][1]=u+v,u=e[f][n][1]):(e[f][n][0]=d,e[f][n][1]=d+v,d=e[f][n][1])}},offsetPositive=e=>{var t=e.length;if(!(t<=0))for(var n=0,o=e[0].length;n<o;++n)for(var u=0,d=0;d<t;++d){var f=isNan(e[d][n][1])?e[d][n][0]:e[d][n][1];f>=0?(e[d][n][0]=u,e[d][n][1]=u+f,u=e[d][n][1]):(e[d][n][0]=0,e[d][n][1]=0)}},STACK_OFFSET_MAP={sign:offsetSign,expand:stackOffsetExpand,none:stackOffsetNone,silhouette:stackOffsetSilhouette,wiggle:stackOffsetWiggle,positive:offsetPositive},getStackedData=(e,t,n)=>{var o=STACK_OFFSET_MAP[n],u=shapeStack().keys(t).value((d,f)=>+getValueByDataKey(d,f,0)).order(stackOrderNone).offset(o);return u(e)},getDomainOfSingle=e=>{var t=e.flat(2).filter(isNumber$1);return[Math.min(...t),Math.max(...t)]},makeDomainFinite=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],getDomainOfStackGroups=(e,t,n)=>{if(e!=null)return makeDomainFinite(Object.keys(e).reduce((o,u)=>{var d=e[u],{stackedData:f}=d,v=f.reduce((w,E)=>{var C=getSliced(E,t,n),_=getDomainOfSingle(C);return[Math.min(w[0],_[0]),Math.max(w[1],_[1])]},[1/0,-1/0]);return[Math.min(v[0],o[0]),Math.max(v[1],o[1])]},[1/0,-1/0]))},MIN_VALUE_REG=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,MAX_VALUE_REG=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,getBandSizeOfAxis=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var o=e.scale.bandwidth();return o}if(e&&t&&t.length>=2){for(var u=sortBy(t,C=>C.coordinate),d=1/0,f=1,v=u.length;f<v;f++){var w=u[f],E=u[f-1];d=Math.min((w.coordinate||0)-(E.coordinate||0),d)}return d===1/0?0:d}return 0};function getTooltipEntry(e){var{tooltipEntrySettings:t,dataKey:n,payload:o,value:u,name:d}=e;return _objectSpread$p(_objectSpread$p({},t),{},{dataKey:n,payload:o,value:u,name:d})}function getTooltipNameProp(e,t){if(e)return String(e);if(typeof t=="string")return t}function inRange(e,t,n,o,u){if(n==="horizontal"||n==="vertical"){var d=e>=u.left&&e<=u.left+u.width&&t>=u.top&&t<=u.top+u.height;return d?{x:e,y:t}:null}return o?inRangeOfSector({x:e,y:t},o):null}var getActiveCoordinate=(e,t,n,o)=>{var u=t.find(E=>E&&E.index===n);if(u){if(e==="horizontal")return{x:u.coordinate,y:o.y};if(e==="vertical")return{x:o.x,y:u.coordinate};if(e==="centric"){var d=u.coordinate,{radius:f}=o;return _objectSpread$p(_objectSpread$p(_objectSpread$p({},o),polarToCartesian(o.cx,o.cy,f,d)),{},{angle:d,radius:f})}var v=u.coordinate,{angle:w}=o;return _objectSpread$p(_objectSpread$p(_objectSpread$p({},o),polarToCartesian(o.cx,o.cy,v,w)),{},{angle:w,radius:v})}return{x:0,y:0}},calculateTooltipPos=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,selectChartWidth=e=>e.layout.width,selectChartHeight=e=>e.layout.height,selectContainerScale=e=>e.layout.scale,selectMargin=e=>e.layout.margin,selectAllXAxes=createSelector(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),selectAllYAxes=createSelector(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),DATA_ITEM_INDEX_ATTRIBUTE_NAME="data-recharts-item-index",DATA_ITEM_DATAKEY_ATTRIBUTE_NAME="data-recharts-item-data-key",DEFAULT_Y_AXIS_WIDTH=60;function ownKeys$o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$o(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$o(Object(n),!0).forEach(function(o){_defineProperty$p(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$o(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$p(e,t,n){return(t=_toPropertyKey$p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$p(e){var t=_toPrimitive$p(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$p(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var selectBrushHeight=e=>e.brush.height;function selectLeftAxesOffset(e){var t=selectAllYAxes(e);return t.reduce((n,o)=>{if(o.orientation==="left"&&!o.mirror&&!o.hide){var u=typeof o.width=="number"?o.width:DEFAULT_Y_AXIS_WIDTH;return n+u}return n},0)}function selectRightAxesOffset(e){var t=selectAllYAxes(e);return t.reduce((n,o)=>{if(o.orientation==="right"&&!o.mirror&&!o.hide){var u=typeof o.width=="number"?o.width:DEFAULT_Y_AXIS_WIDTH;return n+u}return n},0)}function selectTopAxesOffset(e){var t=selectAllXAxes(e);return t.reduce((n,o)=>o.orientation==="top"&&!o.mirror&&!o.hide?n+o.height:n,0)}function selectBottomAxesOffset(e){var t=selectAllXAxes(e);return t.reduce((n,o)=>o.orientation==="bottom"&&!o.mirror&&!o.hide?n+o.height:n,0)}var selectChartOffsetInternal=createSelector([selectChartWidth,selectChartHeight,selectMargin,selectBrushHeight,selectLeftAxesOffset,selectRightAxesOffset,selectTopAxesOffset,selectBottomAxesOffset,selectLegendSettings,selectLegendSize],(e,t,n,o,u,d,f,v,w,E)=>{var C={left:(n.left||0)+u,right:(n.right||0)+d},_={top:(n.top||0)+f,bottom:(n.bottom||0)+v},D=_objectSpread$o(_objectSpread$o({},_),C),O=D.bottom;D.bottom+=o,D=appendOffsetOfLegend(D,w,E);var M=e-D.left-D.right,N=t-D.top-D.bottom;return _objectSpread$o(_objectSpread$o({brushBottom:O},D),{},{width:Math.max(M,0),height:Math.max(N,0)})}),selectChartViewBox=createSelector(selectChartOffsetInternal,e=>({x:e.left,y:e.top,width:e.width,height:e.height}));createSelector(selectChartWidth,selectChartHeight,(e,t)=>({x:0,y:0,width:e,height:t}));var PanoramaContext=reactExports.createContext(null),useIsPanorama=()=>reactExports.useContext(PanoramaContext)!=null,selectBrushSettings=e=>e.brush,selectBrushDimensions=createSelector([selectBrushSettings,selectChartOffsetInternal,selectMargin],(e,t,n)=>({height:e.height,x:isNumber$1(e.x)?e.x:t.left,y:isNumber$1(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:isNumber$1(e.width)?e.width:t.width})),throttle$3={},debounce$1={},debounce={},hasRequiredDebounce$1;function requireDebounce$1(){return hasRequiredDebounce$1||(hasRequiredDebounce$1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,o,{signal:u,edges:d}={}){let f,v=null;const w=d!=null&&d.includes("leading"),E=d==null||d.includes("trailing"),C=()=>{v!==null&&(n.apply(f,v),f=void 0,v=null)},_=()=>{E&&C(),N()};let D=null;const O=()=>{D!=null&&clearTimeout(D),D=setTimeout(()=>{D=null,_()},o)},M=()=>{D!==null&&(clearTimeout(D),D=null)},N=()=>{M(),f=void 0,v=null},I=()=>{C()},B=function(...V){if(u?.aborted)return;f=this,v=V;const j=D==null;O(),w&&j&&C()};return B.schedule=O,B.cancel=N,B.flush=I,u?.addEventListener("abort",N,{once:!0}),B}e.debounce=t})(debounce)),debounce}var hasRequiredDebounce;function requireDebounce(){return hasRequiredDebounce||(hasRequiredDebounce=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireDebounce$1();function n(o,u=0,d={}){typeof d!="object"&&(d={});const{leading:f=!1,trailing:v=!0,maxWait:w}=d,E=Array(2);f&&(E[0]="leading"),v&&(E[1]="trailing");let C,_=null;const D=t.debounce(function(...N){C=o.apply(this,N),_=null},u,{edges:E}),O=function(...N){return w!=null&&(_===null&&(_=Date.now()),Date.now()-_>=w)?(C=o.apply(this,N),_=Date.now(),D.cancel(),D.schedule(),C):(D.apply(this,N),C)},M=()=>(D.flush(),C);return O.cancel=D.cancel,O.flush=M,O}e.debounce=n})(debounce$1)),debounce$1}var hasRequiredThrottle$1;function requireThrottle$1(){return hasRequiredThrottle$1||(hasRequiredThrottle$1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireDebounce();function n(o,u=0,d={}){const{leading:f=!0,trailing:v=!0}=d;return t.debounce(o,u,{leading:f,maxWait:u,trailing:v})}e.throttle=n})(throttle$3)),throttle$3}var throttle$2,hasRequiredThrottle;function requireThrottle(){return hasRequiredThrottle||(hasRequiredThrottle=1,throttle$2=requireThrottle$1().throttle),throttle$2}var throttleExports=requireThrottle();const throttle$1=getDefaultExportFromCjs(throttleExports);var warn=function(t,n){for(var o=arguments.length,u=new Array(o>2?o-2:0),d=2;d<o;d++)u[d-2]=arguments[d]},calculateChartDimensions=(e,t,n)=>{var{width:o="100%",height:u="100%",aspect:d,maxHeight:f}=n,v=isPercent(o)?e:Number(o),w=isPercent(u)?t:Number(u);return d&&d>0&&(v?w=v/d:w&&(v=w*d),f&&w>f&&(w=f)),{calculatedWidth:v,calculatedHeight:w}},bothOverflow={width:0,height:0,overflow:"visible"},overflowX={width:0,overflowX:"visible"},overflowY={height:0,overflowY:"visible"},noStyle={},getInnerDivStyle=e=>{var{width:t,height:n}=e,o=isPercent(t),u=isPercent(n);return o&&u?bothOverflow:o?overflowX:u?overflowY:noStyle};function getDefaultWidthAndHeight(e){var{width:t,height:n,aspect:o}=e,u=t,d=n;return u===void 0&&d===void 0?(u="100%",d="100%"):u===void 0?u=o&&o>0?void 0:"100%":d===void 0&&(d=o&&o>0?void 0:"100%"),{width:u,height:d}}function isWellBehavedNumber(e){return Number.isFinite(e)}function isPositiveNumber(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function _extends$e(){return _extends$e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$e.apply(null,arguments)}function ownKeys$n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$n(Object(n),!0).forEach(function(o){_defineProperty$o(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$n(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$o(e,t,n){return(t=_toPropertyKey$o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$o(e){var t=_toPrimitive$o(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$o(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ResponsiveContainerContext=reactExports.createContext({width:-1,height:-1});function ResponsiveContainerContextProvider(e){var{children:t,width:n,height:o}=e,u=reactExports.useMemo(()=>({width:n,height:o}),[n,o]);return n<=0||o<=0?null:reactExports.createElement(ResponsiveContainerContext.Provider,{value:u},t)}var useResponsiveContainerContext=()=>reactExports.useContext(ResponsiveContainerContext),SizeDetectorContainer=reactExports.forwardRef((e,t)=>{var{aspect:n,initialDimension:o={width:-1,height:-1},width:u,height:d,minWidth:f=0,minHeight:v,maxHeight:w,children:E,debounce:C=0,id:_,className:D,onResize:O,style:M={}}=e,N=reactExports.useRef(null),I=reactExports.useRef();I.current=O,reactExports.useImperativeHandle(t,()=>N.current);var[B,V]=reactExports.useState({containerWidth:o.width,containerHeight:o.height}),j=reactExports.useCallback((ie,ae)=>{V(pe=>{var he=Math.round(ie),be=Math.round(ae);return pe.containerWidth===he&&pe.containerHeight===be?pe:{containerWidth:he,containerHeight:be}})},[]);reactExports.useEffect(()=>{var ie=be=>{var xe,{width:Ee,height:we}=be[0].contentRect;j(Ee,we),(xe=I.current)===null||xe===void 0||xe.call(I,Ee,we)};C>0&&(ie=throttle$1(ie,C,{trailing:!0,leading:!1}));var ae=new ResizeObserver(ie),{width:pe,height:he}=N.current.getBoundingClientRect();return j(pe,he),ae.observe(N.current),()=>{ae.disconnect()}},[j,C]);var{containerWidth:q,containerHeight:z}=B;warn(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:$,calculatedHeight:ee}=calculateChartDimensions(q,z,{width:u,height:d,aspect:n,maxHeight:w});return warn($>0||ee>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,$,ee,u,d,f,v,n),reactExports.createElement("div",{id:_?"".concat(_):void 0,className:clsx("recharts-responsive-container",D),style:_objectSpread$n(_objectSpread$n({},M),{},{width:u,height:d,minWidth:f,minHeight:v,maxHeight:w}),ref:N},reactExports.createElement("div",{style:getInnerDivStyle({width:u,height:d})},reactExports.createElement(ResponsiveContainerContextProvider,{width:$,height:ee},E)))}),ResponsiveContainer=reactExports.forwardRef((e,t)=>{var n=useResponsiveContainerContext();if(isPositiveNumber(n.width)&&isPositiveNumber(n.height))return e.children;var{width:o,height:u}=getDefaultWidthAndHeight({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:d,calculatedHeight:f}=calculateChartDimensions(void 0,void 0,{width:o,height:u,aspect:e.aspect,maxHeight:e.maxHeight});return isNumber$1(d)&&isNumber$1(f)?reactExports.createElement(ResponsiveContainerContextProvider,{width:d,height:f},e.children):reactExports.createElement(SizeDetectorContainer,_extends$e({},e,{width:o,height:u,ref:t}))}),useViewBox=()=>{var e,t=useIsPanorama(),n=useAppSelector(selectChartViewBox),o=useAppSelector(selectBrushDimensions),u=(e=useAppSelector(selectBrushSettings))===null||e===void 0?void 0:e.padding;return!t||!o||!u?n:{width:o.width-u.left-u.right,height:o.height-u.top-u.bottom,x:u.left,y:u.top}},manyComponentsThrowErrorsIfOffsetIsUndefined={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},useOffsetInternal=()=>{var e;return(e=useAppSelector(selectChartOffsetInternal))!==null&&e!==void 0?e:manyComponentsThrowErrorsIfOffsetIsUndefined},useChartWidth=()=>useAppSelector(selectChartWidth),useChartHeight=()=>useAppSelector(selectChartHeight),selectChartLayout=e=>e.layout.layoutType,useChartLayout=()=>useAppSelector(selectChartLayout),ReportChartSize=e=>{var t=useAppDispatch(),n=useIsPanorama(),{width:o,height:u}=e,d=useResponsiveContainerContext(),f=o,v=u;return d&&(f=d.width>0?d.width:o,v=d.height>0?d.height:u),reactExports.useEffect(()=>{!n&&isPositiveNumber(f)&&isPositiveNumber(v)&&t(setChartSize({width:f,height:v}))},[t,n,f,v]),null},initialState$9={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},legendSlice=createSlice({name:"legend",initialState:initialState$9,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:prepareAutoBatched()},removeLegendPayload:{reducer(e,t){var n=current(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)},prepare:prepareAutoBatched()}}}),{setLegendSize,setLegendSettings,addLegendPayload,removeLegendPayload}=legendSlice.actions,legendReducer=legendSlice.reducer;function _extends$d(){return _extends$d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$d.apply(null,arguments)}function ownKeys$m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$m(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$m(Object(n),!0).forEach(function(o){_defineProperty$n(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$m(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$n(e,t,n){return(t=_toPropertyKey$n(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$n(e){var t=_toPrimitive$n(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$n(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function defaultFormatter(e){return Array.isArray(e)&&isNumOrStr(e[0])&&isNumOrStr(e[1])?e.join(" ~ "):e}var DefaultTooltipContent=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:o={},labelStyle:u={},payload:d,formatter:f,itemSorter:v,wrapperClassName:w,labelClassName:E,label:C,labelFormatter:_,accessibilityLayer:D=!1}=e,O=()=>{if(d&&d.length){var z={padding:0,margin:0},$=(v?sortBy(d,v):d).map((ee,ie)=>{if(ee.type==="none")return null;var ae=ee.formatter||f||defaultFormatter,{value:pe,name:he}=ee,be=pe,xe=he;if(ae){var Ee=ae(pe,he,ee,ie,d);if(Array.isArray(Ee))[be,xe]=Ee;else if(Ee!=null)be=Ee;else return null}var we=_objectSpread$m({display:"block",paddingTop:4,paddingBottom:4,color:ee.color||"#000"},o);return reactExports.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(ie),style:we},isNumOrStr(xe)?reactExports.createElement("span",{className:"recharts-tooltip-item-name"},xe):null,isNumOrStr(xe)?reactExports.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,reactExports.createElement("span",{className:"recharts-tooltip-item-value"},be),reactExports.createElement("span",{className:"recharts-tooltip-item-unit"},ee.unit||""))});return reactExports.createElement("ul",{className:"recharts-tooltip-item-list",style:z},$)}return null},M=_objectSpread$m({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),N=_objectSpread$m({margin:0},u),I=!isNullish$1(C),B=I?C:"",V=clsx("recharts-default-tooltip",w),j=clsx("recharts-tooltip-label",E);I&&_&&d!==void 0&&d!==null&&(B=_(C,d));var q=D?{role:"status","aria-live":"assertive"}:{};return reactExports.createElement("div",_extends$d({className:V,style:M},q),reactExports.createElement("p",{className:j,style:N},reactExports.isValidElement(B)?B:"".concat(B)),O())},CSS_CLASS_PREFIX="recharts-tooltip-wrapper",TOOLTIP_HIDDEN={visibility:"hidden"};function getTooltipCSSClassName(e){var{coordinate:t,translateX:n,translateY:o}=e;return clsx(CSS_CLASS_PREFIX,{["".concat(CSS_CLASS_PREFIX,"-right")]:isNumber$1(n)&&t&&isNumber$1(t.x)&&n>=t.x,["".concat(CSS_CLASS_PREFIX,"-left")]:isNumber$1(n)&&t&&isNumber$1(t.x)&&n<t.x,["".concat(CSS_CLASS_PREFIX,"-bottom")]:isNumber$1(o)&&t&&isNumber$1(t.y)&&o>=t.y,["".concat(CSS_CLASS_PREFIX,"-top")]:isNumber$1(o)&&t&&isNumber$1(t.y)&&o<t.y})}function getTooltipTranslateXY(e){var{allowEscapeViewBox:t,coordinate:n,key:o,offsetTopLeft:u,position:d,reverseDirection:f,tooltipDimension:v,viewBox:w,viewBoxDimension:E}=e;if(d&&isNumber$1(d[o]))return d[o];var C=n[o]-v-(u>0?u:0),_=n[o]+u;if(t[o])return f[o]?C:_;var D=w[o];if(D==null)return 0;if(f[o]){var O=C,M=D;return O<M?Math.max(_,D):Math.max(C,D)}if(E==null)return 0;var N=_+v,I=D+E;return N>I?Math.max(C,D):Math.max(_,D)}function getTransformStyle(e){var{translateX:t,translateY:n,useTranslate3d:o}=e;return{transform:o?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function getTooltipTranslate(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:o,position:u,reverseDirection:d,tooltipBox:f,useTranslate3d:v,viewBox:w}=e,E,C,_;return f.height>0&&f.width>0&&n?(C=getTooltipTranslateXY({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:o,position:u,reverseDirection:d,tooltipDimension:f.width,viewBox:w,viewBoxDimension:w.width}),_=getTooltipTranslateXY({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:o,position:u,reverseDirection:d,tooltipDimension:f.height,viewBox:w,viewBoxDimension:w.height}),E=getTransformStyle({translateX:C,translateY:_,useTranslate3d:v})):E=TOOLTIP_HIDDEN,{cssProperties:E,cssClasses:getTooltipCSSClassName({translateX:C,translateY:_,coordinate:n})}}function ownKeys$l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$l(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$l(Object(n),!0).forEach(function(o){_defineProperty$m(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$l(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$m(e,t,n){return(t=_toPropertyKey$m(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$m(e){var t=_toPrimitive$m(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$m(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class TooltipBoundingBox extends reactExports.PureComponent{constructor(){super(...arguments),_defineProperty$m(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),_defineProperty$m(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,o,u,d;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(o=this.props.coordinate)===null||o===void 0?void 0:o.x)!==null&&n!==void 0?n:0,y:(u=(d=this.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:o,animationEasing:u,children:d,coordinate:f,hasPayload:v,isAnimationActive:w,offset:E,position:C,reverseDirection:_,useTranslate3d:D,viewBox:O,wrapperStyle:M,lastBoundingBox:N,innerRef:I,hasPortalFromProps:B}=this.props,{cssClasses:V,cssProperties:j}=getTooltipTranslate({allowEscapeViewBox:n,coordinate:f,offsetTopLeft:E,position:C,reverseDirection:_,tooltipBox:{height:N.height,width:N.width},useTranslate3d:D,viewBox:O}),q=B?{}:_objectSpread$l(_objectSpread$l({transition:w&&t?"transform ".concat(o,"ms ").concat(u):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&v?"visible":"hidden",position:"absolute",top:0,left:0}),z=_objectSpread$l(_objectSpread$l({},q),{},{visibility:!this.state.dismissed&&t&&v?"visible":"hidden"},M);return reactExports.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:V,style:z,ref:I},d)}}var parseIsSsrByDefault=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Global={devToolsEnabled:!1,isSsr:parseIsSsrByDefault()},useAccessibilityLayer=()=>useAppSelector(e=>e.rootProps.accessibilityLayer);function _extends$c(){return _extends$c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$c.apply(null,arguments)}function ownKeys$k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$k(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$k(Object(n),!0).forEach(function(o){_defineProperty$l(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$k(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$l(e,t,n){return(t=_toPropertyKey$l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$l(e){var t=_toPrimitive$l(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$l(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CURVE_FACTORIES={curveBasisClosed,curveBasisOpen,curveBasis,curveBumpX:bumpX,curveBumpY:bumpY,curveLinearClosed,curveLinear,curveMonotoneX:monotoneX,curveMonotoneY:monotoneY,curveNatural,curveStep,curveStepAfter:stepAfter,curveStepBefore:stepBefore},defined=e=>isWellBehavedNumber(e.x)&&isWellBehavedNumber(e.y),getX=e=>e.x,getY=e=>e.y,getCurveFactory=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(upperFirst(e));return(n==="curveMonotone"||n==="curveBump")&&t?CURVE_FACTORIES["".concat(n).concat(t==="vertical"?"Y":"X")]:CURVE_FACTORIES[n]||curveLinear},getPath$1=e=>{var{type:t="linear",points:n=[],baseLine:o,layout:u,connectNulls:d=!1}=e,f=getCurveFactory(t,u),v=d?n.filter(defined):n,w;if(Array.isArray(o)){var E=d?o.filter(_=>defined(_)):o,C=v.map((_,D)=>_objectSpread$k(_objectSpread$k({},_),{},{base:E[D]}));return u==="vertical"?w=shapeArea().y(getY).x1(getX).x0(_=>_.base.x):w=shapeArea().x(getX).y1(getY).y0(_=>_.base.y),w.defined(defined).curve(f),w(C)}return u==="vertical"&&isNumber$1(o)?w=shapeArea().y(getY).x1(getX).x0(o):isNumber$1(o)?w=shapeArea().x(getX).y1(getY).y0(o):w=shapeLine().x(getX).y(getY),w.defined(defined).curve(f),w(v)},Curve=e=>{var{className:t,points:n,path:o,pathRef:u}=e;if((!n||!n.length)&&!o)return null;var d=n&&n.length?getPath$1(e):o;return reactExports.createElement("path",_extends$c({},svgPropertiesNoEvents(e),adaptEventHandlers(e),{className:clsx("recharts-curve",t),d:d===null?void 0:d,ref:u}))},_excluded$a=["x","y","top","left","width","height","className"];function _extends$b(){return _extends$b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$b.apply(null,arguments)}function ownKeys$j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$j(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$j(Object(n),!0).forEach(function(o){_defineProperty$k(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$j(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$k(e,t,n){return(t=_toPropertyKey$k(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$k(e){var t=_toPrimitive$k(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$k(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _objectWithoutProperties$a(e,t){if(e==null)return{};var n,o,u=_objectWithoutPropertiesLoose$a(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(o=0;o<d.length;o++)n=d[o],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(u[n]=e[n])}return u}function _objectWithoutPropertiesLoose$a(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;n[o]=e[o]}return n}var getPath=(e,t,n,o,u,d)=>"M".concat(e,",").concat(u,"v").concat(o,"M").concat(d,",").concat(t,"h").concat(n),Cross=e=>{var{x:t=0,y:n=0,top:o=0,left:u=0,width:d=0,height:f=0,className:v}=e,w=_objectWithoutProperties$a(e,_excluded$a),E=_objectSpread$j({x:t,y:n,top:o,left:u,width:d,height:f},w);return!isNumber$1(t)||!isNumber$1(n)||!isNumber$1(d)||!isNumber$1(f)||!isNumber$1(o)||!isNumber$1(u)?null:reactExports.createElement("path",_extends$b({},svgPropertiesAndEvents(E),{className:clsx("recharts-cross",v),d:getPath(t,n,d,f,o,u)}))};function getCursorRectangle(e,t,n,o){var u=o/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-u:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-u,width:e==="horizontal"?o:n.width-1,height:e==="horizontal"?n.height-1:o}}function ownKeys$i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$i(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$i(Object(n),!0).forEach(function(o){_defineProperty$j(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$i(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$j(e,t,n){return(t=_toPropertyKey$j(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$j(e){var t=_toPrimitive$j(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$j(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function resolveDefaultProps(e,t){var n=_objectSpread$i({},e),o=t,u=Object.keys(t),d=u.reduce((f,v)=>(f[v]===void 0&&o[v]!==void 0&&(f[v]=o[v]),f),n);return d}function noop$4(){}function isNotNil(e){return e!=null}function ownKeys$h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$h(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$h(Object(n),!0).forEach(function(o){_defineProperty$i(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$h(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$i(e,t,n){return(t=_toPropertyKey$i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$i(e){var t=_toPrimitive$i(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$i(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var getDashCase=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),getTransitionVal=(e,t,n)=>e.map(o=>"".concat(getDashCase(o)," ").concat(t,"ms ").concat(n)).join(","),getIntersectionKeys=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,o)=>n.filter(u=>o.includes(u))),mapObject=(e,t)=>Object.keys(t).reduce((n,o)=>_objectSpread$h(_objectSpread$h({},n),{},{[o]:e(o,t[o])}),{});function ownKeys$g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$g(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$g(Object(n),!0).forEach(function(o){_defineProperty$h(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$g(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$h(e,t,n){return(t=_toPropertyKey$h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$h(e){var t=_toPrimitive$h(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$h(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var alpha$1=(e,t,n)=>e+(t-e)*n,needContinue=e=>{var{from:t,to:n}=e;return t!==n},calStepperVals=(e,t,n)=>{var o=mapObject((u,d)=>{if(needContinue(d)){var[f,v]=e(d.from,d.to,d.velocity);return _objectSpread$g(_objectSpread$g({},d),{},{from:f,velocity:v})}return d},t);return n<1?mapObject((u,d)=>needContinue(d)?_objectSpread$g(_objectSpread$g({},d),{},{velocity:alpha$1(d.velocity,o[u].velocity,n),from:alpha$1(d.from,o[u].from,n)}):d,t):calStepperVals(e,o,n-1)};function createStepperUpdate(e,t,n,o,u,d){var f,v=o.reduce((D,O)=>_objectSpread$g(_objectSpread$g({},D),{},{[O]:{from:e[O],velocity:0,to:t[O]}}),{}),w=()=>mapObject((D,O)=>O.from,v),E=()=>!Object.values(v).filter(needContinue).length,C=null,_=D=>{f||(f=D);var O=D-f,M=O/n.dt;v=calStepperVals(n,v,M),u(_objectSpread$g(_objectSpread$g(_objectSpread$g({},e),t),w())),f=D,E()||(C=d.setTimeout(_))};return()=>(C=d.setTimeout(_),()=>{C()})}function createTimingUpdate(e,t,n,o,u,d,f){var v=null,w=u.reduce((_,D)=>_objectSpread$g(_objectSpread$g({},_),{},{[D]:[e[D],t[D]]}),{}),E,C=_=>{E||(E=_);var D=(_-E)/o,O=mapObject((N,I)=>alpha$1(...I,n(D)),w);if(d(_objectSpread$g(_objectSpread$g(_objectSpread$g({},e),t),O)),D<1)v=f.setTimeout(C);else{var M=mapObject((N,I)=>alpha$1(...I,n(1)),w);d(_objectSpread$g(_objectSpread$g(_objectSpread$g({},e),t),M))}};return()=>(v=f.setTimeout(C),()=>{v()})}const configUpdate=(e,t,n,o,u,d)=>{var f=getIntersectionKeys(e,t);return n.isStepper===!0?createStepperUpdate(e,t,n,f,u,d):createTimingUpdate(e,t,n,o,f,u,d)};var ACCURACY=1e-4,cubicBezierFactor=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],evaluatePolynomial=(e,t)=>e.map((n,o)=>n*t**o).reduce((n,o)=>n+o),cubicBezier$1=(e,t)=>n=>{var o=cubicBezierFactor(e,t);return evaluatePolynomial(o,n)},derivativeCubicBezier=(e,t)=>n=>{var o=cubicBezierFactor(e,t),u=[...o.map((d,f)=>d*f).slice(1),0];return evaluatePolynomial(u,n)},configBezier=function(){for(var t,n,o,u,d=arguments.length,f=new Array(d),v=0;v<d;v++)f[v]=arguments[v];if(f.length===1)switch(f[0]){case"linear":[t,o,n,u]=[0,0,1,1];break;case"ease":[t,o,n,u]=[.25,.1,.25,1];break;case"ease-in":[t,o,n,u]=[.42,0,1,1];break;case"ease-out":[t,o,n,u]=[.42,0,.58,1];break;case"ease-in-out":[t,o,n,u]=[0,0,.58,1];break;default:{var w=f[0].split("(");w[0]==="cubic-bezier"&&w[1].split(")")[0].split(",").length===4&&([t,o,n,u]=w[1].split(")")[0].split(",").map(M=>parseFloat(M)))}}else f.length===4&&([t,o,n,u]=f);var E=cubicBezier$1(t,n),C=cubicBezier$1(o,u),_=derivativeCubicBezier(t,n),D=M=>M>1?1:M<0?0:M,O=M=>{for(var N=M>1?1:M,I=N,B=0;B<8;++B){var V=E(I)-N,j=_(I);if(Math.abs(V-N)<ACCURACY||j<ACCURACY)return C(I);I=D(I-V/j)}return C(I)};return O.isStepper=!1,O},configSpring=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:o=8,dt:u=17}=t,d=(f,v,w)=>{var E=-(f-v)*n,C=w*o,_=w+(E-C)*u/1e3,D=w*u/1e3+f;return Math.abs(D-v)<ACCURACY&&Math.abs(_)<ACCURACY?[v,0]:[D,_]};return d.isStepper=!0,d.dt=u,d},configEasing=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return configBezier(e);case"spring":return configSpring();default:if(e.split("(")[0]==="cubic-bezier")return configBezier(e)}return typeof e=="function"?e:null};function createAnimateManager(e){var t,n=()=>null,o=!1,u=null,d=f=>{if(!o){if(Array.isArray(f)){if(!f.length)return;var v=f,[w,...E]=v;if(typeof w=="number"){u=e.setTimeout(d.bind(null,E),w);return}d(w),u=e.setTimeout(d.bind(null,E));return}typeof f=="string"&&(t=f,n(t)),typeof f=="object"&&(t=f,n(t)),typeof f=="function"&&f()}};return{stop:()=>{o=!0},start:f=>{o=!1,u&&(u(),u=null),d(f)},subscribe:f=>(n=f,()=>{n=()=>null}),getTimeoutController:()=>e}}class RequestAnimationFrameTimeoutController{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=performance.now(),u=null,d=f=>{f-o>=n?t(f):typeof requestAnimationFrame=="function"&&(u=requestAnimationFrame(d))};return u=requestAnimationFrame(d),()=>{cancelAnimationFrame(u)}}}function createDefaultAnimationManager(){return createAnimateManager(new RequestAnimationFrameTimeoutController)}var AnimationManagerContext=reactExports.createContext(createDefaultAnimationManager);function useAnimationManager(e,t){var n=reactExports.useContext(AnimationManagerContext);return reactExports.useMemo(()=>t??n(e),[e,t,n])}var defaultJavascriptAnimateProps={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},from={t:0},to={t:1};function JavascriptAnimate(e){var t=resolveDefaultProps(e,defaultJavascriptAnimateProps),{isActive:n,canBegin:o,duration:u,easing:d,begin:f,onAnimationEnd:v,onAnimationStart:w,children:E}=t,C=useAnimationManager(t.animationId,t.animationManager),[_,D]=reactExports.useState(n?from:to),O=reactExports.useRef(null);return reactExports.useEffect(()=>{n||D(to)},[n]),reactExports.useEffect(()=>{if(!n||!o)return noop$4;var M=configUpdate(from,to,configEasing(d),u,D,C.getTimeoutController()),N=()=>{O.current=M()};return C.start([w,f,N,u,v]),()=>{C.stop(),O.current&&O.current(),v()}},[n,o,u,d,f,w,v,C]),E(_.t)}function useAnimationId(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=reactExports.useRef(uniqueId(t)),o=reactExports.useRef(e);return o.current!==e&&(n.current=uniqueId(t),o.current=e),n.current}var _excluded$9=["radius"],_excluded2$3=["radius"];function ownKeys$f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$f(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$f(Object(n),!0).forEach(function(o){_defineProperty$g(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$f(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$g(e,t,n){return(t=_toPropertyKey$g(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$g(e){var t=_toPrimitive$g(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$g(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _extends$a(){return _extends$a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$a.apply(null,arguments)}function _objectWithoutProperties$9(e,t){if(e==null)return{};var n,o,u=_objectWithoutPropertiesLoose$9(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(o=0;o<d.length;o++)n=d[o],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(u[n]=e[n])}return u}function _objectWithoutPropertiesLoose$9(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;n[o]=e[o]}return n}var getRectanglePath=(e,t,n,o,u)=>{var d=Math.min(Math.abs(n)/2,Math.abs(o)/2),f=o>=0?1:-1,v=n>=0?1:-1,w=o>=0&&n>=0||o<0&&n<0?1:0,E;if(d>0&&u instanceof Array){for(var C=[0,0,0,0],_=0,D=4;_<D;_++)C[_]=u[_]>d?d:u[_];E="M".concat(e,",").concat(t+f*C[0]),C[0]>0&&(E+="A ".concat(C[0],",").concat(C[0],",0,0,").concat(w,",").concat(e+v*C[0],",").concat(t)),E+="L ".concat(e+n-v*C[1],",").concat(t),C[1]>0&&(E+="A ".concat(C[1],",").concat(C[1],",0,0,").concat(w,`,
        `).concat(e+n,",").concat(t+f*C[1])),E+="L ".concat(e+n,",").concat(t+o-f*C[2]),C[2]>0&&(E+="A ".concat(C[2],",").concat(C[2],",0,0,").concat(w,`,
        `).concat(e+n-v*C[2],",").concat(t+o)),E+="L ".concat(e+v*C[3],",").concat(t+o),C[3]>0&&(E+="A ".concat(C[3],",").concat(C[3],",0,0,").concat(w,`,
        `).concat(e,",").concat(t+o-f*C[3])),E+="Z"}else if(d>0&&u===+u&&u>0){var O=Math.min(d,u);E="M ".concat(e,",").concat(t+f*O,`
            A `).concat(O,",").concat(O,",0,0,").concat(w,",").concat(e+v*O,",").concat(t,`
            L `).concat(e+n-v*O,",").concat(t,`
            A `).concat(O,",").concat(O,",0,0,").concat(w,",").concat(e+n,",").concat(t+f*O,`
            L `).concat(e+n,",").concat(t+o-f*O,`
            A `).concat(O,",").concat(O,",0,0,").concat(w,",").concat(e+n-v*O,",").concat(t+o,`
            L `).concat(e+v*O,",").concat(t+o,`
            A `).concat(O,",").concat(O,",0,0,").concat(w,",").concat(e,",").concat(t+o-f*O," Z")}else E="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(o," h ").concat(-n," Z");return E},defaultProps$4={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Rectangle=e=>{var t=resolveDefaultProps(e,defaultProps$4),n=reactExports.useRef(null),[o,u]=reactExports.useState(-1);reactExports.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var se=n.current.getTotalLength();se&&u(se)}catch{}},[]);var{x:d,y:f,width:v,height:w,radius:E,className:C}=t,{animationEasing:_,animationDuration:D,animationBegin:O,isAnimationActive:M,isUpdateAnimationActive:N}=t,I=reactExports.useRef(v),B=reactExports.useRef(w),V=reactExports.useRef(d),j=reactExports.useRef(f),q=reactExports.useMemo(()=>({x:d,y:f,width:v,height:w,radius:E}),[d,f,v,w,E]),z=useAnimationId(q,"rectangle-");if(d!==+d||f!==+f||v!==+v||w!==+w||v===0||w===0)return null;var $=clsx("recharts-rectangle",C);if(!N){var ee=svgPropertiesAndEvents(t),{radius:ie}=ee,ae=_objectWithoutProperties$9(ee,_excluded$9);return reactExports.createElement("path",_extends$a({},ae,{radius:typeof E=="number"?E:void 0,className:$,d:getRectanglePath(d,f,v,w,E)}))}var pe=I.current,he=B.current,be=V.current,xe=j.current,Ee="0px ".concat(o===-1?1:o,"px"),we="".concat(o,"px 0px"),oe=getTransitionVal(["strokeDasharray"],D,typeof _=="string"?_:void 0);return reactExports.createElement(JavascriptAnimate,{animationId:z,key:z,canBegin:o>0,duration:D,easing:_,isActive:N,begin:O},se=>{var J=interpolate$2(pe,v,se),Q=interpolate$2(he,w,se),Z=interpolate$2(be,d,se),K=interpolate$2(xe,f,se);n.current&&(I.current=J,B.current=Q,V.current=Z,j.current=K);var ne;M?se>0?ne={transition:oe,strokeDasharray:we}:ne={strokeDasharray:Ee}:ne={strokeDasharray:we};var ue=svgPropertiesAndEvents(t),{radius:ye}=ue,fe=_objectWithoutProperties$9(ue,_excluded2$3);return reactExports.createElement("path",_extends$a({},fe,{radius:typeof E=="number"?E:void 0,className:$,d:getRectanglePath(Z,K,J,Q,E),ref:n,style:_objectSpread$f(_objectSpread$f({},ne),t.style)}))})};function getRadialCursorPoints(e){var{cx:t,cy:n,radius:o,startAngle:u,endAngle:d}=e,f=polarToCartesian(t,n,o,u),v=polarToCartesian(t,n,o,d);return{points:[f,v],cx:t,cy:n,radius:o,startAngle:u,endAngle:d}}function _extends$9(){return _extends$9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$9.apply(null,arguments)}var getDeltaAngle$1=(e,t)=>{var n=mathSign(t-e),o=Math.min(Math.abs(t-e),359.999);return n*o},getTangentCircle=e=>{var{cx:t,cy:n,radius:o,angle:u,sign:d,isExternal:f,cornerRadius:v,cornerIsExternal:w}=e,E=v*(f?1:-1)+o,C=Math.asin(v/E)/RADIAN,_=w?u:u+d*C,D=polarToCartesian(t,n,E,_),O=polarToCartesian(t,n,o,_),M=w?u-d*C:u,N=polarToCartesian(t,n,E*Math.cos(C*RADIAN),M);return{center:D,circleTangency:O,lineTangency:N,theta:C}},getSectorPath=e=>{var{cx:t,cy:n,innerRadius:o,outerRadius:u,startAngle:d,endAngle:f}=e,v=getDeltaAngle$1(d,f),w=d+v,E=polarToCartesian(t,n,u,d),C=polarToCartesian(t,n,u,w),_="M ".concat(E.x,",").concat(E.y,`
    A `).concat(u,",").concat(u,`,0,
    `).concat(+(Math.abs(v)>180),",").concat(+(d>w),`,
    `).concat(C.x,",").concat(C.y,`
  `);if(o>0){var D=polarToCartesian(t,n,o,d),O=polarToCartesian(t,n,o,w);_+="L ".concat(O.x,",").concat(O.y,`
            A `).concat(o,",").concat(o,`,0,
            `).concat(+(Math.abs(v)>180),",").concat(+(d<=w),`,
            `).concat(D.x,",").concat(D.y," Z")}else _+="L ".concat(t,",").concat(n," Z");return _},getSectorWithCorner=e=>{var{cx:t,cy:n,innerRadius:o,outerRadius:u,cornerRadius:d,forceCornerRadius:f,cornerIsExternal:v,startAngle:w,endAngle:E}=e,C=mathSign(E-w),{circleTangency:_,lineTangency:D,theta:O}=getTangentCircle({cx:t,cy:n,radius:u,angle:w,sign:C,cornerRadius:d,cornerIsExternal:v}),{circleTangency:M,lineTangency:N,theta:I}=getTangentCircle({cx:t,cy:n,radius:u,angle:E,sign:-C,cornerRadius:d,cornerIsExternal:v}),B=v?Math.abs(w-E):Math.abs(w-E)-O-I;if(B<0)return f?"M ".concat(D.x,",").concat(D.y,`
        a`).concat(d,",").concat(d,",0,0,1,").concat(d*2,`,0
        a`).concat(d,",").concat(d,",0,0,1,").concat(-d*2,`,0
      `):getSectorPath({cx:t,cy:n,innerRadius:o,outerRadius:u,startAngle:w,endAngle:E});var V="M ".concat(D.x,",").concat(D.y,`
    A`).concat(d,",").concat(d,",0,0,").concat(+(C<0),",").concat(_.x,",").concat(_.y,`
    A`).concat(u,",").concat(u,",0,").concat(+(B>180),",").concat(+(C<0),",").concat(M.x,",").concat(M.y,`
    A`).concat(d,",").concat(d,",0,0,").concat(+(C<0),",").concat(N.x,",").concat(N.y,`
  `);if(o>0){var{circleTangency:j,lineTangency:q,theta:z}=getTangentCircle({cx:t,cy:n,radius:o,angle:w,sign:C,isExternal:!0,cornerRadius:d,cornerIsExternal:v}),{circleTangency:$,lineTangency:ee,theta:ie}=getTangentCircle({cx:t,cy:n,radius:o,angle:E,sign:-C,isExternal:!0,cornerRadius:d,cornerIsExternal:v}),ae=v?Math.abs(w-E):Math.abs(w-E)-z-ie;if(ae<0&&d===0)return"".concat(V,"L").concat(t,",").concat(n,"Z");V+="L".concat(ee.x,",").concat(ee.y,`
      A`).concat(d,",").concat(d,",0,0,").concat(+(C<0),",").concat($.x,",").concat($.y,`
      A`).concat(o,",").concat(o,",0,").concat(+(ae>180),",").concat(+(C>0),",").concat(j.x,",").concat(j.y,`
      A`).concat(d,",").concat(d,",0,0,").concat(+(C<0),",").concat(q.x,",").concat(q.y,"Z")}else V+="L".concat(t,",").concat(n,"Z");return V},defaultProps$3={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Sector=e=>{var t=resolveDefaultProps(e,defaultProps$3),{cx:n,cy:o,innerRadius:u,outerRadius:d,cornerRadius:f,forceCornerRadius:v,cornerIsExternal:w,startAngle:E,endAngle:C,className:_}=t;if(d<u||E===C)return null;var D=clsx("recharts-sector",_),O=d-u,M=getPercentValue(f,O,0,!0),N;return M>0&&Math.abs(E-C)<360?N=getSectorWithCorner({cx:n,cy:o,innerRadius:u,outerRadius:d,cornerRadius:Math.min(M,O/2),forceCornerRadius:v,cornerIsExternal:w,startAngle:E,endAngle:C}):N=getSectorPath({cx:n,cy:o,innerRadius:u,outerRadius:d,startAngle:E,endAngle:C}),reactExports.createElement("path",_extends$9({},svgPropertiesAndEvents(t),{className:D,d:N}))};function getCursorPoints(e,t,n){var o,u,d,f;if(e==="horizontal")o=t.x,d=o,u=n.top,f=n.top+n.height;else if(e==="vertical")u=t.y,f=u,o=n.left,d=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:v,cy:w,innerRadius:E,outerRadius:C,angle:_}=t,D=polarToCartesian(v,w,E,_),O=polarToCartesian(v,w,C,_);o=D.x,u=D.y,d=O.x,f=O.y}else return getRadialCursorPoints(t);return[{x:o,y:u},{x:d,y:f}]}var range$4={},toFinite={},toNumber={},hasRequiredToNumber;function requireToNumber(){return hasRequiredToNumber||(hasRequiredToNumber=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIsSymbol();function n(o){return t.isSymbol(o)?NaN:Number(o)}e.toNumber=n})(toNumber)),toNumber}var hasRequiredToFinite;function requireToFinite(){return hasRequiredToFinite||(hasRequiredToFinite=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireToNumber();function n(o){return o?(o=t.toNumber(o),o===1/0||o===-1/0?(o<0?-1:1)*Number.MAX_VALUE:o===o?o:0):o===0?o:0}e.toFinite=n})(toFinite)),toFinite}var hasRequiredRange$1;function requireRange$1(){return hasRequiredRange$1||(hasRequiredRange$1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIsIterateeCall(),n=requireToFinite();function o(u,d,f){f&&typeof f!="number"&&t.isIterateeCall(u,d,f)&&(d=f=void 0),u=n.toFinite(u),d===void 0?(d=u,u=0):d=n.toFinite(d),f=f===void 0?u<d?1:-1:n.toFinite(f);const v=Math.max(Math.ceil((d-u)/(f||1)),0),w=new Array(v);for(let E=0;E<v;E++)w[E]=u,u+=f;return w}e.range=o})(range$4)),range$4}var range$3,hasRequiredRange;function requireRange(){return hasRequiredRange||(hasRequiredRange=1,range$3=requireRange$1().range),range$3}var rangeExports=requireRange();const range$2=getDefaultExportFromCjs(rangeExports);function ascending(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function descending(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function bisector(e){let t,n,o;e.length!==2?(t=ascending,n=(v,w)=>ascending(e(v),w),o=(v,w)=>e(v)-w):(t=e===ascending||e===descending?e:zero$1,n=e,o=e);function u(v,w,E=0,C=v.length){if(E<C){if(t(w,w)!==0)return C;do{const _=E+C>>>1;n(v[_],w)<0?E=_+1:C=_}while(E<C)}return E}function d(v,w,E=0,C=v.length){if(E<C){if(t(w,w)!==0)return C;do{const _=E+C>>>1;n(v[_],w)<=0?E=_+1:C=_}while(E<C)}return E}function f(v,w,E=0,C=v.length){const _=u(v,w,E,C-1);return _>E&&o(v[_-1],w)>-o(v[_],w)?_-1:_}return{left:u,center:f,right:d}}function zero$1(){return 0}function number$3(e){return e===null?NaN:+e}function*numbers(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const ascendingBisect=bisector(ascending),bisectRight=ascendingBisect.right;bisector(number$3).center;class InternMap extends Map{constructor(t,n=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[o,u]of t)this.set(o,u)}get(t){return super.get(intern_get(this,t))}has(t){return super.has(intern_get(this,t))}set(t,n){return super.set(intern_set(this,t),n)}delete(t){return super.delete(intern_delete(this,t))}}function intern_get({_intern:e,_key:t},n){const o=t(n);return e.has(o)?e.get(o):n}function intern_set({_intern:e,_key:t},n){const o=t(n);return e.has(o)?e.get(o):(e.set(o,n),n)}function intern_delete({_intern:e,_key:t},n){const o=t(n);return e.has(o)&&(n=e.get(o),e.delete(o)),n}function keyof(e){return e!==null&&typeof e=="object"?e.valueOf():e}function compareDefined(e=ascending){if(e===ascending)return ascendingDefined;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const o=e(t,n);return o||o===0?o:(e(n,n)===0)-(e(t,t)===0)}}function ascendingDefined(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(e,t,n){const o=(t-e)/Math.max(0,n),u=Math.floor(Math.log10(o)),d=o/Math.pow(10,u),f=d>=e10?10:d>=e5?5:d>=e2?2:1;let v,w,E;return u<0?(E=Math.pow(10,-u)/f,v=Math.round(e*E),w=Math.round(t*E),v/E<e&&++v,w/E>t&&--w,E=-E):(E=Math.pow(10,u)*f,v=Math.round(e/E),w=Math.round(t/E),v*E<e&&++v,w*E>t&&--w),w<v&&.5<=n&&n<2?tickSpec(e,t,n*2):[v,w,E]}function ticks(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const o=t<e,[u,d,f]=o?tickSpec(t,e,n):tickSpec(e,t,n);if(!(d>=u))return[];const v=d-u+1,w=new Array(v);if(o)if(f<0)for(let E=0;E<v;++E)w[E]=(d-E)/-f;else for(let E=0;E<v;++E)w[E]=(d-E)*f;else if(f<0)for(let E=0;E<v;++E)w[E]=(u+E)/-f;else for(let E=0;E<v;++E)w[E]=(u+E)*f;return w}function tickIncrement(e,t,n){return t=+t,e=+e,n=+n,tickSpec(e,t,n)[2]}function tickStep(e,t,n){t=+t,e=+e,n=+n;const o=t<e,u=o?tickIncrement(t,e,n):tickIncrement(e,t,n);return(o?-1:1)*(u<0?1/-u:u)}function max(e,t){let n;for(const o of e)o!=null&&(n<o||n===void 0&&o>=o)&&(n=o);return n}function min(e,t){let n;for(const o of e)o!=null&&(n>o||n===void 0&&o>=o)&&(n=o);return n}function quickselect(e,t,n=0,o=1/0,u){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),o=Math.floor(Math.min(e.length-1,o)),!(n<=t&&t<=o))return e;for(u=u===void 0?ascendingDefined:compareDefined(u);o>n;){if(o-n>600){const w=o-n+1,E=t-n+1,C=Math.log(w),_=.5*Math.exp(2*C/3),D=.5*Math.sqrt(C*_*(w-_)/w)*(E-w/2<0?-1:1),O=Math.max(n,Math.floor(t-E*_/w+D)),M=Math.min(o,Math.floor(t+(w-E)*_/w+D));quickselect(e,t,O,M,u)}const d=e[t];let f=n,v=o;for(swap(e,n,t),u(e[o],d)>0&&swap(e,n,o);f<v;){for(swap(e,f,v),++f,--v;u(e[f],d)<0;)++f;for(;u(e[v],d)>0;)--v}u(e[n],d)===0?swap(e,n,v):(++v,swap(e,v,o)),v<=t&&(n=v+1),t<=v&&(o=v-1)}return e}function swap(e,t,n){const o=e[t];e[t]=e[n],e[n]=o}function quantile$1(e,t,n){if(e=Float64Array.from(numbers(e)),!(!(o=e.length)||isNaN(t=+t))){if(t<=0||o<2)return min(e);if(t>=1)return max(e);var o,u=(o-1)*t,d=Math.floor(u),f=max(quickselect(e,d).subarray(0,d+1)),v=min(e.subarray(d+1));return f+(v-f)*(u-d)}}function quantileSorted(e,t,n=number$3){if(!(!(o=e.length)||isNaN(t=+t))){if(t<=0||o<2)return+n(e[0],0,e);if(t>=1)return+n(e[o-1],o-1,e);var o,u=(o-1)*t,d=Math.floor(u),f=+n(e[d],d,e),v=+n(e[d+1],d+1,e);return f+(v-f)*(u-d)}}function range$1(e,t,n){e=+e,t=+t,n=(u=arguments.length)<2?(t=e,e=0,1):u<3?1:+n;for(var o=-1,u=Math.max(0,Math.ceil((t-e)/n))|0,d=new Array(u);++o<u;)d[o]=e+o*n;return d}function initRange(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function initInterpolator(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const implicit=Symbol("implicit");function ordinal(){var e=new InternMap,t=[],n=[],o=implicit;function u(d){let f=e.get(d);if(f===void 0){if(o!==implicit)return o;e.set(d,f=t.push(d)-1)}return n[f%n.length]}return u.domain=function(d){if(!arguments.length)return t.slice();t=[],e=new InternMap;for(const f of d)e.has(f)||e.set(f,t.push(f)-1);return u},u.range=function(d){return arguments.length?(n=Array.from(d),u):n.slice()},u.unknown=function(d){return arguments.length?(o=d,u):o},u.copy=function(){return ordinal(t,n).unknown(o)},initRange.apply(u,arguments),u}function band(){var e=ordinal().unknown(void 0),t=e.domain,n=e.range,o=0,u=1,d,f,v=!1,w=0,E=0,C=.5;delete e.unknown;function _(){var D=t().length,O=u<o,M=O?u:o,N=O?o:u;d=(N-M)/Math.max(1,D-w+E*2),v&&(d=Math.floor(d)),M+=(N-M-d*(D-w))*C,f=d*(1-w),v&&(M=Math.round(M),f=Math.round(f));var I=range$1(D).map(function(B){return M+d*B});return n(O?I.reverse():I)}return e.domain=function(D){return arguments.length?(t(D),_()):t()},e.range=function(D){return arguments.length?([o,u]=D,o=+o,u=+u,_()):[o,u]},e.rangeRound=function(D){return[o,u]=D,o=+o,u=+u,v=!0,_()},e.bandwidth=function(){return f},e.step=function(){return d},e.round=function(D){return arguments.length?(v=!!D,_()):v},e.padding=function(D){return arguments.length?(w=Math.min(1,E=+D),_()):w},e.paddingInner=function(D){return arguments.length?(w=Math.min(1,D),_()):w},e.paddingOuter=function(D){return arguments.length?(E=+D,_()):E},e.align=function(D){return arguments.length?(C=Math.max(0,Math.min(1,D)),_()):C},e.copy=function(){return band(t(),[o,u]).round(v).paddingInner(w).paddingOuter(E).align(C)},initRange.apply(_(),arguments)}function pointish(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return pointish(t())},e}function point(){return pointish(band.apply(null,arguments).paddingInner(1))}function define(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function extend$1(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color$1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color$1(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=reHex.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?rgbn(t):n===3?new Rgb(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?rgba$1(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?rgba$1(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=reRgbInteger.exec(e))?new Rgb(t[1],t[2],t[3],1):(t=reRgbPercent.exec(e))?new Rgb(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=reRgbaInteger.exec(e))?rgba$1(t[1],t[2],t[3],t[4]):(t=reRgbaPercent.exec(e))?rgba$1(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=reHslPercent.exec(e))?hsla$1(t[1],t[2]/100,t[3]/100,1):(t=reHslaPercent.exec(e))?hsla$1(t[1],t[2]/100,t[3]/100,t[4]):named.hasOwnProperty(e)?rgbn(named[e]):e==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(e){return new Rgb(e>>16&255,e>>8&255,e&255,1)}function rgba$1(e,t,n,o){return o<=0&&(e=t=n=NaN),new Rgb(e,t,n,o)}function rgbConvert(e){return e instanceof Color||(e=color$1(e)),e?(e=e.rgb(),new Rgb(e.r,e.g,e.b,e.opacity)):new Rgb}function rgb$1(e,t,n,o){return arguments.length===1?rgbConvert(e):new Rgb(e,t,n,o??1)}function Rgb(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}define(Rgb,rgb$1,extend$1(Color,{brighter(e){return e=e==null?brighter:Math.pow(brighter,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?darker:Math.pow(darker,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex$1(this.r)}${hex$1(this.g)}${hex$1(this.b)}`}function rgb_formatHex8(){return`#${hex$1(this.r)}${hex$1(this.g)}${hex$1(this.b)}${hex$1((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const e=clampa(this.opacity);return`${e===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${e===1?")":`, ${e})`}`}function clampa(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function clampi(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function hex$1(e){return e=clampi(e),(e<16?"0":"")+e.toString(16)}function hsla$1(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Hsl(e,t,n,o)}function hslConvert(e){if(e instanceof Hsl)return new Hsl(e.h,e.s,e.l,e.opacity);if(e instanceof Color||(e=color$1(e)),!e)return new Hsl;if(e instanceof Hsl)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,u=Math.min(t,n,o),d=Math.max(t,n,o),f=NaN,v=d-u,w=(d+u)/2;return v?(t===d?f=(n-o)/v+(n<o)*6:n===d?f=(o-t)/v+2:f=(t-n)/v+4,v/=w<.5?d+u:2-d-u,f*=60):v=w>0&&w<1?0:f,new Hsl(f,v,w,e.opacity)}function hsl(e,t,n,o){return arguments.length===1?hslConvert(e):new Hsl(e,t,n,o??1)}function Hsl(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}define(Hsl,hsl,extend$1(Color,{brighter(e){return e=e==null?brighter:Math.pow(brighter,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?darker:Math.pow(darker,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,u=2*n-o;return new Rgb(hsl2rgb(e>=240?e-240:e+120,u,o),hsl2rgb(e,u,o),hsl2rgb(e<120?e+240:e-120,u,o),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=clampa(this.opacity);return`${e===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function clamph(e){return e=(e||0)%360,e<0?e+360:e}function clampt(e){return Math.max(0,Math.min(1,e||0))}function hsl2rgb(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const constant=e=>()=>e;function linear$1(e,t){return function(n){return e+n*t}}function exponential(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function gamma(e){return(e=+e)==1?nogamma:function(t,n){return n-t?exponential(t,n,e):constant(isNaN(t)?n:t)}}function nogamma(e,t){var n=t-e;return n?linear$1(e,n):constant(isNaN(e)?t:e)}const rgb=(function e(t){var n=gamma(t);function o(u,d){var f=n((u=rgb$1(u)).r,(d=rgb$1(d)).r),v=n(u.g,d.g),w=n(u.b,d.b),E=nogamma(u.opacity,d.opacity);return function(C){return u.r=f(C),u.g=v(C),u.b=w(C),u.opacity=E(C),u+""}}return o.gamma=e,o})(1);function numberArray(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,o=t.slice(),u;return function(d){for(u=0;u<n;++u)o[u]=e[u]*(1-d)+t[u]*d;return o}}function isNumberArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function genericArray(e,t){var n=t?t.length:0,o=e?Math.min(n,e.length):0,u=new Array(o),d=new Array(n),f;for(f=0;f<o;++f)u[f]=interpolate$1(e[f],t[f]);for(;f<n;++f)d[f]=t[f];return function(v){for(f=0;f<o;++f)d[f]=u[f](v);return d}}function date$1(e,t){var n=new Date;return e=+e,t=+t,function(o){return n.setTime(e*(1-o)+t*o),n}}function interpolateNumber(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function object(e,t){var n={},o={},u;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(u in t)u in e?n[u]=interpolate$1(e[u],t[u]):o[u]=t[u];return function(d){for(u in n)o[u]=n[u](d);return o}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(e){return function(){return e}}function one(e){return function(t){return e(t)+""}}function string(e,t){var n=reA.lastIndex=reB.lastIndex=0,o,u,d,f=-1,v=[],w=[];for(e=e+"",t=t+"";(o=reA.exec(e))&&(u=reB.exec(t));)(d=u.index)>n&&(d=t.slice(n,d),v[f]?v[f]+=d:v[++f]=d),(o=o[0])===(u=u[0])?v[f]?v[f]+=u:v[++f]=u:(v[++f]=null,w.push({i:f,x:interpolateNumber(o,u)})),n=reB.lastIndex;return n<t.length&&(d=t.slice(n),v[f]?v[f]+=d:v[++f]=d),v.length<2?w[0]?one(w[0].x):zero(t):(t=w.length,function(E){for(var C=0,_;C<t;++C)v[(_=w[C]).i]=_.x(E);return v.join("")})}function interpolate$1(e,t){var n=typeof t,o;return t==null||n==="boolean"?constant(t):(n==="number"?interpolateNumber:n==="string"?(o=color$1(t))?(t=o,rgb):string:t instanceof color$1?rgb:t instanceof Date?date$1:isNumberArray(t)?numberArray:Array.isArray(t)?genericArray:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?object:interpolateNumber)(e,t)}function interpolateRound(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function piecewise(e,t){t===void 0&&(t=e,e=interpolate$1);for(var n=0,o=t.length-1,u=t[0],d=new Array(o<0?0:o);n<o;)d[n]=e(u,u=t[++n]);return function(f){var v=Math.max(0,Math.min(o-1,Math.floor(f*=o)));return d[v](f-v)}}function constants$1(e){return function(){return e}}function number$2(e){return+e}var unit=[0,1];function identity$3(e){return e}function normalize(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:constants$1(isNaN(t)?NaN:.5)}function clamper(e,t){var n;return e>t&&(n=e,e=t,t=n),function(o){return Math.max(e,Math.min(t,o))}}function bimap(e,t,n){var o=e[0],u=e[1],d=t[0],f=t[1];return u<o?(o=normalize(u,o),d=n(f,d)):(o=normalize(o,u),d=n(d,f)),function(v){return d(o(v))}}function polymap(e,t,n){var o=Math.min(e.length,t.length)-1,u=new Array(o),d=new Array(o),f=-1;for(e[o]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++f<o;)u[f]=normalize(e[f],e[f+1]),d[f]=n(t[f],t[f+1]);return function(v){var w=bisectRight(e,v,1,o)-1;return d[w](u[w](v))}}function copy$1(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function transformer$2(){var e=unit,t=unit,n=interpolate$1,o,u,d,f=identity$3,v,w,E;function C(){var D=Math.min(e.length,t.length);return f!==identity$3&&(f=clamper(e[0],e[D-1])),v=D>2?polymap:bimap,w=E=null,_}function _(D){return D==null||isNaN(D=+D)?d:(w||(w=v(e.map(o),t,n)))(o(f(D)))}return _.invert=function(D){return f(u((E||(E=v(t,e.map(o),interpolateNumber)))(D)))},_.domain=function(D){return arguments.length?(e=Array.from(D,number$2),C()):e.slice()},_.range=function(D){return arguments.length?(t=Array.from(D),C()):t.slice()},_.rangeRound=function(D){return t=Array.from(D),n=interpolateRound,C()},_.clamp=function(D){return arguments.length?(f=D?!0:identity$3,C()):f!==identity$3},_.interpolate=function(D){return arguments.length?(n=D,C()):n},_.unknown=function(D){return arguments.length?(d=D,_):d},function(D,O){return o=D,u=O,C()}}function continuous(){return transformer$2()(identity$3,identity$3)}function formatDecimal(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function formatDecimalParts(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,o=e.slice(0,n);return[o.length>1?o[0]+o.slice(2):o,+e.slice(n+1)]}function exponent(e){return e=formatDecimalParts(Math.abs(e)),e?e[1]:NaN}function formatGroup(e,t){return function(n,o){for(var u=n.length,d=[],f=0,v=e[0],w=0;u>0&&v>0&&(w+v+1>o&&(v=Math.max(1,o-w)),d.push(n.substring(u-=v,u+v)),!((w+=v+1)>o));)v=e[f=(f+1)%e.length];return d.reverse().join(t)}}function formatNumerals(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(e){if(!(t=re.exec(e)))throw new Error("invalid format: "+e);var t;return new FormatSpecifier({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(e){e:for(var t=e.length,n=1,o=-1,u;n<t;++n)switch(e[n]){case".":o=u=n;break;case"0":o===0&&(o=n),u=n;break;default:if(!+e[n])break e;o>0&&(o=0);break}return o>0?e.slice(0,o)+e.slice(u+1):e}var prefixExponent;function formatPrefixAuto(e,t){var n=formatDecimalParts(e,t);if(!n)return e+"";var o=n[0],u=n[1],d=u-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(u/3)))*3)+1,f=o.length;return d===f?o:d>f?o+new Array(d-f+1).join("0"):d>0?o.slice(0,d)+"."+o.slice(d):"0."+new Array(1-d).join("0")+formatDecimalParts(e,Math.max(0,t+d-1))[0]}function formatRounded(e,t){var n=formatDecimalParts(e,t);if(!n)return e+"";var o=n[0],u=n[1];return u<0?"0."+new Array(-u).join("0")+o:o.length>u+1?o.slice(0,u+1)+"."+o.slice(u+1):o+new Array(u-o.length+2).join("0")}const formatTypes={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:formatDecimal,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>formatRounded(e*100,t),r:formatRounded,s:formatPrefixAuto,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function identity$2(e){return e}var map$1=Array.prototype.map,prefixes=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$1(e){var t=e.grouping===void 0||e.thousands===void 0?identity$2:formatGroup(map$1.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",o=e.currency===void 0?"":e.currency[1]+"",u=e.decimal===void 0?".":e.decimal+"",d=e.numerals===void 0?identity$2:formatNumerals(map$1.call(e.numerals,String)),f=e.percent===void 0?"%":e.percent+"",v=e.minus===void 0?"":e.minus+"",w=e.nan===void 0?"NaN":e.nan+"";function E(_){_=formatSpecifier(_);var D=_.fill,O=_.align,M=_.sign,N=_.symbol,I=_.zero,B=_.width,V=_.comma,j=_.precision,q=_.trim,z=_.type;z==="n"?(V=!0,z="g"):formatTypes[z]||(j===void 0&&(j=12),q=!0,z="g"),(I||D==="0"&&O==="=")&&(I=!0,D="0",O="=");var $=N==="$"?n:N==="#"&&/[boxX]/.test(z)?"0"+z.toLowerCase():"",ee=N==="$"?o:/[%p]/.test(z)?f:"",ie=formatTypes[z],ae=/[defgprs%]/.test(z);j=j===void 0?6:/[gprs]/.test(z)?Math.max(1,Math.min(21,j)):Math.max(0,Math.min(20,j));function pe(he){var be=$,xe=ee,Ee,we,oe;if(z==="c")xe=ie(he)+xe,he="";else{he=+he;var se=he<0||1/he<0;if(he=isNaN(he)?w:ie(Math.abs(he),j),q&&(he=formatTrim(he)),se&&+he==0&&M!=="+"&&(se=!1),be=(se?M==="("?M:v:M==="-"||M==="("?"":M)+be,xe=(z==="s"?prefixes[8+prefixExponent/3]:"")+xe+(se&&M==="("?")":""),ae){for(Ee=-1,we=he.length;++Ee<we;)if(oe=he.charCodeAt(Ee),48>oe||oe>57){xe=(oe===46?u+he.slice(Ee+1):he.slice(Ee))+xe,he=he.slice(0,Ee);break}}}V&&!I&&(he=t(he,1/0));var J=be.length+he.length+xe.length,Q=J<B?new Array(B-J+1).join(D):"";switch(V&&I&&(he=t(Q+he,Q.length?B-xe.length:1/0),Q=""),O){case"<":he=be+he+xe+Q;break;case"=":he=be+Q+he+xe;break;case"^":he=Q.slice(0,J=Q.length>>1)+be+he+xe+Q.slice(J);break;default:he=Q+be+he+xe;break}return d(he)}return pe.toString=function(){return _+""},pe}function C(_,D){var O=E((_=formatSpecifier(_),_.type="f",_)),M=Math.max(-8,Math.min(8,Math.floor(exponent(D)/3)))*3,N=Math.pow(10,-M),I=prefixes[8+M/3];return function(B){return O(N*B)+I}}return{format:E,formatPrefix:C}}var locale$1,format,formatPrefix;defaultLocale$1({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale$1(e){return locale$1=formatLocale$1(e),format=locale$1.format,formatPrefix=locale$1.formatPrefix,locale$1}function precisionFixed(e){return Math.max(0,-exponent(Math.abs(e)))}function precisionPrefix(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(t)/3)))*3-exponent(Math.abs(e)))}function precisionRound(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,exponent(t)-exponent(e))+1}function tickFormat(e,t,n,o){var u=tickStep(e,t,n),d;switch(o=formatSpecifier(o??",f"),o.type){case"s":{var f=Math.max(Math.abs(e),Math.abs(t));return o.precision==null&&!isNaN(d=precisionPrefix(u,f))&&(o.precision=d),formatPrefix(o,f)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(d=precisionRound(u,Math.max(Math.abs(e),Math.abs(t))))&&(o.precision=d-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(d=precisionFixed(u))&&(o.precision=d-(o.type==="%")*2);break}}return format(o)}function linearish(e){var t=e.domain;return e.ticks=function(n){var o=t();return ticks(o[0],o[o.length-1],n??10)},e.tickFormat=function(n,o){var u=t();return tickFormat(u[0],u[u.length-1],n??10,o)},e.nice=function(n){n==null&&(n=10);var o=t(),u=0,d=o.length-1,f=o[u],v=o[d],w,E,C=10;for(v<f&&(E=f,f=v,v=E,E=u,u=d,d=E);C-- >0;){if(E=tickIncrement(f,v,n),E===w)return o[u]=f,o[d]=v,t(o);if(E>0)f=Math.floor(f/E)*E,v=Math.ceil(v/E)*E;else if(E<0)f=Math.ceil(f*E)/E,v=Math.floor(v*E)/E;else break;w=E}return e},e}function linear(){var e=continuous();return e.copy=function(){return copy$1(e,linear())},initRange.apply(e,arguments),linearish(e)}function identity$1(e){var t;function n(o){return o==null||isNaN(o=+o)?t:o}return n.invert=n,n.domain=n.range=function(o){return arguments.length?(e=Array.from(o,number$2),n):e.slice()},n.unknown=function(o){return arguments.length?(t=o,n):t},n.copy=function(){return identity$1(e).unknown(t)},e=arguments.length?Array.from(e,number$2):[0,1],linearish(n)}function nice(e,t){e=e.slice();var n=0,o=e.length-1,u=e[n],d=e[o],f;return d<u&&(f=n,n=o,o=f,f=u,u=d,d=f),e[n]=t.floor(u),e[o]=t.ceil(d),e}function transformLog(e){return Math.log(e)}function transformExp(e){return Math.exp(e)}function transformLogn(e){return-Math.log(-e)}function transformExpn(e){return-Math.exp(-e)}function pow10(e){return isFinite(e)?+("1e"+e):e<0?0:e}function powp(e){return e===10?pow10:e===Math.E?Math.exp:t=>Math.pow(e,t)}function logp(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function reflect(e){return(t,n)=>-e(-t,n)}function loggish(e){const t=e(transformLog,transformExp),n=t.domain;let o=10,u,d;function f(){return u=logp(o),d=powp(o),n()[0]<0?(u=reflect(u),d=reflect(d),e(transformLogn,transformExpn)):e(transformLog,transformExp),t}return t.base=function(v){return arguments.length?(o=+v,f()):o},t.domain=function(v){return arguments.length?(n(v),f()):n()},t.ticks=v=>{const w=n();let E=w[0],C=w[w.length-1];const _=C<E;_&&([E,C]=[C,E]);let D=u(E),O=u(C),M,N;const I=v==null?10:+v;let B=[];if(!(o%1)&&O-D<I){if(D=Math.floor(D),O=Math.ceil(O),E>0){for(;D<=O;++D)for(M=1;M<o;++M)if(N=D<0?M/d(-D):M*d(D),!(N<E)){if(N>C)break;B.push(N)}}else for(;D<=O;++D)for(M=o-1;M>=1;--M)if(N=D>0?M/d(-D):M*d(D),!(N<E)){if(N>C)break;B.push(N)}B.length*2<I&&(B=ticks(E,C,I))}else B=ticks(D,O,Math.min(O-D,I)).map(d);return _?B.reverse():B},t.tickFormat=(v,w)=>{if(v==null&&(v=10),w==null&&(w=o===10?"s":","),typeof w!="function"&&(!(o%1)&&(w=formatSpecifier(w)).precision==null&&(w.trim=!0),w=format(w)),v===1/0)return w;const E=Math.max(1,o*v/t.ticks().length);return C=>{let _=C/d(Math.round(u(C)));return _*o<o-.5&&(_*=o),_<=E?w(C):""}},t.nice=()=>n(nice(n(),{floor:v=>d(Math.floor(u(v))),ceil:v=>d(Math.ceil(u(v)))})),t}function log(){const e=loggish(transformer$2()).domain([1,10]);return e.copy=()=>copy$1(e,log()).base(e.base()),initRange.apply(e,arguments),e}function transformSymlog(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function transformSymexp(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function symlogish(e){var t=1,n=e(transformSymlog(t),transformSymexp(t));return n.constant=function(o){return arguments.length?e(transformSymlog(t=+o),transformSymexp(t)):t},linearish(n)}function symlog(){var e=symlogish(transformer$2());return e.copy=function(){return copy$1(e,symlog()).constant(e.constant())},initRange.apply(e,arguments)}function transformPow(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function transformSqrt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function transformSquare(e){return e<0?-e*e:e*e}function powish(e){var t=e(identity$3,identity$3),n=1;function o(){return n===1?e(identity$3,identity$3):n===.5?e(transformSqrt,transformSquare):e(transformPow(n),transformPow(1/n))}return t.exponent=function(u){return arguments.length?(n=+u,o()):n},linearish(t)}function pow(){var e=powish(transformer$2());return e.copy=function(){return copy$1(e,pow()).exponent(e.exponent())},initRange.apply(e,arguments),e}function sqrt(){return pow.apply(null,arguments).exponent(.5)}function square(e){return Math.sign(e)*e*e}function unsquare(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function radial(){var e=continuous(),t=[0,1],n=!1,o;function u(d){var f=unsquare(e(d));return isNaN(f)?o:n?Math.round(f):f}return u.invert=function(d){return e.invert(square(d))},u.domain=function(d){return arguments.length?(e.domain(d),u):e.domain()},u.range=function(d){return arguments.length?(e.range((t=Array.from(d,number$2)).map(square)),u):t.slice()},u.rangeRound=function(d){return u.range(d).round(!0)},u.round=function(d){return arguments.length?(n=!!d,u):n},u.clamp=function(d){return arguments.length?(e.clamp(d),u):e.clamp()},u.unknown=function(d){return arguments.length?(o=d,u):o},u.copy=function(){return radial(e.domain(),t).round(n).clamp(e.clamp()).unknown(o)},initRange.apply(u,arguments),linearish(u)}function quantile(){var e=[],t=[],n=[],o;function u(){var f=0,v=Math.max(1,t.length);for(n=new Array(v-1);++f<v;)n[f-1]=quantileSorted(e,f/v);return d}function d(f){return f==null||isNaN(f=+f)?o:t[bisectRight(n,f)]}return d.invertExtent=function(f){var v=t.indexOf(f);return v<0?[NaN,NaN]:[v>0?n[v-1]:e[0],v<n.length?n[v]:e[e.length-1]]},d.domain=function(f){if(!arguments.length)return e.slice();e=[];for(let v of f)v!=null&&!isNaN(v=+v)&&e.push(v);return e.sort(ascending),u()},d.range=function(f){return arguments.length?(t=Array.from(f),u()):t.slice()},d.unknown=function(f){return arguments.length?(o=f,d):o},d.quantiles=function(){return n.slice()},d.copy=function(){return quantile().domain(e).range(t).unknown(o)},initRange.apply(d,arguments)}function quantize(){var e=0,t=1,n=1,o=[.5],u=[0,1],d;function f(w){return w!=null&&w<=w?u[bisectRight(o,w,0,n)]:d}function v(){var w=-1;for(o=new Array(n);++w<n;)o[w]=((w+1)*t-(w-n)*e)/(n+1);return f}return f.domain=function(w){return arguments.length?([e,t]=w,e=+e,t=+t,v()):[e,t]},f.range=function(w){return arguments.length?(n=(u=Array.from(w)).length-1,v()):u.slice()},f.invertExtent=function(w){var E=u.indexOf(w);return E<0?[NaN,NaN]:E<1?[e,o[0]]:E>=n?[o[n-1],t]:[o[E-1],o[E]]},f.unknown=function(w){return arguments.length&&(d=w),f},f.thresholds=function(){return o.slice()},f.copy=function(){return quantize().domain([e,t]).range(u).unknown(d)},initRange.apply(linearish(f),arguments)}function threshold(){var e=[.5],t=[0,1],n,o=1;function u(d){return d!=null&&d<=d?t[bisectRight(e,d,0,o)]:n}return u.domain=function(d){return arguments.length?(e=Array.from(d),o=Math.min(e.length,t.length-1),u):e.slice()},u.range=function(d){return arguments.length?(t=Array.from(d),o=Math.min(e.length,t.length-1),u):t.slice()},u.invertExtent=function(d){var f=t.indexOf(d);return[e[f-1],e[f]]},u.unknown=function(d){return arguments.length?(n=d,u):n},u.copy=function(){return threshold().domain(e).range(t).unknown(n)},initRange.apply(u,arguments)}const t0=new Date,t1=new Date;function timeInterval(e,t,n,o){function u(d){return e(d=arguments.length===0?new Date:new Date(+d)),d}return u.floor=d=>(e(d=new Date(+d)),d),u.ceil=d=>(e(d=new Date(d-1)),t(d,1),e(d),d),u.round=d=>{const f=u(d),v=u.ceil(d);return d-f<v-d?f:v},u.offset=(d,f)=>(t(d=new Date(+d),f==null?1:Math.floor(f)),d),u.range=(d,f,v)=>{const w=[];if(d=u.ceil(d),v=v==null?1:Math.floor(v),!(d<f)||!(v>0))return w;let E;do w.push(E=new Date(+d)),t(d,v),e(d);while(E<d&&d<f);return w},u.filter=d=>timeInterval(f=>{if(f>=f)for(;e(f),!d(f);)f.setTime(f-1)},(f,v)=>{if(f>=f)if(v<0)for(;++v<=0;)for(;t(f,-1),!d(f););else for(;--v>=0;)for(;t(f,1),!d(f););}),n&&(u.count=(d,f)=>(t0.setTime(+d),t1.setTime(+f),e(t0),e(t1),Math.floor(n(t0,t1))),u.every=d=>(d=Math.floor(d),!isFinite(d)||!(d>0)?null:d>1?u.filter(o?f=>o(f)%d===0:f=>u.count(0,f)%d===0):u)),u}const millisecond=timeInterval(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);millisecond.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?timeInterval(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):millisecond);millisecond.range;const durationSecond=1e3,durationMinute=durationSecond*60,durationHour=durationMinute*60,durationDay=durationHour*24,durationWeek=durationDay*7,durationMonth=durationDay*30,durationYear=durationDay*365,second=timeInterval(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*durationSecond)},(e,t)=>(t-e)/durationSecond,e=>e.getUTCSeconds());second.range;const timeMinute=timeInterval(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*durationSecond)},(e,t)=>{e.setTime(+e+t*durationMinute)},(e,t)=>(t-e)/durationMinute,e=>e.getMinutes());timeMinute.range;const utcMinute=timeInterval(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*durationMinute)},(e,t)=>(t-e)/durationMinute,e=>e.getUTCMinutes());utcMinute.range;const timeHour=timeInterval(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*durationSecond-e.getMinutes()*durationMinute)},(e,t)=>{e.setTime(+e+t*durationHour)},(e,t)=>(t-e)/durationHour,e=>e.getHours());timeHour.range;const utcHour=timeInterval(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*durationHour)},(e,t)=>(t-e)/durationHour,e=>e.getUTCHours());utcHour.range;const timeDay=timeInterval(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*durationMinute)/durationDay,e=>e.getDate()-1);timeDay.range;const utcDay=timeInterval(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/durationDay,e=>e.getUTCDate()-1);utcDay.range;const unixDay=timeInterval(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/durationDay,e=>Math.floor(e/durationDay));unixDay.range;function timeWeekday(e){return timeInterval(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*durationMinute)/durationWeek)}const timeSunday=timeWeekday(0),timeMonday=timeWeekday(1),timeTuesday=timeWeekday(2),timeWednesday=timeWeekday(3),timeThursday=timeWeekday(4),timeFriday=timeWeekday(5),timeSaturday=timeWeekday(6);timeSunday.range;timeMonday.range;timeTuesday.range;timeWednesday.range;timeThursday.range;timeFriday.range;timeSaturday.range;function utcWeekday(e){return timeInterval(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/durationWeek)}const utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6);utcSunday.range;utcMonday.range;utcTuesday.range;utcWednesday.range;utcThursday.range;utcFriday.range;utcSaturday.range;const timeMonth=timeInterval(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());timeMonth.range;const utcMonth=timeInterval(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());utcMonth.range;const timeYear=timeInterval(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());timeYear.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:timeInterval(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});timeYear.range;const utcYear=timeInterval(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());utcYear.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:timeInterval(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});utcYear.range;function ticker(e,t,n,o,u,d){const f=[[second,1,durationSecond],[second,5,5*durationSecond],[second,15,15*durationSecond],[second,30,30*durationSecond],[d,1,durationMinute],[d,5,5*durationMinute],[d,15,15*durationMinute],[d,30,30*durationMinute],[u,1,durationHour],[u,3,3*durationHour],[u,6,6*durationHour],[u,12,12*durationHour],[o,1,durationDay],[o,2,2*durationDay],[n,1,durationWeek],[t,1,durationMonth],[t,3,3*durationMonth],[e,1,durationYear]];function v(E,C,_){const D=C<E;D&&([E,C]=[C,E]);const O=_&&typeof _.range=="function"?_:w(E,C,_),M=O?O.range(E,+C+1):[];return D?M.reverse():M}function w(E,C,_){const D=Math.abs(C-E)/_,O=bisector(([,,I])=>I).right(f,D);if(O===f.length)return e.every(tickStep(E/durationYear,C/durationYear,_));if(O===0)return millisecond.every(Math.max(tickStep(E,C,_),1));const[M,N]=f[D/f[O-1][2]<f[O][2]/D?O-1:O];return M.every(N)}return[v,w]}const[utcTicks,utcTickInterval]=ticker(utcYear,utcMonth,utcSunday,unixDay,utcHour,utcMinute),[timeTicks,timeTickInterval]=ticker(timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute);function localDate(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function utcDate(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function newDate(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function formatLocale(e){var t=e.dateTime,n=e.date,o=e.time,u=e.periods,d=e.days,f=e.shortDays,v=e.months,w=e.shortMonths,E=formatRe(u),C=formatLookup(u),_=formatRe(d),D=formatLookup(d),O=formatRe(f),M=formatLookup(f),N=formatRe(v),I=formatLookup(v),B=formatRe(w),V=formatLookup(w),j={a:se,A:J,b:Q,B:Z,c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:K,q:ne,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},q={a:ue,A:ye,b:fe,B:X,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:le,q:de,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},z={a:pe,A:he,b:be,B:xe,c:Ee,d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:ae,q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:we,X:oe,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};j.x=$(n,j),j.X=$(o,j),j.c=$(t,j),q.x=$(n,q),q.X=$(o,q),q.c=$(t,q);function $(ce,me){return function(Se){var Ce=[],Te=-1,je=0,Oe=ce.length,Ne,De,Be;for(Se instanceof Date||(Se=new Date(+Se));++Te<Oe;)ce.charCodeAt(Te)===37&&(Ce.push(ce.slice(je,Te)),(De=pads[Ne=ce.charAt(++Te)])!=null?Ne=ce.charAt(++Te):De=Ne==="e"?" ":"0",(Be=me[Ne])&&(Ne=Be(Se,De)),Ce.push(Ne),je=Te+1);return Ce.push(ce.slice(je,Te)),Ce.join("")}}function ee(ce,me){return function(Se){var Ce=newDate(1900,void 0,1),Te=ie(Ce,ce,Se+="",0),je,Oe;if(Te!=Se.length)return null;if("Q"in Ce)return new Date(Ce.Q);if("s"in Ce)return new Date(Ce.s*1e3+("L"in Ce?Ce.L:0));if(me&&!("Z"in Ce)&&(Ce.Z=0),"p"in Ce&&(Ce.H=Ce.H%12+Ce.p*12),Ce.m===void 0&&(Ce.m="q"in Ce?Ce.q:0),"V"in Ce){if(Ce.V<1||Ce.V>53)return null;"w"in Ce||(Ce.w=1),"Z"in Ce?(je=utcDate(newDate(Ce.y,0,1)),Oe=je.getUTCDay(),je=Oe>4||Oe===0?utcMonday.ceil(je):utcMonday(je),je=utcDay.offset(je,(Ce.V-1)*7),Ce.y=je.getUTCFullYear(),Ce.m=je.getUTCMonth(),Ce.d=je.getUTCDate()+(Ce.w+6)%7):(je=localDate(newDate(Ce.y,0,1)),Oe=je.getDay(),je=Oe>4||Oe===0?timeMonday.ceil(je):timeMonday(je),je=timeDay.offset(je,(Ce.V-1)*7),Ce.y=je.getFullYear(),Ce.m=je.getMonth(),Ce.d=je.getDate()+(Ce.w+6)%7)}else("W"in Ce||"U"in Ce)&&("w"in Ce||(Ce.w="u"in Ce?Ce.u%7:"W"in Ce?1:0),Oe="Z"in Ce?utcDate(newDate(Ce.y,0,1)).getUTCDay():localDate(newDate(Ce.y,0,1)).getDay(),Ce.m=0,Ce.d="W"in Ce?(Ce.w+6)%7+Ce.W*7-(Oe+5)%7:Ce.w+Ce.U*7-(Oe+6)%7);return"Z"in Ce?(Ce.H+=Ce.Z/100|0,Ce.M+=Ce.Z%100,utcDate(Ce)):localDate(Ce)}}function ie(ce,me,Se,Ce){for(var Te=0,je=me.length,Oe=Se.length,Ne,De;Te<je;){if(Ce>=Oe)return-1;if(Ne=me.charCodeAt(Te++),Ne===37){if(Ne=me.charAt(Te++),De=z[Ne in pads?me.charAt(Te++):Ne],!De||(Ce=De(ce,Se,Ce))<0)return-1}else if(Ne!=Se.charCodeAt(Ce++))return-1}return Ce}function ae(ce,me,Se){var Ce=E.exec(me.slice(Se));return Ce?(ce.p=C.get(Ce[0].toLowerCase()),Se+Ce[0].length):-1}function pe(ce,me,Se){var Ce=O.exec(me.slice(Se));return Ce?(ce.w=M.get(Ce[0].toLowerCase()),Se+Ce[0].length):-1}function he(ce,me,Se){var Ce=_.exec(me.slice(Se));return Ce?(ce.w=D.get(Ce[0].toLowerCase()),Se+Ce[0].length):-1}function be(ce,me,Se){var Ce=B.exec(me.slice(Se));return Ce?(ce.m=V.get(Ce[0].toLowerCase()),Se+Ce[0].length):-1}function xe(ce,me,Se){var Ce=N.exec(me.slice(Se));return Ce?(ce.m=I.get(Ce[0].toLowerCase()),Se+Ce[0].length):-1}function Ee(ce,me,Se){return ie(ce,t,me,Se)}function we(ce,me,Se){return ie(ce,n,me,Se)}function oe(ce,me,Se){return ie(ce,o,me,Se)}function se(ce){return f[ce.getDay()]}function J(ce){return d[ce.getDay()]}function Q(ce){return w[ce.getMonth()]}function Z(ce){return v[ce.getMonth()]}function K(ce){return u[+(ce.getHours()>=12)]}function ne(ce){return 1+~~(ce.getMonth()/3)}function ue(ce){return f[ce.getUTCDay()]}function ye(ce){return d[ce.getUTCDay()]}function fe(ce){return w[ce.getUTCMonth()]}function X(ce){return v[ce.getUTCMonth()]}function le(ce){return u[+(ce.getUTCHours()>=12)]}function de(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var me=$(ce+="",j);return me.toString=function(){return ce},me},parse:function(ce){var me=ee(ce+="",!1);return me.toString=function(){return ce},me},utcFormat:function(ce){var me=$(ce+="",q);return me.toString=function(){return ce},me},utcParse:function(ce){var me=ee(ce+="",!0);return me.toString=function(){return ce},me}}}var pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(e,t,n){var o=e<0?"-":"",u=(o?-e:e)+"",d=u.length;return o+(d<n?new Array(n-d+1).join(t)+u:u)}function requote(e){return e.replace(requoteRe,"\\$&")}function formatRe(e){return new RegExp("^(?:"+e.map(requote).join("|")+")","i")}function formatLookup(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function parseWeekdayNumberSunday(e,t,n){var o=numberRe.exec(t.slice(n,n+1));return o?(e.w=+o[0],n+o[0].length):-1}function parseWeekdayNumberMonday(e,t,n){var o=numberRe.exec(t.slice(n,n+1));return o?(e.u=+o[0],n+o[0].length):-1}function parseWeekNumberSunday(e,t,n){var o=numberRe.exec(t.slice(n,n+2));return o?(e.U=+o[0],n+o[0].length):-1}function parseWeekNumberISO(e,t,n){var o=numberRe.exec(t.slice(n,n+2));return o?(e.V=+o[0],n+o[0].length):-1}function parseWeekNumberMonday(e,t,n){var o=numberRe.exec(t.slice(n,n+2));return o?(e.W=+o[0],n+o[0].length):-1}function parseFullYear(e,t,n){var o=numberRe.exec(t.slice(n,n+4));return o?(e.y=+o[0],n+o[0].length):-1}function parseYear(e,t,n){var o=numberRe.exec(t.slice(n,n+2));return o?(e.y=+o[0]+(+o[0]>68?1900:2e3),n+o[0].length):-1}function parseZone(e,t,n){var o=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return o?(e.Z=o[1]?0:-(o[2]+(o[3]||"00")),n+o[0].length):-1}function parseQuarter(e,t,n){var o=numberRe.exec(t.slice(n,n+1));return o?(e.q=o[0]*3-3,n+o[0].length):-1}function parseMonthNumber(e,t,n){var o=numberRe.exec(t.slice(n,n+2));return o?(e.m=o[0]-1,n+o[0].length):-1}function parseDayOfMonth(e,t,n){var o=numberRe.exec(t.slice(n,n+2));return o?(e.d=+o[0],n+o[0].length):-1}function parseDayOfYear(e,t,n){var o=numberRe.exec(t.slice(n,n+3));return o?(e.m=0,e.d=+o[0],n+o[0].length):-1}function parseHour24(e,t,n){var o=numberRe.exec(t.slice(n,n+2));return o?(e.H=+o[0],n+o[0].length):-1}function parseMinutes(e,t,n){var o=numberRe.exec(t.slice(n,n+2));return o?(e.M=+o[0],n+o[0].length):-1}function parseSeconds(e,t,n){var o=numberRe.exec(t.slice(n,n+2));return o?(e.S=+o[0],n+o[0].length):-1}function parseMilliseconds(e,t,n){var o=numberRe.exec(t.slice(n,n+3));return o?(e.L=+o[0],n+o[0].length):-1}function parseMicroseconds(e,t,n){var o=numberRe.exec(t.slice(n,n+6));return o?(e.L=Math.floor(o[0]/1e3),n+o[0].length):-1}function parseLiteralPercent(e,t,n){var o=percentRe.exec(t.slice(n,n+1));return o?n+o[0].length:-1}function parseUnixTimestamp(e,t,n){var o=numberRe.exec(t.slice(n));return o?(e.Q=+o[0],n+o[0].length):-1}function parseUnixTimestampSeconds(e,t,n){var o=numberRe.exec(t.slice(n));return o?(e.s=+o[0],n+o[0].length):-1}function formatDayOfMonth(e,t){return pad(e.getDate(),t,2)}function formatHour24(e,t){return pad(e.getHours(),t,2)}function formatHour12(e,t){return pad(e.getHours()%12||12,t,2)}function formatDayOfYear(e,t){return pad(1+timeDay.count(timeYear(e),e),t,3)}function formatMilliseconds(e,t){return pad(e.getMilliseconds(),t,3)}function formatMicroseconds(e,t){return formatMilliseconds(e,t)+"000"}function formatMonthNumber(e,t){return pad(e.getMonth()+1,t,2)}function formatMinutes(e,t){return pad(e.getMinutes(),t,2)}function formatSeconds(e,t){return pad(e.getSeconds(),t,2)}function formatWeekdayNumberMonday(e){var t=e.getDay();return t===0?7:t}function formatWeekNumberSunday(e,t){return pad(timeSunday.count(timeYear(e)-1,e),t,2)}function dISO(e){var t=e.getDay();return t>=4||t===0?timeThursday(e):timeThursday.ceil(e)}function formatWeekNumberISO(e,t){return e=dISO(e),pad(timeThursday.count(timeYear(e),e)+(timeYear(e).getDay()===4),t,2)}function formatWeekdayNumberSunday(e){return e.getDay()}function formatWeekNumberMonday(e,t){return pad(timeMonday.count(timeYear(e)-1,e),t,2)}function formatYear(e,t){return pad(e.getFullYear()%100,t,2)}function formatYearISO(e,t){return e=dISO(e),pad(e.getFullYear()%100,t,2)}function formatFullYear(e,t){return pad(e.getFullYear()%1e4,t,4)}function formatFullYearISO(e,t){var n=e.getDay();return e=n>=4||n===0?timeThursday(e):timeThursday.ceil(e),pad(e.getFullYear()%1e4,t,4)}function formatZone(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+pad(t/60|0,"0",2)+pad(t%60,"0",2)}function formatUTCDayOfMonth(e,t){return pad(e.getUTCDate(),t,2)}function formatUTCHour24(e,t){return pad(e.getUTCHours(),t,2)}function formatUTCHour12(e,t){return pad(e.getUTCHours()%12||12,t,2)}function formatUTCDayOfYear(e,t){return pad(1+utcDay.count(utcYear(e),e),t,3)}function formatUTCMilliseconds(e,t){return pad(e.getUTCMilliseconds(),t,3)}function formatUTCMicroseconds(e,t){return formatUTCMilliseconds(e,t)+"000"}function formatUTCMonthNumber(e,t){return pad(e.getUTCMonth()+1,t,2)}function formatUTCMinutes(e,t){return pad(e.getUTCMinutes(),t,2)}function formatUTCSeconds(e,t){return pad(e.getUTCSeconds(),t,2)}function formatUTCWeekdayNumberMonday(e){var t=e.getUTCDay();return t===0?7:t}function formatUTCWeekNumberSunday(e,t){return pad(utcSunday.count(utcYear(e)-1,e),t,2)}function UTCdISO(e){var t=e.getUTCDay();return t>=4||t===0?utcThursday(e):utcThursday.ceil(e)}function formatUTCWeekNumberISO(e,t){return e=UTCdISO(e),pad(utcThursday.count(utcYear(e),e)+(utcYear(e).getUTCDay()===4),t,2)}function formatUTCWeekdayNumberSunday(e){return e.getUTCDay()}function formatUTCWeekNumberMonday(e,t){return pad(utcMonday.count(utcYear(e)-1,e),t,2)}function formatUTCYear(e,t){return pad(e.getUTCFullYear()%100,t,2)}function formatUTCYearISO(e,t){return e=UTCdISO(e),pad(e.getUTCFullYear()%100,t,2)}function formatUTCFullYear(e,t){return pad(e.getUTCFullYear()%1e4,t,4)}function formatUTCFullYearISO(e,t){var n=e.getUTCDay();return e=n>=4||n===0?utcThursday(e):utcThursday.ceil(e),pad(e.getUTCFullYear()%1e4,t,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(e){return+e}function formatUnixTimestampSeconds(e){return Math.floor(+e/1e3)}var locale,timeFormat,utcFormat;defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function defaultLocale(e){return locale=formatLocale(e),timeFormat=locale.format,locale.parse,utcFormat=locale.utcFormat,locale.utcParse,locale}function date(e){return new Date(e)}function number$1(e){return e instanceof Date?+e:+new Date(+e)}function calendar(e,t,n,o,u,d,f,v,w,E){var C=continuous(),_=C.invert,D=C.domain,O=E(".%L"),M=E(":%S"),N=E("%I:%M"),I=E("%I %p"),B=E("%a %d"),V=E("%b %d"),j=E("%B"),q=E("%Y");function z($){return(w($)<$?O:v($)<$?M:f($)<$?N:d($)<$?I:o($)<$?u($)<$?B:V:n($)<$?j:q)($)}return C.invert=function($){return new Date(_($))},C.domain=function($){return arguments.length?D(Array.from($,number$1)):D().map(date)},C.ticks=function($){var ee=D();return e(ee[0],ee[ee.length-1],$??10)},C.tickFormat=function($,ee){return ee==null?z:E(ee)},C.nice=function($){var ee=D();return(!$||typeof $.range!="function")&&($=t(ee[0],ee[ee.length-1],$??10)),$?D(nice(ee,$)):C},C.copy=function(){return copy$1(C,calendar(e,t,n,o,u,d,f,v,w,E))},C}function time$1(){return initRange.apply(calendar(timeTicks,timeTickInterval,timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute,second,timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function utcTime(){return initRange.apply(calendar(utcTicks,utcTickInterval,utcYear,utcMonth,utcSunday,utcDay,utcHour,utcMinute,second,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function transformer$1(){var e=0,t=1,n,o,u,d,f=identity$3,v=!1,w;function E(_){return _==null||isNaN(_=+_)?w:f(u===0?.5:(_=(d(_)-n)*u,v?Math.max(0,Math.min(1,_)):_))}E.domain=function(_){return arguments.length?([e,t]=_,n=d(e=+e),o=d(t=+t),u=n===o?0:1/(o-n),E):[e,t]},E.clamp=function(_){return arguments.length?(v=!!_,E):v},E.interpolator=function(_){return arguments.length?(f=_,E):f};function C(_){return function(D){var O,M;return arguments.length?([O,M]=D,f=_(O,M),E):[f(0),f(1)]}}return E.range=C(interpolate$1),E.rangeRound=C(interpolateRound),E.unknown=function(_){return arguments.length?(w=_,E):w},function(_){return d=_,n=_(e),o=_(t),u=n===o?0:1/(o-n),E}}function copy(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function sequential(){var e=linearish(transformer$1()(identity$3));return e.copy=function(){return copy(e,sequential())},initInterpolator.apply(e,arguments)}function sequentialLog(){var e=loggish(transformer$1()).domain([1,10]);return e.copy=function(){return copy(e,sequentialLog()).base(e.base())},initInterpolator.apply(e,arguments)}function sequentialSymlog(){var e=symlogish(transformer$1());return e.copy=function(){return copy(e,sequentialSymlog()).constant(e.constant())},initInterpolator.apply(e,arguments)}function sequentialPow(){var e=powish(transformer$1());return e.copy=function(){return copy(e,sequentialPow()).exponent(e.exponent())},initInterpolator.apply(e,arguments)}function sequentialSqrt(){return sequentialPow.apply(null,arguments).exponent(.5)}function sequentialQuantile(){var e=[],t=identity$3;function n(o){if(o!=null&&!isNaN(o=+o))return t((bisectRight(e,o,1)-1)/(e.length-1))}return n.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let u of o)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(ascending),n},n.interpolator=function(o){return arguments.length?(t=o,n):t},n.range=function(){return e.map((o,u)=>t(u/(e.length-1)))},n.quantiles=function(o){return Array.from({length:o+1},(u,d)=>quantile$1(e,d/o))},n.copy=function(){return sequentialQuantile(t).domain(e)},initInterpolator.apply(n,arguments)}function transformer(){var e=0,t=.5,n=1,o=1,u,d,f,v,w,E=identity$3,C,_=!1,D;function O(N){return isNaN(N=+N)?D:(N=.5+((N=+C(N))-d)*(o*N<o*d?v:w),E(_?Math.max(0,Math.min(1,N)):N))}O.domain=function(N){return arguments.length?([e,t,n]=N,u=C(e=+e),d=C(t=+t),f=C(n=+n),v=u===d?0:.5/(d-u),w=d===f?0:.5/(f-d),o=d<u?-1:1,O):[e,t,n]},O.clamp=function(N){return arguments.length?(_=!!N,O):_},O.interpolator=function(N){return arguments.length?(E=N,O):E};function M(N){return function(I){var B,V,j;return arguments.length?([B,V,j]=I,E=piecewise(N,[B,V,j]),O):[E(0),E(.5),E(1)]}}return O.range=M(interpolate$1),O.rangeRound=M(interpolateRound),O.unknown=function(N){return arguments.length?(D=N,O):D},function(N){return C=N,u=N(e),d=N(t),f=N(n),v=u===d?0:.5/(d-u),w=d===f?0:.5/(f-d),o=d<u?-1:1,O}}function diverging(){var e=linearish(transformer()(identity$3));return e.copy=function(){return copy(e,diverging())},initInterpolator.apply(e,arguments)}function divergingLog(){var e=loggish(transformer()).domain([.1,1,10]);return e.copy=function(){return copy(e,divergingLog()).base(e.base())},initInterpolator.apply(e,arguments)}function divergingSymlog(){var e=symlogish(transformer());return e.copy=function(){return copy(e,divergingSymlog()).constant(e.constant())},initInterpolator.apply(e,arguments)}function divergingPow(){var e=powish(transformer());return e.copy=function(){return copy(e,divergingPow()).exponent(e.exponent())},initInterpolator.apply(e,arguments)}function divergingSqrt(){return divergingPow.apply(null,arguments).exponent(.5)}const d3Scales=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:band,scaleDiverging:diverging,scaleDivergingLog:divergingLog,scaleDivergingPow:divergingPow,scaleDivergingSqrt:divergingSqrt,scaleDivergingSymlog:divergingSymlog,scaleIdentity:identity$1,scaleImplicit:implicit,scaleLinear:linear,scaleLog:log,scaleOrdinal:ordinal,scalePoint:point,scalePow:pow,scaleQuantile:quantile,scaleQuantize:quantize,scaleRadial:radial,scaleSequential:sequential,scaleSequentialLog:sequentialLog,scaleSequentialPow:sequentialPow,scaleSequentialQuantile:sequentialQuantile,scaleSequentialSqrt:sequentialSqrt,scaleSequentialSymlog:sequentialSymlog,scaleSqrt:sqrt,scaleSymlog:symlog,scaleThreshold:threshold,scaleTime:time$1,scaleUtc:utcTime,tickFormat},Symbol.toStringTag,{value:"Module"}));var selectChartDataWithIndexes=e=>e.chartData,selectChartDataAndAlwaysIgnoreIndexes=createSelector([selectChartDataWithIndexes],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),selectChartDataWithIndexesIfNotInPanorama=(e,t,n,o)=>o?selectChartDataAndAlwaysIgnoreIndexes(e):selectChartDataWithIndexes(e);function isWellFormedNumberDomain(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(isWellBehavedNumber(t)&&isWellBehavedNumber(n))return!0}return!1}function extendDomain(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function numericalDomainSpecifiedWithoutRequiringData(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,o]=e,u,d;if(isWellBehavedNumber(n))u=n;else if(typeof n=="function")return;if(isWellBehavedNumber(o))d=o;else if(typeof o=="function")return;var f=[u,d];if(isWellFormedNumberDomain(f))return f}}function parseNumericalUserDomain(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var o=e(t,n);if(isWellFormedNumberDomain(o))return extendDomain(o,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[u,d]=e,f,v;if(u==="auto")t!=null&&(f=Math.min(...t));else if(isNumber$1(u))f=u;else if(typeof u=="function")try{t!=null&&(f=u(t?.[0]))}catch{}else if(typeof u=="string"&&MIN_VALUE_REG.test(u)){var w=MIN_VALUE_REG.exec(u);if(w==null||t==null)f=void 0;else{var E=+w[1];f=t[0]-E}}else f=t?.[0];if(d==="auto")t!=null&&(v=Math.max(...t));else if(isNumber$1(d))v=d;else if(typeof d=="function")try{t!=null&&(v=d(t?.[1]))}catch{}else if(typeof d=="string"&&MAX_VALUE_REG.test(d)){var C=MAX_VALUE_REG.exec(d);if(C==null||t==null)v=void 0;else{var _=+C[1];v=t[1]+_}}else v=t?.[1];var D=[f,v];if(isWellFormedNumberDomain(D))return t==null?D:extendDomain(D,t,n)}}}var MAX_DIGITS=1e9,defaults$1={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Decimal,external=!0,decimalError="[DecimalError] ",invalidArgument=decimalError+"Invalid argument: ",exponentOutOfRange=decimalError+"Exponent out of range: ",mathfloor=Math.floor,mathpow=Math.pow,isDecimal=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ONE,BASE=1e7,LOG_BASE=7,MAX_SAFE_INTEGER=9007199254740991,MAX_E=mathfloor(MAX_SAFE_INTEGER/LOG_BASE),P={};P.absoluteValue=P.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};P.comparedTo=P.cmp=function(e){var t,n,o,u,d=this;if(e=new d.constructor(e),d.s!==e.s)return d.s||-e.s;if(d.e!==e.e)return d.e>e.e^d.s<0?1:-1;for(o=d.d.length,u=e.d.length,t=0,n=o<u?o:u;t<n;++t)if(d.d[t]!==e.d[t])return d.d[t]>e.d[t]^d.s<0?1:-1;return o===u?0:o>u^d.s<0?1:-1};P.decimalPlaces=P.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*LOG_BASE;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};P.dividedBy=P.div=function(e){return divide(this,new this.constructor(e))};P.dividedToIntegerBy=P.idiv=function(e){var t=this,n=t.constructor;return round(divide(t,new n(e),0,1),n.precision)};P.equals=P.eq=function(e){return!this.cmp(e)};P.exponent=function(){return getBase10Exponent(this)};P.greaterThan=P.gt=function(e){return this.cmp(e)>0};P.greaterThanOrEqualTo=P.gte=function(e){return this.cmp(e)>=0};P.isInteger=P.isint=function(){return this.e>this.d.length-2};P.isNegative=P.isneg=function(){return this.s<0};P.isPositive=P.ispos=function(){return this.s>0};P.isZero=function(){return this.s===0};P.lessThan=P.lt=function(e){return this.cmp(e)<0};P.lessThanOrEqualTo=P.lte=function(e){return this.cmp(e)<1};P.logarithm=P.log=function(e){var t,n=this,o=n.constructor,u=o.precision,d=u+5;if(e===void 0)e=new o(10);else if(e=new o(e),e.s<1||e.eq(ONE))throw Error(decimalError+"NaN");if(n.s<1)throw Error(decimalError+(n.s?"NaN":"-Infinity"));return n.eq(ONE)?new o(0):(external=!1,t=divide(ln(n,d),ln(e,d),d),external=!0,round(t,u))};P.minus=P.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?subtract(t,e):add(t,(e.s=-e.s,e))};P.modulo=P.mod=function(e){var t,n=this,o=n.constructor,u=o.precision;if(e=new o(e),!e.s)throw Error(decimalError+"NaN");return n.s?(external=!1,t=divide(n,e,0,1).times(e),external=!0,n.minus(t)):round(new o(n),u)};P.naturalExponential=P.exp=function(){return exp(this)};P.naturalLogarithm=P.ln=function(){return ln(this)};P.negated=P.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};P.plus=P.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?add(t,e):subtract(t,(e.s=-e.s,e))};P.precision=P.sd=function(e){var t,n,o,u=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(invalidArgument+e);if(t=getBase10Exponent(u)+1,o=u.d.length-1,n=o*LOG_BASE+1,o=u.d[o],o){for(;o%10==0;o/=10)n--;for(o=u.d[0];o>=10;o/=10)n++}return e&&t>n?t:n};P.squareRoot=P.sqrt=function(){var e,t,n,o,u,d,f,v=this,w=v.constructor;if(v.s<1){if(!v.s)return new w(0);throw Error(decimalError+"NaN")}for(e=getBase10Exponent(v),external=!1,u=Math.sqrt(+v),u==0||u==1/0?(t=digitsToString(v.d),(t.length+e)%2==0&&(t+="0"),u=Math.sqrt(t),e=mathfloor((e+1)/2)-(e<0||e%2),u==1/0?t="5e"+e:(t=u.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),o=new w(t)):o=new w(u.toString()),n=w.precision,u=f=n+3;;)if(d=o,o=d.plus(divide(v,d,f+2)).times(.5),digitsToString(d.d).slice(0,f)===(t=digitsToString(o.d)).slice(0,f)){if(t=t.slice(f-3,f+1),u==f&&t=="4999"){if(round(d,n+1,0),d.times(d).eq(v)){o=d;break}}else if(t!="9999")break;f+=4}return external=!0,round(o,n)};P.times=P.mul=function(e){var t,n,o,u,d,f,v,w,E,C=this,_=C.constructor,D=C.d,O=(e=new _(e)).d;if(!C.s||!e.s)return new _(0);for(e.s*=C.s,n=C.e+e.e,w=D.length,E=O.length,w<E&&(d=D,D=O,O=d,f=w,w=E,E=f),d=[],f=w+E,o=f;o--;)d.push(0);for(o=E;--o>=0;){for(t=0,u=w+o;u>o;)v=d[u]+O[o]*D[u-o-1]+t,d[u--]=v%BASE|0,t=v/BASE|0;d[u]=(d[u]+t)%BASE|0}for(;!d[--f];)d.pop();return t?++n:d.shift(),e.d=d,e.e=n,external?round(e,_.precision):e};P.toDecimalPlaces=P.todp=function(e,t){var n=this,o=n.constructor;return n=new o(n),e===void 0?n:(checkInt32(e,0,MAX_DIGITS),t===void 0?t=o.rounding:checkInt32(t,0,8),round(n,e+getBase10Exponent(n)+1,t))};P.toExponential=function(e,t){var n,o=this,u=o.constructor;return e===void 0?n=toString$1(o,!0):(checkInt32(e,0,MAX_DIGITS),t===void 0?t=u.rounding:checkInt32(t,0,8),o=round(new u(o),e+1,t),n=toString$1(o,!0,e+1)),n};P.toFixed=function(e,t){var n,o,u=this,d=u.constructor;return e===void 0?toString$1(u):(checkInt32(e,0,MAX_DIGITS),t===void 0?t=d.rounding:checkInt32(t,0,8),o=round(new d(u),e+getBase10Exponent(u)+1,t),n=toString$1(o.abs(),!1,e+getBase10Exponent(o)+1),u.isneg()&&!u.isZero()?"-"+n:n)};P.toInteger=P.toint=function(){var e=this,t=e.constructor;return round(new t(e),getBase10Exponent(e)+1,t.rounding)};P.toNumber=function(){return+this};P.toPower=P.pow=function(e){var t,n,o,u,d,f,v=this,w=v.constructor,E=12,C=+(e=new w(e));if(!e.s)return new w(ONE);if(v=new w(v),!v.s){if(e.s<1)throw Error(decimalError+"Infinity");return v}if(v.eq(ONE))return v;if(o=w.precision,e.eq(ONE))return round(v,o);if(t=e.e,n=e.d.length-1,f=t>=n,d=v.s,f){if((n=C<0?-C:C)<=MAX_SAFE_INTEGER){for(u=new w(ONE),t=Math.ceil(o/LOG_BASE+4),external=!1;n%2&&(u=u.times(v),truncate(u.d,t)),n=mathfloor(n/2),n!==0;)v=v.times(v),truncate(v.d,t);return external=!0,e.s<0?new w(ONE).div(u):round(u,o)}}else if(d<0)throw Error(decimalError+"NaN");return d=d<0&&e.d[Math.max(t,n)]&1?-1:1,v.s=1,external=!1,u=e.times(ln(v,o+E)),external=!0,u=exp(u),u.s=d,u};P.toPrecision=function(e,t){var n,o,u=this,d=u.constructor;return e===void 0?(n=getBase10Exponent(u),o=toString$1(u,n<=d.toExpNeg||n>=d.toExpPos)):(checkInt32(e,1,MAX_DIGITS),t===void 0?t=d.rounding:checkInt32(t,0,8),u=round(new d(u),e,t),n=getBase10Exponent(u),o=toString$1(u,e<=n||n<=d.toExpNeg,e)),o};P.toSignificantDigits=P.tosd=function(e,t){var n=this,o=n.constructor;return e===void 0?(e=o.precision,t=o.rounding):(checkInt32(e,1,MAX_DIGITS),t===void 0?t=o.rounding:checkInt32(t,0,8)),round(new o(n),e,t)};P.toString=P.valueOf=P.val=P.toJSON=P[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=getBase10Exponent(e),n=e.constructor;return toString$1(e,t<=n.toExpNeg||t>=n.toExpPos)};function add(e,t){var n,o,u,d,f,v,w,E,C=e.constructor,_=C.precision;if(!e.s||!t.s)return t.s||(t=new C(e)),external?round(t,_):t;if(w=e.d,E=t.d,f=e.e,u=t.e,w=w.slice(),d=f-u,d){for(d<0?(o=w,d=-d,v=E.length):(o=E,u=f,v=w.length),f=Math.ceil(_/LOG_BASE),v=f>v?f+1:v+1,d>v&&(d=v,o.length=1),o.reverse();d--;)o.push(0);o.reverse()}for(v=w.length,d=E.length,v-d<0&&(d=v,o=E,E=w,w=o),n=0;d;)n=(w[--d]=w[d]+E[d]+n)/BASE|0,w[d]%=BASE;for(n&&(w.unshift(n),++u),v=w.length;w[--v]==0;)w.pop();return t.d=w,t.e=u,external?round(t,_):t}function checkInt32(e,t,n){if(e!==~~e||e<t||e>n)throw Error(invalidArgument+e)}function digitsToString(e){var t,n,o,u=e.length-1,d="",f=e[0];if(u>0){for(d+=f,t=1;t<u;t++)o=e[t]+"",n=LOG_BASE-o.length,n&&(d+=getZeroString(n)),d+=o;f=e[t],o=f+"",n=LOG_BASE-o.length,n&&(d+=getZeroString(n))}else if(f===0)return"0";for(;f%10===0;)f/=10;return d+f}var divide=(function(){function e(o,u){var d,f=0,v=o.length;for(o=o.slice();v--;)d=o[v]*u+f,o[v]=d%BASE|0,f=d/BASE|0;return f&&o.unshift(f),o}function t(o,u,d,f){var v,w;if(d!=f)w=d>f?1:-1;else for(v=w=0;v<d;v++)if(o[v]!=u[v]){w=o[v]>u[v]?1:-1;break}return w}function n(o,u,d){for(var f=0;d--;)o[d]-=f,f=o[d]<u[d]?1:0,o[d]=f*BASE+o[d]-u[d];for(;!o[0]&&o.length>1;)o.shift()}return function(o,u,d,f){var v,w,E,C,_,D,O,M,N,I,B,V,j,q,z,$,ee,ie,ae=o.constructor,pe=o.s==u.s?1:-1,he=o.d,be=u.d;if(!o.s)return new ae(o);if(!u.s)throw Error(decimalError+"Division by zero");for(w=o.e-u.e,ee=be.length,z=he.length,O=new ae(pe),M=O.d=[],E=0;be[E]==(he[E]||0);)++E;if(be[E]>(he[E]||0)&&--w,d==null?V=d=ae.precision:f?V=d+(getBase10Exponent(o)-getBase10Exponent(u))+1:V=d,V<0)return new ae(0);if(V=V/LOG_BASE+2|0,E=0,ee==1)for(C=0,be=be[0],V++;(E<z||C)&&V--;E++)j=C*BASE+(he[E]||0),M[E]=j/be|0,C=j%be|0;else{for(C=BASE/(be[0]+1)|0,C>1&&(be=e(be,C),he=e(he,C),ee=be.length,z=he.length),q=ee,N=he.slice(0,ee),I=N.length;I<ee;)N[I++]=0;ie=be.slice(),ie.unshift(0),$=be[0],be[1]>=BASE/2&&++$;do C=0,v=t(be,N,ee,I),v<0?(B=N[0],ee!=I&&(B=B*BASE+(N[1]||0)),C=B/$|0,C>1?(C>=BASE&&(C=BASE-1),_=e(be,C),D=_.length,I=N.length,v=t(_,N,D,I),v==1&&(C--,n(_,ee<D?ie:be,D))):(C==0&&(v=C=1),_=be.slice()),D=_.length,D<I&&_.unshift(0),n(N,_,I),v==-1&&(I=N.length,v=t(be,N,ee,I),v<1&&(C++,n(N,ee<I?ie:be,I))),I=N.length):v===0&&(C++,N=[0]),M[E++]=C,v&&N[0]?N[I++]=he[q]||0:(N=[he[q]],I=1);while((q++<z||N[0]!==void 0)&&V--)}return M[0]||M.shift(),O.e=w,round(O,f?d+getBase10Exponent(O)+1:d)}})();function exp(e,t){var n,o,u,d,f,v,w=0,E=0,C=e.constructor,_=C.precision;if(getBase10Exponent(e)>16)throw Error(exponentOutOfRange+getBase10Exponent(e));if(!e.s)return new C(ONE);for(external=!1,v=_,f=new C(.03125);e.abs().gte(.1);)e=e.times(f),E+=5;for(o=Math.log(mathpow(2,E))/Math.LN10*2+5|0,v+=o,n=u=d=new C(ONE),C.precision=v;;){if(u=round(u.times(e),v),n=n.times(++w),f=d.plus(divide(u,n,v)),digitsToString(f.d).slice(0,v)===digitsToString(d.d).slice(0,v)){for(;E--;)d=round(d.times(d),v);return C.precision=_,t==null?(external=!0,round(d,_)):d}d=f}}function getBase10Exponent(e){for(var t=e.e*LOG_BASE,n=e.d[0];n>=10;n/=10)t++;return t}function getLn10(e,t,n){if(t>e.LN10.sd())throw external=!0,n&&(e.precision=n),Error(decimalError+"LN10 precision limit exceeded");return round(new e(e.LN10),t)}function getZeroString(e){for(var t="";e--;)t+="0";return t}function ln(e,t){var n,o,u,d,f,v,w,E,C,_=1,D=10,O=e,M=O.d,N=O.constructor,I=N.precision;if(O.s<1)throw Error(decimalError+(O.s?"NaN":"-Infinity"));if(O.eq(ONE))return new N(0);if(t==null?(external=!1,E=I):E=t,O.eq(10))return t==null&&(external=!0),getLn10(N,E);if(E+=D,N.precision=E,n=digitsToString(M),o=n.charAt(0),d=getBase10Exponent(O),Math.abs(d)<15e14){for(;o<7&&o!=1||o==1&&n.charAt(1)>3;)O=O.times(e),n=digitsToString(O.d),o=n.charAt(0),_++;d=getBase10Exponent(O),o>1?(O=new N("0."+n),d++):O=new N(o+"."+n.slice(1))}else return w=getLn10(N,E+2,I).times(d+""),O=ln(new N(o+"."+n.slice(1)),E-D).plus(w),N.precision=I,t==null?(external=!0,round(O,I)):O;for(v=f=O=divide(O.minus(ONE),O.plus(ONE),E),C=round(O.times(O),E),u=3;;){if(f=round(f.times(C),E),w=v.plus(divide(f,new N(u),E)),digitsToString(w.d).slice(0,E)===digitsToString(v.d).slice(0,E))return v=v.times(2),d!==0&&(v=v.plus(getLn10(N,E+2,I).times(d+""))),v=divide(v,new N(_),E),N.precision=I,t==null?(external=!0,round(v,I)):v;v=w,u+=2}}function parseDecimal(e,t){var n,o,u;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(o=t.search(/e/i))>0?(n<0&&(n=o),n+=+t.slice(o+1),t=t.substring(0,o)):n<0&&(n=t.length),o=0;t.charCodeAt(o)===48;)++o;for(u=t.length;t.charCodeAt(u-1)===48;)--u;if(t=t.slice(o,u),t){if(u-=o,n=n-o-1,e.e=mathfloor(n/LOG_BASE),e.d=[],o=(n+1)%LOG_BASE,n<0&&(o+=LOG_BASE),o<u){for(o&&e.d.push(+t.slice(0,o)),u-=LOG_BASE;o<u;)e.d.push(+t.slice(o,o+=LOG_BASE));t=t.slice(o),o=LOG_BASE-t.length}else o-=u;for(;o--;)t+="0";if(e.d.push(+t),external&&(e.e>MAX_E||e.e<-MAX_E))throw Error(exponentOutOfRange+n)}else e.s=0,e.e=0,e.d=[0];return e}function round(e,t,n){var o,u,d,f,v,w,E,C,_=e.d;for(f=1,d=_[0];d>=10;d/=10)f++;if(o=t-f,o<0)o+=LOG_BASE,u=t,E=_[C=0];else{if(C=Math.ceil((o+1)/LOG_BASE),d=_.length,C>=d)return e;for(E=d=_[C],f=1;d>=10;d/=10)f++;o%=LOG_BASE,u=o-LOG_BASE+f}if(n!==void 0&&(d=mathpow(10,f-u-1),v=E/d%10|0,w=t<0||_[C+1]!==void 0||E%d,w=n<4?(v||w)&&(n==0||n==(e.s<0?3:2)):v>5||v==5&&(n==4||w||n==6&&(o>0?u>0?E/mathpow(10,f-u):0:_[C-1])%10&1||n==(e.s<0?8:7))),t<1||!_[0])return w?(d=getBase10Exponent(e),_.length=1,t=t-d-1,_[0]=mathpow(10,(LOG_BASE-t%LOG_BASE)%LOG_BASE),e.e=mathfloor(-t/LOG_BASE)||0):(_.length=1,_[0]=e.e=e.s=0),e;if(o==0?(_.length=C,d=1,C--):(_.length=C+1,d=mathpow(10,LOG_BASE-o),_[C]=u>0?(E/mathpow(10,f-u)%mathpow(10,u)|0)*d:0),w)for(;;)if(C==0){(_[0]+=d)==BASE&&(_[0]=1,++e.e);break}else{if(_[C]+=d,_[C]!=BASE)break;_[C--]=0,d=1}for(o=_.length;_[--o]===0;)_.pop();if(external&&(e.e>MAX_E||e.e<-MAX_E))throw Error(exponentOutOfRange+getBase10Exponent(e));return e}function subtract(e,t){var n,o,u,d,f,v,w,E,C,_,D=e.constructor,O=D.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new D(e),external?round(t,O):t;if(w=e.d,_=t.d,o=t.e,E=e.e,w=w.slice(),f=E-o,f){for(C=f<0,C?(n=w,f=-f,v=_.length):(n=_,o=E,v=w.length),u=Math.max(Math.ceil(O/LOG_BASE),v)+2,f>u&&(f=u,n.length=1),n.reverse(),u=f;u--;)n.push(0);n.reverse()}else{for(u=w.length,v=_.length,C=u<v,C&&(v=u),u=0;u<v;u++)if(w[u]!=_[u]){C=w[u]<_[u];break}f=0}for(C&&(n=w,w=_,_=n,t.s=-t.s),v=w.length,u=_.length-v;u>0;--u)w[v++]=0;for(u=_.length;u>f;){if(w[--u]<_[u]){for(d=u;d&&w[--d]===0;)w[d]=BASE-1;--w[d],w[u]+=BASE}w[u]-=_[u]}for(;w[--v]===0;)w.pop();for(;w[0]===0;w.shift())--o;return w[0]?(t.d=w,t.e=o,external?round(t,O):t):new D(0)}function toString$1(e,t,n){var o,u=getBase10Exponent(e),d=digitsToString(e.d),f=d.length;return t?(n&&(o=n-f)>0?d=d.charAt(0)+"."+d.slice(1)+getZeroString(o):f>1&&(d=d.charAt(0)+"."+d.slice(1)),d=d+(u<0?"e":"e+")+u):u<0?(d="0."+getZeroString(-u-1)+d,n&&(o=n-f)>0&&(d+=getZeroString(o))):u>=f?(d+=getZeroString(u+1-f),n&&(o=n-u-1)>0&&(d=d+"."+getZeroString(o))):((o=u+1)<f&&(d=d.slice(0,o)+"."+d.slice(o)),n&&(o=n-f)>0&&(u+1===f&&(d+="."),d+=getZeroString(o))),e.s<0?"-"+d:d}function truncate(e,t){if(e.length>t)return e.length=t,!0}function clone(e){var t,n,o;function u(d){var f=this;if(!(f instanceof u))return new u(d);if(f.constructor=u,d instanceof u){f.s=d.s,f.e=d.e,f.d=(d=d.d)?d.slice():d;return}if(typeof d=="number"){if(d*0!==0)throw Error(invalidArgument+d);if(d>0)f.s=1;else if(d<0)d=-d,f.s=-1;else{f.s=0,f.e=0,f.d=[0];return}if(d===~~d&&d<1e7){f.e=0,f.d=[d];return}return parseDecimal(f,d.toString())}else if(typeof d!="string")throw Error(invalidArgument+d);if(d.charCodeAt(0)===45?(d=d.slice(1),f.s=-1):f.s=1,isDecimal.test(d))parseDecimal(f,d);else throw Error(invalidArgument+d)}if(u.prototype=P,u.ROUND_UP=0,u.ROUND_DOWN=1,u.ROUND_CEIL=2,u.ROUND_FLOOR=3,u.ROUND_HALF_UP=4,u.ROUND_HALF_DOWN=5,u.ROUND_HALF_EVEN=6,u.ROUND_HALF_CEIL=7,u.ROUND_HALF_FLOOR=8,u.clone=clone,u.config=u.set=config,e===void 0&&(e={}),e)for(o=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<o.length;)e.hasOwnProperty(n=o[t++])||(e[n]=this[n]);return u.config(e),u}function config(e){if(!e||typeof e!="object")throw Error(decimalError+"Object expected");var t,n,o,u=["precision",1,MAX_DIGITS,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<u.length;t+=3)if((o=e[n=u[t]])!==void 0)if(mathfloor(o)===o&&o>=u[t+1]&&o<=u[t+2])this[n]=o;else throw Error(invalidArgument+n+": "+o);if((o=e[n="LN10"])!==void 0)if(o==Math.LN10)this[n]=new this(o);else throw Error(invalidArgument+n+": "+o);return this}var Decimal=clone(defaults$1);ONE=new Decimal(1);const Decimal$1=Decimal;var identity=e=>e,PLACE_HOLDER={},isPlaceHolder=e=>e===PLACE_HOLDER,curry0=e=>function t(){return arguments.length===0||arguments.length===1&&isPlaceHolder(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},curryN=(e,t)=>e===1?t:curry0(function(){for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];var d=o.filter(f=>f!==PLACE_HOLDER).length;return d>=e?t(...o):curryN(e-d,curry0(function(){for(var f=arguments.length,v=new Array(f),w=0;w<f;w++)v[w]=arguments[w];var E=o.map(C=>isPlaceHolder(C)?v.shift():C);return t(...E,...v)}))}),curry=e=>curryN(e.length,e),range=(e,t)=>{for(var n=[],o=e;o<t;++o)n[o-e]=o;return n},map=curry((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),compose=function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];if(!n.length)return identity;var u=n.reverse(),d=u[0],f=u.slice(1);return function(){return f.reduce((v,w)=>w(v),d(...arguments))}},reverse=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),memoize$1=e=>{var t=null,n=null;return function(){for(var o=arguments.length,u=new Array(o),d=0;d<o;d++)u[d]=arguments[d];return t&&u.every((f,v)=>{var w;return f===((w=t)===null||w===void 0?void 0:w[v])})||(t=u,n=e(...u)),n}};function getDigitCount(e){var t;return e===0?t=1:t=Math.floor(new Decimal$1(e).abs().log(10).toNumber())+1,t}function rangeStep(e,t,n){for(var o=new Decimal$1(e),u=0,d=[];o.lt(t)&&u<1e5;)d.push(o.toNumber()),o=o.add(n),u++;return d}curry((e,t,n)=>{var o=+e,u=+t;return o+n*(u-o)});curry((e,t,n)=>{var o=t-+e;return o=o||1/0,(n-e)/o});curry((e,t,n)=>{var o=t-+e;return o=o||1/0,Math.max(0,Math.min(1,(n-e)/o))});var getValidInterval=e=>{var[t,n]=e,[o,u]=[t,n];return t>n&&([o,u]=[n,t]),[o,u]},getFormatStep=(e,t,n)=>{if(e.lte(0))return new Decimal$1(0);var o=getDigitCount(e.toNumber()),u=new Decimal$1(10).pow(o),d=e.div(u),f=o!==1?.05:.1,v=new Decimal$1(Math.ceil(d.div(f).toNumber())).add(n).mul(f),w=v.mul(u);return t?new Decimal$1(w.toNumber()):new Decimal$1(Math.ceil(w.toNumber()))},getTickOfSingleValue=(e,t,n)=>{var o=new Decimal$1(1),u=new Decimal$1(e);if(!u.isint()&&n){var d=Math.abs(e);d<1?(o=new Decimal$1(10).pow(getDigitCount(e)-1),u=new Decimal$1(Math.floor(u.div(o).toNumber())).mul(o)):d>1&&(u=new Decimal$1(Math.floor(e)))}else e===0?u=new Decimal$1(Math.floor((t-1)/2)):n||(u=new Decimal$1(Math.floor(e)));var f=Math.floor((t-1)/2),v=compose(map(w=>u.add(new Decimal$1(w-f).mul(o)).toNumber()),range);return v(0,t)},_calculateStep=function(t,n,o,u){var d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(o-1)))return{step:new Decimal$1(0),tickMin:new Decimal$1(0),tickMax:new Decimal$1(0)};var f=getFormatStep(new Decimal$1(n).sub(t).div(o-1),u,d),v;t<=0&&n>=0?v=new Decimal$1(0):(v=new Decimal$1(t).add(n).div(2),v=v.sub(new Decimal$1(v).mod(f)));var w=Math.ceil(v.sub(t).div(f).toNumber()),E=Math.ceil(new Decimal$1(n).sub(v).div(f).toNumber()),C=w+E+1;return C>o?_calculateStep(t,n,o,u,d+1):(C<o&&(E=n>0?E+(o-C):E,w=n>0?w:w+(o-C)),{step:f,tickMin:v.sub(new Decimal$1(w).mul(f)),tickMax:v.add(new Decimal$1(E).mul(f))})};function getNiceTickValuesFn(e){var[t,n]=e,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,d=Math.max(o,2),[f,v]=getValidInterval([t,n]);if(f===-1/0||v===1/0){var w=v===1/0?[f,...range(0,o-1).map(()=>1/0)]:[...range(0,o-1).map(()=>-1/0),v];return t>n?reverse(w):w}if(f===v)return getTickOfSingleValue(f,o,u);var{step:E,tickMin:C,tickMax:_}=_calculateStep(f,v,d,u,0),D=rangeStep(C,_.add(new Decimal$1(.1).mul(E)),E);return t>n?reverse(D):D}function getTickValuesFixedDomainFn(e,t){var[n,o]=e,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[d,f]=getValidInterval([n,o]);if(d===-1/0||f===1/0)return[n,o];if(d===f)return[d];var v=Math.max(t,2),w=getFormatStep(new Decimal$1(f).sub(d).div(v-1),u,0),E=[...rangeStep(new Decimal$1(d),new Decimal$1(f),w),f];return u===!1&&(E=E.map(C=>Math.round(C))),n>o?reverse(E):E}var getNiceTickValues=memoize$1(getNiceTickValuesFn),getTickValuesFixedDomain=memoize$1(getTickValuesFixedDomainFn),selectBarCategoryGap=e=>e.rootProps.barCategoryGap,selectStackOffsetType=e=>e.rootProps.stackOffset,selectChartName=e=>e.options.chartName,selectSyncId=e=>e.rootProps.syncId,selectSyncMethod=e=>e.rootProps.syncMethod,selectEventEmitter=e=>e.options.eventEmitter,defaultPolarAngleAxisProps={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},defaultPolarRadiusAxisProps={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},combineAxisRangeWithReverse=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},implicitAngleAxis={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:defaultPolarAngleAxisProps.angleAxisId,includeHidden:!1,name:void 0,reversed:defaultPolarAngleAxisProps.reversed,scale:defaultPolarAngleAxisProps.scale,tick:defaultPolarAngleAxisProps.tick,tickCount:void 0,ticks:void 0,type:defaultPolarAngleAxisProps.type,unit:void 0},implicitRadiusAxis={allowDataOverflow:defaultPolarRadiusAxisProps.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:defaultPolarRadiusAxisProps.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:defaultPolarRadiusAxisProps.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:defaultPolarRadiusAxisProps.scale,tick:defaultPolarRadiusAxisProps.tick,tickCount:defaultPolarRadiusAxisProps.tickCount,ticks:void 0,type:defaultPolarRadiusAxisProps.type,unit:void 0},implicitRadialBarAngleAxis={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:defaultPolarAngleAxisProps.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:defaultPolarAngleAxisProps.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:defaultPolarAngleAxisProps.scale,tick:defaultPolarAngleAxisProps.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},implicitRadialBarRadiusAxis={allowDataOverflow:defaultPolarRadiusAxisProps.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:defaultPolarRadiusAxisProps.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:defaultPolarRadiusAxisProps.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:defaultPolarRadiusAxisProps.scale,tick:defaultPolarRadiusAxisProps.tick,tickCount:defaultPolarRadiusAxisProps.tickCount,ticks:void 0,type:"category",unit:void 0},selectAngleAxis=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?implicitRadialBarAngleAxis:implicitAngleAxis,selectRadiusAxis=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?implicitRadialBarRadiusAxis:implicitRadiusAxis,selectPolarOptions=e=>e.polarOptions,selectMaxRadius=createSelector([selectChartWidth,selectChartHeight,selectChartOffsetInternal],getMaxRadius),selectInnerRadius=createSelector([selectPolarOptions,selectMaxRadius],(e,t)=>{if(e!=null)return getPercentValue(e.innerRadius,t,0)}),selectOuterRadius=createSelector([selectPolarOptions,selectMaxRadius],(e,t)=>{if(e!=null)return getPercentValue(e.outerRadius,t,t*.8)}),combineAngleAxisRange=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},selectAngleAxisRange=createSelector([selectPolarOptions],combineAngleAxisRange);createSelector([selectAngleAxis,selectAngleAxisRange],combineAxisRangeWithReverse);var selectRadiusAxisRange=createSelector([selectMaxRadius,selectInnerRadius,selectOuterRadius],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});createSelector([selectRadiusAxis,selectRadiusAxisRange],combineAxisRangeWithReverse);var selectPolarViewBox=createSelector([selectChartLayout,selectPolarOptions,selectInnerRadius,selectOuterRadius,selectChartWidth,selectChartHeight],(e,t,n,o,u,d)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||o==null)){var{cx:f,cy:v,startAngle:w,endAngle:E}=t;return{cx:getPercentValue(f,u,u/2),cy:getPercentValue(v,d,d/2),innerRadius:n,outerRadius:o,startAngle:w,endAngle:E,clockWise:!1}}}),pickAxisType=(e,t)=>t,pickAxisId=(e,t,n)=>n;function getStackSeriesIdentifier(e){return e?.id}var selectTooltipAxisType=e=>{var t=selectChartLayout(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},selectTooltipAxisId=e=>e.tooltip.settings.axisId,selectTooltipAxis=e=>{var t=selectTooltipAxisType(e),n=selectTooltipAxisId(e);return selectAxisSettings(e,t,n)},selectTooltipAxisDataKey=createSelector([selectTooltipAxis],e=>e?.dataKey);function combineDisplayedStackedData(e,t,n){var{chartData:o=[]}=t,{allowDuplicatedCategory:u,dataKey:d}=n,f=new Map;return e.forEach(v=>{var w,E=(w=v.data)!==null&&w!==void 0?w:o;if(!(E==null||E.length===0)){var C=getStackSeriesIdentifier(v);E.forEach((_,D)=>{var O=d==null||u?D:String(getValueByDataKey(_,d,null)),M=getValueByDataKey(_,v.dataKey,0),N;f.has(O)?N=f.get(O):N={},Object.assign(N,{[C]:M}),f.set(O,N)})}}),Array.from(f.values())}function isStacked(e){return e.stackId!=null&&e.dataKey!=null}var numberDomainEqualityCheck=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function arrayEqualityCheck(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function ownKeys$e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$e(Object(n),!0).forEach(function(o){_defineProperty$f(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$e(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$f(e,t,n){return(t=_toPropertyKey$f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$f(e){var t=_toPrimitive$f(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$f(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var defaultNumericDomain=[0,"auto"],implicitXAxis={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},selectXAxisSettingsNoDefaults=(e,t)=>e.cartesianAxis.xAxis[t],selectXAxisSettings=(e,t)=>{var n=selectXAxisSettingsNoDefaults(e,t);return n??implicitXAxis},implicitYAxis={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:defaultNumericDomain,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:DEFAULT_Y_AXIS_WIDTH},selectYAxisSettingsNoDefaults=(e,t)=>e.cartesianAxis.yAxis[t],selectYAxisSettings=(e,t)=>{var n=selectYAxisSettingsNoDefaults(e,t);return n??implicitYAxis},implicitZAxis={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},selectZAxisSettings=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??implicitZAxis},selectBaseAxis=(e,t,n)=>{switch(t){case"xAxis":return selectXAxisSettings(e,n);case"yAxis":return selectYAxisSettings(e,n);case"zAxis":return selectZAxisSettings(e,n);case"angleAxis":return selectAngleAxis(e,n);case"radiusAxis":return selectRadiusAxis(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},selectCartesianAxisSettings=(e,t,n)=>{switch(t){case"xAxis":return selectXAxisSettings(e,n);case"yAxis":return selectYAxisSettings(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},selectAxisSettings=(e,t,n)=>{switch(t){case"xAxis":return selectXAxisSettings(e,n);case"yAxis":return selectYAxisSettings(e,n);case"angleAxis":return selectAngleAxis(e,n);case"radiusAxis":return selectRadiusAxis(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},selectHasBar=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function itemAxisPredicate(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var selectUnfilteredCartesianItems=e=>e.graphicalItems.cartesianItems,selectAxisPredicate$1=createSelector([pickAxisType,pickAxisId],itemAxisPredicate),combineGraphicalItemsSettings=(e,t,n)=>e.filter(n).filter(o=>t?.includeHidden===!0?!0:!o.hide),selectCartesianItemsSettings=createSelector([selectUnfilteredCartesianItems,selectBaseAxis,selectAxisPredicate$1],combineGraphicalItemsSettings,{memoizeOptions:{resultEqualityCheck:arrayEqualityCheck}}),selectStackedCartesianItemsSettings=createSelector([selectCartesianItemsSettings],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(isStacked)),filterGraphicalNotStackedItems=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),selectCartesianItemsSettingsExceptStacked=createSelector([selectCartesianItemsSettings],filterGraphicalNotStackedItems),combineGraphicalItemsData=e=>e.map(t=>t.data).filter(Boolean).flat(1),selectCartesianGraphicalItemsData=createSelector([selectCartesianItemsSettings],combineGraphicalItemsData,{memoizeOptions:{resultEqualityCheck:arrayEqualityCheck}}),combineDisplayedData=(e,t)=>{var{chartData:n=[],dataStartIndex:o,dataEndIndex:u}=t;return e.length>0?e:n.slice(o,u+1)},selectDisplayedData$1=createSelector([selectCartesianGraphicalItemsData,selectChartDataWithIndexesIfNotInPanorama],combineDisplayedData),combineAppliedValues=(e,t,n)=>t?.dataKey!=null?e.map(o=>({value:getValueByDataKey(o,t.dataKey)})):n.length>0?n.map(o=>o.dataKey).flatMap(o=>e.map(u=>({value:getValueByDataKey(u,o)}))):e.map(o=>({value:o})),selectAllAppliedValues=createSelector([selectDisplayedData$1,selectBaseAxis,selectCartesianItemsSettings],combineAppliedValues);function isErrorBarRelevantForAxisType(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function makeNumber(e){if(isNumOrStr(e)||e instanceof Date){var t=Number(e);if(isWellBehavedNumber(t))return t}}function makeDomain(e){if(Array.isArray(e)){var t=[makeNumber(e[0]),makeNumber(e[1])];return isWellFormedNumberDomain(t)?t:void 0}var n=makeNumber(e);if(n!=null)return[n,n]}function onlyAllowNumbers(e){return e.map(makeNumber).filter(isNotNil)}function getErrorDomainByDataKey(e,t,n){return!n||typeof t!="number"||isNan(t)?[]:n.length?onlyAllowNumbers(n.flatMap(o=>{var u=getValueByDataKey(e,o.dataKey),d,f;if(Array.isArray(u)?[d,f]=u:d=f=u,!(!isWellBehavedNumber(d)||!isWellBehavedNumber(f)))return[t-d,t+f]})):[]}var selectDisplayedStackedData=createSelector([selectStackedCartesianItemsSettings,selectChartDataWithIndexesIfNotInPanorama,selectTooltipAxis],combineDisplayedStackedData),combineStackGroups=(e,t,n)=>{var o={},u=t.reduce((d,f)=>(f.stackId==null||(d[f.stackId]==null&&(d[f.stackId]=[]),d[f.stackId].push(f)),d),o);return Object.fromEntries(Object.entries(u).map(d=>{var[f,v]=d,w=v.map(getStackSeriesIdentifier);return[f,{stackedData:getStackedData(e,w,n),graphicalItems:v}]}))},selectStackGroups=createSelector([selectDisplayedStackedData,selectStackedCartesianItemsSettings,selectStackOffsetType],combineStackGroups),combineDomainOfStackGroups=(e,t,n,o)=>{var{dataStartIndex:u,dataEndIndex:d}=t;if(o==null&&n!=="zAxis"){var f=getDomainOfStackGroups(e,u,d);if(!(f!=null&&f[0]===0&&f[1]===0))return f}},selectAllowsDataOverflow=createSelector([selectBaseAxis],e=>e.allowDataOverflow),getDomainDefinition=e=>{var t;if(e==null||!("domain"in e))return defaultNumericDomain;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=onlyAllowNumbers(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:defaultNumericDomain},selectDomainDefinition=createSelector([selectBaseAxis],getDomainDefinition),selectDomainFromUserPreference=createSelector([selectDomainDefinition,selectAllowsDataOverflow],numericalDomainSpecifiedWithoutRequiringData),selectDomainOfStackGroups=createSelector([selectStackGroups,selectChartDataWithIndexes,pickAxisType,selectDomainFromUserPreference],combineDomainOfStackGroups,{memoizeOptions:{resultEqualityCheck:numberDomainEqualityCheck}}),selectAllErrorBarSettings=e=>e.errorBars,combineRelevantErrorBarSettings=(e,t,n)=>e.flatMap(o=>t[o.id]).filter(Boolean).filter(o=>isErrorBarRelevantForAxisType(n,o)),mergeDomains=function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var u=n.filter(Boolean);if(u.length!==0){var d=u.flat(),f=Math.min(...d),v=Math.max(...d);return[f,v]}},combineDomainOfAllAppliedNumericalValuesIncludingErrorValues=(e,t,n,o,u)=>{var d,f;if(n.length>0&&e.forEach(v=>{n.forEach(w=>{var E,C,_=(E=o[w.id])===null||E===void 0?void 0:E.filter(B=>isErrorBarRelevantForAxisType(u,B)),D=getValueByDataKey(v,(C=t.dataKey)!==null&&C!==void 0?C:w.dataKey),O=getErrorDomainByDataKey(v,D,_);if(O.length>=2){var M=Math.min(...O),N=Math.max(...O);(d==null||M<d)&&(d=M),(f==null||N>f)&&(f=N)}var I=makeDomain(D);I!=null&&(d=d==null?I[0]:Math.min(d,I[0]),f=f==null?I[1]:Math.max(f,I[1]))})}),t?.dataKey!=null&&e.forEach(v=>{var w=makeDomain(getValueByDataKey(v,t.dataKey));w!=null&&(d=d==null?w[0]:Math.min(d,w[0]),f=f==null?w[1]:Math.max(f,w[1]))}),isWellBehavedNumber(d)&&isWellBehavedNumber(f))return[d,f]},selectDomainOfAllAppliedNumericalValuesIncludingErrorValues$1=createSelector([selectDisplayedData$1,selectBaseAxis,selectCartesianItemsSettingsExceptStacked,selectAllErrorBarSettings,pickAxisType],combineDomainOfAllAppliedNumericalValuesIncludingErrorValues,{memoizeOptions:{resultEqualityCheck:numberDomainEqualityCheck}});function onlyAllowNumbersAndStringsAndDates(e){var{value:t}=e;if(isNumOrStr(t)||t instanceof Date)return t}var computeDomainOfTypeCategory=(e,t,n)=>{var o=e.map(onlyAllowNumbersAndStringsAndDates).filter(u=>u!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&hasDuplicate(o))?range$2(0,e.length):t.allowDuplicatedCategory?o:Array.from(new Set(o))},selectReferenceDots=e=>e.referenceElements.dots,filterReferenceElements=(e,t,n)=>e.filter(o=>o.ifOverflow==="extendDomain").filter(o=>t==="xAxis"?o.xAxisId===n:o.yAxisId===n),selectReferenceDotsByAxis=createSelector([selectReferenceDots,pickAxisType,pickAxisId],filterReferenceElements),selectReferenceAreas=e=>e.referenceElements.areas,selectReferenceAreasByAxis=createSelector([selectReferenceAreas,pickAxisType,pickAxisId],filterReferenceElements),selectReferenceLines=e=>e.referenceElements.lines,selectReferenceLinesByAxis=createSelector([selectReferenceLines,pickAxisType,pickAxisId],filterReferenceElements),combineDotsDomain=(e,t)=>{var n=onlyAllowNumbers(e.map(o=>t==="xAxis"?o.x:o.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},selectReferenceDotsDomain=createSelector(selectReferenceDotsByAxis,pickAxisType,combineDotsDomain),combineAreasDomain=(e,t)=>{var n=onlyAllowNumbers(e.flatMap(o=>[t==="xAxis"?o.x1:o.y1,t==="xAxis"?o.x2:o.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},selectReferenceAreasDomain=createSelector([selectReferenceAreasByAxis,pickAxisType],combineAreasDomain),combineLinesDomain=(e,t)=>{var n=onlyAllowNumbers(e.map(o=>t==="xAxis"?o.x:o.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},selectReferenceLinesDomain=createSelector(selectReferenceLinesByAxis,pickAxisType,combineLinesDomain),selectReferenceElementsDomain=createSelector(selectReferenceDotsDomain,selectReferenceLinesDomain,selectReferenceAreasDomain,(e,t,n)=>mergeDomains(e,n,t)),combineNumericalDomain=(e,t,n,o,u,d,f,v)=>{if(n!=null)return n;var w=f==="vertical"&&v==="xAxis"||f==="horizontal"&&v==="yAxis",E=w?mergeDomains(o,d,u):mergeDomains(d,u);return parseNumericalUserDomain(t,E,e.allowDataOverflow)},selectNumericalDomain=createSelector([selectBaseAxis,selectDomainDefinition,selectDomainFromUserPreference,selectDomainOfStackGroups,selectDomainOfAllAppliedNumericalValuesIncludingErrorValues$1,selectReferenceElementsDomain,selectChartLayout,pickAxisType],combineNumericalDomain,{memoizeOptions:{resultEqualityCheck:numberDomainEqualityCheck}}),expandDomain=[0,1],combineAxisDomain=(e,t,n,o,u,d,f)=>{if(!((e==null||n==null||n.length===0)&&f===void 0)){var{dataKey:v,type:w}=e,E=isCategoricalAxis(t,d);return E&&v==null?range$2(0,n.length):w==="category"?computeDomainOfTypeCategory(o,e,E):u==="expand"?expandDomain:f}},selectAxisDomain=createSelector([selectBaseAxis,selectChartLayout,selectDisplayedData$1,selectAllAppliedValues,selectStackOffsetType,pickAxisType,selectNumericalDomain],combineAxisDomain),combineRealScaleType=(e,t,n,o,u)=>{if(e!=null){var{scale:d,type:f}=e;if(d==="auto")return t==="radial"&&u==="radiusAxis"?"band":t==="radial"&&u==="angleAxis"?"linear":f==="category"&&o&&(o.indexOf("LineChart")>=0||o.indexOf("AreaChart")>=0||o.indexOf("ComposedChart")>=0&&!n)?"point":f==="category"?"band":"linear";if(typeof d=="string"){var v="scale".concat(upperFirst(d));return v in d3Scales?v:"point"}}},selectRealScaleType=createSelector([selectBaseAxis,selectChartLayout,selectHasBar,selectChartName,pickAxisType],combineRealScaleType);function getD3ScaleFromType(e){if(e!=null){if(e in d3Scales)return d3Scales[e]();var t="scale".concat(upperFirst(e));if(t in d3Scales)return d3Scales[t]()}}function combineScaleFunction(e,t,n,o){if(!(n==null||o==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(o);var u=getD3ScaleFromType(t);if(u!=null){var d=u.domain(n).range(o);return checkDomainOfScale(d),d}}}var combineNiceTicks=(e,t,n)=>{var o=getDomainDefinition(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(o)&&(o[0]==="auto"||o[1]==="auto")&&isWellFormedNumberDomain(e))return getNiceTickValues(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&isWellFormedNumberDomain(e))return getTickValuesFixedDomain(e,t.tickCount,t.allowDecimals)}},selectNiceTicks=createSelector([selectAxisDomain,selectAxisSettings,selectRealScaleType],combineNiceTicks),combineAxisDomainWithNiceTicks=(e,t,n,o)=>{if(o!=="angleAxis"&&e?.type==="number"&&isWellFormedNumberDomain(t)&&Array.isArray(n)&&n.length>0){var u=t[0],d=n[0],f=t[1],v=n[n.length-1];return[Math.min(u,d),Math.max(f,v)]}return t},selectAxisDomainIncludingNiceTicks=createSelector([selectBaseAxis,selectAxisDomain,selectNiceTicks,pickAxisType],combineAxisDomainWithNiceTicks),selectSmallestDistanceBetweenValues=createSelector(selectAllAppliedValues,selectBaseAxis,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,o=Array.from(onlyAllowNumbers(e.map(v=>v.value))).sort((v,w)=>v-w);if(o.length<2)return 1/0;var u=o[o.length-1]-o[0];if(u===0)return 1/0;for(var d=0;d<o.length-1;d++){var f=o[d+1]-o[d];n=Math.min(n,f)}return n/u}}),selectCalculatedPadding=createSelector(selectSmallestDistanceBetweenValues,selectChartLayout,selectBarCategoryGap,selectChartOffsetInternal,(e,t,n,o)=>o,(e,t,n,o,u)=>{if(!isWellBehavedNumber(e))return 0;var d=t==="vertical"?o.height:o.width;if(u==="gap")return e*d/2;if(u==="no-gap"){var f=getPercentValue(n,e*d),v=e*d/2;return v-f-(v-f)/d*f}return 0}),selectCalculatedXAxisPadding=(e,t)=>{var n=selectXAxisSettings(e,t);return n==null||typeof n.padding!="string"?0:selectCalculatedPadding(e,"xAxis",t,n.padding)},selectCalculatedYAxisPadding=(e,t)=>{var n=selectYAxisSettings(e,t);return n==null||typeof n.padding!="string"?0:selectCalculatedPadding(e,"yAxis",t,n.padding)},selectXAxisPadding=createSelector(selectXAxisSettings,selectCalculatedXAxisPadding,(e,t)=>{var n,o;if(e==null)return{left:0,right:0};var{padding:u}=e;return typeof u=="string"?{left:t,right:t}:{left:((n=u.left)!==null&&n!==void 0?n:0)+t,right:((o=u.right)!==null&&o!==void 0?o:0)+t}}),selectYAxisPadding=createSelector(selectYAxisSettings,selectCalculatedYAxisPadding,(e,t)=>{var n,o;if(e==null)return{top:0,bottom:0};var{padding:u}=e;return typeof u=="string"?{top:t,bottom:t}:{top:((n=u.top)!==null&&n!==void 0?n:0)+t,bottom:((o=u.bottom)!==null&&o!==void 0?o:0)+t}}),combineXAxisRange=createSelector([selectChartOffsetInternal,selectXAxisPadding,selectBrushDimensions,selectBrushSettings,(e,t,n)=>n],(e,t,n,o,u)=>{var{padding:d}=o;return u?[d.left,n.width-d.right]:[e.left+t.left,e.left+e.width-t.right]}),combineYAxisRange=createSelector([selectChartOffsetInternal,selectChartLayout,selectYAxisPadding,selectBrushDimensions,selectBrushSettings,(e,t,n)=>n],(e,t,n,o,u,d)=>{var{padding:f}=u;return d?[o.height-f.bottom,f.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),selectAxisRange=(e,t,n,o)=>{var u;switch(t){case"xAxis":return combineXAxisRange(e,n,o);case"yAxis":return combineYAxisRange(e,n,o);case"zAxis":return(u=selectZAxisSettings(e,n))===null||u===void 0?void 0:u.range;case"angleAxis":return selectAngleAxisRange(e);case"radiusAxis":return selectRadiusAxisRange(e,n);default:return}},selectAxisRangeWithReverse=createSelector([selectBaseAxis,selectAxisRange],combineAxisRangeWithReverse),selectAxisScale=createSelector([selectBaseAxis,selectRealScaleType,selectAxisDomainIncludingNiceTicks,selectAxisRangeWithReverse],combineScaleFunction);createSelector([selectCartesianItemsSettings,selectAllErrorBarSettings,pickAxisType],combineRelevantErrorBarSettings);function compareIds(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var pickAxisOrientation=(e,t)=>t,pickMirror=(e,t,n)=>n,selectAllXAxesWithOffsetType=createSelector(selectAllXAxes,pickAxisOrientation,pickMirror,(e,t,n)=>e.filter(o=>o.orientation===t).filter(o=>o.mirror===n).sort(compareIds)),selectAllYAxesWithOffsetType=createSelector(selectAllYAxes,pickAxisOrientation,pickMirror,(e,t,n)=>e.filter(o=>o.orientation===t).filter(o=>o.mirror===n).sort(compareIds)),getXAxisSize=(e,t)=>({width:e.width,height:t.height}),getYAxisSize=(e,t)=>{var n=typeof t.width=="number"?t.width:DEFAULT_Y_AXIS_WIDTH;return{width:n,height:e.height}};createSelector(selectChartOffsetInternal,selectXAxisSettings,getXAxisSize);var combineXAxisPositionStartingPoint=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},combineYAxisPositionStartingPoint=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},selectAllXAxesOffsetSteps=createSelector(selectChartHeight,selectChartOffsetInternal,selectAllXAxesWithOffsetType,pickAxisOrientation,pickMirror,(e,t,n,o,u)=>{var d={},f;return n.forEach(v=>{var w=getXAxisSize(t,v);f==null&&(f=combineXAxisPositionStartingPoint(t,o,e));var E=o==="top"&&!u||o==="bottom"&&u;d[v.id]=f-Number(E)*w.height,f+=(E?-1:1)*w.height}),d}),selectAllYAxesOffsetSteps=createSelector(selectChartWidth,selectChartOffsetInternal,selectAllYAxesWithOffsetType,pickAxisOrientation,pickMirror,(e,t,n,o,u)=>{var d={},f;return n.forEach(v=>{var w=getYAxisSize(t,v);f==null&&(f=combineYAxisPositionStartingPoint(t,o,e));var E=o==="left"&&!u||o==="right"&&u;d[v.id]=f-Number(E)*w.width,f+=(E?-1:1)*w.width}),d}),selectXAxisOffsetSteps=(e,t)=>{var n=selectXAxisSettings(e,t);if(n!=null)return selectAllXAxesOffsetSteps(e,n.orientation,n.mirror)};createSelector([selectChartOffsetInternal,selectXAxisSettings,selectXAxisOffsetSteps,(e,t)=>t],(e,t,n,o)=>{if(t!=null){var u=n?.[o];return u==null?{x:e.left,y:0}:{x:e.left,y:u}}});var selectYAxisOffsetSteps=(e,t)=>{var n=selectYAxisSettings(e,t);if(n!=null)return selectAllYAxesOffsetSteps(e,n.orientation,n.mirror)};createSelector([selectChartOffsetInternal,selectYAxisSettings,selectYAxisOffsetSteps,(e,t)=>t],(e,t,n,o)=>{if(t!=null){var u=n?.[o];return u==null?{x:0,y:e.top}:{x:u,y:e.top}}});createSelector(selectChartOffsetInternal,selectYAxisSettings,(e,t)=>{var n=typeof t.width=="number"?t.width:DEFAULT_Y_AXIS_WIDTH;return{width:n,height:e.height}});var combineDuplicateDomain=(e,t,n,o)=>{if(n!=null){var{allowDuplicatedCategory:u,type:d,dataKey:f}=n,v=isCategoricalAxis(e,o),w=t.map(E=>E.value);if(f&&v&&d==="category"&&u&&hasDuplicate(w))return w}},selectDuplicateDomain=createSelector([selectChartLayout,selectAllAppliedValues,selectBaseAxis,pickAxisType],combineDuplicateDomain),combineCategoricalDomain=(e,t,n,o)=>{if(!(n==null||n.dataKey==null)){var{type:u,scale:d}=n,f=isCategoricalAxis(e,o);if(f&&(u==="number"||d!=="auto"))return t.map(v=>v.value)}},selectCategoricalDomain=createSelector([selectChartLayout,selectAllAppliedValues,selectAxisSettings,pickAxisType],combineCategoricalDomain);createSelector([selectChartLayout,selectCartesianAxisSettings,selectRealScaleType,selectAxisScale,selectDuplicateDomain,selectCategoricalDomain,selectAxisRange,selectNiceTicks,pickAxisType],(e,t,n,o,u,d,f,v,w)=>{if(t==null)return null;var E=isCategoricalAxis(e,w);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:w,categoricalDomain:d,duplicateDomain:u,isCategorical:E,niceTicks:v,range:f,realScaleType:n,scale:o}});var combineAxisTicks=(e,t,n,o,u,d,f,v,w)=>{if(!(t==null||o==null)){var E=isCategoricalAxis(e,w),{type:C,ticks:_,tickCount:D}=t,O=n==="scaleBand"&&typeof o.bandwidth=="function"?o.bandwidth()/2:2,M=C==="category"&&o.bandwidth?o.bandwidth()/O:0;M=w==="angleAxis"&&d!=null&&d.length>=2?mathSign(d[0]-d[1])*2*M:M;var N=_||u;if(N){var I=N.map((B,V)=>{var j=f?f.indexOf(B):B;return{index:V,coordinate:o(j)+M,value:B,offset:M}});return I.filter(B=>!isNan(B.coordinate))}return E&&v?v.map((B,V)=>({coordinate:o(B)+M,value:B,index:V,offset:M})):o.ticks?o.ticks(D).map(B=>({coordinate:o(B)+M,value:B,offset:M})):o.domain().map((B,V)=>({coordinate:o(B)+M,value:f?f[B]:B,index:V,offset:M}))}};createSelector([selectChartLayout,selectAxisSettings,selectRealScaleType,selectAxisScale,selectNiceTicks,selectAxisRange,selectDuplicateDomain,selectCategoricalDomain,pickAxisType],combineAxisTicks);var combineGraphicalItemTicks=(e,t,n,o,u,d,f)=>{if(!(t==null||n==null||o==null||o[0]===o[1])){var v=isCategoricalAxis(e,f),{tickCount:w}=t,E=0;return E=f==="angleAxis"&&o?.length>=2?mathSign(o[0]-o[1])*2*E:E,v&&d?d.map((C,_)=>({coordinate:n(C)+E,value:C,index:_,offset:E})):n.ticks?n.ticks(w).map(C=>({coordinate:n(C)+E,value:C,offset:E})):n.domain().map((C,_)=>({coordinate:n(C)+E,value:u?u[C]:C,index:_,offset:E}))}};createSelector([selectChartLayout,selectAxisSettings,selectAxisScale,selectAxisRange,selectDuplicateDomain,selectCategoricalDomain,pickAxisType],combineGraphicalItemTicks);createSelector(selectBaseAxis,selectAxisScale,(e,t)=>{if(!(e==null||t==null))return _objectSpread$e(_objectSpread$e({},e),{},{scale:t})});var selectZAxisScale=createSelector([selectBaseAxis,selectRealScaleType,selectAxisDomain,selectAxisRangeWithReverse],combineScaleFunction);createSelector((e,t,n)=>selectZAxisSettings(e,n),selectZAxisScale,(e,t)=>{if(!(e==null||t==null))return _objectSpread$e(_objectSpread$e({},e),{},{scale:t})});var selectChartDirection=createSelector([selectChartLayout,selectAllXAxes,selectAllYAxes],(e,t,n)=>{switch(e){case"horizontal":return t.some(o=>o.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(o=>o.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),selectDefaultTooltipEventType=e=>e.options.defaultTooltipEventType,selectValidateTooltipEventTypes=e=>e.options.validateTooltipEventTypes;function combineTooltipEventType(e,t,n){if(e==null)return t;var o=e?"axis":"item";return n==null?t:n.includes(o)?o:t}function selectTooltipEventType$1(e,t){var n=selectDefaultTooltipEventType(e),o=selectValidateTooltipEventTypes(e);return combineTooltipEventType(t,n,o)}function useTooltipEventType(e){return useAppSelector(t=>selectTooltipEventType$1(t,e))}var combineActiveLabel=(e,t)=>{var n,o=Number(t);if(!(isNan(o)||t==null))return o>=0?e==null||(n=e[o])===null||n===void 0?void 0:n.value:void 0},selectTooltipSettings=e=>e.tooltip.settings,noInteraction={active:!1,index:null,dataKey:void 0,coordinate:void 0},initialState$8={itemInteraction:{click:noInteraction,hover:noInteraction},axisInteraction:{click:noInteraction,hover:noInteraction},keyboardInteraction:noInteraction,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},tooltipSlice=createSlice({name:"tooltip",initialState:initialState$8,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:prepareAutoBatched()},removeTooltipEntrySettings:{reducer(e,t){var n=current(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},prepare:prepareAutoBatched()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings,removeTooltipEntrySettings,setTooltipSettingsState,setActiveMouseOverItemIndex,mouseLeaveItem,mouseLeaveChart,setActiveClickItemIndex,setMouseOverAxisIndex,setMouseClickAxisIndex,setSyncInteraction,setKeyboardInteraction}=tooltipSlice.actions,tooltipReducer=tooltipSlice.reducer;function ownKeys$d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$d(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$d(Object(n),!0).forEach(function(o){_defineProperty$e(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$d(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$e(e,t,n){return(t=_toPropertyKey$e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$e(e){var t=_toPrimitive$e(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function chooseAppropriateMouseInteraction(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function hasBeenActivePreviously(e){return e.index!=null}var combineTooltipInteractionState=(e,t,n,o)=>{if(t==null)return noInteraction;var u=chooseAppropriateMouseInteraction(e,t,n);if(u==null)return noInteraction;if(u.active)return u;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var d=e.settings.active===!0;if(hasBeenActivePreviously(u)){if(d)return _objectSpread$d(_objectSpread$d({},u),{},{active:!0})}else if(o!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:o};return _objectSpread$d(_objectSpread$d({},noInteraction),{},{coordinate:u.coordinate})},combineActiveTooltipIndex=(e,t)=>{var n=e?.index;if(n==null)return null;var o=Number(n);if(!isWellBehavedNumber(o))return n;var u=0,d=1/0;return t.length>0&&(d=t.length-1),String(Math.max(u,Math.min(o,d)))},combineCoordinateForDefaultIndex=(e,t,n,o,u,d,f,v)=>{if(!(d==null||v==null)){var w=f[0],E=w==null?void 0:v(w.positions,d);if(E!=null)return E;var C=u?.[Number(d)];if(C)switch(n){case"horizontal":return{x:C.coordinate,y:(o.top+t)/2};default:return{x:(o.left+e)/2,y:C.coordinate}}}},combineTooltipPayloadConfigurations=(e,t,n,o)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var u;return n==="hover"?u=e.itemInteraction.hover.dataKey:u=e.itemInteraction.click.dataKey,u==null&&o!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(d=>{var f;return((f=d.settings)===null||f===void 0?void 0:f.dataKey)===u})},selectTooltipPayloadSearcher=e=>e.options.tooltipPayloadSearcher,selectTooltipState=e=>e.tooltip;function ownKeys$c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$c(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$c(Object(n),!0).forEach(function(o){_defineProperty$d(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$c(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$d(e,t,n){return(t=_toPropertyKey$d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$d(e){var t=_toPrimitive$d(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$d(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function selectFinalData(e,t){return e??t}var combineTooltipPayload=(e,t,n,o,u,d,f)=>{if(!(t==null||d==null)){var{chartData:v,computedData:w,dataStartIndex:E,dataEndIndex:C}=n,_=[];return e.reduce((D,O)=>{var M,{dataDefinedOnItem:N,settings:I}=O,B=selectFinalData(N,v),V=Array.isArray(B)?getSliced(B,E,C):B,j=(M=I?.dataKey)!==null&&M!==void 0?M:o,q=I?.nameKey,z;if(o&&Array.isArray(V)&&!Array.isArray(V[0])&&f==="axis"?z=findEntryInArray(V,o,u):z=d(V,t,w,q),Array.isArray(z))z.forEach(ee=>{var ie=_objectSpread$c(_objectSpread$c({},I),{},{name:ee.name,unit:ee.unit,color:void 0,fill:void 0});D.push(getTooltipEntry({tooltipEntrySettings:ie,dataKey:ee.dataKey,payload:ee.payload,value:getValueByDataKey(ee.payload,ee.dataKey),name:ee.name}))});else{var $;D.push(getTooltipEntry({tooltipEntrySettings:I,dataKey:j,payload:z,value:getValueByDataKey(z,j),name:($=getValueByDataKey(z,q))!==null&&$!==void 0?$:I?.name}))}return D},_)}},selectTooltipAxisRealScaleType=createSelector([selectTooltipAxis,selectChartLayout,selectHasBar,selectChartName,selectTooltipAxisType],combineRealScaleType),selectAllUnfilteredGraphicalItems=createSelector([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),selectTooltipAxisPredicate=createSelector([selectTooltipAxisType,selectTooltipAxisId],itemAxisPredicate),selectAllGraphicalItemsSettings=createSelector([selectAllUnfilteredGraphicalItems,selectTooltipAxis,selectTooltipAxisPredicate],combineGraphicalItemsSettings,{memoizeOptions:{resultEqualityCheck:arrayEqualityCheck}}),selectAllStackedGraphicalItemsSettings=createSelector([selectAllGraphicalItemsSettings],e=>e.filter(isStacked)),selectTooltipGraphicalItemsData=createSelector([selectAllGraphicalItemsSettings],combineGraphicalItemsData,{memoizeOptions:{resultEqualityCheck:arrayEqualityCheck}}),selectTooltipDisplayedData=createSelector([selectTooltipGraphicalItemsData,selectChartDataWithIndexes],combineDisplayedData),selectTooltipStackedData=createSelector([selectAllStackedGraphicalItemsSettings,selectChartDataWithIndexes,selectTooltipAxis],combineDisplayedStackedData),selectAllTooltipAppliedValues=createSelector([selectTooltipDisplayedData,selectTooltipAxis,selectAllGraphicalItemsSettings],combineAppliedValues),selectTooltipAxisDomainDefinition=createSelector([selectTooltipAxis],getDomainDefinition),selectTooltipDataOverflow=createSelector([selectTooltipAxis],e=>e.allowDataOverflow),selectTooltipDomainFromUserPreferences=createSelector([selectTooltipAxisDomainDefinition,selectTooltipDataOverflow],numericalDomainSpecifiedWithoutRequiringData),selectAllStackedGraphicalItems=createSelector([selectAllGraphicalItemsSettings],e=>e.filter(isStacked)),selectTooltipStackGroups=createSelector([selectTooltipStackedData,selectAllStackedGraphicalItems,selectStackOffsetType],combineStackGroups),selectTooltipDomainOfStackGroups=createSelector([selectTooltipStackGroups,selectChartDataWithIndexes,selectTooltipAxisType,selectTooltipDomainFromUserPreferences],combineDomainOfStackGroups),selectTooltipItemsSettingsExceptStacked=createSelector([selectAllGraphicalItemsSettings],filterGraphicalNotStackedItems),selectDomainOfAllAppliedNumericalValuesIncludingErrorValues=createSelector([selectTooltipDisplayedData,selectTooltipAxis,selectTooltipItemsSettingsExceptStacked,selectAllErrorBarSettings,selectTooltipAxisType],combineDomainOfAllAppliedNumericalValuesIncludingErrorValues,{memoizeOptions:{resultEqualityCheck:numberDomainEqualityCheck}}),selectReferenceDotsByTooltipAxis=createSelector([selectReferenceDots,selectTooltipAxisType,selectTooltipAxisId],filterReferenceElements),selectTooltipReferenceDotsDomain=createSelector([selectReferenceDotsByTooltipAxis,selectTooltipAxisType],combineDotsDomain),selectReferenceAreasByTooltipAxis=createSelector([selectReferenceAreas,selectTooltipAxisType,selectTooltipAxisId],filterReferenceElements),selectTooltipReferenceAreasDomain=createSelector([selectReferenceAreasByTooltipAxis,selectTooltipAxisType],combineAreasDomain),selectReferenceLinesByTooltipAxis=createSelector([selectReferenceLines,selectTooltipAxisType,selectTooltipAxisId],filterReferenceElements),selectTooltipReferenceLinesDomain=createSelector([selectReferenceLinesByTooltipAxis,selectTooltipAxisType],combineLinesDomain),selectTooltipReferenceElementsDomain=createSelector([selectTooltipReferenceDotsDomain,selectTooltipReferenceLinesDomain,selectTooltipReferenceAreasDomain],mergeDomains),selectTooltipNumericalDomain=createSelector([selectTooltipAxis,selectTooltipAxisDomainDefinition,selectTooltipDomainFromUserPreferences,selectTooltipDomainOfStackGroups,selectDomainOfAllAppliedNumericalValuesIncludingErrorValues,selectTooltipReferenceElementsDomain,selectChartLayout,selectTooltipAxisType],combineNumericalDomain),selectTooltipAxisDomain=createSelector([selectTooltipAxis,selectChartLayout,selectTooltipDisplayedData,selectAllTooltipAppliedValues,selectStackOffsetType,selectTooltipAxisType,selectTooltipNumericalDomain],combineAxisDomain),selectTooltipNiceTicks=createSelector([selectTooltipAxisDomain,selectTooltipAxis,selectTooltipAxisRealScaleType],combineNiceTicks),selectTooltipAxisDomainIncludingNiceTicks=createSelector([selectTooltipAxis,selectTooltipAxisDomain,selectTooltipNiceTicks,selectTooltipAxisType],combineAxisDomainWithNiceTicks),selectTooltipAxisRange=e=>{var t=selectTooltipAxisType(e),n=selectTooltipAxisId(e),o=!1;return selectAxisRange(e,t,n,o)},selectTooltipAxisRangeWithReverse=createSelector([selectTooltipAxis,selectTooltipAxisRange],combineAxisRangeWithReverse),selectTooltipAxisScale=createSelector([selectTooltipAxis,selectTooltipAxisRealScaleType,selectTooltipAxisDomainIncludingNiceTicks,selectTooltipAxisRangeWithReverse],combineScaleFunction),selectTooltipDuplicateDomain=createSelector([selectChartLayout,selectAllTooltipAppliedValues,selectTooltipAxis,selectTooltipAxisType],combineDuplicateDomain),selectTooltipCategoricalDomain=createSelector([selectChartLayout,selectAllTooltipAppliedValues,selectTooltipAxis,selectTooltipAxisType],combineCategoricalDomain),combineTicksOfTooltipAxis=(e,t,n,o,u,d,f,v)=>{if(t){var{type:w}=t,E=isCategoricalAxis(e,v);if(o){var C=n==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,_=w==="category"&&o.bandwidth?o.bandwidth()/C:0;return _=v==="angleAxis"&&u!=null&&u?.length>=2?mathSign(u[0]-u[1])*2*_:_,E&&f?f.map((D,O)=>({coordinate:o(D)+_,value:D,index:O,offset:_})):o.domain().map((D,O)=>({coordinate:o(D)+_,value:d?d[D]:D,index:O,offset:_}))}}},selectTooltipAxisTicks=createSelector([selectChartLayout,selectTooltipAxis,selectTooltipAxisRealScaleType,selectTooltipAxisScale,selectTooltipAxisRange,selectTooltipDuplicateDomain,selectTooltipCategoricalDomain,selectTooltipAxisType],combineTicksOfTooltipAxis),selectTooltipEventType=createSelector([selectDefaultTooltipEventType,selectValidateTooltipEventTypes,selectTooltipSettings],(e,t,n)=>combineTooltipEventType(n.shared,e,t)),selectTooltipTrigger=e=>e.tooltip.settings.trigger,selectDefaultIndex=e=>e.tooltip.settings.defaultIndex,selectTooltipInteractionState$1=createSelector([selectTooltipState,selectTooltipEventType,selectTooltipTrigger,selectDefaultIndex],combineTooltipInteractionState),selectActiveTooltipIndex=createSelector([selectTooltipInteractionState$1,selectTooltipDisplayedData],combineActiveTooltipIndex),selectActiveLabel$1=createSelector([selectTooltipAxisTicks,selectActiveTooltipIndex],combineActiveLabel),selectActiveTooltipDataKey=createSelector([selectTooltipInteractionState$1],e=>{if(e)return e.dataKey}),selectTooltipPayloadConfigurations$1=createSelector([selectTooltipState,selectTooltipEventType,selectTooltipTrigger,selectDefaultIndex],combineTooltipPayloadConfigurations),selectTooltipCoordinateForDefaultIndex=createSelector([selectChartWidth,selectChartHeight,selectChartLayout,selectChartOffsetInternal,selectTooltipAxisTicks,selectDefaultIndex,selectTooltipPayloadConfigurations$1,selectTooltipPayloadSearcher],combineCoordinateForDefaultIndex),selectActiveTooltipCoordinate=createSelector([selectTooltipInteractionState$1,selectTooltipCoordinateForDefaultIndex],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),selectIsTooltipActive$1=createSelector([selectTooltipInteractionState$1],e=>e.active),selectActiveTooltipPayload=createSelector([selectTooltipPayloadConfigurations$1,selectActiveTooltipIndex,selectChartDataWithIndexes,selectTooltipAxisDataKey,selectActiveLabel$1,selectTooltipPayloadSearcher,selectTooltipEventType],combineTooltipPayload);createSelector([selectActiveTooltipPayload],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function ownKeys$b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$b(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$b(Object(n),!0).forEach(function(o){_defineProperty$c(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$b(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$c(e,t,n){return(t=_toPropertyKey$c(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$c(e){var t=_toPrimitive$c(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$c(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var useTooltipAxis=()=>useAppSelector(selectTooltipAxis),useTooltipAxisBandSize=()=>{var e=useTooltipAxis(),t=useAppSelector(selectTooltipAxisTicks),n=useAppSelector(selectTooltipAxisScale);return getBandSizeOfAxis(_objectSpread$b(_objectSpread$b({},e),{},{scale:n}),t)},useChartName=()=>useAppSelector(selectChartName),pickTooltipEventType=(e,t)=>t,pickTrigger=(e,t,n)=>n,pickDefaultIndex=(e,t,n,o)=>o,selectOrderedTooltipTicks=createSelector(selectTooltipAxisTicks,e=>sortBy(e,t=>t.coordinate)),selectTooltipInteractionState=createSelector([selectTooltipState,pickTooltipEventType,pickTrigger,pickDefaultIndex],combineTooltipInteractionState),selectActiveIndex=createSelector([selectTooltipInteractionState,selectTooltipDisplayedData],combineActiveTooltipIndex),selectTooltipDataKey=(e,t,n)=>{if(t!=null){var o=selectTooltipState(e);return t==="axis"?n==="hover"?o.axisInteraction.hover.dataKey:o.axisInteraction.click.dataKey:n==="hover"?o.itemInteraction.hover.dataKey:o.itemInteraction.click.dataKey}},selectTooltipPayloadConfigurations=createSelector([selectTooltipState,pickTooltipEventType,pickTrigger,pickDefaultIndex],combineTooltipPayloadConfigurations),selectCoordinateForDefaultIndex=createSelector([selectChartWidth,selectChartHeight,selectChartLayout,selectChartOffsetInternal,selectTooltipAxisTicks,pickDefaultIndex,selectTooltipPayloadConfigurations,selectTooltipPayloadSearcher],combineCoordinateForDefaultIndex),selectActiveCoordinate=createSelector([selectTooltipInteractionState,selectCoordinateForDefaultIndex],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),selectActiveLabel=createSelector(selectTooltipAxisTicks,selectActiveIndex,combineActiveLabel),selectTooltipPayload=createSelector([selectTooltipPayloadConfigurations,selectActiveIndex,selectChartDataWithIndexes,selectTooltipAxisDataKey,selectActiveLabel,selectTooltipPayloadSearcher,pickTooltipEventType],combineTooltipPayload),selectIsTooltipActive=createSelector([selectTooltipInteractionState],e=>({isActive:e.active,activeIndex:e.index})),combineActiveProps=(e,t,n,o,u,d,f,v)=>{if(!(!e||!t||!o||!u||!d)){var w=inRange(e.chartX,e.chartY,t,n,v);if(w){var E=calculateTooltipPos(w,t),C=calculateActiveTickIndex(E,f,d,o,u),_=getActiveCoordinate(t,d,C,w);return{activeIndex:String(C),activeCoordinate:_}}}};function _extends$8(){return _extends$8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$8.apply(null,arguments)}function ownKeys$a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$a(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$a(Object(n),!0).forEach(function(o){_defineProperty$b(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$a(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$b(e,t,n){return(t=_toPropertyKey$b(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$b(e){var t=_toPrimitive$b(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$b(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CursorInternal(e){var{coordinate:t,payload:n,index:o,offset:u,tooltipAxisBandSize:d,layout:f,cursor:v,tooltipEventType:w,chartName:E}=e,C=t,_=n,D=o;if(!v||!C||E!=="ScatterChart"&&w!=="axis")return null;var O,M;if(E==="ScatterChart")O=C,M=Cross;else if(E==="BarChart")O=getCursorRectangle(f,C,u,d),M=Rectangle;else if(f==="radial"){var{cx:N,cy:I,radius:B,startAngle:V,endAngle:j}=getRadialCursorPoints(C);O={cx:N,cy:I,startAngle:V,endAngle:j,innerRadius:B,outerRadius:B},M=Sector}else O={points:getCursorPoints(f,C,u)},M=Curve;var q=typeof v=="object"&&"className"in v?v.className:void 0,z=_objectSpread$a(_objectSpread$a(_objectSpread$a(_objectSpread$a({stroke:"#ccc",pointerEvents:"none"},u),O),svgPropertiesNoEventsFromUnknown(v)),{},{payload:_,payloadIndex:D,className:clsx("recharts-tooltip-cursor",q)});return reactExports.isValidElement(v)?reactExports.cloneElement(v,z):reactExports.createElement(M,z)}function Cursor(e){var t=useTooltipAxisBandSize(),n=useOffsetInternal(),o=useChartLayout(),u=useChartName();return reactExports.createElement(CursorInternal,_extends$8({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:o,tooltipAxisBandSize:t,chartName:u}))}var TooltipPortalContext=reactExports.createContext(null),useTooltipPortal=()=>reactExports.useContext(TooltipPortalContext),eventemitter3={exports:{}},hasRequiredEventemitter3;function requireEventemitter3(){return hasRequiredEventemitter3||(hasRequiredEventemitter3=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(n=!1));function u(w,E,C){this.fn=w,this.context=E,this.once=C||!1}function d(w,E,C,_,D){if(typeof C!="function")throw new TypeError("The listener must be a function");var O=new u(C,_||w,D),M=n?n+E:E;return w._events[M]?w._events[M].fn?w._events[M]=[w._events[M],O]:w._events[M].push(O):(w._events[M]=O,w._eventsCount++),w}function f(w,E){--w._eventsCount===0?w._events=new o:delete w._events[E]}function v(){this._events=new o,this._eventsCount=0}v.prototype.eventNames=function(){var E=[],C,_;if(this._eventsCount===0)return E;for(_ in C=this._events)t.call(C,_)&&E.push(n?_.slice(1):_);return Object.getOwnPropertySymbols?E.concat(Object.getOwnPropertySymbols(C)):E},v.prototype.listeners=function(E){var C=n?n+E:E,_=this._events[C];if(!_)return[];if(_.fn)return[_.fn];for(var D=0,O=_.length,M=new Array(O);D<O;D++)M[D]=_[D].fn;return M},v.prototype.listenerCount=function(E){var C=n?n+E:E,_=this._events[C];return _?_.fn?1:_.length:0},v.prototype.emit=function(E,C,_,D,O,M){var N=n?n+E:E;if(!this._events[N])return!1;var I=this._events[N],B=arguments.length,V,j;if(I.fn){switch(I.once&&this.removeListener(E,I.fn,void 0,!0),B){case 1:return I.fn.call(I.context),!0;case 2:return I.fn.call(I.context,C),!0;case 3:return I.fn.call(I.context,C,_),!0;case 4:return I.fn.call(I.context,C,_,D),!0;case 5:return I.fn.call(I.context,C,_,D,O),!0;case 6:return I.fn.call(I.context,C,_,D,O,M),!0}for(j=1,V=new Array(B-1);j<B;j++)V[j-1]=arguments[j];I.fn.apply(I.context,V)}else{var q=I.length,z;for(j=0;j<q;j++)switch(I[j].once&&this.removeListener(E,I[j].fn,void 0,!0),B){case 1:I[j].fn.call(I[j].context);break;case 2:I[j].fn.call(I[j].context,C);break;case 3:I[j].fn.call(I[j].context,C,_);break;case 4:I[j].fn.call(I[j].context,C,_,D);break;default:if(!V)for(z=1,V=new Array(B-1);z<B;z++)V[z-1]=arguments[z];I[j].fn.apply(I[j].context,V)}}return!0},v.prototype.on=function(E,C,_){return d(this,E,C,_,!1)},v.prototype.once=function(E,C,_){return d(this,E,C,_,!0)},v.prototype.removeListener=function(E,C,_,D){var O=n?n+E:E;if(!this._events[O])return this;if(!C)return f(this,O),this;var M=this._events[O];if(M.fn)M.fn===C&&(!D||M.once)&&(!_||M.context===_)&&f(this,O);else{for(var N=0,I=[],B=M.length;N<B;N++)(M[N].fn!==C||D&&!M[N].once||_&&M[N].context!==_)&&I.push(M[N]);I.length?this._events[O]=I.length===1?I[0]:I:f(this,O)}return this},v.prototype.removeAllListeners=function(E){var C;return E?(C=n?n+E:E,this._events[C]&&f(this,C)):(this._events=new o,this._eventsCount=0),this},v.prototype.off=v.prototype.removeListener,v.prototype.addListener=v.prototype.on,v.prefixed=n,v.EventEmitter=v,e.exports=v})(eventemitter3)),eventemitter3.exports}var eventemitter3Exports=requireEventemitter3();const EventEmitter=getDefaultExportFromCjs(eventemitter3Exports);var eventCenter=new EventEmitter,TOOLTIP_SYNC_EVENT="recharts.syncEvent.tooltip",BRUSH_SYNC_EVENT="recharts.syncEvent.brush";function arrayTooltipSearcher(e,t){if(t){var n=Number.parseInt(t,10);if(!isNan(n))return e?.[n]}}var initialState$7={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},optionsSlice=createSlice({name:"options",initialState:initialState$7,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),optionsReducer=optionsSlice.reducer,{createEventEmitter}=optionsSlice.actions;function selectSynchronisedTooltipState(e){return e.tooltip.syncInteraction}var initialChartDataState={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},chartDataSlice=createSlice({name:"chartData",initialState:initialChartDataState,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:o}=t.payload;n!=null&&(e.dataStartIndex=n),o!=null&&(e.dataEndIndex=o)}}}),{setChartData,setDataStartEndIndexes,setComputedData}=chartDataSlice.actions,chartDataReducer=chartDataSlice.reducer,_excluded$8=["x","y"];function ownKeys$9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$9(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$9(Object(n),!0).forEach(function(o){_defineProperty$a(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$9(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$a(e,t,n){return(t=_toPropertyKey$a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$a(e){var t=_toPrimitive$a(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$a(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _objectWithoutProperties$8(e,t){if(e==null)return{};var n,o,u=_objectWithoutPropertiesLoose$8(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(o=0;o<d.length;o++)n=d[o],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(u[n]=e[n])}return u}function _objectWithoutPropertiesLoose$8(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;n[o]=e[o]}return n}var noop$3=()=>{};function useTooltipSyncEventsListener(){var e=useAppSelector(selectSyncId),t=useAppSelector(selectEventEmitter),n=useAppDispatch(),o=useAppSelector(selectSyncMethod),u=useAppSelector(selectTooltipAxisTicks),d=useChartLayout(),f=useViewBox(),v=useAppSelector(w=>w.rootProps.className);reactExports.useEffect(()=>{if(e==null)return noop$3;var w=(E,C,_)=>{if(t!==_&&e===E){if(o==="index"){var D;if(f&&C!==null&&C!==void 0&&(D=C.payload)!==null&&D!==void 0&&D.coordinate&&C.payload.sourceViewBox){var O=C.payload.coordinate,{x:M,y:N}=O,I=_objectWithoutProperties$8(O,_excluded$8),{x:B,y:V,width:j,height:q}=C.payload.sourceViewBox,z=_objectSpread$9(_objectSpread$9({},I),{},{x:f.x+(j?(M-B)/j:0)*f.width,y:f.y+(q?(N-V)/q:0)*f.height});n(_objectSpread$9(_objectSpread$9({},C),{},{payload:_objectSpread$9(_objectSpread$9({},C.payload),{},{coordinate:z})}))}else n(C);return}if(u!=null){var $;if(typeof o=="function"){var ee={activeTooltipIndex:C.payload.index==null?void 0:Number(C.payload.index),isTooltipActive:C.payload.active,activeIndex:C.payload.index==null?void 0:Number(C.payload.index),activeLabel:C.payload.label,activeDataKey:C.payload.dataKey,activeCoordinate:C.payload.coordinate},ie=o(u,ee);$=u[ie]}else o==="value"&&($=u.find(oe=>String(oe.value)===C.payload.label));var{coordinate:ae}=C.payload;if($==null||C.payload.active===!1||ae==null||f==null){n(setSyncInteraction({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:pe,y:he}=ae,be=Math.min(pe,f.x+f.width),xe=Math.min(he,f.y+f.height),Ee={x:d==="horizontal"?$.coordinate:be,y:d==="horizontal"?xe:$.coordinate},we=setSyncInteraction({active:C.payload.active,coordinate:Ee,dataKey:C.payload.dataKey,index:String($.index),label:C.payload.label,sourceViewBox:C.payload.sourceViewBox});n(we)}}};return eventCenter.on(TOOLTIP_SYNC_EVENT,w),()=>{eventCenter.off(TOOLTIP_SYNC_EVENT,w)}},[v,n,t,e,o,u,d,f])}function useBrushSyncEventsListener(){var e=useAppSelector(selectSyncId),t=useAppSelector(selectEventEmitter),n=useAppDispatch();reactExports.useEffect(()=>{if(e==null)return noop$3;var o=(u,d,f)=>{t!==f&&e===u&&n(setDataStartEndIndexes(d))};return eventCenter.on(BRUSH_SYNC_EVENT,o),()=>{eventCenter.off(BRUSH_SYNC_EVENT,o)}},[n,t,e])}function useSynchronisedEventsFromOtherCharts(){var e=useAppDispatch();reactExports.useEffect(()=>{e(createEventEmitter())},[e]),useTooltipSyncEventsListener(),useBrushSyncEventsListener()}function useTooltipChartSynchronisation(e,t,n,o,u,d){var f=useAppSelector(O=>selectTooltipDataKey(O,e,t)),v=useAppSelector(selectEventEmitter),w=useAppSelector(selectSyncId),E=useAppSelector(selectSyncMethod),C=useAppSelector(selectSynchronisedTooltipState),_=C?.active,D=useViewBox();reactExports.useEffect(()=>{if(!_&&w!=null&&v!=null){var O=setSyncInteraction({active:d,coordinate:n,dataKey:f,index:u,label:typeof o=="number"?String(o):o,sourceViewBox:D});eventCenter.emit(TOOLTIP_SYNC_EVENT,w,O,v)}},[_,n,f,u,o,v,w,E,d,D])}function ownKeys$8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$8(Object(n),!0).forEach(function(o){_defineProperty$9(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$8(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$9(e,t,n){return(t=_toPropertyKey$9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$9(e){var t=_toPrimitive$9(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function defaultUniqBy(e){return e.dataKey}function renderContent(e,t){return reactExports.isValidElement(e)?reactExports.cloneElement(e,t):typeof e=="function"?reactExports.createElement(e,t):reactExports.createElement(DefaultTooltipContent,t)}var emptyPayload=[],defaultTooltipProps={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Global.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Tooltip(e){var t=resolveDefaultProps(e,defaultTooltipProps),{active:n,allowEscapeViewBox:o,animationDuration:u,animationEasing:d,content:f,filterNull:v,isAnimationActive:w,offset:E,payloadUniqBy:C,position:_,reverseDirection:D,useTranslate3d:O,wrapperStyle:M,cursor:N,shared:I,trigger:B,defaultIndex:V,portal:j,axisId:q}=t,z=useAppDispatch(),$=typeof V=="number"?String(V):V;reactExports.useEffect(()=>{z(setTooltipSettingsState({shared:I,trigger:B,axisId:q,active:n,defaultIndex:$}))},[z,I,B,q,n,$]);var ee=useViewBox(),ie=useAccessibilityLayer(),ae=useTooltipEventType(I),{activeIndex:pe,isActive:he}=useAppSelector(fe=>selectIsTooltipActive(fe,ae,B,$)),be=useAppSelector(fe=>selectTooltipPayload(fe,ae,B,$)),xe=useAppSelector(fe=>selectActiveLabel(fe,ae,B,$)),Ee=useAppSelector(fe=>selectActiveCoordinate(fe,ae,B,$)),we=be,oe=useTooltipPortal(),se=n??he,[J,Q]=useElementOffset([we,se]),Z=ae==="axis"?xe:void 0;useTooltipChartSynchronisation(ae,B,Ee,Z,pe,se);var K=j??oe;if(K==null)return null;var ne=we??emptyPayload;se||(ne=emptyPayload),v&&ne.length&&(ne=getUniqPayload(we.filter(fe=>fe.value!=null&&(fe.hide!==!0||t.includeHidden)),C,defaultUniqBy));var ue=ne.length>0,ye=reactExports.createElement(TooltipBoundingBox,{allowEscapeViewBox:o,animationDuration:u,animationEasing:d,isAnimationActive:w,active:se,coordinate:Ee,hasPayload:ue,offset:E,position:_,reverseDirection:D,useTranslate3d:O,viewBox:ee,wrapperStyle:M,lastBoundingBox:J,innerRef:Q,hasPortalFromProps:!!j},renderContent(f,_objectSpread$8(_objectSpread$8({},t),{},{payload:ne,label:Z,active:se,coordinate:Ee,accessibilityLayer:ie})));return reactExports.createElement(reactExports.Fragment,null,reactDomExports.createPortal(ye,K),se&&reactExports.createElement(Cursor,{cursor:N,tooltipEventType:ae,coordinate:Ee,payload:we,index:pe}))}var Cell=e=>null;Cell.displayName="Cell";function _defineProperty$8(e,t,n){return(t=_toPropertyKey$8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$8(e){var t=_toPrimitive$8(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class LRUCache{constructor(t){_defineProperty$8(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var o=this.cache.keys().next().value;this.cache.delete(o)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function ownKeys$7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$7(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$7(Object(n),!0).forEach(function(o){_defineProperty$7(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$7(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$7(e,t,n){return(t=_toPropertyKey$7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$7(e){var t=_toPrimitive$7(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var defaultConfig={cacheSize:2e3,enableCache:!0},currentConfig=_objectSpread$7({},defaultConfig),stringCache=new LRUCache(currentConfig.cacheSize),SPAN_STYLE={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},MEASUREMENT_SPAN_ID="recharts_measurement_span";function createCacheKey(e,t){var n=t.fontSize||"",o=t.fontFamily||"",u=t.fontWeight||"",d=t.fontStyle||"",f=t.letterSpacing||"",v=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(o,"|").concat(u,"|").concat(d,"|").concat(f,"|").concat(v)}var measureTextWithDOM=(e,t)=>{try{var n=document.getElementById(MEASUREMENT_SPAN_ID);n||(n=document.createElement("span"),n.setAttribute("id",MEASUREMENT_SPAN_ID),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,SPAN_STYLE,t),n.textContent="".concat(e);var o=n.getBoundingClientRect();return{width:o.width,height:o.height}}catch{return{width:0,height:0}}},getStringSize=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Global.isSsr)return{width:0,height:0};if(!currentConfig.enableCache)return measureTextWithDOM(t,n);var o=createCacheKey(t,n),u=stringCache.get(o);if(u)return u;var d=measureTextWithDOM(t,n);return stringCache.set(o,d),d},MULTIPLY_OR_DIVIDE_REGEX=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ADD_OR_SUBTRACT_REGEX=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,CSS_LENGTH_UNIT_REGEX=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,NUM_SPLIT_REGEX=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,CONVERSION_RATES={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},FIXED_CSS_LENGTH_UNITS=Object.keys(CONVERSION_RATES),STR_NAN="NaN";function convertToPx(e,t){return e*CONVERSION_RATES[t]}class DecimalCSS{static parse(t){var n,[,o,u]=(n=NUM_SPLIT_REGEX.exec(t))!==null&&n!==void 0?n:[];return new DecimalCSS(parseFloat(o),u??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,isNan(t)&&(this.unit=""),n!==""&&!CSS_LENGTH_UNIT_REGEX.test(n)&&(this.num=NaN,this.unit=""),FIXED_CSS_LENGTH_UNITS.includes(n)&&(this.num=convertToPx(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new DecimalCSS(NaN,""):new DecimalCSS(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new DecimalCSS(NaN,""):new DecimalCSS(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new DecimalCSS(NaN,""):new DecimalCSS(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new DecimalCSS(NaN,""):new DecimalCSS(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return isNan(this.num)}}function calculateArithmetic(e){if(e.includes(STR_NAN))return STR_NAN;for(var t=e;t.includes("*")||t.includes("/");){var n,[,o,u,d]=(n=MULTIPLY_OR_DIVIDE_REGEX.exec(t))!==null&&n!==void 0?n:[],f=DecimalCSS.parse(o??""),v=DecimalCSS.parse(d??""),w=u==="*"?f.multiply(v):f.divide(v);if(w.isNaN())return STR_NAN;t=t.replace(MULTIPLY_OR_DIVIDE_REGEX,w.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var E,[,C,_,D]=(E=ADD_OR_SUBTRACT_REGEX.exec(t))!==null&&E!==void 0?E:[],O=DecimalCSS.parse(C??""),M=DecimalCSS.parse(D??""),N=_==="+"?O.add(M):O.subtract(M);if(N.isNaN())return STR_NAN;t=t.replace(ADD_OR_SUBTRACT_REGEX,N.toString())}return t}var PARENTHESES_REGEX=/\(([^()]*)\)/;function calculateParentheses(e){for(var t=e,n;(n=PARENTHESES_REGEX.exec(t))!=null;){var[,o]=n;t=t.replace(PARENTHESES_REGEX,calculateArithmetic(o))}return t}function evaluateExpression(e){var t=e.replace(/\s+/g,"");return t=calculateParentheses(t),t=calculateArithmetic(t),t}function safeEvaluateExpression(e){try{return evaluateExpression(e)}catch{return STR_NAN}}function reduceCSSCalc(e){var t=safeEvaluateExpression(e.slice(5,-1));return t===STR_NAN?"":t}var _excluded$7=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],_excluded2$2=["dx","dy","angle","className","breakAll"];function _extends$7(){return _extends$7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$7.apply(null,arguments)}function _objectWithoutProperties$7(e,t){if(e==null)return{};var n,o,u=_objectWithoutPropertiesLoose$7(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(o=0;o<d.length;o++)n=d[o],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(u[n]=e[n])}return u}function _objectWithoutPropertiesLoose$7(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;n[o]=e[o]}return n}var BREAKING_SPACES=/[ \f\n\r\t\v\u2028\u2029]+/,calculateWordWidths=e=>{var{children:t,breakAll:n,style:o}=e;try{var u=[];isNullish$1(t)||(n?u=t.toString().split(""):u=t.toString().split(BREAKING_SPACES));var d=u.map(v=>({word:v,width:getStringSize(v,o).width})),f=n?0:getStringSize("",o).width;return{wordsWithComputedWidth:d,spaceWidth:f}}catch{return null}},calculateWordsByLines=(e,t,n,o,u)=>{var{maxLines:d,children:f,style:v,breakAll:w}=e,E=isNumber$1(d),C=f,_=function(){var he=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return he.reduce((be,xe)=>{var{word:Ee,width:we}=xe,oe=be[be.length-1];if(oe&&(o==null||u||oe.width+we+n<Number(o)))oe.words.push(Ee),oe.width+=we+n;else{var se={words:[Ee],width:we};be.push(se)}return be},[])},D=_(t),O=pe=>pe.reduce((he,be)=>he.width>be.width?he:be);if(!E||u)return D;var M=D.length>d||O(D).width>Number(o);if(!M)return D;for(var N="",I=pe=>{var he=C.slice(0,pe),be=calculateWordWidths({breakAll:w,style:v,children:he+N}).wordsWithComputedWidth,xe=_(be),Ee=xe.length>d||O(xe).width>Number(o);return[Ee,xe]},B=0,V=C.length-1,j=0,q;B<=V&&j<=C.length-1;){var z=Math.floor((B+V)/2),$=z-1,[ee,ie]=I($),[ae]=I(z);if(!ee&&!ae&&(B=z+1),ee&&ae&&(V=z-1),!ee&&ae){q=ie;break}j++}return q||D},getWordsWithoutCalculate=e=>{var t=isNullish$1(e)?[]:e.toString().split(BREAKING_SPACES);return[{words:t}]},getWordsByLines=e=>{var{width:t,scaleToFit:n,children:o,style:u,breakAll:d,maxLines:f}=e;if((t||n)&&!Global.isSsr){var v,w,E=calculateWordWidths({breakAll:d,children:o,style:u});if(E){var{wordsWithComputedWidth:C,spaceWidth:_}=E;v=C,w=_}else return getWordsWithoutCalculate(o);return calculateWordsByLines({breakAll:d,children:o,maxLines:f,style:u},v,w,t,n)}return getWordsWithoutCalculate(o)},DEFAULT_FILL="#808080",Text$2=reactExports.forwardRef((e,t)=>{var{x:n=0,y:o=0,lineHeight:u="1em",capHeight:d="0.71em",scaleToFit:f=!1,textAnchor:v="start",verticalAnchor:w="end",fill:E=DEFAULT_FILL}=e,C=_objectWithoutProperties$7(e,_excluded$7),_=reactExports.useMemo(()=>getWordsByLines({breakAll:C.breakAll,children:C.children,maxLines:C.maxLines,scaleToFit:f,style:C.style,width:C.width}),[C.breakAll,C.children,C.maxLines,f,C.style,C.width]),{dx:D,dy:O,angle:M,className:N,breakAll:I}=C,B=_objectWithoutProperties$7(C,_excluded2$2);if(!isNumOrStr(n)||!isNumOrStr(o)||_.length===0)return null;var V=n+(isNumber$1(D)?D:0),j=o+(isNumber$1(O)?O:0),q;switch(w){case"start":q=reduceCSSCalc("calc(".concat(d,")"));break;case"middle":q=reduceCSSCalc("calc(".concat((_.length-1)/2," * -").concat(u," + (").concat(d," / 2))"));break;default:q=reduceCSSCalc("calc(".concat(_.length-1," * -").concat(u,")"));break}var z=[];if(f){var $=_[0].width,{width:ee}=C;z.push("scale(".concat(isNumber$1(ee)?ee/$:1,")"))}return M&&z.push("rotate(".concat(M,", ").concat(V,", ").concat(j,")")),z.length&&(B.transform=z.join(" ")),reactExports.createElement("text",_extends$7({},svgPropertiesAndEvents(B),{ref:t,x:V,y:j,className:clsx("recharts-text",N),textAnchor:v,fill:E.includes("url")?DEFAULT_FILL:E}),_.map((ie,ae)=>{var pe=ie.words.join(I?"":" ");return reactExports.createElement("tspan",{x:V,dy:ae===0?q:u,key:"".concat(pe,"-").concat(ae)},pe)}))});Text$2.displayName="Text";var _excluded$6=["labelRef"];function _objectWithoutProperties$6(e,t){if(e==null)return{};var n,o,u=_objectWithoutPropertiesLoose$6(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(o=0;o<d.length;o++)n=d[o],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(u[n]=e[n])}return u}function _objectWithoutPropertiesLoose$6(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;n[o]=e[o]}return n}function ownKeys$6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$6(Object(n),!0).forEach(function(o){_defineProperty$6(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$6(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$6(e,t,n){return(t=_toPropertyKey$6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$6(e){var t=_toPrimitive$6(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _extends$6(){return _extends$6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$6.apply(null,arguments)}var CartesianLabelContext=reactExports.createContext(null),useCartesianLabelContext=()=>{var e=reactExports.useContext(CartesianLabelContext),t=useViewBox();return e||t},PolarLabelContext=reactExports.createContext(null),usePolarLabelContext=()=>{var e=reactExports.useContext(PolarLabelContext),t=useAppSelector(selectPolarViewBox);return e||t},getLabel=e=>{var{value:t,formatter:n}=e,o=isNullish$1(e.children)?t:e.children;return typeof n=="function"?n(o):o},isLabelContentAFunction=e=>e!=null&&typeof e=="function",getDeltaAngle=(e,t)=>{var n=mathSign(t-e),o=Math.min(Math.abs(t-e),360);return n*o},renderRadialLabel=(e,t,n,o,u)=>{var{offset:d,className:f}=e,{cx:v,cy:w,innerRadius:E,outerRadius:C,startAngle:_,endAngle:D,clockWise:O}=u,M=(E+C)/2,N=getDeltaAngle(_,D),I=N>=0?1:-1,B,V;switch(t){case"insideStart":B=_+I*d,V=O;break;case"insideEnd":B=D-I*d,V=!O;break;case"end":B=D+I*d,V=O;break;default:throw new Error("Unsupported position ".concat(t))}V=N<=0?V:!V;var j=polarToCartesian(v,w,M,B),q=polarToCartesian(v,w,M,B+(V?1:-1)*359),z="M".concat(j.x,",").concat(j.y,`
    A`).concat(M,",").concat(M,",0,1,").concat(V?0:1,`,
    `).concat(q.x,",").concat(q.y),$=isNullish$1(e.id)?uniqueId("recharts-radial-line-"):e.id;return reactExports.createElement("text",_extends$6({},o,{dominantBaseline:"central",className:clsx("recharts-radial-bar-label",f)}),reactExports.createElement("defs",null,reactExports.createElement("path",{id:$,d:z})),reactExports.createElement("textPath",{xlinkHref:"#".concat($)},n))},getAttrsOfPolarLabel=(e,t,n)=>{var{cx:o,cy:u,innerRadius:d,outerRadius:f,startAngle:v,endAngle:w}=e,E=(v+w)/2;if(n==="outside"){var{x:C,y:_}=polarToCartesian(o,u,f+t,E);return{x:C,y:_,textAnchor:C>=o?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:o,y:u,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:o,y:u,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:o,y:u,textAnchor:"middle",verticalAnchor:"end"};var D=(d+f)/2,{x:O,y:M}=polarToCartesian(o,u,D,E);return{x:O,y:M,textAnchor:"middle",verticalAnchor:"middle"}},isPolar=e=>"cx"in e&&isNumber$1(e.cx),getAttrsOfCartesianLabel=(e,t)=>{var{parentViewBox:n,offset:o,position:u}=e,d;n!=null&&!isPolar(n)&&(d=n);var{x:f,y:v,width:w,height:E}=t,C=E>=0?1:-1,_=C*o,D=C>0?"end":"start",O=C>0?"start":"end",M=w>=0?1:-1,N=M*o,I=M>0?"end":"start",B=M>0?"start":"end";if(u==="top"){var V={x:f+w/2,y:v-C*o,textAnchor:"middle",verticalAnchor:D};return _objectSpread$6(_objectSpread$6({},V),d?{height:Math.max(v-d.y,0),width:w}:{})}if(u==="bottom"){var j={x:f+w/2,y:v+E+_,textAnchor:"middle",verticalAnchor:O};return _objectSpread$6(_objectSpread$6({},j),d?{height:Math.max(d.y+d.height-(v+E),0),width:w}:{})}if(u==="left"){var q={x:f-N,y:v+E/2,textAnchor:I,verticalAnchor:"middle"};return _objectSpread$6(_objectSpread$6({},q),d?{width:Math.max(q.x-d.x,0),height:E}:{})}if(u==="right"){var z={x:f+w+N,y:v+E/2,textAnchor:B,verticalAnchor:"middle"};return _objectSpread$6(_objectSpread$6({},z),d?{width:Math.max(d.x+d.width-z.x,0),height:E}:{})}var $=d?{width:w,height:E}:{};return u==="insideLeft"?_objectSpread$6({x:f+N,y:v+E/2,textAnchor:B,verticalAnchor:"middle"},$):u==="insideRight"?_objectSpread$6({x:f+w-N,y:v+E/2,textAnchor:I,verticalAnchor:"middle"},$):u==="insideTop"?_objectSpread$6({x:f+w/2,y:v+_,textAnchor:"middle",verticalAnchor:O},$):u==="insideBottom"?_objectSpread$6({x:f+w/2,y:v+E-_,textAnchor:"middle",verticalAnchor:D},$):u==="insideTopLeft"?_objectSpread$6({x:f+N,y:v+_,textAnchor:B,verticalAnchor:O},$):u==="insideTopRight"?_objectSpread$6({x:f+w-N,y:v+_,textAnchor:I,verticalAnchor:O},$):u==="insideBottomLeft"?_objectSpread$6({x:f+N,y:v+E-_,textAnchor:B,verticalAnchor:D},$):u==="insideBottomRight"?_objectSpread$6({x:f+w-N,y:v+E-_,textAnchor:I,verticalAnchor:D},$):u&&typeof u=="object"&&(isNumber$1(u.x)||isPercent(u.x))&&(isNumber$1(u.y)||isPercent(u.y))?_objectSpread$6({x:f+getPercentValue(u.x,w),y:v+getPercentValue(u.y,E),textAnchor:"end",verticalAnchor:"end"},$):_objectSpread$6({x:f+w/2,y:v+E/2,textAnchor:"middle",verticalAnchor:"middle"},$)},defaultLabelProps={offset:5};function Label$1(e){var t=resolveDefaultProps(e,defaultLabelProps),{viewBox:n,position:o,value:u,children:d,content:f,className:v="",textBreakAll:w,labelRef:E}=t,C=usePolarLabelContext(),_=useCartesianLabelContext(),D=o==="center"?_:C??_,O=n||D;if(!O||isNullish$1(u)&&isNullish$1(d)&&!reactExports.isValidElement(f)&&typeof f!="function")return null;var M=_objectSpread$6(_objectSpread$6({},t),{},{viewBox:O});if(reactExports.isValidElement(f)){var{labelRef:N}=M,I=_objectWithoutProperties$6(M,_excluded$6);return reactExports.cloneElement(f,I)}var B;if(typeof f=="function"){if(B=reactExports.createElement(f,M),reactExports.isValidElement(B))return B}else B=getLabel(t);var V=isPolar(O),j=svgPropertiesAndEvents(t);if(V&&(o==="insideStart"||o==="insideEnd"||o==="end"))return renderRadialLabel(t,o,B,j,O);var q=V?getAttrsOfPolarLabel(O,t.offset,t.position):getAttrsOfCartesianLabel(t,O);return reactExports.createElement(Text$2,_extends$6({ref:E,className:clsx("recharts-label",v)},j,q,{breakAll:w}),B)}Label$1.displayName="Label";var last$3={},last$2={},hasRequiredLast$2;function requireLast$2(){return hasRequiredLast$2||(hasRequiredLast$2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(last$2)),last$2}var toArray$2={},hasRequiredToArray;function requireToArray(){return hasRequiredToArray||(hasRequiredToArray=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(toArray$2)),toArray$2}var hasRequiredLast$1;function requireLast$1(){return hasRequiredLast$1||(hasRequiredLast$1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireLast$2(),n=requireToArray(),o=requireIsArrayLike();function u(d){if(o.isArrayLike(d))return t.last(n.toArray(d))}e.last=u})(last$3)),last$3}var last$1,hasRequiredLast;function requireLast(){return hasRequiredLast||(hasRequiredLast=1,last$1=requireLast$1().last),last$1}var lastExports=requireLast();const last=getDefaultExportFromCjs(lastExports);var _excluded$5=["valueAccessor"],_excluded2$1=["dataKey","clockWise","id","textBreakAll"];function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$5.apply(null,arguments)}function _objectWithoutProperties$5(e,t){if(e==null)return{};var n,o,u=_objectWithoutPropertiesLoose$5(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(o=0;o<d.length;o++)n=d[o],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(u[n]=e[n])}return u}function _objectWithoutPropertiesLoose$5(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;n[o]=e[o]}return n}var defaultAccessor=e=>Array.isArray(e.value)?last(e.value):e.value,CartesianLabelListContext=reactExports.createContext(void 0);CartesianLabelListContext.Provider;var PolarLabelListContext=reactExports.createContext(void 0),PolarLabelListContextProvider=PolarLabelListContext.Provider;function useCartesianLabelListContext(){return reactExports.useContext(CartesianLabelListContext)}function usePolarLabelListContext(){return reactExports.useContext(PolarLabelListContext)}function LabelList(e){var{valueAccessor:t=defaultAccessor}=e,n=_objectWithoutProperties$5(e,_excluded$5),{dataKey:o,clockWise:u,id:d,textBreakAll:f}=n,v=_objectWithoutProperties$5(n,_excluded2$1),w=useCartesianLabelListContext(),E=usePolarLabelListContext(),C=w||E;return!C||!C.length?null:reactExports.createElement(Layer$2,{className:"recharts-label-list"},C.map((_,D)=>{var O,M=isNullish$1(o)?t(_,D):getValueByDataKey(_&&_.payload,o),N=isNullish$1(d)?{}:{id:"".concat(d,"-").concat(D)};return reactExports.createElement(Label$1,_extends$5({key:"label-".concat(D)},svgPropertiesAndEvents(_),v,N,{fill:(O=n.fill)!==null&&O!==void 0?O:_.fill,parentViewBox:_.parentViewBox,value:M,textBreakAll:f,viewBox:_.viewBox,index:D}))}))}LabelList.displayName="LabelList";function LabelListFromLabelProp(e){var{label:t}=e;return t?t===!0?reactExports.createElement(LabelList,{key:"labelList-implicit"}):reactExports.isValidElement(t)||isLabelContentAFunction(t)?reactExports.createElement(LabelList,{key:"labelList-implicit",content:t}):typeof t=="object"?reactExports.createElement(LabelList,_extends$5({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var selectUnfilteredPolarItems=e=>e.graphicalItems.polarItems,selectAxisPredicate=createSelector([pickAxisType,pickAxisId],itemAxisPredicate),selectPolarItemsSettings=createSelector([selectUnfilteredPolarItems,selectBaseAxis,selectAxisPredicate],combineGraphicalItemsSettings),selectPolarGraphicalItemsData=createSelector([selectPolarItemsSettings],combineGraphicalItemsData),selectPolarDisplayedData=createSelector([selectPolarGraphicalItemsData,selectChartDataAndAlwaysIgnoreIndexes],combineDisplayedData),selectPolarAppliedValues=createSelector([selectPolarDisplayedData,selectBaseAxis,selectPolarItemsSettings],combineAppliedValues);createSelector([selectPolarDisplayedData,selectBaseAxis,selectPolarItemsSettings],(e,t,n)=>n.length>0?e.flatMap(o=>n.flatMap(u=>{var d,f=getValueByDataKey(o,(d=t.dataKey)!==null&&d!==void 0?d:u.dataKey);return{value:f,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(o=>({value:getValueByDataKey(o,t.dataKey),errorDomain:[]})):e.map(o=>({value:o,errorDomain:[]})));var unsupportedInPolarChart=()=>{},selectDomainOfAllPolarAppliedNumericalValues=createSelector([selectPolarDisplayedData,selectBaseAxis,selectPolarItemsSettings,selectAllErrorBarSettings,pickAxisType],combineDomainOfAllAppliedNumericalValuesIncludingErrorValues),selectPolarNumericalDomain=createSelector([selectBaseAxis,selectDomainDefinition,selectDomainFromUserPreference,unsupportedInPolarChart,selectDomainOfAllPolarAppliedNumericalValues,unsupportedInPolarChart,selectChartLayout,pickAxisType],combineNumericalDomain),selectPolarAxisDomain=createSelector([selectBaseAxis,selectChartLayout,selectPolarDisplayedData,selectPolarAppliedValues,selectStackOffsetType,pickAxisType,selectPolarNumericalDomain],combineAxisDomain),selectPolarNiceTicks=createSelector([selectPolarAxisDomain,selectBaseAxis,selectRealScaleType],combineNiceTicks);createSelector([selectBaseAxis,selectPolarAxisDomain,selectPolarNiceTicks,pickAxisType],combineAxisDomainWithNiceTicks);var initialState$6={radiusAxis:{},angleAxis:{}},polarAxisSlice=createSlice({name:"polarAxis",initialState:initialState$6,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis,removeRadiusAxis,addAngleAxis,removeAngleAxis}=polarAxisSlice.actions,polarAxisReducer=polarAxisSlice.reducer;function ownKeys$5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$5(Object(n),!0).forEach(function(o){_defineProperty$5(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$5(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$5(e,t,n){return(t=_toPropertyKey$5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$5(e){var t=_toPrimitive$5(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pickId=(e,t)=>t,selectSynchronisedPieSettings=createSelector([selectUnfilteredPolarItems,pickId],(e,t)=>e.filter(n=>n.type==="pie").find(n=>n.id===t)),emptyArray=[],pickCells=(e,t,n)=>n?.length===0?emptyArray:n,selectDisplayedData=createSelector([selectChartDataAndAlwaysIgnoreIndexes,selectSynchronisedPieSettings,pickCells],(e,t,n)=>{var{chartData:o}=e;if(t!=null){var u;if(t?.data!=null&&t.data.length>0?u=t.data:u=o,(!u||!u.length)&&n!=null&&(u=n.map(d=>_objectSpread$5(_objectSpread$5({},t.presentationProps),d.props))),u!=null)return u}}),selectPieLegend=createSelector([selectDisplayedData,selectSynchronisedPieSettings,pickCells],(e,t,n)=>{if(!(e==null||t==null))return e.map((o,u)=>{var d,f=getValueByDataKey(o,t.nameKey,t.name),v;return n!=null&&(d=n[u])!==null&&d!==void 0&&(d=d.props)!==null&&d!==void 0&&d.fill?v=n[u].props.fill:typeof o=="object"&&o!=null&&"fill"in o?v=o.fill:v=t.fill,{value:getTooltipNameProp(f,t.dataKey),color:v,payload:o,type:t.legendType}})}),selectPieSectors=createSelector([selectDisplayedData,selectSynchronisedPieSettings,pickCells,selectChartOffsetInternal],(e,t,n,o)=>{if(!(t==null||e==null))return computePieSectors({offset:o,pieSettings:t,displayedData:e,cells:n})}),reactIs={exports:{}},reactIs_production={};var hasRequiredReactIs_production;function requireReactIs_production(){if(hasRequiredReactIs_production)return reactIs_production;hasRequiredReactIs_production=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),D=Symbol.for("react.view_transition"),O=Symbol.for("react.client.reference");function M(N){if(typeof N=="object"&&N!==null){var I=N.$$typeof;switch(I){case e:switch(N=N.type,N){case n:case u:case o:case w:case E:case D:return N;default:switch(N=N&&N.$$typeof,N){case f:case v:case _:case C:return N;case d:return N;default:return I}}case t:return I}}}return reactIs_production.ContextConsumer=d,reactIs_production.ContextProvider=f,reactIs_production.Element=e,reactIs_production.ForwardRef=v,reactIs_production.Fragment=n,reactIs_production.Lazy=_,reactIs_production.Memo=C,reactIs_production.Portal=t,reactIs_production.Profiler=u,reactIs_production.StrictMode=o,reactIs_production.Suspense=w,reactIs_production.SuspenseList=E,reactIs_production.isContextConsumer=function(N){return M(N)===d},reactIs_production.isContextProvider=function(N){return M(N)===f},reactIs_production.isElement=function(N){return typeof N=="object"&&N!==null&&N.$$typeof===e},reactIs_production.isForwardRef=function(N){return M(N)===v},reactIs_production.isFragment=function(N){return M(N)===n},reactIs_production.isLazy=function(N){return M(N)===_},reactIs_production.isMemo=function(N){return M(N)===C},reactIs_production.isPortal=function(N){return M(N)===t},reactIs_production.isProfiler=function(N){return M(N)===u},reactIs_production.isStrictMode=function(N){return M(N)===o},reactIs_production.isSuspense=function(N){return M(N)===w},reactIs_production.isSuspenseList=function(N){return M(N)===E},reactIs_production.isValidElementType=function(N){return typeof N=="string"||typeof N=="function"||N===n||N===u||N===o||N===w||N===E||typeof N=="object"&&N!==null&&(N.$$typeof===_||N.$$typeof===C||N.$$typeof===f||N.$$typeof===d||N.$$typeof===v||N.$$typeof===O||N.getModuleId!==void 0)},reactIs_production.typeOf=M,reactIs_production}var hasRequiredReactIs;function requireReactIs(){return hasRequiredReactIs||(hasRequiredReactIs=1,reactIs.exports=requireReactIs_production()),reactIs.exports}var reactIsExports=requireReactIs(),getDisplayName=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",lastChildren=null,lastResult=null,toArray$1=e=>{if(e===lastChildren&&Array.isArray(lastResult))return lastResult;var t=[];return reactExports.Children.forEach(e,n=>{isNullish$1(n)||(reactIsExports.isFragment(n)?t=t.concat(toArray$1(n.props.children)):t.push(n))}),lastResult=t,lastChildren=e,t};function findAllByType(e,t){var n=[],o=[];return Array.isArray(t)?o=t.map(u=>getDisplayName(u)):o=[getDisplayName(t)],toArray$1(e).forEach(u=>{var d=get(u,"type.displayName")||get(u,"type.name");o.indexOf(d)!==-1&&n.push(u)}),n}var isPlainObject$3={},hasRequiredIsPlainObject$1;function requireIsPlainObject$1(){return hasRequiredIsPlainObject$1||(hasRequiredIsPlainObject$1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const u=n[Symbol.toStringTag];return u==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${u}]`}let o=n;for(;Object.getPrototypeOf(o)!==null;)o=Object.getPrototypeOf(o);return Object.getPrototypeOf(n)===o}e.isPlainObject=t})(isPlainObject$3)),isPlainObject$3}var isPlainObject$2,hasRequiredIsPlainObject;function requireIsPlainObject(){return hasRequiredIsPlainObject||(hasRequiredIsPlainObject=1,isPlainObject$2=requireIsPlainObject$1().isPlainObject),isPlainObject$2}var isPlainObjectExports=requireIsPlainObject();const isPlainObject$1=getDefaultExportFromCjs(isPlainObjectExports);function ownKeys$4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$4(Object(n),!0).forEach(function(o){_defineProperty$4(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$4(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$4(e,t,n){return(t=_toPropertyKey$4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$4(e){var t=_toPrimitive$4(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$4.apply(null,arguments)}var getTrapezoidPath=(e,t,n,o,u)=>{var d=n-o,f;return f="M ".concat(e,",").concat(t),f+="L ".concat(e+n,",").concat(t),f+="L ".concat(e+n-d/2,",").concat(t+u),f+="L ".concat(e+n-d/2-o,",").concat(t+u),f+="L ".concat(e,",").concat(t," Z"),f},defaultProps$2={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Trapezoid=e=>{var t=resolveDefaultProps(e,defaultProps$2),{x:n,y:o,upperWidth:u,lowerWidth:d,height:f,className:v}=t,{animationEasing:w,animationDuration:E,animationBegin:C,isUpdateAnimationActive:_}=t,D=reactExports.useRef(null),[O,M]=reactExports.useState(-1),N=reactExports.useRef(u),I=reactExports.useRef(d),B=reactExports.useRef(f),V=reactExports.useRef(n),j=reactExports.useRef(o),q=useAnimationId(e,"trapezoid-");if(reactExports.useEffect(()=>{if(D.current&&D.current.getTotalLength)try{var Ee=D.current.getTotalLength();Ee&&M(Ee)}catch{}},[]),n!==+n||o!==+o||u!==+u||d!==+d||f!==+f||u===0&&d===0||f===0)return null;var z=clsx("recharts-trapezoid",v);if(!_)return reactExports.createElement("g",null,reactExports.createElement("path",_extends$4({},svgPropertiesAndEvents(t),{className:z,d:getTrapezoidPath(n,o,u,d,f)})));var $=N.current,ee=I.current,ie=B.current,ae=V.current,pe=j.current,he="0px ".concat(O===-1?1:O,"px"),be="".concat(O,"px 0px"),xe=getTransitionVal(["strokeDasharray"],E,w);return reactExports.createElement(JavascriptAnimate,{animationId:q,key:q,canBegin:O>0,duration:E,easing:w,isActive:_,begin:C},Ee=>{var we=interpolate$2($,u,Ee),oe=interpolate$2(ee,d,Ee),se=interpolate$2(ie,f,Ee),J=interpolate$2(ae,n,Ee),Q=interpolate$2(pe,o,Ee);D.current&&(N.current=we,I.current=oe,B.current=se,V.current=J,j.current=Q);var Z=Ee>0?{transition:xe,strokeDasharray:be}:{strokeDasharray:he};return reactExports.createElement("path",_extends$4({},svgPropertiesAndEvents(t),{className:z,d:getTrapezoidPath(J,Q,we,oe,se),ref:D,style:_objectSpread$4(_objectSpread$4({},Z),t.style)}))})},_excluded$4=["option","shapeType","propTransformer","activeClassName","isActive"];function _objectWithoutProperties$4(e,t){if(e==null)return{};var n,o,u=_objectWithoutPropertiesLoose$4(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(o=0;o<d.length;o++)n=d[o],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(u[n]=e[n])}return u}function _objectWithoutPropertiesLoose$4(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;n[o]=e[o]}return n}function ownKeys$3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$3(Object(n),!0).forEach(function(o){_defineProperty$3(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$3(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$3(e,t,n){return(t=_toPropertyKey$3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$3(e){var t=_toPrimitive$3(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function defaultPropTransformer(e,t){return _objectSpread$3(_objectSpread$3({},t),e)}function isSymbolsProps(e,t){return e==="symbols"}function ShapeSelector(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return reactExports.createElement(Rectangle,n);case"trapezoid":return reactExports.createElement(Trapezoid,n);case"sector":return reactExports.createElement(Sector,n);case"symbols":if(isSymbolsProps(t))return reactExports.createElement(Symbols,n);break;default:return null}}function getPropsFromShapeOption(e){return reactExports.isValidElement(e)?e.props:e}function Shape$1(e){var{option:t,shapeType:n,propTransformer:o=defaultPropTransformer,activeClassName:u="recharts-active-shape",isActive:d}=e,f=_objectWithoutProperties$4(e,_excluded$4),v;if(reactExports.isValidElement(t))v=reactExports.cloneElement(t,_objectSpread$3(_objectSpread$3({},f),getPropsFromShapeOption(t)));else if(typeof t=="function")v=t(f);else if(isPlainObject$1(t)&&typeof t!="boolean"){var w=o(t,f);v=reactExports.createElement(ShapeSelector,{shapeType:n,elementProps:w})}else{var E=f;v=reactExports.createElement(ShapeSelector,{shapeType:n,elementProps:E})}return d?reactExports.createElement(Layer$2,{className:u},v):v}var useMouseEnterItemDispatch=(e,t)=>{var n=useAppDispatch();return(o,u)=>d=>{e?.(o,u,d),n(setActiveMouseOverItemIndex({activeIndex:String(u),activeDataKey:t,activeCoordinate:o.tooltipPosition}))}},useMouseLeaveItemDispatch=e=>{var t=useAppDispatch();return(n,o)=>u=>{e?.(n,o,u),t(mouseLeaveItem())}},useMouseClickItemDispatch=(e,t)=>{var n=useAppDispatch();return(o,u)=>d=>{e?.(o,u,d),n(setActiveClickItemIndex({activeIndex:String(u),activeDataKey:t,activeCoordinate:o.tooltipPosition}))}};function SetTooltipEntrySettings(e){var{fn:t,args:n}=e,o=useAppDispatch(),u=useIsPanorama();return reactExports.useLayoutEffect(()=>{if(!u){var d=t(n);return o(addTooltipEntrySettings(d)),()=>{o(removeTooltipEntrySettings(d))}}},[t,n,o,u]),null}var noop$2=()=>{};function SetPolarLegendPayload(e){var{legendPayload:t}=e,n=useAppDispatch(),o=useAppSelector(selectChartLayout);return reactExports.useLayoutEffect(()=>o!=="centric"&&o!=="radial"?noop$2:(n(addLegendPayload(t)),()=>{n(removeLegendPayload(t))}),[n,o,t]),null}var _ref,useIdFallback=()=>{var[e]=reactExports.useState(()=>uniqueId("uid-"));return e},useId=(_ref=React$1.useId)!==null&&_ref!==void 0?_ref:useIdFallback;function useUniqueId(e,t){var n=useId();return t||(e?"".concat(e,"-").concat(n):n)}var GraphicalItemIdContext=reactExports.createContext(void 0),RegisterGraphicalItemId=e=>{var{id:t,type:n,children:o}=e,u=useUniqueId("recharts-".concat(n),t);return reactExports.createElement(GraphicalItemIdContext.Provider,{value:u},o(u))},initialState$5={cartesianItems:[],polarItems:[]},graphicalItemsSlice=createSlice({name:"graphicalItems",initialState:initialState$5,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:prepareAutoBatched()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:n,next:o}=t.payload,u=current(e).cartesianItems.indexOf(n);u>-1&&(e.cartesianItems[u]=o)},prepare:prepareAutoBatched()},removeCartesianGraphicalItem:{reducer(e,t){var n=current(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},prepare:prepareAutoBatched()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:prepareAutoBatched()},removePolarGraphicalItem:{reducer(e,t){var n=current(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)},prepare:prepareAutoBatched()}}}),{addCartesianGraphicalItem,replaceCartesianGraphicalItem,removeCartesianGraphicalItem,addPolarGraphicalItem,removePolarGraphicalItem}=graphicalItemsSlice.actions,graphicalItemsReducer=graphicalItemsSlice.reducer;function SetPolarGraphicalItem(e){var t=useAppDispatch();return reactExports.useLayoutEffect(()=>(t(addPolarGraphicalItem(e)),()=>{t(removePolarGraphicalItem(e))}),[t,e]),null}var _excluded$3=["onMouseEnter","onClick","onMouseLeave"],_excluded2=["id"],_excluded3=["id"];function _objectWithoutProperties$3(e,t){if(e==null)return{};var n,o,u=_objectWithoutPropertiesLoose$3(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(o=0;o<d.length;o++)n=d[o],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(u[n]=e[n])}return u}function _objectWithoutPropertiesLoose$3(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;n[o]=e[o]}return n}function ownKeys$2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$2(Object(n),!0).forEach(function(o){_defineProperty$2(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$2(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$2(e,t,n){return(t=_toPropertyKey$2(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$2(e){var t=_toPrimitive$2(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$2(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$3.apply(null,arguments)}function SetPiePayloadLegend(e){var t=reactExports.useMemo(()=>findAllByType(e.children,Cell),[e.children]),n=useAppSelector(o=>selectPieLegend(o,e.id,t));return n==null?null:reactExports.createElement(SetPolarLegendPayload,{legendPayload:n})}function getTooltipEntrySettings(e){var{dataKey:t,nameKey:n,sectors:o,stroke:u,strokeWidth:d,fill:f,name:v,hide:w,tooltipType:E}=e;return{dataDefinedOnItem:o.map(C=>C.tooltipPayload),positions:o.map(C=>C.tooltipPosition),settings:{stroke:u,strokeWidth:d,fill:f,dataKey:t,nameKey:n,name:getTooltipNameProp(v,t),hide:w,type:E,color:f,unit:""}}}var getTextAnchor=(e,t)=>e>t?"start":e<t?"end":"middle",getOuterRadius=(e,t,n)=>getPercentValue(typeof t=="function"?t(e):t,n,n*.8),parseCoordinateOfPie=(e,t,n)=>{var{top:o,left:u,width:d,height:f}=t,v=getMaxRadius(d,f),w=u+getPercentValue(e.cx,d,d/2),E=o+getPercentValue(e.cy,f,f/2),C=getPercentValue(e.innerRadius,v,0),_=getOuterRadius(n,e.outerRadius,v),D=e.maxRadius||Math.sqrt(d*d+f*f)/2;return{cx:w,cy:E,innerRadius:C,outerRadius:_,maxRadius:D}},parseDeltaAngle=(e,t)=>{var n=mathSign(t-e),o=Math.min(Math.abs(t-e),360);return n*o};function getClassNamePropertyIfExists(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var renderLabelLineItem=(e,t)=>{if(reactExports.isValidElement(e))return reactExports.cloneElement(e,t);if(typeof e=="function")return e(t);var n=clsx("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return reactExports.createElement(Curve,_extends$3({},t,{type:"linear",className:n}))},renderLabelItem=(e,t,n)=>{if(reactExports.isValidElement(e))return reactExports.cloneElement(e,t);var o=n;if(typeof e=="function"&&(o=e(t),reactExports.isValidElement(o)))return o;var u=clsx("recharts-pie-label-text",getClassNamePropertyIfExists(e));return reactExports.createElement(Text$2,_extends$3({},t,{alignmentBaseline:"middle",className:u}),o)};function PieLabels(e){var{sectors:t,props:n,showLabels:o}=e,{label:u,labelLine:d,dataKey:f}=n;if(!o||!u||!t)return null;var v=svgPropertiesNoEvents(n),w=svgPropertiesNoEventsFromUnknown(u),E=svgPropertiesNoEventsFromUnknown(d),C=typeof u=="object"&&"offsetRadius"in u&&typeof u.offsetRadius=="number"&&u.offsetRadius||20,_=t.map((D,O)=>{var M=(D.startAngle+D.endAngle)/2,N=polarToCartesian(D.cx,D.cy,D.outerRadius+C,M),I=_objectSpread$2(_objectSpread$2(_objectSpread$2(_objectSpread$2({},v),D),{},{stroke:"none"},w),{},{index:O,textAnchor:getTextAnchor(N.x,D.cx)},N),B=_objectSpread$2(_objectSpread$2(_objectSpread$2(_objectSpread$2({},v),D),{},{fill:"none",stroke:D.fill},E),{},{index:O,points:[polarToCartesian(D.cx,D.cy,D.outerRadius,M),N],key:"line"});return reactExports.createElement(Layer$2,{key:"label-".concat(D.startAngle,"-").concat(D.endAngle,"-").concat(D.midAngle,"-").concat(O)},d&&renderLabelLineItem(d,B),renderLabelItem(u,I,getValueByDataKey(D,f)))});return reactExports.createElement(Layer$2,{className:"recharts-pie-labels"},_)}function PieLabelList(e){var{sectors:t,props:n,showLabels:o}=e,{label:u}=n;return typeof u=="object"&&u!=null&&"position"in u?reactExports.createElement(LabelListFromLabelProp,{label:u}):reactExports.createElement(PieLabels,{sectors:t,props:n,showLabels:o})}function PieSectors(e){var{sectors:t,activeShape:n,inactiveShape:o,allOtherPieProps:u}=e,d=useAppSelector(selectActiveTooltipIndex),{onMouseEnter:f,onClick:v,onMouseLeave:w}=u,E=_objectWithoutProperties$3(u,_excluded$3),C=useMouseEnterItemDispatch(f,u.dataKey),_=useMouseLeaveItemDispatch(w),D=useMouseClickItemDispatch(v,u.dataKey);return t==null||t.length===0?null:reactExports.createElement(reactExports.Fragment,null,t.map((O,M)=>{if(O?.startAngle===0&&O?.endAngle===0&&t.length!==1)return null;var N=n&&String(M)===d,I=d?o:null,B=N?n:I,V=_objectSpread$2(_objectSpread$2({},O),{},{stroke:O.stroke,tabIndex:-1,[DATA_ITEM_INDEX_ATTRIBUTE_NAME]:M,[DATA_ITEM_DATAKEY_ATTRIBUTE_NAME]:u.dataKey});return reactExports.createElement(Layer$2,_extends$3({key:"sector-".concat(O?.startAngle,"-").concat(O?.endAngle,"-").concat(O.midAngle,"-").concat(M),tabIndex:-1,className:"recharts-pie-sector"},adaptEventsOfChild(E,O,M),{onMouseEnter:C(O,M),onMouseLeave:_(O,M),onClick:D(O,M)}),reactExports.createElement(Shape$1,_extends$3({option:B,isActive:N,shapeType:"sector"},V)))}))}function computePieSectors(e){var t,{pieSettings:n,displayedData:o,cells:u,offset:d}=e,{cornerRadius:f,startAngle:v,endAngle:w,dataKey:E,nameKey:C,tooltipType:_}=n,D=Math.abs(n.minAngle),O=parseDeltaAngle(v,w),M=Math.abs(O),N=o.length<=1?0:(t=n.paddingAngle)!==null&&t!==void 0?t:0,I=o.filter($=>getValueByDataKey($,E,0)!==0).length,B=(M>=360?I:I-1)*N,V=M-I*D-B,j=o.reduce(($,ee)=>{var ie=getValueByDataKey(ee,E,0);return $+(isNumber$1(ie)?ie:0)},0),q;if(j>0){var z;q=o.map(($,ee)=>{var ie=getValueByDataKey($,E,0),ae=getValueByDataKey($,C,ee),pe=parseCoordinateOfPie(n,d,$),he=(isNumber$1(ie)?ie:0)/j,be,xe=_objectSpread$2(_objectSpread$2({},$),u&&u[ee]&&u[ee].props);ee?be=z.endAngle+mathSign(O)*N*(ie!==0?1:0):be=v;var Ee=be+mathSign(O)*((ie!==0?D:0)+he*V),we=(be+Ee)/2,oe=(pe.innerRadius+pe.outerRadius)/2,se=[{name:ae,value:ie,payload:xe,dataKey:E,type:_}],J=polarToCartesian(pe.cx,pe.cy,oe,we);return z=_objectSpread$2(_objectSpread$2(_objectSpread$2(_objectSpread$2({},n.presentationProps),{},{percent:he,cornerRadius:f,name:ae,tooltipPayload:se,midAngle:we,middleRadius:oe,tooltipPosition:J},xe),pe),{},{value:ie,startAngle:be,endAngle:Ee,payload:xe,paddingAngle:mathSign(O)*N}),z})}return q}function PieLabelListProvider(e){var{showLabels:t,sectors:n,children:o}=e,u=reactExports.useMemo(()=>!t||!n?[]:n.map(d=>({value:d.value,payload:d.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:d.cx,cy:d.cy,innerRadius:d.innerRadius,outerRadius:d.outerRadius,startAngle:d.startAngle,endAngle:d.endAngle,clockWise:!1},fill:d.fill})),[n,t]);return reactExports.createElement(PolarLabelListContextProvider,{value:t?u:void 0},o)}function SectorsWithAnimation(e){var{props:t,previousSectorsRef:n}=e,{sectors:o,isAnimationActive:u,animationBegin:d,animationDuration:f,animationEasing:v,activeShape:w,inactiveShape:E,onAnimationStart:C,onAnimationEnd:_}=t,D=useAnimationId(t,"recharts-pie-"),O=n.current,[M,N]=reactExports.useState(!1),I=reactExports.useCallback(()=>{typeof _=="function"&&_(),N(!1)},[_]),B=reactExports.useCallback(()=>{typeof C=="function"&&C(),N(!0)},[C]);return reactExports.createElement(PieLabelListProvider,{showLabels:!M,sectors:o},reactExports.createElement(JavascriptAnimate,{animationId:D,begin:d,duration:f,isActive:u,easing:v,onAnimationStart:B,onAnimationEnd:I,key:D},V=>{var j=[],q=o&&o[0],z=q?.startAngle;return o?.forEach(($,ee)=>{var ie=O&&O[ee],ae=ee>0?get($,"paddingAngle",0):0;if(ie){var pe=interpolate$2(ie.endAngle-ie.startAngle,$.endAngle-$.startAngle,V),he=_objectSpread$2(_objectSpread$2({},$),{},{startAngle:z+ae,endAngle:z+pe+ae});j.push(he),z=he.endAngle}else{var{endAngle:be,startAngle:xe}=$,Ee=interpolate$2(0,be-xe,V),we=_objectSpread$2(_objectSpread$2({},$),{},{startAngle:z+ae,endAngle:z+Ee+ae});j.push(we),z=we.endAngle}}),n.current=j,reactExports.createElement(Layer$2,null,reactExports.createElement(PieSectors,{sectors:j,activeShape:w,inactiveShape:E,allOtherPieProps:t}))}),reactExports.createElement(PieLabelList,{showLabels:!M,sectors:o,props:t}),t.children)}var defaultPieProps={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Global.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function PieImpl(e){var{id:t}=e,n=_objectWithoutProperties$3(e,_excluded2),{hide:o,className:u,rootTabIndex:d}=e,f=reactExports.useMemo(()=>findAllByType(e.children,Cell),[e.children]),v=useAppSelector(C=>selectPieSectors(C,t,f)),w=reactExports.useRef(null),E=clsx("recharts-pie",u);return o||v==null?(w.current=null,reactExports.createElement(Layer$2,{tabIndex:d,className:E})):reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(SetTooltipEntrySettings,{fn:getTooltipEntrySettings,args:_objectSpread$2(_objectSpread$2({},e),{},{sectors:v})}),reactExports.createElement(Layer$2,{tabIndex:d,className:E},reactExports.createElement(SectorsWithAnimation,{props:_objectSpread$2(_objectSpread$2({},n),{},{sectors:v}),previousSectorsRef:w})))}function Pie(e){var t=resolveDefaultProps(e,defaultPieProps),{id:n}=t,o=_objectWithoutProperties$3(t,_excluded3),u=svgPropertiesNoEvents(o);return reactExports.createElement(RegisterGraphicalItemId,{id:n,type:"pie"},d=>reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(SetPolarGraphicalItem,{type:"pie",id:d,data:o.data,dataKey:o.dataKey,hide:o.hide,angleAxisId:0,radiusAxisId:0,name:o.name,nameKey:o.nameKey,tooltipType:o.tooltipType,legendType:o.legendType,fill:o.fill,cx:o.cx,cy:o.cy,startAngle:o.startAngle,endAngle:o.endAngle,paddingAngle:o.paddingAngle,minAngle:o.minAngle,innerRadius:o.innerRadius,outerRadius:o.outerRadius,cornerRadius:o.cornerRadius,presentationProps:u,maxRadius:t.maxRadius}),reactExports.createElement(SetPiePayloadLegend,_extends$3({},o,{id:d})),reactExports.createElement(PieImpl,_extends$3({},o,{id:d}))))}Pie.displayName="Pie";function ownKeys$1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$1(Object(n),!0).forEach(function(o){_defineProperty$1(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$1(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$1(e,t,n){return(t=_toPropertyKey$1(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$1(e){var t=_toPrimitive$1(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$1(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var initialState$4={xAxis:{},yAxis:{},zAxis:{}},cartesianAxisSlice=createSlice({name:"cartesianAxis",initialState:initialState$4,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:prepareAutoBatched()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:prepareAutoBatched()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:prepareAutoBatched()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:prepareAutoBatched()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:prepareAutoBatched()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:prepareAutoBatched()},updateYAxisWidth(e,t){var{id:n,width:o}=t.payload,u=e.yAxis[n];if(u){var d=u.widthHistory||[];if(d.length===3&&d[0]===d[2]&&o===d[1]&&o!==u.width&&Math.abs(o-d[0])<=1)return;var f=[...d,o].slice(-3);e.yAxis[n]=_objectSpread$1(_objectSpread$1({},e.yAxis[n]),{},{width:o,widthHistory:f})}}}}),{addXAxis,removeXAxis,addYAxis,removeYAxis,addZAxis,removeZAxis,updateYAxisWidth}=cartesianAxisSlice.actions,cartesianAxisReducer=cartesianAxisSlice.reducer,selectChartOffset=createSelector([selectChartOffsetInternal],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),selectPlotArea=createSelector([selectChartOffset,selectChartWidth,selectChartHeight],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),usePlotArea=()=>useAppSelector(selectPlotArea),initialState$3={},errorBarSlice=createSlice({name:"errorBars",initialState:initialState$3,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:o}=t.payload;e[n]||(e[n]=[]),e[n].push(o)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:o,next:u}=t.payload;e[n]&&(e[n]=e[n].map(d=>d.dataKey===o.dataKey&&d.direction===o.direction?u:d))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:o}=t.payload;e[n]&&(e[n]=e[n].filter(u=>u.dataKey!==o.dataKey||u.direction!==o.direction))}}}),{addErrorBar,replaceErrorBar,removeErrorBar}=errorBarSlice.actions,errorBarReducer=errorBarSlice.reducer,ChartDataContextProvider=e=>{var{chartData:t}=e,n=useAppDispatch(),o=useIsPanorama();return reactExports.useEffect(()=>o?()=>{}:(n(setChartData(t)),()=>{n(setChartData(void 0))}),[t,n,o]),null},initialState$2={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},brushSlice=createSlice({name:"brush",initialState:initialState$2,reducers:{setBrushSettings(e,t){return t.payload==null?initialState$2:t.payload}}}),{setBrushSettings}=brushSlice.actions,brushReducer=brushSlice.reducer,initialState$1={dots:[],areas:[],lines:[]},referenceElementsSlice=createSlice({name:"referenceElements",initialState:initialState$1,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=current(e).dots.findIndex(o=>o===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=current(e).areas.findIndex(o=>o===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=current(e).lines.findIndex(o=>o===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot,removeDot,addArea,removeArea,addLine,removeLine}=referenceElementsSlice.actions,referenceElementsReducer=referenceElementsSlice.reducer,ClipPathIdContext=reactExports.createContext(void 0),ClipPathProvider=e=>{var{children:t}=e,[n]=reactExports.useState("".concat(uniqueId("recharts"),"-clip")),o=usePlotArea();if(o==null)return null;var{x:u,y:d,width:f,height:v}=o;return reactExports.createElement(ClipPathIdContext.Provider,{value:n},reactExports.createElement("defs",null,reactExports.createElement("clipPath",{id:n},reactExports.createElement("rect",{x:u,y:d,height:v,width:f}))),t)},withSelector={exports:{}},useSyncExternalStoreWithSelector_production={};var hasRequiredUseSyncExternalStoreWithSelector_production;function requireUseSyncExternalStoreWithSelector_production(){if(hasRequiredUseSyncExternalStoreWithSelector_production)return useSyncExternalStoreWithSelector_production;hasRequiredUseSyncExternalStoreWithSelector_production=1;var e=requireReact();function t(w,E){return w===E&&(w!==0||1/w===1/E)||w!==w&&E!==E}var n=typeof Object.is=="function"?Object.is:t,o=e.useSyncExternalStore,u=e.useRef,d=e.useEffect,f=e.useMemo,v=e.useDebugValue;return useSyncExternalStoreWithSelector_production.useSyncExternalStoreWithSelector=function(w,E,C,_,D){var O=u(null);if(O.current===null){var M={hasValue:!1,value:null};O.current=M}else M=O.current;O=f(function(){function I(z){if(!B){if(B=!0,V=z,z=_(z),D!==void 0&&M.hasValue){var $=M.value;if(D($,z))return j=$}return j=z}if($=j,n(V,z))return $;var ee=_(z);return D!==void 0&&D($,ee)?(V=z,$):(V=z,j=ee)}var B=!1,V,j,q=C===void 0?null:C;return[function(){return I(E())},q===null?void 0:function(){return I(q())}]},[E,C,_,D]);var N=o(w,O[0],O[1]);return d(function(){M.hasValue=!0,M.value=N},[N]),v(N),N},useSyncExternalStoreWithSelector_production}var hasRequiredWithSelector;function requireWithSelector(){return hasRequiredWithSelector||(hasRequiredWithSelector=1,withSelector.exports=requireUseSyncExternalStoreWithSelector_production()),withSelector.exports}requireWithSelector();function defaultNoopBatch(e){e()}function createListenerCollection(){let e=null,t=null;return{clear(){e=null,t=null},notify(){defaultNoopBatch(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let o=e;for(;o;)n.push(o),o=o.next;return n},subscribe(n){let o=!0;const u=t={callback:n,next:null,prev:t};return u.prev?u.prev.next=u:e=u,function(){!o||e===null||(o=!1,u.next?u.next.prev=u.prev:t=u.prev,u.prev?u.prev.next=u.next:e=u.next)}}}}var nullListeners={notify(){},get:()=>[]};function createSubscription(e,t){let n,o=nullListeners,u=0,d=!1;function f(N){C();const I=o.subscribe(N);let B=!1;return()=>{B||(B=!0,I(),_())}}function v(){o.notify()}function w(){M.onStateChange&&M.onStateChange()}function E(){return d}function C(){u++,n||(n=e.subscribe(w),o=createListenerCollection())}function _(){u--,n&&u===0&&(n(),n=void 0,o.clear(),o=nullListeners)}function D(){d||(d=!0,C())}function O(){d&&(d=!1,_())}const M={addNestedSub:f,notifyNestedSubs:v,handleChangeWrapper:w,isSubscribed:E,trySubscribe:D,tryUnsubscribe:O,getListeners:()=>o};return M}var canUseDOM=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",isDOM=canUseDOM(),isRunningInReactNative=()=>typeof navigator<"u"&&navigator.product==="ReactNative",isReactNative=isRunningInReactNative(),getUseIsomorphicLayoutEffect=()=>isDOM||isReactNative?reactExports.useLayoutEffect:reactExports.useEffect,useIsomorphicLayoutEffect$2=getUseIsomorphicLayoutEffect(),ContextKey=Symbol.for("react-redux-context"),gT=typeof globalThis<"u"?globalThis:{};function getContext(){if(!reactExports.createContext)return{};const e=gT[ContextKey]??=new Map;let t=e.get(reactExports.createContext);return t||(t=reactExports.createContext(null),e.set(reactExports.createContext,t)),t}var ReactReduxContext=getContext();function Provider(e){const{children:t,context:n,serverState:o,store:u}=e,d=reactExports.useMemo(()=>{const w=createSubscription(u);return{store:u,subscription:w,getServerState:o?()=>o:void 0}},[u,o]),f=reactExports.useMemo(()=>u.getState(),[u]);useIsomorphicLayoutEffect$2(()=>{const{subscription:w}=d;return w.onStateChange=w.notifyNestedSubs,w.trySubscribe(),f!==u.getState()&&w.notifyNestedSubs(),()=>{w.tryUnsubscribe(),w.onStateChange=void 0}},[d,f]);const v=n||ReactReduxContext;return reactExports.createElement(v.Provider,{value:d},t)}var Provider_default=Provider,pickChartPointer=(e,t)=>t,selectActivePropsFromChartPointer=createSelector([pickChartPointer,selectChartLayout,selectPolarViewBox,selectTooltipAxisType,selectTooltipAxisRangeWithReverse,selectTooltipAxisTicks,selectOrderedTooltipTicks,selectChartOffsetInternal],combineActiveProps),getChartPointer=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,o=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/o)}},mouseClickAction=createAction("mouseClick"),mouseClickMiddleware=createListenerMiddleware();mouseClickMiddleware.startListening({actionCreator:mouseClickAction,effect:(e,t)=>{var n=e.payload,o=selectActivePropsFromChartPointer(t.getState(),getChartPointer(n));o?.activeIndex!=null&&t.dispatch(setMouseClickAxisIndex({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}});var mouseMoveAction=createAction("mouseMove"),mouseMoveMiddleware=createListenerMiddleware();mouseMoveMiddleware.startListening({actionCreator:mouseMoveAction,effect:(e,t)=>{var n=e.payload,o=t.getState(),u=selectTooltipEventType$1(o,o.tooltip.settings.shared),d=selectActivePropsFromChartPointer(o,getChartPointer(n));u==="axis"&&(d?.activeIndex!=null?t.dispatch(setMouseOverAxisIndex({activeIndex:d.activeIndex,activeDataKey:void 0,activeCoordinate:d.activeCoordinate})):t.dispatch(mouseLeaveChart()))}});var initialState={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},rootPropsSlice=createSlice({name:"rootProps",initialState,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:initialState.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),rootPropsReducer=rootPropsSlice.reducer,{updateOptions}=rootPropsSlice.actions,polarOptionsSlice=createSlice({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions}=polarOptionsSlice.actions,polarOptionsReducer=polarOptionsSlice.reducer,keyDownAction=createAction("keyDown"),focusAction=createAction("focus"),keyboardEventsMiddleware=createListenerMiddleware();keyboardEventsMiddleware.startListening({actionCreator:keyDownAction,effect:(e,t)=>{var n=t.getState(),o=n.rootProps.accessibilityLayer!==!1;if(o){var{keyboardInteraction:u}=n.tooltip,d=e.payload;if(!(d!=="ArrowRight"&&d!=="ArrowLeft"&&d!=="Enter")){var f=Number(combineActiveTooltipIndex(u,selectTooltipDisplayedData(n))),v=selectTooltipAxisTicks(n);if(d==="Enter"){var w=selectCoordinateForDefaultIndex(n,"axis","hover",String(u.index));t.dispatch(setKeyboardInteraction({active:!u.active,activeIndex:u.index,activeDataKey:u.dataKey,activeCoordinate:w}));return}var E=selectChartDirection(n),C=E==="left-to-right"?1:-1,_=d==="ArrowRight"?1:-1,D=f+_*C;if(!(v==null||D>=v.length||D<0)){var O=selectCoordinateForDefaultIndex(n,"axis","hover",String(D));t.dispatch(setKeyboardInteraction({active:!0,activeIndex:D.toString(),activeDataKey:void 0,activeCoordinate:O}))}}}}});keyboardEventsMiddleware.startListening({actionCreator:focusAction,effect:(e,t)=>{var n=t.getState(),o=n.rootProps.accessibilityLayer!==!1;if(o){var{keyboardInteraction:u}=n.tooltip;if(!u.active&&u.index==null){var d="0",f=selectCoordinateForDefaultIndex(n,"axis","hover",String(d));t.dispatch(setKeyboardInteraction({activeDataKey:void 0,active:!0,activeIndex:d,activeCoordinate:f}))}}}});var externalEventAction=createAction("externalEvent"),externalEventsMiddleware=createListenerMiddleware();externalEventsMiddleware.startListening({actionCreator:externalEventAction,effect:(e,t)=>{if(e.payload.handler!=null){var n=t.getState(),o={activeCoordinate:selectActiveTooltipCoordinate(n),activeDataKey:selectActiveTooltipDataKey(n),activeIndex:selectActiveTooltipIndex(n),activeLabel:selectActiveLabel$1(n),activeTooltipIndex:selectActiveTooltipIndex(n),isTooltipActive:selectIsTooltipActive$1(n)};e.payload.handler(o,e.payload.reactEvent)}}});var selectAllTooltipPayloadConfiguration=createSelector([selectTooltipState],e=>e.tooltipItemPayloads),selectTooltipCoordinate=createSelector([selectAllTooltipPayloadConfiguration,selectTooltipPayloadSearcher,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,o)=>{var u=e.find(v=>v.settings.dataKey===o);if(u!=null){var{positions:d}=u;if(d!=null){var f=t(d,n);return f}}}),touchEventAction=createAction("touchMove"),touchEventMiddleware=createListenerMiddleware();touchEventMiddleware.startListening({actionCreator:touchEventAction,effect:(e,t)=>{var n=e.payload,o=t.getState(),u=selectTooltipEventType$1(o,o.tooltip.settings.shared);if(u==="axis"){var d=selectActivePropsFromChartPointer(o,getChartPointer({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));d?.activeIndex!=null&&t.dispatch(setMouseOverAxisIndex({activeIndex:d.activeIndex,activeDataKey:void 0,activeCoordinate:d.activeCoordinate}))}else if(u==="item"){var f,v=n.touches[0],w=document.elementFromPoint(v.clientX,v.clientY);if(!w||!w.getAttribute)return;var E=w.getAttribute(DATA_ITEM_INDEX_ATTRIBUTE_NAME),C=(f=w.getAttribute(DATA_ITEM_DATAKEY_ATTRIBUTE_NAME))!==null&&f!==void 0?f:void 0,_=selectTooltipCoordinate(t.getState(),E,C);t.dispatch(setActiveMouseOverItemIndex({activeDataKey:C,activeIndex:E,activeCoordinate:_}))}}});var rootReducer=combineReducers({brush:brushReducer,cartesianAxis:cartesianAxisReducer,chartData:chartDataReducer,errorBars:errorBarReducer,graphicalItems:graphicalItemsReducer,layout:chartLayoutReducer,legend:legendReducer,options:optionsReducer,polarAxis:polarAxisReducer,polarOptions:polarOptionsReducer,referenceElements:referenceElementsReducer,rootProps:rootPropsReducer,tooltip:tooltipReducer}),createRechartsStore=function(t){return configureStore({reducer:rootReducer,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([mouseClickMiddleware.middleware,mouseMoveMiddleware.middleware,keyboardEventsMiddleware.middleware,externalEventsMiddleware.middleware,touchEventMiddleware.middleware]),enhancers:n=>{var o=n;return typeof n=="function"&&(o=n()),o.concat(autoBatchEnhancer({type:"raf"}))},devTools:Global.devToolsEnabled})};function RechartsStoreProvider(e){var{preloadedState:t,children:n,reduxStoreName:o}=e,u=useIsPanorama(),d=reactExports.useRef(null);if(u)return n;d.current==null&&(d.current=createRechartsStore(t));var f=RechartsReduxContext;return reactExports.createElement(Provider_default,{context:f,store:d.current},n)}function ReportMainChartProps(e){var{layout:t,margin:n}=e,o=useAppDispatch(),u=useIsPanorama();return reactExports.useEffect(()=>{u||(o(setLayout(t)),o(setMargin(n)))},[o,u,t,n]),null}function ReportChartProps(e){var t=useAppDispatch();return reactExports.useEffect(()=>{t(updateOptions(e))},[t,e]),null}var _excluded$2=["children"];function _objectWithoutProperties$2(e,t){if(e==null)return{};var n,o,u=_objectWithoutPropertiesLoose$2(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(o=0;o<d.length;o++)n=d[o],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(u[n]=e[n])}return u}function _objectWithoutPropertiesLoose$2(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;n[o]=e[o]}return n}function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$2.apply(null,arguments)}var FULL_WIDTH_AND_HEIGHT={width:"100%",height:"100%",display:"block"},MainChartSurface=reactExports.forwardRef((e,t)=>{var n=useChartWidth(),o=useChartHeight(),u=useAccessibilityLayer();if(!isPositiveNumber(n)||!isPositiveNumber(o))return null;var{children:d,otherAttributes:f,title:v,desc:w}=e,E,C;return typeof f.tabIndex=="number"?E=f.tabIndex:E=u?0:void 0,typeof f.role=="string"?C=f.role:C=u?"application":void 0,reactExports.createElement(Surface,_extends$2({},f,{title:v,desc:w,role:C,tabIndex:E,width:n,height:o,style:FULL_WIDTH_AND_HEIGHT,ref:t}),d)}),BrushPanoramaSurface=e=>{var{children:t}=e,n=useAppSelector(selectBrushDimensions);if(!n)return null;var{width:o,height:u,y:d,x:f}=n;return reactExports.createElement(Surface,{width:o,height:u,x:f,y:d},t)},RootSurface=reactExports.forwardRef((e,t)=>{var{children:n}=e,o=_objectWithoutProperties$2(e,_excluded$2),u=useIsPanorama();return u?reactExports.createElement(BrushPanoramaSurface,null,n):reactExports.createElement(MainChartSurface,_extends$2({ref:t},o),n)});function useReportScale(){var e=useAppDispatch(),[t,n]=reactExports.useState(null),o=useAppSelector(selectContainerScale);return reactExports.useEffect(()=>{if(t!=null){var u=t.getBoundingClientRect(),d=u.width/t.offsetWidth;isWellBehavedNumber(d)&&d!==o&&e(setScale(d))}},[t,e,o]),n}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(o){_defineProperty(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$1.apply(null,arguments)}var EventSynchronizer=()=>(useSynchronisedEventsFromOtherCharts(),null);function getNumberOrZero(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var ResponsiveDiv=reactExports.forwardRef((e,t)=>{var n,o,u=reactExports.useRef(null),[d,f]=reactExports.useState({containerWidth:getNumberOrZero((n=e.style)===null||n===void 0?void 0:n.width),containerHeight:getNumberOrZero((o=e.style)===null||o===void 0?void 0:o.height)}),v=reactExports.useCallback((E,C)=>{f(_=>{var D=Math.round(E),O=Math.round(C);return _.containerWidth===D&&_.containerHeight===O?_:{containerWidth:D,containerHeight:O}})},[]),w=reactExports.useCallback(E=>{if(typeof t=="function"&&t(E),E!=null){var{width:C,height:_}=E.getBoundingClientRect();v(C,_);var D=M=>{var{width:N,height:I}=M[0].contentRect;v(N,I)},O=new ResizeObserver(D);O.observe(E),u.current=O}},[t,v]);return reactExports.useEffect(()=>()=>{var E=u.current;E?.disconnect()},[v]),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(ReportChartSize,{width:d.containerWidth,height:d.containerHeight}),reactExports.createElement("div",_extends$1({ref:w},e)))}),ReadSizeOnceDiv=reactExports.forwardRef((e,t)=>{var{width:n,height:o}=e,[u,d]=reactExports.useState({containerWidth:getNumberOrZero(n),containerHeight:getNumberOrZero(o)}),f=reactExports.useCallback((w,E)=>{d(C=>{var _=Math.round(w),D=Math.round(E);return C.containerWidth===_&&C.containerHeight===D?C:{containerWidth:_,containerHeight:D}})},[]),v=reactExports.useCallback(w=>{if(typeof t=="function"&&t(w),w!=null){var{width:E,height:C}=w.getBoundingClientRect();f(E,C)}},[t,f]);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(ReportChartSize,{width:u.containerWidth,height:u.containerHeight}),reactExports.createElement("div",_extends$1({ref:v},e)))}),StaticDiv=reactExports.forwardRef((e,t)=>{var{width:n,height:o}=e;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(ReportChartSize,{width:n,height:o}),reactExports.createElement("div",_extends$1({ref:t},e)))}),NonResponsiveDiv=reactExports.forwardRef((e,t)=>{var{width:n,height:o}=e;return isPercent(n)||isPercent(o)?reactExports.createElement(ReadSizeOnceDiv,_extends$1({},e,{ref:t})):reactExports.createElement(StaticDiv,_extends$1({},e,{ref:t}))});function getWrapperDivComponent(e){return e===!0?ResponsiveDiv:NonResponsiveDiv}var RechartsWrapper=reactExports.forwardRef((e,t)=>{var{children:n,className:o,height:u,onClick:d,onContextMenu:f,onDoubleClick:v,onMouseDown:w,onMouseEnter:E,onMouseLeave:C,onMouseMove:_,onMouseUp:D,onTouchEnd:O,onTouchMove:M,onTouchStart:N,style:I,width:B,responsive:V,dispatchTouchEvents:j=!0}=e,q=reactExports.useRef(null),z=useAppDispatch(),[$,ee]=reactExports.useState(null),[ie,ae]=reactExports.useState(null),pe=useReportScale(),he=useResponsiveContainerContext(),be=he?.width>0?he.width:B,xe=he?.height>0?he.height:u,Ee=reactExports.useCallback(ce=>{pe(ce),typeof t=="function"&&t(ce),ee(ce),ae(ce),ce!=null&&(q.current=ce)},[pe,t,ee,ae]),we=reactExports.useCallback(ce=>{z(mouseClickAction(ce)),z(externalEventAction({handler:d,reactEvent:ce}))},[z,d]),oe=reactExports.useCallback(ce=>{z(mouseMoveAction(ce)),z(externalEventAction({handler:E,reactEvent:ce}))},[z,E]),se=reactExports.useCallback(ce=>{z(mouseLeaveChart()),z(externalEventAction({handler:C,reactEvent:ce}))},[z,C]),J=reactExports.useCallback(ce=>{z(mouseMoveAction(ce)),z(externalEventAction({handler:_,reactEvent:ce}))},[z,_]),Q=reactExports.useCallback(()=>{z(focusAction())},[z]),Z=reactExports.useCallback(ce=>{z(keyDownAction(ce.key))},[z]),K=reactExports.useCallback(ce=>{z(externalEventAction({handler:f,reactEvent:ce}))},[z,f]),ne=reactExports.useCallback(ce=>{z(externalEventAction({handler:v,reactEvent:ce}))},[z,v]),ue=reactExports.useCallback(ce=>{z(externalEventAction({handler:w,reactEvent:ce}))},[z,w]),ye=reactExports.useCallback(ce=>{z(externalEventAction({handler:D,reactEvent:ce}))},[z,D]),fe=reactExports.useCallback(ce=>{z(externalEventAction({handler:N,reactEvent:ce}))},[z,N]),X=reactExports.useCallback(ce=>{j&&z(touchEventAction(ce)),z(externalEventAction({handler:M,reactEvent:ce}))},[z,j,M]),le=reactExports.useCallback(ce=>{z(externalEventAction({handler:O,reactEvent:ce}))},[z,O]),de=getWrapperDivComponent(V);return reactExports.createElement(TooltipPortalContext.Provider,{value:$},reactExports.createElement(LegendPortalContext.Provider,{value:ie},reactExports.createElement(de,{width:be??I?.width,height:xe??I?.height,className:clsx("recharts-wrapper",o),style:_objectSpread({position:"relative",cursor:"default",width:be,height:xe},I),onClick:we,onContextMenu:K,onDoubleClick:ne,onFocus:Q,onKeyDown:Z,onMouseDown:ue,onMouseEnter:oe,onMouseLeave:se,onMouseMove:J,onMouseUp:ye,onTouchEnd:le,onTouchMove:X,onTouchStart:fe,ref:Ee},reactExports.createElement(EventSynchronizer,null),n)))}),_excluded$1=["width","height","responsive","children","className","style","compact","title","desc"];function _objectWithoutProperties$1(e,t){if(e==null)return{};var n,o,u=_objectWithoutPropertiesLoose$1(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(o=0;o<d.length;o++)n=d[o],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(u[n]=e[n])}return u}function _objectWithoutPropertiesLoose$1(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;n[o]=e[o]}return n}var CategoricalChart=reactExports.forwardRef((e,t)=>{var{width:n,height:o,responsive:u,children:d,className:f,style:v,compact:w,title:E,desc:C}=e,_=_objectWithoutProperties$1(e,_excluded$1),D=svgPropertiesNoEvents(_);return w?reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(ReportChartSize,{width:n,height:o}),reactExports.createElement(RootSurface,{otherAttributes:D,title:E,desc:C},d)):reactExports.createElement(RechartsWrapper,{className:f,style:v,width:n,height:o,responsive:u,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},reactExports.createElement(RootSurface,{otherAttributes:D,title:E,desc:C,ref:t},reactExports.createElement(ClipPathProvider,null,d)))});function ReportPolarOptions(e){var t=useAppDispatch();return reactExports.useEffect(()=>{t(updatePolarOptions(e))},[t,e]),null}var _excluded=["layout"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends.apply(null,arguments)}function _objectWithoutProperties(e,t){if(e==null)return{};var n,o,u=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(o=0;o<d.length;o++)n=d[o],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(u[n]=e[n])}return u}function _objectWithoutPropertiesLoose(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;n[o]=e[o]}return n}var defaultMargin={top:5,right:5,bottom:5,left:5},defaultProps$1={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:defaultMargin,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1},PolarChart=reactExports.forwardRef(function(t,n){var o,u=resolveDefaultProps(t.categoricalChartProps,defaultProps$1),{layout:d}=u,f=_objectWithoutProperties(u,_excluded),{chartName:v,defaultTooltipEventType:w,validateTooltipEventTypes:E,tooltipPayloadSearcher:C}=t,_={chartName:v,defaultTooltipEventType:w,validateTooltipEventTypes:E,tooltipPayloadSearcher:C,eventEmitter:void 0};return reactExports.createElement(RechartsStoreProvider,{preloadedState:{options:_},reduxStoreName:(o=u.id)!==null&&o!==void 0?o:v},reactExports.createElement(ChartDataContextProvider,{chartData:u.data}),reactExports.createElement(ReportMainChartProps,{layout:d,margin:u.margin}),reactExports.createElement(ReportChartProps,{accessibilityLayer:u.accessibilityLayer,barCategoryGap:u.barCategoryGap,maxBarSize:u.maxBarSize,stackOffset:u.stackOffset,barGap:u.barGap,barSize:u.barSize,syncId:u.syncId,syncMethod:u.syncMethod,className:u.className}),reactExports.createElement(ReportPolarOptions,{cx:u.cx,cy:u.cy,startAngle:u.startAngle,endAngle:u.endAngle,innerRadius:u.innerRadius,outerRadius:u.outerRadius}),reactExports.createElement(CategoricalChart,_extends({},f,{ref:n})))}),allowedTooltipTypes=["item"],defaultProps={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},PieChart=reactExports.forwardRef((e,t)=>{var n=resolveDefaultProps(e,defaultProps);return reactExports.createElement(PolarChart,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:allowedTooltipTypes,tooltipPayloadSearcher:arrayTooltipSearcher,categoricalChartProps:n,ref:t})});const LayoutGroupContext=reactExports.createContext({});function useConstant(e){const t=reactExports.useRef(null);return t.current===null&&(t.current=e()),t.current}const isBrowser=typeof window<"u",useIsomorphicLayoutEffect$1=isBrowser?reactExports.useLayoutEffect:reactExports.useEffect,PresenceContext=reactExports.createContext(null);function addUniqueItem(e,t){e.indexOf(t)===-1&&e.push(t)}function removeItem(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const clamp$1=(e,t,n)=>n>t?t:n<e?e:n;let invariant=()=>{};const MotionGlobalConfig={},isNumericalString=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function isObject$1(e){return typeof e=="object"&&e!==null}const isZeroValueString=e=>/^0[^.\s]+$/u.test(e);function memo(e){let t;return()=>(t===void 0&&(t=e()),t)}const noop$1=e=>e,combineFunctions=(e,t)=>n=>t(e(n)),pipe=(...e)=>e.reduce(combineFunctions),progress=(e,t,n)=>{const o=t-e;return o===0?1:(n-e)/o};class SubscriptionManager{constructor(){this.subscriptions=[]}add(t){return addUniqueItem(this.subscriptions,t),()=>removeItem(this.subscriptions,t)}notify(t,n,o){const u=this.subscriptions.length;if(u)if(u===1)this.subscriptions[0](t,n,o);else for(let d=0;d<u;d++){const f=this.subscriptions[d];f&&f(t,n,o)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const secondsToMilliseconds=e=>e*1e3,millisecondsToSeconds=e=>e/1e3;function velocityPerSecond(e,t){return t?e*(1e3/t):0}const calcBezier=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(e,t,n,o,u){let d,f,v=0;do f=t+(n-t)/2,d=calcBezier(f,o,u)-e,d>0?n=f:t=f;while(Math.abs(d)>subdivisionPrecision&&++v<subdivisionMaxIterations);return f}function cubicBezier(e,t,n,o){if(e===t&&n===o)return noop$1;const u=d=>binarySubdivide(d,0,1,e,n);return d=>d===0||d===1?d:calcBezier(u(d),t,o)}const mirrorEasing=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,reverseEasing=e=>t=>1-e(1-t),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=e=>(e*=2)<1?.5*backIn(e):.5*(2-Math.pow(2,-10*(e-1))),circIn=e=>1-Math.sin(Math.acos(e)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=e=>Array.isArray(e)&&typeof e[0]!="number",isBezierDefinition=e=>Array.isArray(e)&&typeof e[0]=="number",easingLookup={linear:noop$1,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},isValidEasing=e=>typeof e=="string",easingDefinitionToFunction=e=>{if(isBezierDefinition(e)){invariant(e.length===4);const[t,n,o,u]=e;return cubicBezier(t,n,o,u)}else if(isValidEasing(e))return easingLookup[e];return e},stepsOrder=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function createRenderStep(e,t){let n=new Set,o=new Set,u=!1,d=!1;const f=new WeakSet;let v={delta:0,timestamp:0,isProcessing:!1};function w(C){f.has(C)&&(E.schedule(C),e()),C(v)}const E={schedule:(C,_=!1,D=!1)=>{const M=D&&u?n:o;return _&&f.add(C),M.has(C)||M.add(C),C},cancel:C=>{o.delete(C),f.delete(C)},process:C=>{if(v=C,u){d=!0;return}u=!0,[n,o]=[o,n],n.forEach(w),n.clear(),u=!1,d&&(d=!1,E.process(C))}};return E}const maxElapsed=40;function createRenderBatcher(e,t){let n=!1,o=!0;const u={delta:0,timestamp:0,isProcessing:!1},d=()=>n=!0,f=stepsOrder.reduce((j,q)=>(j[q]=createRenderStep(d),j),{}),{setup:v,read:w,resolveKeyframes:E,preUpdate:C,update:_,preRender:D,render:O,postRender:M}=f,N=()=>{const j=MotionGlobalConfig.useManualTiming?u.timestamp:performance.now();n=!1,MotionGlobalConfig.useManualTiming||(u.delta=o?1e3/60:Math.max(Math.min(j-u.timestamp,maxElapsed),1)),u.timestamp=j,u.isProcessing=!0,v.process(u),w.process(u),E.process(u),C.process(u),_.process(u),D.process(u),O.process(u),M.process(u),u.isProcessing=!1,n&&t&&(o=!1,e(N))},I=()=>{n=!0,o=!0,u.isProcessing||e(N)};return{schedule:stepsOrder.reduce((j,q)=>{const z=f[q];return j[q]=($,ee=!1,ie=!1)=>(n||I(),z.schedule($,ee,ie)),j},{}),cancel:j=>{for(let q=0;q<stepsOrder.length;q++)f[stepsOrder[q]].cancel(j)},state:u,steps:f}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop$1,!0);let now$1;function clearTime(){now$1=void 0}const time={now:()=>(now$1===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now$1),set:e=>{now$1=e,queueMicrotask(clearTime)}},checkStringStartsWith=e=>t=>typeof t=="string"&&t.startsWith(e),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=e=>startsAsVariableToken(e)?singleCssVariableRegex.test(e.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,number={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},alpha={...number,transform:e=>clamp$1(0,1,e)},scale={...number,default:1},sanitize=e=>Math.round(e*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(e){return e==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(e,t)=>n=>!!(typeof n=="string"&&singleColorRegex.test(n)&&n.startsWith(e)||t&&!isNullish(n)&&Object.prototype.hasOwnProperty.call(n,t)),splitColor=(e,t,n)=>o=>{if(typeof o!="string")return o;const[u,d,f,v]=o.match(floatRegex);return{[e]:parseFloat(u),[t]:parseFloat(d),[n]:parseFloat(f),alpha:v!==void 0?parseFloat(v):1}},clampRgbUnit=e=>clamp$1(0,255,e),rgbUnit={...number,transform:e=>Math.round(clampRgbUnit(e))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:o=1})=>"rgba("+rgbUnit.transform(e)+", "+rgbUnit.transform(t)+", "+rgbUnit.transform(n)+", "+sanitize(alpha.transform(o))+")"};function parseHex(e){let t="",n="",o="",u="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),o=e.substring(5,7),u=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),o=e.substring(3,4),u=e.substring(4,5),t+=t,n+=n,o+=o,u+=u),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(o,16),alpha:u?parseInt(u,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},createUnitType=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:e=>percent.parse(e)/100,transform:e=>percent.transform(e*100)},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:o=1})=>"hsla("+Math.round(e)+", "+percent.transform(sanitize(t))+", "+percent.transform(sanitize(n))+", "+sanitize(alpha.transform(o))+")"},color={test:e=>rgba.test(e)||hex.test(e)||hsla.test(e),parse:e=>rgba.test(e)?rgba.parse(e):hsla.test(e)?hsla.parse(e):hex.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?rgba.transform(e):hsla.transform(e),getAnimatableNone:e=>{const t=color.parse(e);return t.alpha=0,color.transform(t)}},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test$1(e){return isNaN(e)&&typeof e=="string"&&(e.match(floatRegex)?.length||0)+(e.match(colorRegex)?.length||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(e){const t=e.toString(),n=[],o={color:[],number:[],var:[]},u=[];let d=0;const v=t.replace(complexRegex,w=>(color.test(w)?(o.color.push(d),u.push(COLOR_TOKEN),n.push(color.parse(w))):w.startsWith(VAR_FUNCTION_TOKEN)?(o.var.push(d),u.push(VAR_TOKEN),n.push(w)):(o.number.push(d),u.push(NUMBER_TOKEN),n.push(parseFloat(w))),++d,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:n,split:v,indexes:o,types:u}}function parseComplexValue(e){return analyseComplexValue(e).values}function createTransformer(e){const{split:t,types:n}=analyseComplexValue(e),o=t.length;return u=>{let d="";for(let f=0;f<o;f++)if(d+=t[f],u[f]!==void 0){const v=n[f];v===NUMBER_TOKEN?d+=sanitize(u[f]):v===COLOR_TOKEN?d+=color.transform(u[f]):d+=u[f]}return d}}const convertNumbersToZero=e=>typeof e=="number"?0:color.test(e)?color.getAnimatableNone(e):e;function getAnimatableNone$1(e){const t=parseComplexValue(e);return createTransformer(e)(t.map(convertNumbersToZero))}const complex={test:test$1,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1};function hueToRgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function hslaToRgba({hue:e,saturation:t,lightness:n,alpha:o}){e/=360,t/=100,n/=100;let u=0,d=0,f=0;if(!t)u=d=f=n;else{const v=n<.5?n*(1+t):n+t-n*t,w=2*n-v;u=hueToRgb(w,v,e+1/3),d=hueToRgb(w,v,e),f=hueToRgb(w,v,e-1/3)}return{red:Math.round(u*255),green:Math.round(d*255),blue:Math.round(f*255),alpha:o}}function mixImmediate(e,t){return n=>n>0?t:e}const mixNumber$1=(e,t,n)=>e+(t-e)*n,mixLinearColor=(e,t,n)=>{const o=e*e,u=n*(t*t-o)+o;return u<0?0:Math.sqrt(u)},colorTypes=[hex,rgba,hsla],getColorType=e=>colorTypes.find(t=>t.test(e));function asRGBA(e){const t=getColorType(e);if(!t)return!1;let n=t.parse(e);return t===hsla&&(n=hslaToRgba(n)),n}const mixColor=(e,t)=>{const n=asRGBA(e),o=asRGBA(t);if(!n||!o)return mixImmediate(e,t);const u={...n};return d=>(u.red=mixLinearColor(n.red,o.red,d),u.green=mixLinearColor(n.green,o.green,d),u.blue=mixLinearColor(n.blue,o.blue,d),u.alpha=mixNumber$1(n.alpha,o.alpha,d),rgba.transform(u))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(e,t){return invisibleValues.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function mixNumber(e,t){return n=>mixNumber$1(e,t,n)}function getMixer(e){return typeof e=="number"?mixNumber:typeof e=="string"?isCSSVariableToken(e)?mixImmediate:color.test(e)?mixColor:mixComplex:Array.isArray(e)?mixArray:typeof e=="object"?color.test(e)?mixColor:mixObject:mixImmediate}function mixArray(e,t){const n=[...e],o=n.length,u=e.map((d,f)=>getMixer(d)(d,t[f]));return d=>{for(let f=0;f<o;f++)n[f]=u[f](d);return n}}function mixObject(e,t){const n={...e,...t},o={};for(const u in n)e[u]!==void 0&&t[u]!==void 0&&(o[u]=getMixer(e[u])(e[u],t[u]));return u=>{for(const d in o)n[d]=o[d](u);return n}}function matchOrder(e,t){const n=[],o={color:0,var:0,number:0};for(let u=0;u<t.values.length;u++){const d=t.types[u],f=e.indexes[d][o[d]],v=e.values[f]??0;n[u]=v,o[d]++}return n}const mixComplex=(e,t)=>{const n=complex.createTransformer(t),o=analyseComplexValue(e),u=analyseComplexValue(t);return o.indexes.var.length===u.indexes.var.length&&o.indexes.color.length===u.indexes.color.length&&o.indexes.number.length>=u.indexes.number.length?invisibleValues.has(e)&&!u.values.length||invisibleValues.has(t)&&!o.values.length?mixVisibility(e,t):pipe(mixArray(matchOrder(o,u),u.values),n):mixImmediate(e,t)};function mix(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?mixNumber$1(e,t,n):getMixer(e)(e,t)}const frameloopDriver=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>frame.update(t,n),stop:()=>cancelFrame(t),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generateLinearEasing=(e,t,n=10)=>{let o="";const u=Math.max(Math.round(t/n),2);for(let d=0;d<u;d++)o+=Math.round(e(d/(u-1))*1e4)/1e4+", ";return`linear(${o.substring(0,o.length-2)})`},maxGeneratorDuration=2e4;function calcGeneratorDuration(e){let t=0;const n=50;let o=e.next(t);for(;!o.done&&t<maxGeneratorDuration;)t+=n,o=e.next(t);return t>=maxGeneratorDuration?1/0:t}function createGeneratorEasing(e,t=100,n){const o=n({...e,keyframes:[0,t]}),u=Math.min(calcGeneratorDuration(o),maxGeneratorDuration);return{type:"keyframes",ease:d=>o.next(u*d).value/t,duration:millisecondsToSeconds(u)}}const velocitySampleDuration=5;function calcGeneratorVelocity(e,t,n){const o=Math.max(t-velocitySampleDuration,0);return velocityPerSecond(n-e(o),t-o)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:e=springDefaults.duration,bounce:t=springDefaults.bounce,velocity:n=springDefaults.velocity,mass:o=springDefaults.mass}){let u,d,f=1-t;f=clamp$1(springDefaults.minDamping,springDefaults.maxDamping,f),e=clamp$1(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(e)),f<1?(u=E=>{const C=E*f,_=C*e,D=C-n,O=calcAngularFreq(E,f),M=Math.exp(-_);return safeMin-D/O*M},d=E=>{const _=E*f*e,D=_*n+n,O=Math.pow(f,2)*Math.pow(E,2)*e,M=Math.exp(-_),N=calcAngularFreq(Math.pow(E,2),f);return(-u(E)+safeMin>0?-1:1)*((D-O)*M)/N}):(u=E=>{const C=Math.exp(-E*e),_=(E-n)*e+1;return-safeMin+C*_},d=E=>{const C=Math.exp(-E*e),_=(n-E)*(e*e);return C*_});const v=5/e,w=approximateRoot(u,d,v);if(e=secondsToMilliseconds(e),isNaN(w))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:e};{const E=Math.pow(w,2)*o;return{stiffness:E,damping:f*2*Math.sqrt(o*E),duration:e}}}const rootIterations=12;function approximateRoot(e,t,n){let o=n;for(let u=1;u<rootIterations;u++)o=o-e(o)/t(o);return o}function calcAngularFreq(e,t){return e*Math.sqrt(1-t*t)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(e,t){return t.some(n=>e[n]!==void 0)}function getSpringOptions(e){let t={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...e};if(!isSpringType(e,physicsKeys)&&isSpringType(e,durationKeys))if(e.visualDuration){const n=e.visualDuration,o=2*Math.PI/(n*1.2),u=o*o,d=2*clamp$1(.05,1,1-(e.bounce||0))*Math.sqrt(u);t={...t,mass:springDefaults.mass,stiffness:u,damping:d}}else{const n=findSpring(e);t={...t,...n,mass:springDefaults.mass},t.isResolvedFromDuration=!0}return t}function spring(e=springDefaults.visualDuration,t=springDefaults.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:o,restDelta:u}=n;const d=n.keyframes[0],f=n.keyframes[n.keyframes.length-1],v={done:!1,value:d},{stiffness:w,damping:E,mass:C,duration:_,velocity:D,isResolvedFromDuration:O}=getSpringOptions({...n,velocity:-millisecondsToSeconds(n.velocity||0)}),M=D||0,N=E/(2*Math.sqrt(w*C)),I=f-d,B=millisecondsToSeconds(Math.sqrt(w/C)),V=Math.abs(I)<5;o||(o=V?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),u||(u=V?springDefaults.restDelta.granular:springDefaults.restDelta.default);let j;if(N<1){const z=calcAngularFreq(B,N);j=$=>{const ee=Math.exp(-N*B*$);return f-ee*((M+N*B*I)/z*Math.sin(z*$)+I*Math.cos(z*$))}}else if(N===1)j=z=>f-Math.exp(-B*z)*(I+(M+B*I)*z);else{const z=B*Math.sqrt(N*N-1);j=$=>{const ee=Math.exp(-N*B*$),ie=Math.min(z*$,300);return f-ee*((M+N*B*I)*Math.sinh(ie)+z*I*Math.cosh(ie))/z}}const q={calculatedDuration:O&&_||null,next:z=>{const $=j(z);if(O)v.done=z>=_;else{let ee=z===0?M:0;N<1&&(ee=z===0?secondsToMilliseconds(M):calcGeneratorVelocity(j,z,$));const ie=Math.abs(ee)<=o,ae=Math.abs(f-$)<=u;v.done=ie&&ae}return v.value=v.done?f:$,v},toString:()=>{const z=Math.min(calcGeneratorDuration(q),maxGeneratorDuration),$=generateLinearEasing(ee=>q.next(z*ee).value,z,30);return z+"ms "+$},toTransition:()=>{}};return q}spring.applyToOptions=e=>{const t=createGeneratorEasing(e,100,spring);return e.ease=t.ease,e.duration=secondsToMilliseconds(t.duration),e.type="keyframes",e};function inertia({keyframes:e,velocity:t=0,power:n=.8,timeConstant:o=325,bounceDamping:u=10,bounceStiffness:d=500,modifyTarget:f,min:v,max:w,restDelta:E=.5,restSpeed:C}){const _=e[0],D={done:!1,value:_},O=ie=>v!==void 0&&ie<v||w!==void 0&&ie>w,M=ie=>v===void 0?w:w===void 0||Math.abs(v-ie)<Math.abs(w-ie)?v:w;let N=n*t;const I=_+N,B=f===void 0?I:f(I);B!==I&&(N=B-_);const V=ie=>-N*Math.exp(-ie/o),j=ie=>B+V(ie),q=ie=>{const ae=V(ie),pe=j(ie);D.done=Math.abs(ae)<=E,D.value=D.done?B:pe};let z,$;const ee=ie=>{O(D.value)&&(z=ie,$=spring({keyframes:[D.value,M(D.value)],velocity:calcGeneratorVelocity(j,ie,D.value),damping:u,stiffness:d,restDelta:E,restSpeed:C}))};return ee(0),{calculatedDuration:null,next:ie=>{let ae=!1;return!$&&z===void 0&&(ae=!0,q(ie),ee(ie)),z!==void 0&&ie>=z?$.next(ie-z):(!ae&&q(ie),D)}}}function createMixers(e,t,n){const o=[],u=n||MotionGlobalConfig.mix||mix,d=e.length-1;for(let f=0;f<d;f++){let v=u(e[f],e[f+1]);if(t){const w=Array.isArray(t)?t[f]||noop$1:t;v=pipe(w,v)}o.push(v)}return o}function interpolate(e,t,{clamp:n=!0,ease:o,mixer:u}={}){const d=e.length;if(invariant(d===t.length),d===1)return()=>t[0];if(d===2&&t[0]===t[1])return()=>t[1];const f=e[0]===e[1];e[0]>e[d-1]&&(e=[...e].reverse(),t=[...t].reverse());const v=createMixers(t,o,u),w=v.length,E=C=>{if(f&&C<e[0])return t[0];let _=0;if(w>1)for(;_<e.length-2&&!(C<e[_+1]);_++);const D=progress(e[_],e[_+1],C);return v[_](D)};return n?C=>E(clamp$1(e[0],e[d-1],C)):E}function fillOffset(e,t){const n=e[e.length-1];for(let o=1;o<=t;o++){const u=progress(0,t,o);e.push(mixNumber$1(n,1,u))}}function defaultOffset(e){const t=[0];return fillOffset(t,e.length-1),t}function convertOffsetToTimes(e,t){return e.map(n=>n*t)}function defaultEasing(e,t){return e.map(()=>t||easeInOut).splice(0,e.length-1)}function keyframes({duration:e=300,keyframes:t,times:n,ease:o="easeInOut"}){const u=isEasingArray(o)?o.map(easingDefinitionToFunction):easingDefinitionToFunction(o),d={done:!1,value:t[0]},f=convertOffsetToTimes(n&&n.length===t.length?n:defaultOffset(t),e),v=interpolate(f,t,{ease:Array.isArray(u)?u:defaultEasing(t,u)});return{calculatedDuration:e,next:w=>(d.value=v(w),d.done=w>=e,d)}}const isNotNull$1=e=>e!==null;function getFinalKeyframe$1(e,{repeat:t,repeatType:n="loop"},o,u=1){const d=e.filter(isNotNull$1),v=u<0||t&&n!=="loop"&&t%2===1?0:d.length-1;return!v||o===void 0?d[v]:o}const transitionTypeMap={decay:inertia,inertia,tween:keyframes,keyframes,spring};function replaceTransitionType(e){typeof e.type=="string"&&(e.type=transitionTypeMap[e.type])}class WithPromise{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const percentToProgress=e=>e/100;class JSAnimation extends WithPromise{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==time.now()&&this.tick(time.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;replaceTransitionType(t);const{type:n=keyframes,repeat:o=0,repeatDelay:u=0,repeatType:d,velocity:f=0}=t;let{keyframes:v}=t;const w=n||keyframes;w!==keyframes&&typeof v[0]!="number"&&(this.mixKeyframes=pipe(percentToProgress,mix(v[0],v[1])),v=[0,100]);const E=w({...t,keyframes:v});d==="mirror"&&(this.mirroredGenerator=w({...t,keyframes:[...v].reverse(),velocity:-f})),E.calculatedDuration===null&&(E.calculatedDuration=calcGeneratorDuration(E));const{calculatedDuration:C}=E;this.calculatedDuration=C,this.resolvedDuration=C+u,this.totalDuration=this.resolvedDuration*(o+1)-u,this.generator=E}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:o,totalDuration:u,mixKeyframes:d,mirroredGenerator:f,resolvedDuration:v,calculatedDuration:w}=this;if(this.startTime===null)return o.next(0);const{delay:E=0,keyframes:C,repeat:_,repeatType:D,repeatDelay:O,type:M,onUpdate:N,finalKeyframe:I}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-u/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const B=this.currentTime-E*(this.playbackSpeed>=0?1:-1),V=this.playbackSpeed>=0?B<0:B>u;this.currentTime=Math.max(B,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let j=this.currentTime,q=o;if(_){const ie=Math.min(this.currentTime,u)/v;let ae=Math.floor(ie),pe=ie%1;!pe&&ie>=1&&(pe=1),pe===1&&ae--,ae=Math.min(ae,_+1),!!(ae%2)&&(D==="reverse"?(pe=1-pe,O&&(pe-=O/v)):D==="mirror"&&(q=f)),j=clamp$1(0,1,pe)*v}const z=V?{done:!1,value:C[0]}:q.next(j);d&&(z.value=d(z.value));let{done:$}=z;!V&&w!==null&&($=this.playbackSpeed>=0?this.currentTime>=u:this.currentTime<=0);const ee=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&$);return ee&&M!==inertia&&(z.value=getFinalKeyframe$1(C,this.options,I,this.speed)),N&&N(z.value),ee&&this.finish(),z}then(t,n){return this.finished.then(t,n)}get duration(){return millisecondsToSeconds(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+millisecondsToSeconds(t)}get time(){return millisecondsToSeconds(this.currentTime)}set time(t){t=secondsToMilliseconds(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(time.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=frameloopDriver,startTime:n}=this.options;this.driver||(this.driver=t(u=>this.tick(u))),this.options.onPlay?.();const o=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=o):this.holdTime!==null?this.startTime=o-this.holdTime:this.startTime||(this.startTime=n??o),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(time.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function fillWildcards(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const radToDeg=e=>e*180/Math.PI,rotate=e=>{const t=radToDeg(Math.atan2(e[1],e[0]));return rebaseAngle(t)},matrix2dParsers={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate,rotateZ:rotate,skewX:e=>radToDeg(Math.atan(e[1])),skewY:e=>radToDeg(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},rebaseAngle=e=>(e=e%360,e<0&&(e+=360),e),rotateZ=rotate,scaleX=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),scaleY=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),matrix3dParsers={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX,scaleY,scale:e=>(scaleX(e)+scaleY(e))/2,rotateX:e=>rebaseAngle(radToDeg(Math.atan2(e[6],e[5]))),rotateY:e=>rebaseAngle(radToDeg(Math.atan2(-e[2],e[0]))),rotateZ,rotate:rotateZ,skewX:e=>radToDeg(Math.atan(e[4])),skewY:e=>radToDeg(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function defaultTransformValue(e){return e.includes("scale")?1:0}function parseValueFromTransform(e,t){if(!e||e==="none")return defaultTransformValue(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let o,u;if(n)o=matrix3dParsers,u=n;else{const v=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);o=matrix2dParsers,u=v}if(!u)return defaultTransformValue(t);const d=o[t],f=u[1].split(",").map(convertTransformToNumber);return typeof d=="function"?d(f):f[d]}const readTransformValue=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return parseValueFromTransform(n,t)};function convertTransformToNumber(e){return parseFloat(e.trim())}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),isNumOrPxType=e=>e===number||e===px,transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(e=>!transformKeys.has(e));function removeNonTranslationalTransform(e){const t=[];return nonTranslationalTransformKeys.forEach(n=>{const o=e.getValue(n);o!==void 0&&(t.push([n,o.get()]),o.set(n.startsWith("scale")?1:0))}),t}const positionalValues={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>parseValueFromTransform(t,"x"),y:(e,{transform:t})=>parseValueFromTransform(t,"y")};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1,isForced=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const e=Array.from(toResolve).filter(o=>o.needsMeasurement),t=new Set(e.map(o=>o.element)),n=new Map;t.forEach(o=>{const u=removeNonTranslationalTransform(o);u.length&&(n.set(o,u),o.render())}),e.forEach(o=>o.measureInitialState()),t.forEach(o=>{o.render();const u=n.get(o);u&&u.forEach(([d,f])=>{o.getValue(d)?.set(f)})}),e.forEach(o=>o.measureEndState()),e.forEach(o=>{o.suspendedScrollY!==void 0&&window.scrollTo(0,o.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(e=>e.complete(isForced)),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){isForced=!0,readAllKeyframes(),measureAllKeyframes(),isForced=!1}class KeyframeResolver{constructor(t,n,o,u,d,f=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=o,this.motionValue=u,this.element=d,this.isAsync=f}scheduleResolve(){this.state="scheduled",this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:o,motionValue:u}=this;if(t[0]===null){const d=u?.get(),f=t[t.length-1];if(d!==void 0)t[0]=d;else if(o&&n){const v=o.readValue(n,f);v!=null&&(t[0]=v)}t[0]===void 0&&(t[0]=f),u&&d===void 0&&u.set(t[0])}fillWildcards(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),toResolve.delete(this)}cancel(){this.state==="scheduled"&&(toResolve.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const isCSSVar=e=>e.startsWith("--");function setStyle(e,t,n){isCSSVar(t)?e.style.setProperty(t,n):e.style[t]=n}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0),supportsFlags={};function memoSupports(e,t){const n=memo(e);return()=>supportsFlags[t]??n()}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cubicBezierAsString=([e,t,n,o])=>`cubic-bezier(${e}, ${t}, ${n}, ${o})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(e,t){if(e)return typeof e=="function"?supportsLinearEasing()?generateLinearEasing(e,t):"ease-out":isBezierDefinition(e)?cubicBezierAsString(e):Array.isArray(e)?e.map(n=>mapEasingToNativeEasing(n,t)||supportedWaapiEasing.easeOut):supportedWaapiEasing[e]}function startWaapiAnimation(e,t,n,{delay:o=0,duration:u=300,repeat:d=0,repeatType:f="loop",ease:v="easeOut",times:w}={},E=void 0){const C={[t]:n};w&&(C.offset=w);const _=mapEasingToNativeEasing(v,u);Array.isArray(_)&&(C.easing=_);const D={delay:o,duration:u,easing:Array.isArray(_)?"linear":_,fill:"both",iterations:d+1,direction:f==="reverse"?"alternate":"normal"};return E&&(D.pseudoElement=E),e.animate(C,D)}function isGenerator(e){return typeof e=="function"&&"applyToOptions"in e}function applyGeneratorOptions({type:e,...t}){return isGenerator(e)&&supportsLinearEasing()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class NativeAnimation extends WithPromise{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:o,keyframes:u,pseudoElement:d,allowFlatten:f=!1,finalKeyframe:v,onComplete:w}=t;this.isPseudoElement=!!d,this.allowFlatten=f,this.options=t,invariant(typeof t.type!="string");const E=applyGeneratorOptions(t);this.animation=startWaapiAnimation(n,o,u,E,d),E.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!d){const C=getFinalKeyframe$1(u,this.options,v,this.speed);this.updateMotionValue?this.updateMotionValue(C):setStyle(n,o,C),this.animation.cancel()}w?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return millisecondsToSeconds(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+millisecondsToSeconds(t)}get time(){return millisecondsToSeconds(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=secondsToMilliseconds(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&supportsScrollTimeline()?(this.animation.timeline=t,noop$1):n(this)}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(e){return e in unsupportedEasingFunctions}function replaceStringEasing(e){typeof e.ease=="string"&&isUnsupportedEase(e.ease)&&(e.ease=unsupportedEasingFunctions[e.ease])}const sampleDelta=10;class NativeAnimationExtended extends NativeAnimation{constructor(t){replaceStringEasing(t),replaceTransitionType(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:o,onComplete:u,element:d,...f}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const v=new JSAnimation({...f,autoplay:!1}),w=secondsToMilliseconds(this.finishedTime??this.time);n.setWithVelocity(v.sample(w-sampleDelta).value,v.sample(w).value,sampleDelta),v.stop()}}const isAnimatable=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(complex.test(e)||e==="0")&&!e.startsWith("url("));function hasKeyframesChanged(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function canAnimate(e,t,n,o){const u=e[0];if(u===null)return!1;if(t==="display"||t==="visibility")return!0;const d=e[e.length-1],f=isAnimatable(u,t),v=isAnimatable(d,t);return!f||!v?!1:hasKeyframesChanged(e)||(n==="spring"||isGenerator(n))&&o}function makeAnimationInstant(e){e.duration=0,e.type="keyframes"}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]),supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function supportsBrowserAnimation(e){const{motionValue:t,name:n,repeatDelay:o,repeatType:u,damping:d,type:f}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:w,transformTemplate:E}=t.owner.getProps();return supportsWaapi()&&n&&acceleratedValues.has(n)&&(n!=="transform"||!E)&&!w&&!o&&u!=="mirror"&&d!==0&&f!=="inertia"}const MAX_RESOLVE_DELAY=40;class AsyncMotionValueAnimation extends WithPromise{constructor({autoplay:t=!0,delay:n=0,type:o="keyframes",repeat:u=0,repeatDelay:d=0,repeatType:f="loop",keyframes:v,name:w,motionValue:E,element:C,..._}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=time.now();const D={autoplay:t,delay:n,type:o,repeat:u,repeatDelay:d,repeatType:f,name:w,motionValue:E,element:C,..._},O=C?.KeyframeResolver||KeyframeResolver;this.keyframeResolver=new O(v,(M,N,I)=>this.onKeyframesResolved(M,N,D,!I),w,E,C),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,o,u){this.keyframeResolver=void 0;const{name:d,type:f,velocity:v,delay:w,isHandoff:E,onUpdate:C}=o;this.resolvedAt=time.now(),canAnimate(t,d,f,v)||((MotionGlobalConfig.instantAnimations||!w)&&C?.(getFinalKeyframe$1(t,o,n)),t[0]=t[t.length-1],makeAnimationInstant(o),o.repeat=0);const D={startTime:u?this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...o,keyframes:t},O=!E&&supportsBrowserAnimation(D)?new NativeAnimationExtended({...D,element:D.motionValue.owner.current}):new JSAnimation(D);O.finished.then(()=>this.notifyFinished()).catch(noop$1),this.pendingTimeline&&(this.stopTimeline=O.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=O}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),flushKeyframeResolvers()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(e){const t=splitCSSVariableRegex.exec(e);if(!t)return[,];const[,n,o,u]=t;return[`--${n??o}`,u]}function getVariableValue(e,t,n=1){const[o,u]=parseCSSVariable(e);if(!o)return;const d=window.getComputedStyle(t).getPropertyValue(o);if(d){const f=d.trim();return isNumericalString(f)?parseFloat(f):f}return isCSSVariableToken(u)?getVariableValue(u,t,n+1):u}function getValueTransition(e,t){return e?.[t]??e?.default??e}const positionalKeys=new Set(["width","height","top","left","right","bottom",...transformPropOrder]),auto={test:e=>e==="auto",parse:e=>e},testValueType=e=>t=>t.test(e),dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto],findDimensionValueType=e=>dimensionValueTypes.find(testValueType(e));function isNone(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||isZeroValueString(e):!0}const maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[o]=n.match(floatRegex)||[];if(!o)return e;const u=n.replace(o,"");let d=maxDefaults.has(t)?1:0;return o!==n&&(d*=100),t+"("+d+u+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:e=>{const t=e.match(functionRegex);return t?t.map(applyDefaultFilter).join(" "):e}},int={...number,transform:Math.round},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px},numberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,backgroundPositionX:px,backgroundPositionY:px,...transformValueTypes,zIndex:int,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter,WebkitFilter:filter},getDefaultValueType=e=>defaultValueTypes[e];function getAnimatableNone(e,t){let n=getDefaultValueType(e);return n!==filter&&(n=complex),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(e,t,n){let o=0,u;for(;o<e.length&&!u;){const d=e[o];typeof d=="string"&&!invalidTemplates.has(d)&&analyseComplexValue(d).values.length&&(u=e[o]),o++}if(u&&n)for(const d of t)e[d]=getAnimatableNone(n,u)}class DOMKeyframesResolver extends KeyframeResolver{constructor(t,n,o,u,d){super(t,n,o,u,d,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:o}=this;if(!n||!n.current)return;super.readKeyframes();for(let w=0;w<t.length;w++){let E=t[w];if(typeof E=="string"&&(E=E.trim(),isCSSVariableToken(E))){const C=getVariableValue(E,n.current);C!==void 0&&(t[w]=C),w===t.length-1&&(this.finalKeyframe=E)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(o)||t.length!==2)return;const[u,d]=t,f=findDimensionValueType(u),v=findDimensionValueType(d);if(f!==v)if(isNumOrPxType(f)&&isNumOrPxType(v))for(let w=0;w<t.length;w++){const E=t[w];typeof E=="string"&&(t[w]=parseFloat(E))}else positionalValues[o]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,o=[];for(let u=0;u<t.length;u++)(t[u]===null||isNone(t[u]))&&o.push(u);o.length&&makeNoneKeyframesAnimatable(t,o,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:o}=this;if(!t||!t.current)return;o==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[o](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const u=n[n.length-1];u!==void 0&&t.getValue(o,u).jump(u,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:o}=this;if(!t||!t.current)return;const u=t.getValue(n);u&&u.jump(this.measuredOrigin,!1);const d=o.length-1,f=o[d];o[d]=positionalValues[n](t.measureViewportBox(),window.getComputedStyle(t.current)),f!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=f),this.removedTransforms?.length&&this.removedTransforms.forEach(([v,w])=>{t.getValue(v).set(w)}),this.resolveNoneKeyframes()}}function resolveElements(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let o=document;const u=n?.[e]??o.querySelectorAll(e);return u?Array.from(u):[]}return Array.from(e)}const getValueAsType=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function isHTMLElement(e){return isObject$1(e)&&"offsetHeight"in e}const MAX_VELOCITY_DELTA=30,isFloat=e=>!isNaN(parseFloat(e));class MotionValue{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=o=>{const u=time.now();if(this.updatedAt!==u&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(o),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const d of this.dependents)d.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=time.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new SubscriptionManager);const o=this.events[t].add(n);return t==="change"?()=>{o(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:o}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,o){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-o}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(e,t){return new MotionValue(e,t)}const{schedule:microtask}=createRenderBatcher(queueMicrotask,!1),isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function setDragLock(e){return e==="x"||e==="y"?isDragging[e]?null:(isDragging[e]=!0,()=>{isDragging[e]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function setupGesture(e,t){const n=resolveElements(e),o=new AbortController,u={passive:!0,...t,signal:o.signal};return[n,u,()=>o.abort()]}function isValidHover(e){return!(e.pointerType==="touch"||isDragActive())}function hover(e,t,n={}){const[o,u,d]=setupGesture(e,n),f=v=>{if(!isValidHover(v))return;const{target:w}=v,E=t(w,v);if(typeof E!="function"||!w)return;const C=_=>{isValidHover(_)&&(E(_),w.removeEventListener("pointerleave",C))};w.addEventListener("pointerleave",C,u)};return o.forEach(v=>{v.addEventListener("pointerenter",f,u)}),d}const isNodeOrChild=(e,t)=>t?e===t?!0:isNodeOrChild(e,t.parentElement):!1,isPrimaryPointer=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,focusableElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(e){return focusableElements.has(e.tagName)||e.tabIndex!==-1}const isPressing=new WeakSet;function filterEvents(e){return t=>{t.key==="Enter"&&e(t)}}function firePointerEvent(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(e,t)=>{const n=e.currentTarget;if(!n)return;const o=filterEvents(()=>{if(isPressing.has(n))return;firePointerEvent(n,"down");const u=filterEvents(()=>{firePointerEvent(n,"up")}),d=()=>firePointerEvent(n,"cancel");n.addEventListener("keyup",u,t),n.addEventListener("blur",d,t)});n.addEventListener("keydown",o,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",o),t)};function isValidPressEvent(e){return isPrimaryPointer(e)&&!isDragActive()}function press(e,t,n={}){const[o,u,d]=setupGesture(e,n),f=v=>{const w=v.currentTarget;if(!isValidPressEvent(v))return;isPressing.add(w);const E=t(w,v),C=(O,M)=>{window.removeEventListener("pointerup",_),window.removeEventListener("pointercancel",D),isPressing.has(w)&&isPressing.delete(w),isValidPressEvent(O)&&typeof E=="function"&&E(O,{success:M})},_=O=>{C(O,w===window||w===document||n.useGlobalTarget||isNodeOrChild(w,O.target))},D=O=>{C(O,!1)};window.addEventListener("pointerup",_,u),window.addEventListener("pointercancel",D,u)};return o.forEach(v=>{(n.useGlobalTarget?window:v).addEventListener("pointerdown",f,u),isHTMLElement(v)&&(v.addEventListener("focus",E=>enableKeyboardPress(E,u)),!isElementKeyboardAccessible(v)&&!v.hasAttribute("tabindex")&&(v.tabIndex=0))}),d}function isSVGElement(e){return isObject$1(e)&&"ownerSVGElement"in e}function isSVGSVGElement(e){return isSVGElement(e)&&e.tagName==="svg"}const isMotionValue=e=>!!(e&&e.getVelocity),valueTypes=[...dimensionValueTypes,color,complex],findValueType=e=>valueTypes.find(testValueType(e)),MotionConfigContext=reactExports.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function usePresence(e=!0){const t=reactExports.useContext(PresenceContext);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:o,register:u}=t,d=reactExports.useId();reactExports.useEffect(()=>{if(e)return u(d)},[e]);const f=reactExports.useCallback(()=>e&&o&&o(d),[d,o,e]);return!n&&o?[!1,f]:[!0]}const LazyContext=reactExports.createContext({strict:!1}),featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const e in featureProps)featureDefinitions[e]={isEnabled:t=>featureProps[e].some(n=>!!t[n])};function loadFeatures(e){for(const t in e)featureDefinitions[t]={...featureDefinitions[t],...e[t]}}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||validMotionProps.has(e)}let shouldForward=e=>!isValidMotionProp(e);function loadExternalIsValidProp(e){typeof e=="function"&&(shouldForward=t=>t.startsWith("on")?!isValidMotionProp(t):e(t))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(e,t,n){const o={};for(const u in e)u==="values"&&typeof e.values=="object"||(shouldForward(u)||n===!0&&isValidMotionProp(u)||!t&&!isValidMotionProp(u)||e.draggable&&u.startsWith("onDrag"))&&(o[u]=e[u]);return o}const MotionContext=reactExports.createContext({});function isAnimationControls(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function isVariantLabel(e){return typeof e=="string"||Array.isArray(e)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(e){return isAnimationControls(e.animate)||variantProps.some(t=>isVariantLabel(e[t]))}function isVariantNode(e){return!!(isControllingVariants(e)||e.variants)}function getCurrentTreeVariants(e,t){if(isControllingVariants(e)){const{initial:n,animate:o}=e;return{initial:n===!1||isVariantLabel(n)?n:void 0,animate:isVariantLabel(o)?o:void 0}}return e.inherit!==!1?t:{}}function useCreateMotionContext(e){const{initial:t,animate:n}=getCurrentTreeVariants(e,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:t,animate:n}),[variantLabelsAsDependency(t),variantLabelsAsDependency(n)])}function variantLabelsAsDependency(e){return Array.isArray(e)?e.join(" "):e}const scaleCorrectors={};function addScaleCorrector(e){for(const t in e)scaleCorrectors[t]=e[t],isCSSVariableName(t)&&(scaleCorrectors[t].isCSSVariable=!0)}function isForcedMotionValue(e,{layout:t,layoutId:n}){return transformProps.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!scaleCorrectors[e]||e==="opacity")}const translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(e,t,n){let o="",u=!0;for(let d=0;d<numTransforms;d++){const f=transformPropOrder[d],v=e[f];if(v===void 0)continue;let w=!0;if(typeof v=="number"?w=v===(f.startsWith("scale")?1:0):w=parseFloat(v)===0,!w||n){const E=getValueAsType(v,numberValueTypes[f]);if(!w){u=!1;const C=translateAlias[f]||f;o+=`${C}(${E}) `}n&&(t[f]=E)}}return o=o.trim(),n?o=n(t,u?"":o):u&&(o="none"),o}function buildHTMLStyles(e,t,n){const{style:o,vars:u,transformOrigin:d}=e;let f=!1,v=!1;for(const w in t){const E=t[w];if(transformProps.has(w)){f=!0;continue}else if(isCSSVariableName(w)){u[w]=E;continue}else{const C=getValueAsType(E,numberValueTypes[w]);w.startsWith("origin")?(v=!0,d[w]=C):o[w]=C}}if(t.transform||(f||n?o.transform=buildTransform(t,e.transform,n):o.transform&&(o.transform="none")),v){const{originX:w="50%",originY:E="50%",originZ:C=0}=d;o.transformOrigin=`${w} ${E} ${C}`}}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function copyRawValuesOnly(e,t,n){for(const o in t)!isMotionValue(t[o])&&!isForcedMotionValue(o,n)&&(e[o]=t[o])}function useInitialMotionValues({transformTemplate:e},t){return reactExports.useMemo(()=>{const n=createHtmlRenderState();return buildHTMLStyles(n,t,e),Object.assign({},n.vars,n.style)},[t])}function useStyle(e,t){const n=e.style||{},o={};return copyRawValuesOnly(o,n,e),Object.assign(o,useInitialMotionValues(e,t)),o}function useHTMLProps(e,t){const n={},o=useStyle(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=o,n}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(e,t,n=1,o=0,u=!0){e.pathLength=1;const d=u?dashKeys:camelKeys;e[d.offset]=px.transform(-o);const f=px.transform(t),v=px.transform(n);e[d.array]=`${f} ${v}`}function buildSVGAttrs(e,{attrX:t,attrY:n,attrScale:o,pathLength:u,pathSpacing:d=1,pathOffset:f=0,...v},w,E,C){if(buildHTMLStyles(e,v,E),w){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:_,style:D}=e;_.transform&&(D.transform=_.transform,delete _.transform),(D.transform||_.transformOrigin)&&(D.transformOrigin=_.transformOrigin??"50% 50%",delete _.transformOrigin),D.transform&&(D.transformBox=C?.transformBox??"fill-box",delete _.transformBox),t!==void 0&&(_.x=t),n!==void 0&&(_.y=n),o!==void 0&&(_.scale=o),u!==void 0&&buildSVGPath(_,u,d,f,!1)}const createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),isSVGTag=e=>typeof e=="string"&&e.toLowerCase()==="svg";function useSVGProps(e,t,n,o){const u=reactExports.useMemo(()=>{const d=createSvgRenderState();return buildSVGAttrs(d,t,isSVGTag(o),e.transformTemplate,e.style),{...d.attrs,style:{...d.style}}},[t]);if(e.style){const d={};copyRawValuesOnly(d,e.style,e),u.style={...d,...u.style}}return u}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(e){return typeof e!="string"||e.includes("-")?!1:!!(lowercaseSVGElements.indexOf(e)>-1||/[A-Z]/u.test(e))}function useRender(e,t,n,{latestValues:o},u,d=!1){const v=(isSVGComponent(e)?useSVGProps:useHTMLProps)(t,o,u,e),w=filterProps(t,typeof e=="string",d),E=e!==reactExports.Fragment?{...w,...v,ref:n}:{},{children:C}=t,_=reactExports.useMemo(()=>isMotionValue(C)?C.get():C,[C]);return reactExports.createElement(e,{...E,children:_})}function getValueState(e){const t=[{},{}];return e?.values.forEach((n,o)=>{t[0][o]=n.get(),t[1][o]=n.getVelocity()}),t}function resolveVariantFromProps(e,t,n,o){if(typeof t=="function"){const[u,d]=getValueState(o);t=t(n!==void 0?n:e.custom,u,d)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[u,d]=getValueState(o);t=t(n!==void 0?n:e.custom,u,d)}return t}function resolveMotionValue(e){return isMotionValue(e)?e.get():e}function makeState({scrapeMotionValuesFromProps:e,createRenderState:t},n,o,u){return{latestValues:makeLatestValues(n,o,u,e),renderState:t()}}function makeLatestValues(e,t,n,o){const u={},d=o(e,{});for(const D in d)u[D]=resolveMotionValue(d[D]);let{initial:f,animate:v}=e;const w=isControllingVariants(e),E=isVariantNode(e);t&&E&&!w&&e.inherit!==!1&&(f===void 0&&(f=t.initial),v===void 0&&(v=t.animate));let C=n?n.initial===!1:!1;C=C||f===!1;const _=C?v:f;if(_&&typeof _!="boolean"&&!isAnimationControls(_)){const D=Array.isArray(_)?_:[_];for(let O=0;O<D.length;O++){const M=resolveVariantFromProps(e,D[O]);if(M){const{transitionEnd:N,transition:I,...B}=M;for(const V in B){let j=B[V];if(Array.isArray(j)){const q=C?j.length-1:0;j=j[q]}j!==null&&(u[V]=j)}for(const V in N)u[V]=N[V]}}}return u}const makeUseVisualState=e=>(t,n)=>{const o=reactExports.useContext(MotionContext),u=reactExports.useContext(PresenceContext),d=()=>makeState(e,t,o,u);return n?d():useConstant(d)};function scrapeMotionValuesFromProps$1(e,t,n){const{style:o}=e,u={};for(const d in o)(isMotionValue(o[d])||t.style&&isMotionValue(t.style[d])||isForcedMotionValue(d,e)||n?.getValue(d)?.liveStyle!==void 0)&&(u[d]=o[d]);return u}const useHTMLVisualState=makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState});function scrapeMotionValuesFromProps(e,t,n){const o=scrapeMotionValuesFromProps$1(e,t,n);for(const u in e)if(isMotionValue(e[u])||isMotionValue(t[u])){const d=transformPropOrder.indexOf(u)!==-1?"attr"+u.charAt(0).toUpperCase()+u.substring(1):u;o[d]=e[u]}return o}const useSVGVisualState=makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState}),motionComponentSymbol=Symbol.for("motionComponentSymbol");function isRefObject(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function useMotionRef(e,t,n){return reactExports.useCallback(o=>{o&&e.onMount&&e.onMount(o),t&&(o?t.mount(o):t.unmount()),n&&(typeof n=="function"?n(o):isRefObject(n)&&(n.current=o))},[t])}const camelToDash=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId),SwitchLayoutGroupContext=reactExports.createContext({});function useVisualElement(e,t,n,o,u){const{visualElement:d}=reactExports.useContext(MotionContext),f=reactExports.useContext(LazyContext),v=reactExports.useContext(PresenceContext),w=reactExports.useContext(MotionConfigContext).reducedMotion,E=reactExports.useRef(null);o=o||f.renderer,!E.current&&o&&(E.current=o(e,{visualState:t,parent:d,props:n,presenceContext:v,blockInitialAnimation:v?v.initial===!1:!1,reducedMotionConfig:w}));const C=E.current,_=reactExports.useContext(SwitchLayoutGroupContext);C&&!C.projection&&u&&(C.type==="html"||C.type==="svg")&&createProjectionNode$1(E.current,n,u,_);const D=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{C&&D.current&&C.update(n,v)});const O=n[optimizedAppearDataAttribute],M=reactExports.useRef(!!O&&!window.MotionHandoffIsComplete?.(O)&&window.MotionHasOptimisedAnimation?.(O));return useIsomorphicLayoutEffect$1(()=>{C&&(D.current=!0,window.MotionIsMounted=!0,C.updateFeatures(),C.scheduleRenderMicrotask(),M.current&&C.animationState&&C.animationState.animateChanges())}),reactExports.useEffect(()=>{C&&(!M.current&&C.animationState&&C.animationState.animateChanges(),M.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(O)}),M.current=!1),C.enteringChildren=void 0)}),C}function createProjectionNode$1(e,t,n,o){const{layoutId:u,layout:d,drag:f,dragConstraints:v,layoutScroll:w,layoutRoot:E,layoutCrossfade:C}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:getClosestProjectingNode(e.parent)),e.projection.setOptions({layoutId:u,layout:d,alwaysMeasureLayout:!!f||v&&isRefObject(v),visualElement:e,animationType:typeof d=="string"?d:"both",initialPromotionConfig:o,crossfade:C,layoutScroll:w,layoutRoot:E})}function getClosestProjectingNode(e){if(e)return e.options.allowProjection!==!1?e.projection:getClosestProjectingNode(e.parent)}function createMotionComponent(e,{forwardMotionProps:t=!1}={},n,o){n&&loadFeatures(n);const u=isSVGComponent(e)?useSVGVisualState:useHTMLVisualState;function d(v,w){let E;const C={...reactExports.useContext(MotionConfigContext),...v,layoutId:useLayoutId(v)},{isStatic:_}=C,D=useCreateMotionContext(v),O=u(v,_);if(!_&&isBrowser){useStrictMode();const M=getProjectionFunctionality(C);E=M.MeasureLayout,D.visualElement=useVisualElement(e,O,C,o,M.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:D,children:[E&&D.visualElement?jsxRuntimeExports.jsx(E,{visualElement:D.visualElement,...C}):null,useRender(e,v,useMotionRef(O,D.visualElement,w),O,_,t)]})}d.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const f=reactExports.forwardRef(d);return f[motionComponentSymbol]=e,f}function useLayoutId({layoutId:e}){const t=reactExports.useContext(LayoutGroupContext).id;return t&&e!==void 0?t+"-"+e:e}function useStrictMode(e,t){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(e){const{drag:t,layout:n}=featureDefinitions;if(!t&&!n)return{};const o={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?o.MeasureLayout:void 0,ProjectionNode:o.ProjectionNode}}function createMotionProxy(e,t){if(typeof Proxy>"u")return createMotionComponent;const n=new Map,o=(d,f)=>createMotionComponent(d,f,e,t),u=(d,f)=>o(d,f);return new Proxy(u,{get:(d,f)=>f==="create"?o:(n.has(f)||n.set(f,createMotionComponent(f,void 0,e,t)),n.get(f))})}function convertBoundingBoxToBox({top:e,left:t,right:n,bottom:o}){return{x:{min:t,max:n},y:{min:e,max:o}}}function convertBoxToBoundingBox({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function transformBoxPoints(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),o=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:o.y,right:o.x}}function isIdentityScale(e){return e===void 0||e===1}function hasScale({scale:e,scaleX:t,scaleY:n}){return!isIdentityScale(e)||!isIdentityScale(t)||!isIdentityScale(n)}function hasTransform(e){return hasScale(e)||has2DTranslate(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function has2DTranslate(e){return is2DTranslate(e.x)||is2DTranslate(e.y)}function is2DTranslate(e){return e&&e!=="0%"}function scalePoint(e,t,n){const o=e-n,u=t*o;return n+u}function applyPointDelta(e,t,n,o,u){return u!==void 0&&(e=scalePoint(e,u,o)),scalePoint(e,n,o)+t}function applyAxisDelta(e,t=0,n=1,o,u){e.min=applyPointDelta(e.min,t,n,o,u),e.max=applyPointDelta(e.max,t,n,o,u)}function applyBoxDelta(e,{x:t,y:n}){applyAxisDelta(e.x,t.translate,t.scale,t.originPoint),applyAxisDelta(e.y,n.translate,n.scale,n.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(e,t,n,o=!1){const u=n.length;if(!u)return;t.x=t.y=1;let d,f;for(let v=0;v<u;v++){d=n[v],f=d.projectionDelta;const{visualElement:w}=d.options;w&&w.props.style&&w.props.style.display==="contents"||(o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&transformBox(e,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),f&&(t.x*=f.x.scale,t.y*=f.y.scale,applyBoxDelta(e,f)),o&&hasTransform(d.latestValues)&&transformBox(e,d.latestValues))}t.x<TREE_SCALE_SNAP_MAX&&t.x>TREE_SCALE_SNAP_MIN&&(t.x=1),t.y<TREE_SCALE_SNAP_MAX&&t.y>TREE_SCALE_SNAP_MIN&&(t.y=1)}function translateAxis(e,t){e.min=e.min+t,e.max=e.max+t}function transformAxis(e,t,n,o,u=.5){const d=mixNumber$1(e.min,e.max,u);applyAxisDelta(e,t,n,d,o)}function transformBox(e,t){transformAxis(e.x,t.x,t.scaleX,t.scale,t.originX),transformAxis(e.y,t.y,t.scaleY,t.scale,t.originY)}function measureViewportBox(e,t){return convertBoundingBoxToBox(transformBoxPoints(e.getBoundingClientRect(),t))}function measurePageBox(e,t,n){const o=measureViewportBox(e,n),{scroll:u}=t;return u&&(translateAxis(o.x,u.offset.x),translateAxis(o.y,u.offset.y)),o}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()}),prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>prefersReducedMotion.current=e.matches;e.addEventListener("change",t),t()}else prefersReducedMotion.current=!1}const visualElementStore=new WeakMap;function updateMotionValuesFromProps(e,t,n){for(const o in t){const u=t[o],d=n[o];if(isMotionValue(u))e.addValue(o,u);else if(isMotionValue(d))e.addValue(o,motionValue(u,{owner:e}));else if(d!==u)if(e.hasValue(o)){const f=e.getValue(o);f.liveStyle===!0?f.jump(u):f.hasAnimated||f.set(u)}else{const f=e.getStaticValue(o);e.addValue(o,motionValue(f!==void 0?f:u,{owner:e}))}}for(const o in n)t[o]===void 0&&e.removeValue(o);return t}const propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(t,n,o){return{}}constructor({parent:t,props:n,presenceContext:o,reducedMotionConfig:u,blockInitialAnimation:d,visualState:f},v={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const D=time.now();this.renderScheduledAt<D&&(this.renderScheduledAt=D,frame.render(this.render,!1,!0))};const{latestValues:w,renderState:E}=f;this.latestValues=w,this.baseTarget={...w},this.initialValues=n.initial?{...w}:{},this.renderState=E,this.parent=t,this.props=n,this.presenceContext=o,this.depth=t?t.depth+1:0,this.reducedMotionConfig=u,this.options=v,this.blockInitialAnimation=!!d,this.isControllingVariants=isControllingVariants(n),this.isVariantNode=isVariantNode(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:C,..._}=this.scrapeMotionValuesFromProps(n,{},this);for(const D in _){const O=_[D];w[D]!==void 0&&isMotionValue(O)&&O.set(w[D])}}mount(t){this.current=t,visualElementStore.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,o)=>this.bindToMotionValue(o,n)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const o=transformProps.has(t);o&&this.onBindTransform&&this.onBindTransform();const u=n.on("change",f=>{this.latestValues[t]=f,this.props.onUpdate&&frame.preRender(this.notifyUpdate),o&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let d;window.MotionCheckAppearSync&&(d=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{u(),d&&d(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in featureDefinitions){const n=featureDefinitions[t];if(!n)continue;const{isEnabled:o,Feature:u}=n;if(!this.features[t]&&u&&o(this.props)&&(this.features[t]=new u(this)),this.features[t]){const d=this.features[t];d.isMounted?d.update():(d.mount(),d.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let o=0;o<propEventHandlers.length;o++){const u=propEventHandlers[o];this.propEventSubscriptions[u]&&(this.propEventSubscriptions[u](),delete this.propEventSubscriptions[u]);const d="on"+u,f=t[d];f&&(this.propEventSubscriptions[u]=this.on(u,f))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const o=this.values.get(t);n!==o&&(o&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let o=this.values.get(t);return o===void 0&&n!==void 0&&(o=motionValue(n===null?void 0:n,{owner:this}),this.addValue(t,o)),o}readValue(t,n){let o=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return o!=null&&(typeof o=="string"&&(isNumericalString(o)||isZeroValueString(o))?o=parseFloat(o):!findValueType(o)&&complex.test(n)&&(o=getAnimatableNone(t,n)),this.setBaseTarget(t,isMotionValue(o)?o.get():o)),isMotionValue(o)?o.get():o}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let o;if(typeof n=="string"||typeof n=="object"){const d=resolveVariantFromProps(this.props,n,this.presenceContext?.custom);d&&(o=d[t])}if(n&&o!==void 0)return o;const u=this.getBaseTargetFromProps(this.props,t);return u!==void 0&&!isMotionValue(u)?u:this.initialValues[t]!==void 0&&o===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new SubscriptionManager),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){microtask.render(this.render)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:o}){delete n[t],delete o[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;isMotionValue(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function renderHTML(e,{style:t,vars:n},o,u){const d=e.style;let f;for(f in t)d[f]=t[f];u?.applyProjectionStyles(d,o);for(f in n)d.setProperty(f,n[f])}function getComputedStyle$1(e){return window.getComputedStyle(e)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(t,n){if(transformProps.has(n))return this.projection?.isProjecting?defaultTransformValue(n):readTransformValue(t,n);{const o=getComputedStyle$1(t),u=(isCSSVariableName(n)?o.getPropertyValue(n):o[n])||0;return typeof u=="string"?u.trim():u}}measureInstanceViewportBox(t,{transformPagePoint:n}){return measureViewportBox(t,n)}build(t,n,o){buildHTMLStyles(t,n,o.transformTemplate)}scrapeMotionValuesFromProps(t,n,o){return scrapeMotionValuesFromProps$1(t,n,o)}}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(e,t,n,o){renderHTML(e,t,void 0,o);for(const u in t.attrs)e.setAttribute(camelCaseAttributes.has(u)?u:camelToDash(u),t.attrs[u])}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(transformProps.has(n)){const o=getDefaultValueType(n);return o&&o.default||0}return n=camelCaseAttributes.has(n)?n:camelToDash(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,o){return scrapeMotionValuesFromProps(t,n,o)}build(t,n,o){buildSVGAttrs(t,n,this.isSVGTag,o.transformTemplate,o.style)}renderInstance(t,n,o,u){renderSVG(t,n,o,u)}mount(t){this.isSVGTag=isSVGTag(t.tagName),super.mount(t)}}const createDomVisualElement=(e,t)=>isSVGComponent(e)?new SVGVisualElement(t):new HTMLVisualElement(t,{allowProjection:e!==reactExports.Fragment});function resolveVariant(e,t,n){const o=e.getProps();return resolveVariantFromProps(o,t,n!==void 0?n:o.custom,e)}const isKeyframesTarget=e=>Array.isArray(e);function setMotionValue(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,motionValue(n))}function resolveFinalValueInKeyframes(e){return isKeyframesTarget(e)?e[e.length-1]||0:e}function setTarget(e,t){const n=resolveVariant(e,t);let{transitionEnd:o={},transition:u={},...d}=n||{};d={...d,...o};for(const f in d){const v=resolveFinalValueInKeyframes(d[f]);setMotionValue(e,f,v)}}function isWillChangeMotionValue(e){return!!(isMotionValue(e)&&e.add)}function addValueToWillChange(e,t){const n=e.getValue("willChange");if(isWillChangeMotionValue(n))return n.add(t);if(!n&&MotionGlobalConfig.WillChange){const o=new MotionGlobalConfig.WillChange("auto");e.addValue("willChange",o),o.add(t)}}function getOptimisedAppearId(e){return e.props[optimizedAppearDataAttribute]}const isNotNull=e=>e!==null;function getFinalKeyframe(e,{repeat:t,repeatType:n="loop"},o){const u=e.filter(isNotNull),d=t&&n!=="loop"&&t%2===1?0:u.length-1;return u[d]}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(e,{keyframes:t})=>t.length>2?keyframesTransition:transformProps.has(e)?e.startsWith("scale")?criticallyDampedSpring(t[1]):underDampedSpring:ease;function isTransitionDefined({when:e,delay:t,delayChildren:n,staggerChildren:o,staggerDirection:u,repeat:d,repeatType:f,repeatDelay:v,from:w,elapsed:E,...C}){return!!Object.keys(C).length}const animateMotionValue=(e,t,n,o={},u,d)=>f=>{const v=getValueTransition(o,e)||{},w=v.delay||o.delay||0;let{elapsed:E=0}=o;E=E-secondsToMilliseconds(w);const C={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...v,delay:-E,onUpdate:D=>{t.set(D),v.onUpdate&&v.onUpdate(D)},onComplete:()=>{f(),v.onComplete&&v.onComplete()},name:e,motionValue:t,element:d?void 0:u};isTransitionDefined(v)||Object.assign(C,getDefaultTransition(e,C)),C.duration&&(C.duration=secondsToMilliseconds(C.duration)),C.repeatDelay&&(C.repeatDelay=secondsToMilliseconds(C.repeatDelay)),C.from!==void 0&&(C.keyframes[0]=C.from);let _=!1;if((C.type===!1||C.duration===0&&!C.repeatDelay)&&(makeAnimationInstant(C),C.delay===0&&(_=!0)),(MotionGlobalConfig.instantAnimations||MotionGlobalConfig.skipAnimations)&&(_=!0,makeAnimationInstant(C),C.delay=0),C.allowFlatten=!v.type&&!v.ease,_&&!d&&t.get()!==void 0){const D=getFinalKeyframe(C.keyframes,v);if(D!==void 0){frame.update(()=>{C.onUpdate(D),C.onComplete()});return}}return v.isSync?new JSAnimation(C):new AsyncMotionValueAnimation(C)};function shouldBlockAnimation({protectedKeys:e,needsAnimating:t},n){const o=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,o}function animateTarget(e,t,{delay:n=0,transitionOverride:o,type:u}={}){let{transition:d=e.getDefaultTransition(),transitionEnd:f,...v}=t;o&&(d=o);const w=[],E=u&&e.animationState&&e.animationState.getState()[u];for(const C in v){const _=e.getValue(C,e.latestValues[C]??null),D=v[C];if(D===void 0||E&&shouldBlockAnimation(E,C))continue;const O={delay:n,...getValueTransition(d||{},C)},M=_.get();if(M!==void 0&&!_.isAnimating&&!Array.isArray(D)&&D===M&&!O.velocity)continue;let N=!1;if(window.MotionHandoffAnimation){const B=getOptimisedAppearId(e);if(B){const V=window.MotionHandoffAnimation(B,C,frame);V!==null&&(O.startTime=V,N=!0)}}addValueToWillChange(e,C),_.start(animateMotionValue(C,_,D,e.shouldReduceMotion&&positionalKeys.has(C)?{type:!1}:O,e,N));const I=_.animation;I&&w.push(I)}return f&&Promise.all(w).then(()=>{frame.update(()=>{f&&setTarget(e,f)})}),w}function calcChildStagger(e,t,n,o=0,u=1){const d=Array.from(e).sort((E,C)=>E.sortNodePosition(C)).indexOf(t),f=e.size,v=(f-1)*o;return typeof n=="function"?n(d,f):u===1?d*o:v-d*o}function animateVariant(e,t,n={}){const o=resolveVariant(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:u=e.getDefaultTransition()||{}}=o||{};n.transitionOverride&&(u=n.transitionOverride);const d=o?()=>Promise.all(animateTarget(e,o,n)):()=>Promise.resolve(),f=e.variantChildren&&e.variantChildren.size?(w=0)=>{const{delayChildren:E=0,staggerChildren:C,staggerDirection:_}=u;return animateChildren(e,t,w,E,C,_,n)}:()=>Promise.resolve(),{when:v}=u;if(v){const[w,E]=v==="beforeChildren"?[d,f]:[f,d];return w().then(()=>E())}else return Promise.all([d(),f(n.delay)])}function animateChildren(e,t,n=0,o=0,u=0,d=1,f){const v=[];for(const w of e.variantChildren)w.notify("AnimationStart",t),v.push(animateVariant(w,t,{...f,delay:n+(typeof o=="function"?0:o)+calcChildStagger(e.variantChildren,w,o,u,d)}).then(()=>w.notify("AnimationComplete",t)));return Promise.all(v)}function animateVisualElement(e,t,n={}){e.notify("AnimationStart",t);let o;if(Array.isArray(t)){const u=t.map(d=>animateVariant(e,d,n));o=Promise.all(u)}else if(typeof t=="string")o=animateVariant(e,t,n);else{const u=typeof t=="function"?resolveVariant(e,t,n.custom):t;o=Promise.all(animateTarget(e,u,n))}return o.then(()=>{e.notify("AnimationComplete",t)})}function shallowCompare(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let o=0;o<n;o++)if(t[o]!==e[o])return!1;return!0}const numVariantProps=variantProps.length;function getVariantContext(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?getVariantContext(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<numVariantProps;n++){const o=variantProps[n],u=e.props[o];(isVariantLabel(u)||u===!1)&&(t[o]=u)}return t}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(e){return t=>Promise.all(t.map(({animation:n,options:o})=>animateVisualElement(e,n,o)))}function createAnimationState(e){let t=animateList(e),n=createState(),o=!0;const u=w=>(E,C)=>{const _=resolveVariant(e,C,w==="exit"?e.presenceContext?.custom:void 0);if(_){const{transition:D,transitionEnd:O,...M}=_;E={...E,...M,...O}}return E};function d(w){t=w(e)}function f(w){const{props:E}=e,C=getVariantContext(e.parent)||{},_=[],D=new Set;let O={},M=1/0;for(let I=0;I<numAnimationTypes;I++){const B=reversePriorityOrder[I],V=n[B],j=E[B]!==void 0?E[B]:C[B],q=isVariantLabel(j),z=B===w?V.isActive:null;z===!1&&(M=I);let $=j===C[B]&&j!==E[B]&&q;if($&&o&&e.manuallyAnimateOnMount&&($=!1),V.protectedKeys={...O},!V.isActive&&z===null||!j&&!V.prevProp||isAnimationControls(j)||typeof j=="boolean")continue;const ee=checkVariantsDidChange(V.prevProp,j);let ie=ee||B===w&&V.isActive&&!$&&q||I>M&&q,ae=!1;const pe=Array.isArray(j)?j:[j];let he=pe.reduce(u(B),{});z===!1&&(he={});const{prevResolvedValues:be={}}=V,xe={...be,...he},Ee=se=>{ie=!0,D.has(se)&&(ae=!0,D.delete(se)),V.needsAnimating[se]=!0;const J=e.getValue(se);J&&(J.liveStyle=!1)};for(const se in xe){const J=he[se],Q=be[se];if(O.hasOwnProperty(se))continue;let Z=!1;isKeyframesTarget(J)&&isKeyframesTarget(Q)?Z=!shallowCompare(J,Q):Z=J!==Q,Z?J!=null?Ee(se):D.add(se):J!==void 0&&D.has(se)?Ee(se):V.protectedKeys[se]=!0}V.prevProp=j,V.prevResolvedValues=he,V.isActive&&(O={...O,...he}),o&&e.blockInitialAnimation&&(ie=!1);const we=$&&ee;ie&&(!we||ae)&&_.push(...pe.map(se=>{const J={type:B};if(typeof se=="string"&&o&&!we&&e.manuallyAnimateOnMount&&e.parent){const{parent:Q}=e,Z=resolveVariant(Q,se);if(Q.enteringChildren&&Z){const{delayChildren:K}=Z.transition||{};J.delay=calcChildStagger(Q.enteringChildren,e,K)}}return{animation:se,options:J}}))}if(D.size){const I={};if(typeof E.initial!="boolean"){const B=resolveVariant(e,Array.isArray(E.initial)?E.initial[0]:E.initial);B&&B.transition&&(I.transition=B.transition)}D.forEach(B=>{const V=e.getBaseTarget(B),j=e.getValue(B);j&&(j.liveStyle=!0),I[B]=V??null}),_.push({animation:I})}let N=!!_.length;return o&&(E.initial===!1||E.initial===E.animate)&&!e.manuallyAnimateOnMount&&(N=!1),o=!1,N?t(_):Promise.resolve()}function v(w,E){if(n[w].isActive===E)return Promise.resolve();e.variantChildren?.forEach(_=>_.animationState?.setActive(w,E)),n[w].isActive=E;const C=f(w);for(const _ in n)n[_].protectedKeys={};return C}return{animateChanges:f,setActive:v,setAnimateFunction:d,getState:()=>n,reset:()=>{n=createState()}}}function checkVariantsDidChange(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!shallowCompare(t,e):!1}function createTypeState(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class Feature{constructor(t){this.isMounted=!1,this.node=t}update(){}}class AnimationFeature extends Feature{constructor(t){super(t),t.animationState||(t.animationState=createAnimationState(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();isAnimationControls(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===o)return;const u=this.node.animationState.setActive("exit",!t);n&&!t&&u.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}};function addDomEvent(e,t,n,o={passive:!0}){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n)}function extractEventInfo(e){return{point:{x:e.pageX,y:e.pageY}}}const addPointerInfo=e=>t=>isPrimaryPointer(t)&&e(t,extractEventInfo(t));function addPointerEvent(e,t,n,o){return addDomEvent(e,t,addPointerInfo(n),o)}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(e){return e.max-e.min}function isNear(e,t,n){return Math.abs(e-t)<=n}function calcAxisDelta(e,t,n,o=.5){e.origin=o,e.originPoint=mixNumber$1(t.min,t.max,e.origin),e.scale=calcLength(n)/calcLength(t),e.translate=mixNumber$1(n.min,n.max,e.origin)-e.originPoint,(e.scale>=SCALE_MIN&&e.scale<=SCALE_MAX||isNaN(e.scale))&&(e.scale=1),(e.translate>=TRANSLATE_MIN&&e.translate<=TRANSLATE_MAX||isNaN(e.translate))&&(e.translate=0)}function calcBoxDelta(e,t,n,o){calcAxisDelta(e.x,t.x,n.x,o?o.originX:void 0),calcAxisDelta(e.y,t.y,n.y,o?o.originY:void 0)}function calcRelativeAxis(e,t,n){e.min=n.min+t.min,e.max=e.min+calcLength(t)}function calcRelativeBox(e,t,n){calcRelativeAxis(e.x,t.x,n.x),calcRelativeAxis(e.y,t.y,n.y)}function calcRelativeAxisPosition(e,t,n){e.min=t.min-n.min,e.max=e.min+calcLength(t)}function calcRelativePosition(e,t,n){calcRelativeAxisPosition(e.x,t.x,n.x),calcRelativeAxisPosition(e.y,t.y,n.y)}function eachAxis(e){return[e("x"),e("y")]}const getContextWindow=({current:e})=>e?e.ownerDocument.defaultView:null,distance=(e,t)=>Math.abs(e-t);function distance2D(e,t){const n=distance(e.x,t.x),o=distance(e.y,t.y);return Math.sqrt(n**2+o**2)}class PanSession{constructor(t,n,{transformPagePoint:o,contextWindow:u=window,dragSnapToOrigin:d=!1,distanceThreshold:f=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const D=getPanInfo(this.lastMoveEventInfo,this.history),O=this.startEvent!==null,M=distance2D(D.offset,{x:0,y:0})>=this.distanceThreshold;if(!O&&!M)return;const{point:N}=D,{timestamp:I}=frameData;this.history.push({...N,timestamp:I});const{onStart:B,onMove:V}=this.handlers;O||(B&&B(this.lastMoveEvent,D),this.startEvent=this.lastMoveEvent),V&&V(this.lastMoveEvent,D)},this.handlePointerMove=(D,O)=>{this.lastMoveEvent=D,this.lastMoveEventInfo=transformPoint(O,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(D,O)=>{this.end();const{onEnd:M,onSessionEnd:N,resumeAnimation:I}=this.handlers;if(this.dragSnapToOrigin&&I&&I(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const B=getPanInfo(D.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(O,this.transformPagePoint),this.history);this.startEvent&&M&&M(D,B),N&&N(D,B)},!isPrimaryPointer(t))return;this.dragSnapToOrigin=d,this.handlers=n,this.transformPagePoint=o,this.distanceThreshold=f,this.contextWindow=u||window;const v=extractEventInfo(t),w=transformPoint(v,this.transformPagePoint),{point:E}=w,{timestamp:C}=frameData;this.history=[{...E,timestamp:C}];const{onSessionStart:_}=n;_&&_(t,getPanInfo(w,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(e,t){return t?{point:t(e.point)}:e}function subtractPoint(e,t){return{x:e.x-t.x,y:e.y-t.y}}function getPanInfo({point:e},t){return{point:e,delta:subtractPoint(e,lastDevicePoint(t)),offset:subtractPoint(e,startDevicePoint(t)),velocity:getVelocity(t,.1)}}function startDevicePoint(e){return e[0]}function lastDevicePoint(e){return e[e.length-1]}function getVelocity(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,o=null;const u=lastDevicePoint(e);for(;n>=0&&(o=e[n],!(u.timestamp-o.timestamp>secondsToMilliseconds(t)));)n--;if(!o)return{x:0,y:0};const d=millisecondsToSeconds(u.timestamp-o.timestamp);if(d===0)return{x:0,y:0};const f={x:(u.x-o.x)/d,y:(u.y-o.y)/d};return f.x===1/0&&(f.x=0),f.y===1/0&&(f.y=0),f}function applyConstraints(e,{min:t,max:n},o){return t!==void 0&&e<t?e=o?mixNumber$1(t,e,o.min):Math.max(e,t):n!==void 0&&e>n&&(e=o?mixNumber$1(n,e,o.max):Math.min(e,n)),e}function calcRelativeAxisConstraints(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function calcRelativeConstraints(e,{top:t,left:n,bottom:o,right:u}){return{x:calcRelativeAxisConstraints(e.x,n,u),y:calcRelativeAxisConstraints(e.y,t,o)}}function calcViewportAxisConstraints(e,t){let n=t.min-e.min,o=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,o]=[o,n]),{min:n,max:o}}function calcViewportConstraints(e,t){return{x:calcViewportAxisConstraints(e.x,t.x),y:calcViewportAxisConstraints(e.y,t.y)}}function calcOrigin(e,t){let n=.5;const o=calcLength(e),u=calcLength(t);return u>o?n=progress(t.min,t.max-o,e.min):o>u&&(n=progress(e.min,e.max-u,t.min)),clamp$1(0,1,n)}function rebaseAxisConstraints(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const defaultElastic=.35;function resolveDragElastic(e=defaultElastic){return e===!1?e=0:e===!0&&(e=defaultElastic),{x:resolveAxisElastic(e,"left","right"),y:resolveAxisElastic(e,"top","bottom")}}function resolveAxisElastic(e,t,n){return{min:resolvePointElastic(e,t),max:resolvePointElastic(e,n)}}function resolvePointElastic(e,t){return typeof e=="number"?e:e[t]||0}const elementDragControls=new WeakMap;class VisualElementDragControls{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:o}={}){const{presenceContext:u}=this.visualElement;if(u&&u.isPresent===!1)return;const d=_=>{const{dragSnapToOrigin:D}=this.getProps();D?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(extractEventInfo(_).point)},f=(_,D)=>{const{drag:O,dragPropagation:M,onDragStart:N}=this.getProps();if(O&&!M&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(O),!this.openDragLock))return;this.latestPointerEvent=_,this.latestPanInfo=D,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(B=>{let V=this.getAxisMotionValue(B).get()||0;if(percent.test(V)){const{projection:j}=this.visualElement;if(j&&j.layout){const q=j.layout.layoutBox[B];q&&(V=calcLength(q)*(parseFloat(V)/100))}}this.originPoint[B]=V}),N&&frame.postRender(()=>N(_,D)),addValueToWillChange(this.visualElement,"transform");const{animationState:I}=this.visualElement;I&&I.setActive("whileDrag",!0)},v=(_,D)=>{this.latestPointerEvent=_,this.latestPanInfo=D;const{dragPropagation:O,dragDirectionLock:M,onDirectionLock:N,onDrag:I}=this.getProps();if(!O&&!this.openDragLock)return;const{offset:B}=D;if(M&&this.currentDirection===null){this.currentDirection=getCurrentDirection(B),this.currentDirection!==null&&N&&N(this.currentDirection);return}this.updateAxis("x",D.point,B),this.updateAxis("y",D.point,B),this.visualElement.render(),I&&I(_,D)},w=(_,D)=>{this.latestPointerEvent=_,this.latestPanInfo=D,this.stop(_,D),this.latestPointerEvent=null,this.latestPanInfo=null},E=()=>eachAxis(_=>this.getAnimationState(_)==="paused"&&this.getAxisMotionValue(_).animation?.play()),{dragSnapToOrigin:C}=this.getProps();this.panSession=new PanSession(t,{onSessionStart:d,onStart:f,onMove:v,onSessionEnd:w,resumeAnimation:E},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:C,distanceThreshold:o,contextWindow:getContextWindow(this.visualElement)})}stop(t,n){const o=t||this.latestPointerEvent,u=n||this.latestPanInfo,d=this.isDragging;if(this.cancel(),!d||!u||!o)return;const{velocity:f}=u;this.startAnimation(f);const{onDragEnd:v}=this.getProps();v&&frame.postRender(()=>v(o,u))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:o}=this.getProps();!o&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,o){const{drag:u}=this.getProps();if(!o||!shouldDrag(t,u,this.currentDirection))return;const d=this.getAxisMotionValue(t);let f=this.originPoint[t]+o[t];this.constraints&&this.constraints[t]&&(f=applyConstraints(f,this.constraints[t],this.elastic[t])),d.set(f)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,u=this.constraints;t&&isRefObject(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&o?this.constraints=calcRelativeConstraints(o.layoutBox,t):this.constraints=!1,this.elastic=resolveDragElastic(n),u!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(d=>{this.constraints!==!1&&this.getAxisMotionValue(d)&&(this.constraints[d]=rebaseAxisConstraints(o.layoutBox[d],this.constraints[d]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!isRefObject(t))return!1;const o=t.current,{projection:u}=this.visualElement;if(!u||!u.layout)return!1;const d=measurePageBox(o,u.root,this.visualElement.getTransformPagePoint());let f=calcViewportConstraints(u.layout.layoutBox,d);if(n){const v=n(convertBoxToBoundingBox(f));this.hasMutatedConstraints=!!v,v&&(f=convertBoundingBoxToBox(v))}return f}startAnimation(t){const{drag:n,dragMomentum:o,dragElastic:u,dragTransition:d,dragSnapToOrigin:f,onDragTransitionEnd:v}=this.getProps(),w=this.constraints||{},E=eachAxis(C=>{if(!shouldDrag(C,n,this.currentDirection))return;let _=w&&w[C]||{};f&&(_={min:0,max:0});const D=u?200:1e6,O=u?40:1e7,M={type:"inertia",velocity:o?t[C]:0,bounceStiffness:D,bounceDamping:O,timeConstant:750,restDelta:1,restSpeed:10,...d,..._};return this.startAxisValueAnimation(C,M)});return Promise.all(E).then(v)}startAxisValueAnimation(t,n){const o=this.getAxisMotionValue(t);return addValueToWillChange(this.visualElement,t),o.start(animateMotionValue(t,o,0,n,this.visualElement,!1))}stopAnimation(){eachAxis(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){eachAxis(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,o=this.visualElement.getProps(),u=o[n];return u||this.visualElement.getValue(t,(o.initial?o.initial[t]:void 0)||0)}snapToCursor(t){eachAxis(n=>{const{drag:o}=this.getProps();if(!shouldDrag(n,o,this.currentDirection))return;const{projection:u}=this.visualElement,d=this.getAxisMotionValue(n);if(u&&u.layout){const{min:f,max:v}=u.layout.layoutBox[n];d.set(t[n]-mixNumber$1(f,v,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:o}=this.visualElement;if(!isRefObject(n)||!o||!this.constraints)return;this.stopAnimation();const u={x:0,y:0};eachAxis(f=>{const v=this.getAxisMotionValue(f);if(v&&this.constraints!==!1){const w=v.get();u[f]=calcOrigin({min:w,max:w},this.constraints[f])}});const{transformTemplate:d}=this.visualElement.getProps();this.visualElement.current.style.transform=d?d({},""):"none",o.root&&o.root.updateScroll(),o.updateLayout(),this.resolveConstraints(),eachAxis(f=>{if(!shouldDrag(f,t,null))return;const v=this.getAxisMotionValue(f),{min:w,max:E}=this.constraints[f];v.set(mixNumber$1(w,E,u[f]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const t=this.visualElement.current,n=addPointerEvent(t,"pointerdown",w=>{const{drag:E,dragListener:C=!0}=this.getProps();E&&C&&this.start(w)}),o=()=>{const{dragConstraints:w}=this.getProps();isRefObject(w)&&w.current&&(this.constraints=this.resolveRefConstraints())},{projection:u}=this.visualElement,d=u.addEventListener("measure",o);u&&!u.layout&&(u.root&&u.root.updateScroll(),u.updateLayout()),frame.read(o);const f=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),v=u.addEventListener("didUpdate",(({delta:w,hasLayoutChanged:E})=>{this.isDragging&&E&&(eachAxis(C=>{const _=this.getAxisMotionValue(C);_&&(this.originPoint[C]+=w[C].translate,_.set(_.get()+w[C].translate))}),this.visualElement.render())}));return()=>{f(),n(),d(),v&&v()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:o=!1,dragPropagation:u=!1,dragConstraints:d=!1,dragElastic:f=defaultElastic,dragMomentum:v=!0}=t;return{...t,drag:n,dragDirectionLock:o,dragPropagation:u,dragConstraints:d,dragElastic:f,dragMomentum:v}}}function shouldDrag(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function getCurrentDirection(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class DragGesture extends Feature{constructor(t){super(t),this.removeGroupControls=noop$1,this.removeListeners=noop$1,this.controls=new VisualElementDragControls(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop$1}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=e=>(t,n)=>{e&&frame.postRender(()=>e(t,n))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop$1}onPointerDown(t){this.session=new PanSession(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:o,onPanEnd:u}=this.node.getProps();return{onSessionStart:asyncHandler(t),onStart:asyncHandler(n),onMove:o,onEnd:(d,f)=>{delete this.session,u&&frame.postRender(()=>u(d,f))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const correctBorderRadius={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(px.test(e))e=parseFloat(e);else return e;const n=pixelsToPercent(e,t.target.x),o=pixelsToPercent(e,t.target.y);return`${n}% ${o}%`}},correctBoxShadow={correct:(e,{treeScale:t,projectionDelta:n})=>{const o=e,u=complex.parse(e);if(u.length>5)return o;const d=complex.createTransformer(e),f=typeof u[0]!="number"?1:0,v=n.x.scale*t.x,w=n.y.scale*t.y;u[0+f]/=v,u[1+f]/=w;const E=mixNumber$1(v,w,.5);return typeof u[2+f]=="number"&&(u[2+f]/=E),typeof u[3+f]=="number"&&(u[3+f]/=E),d(u)}};let hasTakenAnySnapshot=!1;class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:o,layoutId:u}=this.props,{projection:d}=t;addScaleCorrector(defaultScaleCorrectors),d&&(n.group&&n.group.add(d),o&&o.register&&u&&o.register(d),hasTakenAnySnapshot&&d.root.didUpdate(),d.addEventListener("animationComplete",()=>{this.safeToRemove()}),d.setOptions({...d.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:o,drag:u,isPresent:d}=this.props,{projection:f}=o;return f&&(f.isPresent=d,hasTakenAnySnapshot=!0,u||t.layoutDependency!==n||n===void 0||t.isPresent!==d?f.willUpdate():this.safeToRemove(),t.isPresent!==d&&(d?f.promote():f.relegate()||frame.postRender(()=>{const v=f.getStack();(!v||!v.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),microtask.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:o}=this.props,{projection:u}=t;hasTakenAnySnapshot=!0,u&&(u.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(u),o&&o.deregister&&o.deregister(u))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function MeasureLayout(e){const[t,n]=usePresence(),o=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...e,layoutGroup:o,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:t,safeToRemove:n})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow};function animateSingleValue(e,t,n){const o=isMotionValue(e)?e:motionValue(e);return o.start(animateMotionValue("",o,t,n)),o.animation}const compareByDepth=(e,t)=>e.depth-t.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(t){addUniqueItem(this.children,t),this.isDirty=!0}remove(t){removeItem(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(t)}}function delay(e,t){const n=time.now(),o=({timestamp:u})=>{const d=u-n;d>=t&&(cancelFrame(o),e(d-t))};return frame.setup(o,!0),()=>cancelFrame(o)}const borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=e=>typeof e=="string"?parseFloat(e):e,isPx=e=>typeof e=="number"||px.test(e);function mixValues(e,t,n,o,u,d){u?(e.opacity=mixNumber$1(0,n.opacity??1,easeCrossfadeIn(o)),e.opacityExit=mixNumber$1(t.opacity??1,0,easeCrossfadeOut(o))):d&&(e.opacity=mixNumber$1(t.opacity??1,n.opacity??1,o));for(let f=0;f<numBorders;f++){const v=`border${borders[f]}Radius`;let w=getRadius(t,v),E=getRadius(n,v);if(w===void 0&&E===void 0)continue;w||(w=0),E||(E=0),w===0||E===0||isPx(w)===isPx(E)?(e[v]=Math.max(mixNumber$1(asNumber(w),asNumber(E),o),0),(percent.test(E)||percent.test(w))&&(e[v]+="%")):e[v]=E}(t.rotate||n.rotate)&&(e.rotate=mixNumber$1(t.rotate||0,n.rotate||0,o))}function getRadius(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop$1);function compress(e,t,n){return o=>o<e?0:o>t?1:n(progress(e,t,o))}function copyAxisInto(e,t){e.min=t.min,e.max=t.max}function copyBoxInto(e,t){copyAxisInto(e.x,t.x),copyAxisInto(e.y,t.y)}function copyAxisDeltaInto(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function removePointDelta(e,t,n,o,u){return e-=t,e=scalePoint(e,1/n,o),u!==void 0&&(e=scalePoint(e,1/u,o)),e}function removeAxisDelta(e,t=0,n=1,o=.5,u,d=e,f=e){if(percent.test(t)&&(t=parseFloat(t),t=mixNumber$1(f.min,f.max,t/100)-f.min),typeof t!="number")return;let v=mixNumber$1(d.min,d.max,o);e===d&&(v-=t),e.min=removePointDelta(e.min,t,n,v,u),e.max=removePointDelta(e.max,t,n,v,u)}function removeAxisTransforms(e,t,[n,o,u],d,f){removeAxisDelta(e,t[n],t[o],t[u],t.scale,d,f)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(e,t,n,o){removeAxisTransforms(e.x,t,xKeys,n?n.x:void 0,o?o.x:void 0),removeAxisTransforms(e.y,t,yKeys,n?n.y:void 0,o?o.y:void 0)}function isAxisDeltaZero(e){return e.translate===0&&e.scale===1}function isDeltaZero(e){return isAxisDeltaZero(e.x)&&isAxisDeltaZero(e.y)}function axisEquals(e,t){return e.min===t.min&&e.max===t.max}function boxEquals(e,t){return axisEquals(e.x,t.x)&&axisEquals(e.y,t.y)}function axisEqualsRounded(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function boxEqualsRounded(e,t){return axisEqualsRounded(e.x,t.x)&&axisEqualsRounded(e.y,t.y)}function aspectRatio(e){return calcLength(e.x)/calcLength(e.y)}function axisDeltaEquals(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class NodeStack{constructor(){this.members=[]}add(t){addUniqueItem(this.members,t),t.scheduleRender()}remove(t){if(removeItem(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(u=>t===u);if(n===0)return!1;let o;for(let u=n;u>=0;u--){const d=this.members[u];if(d.isPresent!==!1){o=d;break}}return o?(this.promote(o),!0):!1}promote(t,n){const o=this.lead;if(t!==o&&(this.prevLead=o,this.lead=t,t.show(),o)){o.instance&&o.scheduleRender(),t.scheduleRender(),t.resumeFrom=o,n&&(t.resumeFrom.preserveOpacity=!0),o.snapshot&&(t.snapshot=o.snapshot,t.snapshot.latestValues=o.animationValues||o.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:u}=t.options;u===!1&&o.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:o}=t;n.onExitComplete&&n.onExitComplete(),o&&o.options.onExitComplete&&o.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(e,t,n){let o="";const u=e.x.translate/t.x,d=e.y.translate/t.y,f=n?.z||0;if((u||d||f)&&(o=`translate3d(${u}px, ${d}px, ${f}px) `),(t.x!==1||t.y!==1)&&(o+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:E,rotate:C,rotateX:_,rotateY:D,skewX:O,skewY:M}=n;E&&(o=`perspective(${E}px) ${o}`),C&&(o+=`rotate(${C}deg) `),_&&(o+=`rotateX(${_}deg) `),D&&(o+=`rotateY(${D}deg) `),O&&(o+=`skewX(${O}deg) `),M&&(o+=`skewY(${M}deg) `)}const v=e.x.scale*t.x,w=e.y.scale*t.y;return(v!==1||w!==1)&&(o+=`scale(${v}, ${w})`),o||"none"}const transformAxes=["","X","Y","Z"],animationTarget=1e3;let id=0;function resetDistortingTransform(e,t,n,o){const{latestValues:u}=t;u[e]&&(n[e]=u[e],t.setStaticValue(e,0),o&&(o[e]=0))}function cancelTreeOptimisedTransformAnimations(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=getOptimisedAppearId(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:u,layoutId:d}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",frame,!(u||d))}const{parent:o}=e;o&&!o.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(o)}function createProjectionNode({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:o,resetTransform:u}){return class{constructor(f={},v=t?.()){this.id=id++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=f,this.root=v?v.root||v:this,this.path=v?[...v.path,v]:[],this.parent=v,this.depth=v?v.depth+1:0;for(let w=0;w<this.path.length;w++)this.path[w].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(f,v){return this.eventHandlers.has(f)||this.eventHandlers.set(f,new SubscriptionManager),this.eventHandlers.get(f).add(v)}notifyListeners(f,...v){const w=this.eventHandlers.get(f);w&&w.notify(...v)}hasListeners(f){return this.eventHandlers.has(f)}mount(f){if(this.instance)return;this.isSVG=isSVGElement(f)&&!isSVGSVGElement(f),this.instance=f;const{layoutId:v,layout:w,visualElement:E}=this.options;if(E&&!E.current&&E.mount(f),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(w||v)&&(this.isLayoutDirty=!0),e){let C,_=0;const D=()=>this.root.updateBlockedByResize=!1;frame.read(()=>{_=window.innerWidth}),e(f,()=>{const O=window.innerWidth;O!==_&&(_=O,this.root.updateBlockedByResize=!0,C&&C(),C=delay(D,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation)))})}v&&this.root.registerSharedNode(v,this),this.options.animate!==!1&&E&&(v||w)&&this.addEventListener("didUpdate",({delta:C,hasLayoutChanged:_,hasRelativeLayoutChanged:D,layout:O})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const M=this.options.transition||E.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:N,onLayoutAnimationComplete:I}=E.getProps(),B=!this.targetLayout||!boxEqualsRounded(this.targetLayout,O),V=!_&&D;if(this.options.layoutRoot||this.resumeFrom||V||_&&(B||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const j={...getValueTransition(M,"layout"),onPlay:N,onComplete:I};(E.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j),this.setAnimationOrigin(C,V)}else _||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=O})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const f=this.getStack();f&&f.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:f}=this.options;return f&&f.getProps().transformTemplate}willUpdate(f=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let C=0;C<this.path.length;C++){const _=this.path[C];_.shouldResetTransform=!0,_.updateScroll("snapshot"),_.options.layoutRoot&&_.willUpdate(!1)}const{layoutId:v,layout:w}=this.options;if(v===void 0&&!w)return;const E=this.getTransformTemplate();this.prevTransformTemplateValue=E?E(this.latestValues,""):void 0,this.updateSnapshot(),f&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(clearIsLayoutDirty);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate)):this.nodes.forEach(clearIsLayoutDirty),this.clearAllSnapshots();const v=time.now();frameData.delta=clamp$1(0,1e3/60,v-frameData.timestamp),frameData.timestamp=v,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!calcLength(this.snapshot.measuredBox.x)&&!calcLength(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let w=0;w<this.path.length;w++)this.path[w].updateScroll();const f=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:v}=this.options;v&&v.notify("LayoutMeasure",this.layout.layoutBox,f?f.layoutBox:void 0)}updateScroll(f="measure"){let v=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===f&&(v=!1),v&&this.instance){const w=o(this.instance);this.scroll={animationId:this.root.animationId,phase:f,isRoot:w,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:w}}}resetTransform(){if(!u)return;const f=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,v=this.projectionDelta&&!isDeltaZero(this.projectionDelta),w=this.getTransformTemplate(),E=w?w(this.latestValues,""):void 0,C=E!==this.prevTransformTemplateValue;f&&this.instance&&(v||hasTransform(this.latestValues)||C)&&(u(this.instance,E),this.shouldResetTransform=!1,this.scheduleRender())}measure(f=!0){const v=this.measurePageBox();let w=this.removeElementScroll(v);return f&&(w=this.removeTransform(w)),roundBox(w),{animationId:this.root.animationId,measuredBox:v,layoutBox:w,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:f}=this.options;if(!f)return createBox();const v=f.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(checkNodeWasScrollRoot))){const{scroll:E}=this.root;E&&(translateAxis(v.x,E.offset.x),translateAxis(v.y,E.offset.y))}return v}removeElementScroll(f){const v=createBox();if(copyBoxInto(v,f),this.scroll?.wasRoot)return v;for(let w=0;w<this.path.length;w++){const E=this.path[w],{scroll:C,options:_}=E;E!==this.root&&C&&_.layoutScroll&&(C.wasRoot&&copyBoxInto(v,f),translateAxis(v.x,C.offset.x),translateAxis(v.y,C.offset.y))}return v}applyTransform(f,v=!1){const w=createBox();copyBoxInto(w,f);for(let E=0;E<this.path.length;E++){const C=this.path[E];!v&&C.options.layoutScroll&&C.scroll&&C!==C.root&&transformBox(w,{x:-C.scroll.offset.x,y:-C.scroll.offset.y}),hasTransform(C.latestValues)&&transformBox(w,C.latestValues)}return hasTransform(this.latestValues)&&transformBox(w,this.latestValues),w}removeTransform(f){const v=createBox();copyBoxInto(v,f);for(let w=0;w<this.path.length;w++){const E=this.path[w];if(!E.instance||!hasTransform(E.latestValues))continue;hasScale(E.latestValues)&&E.updateSnapshot();const C=createBox(),_=E.measurePageBox();copyBoxInto(C,_),removeBoxTransforms(v,E.latestValues,E.snapshot?E.snapshot.layoutBox:void 0,C)}return hasTransform(this.latestValues)&&removeBoxTransforms(v,this.latestValues),v}setTargetDelta(f){this.targetDelta=f,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(f){this.options={...this.options,...f,crossfade:f.crossfade!==void 0?f.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(f=!1){const v=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=v.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=v.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=v.isSharedProjectionDirty);const w=!!this.resumingFrom||this!==v;if(!(f||w&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:C,layoutId:_}=this.options;if(!(!this.layout||!(C||_))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const D=this.getClosestProjectingParent();D&&D.layout&&this.animationProgress!==1?(this.relativeParent=D,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,D.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const D=this.getClosestProjectingParent();D&&!!D.resumingFrom==!!this.resumingFrom&&!D.options.layoutScroll&&D.target&&this.animationProgress!==1?(this.relativeParent=D,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,D.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const f=this.getLead(),v=!!this.resumingFrom||this!==f;let w=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(w=!1),v&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(w=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(w=!1),w)return;const{layout:E,layoutId:C}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(E||C))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const _=this.treeScale.x,D=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,v),f.layout&&!f.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(f.target=f.layout.layoutBox,f.targetWithTransforms=createBox());const{target:O}=f;if(!O){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,O,this.latestValues),(this.treeScale.x!==_||this.treeScale.y!==D||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",O))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(f=!0){if(this.options.visualElement?.scheduleRender(),f){const v=this.getStack();v&&v.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(f,v=!1){const w=this.snapshot,E=w?w.latestValues:{},C={...this.latestValues},_=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!v;const D=createBox(),O=w?w.source:void 0,M=this.layout?this.layout.source:void 0,N=O!==M,I=this.getStack(),B=!I||I.members.length<=1,V=!!(N&&!B&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let j;this.mixTargetDelta=q=>{const z=q/1e3;mixAxisDelta(_.x,f.x,z),mixAxisDelta(_.y,f.y,z),this.setTargetDelta(_),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(D,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,D,z),j&&boxEquals(this.relativeTarget,j)&&(this.isProjectionDirty=!1),j||(j=createBox()),copyBoxInto(j,this.relativeTarget)),N&&(this.animationValues=C,mixValues(C,E,this.latestValues,z,V,B)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(f){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=motionValue(0)),this.currentAnimation=animateSingleValue(this.motionValue,[0,1e3],{...f,velocity:0,isSync:!0,onUpdate:v=>{this.mixTargetDelta(v),f.onUpdate&&f.onUpdate(v)},onStop:()=>{},onComplete:()=>{f.onComplete&&f.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const f=this.getStack();f&&f.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const f=this.getLead();let{targetWithTransforms:v,target:w,layout:E,latestValues:C}=f;if(!(!v||!w||!E)){if(this!==f&&this.layout&&E&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,E.layoutBox)){w=this.target||createBox();const _=calcLength(this.layout.layoutBox.x);w.x.min=f.target.x.min,w.x.max=w.x.min+_;const D=calcLength(this.layout.layoutBox.y);w.y.min=f.target.y.min,w.y.max=w.y.min+D}copyBoxInto(v,w),transformBox(v,C),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,v,C)}}registerSharedNode(f,v){this.sharedNodes.has(f)||this.sharedNodes.set(f,new NodeStack),this.sharedNodes.get(f).add(v);const E=v.options.initialPromotionConfig;v.promote({transition:E?E.transition:void 0,preserveFollowOpacity:E&&E.shouldPreserveFollowOpacity?E.shouldPreserveFollowOpacity(v):void 0})}isLead(){const f=this.getStack();return f?f.lead===this:!0}getLead(){const{layoutId:f}=this.options;return f?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:f}=this.options;return f?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:f}=this.options;if(f)return this.root.sharedNodes.get(f)}promote({needsReset:f,transition:v,preserveFollowOpacity:w}={}){const E=this.getStack();E&&E.promote(this,w),f&&(this.projectionDelta=void 0,this.needsReset=!0),v&&this.setOptions({transition:v})}relegate(){const f=this.getStack();return f?f.relegate(this):!1}resetSkewAndRotation(){const{visualElement:f}=this.options;if(!f)return;let v=!1;const{latestValues:w}=f;if((w.z||w.rotate||w.rotateX||w.rotateY||w.rotateZ||w.skewX||w.skewY)&&(v=!0),!v)return;const E={};w.z&&resetDistortingTransform("z",f,E,this.animationValues);for(let C=0;C<transformAxes.length;C++)resetDistortingTransform(`rotate${transformAxes[C]}`,f,E,this.animationValues),resetDistortingTransform(`skew${transformAxes[C]}`,f,E,this.animationValues);f.render();for(const C in E)f.setStaticValue(C,E[C]),this.animationValues&&(this.animationValues[C]=E[C]);f.scheduleRender()}applyProjectionStyles(f,v){if(!this.instance||this.isSVG)return;if(!this.isVisible){f.visibility="hidden";return}const w=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,f.visibility="",f.opacity="",f.pointerEvents=resolveMotionValue(v?.pointerEvents)||"",f.transform=w?w(this.latestValues,""):"none";return}const E=this.getLead();if(!this.projectionDelta||!this.layout||!E.target){this.options.layoutId&&(f.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,f.pointerEvents=resolveMotionValue(v?.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(f.transform=w?w({},""):"none",this.hasProjected=!1);return}f.visibility="";const C=E.animationValues||E.latestValues;this.applyTransformsToTarget();let _=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,C);w&&(_=w(C,_)),f.transform=_;const{x:D,y:O}=this.projectionDelta;f.transformOrigin=`${D.origin*100}% ${O.origin*100}% 0`,E.animationValues?f.opacity=E===this?C.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:C.opacityExit:f.opacity=E===this?C.opacity!==void 0?C.opacity:"":C.opacityExit!==void 0?C.opacityExit:0;for(const M in scaleCorrectors){if(C[M]===void 0)continue;const{correct:N,applyTo:I,isCSSVariable:B}=scaleCorrectors[M],V=_==="none"?C[M]:N(C[M],E);if(I){const j=I.length;for(let q=0;q<j;q++)f[I[q]]=V}else B?this.options.visualElement.renderState.vars[M]=V:f[M]=V}this.options.layoutId&&(f.pointerEvents=E===this?resolveMotionValue(v?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(f=>f.currentAnimation?.stop()),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(e){e.updateLayout()}function notifyLayoutUpdate(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:o}=e.layout,{animationType:u}=e.options,d=t.source!==e.layout.source;u==="size"?eachAxis(C=>{const _=d?t.measuredBox[C]:t.layoutBox[C],D=calcLength(_);_.min=n[C].min,_.max=_.min+D}):shouldAnimatePositionOnly(u,t.layoutBox,n)&&eachAxis(C=>{const _=d?t.measuredBox[C]:t.layoutBox[C],D=calcLength(n[C]);_.max=_.min+D,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[C].max=e.relativeTarget[C].min+D)});const f=createDelta();calcBoxDelta(f,n,t.layoutBox);const v=createDelta();d?calcBoxDelta(v,e.applyTransform(o,!0),t.measuredBox):calcBoxDelta(v,n,t.layoutBox);const w=!isDeltaZero(f);let E=!1;if(!e.resumeFrom){const C=e.getClosestProjectingParent();if(C&&!C.resumeFrom){const{snapshot:_,layout:D}=C;if(_&&D){const O=createBox();calcRelativePosition(O,t.layoutBox,_.layoutBox);const M=createBox();calcRelativePosition(M,n,D.layoutBox),boxEqualsRounded(O,M)||(E=!0),C.options.layoutRoot&&(e.relativeTarget=M,e.relativeTargetOrigin=O,e.relativeParent=C)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:v,layoutDelta:f,hasLayoutChanged:w,hasRelativeLayoutChanged:E})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function propagateDirtyNodes(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function cleanDirtyNodes(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function clearSnapshot(e){e.clearSnapshot()}function clearMeasurements(e){e.clearMeasurements()}function clearIsLayoutDirty(e){e.isLayoutDirty=!1}function resetTransformStyle(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function finishAnimation(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function resolveTargetDelta(e){e.resolveTargetDelta()}function calcProjection(e){e.calcProjection()}function resetSkewAndRotation(e){e.resetSkewAndRotation()}function removeLeadSnapshots(e){e.removeLeadSnapshot()}function mixAxisDelta(e,t,n){e.translate=mixNumber$1(t.translate,0,n),e.scale=mixNumber$1(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function mixAxis(e,t,n,o){e.min=mixNumber$1(t.min,n.min,o),e.max=mixNumber$1(t.max,n.max,o)}function mixBox(e,t,n,o){mixAxis(e.x,t.x,n.x,o),mixAxis(e.y,t.y,n.y,o)}function hasOpacityCrossfade(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop$1;function roundAxis(e){e.min=roundPoint(e.min),e.max=roundPoint(e.max)}function roundBox(e){roundAxis(e.x),roundAxis(e.y)}function shouldAnimatePositionOnly(e,t,n){return e==="position"||e==="preserve-aspect"&&!isNear(aspectRatio(t),aspectRatio(n),.2)}function checkNodeWasScrollRoot(e){return e!==e.root&&e.scroll?.wasRoot}const DocumentProjectionNode=createProjectionNode({attachResizeListener:(e,t)=>addDomEvent(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const e=new DocumentProjectionNode({});e.mount(window),e.setOptions({layoutScroll:!0}),rootProjectionNode.current=e}return rootProjectionNode.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(e,t,n){const{props:o}=e;e.animationState&&o.whileHover&&e.animationState.setActive("whileHover",n==="Start");const u="onHover"+n,d=o[u];d&&frame.postRender(()=>d(t,extractEventInfo(t)))}class HoverGesture extends Feature{mount(){const{current:t}=this.node;t&&(this.unmount=hover(t,(n,o)=>(handleHoverEvent(this.node,o,"Start"),u=>handleHoverEvent(this.node,u,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(e,t,n){const{props:o}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&o.whileTap&&e.animationState.setActive("whileTap",n==="Start");const u="onTap"+(n==="End"?"":n),d=o[u];d&&frame.postRender(()=>d(t,extractEventInfo(t)))}class PressGesture extends Feature{mount(){const{current:t}=this.node;t&&(this.unmount=press(t,(n,o)=>(handlePressEvent(this.node,o,"Start"),(u,{success:d})=>handlePressEvent(this.node,u,d?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=e=>{const t=observerCallbacks.get(e.target);t&&t(e)},fireAllObserverCallbacks=e=>{e.forEach(fireObserverCallback)};function initIntersectionObserver({root:e,...t}){const n=e||document;observers.has(n)||observers.set(n,{});const o=observers.get(n),u=JSON.stringify(t);return o[u]||(o[u]=new IntersectionObserver(fireAllObserverCallbacks,{root:e,...t})),o[u]}function observeIntersection(e,t,n){const o=initIntersectionObserver(t);return observerCallbacks.set(e,n),o.observe(e),()=>{observerCallbacks.delete(e),o.unobserve(e)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:o,amount:u="some",once:d}=t,f={root:n?n.current:void 0,rootMargin:o,threshold:typeof u=="number"?u:thresholdNames[u]},v=w=>{const{isIntersecting:E}=w;if(this.isInView===E||(this.isInView=E,d&&!E&&this.hasEnteredView))return;E&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",E);const{onViewportEnter:C,onViewportLeave:_}=this.node.getProps(),D=E?C:_;D&&D(w)};return observeIntersection(this.node.current,f,v)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(t,n))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},featureBundle={...animations,...gestureAnimations,...drag,...layout},motion=createMotionProxy(featureBundle,createDomVisualElement);function Dashboard({data:e}){const t=["#9CA3AF","#6B7280","#4B5563","#374151","#1F2937"];return jsxRuntimeExports.jsxs(motion.div,{className:"bg-white p-8 rounded-2xl shadow-md border border-gray-200",initial:{opacity:0,y:30},animate:{opacity:1,y:0},children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"Space Utilization Overview"}),e.length===0?jsxRuntimeExports.jsx("div",{className:"text-gray-500 text-center p-8 border border-dashed border-gray-300 rounded-xl",children:" No data yet. Please upload an Excel file to see visualization."}):jsxRuntimeExports.jsx("div",{className:"h-[350px]",children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(PieChart,{children:[jsxRuntimeExports.jsx(Pie,{data:e,dataKey:"value",nameKey:"name",outerRadius:120,label:!0,children:e.map((n,o)=>jsxRuntimeExports.jsx(Cell,{fill:t[o%t.length]},o))}),jsxRuntimeExports.jsx(Tooltip,{contentStyle:{backgroundColor:"#F9FAFB",border:"1px solid #D1D5DB",borderRadius:"0.5rem"}})]})})})]})}function bind(e,t){return function(){return e.apply(t,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,{iterator,toStringTag}=Symbol,kindOf=(e=>t=>{const n=toString.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=e=>(e=e.toLowerCase(),t=>kindOf(t)===e),typeOfTest=e=>t=>typeof t===e,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(e){return e!==null&&!isUndefined(e)&&e.constructor!==null&&!isUndefined(e.constructor)&&isFunction$1(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&isArrayBuffer(e.buffer),t}const isString=typeOfTest("string"),isFunction$1=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=e=>e!==null&&typeof e=="object",isBoolean=e=>e===!0||e===!1,isPlainObject=e=>{if(kindOf(e)!=="object")return!1;const t=getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(toStringTag in e)&&!(iterator in e)},isEmptyObject=e=>{if(!isObject(e)||isBuffer(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=e=>isObject(e)&&isFunction$1(e.pipe),isFormData=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||isFunction$1(e.append)&&((t=kindOf(e))==="formdata"||t==="object"&&isFunction$1(e.toString)&&e.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let o,u;if(typeof e!="object"&&(e=[e]),isArray(e))for(o=0,u=e.length;o<u;o++)t.call(null,e[o],o,e);else{if(isBuffer(e))return;const d=n?Object.getOwnPropertyNames(e):Object.keys(e),f=d.length;let v;for(o=0;o<f;o++)v=d[o],t.call(null,e[v],v,e)}}function findKey(e,t){if(isBuffer(e))return null;t=t.toLowerCase();const n=Object.keys(e);let o=n.length,u;for(;o-- >0;)if(u=n[o],t===u.toLowerCase())return u;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=e=>!isUndefined(e)&&e!==_global;function merge(){const{caseless:e,skipUndefined:t}=isContextDefined(this)&&this||{},n={},o=(u,d)=>{if(d==="__proto__"||d==="constructor"||d==="prototype")return;const f=e&&findKey(n,d)||d;isPlainObject(n[f])&&isPlainObject(u)?n[f]=merge(n[f],u):isPlainObject(u)?n[f]=merge({},u):isArray(u)?n[f]=u.slice():(!t||!isUndefined(u))&&(n[f]=u)};for(let u=0,d=arguments.length;u<d;u++)arguments[u]&&forEach(arguments[u],o);return n}const extend=(e,t,n,{allOwnKeys:o}={})=>(forEach(t,(u,d)=>{n&&isFunction$1(u)?Object.defineProperty(e,d,{value:bind(u,n),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,d,{value:u,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:o}),e),stripBOM=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),inherits=(e,t,n,o)=>{e.prototype=Object.create(t.prototype,o),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject=(e,t,n,o)=>{let u,d,f;const v={};if(t=t||{},e==null)return t;do{for(u=Object.getOwnPropertyNames(e),d=u.length;d-- >0;)f=u[d],(!o||o(f,e,t))&&!v[f]&&(t[f]=e[f],v[f]=!0);e=n!==!1&&getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},endsWith=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const o=e.indexOf(t,n);return o!==-1&&o===n},toArray=e=>{if(!e)return null;if(isArray(e))return e;let t=e.length;if(!isNumber(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},isTypedArray=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(e,t)=>{const o=(e&&e[iterator]).call(e);let u;for(;(u=o.next())&&!u.done;){const d=u.value;t.call(e,d[0],d[1])}},matchAll=(e,t)=>{let n;const o=[];for(;(n=e.exec(t))!==null;)o.push(n);return o},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,o,u){return o.toUpperCase()+u}),hasOwnProperty=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),o={};forEach(n,(u,d)=>{let f;(f=t(u,d,e))!==!1&&(o[d]=f||u)}),Object.defineProperties(e,o)},freezeMethods=e=>{reduceDescriptors(e,(t,n)=>{if(isFunction$1(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const o=e[n];if(isFunction$1(o)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},toObjectSet=(e,t)=>{const n={},o=u=>{u.forEach(d=>{n[d]=!0})};return isArray(e)?o(e):o(String(e).split(t)),n},noop=()=>{},toFiniteNumber=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function isSpecCompliantForm(e){return!!(e&&isFunction$1(e.append)&&e[toStringTag]==="FormData"&&e[iterator])}const toJSONObject=e=>{const t=new Array(10),n=(o,u)=>{if(isObject(o)){if(t.indexOf(o)>=0)return;if(isBuffer(o))return o;if(!("toJSON"in o)){t[u]=o;const d=isArray(o)?[]:{};return forEach(o,(f,v)=>{const w=n(f,u+1);!isUndefined(w)&&(d[v]=w)}),t[u]=void 0,d}}return o};return n(e,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=e=>e&&(isObject(e)||isFunction$1(e))&&isFunction$1(e.then)&&isFunction$1(e.catch),_setImmediate=((e,t)=>e?setImmediate:t?((n,o)=>(_global.addEventListener("message",({source:u,data:d})=>{u===_global&&d===n&&o.length&&o.shift()()},!1),u=>{o.push(u),_global.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",isFunction$1(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,isIterable=e=>e!=null&&isFunction$1(e[iterator]),utils$1={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject,isPlainObject,isEmptyObject,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction:isFunction$1,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap,isIterable};let AxiosError$1=class yp extends Error{static from(t,n,o,u,d,f){const v=new yp(t.message,n||t.code,o,u,d);return v.cause=t,v.name=t.name,f&&Object.assign(v,f),v}constructor(t,n,o,u,d){super(t),this.name="AxiosError",this.isAxiosError=!0,n&&(this.code=n),o&&(this.config=o),u&&(this.request=u),d&&(this.response=d,this.status=d.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}};AxiosError$1.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";AxiosError$1.ERR_BAD_OPTION="ERR_BAD_OPTION";AxiosError$1.ECONNABORTED="ECONNABORTED";AxiosError$1.ETIMEDOUT="ETIMEDOUT";AxiosError$1.ERR_NETWORK="ERR_NETWORK";AxiosError$1.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";AxiosError$1.ERR_DEPRECATED="ERR_DEPRECATED";AxiosError$1.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";AxiosError$1.ERR_BAD_REQUEST="ERR_BAD_REQUEST";AxiosError$1.ERR_CANCELED="ERR_CANCELED";AxiosError$1.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";AxiosError$1.ERR_INVALID_URL="ERR_INVALID_URL";const httpAdapter=null;function isVisitable(e){return utils$1.isPlainObject(e)||utils$1.isArray(e)}function removeBrackets(e){return utils$1.endsWith(e,"[]")?e.slice(0,-2):e}function renderKey(e,t,n){return e?e.concat(t).map(function(u,d){return u=removeBrackets(u),!n&&d?"["+u+"]":u}).join(n?".":""):t}function isFlatArray(e){return utils$1.isArray(e)&&!e.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(t){return/^is[A-Z]/.test(t)});function toFormData$1(e,t,n){if(!utils$1.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=utils$1.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,I){return!utils$1.isUndefined(I[N])});const o=n.metaTokens,u=n.visitor||C,d=n.dots,f=n.indexes,w=(n.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(t);if(!utils$1.isFunction(u))throw new TypeError("visitor must be a function");function E(M){if(M===null)return"";if(utils$1.isDate(M))return M.toISOString();if(utils$1.isBoolean(M))return M.toString();if(!w&&utils$1.isBlob(M))throw new AxiosError$1("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(M)||utils$1.isTypedArray(M)?w&&typeof Blob=="function"?new Blob([M]):Buffer.from(M):M}function C(M,N,I){let B=M;if(M&&!I&&typeof M=="object"){if(utils$1.endsWith(N,"{}"))N=o?N:N.slice(0,-2),M=JSON.stringify(M);else if(utils$1.isArray(M)&&isFlatArray(M)||(utils$1.isFileList(M)||utils$1.endsWith(N,"[]"))&&(B=utils$1.toArray(M)))return N=removeBrackets(N),B.forEach(function(j,q){!(utils$1.isUndefined(j)||j===null)&&t.append(f===!0?renderKey([N],q,d):f===null?N:N+"[]",E(j))}),!1}return isVisitable(M)?!0:(t.append(renderKey(I,N,d),E(M)),!1)}const _=[],D=Object.assign(predicates,{defaultVisitor:C,convertValue:E,isVisitable});function O(M,N){if(!utils$1.isUndefined(M)){if(_.indexOf(M)!==-1)throw Error("Circular reference detected in "+N.join("."));_.push(M),utils$1.forEach(M,function(B,V){(!(utils$1.isUndefined(B)||B===null)&&u.call(t,B,utils$1.isString(V)?V.trim():V,N,D))===!0&&O(B,N?N.concat(V):[V])}),_.pop()}}if(!utils$1.isObject(e))throw new TypeError("data must be an object");return O(e),t}function encode$1(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(o){return t[o]})}function AxiosURLSearchParams(e,t){this._pairs=[],e&&toFormData$1(e,this,t)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(t,n){this._pairs.push([t,n])};prototype.toString=function(t){const n=t?function(o){return t.call(this,o,encode$1)}:encode$1;return this._pairs.map(function(u){return n(u[0])+"="+n(u[1])},"").join("&")};function encode(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function buildURL(e,t,n){if(!t)return e;const o=n&&n.encode||encode,u=utils$1.isFunction(n)?{serialize:n}:n,d=u&&u.serialize;let f;if(d?f=d(t,u):f=utils$1.isURLSearchParams(t)?t.toString():new AxiosURLSearchParams(t,u).toString(o),f){const v=e.indexOf("#");v!==-1&&(e=e.slice(0,v)),e+=(e.indexOf("?")===-1?"?":"&")+f}return e}class InterceptorManager{constructor(){this.handlers=[]}use(t,n,o){return this.handlers.push({fulfilled:t,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){utils$1.forEach(this.handlers,function(o){o!==null&&t(o)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(e,t){return toFormData$1(e,new platform.classes.URLSearchParams,{visitor:function(n,o,u,d){return platform.isNode&&utils$1.isBuffer(n)?(this.append(o,n.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)},...t})}function parsePropPath(e){return utils$1.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function arrayToObject(e){const t={},n=Object.keys(e);let o;const u=n.length;let d;for(o=0;o<u;o++)d=n[o],t[d]=e[d];return t}function formDataToJSON(e){function t(n,o,u,d){let f=n[d++];if(f==="__proto__")return!0;const v=Number.isFinite(+f),w=d>=n.length;return f=!f&&utils$1.isArray(u)?u.length:f,w?(utils$1.hasOwnProp(u,f)?u[f]=[u[f],o]:u[f]=o,!v):((!u[f]||!utils$1.isObject(u[f]))&&(u[f]=[]),t(n,o,u[f],d)&&utils$1.isArray(u[f])&&(u[f]=arrayToObject(u[f])),!v)}if(utils$1.isFormData(e)&&utils$1.isFunction(e.entries)){const n={};return utils$1.forEachEntry(e,(o,u)=>{t(parsePropPath(o),u,n,0)}),n}return null}function stringifySafely(e,t,n){if(utils$1.isString(e))try{return(t||JSON.parse)(e),utils$1.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(n||JSON.stringify)(e)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const o=n.getContentType()||"",u=o.indexOf("application/json")>-1,d=utils$1.isObject(t);if(d&&utils$1.isHTMLForm(t)&&(t=new FormData(t)),utils$1.isFormData(t))return u?JSON.stringify(formDataToJSON(t)):t;if(utils$1.isArrayBuffer(t)||utils$1.isBuffer(t)||utils$1.isStream(t)||utils$1.isFile(t)||utils$1.isBlob(t)||utils$1.isReadableStream(t))return t;if(utils$1.isArrayBufferView(t))return t.buffer;if(utils$1.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let v;if(d){if(o.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(t,this.formSerializer).toString();if((v=utils$1.isFileList(t))||o.indexOf("multipart/form-data")>-1){const w=this.env&&this.env.FormData;return toFormData$1(v?{"files[]":t}:t,w&&new w,this.formSerializer)}}return d||u?(n.setContentType("application/json",!1),stringifySafely(t)):t}],transformResponse:[function(t){const n=this.transitional||defaults.transitional,o=n&&n.forcedJSONParsing,u=this.responseType==="json";if(utils$1.isResponse(t)||utils$1.isReadableStream(t))return t;if(t&&utils$1.isString(t)&&(o&&!this.responseType||u)){const f=!(n&&n.silentJSONParsing)&&u;try{return JSON.parse(t,this.parseReviver)}catch(v){if(f)throw v.name==="SyntaxError"?AxiosError$1.from(v,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):v}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],e=>{defaults.headers[e]={}});const ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=e=>{const t={};let n,o,u;return e&&e.split(`
`).forEach(function(f){u=f.indexOf(":"),n=f.substring(0,u).trim().toLowerCase(),o=f.substring(u+1).trim(),!(!n||t[n]&&ignoreDuplicateOf[n])&&(n==="set-cookie"?t[n]?t[n].push(o):t[n]=[o]:t[n]=t[n]?t[n]+", "+o:o)}),t},$internals=Symbol("internals");function normalizeHeader(e){return e&&String(e).trim().toLowerCase()}function normalizeValue(e){return e===!1||e==null?e:utils$1.isArray(e)?e.map(normalizeValue):String(e)}function parseTokens(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(e);)t[o[1]]=o[2];return t}const isValidHeaderName=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function matchHeaderValue(e,t,n,o,u){if(utils$1.isFunction(o))return o.call(this,t,n);if(u&&(t=n),!!utils$1.isString(t)){if(utils$1.isString(o))return t.indexOf(o)!==-1;if(utils$1.isRegExp(o))return o.test(t)}}function formatHeader(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,o)=>n.toUpperCase()+o)}function buildAccessors(e,t){const n=utils$1.toCamelCase(" "+t);["get","set","has"].forEach(o=>{Object.defineProperty(e,o+n,{value:function(u,d,f){return this[o].call(this,t,u,d,f)},configurable:!0})})}let AxiosHeaders$1=class{constructor(t){t&&this.set(t)}set(t,n,o){const u=this;function d(v,w,E){const C=normalizeHeader(w);if(!C)throw new Error("header name must be a non-empty string");const _=utils$1.findKey(u,C);(!_||u[_]===void 0||E===!0||E===void 0&&u[_]!==!1)&&(u[_||w]=normalizeValue(v))}const f=(v,w)=>utils$1.forEach(v,(E,C)=>d(E,C,w));if(utils$1.isPlainObject(t)||t instanceof this.constructor)f(t,n);else if(utils$1.isString(t)&&(t=t.trim())&&!isValidHeaderName(t))f(parseHeaders(t),n);else if(utils$1.isObject(t)&&utils$1.isIterable(t)){let v={},w,E;for(const C of t){if(!utils$1.isArray(C))throw TypeError("Object iterator must return a key-value pair");v[E=C[0]]=(w=v[E])?utils$1.isArray(w)?[...w,C[1]]:[w,C[1]]:C[1]}f(v,n)}else t!=null&&d(n,t,o);return this}get(t,n){if(t=normalizeHeader(t),t){const o=utils$1.findKey(this,t);if(o){const u=this[o];if(!n)return u;if(n===!0)return parseTokens(u);if(utils$1.isFunction(n))return n.call(this,u,o);if(utils$1.isRegExp(n))return n.exec(u);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=normalizeHeader(t),t){const o=utils$1.findKey(this,t);return!!(o&&this[o]!==void 0&&(!n||matchHeaderValue(this,this[o],o,n)))}return!1}delete(t,n){const o=this;let u=!1;function d(f){if(f=normalizeHeader(f),f){const v=utils$1.findKey(o,f);v&&(!n||matchHeaderValue(o,o[v],v,n))&&(delete o[v],u=!0)}}return utils$1.isArray(t)?t.forEach(d):d(t),u}clear(t){const n=Object.keys(this);let o=n.length,u=!1;for(;o--;){const d=n[o];(!t||matchHeaderValue(this,this[d],d,t,!0))&&(delete this[d],u=!0)}return u}normalize(t){const n=this,o={};return utils$1.forEach(this,(u,d)=>{const f=utils$1.findKey(o,d);if(f){n[f]=normalizeValue(u),delete n[d];return}const v=t?formatHeader(d):String(d).trim();v!==d&&delete n[d],n[v]=normalizeValue(u),o[v]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return utils$1.forEach(this,(o,u)=>{o!=null&&o!==!1&&(n[u]=t&&utils$1.isArray(o)?o.join(", "):o)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const o=new this(t);return n.forEach(u=>o.set(u)),o}static accessor(t){const o=(this[$internals]=this[$internals]={accessors:{}}).accessors,u=this.prototype;function d(f){const v=normalizeHeader(f);o[v]||(buildAccessors(u,f),o[v]=!0)}return utils$1.isArray(t)?t.forEach(d):d(t),this}};AxiosHeaders$1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders$1.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(o){this[n]=o}}});utils$1.freezeMethods(AxiosHeaders$1);function transformData(e,t){const n=this||defaults,o=t||n,u=AxiosHeaders$1.from(o.headers);let d=o.data;return utils$1.forEach(e,function(v){d=v.call(n,d,u.normalize(),t?t.status:void 0)}),u.normalize(),d}function isCancel$1(e){return!!(e&&e.__CANCEL__)}let CanceledError$1=class extends AxiosError$1{constructor(t,n,o){super(t??"canceled",AxiosError$1.ERR_CANCELED,n,o),this.name="CanceledError",this.__CANCEL__=!0}};function settle(e,t,n){const o=n.config.validateStatus;!n.status||!o||o(n.status)?e(n):t(new AxiosError$1("Request failed with status code "+n.status,[AxiosError$1.ERR_BAD_REQUEST,AxiosError$1.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function parseProtocol(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function speedometer(e,t){e=e||10;const n=new Array(e),o=new Array(e);let u=0,d=0,f;return t=t!==void 0?t:1e3,function(w){const E=Date.now(),C=o[d];f||(f=E),n[u]=w,o[u]=E;let _=d,D=0;for(;_!==u;)D+=n[_++],_=_%e;if(u=(u+1)%e,u===d&&(d=(d+1)%e),E-f<t)return;const O=C&&E-C;return O?Math.round(D*1e3/O):void 0}}function throttle(e,t){let n=0,o=1e3/t,u,d;const f=(E,C=Date.now())=>{n=C,u=null,d&&(clearTimeout(d),d=null),e(...E)};return[(...E)=>{const C=Date.now(),_=C-n;_>=o?f(E,C):(u=E,d||(d=setTimeout(()=>{d=null,f(u)},o-_)))},()=>u&&f(u)]}const progressEventReducer=(e,t,n=3)=>{let o=0;const u=speedometer(50,250);return throttle(d=>{const f=d.loaded,v=d.lengthComputable?d.total:void 0,w=f-o,E=u(w),C=f<=v;o=f;const _={loaded:f,total:v,progress:v?f/v:void 0,bytes:w,rate:E||void 0,estimated:E&&v&&C?(v-f)/E:void 0,event:d,lengthComputable:v!=null,[t?"download":"upload"]:!0};e(_)},n)},progressEventDecorator=(e,t)=>{const n=e!=null;return[o=>t[0]({lengthComputable:n,total:e,loaded:o}),t[1]]},asyncDecorator=e=>(...t)=>utils$1.asap(()=>e(...t)),isURLSameOrigin=platform.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,platform.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(e,t,n,o,u,d,f){if(typeof document>"u")return;const v=[`${e}=${encodeURIComponent(t)}`];utils$1.isNumber(n)&&v.push(`expires=${new Date(n).toUTCString()}`),utils$1.isString(o)&&v.push(`path=${o}`),utils$1.isString(u)&&v.push(`domain=${u}`),d===!0&&v.push("secure"),utils$1.isString(f)&&v.push(`SameSite=${f}`),document.cookie=v.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(e){return typeof e!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function combineURLs(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function buildFullPath(e,t,n){let o=!isAbsoluteURL(t);return e&&(o||n==!1)?combineURLs(e,t):t}const headersToObject=e=>e instanceof AxiosHeaders$1?{...e}:e;function mergeConfig$1(e,t){t=t||{};const n={};function o(E,C,_,D){return utils$1.isPlainObject(E)&&utils$1.isPlainObject(C)?utils$1.merge.call({caseless:D},E,C):utils$1.isPlainObject(C)?utils$1.merge({},C):utils$1.isArray(C)?C.slice():C}function u(E,C,_,D){if(utils$1.isUndefined(C)){if(!utils$1.isUndefined(E))return o(void 0,E,_,D)}else return o(E,C,_,D)}function d(E,C){if(!utils$1.isUndefined(C))return o(void 0,C)}function f(E,C){if(utils$1.isUndefined(C)){if(!utils$1.isUndefined(E))return o(void 0,E)}else return o(void 0,C)}function v(E,C,_){if(_ in t)return o(E,C);if(_ in e)return o(void 0,E)}const w={url:d,method:d,data:d,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:v,headers:(E,C,_)=>u(headersToObject(E),headersToObject(C),_,!0)};return utils$1.forEach(Object.keys({...e,...t}),function(C){if(C==="__proto__"||C==="constructor"||C==="prototype")return;const _=utils$1.hasOwnProp(w,C)?w[C]:u,D=_(e[C],t[C],C);utils$1.isUndefined(D)&&_!==v||(n[C]=D)}),n}const resolveConfig=e=>{const t=mergeConfig$1({},e);let{data:n,withXSRFToken:o,xsrfHeaderName:u,xsrfCookieName:d,headers:f,auth:v}=t;if(t.headers=f=AxiosHeaders$1.from(f),t.url=buildURL(buildFullPath(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),v&&f.set("Authorization","Basic "+btoa((v.username||"")+":"+(v.password?unescape(encodeURIComponent(v.password)):""))),utils$1.isFormData(n)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if(utils$1.isFunction(n.getHeaders)){const w=n.getHeaders(),E=["content-type","content-length"];Object.entries(w).forEach(([C,_])=>{E.includes(C.toLowerCase())&&f.set(C,_)})}}if(platform.hasStandardBrowserEnv&&(o&&utils$1.isFunction(o)&&(o=o(t)),o||o!==!1&&isURLSameOrigin(t.url))){const w=u&&d&&cookies.read(d);w&&f.set(u,w)}return t},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(e){return new Promise(function(n,o){const u=resolveConfig(e);let d=u.data;const f=AxiosHeaders$1.from(u.headers).normalize();let{responseType:v,onUploadProgress:w,onDownloadProgress:E}=u,C,_,D,O,M;function N(){O&&O(),M&&M(),u.cancelToken&&u.cancelToken.unsubscribe(C),u.signal&&u.signal.removeEventListener("abort",C)}let I=new XMLHttpRequest;I.open(u.method.toUpperCase(),u.url,!0),I.timeout=u.timeout;function B(){if(!I)return;const j=AxiosHeaders$1.from("getAllResponseHeaders"in I&&I.getAllResponseHeaders()),z={data:!v||v==="text"||v==="json"?I.responseText:I.response,status:I.status,statusText:I.statusText,headers:j,config:e,request:I};settle(function(ee){n(ee),N()},function(ee){o(ee),N()},z),I=null}"onloadend"in I?I.onloadend=B:I.onreadystatechange=function(){!I||I.readyState!==4||I.status===0&&!(I.responseURL&&I.responseURL.indexOf("file:")===0)||setTimeout(B)},I.onabort=function(){I&&(o(new AxiosError$1("Request aborted",AxiosError$1.ECONNABORTED,e,I)),I=null)},I.onerror=function(q){const z=q&&q.message?q.message:"Network Error",$=new AxiosError$1(z,AxiosError$1.ERR_NETWORK,e,I);$.event=q||null,o($),I=null},I.ontimeout=function(){let q=u.timeout?"timeout of "+u.timeout+"ms exceeded":"timeout exceeded";const z=u.transitional||transitionalDefaults;u.timeoutErrorMessage&&(q=u.timeoutErrorMessage),o(new AxiosError$1(q,z.clarifyTimeoutError?AxiosError$1.ETIMEDOUT:AxiosError$1.ECONNABORTED,e,I)),I=null},d===void 0&&f.setContentType(null),"setRequestHeader"in I&&utils$1.forEach(f.toJSON(),function(q,z){I.setRequestHeader(z,q)}),utils$1.isUndefined(u.withCredentials)||(I.withCredentials=!!u.withCredentials),v&&v!=="json"&&(I.responseType=u.responseType),E&&([D,M]=progressEventReducer(E,!0),I.addEventListener("progress",D)),w&&I.upload&&([_,O]=progressEventReducer(w),I.upload.addEventListener("progress",_),I.upload.addEventListener("loadend",O)),(u.cancelToken||u.signal)&&(C=j=>{I&&(o(!j||j.type?new CanceledError$1(null,e,I):j),I.abort(),I=null)},u.cancelToken&&u.cancelToken.subscribe(C),u.signal&&(u.signal.aborted?C():u.signal.addEventListener("abort",C)));const V=parseProtocol(u.url);if(V&&platform.protocols.indexOf(V)===-1){o(new AxiosError$1("Unsupported protocol "+V+":",AxiosError$1.ERR_BAD_REQUEST,e));return}I.send(d||null)})},composeSignals=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let o=new AbortController,u;const d=function(E){if(!u){u=!0,v();const C=E instanceof Error?E:this.reason;o.abort(C instanceof AxiosError$1?C:new CanceledError$1(C instanceof Error?C.message:C))}};let f=t&&setTimeout(()=>{f=null,d(new AxiosError$1(`timeout of ${t}ms exceeded`,AxiosError$1.ETIMEDOUT))},t);const v=()=>{e&&(f&&clearTimeout(f),f=null,e.forEach(E=>{E.unsubscribe?E.unsubscribe(d):E.removeEventListener("abort",d)}),e=null)};e.forEach(E=>E.addEventListener("abort",d));const{signal:w}=o;return w.unsubscribe=()=>utils$1.asap(v),w}},streamChunk=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let o=0,u;for(;o<n;)u=o+t,yield e.slice(o,u),o=u},readBytes=async function*(e,t){for await(const n of readStream(e))yield*streamChunk(n,t)},readStream=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:o}=await t.read();if(n)break;yield o}}finally{await t.cancel()}},trackStream=(e,t,n,o)=>{const u=readBytes(e,t);let d=0,f,v=w=>{f||(f=!0,o&&o(w))};return new ReadableStream({async pull(w){try{const{done:E,value:C}=await u.next();if(E){v(),w.close();return}let _=C.byteLength;if(n){let D=d+=_;n(D)}w.enqueue(new Uint8Array(C))}catch(E){throw v(E),E}},cancel(w){return v(w),u.return()}},{highWaterMark:2})},DEFAULT_CHUNK_SIZE=64*1024,{isFunction}=utils$1,globalFetchAPI=(({Request:e,Response:t})=>({Request:e,Response:t}))(utils$1.global),{ReadableStream:ReadableStream$1,TextEncoder}=utils$1.global,test=(e,...t)=>{try{return!!e(...t)}catch{return!1}},factory=e=>{e=utils$1.merge.call({skipUndefined:!0},globalFetchAPI,e);const{fetch:t,Request:n,Response:o}=e,u=t?isFunction(t):typeof fetch=="function",d=isFunction(n),f=isFunction(o);if(!u)return!1;const v=u&&isFunction(ReadableStream$1),w=u&&(typeof TextEncoder=="function"?(M=>N=>M.encode(N))(new TextEncoder):async M=>new Uint8Array(await new n(M).arrayBuffer())),E=d&&v&&test(()=>{let M=!1;const N=new n(platform.origin,{body:new ReadableStream$1,method:"POST",get duplex(){return M=!0,"half"}}).headers.has("Content-Type");return M&&!N}),C=f&&v&&test(()=>utils$1.isReadableStream(new o("").body)),_={stream:C&&(M=>M.body)};u&&["text","arrayBuffer","blob","formData","stream"].forEach(M=>{!_[M]&&(_[M]=(N,I)=>{let B=N&&N[M];if(B)return B.call(N);throw new AxiosError$1(`Response type '${M}' is not supported`,AxiosError$1.ERR_NOT_SUPPORT,I)})});const D=async M=>{if(M==null)return 0;if(utils$1.isBlob(M))return M.size;if(utils$1.isSpecCompliantForm(M))return(await new n(platform.origin,{method:"POST",body:M}).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(M)||utils$1.isArrayBuffer(M))return M.byteLength;if(utils$1.isURLSearchParams(M)&&(M=M+""),utils$1.isString(M))return(await w(M)).byteLength},O=async(M,N)=>{const I=utils$1.toFiniteNumber(M.getContentLength());return I??D(N)};return async M=>{let{url:N,method:I,data:B,signal:V,cancelToken:j,timeout:q,onDownloadProgress:z,onUploadProgress:$,responseType:ee,headers:ie,withCredentials:ae="same-origin",fetchOptions:pe}=resolveConfig(M),he=t||fetch;ee=ee?(ee+"").toLowerCase():"text";let be=composeSignals([V,j&&j.toAbortSignal()],q),xe=null;const Ee=be&&be.unsubscribe&&(()=>{be.unsubscribe()});let we;try{if($&&E&&I!=="get"&&I!=="head"&&(we=await O(ie,B))!==0){let K=new n(N,{method:"POST",body:B,duplex:"half"}),ne;if(utils$1.isFormData(B)&&(ne=K.headers.get("content-type"))&&ie.setContentType(ne),K.body){const[ue,ye]=progressEventDecorator(we,progressEventReducer(asyncDecorator($)));B=trackStream(K.body,DEFAULT_CHUNK_SIZE,ue,ye)}}utils$1.isString(ae)||(ae=ae?"include":"omit");const oe=d&&"credentials"in n.prototype,se={...pe,signal:be,method:I.toUpperCase(),headers:ie.normalize().toJSON(),body:B,duplex:"half",credentials:oe?ae:void 0};xe=d&&new n(N,se);let J=await(d?he(xe,pe):he(N,se));const Q=C&&(ee==="stream"||ee==="response");if(C&&(z||Q&&Ee)){const K={};["status","statusText","headers"].forEach(fe=>{K[fe]=J[fe]});const ne=utils$1.toFiniteNumber(J.headers.get("content-length")),[ue,ye]=z&&progressEventDecorator(ne,progressEventReducer(asyncDecorator(z),!0))||[];J=new o(trackStream(J.body,DEFAULT_CHUNK_SIZE,ue,()=>{ye&&ye(),Ee&&Ee()}),K)}ee=ee||"text";let Z=await _[utils$1.findKey(_,ee)||"text"](J,M);return!Q&&Ee&&Ee(),await new Promise((K,ne)=>{settle(K,ne,{data:Z,headers:AxiosHeaders$1.from(J.headers),status:J.status,statusText:J.statusText,config:M,request:xe})})}catch(oe){throw Ee&&Ee(),oe&&oe.name==="TypeError"&&/Load failed|fetch/i.test(oe.message)?Object.assign(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,M,xe,oe&&oe.response),{cause:oe.cause||oe}):AxiosError$1.from(oe,oe&&oe.code,M,xe,oe&&oe.response)}}},seedCache=new Map,getFetch=e=>{let t=e&&e.env||{};const{fetch:n,Request:o,Response:u}=t,d=[o,u,n];let f=d.length,v=f,w,E,C=seedCache;for(;v--;)w=d[v],E=C.get(w),E===void 0&&C.set(w,E=v?new Map:factory(t)),C=E;return E};getFetch();const knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:{get:getFetch}};utils$1.forEach(knownAdapters,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const renderReason=e=>`- ${e}`,isResolvedHandle=e=>utils$1.isFunction(e)||e===null||e===!1;function getAdapter$1(e,t){e=utils$1.isArray(e)?e:[e];const{length:n}=e;let o,u;const d={};for(let f=0;f<n;f++){o=e[f];let v;if(u=o,!isResolvedHandle(o)&&(u=knownAdapters[(v=String(o)).toLowerCase()],u===void 0))throw new AxiosError$1(`Unknown adapter '${v}'`);if(u&&(utils$1.isFunction(u)||(u=u.get(t))))break;d[v||"#"+f]=u}if(!u){const f=Object.entries(d).map(([w,E])=>`adapter ${w} `+(E===!1?"is not supported by the environment":"is not available in the build"));let v=n?f.length>1?`since :
`+f.map(renderReason).join(`
`):" "+renderReason(f[0]):"as no adapter specified";throw new AxiosError$1("There is no suitable adapter to dispatch the request "+v,"ERR_NOT_SUPPORT")}return u}const adapters={getAdapter:getAdapter$1,adapters:knownAdapters};function throwIfCancellationRequested(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new CanceledError$1(null,e)}function dispatchRequest(e){return throwIfCancellationRequested(e),e.headers=AxiosHeaders$1.from(e.headers),e.data=transformData.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(e.adapter||defaults.adapter,e)(e).then(function(o){return throwIfCancellationRequested(e),o.data=transformData.call(e,e.transformResponse,o),o.headers=AxiosHeaders$1.from(o.headers),o},function(o){return isCancel$1(o)||(throwIfCancellationRequested(e),o&&o.response&&(o.response.data=transformData.call(e,e.transformResponse,o.response),o.response.headers=AxiosHeaders$1.from(o.response.headers))),Promise.reject(o)})}const VERSION$2="1.13.5",validators$1={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{validators$1[e]=function(o){return typeof o===e||"a"+(t<1?"n ":" ")+e}});const deprecatedWarnings={};validators$1.transitional=function(t,n,o){function u(d,f){return"[Axios v"+VERSION$2+"] Transitional option '"+d+"'"+f+(o?". "+o:"")}return(d,f,v)=>{if(t===!1)throw new AxiosError$1(u(f," has been removed"+(n?" in "+n:"")),AxiosError$1.ERR_DEPRECATED);return n&&!deprecatedWarnings[f]&&(deprecatedWarnings[f]=!0,console.warn(u(f," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(d,f,v):!0}};validators$1.spelling=function(t){return(n,o)=>(console.warn(`${o} is likely a misspelling of ${t}`),!0)};function assertOptions(e,t,n){if(typeof e!="object")throw new AxiosError$1("options must be an object",AxiosError$1.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let u=o.length;for(;u-- >0;){const d=o[u],f=t[d];if(f){const v=e[d],w=v===void 0||f(v,d,e);if(w!==!0)throw new AxiosError$1("option "+d+" must be "+w,AxiosError$1.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new AxiosError$1("Unknown option "+d,AxiosError$1.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;let Axios$1=class{constructor(t){this.defaults=t||{},this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(t,n){try{return await this._request(t,n)}catch(o){if(o instanceof Error){let u={};Error.captureStackTrace?Error.captureStackTrace(u):u=new Error;const d=u.stack?u.stack.replace(/^.+\n/,""):"";try{o.stack?d&&!String(o.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+d):o.stack=d}catch{}}throw o}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=mergeConfig$1(this.defaults,n);const{transitional:o,paramsSerializer:u,headers:d}=n;o!==void 0&&validator.assertOptions(o,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean),legacyInterceptorReqResOrdering:validators.transitional(validators.boolean)},!1),u!=null&&(utils$1.isFunction(u)?n.paramsSerializer={serialize:u}:validator.assertOptions(u,{encode:validators.function,serialize:validators.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),validator.assertOptions(n,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let f=d&&utils$1.merge(d.common,d[n.method]);d&&utils$1.forEach(["delete","get","head","post","put","patch","common"],M=>{delete d[M]}),n.headers=AxiosHeaders$1.concat(f,d);const v=[];let w=!0;this.interceptors.request.forEach(function(N){if(typeof N.runWhen=="function"&&N.runWhen(n)===!1)return;w=w&&N.synchronous;const I=n.transitional||transitionalDefaults;I&&I.legacyInterceptorReqResOrdering?v.unshift(N.fulfilled,N.rejected):v.push(N.fulfilled,N.rejected)});const E=[];this.interceptors.response.forEach(function(N){E.push(N.fulfilled,N.rejected)});let C,_=0,D;if(!w){const M=[dispatchRequest.bind(this),void 0];for(M.unshift(...v),M.push(...E),D=M.length,C=Promise.resolve(n);_<D;)C=C.then(M[_++],M[_++]);return C}D=v.length;let O=n;for(;_<D;){const M=v[_++],N=v[_++];try{O=M(O)}catch(I){N.call(this,I);break}}try{C=dispatchRequest.call(this,O)}catch(M){return Promise.reject(M)}for(_=0,D=E.length;_<D;)C=C.then(E[_++],E[_++]);return C}getUri(t){t=mergeConfig$1(this.defaults,t);const n=buildFullPath(t.baseURL,t.url,t.allowAbsoluteUrls);return buildURL(n,t.params,t.paramsSerializer)}};utils$1.forEach(["delete","get","head","options"],function(t){Axios$1.prototype[t]=function(n,o){return this.request(mergeConfig$1(o||{},{method:t,url:n,data:(o||{}).data}))}});utils$1.forEach(["post","put","patch"],function(t){function n(o){return function(d,f,v){return this.request(mergeConfig$1(v||{},{method:t,headers:o?{"Content-Type":"multipart/form-data"}:{},url:d,data:f}))}}Axios$1.prototype[t]=n(),Axios$1.prototype[t+"Form"]=n(!0)});let CancelToken$1=class Cp{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(d){n=d});const o=this;this.promise.then(u=>{if(!o._listeners)return;let d=o._listeners.length;for(;d-- >0;)o._listeners[d](u);o._listeners=null}),this.promise.then=u=>{let d;const f=new Promise(v=>{o.subscribe(v),d=v}).then(u);return f.cancel=function(){o.unsubscribe(d)},f},t(function(d,f,v){o.reason||(o.reason=new CanceledError$1(d,f,v),n(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=o=>{t.abort(o)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Cp(function(u){t=u}),cancel:t}}};function spread$1(e){return function(n){return e.apply(null,n)}}function isAxiosError$1(e){return utils$1.isObject(e)&&e.isAxiosError===!0}const HttpStatusCode$1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(HttpStatusCode$1).forEach(([e,t])=>{HttpStatusCode$1[t]=e});function createInstance$1(e){const t=new Axios$1(e),n=bind(Axios$1.prototype.request,t);return utils$1.extend(n,Axios$1.prototype,t,{allOwnKeys:!0}),utils$1.extend(n,t,null,{allOwnKeys:!0}),n.create=function(u){return createInstance$1(mergeConfig$1(e,u))},n}const axios=createInstance$1(defaults);axios.Axios=Axios$1;axios.CanceledError=CanceledError$1;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel$1;axios.VERSION=VERSION$2;axios.toFormData=toFormData$1;axios.AxiosError=AxiosError$1;axios.Cancel=axios.CanceledError;axios.all=function(t){return Promise.all(t)};axios.spread=spread$1;axios.isAxiosError=isAxiosError$1;axios.mergeConfig=mergeConfig$1;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=e=>formDataToJSON(utils$1.isHTMLForm(e)?new FormData(e):e);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const{Axios,AxiosError,CanceledError,isCancel,CancelToken,VERSION:VERSION$1,all,Cancel,isAxiosError,spread,toFormData,AxiosHeaders,HttpStatusCode,formToJSON,getAdapter,mergeConfig}=axios,api=axios.create({baseURL:"https://space-management-api.onrender.com",timeout:45e3});function FileUploader({onUpload:e}){const[t,n]=reactExports.useState(null),[o,u]=reactExports.useState(""),[d,f]=reactExports.useState(!1),v=async()=>{if(!t)return alert("Please select a file first");const w=new FormData;w.append("file",t);try{f(!0);const E=await api.post("/upload",w);e(E.data.summary),u(" "+E.data.message)}catch(E){console.error(E),u(" Upload failed. Check the console for details.")}finally{f(!1)}};return jsxRuntimeExports.jsxs(motion.div,{className:"bg-white p-8 rounded-2xl shadow-md border border-gray-200 text-center",initial:{opacity:0,y:30},animate:{opacity:1,y:0},children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"Upload Space Data (Excel)"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 mb-6",children:"Upload your Excel file exported from Bluebeam Revu or another source."}),jsxRuntimeExports.jsx("input",{type:"file",accept:".xlsx,.xls",className:"border border-gray-300 rounded-md px-3 py-2 w-full mb-4 bg-gray-50",onChange:w=>n(w.target.files[0])}),jsxRuntimeExports.jsx("button",{onClick:v,disabled:d,className:"px-6 py-2 bg-gray-800 text-white rounded-md hover:bg-gray-700 transition disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Uploading...":"Upload File"}),o&&jsxRuntimeExports.jsx("p",{className:"mt-4 text-gray-700 font-medium",children:o}),d&&jsxRuntimeExports.jsx("p",{className:"mt-2 text-gray-400 text-sm",children:"This may take a moment if the server is waking up..."})]})}const PI_OVER_180=Math.PI/180;function detectBrowser(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const glob=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},Konva$1={_global:glob,version:"10.2.0",isBrowser:detectBrowser(),isUnminified:/param/.test((function(e){}).toString()),dblClickWindow:400,getAngle(e){return Konva$1.angleDeg?e*PI_OVER_180:e},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return Konva$1.DD.isDragging},isTransforming(){var e,t;return(t=(e=Konva$1.Transformer)===null||e===void 0?void 0:e.isTransforming())!==null&&t!==void 0?t:!1},isDragReady(){return!!Konva$1.DD.node},releaseCanvasOnDestroy:!0,document:glob.document,_injectGlobal(e){typeof glob.Konva<"u"&&console.error("Several Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),glob.Konva=e}},_registerNode=e=>{Konva$1[e.prototype.getClassName()]=e};Konva$1._injectGlobal(Konva$1);const NODE_ERROR=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,ensureBrowser=()=>{if(typeof document>"u")throw new Error(NODE_ERROR)};class Transform{constructor(t=[1,0,0,1,0,0]){this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new Transform(this.m)}copyInto(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]}point(t){const n=this.m;return{x:n[0]*t.x+n[2]*t.y+n[4],y:n[1]*t.x+n[3]*t.y+n[5]}}translate(t,n){return this.m[4]+=this.m[0]*t+this.m[2]*n,this.m[5]+=this.m[1]*t+this.m[3]*n,this}scale(t,n){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=n,this.m[3]*=n,this}rotate(t){const n=Math.cos(t),o=Math.sin(t),u=this.m[0]*n+this.m[2]*o,d=this.m[1]*n+this.m[3]*o,f=this.m[0]*-o+this.m[2]*n,v=this.m[1]*-o+this.m[3]*n;return this.m[0]=u,this.m[1]=d,this.m[2]=f,this.m[3]=v,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(t,n){const o=this.m[0]+this.m[2]*n,u=this.m[1]+this.m[3]*n,d=this.m[2]+this.m[0]*t,f=this.m[3]+this.m[1]*t;return this.m[0]=o,this.m[1]=u,this.m[2]=d,this.m[3]=f,this}multiply(t){const n=this.m[0]*t.m[0]+this.m[2]*t.m[1],o=this.m[1]*t.m[0]+this.m[3]*t.m[1],u=this.m[0]*t.m[2]+this.m[2]*t.m[3],d=this.m[1]*t.m[2]+this.m[3]*t.m[3],f=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],v=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=n,this.m[1]=o,this.m[2]=u,this.m[3]=d,this.m[4]=f,this.m[5]=v,this}invert(){const t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),n=this.m[3]*t,o=-this.m[1]*t,u=-this.m[2]*t,d=this.m[0]*t,f=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),v=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=n,this.m[1]=o,this.m[2]=u,this.m[3]=d,this.m[4]=f,this.m[5]=v,this}getMatrix(){return this.m}decompose(){const t=this.m[0],n=this.m[1],o=this.m[2],u=this.m[3],d=this.m[4],f=this.m[5],v=t*u-n*o,w={x:d,y:f,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(t!=0||n!=0){const E=Math.sqrt(t*t+n*n);w.rotation=n>0?Math.acos(t/E):-Math.acos(t/E),w.scaleX=E,w.scaleY=v/E,w.skewX=(t*o+n*u)/v,w.skewY=0}else if(o!=0||u!=0){const E=Math.sqrt(o*o+u*u);w.rotation=Math.PI/2-(u>0?Math.acos(-o/E):-Math.acos(o/E)),w.scaleX=v/E,w.scaleY=E,w.skewX=0,w.skewY=(t*o+n*u)/v}return w.rotation=Util._getRotation(w.rotation),w}}const OBJECT_ARRAY="[object Array]",OBJECT_NUMBER="[object Number]",OBJECT_STRING="[object String]",OBJECT_BOOLEAN="[object Boolean]",PI_OVER_DEG180=Math.PI/180,DEG180_OVER_PI=180/Math.PI,HASH="#",EMPTY_STRING$1="",ZERO="0",KONVA_WARNING="Konva warning: ",KONVA_ERROR="Konva error: ",RGB_PAREN="rgb(",COLORS={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},RGB_REGEX=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let animQueue=[],_isCanvasFarblingActive=null;const req=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(e){setTimeout(e,16)},Util={_isElement(e){return!!(e&&e.nodeType==1)},_isFunction(e){return!!(e&&e.constructor&&e.call&&e.apply)},_isPlainObject(e){return!!e&&e.constructor===Object},_isArray(e){return Object.prototype.toString.call(e)===OBJECT_ARRAY},_isNumber(e){return Object.prototype.toString.call(e)===OBJECT_NUMBER&&!isNaN(e)&&isFinite(e)},_isString(e){return Object.prototype.toString.call(e)===OBJECT_STRING},_isBoolean(e){return Object.prototype.toString.call(e)===OBJECT_BOOLEAN},isObject(e){return e instanceof Object},isValidSelector(e){if(typeof e!="string")return!1;const t=e[0];return t==="#"||t==="."||t===t.toUpperCase()},_sign(e){return e===0||e>0?1:-1},requestAnimFrame(e){animQueue.push(e),animQueue.length===1&&req(function(){const t=animQueue;animQueue=[],t.forEach(function(n){n()})})},createCanvasElement(){ensureBrowser();const e=document.createElement("canvas");try{e.style=e.style||{}}catch{}return e},createImageElement(){return ensureBrowser(),document.createElement("img")},_isInDocument(e){for(;e=e.parentNode;)if(e==document)return!0;return!1},_urlToImage(e,t){const n=Util.createImageElement();n.onload=function(){t(n)},n.src=e},_rgbToHex(e,t,n){return((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)},_hexToRgb(e){e=e.replace(HASH,EMPTY_STRING$1);const t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:t&255}},getRandomColor(){let e=(Math.random()*16777215<<0).toString(16);for(;e.length<6;)e=ZERO+e;return HASH+e},isCanvasFarblingActive(){if(_isCanvasFarblingActive!==null)return _isCanvasFarblingActive;if(typeof document>"u")return _isCanvasFarblingActive=!1,!1;const e=this.createCanvasElement();e.width=10,e.height=10;const t=e.getContext("2d",{willReadFrequently:!0});t.clearRect(0,0,10,10),t.fillStyle="#282828",t.fillRect(0,0,10,10);const n=t.getImageData(0,0,10,10).data;let o=!1;for(let u=0;u<100;u++)if(n[u*4]!==40||n[u*4+1]!==40||n[u*4+2]!==40||n[u*4+3]!==255){o=!0;break}return _isCanvasFarblingActive=o,this.releaseCanvas(e),_isCanvasFarblingActive},getHitColor(){const e=this.getRandomColor();return this.isCanvasFarblingActive()?this.getSnappedHexColor(e):e},getHitColorKey(e,t,n){return this.isCanvasFarblingActive()&&(e=Math.round(e/5)*5,t=Math.round(t/5)*5,n=Math.round(n/5)*5),HASH+this._rgbToHex(e,t,n)},getSnappedHexColor(e){const t=this._hexToRgb(e);return HASH+this._rgbToHex(Math.round(t.r/5)*5,Math.round(t.g/5)*5,Math.round(t.b/5)*5)},getRGB(e){let t;return e in COLORS?(t=COLORS[e],{r:t[0],g:t[1],b:t[2]}):e[0]===HASH?this._hexToRgb(e.substring(1)):e.substr(0,4)===RGB_PAREN?(t=RGB_REGEX.exec(e.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},colorToRGBA(e){return e=e||"black",Util._namedColorToRBA(e)||Util._hex3ColorToRGBA(e)||Util._hex4ColorToRGBA(e)||Util._hex6ColorToRGBA(e)||Util._hex8ColorToRGBA(e)||Util._rgbColorToRGBA(e)||Util._rgbaColorToRGBA(e)||Util._hslColorToRGBA(e)},_namedColorToRBA(e){const t=COLORS[e.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA(e){if(e.indexOf("rgb(")===0){e=e.match(/rgb\(([^)]+)\)/)[1];const t=e.split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA(e){if(e.indexOf("rgba(")===0){e=e.match(/rgba\(([^)]+)\)/)[1];const t=e.split(/ *, */).map((n,o)=>n.slice(-1)==="%"?o===3?parseInt(n)/100:parseInt(n)/100*255:Number(n));return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex8ColorToRGBA(e){if(e[0]==="#"&&e.length===9)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:parseInt(e.slice(7,9),16)/255}},_hex6ColorToRGBA(e){if(e[0]==="#"&&e.length===7)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:1}},_hex4ColorToRGBA(e){if(e[0]==="#"&&e.length===5)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:parseInt(e[4]+e[4],16)/255}},_hex3ColorToRGBA(e){if(e[0]==="#"&&e.length===4)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:1}},_hslColorToRGBA(e){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(e)){const[t,...n]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e),o=Number(n[0])/360,u=Number(n[1])/100,d=Number(n[2])/100;let f,v,w;if(u===0)return w=d*255,{r:Math.round(w),g:Math.round(w),b:Math.round(w),a:1};d<.5?f=d*(1+u):f=d+u-d*u;const E=2*d-f,C=[0,0,0];for(let _=0;_<3;_++)v=o+1/3*-(_-1),v<0&&v++,v>1&&v--,6*v<1?w=E+(f-E)*6*v:2*v<1?w=f:3*v<2?w=E+(f-E)*(2/3-v)*6:w=E,C[_]=w*255;return{r:Math.round(C[0]),g:Math.round(C[1]),b:Math.round(C[2]),a:1}}},haveIntersection(e,t){return!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y)},cloneObject(e){const t={};for(const n in e)this._isPlainObject(e[n])?t[n]=this.cloneObject(e[n]):this._isArray(e[n])?t[n]=this.cloneArray(e[n]):t[n]=e[n];return t},cloneArray(e){return e.slice(0)},degToRad(e){return e*PI_OVER_DEG180},radToDeg(e){return e*DEG180_OVER_PI},_degToRad(e){return Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),Util.degToRad(e)},_radToDeg(e){return Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),Util.radToDeg(e)},_getRotation(e){return Konva$1.angleDeg?Util.radToDeg(e):e},_capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)},throw(e){throw new Error(KONVA_ERROR+e)},error(e){console.error(KONVA_ERROR+e)},warn(e){Konva$1.showWarnings&&console.warn(KONVA_WARNING+e)},each(e,t){for(const n in e)t(n,e[n])},_inRange(e,t,n){return t<=e&&e<n},_getProjectionToSegment(e,t,n,o,u,d){let f,v,w;const E=(e-n)*(e-n)+(t-o)*(t-o);if(E==0)f=e,v=t,w=(u-n)*(u-n)+(d-o)*(d-o);else{const C=((u-e)*(n-e)+(d-t)*(o-t))/E;C<0?(f=e,v=t,w=(e-u)*(e-u)+(t-d)*(t-d)):C>1?(f=n,v=o,w=(n-u)*(n-u)+(o-d)*(o-d)):(f=e+C*(n-e),v=t+C*(o-t),w=(f-u)*(f-u)+(v-d)*(v-d))}return[f,v,w]},_getProjectionToLine(e,t,n){const o=Util.cloneObject(e);let u=Number.MAX_VALUE;return t.forEach(function(d,f){if(!n&&f===t.length-1)return;const v=t[(f+1)%t.length],w=Util._getProjectionToSegment(d.x,d.y,v.x,v.y,e.x,e.y),E=w[0],C=w[1],_=w[2];_<u&&(o.x=E,o.y=C,u=_)}),o},_prepareArrayForTween(e,t,n){const o=[],u=[];if(e.length>t.length){const f=t;t=e,e=f}for(let f=0;f<e.length;f+=2)o.push({x:e[f],y:e[f+1]});for(let f=0;f<t.length;f+=2)u.push({x:t[f],y:t[f+1]});const d=[];return u.forEach(function(f){const v=Util._getProjectionToLine(f,o,n);d.push(v.x),d.push(v.y)}),d},_prepareToStringify(e){let t;e.visitedByCircularReferenceRemoval=!0;for(const n in e)if(e.hasOwnProperty(n)&&e[n]&&typeof e[n]=="object"){if(t=Object.getOwnPropertyDescriptor(e,n),e[n].visitedByCircularReferenceRemoval||Util._isElement(e[n]))if(t.configurable)delete e[n];else return null;else if(Util._prepareToStringify(e[n])===null)if(t.configurable)delete e[n];else return null}return delete e.visitedByCircularReferenceRemoval,e},_assign(e,t){for(const n in t)e[n]=t[n];return e},_getFirstPointerId(e){return e.touches?e.changedTouches[0].identifier:e.pointerId||999},releaseCanvas(...e){Konva$1.releaseCanvasOnDestroy&&e.forEach(t=>{t.width=0,t.height=0})},drawRoundedRectPath(e,t,n,o){let u=t<0?t:0,d=n<0?n:0;t=Math.abs(t),n=Math.abs(n);let f=0,v=0,w=0,E=0;typeof o=="number"?f=v=w=E=Math.min(o,t/2,n/2):(f=Math.min(o[0]||0,t/2,n/2),v=Math.min(o[1]||0,t/2,n/2),E=Math.min(o[2]||0,t/2,n/2),w=Math.min(o[3]||0,t/2,n/2)),e.moveTo(u+f,d),e.lineTo(u+t-v,d),e.arc(u+t-v,d+v,v,Math.PI*3/2,0,!1),e.lineTo(u+t,d+n-E),e.arc(u+t-E,d+n-E,E,0,Math.PI/2,!1),e.lineTo(u+w,d+n),e.arc(u+w,d+n-w,w,Math.PI/2,Math.PI,!1),e.lineTo(u,d+f),e.arc(u+f,d+f,f,Math.PI,Math.PI*3/2,!1)},drawRoundedPolygonPath(e,t,n,o,u){o=Math.abs(o);for(let d=0;d<n;d++){const f=t[(d-1+n)%n],v=t[d],w=t[(d+1)%n],E={x:v.x-f.x,y:v.y-f.y},C={x:w.x-v.x,y:w.y-v.y},_=Math.hypot(E.x,E.y),D=Math.hypot(C.x,C.y);let O;typeof u=="number"?O=u:O=d<u.length?u[d]:0,O=o*Math.cos(Math.PI/n)*Math.min(1,O/o*2);const N={x:E.x/_,y:E.y/_},I={x:C.x/D,y:C.y/D},B={x:v.x-N.x*O,y:v.y-N.y*O},V={x:v.x+I.x*O,y:v.y+I.y*O};d===0?e.moveTo(B.x,B.y):e.lineTo(B.x,B.y),e.arcTo(v.x,v.y,V.x,V.y,O)}}};function simplifyArray(e){const t=[],n=e.length,o=Util;for(let u=0;u<n;u++){let d=e[u];o._isNumber(d)?d=Math.round(d*1e3)/1e3:o._isString(d)||(d=d+""),t.push(d)}return t}const COMMA=",",OPEN_PAREN="(",CLOSE_PAREN=")",OPEN_PAREN_BRACKET="([",CLOSE_BRACKET_PAREN="])",SEMICOLON=";",DOUBLE_PAREN="()",EQUALS="=",CONTEXT_METHODS=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],CONTEXT_PROPERTIES=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"],traceArrMax=100;let _cssFiltersSupported=null;function isCSSFiltersSupported(){if(_cssFiltersSupported!==null)return _cssFiltersSupported;try{const t=Util.createCanvasElement().getContext("2d");return t?!!t&&"filter"in t:(_cssFiltersSupported=!1,!1)}catch{return _cssFiltersSupported=!1,!1}}class Context{constructor(t){this.canvas=t,Konva$1.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,n){let o=this.traceArr,u=o.length,d="",f,v,w,E;for(f=0;f<u;f++)v=o[f],w=v.method,w?(E=v.args,d+=w,t?d+=DOUBLE_PAREN:Util._isArray(E[0])?d+=OPEN_PAREN_BRACKET+E.join(COMMA)+CLOSE_BRACKET_PAREN:(n&&(E=E.map(C=>typeof C=="number"?Math.floor(C):C)),d+=OPEN_PAREN+E.join(COMMA)+CLOSE_PAREN)):(d+=v.property,t||(d+=EQUALS+v.val)),d+=SEMICOLON;return d}clearTrace(){this.traceArr=[]}_trace(t){let n=this.traceArr,o;n.push(t),o=n.length,o>=traceArrMax&&n.shift()}reset(){const t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){const n=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(t){const n=t.attrs.lineCap;n&&this.setAttr("lineCap",n)}_applyOpacity(t){const n=t.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(t){const n=t.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}_applyMiterLimit(t){const n=t.attrs.miterLimit;n!=null&&this.setAttr("miterLimit",n)}setAttr(t,n){this._context[t]=n}arc(t,n,o,u,d,f){this._context.arc(t,n,o,u,d,f)}arcTo(t,n,o,u,d){this._context.arcTo(t,n,o,u,d)}beginPath(){this._context.beginPath()}bezierCurveTo(t,n,o,u,d,f){this._context.bezierCurveTo(t,n,o,u,d,f)}clearRect(t,n,o,u){this._context.clearRect(t,n,o,u)}clip(...t){this._context.clip.apply(this._context,t)}closePath(){this._context.closePath()}createImageData(t,n){const o=arguments;if(o.length===2)return this._context.createImageData(t,n);if(o.length===1)return this._context.createImageData(t)}createLinearGradient(t,n,o,u){return this._context.createLinearGradient(t,n,o,u)}createPattern(t,n){return this._context.createPattern(t,n)}createRadialGradient(t,n,o,u,d,f){return this._context.createRadialGradient(t,n,o,u,d,f)}drawImage(t,n,o,u,d,f,v,w,E){const C=arguments,_=this._context;C.length===3?_.drawImage(t,n,o):C.length===5?_.drawImage(t,n,o,u,d):C.length===9&&_.drawImage(t,n,o,u,d,f,v,w,E)}ellipse(t,n,o,u,d,f,v,w){this._context.ellipse(t,n,o,u,d,f,v,w)}isPointInPath(t,n,o,u){return o?this._context.isPointInPath(o,t,n,u):this._context.isPointInPath(t,n,u)}fill(...t){this._context.fill.apply(this._context,t)}fillRect(t,n,o,u){this._context.fillRect(t,n,o,u)}strokeRect(t,n,o,u){this._context.strokeRect(t,n,o,u)}fillText(t,n,o,u){u?this._context.fillText(t,n,o,u):this._context.fillText(t,n,o)}measureText(t){return this._context.measureText(t)}getImageData(t,n,o,u){return this._context.getImageData(t,n,o,u)}lineTo(t,n){this._context.lineTo(t,n)}moveTo(t,n){this._context.moveTo(t,n)}rect(t,n,o,u){this._context.rect(t,n,o,u)}roundRect(t,n,o,u,d){this._context.roundRect(t,n,o,u,d)}putImageData(t,n,o){this._context.putImageData(t,n,o)}quadraticCurveTo(t,n,o,u){this._context.quadraticCurveTo(t,n,o,u)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,n){this._context.scale(t,n)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,n,o,u,d,f){this._context.setTransform(t,n,o,u,d,f)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,n,o,u){this._context.strokeText(t,n,o,u)}transform(t,n,o,u,d,f){this._context.transform(t,n,o,u,d,f)}translate(t,n){this._context.translate(t,n)}_enableTrace(){let t=this,n=CONTEXT_METHODS.length,o=this.setAttr,u,d;const f=function(v){let w=t[v],E;t[v]=function(){return d=simplifyArray(Array.prototype.slice.call(arguments,0)),E=w.apply(t,arguments),t._trace({method:v,args:d}),E}};for(u=0;u<n;u++)f(CONTEXT_METHODS[u]);t.setAttr=function(){o.apply(t,arguments);const v=arguments[0];let w=arguments[1];(v==="shadowOffsetX"||v==="shadowOffsetY"||v==="shadowBlur")&&(w=w/this.canvas.getPixelRatio()),t._trace({property:v,val:w})}}_applyGlobalCompositeOperation(t){const n=t.attrs.globalCompositeOperation;!n||n==="source-over"||this.setAttr("globalCompositeOperation",n)}}CONTEXT_PROPERTIES.forEach(function(e){Object.defineProperty(Context.prototype,e,{get(){return this._context[e]},set(t){this._context[e]=t}})});class SceneContext extends Context{constructor(t,{willReadFrequently:n=!1}={}){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:n})}_fillColor(t){const n=t.fill();this.setAttr("fillStyle",n),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){const n=t._getLinearGradient();n&&(this.setAttr("fillStyle",n),t._fillFunc(this))}_fillRadialGradient(t){const n=t._getRadialGradient();n&&(this.setAttr("fillStyle",n),t._fillFunc(this))}_fill(t){const n=t.fill(),o=t.getFillPriority();if(n&&o==="color"){this._fillColor(t);return}const u=t.getFillPatternImage();if(u&&o==="pattern"){this._fillPattern(t);return}const d=t.getFillLinearGradientColorStops();if(d&&o==="linear-gradient"){this._fillLinearGradient(t);return}const f=t.getFillRadialGradientColorStops();if(f&&o==="radial-gradient"){this._fillRadialGradient(t);return}n?this._fillColor(t):u?this._fillPattern(t):d?this._fillLinearGradient(t):f&&this._fillRadialGradient(t)}_strokeLinearGradient(t){const n=t.getStrokeLinearGradientStartPoint(),o=t.getStrokeLinearGradientEndPoint(),u=t.getStrokeLinearGradientColorStops(),d=this.createLinearGradient(n.x,n.y,o.x,o.y);if(u){for(let f=0;f<u.length;f+=2)d.addColorStop(u[f],u[f+1]);this.setAttr("strokeStyle",d)}}_stroke(t){const n=t.dash(),o=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!o){this.save();const d=this.getCanvas().getPixelRatio();this.setTransform(d,0,0,d,0,0)}this._applyLineCap(t),n&&t.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),o||this.restore()}}_applyShadow(t){var n,o,u;const d=(n=t.getShadowRGBA())!==null&&n!==void 0?n:"black",f=(o=t.getShadowBlur())!==null&&o!==void 0?o:5,v=(u=t.getShadowOffset())!==null&&u!==void 0?u:{x:0,y:0},w=t.getAbsoluteScale(),E=this.canvas.getPixelRatio(),C=w.x*E,_=w.y*E;this.setAttr("shadowColor",d),this.setAttr("shadowBlur",f*Math.min(Math.abs(C),Math.abs(_))),this.setAttr("shadowOffsetX",v.x*C),this.setAttr("shadowOffsetY",v.y*_)}}class HitContext extends Context{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){const n=t.getStrokeScaleEnabled();if(!n){this.save();const d=this.getCanvas().getPixelRatio();this.setTransform(d,0,0,d,0,0)}this._applyLineCap(t);const o=t.hitStrokeWidth(),u=o==="auto"?t.strokeWidth():o;this.setAttr("lineWidth",u),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),n||this.restore()}}}let _pixelRatio;function getDevicePixelRatio(){if(_pixelRatio)return _pixelRatio;const e=Util.createCanvasElement(),t=e.getContext("2d");return _pixelRatio=(function(){const n=Konva$1._global.devicePixelRatio||1,o=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return n/o})(),Util.releaseCanvas(e),_pixelRatio}class Canvas{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const o=(t||{}).pixelRatio||Konva$1.pixelRatio||getDevicePixelRatio();this.pixelRatio=o,this._canvas=Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){const n=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";const n=this.pixelRatio;this.getContext()._context.scale(n,n)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";const n=this.pixelRatio;this.getContext()._context.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,n){this.setWidth(t||0),this.setHeight(n||0)}toDataURL(t,n){try{return this._canvas.toDataURL(t,n)}catch{try{return this._canvas.toDataURL()}catch(u){return Util.error("Unable to get data URL. "+u.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}class SceneCanvas extends Canvas{constructor(t={width:0,height:0,willReadFrequently:!1}){super(t),this.context=new SceneContext(this,{willReadFrequently:t.willReadFrequently}),this.setSize(t.width,t.height)}}class HitCanvas extends Canvas{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new HitContext(this),this.setSize(t.width,t.height)}}const DD={get isDragging(){let e=!1;return DD._dragElements.forEach(t=>{t.dragStatus==="dragging"&&(e=!0)}),e},justDragged:!1,get node(){let e;return DD._dragElements.forEach(t=>{e=t.node}),e},_dragElements:new Map,_drag(e){const t=[];DD._dragElements.forEach((n,o)=>{const{node:u}=n,d=u.getStage();d.setPointersPositions(e),n.pointerId===void 0&&(n.pointerId=Util._getFirstPointerId(e));const f=d._changedPointerPositions.find(v=>v.id===n.pointerId);if(f){if(n.dragStatus!=="dragging"){const v=u.dragDistance();if(Math.max(Math.abs(f.x-n.startPointerPos.x),Math.abs(f.y-n.startPointerPos.y))<v||(u.startDrag({evt:e}),!u.isDragging()))return}u._setDragPosition(e,n),t.push(u)}}),t.forEach(n=>{n.fire("dragmove",{type:"dragmove",target:n,evt:e},!0)})},_endDragBefore(e){const t=[];DD._dragElements.forEach(n=>{const{node:o}=n,u=o.getStage();if(e&&u.setPointersPositions(e),!u._changedPointerPositions.find(v=>v.id===n.pointerId))return;(n.dragStatus==="dragging"||n.dragStatus==="stopped")&&(DD.justDragged=!0,Konva$1._mouseListenClick=!1,Konva$1._touchListenClick=!1,Konva$1._pointerListenClick=!1,n.dragStatus="stopped");const f=n.node.getLayer()||n.node instanceof Konva$1.Stage&&n.node;f&&t.indexOf(f)===-1&&t.push(f)}),t.forEach(n=>{n.draw()})},_endDragAfter(e){DD._dragElements.forEach((t,n)=>{t.dragStatus==="stopped"&&t.node.fire("dragend",{type:"dragend",target:t.node,evt:e},!0),t.dragStatus!=="dragging"&&DD._dragElements.delete(n)})}};Konva$1.isBrowser&&(window.addEventListener("mouseup",DD._endDragBefore,!0),window.addEventListener("touchend",DD._endDragBefore,!0),window.addEventListener("touchcancel",DD._endDragBefore,!0),window.addEventListener("mousemove",DD._drag),window.addEventListener("touchmove",DD._drag),window.addEventListener("mouseup",DD._endDragAfter,!1),window.addEventListener("touchend",DD._endDragAfter,!1),window.addEventListener("touchcancel",DD._endDragAfter,!1));function _formatValue(e){return Util._isString(e)?'"'+e+'"':Object.prototype.toString.call(e)==="[object Number]"||Util._isBoolean(e)?e:Object.prototype.toString.call(e)}function RGBComponent(e){return e>255?255:e<0?0:Math.round(e)}function getNumberValidator(){if(Konva$1.isUnminified)return function(e,t){return Util._isNumber(e)||Util.warn(_formatValue(e)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),e}}function getNumberOrArrayOfNumbersValidator(e){if(Konva$1.isUnminified)return function(t,n){let o=Util._isNumber(t),u=Util._isArray(t)&&t.length==e;return!o&&!u&&Util.warn(_formatValue(t)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+e+")"),t}}function getNumberOrAutoValidator(){if(Konva$1.isUnminified)return function(e,t){return Util._isNumber(e)||e==="auto"||Util.warn(_formatValue(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),e}}function getStringValidator(){if(Konva$1.isUnminified)return function(e,t){return Util._isString(e)||Util.warn(_formatValue(e)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),e}}function getStringOrGradientValidator(){if(Konva$1.isUnminified)return function(e,t){const n=Util._isString(e),o=Object.prototype.toString.call(e)==="[object CanvasGradient]"||e&&e.addColorStop;return n||o||Util.warn(_formatValue(e)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),e}}function getNumberArrayValidator(){if(Konva$1.isUnminified)return function(e,t){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&e instanceof n||(Util._isArray(e)?e.forEach(function(o){Util._isNumber(o)||Util.warn('"'+t+'" attribute has non numeric element '+o+". Make sure that all elements are numbers.")}):Util.warn(_formatValue(e)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),e}}function getBooleanValidator(){if(Konva$1.isUnminified)return function(e,t){return e===!0||e===!1||Util.warn(_formatValue(e)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),e}}function getComponentValidator(e){if(Konva$1.isUnminified)return function(t,n){return t==null||Util.isObject(t)||Util.warn(_formatValue(t)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+e),t}}const GET="get",SET$1="set",Factory={addGetterSetter(e,t,n,o,u){Factory.addGetter(e,t,n),Factory.addSetter(e,t,o,u),Factory.addOverloadedGetterSetter(e,t)},addGetter(e,t,n){const o=GET+Util._capitalize(t);e.prototype[o]=e.prototype[o]||function(){const u=this.attrs[t];return u===void 0?n:u}},addSetter(e,t,n,o){const u=SET$1+Util._capitalize(t);e.prototype[u]||Factory.overWriteSetter(e,t,n,o)},overWriteSetter(e,t,n,o){const u=SET$1+Util._capitalize(t);e.prototype[u]=function(d){return n&&d!==void 0&&d!==null&&(d=n.call(this,d,t)),this._setAttr(t,d),o&&o.call(this),this}},addComponentsGetterSetter(e,t,n,o,u){const d=n.length,f=Util._capitalize,v=GET+f(t),w=SET$1+f(t);e.prototype[v]=function(){const C={};for(let _=0;_<d;_++){const D=n[_];C[D]=this.getAttr(t+f(D))}return C};const E=getComponentValidator(n);e.prototype[w]=function(C){const _=this.attrs[t];o&&(C=o.call(this,C,t)),E&&E.call(this,C,t);for(const D in C)C.hasOwnProperty(D)&&this._setAttr(t+f(D),C[D]);return C||n.forEach(D=>{this._setAttr(t+f(D),void 0)}),this._fireChangeEvent(t,_,C),u&&u.call(this),this},Factory.addOverloadedGetterSetter(e,t)},addOverloadedGetterSetter(e,t){const n=Util._capitalize(t),o=SET$1+n,u=GET+n;e.prototype[t]=function(){return arguments.length?(this[o](arguments[0]),this):this[u]()}},addDeprecatedGetterSetter(e,t,n,o){Util.error("Adding deprecated "+t);const u=GET+Util._capitalize(t),d=t+" property is deprecated and will be removed soon. Look at Konva change log for more information.";e.prototype[u]=function(){Util.error(d);const f=this.attrs[t];return f===void 0?n:f},Factory.addSetter(e,t,o,function(){Util.error(d)}),Factory.addOverloadedGetterSetter(e,t)},backCompat(e,t){Util.each(t,function(n,o){const u=e.prototype[o],d=GET+Util._capitalize(n),f=SET$1+Util._capitalize(n);function v(){u.apply(this,arguments),Util.error('"'+n+'" method is deprecated and will be removed soon. Use ""'+o+'" instead.')}e.prototype[n]=v,e.prototype[d]=v,e.prototype[f]=v})},afterSetFilter(){this._filterUpToDate=!1}};function parseCSSFilters(e){const t=/(\w+)\(([^)]+)\)/g;let n;for(;(n=t.exec(e))!==null;){const[,o,u]=n;switch(o){case"blur":{const d=parseFloat(u.replace("px",""));return function(f){this.blurRadius(d*.5);const v=Konva$1.Filters;v&&v.Blur&&v.Blur.call(this,f)}}case"brightness":{const d=u.includes("%")?parseFloat(u)/100:parseFloat(u);return function(f){this.brightness(d);const v=Konva$1.Filters;v&&v.Brightness&&v.Brightness.call(this,f)}}case"contrast":{const d=parseFloat(u);return function(f){const v=100*(Math.sqrt(d)-1);this.contrast(v);const w=Konva$1.Filters;w&&w.Contrast&&w.Contrast.call(this,f)}}case"grayscale":return function(d){const f=Konva$1.Filters;f&&f.Grayscale&&f.Grayscale.call(this,d)};case"sepia":return function(d){const f=Konva$1.Filters;f&&f.Sepia&&f.Sepia.call(this,d)};case"invert":return function(d){const f=Konva$1.Filters;f&&f.Invert&&f.Invert.call(this,d)};default:Util.warn(`CSS filter "${o}" is not supported in fallback mode. Consider using function filters for better compatibility.`);break}}return()=>{}}const ABSOLUTE_OPACITY="absoluteOpacity",ALL_LISTENERS="allEventListeners",ABSOLUTE_TRANSFORM="absoluteTransform",ABSOLUTE_SCALE="absoluteScale",CANVAS="canvas",CHANGE="Change",CHILDREN="children",KONVA="konva",LISTENING="listening",MOUSEENTER$1="mouseenter",MOUSELEAVE$1="mouseleave",POINTERENTER$1="pointerenter",POINTERLEAVE$1="pointerleave",TOUCHENTER="touchenter",TOUCHLEAVE="touchleave",SET="set",SHAPE="Shape",SPACE$1=" ",STAGE$1="stage",TRANSFORM="transform",UPPER_STAGE="Stage",VISIBLE="visible",TRANSFORM_CHANGE_STR$1=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(SPACE$1);let idCounter$1=1,Node$1=class fd{constructor(t){this._id=idCounter$1++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===TRANSFORM||t===ABSOLUTE_TRANSFORM)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,n){let o=this._cache.get(t);return(o===void 0||(t===TRANSFORM||t===ABSOLUTE_TRANSFORM)&&o.dirty===!0)&&(o=n.call(this),this._cache.set(t,o)),o}_calculate(t,n,o){if(!this._attachedDepsListeners.get(t)){const u=n.map(d=>d+"Change.konva").join(SPACE$1);this.on(u,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,o)}_getCanvasCache(){return this._cache.get(CANVAS)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===ABSOLUTE_TRANSFORM&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(CANVAS)){const{scene:t,filter:n,hit:o}=this._cache.get(CANVAS);Util.releaseCanvas(t._canvas,n._canvas,o._canvas),this._cache.delete(CANVAS)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){const n=t||{};let o={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(o=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let u=Math.ceil(n.width||o.width),d=Math.ceil(n.height||o.height),f=n.pixelRatio,v=n.x===void 0?Math.floor(o.x):n.x,w=n.y===void 0?Math.floor(o.y):n.y,E=n.offset||0,C=n.drawBorder||!1,_=n.hitCanvasPixelRatio||1;if(!u||!d){Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const D=Math.abs(Math.round(o.x)-v)>.5?1:0,O=Math.abs(Math.round(o.y)-w)>.5?1:0;u+=E*2+D,d+=E*2+O,v-=E,w-=E;const M=new SceneCanvas({pixelRatio:f,width:u,height:d}),N=new SceneCanvas({pixelRatio:f,width:0,height:0,willReadFrequently:!0}),I=new HitCanvas({pixelRatio:_,width:u,height:d}),B=M.getContext(),V=I.getContext(),j=new SceneCanvas({width:M.width/M.pixelRatio+Math.abs(v),height:M.height/M.pixelRatio+Math.abs(w),pixelRatio:M.pixelRatio}),q=j.getContext();return I.isCache=!0,M.isCache=!0,this._cache.delete(CANVAS),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(M.getContext()._context.imageSmoothingEnabled=!1,N.getContext()._context.imageSmoothingEnabled=!1),B.save(),V.save(),q.save(),B.translate(-v,-w),V.translate(-v,-w),q.translate(-v,-w),j.x=v,j.y=w,this._isUnderCache=!0,this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY),this._clearSelfAndDescendantCache(ABSOLUTE_SCALE),this.drawScene(M,this,j),this.drawHit(I,this),this._isUnderCache=!1,B.restore(),V.restore(),C&&(B.save(),B.beginPath(),B.rect(0,0,u,d),B.closePath(),B.setAttr("strokeStyle","red"),B.setAttr("lineWidth",5),B.stroke(),B.restore()),Util.releaseCanvas(j._canvas),this._cache.set(CANVAS,{scene:M,filter:N,hit:I,x:v,y:w}),this._requestDraw(),this}isCached(){return this._cache.has(CANVAS)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,n){const o=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}];let u=1/0,d=1/0,f=-1/0,v=-1/0;const w=this.getAbsoluteTransform(n);return o.forEach(function(E){const C=w.point(E);u===void 0&&(u=f=C.x,d=v=C.y),u=Math.min(u,C.x),d=Math.min(d,C.y),f=Math.max(f,C.x),v=Math.max(v,C.y)}),{x:u,y:d,width:f-u,height:v-d}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();t.translate(n.x,n.y);const o=this._getCachedSceneCanvas(),u=o.pixelRatio;t.drawImage(o._canvas,0,0,o.width/u,o.height/u),t.restore()}_drawCachedHitCanvas(t){const n=this._getCanvasCache(),o=n.hit;t.save(),t.translate(n.x,n.y),t.drawImage(o._canvas,0,0,o.width/o.pixelRatio,o.height/o.pixelRatio),t.restore()}_getCachedSceneCanvas(){let t=this.filters(),n=this._getCanvasCache(),o=n.scene,u=n.filter,d=u.getContext(),f,v,w,E;if(!t||t.length===0)return o;if(this._filterUpToDate)return u;let C=!0;for(let D=0;D<t.length;D++)if(typeof t[D]=="string"&&isCSSFiltersSupported(),typeof t[D]!="string"||!isCSSFiltersSupported()){C=!1;break}const _=o.pixelRatio;if(u.setSize(o.width/o.pixelRatio,o.height/o.pixelRatio),C){const D=t.join(" ");return d.save(),d.setAttr("filter",D),d.drawImage(o._canvas,0,0,o.getWidth()/_,o.getHeight()/_),d.restore(),this._filterUpToDate=!0,u}try{for(f=t.length,d.clear(),d.drawImage(o._canvas,0,0,o.getWidth()/_,o.getHeight()/_),v=d.getImageData(0,0,u.getWidth(),u.getHeight()),w=0;w<f;w++)E=t[w],typeof E=="string"&&(E=parseCSSFilters(E)),E.call(this,v),d.putImageData(v,0,0)}catch(D){Util.error("Unable to apply filter. "+D.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,u}on(t,n){if(this._cache&&this._cache.delete(ALL_LISTENERS),arguments.length===3)return this._delegate.apply(this,arguments);const o=t.split(SPACE$1);for(let u=0;u<o.length;u++){const f=o[u].split("."),v=f[0],w=f[1]||"";this.eventListeners[v]||(this.eventListeners[v]=[]),this.eventListeners[v].push({name:w,handler:n})}return this}off(t,n){let o=(t||"").split(SPACE$1),u=o.length,d,f,v,w,E,C;if(this._cache&&this._cache.delete(ALL_LISTENERS),!t)for(f in this.eventListeners)this._off(f);for(d=0;d<u;d++)if(v=o[d],w=v.split("."),E=w[0],C=w[1],E)this.eventListeners[E]&&this._off(E,C,n);else for(f in this.eventListeners)this._off(f,C,n);return this}dispatchEvent(t){const n={target:this,type:t.type,evt:t};return this.fire(t.type,n),this}addEventListener(t,n){return this.on(t,function(o){n.call(this,o.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,n,o){const u=this;this.on(t,function(d){const f=d.target.findAncestors(n,!0,u);for(let v=0;v<f.length;v++)d=Util.cloneObject(d),d.currentTarget=f[v],o.call(f[v],d)})}remove(){return this.isDragging()&&this.stopDrag(),DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM),this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY),this._clearSelfAndDescendantCache(ABSOLUTE_SCALE),this._clearSelfAndDescendantCache(STAGE$1),this._clearSelfAndDescendantCache(VISIBLE),this._clearSelfAndDescendantCache(LISTENING)}_remove(){this._clearCaches();const t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){const n="get"+Util._capitalize(t);return Util._isFunction(this[n])?this[n]():this.attrs[t]}getAncestors(){let t=this.getParent(),n=[];for(;t;)n.push(t),t=t.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{let n,o;if(!t)return this;for(n in t)n!==CHILDREN&&(o=SET+Util._capitalize(n),Util._isFunction(this[o])?this[o](t[n]):this._setAttr(n,t[n]))}),this}isListening(){return this._getCache(LISTENING,this._isListening)}_isListening(t){if(!this.listening())return!1;const o=this.getParent();return o&&o!==t&&this!==t?o._isListening(t):!0}isVisible(){return this._getCache(VISIBLE,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const o=this.getParent();return o&&o!==t&&this!==t?o._isVisible(t):!0}shouldDrawHit(t,n=!1){if(t)return this._isVisible(t)&&this._isListening(t);const o=this.getLayer();let u=!1;DD._dragElements.forEach(f=>{f.dragStatus==="dragging"&&(f.node.nodeType==="Stage"||f.node.getLayer()===o)&&(u=!0)});const d=!n&&!Konva$1.hitOnDragEnabled&&(u||Konva$1.isTransforming());return this.isListening()&&this.isVisible()&&!d}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let t=this.getDepth(),n=this,o=0,u,d,f,v;function w(C){for(u=[],d=C.length,f=0;f<d;f++)v=C[f],o++,v.nodeType!==SHAPE&&(u=u.concat(v.getChildren().slice())),v._id===n._id&&(f=d);u.length>0&&u[0].getDepth()<=t&&w(u)}const E=this.getStage();return n.nodeType!==UPPER_STAGE&&E&&w(E.getChildren()),o}getDepth(){let t=0,n=this.parent;for(;n;)t++,n=n.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(TRANSFORM),this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const t=this.getStage();if(!t)return null;const n=t.getPointerPosition();if(!n)return null;const o=this.getAbsoluteTransform().copy();return o.invert(),o.point(n)}getAbsolutePosition(t){let n=!1,o=this.parent;for(;o;){if(o.isCached()){n=!0;break}o=o.parent}n&&!t&&(t=!0);const u=this.getAbsoluteTransform(t).getMatrix(),d=new Transform,f=this.offset();return d.m=u.slice(),d.translate(f.x,f.y),d.getTranslation()}setAbsolutePosition(t){const{x:n,y:o,...u}=this._clearTransform();this.attrs.x=n,this.attrs.y=o,this._clearCache(TRANSFORM);const d=this._getAbsoluteTransform().copy();return d.invert(),d.translate(t.x,t.y),t={x:this.attrs.x+d.getTranslation().x,y:this.attrs.y+d.getTranslation().y},this._setTransform(u),this.setPosition({x:t.x,y:t.y}),this._clearCache(TRANSFORM),this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM),this}_setTransform(t){let n;for(n in t)this.attrs[n]=t[n]}_clearTransform(){const t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){let n=t.x,o=t.y,u=this.x(),d=this.y();return n!==void 0&&(u+=n),o!==void 0&&(d+=o),this.setPosition({x:u,y:d}),this}_eachAncestorReverse(t,n){let o=[],u=this.getParent(),d,f;if(!(n&&n._id===this._id)){for(o.unshift(this);u&&(!n||u._id!==n._id);)o.unshift(u),u=u.parent;for(d=o.length,f=0;f<d;f++)t(o[f])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return Util.warn("Node has no parent. moveToTop function is ignored."),!1;const t=this.index,n=this.parent.getChildren().length;return t<n-1?(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return Util.warn("Node has no parent. moveUp function is ignored."),!1;const t=this.index,n=this.parent.getChildren().length;return t<n-1?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return Util.warn("Node has no parent. moveDown function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(t){if(!this.parent)return Util.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&Util.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(ABSOLUTE_OPACITY,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let t=this.opacity();const n=this.getParent();return n&&!n._isUnderCache&&(t*=n.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){let t=this.getAttrs(),n,o,u,d,f;const v={attrs:{},className:this.getClassName()};for(n in t)o=t[n],f=Util.isObject(o)&&!Util._isPlainObject(o)&&!Util._isArray(o),!f&&(u=typeof this[n]=="function"&&this[n],delete t[n],d=u?u.call(this):null,t[n]=o,d!==o&&(v.attrs[n]=o));return Util._prepareToStringify(v)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,n,o){const u=[];n&&this._isMatch(t)&&u.push(this);let d=this.parent;for(;d;){if(d===o)return u;d._isMatch(t)&&u.push(d),d=d.parent}return u}isAncestorOf(t){return!1}findAncestor(t,n,o){return this.findAncestors(t,n,o)[0]}_isMatch(t){if(!t)return!1;if(typeof t=="function")return t(this);let n=t.replace(/ /g,"").split(","),o=n.length,u,d;for(u=0;u<o;u++)if(d=n[u],Util.isValidSelector(d)||(Util.warn('Selector "'+d+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),Util.warn("Konva is awesome, right?")),d.charAt(0)==="#"){if(this.id()===d.slice(1))return!0}else if(d.charAt(0)==="."){if(this.hasName(d.slice(1)))return!0}else if(this.className===d||this.nodeType===d)return!0;return!1}getLayer(){const t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(STAGE$1,this._getStage)}_getStage(){const t=this.getParent();return t?t.getStage():null}fire(t,n={},o){return n.target=n.target||this,o?this._fireAndBubble(t,n):this._fire(t,n),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(ABSOLUTE_TRANSFORM,this._getAbsoluteTransform)}_getAbsoluteTransform(t){let n;if(t)return n=new Transform,this._eachAncestorReverse(function(o){const u=o.transformsEnabled();u==="all"?n.multiply(o.getTransform()):u==="position"&&n.translate(o.x()-o.offsetX(),o.y()-o.offsetY())},t),n;{n=this._cache.get(ABSOLUTE_TRANSFORM)||new Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();const o=this.transformsEnabled();if(o==="all")n.multiply(this.getTransform());else if(o==="position"){const u=this.attrs.x||0,d=this.attrs.y||0,f=this.attrs.offsetX||0,v=this.attrs.offsetY||0;n.translate(u-f,d-v)}return n.dirty=!1,n}}getAbsoluteScale(t){let n=this;for(;n;)n._isUnderCache&&(t=n),n=n.getParent();const u=this.getAbsoluteTransform(t).decompose();return{x:u.scaleX,y:u.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(TRANSFORM,this._getTransform)}_getTransform(){var t,n;const o=this._cache.get(TRANSFORM)||new Transform;o.reset();const u=this.x(),d=this.y(),f=Konva$1.getAngle(this.rotation()),v=(t=this.attrs.scaleX)!==null&&t!==void 0?t:1,w=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,E=this.attrs.skewX||0,C=this.attrs.skewY||0,_=this.attrs.offsetX||0,D=this.attrs.offsetY||0;return(u!==0||d!==0)&&o.translate(u,d),f!==0&&o.rotate(f),(E!==0||C!==0)&&o.skew(E,C),(v!==1||w!==1)&&o.scale(v,w),(_!==0||D!==0)&&o.translate(-1*_,-1*D),o.dirty=!1,o}clone(t){let n=Util.cloneObject(this.attrs),o,u,d,f,v;for(o in t)n[o]=t[o];const w=new this.constructor(n);for(o in this.eventListeners)for(u=this.eventListeners[o],d=u.length,f=0;f<d;f++)v=u[f],v.name.indexOf(KONVA)<0&&(w.eventListeners[o]||(w.eventListeners[o]=[]),w.eventListeners[o].push(v));return w}_toKonvaCanvas(t){t=t||{};const n=this.getClientRect(),o=this.getStage(),u=t.x!==void 0?t.x:Math.floor(n.x),d=t.y!==void 0?t.y:Math.floor(n.y),f=t.pixelRatio||1,v=new SceneCanvas({width:t.width||Math.ceil(n.width)||(o?o.width():0),height:t.height||Math.ceil(n.height)||(o?o.height():0),pixelRatio:f}),w=v.getContext(),E=new SceneCanvas({width:v.width/v.pixelRatio+Math.abs(u),height:v.height/v.pixelRatio+Math.abs(d),pixelRatio:v.pixelRatio});return t.imageSmoothingEnabled===!1&&(w._context.imageSmoothingEnabled=!1),w.save(),(u||d)&&w.translate(-1*u,-1*d),this.drawScene(v,void 0,E),w.restore(),v}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};const n=t.mimeType||null,o=t.quality||null,u=this._toKonvaCanvas(t).toDataURL(n,o);return t.callback&&t.callback(u),u}toImage(t){return new Promise((n,o)=>{try{const u=t?.callback;u&&delete t.callback,Util._urlToImage(this.toDataURL(t),function(d){n(d),u?.(d)})}catch(u){o(u)}})}toBlob(t){return new Promise((n,o)=>{try{const u=t?.callback;u&&delete t.callback,this.toCanvas(t).toBlob(d=>{n(d),u?.(d)},t?.mimeType,t?.quality)}catch(u){o(u)}})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Konva$1.dragDistance}_off(t,n,o){let u=this.eventListeners[t],d,f,v;for(d=0;d<u.length;d++)if(f=u[d].name,v=u[d].handler,(f!=="konva"||n==="konva")&&(!n||f===n)&&(!o||o===v)){if(u.splice(d,1),u.length===0){delete this.eventListeners[t];break}d--}}_fireChangeEvent(t,n,o){this._fire(t+CHANGE,{oldVal:n,newVal:o})}addName(t){if(!this.hasName(t)){const n=this.name(),o=n?n+" "+t:t;this.name(o)}return this}hasName(t){if(!t)return!1;const n=this.name();return n?(n||"").split(/\s/g).indexOf(t)!==-1:!1}removeName(t){const n=(this.name()||"").split(/\s/g),o=n.indexOf(t);return o!==-1&&(n.splice(o,1),this.name(n.join(" "))),this}setAttr(t,n){const o=this[SET+Util._capitalize(t)];return Util._isFunction(o)?o.call(this,n):this._setAttr(t,n),this}_requestDraw(){if(Konva$1.autoDrawEnabled){const t=this.getLayer()||this.getStage();t?.batchDraw()}}_setAttr(t,n){const o=this.attrs[t];o===n&&!Util.isObject(n)||(n==null?delete this.attrs[t]:this.attrs[t]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(t,o,n),this._requestDraw())}_setComponentAttr(t,n,o){let u;o!==void 0&&(u=this.attrs[t],u||(this.attrs[t]=this.getAttr(t)),this.attrs[t][n]=o,this._fireChangeEvent(t,u,o))}_fireAndBubble(t,n,o){n&&this.nodeType===SHAPE&&(n.target=this);const u=[MOUSEENTER$1,MOUSELEAVE$1,POINTERENTER$1,POINTERLEAVE$1,TOUCHENTER,TOUCHLEAVE];if(!(u.indexOf(t)!==-1&&(o&&(this===o||this.isAncestorOf&&this.isAncestorOf(o))||this.nodeType==="Stage"&&!o))){this._fire(t,n);const f=u.indexOf(t)!==-1&&o&&o.isAncestorOf&&o.isAncestorOf(this)&&!o.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!f&&(o&&o.parent?this._fireAndBubble.call(this.parent,t,n,o):this._fireAndBubble.call(this.parent,t,n))}}_getProtoListeners(t){var n,o;const{nodeType:u}=this,d=fd.protoListenerMap.get(u)||{};let f=d?.[t];if(f===void 0){f=[];let v=Object.getPrototypeOf(this);for(;v;){const w=(o=(n=v.eventListeners)===null||n===void 0?void 0:n[t])!==null&&o!==void 0?o:[];f.push(...w),v=Object.getPrototypeOf(v)}d[t]=f,fd.protoListenerMap.set(u,d)}return f}_fire(t,n){n=n||{},n.currentTarget=this,n.type=t;const o=this._getProtoListeners(t);if(o)for(let d=0;d<o.length;d++)o[d].handler.call(this,n);const u=this.eventListeners[t];if(u)for(let d=0;d<u.length;d++)u[d].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){const n=t?t.pointerId:void 0,o=this.getStage(),u=this.getAbsolutePosition();if(!o)return;const d=o._getPointerById(n)||o._changedPointerPositions[0]||u;DD._dragElements.set(this._id,{node:this,startPointerPos:d,offset:{x:d.x-u.x,y:d.y-u.y},dragStatus:"ready",pointerId:n})}startDrag(t,n=!0){DD._dragElements.has(this._id)||this._createDragElement(t);const o=DD._dragElements.get(this._id);o.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},n)}_setDragPosition(t,n){const o=this.getStage()._getPointerById(n.pointerId);if(!o)return;let u={x:o.x-n.offset.x,y:o.y-n.offset.y};const d=this.dragBoundFunc();if(d!==void 0){const f=d.call(this,u,t);f?u=f:Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==u.x||this._lastPos.y!==u.y)&&(this.setAbsolutePosition(u),this._requestDraw()),this._lastPos=u}stopDrag(t){const n=DD._dragElements.get(this._id);n&&(n.dragStatus="stopped"),DD._endDragBefore(t),DD._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=DD._dragElements.get(this._id);return t?t.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){if(!(!(t.evt.button!==void 0)||Konva$1.dragButtons.indexOf(t.evt.button)>=0)||this.isDragging())return;let u=!1;DD._dragElements.forEach(d=>{this.isAncestorOf(d.node)&&(u=!0)}),u||this._createDragElement(t)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const n=DD._dragElements.get(this._id),o=n&&n.dragStatus==="dragging",u=n&&n.dragStatus==="ready";o?this.stopDrag():u&&DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const n=this.getStage();if(!n)return!1;const o={x:-t.x,y:-t.y,width:n.width()+2*t.x,height:n.height()+2*t.y};return Util.haveIntersection(o,this.getClientRect())}static create(t,n){return Util._isString(t)&&(t=JSON.parse(t)),this._createNode(t,n)}static _createNode(t,n){let o=fd.prototype.getClassName.call(t),u=t.children,d,f,v;n&&(t.attrs.container=n),Konva$1[o]||(Util.warn('Can not find a node with class name "'+o+'". Fallback to "Shape".'),o="Shape");const w=Konva$1[o];if(d=new w(t.attrs),u)for(f=u.length,v=0;v<f;v++)d.add(fd._createNode(u[v]));return d}};Node$1.protoListenerMap=new Map;Node$1.prototype.nodeType="Node";Node$1.prototype._attrsAffectingSize=[];Node$1.prototype.eventListeners={};Node$1.prototype.on.call(Node$1.prototype,TRANSFORM_CHANGE_STR$1,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(TRANSFORM),this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM)});Node$1.prototype.on.call(Node$1.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(VISIBLE)});Node$1.prototype.on.call(Node$1.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(LISTENING)});Node$1.prototype.on.call(Node$1.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY)});const addGetterSetter=Factory.addGetterSetter;addGetterSetter(Node$1,"zIndex");addGetterSetter(Node$1,"absolutePosition");addGetterSetter(Node$1,"position");addGetterSetter(Node$1,"x",0,getNumberValidator());addGetterSetter(Node$1,"y",0,getNumberValidator());addGetterSetter(Node$1,"globalCompositeOperation","source-over",getStringValidator());addGetterSetter(Node$1,"opacity",1,getNumberValidator());addGetterSetter(Node$1,"name","",getStringValidator());addGetterSetter(Node$1,"id","",getStringValidator());addGetterSetter(Node$1,"rotation",0,getNumberValidator());Factory.addComponentsGetterSetter(Node$1,"scale",["x","y"]);addGetterSetter(Node$1,"scaleX",1,getNumberValidator());addGetterSetter(Node$1,"scaleY",1,getNumberValidator());Factory.addComponentsGetterSetter(Node$1,"skew",["x","y"]);addGetterSetter(Node$1,"skewX",0,getNumberValidator());addGetterSetter(Node$1,"skewY",0,getNumberValidator());Factory.addComponentsGetterSetter(Node$1,"offset",["x","y"]);addGetterSetter(Node$1,"offsetX",0,getNumberValidator());addGetterSetter(Node$1,"offsetY",0,getNumberValidator());addGetterSetter(Node$1,"dragDistance",void 0,getNumberValidator());addGetterSetter(Node$1,"width",0,getNumberValidator());addGetterSetter(Node$1,"height",0,getNumberValidator());addGetterSetter(Node$1,"listening",!0,getBooleanValidator());addGetterSetter(Node$1,"preventDefault",!0,getBooleanValidator());addGetterSetter(Node$1,"filters",void 0,function(e){return this._filterUpToDate=!1,e});addGetterSetter(Node$1,"visible",!0,getBooleanValidator());addGetterSetter(Node$1,"transformsEnabled","all",getStringValidator());addGetterSetter(Node$1,"size");addGetterSetter(Node$1,"dragBoundFunc");addGetterSetter(Node$1,"draggable",!1,getBooleanValidator());Factory.backCompat(Node$1,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class Container extends Node$1{constructor(){super(...arguments),this.children=[]}getChildren(t){const n=this.children||[];return t?n.filter(t):n}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(t.length===0)return this;if(t.length>1){for(let o=0;o<t.length;o++)this.add(t[o]);return this}const n=t[0];return n.getParent()?(n.moveTo(this),this):(this._validateAdd(n),n.index=this.getChildren().length,n.parent=this,n._clearCaches(),this.getChildren().push(n),this._fire("add",{child:n}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){const n=this._generalFind(t,!0);return n.length>0?n[0]:void 0}_generalFind(t,n){const o=[];return this._descendants(u=>{const d=u._isMatch(t);return d&&o.push(u),!!(d&&n)}),o}_descendants(t){let n=!1;const o=this.getChildren();for(const u of o){if(n=t(u),n)return!0;if(u.hasChildren()&&(n=u._descendants(t),n))return!0}return!1}toObject(){const t=Node$1.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(n=>{t.children.push(n.toObject())}),t}isAncestorOf(t){let n=t.getParent();for(;n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(t){const n=Node$1.prototype.clone.call(this,t);return this.getChildren().forEach(function(o){n.add(o.clone())}),n}getAllIntersections(t){const n=[];return this.find("Shape").forEach(o=>{o.isVisible()&&o.intersects(t)&&n.push(o)}),n}_clearSelfAndDescendantCache(t){var n;super._clearSelfAndDescendantCache(t),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(o){o._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;(t=this.children)===null||t===void 0||t.forEach(function(n,o){n.index=o}),this._requestDraw()}drawScene(t,n,o){const u=this.getLayer(),d=t||u&&u.getCanvas(),f=d&&d.getContext(),v=this._getCanvasCache(),w=v&&v.scene,E=d&&d.isCache;if(!this.isVisible()&&!E)return this;if(w){f.save();const C=this.getAbsoluteTransform(n).getMatrix();f.transform(C[0],C[1],C[2],C[3],C[4],C[5]),this._drawCachedSceneCanvas(f),f.restore()}else this._drawChildren("drawScene",d,n,o);return this}drawHit(t,n){if(!this.shouldDrawHit(n))return this;const o=this.getLayer(),u=t||o&&o.hitCanvas,d=u&&u.getContext(),f=this._getCanvasCache();if(f&&f.hit){d.save();const w=this.getAbsoluteTransform(n).getMatrix();d.transform(w[0],w[1],w[2],w[3],w[4],w[5]),this._drawCachedHitCanvas(d),d.restore()}else this._drawChildren("drawHit",u,n);return this}_drawChildren(t,n,o,u){var d;const f=n&&n.getContext(),v=this.clipWidth(),w=this.clipHeight(),E=this.clipFunc(),C=typeof v=="number"&&typeof w=="number"||E,_=o===this;if(C){f.save();const O=this.getAbsoluteTransform(o);let M=O.getMatrix();f.transform(M[0],M[1],M[2],M[3],M[4],M[5]),f.beginPath();let N;if(E)N=E.call(this,f,this);else{const I=this.clipX(),B=this.clipY();f.rect(I||0,B||0,v,w)}f.clip.apply(f,N),M=O.copy().invert().getMatrix(),f.transform(M[0],M[1],M[2],M[3],M[4],M[5])}const D=!_&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";D&&(f.save(),f._applyGlobalCompositeOperation(this)),(d=this.children)===null||d===void 0||d.forEach(function(O){O[t](n,o,u)}),D&&f.restore(),C&&f.restore()}getClientRect(t={}){var n;const o=t.skipTransform,u=t.relativeTo;let d,f,v,w,E={x:1/0,y:1/0,width:0,height:0};const C=this;(n=this.children)===null||n===void 0||n.forEach(function(O){if(!O.visible())return;const M=O.getClientRect({relativeTo:C,skipShadow:t.skipShadow,skipStroke:t.skipStroke});M.width===0&&M.height===0||(d===void 0?(d=M.x,f=M.y,v=M.x+M.width,w=M.y+M.height):(d=Math.min(d,M.x),f=Math.min(f,M.y),v=Math.max(v,M.x+M.width),w=Math.max(w,M.y+M.height)))});const _=this.find("Shape");let D=!1;for(let O=0;O<_.length;O++)if(_[O]._isVisible(this)){D=!0;break}return D&&d!==void 0?E={x:d,y:f,width:v-d,height:w-f}:E={x:0,y:0,width:0,height:0},o?E:this._transformedRect(E,u)}}Factory.addComponentsGetterSetter(Container,"clip",["x","y","width","height"]);Factory.addGetterSetter(Container,"clipX",void 0,getNumberValidator());Factory.addGetterSetter(Container,"clipY",void 0,getNumberValidator());Factory.addGetterSetter(Container,"clipWidth",void 0,getNumberValidator());Factory.addGetterSetter(Container,"clipHeight",void 0,getNumberValidator());Factory.addGetterSetter(Container,"clipFunc");const Captures=new Map,SUPPORT_POINTER_EVENTS=Konva$1._global.PointerEvent!==void 0;function getCapturedShape(e){return Captures.get(e)}function createEvent(e){return{evt:e,pointerId:e.pointerId}}function hasPointerCapture(e,t){return Captures.get(e)===t}function setPointerCapture(e,t){releaseCapture(e),t.getStage()&&(Captures.set(e,t),SUPPORT_POINTER_EVENTS&&t._fire("gotpointercapture",createEvent(new PointerEvent("gotpointercapture"))))}function releaseCapture(e,t){const n=Captures.get(e);if(!n)return;const o=n.getStage();o&&o.content,Captures.delete(e),SUPPORT_POINTER_EVENTS&&n._fire("lostpointercapture",createEvent(new PointerEvent("lostpointercapture")))}const STAGE="Stage",STRING="string",PX="px",MOUSEOUT="mouseout",MOUSELEAVE="mouseleave",MOUSEOVER="mouseover",MOUSEENTER="mouseenter",MOUSEMOVE="mousemove",MOUSEDOWN="mousedown",MOUSEUP="mouseup",POINTERMOVE="pointermove",POINTERDOWN="pointerdown",POINTERUP="pointerup",POINTERCANCEL="pointercancel",LOSTPOINTERCAPTURE="lostpointercapture",POINTEROUT="pointerout",POINTERLEAVE="pointerleave",POINTEROVER="pointerover",POINTERENTER="pointerenter",CONTEXTMENU="contextmenu",TOUCHSTART="touchstart",TOUCHEND="touchend",TOUCHMOVE="touchmove",TOUCHCANCEL="touchcancel",WHEEL="wheel",MAX_LAYERS_NUMBER=5,EVENTS=[[MOUSEENTER,"_pointerenter"],[MOUSEDOWN,"_pointerdown"],[MOUSEMOVE,"_pointermove"],[MOUSEUP,"_pointerup"],[MOUSELEAVE,"_pointerleave"],[TOUCHSTART,"_pointerdown"],[TOUCHMOVE,"_pointermove"],[TOUCHEND,"_pointerup"],[TOUCHCANCEL,"_pointercancel"],[MOUSEOVER,"_pointerover"],[WHEEL,"_wheel"],[CONTEXTMENU,"_contextmenu"],[POINTERDOWN,"_pointerdown"],[POINTERMOVE,"_pointermove"],[POINTERUP,"_pointerup"],[POINTERCANCEL,"_pointercancel"],[POINTERLEAVE,"_pointerleave"],[LOSTPOINTERCAPTURE,"_lostpointercapture"]],EVENTS_MAP={mouse:{[POINTEROUT]:MOUSEOUT,[POINTERLEAVE]:MOUSELEAVE,[POINTEROVER]:MOUSEOVER,[POINTERENTER]:MOUSEENTER,[POINTERMOVE]:MOUSEMOVE,[POINTERDOWN]:MOUSEDOWN,[POINTERUP]:MOUSEUP,[POINTERCANCEL]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[POINTEROUT]:"touchout",[POINTERLEAVE]:"touchleave",[POINTEROVER]:"touchover",[POINTERENTER]:"touchenter",[POINTERMOVE]:TOUCHMOVE,[POINTERDOWN]:TOUCHSTART,[POINTERUP]:TOUCHEND,[POINTERCANCEL]:TOUCHCANCEL,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[POINTEROUT]:POINTEROUT,[POINTERLEAVE]:POINTERLEAVE,[POINTEROVER]:POINTEROVER,[POINTERENTER]:POINTERENTER,[POINTERMOVE]:POINTERMOVE,[POINTERDOWN]:POINTERDOWN,[POINTERUP]:POINTERUP,[POINTERCANCEL]:POINTERCANCEL,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},getEventType=e=>e.indexOf("pointer")>=0?"pointer":e.indexOf("touch")>=0?"touch":"mouse",getEventsMap=e=>{const t=getEventType(e);if(t==="pointer")return Konva$1.pointerEventsEnabled&&EVENTS_MAP.pointer;if(t==="touch")return EVENTS_MAP.touch;if(t==="mouse")return EVENTS_MAP.mouse};function checkNoClip(e={}){return(e.clipFunc||e.clipWidth||e.clipHeight)&&Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),e}const NO_POINTERS_MESSAGE="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",stages=[];let Stage$1=class extends Container{constructor(t){super(checkNoClip(t)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{checkNoClip(this.attrs)}),this._checkVisibility()}_validateAdd(t){const n=t.getType()==="Layer",o=t.getType()==="FastLayer";n||o||Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const t=this.visible()?"":"none";this.content.style.display=t}setContainer(t){if(typeof t===STRING){let n;if(t.charAt(0)==="."){const o=t.slice(1);t=document.getElementsByClassName(o)[0]}else t.charAt(0)!=="#"?n=t:n=t.slice(1),t=document.getElementById(n);if(!t)throw"Can not find container in document with id "+n}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const t=this.children,n=t.length;for(let o=0;o<n;o++)t[o].clear();return this}clone(t){return t||(t={}),t.container=typeof document<"u"&&document.createElement("div"),Container.prototype.clone.call(this,t)}destroy(){super.destroy();const t=this.content;t&&Util._isInDocument(t)&&this.container().removeChild(t);const n=stages.indexOf(this);return n>-1&&stages.splice(n,1),Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(Util.warn(NO_POINTERS_MESSAGE),null)}_getPointerById(t){return this._pointerPositions.find(n=>n.id===t)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(t){t={...t},t.x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();const n=new SceneCanvas({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),o=n.getContext()._context,u=this.children;return(t.x||t.y)&&o.translate(-1*t.x,-1*t.y),u.forEach(function(d){if(!d.isVisible())return;const f=d._toKonvaCanvas(t);o.drawImage(f._canvas,t.x,t.y,f.getWidth()/f.getPixelRatio(),f.getHeight()/f.getPixelRatio())}),n}getIntersection(t){if(!t)return null;const n=this.children,o=n.length,u=o-1;for(let d=u;d>=0;d--){const f=n[d].getIntersection(t);if(f)return f}return null}_resizeDOM(){const t=this.width(),n=this.height();this.content&&(this.content.style.width=t+PX,this.content.style.height=n+PX),this.bufferCanvas.setSize(t,n),this.bufferHitCanvas.setSize(t,n),this.children.forEach(o=>{o.setSize({width:t,height:n}),o.draw()})}add(t,...n){if(arguments.length>1){for(let u=0;u<arguments.length;u++)this.add(arguments[u]);return this}super.add(t);const o=this.children.length;return o>MAX_LAYERS_NUMBER&&Util.warn("The stage has "+o+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),Konva$1.isBrowser&&this.content.appendChild(t.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(t){return hasPointerCapture(t,this)}setPointerCapture(t){setPointerCapture(t,this)}releaseCapture(t){releaseCapture(t)}getLayers(){return this.children}_bindContentEvents(){Konva$1.isBrowser&&EVENTS.forEach(([t,n])=>{this.content.addEventListener(t,o=>{this[n](o)},{passive:!1})})}_pointerenter(t){this.setPointersPositions(t);const n=getEventsMap(t.type);n&&this._fire(n.pointerenter,{evt:t,target:this,currentTarget:this})}_pointerover(t){this.setPointersPositions(t);const n=getEventsMap(t.type);n&&this._fire(n.pointerover,{evt:t,target:this,currentTarget:this})}_getTargetShape(t){let n=this[t+"targetShape"];return n&&!n.getStage()&&(n=null),n}_pointerleave(t){const n=getEventsMap(t.type),o=getEventType(t.type);if(!n)return;this.setPointersPositions(t);const u=this._getTargetShape(o),d=!(Konva$1.isDragging()||Konva$1.isTransforming())||Konva$1.hitOnDragEnabled;u&&d?(u._fireAndBubble(n.pointerout,{evt:t}),u._fireAndBubble(n.pointerleave,{evt:t}),this._fire(n.pointerleave,{evt:t,target:this,currentTarget:this}),this[o+"targetShape"]=null):d&&(this._fire(n.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(n.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(t){const n=getEventsMap(t.type),o=getEventType(t.type);if(!n)return;this.setPointersPositions(t);let u=!1;this._changedPointerPositions.forEach(d=>{const f=this.getIntersection(d);if(DD.justDragged=!1,Konva$1["_"+o+"ListenClick"]=!0,!f||!f.isListening()){this[o+"ClickStartShape"]=void 0;return}Konva$1.capturePointerEventsEnabled&&f.setPointerCapture(d.id),this[o+"ClickStartShape"]=f,f._fireAndBubble(n.pointerdown,{evt:t,pointerId:d.id}),u=!0;const v=t.type.indexOf("touch")>=0;f.preventDefault()&&t.cancelable&&v&&t.preventDefault()}),u||this._fire(n.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(t){const n=getEventsMap(t.type),o=getEventType(t.type);if(!n)return;const u=t.type.indexOf("touch")>=0||t.pointerType==="touch";if(Konva$1.isDragging()&&DD.node.preventDefault()&&t.cancelable&&u&&t.preventDefault(),this.setPointersPositions(t),!(!(Konva$1.isDragging()||Konva$1.isTransforming())||Konva$1.hitOnDragEnabled))return;const f={};let v=!1;const w=this._getTargetShape(o);this._changedPointerPositions.forEach(E=>{const C=getCapturedShape(E.id)||this.getIntersection(E),_=E.id,D={evt:t,pointerId:_},O=w!==C;if(O&&w&&(w._fireAndBubble(n.pointerout,{...D},C),w._fireAndBubble(n.pointerleave,{...D},C)),C){if(f[C._id])return;f[C._id]=!0}C&&C.isListening()?(v=!0,O&&(C._fireAndBubble(n.pointerover,{...D},w),C._fireAndBubble(n.pointerenter,{...D},w),this[o+"targetShape"]=C),C._fireAndBubble(n.pointermove,{...D})):w&&(this._fire(n.pointerover,{evt:t,target:this,currentTarget:this,pointerId:_}),this[o+"targetShape"]=null)}),v||this._fire(n.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(t){const n=getEventsMap(t.type),o=getEventType(t.type);if(!n)return;this.setPointersPositions(t);const u=this[o+"ClickStartShape"],d=this[o+"ClickEndShape"],f={};let v=!1;this._changedPointerPositions.forEach(w=>{const E=getCapturedShape(w.id)||this.getIntersection(w);if(E){if(E.releaseCapture(w.id),f[E._id])return;f[E._id]=!0}const C=w.id,_={evt:t,pointerId:C};let D=!1;Konva$1["_"+o+"InDblClickWindow"]?(D=!0,clearTimeout(this[o+"DblTimeout"])):DD.justDragged||(Konva$1["_"+o+"InDblClickWindow"]=!0,clearTimeout(this[o+"DblTimeout"])),this[o+"DblTimeout"]=setTimeout(function(){Konva$1["_"+o+"InDblClickWindow"]=!1},Konva$1.dblClickWindow),E&&E.isListening()?(v=!0,this[o+"ClickEndShape"]=E,E._fireAndBubble(n.pointerup,{..._}),Konva$1["_"+o+"ListenClick"]&&u&&u===E&&(E._fireAndBubble(n.pointerclick,{..._}),D&&d&&d===E&&E._fireAndBubble(n.pointerdblclick,{..._}))):(this[o+"ClickEndShape"]=null,v||(this._fire(n.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),v=!0),Konva$1["_"+o+"ListenClick"]&&this._fire(n.pointerclick,{evt:t,target:this,currentTarget:this,pointerId:C}),D&&this._fire(n.pointerdblclick,{evt:t,target:this,currentTarget:this,pointerId:C}))}),v||this._fire(n.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),Konva$1["_"+o+"ListenClick"]=!1,t.cancelable&&o!=="touch"&&o!=="pointer"&&t.preventDefault()}_contextmenu(t){this.setPointersPositions(t);const n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(CONTEXTMENU,{evt:t}):this._fire(CONTEXTMENU,{evt:t,target:this,currentTarget:this})}_wheel(t){this.setPointersPositions(t);const n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(WHEEL,{evt:t}):this._fire(WHEEL,{evt:t,target:this,currentTarget:this})}_pointercancel(t){this.setPointersPositions(t);const n=getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());n&&n._fireAndBubble(POINTERUP,createEvent(t)),releaseCapture(t.pointerId)}_lostpointercapture(t){releaseCapture(t.pointerId)}setPointersPositions(t){const n=this._getContentPosition();let o=null,u=null;t=t||window.event,t.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,d=>{this._pointerPositions.push({id:d.identifier,x:(d.clientX-n.left)/n.scaleX,y:(d.clientY-n.top)/n.scaleY})}),Array.prototype.forEach.call(t.changedTouches||t.touches,d=>{this._changedPointerPositions.push({id:d.identifier,x:(d.clientX-n.left)/n.scaleX,y:(d.clientY-n.top)/n.scaleY})})):(o=(t.clientX-n.left)/n.scaleX,u=(t.clientY-n.top)/n.scaleY,this.pointerPos={x:o,y:u},this._pointerPositions=[{x:o,y:u,id:Util._getFirstPointerId(t)}],this._changedPointerPositions=[{x:o,y:u,id:Util._getFirstPointerId(t)}])}_setPointerPosition(t){Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!Konva$1.isBrowser)return;const t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}cache(){return Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(t){t.batchDraw()}),this}};Stage$1.prototype.nodeType=STAGE;_registerNode(Stage$1);Factory.addGetterSetter(Stage$1,"container");Konva$1.isBrowser&&document.addEventListener("visibilitychange",()=>{stages.forEach(e=>{e.batchDraw()})});const HAS_SHADOW="hasShadow",SHADOW_RGBA="shadowRGBA",patternImage="patternImage",linearGradient="linearGradient",radialGradient="radialGradient";let dummyContext$1;function getDummyContext$1(){return dummyContext$1||(dummyContext$1=Util.createCanvasElement().getContext("2d"),dummyContext$1)}const shapes={};function _fillFunc$2(e){const t=this.attrs.fillRule;t?e.fill(t):e.fill()}function _strokeFunc$2(e){e.stroke()}function _fillFuncHit(e){const t=this.attrs.fillRule;t?e.fill(t):e.fill()}function _strokeFuncHit(e){e.stroke()}function _clearHasShadowCache(){this._clearCache(HAS_SHADOW)}function _clearGetShadowRGBACache(){this._clearCache(SHADOW_RGBA)}function _clearFillPatternCache(){this._clearCache(patternImage)}function _clearLinearGradientCache(){this._clearCache(linearGradient)}function _clearRadialGradientCache(){this._clearCache(radialGradient)}class Shape extends Node$1{constructor(t){super(t);let n,o=0;for(;n=Util.getHitColor(),!(n&&!(n in shapes));)if(o++,o>=1e4){Util.warn("Failed to find a unique color key for a shape. Konva may work incorrectly. Most likely your browser is using canvas farbling. Consider disabling it."),n=Util.getRandomColor();break}this.colorKey=n,shapes[n]=this}getContext(){return Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(HAS_SHADOW,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(patternImage,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const n=getDummyContext$1().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(n&&n.setTransform){const o=new Transform;o.translate(this.fillPatternX(),this.fillPatternY()),o.rotate(Konva$1.getAngle(this.fillPatternRotation())),o.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),o.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const u=o.getMatrix(),d=typeof DOMMatrix>"u"?{a:u[0],b:u[1],c:u[2],d:u[3],e:u[4],f:u[5]}:new DOMMatrix(u);n.setTransform(d)}return n}}_getLinearGradient(){return this._getCache(linearGradient,this.__getLinearGradient)}__getLinearGradient(){const t=this.fillLinearGradientColorStops();if(t){const n=getDummyContext$1(),o=this.fillLinearGradientStartPoint(),u=this.fillLinearGradientEndPoint(),d=n.createLinearGradient(o.x,o.y,u.x,u.y);for(let f=0;f<t.length;f+=2)d.addColorStop(t[f],t[f+1]);return d}}_getRadialGradient(){return this._getCache(radialGradient,this.__getRadialGradient)}__getRadialGradient(){const t=this.fillRadialGradientColorStops();if(t){const n=getDummyContext$1(),o=this.fillRadialGradientStartPoint(),u=this.fillRadialGradientEndPoint(),d=n.createRadialGradient(o.x,o.y,this.fillRadialGradientStartRadius(),u.x,u.y,this.fillRadialGradientEndRadius());for(let f=0;f<t.length;f+=2)d.addColorStop(t[f],t[f+1]);return d}}getShadowRGBA(){return this._getCache(SHADOW_RGBA,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const t=Util.colorToRGBA(this.shadowColor());if(t)return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const t=this.hitStrokeWidth();return t==="auto"?this.hasStroke():this.strokeEnabled()&&!!t}intersects(t){const n=this.getStage();if(!n)return!1;const o=n.bufferHitCanvas;return o.getContext().clear(),this.drawHit(o,void 0,!0),o.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0}destroy(){return Node$1.prototype.destroy.call(this),delete shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(t){var n;if(!((n=this.attrs.perfectDrawEnabled)!==null&&n!==void 0?n:!0))return!1;const u=t||this.hasFill(),d=this.hasStroke(),f=this.getAbsoluteOpacity()!==1;if(u&&d&&f)return!0;const v=this.hasShadow(),w=this.shadowForStrokeEnabled();return!!(u&&d&&v&&w)}setStrokeHitEnabled(t){Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}getClientRect(t={}){let n=!1,o=this.getParent();for(;o;){if(o.isCached()){n=!0;break}o=o.getParent()}const u=t.skipTransform,d=t.relativeTo||n&&this.getStage()||void 0,f=this.getSelfRect(),w=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,E=f.width+w,C=f.height+w,_=!t.skipShadow&&this.hasShadow(),D=_?this.shadowOffsetX():0,O=_?this.shadowOffsetY():0,M=E+Math.abs(D),N=C+Math.abs(O),I=_&&this.shadowBlur()||0,B=M+I*2,V=N+I*2,j={width:B,height:V,x:-(w/2+I)+Math.min(D,0)+f.x,y:-(w/2+I)+Math.min(O,0)+f.y};return u?j:this._transformedRect(j,d)}drawScene(t,n,o){const u=this.getLayer(),d=t||u.getCanvas(),f=d.getContext(),v=this._getCanvasCache(),w=this.getSceneFunc(),E=this.hasShadow();let C;const _=n===this;if(!this.isVisible()&&!_)return this;if(v){f.save();const D=this.getAbsoluteTransform(n).getMatrix();return f.transform(D[0],D[1],D[2],D[3],D[4],D[5]),this._drawCachedSceneCanvas(f),f.restore(),this}if(!w)return this;if(f.save(),this._useBufferCanvas()){C=this.getStage();const D=o||C.bufferCanvas,O=D.getContext();o?(O.save(),O.setTransform(1,0,0,1,0,0),O.clearRect(0,0,D.width,D.height),O.restore()):O.clear(),O.save(),O._applyLineJoin(this),O._applyMiterLimit(this);const M=this.getAbsoluteTransform(n).getMatrix();O.transform(M[0],M[1],M[2],M[3],M[4],M[5]),w.call(this,O,this),O.restore();const N=D.pixelRatio;E&&f._applyShadow(this),_||(f._applyOpacity(this),f._applyGlobalCompositeOperation(this)),f.drawImage(D._canvas,D.x||0,D.y||0,D.width/N,D.height/N)}else{if(f._applyLineJoin(this),f._applyMiterLimit(this),!_){const D=this.getAbsoluteTransform(n).getMatrix();f.transform(D[0],D[1],D[2],D[3],D[4],D[5]),f._applyOpacity(this),f._applyGlobalCompositeOperation(this)}E&&f._applyShadow(this),w.call(this,f,this)}return f.restore(),this}drawHit(t,n,o=!1){if(!this.shouldDrawHit(n,o))return this;const u=this.getLayer(),d=t||u.hitCanvas,f=d&&d.getContext(),v=this.hitFunc()||this.sceneFunc(),w=this._getCanvasCache(),E=w&&w.hit;if(this.colorKey||Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),E){f.save();const _=this.getAbsoluteTransform(n).getMatrix();return f.transform(_[0],_[1],_[2],_[3],_[4],_[5]),this._drawCachedHitCanvas(f),f.restore(),this}if(!v)return this;if(f.save(),f._applyLineJoin(this),f._applyMiterLimit(this),!(this===n)){const _=this.getAbsoluteTransform(n).getMatrix();f.transform(_[0],_[1],_[2],_[3],_[4],_[5])}return v.call(this,f,this),f.restore(),this}drawHitFromCache(t=0){const n=this._getCanvasCache(),o=this._getCachedSceneCanvas(),u=n.hit,d=u.getContext(),f=u.getWidth(),v=u.getHeight();d.clear(),d.drawImage(o._canvas,0,0,f,v);try{const w=d.getImageData(0,0,f,v),E=w.data,C=E.length,_=Util._hexToRgb(this.colorKey);for(let D=0;D<C;D+=4)E[D+3]>t?(E[D]=_.r,E[D+1]=_.g,E[D+2]=_.b,E[D+3]=255):E[D+3]=0;d.putImageData(w,0,0)}catch(w){Util.error("Unable to draw hit graph from cached scene canvas. "+w.message)}return this}hasPointerCapture(t){return hasPointerCapture(t,this)}setPointerCapture(t){setPointerCapture(t,this)}releaseCapture(t){releaseCapture(t)}}Shape.prototype._fillFunc=_fillFunc$2;Shape.prototype._strokeFunc=_strokeFunc$2;Shape.prototype._fillFuncHit=_fillFuncHit;Shape.prototype._strokeFuncHit=_strokeFuncHit;Shape.prototype._centroid=!1;Shape.prototype.nodeType="Shape";_registerNode(Shape);Shape.prototype.eventListeners={};Shape.prototype.on.call(Shape.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",_clearHasShadowCache);Shape.prototype.on.call(Shape.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",_clearGetShadowRGBACache);Shape.prototype.on.call(Shape.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",_clearFillPatternCache);Shape.prototype.on.call(Shape.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",_clearLinearGradientCache);Shape.prototype.on.call(Shape.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",_clearRadialGradientCache);Factory.addGetterSetter(Shape,"stroke",void 0,getStringOrGradientValidator());Factory.addGetterSetter(Shape,"strokeWidth",2,getNumberValidator());Factory.addGetterSetter(Shape,"fillAfterStrokeEnabled",!1);Factory.addGetterSetter(Shape,"hitStrokeWidth","auto",getNumberOrAutoValidator());Factory.addGetterSetter(Shape,"strokeHitEnabled",!0,getBooleanValidator());Factory.addGetterSetter(Shape,"perfectDrawEnabled",!0,getBooleanValidator());Factory.addGetterSetter(Shape,"shadowForStrokeEnabled",!0,getBooleanValidator());Factory.addGetterSetter(Shape,"lineJoin");Factory.addGetterSetter(Shape,"lineCap");Factory.addGetterSetter(Shape,"miterLimit");Factory.addGetterSetter(Shape,"sceneFunc");Factory.addGetterSetter(Shape,"hitFunc");Factory.addGetterSetter(Shape,"dash");Factory.addGetterSetter(Shape,"dashOffset",0,getNumberValidator());Factory.addGetterSetter(Shape,"shadowColor",void 0,getStringValidator());Factory.addGetterSetter(Shape,"shadowBlur",0,getNumberValidator());Factory.addGetterSetter(Shape,"shadowOpacity",1,getNumberValidator());Factory.addComponentsGetterSetter(Shape,"shadowOffset",["x","y"]);Factory.addGetterSetter(Shape,"shadowOffsetX",0,getNumberValidator());Factory.addGetterSetter(Shape,"shadowOffsetY",0,getNumberValidator());Factory.addGetterSetter(Shape,"fillPatternImage");Factory.addGetterSetter(Shape,"fill",void 0,getStringOrGradientValidator());Factory.addGetterSetter(Shape,"fillPatternX",0,getNumberValidator());Factory.addGetterSetter(Shape,"fillPatternY",0,getNumberValidator());Factory.addGetterSetter(Shape,"fillLinearGradientColorStops");Factory.addGetterSetter(Shape,"strokeLinearGradientColorStops");Factory.addGetterSetter(Shape,"fillRadialGradientStartRadius",0);Factory.addGetterSetter(Shape,"fillRadialGradientEndRadius",0);Factory.addGetterSetter(Shape,"fillRadialGradientColorStops");Factory.addGetterSetter(Shape,"fillPatternRepeat","repeat");Factory.addGetterSetter(Shape,"fillEnabled",!0);Factory.addGetterSetter(Shape,"strokeEnabled",!0);Factory.addGetterSetter(Shape,"shadowEnabled",!0);Factory.addGetterSetter(Shape,"dashEnabled",!0);Factory.addGetterSetter(Shape,"strokeScaleEnabled",!0);Factory.addGetterSetter(Shape,"fillPriority","color");Factory.addComponentsGetterSetter(Shape,"fillPatternOffset",["x","y"]);Factory.addGetterSetter(Shape,"fillPatternOffsetX",0,getNumberValidator());Factory.addGetterSetter(Shape,"fillPatternOffsetY",0,getNumberValidator());Factory.addComponentsGetterSetter(Shape,"fillPatternScale",["x","y"]);Factory.addGetterSetter(Shape,"fillPatternScaleX",1,getNumberValidator());Factory.addGetterSetter(Shape,"fillPatternScaleY",1,getNumberValidator());Factory.addComponentsGetterSetter(Shape,"fillLinearGradientStartPoint",["x","y"]);Factory.addComponentsGetterSetter(Shape,"strokeLinearGradientStartPoint",["x","y"]);Factory.addGetterSetter(Shape,"fillLinearGradientStartPointX",0);Factory.addGetterSetter(Shape,"strokeLinearGradientStartPointX",0);Factory.addGetterSetter(Shape,"fillLinearGradientStartPointY",0);Factory.addGetterSetter(Shape,"strokeLinearGradientStartPointY",0);Factory.addComponentsGetterSetter(Shape,"fillLinearGradientEndPoint",["x","y"]);Factory.addComponentsGetterSetter(Shape,"strokeLinearGradientEndPoint",["x","y"]);Factory.addGetterSetter(Shape,"fillLinearGradientEndPointX",0);Factory.addGetterSetter(Shape,"strokeLinearGradientEndPointX",0);Factory.addGetterSetter(Shape,"fillLinearGradientEndPointY",0);Factory.addGetterSetter(Shape,"strokeLinearGradientEndPointY",0);Factory.addComponentsGetterSetter(Shape,"fillRadialGradientStartPoint",["x","y"]);Factory.addGetterSetter(Shape,"fillRadialGradientStartPointX",0);Factory.addGetterSetter(Shape,"fillRadialGradientStartPointY",0);Factory.addComponentsGetterSetter(Shape,"fillRadialGradientEndPoint",["x","y"]);Factory.addGetterSetter(Shape,"fillRadialGradientEndPointX",0);Factory.addGetterSetter(Shape,"fillRadialGradientEndPointY",0);Factory.addGetterSetter(Shape,"fillPatternRotation",0);Factory.addGetterSetter(Shape,"fillRule",void 0,getStringValidator());Factory.backCompat(Shape,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const BEFORE_DRAW="beforeDraw",DRAW="draw",INTERSECTION_OFFSETS=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],INTERSECTION_OFFSETS_LEN=INTERSECTION_OFFSETS.length;let Layer$1=class extends Container{constructor(t){super(t),this.canvas=new SceneCanvas,this.hitCanvas=new HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);const n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),t<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[t+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Node$1.prototype.moveToTop.call(this);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!Node$1.prototype.moveUp.call(this))return!1;const n=this.getStage();return!n||!n.content?!1:(n.content.removeChild(this.getNativeCanvasElement()),this.index<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Node$1.prototype.moveDown.call(this)){const t=this.getStage();if(t){const n=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),n[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Node$1.prototype.moveToBottom.call(this)){const t=this.getStage();if(t){const n=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),n[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const t=this.getNativeCanvasElement();return Node$1.prototype.remove.call(this),t&&t.parentNode&&Util._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:n}){return this.canvas.setSize(t,n),this.hitCanvas.setSize(t,n),this._setSmoothEnabled(),this}_validateAdd(t){const n=t.getType();n!=="Group"&&n!=="Shape"&&Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t={...t},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),Node$1.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;let n=1,o=!1;for(;;){for(let u=0;u<INTERSECTION_OFFSETS_LEN;u++){const d=INTERSECTION_OFFSETS[u],f=this._getIntersection({x:t.x+d.x*n,y:t.y+d.y*n}),v=f.shape;if(v)return v;if(o=!!f.antialiased,!f.antialiased)break}if(o)n+=1;else return null}}_getIntersection(t){const n=this.hitCanvas.pixelRatio,o=this.hitCanvas.context.getImageData(Math.round(t.x*n),Math.round(t.y*n),1,1).data,u=o[3];if(u===255){const d=Util.getHitColorKey(o[0],o[1],o[2]),f=shapes[d];return f?{shape:f}:{antialiased:!0}}else if(u>0)return{antialiased:!0};return{}}drawScene(t,n,o){const u=this.getLayer(),d=t||u&&u.getCanvas();return this._fire(BEFORE_DRAW,{node:this}),this.clearBeforeDraw()&&d.getContext().clear(),Container.prototype.drawScene.call(this,d,n,o),this._fire(DRAW,{node:this}),this}drawHit(t,n){const o=this.getLayer(),u=t||o&&o.hitCanvas;return o&&o.clearBeforeDraw()&&o.getHitCanvas().getContext().clear(),Container.prototype.drawHit.call(this,u,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const t=this.parent;!!this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}destroy(){return Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};Layer$1.prototype.nodeType="Layer";_registerNode(Layer$1);Factory.addGetterSetter(Layer$1,"imageSmoothingEnabled",!0);Factory.addGetterSetter(Layer$1,"clearBeforeDraw",!0);Factory.addGetterSetter(Layer$1,"hitGraphEnabled",!0,getBooleanValidator());class FastLayer extends Layer$1{constructor(t){super(t),this.listening(!1),Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}FastLayer.prototype.nodeType="FastLayer";_registerNode(FastLayer);class Group extends Container{_validateAdd(t){const n=t.getType();n!=="Group"&&n!=="Shape"&&Util.throw("You may only add groups and shapes to groups.")}}Group.prototype.nodeType="Group";_registerNode(Group);const now=(function(){return glob.performance&&glob.performance.now?function(){return glob.performance.now()}:function(){return new Date().getTime()}})();class Animation{constructor(t,n){this.id=Animation.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:now(),frameRate:0},this.func=t,this.setLayers(n)}setLayers(t){let n=[];return t&&(n=Array.isArray(t)?t:[t]),this.layers=n,this}getLayers(){return this.layers}addLayer(t){const n=this.layers,o=n.length;for(let u=0;u<o;u++)if(n[u]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){const n=Animation.animations,o=n.length;for(let u=0;u<o;u++)if(n[u].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=now(),Animation._addAnimation(this),this}stop(){return Animation._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){const n=t.id,o=this.animations,u=o.length;for(let d=0;d<u;d++)if(o[d].id===n){this.animations.splice(d,1);break}}static _runFrames(){const t={},n=this.animations;for(let o=0;o<n.length;o++){const u=n[o],d=u.layers,f=u.func;u._updateFrameObject(now());const v=d.length;let w;if(f?w=f.call(u,u.frame)!==!1:w=!0,!!w)for(let E=0;E<v;E++){const C=d[E];C._id!==void 0&&(t[C._id]=C)}}for(const o in t)t.hasOwnProperty(o)&&t[o].batchDraw()}static _animationLoop(){const t=Animation;t.animations.length?(t._runFrames(),Util.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,Util.requestAnimFrame(this._animationLoop))}}Animation.animations=[];Animation.animIdCounter=0;Animation.animRunning=!1;const blacklist={node:1,duration:1,easing:1,onFinish:1,yoyo:1},PAUSED=1,PLAYING=2,REVERSING=3,colorAttrs=["fill","stroke","shadowColor"];let idCounter=0;class TweenEngine{constructor(t,n,o,u,d,f,v){this.prop=t,this.propFunc=n,this.begin=u,this._pos=u,this.duration=f,this._change=0,this.prevPos=0,this.yoyo=v,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=o,this._change=d-this.begin,this.pause()}fire(t){const n=this[t];n&&n()}setTime(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}getTime(){return this._time}setPosition(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}getPosition(t){return t===void 0&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}play(){this.state=PLAYING,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=REVERSING,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const t=this.getTimer()-this._startTime;this.state===PLAYING?this.setTime(t):this.state===REVERSING&&this.setTime(this.duration-t)}pause(){this.state=PAUSED,this.fire("onPause")}getTimer(){return new Date().getTime()}}class Tween{constructor(t){const n=this,o=t.node,u=o._id,d=t.easing||Easings.Linear,f=!!t.yoyo;let v,w;typeof t.duration>"u"?v=.3:t.duration===0?v=.001:v=t.duration,this.node=o,this._id=idCounter++;const E=o.getLayer()||(o instanceof Konva$1.Stage?o.getLayers():null);E||Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new Animation(function(){n.tween.onEnterFrame()},E),this.tween=new TweenEngine(w,function(C){n._tweenFunc(C)},d,0,1,v*1e3,f),this._addListeners(),Tween.attrs[u]||(Tween.attrs[u]={}),Tween.attrs[u][this._id]||(Tween.attrs[u][this._id]={}),Tween.tweens[u]||(Tween.tweens[u]={});for(w in t)blacklist[w]===void 0&&this._addAttr(w,t[w]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset,this.onUpdate=t.onUpdate}_addAttr(t,n){const o=this.node,u=o._id;let d,f,v,w,E;const C=Tween.tweens[u][t];C&&delete Tween.attrs[u][C][t];let _=o.getAttr(t);if(Util._isArray(n))if(d=[],f=Math.max(n.length,_.length),t==="points"&&n.length!==_.length&&(n.length>_.length?(w=_,_=Util._prepareArrayForTween(_,n,o.closed())):(v=n,n=Util._prepareArrayForTween(n,_,o.closed()))),t.indexOf("fill")===0)for(let D=0;D<f;D++)if(D%2===0)d.push(n[D]-_[D]);else{const O=Util.colorToRGBA(_[D]);E=Util.colorToRGBA(n[D]),_[D]=O,d.push({r:E.r-O.r,g:E.g-O.g,b:E.b-O.b,a:E.a-O.a})}else for(let D=0;D<f;D++)d.push(n[D]-_[D]);else colorAttrs.indexOf(t)!==-1?(_=Util.colorToRGBA(_),E=Util.colorToRGBA(n),d={r:E.r-_.r,g:E.g-_.g,b:E.b-_.b,a:E.a-_.a}):d=n-_;Tween.attrs[u][this._id][t]={start:_,diff:d,end:n,trueEnd:v,trueStart:w},Tween.tweens[u][t]=this._id}_tweenFunc(t){const n=this.node,o=Tween.attrs[n._id][this._id];let u,d,f,v,w,E,C,_;for(u in o){if(d=o[u],f=d.start,v=d.diff,_=d.end,Util._isArray(f))if(w=[],C=Math.max(f.length,_.length),u.indexOf("fill")===0)for(E=0;E<C;E++)E%2===0?w.push((f[E]||0)+v[E]*t):w.push("rgba("+Math.round(f[E].r+v[E].r*t)+","+Math.round(f[E].g+v[E].g*t)+","+Math.round(f[E].b+v[E].b*t)+","+(f[E].a+v[E].a*t)+")");else for(E=0;E<C;E++)w.push((f[E]||0)+v[E]*t);else colorAttrs.indexOf(u)!==-1?w="rgba("+Math.round(f.r+v.r*t)+","+Math.round(f.g+v.g*t)+","+Math.round(f.b+v.b*t)+","+(f.a+v.a*t)+")":w=f+v*t;n.setAttr(u,w)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const t=this.node,n=Tween.attrs[t._id][this._id];n.points&&n.points.trueEnd&&t.setAttr("points",n.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const t=this.node,n=Tween.attrs[t._id][this._id];n.points&&n.points.trueStart&&t.points(n.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(t){return this.tween.seek(t*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const t=this.node._id,n=this._id,o=Tween.tweens[t];this.pause(),this.anim&&this.anim.stop();for(const u in o)delete Tween.tweens[t][u];delete Tween.attrs[t][n],Tween.tweens[t]&&(Object.keys(Tween.tweens[t]).length===0&&delete Tween.tweens[t],Object.keys(Tween.attrs[t]).length===0&&delete Tween.attrs[t])}}Tween.attrs={};Tween.tweens={};Node$1.prototype.to=function(e){const t=e.onFinish;e.node=this,e.onFinish=function(){this.destroy(),t&&t()},new Tween(e).play()};const Easings={BackEaseIn(e,t,n,o){return n*(e/=o)*e*((1.70158+1)*e-1.70158)+t},BackEaseOut(e,t,n,o){return n*((e=e/o-1)*e*((1.70158+1)*e+1.70158)+1)+t},BackEaseInOut(e,t,n,o){let u=1.70158;return(e/=o/2)<1?n/2*(e*e*(((u*=1.525)+1)*e-u))+t:n/2*((e-=2)*e*(((u*=1.525)+1)*e+u)+2)+t},ElasticEaseIn(e,t,n,o,u,d){let f=0;return e===0?t:(e/=o)===1?t+n:(d||(d=o*.3),!u||u<Math.abs(n)?(u=n,f=d/4):f=d/(2*Math.PI)*Math.asin(n/u),-(u*Math.pow(2,10*(e-=1))*Math.sin((e*o-f)*(2*Math.PI)/d))+t)},ElasticEaseOut(e,t,n,o,u,d){let f=0;return e===0?t:(e/=o)===1?t+n:(d||(d=o*.3),!u||u<Math.abs(n)?(u=n,f=d/4):f=d/(2*Math.PI)*Math.asin(n/u),u*Math.pow(2,-10*e)*Math.sin((e*o-f)*(2*Math.PI)/d)+n+t)},ElasticEaseInOut(e,t,n,o,u,d){let f=0;return e===0?t:(e/=o/2)===2?t+n:(d||(d=o*(.3*1.5)),!u||u<Math.abs(n)?(u=n,f=d/4):f=d/(2*Math.PI)*Math.asin(n/u),e<1?-.5*(u*Math.pow(2,10*(e-=1))*Math.sin((e*o-f)*(2*Math.PI)/d))+t:u*Math.pow(2,-10*(e-=1))*Math.sin((e*o-f)*(2*Math.PI)/d)*.5+n+t)},BounceEaseOut(e,t,n,o){return(e/=o)<1/2.75?n*(7.5625*e*e)+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},BounceEaseIn(e,t,n,o){return n-Easings.BounceEaseOut(o-e,0,n,o)+t},BounceEaseInOut(e,t,n,o){return e<o/2?Easings.BounceEaseIn(e*2,0,n,o)*.5+t:Easings.BounceEaseOut(e*2-o,0,n,o)*.5+n*.5+t},EaseIn(e,t,n,o){return n*(e/=o)*e+t},EaseOut(e,t,n,o){return-n*(e/=o)*(e-2)+t},EaseInOut(e,t,n,o){return(e/=o/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},StrongEaseIn(e,t,n,o){return n*(e/=o)*e*e*e*e+t},StrongEaseOut(e,t,n,o){return n*((e=e/o-1)*e*e*e*e+1)+t},StrongEaseInOut(e,t,n,o){return(e/=o/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t},Linear(e,t,n,o){return n*e/o+t}},Konva=Util._assign(Konva$1,{Util,Transform,Node:Node$1,Container,Stage:Stage$1,stages,Layer:Layer$1,FastLayer,Group,DD,Shape,shapes,Animation,Tween,Easings,Context,Canvas});class Arc extends Shape{_sceneFunc(t){const n=Konva$1.getAngle(this.angle()),o=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,n,o),t.arc(0,0,this.innerRadius(),n,0,!o),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),n=this.outerRadius(),o=this.clockwise(),u=Konva$1.getAngle(o?360-this.angle():this.angle()),d=Math.cos(Math.min(u,Math.PI)),f=1,v=Math.sin(Math.min(Math.max(Math.PI,u),3*Math.PI/2)),w=Math.sin(Math.min(u,Math.PI/2)),E=d*(d>0?t:n),C=f*n,_=v*(v>0?t:n),D=w*(w>0?n:t);return{x:E,y:o?-1*D:_,width:C-E,height:D-_}}}Arc.prototype._centroid=!0;Arc.prototype.className="Arc";Arc.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];_registerNode(Arc);Factory.addGetterSetter(Arc,"innerRadius",0,getNumberValidator());Factory.addGetterSetter(Arc,"outerRadius",0,getNumberValidator());Factory.addGetterSetter(Arc,"angle",0,getNumberValidator());Factory.addGetterSetter(Arc,"clockwise",!1,getBooleanValidator());function getControlPoints(e,t,n,o,u,d,f){const v=Math.sqrt(Math.pow(n-e,2)+Math.pow(o-t,2)),w=Math.sqrt(Math.pow(u-n,2)+Math.pow(d-o,2)),E=f*v/(v+w),C=f*w/(v+w),_=n-E*(u-e),D=o-E*(d-t),O=n+C*(u-e),M=o+C*(d-t);return[_,D,O,M]}function expandPoints(e,t){const n=e.length,o=[];for(let u=2;u<n-2;u+=2){const d=getControlPoints(e[u-2],e[u-1],e[u],e[u+1],e[u+2],e[u+3],t);isNaN(d[0])||(o.push(d[0]),o.push(d[1]),o.push(e[u]),o.push(e[u+1]),o.push(d[2]),o.push(d[3]))}return o}function getBezierExtremaPoints(e){const t=[[e[0],e[2],e[4],e[6]],[e[1],e[3],e[5],e[7]]],n=[];for(const o of t){const u=-3*o[0]+9*o[1]-9*o[2]+3*o[3];if(u!==0){const d=6*o[0]-12*o[1]+6*o[2],f=-3*o[0]+3*o[1],v=d*d-4*u*f;if(v>=0){const w=Math.sqrt(v);n.push((-d+w)/(2*u)),n.push((-d-w)/(2*u))}}}return n.filter(o=>o>0&&o<1).flatMap(o=>t.map(u=>{const d=1-o;return d*d*d*u[0]+3*d*d*o*u[1]+3*d*o*o*u[2]+o*o*o*u[3]}))}let Line$1=class extends Shape{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){const n=this.points(),o=n.length,u=this.tension(),d=this.closed(),f=this.bezier();if(!o)return;let v=0;if(t.beginPath(),t.moveTo(n[0],n[1]),u!==0&&o>4){const w=this.getTensionPoints(),E=w.length;for(v=d?0:4,d||t.quadraticCurveTo(w[0],w[1],w[2],w[3]);v<E-2;)t.bezierCurveTo(w[v++],w[v++],w[v++],w[v++],w[v++],w[v++]);d||t.quadraticCurveTo(w[E-2],w[E-1],n[o-2],n[o-1])}else if(f)for(v=2;v<o;)t.bezierCurveTo(n[v++],n[v++],n[v++],n[v++],n[v++],n[v++]);else for(v=2;v<o;v+=2)t.lineTo(n[v],n[v+1]);d?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():expandPoints(this.points(),this.tension())}_getTensionPointsClosed(){const t=this.points(),n=t.length,o=this.tension(),u=getControlPoints(t[n-2],t[n-1],t[0],t[1],t[2],t[3],o),d=getControlPoints(t[n-4],t[n-3],t[n-2],t[n-1],t[0],t[1],o),f=expandPoints(t,o);return[u[2],u[3]].concat(f).concat([d[0],d[1],t[n-2],t[n-1],d[2],d[3],u[0],u[1],t[0],t[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:this.bezier()?t=[t[0],t[1],...getBezierExtremaPoints(this.points()),t[t.length-2],t[t.length-1]]:t=this.points();let n=t[0],o=t[0],u=t[1],d=t[1],f,v;for(let w=0;w<t.length/2;w++)f=t[w*2],v=t[w*2+1],n=Math.min(n,f),o=Math.max(o,f),u=Math.min(u,v),d=Math.max(d,v);return{x:n,y:u,width:o-n,height:d-u}}};Line$1.prototype.className="Line";Line$1.prototype._attrsAffectingSize=["points","bezier","tension"];_registerNode(Line$1);Factory.addGetterSetter(Line$1,"closed",!1);Factory.addGetterSetter(Line$1,"bezier",!1);Factory.addGetterSetter(Line$1,"tension",0,getNumberValidator());Factory.addGetterSetter(Line$1,"points",[],getNumberArrayValidator());const tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]],getCubicArcLength=(e,t,n)=>{let o,u;const f=n/2;o=0;for(let v=0;v<20;v++)u=f*tValues[20][v]+f,o+=cValues[20][v]*BFunc(e,t,u);return f*o},getQuadraticArcLength=(e,t,n)=>{n===void 0&&(n=1);const o=e[0]-2*e[1]+e[2],u=t[0]-2*t[1]+t[2],d=2*e[1]-2*e[0],f=2*t[1]-2*t[0],v=4*(o*o+u*u),w=4*(o*d+u*f),E=d*d+f*f;if(v===0)return n*Math.sqrt(Math.pow(e[2]-e[0],2)+Math.pow(t[2]-t[0],2));const C=w/(2*v),_=E/v,D=n+C,O=_-C*C,M=D*D+O>0?Math.sqrt(D*D+O):0,N=C*C+O>0?Math.sqrt(C*C+O):0,I=C+Math.sqrt(C*C+O)!==0?O*Math.log(Math.abs((D+M)/(C+N))):0;return Math.sqrt(v)/2*(D*M-C*N+I)};function BFunc(e,t,n){const o=getDerivative(1,n,e),u=getDerivative(1,n,t),d=o*o+u*u;return Math.sqrt(d)}const getDerivative=(e,t,n)=>{const o=n.length-1;let u,d;if(o===0)return 0;if(e===0){d=0;for(let f=0;f<=o;f++)d+=binomialCoefficients[o][f]*Math.pow(1-t,o-f)*Math.pow(t,f)*n[f];return d}else{u=new Array(o);for(let f=0;f<o;f++)u[f]=o*(n[f+1]-n[f]);return getDerivative(e-1,t,u)}},t2length=(e,t,n)=>{let o=1,u=e/t,d=(e-n(u))/t,f=0;for(;o>.001;){const v=n(u+d),w=Math.abs(e-v)/t;if(w<o)o=w,u+=d;else{const E=n(u-d),C=Math.abs(e-E)/t;C<o?(o=C,u-=d):d/=2}if(f++,f>500)break}return u};class Path extends Shape{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Path.parsePathData(this.data()),this.pathLength=Path.getPathLength(this.dataArray)}_sceneFunc(t){const n=this.dataArray;t.beginPath();let o=!1;for(let u=0;u<n.length;u++){const d=n[u].command,f=n[u].points;switch(d){case"L":t.lineTo(f[0],f[1]);break;case"M":t.moveTo(f[0],f[1]);break;case"C":t.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5]);break;case"Q":t.quadraticCurveTo(f[0],f[1],f[2],f[3]);break;case"A":const v=f[0],w=f[1],E=f[2],C=f[3],_=f[4],D=f[5],O=f[6],M=f[7],N=E>C?E:C,I=E>C?1:E/C,B=E>C?C/E:1;t.translate(v,w),t.rotate(O),t.scale(I,B),t.arc(0,0,N,_,_+D,1-M),t.scale(1/I,1/B),t.rotate(-O),t.translate(-v,-w);break;case"z":o=!0,t.closePath();break}}!o&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)}getSelfRect(){let t=[];this.dataArray.forEach(function(w){if(w.command==="A"){const E=w.points[4],C=w.points[5],_=w.points[4]+C;let D=Math.PI/180;if(Math.abs(E-_)<D&&(D=Math.abs(E-_)),C<0)for(let O=E-D;O>_;O-=D){const M=Path.getPointOnEllipticalArc(w.points[0],w.points[1],w.points[2],w.points[3],O,0);t.push(M.x,M.y)}else for(let O=E+D;O<_;O+=D){const M=Path.getPointOnEllipticalArc(w.points[0],w.points[1],w.points[2],w.points[3],O,0);t.push(M.x,M.y)}}else if(w.command==="C")for(let E=0;E<=1;E+=.01){const C=Path.getPointOnCubicBezier(E,w.start.x,w.start.y,w.points[0],w.points[1],w.points[2],w.points[3],w.points[4],w.points[5]);t.push(C.x,C.y)}else t=t.concat(w.points)});let n=t[0],o=t[0],u=t[1],d=t[1],f,v;for(let w=0;w<t.length/2;w++)f=t[w*2],v=t[w*2+1],isNaN(f)||(n=Math.min(n,f),o=Math.max(o,f)),isNaN(v)||(u=Math.min(u,v),d=Math.max(d,v));return{x:n,y:u,width:o-n,height:d-u}}getLength(){return this.pathLength}getPointAtLength(t){return Path.getPointAtLengthOfDataArray(t,this.dataArray)}static getLineLength(t,n,o,u){return Math.sqrt((o-t)*(o-t)+(u-n)*(u-n))}static getPathLength(t){let n=0;for(let o=0;o<t.length;++o)n+=t[o].pathLength;return n}static getPointAtLengthOfDataArray(t,n){let o,u=0,d=n.length;if(!d)return null;for(;u<d&&t>n[u].pathLength;)t-=n[u].pathLength,++u;if(u===d)return o=n[u-1].points.slice(-2),{x:o[0],y:o[1]};if(t<.01)return n[u].command==="M"?(o=n[u].points.slice(0,2),{x:o[0],y:o[1]}):{x:n[u].start.x,y:n[u].start.y};const f=n[u],v=f.points;switch(f.command){case"L":return Path.getPointOnLine(t,f.start.x,f.start.y,v[0],v[1]);case"C":return Path.getPointOnCubicBezier(t2length(t,Path.getPathLength(n),N=>getCubicArcLength([f.start.x,v[0],v[2],v[4]],[f.start.y,v[1],v[3],v[5]],N)),f.start.x,f.start.y,v[0],v[1],v[2],v[3],v[4],v[5]);case"Q":return Path.getPointOnQuadraticBezier(t2length(t,Path.getPathLength(n),N=>getQuadraticArcLength([f.start.x,v[0],v[2]],[f.start.y,v[1],v[3]],N)),f.start.x,f.start.y,v[0],v[1],v[2],v[3]);case"A":const w=v[0],E=v[1],C=v[2],_=v[3],D=v[5],O=v[6];let M=v[4];return M+=D*t/f.pathLength,Path.getPointOnEllipticalArc(w,E,C,_,M,O)}return null}static getPointOnLine(t,n,o,u,d,f,v){f=f??n,v=v??o;const w=this.getLineLength(n,o,u,d);if(w<1e-10)return{x:n,y:o};if(u===n)return{x:f,y:v+(d>o?t:-t)};const E=(d-o)/(u-n),C=Math.sqrt(t*t/(1+E*E))*(u<n?-1:1),_=E*C;if(Math.abs(v-o-E*(f-n))<1e-10)return{x:f+C,y:v+_};const D=((f-n)*(u-n)+(v-o)*(d-o))/(w*w),O=n+D*(u-n),M=o+D*(d-o),N=this.getLineLength(f,v,O,M),I=Math.sqrt(t*t-N*N),B=Math.sqrt(I*I/(1+E*E))*(u<n?-1:1),V=E*B;return{x:O+B,y:M+V}}static getPointOnCubicBezier(t,n,o,u,d,f,v,w,E){function C(I){return I*I*I}function _(I){return 3*I*I*(1-I)}function D(I){return 3*I*(1-I)*(1-I)}function O(I){return(1-I)*(1-I)*(1-I)}const M=w*C(t)+f*_(t)+u*D(t)+n*O(t),N=E*C(t)+v*_(t)+d*D(t)+o*O(t);return{x:M,y:N}}static getPointOnQuadraticBezier(t,n,o,u,d,f,v){function w(O){return O*O}function E(O){return 2*O*(1-O)}function C(O){return(1-O)*(1-O)}const _=f*w(t)+u*E(t)+n*C(t),D=v*w(t)+d*E(t)+o*C(t);return{x:_,y:D}}static getPointOnEllipticalArc(t,n,o,u,d,f){const v=Math.cos(f),w=Math.sin(f),E={x:o*Math.cos(d),y:u*Math.sin(d)};return{x:t+(E.x*v-E.y*w),y:n+(E.x*w+E.y*v)}}static parsePathData(t){if(!t)return[];let n=t;const o=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(let _=0;_<o.length;_++)n=n.replace(new RegExp(o[_],"g"),"|"+o[_]);const u=n.split("|"),d=[],f=[];let v=0,w=0;const E=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let C;for(let _=1;_<u.length;_++){let D=u[_],O=D.charAt(0);for(D=D.slice(1),f.length=0;C=E.exec(D);)f.push(C[0]);let M=[],N=O==="A"||O==="a"?0:-1;for(let I=0,B=f.length;I<B;I++){const V=f[I];if(V==="00"){M.push(0,0),N>=0&&(N+=2,N>=7&&(N-=7));continue}if(N>=0){if(N===3){if(/^[01]{2}\d+(?:\.\d+)?$/.test(V)){M.push(parseInt(V[0],10)),M.push(parseInt(V[1],10)),M.push(parseFloat(V.slice(2))),N+=3,N>=7&&(N-=7);continue}if(V==="11"||V==="10"||V==="01"){M.push(parseInt(V[0],10)),M.push(parseInt(V[1],10)),N+=2,N>=7&&(N-=7);continue}if(V==="0"||V==="1"){M.push(parseInt(V,10)),N+=1,N>=7&&(N-=7);continue}}else if(N===4){if(/^[01]\d+(?:\.\d+)?$/.test(V)){M.push(parseInt(V[0],10)),M.push(parseFloat(V.slice(1))),N+=2,N>=7&&(N-=7);continue}if(V==="0"||V==="1"){M.push(parseInt(V,10)),N+=1,N>=7&&(N-=7);continue}}const j=parseFloat(V);isNaN(j)?M.push(0):M.push(j),N+=1,N>=7&&(N-=7)}else{const j=parseFloat(V);isNaN(j)?M.push(0):M.push(j)}}for(;M.length>0&&!isNaN(M[0]);){let I="",B=[];const V=v,j=w;let q,z,$,ee,ie,ae,pe,he,be,xe;switch(O){case"l":v+=M.shift(),w+=M.shift(),I="L",B.push(v,w);break;case"L":v=M.shift(),w=M.shift(),B.push(v,w);break;case"m":const Ee=M.shift(),we=M.shift();if(v+=Ee,w+=we,I="M",d.length>2&&d[d.length-1].command==="z"){for(let oe=d.length-2;oe>=0;oe--)if(d[oe].command==="M"){v=d[oe].points[0]+Ee,w=d[oe].points[1]+we;break}}B.push(v,w),O="l";break;case"M":v=M.shift(),w=M.shift(),I="M",B.push(v,w),O="L";break;case"h":v+=M.shift(),I="L",B.push(v,w);break;case"H":v=M.shift(),I="L",B.push(v,w);break;case"v":w+=M.shift(),I="L",B.push(v,w);break;case"V":w=M.shift(),I="L",B.push(v,w);break;case"C":B.push(M.shift(),M.shift(),M.shift(),M.shift()),v=M.shift(),w=M.shift(),B.push(v,w);break;case"c":B.push(v+M.shift(),w+M.shift(),v+M.shift(),w+M.shift()),v+=M.shift(),w+=M.shift(),I="C",B.push(v,w);break;case"S":z=v,$=w,q=d[d.length-1],q.command==="C"&&(z=v+(v-q.points[2]),$=w+(w-q.points[3])),B.push(z,$,M.shift(),M.shift()),v=M.shift(),w=M.shift(),I="C",B.push(v,w);break;case"s":z=v,$=w,q=d[d.length-1],q.command==="C"&&(z=v+(v-q.points[2]),$=w+(w-q.points[3])),B.push(z,$,v+M.shift(),w+M.shift()),v+=M.shift(),w+=M.shift(),I="C",B.push(v,w);break;case"Q":B.push(M.shift(),M.shift()),v=M.shift(),w=M.shift(),B.push(v,w);break;case"q":B.push(v+M.shift(),w+M.shift()),v+=M.shift(),w+=M.shift(),I="Q",B.push(v,w);break;case"T":z=v,$=w,q=d[d.length-1],q.command==="Q"&&(z=v+(v-q.points[0]),$=w+(w-q.points[1])),v=M.shift(),w=M.shift(),I="Q",B.push(z,$,v,w);break;case"t":z=v,$=w,q=d[d.length-1],q.command==="Q"&&(z=v+(v-q.points[0]),$=w+(w-q.points[1])),v+=M.shift(),w+=M.shift(),I="Q",B.push(z,$,v,w);break;case"A":ee=M.shift(),ie=M.shift(),ae=M.shift(),pe=M.shift(),he=M.shift(),be=v,xe=w,v=M.shift(),w=M.shift(),I="A",B=this.convertEndpointToCenterParameterization(be,xe,v,w,pe,he,ee,ie,ae);break;case"a":ee=M.shift(),ie=M.shift(),ae=M.shift(),pe=M.shift(),he=M.shift(),be=v,xe=w,v+=M.shift(),w+=M.shift(),I="A",B=this.convertEndpointToCenterParameterization(be,xe,v,w,pe,he,ee,ie,ae);break}d.push({command:I||O,points:B,start:{x:V,y:j},pathLength:this.calcLength(V,j,I||O,B)})}(O==="z"||O==="Z")&&d.push({command:"z",points:[],start:void 0,pathLength:0})}return d}static calcLength(t,n,o,u){let d,f,v,w;const E=Path;switch(o){case"L":return E.getLineLength(t,n,u[0],u[1]);case"C":return getCubicArcLength([t,u[0],u[2],u[4]],[n,u[1],u[3],u[5]],1);case"Q":return getQuadraticArcLength([t,u[0],u[2]],[n,u[1],u[3]],1);case"A":d=0;const C=u[4],_=u[5],D=u[4]+_;let O=Math.PI/180;if(Math.abs(C-D)<O&&(O=Math.abs(C-D)),f=E.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],C,0),_<0)for(w=C-O;w>D;w-=O)v=E.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],w,0),d+=E.getLineLength(f.x,f.y,v.x,v.y),f=v;else for(w=C+O;w<D;w+=O)v=E.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],w,0),d+=E.getLineLength(f.x,f.y,v.x,v.y),f=v;return v=E.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],D,0),d+=E.getLineLength(f.x,f.y,v.x,v.y),d}return 0}static convertEndpointToCenterParameterization(t,n,o,u,d,f,v,w,E){const C=E*(Math.PI/180),_=Math.cos(C)*(t-o)/2+Math.sin(C)*(n-u)/2,D=-1*Math.sin(C)*(t-o)/2+Math.cos(C)*(n-u)/2,O=_*_/(v*v)+D*D/(w*w);O>1&&(v*=Math.sqrt(O),w*=Math.sqrt(O));let M=Math.sqrt((v*v*(w*w)-v*v*(D*D)-w*w*(_*_))/(v*v*(D*D)+w*w*(_*_)));d===f&&(M*=-1),isNaN(M)&&(M=0);const N=M*v*D/w,I=M*-w*_/v,B=(t+o)/2+Math.cos(C)*N-Math.sin(C)*I,V=(n+u)/2+Math.sin(C)*N+Math.cos(C)*I,j=function(pe){return Math.sqrt(pe[0]*pe[0]+pe[1]*pe[1])},q=function(pe,he){return(pe[0]*he[0]+pe[1]*he[1])/(j(pe)*j(he))},z=function(pe,he){return(pe[0]*he[1]<pe[1]*he[0]?-1:1)*Math.acos(q(pe,he))},$=z([1,0],[(_-N)/v,(D-I)/w]),ee=[(_-N)/v,(D-I)/w],ie=[(-1*_-N)/v,(-1*D-I)/w];let ae=z(ee,ie);return q(ee,ie)<=-1&&(ae=Math.PI),q(ee,ie)>=1&&(ae=0),f===0&&ae>0&&(ae=ae-2*Math.PI),f===1&&ae<0&&(ae=ae+2*Math.PI),[B,V,v,w,$,ae,C,f]}}Path.prototype.className="Path";Path.prototype._attrsAffectingSize=["data"];_registerNode(Path);Factory.addGetterSetter(Path,"data");class Arrow extends Line$1{_sceneFunc(t){super._sceneFunc(t);const n=Math.PI*2,o=this.points();let u=o;const d=this.tension()!==0&&o.length>4;d&&(u=this.getTensionPoints());const f=this.pointerLength(),v=o.length;let w,E;if(d){const D=[u[u.length-4],u[u.length-3],u[u.length-2],u[u.length-1],o[v-2],o[v-1]],O=Path.calcLength(u[u.length-4],u[u.length-3],"C",D),M=Path.getPointOnQuadraticBezier(Math.min(1,1-f/O),D[0],D[1],D[2],D[3],D[4],D[5]);w=o[v-2]-M.x,E=o[v-1]-M.y}else w=o[v-2]-o[v-4],E=o[v-1]-o[v-3];const C=(Math.atan2(E,w)+n)%n,_=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(o[v-2],o[v-1]),t.rotate(C),t.moveTo(0,0),t.lineTo(-f,_/2),t.lineTo(-f,-_/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(o[0],o[1]),d?(w=(u[0]+u[2])/2-o[0],E=(u[1]+u[3])/2-o[1]):(w=o[2]-o[0],E=o[3]-o[1]),t.rotate((Math.atan2(-E,-w)+n)%n),t.moveTo(0,0),t.lineTo(-f,_/2),t.lineTo(-f,-_/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){const n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),n=this.pointerWidth()/2;return{x:t.x,y:t.y-n,width:t.width,height:t.height+n*2}}}Arrow.prototype.className="Arrow";_registerNode(Arrow);Factory.addGetterSetter(Arrow,"pointerLength",10,getNumberValidator());Factory.addGetterSetter(Arrow,"pointerWidth",10,getNumberValidator());Factory.addGetterSetter(Arrow,"pointerAtBeginning",!1);Factory.addGetterSetter(Arrow,"pointerAtEnding",!0);let Circle$1=class extends Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}};Circle$1.prototype._centroid=!0;Circle$1.prototype.className="Circle";Circle$1.prototype._attrsAffectingSize=["radius"];_registerNode(Circle$1);Factory.addGetterSetter(Circle$1,"radius",0,getNumberValidator());class Ellipse extends Shape{_sceneFunc(t){const n=this.radiusX(),o=this.radiusY();t.beginPath(),t.save(),n!==o&&t.scale(1,o/n),t.arc(0,0,n,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}Ellipse.prototype.className="Ellipse";Ellipse.prototype._centroid=!0;Ellipse.prototype._attrsAffectingSize=["radiusX","radiusY"];_registerNode(Ellipse);Factory.addComponentsGetterSetter(Ellipse,"radius",["x","y"]);Factory.addGetterSetter(Ellipse,"radiusX",0,getNumberValidator());Factory.addGetterSetter(Ellipse,"radiusY",0,getNumberValidator());let Image$2=class bp extends Shape{constructor(t){super(t),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",n=>{this._removeImageLoad(n.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&t.readyState===4||t&&t.addEventListener&&t.addEventListener("load",this._loadListener)}_removeImageLoad(t){t&&t.removeEventListener&&t.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const t=!!this.cornerRadius(),n=this.hasShadow();return t&&n?!0:super._useBufferCanvas(!0)}_sceneFunc(t){const n=this.getWidth(),o=this.getHeight(),u=this.cornerRadius(),d=this.attrs.image;let f;if(d){const v=this.attrs.cropWidth,w=this.attrs.cropHeight;v&&w?f=[d,this.cropX(),this.cropY(),v,w,0,0,n,o]:f=[d,0,0,n,o]}(this.hasFill()||this.hasStroke()||u)&&(t.beginPath(),u?Util.drawRoundedRectPath(t,n,o,u):t.rect(0,0,n,o),t.closePath(),t.fillStrokeShape(this)),d&&(u&&t.clip(),t.drawImage.apply(t,f))}_hitFunc(t){const n=this.width(),o=this.height(),u=this.cornerRadius();t.beginPath(),u?Util.drawRoundedRectPath(t,n,o,u):t.rect(0,0,n,o),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,n,o;return(o=(t=this.attrs.width)!==null&&t!==void 0?t:(n=this.image())===null||n===void 0?void 0:n.width)!==null&&o!==void 0?o:0}getHeight(){var t,n,o;return(o=(t=this.attrs.height)!==null&&t!==void 0?t:(n=this.image())===null||n===void 0?void 0:n.height)!==null&&o!==void 0?o:0}static fromURL(t,n,o=null){const u=Util.createImageElement();u.onload=function(){const d=new bp({image:u});n(d)},u.onerror=o,u.crossOrigin="Anonymous",u.src=t}};Image$2.prototype.className="Image";Image$2.prototype._attrsAffectingSize=["image"];_registerNode(Image$2);Factory.addGetterSetter(Image$2,"cornerRadius",0,getNumberOrArrayOfNumbersValidator(4));Factory.addGetterSetter(Image$2,"image");Factory.addComponentsGetterSetter(Image$2,"crop",["x","y","width","height"]);Factory.addGetterSetter(Image$2,"cropX",0,getNumberValidator());Factory.addGetterSetter(Image$2,"cropY",0,getNumberValidator());Factory.addGetterSetter(Image$2,"cropWidth",0,getNumberValidator());Factory.addGetterSetter(Image$2,"cropHeight",0,getNumberValidator());const ATTR_CHANGE_LIST$2=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],CHANGE_KONVA$1="Change.konva",NONE$1="none",UP="up",RIGHT$1="right",DOWN="down",LEFT$1="left",attrChangeListLen$1=ATTR_CHANGE_LIST$2.length;class Label extends Group{constructor(t){super(t),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){let n=this,o;const u=function(){n._sync()};for(o=0;o<attrChangeListLen$1;o++)t.on(ATTR_CHANGE_LIST$2[o]+CHANGE_KONVA$1,u)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let t=this.getText(),n=this.getTag(),o,u,d,f,v,w,E;if(t&&n){switch(o=t.width(),u=t.height(),d=n.pointerDirection(),f=n.pointerWidth(),E=n.pointerHeight(),v=0,w=0,d){case UP:v=o/2,w=-1*E;break;case RIGHT$1:v=o+f,w=u/2;break;case DOWN:v=o/2,w=u+E;break;case LEFT$1:v=-1*f,w=u/2;break}n.setAttrs({x:-1*v,y:-1*w,width:o,height:u}),t.setAttrs({x:-1*v,y:-1*w})}}}Label.prototype.className="Label";_registerNode(Label);class Tag extends Shape{_sceneFunc(t){const n=this.width(),o=this.height(),u=this.pointerDirection(),d=this.pointerWidth(),f=this.pointerHeight(),v=this.cornerRadius();let w=0,E=0,C=0,_=0;typeof v=="number"?w=E=C=_=Math.min(v,n/2,o/2):(w=Math.min(v[0]||0,n/2,o/2),E=Math.min(v[1]||0,n/2,o/2),_=Math.min(v[2]||0,n/2,o/2),C=Math.min(v[3]||0,n/2,o/2)),t.beginPath(),t.moveTo(w,0),u===UP&&(t.lineTo((n-d)/2,0),t.lineTo(n/2,-1*f),t.lineTo((n+d)/2,0)),t.lineTo(n-E,0),t.arc(n-E,E,E,Math.PI*3/2,0,!1),u===RIGHT$1&&(t.lineTo(n,(o-f)/2),t.lineTo(n+d,o/2),t.lineTo(n,(o+f)/2)),t.lineTo(n,o-_),t.arc(n-_,o-_,_,0,Math.PI/2,!1),u===DOWN&&(t.lineTo((n+d)/2,o),t.lineTo(n/2,o+f),t.lineTo((n-d)/2,o)),t.lineTo(C,o),t.arc(C,o-C,C,Math.PI/2,Math.PI,!1),u===LEFT$1&&(t.lineTo(0,(o+f)/2),t.lineTo(-1*d,o/2),t.lineTo(0,(o-f)/2)),t.lineTo(0,w),t.arc(w,w,w,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){let t=0,n=0,o=this.pointerWidth(),u=this.pointerHeight(),d=this.pointerDirection(),f=this.width(),v=this.height();return d===UP?(n-=u,v+=u):d===DOWN?v+=u:d===LEFT$1?(t-=o*1.5,f+=o):d===RIGHT$1&&(f+=o*1.5),{x:t,y:n,width:f,height:v}}}Tag.prototype.className="Tag";_registerNode(Tag);Factory.addGetterSetter(Tag,"pointerDirection",NONE$1);Factory.addGetterSetter(Tag,"pointerWidth",0,getNumberValidator());Factory.addGetterSetter(Tag,"pointerHeight",0,getNumberValidator());Factory.addGetterSetter(Tag,"cornerRadius",0,getNumberOrArrayOfNumbersValidator(4));let Rect$1=class extends Shape{_sceneFunc(t){const n=this.cornerRadius(),o=this.width(),u=this.height();t.beginPath(),n?Util.drawRoundedRectPath(t,o,u,n):t.rect(0,0,o,u),t.closePath(),t.fillStrokeShape(this)}};Rect$1.prototype.className="Rect";_registerNode(Rect$1);Factory.addGetterSetter(Rect$1,"cornerRadius",0,getNumberOrArrayOfNumbersValidator(4));class RegularPolygon extends Shape{_sceneFunc(t){const n=this._getPoints(),o=this.radius(),u=this.sides(),d=this.cornerRadius();if(t.beginPath(),d)Util.drawRoundedPolygonPath(t,n,u,o,d);else{t.moveTo(n[0].x,n[0].y);for(let f=1;f<n.length;f++)t.lineTo(n[f].x,n[f].y)}t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,n=this.attrs.radius||0,o=[];for(let u=0;u<t;u++)o.push({x:n*Math.sin(u*2*Math.PI/t),y:-1*n*Math.cos(u*2*Math.PI/t)});return o}getSelfRect(){const t=this._getPoints();let n=t[0].x,o=t[0].x,u=t[0].y,d=t[0].y;return t.forEach(f=>{n=Math.min(n,f.x),o=Math.max(o,f.x),u=Math.min(u,f.y),d=Math.max(d,f.y)}),{x:n,y:u,width:o-n,height:d-u}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}RegularPolygon.prototype.className="RegularPolygon";RegularPolygon.prototype._centroid=!0;RegularPolygon.prototype._attrsAffectingSize=["radius"];_registerNode(RegularPolygon);Factory.addGetterSetter(RegularPolygon,"radius",0,getNumberValidator());Factory.addGetterSetter(RegularPolygon,"sides",0,getNumberValidator());Factory.addGetterSetter(RegularPolygon,"cornerRadius",0,getNumberOrArrayOfNumbersValidator(4));const PIx2=Math.PI*2;class Ring extends Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,PIx2,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),PIx2,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Ring.prototype.className="Ring";Ring.prototype._centroid=!0;Ring.prototype._attrsAffectingSize=["innerRadius","outerRadius"];_registerNode(Ring);Factory.addGetterSetter(Ring,"innerRadius",0,getNumberValidator());Factory.addGetterSetter(Ring,"outerRadius",0,getNumberValidator());class Sprite extends Shape{constructor(t){super(t),this._updated=!0,this.anim=new Animation(()=>{const n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){const n=this.animation(),o=this.frameIndex(),u=o*4,d=this.animations()[n],f=this.frameOffsets(),v=d[u+0],w=d[u+1],E=d[u+2],C=d[u+3],_=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,E,C),t.closePath(),t.fillStrokeShape(this)),_)if(f){const D=f[n],O=o*2;t.drawImage(_,v,w,E,C,D[O+0],D[O+1],E,C)}else t.drawImage(_,v,w,E,C,0,0,E,C)}_hitFunc(t){const n=this.animation(),o=this.frameIndex(),u=o*4,d=this.animations()[n],f=this.frameOffsets(),v=d[u+2],w=d[u+3];if(t.beginPath(),f){const E=f[n],C=o*2;t.rect(E[C+0],E[C+1],v,w)}else t.rect(0,0,v,w);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const t=this.frameIndex(),n=this.animation(),o=this.animations(),u=o[n],d=u.length/4;t<d-1?this.frameIndex(t+1):this.frameIndex(0)}}Sprite.prototype.className="Sprite";_registerNode(Sprite);Factory.addGetterSetter(Sprite,"animation");Factory.addGetterSetter(Sprite,"animations");Factory.addGetterSetter(Sprite,"frameOffsets");Factory.addGetterSetter(Sprite,"image");Factory.addGetterSetter(Sprite,"frameIndex",0,getNumberValidator());Factory.addGetterSetter(Sprite,"frameRate",17,getNumberValidator());Factory.backCompat(Sprite,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Star extends Shape{_sceneFunc(t){const n=this.innerRadius(),o=this.outerRadius(),u=this.numPoints();t.beginPath(),t.moveTo(0,0-o);for(let d=1;d<u*2;d++){const f=d%2===0?o:n,v=f*Math.sin(d*Math.PI/u),w=-1*f*Math.cos(d*Math.PI/u);t.lineTo(v,w)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Star.prototype.className="Star";Star.prototype._centroid=!0;Star.prototype._attrsAffectingSize=["innerRadius","outerRadius"];_registerNode(Star);Factory.addGetterSetter(Star,"numPoints",5,getNumberValidator());Factory.addGetterSetter(Star,"innerRadius",0,getNumberValidator());Factory.addGetterSetter(Star,"outerRadius",0,getNumberValidator());function stringToArray(e){return[...e].reduce((t,n,o,u)=>{if(new RegExp("\\p{Emoji}","u").test(n)){const d=u[o+1];d&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(d)?(t.push(n+d),u[o+1]=""):t.push(n)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(n+(u[o+1]||""))?t.push(n+u[o+1]):o>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(n)?t[t.length-1]+=n:n&&t.push(n);return t},[])}const AUTO="auto",CENTER="center",INHERIT="inherit",JUSTIFY="justify",CHANGE_KONVA="Change.konva",CONTEXT_2D="2d",DASH="-",LEFT="left",TEXT="text",TEXT_UPPER="Text",TOP="top",BOTTOM="bottom",MIDDLE="middle",NORMAL$1="normal",PX_SPACE="px ",SPACE=" ",RIGHT="right",RTL="rtl",WORD="word",CHAR="char",NONE="none",ELLIPSIS="",ATTR_CHANGE_LIST$1=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],attrChangeListLen=ATTR_CHANGE_LIST$1.length;function normalizeFontFamily(e){return e.split(",").map(t=>{t=t.trim();const n=t.indexOf(" ")>=0,o=t.indexOf('"')>=0||t.indexOf("'")>=0;return n&&!o&&(t=`"${t}"`),t}).join(", ")}let dummyContext;function getDummyContext(){return dummyContext||(dummyContext=Util.createCanvasElement().getContext(CONTEXT_2D),dummyContext)}function _fillFunc$1(e){e.fillText(this._partialText,this._partialTextX,this._partialTextY)}function _strokeFunc$1(e){e.setAttr("miterLimit",2),e.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function checkDefaultFill(e){return e=e||{},!e.fillLinearGradientColorStops&&!e.fillRadialGradientColorStops&&!e.fillPatternImage&&(e.fill=e.fill||"black"),e}let Text$1=class extends Shape{constructor(t){super(checkDefaultFill(t)),this._partialTextX=0,this._partialTextY=0;for(let n=0;n<attrChangeListLen;n++)this.on(ATTR_CHANGE_LIST$1[n]+CHANGE_KONVA,this._setTextData);this._setTextData()}_sceneFunc(t){var n,o;const u=this.textArr,d=u.length;if(!this.text())return;let f=this.padding(),v=this.fontSize(),w=this.lineHeight()*v,E=this.verticalAlign(),C=this.direction(),_=0,D=this.align(),O=this.getWidth(),M=this.letterSpacing(),N=this.charRenderFunc(),I=this.fill(),B=this.textDecoration(),V=this.underlineOffset(),j=B.indexOf("underline")!==-1,q=B.indexOf("line-through")!==-1,z;C=C===INHERIT?t.direction:C;let $=w/2,ee=MIDDLE;if(!Konva$1.legacyTextRendering){const ie=this.measureSize("M");ee="alphabetic";const ae=(n=ie.fontBoundingBoxAscent)!==null&&n!==void 0?n:ie.actualBoundingBoxAscent,pe=(o=ie.fontBoundingBoxDescent)!==null&&o!==void 0?o:ie.actualBoundingBoxDescent;$=(ae-pe)/2+w/2}for(C===RTL&&t.setAttr("direction",C),t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",ee),t.setAttr("textAlign",LEFT),E===MIDDLE?_=(this.getHeight()-d*w-f*2)/2:E===BOTTOM&&(_=this.getHeight()-d*w-f*2),t.translate(f,_+f),z=0;z<d;z++){let ie=0,ae=0;const pe=u[z],he=pe.text,be=pe.width,xe=pe.lastInParagraph;if(t.save(),D===RIGHT?ie+=O-be-f*2:D===CENTER&&(ie+=(O-be-f*2)/2),j){t.save(),t.beginPath();const we=V??(Konva$1.legacyTextRendering?Math.round(v/2):Math.round(v/4)),oe=ie,se=$+ae+we;t.moveTo(oe,se);const J=D===JUSTIFY&&!xe?O-f*2:be;t.lineTo(oe+Math.round(J),se),t.lineWidth=v/15;const Q=this._getLinearGradient();t.strokeStyle=Q||I,t.stroke(),t.restore()}const Ee=ie;if(C!==RTL&&(M!==0||D===JUSTIFY||N)){const we=he.split(" ").length-1,oe=stringToArray(he);for(let se=0;se<oe.length;se++){const J=oe[se];if(J===" "&&!xe&&D===JUSTIFY&&(ie+=(O-f*2-be)/we),this._partialTextX=ie,this._partialTextY=$+ae,this._partialText=J,N){t.save();const Z=u.slice(0,z).reduce((ne,ue)=>ne+stringToArray(ue.text).length,0),K=se+Z;N({char:J,index:K,x:ie,y:$+ae,lineIndex:z,column:se,isLastInLine:xe,width:this.measureSize(J).width,context:t})}t.fillStrokeShape(this),N&&t.restore(),ie+=this.measureSize(J).width+M}}else M!==0&&t.setAttr("letterSpacing",`${M}px`),this._partialTextX=ie,this._partialTextY=$+ae,this._partialText=he,t.fillStrokeShape(this);if(q){t.save(),t.beginPath();const we=Konva$1.legacyTextRendering?0:-Math.round(v/4),oe=Ee;t.moveTo(oe,$+ae+we);const se=D===JUSTIFY&&!xe?O-f*2:be;t.lineTo(oe+Math.round(se),$+ae+we),t.lineWidth=v/15;const J=this._getLinearGradient();t.strokeStyle=J||I,t.stroke(),t.restore()}t.restore(),d>1&&($+=w)}}_hitFunc(t){const n=this.getWidth(),o=this.getHeight();t.beginPath(),t.rect(0,0,n,o),t.closePath(),t.fillStrokeShape(this)}setText(t){const n=Util._isString(t)?t:t==null?"":t+"";return this._setAttr(TEXT,n),this}getWidth(){return this.attrs.width===AUTO||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===AUTO||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var n,o,u,d,f,v,w,E,C,_,D;let O=getDummyContext(),M=this.fontSize(),N;O.save(),O.font=this._getContextFont(),N=O.measureText(t),O.restore();const I=M/100;return{actualBoundingBoxAscent:(n=N.actualBoundingBoxAscent)!==null&&n!==void 0?n:71.58203125*I,actualBoundingBoxDescent:(o=N.actualBoundingBoxDescent)!==null&&o!==void 0?o:0,actualBoundingBoxLeft:(u=N.actualBoundingBoxLeft)!==null&&u!==void 0?u:-7.421875*I,actualBoundingBoxRight:(d=N.actualBoundingBoxRight)!==null&&d!==void 0?d:75.732421875*I,alphabeticBaseline:(f=N.alphabeticBaseline)!==null&&f!==void 0?f:0,emHeightAscent:(v=N.emHeightAscent)!==null&&v!==void 0?v:100*I,emHeightDescent:(w=N.emHeightDescent)!==null&&w!==void 0?w:-20*I,fontBoundingBoxAscent:(E=N.fontBoundingBoxAscent)!==null&&E!==void 0?E:91*I,fontBoundingBoxDescent:(C=N.fontBoundingBoxDescent)!==null&&C!==void 0?C:21*I,hangingBaseline:(_=N.hangingBaseline)!==null&&_!==void 0?_:72.80000305175781*I,ideographicBaseline:(D=N.ideographicBaseline)!==null&&D!==void 0?D:-21*I,width:N.width,height:M}}_getContextFont(){return this.fontStyle()+SPACE+this.fontVariant()+SPACE+(this.fontSize()+PX_SPACE)+normalizeFontFamily(this.fontFamily())}_addTextLine(t){this.align()===JUSTIFY&&(t=t.trim());const o=this._getTextWidth(t);return this.textArr.push({text:t,width:o,lastInParagraph:!1})}_getTextWidth(t){const n=this.letterSpacing(),o=t.length;return getDummyContext().measureText(t).width+n*o}_setTextData(){let t=this.text().split(`
`),n=+this.fontSize(),o=0,u=this.lineHeight()*n,d=this.attrs.width,f=this.attrs.height,v=d!==AUTO&&d!==void 0,w=f!==AUTO&&f!==void 0,E=this.padding(),C=d-E*2,_=f-E*2,D=0,O=this.wrap(),M=O!==NONE,N=O!==CHAR&&M,I=this.ellipsis();this.textArr=[],getDummyContext().font=this._getContextFont();const B=I?this._getTextWidth(ELLIPSIS):0;for(let V=0,j=t.length;V<j;++V){let q=t[V],z=this._getTextWidth(q);if(v&&z>C)for(;q.length>0;){let $=0,ee=stringToArray(q).length,ie="",ae=0;for(;$<ee;){const pe=$+ee>>>1,he=stringToArray(q),be=he.slice(0,pe+1).join(""),xe=this._getTextWidth(be);(I&&w&&D+u>_?xe+B:xe)<=C?($=pe+1,ie=be,ae=xe):ee=pe}if(ie){if(N){const be=stringToArray(q),xe=stringToArray(ie),Ee=be[xe.length],we=Ee===SPACE||Ee===DASH;let oe;if(we&&ae<=C)oe=xe.length;else{const se=xe.lastIndexOf(SPACE),J=xe.lastIndexOf(DASH);oe=Math.max(se,J)+1}oe>0&&($=oe,ie=be.slice(0,$).join(""),ae=this._getTextWidth(ie))}if(ie=ie.trimRight(),this._addTextLine(ie),o=Math.max(o,ae),D+=u,this._shouldHandleEllipsis(D)){this._tryToAddEllipsisToLastLine();break}if(q=stringToArray(q).slice($).join("").trimLeft(),q.length>0&&(z=this._getTextWidth(q),z<=C)){this._addTextLine(q),D+=u,o=Math.max(o,z);break}}else break}else this._addTextLine(q),D+=u,o=Math.max(o,z),this._shouldHandleEllipsis(D)&&V<j-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),w&&D+u>_)break}this.textHeight=n,this.textWidth=o}_shouldHandleEllipsis(t){const n=+this.fontSize(),o=this.lineHeight()*n,u=this.attrs.height,d=u!==AUTO&&u!==void 0,f=this.padding(),v=u-f*2;return!(this.wrap()!==NONE)||d&&t+o>v}_tryToAddEllipsisToLastLine(){const t=this.attrs.width,n=t!==AUTO&&t!==void 0,o=this.padding(),u=t-o*2,d=this.ellipsis(),f=this.textArr[this.textArr.length-1];!f||!d||(n&&(this._getTextWidth(f.text+ELLIPSIS)<u||(f.text=f.text.slice(0,f.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(f.text+ELLIPSIS))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const t=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,n=this.hasShadow();return t&&n?!0:super._useBufferCanvas()}};Text$1.prototype._fillFunc=_fillFunc$1;Text$1.prototype._strokeFunc=_strokeFunc$1;Text$1.prototype.className=TEXT_UPPER;Text$1.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];_registerNode(Text$1);Factory.overWriteSetter(Text$1,"width",getNumberOrAutoValidator());Factory.overWriteSetter(Text$1,"height",getNumberOrAutoValidator());Factory.addGetterSetter(Text$1,"direction",INHERIT);Factory.addGetterSetter(Text$1,"fontFamily","Arial");Factory.addGetterSetter(Text$1,"fontSize",12,getNumberValidator());Factory.addGetterSetter(Text$1,"fontStyle",NORMAL$1);Factory.addGetterSetter(Text$1,"fontVariant",NORMAL$1);Factory.addGetterSetter(Text$1,"padding",0,getNumberValidator());Factory.addGetterSetter(Text$1,"align",LEFT);Factory.addGetterSetter(Text$1,"verticalAlign",TOP);Factory.addGetterSetter(Text$1,"lineHeight",1,getNumberValidator());Factory.addGetterSetter(Text$1,"wrap",WORD);Factory.addGetterSetter(Text$1,"ellipsis",!1,getBooleanValidator());Factory.addGetterSetter(Text$1,"letterSpacing",0,getNumberValidator());Factory.addGetterSetter(Text$1,"text","",getStringValidator());Factory.addGetterSetter(Text$1,"textDecoration","");Factory.addGetterSetter(Text$1,"underlineOffset",void 0,getNumberValidator());Factory.addGetterSetter(Text$1,"charRenderFunc",void 0);const EMPTY_STRING="",NORMAL="normal";function _fillFunc(e){e.fillText(this.partialText,0,0)}function _strokeFunc(e){e.strokeText(this.partialText,0,0)}class TextPath extends Shape{constructor(t){super(t),this.dummyCanvas=Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return Path.getPathLength(this.dataArray)}_getPointAtLength(t){if(!this.attrs.data)return null;const n=this.pathLength;return t>n?null:Path.getPointAtLengthOfDataArray(t,this.dataArray)}_readDataAttribute(){this.dataArray=Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();const n=this.textDecoration(),o=this.fill(),u=this.fontSize(),d=this.glyphInfo,f=n.indexOf("underline")!==-1,v=n.indexOf("line-through")!==-1;f&&t.beginPath();for(let w=0;w<d.length;w++){t.save();const E=d[w].p0;t.translate(E.x,E.y),t.rotate(d[w].rotation),this.partialText=d[w].text,t.fillStrokeShape(this),f&&(w===0&&t.moveTo(0,u/2+1),t.lineTo(d[w].width,u/2+1)),t.restore()}if(f&&(t.strokeStyle=o,t.lineWidth=u/20,t.stroke()),v){t.beginPath();for(let w=0;w<d.length;w++){t.save();const E=d[w].p0;t.translate(E.x,E.y),t.rotate(d[w].rotation),w===0&&t.moveTo(0,0),t.lineTo(d[w].width,0),t.restore()}t.strokeStyle=o,t.lineWidth=u/20,t.stroke()}t.restore()}_hitFunc(t){t.beginPath();const n=this.glyphInfo;if(n.length>=1){const o=n[0].p0;t.moveTo(o.x,o.y)}for(let o=0;o<n.length;o++){const u=n[o].p1;t.lineTo(u.x,u.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return Text$1.prototype.setText.call(this,t)}_getContextFont(){return Text$1.prototype._getContextFont.call(this)}_getTextSize(t){const o=this.dummyCanvas.getContext("2d");o.save(),o.font=this._getContextFont();const u=o.measureText(t);return o.restore(),{width:u.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const t=stringToArray(this.text()),n=[];let o=0;for(let _=0;_<t.length;_++)n.push({char:t[_],width:this._getTextSize(t[_]).width}),o+=n[_].width;const{height:u}=this._getTextSize(this.attrs.text);if(this.textWidth=o,this.textHeight=u,this.glyphInfo=[],!this.attrs.data)return null;const d=this.letterSpacing(),f=this.align(),v=this.kerningFunc(),w=Math.max(this.textWidth+((this.attrs.text||"").length-1)*d,0);let E=0;f==="center"&&(E=Math.max(0,this.pathLength/2-w/2)),f==="right"&&(E=Math.max(0,this.pathLength-w));let C=E;for(let _=0;_<n.length;_++){const D=this._getPointAtLength(C);if(!D)return;const O=n[_].char;let M=n[_].width+d;if(O===" "&&f==="justify"){const q=this.text().split(" ").length-1;M+=(this.pathLength-w)/q}const N=this._getPointAtLength(C+M);if(!N)return;const I=Path.getLineLength(D.x,D.y,N.x,N.y);let B=0;if(v)try{B=v(n[_-1].char,O)*this.fontSize()}catch{B=0}D.x+=B,N.x+=B,this.textWidth+=B;const V=Path.getPointOnLine(B+I/2,D.x,D.y,N.x,N.y),j=Math.atan2(N.y-D.y,N.x-D.x);this.glyphInfo.push({transposeX:V.x,transposeY:V.y,text:t[_],rotation:j,p0:D,p1:N,width:I}),C+=M}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const t=[];this.glyphInfo.forEach(function(E){t.push(E.p0.x),t.push(E.p0.y),t.push(E.p1.x),t.push(E.p1.y)});let n=t[0]||0,o=t[0]||0,u=t[1]||0,d=t[1]||0,f,v;for(let E=0;E<t.length/2;E++)f=t[E*2],v=t[E*2+1],n=Math.min(n,f),o=Math.max(o,f),u=Math.min(u,v),d=Math.max(d,v);const w=this.fontSize();return{x:n-w/2,y:u-w/2,width:o-n+w,height:d-u+w}}destroy(){return Util.releaseCanvas(this.dummyCanvas),super.destroy()}}TextPath.prototype._fillFunc=_fillFunc;TextPath.prototype._strokeFunc=_strokeFunc;TextPath.prototype._fillFuncHit=_fillFunc;TextPath.prototype._strokeFuncHit=_strokeFunc;TextPath.prototype.className="TextPath";TextPath.prototype._attrsAffectingSize=["text","fontSize","data"];_registerNode(TextPath);Factory.addGetterSetter(TextPath,"data");Factory.addGetterSetter(TextPath,"fontFamily","Arial");Factory.addGetterSetter(TextPath,"fontSize",12,getNumberValidator());Factory.addGetterSetter(TextPath,"fontStyle",NORMAL);Factory.addGetterSetter(TextPath,"align","left");Factory.addGetterSetter(TextPath,"letterSpacing",0,getNumberValidator());Factory.addGetterSetter(TextPath,"textBaseline","middle");Factory.addGetterSetter(TextPath,"fontVariant",NORMAL);Factory.addGetterSetter(TextPath,"text",EMPTY_STRING);Factory.addGetterSetter(TextPath,"textDecoration","");Factory.addGetterSetter(TextPath,"kerningFunc",void 0);const EVENTS_NAME="tr-konva",ATTR_CHANGE_LIST=["resizeEnabledChange","rotateAnchorOffsetChange","rotateAnchorAngleChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(e=>e+`.${EVENTS_NAME}`).join(" "),NODES_RECT="nodesRect",TRANSFORM_CHANGE_STR=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],ANGLES={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},TOUCH_DEVICE="ontouchstart"in Konva$1._global;function getCursor(e,t,n){if(e==="rotater")return n;t+=Util.degToRad(ANGLES[e]||0);const o=(Util.radToDeg(t)%360+360)%360;return Util._inRange(o,315+22.5,360)||Util._inRange(o,0,22.5)?"ns-resize":Util._inRange(o,45-22.5,45+22.5)?"nesw-resize":Util._inRange(o,90-22.5,90+22.5)?"ew-resize":Util._inRange(o,135-22.5,135+22.5)?"nwse-resize":Util._inRange(o,180-22.5,180+22.5)?"ns-resize":Util._inRange(o,225-22.5,225+22.5)?"nesw-resize":Util._inRange(o,270-22.5,270+22.5)?"ew-resize":Util._inRange(o,315-22.5,315+22.5)?"nwse-resize":(Util.error("Transformer has unknown angle for cursor detection: "+o),"pointer")}const ANCHORS_NAMES=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function getCenter(e){return{x:e.x+e.width/2*Math.cos(e.rotation)+e.height/2*Math.sin(-e.rotation),y:e.y+e.height/2*Math.cos(e.rotation)+e.width/2*Math.sin(e.rotation)}}function rotateAroundPoint(e,t,n){const o=n.x+(e.x-n.x)*Math.cos(t)-(e.y-n.y)*Math.sin(t),u=n.y+(e.x-n.x)*Math.sin(t)+(e.y-n.y)*Math.cos(t);return{...e,rotation:e.rotation+t,x:o,y:u}}function rotateAroundCenter(e,t){const n=getCenter(e);return rotateAroundPoint(e,t,n)}function getSnap(e,t,n){let o=t;for(let u=0;u<e.length;u++){const d=Konva$1.getAngle(e[u]),f=Math.abs(d-t)%(Math.PI*2);Math.min(f,Math.PI*2-f)<n&&(o=d)}return o}let activeTransformersCount=0;class Transformer extends Group{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(ATTR_CHANGE_LIST,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return EVENTS_NAME+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const n=t.filter(u=>u.isAncestorOf(this)?(Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=t=n,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(u=>{const d=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(u._attrsAffectingSize.length){const f=u._attrsAffectingSize.map(v=>v+"Change."+this._getEventNamespace()).join(" ");u.on(f,d)}u.on(TRANSFORM_CHANGE_STR.map(f=>f+`.${this._getEventNamespace()}`).join(" "),d),u.on(`absoluteTransformChange.${this._getEventNamespace()}`,d),this._proxyDrag(u)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(t){let n;t.on(`dragstart.${this._getEventNamespace()}`,o=>{n=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(o,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,o=>{if(!n)return;const u=t.getAbsolutePosition(),d=u.x-n.x,f=u.y-n.y;this.nodes().forEach(v=>{if(v===t||v.isDragging())return;const w=v.getAbsolutePosition();v.setAbsolutePosition({x:w.x+d,y:w.y+f}),v.startDrag(o)}),n=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(NODES_RECT),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(NODES_RECT,this.__getNodeRect)}__getNodeShape(t,n=this.rotation(),o){const u=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),d=t.getAbsoluteScale(o),f=t.getAbsolutePosition(o),v=u.x*d.x-t.offsetX()*d.x,w=u.y*d.y-t.offsetY()*d.y,E=(Konva$1.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),C={x:f.x+v*Math.cos(E)+w*Math.sin(-E),y:f.y+w*Math.cos(E)+v*Math.sin(E),width:u.width*d.x,height:u.height*d.y,rotation:E};return rotateAroundPoint(C,-Konva$1.getAngle(n),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const n=[];this.nodes().map(E=>{const C=E.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),_=[{x:C.x,y:C.y},{x:C.x+C.width,y:C.y},{x:C.x+C.width,y:C.y+C.height},{x:C.x,y:C.y+C.height}],D=E.getAbsoluteTransform();_.forEach(function(O){const M=D.point(O);n.push(M)})});const o=new Transform;o.rotate(-Konva$1.getAngle(this.rotation()));let u=1/0,d=1/0,f=-1/0,v=-1/0;n.forEach(function(E){const C=o.point(E);u===void 0&&(u=f=C.x,d=v=C.y),u=Math.min(u,C.x),d=Math.min(d,C.y),f=Math.max(f,C.x),v=Math.max(v,C.y)}),o.invert();const w=o.point({x:u,y:d});return{x:w.x,y:w.y,width:f-u,height:v-d,rotation:Konva$1.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),ANCHORS_NAMES.forEach(t=>{this._createAnchor(t)}),this._createAnchor("rotater")}_createAnchor(t){const n=new Rect$1({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:TOUCH_DEVICE?10:"auto"}),o=this;n.on("mousedown touchstart",function(u){o._handleMouseDown(u)}),n.on("dragstart",u=>{n.stopDrag(),u.cancelBubble=!0}),n.on("dragend",u=>{u.cancelBubble=!0}),n.on("mouseenter",()=>{const u=Konva$1.getAngle(this.rotation()),d=this.rotateAnchorCursor(),f=getCursor(t,u,d);n.getStage().content&&(n.getStage().content.style.cursor=f),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){const t=new Shape({name:"back",width:0,height:0,sceneFunc(n,o){const u=o.getParent(),d=u.padding(),f=o.width(),v=o.height();if(n.beginPath(),n.rect(-d,-d,f+d*2,v+d*2),u.rotateEnabled()&&u.rotateLineVisible()){const w=u.rotateAnchorAngle(),E=u.rotateAnchorOffset(),C=Util.degToRad(w),_=Math.sin(C),D=-Math.cos(C),O=f/2,M=v/2;let N=1/0;D<0?N=Math.min(N,-M/D):D>0&&(N=Math.min(N,(v-M)/D)),_<0?N=Math.min(N,-O/_):_>0&&(N=Math.min(N,(f-O)/_));const I=O+_*N,B=M+D*N,V=Util._sign(v),j=I+_*E*V,q=B+D*E*V;n.moveTo(I,B),n.lineTo(j,q)}n.fillStrokeShape(o)},hitFunc:(n,o)=>{if(!this.shouldOverdrawWholeArea())return;const u=this.padding();n.beginPath(),n.rect(-u,-u,o.width()+u*2,o.height()+u*2),n.fillStrokeShape(o)}});this.add(t),this._proxyDrag(t),t.on("dragstart",n=>{n.cancelBubble=!0}),t.on("dragmove",n=>{n.cancelBubble=!0}),t.on("dragend",n=>{n.cancelBubble=!0}),this.on("dragmove",n=>{this.update()})}_handleMouseDown(t){if(this._transforming)return;this._movingAnchorName=t.target.name().split(" ")[0];const n=this._getNodeRect(),o=n.width,u=n.height,d=Math.sqrt(Math.pow(o,2)+Math.pow(u,2));this.sin=Math.abs(u/d),this.cos=Math.abs(o/d),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const f=t.target.getAbsolutePosition(),v=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:v.x-f.x,y:v.y-f.y},activeTransformersCount++,this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(w=>{w._fire("transformstart",{evt:t.evt,target:w})})}_handleMouseMove(t){let n,o,u;const d=this.findOne("."+this._movingAnchorName),f=d.getStage();f.setPointersPositions(t);const v=f.getPointerPosition();let w={x:v.x-this._anchorDragOffset.x,y:v.y-this._anchorDragOffset.y};const E=d.getAbsolutePosition();this.anchorDragBoundFunc()&&(w=this.anchorDragBoundFunc()(E,w,t)),d.setAbsolutePosition(w);const C=d.getAbsolutePosition();if(E.x===C.x&&E.y===C.y)return;if(this._movingAnchorName==="rotater"){const V=this._getNodeRect();n=d.x()-V.width/2,o=-d.y()+V.height/2;const j=Konva$1.getAngle(this.rotateAnchorAngle());let q=Math.atan2(-o,n)+Math.PI/2-j;V.height<0&&(q-=Math.PI);const $=Konva$1.getAngle(this.rotation())+q,ee=Konva$1.getAngle(this.rotationSnapTolerance()),ae=getSnap(this.rotationSnaps(),$,ee)-V.rotation,pe=rotateAroundCenter(V,ae);this._fitNodesInto(pe,t);return}const _=this.shiftBehavior();let D;_==="inverted"?D=this.keepRatio()&&!t.shiftKey:_==="none"?D=this.keepRatio():D=this.keepRatio()||t.shiftKey;let O=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(D){const V=O?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};u=Math.sqrt(Math.pow(V.x-d.x(),2)+Math.pow(V.y-d.y(),2));const j=this.findOne(".top-left").x()>V.x?-1:1,q=this.findOne(".top-left").y()>V.y?-1:1;n=u*this.cos*j,o=u*this.sin*q,this.findOne(".top-left").x(V.x-n),this.findOne(".top-left").y(V.y-o)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(d.y());else if(this._movingAnchorName==="top-right"){if(D){const V=O?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};u=Math.sqrt(Math.pow(d.x()-V.x,2)+Math.pow(V.y-d.y(),2));const j=this.findOne(".top-right").x()<V.x?-1:1,q=this.findOne(".top-right").y()>V.y?-1:1;n=u*this.cos*j,o=u*this.sin*q,this.findOne(".top-right").x(V.x+n),this.findOne(".top-right").y(V.y-o)}var M=d.position();this.findOne(".top-left").y(M.y),this.findOne(".bottom-right").x(M.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(d.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(d.x());else if(this._movingAnchorName==="bottom-left"){if(D){const V=O?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};u=Math.sqrt(Math.pow(V.x-d.x(),2)+Math.pow(d.y()-V.y,2));const j=V.x<d.x()?-1:1,q=d.y()<V.y?-1:1;n=u*this.cos*j,o=u*this.sin*q,d.x(V.x-n),d.y(V.y+o)}M=d.position(),this.findOne(".top-left").x(M.x),this.findOne(".bottom-right").y(M.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(d.y());else if(this._movingAnchorName==="bottom-right"){if(D){const V=O?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};u=Math.sqrt(Math.pow(d.x()-V.x,2)+Math.pow(d.y()-V.y,2));const j=this.findOne(".bottom-right").x()<V.x?-1:1,q=this.findOne(".bottom-right").y()<V.y?-1:1;n=u*this.cos*j,o=u*this.sin*q,this.findOne(".bottom-right").x(V.x+n),this.findOne(".bottom-right").y(V.y+o)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(O=this.centeredScaling()||t.altKey,O){const V=this.findOne(".top-left"),j=this.findOne(".bottom-right"),q=V.x(),z=V.y(),$=this.getWidth()-j.x(),ee=this.getHeight()-j.y();j.move({x:-q,y:-z}),V.move({x:$,y:ee})}const N=this.findOne(".top-left").getAbsolutePosition();n=N.x,o=N.y;const I=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),B=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:o,width:I,height:B,rotation:Konva$1.getAngle(this.rotation())},t)}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){var n;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const o=this.getNode();activeTransformersCount--,this._fire("transformend",{evt:t,target:o}),(n=this.getLayer())===null||n===void 0||n.batchDraw(),o&&this._nodes.forEach(u=>{var d;u._fire("transformend",{evt:t,target:u}),(d=u.getLayer())===null||d===void 0||d.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(t,n){const o=this._getNodeRect(),u=1;if(Util._inRange(t.width,-this.padding()*2-u,u)){this.update();return}if(Util._inRange(t.height,-this.padding()*2-u,u)){this.update();return}const d=new Transform;if(d.rotate(Konva$1.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const D=d.point({x:-this.padding()*2,y:0});t.x+=D.x,t.y+=D.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=D.x,this._anchorDragOffset.y-=D.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const D=d.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=D.x,this._anchorDragOffset.y-=D.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const D=d.point({x:0,y:-this.padding()*2});t.x+=D.x,t.y+=D.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=D.x,this._anchorDragOffset.y-=D.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const D=d.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=D.x,this._anchorDragOffset.y-=D.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){const D=this.boundBoxFunc()(o,t);D?t=D:Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const f=1e7,v=new Transform;v.translate(o.x,o.y),v.rotate(o.rotation),v.scale(o.width/f,o.height/f);const w=new Transform,E=t.width/f,C=t.height/f;this.flipEnabled()===!1?(w.translate(t.x,t.y),w.rotate(t.rotation),w.translate(t.width<0?t.width:0,t.height<0?t.height:0),w.scale(Math.abs(E),Math.abs(C))):(w.translate(t.x,t.y),w.rotate(t.rotation),w.scale(E,C));const _=w.multiply(v.invert());this._nodes.forEach(D=>{var O;if(!D.getStage())return;const M=D.getParent().getAbsoluteTransform(),N=D.getTransform().copy();N.translate(D.offsetX(),D.offsetY());const I=new Transform;I.multiply(M.copy().invert()).multiply(_).multiply(M).multiply(N);const B=I.decompose();D.setAttrs(B),(O=D.getLayer())===null||O===void 0||O.batchDraw()}),this.rotation(Util._getRotation(t.rotation)),this._nodes.forEach(D=>{this._fire("transform",{evt:n,target:D}),D._fire("transform",{evt:n,target:D})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,n){this.findOne(t).setAttrs(n)}update(){var t;const n=this._getNodeRect();this.rotation(Util._getRotation(n.rotation));const o=n.width,u=n.height,d=this.enabledAnchors(),f=this.resizeEnabled(),v=this.padding(),w=this.anchorSize(),E=this.find("._anchor");E.forEach($=>{$.setAttrs({width:w,height:w,offsetX:w/2,offsetY:w/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:w/2+v,offsetY:w/2+v,visible:f&&d.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:o/2,y:0,offsetY:w/2+v,visible:f&&d.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:o,y:0,offsetX:w/2-v,offsetY:w/2+v,visible:f&&d.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:u/2,offsetX:w/2+v,visible:f&&d.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:o,y:u/2,offsetX:w/2-v,visible:f&&d.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:u,offsetX:w/2+v,offsetY:w/2-v,visible:f&&d.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:o/2,y:u,offsetY:w/2-v,visible:f&&d.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:o,y:u,offsetX:w/2-v,offsetY:w/2-v,visible:f&&d.indexOf("bottom-right")>=0});const C=this.rotateAnchorAngle(),_=this.rotateAnchorOffset(),D=Util.degToRad(C),O=Math.sin(D),M=-Math.cos(D),N=o/2,I=u/2;let B=1/0;M<0?B=Math.min(B,-I/M):M>0&&(B=Math.min(B,(u-I)/M)),O<0?B=Math.min(B,-N/O):O>0&&(B=Math.min(B,(o-N)/O));const V=N+O*B,j=I+M*B,q=Util._sign(u);this._batchChangeChild(".rotater",{x:V+O*_*q,y:j+M*_*q-v*M,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:o,height:u,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some($=>$.draggable()),x:0,y:0});const z=this.anchorStyleFunc();z&&E.forEach($=>{z($)}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return Node$1.prototype.toObject.call(this)}clone(t){return Node$1.prototype.clone.call(this,t)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}Transformer.isTransforming=()=>activeTransformersCount>0;function validateAnchors(e){return e instanceof Array||Util.warn("enabledAnchors value should be an array"),e instanceof Array&&e.forEach(function(t){ANCHORS_NAMES.indexOf(t)===-1&&Util.warn("Unknown anchor name: "+t+". Available names are: "+ANCHORS_NAMES.join(", "))}),e||[]}Transformer.prototype.className="Transformer";_registerNode(Transformer);Factory.addGetterSetter(Transformer,"enabledAnchors",ANCHORS_NAMES,validateAnchors);Factory.addGetterSetter(Transformer,"flipEnabled",!0,getBooleanValidator());Factory.addGetterSetter(Transformer,"resizeEnabled",!0);Factory.addGetterSetter(Transformer,"anchorSize",10,getNumberValidator());Factory.addGetterSetter(Transformer,"rotateEnabled",!0);Factory.addGetterSetter(Transformer,"rotateLineVisible",!0);Factory.addGetterSetter(Transformer,"rotationSnaps",[]);Factory.addGetterSetter(Transformer,"rotateAnchorOffset",50,getNumberValidator());Factory.addGetterSetter(Transformer,"rotateAnchorAngle",0,getNumberValidator());Factory.addGetterSetter(Transformer,"rotateAnchorCursor","crosshair");Factory.addGetterSetter(Transformer,"rotationSnapTolerance",5,getNumberValidator());Factory.addGetterSetter(Transformer,"borderEnabled",!0);Factory.addGetterSetter(Transformer,"anchorStroke","rgb(0, 161, 255)");Factory.addGetterSetter(Transformer,"anchorStrokeWidth",1,getNumberValidator());Factory.addGetterSetter(Transformer,"anchorFill","white");Factory.addGetterSetter(Transformer,"anchorCornerRadius",0,getNumberValidator());Factory.addGetterSetter(Transformer,"borderStroke","rgb(0, 161, 255)");Factory.addGetterSetter(Transformer,"borderStrokeWidth",1,getNumberValidator());Factory.addGetterSetter(Transformer,"borderDash");Factory.addGetterSetter(Transformer,"keepRatio",!0);Factory.addGetterSetter(Transformer,"shiftBehavior","default");Factory.addGetterSetter(Transformer,"centeredScaling",!1);Factory.addGetterSetter(Transformer,"ignoreStroke",!1);Factory.addGetterSetter(Transformer,"padding",0,getNumberValidator());Factory.addGetterSetter(Transformer,"nodes");Factory.addGetterSetter(Transformer,"node");Factory.addGetterSetter(Transformer,"boundBoxFunc");Factory.addGetterSetter(Transformer,"anchorDragBoundFunc");Factory.addGetterSetter(Transformer,"anchorStyleFunc");Factory.addGetterSetter(Transformer,"shouldOverdrawWholeArea",!1);Factory.addGetterSetter(Transformer,"useSingleNodeRotation",!0);Factory.backCompat(Transformer,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class Wedge extends Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,Konva$1.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}Wedge.prototype.className="Wedge";Wedge.prototype._centroid=!0;Wedge.prototype._attrsAffectingSize=["radius"];_registerNode(Wedge);Factory.addGetterSetter(Wedge,"radius",0,getNumberValidator());Factory.addGetterSetter(Wedge,"angle",0,getNumberValidator());Factory.addGetterSetter(Wedge,"clockwise",!1);Factory.backCompat(Wedge,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function BlurStack(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const mul_table=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],shg_table=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function filterGaussBlurRGBA(e,t){const n=e.data,o=e.width,u=e.height;let d,f,v,w,E,C,_,D,O,M,N,I,B,V,j,q,z,$,ee,ie;const ae=t+t+1,pe=o-1,he=u-1,be=t+1,xe=be*(be+1)/2,Ee=new BlurStack,we=mul_table[t],oe=shg_table[t];let se=null,J=Ee,Q=null,Z=null;for(let K=1;K<ae;K++)J=J.next=new BlurStack,K===be&&(se=J);J.next=Ee,v=f=0;for(let K=0;K<u;K++){I=B=V=j=w=E=C=_=0,D=be*(q=n[f]),O=be*(z=n[f+1]),M=be*($=n[f+2]),N=be*(ee=n[f+3]),w+=xe*q,E+=xe*z,C+=xe*$,_+=xe*ee,J=Ee;for(let ne=0;ne<be;ne++)J.r=q,J.g=z,J.b=$,J.a=ee,J=J.next;for(let ne=1;ne<be;ne++)d=f+((pe<ne?pe:ne)<<2),w+=(J.r=q=n[d])*(ie=be-ne),E+=(J.g=z=n[d+1])*ie,C+=(J.b=$=n[d+2])*ie,_+=(J.a=ee=n[d+3])*ie,I+=q,B+=z,V+=$,j+=ee,J=J.next;Q=Ee,Z=se;for(let ne=0;ne<o;ne++)n[f+3]=ee=_*we>>oe,ee!==0?(ee=255/ee,n[f]=(w*we>>oe)*ee,n[f+1]=(E*we>>oe)*ee,n[f+2]=(C*we>>oe)*ee):n[f]=n[f+1]=n[f+2]=0,w-=D,E-=O,C-=M,_-=N,D-=Q.r,O-=Q.g,M-=Q.b,N-=Q.a,d=v+((d=ne+t+1)<pe?d:pe)<<2,I+=Q.r=n[d],B+=Q.g=n[d+1],V+=Q.b=n[d+2],j+=Q.a=n[d+3],w+=I,E+=B,C+=V,_+=j,Q=Q.next,D+=q=Z.r,O+=z=Z.g,M+=$=Z.b,N+=ee=Z.a,I-=q,B-=z,V-=$,j-=ee,Z=Z.next,f+=4;v+=o}for(let K=0;K<o;K++){B=V=j=I=E=C=_=w=0,f=K<<2,D=be*(q=n[f]),O=be*(z=n[f+1]),M=be*($=n[f+2]),N=be*(ee=n[f+3]),w+=xe*q,E+=xe*z,C+=xe*$,_+=xe*ee,J=Ee;for(let ue=0;ue<be;ue++)J.r=q,J.g=z,J.b=$,J.a=ee,J=J.next;let ne=o;for(let ue=1;ue<=t;ue++)f=ne+K<<2,w+=(J.r=q=n[f])*(ie=be-ue),E+=(J.g=z=n[f+1])*ie,C+=(J.b=$=n[f+2])*ie,_+=(J.a=ee=n[f+3])*ie,I+=q,B+=z,V+=$,j+=ee,J=J.next,ue<he&&(ne+=o);f=K,Q=Ee,Z=se;for(let ue=0;ue<u;ue++)d=f<<2,n[d+3]=ee=_*we>>oe,ee>0?(ee=255/ee,n[d]=(w*we>>oe)*ee,n[d+1]=(E*we>>oe)*ee,n[d+2]=(C*we>>oe)*ee):n[d]=n[d+1]=n[d+2]=0,w-=D,E-=O,C-=M,_-=N,D-=Q.r,O-=Q.g,M-=Q.b,N-=Q.a,d=K+((d=ue+be)<he?d:he)*o<<2,w+=I+=Q.r=n[d],E+=B+=Q.g=n[d+1],C+=V+=Q.b=n[d+2],_+=j+=Q.a=n[d+3],Q=Q.next,D+=q=Z.r,O+=z=Z.g,M+=$=Z.b,N+=ee=Z.a,I-=q,B-=z,V-=$,j-=ee,Z=Z.next,f+=o}}const Blur=function(t){const n=Math.round(this.blurRadius());n>0&&filterGaussBlurRGBA(t,n)};Factory.addGetterSetter(Node$1,"blurRadius",0,getNumberValidator(),Factory.afterSetFilter);const Brighten=function(e){const t=this.brightness()*255,n=e.data,o=n.length;for(let u=0;u<o;u+=4)n[u]+=t,n[u+1]+=t,n[u+2]+=t};Factory.addGetterSetter(Node$1,"brightness",0,getNumberValidator(),Factory.afterSetFilter);const Brightness=function(e){const t=this.brightness(),n=e.data,o=n.length;for(let u=0;u<o;u+=4)n[u]=Math.min(255,n[u]*t),n[u+1]=Math.min(255,n[u+1]*t),n[u+2]=Math.min(255,n[u+2]*t)},Contrast=function(e){const t=Math.pow((this.contrast()+100)/100,2),n=e.data,o=n.length;let u=150,d=150,f=150;for(let v=0;v<o;v+=4)u=n[v],d=n[v+1],f=n[v+2],u/=255,u-=.5,u*=t,u+=.5,u*=255,d/=255,d-=.5,d*=t,d+=.5,d*=255,f/=255,f-=.5,f*=t,f+=.5,f*=255,u=u<0?0:u>255?255:u,d=d<0?0:d>255?255:d,f=f<0?0:f>255?255:f,n[v]=u,n[v+1]=d,n[v+2]=f};Factory.addGetterSetter(Node$1,"contrast",0,getNumberValidator(),Factory.afterSetFilter);const Emboss=function(e){var t,n,o,u,d,f,v,w,E;const C=e.data,_=e.width,D=e.height,O=Math.min(1,Math.max(0,(n=(t=this.embossStrength)===null||t===void 0?void 0:t.call(this))!==null&&n!==void 0?n:.5)),M=Math.min(1,Math.max(0,(u=(o=this.embossWhiteLevel)===null||o===void 0?void 0:o.call(this))!==null&&u!==void 0?u:.5)),I=(v={"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0}[(f=(d=this.embossDirection)===null||d===void 0?void 0:d.call(this))!==null&&f!==void 0?f:"top-left"])!==null&&v!==void 0?v:315,B=!!((E=(w=this.embossBlend)===null||w===void 0?void 0:w.call(this))!==null&&E!==void 0&&E),V=O*10,j=M*255,q=I*Math.PI/180,z=Math.cos(q),$=Math.sin(q),ee=128/1020*V,ie=new Uint8ClampedArray(C),ae=new Float32Array(_*D);for(let Ee=0,we=0;we<C.length;we+=4,Ee++)ae[Ee]=.2126*ie[we]+.7152*ie[we+1]+.0722*ie[we+2];const pe=[-1,0,1,-2,0,2,-1,0,1],he=[-1,-2,-1,0,0,0,1,2,1],be=[-_-1,-_,-_+1,-1,0,1,_-1,_,_+1],xe=Ee=>Ee<0?0:Ee>255?255:Ee;for(let Ee=1;Ee<D-1;Ee++)for(let we=1;we<_-1;we++){const oe=Ee*_+we;let se=0,J=0;se+=ae[oe+be[0]]*pe[0],J+=ae[oe+be[0]]*he[0],se+=ae[oe+be[1]]*pe[1],J+=ae[oe+be[1]]*he[1],se+=ae[oe+be[2]]*pe[2],J+=ae[oe+be[2]]*he[2],se+=ae[oe+be[3]]*pe[3],J+=ae[oe+be[3]]*he[3],se+=ae[oe+be[5]]*pe[5],J+=ae[oe+be[5]]*he[5],se+=ae[oe+be[6]]*pe[6],J+=ae[oe+be[6]]*he[6],se+=ae[oe+be[7]]*pe[7],J+=ae[oe+be[7]]*he[7],se+=ae[oe+be[8]]*pe[8],J+=ae[oe+be[8]]*he[8];const Q=z*se+$*J,Z=xe(j+Q*ee),K=oe*4;if(B){const ne=Z-j;C[K]=xe(ie[K]+ne),C[K+1]=xe(ie[K+1]+ne),C[K+2]=xe(ie[K+2]+ne),C[K+3]=ie[K+3]}else C[K]=C[K+1]=C[K+2]=Z,C[K+3]=ie[K+3]}for(let Ee=0;Ee<_;Ee++){let we=Ee*4,oe=((D-1)*_+Ee)*4;C[we]=ie[we],C[we+1]=ie[we+1],C[we+2]=ie[we+2],C[we+3]=ie[we+3],C[oe]=ie[oe],C[oe+1]=ie[oe+1],C[oe+2]=ie[oe+2],C[oe+3]=ie[oe+3]}for(let Ee=1;Ee<D-1;Ee++){let we=Ee*_*4,oe=(Ee*_+(_-1))*4;C[we]=ie[we],C[we+1]=ie[we+1],C[we+2]=ie[we+2],C[we+3]=ie[we+3],C[oe]=ie[oe],C[oe+1]=ie[oe+1],C[oe+2]=ie[oe+2],C[oe+3]=ie[oe+3]}return e};Factory.addGetterSetter(Node$1,"embossStrength",.5,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"embossWhiteLevel",.5,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"embossDirection","top-left",void 0,Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"embossBlend",!1,void 0,Factory.afterSetFilter);function remap(e,t,n,o,u){const d=n-t,f=u-o;if(d===0)return o+f/2;if(f===0)return o;let v=(e-t)/d;return v=f*v+o,v}const Enhance=function(e){const t=e.data,n=t.length;let o=t[0],u=o,d,f=t[1],v=f,w,E=t[2],C=E,_;const D=this.enhance();if(D===0)return;for(let j=0;j<n;j+=4)d=t[j+0],d<o?o=d:d>u&&(u=d),w=t[j+1],w<f?f=w:w>v&&(v=w),_=t[j+2],_<E?E=_:_>C&&(C=_);u===o&&(u=255,o=0),v===f&&(v=255,f=0),C===E&&(C=255,E=0);let O,M,N,I,B,V;if(D>0)O=u+D*(255-u),M=o-D*(o-0),N=v+D*(255-v),I=f-D*(f-0),B=C+D*(255-C),V=E-D*(E-0);else{const j=(u+o)*.5;O=u+D*(u-j),M=o+D*(o-j);const q=(v+f)*.5;N=v+D*(v-q),I=f+D*(f-q);const z=(C+E)*.5;B=C+D*(C-z),V=E+D*(E-z)}for(let j=0;j<n;j+=4)t[j+0]=remap(t[j+0],o,u,M,O),t[j+1]=remap(t[j+1],f,v,I,N),t[j+2]=remap(t[j+2],E,C,V,B)};Factory.addGetterSetter(Node$1,"enhance",0,getNumberValidator(),Factory.afterSetFilter);const Grayscale=function(e){const t=e.data,n=t.length;for(let o=0;o<n;o+=4){const u=.34*t[o]+.5*t[o+1]+.16*t[o+2];t[o]=u,t[o+1]=u,t[o+2]=u}};Factory.addGetterSetter(Node$1,"hue",0,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"saturation",0,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"luminance",0,getNumberValidator(),Factory.afterSetFilter);const HSL=function(e){const t=e.data,n=t.length,o=1,u=Math.pow(2,this.saturation()),d=Math.abs(this.hue()+360)%360,f=this.luminance()*127,v=o*u*Math.cos(d*Math.PI/180),w=o*u*Math.sin(d*Math.PI/180),E=.299*o+.701*v+.167*w,C=.587*o-.587*v+.33*w,_=.114*o-.114*v-.497*w,D=.299*o-.299*v-.328*w,O=.587*o+.413*v+.035*w,M=.114*o-.114*v+.293*w,N=.299*o-.3*v+1.25*w,I=.587*o-.586*v-1.05*w,B=.114*o+.886*v-.2*w;let V,j,q,z;for(let $=0;$<n;$+=4)V=t[$+0],j=t[$+1],q=t[$+2],z=t[$+3],t[$+0]=E*V+C*j+_*q+f,t[$+1]=D*V+O*j+M*q+f,t[$+2]=N*V+I*j+B*q+f,t[$+3]=z},HSV=function(e){const t=e.data,n=t.length,o=Math.pow(2,this.value()),u=Math.pow(2,this.saturation()),d=Math.abs(this.hue()+360)%360,f=o*u*Math.cos(d*Math.PI/180),v=o*u*Math.sin(d*Math.PI/180),w=.299*o+.701*f+.167*v,E=.587*o-.587*f+.33*v,C=.114*o-.114*f-.497*v,_=.299*o-.299*f-.328*v,D=.587*o+.413*f+.035*v,O=.114*o-.114*f+.293*v,M=.299*o-.3*f+1.25*v,N=.587*o-.586*f-1.05*v,I=.114*o+.886*f-.2*v;for(let B=0;B<n;B+=4){const V=t[B+0],j=t[B+1],q=t[B+2],z=t[B+3];t[B+0]=w*V+E*j+C*q,t[B+1]=_*V+D*j+O*q,t[B+2]=M*V+N*j+I*q,t[B+3]=z}};Factory.addGetterSetter(Node$1,"hue",0,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"saturation",0,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"value",0,getNumberValidator(),Factory.afterSetFilter);const Invert=function(e){const t=e.data,n=t.length;for(let o=0;o<n;o+=4)t[o]=255-t[o],t[o+1]=255-t[o+1],t[o+2]=255-t[o+2]},ToPolar=function(e,t,n){const o=e.data,u=t.data,d=e.width,f=e.height,v=n.polarCenterX||d/2,w=n.polarCenterY||f/2;let E=Math.sqrt(v*v+w*w),C=d-v,_=f-w;const D=Math.sqrt(C*C+_*_);E=D>E?D:E;const O=f,M=d,N=360/M*Math.PI/180;for(let I=0;I<M;I+=1){const B=Math.sin(I*N),V=Math.cos(I*N);for(let j=0;j<O;j+=1){C=Math.floor(v+E*j/O*V),_=Math.floor(w+E*j/O*B);let q=(_*d+C)*4;const z=o[q+0],$=o[q+1],ee=o[q+2],ie=o[q+3];q=(I+j*d)*4,u[q+0]=z,u[q+1]=$,u[q+2]=ee,u[q+3]=ie}}},FromPolar=function(e,t,n){const o=e.data,u=t.data,d=e.width,f=e.height,v=n.polarCenterX||d/2,w=n.polarCenterY||f/2;let E=Math.sqrt(v*v+w*w),C=d-v,_=f-w;const D=Math.sqrt(C*C+_*_);E=D>E?D:E;const O=f,M=d,N=0;let I,B;for(C=0;C<d;C+=1)for(_=0;_<f;_+=1){const V=C-v,j=_-w,q=Math.sqrt(V*V+j*j)*O/E;let z=(Math.atan2(j,V)*180/Math.PI+360+N)%360;z=z*M/360,I=Math.floor(z),B=Math.floor(q);let $=(B*d+I)*4;const ee=o[$+0],ie=o[$+1],ae=o[$+2],pe=o[$+3];$=(_*d+C)*4,u[$+0]=ee,u[$+1]=ie,u[$+2]=ae,u[$+3]=pe}},Kaleidoscope=function(e){const t=e.width,n=e.height;let o,u,d,f,v,w,E,C,_,D,O=Math.round(this.kaleidoscopePower());const M=Math.round(this.kaleidoscopeAngle()),N=Math.floor(t*(M%360)/360);if(O<1)return;const I=Util.createCanvasElement();I.width=t,I.height=n;const B=I.getContext("2d").getImageData(0,0,t,n);Util.releaseCanvas(I),ToPolar(e,B,{polarCenterX:t/2,polarCenterY:n/2});let V=t/Math.pow(2,O);for(;V<=8;)V=V*2,O-=1;V=Math.ceil(V);let j=V,q=0,z=j,$=1;for(N+V>t&&(q=j,z=0,$=-1),u=0;u<n;u+=1)for(o=q;o!==z;o+=$)d=Math.round(o+N)%t,_=(t*u+d)*4,v=B.data[_+0],w=B.data[_+1],E=B.data[_+2],C=B.data[_+3],D=(t*u+o)*4,B.data[D+0]=v,B.data[D+1]=w,B.data[D+2]=E,B.data[D+3]=C;for(u=0;u<n;u+=1)for(j=Math.floor(V),f=0;f<O;f+=1){for(o=0;o<j+1;o+=1)_=(t*u+o)*4,v=B.data[_+0],w=B.data[_+1],E=B.data[_+2],C=B.data[_+3],D=(t*u+j*2-o-1)*4,B.data[D+0]=v,B.data[D+1]=w,B.data[D+2]=E,B.data[D+3]=C;j*=2}FromPolar(B,e,{})};Factory.addGetterSetter(Node$1,"kaleidoscopePower",2,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"kaleidoscopeAngle",0,getNumberValidator(),Factory.afterSetFilter);function pixelAt(e,t,n){let o=(n*e.width+t)*4;const u=[];return u.push(e.data[o++],e.data[o++],e.data[o++],e.data[o++]),u}function rgbDistance(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}function rgbMean(e){const t=[0,0,0];for(let n=0;n<e.length;n++)t[0]+=e[n][0],t[1]+=e[n][1],t[2]+=e[n][2];return t[0]/=e.length,t[1]/=e.length,t[2]/=e.length,t}function backgroundMask(e,t){const n=pixelAt(e,0,0),o=pixelAt(e,e.width-1,0),u=pixelAt(e,0,e.height-1),d=pixelAt(e,e.width-1,e.height-1),f=t||10;if(rgbDistance(n,o)<f&&rgbDistance(o,d)<f&&rgbDistance(d,u)<f&&rgbDistance(u,n)<f){const v=rgbMean([o,n,d,u]),w=[];for(let E=0;E<e.width*e.height;E++){const C=rgbDistance(v,[e.data[E*4],e.data[E*4+1],e.data[E*4+2]]);w[E]=C<f?0:255}return w}}function applyMask(e,t){for(let n=0;n<e.width*e.height;n++)e.data[4*n+3]=t[n]}function erodeMask(e,t,n){const o=[1,1,1,1,0,1,1,1,1],u=Math.round(Math.sqrt(o.length)),d=Math.floor(u/2),f=[];for(let v=0;v<n;v++)for(let w=0;w<t;w++){const E=v*t+w;let C=0;for(let _=0;_<u;_++)for(let D=0;D<u;D++){const O=v+_-d,M=w+D-d;if(O>=0&&O<n&&M>=0&&M<t){const N=O*t+M,I=o[_*u+D];C+=e[N]*I}}f[E]=C===2040?255:0}return f}function dilateMask(e,t,n){const o=[1,1,1,1,1,1,1,1,1],u=Math.round(Math.sqrt(o.length)),d=Math.floor(u/2),f=[];for(let v=0;v<n;v++)for(let w=0;w<t;w++){const E=v*t+w;let C=0;for(let _=0;_<u;_++)for(let D=0;D<u;D++){const O=v+_-d,M=w+D-d;if(O>=0&&O<n&&M>=0&&M<t){const N=O*t+M,I=o[_*u+D];C+=e[N]*I}}f[E]=C>=1020?255:0}return f}function smoothEdgeMask(e,t,n){const o=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],u=Math.round(Math.sqrt(o.length)),d=Math.floor(u/2),f=[];for(let v=0;v<n;v++)for(let w=0;w<t;w++){const E=v*t+w;let C=0;for(let _=0;_<u;_++)for(let D=0;D<u;D++){const O=v+_-d,M=w+D-d;if(O>=0&&O<n&&M>=0&&M<t){const N=O*t+M,I=o[_*u+D];C+=e[N]*I}}f[E]=C}return f}const Mask=function(e){const t=this.threshold();let n=backgroundMask(e,t);return n&&(n=erodeMask(n,e.width,e.height),n=dilateMask(n,e.width,e.height),n=smoothEdgeMask(n,e.width,e.height),applyMask(e,n)),e};Factory.addGetterSetter(Node$1,"threshold",0,getNumberValidator(),Factory.afterSetFilter);const Noise=function(e){const t=this.noise()*255,n=e.data,o=n.length,u=t/2;for(let d=0;d<o;d+=4)n[d+0]+=u-2*u*Math.random(),n[d+1]+=u-2*u*Math.random(),n[d+2]+=u-2*u*Math.random()};Factory.addGetterSetter(Node$1,"noise",.2,getNumberValidator(),Factory.afterSetFilter);const Pixelate=function(e){let t=Math.ceil(this.pixelSize()),n=e.width,o=e.height,u=Math.ceil(n/t),d=Math.ceil(o/t),f=e.data;if(t<=0){Util.error("pixelSize value can not be <= 0");return}for(let v=0;v<u;v+=1)for(let w=0;w<d;w+=1){let E=0,C=0,_=0,D=0;const O=v*t,M=O+t,N=w*t,I=N+t;let B=0;for(let V=O;V<M;V+=1)if(!(V>=n))for(let j=N;j<I;j+=1){if(j>=o)continue;const q=(n*j+V)*4;E+=f[q+0],C+=f[q+1],_+=f[q+2],D+=f[q+3],B+=1}E=E/B,C=C/B,_=_/B,D=D/B;for(let V=O;V<M;V+=1)if(!(V>=n))for(let j=N;j<I;j+=1){if(j>=o)continue;const q=(n*j+V)*4;f[q+0]=E,f[q+1]=C,f[q+2]=_,f[q+3]=D}}};Factory.addGetterSetter(Node$1,"pixelSize",8,getNumberValidator(),Factory.afterSetFilter);const Posterize=function(e){const t=Math.round(this.levels()*254)+1,n=e.data,o=n.length,u=255/t;for(let d=0;d<o;d+=1)n[d]=Math.floor(n[d]/u)*u};Factory.addGetterSetter(Node$1,"levels",.5,getNumberValidator(),Factory.afterSetFilter);const RGB=function(e){const t=e.data,n=t.length,o=this.red(),u=this.green(),d=this.blue();for(let f=0;f<n;f+=4){const v=(.34*t[f]+.5*t[f+1]+.16*t[f+2])/255;t[f]=v*o,t[f+1]=v*u,t[f+2]=v*d,t[f+3]=t[f+3]}};Factory.addGetterSetter(Node$1,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});Factory.addGetterSetter(Node$1,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});Factory.addGetterSetter(Node$1,"blue",0,RGBComponent,Factory.afterSetFilter);const RGBA=function(e){const t=e.data,n=t.length,o=this.red(),u=this.green(),d=this.blue(),f=this.alpha();for(let v=0;v<n;v+=4){const w=1-f;t[v]=o*f+t[v]*w,t[v+1]=u*f+t[v+1]*w,t[v+2]=d*f+t[v+2]*w}};Factory.addGetterSetter(Node$1,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});Factory.addGetterSetter(Node$1,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});Factory.addGetterSetter(Node$1,"blue",0,RGBComponent,Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"alpha",1,function(e){return this._filterUpToDate=!1,e>1?1:e<0?0:e});const Sepia=function(e){const t=e.data,n=t.length;for(let o=0;o<n;o+=4){const u=t[o+0],d=t[o+1],f=t[o+2];t[o+0]=Math.min(255,u*.393+d*.769+f*.189),t[o+1]=Math.min(255,u*.349+d*.686+f*.168),t[o+2]=Math.min(255,u*.272+d*.534+f*.131)}},Solarize=function(e){const n=e.data;for(let o=0;o<n.length;o+=4){const u=n[o],d=n[o+1],f=n[o+2];.2126*u+.7152*d+.0722*f>=128&&(n[o]=255-u,n[o+1]=255-d,n[o+2]=255-f)}return e},Threshold=function(e){const t=this.threshold()*255,n=e.data,o=n.length;for(let u=0;u<o;u+=1)n[u]=n[u]<t?0:255};Factory.addGetterSetter(Node$1,"threshold",.5,getNumberValidator(),Factory.afterSetFilter);Konva.Util._assign(Konva,{Arc,Arrow,Circle:Circle$1,Ellipse,Image:Image$2,Label,Tag,Line:Line$1,Path,Rect:Rect$1,RegularPolygon,Ring,Sprite,Star,Text:Text$1,TextPath,Transformer,Wedge,Filters:{Blur,Brightness,Brighten,Contrast,Emboss,Enhance,Grayscale,HSL,HSV,Invert,Kaleidoscope,Mask,Noise,Pixelate,Posterize,RGB,RGBA,Sepia,Solarize,Threshold}});var reactReconciler={exports:{}},reactReconciler_production={exports:{}};var hasRequiredReactReconciler_production;function requireReactReconciler_production(){return hasRequiredReactReconciler_production||(hasRequiredReactReconciler_production=1,(function(e){e.exports=function(t){function n(A,R,L,H){return new du(A,R,L,H)}function o(){}function u(A){var R="https://react.dev/errors/"+A;if(1<arguments.length){R+="?args[]="+encodeURIComponent(arguments[1]);for(var L=2;L<arguments.length;L++)R+="&args[]="+encodeURIComponent(arguments[L])}return"Minified React error #"+A+"; visit "+R+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(A){var R=A,L=A;if(A.alternate)for(;R.return;)R=R.return;else{A=R;do R=A,(R.flags&4098)!==0&&(L=R.return),A=R.return;while(A)}return R.tag===3?L:null}function f(A){if(d(A)!==A)throw Error(u(188))}function v(A){var R=A.alternate;if(!R){if(R=d(A),R===null)throw Error(u(188));return R!==A?null:A}for(var L=A,H=R;;){var W=L.return;if(W===null)break;var Y=W.alternate;if(Y===null){if(H=W.return,H!==null){L=H;continue}break}if(W.child===Y.child){for(Y=W.child;Y;){if(Y===L)return f(W),A;if(Y===H)return f(W),R;Y=Y.sibling}throw Error(u(188))}if(L.return!==H.return)L=W,H=Y;else{for(var ge=!1,_e=W.child;_e;){if(_e===L){ge=!0,L=W,H=Y;break}if(_e===H){ge=!0,H=W,L=Y;break}_e=_e.sibling}if(!ge){for(_e=Y.child;_e;){if(_e===L){ge=!0,L=Y,H=W;break}if(_e===H){ge=!0,H=Y,L=W;break}_e=_e.sibling}if(!ge)throw Error(u(189))}}if(L.alternate!==H)throw Error(u(190))}if(L.tag!==3)throw Error(u(188));return L.stateNode.current===L?A:R}function w(A){var R=A.tag;if(R===5||R===26||R===27||R===6)return A;for(A=A.child;A!==null;){if(R=w(A),R!==null)return R;A=A.sibling}return null}function E(A){var R=A.tag;if(R===5||R===26||R===27||R===6)return A;for(A=A.child;A!==null;){if(A.tag!==4&&(R=E(A),R!==null))return R;A=A.sibling}return null}function C(A){return A===null||typeof A!="object"?null:(A=ds&&A[ds]||A["@@iterator"],typeof A=="function"?A:null)}function _(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===Gs?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case va:return"Fragment";case Ca:return"Profiler";case ya:return"StrictMode";case sc:return"Suspense";case us:return"SuspenseList";case rl:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case ma:return"Portal";case ti:return A.displayName||"Context";case nl:return(A._context.displayName||"Context")+".Consumer";case co:var R=A.render;return A=A.displayName,A||(A=R.displayName||R.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case ac:return R=A.displayName||null,R!==null?R:_(A.type)||"Memo";case fr:R=A._payload,A=A._init;try{return _(A(R))}catch{}}return null}function D(A){return{current:A}}function O(A){0>Ea||(A.current=Cc[Ea],Cc[Ea]=null,Ea--)}function M(A,R){Ea++,Cc[Ea]=A.current,A.current=R}function N(A){return A>>>=0,A===0?32:31-(bc(A)/Fh|0)|0}function I(A){var R=A&42;if(R!==0)return R;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return A&261888;case 262144:case 524288:case 1048576:case 2097152:return A&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function B(A,R,L){var H=A.pendingLanes;if(H===0)return 0;var W=0,Y=A.suspendedLanes,ge=A.pingedLanes;A=A.warmLanes;var _e=H&134217727;return _e!==0?(H=_e&~Y,H!==0?W=I(H):(ge&=_e,ge!==0?W=I(ge):L||(L=_e&~A,L!==0&&(W=I(L))))):(_e=H&~Y,_e!==0?W=I(_e):ge!==0?W=I(ge):L||(L=H&~A,L!==0&&(W=I(L)))),W===0?0:R!==0&&R!==W&&(R&Y)===0&&(Y=W&-W,L=R&-R,Y>=L||Y===32&&(L&4194048)!==0)?R:W}function V(A,R){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&R)===0}function j(A,R){switch(A){case 1:case 2:case 4:case 8:case 64:return R+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return R+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function q(){var A=vo;return vo<<=1,(vo&62914560)===0&&(vo=4194304),A}function z(A){for(var R=[],L=0;31>L;L++)R.push(A);return R}function $(A,R){A.pendingLanes|=R,R!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function ee(A,R,L,H,W,Y){var ge=A.pendingLanes;A.pendingLanes=L,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=L,A.entangledLanes&=L,A.errorRecoveryDisabledLanes&=L,A.shellSuspendCounter=0;var _e=A.entanglements,ze=A.expirationTimes,Ze=A.hiddenUpdates;for(L=ge&~L;0<L;){var tt=31-Rr(L),Je=1<<tt;_e[tt]=0,ze[tt]=-1;var it=Ze[tt];if(it!==null)for(Ze[tt]=null,tt=0;tt<it.length;tt++){var yt=it[tt];yt!==null&&(yt.lane&=-536870913)}L&=~Je}H!==0&&ie(A,H,0),Y!==0&&W===0&&A.tag!==0&&(A.suspendedLanes|=Y&~(ge&~R))}function ie(A,R,L){A.pendingLanes|=R,A.suspendedLanes&=~R;var H=31-Rr(R);A.entangledLanes|=R,A.entanglements[H]=A.entanglements[H]|1073741824|L&261930}function ae(A,R){var L=A.entangledLanes|=R;for(A=A.entanglements;L;){var H=31-Rr(L),W=1<<H;W&R|A[H]&R&&(A[H]|=R),L&=~W}}function pe(A,R){var L=R&-R;return L=(L&42)!==0?1:he(L),(L&(A.suspendedLanes|R))!==0?0:L}function he(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function be(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function xe(A){if(typeof Xu=="function"&&Ih(A),Tr&&typeof Tr.setStrictMode=="function")try{Tr.setStrictMode(Ra,A)}catch{}}function Ee(A,R){return A===R&&(A!==0||1/A===1/R)||A!==A&&R!==R}function we(A){if(_c===void 0)try{throw Error()}catch(L){var R=L.stack.trim().match(/\n( *(at )?)/);_c=R&&R[1]||"",Hi=-1<L.stack.indexOf(`
    at`)?" (<anonymous>)":-1<L.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_c+A+Hi}function oe(A,R){if(!A||hl)return"";hl=!0;var L=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var H={DetermineComponentFrameRoot:function(){try{if(R){var Je=function(){throw Error()};if(Object.defineProperty(Je.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Je,[])}catch(yt){var it=yt}Reflect.construct(A,[],Je)}else{try{Je.call()}catch(yt){it=yt}A.call(Je.prototype)}}else{try{throw Error()}catch(yt){it=yt}(Je=A())&&typeof Je.catch=="function"&&Je.catch(function(){})}}catch(yt){if(yt&&it&&typeof yt.stack=="string")return[yt.stack,it.stack]}return[null,null]}};H.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var W=Object.getOwnPropertyDescriptor(H.DetermineComponentFrameRoot,"name");W&&W.configurable&&Object.defineProperty(H.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Y=H.DetermineComponentFrameRoot(),ge=Y[0],_e=Y[1];if(ge&&_e){var ze=ge.split(`
`),Ze=_e.split(`
`);for(W=H=0;H<ze.length&&!ze[H].includes("DetermineComponentFrameRoot");)H++;for(;W<Ze.length&&!Ze[W].includes("DetermineComponentFrameRoot");)W++;if(H===ze.length||W===Ze.length)for(H=ze.length-1,W=Ze.length-1;1<=H&&0<=W&&ze[H]!==Ze[W];)W--;for(;1<=H&&0<=W;H--,W--)if(ze[H]!==Ze[W]){if(H!==1||W!==1)do if(H--,W--,0>W||ze[H]!==Ze[W]){var tt=`
`+ze[H].replace(" at new "," at ");return A.displayName&&tt.includes("<anonymous>")&&(tt=tt.replace("<anonymous>",A.displayName)),tt}while(1<=H&&0<=W);break}}}finally{hl=!1,Error.prepareStackTrace=L}return(L=A?A.displayName||A.name:"")?we(L):""}function se(A,R){switch(A.tag){case 26:case 27:case 5:return we(A.type);case 16:return we("Lazy");case 13:return A.child!==R&&R!==null?we("Suspense Fallback"):we("Suspense");case 19:return we("SuspenseList");case 0:case 15:return oe(A.type,!1);case 11:return oe(A.type.render,!1);case 1:return oe(A.type,!0);case 31:return we("Activity");default:return""}}function J(A){try{var R="",L=null;do R+=se(A,L),L=A,A=A.return;while(A);return R}catch(H){return`
Error generating stack: `+H.message+`
`+H.stack}}function Q(A,R){if(typeof A=="object"&&A!==null){var L=Zu.get(A);return L!==void 0?L:(R={value:A,source:R,stack:J(R)},Zu.set(A,R),R)}return{value:A,source:R,stack:J(R)}}function Z(A,R){ps[Gi++]=fl,ps[Gi++]=Kt,Kt=A,fl=R}function K(A,R,L){ii[zr++]=Qn,ii[zr++]=yi,ii[zr++]=si,si=A;var H=Qn;A=yi;var W=32-Rr(H)-1;H&=~(1<<W),L+=1;var Y=32-Rr(R)+W;if(30<Y){var ge=W-W%5;Y=(H&(1<<ge)-1).toString(32),H>>=ge,W-=ge,Qn=1<<32-Rr(R)+W|L<<W|H,yi=Y+A}else Qn=1<<Y|L<<W|H,yi=A}function ne(A){A.return!==null&&(Z(A,1),K(A,1,0))}function ue(A){for(;A===Kt;)Kt=ps[--Gi],ps[Gi]=null,fl=ps[--Gi],ps[Gi]=null;for(;A===si;)si=ii[--zr],ii[zr]=null,yi=ii[--zr],ii[zr]=null,Qn=ii[--zr],ii[zr]=null}function ye(A,R){ii[zr++]=Qn,ii[zr++]=yi,ii[zr++]=si,Qn=R.id,yi=R.overflow,si=A}function fe(A,R){M(Jn,R),M(gs,A),M(qn,null),A=Kd(R),O(qn),M(qn,A)}function X(){O(qn),O(gs),O(Jn)}function le(A){A.memoizedState!==null&&M(pl,A);var R=qn.current,L=fo(R,A.type);R!==L&&(M(gs,A),M(qn,L))}function de(A){gs.current===A&&(O(qn),O(gs)),pl.current===A&&(O(pl),An?wa._currentValue=Sa:wa._currentValue2=Sa)}function ce(A){var R=Error(u(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Oe(Q(R,A)),Rc}function me(A,R){if(!an)throw Error(u(175));Sh(A.stateNode,A.type,A.memoizedProps,R,A)||ce(A,!0)}function Se(A){for(Vn=A.return;Vn;)switch(Vn.tag){case 5:case 31:case 13:gr=!1;return;case 27:case 3:gr=!0;return;default:Vn=Vn.return}}function Ce(A){if(!an||A!==Vn)return!1;if(!Mt)return Se(A),Mt=!0,!1;var R=A.tag;if(Gn?R!==3&&R!==27&&(R!==5||mo(A.type)&&!pr(A.type,A.memoizedProps))&&on&&ce(A):R!==3&&(R!==5||mo(A.type)&&!pr(A.type,A.memoizedProps))&&on&&ce(A),Se(A),R===13){if(!an)throw Error(u(316));if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(u(317));on=Hu(A)}else if(R===31){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(u(317));on=xh(A)}else on=Gn&&R===27?hh(A.type,on):Vn?dh(A.stateNode):null;return!0}function Te(){an&&(on=Vn=null,Mt=!1)}function je(){var A=Vi;return A!==null&&(Pr===null?Pr=A:Pr.push.apply(Pr,A),Vi=null),A}function Oe(A){Vi===null?Vi=[A]:Vi.push(A)}function Ne(A,R,L){An?(M(ai,R._currentValue),R._currentValue=L):(M(ai,R._currentValue2),R._currentValue2=L)}function De(A){var R=ai.current;An?A._currentValue=R:A._currentValue2=R,O(ai)}function Be(A,R,L){for(;A!==null;){var H=A.alternate;if((A.childLanes&R)!==R?(A.childLanes|=R,H!==null&&(H.childLanes|=R)):H!==null&&(H.childLanes&R)!==R&&(H.childLanes|=R),A===L)break;A=A.return}}function $e(A,R,L,H){var W=A.child;for(W!==null&&(W.return=A);W!==null;){var Y=W.dependencies;if(Y!==null){var ge=W.child;Y=Y.firstContext;e:for(;Y!==null;){var _e=Y;Y=W;for(var ze=0;ze<R.length;ze++)if(_e.context===R[ze]){Y.lanes|=L,_e=Y.alternate,_e!==null&&(_e.lanes|=L),Be(Y.return,L,A),H||(ge=null);break e}Y=_e.next}}else if(W.tag===18){if(ge=W.return,ge===null)throw Error(u(341));ge.lanes|=L,Y=ge.alternate,Y!==null&&(Y.lanes|=L),Be(ge,L,A),ge=null}else ge=W.child;if(ge!==null)ge.return=W;else for(ge=W;ge!==null;){if(ge===A){ge=null;break}if(W=ge.sibling,W!==null){W.return=ge.return,ge=W;break}ge=ge.return}W=ge}}function Qe(A,R,L,H){A=null;for(var W=R,Y=!1;W!==null;){if(!Y){if((W.flags&524288)!==0)Y=!0;else if((W.flags&262144)!==0)break}if(W.tag===10){var ge=W.alternate;if(ge===null)throw Error(u(387));if(ge=ge.memoizedProps,ge!==null){var _e=W.type;Rn(W.pendingProps.value,ge.value)||(A!==null?A.push(_e):A=[_e])}}else if(W===pl.current){if(ge=W.alternate,ge===null)throw Error(u(387));ge.memoizedState.memoizedState!==W.memoizedState.memoizedState&&(A!==null?A.push(wa):A=[wa])}W=W.return}A!==null&&$e(R,A,L,H),R.flags|=262144}function Ye(A){for(A=A.firstContext;A!==null;){var R=A.context;if(!Rn(An?R._currentValue:R._currentValue2,A.memoizedValue))return!0;A=A.next}return!1}function nt(A){Zt=A,Ci=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function rt(A){return vt(Zt,A)}function at(A,R){return Zt===null&&nt(A),vt(A,R)}function vt(A,R){var L=An?R._currentValue:R._currentValue2;if(R={context:R,memoizedValue:L,next:null},Ci===null){if(A===null)throw Error(u(308));Ci=R,A.dependencies={lanes:0,firstContext:R},A.flags|=524288}else Ci=Ci.next=R;return L}function nn(){return{controller:new kh,data:new Map,refCount:0}}function en(A){A.refCount--,A.refCount===0&&Kn(hf,function(){A.controller.abort()})}function Dt(){}function wt(A){A!==jt&&A.next===null&&(jt===null?gl=jt=A:jt=jt.next=A),oi=!0,lr||(lr=!0,Pe())}function Bn(A,R){if(!Tc&&oi){Tc=!0;do for(var L=!1,H=gl;H!==null;){if(A!==0){var W=H.pendingLanes;if(W===0)var Y=0;else{var ge=H.suspendedLanes,_e=H.pingedLanes;Y=(1<<31-Rr(42|A)+1)-1,Y&=W&~(ge&~_e),Y=Y&201326741?Y&201326741|1:Y?Y|2:0}Y!==0&&(L=!0,Le(H,Y))}else Y=Ot,Y=B(H,H===At?Y:0,H.cancelPendingCommit!==null||H.timeoutHandle!==_r),(Y&3)===0||V(H,Y)||(L=!0,Le(H,Y));H=H.next}while(L);Tc=!1}}function Ba(){wl()}function wl(){oi=lr=!1;var A=0;Ws!==0&&ba()&&(A=Ws);for(var R=or(),L=null,H=gl;H!==null;){var W=H.next,Y=Ss(H,R);Y===0?(H.next=null,L===null?gl=W:L.next=W,W===null&&(jt=L)):(L=H,(A!==0||(Y&3)!==0)&&(oi=!0)),H=W}kn!==0&&kn!==5||Bn(A),Ws!==0&&(Ws=0)}function Ss(A,R){for(var L=A.suspendedLanes,H=A.pingedLanes,W=A.expirationTimes,Y=A.pendingLanes&-62914561;0<Y;){var ge=31-Rr(Y),_e=1<<ge,ze=W[ge];ze===-1?((_e&L)===0||(_e&H)!==0)&&(W[ge]=j(_e,R)):ze<=R&&(A.expiredLanes|=_e),Y&=~_e}if(R=At,L=Ot,L=B(A,A===R?L:0,A.cancelPendingCommit!==null||A.timeoutHandle!==_r),H=A.callbackNode,L===0||A===R&&($t===2||$t===9)||A.cancelPendingCommit!==null)return H!==null&&H!==null&&wc(H),A.callbackNode=null,A.callbackPriority=0;if((L&3)===0||V(A,L)){if(R=L&-L,R===A.callbackPriority)return R;switch(H!==null&&wc(H),be(L)){case 2:case 8:L=Nh;break;case 32:L=dl;break;case 268435456:L=Ec;break;default:L=dl}return H=Xe.bind(null,A),L=ul(L,H),A.callbackPriority=R,A.callbackNode=L,R}return H!==null&&H!==null&&wc(H),A.callbackPriority=2,A.callbackNode=null,2}function Xe(A,R){if(kn!==0&&kn!==5)return A.callbackNode=null,A.callbackPriority=0,null;var L=A.callbackNode;if(Ii()&&A.callbackNode!==L)return null;var H=Ot;return H=B(A,A===At?H:0,A.cancelPendingCommit!==null||A.timeoutHandle!==_r),H===0?null:(vi(A,H,R),Ss(A,or()),A.callbackNode!=null&&A.callbackNode===L?Xe.bind(null,A):null)}function Le(A,R){if(Ii())return null;vi(A,R,!0)}function Pe(){xu?Eu(function(){(Rt&6)!==0?ul(xc,Ba):wl()}):ul(xc,Ba)}function st(){if(Ws===0){var A=ms;A===0&&(A=Sc,Sc<<=1,(Sc&261888)===0&&(Sc=256)),Ws=A}return Ws}function Vt(A,R){if(yo===null){var L=yo=[];Qu=0,ms=st(),zn={status:"pending",value:void 0,then:function(H){L.push(H)}}}return Qu++,R.then(Pn,Pn),R}function Pn(){if(--Qu===0&&yo!==null){zn!==null&&(zn.status="fulfilled");var A=yo;yo=null,ms=0,zn=null;for(var R=0;R<A.length;R++)(0,A[R])()}}function Cn(A,R){var L=[],H={status:"pending",value:null,reason:null,then:function(W){L.push(W)}};return A.then(function(){H.status="fulfilled",H.value=R;for(var W=0;W<L.length;W++)(0,L[W])(R)},function(W){for(H.status="rejected",H.reason=W,W=0;W<L.length;W++)(0,L[W])(void 0)}),H}function Mr(){var A=$s.current;return A!==null?A:At.pooledCache}function Sr(A,R){R===null?M($s,$s.current):M($s,R.pool)}function nr(){var A=Mr();return A===null?null:{parent:An?cn._currentValue:cn._currentValue2,pool:A}}function bn(A,R){if(Rn(A,R))return!0;if(typeof A!="object"||A===null||typeof R!="object"||R===null)return!1;var L=Object.keys(A),H=Object.keys(R);if(L.length!==H.length)return!1;for(H=0;H<L.length;H++){var W=L[H];if(!df.call(R,W)||!Rn(A[W],R[W]))return!1}return!0}function Or(A){return A=A.status,A==="fulfilled"||A==="rejected"}function fi(A,R,L){switch(L=A[L],L===void 0?A.push(R):L!==R&&(R.then(Dt,Dt),R=L),R.status){case"fulfilled":return R.value;case"rejected":throw A=R.reason,gi(A),A;default:if(typeof R.status=="string")R.then(Dt,Dt);else{if(A=At,A!==null&&100<A.shellSuspendCounter)throw Error(u(482));A=R,A.status="pending",A.then(function(H){if(R.status==="pending"){var W=R;W.status="fulfilled",W.value=H}},function(H){if(R.status==="pending"){var W=R;W.status="rejected",W.reason=H}})}switch(R.status){case"fulfilled":return R.value;case"rejected":throw A=R.reason,gi(A),A}throw mr=R,Un}}function Fr(A){try{var R=A._init;return R(A._payload)}catch(L){throw L!==null&&typeof L=="object"&&typeof L.then=="function"?(mr=L,Un):L}}function un(){if(mr===null)throw Error(u(459));var A=mr;return mr=null,A}function gi(A){if(A===Un||A===ci)throw Error(u(483))}function Yi(A){var R=Ta;return Ta+=1,qs===null&&(qs=[]),fi(qs,A,R)}function wi(A,R){R=R.props.ref,A.ref=R!==void 0?R:null}function Xi(A,R){throw R.$$typeof===ga?Error(u(525)):(A=Object.prototype.toString.call(R),Error(u(31,A==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":A)))}function Zi(A){function R(He,Fe){if(A){var Ve=He.deletions;Ve===null?(He.deletions=[Fe],He.flags|=16):Ve.push(Fe)}}function L(He,Fe){if(!A)return null;for(;Fe!==null;)R(He,Fe),Fe=Fe.sibling;return null}function H(He){for(var Fe=new Map;He!==null;)He.key!==null?Fe.set(He.key,He):Fe.set(He.index,He),He=He.sibling;return Fe}function W(He,Fe){return He=Gr(He,Fe),He.index=0,He.sibling=null,He}function Y(He,Fe,Ve){return He.index=Ve,A?(Ve=He.alternate,Ve!==null?(Ve=Ve.index,Ve<Fe?(He.flags|=67108866,Fe):Ve):(He.flags|=67108866,Fe)):(He.flags|=1048576,Fe)}function ge(He){return A&&He.alternate===null&&(He.flags|=67108866),He}function _e(He,Fe,Ve,et){return Fe===null||Fe.tag!==6?(Fe=hu(Ve,He.mode,et),Fe.return=He,Fe):(Fe=W(Fe,Ve),Fe.return=He,Fe)}function ze(He,Fe,Ve,et){var ht=Ve.type;return ht===va?tt(He,Fe,Ve.props.children,et,Ve.key):Fe!==null&&(Fe.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===fr&&Fr(ht)===Fe.type)?(Fe=W(Fe,Ve.props),wi(Fe,Ve),Fe.return=He,Fe):(Fe=cs(Ve.type,Ve.key,Ve.props,null,He.mode,et),wi(Fe,Ve),Fe.return=He,Fe)}function Ze(He,Fe,Ve,et){return Fe===null||Fe.tag!==4||Fe.stateNode.containerInfo!==Ve.containerInfo||Fe.stateNode.implementation!==Ve.implementation?(Fe=pu(Ve,He.mode,et),Fe.return=He,Fe):(Fe=W(Fe,Ve.children||[]),Fe.return=He,Fe)}function tt(He,Fe,Ve,et,ht){return Fe===null||Fe.tag!==7?(Fe=ei(Ve,He.mode,et,ht),Fe.return=He,Fe):(Fe=W(Fe,Ve),Fe.return=He,Fe)}function Je(He,Fe,Ve){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number"||typeof Fe=="bigint")return Fe=hu(""+Fe,He.mode,Ve),Fe.return=He,Fe;if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case ki:return Ve=cs(Fe.type,Fe.key,Fe.props,null,He.mode,Ve),wi(Ve,Fe),Ve.return=He,Ve;case ma:return Fe=pu(Fe,He.mode,Ve),Fe.return=He,Fe;case fr:return Fe=Fr(Fe),Je(He,Fe,Ve)}if(Vs(Fe)||C(Fe))return Fe=ei(Fe,He.mode,Ve,null),Fe.return=He,Fe;if(typeof Fe.then=="function")return Je(He,Yi(Fe),Ve);if(Fe.$$typeof===ti)return Je(He,at(He,Fe),Ve);Xi(He,Fe)}return null}function it(He,Fe,Ve,et){var ht=Fe!==null?Fe.key:null;if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number"||typeof Ve=="bigint")return ht!==null?null:_e(He,Fe,""+Ve,et);if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case ki:return Ve.key===ht?ze(He,Fe,Ve,et):null;case ma:return Ve.key===ht?Ze(He,Fe,Ve,et):null;case fr:return Ve=Fr(Ve),it(He,Fe,Ve,et)}if(Vs(Ve)||C(Ve))return ht!==null?null:tt(He,Fe,Ve,et,null);if(typeof Ve.then=="function")return it(He,Fe,Yi(Ve),et);if(Ve.$$typeof===ti)return it(He,Fe,at(He,Ve),et);Xi(He,Ve)}return null}function yt(He,Fe,Ve,et,ht){if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return He=He.get(Ve)||null,_e(Fe,He,""+et,ht);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case ki:return He=He.get(et.key===null?Ve:et.key)||null,ze(Fe,He,et,ht);case ma:return He=He.get(et.key===null?Ve:et.key)||null,Ze(Fe,He,et,ht);case fr:return et=Fr(et),yt(He,Fe,Ve,et,ht)}if(Vs(et)||C(et))return He=He.get(Ve)||null,tt(Fe,He,et,ht,null);if(typeof et.then=="function")return yt(He,Fe,Ve,Yi(et),ht);if(et.$$typeof===ti)return yt(He,Fe,Ve,at(Fe,et),ht);Xi(Fe,et)}return null}function Yn(He,Fe,Ve,et){for(var ht=null,yn=null,ft=Fe,kt=Fe=0,Xn=null;ft!==null&&kt<Ve.length;kt++){ft.index>kt?(Xn=ft,ft=null):Xn=ft.sibling;var Gt=it(He,ft,Ve[kt],et);if(Gt===null){ft===null&&(ft=Xn);break}A&&ft&&Gt.alternate===null&&R(He,ft),Fe=Y(Gt,Fe,kt),yn===null?ht=Gt:yn.sibling=Gt,yn=Gt,ft=Xn}if(kt===Ve.length)return L(He,ft),Mt&&Z(He,kt),ht;if(ft===null){for(;kt<Ve.length;kt++)ft=Je(He,Ve[kt],et),ft!==null&&(Fe=Y(ft,Fe,kt),yn===null?ht=ft:yn.sibling=ft,yn=ft);return Mt&&Z(He,kt),ht}for(ft=H(ft);kt<Ve.length;kt++)Xn=yt(ft,He,kt,Ve[kt],et),Xn!==null&&(A&&Xn.alternate!==null&&ft.delete(Xn.key===null?kt:Xn.key),Fe=Y(Xn,Fe,kt),yn===null?ht=Xn:yn.sibling=Xn,yn=Xn);return A&&ft.forEach(function(hi){return R(He,hi)}),Mt&&Z(He,kt),ht}function _o(He,Fe,Ve,et){if(Ve==null)throw Error(u(151));for(var ht=null,yn=null,ft=Fe,kt=Fe=0,Xn=null,Gt=Ve.next();ft!==null&&!Gt.done;kt++,Gt=Ve.next()){ft.index>kt?(Xn=ft,ft=null):Xn=ft.sibling;var hi=it(He,ft,Gt.value,et);if(hi===null){ft===null&&(ft=Xn);break}A&&ft&&hi.alternate===null&&R(He,ft),Fe=Y(hi,Fe,kt),yn===null?ht=hi:yn.sibling=hi,yn=hi,ft=Xn}if(Gt.done)return L(He,ft),Mt&&Z(He,kt),ht;if(ft===null){for(;!Gt.done;kt++,Gt=Ve.next())Gt=Je(He,Gt.value,et),Gt!==null&&(Fe=Y(Gt,Fe,kt),yn===null?ht=Gt:yn.sibling=Gt,yn=Gt);return Mt&&Z(He,kt),ht}for(ft=H(ft);!Gt.done;kt++,Gt=Ve.next())Gt=yt(ft,He,kt,Gt.value,et),Gt!==null&&(A&&Gt.alternate!==null&&ft.delete(Gt.key===null?kt:Gt.key),Fe=Y(Gt,Fe,kt),yn===null?ht=Gt:yn.sibling=Gt,yn=Gt);return A&&ft.forEach(function(ff){return R(He,ff)}),Mt&&Z(He,kt),ht}function ta(He,Fe,Ve,et){if(typeof Ve=="object"&&Ve!==null&&Ve.type===va&&Ve.key===null&&(Ve=Ve.props.children),typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case ki:e:{for(var ht=Ve.key;Fe!==null;){if(Fe.key===ht){if(ht=Ve.type,ht===va){if(Fe.tag===7){L(He,Fe.sibling),et=W(Fe,Ve.props.children),et.return=He,He=et;break e}}else if(Fe.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===fr&&Fr(ht)===Fe.type){L(He,Fe.sibling),et=W(Fe,Ve.props),wi(et,Ve),et.return=He,He=et;break e}L(He,Fe);break}else R(He,Fe);Fe=Fe.sibling}Ve.type===va?(et=ei(Ve.props.children,He.mode,et,Ve.key),et.return=He,He=et):(et=cs(Ve.type,Ve.key,Ve.props,null,He.mode,et),wi(et,Ve),et.return=He,He=et)}return ge(He);case ma:e:{for(ht=Ve.key;Fe!==null;){if(Fe.key===ht)if(Fe.tag===4&&Fe.stateNode.containerInfo===Ve.containerInfo&&Fe.stateNode.implementation===Ve.implementation){L(He,Fe.sibling),et=W(Fe,Ve.children||[]),et.return=He,He=et;break e}else{L(He,Fe);break}else R(He,Fe);Fe=Fe.sibling}et=pu(Ve,He.mode,et),et.return=He,He=et}return ge(He);case fr:return Ve=Fr(Ve),ta(He,Fe,Ve,et)}if(Vs(Ve))return Yn(He,Fe,Ve,et);if(C(Ve)){if(ht=C(Ve),typeof ht!="function")throw Error(u(150));return Ve=ht.call(Ve),_o(He,Fe,Ve,et)}if(typeof Ve.then=="function")return ta(He,Fe,Yi(Ve),et);if(Ve.$$typeof===ti)return ta(He,Fe,at(He,Ve),et);Xi(He,Ve)}return typeof Ve=="string"&&Ve!==""||typeof Ve=="number"||typeof Ve=="bigint"?(Ve=""+Ve,Fe!==null&&Fe.tag===6?(L(He,Fe.sibling),et=W(Fe,Ve),et.return=He,He=et):(L(He,Fe),et=hu(Ve,He.mode,et),et.return=He,He=et),ge(He)):L(He,Fe)}return function(He,Fe,Ve,et){try{Ta=0;var ht=ta(He,Fe,Ve,et);return qs=null,ht}catch(ft){if(ft===Un||ft===ci)throw ft;var yn=n(29,ft,null,He.mode);return yn.lanes=et,yn.return=He,yn}finally{}}}function Mn(){for(var A=Ui,R=Da=Ui=0;R<A;){var L=tr[R];tr[R++]=null;var H=tr[R];tr[R++]=null;var W=tr[R];tr[R++]=null;var Y=tr[R];if(tr[R++]=null,H!==null&&W!==null){var ge=H.pending;ge===null?W.next=W:(W.next=ge.next,ge.next=W),H.pending=W}Y!==0&&Qi(L,W,Y)}}function qr(A,R,L,H){tr[Ui++]=A,tr[Ui++]=R,tr[Ui++]=L,tr[Ui++]=H,Da|=H,A.lanes|=H,A=A.alternate,A!==null&&(A.lanes|=H)}function ws(A,R,L,H){return qr(A,R,L,H),On(A)}function xs(A,R){return qr(A,null,null,R),On(A)}function Qi(A,R,L){A.lanes|=L;var H=A.alternate;H!==null&&(H.lanes|=L);for(var W=!1,Y=A.return;Y!==null;)Y.childLanes|=L,H=Y.alternate,H!==null&&(H.childLanes|=L),Y.tag===22&&(A=Y.stateNode,A===null||A._visibility&1||(W=!0)),A=Y,Y=Y.return;return A.tag===3?(Y=A.stateNode,W&&R!==null&&(W=31-Rr(L),A=Y.hiddenUpdates,H=A[W],H===null?A[W]=[R]:H.push(R),R.lane=L|536870912),Y):null}function On(A){if(50<Ht)throw Ht=0,Sl=null,Error(u(185));for(var R=A.return;R!==null;)A=R,R=A.return;return A.tag===3?A.stateNode:null}function rr(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Es(A,R){A=A.updateQueue,R.updateQueue===A&&(R.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function xi(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function As(A,R,L){var H=A.updateQueue;if(H===null)return null;if(H=H.shared,(Rt&2)!==0){var W=H.pending;return W===null?R.next=R:(R.next=W.next,W.next=R),H.pending=R,R=On(A),Qi(A,null,L),R}return qr(A,H,R,L),On(A)}function Fo(A,R,L){if(R=R.updateQueue,R!==null&&(R=R.shared,(L&4194048)!==0)){var H=R.lanes;H&=A.pendingLanes,L|=H,R.lanes=L,ae(A,L)}}function xl(A,R){var L=A.updateQueue,H=A.alternate;if(H!==null&&(H=H.updateQueue,L===H)){var W=null,Y=null;if(L=L.firstBaseUpdate,L!==null){do{var ge={lane:L.lane,tag:L.tag,payload:L.payload,callback:null,next:null};Y===null?W=Y=ge:Y=Y.next=ge,L=L.next}while(L!==null);Y===null?W=Y=R:Y=Y.next=R}else W=Y=R;L={baseState:H.baseState,firstBaseUpdate:W,lastBaseUpdate:Y,shared:H.shared,callbacks:H.callbacks},A.updateQueue=L;return}A=L.lastBaseUpdate,A===null?L.firstBaseUpdate=R:A.next=R,L.lastBaseUpdate=R}function Ji(){if(Pc){var A=zn;if(A!==null)throw A}}function na(A,R,L,H){Pc=!1;var W=A.updateQueue;Ur=!1;var Y=W.firstBaseUpdate,ge=W.lastBaseUpdate,_e=W.shared.pending;if(_e!==null){W.shared.pending=null;var ze=_e,Ze=ze.next;ze.next=null,ge===null?Y=Ze:ge.next=Ze,ge=ze;var tt=A.alternate;tt!==null&&(tt=tt.updateQueue,_e=tt.lastBaseUpdate,_e!==ge&&(_e===null?tt.firstBaseUpdate=Ze:_e.next=Ze,tt.lastBaseUpdate=ze))}if(Y!==null){var Je=W.baseState;ge=0,tt=Ze=ze=null,_e=Y;do{var it=_e.lane&-536870913,yt=it!==_e.lane;if(yt?(Ot&it)===it:(H&it)===it){it!==0&&it===ms&&(Pc=!0),tt!==null&&(tt=tt.next={lane:0,tag:_e.tag,payload:_e.payload,callback:null,next:null});e:{var Yn=A,_o=_e;it=R;var ta=L;switch(_o.tag){case 1:if(Yn=_o.payload,typeof Yn=="function"){Je=Yn.call(ta,Je,it);break e}Je=Yn;break e;case 3:Yn.flags=Yn.flags&-65537|128;case 0:if(Yn=_o.payload,it=typeof Yn=="function"?Yn.call(ta,Je,it):Yn,it==null)break e;Je=ic({},Je,it);break e;case 2:Ur=!0}}it=_e.callback,it!==null&&(A.flags|=64,yt&&(A.flags|=8192),yt=W.callbacks,yt===null?W.callbacks=[it]:yt.push(it))}else yt={lane:it,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null},tt===null?(Ze=tt=yt,ze=Je):tt=tt.next=yt,ge|=it;if(_e=_e.next,_e===null){if(_e=W.shared.pending,_e===null)break;yt=_e,_e=yt.next,yt.next=null,W.lastBaseUpdate=yt,W.shared.pending=null}}while(!0);tt===null&&(ze=Je),W.baseState=ze,W.firstBaseUpdate=Ze,W.lastBaseUpdate=tt,Y===null&&(W.shared.lanes=0),ys|=ge,A.lanes=ge,A.memoizedState=Je}}function ra(A,R){if(typeof A!="function")throw Error(u(191,A));A.call(R)}function ia(A,R){var L=A.callbacks;if(L!==null)for(A.callbacks=null,A=0;A<L.length;A++)ra(L[A],R)}function Ha(A,R){A=Wi,M(Ks,A),M(Pa,R),Wi=A|R.baseLanes}function _s(){M(Ks,Wi),M(Pa,Pa.current)}function Fn(){Wi=Ks.current,O(Pa),O(Ks)}function es(A){var R=A.alternate;M(wn,wn.current&1),M(Dr,A),vr===null&&(R===null||Pa.current!==null||R.memoizedState!==null)&&(vr=A)}function El(A){M(wn,wn.current),M(Dr,A),vr===null&&(vr=A)}function Rs(A){A.tag===22?(M(wn,wn.current),M(Dr,A),vr===null&&(vr=A)):Lr()}function Lr(){M(wn,wn.current),M(Dr,Dr.current)}function Nr(A){O(Dr),vr===A&&(vr=null),O(wn)}function Lo(A){for(var R=A;R!==null;){if(R.tag===13){var L=R.memoizedState;if(L!==null&&(L=L.dehydrated,L===null||Us(L)||hc(L)))return R}else if(R.tag===19&&(R.memoizedProps.revealOrder==="forwards"||R.memoizedProps.revealOrder==="backwards"||R.memoizedProps.revealOrder==="unstable_legacy-backwards"||R.memoizedProps.revealOrder==="together")){if((R.flags&128)!==0)return R}else if(R.child!==null){R.child.return=R,R=R.child;continue}if(R===A)break;for(;R.sibling===null;){if(R.return===null||R.return===A)return null;R=R.return}R.sibling.return=R.return,R=R.sibling}return null}function dn(){throw Error(u(321))}function kc(A,R){if(R===null)return!1;for(var L=0;L<R.length&&L<A.length;L++)if(!Rn(A[L],R[L]))return!1;return!0}function Ga(A,R,L,H,W,Y){return vs=Y,bt=R,R.memoizedState=null,R.updateQueue=null,R.lanes=0,ut.H=A===null||A.memoizedState===null?gn:ji,Nt=!1,Y=L(H,W),Nt=!1,St&&(Y=Ei(R,L,H,W)),No(A),Y}function No(A){ut.H=jr;var R=ct!==null&&ct.next!==null;if(vs=0,mt=ct=bt=null,Et=!1,ui=0,bi=null,R)throw Error(u(300));A===null||tn||(A=A.dependencies,A!==null&&Ye(A)&&(tn=!0))}function Ei(A,R,L,H){bt=A;var W=0;do{if(St&&(bi=null),ui=0,St=!1,25<=W)throw Error(u(301));if(W+=1,mt=ct=null,A.updateQueue!=null){var Y=A.updateQueue;Y.lastEffect=null,Y.events=null,Y.stores=null,Y.memoCache!=null&&(Y.memoCache.index=0)}ut.H=Ys,Y=R(L,H)}while(St);return Y}function Kr(){var A=ut.H,R=A.useState()[0];return R=typeof R.then=="function"?sr(R):R,A=A.useState()[0],(ct!==null?ct.memoizedState:null)!==A&&(bt.flags|=1024),R}function Al(){var A=cr!==0;return cr=0,A}function Bc(A,R,L){R.updateQueue=A.updateQueue,R.flags&=-2053,A.lanes&=~L}function Io(A){if(Et){for(A=A.memoizedState;A!==null;){var R=A.queue;R!==null&&(R.pending=null),A=A.next}Et=!1}vs=0,mt=ct=bt=null,St=!1,ui=cr=0,bi=null}function ir(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?bt.memoizedState=mt=A:mt=mt.next=A,mt}function rn(){if(ct===null){var A=bt.alternate;A=A!==null?A.memoizedState:null}else A=ct.next;var R=mt===null?bt.memoizedState:mt.next;if(R!==null)mt=R,ct=A;else{if(A===null)throw bt.alternate===null?Error(u(467)):Error(u(310));ct=A,A={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},mt===null?bt.memoizedState=mt=A:mt=mt.next=A}return mt}function _l(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function sr(A){var R=ui;return ui+=1,bi===null&&(bi=[]),A=fi(bi,A,R),R=bt,(mt===null?R.memoizedState:mt.next)===null&&(R=R.alternate,ut.H=R===null||R.memoizedState===null?gn:ji),A}function Va(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return sr(A);if(A.$$typeof===ti)return rt(A)}throw Error(u(438,String(A)))}function Rl(A){var R=null,L=bt.updateQueue;if(L!==null&&(R=L.memoCache),R==null){var H=bt.alternate;H!==null&&(H=H.updateQueue,H!==null&&(H=H.memoCache,H!=null&&(R={data:H.data.map(function(W){return W.slice()}),index:0})))}if(R==null&&(R={data:[],index:0}),L===null&&(L=_l(),bt.updateQueue=L),L.memoCache=R,L=R.data[R.index],L===void 0)for(L=R.data[R.index]=Array(A),H=0;H<A;H++)L[H]=mu;return R.index++,L}function mi(A,R){return typeof R=="function"?R(A):R}function ts(A){var R=rn();return Tl(R,ct,A)}function Tl(A,R,L){var H=A.queue;if(H===null)throw Error(u(311));H.lastRenderedReducer=L;var W=A.baseQueue,Y=H.pending;if(Y!==null){if(W!==null){var ge=W.next;W.next=Y.next,Y.next=ge}R.baseQueue=W=Y,H.pending=null}if(Y=A.baseState,W===null)A.memoizedState=Y;else{R=W.next;var _e=ge=null,ze=null,Ze=R,tt=!1;do{var Je=Ze.lane&-536870913;if(Je!==Ze.lane?(Ot&Je)===Je:(vs&Je)===Je){var it=Ze.revertLane;if(it===0)ze!==null&&(ze=ze.next={lane:0,revertLane:0,gesture:null,action:Ze.action,hasEagerState:Ze.hasEagerState,eagerState:Ze.eagerState,next:null}),Je===ms&&(tt=!0);else if((vs&it)===it){Ze=Ze.next,it===ms&&(tt=!0);continue}else Je={lane:0,revertLane:Ze.revertLane,gesture:null,action:Ze.action,hasEagerState:Ze.hasEagerState,eagerState:Ze.eagerState,next:null},ze===null?(_e=ze=Je,ge=Y):ze=ze.next=Je,bt.lanes|=it,ys|=it;Je=Ze.action,Nt&&L(Y,Je),Y=Ze.hasEagerState?Ze.eagerState:L(Y,Je)}else it={lane:Je,revertLane:Ze.revertLane,gesture:Ze.gesture,action:Ze.action,hasEagerState:Ze.hasEagerState,eagerState:Ze.eagerState,next:null},ze===null?(_e=ze=it,ge=Y):ze=ze.next=it,bt.lanes|=Je,ys|=Je;Ze=Ze.next}while(Ze!==null&&Ze!==R);if(ze===null?ge=Y:ze.next=_e,!Rn(Y,A.memoizedState)&&(tn=!0,tt&&(L=zn,L!==null)))throw L;A.memoizedState=Y,A.baseState=ge,A.baseQueue=ze,H.lastRenderedState=Y}return W===null&&(H.lanes=0),[A.memoizedState,H.dispatch]}function Dl(A){var R=rn(),L=R.queue;if(L===null)throw Error(u(311));L.lastRenderedReducer=A;var H=L.dispatch,W=L.pending,Y=R.memoizedState;if(W!==null){L.pending=null;var ge=W=W.next;do Y=A(Y,ge.action),ge=ge.next;while(ge!==W);Rn(Y,R.memoizedState)||(tn=!0),R.memoizedState=Y,R.baseQueue===null&&(R.baseState=Y),L.lastRenderedState=Y}return[Y,H]}function sa(A,R,L){var H=bt,W=rn(),Y=Mt;if(Y){if(L===void 0)throw Error(u(407));L=L()}else L=R();var ge=!Rn((ct||W).memoizedState,L);if(ge&&(W.memoizedState=L,tn=!0),W=W.queue,ja(Gc.bind(null,H,W,A),[A]),W.getSnapshot!==R||ge||mt!==null&&mt.memoizedState.tag&1){if(H.flags|=2048,Ir(9,{destroy:void 0},Hc.bind(null,H,W,L,R),null),At===null)throw Error(u(349));Y||(vs&127)!==0||gd(H,R,L)}return L}function gd(A,R,L){A.flags|=16384,A={getSnapshot:R,value:L},R=bt.updateQueue,R===null?(R=_l(),bt.updateQueue=R,R.stores=[A]):(L=R.stores,L===null?R.stores=[A]:L.push(A))}function Hc(A,R,L,H){R.value=L,R.getSnapshot=H,Pl(R)&&md(A)}function Gc(A,R,L){return L(function(){Pl(R)&&md(A)})}function Pl(A){var R=A.getSnapshot;A=A.value;try{var L=R();return!Rn(A,L)}catch{return!0}}function md(A){var R=xs(A,2);R!==null&&fn(R,A,2)}function Vc(A){var R=ir();if(typeof A=="function"){var L=A;if(A=L(),Nt){xe(!0);try{L()}finally{xe(!1)}}}return R.memoizedState=R.baseState=A,R.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mi,lastRenderedState:A},R}function ko(A,R,L,H){return A.baseState=L,Tl(A,ct,typeof H=="function"?H:mi)}function ns(A,R,L,H,W){if(Bl(A))throw Error(u(485));if(A=R.action,A!==null){var Y={payload:W,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ge){Y.listeners.push(ge)}};ut.T!==null?L(!0):Y.isTransition=!1,H(Y),L=R.pending,L===null?(Y.next=R.pending=Y,Ml(R,Y)):(Y.next=L.next,R.pending=L.next=Y)}}function Ml(A,R){var L=R.action,H=R.payload,W=A.state;if(R.isTransition){var Y=ut.T,ge={};ut.T=ge;try{var _e=L(W,H),ze=ut.S;ze!==null&&ze(ge,_e),Ol(A,R,_e)}catch(Ze){Ts(A,R,Ze)}finally{Y!==null&&ge.types!==null&&(Y.types=ge.types),ut.T=Y}}else try{Y=L(W,H),Ol(A,R,Y)}catch(Ze){Ts(A,R,Ze)}}function Ol(A,R,L){L!==null&&typeof L=="object"&&typeof L.then=="function"?L.then(function(H){aa(A,R,H)},function(H){return Ts(A,R,H)}):aa(A,R,L)}function aa(A,R,L){R.status="fulfilled",R.value=L,zc(R),A.state=L,R=A.pending,R!==null&&(L=R.next,L===R?A.pending=null:(L=L.next,R.next=L,Ml(A,L)))}function Ts(A,R,L){var H=A.pending;if(A.pending=null,H!==null){H=H.next;do R.status="rejected",R.reason=L,zc(R),R=R.next;while(R!==H)}A.action=null}function zc(A){A=A.listeners;for(var R=0;R<A.length;R++)(0,A[R])()}function Fl(A,R){return R}function Uc(A,R){if(Mt){var L=At.formState;if(L!==null){e:{var H=bt;if(Mt){if(on){var W=uh(on,gr);if(W){on=dh(W),H=Nu(W);break e}}ce(H)}H=!1}H&&(R=L[0])}}L=ir(),L.memoizedState=L.baseState=R,H={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fl,lastRenderedState:R},L.queue=H,L=wd.bind(null,bt,H),H.dispatch=L,H=Vc(!1);var Y=kl.bind(null,bt,!1,H.queue);return H=ir(),W={state:R,dispatch:null,action:A,pending:null},H.queue=W,L=ns.bind(null,bt,W,Y,L),W.dispatch=L,H.memoizedState=A,[R,L,!1]}function za(A){var R=rn();return Ai(R,ct,A)}function Ai(A,R,L){if(R=Tl(A,R,Fl)[0],A=ts(mi)[0],typeof R=="object"&&R!==null&&typeof R.then=="function")try{var H=sr(R)}catch(ge){throw ge===Un?ci:ge}else H=R;R=rn();var W=R.queue,Y=W.dispatch;return L!==R.memoizedState&&(bt.flags|=2048,Ir(9,{destroy:void 0},jc.bind(null,W,L),null)),[H,Y,A]}function jc(A,R){A.action=R}function Ua(A){var R=rn(),L=ct;if(L!==null)return Ai(R,L,A);rn(),R=R.memoizedState,L=rn();var H=L.queue.dispatch;return L.memoizedState=A,[R,H,!1]}function Ir(A,R,L,H){return A={tag:A,create:L,deps:H,inst:R,next:null},R=bt.updateQueue,R===null&&(R=_l(),bt.updateQueue=R),L=R.lastEffect,L===null?R.lastEffect=A.next=A:(H=L.next,L.next=A,A.next=H,R.lastEffect=A),A}function Ll(){return rn().memoizedState}function oa(A,R,L,H){var W=ir();bt.flags|=A,W.memoizedState=Ir(1|R,{destroy:void 0},L,H===void 0?null:H)}function Bo(A,R,L,H){var W=rn();H=H===void 0?null:H;var Y=W.memoizedState.inst;ct!==null&&H!==null&&kc(H,ct.memoizedState.deps)?W.memoizedState=Ir(R,Y,L,H):(bt.flags|=A,W.memoizedState=Ir(1|R,Y,L,H))}function Ho(A,R){oa(8390656,8,A,R)}function ja(A,R){Bo(2048,8,A,R)}function vd(A){bt.flags|=4;var R=bt.updateQueue;if(R===null)R=_l(),bt.updateQueue=R,R.events=[A];else{var L=R.events;L===null?R.events=[A]:L.push(A)}}function ur(A){var R=rn().memoizedState;return vd({ref:R,nextImpl:A}),function(){if((Rt&2)!==0)throw Error(u(440));return R.impl.apply(void 0,arguments)}}function Ds(A,R){return Bo(4,2,A,R)}function Go(A,R){return Bo(4,4,A,R)}function Wa(A,R){if(typeof R=="function"){A=A();var L=R(A);return function(){typeof L=="function"?L():R(null)}}if(R!=null)return A=A(),R.current=A,function(){R.current=null}}function yd(A,R,L){L=L!=null?L.concat([A]):null,Bo(4,4,Wa.bind(null,R,A),L)}function Vo(){}function Nl(A,R){var L=rn();R=R===void 0?null:R;var H=L.memoizedState;return R!==null&&kc(R,H[1])?H[0]:(L.memoizedState=[A,R],A)}function $a(A,R){var L=rn();R=R===void 0?null:R;var H=L.memoizedState;if(R!==null&&kc(R,H[1]))return H[0];if(H=A(),Nt){xe(!0);try{A()}finally{xe(!1)}}return L.memoizedState=[H,R],H}function qa(A,R,L){return L===void 0||(vs&1073741824)!==0&&(Ot&261930)===0?A.memoizedState=R:(A.memoizedState=L,A=as(),bt.lanes|=A,ys|=A,L)}function Wc(A,R,L,H){return Rn(L,R)?L:Pa.current!==null?(A=qa(A,L,H),Rn(A,R)||(tn=!0),A):(vs&42)===0||(vs&1073741824)!==0&&(Ot&261930)===0?(tn=!0,A.memoizedState=L):(A=as(),bt.lanes|=A,ys|=A,R)}function Cd(A,R,L,H,W){var Y=ni();Pt(Y!==0&&8>Y?Y:8);var ge=ut.T,_e={};ut.T=_e,kl(A,!1,R,L);try{var ze=W(),Ze=ut.S;if(Ze!==null&&Ze(_e,ze),ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var tt=Cn(ze,H);zo(A,R,tt,sn(A))}else zo(A,R,H,sn(A))}catch(Je){zo(A,R,{then:function(){},status:"rejected",reason:Je},sn())}finally{Pt(Y),ge!==null&&_e.types!==null&&(ge.types=_e.types),ut.T=ge}}function bd(A){var R=A.memoizedState;if(R!==null)return R;R={memoizedState:Sa,baseState:Sa,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mi,lastRenderedState:Sa},next:null};var L={};return R.next={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mi,lastRenderedState:L},next:null},A.memoizedState=R,A=A.alternate,A!==null&&(A.memoizedState=R),R}function $c(){return rt(wa)}function Il(){return rn().memoizedState}function Sd(){return rn().memoizedState}function ef(A){for(var R=A.return;R!==null;){switch(R.tag){case 24:case 3:var L=sn();A=xi(L);var H=As(R,A,L);H!==null&&(fn(H,R,L),Fo(H,R,L)),R={cache:nn()},A.payload=R;return}R=R.return}}function tf(A,R,L){var H=sn();L={lane:H,revertLane:0,gesture:null,action:L,hasEagerState:!1,eagerState:null,next:null},Bl(A)?xd(R,L):(L=ws(A,R,L,H),L!==null&&(fn(L,A,H),Ed(L,R,H)))}function wd(A,R,L){var H=sn();zo(A,R,L,H)}function zo(A,R,L,H){var W={lane:H,revertLane:0,gesture:null,action:L,hasEagerState:!1,eagerState:null,next:null};if(Bl(A))xd(R,W);else{var Y=A.alternate;if(A.lanes===0&&(Y===null||Y.lanes===0)&&(Y=R.lastRenderedReducer,Y!==null))try{var ge=R.lastRenderedState,_e=Y(ge,L);if(W.hasEagerState=!0,W.eagerState=_e,Rn(_e,ge))return qr(A,R,W,0),At===null&&Mn(),!1}catch{}finally{}if(L=ws(A,R,W,H),L!==null)return fn(L,A,H),Ed(L,R,H),!0}return!1}function kl(A,R,L,H){if(H={lane:2,revertLane:st(),gesture:null,action:H,hasEagerState:!1,eagerState:null,next:null},Bl(A)){if(R)throw Error(u(479))}else R=ws(A,L,H,2),R!==null&&fn(R,A,2)}function Bl(A){var R=A.alternate;return A===bt||R!==null&&R===bt}function xd(A,R){St=Et=!0;var L=A.pending;L===null?R.next=R:(R.next=L.next,L.next=R),A.pending=R}function Ed(A,R,L){if((L&4194048)!==0){var H=R.lanes;H&=A.pendingLanes,L|=H,R.lanes=L,ae(A,L)}}function qc(A,R,L,H){R=A.memoizedState,L=L(H,R),L=L==null?R:ic({},R,L),A.memoizedState=L,A.lanes===0&&(A.updateQueue.baseState=L)}function Hl(A,R,L,H,W,Y,ge){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(H,Y,ge):R.prototype&&R.prototype.isPureReactComponent?!bn(L,H)||!bn(W,Y):!0}function Ad(A,R,L,H){A=R.state,typeof R.componentWillReceiveProps=="function"&&R.componentWillReceiveProps(L,H),typeof R.UNSAFE_componentWillReceiveProps=="function"&&R.UNSAFE_componentWillReceiveProps(L,H),R.state!==A&&ml.enqueueReplaceState(R,R.state,null)}function la(A,R){var L=R;if("ref"in R){L={};for(var H in R)H!=="ref"&&(L[H]=R[H])}if(A=A.defaultProps){L===R&&(L=ic({},L));for(var W in A)L[W]===void 0&&(L[W]=A[W])}return L}function Gl(A,R){try{var L=A.onUncaughtError;L(R.value,{componentStack:R.stack})}catch(H){setTimeout(function(){throw H})}}function Kc(A,R,L){try{var H=A.onCaughtError;H(L.value,{componentStack:L.stack,errorBoundary:R.tag===1?R.stateNode:null})}catch(W){setTimeout(function(){throw W})}}function Yc(A,R,L){return L=xi(L),L.tag=3,L.payload={element:null},L.callback=function(){Gl(A,R)},L}function _d(A){return A=xi(A),A.tag=3,A}function Rd(A,R,L,H){var W=L.type.getDerivedStateFromError;if(typeof W=="function"){var Y=H.value;A.payload=function(){return W(Y)},A.callback=function(){Kc(R,L,H)}}var ge=L.stateNode;ge!==null&&typeof ge.componentDidCatch=="function"&&(A.callback=function(){Kc(R,L,H),typeof W!="function"&&(Cs===null?Cs=new Set([this]):Cs.add(this));var _e=H.stack;this.componentDidCatch(H.value,{componentStack:_e!==null?_e:""})})}function nf(A,R,L,H,W){if(L.flags|=32768,H!==null&&typeof H=="object"&&typeof H.then=="function"){if(R=L.alternate,R!==null&&Qe(R,L,W,!0),L=Dr.current,L!==null){switch(L.tag){case 31:case 13:return vr===null?so():L.alternate===null&&vn===0&&(vn=3),L.flags&=-257,L.flags|=65536,L.lanes=W,H===zi?L.flags|=16384:(R=L.updateQueue,R===null?L.updateQueue=new Set([H]):R.add(H),lo(A,H,W)),!1;case 22:return L.flags|=65536,H===zi?L.flags|=16384:(R=L.updateQueue,R===null?(R={transitions:null,markerInstances:null,retryQueue:new Set([H])},L.updateQueue=R):(L=R.retryQueue,L===null?R.retryQueue=new Set([H]):L.add(H)),lo(A,H,W)),!1}throw Error(u(435,L.tag))}return lo(A,H,W),so(),!1}if(Mt)return R=Dr.current,R!==null?((R.flags&65536)===0&&(R.flags|=256),R.flags|=65536,R.lanes=W,H!==Rc&&(A=Error(u(422),{cause:H}),Oe(Q(A,L)))):(H!==Rc&&(R=Error(u(423),{cause:H}),Oe(Q(R,L))),A=A.current.alternate,A.flags|=65536,W&=-W,A.lanes|=W,H=Q(H,L),W=Yc(A.stateNode,H,W),xl(A,W),vn!==4&&(vn=2)),!1;var Y=Error(u(520),{cause:H});if(Y=Q(Y,L),yl===null?yl=[Y]:yl.push(Y),vn!==4&&(vn=2),R===null)return!0;H=Q(H,L),L=R;do{switch(L.tag){case 3:return L.flags|=65536,A=W&-W,L.lanes|=A,A=Yc(L.stateNode,H,A),xl(L,A),!1;case 1:if(R=L.type,Y=L.stateNode,(L.flags&128)===0&&(typeof R.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(Cs===null||!Cs.has(Y))))return L.flags|=65536,W&=-W,L.lanes|=W,W=_d(W),Rd(W,A,L,H),xl(L,W),!1}L=L.return}while(L!==null);return!1}function Zn(A,R,L,H){R.child=A===null?Ju(R,null,L,H):er(R,A.child,L,H)}function Td(A,R,L,H,W){L=L.render;var Y=R.ref;if("ref"in H){var ge={};for(var _e in H)_e!=="ref"&&(ge[_e]=H[_e])}else ge=H;return nt(R),H=Ga(A,R,L,ge,Y,W),_e=Al(),A!==null&&!tn?(Bc(A,R,W),_i(A,R,W)):(Mt&&_e&&ne(R),R.flags|=1,Zn(A,R,H,W),R.child)}function Dd(A,R,L,H,W){if(A===null){var Y=L.type;return typeof Y=="function"&&!fa(Y)&&Y.defaultProps===void 0&&L.compare===null?(R.tag=15,R.type=Y,Pd(A,R,Y,H,W)):(A=cs(L.type,null,H,R,R.mode,W),A.ref=R.ref,A.return=R,R.child=A)}if(Y=A.child,!jo(A,W)){var ge=Y.memoizedProps;if(L=L.compare,L=L!==null?L:bn,L(ge,H)&&A.ref===R.ref)return _i(A,R,W)}return R.flags|=1,A=Gr(Y,H),A.ref=R.ref,A.return=R,R.child=A}function Pd(A,R,L,H,W){if(A!==null){var Y=A.memoizedProps;if(bn(Y,H)&&A.ref===R.ref)if(tn=!1,R.pendingProps=H=Y,jo(A,W))(A.flags&131072)!==0&&(tn=!0);else return R.lanes=A.lanes,_i(A,R,W)}return zl(A,R,L,H,W)}function Md(A,R,L,H){var W=H.children,Y=A!==null?A.memoizedState:null;if(A===null&&R.stateNode===null&&(R.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),H.mode==="hidden"){if((R.flags&128)!==0){if(Y=Y!==null?Y.baseLanes|L:L,A!==null){for(H=R.child=A.child,W=0;H!==null;)W=W|H.lanes|H.childLanes,H=H.sibling;H=W&~Y}else H=0,R.child=null;return Ka(A,R,Y,L,H)}if((L&536870912)!==0)R.memoizedState={baseLanes:0,cachePool:null},A!==null&&Sr(R,Y!==null?Y.cachePool:null),Y!==null?Ha(R,Y):_s(),Rs(R);else return H=R.lanes=536870912,Ka(A,R,Y!==null?Y.baseLanes|L:L,L,H)}else Y!==null?(Sr(R,Y.cachePool),Ha(R,Y),Lr(),R.memoizedState=null):(A!==null&&Sr(R,null),_s(),Lr());return Zn(A,R,W,L),R.child}function ca(A,R){return A!==null&&A.tag===22||R.stateNode!==null||(R.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),R.sibling}function Ka(A,R,L,H,W){var Y=Mr();return Y=Y===null?null:{parent:An?cn._currentValue:cn._currentValue2,pool:Y},R.memoizedState={baseLanes:L,cachePool:Y},A!==null&&Sr(R,null),_s(),Rs(R),A!==null&&Qe(A,R,H,!0),R.childLanes=W,null}function Vl(A,R){return R=Ps({mode:R.mode,children:R.children},A.mode),R.ref=A.ref,A.child=R,R.return=A,R}function Xc(A,R,L){return er(R,A.child,null,L),A=Vl(R,R.pendingProps),A.flags|=2,Nr(R),R.memoizedState=null,A}function Od(A,R,L){var H=R.pendingProps,W=(R.flags&128)!==0;if(R.flags&=-129,A===null){if(Mt){if(H.mode==="hidden")return A=Vl(R,H),R.lanes=536870912,ca(null,A);if(El(R),(A=on)?(A=ku(A,gr),A!==null&&(R.memoizedState={dehydrated:A,treeContext:si!==null?{id:Qn,overflow:yi}:null,retryLane:536870912,hydrationErrors:null},L=fu(A),L.return=R,R.child=L,Vn=R,on=null)):A=null,A===null)throw ce(R);return R.lanes=536870912,null}return Vl(R,H)}var Y=A.memoizedState;if(Y!==null){var ge=Y.dehydrated;if(El(R),W)if(R.flags&256)R.flags&=-257,R=Xc(A,R,L);else if(R.memoizedState!==null)R.child=A.child,R.flags|=128,R=null;else throw Error(u(558));else if(tn||Qe(A,R,L,!1),W=(L&A.childLanes)!==0,tn||W){if(H=At,H!==null&&(ge=pe(H,L),ge!==0&&ge!==Y.retryLane))throw Y.retryLane=ge,xs(A,ge),fn(H,A,ge),yr;so(),R=Xc(A,R,L)}else A=Y.treeContext,an&&(on=gh(ge),Vn=R,Mt=!0,Vi=null,gr=!1,A!==null&&ye(R,A)),R=Vl(R,H),R.flags|=4096;return R}return A=Gr(A.child,{mode:H.mode,children:H.children}),A.ref=R.ref,R.child=A,A.return=R,A}function Uo(A,R){var L=R.ref;if(L===null)A!==null&&A.ref!==null&&(R.flags|=4194816);else{if(typeof L!="function"&&typeof L!="object")throw Error(u(284));(A===null||A.ref!==L)&&(R.flags|=4194816)}}function zl(A,R,L,H,W){return nt(R),L=Ga(A,R,L,H,void 0,W),H=Al(),A!==null&&!tn?(Bc(A,R,W),_i(A,R,W)):(Mt&&H&&ne(R),R.flags|=1,Zn(A,R,L,W),R.child)}function Zc(A,R,L,H,W,Y){return nt(R),R.updateQueue=null,L=Ei(R,H,L,W),No(A),H=Al(),A!==null&&!tn?(Bc(A,R,Y),_i(A,R,Y)):(Mt&&H&&ne(R),R.flags|=1,Zn(A,R,L,Y),R.child)}function ua(A,R,L,H,W){if(nt(R),R.stateNode===null){var Y=Bi,ge=L.contextType;typeof ge=="object"&&ge!==null&&(Y=rt(ge)),Y=new L(H,Y),R.memoizedState=Y.state!==null&&Y.state!==void 0?Y.state:null,Y.updater=ml,R.stateNode=Y,Y._reactInternals=R,Y=R.stateNode,Y.props=H,Y.state=R.memoizedState,Y.refs={},rr(R),ge=L.contextType,Y.context=typeof ge=="object"&&ge!==null?rt(ge):Bi,Y.state=R.memoizedState,ge=L.getDerivedStateFromProps,typeof ge=="function"&&(qc(R,L,ge,H),Y.state=R.memoizedState),typeof L.getDerivedStateFromProps=="function"||typeof Y.getSnapshotBeforeUpdate=="function"||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(ge=Y.state,typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount(),ge!==Y.state&&ml.enqueueReplaceState(Y,Y.state,null),na(R,H,Y,W),Ji(),Y.state=R.memoizedState),typeof Y.componentDidMount=="function"&&(R.flags|=4194308),H=!0}else if(A===null){Y=R.stateNode;var _e=R.memoizedProps,ze=la(L,_e);Y.props=ze;var Ze=Y.context,tt=L.contextType;ge=Bi,typeof tt=="object"&&tt!==null&&(ge=rt(tt));var Je=L.getDerivedStateFromProps;tt=typeof Je=="function"||typeof Y.getSnapshotBeforeUpdate=="function",_e=R.pendingProps!==_e,tt||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(_e||Ze!==ge)&&Ad(R,Y,H,ge),Ur=!1;var it=R.memoizedState;Y.state=it,na(R,H,Y,W),Ji(),Ze=R.memoizedState,_e||it!==Ze||Ur?(typeof Je=="function"&&(qc(R,L,Je,H),Ze=R.memoizedState),(ze=Ur||Hl(R,L,ze,H,it,Ze,ge))?(tt||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount()),typeof Y.componentDidMount=="function"&&(R.flags|=4194308)):(typeof Y.componentDidMount=="function"&&(R.flags|=4194308),R.memoizedProps=H,R.memoizedState=Ze),Y.props=H,Y.state=Ze,Y.context=ge,H=ze):(typeof Y.componentDidMount=="function"&&(R.flags|=4194308),H=!1)}else{Y=R.stateNode,Es(A,R),ge=R.memoizedProps,tt=la(L,ge),Y.props=tt,Je=R.pendingProps,it=Y.context,Ze=L.contextType,ze=Bi,typeof Ze=="object"&&Ze!==null&&(ze=rt(Ze)),_e=L.getDerivedStateFromProps,(Ze=typeof _e=="function"||typeof Y.getSnapshotBeforeUpdate=="function")||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(ge!==Je||it!==ze)&&Ad(R,Y,H,ze),Ur=!1,it=R.memoizedState,Y.state=it,na(R,H,Y,W),Ji();var yt=R.memoizedState;ge!==Je||it!==yt||Ur||A!==null&&A.dependencies!==null&&Ye(A.dependencies)?(typeof _e=="function"&&(qc(R,L,_e,H),yt=R.memoizedState),(tt=Ur||Hl(R,L,tt,H,it,yt,ze)||A!==null&&A.dependencies!==null&&Ye(A.dependencies))?(Ze||typeof Y.UNSAFE_componentWillUpdate!="function"&&typeof Y.componentWillUpdate!="function"||(typeof Y.componentWillUpdate=="function"&&Y.componentWillUpdate(H,yt,ze),typeof Y.UNSAFE_componentWillUpdate=="function"&&Y.UNSAFE_componentWillUpdate(H,yt,ze)),typeof Y.componentDidUpdate=="function"&&(R.flags|=4),typeof Y.getSnapshotBeforeUpdate=="function"&&(R.flags|=1024)):(typeof Y.componentDidUpdate!="function"||ge===A.memoizedProps&&it===A.memoizedState||(R.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ge===A.memoizedProps&&it===A.memoizedState||(R.flags|=1024),R.memoizedProps=H,R.memoizedState=yt),Y.props=H,Y.state=yt,Y.context=ze,H=tt):(typeof Y.componentDidUpdate!="function"||ge===A.memoizedProps&&it===A.memoizedState||(R.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ge===A.memoizedProps&&it===A.memoizedState||(R.flags|=1024),H=!1)}return Y=H,Uo(A,R),H=(R.flags&128)!==0,Y||H?(Y=R.stateNode,L=H&&typeof L.getDerivedStateFromError!="function"?null:Y.render(),R.flags|=1,A!==null&&H?(R.child=er(R,A.child,null,W),R.child=er(R,null,L,W)):Zn(A,R,L,W),R.memoizedState=Y.state,A=R.child):A=_i(A,R,W),A}function Fd(A,R,L,H){return Te(),R.flags|=256,Zn(A,R,L,H),R.child}function Qc(A){return{baseLanes:A,cachePool:nr()}}function Jc(A,R,L){return A=A!==null?A.childLanes&~L:0,R&&(A|=Cr),A}function eu(A,R,L){var H=R.pendingProps,W=!1,Y=(R.flags&128)!==0,ge;if((ge=Y)||(ge=A!==null&&A.memoizedState===null?!1:(wn.current&2)!==0),ge&&(W=!0,R.flags&=-129),ge=(R.flags&32)!==0,R.flags&=-33,A===null){if(Mt){if(W?es(R):Lr(),(A=on)?(A=bh(A,gr),A!==null&&(R.memoizedState={dehydrated:A,treeContext:si!==null?{id:Qn,overflow:yi}:null,retryLane:536870912,hydrationErrors:null},L=fu(A),L.return=R,R.child=L,Vn=R,on=null)):A=null,A===null)throw ce(R);return hc(A)?R.lanes=32:R.lanes=536870912,null}var _e=H.children;return H=H.fallback,W?(Lr(),W=R.mode,_e=Ps({mode:"hidden",children:_e},W),H=ei(H,W,L,null),_e.return=R,H.return=R,_e.sibling=H,R.child=_e,H=R.child,H.memoizedState=Qc(L),H.childLanes=Jc(A,ge,L),R.memoizedState=Ma,ca(null,H)):(es(R),Ul(R,_e))}var ze=A.memoizedState;if(ze!==null&&(_e=ze.dehydrated,_e!==null)){if(Y)R.flags&256?(es(R),R.flags&=-257,R=da(A,R,L)):R.memoizedState!==null?(Lr(),R.child=A.child,R.flags|=128,R=null):(Lr(),_e=H.fallback,W=R.mode,H=Ps({mode:"visible",children:H.children},W),_e=ei(_e,W,L,null),_e.flags|=2,H.return=R,_e.return=R,H.sibling=_e,R.child=H,er(R,A.child,null,L),H=R.child,H.memoizedState=Qc(L),H.childLanes=Jc(A,ge,L),R.memoizedState=Ma,R=ca(null,H));else if(es(R),hc(_e))ge=fc(_e).digest,H=Error(u(419)),H.stack="",H.digest=ge,Oe({value:H,source:null,stack:null}),R=da(A,R,L);else if(tn||Qe(A,R,L,!1),ge=(L&A.childLanes)!==0,tn||ge){if(ge=At,ge!==null&&(H=pe(ge,L),H!==0&&H!==ze.retryLane))throw ze.retryLane=H,xs(A,H),fn(ge,A,H),yr;Us(_e)||so(),R=da(A,R,L)}else Us(_e)?(R.flags|=192,R.child=A.child,R=null):(A=ze.treeContext,an&&(on=mh(_e),Vn=R,Mt=!0,Vi=null,gr=!1,A!==null&&ye(R,A)),R=Ul(R,H.children),R.flags|=4096);return R}return W?(Lr(),_e=H.fallback,W=R.mode,ze=A.child,Y=ze.sibling,H=Gr(ze,{mode:"hidden",children:H.children}),H.subtreeFlags=ze.subtreeFlags&65011712,Y!==null?_e=Gr(Y,_e):(_e=ei(_e,W,L,null),_e.flags|=2),_e.return=R,H.return=R,H.sibling=_e,R.child=H,ca(null,H),H=R.child,_e=A.child.memoizedState,_e===null?_e=Qc(L):(W=_e.cachePool,W!==null?(ze=An?cn._currentValue:cn._currentValue2,W=W.parent!==ze?{parent:ze,pool:ze}:W):W=nr(),_e={baseLanes:_e.baseLanes|L,cachePool:W}),H.memoizedState=_e,H.childLanes=Jc(A,ge,L),R.memoizedState=Ma,ca(A.child,H)):(es(R),L=A.child,A=L.sibling,L=Gr(L,{mode:"visible",children:H.children}),L.return=R,L.sibling=null,A!==null&&(ge=R.deletions,ge===null?(R.deletions=[A],R.flags|=16):ge.push(A)),R.child=L,R.memoizedState=null,L)}function Ul(A,R){return R=Ps({mode:"visible",children:R},A.mode),R.return=A,A.child=R}function Ps(A,R){return A=n(22,A,null,R),A.lanes=0,A}function da(A,R,L){return er(R,A.child,null,L),A=Ul(R,R.pendingProps.children),A.flags|=2,R.memoizedState=null,A}function Ld(A,R,L){A.lanes|=R;var H=A.alternate;H!==null&&(H.lanes|=R),Be(A.return,R,L)}function Ya(A,R,L,H,W,Y){var ge=A.memoizedState;ge===null?A.memoizedState={isBackwards:R,rendering:null,renderingStartTime:0,last:H,tail:L,tailMode:W,treeForkCount:Y}:(ge.isBackwards=R,ge.rendering=null,ge.renderingStartTime=0,ge.last=H,ge.tail=L,ge.tailMode=W,ge.treeForkCount=Y)}function tu(A,R,L){var H=R.pendingProps,W=H.revealOrder,Y=H.tail;H=H.children;var ge=wn.current,_e=(ge&2)!==0;if(_e?(ge=ge&1|2,R.flags|=128):ge&=1,M(wn,ge),Zn(A,R,H,L),H=Mt?fl:0,!_e&&A!==null&&(A.flags&128)!==0)e:for(A=R.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&Ld(A,L,R);else if(A.tag===19)Ld(A,L,R);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===R)break e;for(;A.sibling===null;){if(A.return===null||A.return===R)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}switch(W){case"forwards":for(L=R.child,W=null;L!==null;)A=L.alternate,A!==null&&Lo(A)===null&&(W=L),L=L.sibling;L=W,L===null?(W=R.child,R.child=null):(W=L.sibling,L.sibling=null),Ya(R,!1,W,L,Y,H);break;case"backwards":case"unstable_legacy-backwards":for(L=null,W=R.child,R.child=null;W!==null;){if(A=W.alternate,A!==null&&Lo(A)===null){R.child=W;break}A=W.sibling,W.sibling=L,L=W,W=A}Ya(R,!0,L,null,Y,H);break;case"together":Ya(R,!1,null,null,void 0,H);break;default:R.memoizedState=null}return R.child}function _i(A,R,L){if(A!==null&&(R.dependencies=A.dependencies),ys|=R.lanes,(L&R.childLanes)===0)if(A!==null){if(Qe(A,R,L,!1),(L&R.childLanes)===0)return null}else return null;if(A!==null&&R.child!==A.child)throw Error(u(153));if(R.child!==null){for(A=R.child,L=Gr(A,A.pendingProps),R.child=L,L.return=R;A.sibling!==null;)A=A.sibling,L=L.sibling=Gr(A,A.pendingProps),L.return=R;L.sibling=null}return R.child}function jo(A,R){return(A.lanes&R)!==0?!0:(A=A.dependencies,!!(A!==null&&Ye(A)))}function nu(A,R,L){switch(R.tag){case 3:fe(R,R.stateNode.containerInfo),Ne(R,cn,A.memoizedState.cache),Te();break;case 27:case 5:le(R);break;case 4:fe(R,R.stateNode.containerInfo);break;case 10:Ne(R,R.type,R.memoizedProps.value);break;case 31:if(R.memoizedState!==null)return R.flags|=128,El(R),null;break;case 13:var H=R.memoizedState;if(H!==null)return H.dehydrated!==null?(es(R),R.flags|=128,null):(L&R.child.childLanes)!==0?eu(A,R,L):(es(R),A=_i(A,R,L),A!==null?A.sibling:null);es(R);break;case 19:var W=(A.flags&128)!==0;if(H=(L&R.childLanes)!==0,H||(Qe(A,R,L,!1),H=(L&R.childLanes)!==0),W){if(H)return tu(A,R,L);R.flags|=128}if(W=R.memoizedState,W!==null&&(W.rendering=null,W.tail=null,W.lastEffect=null),M(wn,wn.current),H)break;return null;case 22:return R.lanes=0,Md(A,R,L,R.pendingProps);case 24:Ne(R,cn,A.memoizedState.cache)}return _i(A,R,L)}function ru(A,R,L){if(A!==null)if(A.memoizedProps!==R.pendingProps)tn=!0;else{if(!jo(A,L)&&(R.flags&128)===0)return tn=!1,nu(A,R,L);tn=(A.flags&131072)!==0}else tn=!1,Mt&&(R.flags&1048576)!==0&&K(R,fl,R.index);switch(R.lanes=0,R.tag){case 16:e:{var H=R.pendingProps;if(A=Fr(R.elementType),R.type=A,typeof A=="function")fa(A)?(H=la(A,H),R.tag=1,R=ua(null,R,A,H,L)):(R.tag=0,R=zl(null,R,A,H,L));else{if(A!=null){var W=A.$$typeof;if(W===co){R.tag=11,R=Td(null,R,A,H,L);break e}else if(W===ac){R.tag=14,R=Dd(null,R,A,H,L);break e}}throw R=_(A)||A,Error(u(306,R,""))}}return R;case 0:return zl(A,R,R.type,R.pendingProps,L);case 1:return H=R.type,W=la(H,R.pendingProps),ua(A,R,H,W,L);case 3:e:{if(fe(R,R.stateNode.containerInfo),A===null)throw Error(u(387));var Y=R.pendingProps;W=R.memoizedState,H=W.element,Es(A,R),na(R,Y,null,L);var ge=R.memoizedState;if(Y=ge.cache,Ne(R,cn,Y),Y!==W.cache&&$e(R,[cn],L,!0),Ji(),Y=ge.element,an&&W.isDehydrated)if(W={element:Y,isDehydrated:!1,cache:ge.cache},R.updateQueue.baseState=W,R.memoizedState=W,R.flags&256){R=Fd(A,R,Y,L);break e}else if(Y!==H){H=Q(Error(u(424)),R),Oe(H),R=Fd(A,R,Y,L);break e}else for(an&&(on=ph(R.stateNode.containerInfo),Vn=R,Mt=!0,Vi=null,gr=!0),L=Ju(R,null,Y,L),R.child=L;L;)L.flags=L.flags&-3|4096,L=L.sibling;else{if(Te(),Y===H){R=_i(A,R,L);break e}Zn(A,R,Y,L)}R=R.child}return R;case 26:if(ri)return Uo(A,R),A===null?(L=zu(R.type,null,R.pendingProps,null))?R.memoizedState=L:Mt||(R.stateNode=vc(R.type,R.pendingProps,Jn.current,R)):R.memoizedState=zu(R.type,A.memoizedProps,R.pendingProps,A.memoizedState),null;case 27:if(Gn)return le(R),A===null&&Gn&&Mt&&(H=R.stateNode=yc(R.type,R.pendingProps,Jn.current,qn.current,!1),Vn=R,gr=!0,on=Iu(R.type,H,on)),Zn(A,R,R.pendingProps.children,L),Uo(A,R),A===null&&(R.flags|=4194304),R.child;case 5:return A===null&&Mt&&(Dh(R.type,R.pendingProps,qn.current),(W=H=on)&&(H=yh(H,R.type,R.pendingProps,gr),H!==null?(R.stateNode=H,Vn=R,on=fh(H),gr=!1,W=!0):W=!1),W||ce(R)),le(R),W=R.type,Y=R.pendingProps,ge=A!==null?A.memoizedProps:null,H=Y.children,pr(W,Y)?H=null:ge!==null&&pr(W,ge)&&(R.flags|=32),R.memoizedState!==null&&(W=Ga(A,R,Kr,null,null,L),An?wa._currentValue=W:wa._currentValue2=W),Uo(A,R),Zn(A,R,H,L),R.child;case 6:return A===null&&Mt&&(Vu(R.pendingProps,qn.current),(A=L=on)&&(L=Ch(L,R.pendingProps,gr),L!==null?(R.stateNode=L,Vn=R,on=null,A=!0):A=!1),A||ce(R)),null;case 13:return eu(A,R,L);case 4:return fe(R,R.stateNode.containerInfo),H=R.pendingProps,A===null?R.child=er(R,null,H,L):Zn(A,R,H,L),R.child;case 11:return Td(A,R,R.type,R.pendingProps,L);case 7:return Zn(A,R,R.pendingProps,L),R.child;case 8:return Zn(A,R,R.pendingProps.children,L),R.child;case 12:return Zn(A,R,R.pendingProps.children,L),R.child;case 10:return H=R.pendingProps,Ne(R,R.type,H.value),Zn(A,R,H.children,L),R.child;case 9:return W=R.type._context,H=R.pendingProps.children,nt(R),W=rt(W),H=H(W),R.flags|=1,Zn(A,R,H,L),R.child;case 14:return Dd(A,R,R.type,R.pendingProps,L);case 15:return Pd(A,R,R.type,R.pendingProps,L);case 19:return tu(A,R,L);case 31:return Od(A,R,L);case 22:return Md(A,R,L,R.pendingProps);case 24:return nt(R),H=rt(cn),A===null?(W=Mr(),W===null&&(W=At,Y=nn(),W.pooledCache=Y,Y.refCount++,Y!==null&&(W.pooledCacheLanes|=L),W=Y),R.memoizedState={parent:H,cache:W},rr(R),Ne(R,cn,W)):((A.lanes&L)!==0&&(Es(A,R),na(R,null,null,L),Ji()),W=A.memoizedState,Y=R.memoizedState,W.parent!==H?(W={parent:H,cache:H},R.memoizedState=W,R.lanes===0&&(R.memoizedState=R.updateQueue.baseState=W),Ne(R,cn,H)):(H=Y.cache,Ne(R,cn,H),H!==W.cache&&$e(R,[cn],L,!0))),Zn(A,R,R.pendingProps.children,L),R.child;case 29:throw R.pendingProps}throw Error(u(156,R.tag))}function Yr(A){A.flags|=4}function Wo(A){Vr&&(A.flags|=8)}function Nd(A,R){if(A!==null&&A.child===R.child)return!1;if((R.flags&16)!==0)return!0;for(A=R.child;A!==null;){if((A.flags&8218)!==0||(A.subtreeFlags&8218)!==0)return!0;A=A.sibling}return!1}function iu(A,R,L,H){if(Lt)for(L=R.child;L!==null;){if(L.tag===5||L.tag===6)sl(A,L.stateNode);else if(!(L.tag===4||Gn&&L.tag===27)&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===R)break;for(;L.sibling===null;){if(L.return===null||L.return===R)return;L=L.return}L.sibling.return=L.return,L=L.sibling}else if(Vr)for(var W=R.child;W!==null;){if(W.tag===5){var Y=W.stateNode;L&&H&&(Y=ch(Y,W.type,W.memoizedProps)),sl(A,Y)}else if(W.tag===6)Y=W.stateNode,L&&H&&(Y=Lu(Y,W.memoizedProps)),sl(A,Y);else if(W.tag!==4){if(W.tag===22&&W.memoizedState!==null)Y=W.child,Y!==null&&(Y.return=W),iu(A,W,!0,!0);else if(W.child!==null){W.child.return=W,W=W.child;continue}}if(W===R)break;for(;W.sibling===null;){if(W.return===null||W.return===R)return;W=W.return}W.sibling.return=W.return,W=W.sibling}}function Id(A,R,L,H){var W=!1;if(Vr)for(var Y=R.child;Y!==null;){if(Y.tag===5){var ge=Y.stateNode;L&&H&&(ge=ch(ge,Y.type,Y.memoizedProps)),Ou(A,ge)}else if(Y.tag===6)ge=Y.stateNode,L&&H&&(ge=Lu(ge,Y.memoizedProps)),Ou(A,ge);else if(Y.tag!==4){if(Y.tag===22&&Y.memoizedState!==null)W=Y.child,W!==null&&(W.return=Y),Id(A,Y,!0,!0),W=!0;else if(Y.child!==null){Y.child.return=Y,Y=Y.child;continue}}if(Y===R)break;for(;Y.sibling===null;){if(Y.return===null||Y.return===R)return W;Y=Y.return}Y.sibling.return=Y.return,Y=Y.sibling}return W}function kd(A,R){if(Vr&&Nd(A,R)){A=R.stateNode;var L=A.containerInfo,H=Mu();Id(H,R,!1,!1),A.pendingChildren=H,Yr(R),lh(L,H)}}function su(A,R,L,H){if(Lt)A.memoizedProps!==H&&Yr(R);else if(Vr){var W=A.stateNode,Y=A.memoizedProps;if((A=Nd(A,R))||Y!==H){var ge=qn.current;Y=oh(W,L,Y,H,!A,null),Y===W?R.stateNode=W:(Wo(R),Ar(Y,L,H,ge)&&Yr(R),R.stateNode=Y,A&&iu(Y,R,!1,!1))}else R.stateNode=W}}function dr(A,R,L,H,W){if((A.mode&32)!==0&&(L===null?al(R,H):go(R,L,H))){if(A.flags|=16777216,(W&335544128)===W||bu(R,H))if(pn(A.stateNode,R,H))A.flags|=8192;else if(Ft())A.flags|=8192;else throw mr=zi,Dc}else A.flags&=-16777217}function Xa(A,R){if($u(R)){if(A.flags|=16777216,!qu(R))if(Ft())A.flags|=8192;else throw mr=zi,Dc}else A.flags&=-16777217}function $o(A,R){R!==null&&(A.flags|=4),A.flags&16384&&(R=A.tag!==22?q():536870912,A.lanes|=R,Eo|=R)}function Za(A,R){if(!Mt)switch(A.tailMode){case"hidden":R=A.tail;for(var L=null;R!==null;)R.alternate!==null&&(L=R),R=R.sibling;L===null?A.tail=null:L.sibling=null;break;case"collapsed":L=A.tail;for(var H=null;L!==null;)L.alternate!==null&&(H=L),L=L.sibling;H===null?R||A.tail===null?A.tail=null:A.tail.sibling=null:H.sibling=null}}function Yt(A){var R=A.alternate!==null&&A.alternate.child===A.child,L=0,H=0;if(R)for(var W=A.child;W!==null;)L|=W.lanes|W.childLanes,H|=W.subtreeFlags&65011712,H|=W.flags&65011712,W.return=A,W=W.sibling;else for(W=A.child;W!==null;)L|=W.lanes|W.childLanes,H|=W.subtreeFlags,H|=W.flags,W.return=A,W=W.sibling;return A.subtreeFlags|=H,A.childLanes=L,R}function Bd(A,R,L){var H=R.pendingProps;switch(ue(R),R.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(R),null;case 1:return Yt(R),null;case 3:return L=R.stateNode,H=null,A!==null&&(H=A.memoizedState.cache),R.memoizedState.cache!==H&&(R.flags|=2048),De(cn),X(),L.pendingContext&&(L.context=L.pendingContext,L.pendingContext=null),(A===null||A.child===null)&&(Ce(R)?Yr(R):A===null||A.memoizedState.isDehydrated&&(R.flags&256)===0||(R.flags|=1024,je())),kd(A,R),Yt(R),null;case 26:if(ri){var W=R.type,Y=R.memoizedState;return A===null?(Yr(R),Y!==null?(Yt(R),Xa(R,Y)):(Yt(R),dr(R,W,null,H,L))):Y?Y!==A.memoizedState?(Yr(R),Yt(R),Xa(R,Y)):(Yt(R),R.flags&=-16777217):(Y=A.memoizedProps,Lt?Y!==H&&Yr(R):su(A,R,W,H),Yt(R),dr(R,W,Y,H,L)),null}case 27:if(Gn){if(de(R),L=Jn.current,W=R.type,A!==null&&R.stateNode!=null)Lt?A.memoizedProps!==H&&Yr(R):su(A,R,W,H);else{if(!H){if(R.stateNode===null)throw Error(u(166));return Yt(R),null}A=qn.current,Ce(R)?me(R,A):(A=yc(W,H,L,A,!0),R.stateNode=A,Yr(R))}return Yt(R),null}case 5:if(de(R),W=R.type,A!==null&&R.stateNode!=null)su(A,R,W,H);else{if(!H){if(R.stateNode===null)throw Error(u(166));return Yt(R),null}if(Y=qn.current,Ce(R))me(R,Y),_h(R.stateNode,W,H,Y)&&(R.flags|=64);else{var ge=yu(W,H,Jn.current,Y,R);Wo(R),iu(ge,R,!1,!1),R.stateNode=ge,Ar(ge,W,H,Y)&&Yr(R)}}return Yt(R),dr(R,R.type,A===null?null:A.memoizedProps,R.pendingProps,L),null;case 6:if(A&&R.stateNode!=null)L=A.memoizedProps,Lt?L!==H&&Yr(R):Vr&&(L!==H?(A=Jn.current,L=qn.current,Wo(R),R.stateNode=hs(H,A,L,R)):R.stateNode=A.stateNode);else{if(typeof H!="string"&&R.stateNode===null)throw Error(u(166));if(A=Jn.current,L=qn.current,Ce(R)){if(!an)throw Error(u(176));if(A=R.stateNode,L=R.memoizedProps,H=null,W=Vn,W!==null)switch(W.tag){case 27:case 5:H=W.memoizedProps}lf(A,L,R,H)||ce(R,!0)}else Wo(R),R.stateNode=hs(H,A,L,R)}return Yt(R),null;case 31:if(L=R.memoizedState,A===null||A.memoizedState!==null){if(H=Ce(R),L!==null){if(A===null){if(!H)throw Error(u(318));if(!an)throw Error(u(556));if(A=R.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(u(557));Bu(A,R)}else Te(),(R.flags&128)===0&&(R.memoizedState=null),R.flags|=4;Yt(R),A=!1}else L=je(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=L),A=!0;if(!A)return R.flags&256?(Nr(R),R):(Nr(R),null);if((R.flags&128)!==0)throw Error(u(558))}return Yt(R),null;case 13:if(H=R.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(W=Ce(R),H!==null&&H.dehydrated!==null){if(A===null){if(!W)throw Error(u(318));if(!an)throw Error(u(344));if(W=R.memoizedState,W=W!==null?W.dehydrated:null,!W)throw Error(u(317));wh(W,R)}else Te(),(R.flags&128)===0&&(R.memoizedState=null),R.flags|=4;Yt(R),W=!1}else W=je(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=W),W=!0;if(!W)return R.flags&256?(Nr(R),R):(Nr(R),null)}return Nr(R),(R.flags&128)!==0?(R.lanes=L,R):(L=H!==null,A=A!==null&&A.memoizedState!==null,L&&(H=R.child,W=null,H.alternate!==null&&H.alternate.memoizedState!==null&&H.alternate.memoizedState.cachePool!==null&&(W=H.alternate.memoizedState.cachePool.pool),Y=null,H.memoizedState!==null&&H.memoizedState.cachePool!==null&&(Y=H.memoizedState.cachePool.pool),Y!==W&&(H.flags|=2048)),L!==A&&L&&(R.child.flags|=8192),$o(R,R.updateQueue),Yt(R),null);case 4:return X(),kd(A,R),A===null&&qt(R.stateNode.containerInfo),Yt(R),null;case 10:return De(R.type),Yt(R),null;case 19:if(O(wn),H=R.memoizedState,H===null)return Yt(R),null;if(W=(R.flags&128)!==0,Y=H.rendering,Y===null)if(W)Za(H,!1);else{if(vn!==0||A!==null&&(A.flags&128)!==0)for(A=R.child;A!==null;){if(Y=Lo(A),Y!==null){for(R.flags|=128,Za(H,!1),A=Y.updateQueue,R.updateQueue=A,$o(R,A),R.subtreeFlags=0,A=L,L=R.child;L!==null;)tc(L,A),L=L.sibling;return M(wn,wn.current&1|2),Mt&&Z(R,H.treeForkCount),R.child}A=A.sibling}H.tail!==null&&or()>ea&&(R.flags|=128,W=!0,Za(H,!1),R.lanes=4194304)}else{if(!W)if(A=Lo(Y),A!==null){if(R.flags|=128,W=!0,A=A.updateQueue,R.updateQueue=A,$o(R,A),Za(H,!0),H.tail===null&&H.tailMode==="hidden"&&!Y.alternate&&!Mt)return Yt(R),null}else 2*or()-H.renderingStartTime>ea&&L!==536870912&&(R.flags|=128,W=!0,Za(H,!1),R.lanes=4194304);H.isBackwards?(Y.sibling=R.child,R.child=Y):(A=H.last,A!==null?A.sibling=Y:R.child=Y,H.last=Y)}return H.tail!==null?(A=H.tail,H.rendering=A,H.tail=A.sibling,H.renderingStartTime=or(),A.sibling=null,L=wn.current,M(wn,W?L&1|2:L&1),Mt&&Z(R,H.treeForkCount),A):(Yt(R),null);case 22:case 23:return Nr(R),Fn(),H=R.memoizedState!==null,A!==null?A.memoizedState!==null!==H&&(R.flags|=8192):H&&(R.flags|=8192),H?(L&536870912)!==0&&(R.flags&128)===0&&(Yt(R),R.subtreeFlags&6&&(R.flags|=8192)):Yt(R),L=R.updateQueue,L!==null&&$o(R,L.retryQueue),L=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(L=A.memoizedState.cachePool.pool),H=null,R.memoizedState!==null&&R.memoizedState.cachePool!==null&&(H=R.memoizedState.cachePool.pool),H!==L&&(R.flags|=2048),A!==null&&O($s),null;case 24:return L=null,A!==null&&(L=A.memoizedState.cache),R.memoizedState.cache!==L&&(R.flags|=2048),De(cn),Yt(R),null;case 25:return null;case 30:return null}throw Error(u(156,R.tag))}function au(A,R){switch(ue(R),R.tag){case 1:return A=R.flags,A&65536?(R.flags=A&-65537|128,R):null;case 3:return De(cn),X(),A=R.flags,(A&65536)!==0&&(A&128)===0?(R.flags=A&-65537|128,R):null;case 26:case 27:case 5:return de(R),null;case 31:if(R.memoizedState!==null){if(Nr(R),R.alternate===null)throw Error(u(340));Te()}return A=R.flags,A&65536?(R.flags=A&-65537|128,R):null;case 13:if(Nr(R),A=R.memoizedState,A!==null&&A.dehydrated!==null){if(R.alternate===null)throw Error(u(340));Te()}return A=R.flags,A&65536?(R.flags=A&-65537|128,R):null;case 19:return O(wn),null;case 4:return X(),null;case 10:return De(R.type),null;case 22:case 23:return Nr(R),Fn(),A!==null&&O($s),A=R.flags,A&65536?(R.flags=A&-65537|128,R):null;case 24:return De(cn),null;case 25:return null;default:return null}}function Hd(A,R){switch(ue(R),R.tag){case 3:De(cn),X();break;case 26:case 27:case 5:de(R);break;case 4:X();break;case 31:R.memoizedState!==null&&Nr(R);break;case 13:Nr(R);break;case 19:O(wn);break;case 10:De(R.type);break;case 22:case 23:Nr(R),Fn(),A!==null&&O($s);break;case 24:De(cn)}}function Ri(A,R){try{var L=R.updateQueue,H=L!==null?L.lastEffect:null;if(H!==null){var W=H.next;L=W;do{if((L.tag&A)===A){H=void 0;var Y=L.create,ge=L.inst;H=Y(),ge.destroy=H}L=L.next}while(L!==W)}}catch(_e){gt(R,R.return,_e)}}function Ti(A,R,L){try{var H=R.updateQueue,W=H!==null?H.lastEffect:null;if(W!==null){var Y=W.next;H=Y;do{if((H.tag&A)===A){var ge=H.inst,_e=ge.destroy;if(_e!==void 0){ge.destroy=void 0,W=R;var ze=L,Ze=_e;try{Ze()}catch(tt){gt(W,ze,tt)}}}H=H.next}while(H!==Y)}}catch(tt){gt(R,R.return,tt)}}function Qa(A){var R=A.updateQueue;if(R!==null){var L=A.stateNode;try{ia(R,L)}catch(H){gt(A,A.return,H)}}}function jl(A,R,L){L.props=la(A.type,A.memoizedProps),L.state=A.memoizedState;try{L.componentWillUnmount()}catch(H){gt(A,R,H)}}function Ja(A,R){try{var L=A.ref;if(L!==null){switch(A.tag){case 26:case 27:case 5:var H=ho(A.stateNode);break;case 30:H=A.stateNode;break;default:H=A.stateNode}typeof L=="function"?A.refCleanup=L(H):L.current=H}}catch(W){gt(A,R,W)}}function ar(A,R){var L=A.ref,H=A.refCleanup;if(L!==null)if(typeof H=="function")try{H()}catch(W){gt(A,R,W)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof L=="function")try{L(null)}catch(W){gt(A,R,W)}else L.current=null}function ha(A){var R=A.type,L=A.memoizedProps,H=A.stateNode;try{Jd(H,R,L,A)}catch(W){gt(A,A.return,W)}}function qo(A,R,L){try{eh(A.stateNode,A.type,L,R,A)}catch(H){gt(A,A.return,H)}}function ou(A){return A.tag===5||A.tag===3||(ri?A.tag===26:!1)||(Gn?A.tag===27&&xa(A.type):!1)||A.tag===4}function rs(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||ou(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(Gn&&A.tag===27&&xa(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function Wl(A,R,L){var H=A.tag;if(H===5||H===6)A=A.stateNode,R?nh(L,A,R):Ru(L,A);else if(H!==4&&(Gn&&H===27&&xa(A.type)&&(L=A.stateNode,R=null),A=A.child,A!==null))for(Wl(A,R,L),A=A.sibling;A!==null;)Wl(A,R,L),A=A.sibling}function Ko(A,R,L){var H=A.tag;if(H===5||H===6)A=A.stateNode,R?th(L,A,R):_u(L,A);else if(H!==4&&(Gn&&H===27&&xa(A.type)&&(L=A.stateNode),A=A.child,A!==null))for(Ko(A,R,L),A=A.sibling;A!==null;)Ko(A,R,L),A=A.sibling}function lu(A,R,L){A=A.containerInfo;try{Fu(A,L)}catch(H){gt(R,R.return,H)}}function Gd(A){var R=A.stateNode,L=A.memoizedProps;try{Nn(A.type,L,R,A)}catch(H){gt(A,A.return,H)}}function rf(A,R){for(oc(A.containerInfo),Tn=R;Tn!==null;)if(A=Tn,R=A.child,(A.subtreeFlags&1028)!==0&&R!==null)R.return=A,Tn=R;else for(;Tn!==null;){A=Tn;var L=A.alternate;switch(R=A.flags,A.tag){case 0:if((R&4)!==0&&(R=A.updateQueue,R=R!==null?R.events:null,R!==null))for(var H=0;H<R.length;H++){var W=R[H];W.ref.impl=W.nextImpl}break;case 11:case 15:break;case 1:if((R&1024)!==0&&L!==null){R=void 0,H=A,W=L.memoizedProps,L=L.memoizedState;var Y=H.stateNode;try{var ge=la(H.type,W);R=Y.getSnapshotBeforeUpdate(ge,L),Y.__reactInternalSnapshotBeforeUpdate=R}catch(_e){gt(H,H.return,_e)}}break;case 3:(R&1024)!==0&&Lt&&Pu(A.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((R&1024)!==0)throw Error(u(163))}if(R=A.sibling,R!==null){R.return=A.return,Tn=R;break}Tn=A.return}}function Vd(A,R,L){var H=L.flags;switch(L.tag){case 0:case 11:case 15:hr(A,L),H&4&&Ri(5,L);break;case 1:if(hr(A,L),H&4)if(A=L.stateNode,R===null)try{A.componentDidMount()}catch(ge){gt(L,L.return,ge)}else{var W=la(L.type,R.memoizedProps);R=R.memoizedState;try{A.componentDidUpdate(W,R,A.__reactInternalSnapshotBeforeUpdate)}catch(ge){gt(L,L.return,ge)}}H&64&&Qa(L),H&512&&Ja(L,L.return);break;case 3:if(hr(A,L),H&64&&(H=L.updateQueue,H!==null)){if(A=null,L.child!==null)switch(L.child.tag){case 27:case 5:A=ho(L.child.stateNode);break;case 1:A=L.child.stateNode}try{ia(H,A)}catch(ge){gt(L,L.return,ge)}}break;case 27:Gn&&R===null&&H&4&&Gd(L);case 26:case 5:if(hr(A,L),R===null){if(H&4)ha(L);else if(H&64){A=L.type,R=L.memoizedProps,W=L.stateNode;try{Eh(W,A,R,L)}catch(ge){gt(L,L.return,ge)}}}H&512&&Ja(L,L.return);break;case 12:hr(A,L);break;case 31:hr(A,L),H&4&&Zr(A,L);break;case 13:hr(A,L),H&4&&Xo(A,L),H&64&&(H=L.memoizedState,H!==null&&(H=H.dehydrated,H!==null&&(L=sf.bind(null,L),pc(H,L))));break;case 22:if(H=L.memoizedState!==null||xn,!H){R=R!==null&&R.memoizedState!==null||En,W=xn;var Y=En;xn=H,(En=R)&&!Y?Jr(A,L,(L.subtreeFlags&8772)!==0):hr(A,L),xn=W,En=Y}break;case 30:break;default:hr(A,L)}}function cu(A){var R=A.alternate;R!==null&&(A.alternate=null,cu(R)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(R=A.stateNode,R!==null&&lc(R)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}function Xr(A,R,L){for(L=L.child;L!==null;)Yo(A,R,L),L=L.sibling}function Yo(A,R,L){if(Tr&&typeof Tr.onCommitFiberUnmount=="function")try{Tr.onCommitFiberUnmount(Ra,L)}catch{}switch(L.tag){case 26:if(ri){En||ar(L,R),Xr(A,R,L),L.memoizedState?js(L.memoizedState):L.stateNode&&Wu(L.stateNode);break}case 27:if(Gn){En||ar(L,R);var H=mn,W=Dn;xa(L.type)&&(mn=L.stateNode,Dn=!1),Xr(A,R,L),$n(L.stateNode),mn=H,Dn=W;break}case 5:En||ar(L,R);case 6:if(Lt){if(H=mn,W=Dn,mn=null,Xr(A,R,L),mn=H,Dn=W,mn!==null)if(Dn)try{Tu(mn,L.stateNode)}catch(Y){gt(L,R,Y)}else try{rh(mn,L.stateNode)}catch(Y){gt(L,R,Y)}}else Xr(A,R,L);break;case 18:Lt&&mn!==null&&(Dn?gc(mn,L.stateNode):Gu(mn,L.stateNode));break;case 4:Lt?(H=mn,W=Dn,mn=L.stateNode.containerInfo,Dn=!0,Xr(A,R,L),mn=H,Dn=W):(Vr&&lu(L.stateNode,L,Mu()),Xr(A,R,L));break;case 0:case 11:case 14:case 15:Ti(2,L,R),En||Ti(4,L,R),Xr(A,R,L);break;case 1:En||(ar(L,R),H=L.stateNode,typeof H.componentWillUnmount=="function"&&jl(L,R,H)),Xr(A,R,L);break;case 21:Xr(A,R,L);break;case 22:En=(H=En)||L.memoizedState!==null,Xr(A,R,L),En=H;break;default:Xr(A,R,L)}}function Zr(A,R){if(an&&R.memoizedState===null&&(A=R.alternate,A!==null&&(A=A.memoizedState,A!==null))){A=A.dehydrated;try{cf(A)}catch(L){gt(R,R.return,L)}}}function Xo(A,R){if(an&&R.memoizedState===null&&(A=R.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{uf(A)}catch(L){gt(R,R.return,L)}}function Qr(A){switch(A.tag){case 31:case 13:case 19:var R=A.stateNode;return R===null&&(R=A.stateNode=new td),R;case 22:return A=A.stateNode,R=A._retryCache,R===null&&(R=A._retryCache=new td),R;default:throw Error(u(435,A.tag))}}function ss(A,R){var L=Qr(A);R.forEach(function(H){if(!L.has(H)){L.add(H);var W=af.bind(null,A,H);H.then(W,W)}})}function jn(A,R){var L=R.deletions;if(L!==null)for(var H=0;H<L.length;H++){var W=L[H],Y=A,ge=R;if(Lt){var _e=ge;e:for(;_e!==null;){switch(_e.tag){case 27:if(Gn){if(xa(_e.type)){mn=_e.stateNode,Dn=!1;break e}break}case 5:mn=_e.stateNode,Dn=!1;break e;case 3:case 4:mn=_e.stateNode.containerInfo,Dn=!0;break e}_e=_e.return}if(mn===null)throw Error(u(160));Yo(Y,ge,W),mn=null,Dn=!1}else Yo(Y,ge,W);Y=W.alternate,Y!==null&&(Y.return=null),W.return=null}if(R.subtreeFlags&13886)for(R=R.child;R!==null;)Zo(R,A),R=R.sibling}function Zo(A,R){var L=A.alternate,H=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:jn(R,A),Wn(A),H&4&&(Ti(3,A,A.return),Ri(3,A),Ti(5,A,A.return));break;case 1:jn(R,A),Wn(A),H&512&&(En||L===null||ar(L,L.return)),H&64&&xn&&(A=A.updateQueue,A!==null&&(H=A.callbacks,H!==null&&(L=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=L===null?H:L.concat(H))));break;case 26:if(ri){var W=Wt;if(jn(R,A),Wn(A),H&512&&(En||L===null||ar(L,L.return)),H&4){H=L!==null?L.memoizedState:null;var Y=A.memoizedState;L===null?Y===null?A.stateNode===null?A.stateNode=Ph(W,A.type,A.memoizedProps,A):ju(W,A.type,A.stateNode):A.stateNode=Uu(W,Y,A.memoizedProps):H!==Y?(H===null?L.stateNode!==null&&Wu(L.stateNode):js(H),Y===null?ju(W,A.type,A.stateNode):Uu(W,Y,A.memoizedProps)):Y===null&&A.stateNode!==null&&qo(A,A.memoizedProps,L.memoizedProps)}break}case 27:if(Gn){jn(R,A),Wn(A),H&512&&(En||L===null||ar(L,L.return)),L!==null&&H&4&&qo(A,A.memoizedProps,L.memoizedProps);break}case 5:if(jn(R,A),Wn(A),H&512&&(En||L===null||ar(L,L.return)),Lt){if(A.flags&32){W=A.stateNode;try{Du(W)}catch(Je){gt(A,A.return,Je)}}H&4&&A.stateNode!=null&&(W=A.memoizedProps,qo(A,W,L!==null?L.memoizedProps:W)),H&1024&&(Co=!0)}else Vr&&A.alternate!==null&&(A.alternate.stateNode=A.stateNode);break;case 6:if(jn(R,A),Wn(A),H&4&&Lt){if(A.stateNode===null)throw Error(u(162));H=A.memoizedProps,L=L!==null?L.memoizedProps:H,W=A.stateNode;try{Qd(W,L,H)}catch(Je){gt(A,A.return,Je)}}break;case 3:if(ri?(Mh(),W=Wt,Wt=cl(R.containerInfo),jn(R,A),Wt=W):jn(R,A),Wn(A),H&4){if(Lt&&an&&L!==null&&L.memoizedState.isDehydrated)try{Ah(R.containerInfo)}catch(Je){gt(A,A.return,Je)}if(Vr){H=R.containerInfo,L=R.pendingChildren;try{Fu(H,L)}catch(Je){gt(A,A.return,Je)}}}Co&&(Co=!1,$l(A));break;case 4:ri?(L=Wt,Wt=cl(A.stateNode.containerInfo),jn(R,A),Wn(A),Wt=L):(jn(R,A),Wn(A)),H&4&&Vr&&lu(A.stateNode,A,A.stateNode.pendingChildren);break;case 12:jn(R,A),Wn(A);break;case 31:jn(R,A),Wn(A),H&4&&(H=A.updateQueue,H!==null&&(A.updateQueue=null,ss(A,H)));break;case 13:jn(R,A),Wn(A),A.child.flags&8192&&A.memoizedState!==null!=(L!==null&&L.memoizedState!==null)&&(Cl=or()),H&4&&(H=A.updateQueue,H!==null&&(A.updateQueue=null,ss(A,H)));break;case 22:W=A.memoizedState!==null;var ge=L!==null&&L.memoizedState!==null,_e=xn,ze=En;if(xn=_e||W,En=ze||ge,jn(R,A),En=ze,xn=_e,Wn(A),H&8192&&(R=A.stateNode,R._visibility=W?R._visibility&-2:R._visibility|1,W&&(L===null||ge||xn||En||Ms(A)),Lt)){e:if(L=null,Lt)for(R=A;;){if(R.tag===5||ri&&R.tag===26){if(L===null){ge=L=R;try{Y=ge.stateNode,W?of(Y):sh(ge.stateNode,ge.memoizedProps)}catch(Je){gt(ge,ge.return,Je)}}}else if(R.tag===6){if(L===null){ge=R;try{var Ze=ge.stateNode;W?ih(Ze):ah(Ze,ge.memoizedProps)}catch(Je){gt(ge,ge.return,Je)}}}else if(R.tag===18){if(L===null){ge=R;try{var tt=ge.stateNode;W?Rh(tt):Th(ge.stateNode)}catch(Je){gt(ge,ge.return,Je)}}}else if((R.tag!==22&&R.tag!==23||R.memoizedState===null||R===A)&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===A)break e;for(;R.sibling===null;){if(R.return===null||R.return===A)break e;L===R&&(L=null),R=R.return}L===R&&(L=null),R.sibling.return=R.return,R=R.sibling}}H&4&&(H=A.updateQueue,H!==null&&(L=H.retryQueue,L!==null&&(H.retryQueue=null,ss(A,L))));break;case 19:jn(R,A),Wn(A),H&4&&(H=A.updateQueue,H!==null&&(A.updateQueue=null,ss(A,H)));break;case 30:break;case 21:break;default:jn(R,A),Wn(A)}}function Wn(A){var R=A.flags;if(R&2){try{for(var L,H=A.return;H!==null;){if(ou(H)){L=H;break}H=H.return}if(Lt){if(L==null)throw Error(u(160));switch(L.tag){case 27:if(Gn){var W=L.stateNode,Y=rs(A);Ko(A,Y,W);break}case 5:var ge=L.stateNode;L.flags&32&&(Du(ge),L.flags&=-33);var _e=rs(A);Ko(A,_e,ge);break;case 3:case 4:var ze=L.stateNode.containerInfo,Ze=rs(A);Wl(A,Ze,ze);break;default:throw Error(u(161))}}}catch(tt){gt(A,A.return,tt)}A.flags&=-3}R&4096&&(A.flags&=-4097)}function $l(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var R=A;$l(R),R.tag===5&&R.flags&1024&&wu(R.stateNode),A=A.sibling}}function hr(A,R){if(R.subtreeFlags&8772)for(R=R.child;R!==null;)Vd(A,R.alternate,R),R=R.sibling}function Ms(A){for(A=A.child;A!==null;){var R=A;switch(R.tag){case 0:case 11:case 14:case 15:Ti(4,R,R.return),Ms(R);break;case 1:ar(R,R.return);var L=R.stateNode;typeof L.componentWillUnmount=="function"&&jl(R,R.return,L),Ms(R);break;case 27:Gn&&$n(R.stateNode);case 26:case 5:ar(R,R.return),Ms(R);break;case 22:R.memoizedState===null&&Ms(R);break;case 30:Ms(R);break;default:Ms(R)}A=A.sibling}}function Jr(A,R,L){for(L=L&&(R.subtreeFlags&8772)!==0,R=R.child;R!==null;){var H=R.alternate,W=A,Y=R,ge=Y.flags;switch(Y.tag){case 0:case 11:case 15:Jr(W,Y,L),Ri(4,Y);break;case 1:if(Jr(W,Y,L),H=Y,W=H.stateNode,typeof W.componentDidMount=="function")try{W.componentDidMount()}catch(Ze){gt(H,H.return,Ze)}if(H=Y,W=H.updateQueue,W!==null){var _e=H.stateNode;try{var ze=W.shared.hiddenCallbacks;if(ze!==null)for(W.shared.hiddenCallbacks=null,W=0;W<ze.length;W++)ra(ze[W],_e)}catch(Ze){gt(H,H.return,Ze)}}L&&ge&64&&Qa(Y),Ja(Y,Y.return);break;case 27:Gn&&Gd(Y);case 26:case 5:Jr(W,Y,L),L&&H===null&&ge&4&&ha(Y),Ja(Y,Y.return);break;case 12:Jr(W,Y,L);break;case 31:Jr(W,Y,L),L&&ge&4&&Zr(W,Y);break;case 13:Jr(W,Y,L),L&&ge&4&&Xo(W,Y);break;case 22:Y.memoizedState===null&&Jr(W,Y,L),Ja(Y,Y.return);break;case 30:break;default:Jr(W,Y,L)}R=R.sibling}}function Os(A,R){var L=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(L=A.memoizedState.cachePool.pool),A=null,R.memoizedState!==null&&R.memoizedState.cachePool!==null&&(A=R.memoizedState.cachePool.pool),A!==L&&(A!=null&&A.refCount++,L!=null&&en(L))}function uu(A,R){A=null,R.alternate!==null&&(A=R.alternate.memoizedState.cache),R=R.memoizedState.cache,R!==A&&(R.refCount++,A!=null&&en(A))}function hn(A,R,L,H){if(R.subtreeFlags&10256)for(R=R.child;R!==null;)ql(A,R,L,H),R=R.sibling}function ql(A,R,L,H){var W=R.flags;switch(R.tag){case 0:case 11:case 15:hn(A,R,L,H),W&2048&&Ri(9,R);break;case 1:hn(A,R,L,H);break;case 3:hn(A,R,L,H),W&2048&&(A=null,R.alternate!==null&&(A=R.alternate.memoizedState.cache),R=R.memoizedState.cache,R!==A&&(R.refCount++,A!=null&&en(A)));break;case 12:if(W&2048){hn(A,R,L,H),A=R.stateNode;try{var Y=R.memoizedProps,ge=Y.id,_e=Y.onPostCommit;typeof _e=="function"&&_e(ge,R.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(ze){gt(R,R.return,ze)}}else hn(A,R,L,H);break;case 31:hn(A,R,L,H);break;case 13:hn(A,R,L,H);break;case 23:break;case 22:Y=R.stateNode,ge=R.alternate,R.memoizedState!==null?Y._visibility&2?hn(A,R,L,H):eo(A,R):Y._visibility&2?hn(A,R,L,H):(Y._visibility|=2,wr(A,R,L,H,(R.subtreeFlags&10256)!==0||!1)),W&2048&&Os(ge,R);break;case 24:hn(A,R,L,H),W&2048&&uu(R.alternate,R);break;default:hn(A,R,L,H)}}function wr(A,R,L,H,W){for(W=W&&((R.subtreeFlags&10256)!==0||!1),R=R.child;R!==null;){var Y=A,ge=R,_e=L,ze=H,Ze=ge.flags;switch(ge.tag){case 0:case 11:case 15:wr(Y,ge,_e,ze,W),Ri(8,ge);break;case 23:break;case 22:var tt=ge.stateNode;ge.memoizedState!==null?tt._visibility&2?wr(Y,ge,_e,ze,W):eo(Y,ge):(tt._visibility|=2,wr(Y,ge,_e,ze,W)),W&&Ze&2048&&Os(ge.alternate,ge);break;case 24:wr(Y,ge,_e,ze,W),W&&Ze&2048&&uu(ge.alternate,ge);break;default:wr(Y,ge,_e,ze,W)}R=R.sibling}}function eo(A,R){if(R.subtreeFlags&10256)for(R=R.child;R!==null;){var L=A,H=R,W=H.flags;switch(H.tag){case 22:eo(L,H),W&2048&&Os(H.alternate,H);break;case 24:eo(L,H),W&2048&&uu(H.alternate,H);break;default:eo(L,H)}R=R.sibling}}function Di(A,R,L){if(A.subtreeFlags&Wr)for(A=A.child;A!==null;)Fs(A,R,L),A=A.sibling}function Fs(A,R,L){switch(A.tag){case 26:if(Di(A,R,L),A.flags&Wr)if(A.memoizedState!==null)Oh(L,Wt,A.memoizedState,A.memoizedProps);else{var H=A.stateNode,W=A.type;A=A.memoizedProps,((R&335544128)===R||bu(W,A))&&cc(L,H,W,A)}break;case 5:Di(A,R,L),A.flags&Wr&&(H=A.stateNode,W=A.type,A=A.memoizedProps,((R&335544128)===R||bu(W,A))&&cc(L,H,W,A));break;case 3:case 4:ri?(H=Wt,Wt=cl(A.stateNode.containerInfo),Di(A,R,L),Wt=H):Di(A,R,L);break;case 22:A.memoizedState===null&&(H=A.alternate,H!==null&&H.memoizedState!==null?(H=Wr,Wr=16777216,Di(A,R,L),Wr=H):Di(A,R,L));break;default:Di(A,R,L)}}function Kl(A){var R=A.alternate;if(R!==null&&(A=R.child,A!==null)){R.child=null;do R=A.sibling,A.sibling=null,A=R;while(A!==null)}}function no(A){var R=A.deletions;if((A.flags&16)!==0){if(R!==null)for(var L=0;L<R.length;L++){var H=R[L];Tn=H,Br(H,A)}Kl(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)Yl(A),A=A.sibling}function Yl(A){switch(A.tag){case 0:case 11:case 15:no(A),A.flags&2048&&Ti(9,A,A.return);break;case 3:no(A);break;case 12:no(A);break;case 22:var R=A.stateNode;A.memoizedState!==null&&R._visibility&2&&(A.return===null||A.return.tag!==13)?(R._visibility&=-3,Qo(A)):no(A);break;default:no(A)}}function Qo(A){var R=A.deletions;if((A.flags&16)!==0){if(R!==null)for(var L=0;L<R.length;L++){var H=R[L];Tn=H,Br(H,A)}Kl(A)}for(A=A.child;A!==null;){switch(R=A,R.tag){case 0:case 11:case 15:Ti(8,R,R.return),Qo(R);break;case 22:L=R.stateNode,L._visibility&2&&(L._visibility&=-3,Qo(R));break;default:Qo(R)}A=A.sibling}}function Br(A,R){for(;Tn!==null;){var L=Tn;switch(L.tag){case 0:case 11:case 15:Ti(8,L,R);break;case 23:case 22:if(L.memoizedState!==null&&L.memoizedState.cachePool!==null){var H=L.memoizedState.cachePool.pool;H!=null&&H.refCount++}break;case 24:en(L.memoizedState.cache)}if(H=L.child,H!==null)H.return=L,Tn=H;else e:for(L=A;Tn!==null;){H=Tn;var W=H.sibling,Y=H.return;if(cu(H),H===L){Tn=null;break e}if(W!==null){W.return=Y,Tn=W;break e}Tn=Y}}}function Ls(A){var R=Ct(A);if(R!=null){if(typeof R.memoizedProps["data-testname"]!="string")throw Error(u(364));return R}if(A=_n(A),A===null)throw Error(u(362));return A.stateNode.current}function Ns(A,R){var L=A.tag;switch(R.$$typeof){case di:if(A.type===R.value)return!0;break;case So:e:{for(R=R.value,A=[A,0],L=0;L<A.length;){var H=A[L++],W=H.tag,Y=A[L++],ge=R[Y];if(W!==5&&W!==26&&W!==27||!zs(H)){for(;ge!=null&&Ns(H,ge);)Y++,ge=R[Y];if(Y===R.length){R=!0;break e}else for(H=H.child;H!==null;)A.push(H,Y),H=H.sibling}}R=!1}return R;case wo:if((L===5||L===26||L===27)&&Au(A.stateNode,R.value))return!0;break;case Xs:if((L===5||L===6||L===26||L===27)&&(A=ol(A),A!==null&&0<=A.indexOf(R.value)))return!0;break;case vl:if((L===5||L===26||L===27)&&(A=A.memoizedProps["data-testname"],typeof A=="string"&&A.toLowerCase()===R.value.toLowerCase()))return!0;break;default:throw Error(u(365))}return!1}function ro(A){switch(A.$$typeof){case di:return"<"+(_(A.value)||"Unknown")+">";case So:return":has("+(ro(A)||"")+")";case wo:return'[role="'+A.value+'"]';case Xs:return'"'+A.value+'"';case vl:return'[data-testname="'+A.value+'"]';default:throw Error(u(365))}}function io(A,R){var L=[];A=[A,0];for(var H=0;H<A.length;){var W=A[H++],Y=W.tag,ge=A[H++],_e=R[ge];if(Y!==5&&Y!==26&&Y!==27||!zs(W)){for(;_e!=null&&Ns(W,_e);)ge++,_e=R[ge];if(ge===R.length)L.push(W);else for(W=W.child;W!==null;)A.push(W,ge),W=W.sibling}}return L}function xr(A,R){if(!Hn)throw Error(u(363));A=Ls(A),A=io(A,R),R=[],A=Array.from(A);for(var L=0;L<A.length;){var H=A[L++],W=H.tag;if(W===5||W===26||W===27)zs(H)||R.push(H.stateNode);else for(H=H.child;H!==null;)A.push(H),H=H.sibling}return R}function sn(){return(Rt&2)!==0&&Ot!==0?Ot&-Ot:ut.T!==null?st():po()}function as(){if(Cr===0)if((Ot&536870912)===0||Mt){var A=Aa;Aa<<=1,(Aa&3932160)===0&&(Aa=262144),Cr=A}else Cr=536870912;return A=Dr.current,A!==null&&(A.flags|=32),Cr}function fn(A,R,L){(A===At&&($t===2||$t===9)||A.cancelPendingCommit!==null)&&(Sn(A,0),Mi(A,Ot,Cr,!1)),$(A,L),((Rt&2)===0||A!==At)&&(A===At&&((Rt&2)===0&&(Js|=L),vn===4&&Mi(A,Ot,Cr,!1)),wt(A))}function vi(A,R,L){if((Rt&6)!==0)throw Error(u(327));var H=!L&&(R&127)===0&&(R&A.expiredLanes)===0||V(A,R),W=H?jd(A,R):Oi(A,R,!0),Y=H;do{if(W===0){Zs&&!H&&Mi(A,R,0,!1);break}else{if(L=A.current.alternate,Y&&!zd(L)){W=Oi(A,R,!1),Y=!1;continue}if(W===2){if(Y=R,A.errorRecoveryDisabledLanes&Y)var ge=0;else ge=A.pendingLanes&-536870913,ge=ge!==0?ge:ge&536870912?536870912:0;if(ge!==0){R=ge;e:{var _e=A;W=yl;var ze=an&&_e.current.memoizedState.isDehydrated;if(ze&&(Sn(_e,ge).flags|=256),ge=Oi(_e,ge,!1),ge!==2){if(Qs&&!ze){_e.errorRecoveryDisabledLanes|=Y,Js|=Y,W=4;break e}Y=Pr,Pr=W,Y!==null&&(Pr===null?Pr=Y:Pr.push.apply(Pr,Y))}W=ge}if(Y=!1,W!==2)continue}}if(W===1){Sn(A,0),Mi(A,R,0,!0);break}e:{switch(H=A,Y=W,Y){case 0:case 1:throw Error(u(345));case 4:if((R&4194048)!==R)break;case 6:Mi(H,R,Cr,!Si);break e;case 2:Pr=null;break;case 3:case 5:break;default:throw Error(u(329))}if((R&62914560)===R&&(W=Cl+300-or(),10<W)){if(Mi(H,R,Cr,!Si),B(H,0,!0)!==0)break e;$i=R,H.timeoutHandle=Cu(Pi.bind(null,H,L,Pr,bl,Mc,R,Cr,Js,Eo,Si,Y,"Throttled",-0,0),W);break e}Pi(H,L,Pr,bl,Mc,R,Cr,Js,Eo,Si,Y,null,-0,0)}}break}while(!0);wt(A)}function Pi(A,R,L,H,W,Y,ge,_e,ze,Ze,tt,Je,it,yt){if(A.timeoutHandle=_r,Je=R.subtreeFlags,Je&8192||(Je&16785408)===16785408){Je=Su(),Fs(R,Y,Je);var Yn=(Y&62914560)===Y?Cl-or():(Y&4194048)===Y?Fa-or():0;if(Yn=Zd(Je,Yn),Yn!==null){$i=Y,A.cancelPendingCommit=Yn(Li.bind(null,A,R,Y,L,H,W,ge,_e,ze,tt,Je,null,it,yt)),Mi(A,Y,ge,!Ze);return}}Li(A,R,Y,L,H,W,ge,_e,ze)}function zd(A){for(var R=A;;){var L=R.tag;if((L===0||L===11||L===15)&&R.flags&16384&&(L=R.updateQueue,L!==null&&(L=L.stores,L!==null)))for(var H=0;H<L.length;H++){var W=L[H],Y=W.getSnapshot;W=W.value;try{if(!Rn(Y(),W))return!1}catch{return!1}}if(L=R.child,R.subtreeFlags&16384&&L!==null)L.return=R,R=L;else{if(R===A)break;for(;R.sibling===null;){if(R.return===null||R.return===A)return!0;R=R.return}R.sibling.return=R.return,R=R.sibling}}return!0}function Mi(A,R,L,H){R&=~xo,R&=~Js,A.suspendedLanes|=R,A.pingedLanes&=~R,H&&(A.warmLanes|=R),H=A.expirationTimes;for(var W=R;0<W;){var Y=31-Rr(W),ge=1<<Y;H[Y]=-1,W&=~ge}L!==0&&ie(A,L,R)}function Xl(){return(Rt&6)===0?(Bn(0),!1):!0}function Zl(){if(Tt!==null){if($t===0)var A=Tt.return;else A=Tt,Ci=Zt=null,Io(A),qs=null,Ta=0,A=Tt;for(;A!==null;)Hd(A.alternate,A),A=A.return;Tt=null}}function Sn(A,R){var L=A.timeoutHandle;L!==_r&&(A.timeoutHandle=_r,Xd(L)),L=A.cancelPendingCommit,L!==null&&(A.cancelPendingCommit=null,L()),$i=0,Zl(),At=A,Tt=L=Gr(A.current,null),Ot=R,$t=0,In=null,Si=!1,Zs=V(A,R),Qs=!1,Eo=Cr=xo=Js=ys=vn=0,Pr=yl=null,Mc=!1,(R&8)!==0&&(R|=R&32);var H=A.entangledLanes;if(H!==0)for(A=A.entanglements,H&=R;0<H;){var W=31-Rr(H),Y=1<<W;R|=A[W],H&=~Y}return Wi=R,Mn(),L}function Xt(A,R){bt=null,ut.H=jr,R===Un||R===ci?(R=un(),$t=3):R===Dc?(R=un(),$t=4):$t=R===yr?8:R!==null&&typeof R=="object"&&typeof R.then=="function"?6:1,In=R,Tt===null&&(vn=1,Gl(A,Q(R,A.current)))}function Ft(){var A=Dr.current;return A===null?!0:(Ot&4194048)===Ot?vr===null:(Ot&62914560)===Ot||(Ot&536870912)!==0?A===vr:!1}function os(){var A=ut.H;return ut.H=jr,A===null?jr:A}function Hr(){var A=ut.A;return ut.A=bo,A}function so(){vn=4,Si||(Ot&4194048)!==Ot&&Dr.current!==null||(Zs=!0),(ys&134217727)===0&&(Js&134217727)===0||At===null||Mi(At,Ot,Cr,!1)}function Oi(A,R,L){var H=Rt;Rt|=2;var W=os(),Y=Hr();(At!==A||Ot!==R)&&(bl=null,Sn(A,R)),R=!1;var ge=vn;e:do try{if($t!==0&&Tt!==null){var _e=Tt,ze=In;switch($t){case 8:Zl(),ge=6;break e;case 3:case 2:case 9:case 6:Dr.current===null&&(R=!0);var Ze=$t;if($t=0,In=null,Fi(A,_e,ze,Ze),L&&Zs){ge=0;break e}break;default:Ze=$t,$t=0,In=null,Fi(A,_e,ze,Ze)}}Ud(),ge=vn;break}catch(tt){Xt(A,tt)}while(!0);return R&&A.shellSuspendCounter++,Ci=Zt=null,Rt=H,ut.H=W,ut.A=Y,Tt===null&&(At=null,Ot=0,Mn()),ge}function Ud(){for(;Tt!==null;)Is(Tt)}function jd(A,R){var L=Rt;Rt|=2;var H=os(),W=Hr();At!==A||Ot!==R?(bl=null,ea=or()+500,Sn(A,R)):Zs=V(A,R);e:do try{if($t!==0&&Tt!==null){R=Tt;var Y=In;t:switch($t){case 1:$t=0,In=null,Fi(A,R,Y,1);break;case 2:case 9:if(Or(Y)){$t=0,In=null,Ql(R);break}R=function(){$t!==2&&$t!==9||At!==A||($t=7),wt(A)},Y.then(R,R);break e;case 3:$t=7;break e;case 4:$t=5;break e;case 7:Or(Y)?($t=0,In=null,Ql(R)):($t=0,In=null,Fi(A,R,Y,7));break;case 5:var ge=null;switch(Tt.tag){case 26:ge=Tt.memoizedState;case 5:case 27:var _e=Tt,ze=_e.type,Ze=_e.pendingProps;if(ge?qu(ge):pn(_e.stateNode,ze,Ze)){$t=0,In=null;var tt=_e.sibling;if(tt!==null)Tt=tt;else{var Je=_e.return;Je!==null?(Tt=Je,oo(Je)):Tt=null}break t}}$t=0,In=null,Fi(A,R,Y,5);break;case 6:$t=0,In=null,Fi(A,R,Y,6);break;case 8:Zl(),vn=6;break e;default:throw Error(u(462))}}ao();break}catch(it){Xt(A,it)}while(!0);return Ci=Zt=null,ut.H=H,ut.A=W,Rt=L,Tt!==null?0:(At=null,Ot=0,Mn(),vn)}function ao(){for(;Tt!==null&&!Lh();)Is(Tt)}function Is(A){var R=ru(A.alternate,A,Wi);A.memoizedProps=A.pendingProps,R===null?oo(A):Tt=R}function Ql(A){var R=A,L=R.alternate;switch(R.tag){case 15:case 0:R=Zc(L,R,R.pendingProps,R.type,void 0,Ot);break;case 11:R=Zc(L,R,R.pendingProps,R.type.render,R.ref,Ot);break;case 5:Io(R);default:Hd(L,R),R=Tt=tc(R,Wi),R=ru(L,R,Wi)}A.memoizedProps=A.pendingProps,R===null?oo(A):Tt=R}function Fi(A,R,L,H){Ci=Zt=null,Io(R),qs=null,Ta=0;var W=R.return;try{if(nf(A,W,R,L,Ot)){vn=1,Gl(A,Q(L,A.current)),Tt=null;return}}catch(Y){if(W!==null)throw Tt=W,Y;vn=1,Gl(A,Q(L,A.current)),Tt=null;return}R.flags&32768?(Mt||H===1?A=!0:Zs||(Ot&536870912)!==0?A=!1:(Si=A=!0,(H===2||H===9||H===3||H===6)&&(H=Dr.current,H!==null&&H.tag===13&&(H.flags|=16384))),ks(R,A)):oo(R)}function oo(A){var R=A;do{if((R.flags&32768)!==0){ks(R,Si);return}A=R.return;var L=Bd(R.alternate,R,Wi);if(L!==null){Tt=L;return}if(R=R.sibling,R!==null){Tt=R;return}Tt=R=A}while(R!==null);vn===0&&(vn=5)}function ks(A,R){do{var L=au(A.alternate,A);if(L!==null){L.flags&=32767,Tt=L;return}if(L=A.return,L!==null&&(L.flags|=32768,L.subtreeFlags=0,L.deletions=null),!R&&(A=A.sibling,A!==null)){Tt=A;return}Tt=A=L}while(A!==null);vn=6,Tt=null}function Li(A,R,L,H,W,Y,ge,_e,ze){A.cancelPendingCommit=null;do Ii();while(kn!==0);if((Rt&6)!==0)throw Error(u(327));if(R!==null){if(R===A.current)throw Error(u(177));if(Y=R.lanes|R.childLanes,Y|=Da,ee(A,L,Y,ge,_e,ze),A===At&&(Tt=At=null,Ot=0),La=R,bs=A,$i=L,Ao=Y,Oc=W,nd=H,(R.subtreeFlags&10256)!==0||(R.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,Ln(dl,function(){return Jo(),null})):(A.callbackNode=null,A.callbackPriority=0),H=(R.flags&13878)!==0,(R.subtreeFlags&13878)!==0||H){H=ut.T,ut.T=null,W=ni(),Pt(2),ge=Rt,Rt|=4;try{rf(A,R,L)}finally{Rt=ge,Pt(W),ut.T=H}}kn=1,ls(),Ni(),Jl()}}function ls(){if(kn===1){kn=0;var A=bs,R=La,L=(R.flags&13878)!==0;if((R.subtreeFlags&13878)!==0||L){L=ut.T,ut.T=null;var H=ni();Pt(2);var W=Rt;Rt|=4;try{Zo(R,A),Yd(A.containerInfo)}finally{Rt=W,Pt(H),ut.T=L}}A.current=R,kn=2}}function Ni(){if(kn===2){kn=0;var A=bs,R=La,L=(R.flags&8772)!==0;if((R.subtreeFlags&8772)!==0||L){L=ut.T,ut.T=null;var H=ni();Pt(2);var W=Rt;Rt|=4;try{Vd(A,R.alternate,R)}finally{Rt=W,Pt(H),ut.T=L}}kn=3}}function Jl(){if(kn===4||kn===3){kn=0,Yu();var A=bs,R=La,L=$i,H=nd;(R.subtreeFlags&10256)!==0||(R.flags&10256)!==0?kn=5:(kn=0,La=bs=null,ec(A,A.pendingLanes));var W=A.pendingLanes;if(W===0&&(Cs=null),be(L),R=R.stateNode,Tr&&typeof Tr.onCommitFiberRoot=="function")try{Tr.onCommitFiberRoot(Ra,R,void 0,(R.current.flags&128)===128)}catch{}if(H!==null){R=ut.T,W=ni(),Pt(2),ut.T=null;try{for(var Y=A.onRecoverableError,ge=0;ge<H.length;ge++){var _e=H[ge];Y(_e.value,{componentStack:_e.stack})}}finally{ut.T=R,Pt(W)}}($i&3)!==0&&Ii(),wt(A),W=A.pendingLanes,(L&261930)!==0&&(W&42)!==0?A===Sl?Ht++:(Ht=0,Sl=A):Ht=0,an&&ll(),Bn(0)}}function ec(A,R){(A.pooledCacheLanes&=R)===0&&(R=A.pooledCache,R!=null&&(A.pooledCache=null,en(R)))}function Ii(){return ls(),Ni(),Jl(),Jo()}function Jo(){if(kn!==5)return!1;var A=bs,R=Ao;Ao=0;var L=be($i),H=32>L?32:L;L=ut.T;var W=ni();try{Pt(H),ut.T=null,H=Oc,Oc=null;var Y=bs,ge=$i;if(kn=0,La=bs=null,$i=0,(Rt&6)!==0)throw Error(u(331));var _e=Rt;if(Rt|=4,Yl(Y.current),ql(Y,Y.current,ge,H),Rt=_e,Bn(0,!1),Tr&&typeof Tr.onPostCommitFiberRoot=="function")try{Tr.onPostCommitFiberRoot(Ra,Y)}catch{}return!0}finally{Pt(W),ut.T=L,ec(A,R)}}function Bs(A,R,L){R=Q(L,R),R=Yc(A.stateNode,R,2),A=As(A,R,2),A!==null&&($(A,2),wt(A))}function gt(A,R,L){if(A.tag===3)Bs(A,A,L);else for(;R!==null;){if(R.tag===3){Bs(R,A,L);break}else if(R.tag===1){var H=R.stateNode;if(typeof R.type.getDerivedStateFromError=="function"||typeof H.componentDidCatch=="function"&&(Cs===null||!Cs.has(H))){A=Q(L,A),L=_d(2),H=As(R,L,2),H!==null&&(Rd(L,H,R,A),$(H,2),wt(H));break}}R=R.return}}function lo(A,R,L){var H=A.pingCache;if(H===null){H=A.pingCache=new $r;var W=new Set;H.set(R,W)}else W=H.get(R),W===void 0&&(W=new Set,H.set(R,W));W.has(L)||(Qs=!0,W.add(L),A=Wd.bind(null,A,R,L),R.then(A,A))}function Wd(A,R,L){var H=A.pingCache;H!==null&&H.delete(R),A.pingedLanes|=A.suspendedLanes&L,A.warmLanes&=~L,At===A&&(Ot&L)===L&&(vn===4||vn===3&&(Ot&62914560)===Ot&&300>or()-Cl?(Rt&2)===0&&Sn(A,0):xo|=L,Eo===Ot&&(Eo=0)),wt(A)}function $d(A,R){R===0&&(R=q()),A=xs(A,R),A!==null&&($(A,R),wt(A))}function sf(A){var R=A.memoizedState,L=0;R!==null&&(L=R.retryLane),$d(A,L)}function af(A,R){var L=0;switch(A.tag){case 31:case 13:var H=A.stateNode,W=A.memoizedState;W!==null&&(L=W.retryLane);break;case 19:H=A.stateNode;break;case 22:H=A.stateNode._retryCache;break;default:throw Error(u(314))}H!==null&&H.delete(R),$d(A,L)}function Ln(A,R){return ul(A,R)}function du(A,R,L,H){this.tag=A,this.key=L,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=R,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=H,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fa(A){return A=A.prototype,!(!A||!A.isReactComponent)}function Gr(A,R){var L=A.alternate;return L===null?(L=n(A.tag,R,A.key,A.mode),L.elementType=A.elementType,L.type=A.type,L.stateNode=A.stateNode,L.alternate=A,A.alternate=L):(L.pendingProps=R,L.type=A.type,L.flags=0,L.subtreeFlags=0,L.deletions=null),L.flags=A.flags&65011712,L.childLanes=A.childLanes,L.lanes=A.lanes,L.child=A.child,L.memoizedProps=A.memoizedProps,L.memoizedState=A.memoizedState,L.updateQueue=A.updateQueue,R=A.dependencies,L.dependencies=R===null?null:{lanes:R.lanes,firstContext:R.firstContext},L.sibling=A.sibling,L.index=A.index,L.ref=A.ref,L.refCleanup=A.refCleanup,L}function tc(A,R){A.flags&=65011714;var L=A.alternate;return L===null?(A.childLanes=0,A.lanes=R,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=L.childLanes,A.lanes=L.lanes,A.child=L.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=L.memoizedProps,A.memoizedState=L.memoizedState,A.updateQueue=L.updateQueue,A.type=L.type,R=L.dependencies,A.dependencies=R===null?null:{lanes:R.lanes,firstContext:R.firstContext}),A}function cs(A,R,L,H,W,Y){var ge=0;if(H=A,typeof A=="function")fa(A)&&(ge=1);else if(typeof A=="string")ge=ri&&Gn?mc(A,L,qn.current)?26:Ku(A)?27:5:ri?mc(A,L,qn.current)?26:5:Gn&&Ku(A)?27:5;else e:switch(A){case rl:return A=n(31,L,R,W),A.elementType=rl,A.lanes=Y,A;case va:return ei(L.children,W,Y,R);case ya:ge=8,W|=24;break;case Ca:return A=n(12,L,R,W|2),A.elementType=Ca,A.lanes=Y,A;case sc:return A=n(13,L,R,W),A.elementType=sc,A.lanes=Y,A;case us:return A=n(19,L,R,W),A.elementType=us,A.lanes=Y,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case ti:ge=10;break e;case nl:ge=9;break e;case co:ge=11;break e;case ac:ge=14;break e;case fr:ge=16,H=null;break e}ge=29,L=Error(u(130,A===null?"null":typeof A,"")),H=null}return R=n(ge,L,R,W),R.elementType=A,R.type=H,R.lanes=Y,R}function ei(A,R,L,H){return A=n(7,A,H,R),A.lanes=L,A}function hu(A,R,L){return A=n(6,A,null,R),A.lanes=L,A}function fu(A){var R=n(18,null,null,0);return R.stateNode=A,R}function pu(A,R,L){return R=n(4,A.children!==null?A.children:[],A.key,R),R.lanes=L,R.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},R}function qd(A,R,L,H,W,Y,ge,_e,ze){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=_r,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=z(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=z(0),this.hiddenUpdates=z(null),this.identifierPrefix=H,this.onUncaughtError=W,this.onCaughtError=Y,this.onRecoverableError=ge,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ze,this.incompleteTransitions=new Map}function Hs(A,R,L,H,W,Y,ge,_e,ze,Ze,tt,Je){return A=new qd(A,R,L,ge,ze,Ze,tt,Je,_e),R=1,Y===!0&&(R|=24),Y=n(3,null,null,R),A.current=Y,Y.stateNode=A,R=nn(),R.refCount++,A.pooledCache=R,R.refCount++,Y.memoizedState={element:H,isDehydrated:L,cache:R},rr(Y),A}function nc(A){return A?(A=Bi,A):Bi}function el(A){var R=A._reactInternals;if(R===void 0)throw typeof A.render=="function"?Error(u(188)):(A=Object.keys(A).join(","),Error(u(268,A)));return A=v(R),A=A!==null?w(A):null,A===null?null:ho(A.stateNode)}function gu(A,R,L,H,W,Y){W=nc(W),H.context===null?H.context=W:H.pendingContext=W,H=xi(R),H.payload={element:L},Y=Y===void 0?null:Y,Y!==null&&(H.callback=Y),L=As(A,H,R),L!==null&&(fn(L,A,R),Fo(L,A,R))}function pa(A,R){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var L=A.retryLane;A.retryLane=L!==0&&L<R?L:R}}function tl(A,R){pa(A,R),(A=A.alternate)&&pa(A,R)}var xt={},rc=requireReact(),Er=requireScheduler(),ic=Object.assign,ga=Symbol.for("react.element"),ki=Symbol.for("react.transitional.element"),ma=Symbol.for("react.portal"),va=Symbol.for("react.fragment"),ya=Symbol.for("react.strict_mode"),Ca=Symbol.for("react.profiler"),nl=Symbol.for("react.consumer"),ti=Symbol.for("react.context"),co=Symbol.for("react.forward_ref"),sc=Symbol.for("react.suspense"),us=Symbol.for("react.suspense_list"),ac=Symbol.for("react.memo"),fr=Symbol.for("react.lazy"),rl=Symbol.for("react.activity"),mu=Symbol.for("react.memo_cache_sentinel"),ds=Symbol.iterator,Gs=Symbol.for("react.client.reference"),Vs=Array.isArray,ut=rc.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,vu=t.rendererVersion,il=t.rendererPackageName,uo=t.extraDevToolsConfig,ho=t.getPublicInstance,Kd=t.getRootHostContext,fo=t.getChildHostContext,oc=t.prepareForCommit,Yd=t.resetAfterCommit,yu=t.createInstance;t.cloneMutableInstance;var sl=t.appendInitialChild,Ar=t.finalizeInitialChildren,pr=t.shouldSetTextContent,hs=t.createTextInstance;t.cloneMutableTextInstance;var Cu=t.scheduleTimeout,Xd=t.cancelTimeout,_r=t.noTimeout,An=t.isPrimaryRenderer;t.warnsIfNotActing;var Lt=t.supportsMutation,Vr=t.supportsPersistence,an=t.supportsHydration,Ct=t.getInstanceFromNode;t.beforeActiveInstanceBlur;var qt=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var Pt=t.setCurrentUpdatePriority,ni=t.getCurrentUpdatePriority,po=t.resolveUpdatePriority;t.trackSchedulerEvent,t.resolveEventType,t.resolveEventTimeStamp;var ba=t.shouldAttemptEagerTransition,lc=t.detachDeletedInstance;t.requestPostPaintCallback;var al=t.maySuspendCommit,go=t.maySuspendCommitOnUpdate,bu=t.maySuspendCommitInSyncRender,pn=t.preloadInstance,Su=t.startSuspendingCommit,cc=t.suspendInstance;t.suspendOnActiveViewTransition;var Zd=t.waitForCommitToBeReady;t.getSuspendedCommitReason;var Sa=t.NotPendingTransition,wa=t.HostTransitionContext,wu=t.resetFormInstance;t.bindToConsole;var xu=t.supportsMicrotasks,Eu=t.scheduleMicrotask,Hn=t.supportsTestSelectors,_n=t.findFiberRoot,uc=t.getBoundingRect,ol=t.getTextContent,zs=t.isHiddenSubtree,Au=t.matchAccessibilityRole,fs=t.setFocusIfFocusable,dc=t.setupIntersectionObserver,_u=t.appendChild,Ru=t.appendChildToContainer,Qd=t.commitTextUpdate,Jd=t.commitMount,eh=t.commitUpdate,th=t.insertBefore,nh=t.insertInContainerBefore,rh=t.removeChild,Tu=t.removeChildFromContainer,Du=t.resetTextContent,of=t.hideInstance,ih=t.hideTextInstance,sh=t.unhideInstance,ah=t.unhideTextInstance;t.cancelViewTransitionName,t.cancelRootViewTransitionName,t.restoreRootViewTransitionName,t.cloneRootViewTransitionContainer,t.removeRootViewTransitionClone,t.measureClonedInstance,t.hasInstanceChanged,t.hasInstanceAffectedParent,t.startViewTransition,t.startGestureTransition,t.stopViewTransition,t.getCurrentGestureOffset,t.createViewTransitionInstance;var Pu=t.clearContainer;t.createFragmentInstance,t.updateFragmentInstanceFiber,t.commitNewChildToFragmentInstance,t.deleteChildFromFragmentInstance;var oh=t.cloneInstance,Mu=t.createContainerChildSet,Ou=t.appendChildToContainerChildSet,lh=t.finalizeContainerChildren,Fu=t.replaceContainerChildren,ch=t.cloneHiddenInstance,Lu=t.cloneHiddenTextInstance,Us=t.isSuspenseInstancePending,hc=t.isSuspenseInstanceFallback,fc=t.getSuspenseInstanceFallbackErrorDetails,pc=t.registerSuspenseInstanceRetry,uh=t.canHydrateFormStateMarker,Nu=t.isFormStateMarkerMatching,dh=t.getNextHydratableSibling,hh=t.getNextHydratableSiblingAfterSingleton,fh=t.getFirstHydratableChild,ph=t.getFirstHydratableChildWithinContainer,gh=t.getFirstHydratableChildWithinActivityInstance,mh=t.getFirstHydratableChildWithinSuspenseInstance,Iu=t.getFirstHydratableChildWithinSingleton,yh=t.canHydrateInstance,Ch=t.canHydrateTextInstance,ku=t.canHydrateActivityInstance,bh=t.canHydrateSuspenseInstance,Sh=t.hydrateInstance,lf=t.hydrateTextInstance,Bu=t.hydrateActivityInstance,wh=t.hydrateSuspenseInstance,xh=t.getNextHydratableInstanceAfterActivityInstance,Hu=t.getNextHydratableInstanceAfterSuspenseInstance,Eh=t.commitHydratedInstance,Ah=t.commitHydratedContainer,cf=t.commitHydratedActivityInstance,uf=t.commitHydratedSuspenseInstance,_h=t.finalizeHydratedChildren,ll=t.flushHydrationEvents;t.clearActivityBoundary;var Gu=t.clearSuspenseBoundary;t.clearActivityBoundaryFromContainer;var gc=t.clearSuspenseBoundaryFromContainer,Rh=t.hideDehydratedBoundary,Th=t.unhideDehydratedBoundary,mo=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var Dh=t.validateHydratableInstance,Vu=t.validateHydratableTextInstance,ri=t.supportsResources,mc=t.isHostHoistableType,cl=t.getHoistableRoot,zu=t.getResource,Uu=t.acquireResource,js=t.releaseResource,Ph=t.hydrateHoistable,ju=t.mountHoistable,Wu=t.unmountHoistable,vc=t.createHoistableInstance,Mh=t.prepareToCommitHoistables,$u=t.mayResourceSuspendCommit,qu=t.preloadResource,Oh=t.suspendResource,Gn=t.supportsSingletons,yc=t.resolveSingletonInstance,Nn=t.acquireSingletonInstance,$n=t.releaseSingletonInstance,Ku=t.isHostSingletonType,xa=t.isSingletonScope,Cc=[],Ea=-1,Bi={},Rr=Math.clz32?Math.clz32:N,bc=Math.log,Fh=Math.LN2,Sc=256,Aa=262144,vo=4194304,ul=Er.unstable_scheduleCallback,wc=Er.unstable_cancelCallback,Lh=Er.unstable_shouldYield,Yu=Er.unstable_requestPaint,or=Er.unstable_now,xc=Er.unstable_ImmediatePriority,Nh=Er.unstable_UserBlockingPriority,dl=Er.unstable_NormalPriority,Ec=Er.unstable_IdlePriority,Xu=Er.log,Ih=Er.unstable_setDisableYieldValue,Ra=null,Tr=null,Rn=typeof Object.is=="function"?Object.is:Ee,Ac=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var R=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(R))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)},df=Object.prototype.hasOwnProperty,_c,Hi,hl=!1,Zu=new WeakMap,ps=[],Gi=0,Kt=null,fl=0,ii=[],zr=0,si=null,Qn=1,yi="",qn=D(null),gs=D(null),Jn=D(null),pl=D(null),Vn=null,on=null,Mt=!1,Vi=null,gr=!1,Rc=Error(u(519)),ai=D(null),Zt=null,Ci=null,kh=typeof AbortController<"u"?AbortController:function(){var A=[],R=this.signal={aborted:!1,addEventListener:function(L,H){A.push(H)}};this.abort=function(){R.aborted=!0,A.forEach(function(L){return L()})}},Kn=Er.unstable_scheduleCallback,hf=Er.unstable_NormalPriority,cn={$$typeof:ti,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},gl=null,jt=null,lr=!1,oi=!1,Tc=!1,Ws=0,yo=null,Qu=0,ms=0,zn=null,li=ut.S;ut.S=function(A,R){Fa=or(),typeof R=="object"&&R!==null&&typeof R.then=="function"&&Vt(A,R),li!==null&&li(A,R)};var $s=D(null),Un=Error(u(460)),Dc=Error(u(474)),ci=Error(u(542)),zi={then:function(){}},mr=null,qs=null,Ta=0,er=Zi(!0),Ju=Zi(!1),tr=[],Ui=0,Da=0,Ur=!1,Pc=!1,Pa=D(null),Ks=D(0),Dr=D(null),vr=null,wn=D(0),vs=0,bt=null,ct=null,mt=null,Et=!1,St=!1,Nt=!1,cr=0,ui=0,bi=null,ed=0,jr={readContext:rt,use:Va,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useLayoutEffect:dn,useInsertionEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useSyncExternalStore:dn,useId:dn,useHostTransitionStatus:dn,useFormState:dn,useActionState:dn,useOptimistic:dn,useMemoCache:dn,useCacheRefresh:dn};jr.useEffectEvent=dn;var gn={readContext:rt,use:Va,useCallback:function(A,R){return ir().memoizedState=[A,R===void 0?null:R],A},useContext:rt,useEffect:Ho,useImperativeHandle:function(A,R,L){L=L!=null?L.concat([A]):null,oa(4194308,4,Wa.bind(null,R,A),L)},useLayoutEffect:function(A,R){return oa(4194308,4,A,R)},useInsertionEffect:function(A,R){oa(4,2,A,R)},useMemo:function(A,R){var L=ir();R=R===void 0?null:R;var H=A();if(Nt){xe(!0);try{A()}finally{xe(!1)}}return L.memoizedState=[H,R],H},useReducer:function(A,R,L){var H=ir();if(L!==void 0){var W=L(R);if(Nt){xe(!0);try{L(R)}finally{xe(!1)}}}else W=R;return H.memoizedState=H.baseState=W,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:W},H.queue=A,A=A.dispatch=tf.bind(null,bt,A),[H.memoizedState,A]},useRef:function(A){var R=ir();return A={current:A},R.memoizedState=A},useState:function(A){A=Vc(A);var R=A.queue,L=wd.bind(null,bt,R);return R.dispatch=L,[A.memoizedState,L]},useDebugValue:Vo,useDeferredValue:function(A,R){var L=ir();return qa(L,A,R)},useTransition:function(){var A=Vc(!1);return A=Cd.bind(null,bt,A.queue,!0,!1),ir().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,R,L){var H=bt,W=ir();if(Mt){if(L===void 0)throw Error(u(407));L=L()}else{if(L=R(),At===null)throw Error(u(349));(Ot&127)!==0||gd(H,R,L)}W.memoizedState=L;var Y={value:L,getSnapshot:R};return W.queue=Y,Ho(Gc.bind(null,H,Y,A),[A]),H.flags|=2048,Ir(9,{destroy:void 0},Hc.bind(null,H,Y,L,R),null),L},useId:function(){var A=ir(),R=At.identifierPrefix;if(Mt){var L=yi,H=Qn;L=(H&~(1<<32-Rr(H)-1)).toString(32)+L,R="_"+R+"R_"+L,L=cr++,0<L&&(R+="H"+L.toString(32)),R+="_"}else L=ed++,R="_"+R+"r_"+L.toString(32)+"_";return A.memoizedState=R},useHostTransitionStatus:$c,useFormState:Uc,useActionState:Uc,useOptimistic:function(A){var R=ir();R.memoizedState=R.baseState=A;var L={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return R.queue=L,R=kl.bind(null,bt,!0,L),L.dispatch=R,[A,R]},useMemoCache:Rl,useCacheRefresh:function(){return ir().memoizedState=ef.bind(null,bt)},useEffectEvent:function(A){var R=ir(),L={impl:A};return R.memoizedState=L,function(){if((Rt&2)!==0)throw Error(u(440));return L.impl.apply(void 0,arguments)}}},ji={readContext:rt,use:Va,useCallback:Nl,useContext:rt,useEffect:ja,useImperativeHandle:yd,useInsertionEffect:Ds,useLayoutEffect:Go,useMemo:$a,useReducer:ts,useRef:Ll,useState:function(){return ts(mi)},useDebugValue:Vo,useDeferredValue:function(A,R){var L=rn();return Wc(L,ct.memoizedState,A,R)},useTransition:function(){var A=ts(mi)[0],R=rn().memoizedState;return[typeof A=="boolean"?A:sr(A),R]},useSyncExternalStore:sa,useId:Il,useHostTransitionStatus:$c,useFormState:za,useActionState:za,useOptimistic:function(A,R){var L=rn();return ko(L,ct,A,R)},useMemoCache:Rl,useCacheRefresh:Sd};ji.useEffectEvent=ur;var Ys={readContext:rt,use:Va,useCallback:Nl,useContext:rt,useEffect:ja,useImperativeHandle:yd,useInsertionEffect:Ds,useLayoutEffect:Go,useMemo:$a,useReducer:Dl,useRef:Ll,useState:function(){return Dl(mi)},useDebugValue:Vo,useDeferredValue:function(A,R){var L=rn();return ct===null?qa(L,A,R):Wc(L,ct.memoizedState,A,R)},useTransition:function(){var A=Dl(mi)[0],R=rn().memoizedState;return[typeof A=="boolean"?A:sr(A),R]},useSyncExternalStore:sa,useId:Il,useHostTransitionStatus:$c,useFormState:Ua,useActionState:Ua,useOptimistic:function(A,R){var L=rn();return ct!==null?ko(L,ct,A,R):(L.baseState=A,[A,L.queue.dispatch])},useMemoCache:Rl,useCacheRefresh:Sd};Ys.useEffectEvent=ur;var ml={enqueueSetState:function(A,R,L){A=A._reactInternals;var H=sn(),W=xi(H);W.payload=R,L!=null&&(W.callback=L),R=As(A,W,H),R!==null&&(fn(R,A,H),Fo(R,A,H))},enqueueReplaceState:function(A,R,L){A=A._reactInternals;var H=sn(),W=xi(H);W.tag=1,W.payload=R,L!=null&&(W.callback=L),R=As(A,W,H),R!==null&&(fn(R,A,H),Fo(R,A,H))},enqueueForceUpdate:function(A,R){A=A._reactInternals;var L=sn(),H=xi(L);H.tag=2,R!=null&&(H.callback=R),R=As(A,H,L),R!==null&&(fn(R,A,L),Fo(R,A,L))}},yr=Error(u(461)),tn=!1,Ma={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},xn=!1,En=!1,Co=!1,td=typeof WeakSet=="function"?WeakSet:Set,Tn=null,mn=null,Dn=!1,Wt=null,Wr=8192,bo={getCacheForType:function(A){var R=rt(cn),L=R.data.get(A);return L===void 0&&(L=A(),R.data.set(A,L)),L},cacheSignal:function(){return rt(cn).controller.signal}},di=0,So=1,wo=2,vl=3,Xs=4;if(typeof Symbol=="function"&&Symbol.for){var Oa=Symbol.for;di=Oa("selector.component"),So=Oa("selector.has_pseudo_class"),wo=Oa("selector.role"),vl=Oa("selector.test_id"),Xs=Oa("selector.text")}var $r=typeof WeakMap=="function"?WeakMap:Map,Rt=0,At=null,Tt=null,Ot=0,$t=0,In=null,Si=!1,Zs=!1,Qs=!1,Wi=0,vn=0,ys=0,Js=0,xo=0,Cr=0,Eo=0,yl=null,Pr=null,Mc=!1,Cl=0,Fa=0,ea=1/0,bl=null,Cs=null,kn=0,bs=null,La=null,$i=0,Ao=0,Oc=null,nd=null,Ht=0,Sl=null;return xt.attemptContinuousHydration=function(A){if(A.tag===13||A.tag===31){var R=xs(A,67108864);R!==null&&fn(R,A,67108864),tl(A,67108864)}},xt.attemptHydrationAtCurrentPriority=function(A){if(A.tag===13||A.tag===31){var R=sn();R=he(R);var L=xs(A,R);L!==null&&fn(L,A,R),tl(A,R)}},xt.attemptSynchronousHydration=function(A){switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var R=I(A.pendingLanes);if(R!==0){for(A.pendingLanes|=2,A.entangledLanes|=2;R;){var L=1<<31-Rr(R);A.entanglements[1]|=L,R&=~L}wt(A),(Rt&6)===0&&(ea=or()+500,Bn(0))}}break;case 31:case 13:R=xs(A,2),R!==null&&fn(R,A,2),Xl(),tl(A,2)}},xt.batchedUpdates=function(A,R){return A(R)},xt.createComponentSelector=function(A){return{$$typeof:di,value:A}},xt.createContainer=function(A,R,L,H,W,Y,ge,_e,ze,Ze){return Hs(A,R,!1,null,L,H,Y,null,ge,_e,ze,Ze)},xt.createHasPseudoClassSelector=function(A){return{$$typeof:So,value:A}},xt.createHydrationContainer=function(A,R,L,H,W,Y,ge,_e,ze,Ze,tt,Je,it,yt){return A=Hs(L,H,!0,A,W,Y,_e,yt,ze,Ze,tt,Je),A.context=nc(null),L=A.current,H=sn(),H=he(H),W=xi(H),W.callback=R??null,As(L,W,H),R=H,A.current.lanes=R,$(A,R),wt(A),A},xt.createPortal=function(A,R,L){var H=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ma,key:H==null?null:""+H,children:A,containerInfo:R,implementation:L}},xt.createRoleSelector=function(A){return{$$typeof:wo,value:A}},xt.createTestNameSelector=function(A){return{$$typeof:vl,value:A}},xt.createTextSelector=function(A){return{$$typeof:Xs,value:A}},xt.defaultOnCaughtError=function(A){console.error(A)},xt.defaultOnRecoverableError=function(A){Ac(A)},xt.defaultOnUncaughtError=function(A){Ac(A)},xt.deferredUpdates=function(A){var R=ut.T,L=ni();try{return Pt(32),ut.T=null,A()}finally{Pt(L),ut.T=R}},xt.discreteUpdates=function(A,R,L,H,W){var Y=ut.T,ge=ni();try{return Pt(2),ut.T=null,A(R,L,H,W)}finally{Pt(ge),ut.T=Y,Rt===0&&(ea=or()+500)}},xt.findAllNodes=xr,xt.findBoundingRects=function(A,R){if(!Hn)throw Error(u(363));R=xr(A,R),A=[];for(var L=0;L<R.length;L++)A.push(uc(R[L]));for(R=A.length-1;0<R;R--){L=A[R];for(var H=L.x,W=H+L.width,Y=L.y,ge=Y+L.height,_e=R-1;0<=_e;_e--)if(R!==_e){var ze=A[_e],Ze=ze.x,tt=Ze+ze.width,Je=ze.y,it=Je+ze.height;if(H>=Ze&&Y>=Je&&W<=tt&&ge<=it){A.splice(R,1);break}else if(H!==Ze||L.width!==ze.width||it<Y||Je>ge){if(!(Y!==Je||L.height!==ze.height||tt<H||Ze>W)){Ze>H&&(ze.width+=Ze-H,ze.x=H),tt<W&&(ze.width=W-Ze),A.splice(R,1);break}}else{Je>Y&&(ze.height+=Je-Y,ze.y=Y),it<ge&&(ze.height=ge-Je),A.splice(R,1);break}}}return A},xt.findHostInstance=el,xt.findHostInstanceWithNoPortals=function(A){return A=v(A),A=A!==null?E(A):null,A===null?null:ho(A.stateNode)},xt.findHostInstanceWithWarning=function(A){return el(A)},xt.flushPassiveEffects=Ii,xt.flushSyncFromReconciler=function(A){var R=Rt;Rt|=1;var L=ut.T,H=ni();try{if(Pt(2),ut.T=null,A)return A()}finally{Pt(H),ut.T=L,Rt=R,(Rt&6)===0&&Bn(0)}},xt.flushSyncWork=Xl,xt.focusWithin=function(A,R){if(!Hn)throw Error(u(363));for(A=Ls(A),R=io(A,R),R=Array.from(R),A=0;A<R.length;){var L=R[A++],H=L.tag;if(!zs(L)){if((H===5||H===26||H===27)&&fs(L.stateNode))return!0;for(L=L.child;L!==null;)R.push(L),L=L.sibling}}return!1},xt.getFindAllNodesFailureDescription=function(A,R){if(!Hn)throw Error(u(363));var L=0,H=[];A=[Ls(A),0];for(var W=0;W<A.length;){var Y=A[W++],ge=Y.tag,_e=A[W++],ze=R[_e];if((ge!==5&&ge!==26&&ge!==27||!zs(Y))&&(Ns(Y,ze)&&(H.push(ro(ze)),_e++,_e>L&&(L=_e)),_e<R.length))for(Y=Y.child;Y!==null;)A.push(Y,_e),Y=Y.sibling}if(L<R.length){for(A=[];L<R.length;L++)A.push(ro(R[L]));return`findAllNodes was able to match part of the selector:
  `+(H.join(" > ")+`

No matching component was found for:
  `)+A.join(" > ")}return null},xt.getPublicRootInstance=function(A){if(A=A.current,!A.child)return null;switch(A.child.tag){case 27:case 5:return ho(A.child.stateNode);default:return A.child.stateNode}},xt.injectIntoDevTools=function(){var A={bundleType:0,version:vu,rendererPackageName:il,currentDispatcherRef:ut,reconcilerVersion:"19.2.0"};if(uo!==null&&(A.rendererConfig=uo),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")A=!1;else{var R=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(R.isDisabled||!R.supportsFiber)A=!0;else{try{Ra=R.inject(A),Tr=R}catch{}A=!!R.checkDCE}}return A},xt.isAlreadyRendering=function(){return(Rt&6)!==0},xt.observeVisibleRects=function(A,R,L,H){if(!Hn)throw Error(u(363));A=xr(A,R);var W=dc(A,L,H).disconnect;return{disconnect:function(){W()}}},xt.shouldError=function(){return null},xt.shouldSuspend=function(){return!1},xt.startHostTransition=function(A,R,L,H){if(A.tag!==5)throw Error(u(476));var W=bd(A).queue;Cd(A,W,R,Sa,L===null?o:function(){var Y=bd(A);return Y.next===null&&(Y=A.alternate.memoizedState),zo(A,Y.next.queue,{},sn()),L(H)})},xt.updateContainer=function(A,R,L,H){var W=R.current,Y=sn();return gu(W,Y,A,R,L,H),Y},xt.updateContainerSync=function(A,R,L,H){return gu(R.current,2,A,R,L,H),2},xt},e.exports.default=e.exports,Object.defineProperty(e.exports,"__esModule",{value:!0})})(reactReconciler_production)),reactReconciler_production.exports}var hasRequiredReactReconciler;function requireReactReconciler(){return hasRequiredReactReconciler||(hasRequiredReactReconciler=1,reactReconciler.exports=requireReactReconciler_production()),reactReconciler.exports}var reactReconcilerExports=requireReactReconciler();const ReactFiberReconciler=getDefaultExportFromCjs(reactReconcilerExports);var constants={exports:{}},reactReconcilerConstants_production={};var hasRequiredReactReconcilerConstants_production;function requireReactReconcilerConstants_production(){return hasRequiredReactReconcilerConstants_production||(hasRequiredReactReconcilerConstants_production=1,reactReconcilerConstants_production.ConcurrentRoot=1,reactReconcilerConstants_production.ContinuousEventPriority=8,reactReconcilerConstants_production.DefaultEventPriority=32,reactReconcilerConstants_production.DiscreteEventPriority=2,reactReconcilerConstants_production.IdleEventPriority=268435456,reactReconcilerConstants_production.LegacyRoot=0,reactReconcilerConstants_production.NoEventPriority=0),reactReconcilerConstants_production}var hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,constants.exports=requireReactReconcilerConstants_production()),constants.exports}var constantsExports=requireConstants();const propsToSkip={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let zIndexWarningShowed=!1,dragWarningShowed=!1;const EVENTS_NAMESPACE=".react-konva-event",DRAGGABLE_WARNING=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,Z_INDEX_WARNING=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,EMPTY_PROPS={};function applyNodeProps(e,t,n=EMPTY_PROPS){if(!zIndexWarningShowed&&"zIndex"in t&&(console.warn(Z_INDEX_WARNING),zIndexWarningShowed=!0),!dragWarningShowed&&t.draggable){var o=t.x!==void 0||t.y!==void 0,u=t.onDragEnd||t.onDragMove;o&&!u&&(console.warn(DRAGGABLE_WARNING),dragWarningShowed=!0)}for(var d in n)if(!propsToSkip[d]){var f=d.slice(0,2)==="on",v=n[d]!==t[d];if(f&&v){var w=d.substr(2).toLowerCase();w.substr(0,7)==="content"&&(w="content"+w.substr(7,1).toUpperCase()+w.substr(8)),e.off(w,n[d])}var E=!t.hasOwnProperty(d);E&&e.setAttr(d,void 0)}var C=t._useStrictMode,_={},D=!1;const O={};for(var d in t)if(!propsToSkip[d]){var f=d.slice(0,2)==="on",M=n[d]!==t[d];if(f&&M){var w=d.substr(2).toLowerCase();w.substr(0,7)==="content"&&(w="content"+w.substr(7,1).toUpperCase()+w.substr(8)),t[d]&&(O[w]=t[d])}!f&&(t[d]!==n[d]||C&&t[d]!==e.getAttr(d))&&(D=!0,_[d]=t[d])}D&&(e.setAttrs(_),updatePicture(e));for(var w in O)e.off(w+EVENTS_NAMESPACE),e.on(w+EVENTS_NAMESPACE,O[w])}function updatePicture(e){if(!Konva$1.autoDrawEnabled){var t=e.getLayer()||e.getStage();t&&t.batchDraw()}}var schedulerExports=requireScheduler();const NO_CONTEXT={},UPDATE_SIGNAL={};Konva.Node.prototype._applyProps=applyNodeProps;let currentUpdatePriority=constantsExports.DefaultEventPriority;function appendInitialChild(e,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}e.add(t),updatePicture(e)}function createInstance(e,t,n){let o=Konva[e];o||(console.error(`Konva has no node with the type ${e}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${e}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),o=Konva.Group);const u={},d={};for(var f in t)if(f!=="ref"){var v=f.slice(0,2)==="on";v?d[f]=t[f]:u[f]=t[f]}const w=new o(u);return applyNodeProps(w,d),w}function createTextInstance(e,t,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${e}"`)}function finalizeInitialChildren(e,t,n){return!1}function getPublicInstance(e){return e}function prepareForCommit(){return null}function preparePortalMount(){return null}function prepareUpdate(e,t,n,o){return UPDATE_SIGNAL}function resetAfterCommit(){}function resetTextContent(e){}function shouldDeprioritizeSubtree(e,t){return!1}function getRootHostContext(){return NO_CONTEXT}function getChildHostContext(){return NO_CONTEXT}const scheduleTimeout=setTimeout,cancelTimeout=clearTimeout,supportsMicrotasks=!0,scheduleMicrotask=e=>{e()},noTimeout=-1;function shouldSetTextContent(e,t){return!1}const isPrimaryRenderer=!1,warnsIfNotActing=!1,supportsMutation=!0,supportsPersistence=!1,supportsHydration=!1;function appendChild(e,t){t.parent===e?t.moveToTop():e.add(t),updatePicture(e)}function appendChildToContainer(e,t){t.parent===e?t.moveToTop():e.add(t),updatePicture(e)}function insertBefore(e,t,n){t._remove(),e.add(t),t.setZIndex(n.getZIndex()),updatePicture(e)}function insertInContainerBefore(e,t,n){insertBefore(e,t,n)}function removeChild(e,t){t.destroy(),t.off(EVENTS_NAMESPACE),updatePicture(e)}function removeChildFromContainer(e,t){t.destroy(),t.off(EVENTS_NAMESPACE),updatePicture(e)}function commitTextUpdate(e,t,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function commitMount(e,t,n){}function commitUpdate(e,t,n,o){applyNodeProps(e,o,n)}function hideInstance(e){e.hide(),updatePicture(e)}function hideTextInstance(e){}function unhideInstance(e,t){(t.visible==null||t.visible)&&e.show()}function unhideTextInstance(e,t){}function clearContainer(e){}function detachDeletedInstance(){}function getInstanceFromNode(){return null}function beforeActiveInstanceBlur(){}function afterActiveInstanceBlur(){}function getCurrentEventPriority(){return constantsExports.DefaultEventPriority}function prepareScopeUpdate(){}function getInstanceFromScope(){return null}function setCurrentUpdatePriority(e){currentUpdatePriority=e}function getCurrentUpdatePriority(){return currentUpdatePriority}function resolveUpdatePriority(){return constantsExports.DiscreteEventPriority}function shouldAttemptEagerTransition(){return!1}function trackSchedulerEvent(){}function resolveEventType(){return null}function resolveEventTimeStamp(){return-1.1}function requestPostPaintCallback(){}function maySuspendCommit(){return!1}function preloadInstance(){return!0}function startSuspendingCommit(){}function suspendInstance(){}function waitForCommitToBeReady(){return null}const NotPendingTransition=null,HostTransitionContext=React.createContext(null);function resetFormInstance(){}const HostConfig=Object.freeze(Object.defineProperty({__proto__:null,HostTransitionContext,NotPendingTransition,afterActiveInstanceBlur,appendChild,appendChildToContainer,appendInitialChild,beforeActiveInstanceBlur,cancelTimeout,clearContainer,commitMount,commitTextUpdate,commitUpdate,createInstance,createTextInstance,detachDeletedInstance,finalizeInitialChildren,getChildHostContext,getCurrentEventPriority,getCurrentUpdatePriority,getInstanceFromNode,getInstanceFromScope,getPublicInstance,getRootHostContext,hideInstance,hideTextInstance,idlePriority:schedulerExports.unstable_IdlePriority,insertBefore,insertInContainerBefore,isPrimaryRenderer,maySuspendCommit,noTimeout,now:schedulerExports.unstable_now,preloadInstance,prepareForCommit,preparePortalMount,prepareScopeUpdate,prepareUpdate,removeChild,removeChildFromContainer,requestPostPaintCallback,resetAfterCommit,resetFormInstance,resetTextContent,resolveEventTimeStamp,resolveEventType,resolveUpdatePriority,run:schedulerExports.unstable_runWithPriority,scheduleMicrotask,scheduleTimeout,setCurrentUpdatePriority,shouldAttemptEagerTransition,shouldDeprioritizeSubtree,shouldSetTextContent,startSuspendingCommit,supportsHydration,supportsMicrotasks,supportsMutation,supportsPersistence,suspendInstance,trackSchedulerEvent,unhideInstance,unhideTextInstance,waitForCommitToBeReady,warnsIfNotActing},Symbol.toStringTag,{value:"Module"}));function i(e,t,n){if(!e)return;if(n(e)===!0)return e;let o=e.child;for(;o;){const u=i(o,t,n);if(u)return u;o=o.sibling}}function l(e){try{return Object.defineProperties(e,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return e}}const a=l(reactExports.createContext(null));class m extends reactExports.Component{render(){return reactExports.createElement(a.Provider,{value:this._reactInternals},this.props.children)}}function c(){const e=reactExports.useContext(a);if(e===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=reactExports.useId();return reactExports.useMemo(()=>{for(const n of[e,e?.alternate]){if(!n)continue;const o=i(n,!1,u=>{let d=u.memoizedState;for(;d;){if(d.memoizedState===t)return!0;d=d.next}});if(o)return o}},[e,t])}const p=Symbol.for("react.context"),b=e=>e!==null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===p;function h(){const e=c(),[t]=reactExports.useState(()=>new Map);t.clear();let n=e;for(;n;){const o=n.type;b(o)&&o!==a&&!t.has(o)&&t.set(o,reactExports.use(l(o))),n=n.return}return t}function x(){const e=h();return reactExports.useMemo(()=>Array.from(e.keys()).reduce((t,n)=>o=>reactExports.createElement(t,null,reactExports.createElement(n.Provider,{...o,value:e.get(n)})),t=>reactExports.createElement(m,{...t})),[e])}if(React.version.indexOf("19")===-1)throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");function usePrevious(e){const t=React.useRef({});return React.useLayoutEffect(()=>{t.current=e}),React.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const useIsReactStrictMode=()=>{const e=React.useRef(0);return React.useMemo(()=>{e.current++},[]),e.current>1},StageWrap=e=>{const t=React.useRef(null),n=React.useRef(null),o=React.useRef(null),u=usePrevious(e),d=x(),f=React.useRef(null),v=C=>{const{forwardedRef:_}=e;_&&(typeof _=="function"?_(C):_.current=C)},w=useIsReactStrictMode(),E=()=>{v(null),KonvaRenderer.updateContainer(null,o.current,null),n.current?.destroy(),n.current=null};return React.useLayoutEffect(()=>(f.current&&(clearTimeout(f.current),f.current=null),n.current?v(n.current):(n.current=new Konva.Stage({width:e.width,height:e.height,container:t.current}),v(n.current),o.current=KonvaRenderer.createContainer(n.current,constantsExports.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),KonvaRenderer.updateContainer(React.createElement(d,{},e.children),o.current,null,()=>{})),()=>{w?f.current=setTimeout(E,0):E()}),[]),React.useLayoutEffect(()=>{v(n.current),applyNodeProps(n.current,e,u),KonvaRenderer.flushSyncFromReconciler(()=>{KonvaRenderer.updateContainer(React.createElement(d,{},e.children),o.current,null)})}),React.createElement("div",{ref:t,id:e.id,accessKey:e.accessKey,className:e.className,role:e.role,style:e.style,tabIndex:e.tabIndex,title:e.title})},Layer="Layer",Rect="Rect",Circle="Circle",Line="Line",Image$1="Image",Text="Text",KonvaRenderer=ReactFiberReconciler(HostConfig),Stage=React.forwardRef((e,t)=>React.createElement(m,{},React.createElement(StageWrap,{...e,forwardedRef:t})));function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,(function(module,exports$1){(function(t,n){module.exports=t.pdfjsLib=n()})(globalThis,()=>(()=>{var __webpack_modules__=[,((e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationReplyType=t.AnnotationPrefix=t.AnnotationMode=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=Q,t.bytesToString=Se,t.createValidAbsoluteUrl=K,t.getModificationDate=en,t.getUuid=wl,t.getVerbosityLevel=we,t.info=oe,t.isArrayBuffer=vt,t.isArrayEqual=nn,t.isNodeJS=void 0,t.normalizeUnicode=Ba,t.objectFromMap=Oe,t.objectSize=je,t.setVerbosityLevel=Ee,t.shadow=ne,t.string32=Te,t.stringToBytes=Ce,t.stringToPDFString=nt,t.stringToUTF8String=rt,t.unreachable=J,t.utf8StringToString=at,t.warn=se;const n=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");t.isNodeJS=n;const o=[1,0,0,1,0,0];t.IDENTITY_MATRIX=o;const u=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=u;const d=1e7;t.MAX_IMAGE_SIZE_TO_CACHE=d;const f=1.35;t.LINE_FACTOR=f;const v=.35;t.LINE_DESCENT_FACTOR=v;const w=v/f;t.BASELINE_FACTOR=w;const E={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=E;const C={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=C;const _="pdfjs_internal_editor_";t.AnnotationEditorPrefix=_;const D={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};t.AnnotationEditorType=D;const O={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};t.AnnotationEditorParamsType=O;const M={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=M;const N={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=N;const I={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=I;const B={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=B;const V={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=V;const j={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=j;const q={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=q;const z={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=z;const $={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=$;const ee={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=ee;const ie={O:"PageOpen",C:"PageClose"};t.PageActionEventType=ie;const ae={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=ae;const pe={NONE:0,BINARY:1};t.CMapCompressionType=pe;const he={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=he;const be={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=be;let xe=ae.WARNINGS;function Ee(Xe){Number.isInteger(Xe)&&(xe=Xe)}function we(){return xe}function oe(Xe){xe>=ae.INFOS&&console.log(`Info: ${Xe}`)}function se(Xe){xe>=ae.WARNINGS&&console.log(`Warning: ${Xe}`)}function J(Xe){throw new Error(Xe)}function Q(Xe,Le){Xe||J(Le)}function Z(Xe){switch(Xe?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function K(Xe,Le=null,Pe=null){if(!Xe)return null;try{if(Pe&&typeof Xe=="string"&&(Pe.addDefaultProtocol&&Xe.startsWith("www.")&&Xe.match(/\./g)?.length>=2&&(Xe=`http://${Xe}`),Pe.tryConvertEncoding))try{Xe=rt(Xe)}catch{}const st=Le?new URL(Xe,Le):new URL(Xe);if(Z(st))return st}catch{}return null}function ne(Xe,Le,Pe,st=!1){return Object.defineProperty(Xe,Le,{value:Pe,enumerable:!st,configurable:!0,writable:!1}),Pe}const ue=(function(){function Le(Pe,st){this.constructor===Le&&J("Cannot initialize BaseException."),this.message=Pe,this.name=st}return Le.prototype=new Error,Le.constructor=Le,Le})();t.BaseException=ue;class ye extends ue{constructor(Le,Pe){super(Le,"PasswordException"),this.code=Pe}}t.PasswordException=ye;class fe extends ue{constructor(Le,Pe){super(Le,"UnknownErrorException"),this.details=Pe}}t.UnknownErrorException=fe;class X extends ue{constructor(Le){super(Le,"InvalidPDFException")}}t.InvalidPDFException=X;class le extends ue{constructor(Le){super(Le,"MissingPDFException")}}t.MissingPDFException=le;class de extends ue{constructor(Le,Pe){super(Le,"UnexpectedResponseException"),this.status=Pe}}t.UnexpectedResponseException=de;class ce extends ue{constructor(Le){super(Le,"FormatError")}}t.FormatError=ce;class me extends ue{constructor(Le){super(Le,"AbortException")}}t.AbortException=me;function Se(Xe){(typeof Xe!="object"||Xe?.length===void 0)&&J("Invalid argument for bytesToString");const Le=Xe.length,Pe=8192;if(Le<Pe)return String.fromCharCode.apply(null,Xe);const st=[];for(let Vt=0;Vt<Le;Vt+=Pe){const Pn=Math.min(Vt+Pe,Le),Cn=Xe.subarray(Vt,Pn);st.push(String.fromCharCode.apply(null,Cn))}return st.join("")}function Ce(Xe){typeof Xe!="string"&&J("Invalid argument for stringToBytes");const Le=Xe.length,Pe=new Uint8Array(Le);for(let st=0;st<Le;++st)Pe[st]=Xe.charCodeAt(st)&255;return Pe}function Te(Xe){return String.fromCharCode(Xe>>24&255,Xe>>16&255,Xe>>8&255,Xe&255)}function je(Xe){return Object.keys(Xe).length}function Oe(Xe){const Le=Object.create(null);for(const[Pe,st]of Xe)Le[Pe]=st;return Le}function Ne(){const Xe=new Uint8Array(4);return Xe[0]=1,new Uint32Array(Xe.buffer,0,1)[0]===1}function De(){try{return new Function(""),!0}catch{return!1}}class Be{static get isLittleEndian(){return ne(this,"isLittleEndian",Ne())}static get isEvalSupported(){return ne(this,"isEvalSupported",De())}static get isOffscreenCanvasSupported(){return ne(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?ne(this,"platform",{isWin:!1,isMac:!1}):ne(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){return ne(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}t.FeatureTest=Be;const $e=[...Array(256).keys()].map(Xe=>Xe.toString(16).padStart(2,"0"));class Qe{static makeHexColor(Le,Pe,st){return`#${$e[Le]}${$e[Pe]}${$e[st]}`}static scaleMinMax(Le,Pe){let st;Le[0]?(Le[0]<0&&(st=Pe[0],Pe[0]=Pe[1],Pe[1]=st),Pe[0]*=Le[0],Pe[1]*=Le[0],Le[3]<0&&(st=Pe[2],Pe[2]=Pe[3],Pe[3]=st),Pe[2]*=Le[3],Pe[3]*=Le[3]):(st=Pe[0],Pe[0]=Pe[2],Pe[2]=st,st=Pe[1],Pe[1]=Pe[3],Pe[3]=st,Le[1]<0&&(st=Pe[2],Pe[2]=Pe[3],Pe[3]=st),Pe[2]*=Le[1],Pe[3]*=Le[1],Le[2]<0&&(st=Pe[0],Pe[0]=Pe[1],Pe[1]=st),Pe[0]*=Le[2],Pe[1]*=Le[2]),Pe[0]+=Le[4],Pe[1]+=Le[4],Pe[2]+=Le[5],Pe[3]+=Le[5]}static transform(Le,Pe){return[Le[0]*Pe[0]+Le[2]*Pe[1],Le[1]*Pe[0]+Le[3]*Pe[1],Le[0]*Pe[2]+Le[2]*Pe[3],Le[1]*Pe[2]+Le[3]*Pe[3],Le[0]*Pe[4]+Le[2]*Pe[5]+Le[4],Le[1]*Pe[4]+Le[3]*Pe[5]+Le[5]]}static applyTransform(Le,Pe){const st=Le[0]*Pe[0]+Le[1]*Pe[2]+Pe[4],Vt=Le[0]*Pe[1]+Le[1]*Pe[3]+Pe[5];return[st,Vt]}static applyInverseTransform(Le,Pe){const st=Pe[0]*Pe[3]-Pe[1]*Pe[2],Vt=(Le[0]*Pe[3]-Le[1]*Pe[2]+Pe[2]*Pe[5]-Pe[4]*Pe[3])/st,Pn=(-Le[0]*Pe[1]+Le[1]*Pe[0]+Pe[4]*Pe[1]-Pe[5]*Pe[0])/st;return[Vt,Pn]}static getAxialAlignedBoundingBox(Le,Pe){const st=this.applyTransform(Le,Pe),Vt=this.applyTransform(Le.slice(2,4),Pe),Pn=this.applyTransform([Le[0],Le[3]],Pe),Cn=this.applyTransform([Le[2],Le[1]],Pe);return[Math.min(st[0],Vt[0],Pn[0],Cn[0]),Math.min(st[1],Vt[1],Pn[1],Cn[1]),Math.max(st[0],Vt[0],Pn[0],Cn[0]),Math.max(st[1],Vt[1],Pn[1],Cn[1])]}static inverseTransform(Le){const Pe=Le[0]*Le[3]-Le[1]*Le[2];return[Le[3]/Pe,-Le[1]/Pe,-Le[2]/Pe,Le[0]/Pe,(Le[2]*Le[5]-Le[4]*Le[3])/Pe,(Le[4]*Le[1]-Le[5]*Le[0])/Pe]}static singularValueDecompose2dScale(Le){const Pe=[Le[0],Le[2],Le[1],Le[3]],st=Le[0]*Pe[0]+Le[1]*Pe[2],Vt=Le[0]*Pe[1]+Le[1]*Pe[3],Pn=Le[2]*Pe[0]+Le[3]*Pe[2],Cn=Le[2]*Pe[1]+Le[3]*Pe[3],Mr=(st+Cn)/2,Sr=Math.sqrt((st+Cn)**2-4*(st*Cn-Pn*Vt))/2,nr=Mr+Sr||1,bn=Mr-Sr||1;return[Math.sqrt(nr),Math.sqrt(bn)]}static normalizeRect(Le){const Pe=Le.slice(0);return Le[0]>Le[2]&&(Pe[0]=Le[2],Pe[2]=Le[0]),Le[1]>Le[3]&&(Pe[1]=Le[3],Pe[3]=Le[1]),Pe}static intersect(Le,Pe){const st=Math.max(Math.min(Le[0],Le[2]),Math.min(Pe[0],Pe[2])),Vt=Math.min(Math.max(Le[0],Le[2]),Math.max(Pe[0],Pe[2]));if(st>Vt)return null;const Pn=Math.max(Math.min(Le[1],Le[3]),Math.min(Pe[1],Pe[3])),Cn=Math.min(Math.max(Le[1],Le[3]),Math.max(Pe[1],Pe[3]));return Pn>Cn?null:[st,Pn,Vt,Cn]}static bezierBoundingBox(Le,Pe,st,Vt,Pn,Cn,Mr,Sr){const nr=[],bn=[[],[]];let Or,fi,Fr,un,gi,Yi,wi,Xi;for(let ws=0;ws<2;++ws){if(ws===0?(fi=6*Le-12*st+6*Pn,Or=-3*Le+9*st-9*Pn+3*Mr,Fr=3*st-3*Le):(fi=6*Pe-12*Vt+6*Cn,Or=-3*Pe+9*Vt-9*Cn+3*Sr,Fr=3*Vt-3*Pe),Math.abs(Or)<1e-12){if(Math.abs(fi)<1e-12)continue;un=-Fr/fi,0<un&&un<1&&nr.push(un);continue}wi=fi*fi-4*Fr*Or,Xi=Math.sqrt(wi),!(wi<0)&&(gi=(-fi+Xi)/(2*Or),0<gi&&gi<1&&nr.push(gi),Yi=(-fi-Xi)/(2*Or),0<Yi&&Yi<1&&nr.push(Yi))}let Zi=nr.length,Mn;const qr=Zi;for(;Zi--;)un=nr[Zi],Mn=1-un,bn[0][Zi]=Mn*Mn*Mn*Le+3*Mn*Mn*un*st+3*Mn*un*un*Pn+un*un*un*Mr,bn[1][Zi]=Mn*Mn*Mn*Pe+3*Mn*Mn*un*Vt+3*Mn*un*un*Cn+un*un*un*Sr;return bn[0][qr]=Le,bn[1][qr]=Pe,bn[0][qr+1]=Mr,bn[1][qr+1]=Sr,bn[0].length=bn[1].length=qr+2,[Math.min(...bn[0]),Math.min(...bn[1]),Math.max(...bn[0]),Math.max(...bn[1])]}}t.Util=Qe;const Ye=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function nt(Xe){if(Xe[0]>=""){let Pe;if(Xe[0]===""&&Xe[1]===""?Pe="utf-16be":Xe[0]===""&&Xe[1]===""?Pe="utf-16le":Xe[0]===""&&Xe[1]===""&&Xe[2]===""&&(Pe="utf-8"),Pe)try{const st=new TextDecoder(Pe,{fatal:!0}),Vt=Ce(Xe);return st.decode(Vt)}catch(st){se(`stringToPDFString: "${st}".`)}}const Le=[];for(let Pe=0,st=Xe.length;Pe<st;Pe++){const Vt=Ye[Xe.charCodeAt(Pe)];Le.push(Vt?String.fromCharCode(Vt):Xe.charAt(Pe))}return Le.join("")}function rt(Xe){return decodeURIComponent(escape(Xe))}function at(Xe){return unescape(encodeURIComponent(Xe))}function vt(Xe){return typeof Xe=="object"&&Xe?.byteLength!==void 0}function nn(Xe,Le){if(Xe.length!==Le.length)return!1;for(let Pe=0,st=Xe.length;Pe<st;Pe++)if(Xe[Pe]!==Le[Pe])return!1;return!0}function en(Xe=new Date){return[Xe.getUTCFullYear().toString(),(Xe.getUTCMonth()+1).toString().padStart(2,"0"),Xe.getUTCDate().toString().padStart(2,"0"),Xe.getUTCHours().toString().padStart(2,"0"),Xe.getUTCMinutes().toString().padStart(2,"0"),Xe.getUTCSeconds().toString().padStart(2,"0")].join("")}class Dt{#e=!1;constructor(){this.promise=new Promise((Le,Pe)=>{this.resolve=st=>{this.#e=!0,Le(st)},this.reject=st=>{this.#e=!0,Pe(st)}})}get settled(){return this.#e}}t.PromiseCapability=Dt;let wt=null,Bn=null;function Ba(Xe){return wt||(wt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Bn=new Map([["","t"]])),Xe.replaceAll(wt,(Le,Pe,st)=>Pe?Pe.normalize("NFKC"):Bn.get(st))}function wl(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const Xe=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(Xe);else for(let Le=0;Le<32;Le++)Xe[Le]=Math.floor(Math.random()*255);return Se(Xe)}const Ss="pdfjs_internal_id_";t.AnnotationPrefix=Ss}),((__unused_webpack_module,exports$1,__w_pdfjs_require__)=>{Object.defineProperty(exports$1,"__esModule",{value:!0}),exports$1.RenderTask=exports$1.PDFWorkerUtil=exports$1.PDFWorker=exports$1.PDFPageProxy=exports$1.PDFDocumentProxy=exports$1.PDFDocumentLoadingTask=exports$1.PDFDataRangeTransport=exports$1.LoopbackPort=exports$1.DefaultStandardFontDataFactory=exports$1.DefaultFilterFactory=exports$1.DefaultCanvasFactory=exports$1.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports$1,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports$1.build=void 0,exports$1.getDocument=getDocument,exports$1.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports$1.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports$1.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports$1.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports$1.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(e){if(typeof e=="string"||e instanceof URL?e={url:e}:(0,_util.isArrayBuffer)(e)&&(e={data:e}),typeof e!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!e.url&&!e.data&&!e.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const t=new PDFDocumentLoadingTask,{docId:n}=t,o=e.url?getUrlProp(e.url):null,u=e.data?getDataProp(e.data):null,d=e.httpHeaders||null,f=e.withCredentials===!0,v=e.password??null,w=e.range instanceof PDFDataRangeTransport?e.range:null,E=Number.isInteger(e.rangeChunkSize)&&e.rangeChunkSize>0?e.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let C=e.worker instanceof PDFWorker?e.worker:null;const _=e.verbosity,D=typeof e.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(e.docBaseUrl)?e.docBaseUrl:null,O=typeof e.cMapUrl=="string"?e.cMapUrl:null,M=e.cMapPacked!==!1,N=e.CMapReaderFactory||DefaultCMapReaderFactory,I=typeof e.standardFontDataUrl=="string"?e.standardFontDataUrl:null,B=e.StandardFontDataFactory||DefaultStandardFontDataFactory,V=e.stopAtErrors!==!0,j=Number.isInteger(e.maxImageSize)&&e.maxImageSize>-1?e.maxImageSize:-1,q=e.isEvalSupported!==!1,z=typeof e.isOffscreenCanvasSupported=="boolean"?e.isOffscreenCanvasSupported:!_util.isNodeJS,$=Number.isInteger(e.canvasMaxAreaInBytes)?e.canvasMaxAreaInBytes:-1,ee=typeof e.disableFontFace=="boolean"?e.disableFontFace:_util.isNodeJS,ie=e.fontExtraProperties===!0,ae=e.enableXfa===!0,pe=e.ownerDocument||globalThis.document,he=e.disableRange===!0,be=e.disableStream===!0,xe=e.disableAutoFetch===!0,Ee=e.pdfBug===!0,we=w?w.length:e.length??NaN,oe=typeof e.useSystemFonts=="boolean"?e.useSystemFonts:!_util.isNodeJS&&!ee,se=typeof e.useWorkerFetch=="boolean"?e.useWorkerFetch:N===_display_utils.DOMCMapReaderFactory&&B===_display_utils.DOMStandardFontDataFactory&&O&&I&&(0,_display_utils.isValidFetchUrl)(O,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(I,document.baseURI),J=e.canvasFactory||new DefaultCanvasFactory({ownerDocument:pe}),Q=e.filterFactory||new DefaultFilterFactory({docId:n,ownerDocument:pe}),Z=null;(0,_util.setVerbosityLevel)(_);const K={canvasFactory:J,filterFactory:Q};if(se||(K.cMapReaderFactory=new N({baseUrl:O,isCompressed:M}),K.standardFontDataFactory=new B({baseUrl:I})),!C){const ye={verbosity:_,port:_worker_options.GlobalWorkerOptions.workerPort};C=ye.port?PDFWorker.fromPort(ye):new PDFWorker(ye),t._worker=C}const ne={docId:n,apiVersion:"3.11.174",data:u,password:v,disableAutoFetch:xe,rangeChunkSize:E,length:we,docBaseUrl:D,enableXfa:ae,evaluatorOptions:{maxImageSize:j,disableFontFace:ee,ignoreErrors:V,isEvalSupported:q,isOffscreenCanvasSupported:z,canvasMaxAreaInBytes:$,fontExtraProperties:ie,useSystemFonts:oe,cMapUrl:se?O:null,standardFontDataUrl:se?I:null}},ue={ignoreErrors:V,isEvalSupported:q,disableFontFace:ee,fontExtraProperties:ie,enableXfa:ae,ownerDocument:pe,disableAutoFetch:xe,pdfBug:Ee,styleElement:Z};return C.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");const ye=_fetchDocument(C,ne),fe=new Promise(function(X){let le;w?le=new _transport_stream.PDFDataTransportStream({length:we,initialData:w.initialData,progressiveDone:w.progressiveDone,contentDispositionFilename:w.contentDispositionFilename,disableRange:he,disableStream:be},w):u||(le=(ce=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(ce):(0,_display_utils.isValidFetchUrl)(ce.url)?new _displayFetch_stream.PDFFetchStream(ce):new _displayNetwork.PDFNetworkStream(ce))({url:o,length:we,httpHeaders:d,withCredentials:f,rangeChunkSize:E,disableRange:he,disableStream:be})),X(le)});return Promise.all([ye,fe]).then(function([X,le]){if(t.destroyed)throw new Error("Loading aborted");const de=new _message_handler.MessageHandler(n,X,C.port),ce=new WorkerTransport(de,t,le,ue,K);t._transport=ce,de.send("Ready",null)})}).catch(t._capability.reject),t}async function _fetchDocument(e,t){if(e.destroyed)throw new Error("Worker was destroyed");const n=await e.messageHandler.sendWithPromise("GetDocRequest",t,t.data?[t.data.buffer]:null);if(e.destroyed)throw new Error("Worker was destroyed");return n}function getUrlProp(e){if(e instanceof URL)return e.href;try{return new URL(e,window.location).href}catch{if(_util.isNodeJS&&typeof e=="string")return e}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(e){if(_util.isNodeJS&&typeof Buffer<"u"&&e instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if(typeof e=="string")return(0,_util.stringToBytes)(e);if(typeof e=="object"&&!isNaN(e?.length)||(0,_util.isArrayBuffer)(e))return new Uint8Array(e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}class PDFDocumentLoadingTask{static#e=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.#e++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports$1.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(t,n,o=!1,u=null){this.length=t,this.initialData=n,this.progressiveDone=o,this.contentDispositionFilename=u,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,n){for(const o of this._rangeListeners)o(t,n)}onDataProgress(t,n){this._readyCapability.promise.then(()=>{for(const o of this._progressListeners)o(t,n)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const n of this._progressiveReadListeners)n(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,n){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports$1.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(t,n){this._pdfInfo=t,this._transport=n,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(o=>{if(!o)return o;const u=[];for(const d in o)u.push(...o[d]);return u}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports$1.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#e=null;#t=!1;constructor(t,n,o,u=!1){this._pageIndex=t,this._pageInfo=n,this._transport=o,this._stats=u?new _display_utils.StatTimer:null,this._pdfBug=u,this.commonObjs=o.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:n=this.rotate,offsetX:o=0,offsetY:u=0,dontFlip:d=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:t,rotation:n,offsetX:o,offsetY:u,dontFlip:d})}getAnnotations({intent:t="display"}={}){const n=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,n.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:n,intent:o="display",annotationMode:u=_util.AnnotationMode.ENABLE,transform:d=null,background:f=null,optionalContentConfigPromise:v=null,annotationCanvasMap:w=null,pageColors:E=null,printAnnotationStorage:C=null}){this._stats?.time("Overall");const _=this._transport.getRenderingIntent(o,u,C);this.#t=!1,this.#r(),v||(v=this._transport.getOptionalContentConfig());let D=this._intentStates.get(_.cacheKey);D||(D=Object.create(null),this._intentStates.set(_.cacheKey,D)),D.streamReaderCancelTimeout&&(clearTimeout(D.streamReaderCancelTimeout),D.streamReaderCancelTimeout=null);const O=!!(_.renderingIntent&_util.RenderingIntentFlag.PRINT);D.displayReadyCapability||(D.displayReadyCapability=new _util.PromiseCapability,D.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(_));const M=B=>{D.renderTasks.delete(N),(this._maybeCleanupAfterRender||O)&&(this.#t=!0),this.#n(!O),B?(N.capability.reject(B),this._abortOperatorList({intentState:D,reason:B instanceof Error?B:new Error(B)})):N.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},N=new InternalRenderTask({callback:M,params:{canvasContext:t,viewport:n,transform:d,background:f},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:w,operatorList:D.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!O,pdfBug:this._pdfBug,pageColors:E});(D.renderTasks||=new Set).add(N);const I=N.task;return Promise.all([D.displayReadyCapability.promise,v]).then(([B,V])=>{if(this.destroyed){M();return}this._stats?.time("Rendering"),N.initializeGraphics({transparency:B,optionalContentConfig:V}),N.operatorListChanged()}).catch(M),I}getOperatorList({intent:t="display",annotationMode:n=_util.AnnotationMode.ENABLE,printAnnotationStorage:o=null}={}){function u(){f.operatorList.lastChunk&&(f.opListReadCapability.resolve(f.operatorList),f.renderTasks.delete(v))}const d=this._transport.getRenderingIntent(t,n,o,!0);let f=this._intentStates.get(d.cacheKey);f||(f=Object.create(null),this._intentStates.set(d.cacheKey,f));let v;return f.opListReadCapability||(v=Object.create(null),v.operatorListChanged=u,f.opListReadCapability=new _util.PromiseCapability,(f.renderTasks||=new Set).add(v),f.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(d)),f.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:n=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:n===!0},{highWaterMark:100,size(u){return u.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(o=>_xfa_text.XfaText.textContent(o));const n=this.streamTextContent(t);return new Promise(function(o,u){function d(){f.read().then(function({value:w,done:E}){if(E){o(v);return}Object.assign(v.styles,w.styles),v.items.push(...w.items),d()},u)}const f=n.getReader(),v={items:[],styles:Object.create(null)};d()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const n of this._intentStates.values())if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability)for(const o of n.renderTasks)t.push(o.completed),o.cancel();return this.objs.clear(),this.#t=!1,this.#r(),Promise.all(t)}cleanup(t=!1){this.#t=!0;const n=this.#n(!1);return t&&n&&(this._stats&&=new _display_utils.StatTimer),n}#n(t=!1){if(this.#r(),!this.#t||this.destroyed)return!1;if(t)return this.#e=setTimeout(()=>{this.#e=null,this.#n(!1)},DELAYED_CLEANUP_TIMEOUT),!1;for(const{renderTasks:n,operatorList:o}of this._intentStates.values())if(n.size>0||!o.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#r(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(t,n){const o=this._intentStates.get(n);o&&(this._stats?.timeEnd("Page Request"),o.displayReadyCapability?.resolve(t))}_renderPageChunk(t,n){for(let o=0,u=t.length;o<u;o++)n.operatorList.fnArray.push(t.fnArray[o]),n.operatorList.argsArray.push(t.argsArray[o]);n.operatorList.lastChunk=t.lastChunk,n.operatorList.separateAnnots=t.separateAnnots;for(const o of n.renderTasks)o.operatorListChanged();t.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:t,cacheKey:n,annotationStorageSerializable:o}){const{map:u,transfers:d}=o,v=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:u},d).getReader(),w=this._intentStates.get(n);w.streamReader=v;const E=()=>{v.read().then(({value:C,done:_})=>{if(_){w.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(C,w),E())},C=>{if(w.streamReader=null,!this._transport.destroyed){if(w.operatorList){w.operatorList.lastChunk=!0;for(const _ of w.renderTasks)_.operatorListChanged();this.#n(!0)}if(w.displayReadyCapability)w.displayReadyCapability.reject(C);else if(w.opListReadCapability)w.opListReadCapability.reject(C);else throw C}})};E()}_abortOperatorList({intentState:t,reason:n,force:o=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!o){if(t.renderTasks.size>0)return;if(n instanceof _display_utils.RenderingCancelledException){let u=RENDERING_CANCELLED_TIMEOUT;n.extraDelay>0&&n.extraDelay<1e3&&(u+=n.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})},u);return}}if(t.streamReader.cancel(new _util.AbortException(n.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[u,d]of this._intentStates)if(d===t){this._intentStates.delete(u);break}this.cleanup()}}}get stats(){return this._stats}}exports$1.PDFPageProxy=PDFPageProxy;class LoopbackPort{#e=new Set;#t=Promise.resolve();postMessage(t,n){const o={data:structuredClone(t,n?{transfer:n}:null)};this.#t.then(()=>{for(const u of this.#e)u.call(this,o)})}addEventListener(t,n){this.#e.add(n)}removeEventListener(t,n){this.#e.delete(n)}terminate(){this.#e.clear()}}exports$1.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports$1.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const e=document?.currentScript?.src;e&&(PDFWorkerUtil.fallbackWorkerSrc=e.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(e,t){let n;try{if(n=new URL(e),!n.origin||n.origin==="null")return!1}catch{return!1}const o=new URL(t,n);return n.origin===o.origin},PDFWorkerUtil.createCDNWrapper=function(e){const t=`importScripts("${e}");`;return URL.createObjectURL(new Blob([t]))}}class PDFWorker{static#workerPorts;constructor({name:e=null,port:t=null,verbosity:n=(0,_util.getVerbosityLevel)()}={}){if(this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,t){if(PDFWorker.#workerPorts?.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(PDFWorker.#workerPorts||=new WeakMap).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new _message_handler.MessageHandler("main","worker",e),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:e}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,e)||(e=PDFWorkerUtil.createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e),n=new _message_handler.MessageHandler("main","worker",t),o=()=>{t.removeEventListener("error",u),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},u=()=>{this._webWorker||o()};t.addEventListener("error",u),n.on("test",f=>{if(t.removeEventListener("error",u),this.destroyed){o();return}f?(this._messageHandler=n,this._port=t,this._webWorker=t,this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),n.destroy(),t.terminate())}),n.on("ready",f=>{if(t.removeEventListener("error",u),this.destroyed){o();return}try{d()}catch{this._setupFakeWorker()}});const d=()=>{const f=new Uint8Array;n.send("test",f,[f.buffer])};d();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new LoopbackPort;this._port=t;const n=`fake${PDFWorkerUtil.fakeWorkerId++}`,o=new _message_handler.MessageHandler(n+"_worker",n,t);e.setup(o,t);const u=new _message_handler.MessageHandler(n,n+"_worker",t);this._messageHandler=u,this._readyCapability.resolve(),u.send("configure",{verbosity:this.verbosity})}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){if(!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const t=this.#workerPorts?.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new PDFWorker(e)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports$1.PDFWorker=PDFWorker;class WorkerTransport{#e=new Map;#t=new Map;#n=new Map;#r=null;constructor(t,n,o,u,d){this.messageHandler=t,this.loadingTask=n,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:u.ownerDocument,styleElement:u.styleElement}),this._params=u,this.canvasFactory=d.canvasFactory,this.filterFactory=d.filterFactory,this.cMapReaderFactory=d.cMapReaderFactory,this.standardFontDataFactory=d.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=o,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#o(t,n=null){const o=this.#e.get(t);if(o)return o;const u=this.messageHandler.sendWithPromise(t,n);return this.#e.set(t,u),u}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(t,n=_util.AnnotationMode.ENABLE,o=null,u=!1){let d=_util.RenderingIntentFlag.DISPLAY,f=_annotation_storage.SerializableEmpty;switch(t){case"any":d=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":d=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${t}`)}switch(n){case _util.AnnotationMode.DISABLE:d+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:d+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:d+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,f=(d&_util.RenderingIntentFlag.PRINT&&o instanceof _annotation_storage.PrintAnnotationStorage?o:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${n}`)}return u&&(d+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:d,cacheKey:`${d}_${f.hash}`,annotationStorageSerializable:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const o of this.#t.values())t.push(o._destroy());this.#t.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:n}=this;t.on("GetReader",(o,u)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=d=>{this._lastProgress={loaded:d.loaded,total:d.total}},u.onPull=()=>{this._fullReader.read().then(function({value:d,done:f}){if(f){u.close();return}(0,_util.assert)(d instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),u.enqueue(new Uint8Array(d),1,[d])}).catch(d=>{u.error(d)})},u.onCancel=d=>{this._fullReader.cancel(d),u.ready.catch(f=>{if(!this.destroyed)throw f})}}),t.on("ReaderHeadersReady",o=>{const u=new _util.PromiseCapability,d=this._fullReader;return d.headersReady.then(()=>{(!d.isStreamingSupported||!d.isRangeSupported)&&(this._lastProgress&&n.onProgress?.(this._lastProgress),d.onProgress=f=>{n.onProgress?.({loaded:f.loaded,total:f.total})}),u.resolve({isStreamingSupported:d.isStreamingSupported,isRangeSupported:d.isRangeSupported,contentLength:d.contentLength})},u.reject),u.promise}),t.on("GetRangeReader",(o,u)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const d=this._networkStream.getRangeReader(o.begin,o.end);if(!d){u.close();return}u.onPull=()=>{d.read().then(function({value:f,done:v}){if(v){u.close();return}(0,_util.assert)(f instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),u.enqueue(new Uint8Array(f),1,[f])}).catch(f=>{u.error(f)})},u.onCancel=f=>{d.cancel(f),u.ready.catch(v=>{if(!this.destroyed)throw v})}}),t.on("GetDoc",({pdfInfo:o})=>{this._numPages=o.numPages,this._htmlForXfa=o.htmlForXfa,delete o.htmlForXfa,n._capability.resolve(new PDFDocumentProxy(o,this))}),t.on("DocException",function(o){let u;switch(o.name){case"PasswordException":u=new _util.PasswordException(o.message,o.code);break;case"InvalidPDFException":u=new _util.InvalidPDFException(o.message);break;case"MissingPDFException":u=new _util.MissingPDFException(o.message);break;case"UnexpectedResponseException":u=new _util.UnexpectedResponseException(o.message,o.status);break;case"UnknownErrorException":u=new _util.UnknownErrorException(o.message,o.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}n._capability.reject(u)}),t.on("PasswordRequest",o=>{if(this.#r=new _util.PromiseCapability,n.onPassword){const u=d=>{d instanceof Error?this.#r.reject(d):this.#r.resolve({password:d})};try{n.onPassword(u,o.code)}catch(d){this.#r.reject(d)}}else this.#r.reject(new _util.PasswordException(o.message,o.code));return this.#r.promise}),t.on("DataLoaded",o=>{n.onProgress?.({loaded:o.length,total:o.length}),this.downloadInfoCapability.resolve(o)}),t.on("StartRenderPage",o=>{if(this.destroyed)return;this.#t.get(o.pageIndex)._startRenderPage(o.transparency,o.cacheKey)}),t.on("commonobj",([o,u,d])=>{if(!this.destroyed&&!this.commonObjs.has(o))switch(u){case"Font":const f=this._params;if("error"in d){const E=d.error;(0,_util.warn)(`Error during font loading: ${E}`),this.commonObjs.resolve(o,E);break}const v=f.pdfBug&&globalThis.FontInspector?.enabled?(E,C)=>globalThis.FontInspector.fontAdded(E,C):null,w=new _font_loader.FontFaceObject(d,{isEvalSupported:f.isEvalSupported,disableFontFace:f.disableFontFace,ignoreErrors:f.ignoreErrors,inspectFont:v});this.fontLoader.bind(w).catch(E=>t.sendWithPromise("FontFallback",{id:o})).finally(()=>{!f.fontExtraProperties&&w.data&&(w.data=null),this.commonObjs.resolve(o,w)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(o,d);break;default:throw new Error(`Got unknown common object type ${u}`)}}),t.on("obj",([o,u,d,f])=>{if(this.destroyed)return;const v=this.#t.get(u);if(!v.objs.has(o))switch(d){case"Image":if(v.objs.resolve(o,f),f){let w;if(f.bitmap){const{width:E,height:C}=f;w=E*C*4}else w=f.data?.length||0;w>_util.MAX_IMAGE_SIZE_TO_CACHE&&(v._maybeCleanupAfterRender=!0)}break;case"Pattern":v.objs.resolve(o,f);break;default:throw new Error(`Got unknown object type ${d}`)}}),t.on("DocProgress",o=>{this.destroyed||n.onProgress?.({loaded:o.loaded,total:o.total})}),t.on("FetchBuiltInCMap",o=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(o):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),t.on("FetchStandardFontData",o=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(o):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfers:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},n).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const n=t-1,o=this.#n.get(n);if(o)return o;const u=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(d=>{if(this.destroyed)throw new Error("Transport destroyed");const f=new PDFPageProxy(n,d,this,this._params.pdfBug);return this.#t.set(n,f),f});return this.#n.set(n,u),u}getPageIndex(t){return typeof t!="object"||t===null||!Number.isInteger(t.num)||t.num<0||!Number.isInteger(t.gen)||t.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen})}getAnnotations(t,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:n})}getFieldObjects(){return this.#o("GetFieldObjects")}hasJSActions(){return this.#o("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#o("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(t=>new _optional_content_config.OptionalContentConfig(t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",n=this.#e.get(t);if(n)return n;const o=this.messageHandler.sendWithPromise(t,null).then(u=>({info:u[0],metadata:u[1]?new _metadata.Metadata(u[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(t,o),o}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const n of this.#t.values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:t,enableXfa:n}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:t,enableXfa:n})}}class PDFObjects{#e=Object.create(null);#t(t){return this.#e[t]||={capability:new _util.PromiseCapability,data:null}}get(t,n=null){if(n){const u=this.#t(t);return u.capability.promise.then(()=>n(u.data)),null}const o=this.#e[t];if(!o?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return o.data}has(t){return this.#e[t]?.capability.settled||!1}resolve(t,n=null){const o=this.#t(t);o.data=n,o.capability.resolve()}clear(){for(const t in this.#e){const{data:n}=this.#e[t];n?.bitmap?.close()}this.#e=Object.create(null)}}class RenderTask{#e=null;constructor(t){this.#e=t,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(t=0){this.#e.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#e.operatorList;if(!t)return!1;const{annotationCanvasMap:n}=this.#e;return t.form||t.canvas&&n?.size>0}}exports$1.RenderTask=RenderTask;class InternalRenderTask{static#e=new WeakSet;constructor({callback:t,params:n,objs:o,commonObjs:u,annotationCanvasMap:d,operatorList:f,pageIndex:v,canvasFactory:w,filterFactory:E,useRequestAnimationFrame:C=!1,pdfBug:_=!1,pageColors:D=null}){this.callback=t,this.params=n,this.objs=o,this.commonObjs=u,this.annotationCanvasMap=d,this.operatorListIdx=null,this.operatorList=f,this._pageIndex=v,this.canvasFactory=w,this.filterFactory=E,this._pdfBug=_,this.pageColors=D,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=C===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:n}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:o,viewport:u,transform:d,background:f}=this.params;this.gfx=new _canvas.CanvasGraphics(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:d,viewport:u,transparency:t,background:f}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,n=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback(t||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,n))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback())))}}const version="3.11.174";exports$1.version=version;const build="ce8716743";exports$1.build=build}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SerializableEmpty=t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var o=n(1),u=n(4),d=n(8);const f=Object.freeze({map:null,hash:"",transfers:void 0});t.SerializableEmpty=f;class v{#e=!1;#t=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(C,_){const D=this.#t.get(C);return D===void 0?_:Object.assign(_,D)}getRawValue(C){return this.#t.get(C)}remove(C){if(this.#t.delete(C),this.#t.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const _ of this.#t.values())if(_ instanceof u.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(C,_){const D=this.#t.get(C);let O=!1;if(D!==void 0)for(const[M,N]of Object.entries(_))D[M]!==N&&(O=!0,D[M]=N);else O=!0,this.#t.set(C,_);O&&this.#n(),_ instanceof u.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(_.constructor._type)}has(C){return this.#t.has(C)}getAll(){return this.#t.size>0?(0,o.objectFromMap)(this.#t):null}setAll(C){for(const[_,D]of Object.entries(C))this.setValue(_,D)}get size(){return this.#t.size}#n(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new w(this)}get serializable(){if(this.#t.size===0)return f;const C=new Map,_=new d.MurmurHash3_64,D=[],O=Object.create(null);let M=!1;for(const[N,I]of this.#t){const B=I instanceof u.AnnotationEditor?I.serialize(!1,O):I;B&&(C.set(N,B),_.update(`${N}:${JSON.stringify(B)}`),M||=!!B.bitmap)}if(M)for(const N of C.values())N.bitmap&&D.push(N.bitmap);return C.size>0?{map:C,hash:_.hexdigest(),transfers:D}:f}}t.AnnotationStorage=v;class w extends v{#e;constructor(C){super();const{map:_,hash:D,transfers:O}=C.serializable,M=structuredClone(_,O?{transfer:O}:null);this.#e={map:M,hash:D,transfers:O}}get print(){(0,o.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}}t.PrintAnnotationStorage=w}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var o=n(5),u=n(1),d=n(6);class f{#e="";#t=!1;#n=null;#r=null;#o=null;#a=!1;#s=null;#l=this.focusin.bind(this);#c=this.focusout.bind(this);#i=!1;#f=!1;#d=!1;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#h=!1;#p=f._zIndex++;static _borderLineWidth=-1;static _colorManager=new o.ColorManager;static _zIndex=1;static SMALL_EDITOR_SIZE=0;constructor(E){this.constructor===f&&(0,u.unreachable)("Cannot initialize AnnotationEditor."),this.parent=E.parent,this.id=E.id,this.width=this.height=null,this.pageIndex=E.parent.pageIndex,this.name=E.name,this.div=null,this._uiManager=E.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=E.isCentered,this._structTreeParentId=null;const{rotation:C,rawDims:{pageWidth:_,pageHeight:D,pageX:O,pageY:M}}=this.parent.viewport;this.rotation=C,this.pageRotation=(360+C-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[_,D],this.pageTranslation=[O,M];const[N,I]=this.parentDimensions;this.x=E.x/N,this.y=E.y/I,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,u.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(E){const C=new v({id:E.parent.getNextId(),parent:E.parent,uiManager:E._uiManager});C.annotationElementId=E.annotationElementId,C.deleted=!0,C._uiManager.addToAnnotationStorage(C)}static initialize(E,C=null){if(f._l10nPromise||=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(D=>[D,E.get(D)])),C?.strings)for(const D of C.strings)f._l10nPromise.set(D,E.get(D));if(f._borderLineWidth!==-1)return;const _=getComputedStyle(document.documentElement);f._borderLineWidth=parseFloat(_.getPropertyValue("--outline-width"))||0}static updateDefaultParams(E,C){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(E){return!1}static paste(E,C){(0,u.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#h}set _isDraggable(E){this.#h=E,this.div?.classList.toggle("draggable",E)}center(){const[E,C]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*C/(E*2),this.y+=this.width*E/(C*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*C/(E*2),this.y-=this.width*E/(C*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(E){this._uiManager.addCommands(E)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#p}setParent(E){E!==null&&(this.pageIndex=E.pageIndex,this.pageDimensions=E.pageDimensions),this.parent=E}focusin(E){this._focusEventsAllowed&&(this.#i?this.#i=!1:this.parent.setSelected(this))}focusout(E){!this._focusEventsAllowed||!this.isAttachedToDOM||E.relatedTarget?.closest(`#${this.id}`)||(E.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(E,C,_,D){const[O,M]=this.parentDimensions;[_,D]=this.screenToPageTranslation(_,D),this.x=(E+_)/O,this.y=(C+D)/M,this.fixAndSetPosition()}#v([E,C],_,D){[_,D]=this.screenToPageTranslation(_,D),this.x+=_/E,this.y+=D/C,this.fixAndSetPosition()}translate(E,C){this.#v(this.parentDimensions,E,C)}translateInPage(E,C){this.#v(this.pageDimensions,E,C),this.div.scrollIntoView({block:"nearest"})}drag(E,C){const[_,D]=this.parentDimensions;if(this.x+=E/_,this.y+=C/D,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:B,y:V}=this.div.getBoundingClientRect();this.parent.findNewParent(this,B,V)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:O,y:M}=this;const[N,I]=this.#m();O+=N,M+=I,this.div.style.left=`${(100*O).toFixed(2)}%`,this.div.style.top=`${(100*M).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}#m(){const[E,C]=this.parentDimensions,{_borderLineWidth:_}=f,D=_/E,O=_/C;switch(this.rotation){case 90:return[-D,O];case 180:return[D,O];case 270:return[D,-O];default:return[-D,-O]}}fixAndSetPosition(){const[E,C]=this.pageDimensions;let{x:_,y:D,width:O,height:M}=this;switch(O*=E,M*=C,_*=E,D*=C,this.rotation){case 0:_=Math.max(0,Math.min(E-O,_)),D=Math.max(0,Math.min(C-M,D));break;case 90:_=Math.max(0,Math.min(E-M,_)),D=Math.min(C,Math.max(O,D));break;case 180:_=Math.min(E,Math.max(O,_)),D=Math.min(C,Math.max(M,D));break;case 270:_=Math.min(E,Math.max(M,_)),D=Math.max(0,Math.min(C-O,D));break}this.x=_/=E,this.y=D/=C;const[N,I]=this.#m();_+=N,D+=I;const{style:B}=this.div;B.left=`${(100*_).toFixed(2)}%`,B.top=`${(100*D).toFixed(2)}%`,this.moveInDOM()}static#g(E,C,_){switch(_){case 90:return[C,-E];case 180:return[-E,-C];case 270:return[-C,E];default:return[E,C]}}screenToPageTranslation(E,C){return f.#g(E,C,this.parentRotation)}pageTranslationToScreen(E,C){return f.#g(E,C,360-this.parentRotation)}#u(E){switch(E){case 90:{const[C,_]=this.pageDimensions;return[0,-C/_,_/C,0]}case 180:return[-1,0,0,-1];case 270:{const[C,_]=this.pageDimensions;return[0,C/_,-_/C,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:E,pageDimensions:[C,_]}=this,D=C*E,O=_*E;return u.FeatureTest.isCSSRoundSupported?[Math.round(D),Math.round(O)]:[D,O]}setDims(E,C){const[_,D]=this.parentDimensions;this.div.style.width=`${(100*E/_).toFixed(2)}%`,this.#a||(this.div.style.height=`${(100*C/D).toFixed(2)}%`),this.#n?.classList.toggle("small",E<f.SMALL_EDITOR_SIZE||C<f.SMALL_EDITOR_SIZE)}fixDims(){const{style:E}=this.div,{height:C,width:_}=E,D=_.endsWith("%"),O=!this.#a&&C.endsWith("%");if(D&&O)return;const[M,N]=this.parentDimensions;D||(E.width=`${(100*parseFloat(_)/M).toFixed(2)}%`),!this.#a&&!O&&(E.height=`${(100*parseFloat(C)/N).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#y(){if(this.#s)return;this.#s=document.createElement("div"),this.#s.classList.add("resizers");const E=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||E.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const C of E){const _=document.createElement("div");this.#s.append(_),_.classList.add("resizer",C),_.addEventListener("pointerdown",this.#x.bind(this,C)),_.addEventListener("contextmenu",d.noContextMenu)}this.div.prepend(this.#s)}#x(E,C){C.preventDefault();const{isMac:_}=u.FeatureTest.platform;if(C.button!==0||C.ctrlKey&&_)return;const D=this.#w.bind(this,E),O=this._isDraggable;this._isDraggable=!1;const M={passive:!0,capture:!0};window.addEventListener("pointermove",D,M);const N=this.x,I=this.y,B=this.width,V=this.height,j=this.parent.div.style.cursor,q=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(C.target).cursor;const z=()=>{this._isDraggable=O,window.removeEventListener("pointerup",z),window.removeEventListener("blur",z),window.removeEventListener("pointermove",D,M),this.parent.div.style.cursor=j,this.div.style.cursor=q;const $=this.x,ee=this.y,ie=this.width,ae=this.height;$===N&&ee===I&&ie===B&&ae===V||this.addCommands({cmd:()=>{this.width=ie,this.height=ae,this.x=$,this.y=ee;const[pe,he]=this.parentDimensions;this.setDims(pe*ie,he*ae),this.fixAndSetPosition()},undo:()=>{this.width=B,this.height=V,this.x=N,this.y=I;const[pe,he]=this.parentDimensions;this.setDims(pe*B,he*V),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",z),window.addEventListener("blur",z)}#w(E,C){const[_,D]=this.parentDimensions,O=this.x,M=this.y,N=this.width,I=this.height,B=f.MIN_SIZE/_,V=f.MIN_SIZE/D,j=fe=>Math.round(fe*1e4)/1e4,q=this.#u(this.rotation),z=(fe,X)=>[q[0]*fe+q[2]*X,q[1]*fe+q[3]*X],$=this.#u(360-this.rotation),ee=(fe,X)=>[$[0]*fe+$[2]*X,$[1]*fe+$[3]*X];let ie,ae,pe=!1,he=!1;switch(E){case"topLeft":pe=!0,ie=(fe,X)=>[0,0],ae=(fe,X)=>[fe,X];break;case"topMiddle":ie=(fe,X)=>[fe/2,0],ae=(fe,X)=>[fe/2,X];break;case"topRight":pe=!0,ie=(fe,X)=>[fe,0],ae=(fe,X)=>[0,X];break;case"middleRight":he=!0,ie=(fe,X)=>[fe,X/2],ae=(fe,X)=>[0,X/2];break;case"bottomRight":pe=!0,ie=(fe,X)=>[fe,X],ae=(fe,X)=>[0,0];break;case"bottomMiddle":ie=(fe,X)=>[fe/2,X],ae=(fe,X)=>[fe/2,0];break;case"bottomLeft":pe=!0,ie=(fe,X)=>[0,X],ae=(fe,X)=>[fe,0];break;case"middleLeft":he=!0,ie=(fe,X)=>[0,X/2],ae=(fe,X)=>[fe,X/2];break}const be=ie(N,I),xe=ae(N,I);let Ee=z(...xe);const we=j(O+Ee[0]),oe=j(M+Ee[1]);let se=1,J=1,[Q,Z]=this.screenToPageTranslation(C.movementX,C.movementY);if([Q,Z]=ee(Q/_,Z/D),pe){const fe=Math.hypot(N,I);se=J=Math.max(Math.min(Math.hypot(xe[0]-be[0]-Q,xe[1]-be[1]-Z)/fe,1/N,1/I),B/N,V/I)}else he?se=Math.max(B,Math.min(1,Math.abs(xe[0]-be[0]-Q)))/N:J=Math.max(V,Math.min(1,Math.abs(xe[1]-be[1]-Z)))/I;const K=j(N*se),ne=j(I*J);Ee=z(...ae(K,ne));const ue=we-Ee[0],ye=oe-Ee[1];this.width=K,this.height=ne,this.x=ue,this.y=ye,this.setDims(_*K,D*ne),this.fixAndSetPosition()}async addAltTextButton(){if(this.#n)return;const E=this.#n=document.createElement("button");E.className="altText";const C=await f._l10nPromise.get("editor_alt_text_button_label");E.textContent=C,E.setAttribute("aria-label",C),E.tabIndex="0",E.addEventListener("contextmenu",d.noContextMenu),E.addEventListener("pointerdown",_=>_.stopPropagation()),E.addEventListener("click",_=>{_.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),E.addEventListener("keydown",_=>{_.target===E&&_.key==="Enter"&&(_.preventDefault(),this._uiManager.editAltText(this))}),this.#_(),this.div.append(E),f.SMALL_EDITOR_SIZE||(f.SMALL_EDITOR_SIZE=Math.min(128,Math.round(E.getBoundingClientRect().width*1.4)))}async#_(){const E=this.#n;if(!E)return;if(!this.#e&&!this.#t){E.classList.remove("done"),this.#r?.remove();return}f._l10nPromise.get("editor_alt_text_edit_button_label").then(_=>{E.setAttribute("aria-label",_)});let C=this.#r;if(!C){this.#r=C=document.createElement("span"),C.className="tooltip",C.setAttribute("role","tooltip");const _=C.id=`alt-text-tooltip-${this.id}`;E.setAttribute("aria-describedby",_);const D=100;E.addEventListener("mouseenter",()=>{this.#o=setTimeout(()=>{this.#o=null,this.#r.classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},D)}),E.addEventListener("mouseleave",()=>{clearTimeout(this.#o),this.#o=null,this.#r?.classList.remove("show")})}E.classList.add("done"),C.innerText=this.#t?await f._l10nPromise.get("editor_alt_text_decorative_tooltip"):this.#e,C.parentNode||E.append(C)}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:this.#e,decorative:this.#t}}set altTextData({altText:E,decorative:C}){this.#e===E&&this.#t===C||(this.#e=E,this.#t=C,this.#_())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#l),this.div.addEventListener("focusout",this.#c);const[E,C]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*C/E).toFixed(2)}%`,this.div.style.maxHeight=`${(100*E/C).toFixed(2)}%`);const[_,D]=this.getInitialTranslation();return this.translate(_,D),(0,o.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(E){const{isMac:C}=u.FeatureTest.platform;if(E.button!==0||E.ctrlKey&&C){E.preventDefault();return}this.#i=!0,this.#T(E)}#T(E){if(!this._isDraggable)return;const C=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let _,D;C&&(_={passive:!0,capture:!0},D=M=>{const[N,I]=this.screenToPageTranslation(M.movementX,M.movementY);this._uiManager.dragSelectedEditors(N,I)},window.addEventListener("pointermove",D,_));const O=()=>{if(window.removeEventListener("pointerup",O),window.removeEventListener("blur",O),C&&window.removeEventListener("pointermove",D,_),this.#i=!1,!this._uiManager.endDragSession()){const{isMac:M}=u.FeatureTest.platform;E.ctrlKey&&!M||E.shiftKey||E.metaKey&&M?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",O),window.addEventListener("blur",O)}moveInDOM(){this.parent?.moveEditorInDOM(this)}_setParentAndPosition(E,C,_){E.changeParent(this),this.x=C,this.y=_,this.fixAndSetPosition()}getRect(E,C){const _=this.parentScale,[D,O]=this.pageDimensions,[M,N]=this.pageTranslation,I=E/_,B=C/_,V=this.x*D,j=this.y*O,q=this.width*D,z=this.height*O;switch(this.rotation){case 0:return[V+I+M,O-j-B-z+N,V+I+q+M,O-j-B+N];case 90:return[V+B+M,O-j+I+N,V+B+z+M,O-j+I+q+N];case 180:return[V-I-q+M,O-j+B+N,V-I+M,O-j+B+z+N];case 270:return[V-B-z+M,O-j-I-q+N,V-B+M,O-j-I+N];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(E,C){const[_,D,O,M]=E,N=O-_,I=M-D;switch(this.rotation){case 0:return[_,C-M,N,I];case 90:return[_,C-D,I,N];case 180:return[O,C-D,N,I];case 270:return[O,C-M,I,N];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#d=!0}disableEditMode(){this.#d=!1}isInEditMode(){return this.#d}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#l),this.div?.addEventListener("focusout",this.#c)}serialize(E=!1,C=null){(0,u.unreachable)("An editor must be serializable")}static deserialize(E,C,_){const D=new this.prototype.constructor({parent:C,id:C.getNextId(),uiManager:_});D.rotation=E.rotation;const[O,M]=D.pageDimensions,[N,I,B,V]=D.getRectInCurrentCoords(E.rect,M);return D.x=N/O,D.y=I/M,D.width=B/O,D.height=V/M,D}remove(){this.div.removeEventListener("focusin",this.#l),this.div.removeEventListener("focusout",this.#c),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#n?.remove(),this.#n=null,this.#r=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#y(),this.#s.classList.remove("hidden"))}select(){this.makeResizable(),this.div?.classList.add("selectedEditor")}unselect(){this.#s?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(E,C){}disableEditing(){this.#n&&(this.#n.hidden=!0)}enableEditing(){this.#n&&(this.#n.hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return this.#f}set isEditing(E){this.#f=E,this.parent&&(E?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(E,C){this.#a=!0;const _=E/C,{style:D}=this.div;D.aspectRatio=_,D.height="auto"}static get MIN_SIZE(){return 16}}t.AnnotationEditor=f;class v extends f{constructor(E){super(E),this.annotationElementId=E.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=d,t.opacityToHex=f;var o=n(1),u=n(6);function d(O,M,N){for(const I of N)M.addEventListener(I,O[I].bind(O))}function f(O){return Math.round(Math.min(255,Math.max(1,255*O))).toString(16).padStart(2,"0")}class v{#e=0;getId(){return`${o.AnnotationEditorPrefix}${this.#e++}`}}class w{#e=(0,o.getUuid)();#t=0;#n=null;static get _isSVGFittingCanvas(){const M='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',I=new OffscreenCanvas(1,3).getContext("2d"),B=new Image;B.src=M;const V=B.decode().then(()=>(I.drawImage(B,0,0,1,1,0,0,1,3),new Uint32Array(I.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,o.shadow)(this,"_isSVGFittingCanvas",V)}async#r(M,N){this.#n||=new Map;let I=this.#n.get(M);if(I===null)return null;if(I?.bitmap)return I.refCounter+=1,I;try{I||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let B;if(typeof N=="string"){I.url=N;const V=await fetch(N);if(!V.ok)throw new Error(V.statusText);B=await V.blob()}else B=I.file=N;if(B.type==="image/svg+xml"){const V=w._isSVGFittingCanvas,j=new FileReader,q=new Image,z=new Promise(($,ee)=>{q.onload=()=>{I.bitmap=q,I.isSvg=!0,$()},j.onload=async()=>{const ie=I.svgUrl=j.result;q.src=await V?`${ie}#svgView(preserveAspectRatio(none))`:ie},q.onerror=j.onerror=ee});j.readAsDataURL(B),await z}else I.bitmap=await createImageBitmap(B);I.refCounter=1}catch(B){console.error(B),I=null}return this.#n.set(M,I),I&&this.#n.set(I.id,I),I}async getFromFile(M){const{lastModified:N,name:I,size:B,type:V}=M;return this.#r(`${N}_${I}_${B}_${V}`,M)}async getFromUrl(M){return this.#r(M,M)}async getFromId(M){this.#n||=new Map;const N=this.#n.get(M);return N?N.bitmap?(N.refCounter+=1,N):N.file?this.getFromFile(N.file):this.getFromUrl(N.url):null}getSvgUrl(M){const N=this.#n.get(M);return N?.isSvg?N.svgUrl:null}deleteId(M){this.#n||=new Map;const N=this.#n.get(M);N&&(N.refCounter-=1,N.refCounter===0&&(N.bitmap=null))}isValidId(M){return M.startsWith(`image_${this.#e}_`)}}class E{#e=[];#t=!1;#n;#r=-1;constructor(M=128){this.#n=M}add({cmd:M,undo:N,mustExec:I,type:B=NaN,overwriteIfSameType:V=!1,keepUndo:j=!1}){if(I&&M(),this.#t)return;const q={cmd:M,undo:N,type:B};if(this.#r===-1){this.#e.length>0&&(this.#e.length=0),this.#r=0,this.#e.push(q);return}if(V&&this.#e[this.#r].type===B){j&&(q.undo=this.#e[this.#r].undo),this.#e[this.#r]=q;return}const z=this.#r+1;z===this.#n?this.#e.splice(0,1):(this.#r=z,z<this.#e.length&&this.#e.splice(z)),this.#e.push(q)}undo(){this.#r!==-1&&(this.#t=!0,this.#e[this.#r].undo(),this.#t=!1,this.#r-=1)}redo(){this.#r<this.#e.length-1&&(this.#r+=1,this.#t=!0,this.#e[this.#r].cmd(),this.#t=!1)}hasSomethingToUndo(){return this.#r!==-1}hasSomethingToRedo(){return this.#r<this.#e.length-1}destroy(){this.#e=null}}t.CommandManager=E;class C{constructor(M){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:N}=o.FeatureTest.platform;for(const[I,B,V={}]of M)for(const j of I){const q=j.startsWith("mac+");N&&q?(this.callbacks.set(j.slice(4),{callback:B,options:V}),this.allKeys.add(j.split("+").at(-1))):!N&&!q&&(this.callbacks.set(j,{callback:B,options:V}),this.allKeys.add(j.split("+").at(-1)))}}#e(M){M.altKey&&this.buffer.push("alt"),M.ctrlKey&&this.buffer.push("ctrl"),M.metaKey&&this.buffer.push("meta"),M.shiftKey&&this.buffer.push("shift"),this.buffer.push(M.key);const N=this.buffer.join("+");return this.buffer.length=0,N}exec(M,N){if(!this.allKeys.has(N.key))return;const I=this.callbacks.get(this.#e(N));if(!I)return;const{callback:B,options:{bubbles:V=!1,args:j=[],checker:q=null}}=I;q&&!q(M,N)||(B.bind(M,...j)(),V||(N.stopPropagation(),N.preventDefault()))}}t.KeyboardManager=C;class _{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const M=new Map([["CanvasText",null],["Canvas",null]]);return(0,u.getColorValues)(M),(0,o.shadow)(this,"_colors",M)}convert(M){const N=(0,u.getRGB)(M);if(!window.matchMedia("(forced-colors: active)").matches)return N;for(const[I,B]of this._colors)if(B.every((V,j)=>V===N[j]))return _._colorsMapping.get(I);return N}getHexCode(M){const N=this._colors.get(M);return N?o.Util.makeHexColor(...N):M}}t.ColorManager=_;class D{#e=null;#t=new Map;#n=new Map;#r=null;#o=null;#a=new E;#s=0;#l=new Set;#c=null;#i=null;#f=new Set;#d=null;#h=new v;#p=!1;#v=!1;#m=null;#g=o.AnnotationEditorType.NONE;#u=new Set;#y=null;#x=this.blur.bind(this);#w=this.focus.bind(this);#_=this.copy.bind(this);#T=this.cut.bind(this);#L=this.paste.bind(this);#N=this.keydown.bind(this);#I=this.onEditingAction.bind(this);#C=this.onPageChanging.bind(this);#F=this.onScaleChanging.bind(this);#D=this.onRotationChanging.bind(this);#P={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#b=[0,0];#R=null;#E=null;#k=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const M=D.prototype,N=V=>{const{activeElement:j}=document;return j&&V.#E.contains(j)&&V.hasSomethingToControl()},I=this.TRANSLATE_SMALL,B=this.TRANSLATE_BIG;return(0,o.shadow)(this,"_keyboardManager",new C([[["ctrl+a","mac+meta+a"],M.selectAll],[["ctrl+z","mac+meta+z"],M.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],M.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],M.delete],[["Escape","mac+Escape"],M.unselectAll],[["ArrowLeft","mac+ArrowLeft"],M.translateSelectedEditors,{args:[-I,0],checker:N}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],M.translateSelectedEditors,{args:[-B,0],checker:N}],[["ArrowRight","mac+ArrowRight"],M.translateSelectedEditors,{args:[I,0],checker:N}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],M.translateSelectedEditors,{args:[B,0],checker:N}],[["ArrowUp","mac+ArrowUp"],M.translateSelectedEditors,{args:[0,-I],checker:N}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],M.translateSelectedEditors,{args:[0,-B],checker:N}],[["ArrowDown","mac+ArrowDown"],M.translateSelectedEditors,{args:[0,I],checker:N}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],M.translateSelectedEditors,{args:[0,B],checker:N}]]))}constructor(M,N,I,B,V,j){this.#E=M,this.#k=N,this.#r=I,this._eventBus=B,this._eventBus._on("editingaction",this.#I),this._eventBus._on("pagechanging",this.#C),this._eventBus._on("scalechanging",this.#F),this._eventBus._on("rotationchanging",this.#D),this.#o=V.annotationStorage,this.#d=V.filterFactory,this.#y=j,this.viewParameters={realScale:u.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#M(),this.#H(),this._eventBus._off("editingaction",this.#I),this._eventBus._off("pagechanging",this.#C),this._eventBus._off("scalechanging",this.#F),this._eventBus._off("rotationchanging",this.#D);for(const M of this.#n.values())M.destroy();this.#n.clear(),this.#t.clear(),this.#f.clear(),this.#e=null,this.#u.clear(),this.#a.destroy(),this.#r.destroy()}get hcmFilter(){return(0,o.shadow)(this,"hcmFilter",this.#y?this.#d.addHCMFilter(this.#y.foreground,this.#y.background):"none")}get direction(){return(0,o.shadow)(this,"direction",getComputedStyle(this.#E).direction)}editAltText(M){this.#r?.editAltText(this,M)}onPageChanging({pageNumber:M}){this.#s=M-1}focusMainContainer(){this.#E.focus()}findParent(M,N){for(const I of this.#n.values()){const{x:B,y:V,width:j,height:q}=I.div.getBoundingClientRect();if(M>=B&&M<=B+j&&N>=V&&N<=V+q)return I}return null}disableUserSelect(M=!1){this.#k.classList.toggle("noUserSelect",M)}addShouldRescale(M){this.#f.add(M)}removeShouldRescale(M){this.#f.delete(M)}onScaleChanging({scale:M}){this.commitOrRemove(),this.viewParameters.realScale=M*u.PixelsPerInch.PDF_TO_CSS_UNITS;for(const N of this.#f)N.onScaleChanging()}onRotationChanging({pagesRotation:M}){this.commitOrRemove(),this.viewParameters.rotation=M}addToAnnotationStorage(M){!M.isEmpty()&&this.#o&&!this.#o.has(M.id)&&this.#o.setValue(M.id,M)}#B(){window.addEventListener("focus",this.#w),window.addEventListener("blur",this.#x)}#H(){window.removeEventListener("focus",this.#w),window.removeEventListener("blur",this.#x)}blur(){if(!this.hasSelection)return;const{activeElement:M}=document;for(const N of this.#u)if(N.div.contains(M)){this.#m=[N,M],N._focusEventsAllowed=!1;break}}focus(){if(!this.#m)return;const[M,N]=this.#m;this.#m=null,N.addEventListener("focusin",()=>{M._focusEventsAllowed=!0},{once:!0}),N.focus()}#G(){window.addEventListener("keydown",this.#N,{capture:!0})}#M(){window.removeEventListener("keydown",this.#N,{capture:!0})}#O(){document.addEventListener("copy",this.#_),document.addEventListener("cut",this.#T),document.addEventListener("paste",this.#L)}#A(){document.removeEventListener("copy",this.#_),document.removeEventListener("cut",this.#T),document.removeEventListener("paste",this.#L)}addEditListeners(){this.#G(),this.#O()}removeEditListeners(){this.#M(),this.#A()}copy(M){if(M.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const N=[];for(const I of this.#u){const B=I.serialize(!0);B&&N.push(B)}N.length!==0&&M.clipboardData.setData("application/pdfjs",JSON.stringify(N))}cut(M){this.copy(M),this.delete()}paste(M){M.preventDefault();const{clipboardData:N}=M;for(const V of N.items)for(const j of this.#i)if(j.isHandlingMimeForPasting(V.type)){j.paste(V,this.currentLayer);return}let I=N.getData("application/pdfjs");if(!I)return;try{I=JSON.parse(I)}catch(V){(0,o.warn)(`paste: "${V.message}".`);return}if(!Array.isArray(I))return;this.unselectAll();const B=this.currentLayer;try{const V=[];for(const z of I){const $=B.deserialize(z);if(!$)return;V.push($)}const j=()=>{for(const z of V)this.#U(z);this.#j(V)},q=()=>{for(const z of V)z.remove()};this.addCommands({cmd:j,undo:q,mustExec:!0})}catch(V){(0,o.warn)(`paste: "${V.message}".`)}}keydown(M){this.getActive()?.shouldGetKeyboardEvents()||D._keyboardManager.exec(this,M)}onEditingAction(M){["undo","redo","delete","selectAll"].includes(M.name)&&this[M.name]()}#S(M){Object.entries(M).some(([I,B])=>this.#P[I]!==B)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#P,M)})}#V(M){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:M})}setEditingState(M){M?(this.#B(),this.#G(),this.#O(),this.#S({isEditing:this.#g!==o.AnnotationEditorType.NONE,isEmpty:this.#z(),hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:this.#a.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#H(),this.#M(),this.#A(),this.#S({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(M){if(!this.#i){this.#i=M;for(const N of this.#i)this.#V(N.defaultPropertiesToUpdate)}}getId(){return this.#h.getId()}get currentLayer(){return this.#n.get(this.#s)}getLayer(M){return this.#n.get(M)}get currentPageIndex(){return this.#s}addLayer(M){this.#n.set(M.pageIndex,M),this.#p?M.enable():M.disable()}removeLayer(M){this.#n.delete(M.pageIndex)}updateMode(M,N=null){if(this.#g!==M){if(this.#g=M,M===o.AnnotationEditorType.NONE){this.setEditingState(!1),this.#$();return}this.setEditingState(!0),this.#W(),this.unselectAll();for(const I of this.#n.values())I.updateMode(M);if(N){for(const I of this.#t.values())if(I.annotationElementId===N){this.setSelected(I),I.enterInEditMode();break}}}}updateToolbar(M){M!==this.#g&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:M})}updateParams(M,N){if(this.#i){if(M===o.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(M);return}for(const I of this.#u)I.updateParams(M,N);for(const I of this.#i)I.updateDefaultParams(M,N)}}enableWaiting(M=!1){if(this.#v!==M){this.#v=M;for(const N of this.#n.values())M?N.disableClick():N.enableClick(),N.div.classList.toggle("waiting",M)}}#W(){if(!this.#p){this.#p=!0;for(const M of this.#n.values())M.enable()}}#$(){if(this.unselectAll(),this.#p){this.#p=!1;for(const M of this.#n.values())M.disable()}}getEditors(M){const N=[];for(const I of this.#t.values())I.pageIndex===M&&N.push(I);return N}getEditor(M){return this.#t.get(M)}addEditor(M){this.#t.set(M.id,M)}removeEditor(M){this.#t.delete(M.id),this.unselect(M),(!M.annotationElementId||!this.#l.has(M.annotationElementId))&&this.#o?.remove(M.id)}addDeletedAnnotationElement(M){this.#l.add(M.annotationElementId),M.deleted=!0}isDeletedAnnotationElement(M){return this.#l.has(M)}removeDeletedAnnotationElement(M){this.#l.delete(M.annotationElementId),M.deleted=!1}#U(M){const N=this.#n.get(M.pageIndex);N?N.addOrRebuild(M):this.addEditor(M)}setActiveEditor(M){this.#e!==M&&(this.#e=M,M&&this.#V(M.propertiesToUpdate))}toggleSelected(M){if(this.#u.has(M)){this.#u.delete(M),M.unselect(),this.#S({hasSelectedEditor:this.hasSelection});return}this.#u.add(M),M.select(),this.#V(M.propertiesToUpdate),this.#S({hasSelectedEditor:!0})}setSelected(M){for(const N of this.#u)N!==M&&N.unselect();this.#u.clear(),this.#u.add(M),M.select(),this.#V(M.propertiesToUpdate),this.#S({hasSelectedEditor:!0})}isSelected(M){return this.#u.has(M)}unselect(M){M.unselect(),this.#u.delete(M),this.#S({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#u.size!==0}undo(){this.#a.undo(),this.#S({hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#z()})}redo(){this.#a.redo(),this.#S({hasSomethingToUndo:!0,hasSomethingToRedo:this.#a.hasSomethingToRedo(),isEmpty:this.#z()})}addCommands(M){this.#a.add(M),this.#S({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#z()})}#z(){if(this.#t.size===0)return!0;if(this.#t.size===1)for(const M of this.#t.values())return M.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const M=[...this.#u],N=()=>{for(const B of M)B.remove()},I=()=>{for(const B of M)this.#U(B)};this.addCommands({cmd:N,undo:I,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#j(M){this.#u.clear();for(const N of M)N.isEmpty()||(this.#u.add(N),N.select());this.#S({hasSelectedEditor:!0})}selectAll(){for(const M of this.#u)M.commit();this.#j(this.#t.values())}unselectAll(){if(this.#e){this.#e.commitOrRemove();return}if(this.hasSelection){for(const M of this.#u)M.unselect();this.#u.clear(),this.#S({hasSelectedEditor:!1})}}translateSelectedEditors(M,N,I=!1){if(I||this.commitOrRemove(),!this.hasSelection)return;this.#b[0]+=M,this.#b[1]+=N;const[B,V]=this.#b,j=[...this.#u],q=1e3;this.#R&&clearTimeout(this.#R),this.#R=setTimeout(()=>{this.#R=null,this.#b[0]=this.#b[1]=0,this.addCommands({cmd:()=>{for(const z of j)this.#t.has(z.id)&&z.translateInPage(B,V)},undo:()=>{for(const z of j)this.#t.has(z.id)&&z.translateInPage(-B,-V)},mustExec:!1})},q);for(const z of j)z.translateInPage(M,N)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#c=new Map;for(const M of this.#u)this.#c.set(M,{savedX:M.x,savedY:M.y,savedPageIndex:M.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#c)return!1;this.disableUserSelect(!1);const M=this.#c;this.#c=null;let N=!1;for(const[{x:B,y:V,pageIndex:j},q]of M)q.newX=B,q.newY=V,q.newPageIndex=j,N||=B!==q.savedX||V!==q.savedY||j!==q.savedPageIndex;if(!N)return!1;const I=(B,V,j,q)=>{if(this.#t.has(B.id)){const z=this.#n.get(q);z?B._setParentAndPosition(z,V,j):(B.pageIndex=q,B.x=V,B.y=j)}};return this.addCommands({cmd:()=>{for(const[B,{newX:V,newY:j,newPageIndex:q}]of M)I(B,V,j,q)},undo:()=>{for(const[B,{savedX:V,savedY:j,savedPageIndex:q}]of M)I(B,V,j,q)},mustExec:!0}),!0}dragSelectedEditors(M,N){if(this.#c)for(const I of this.#c.keys())I.drag(M,N)}rebuild(M){if(M.parent===null){const N=this.getLayer(M.pageIndex);N?(N.changeParent(M),N.addOrRebuild(M)):(this.addEditor(M),this.addToAnnotationStorage(M),M.rebuild())}else M.parent.addOrRebuild(M)}isActive(M){return this.#e===M}getActive(){return this.#e}getMode(){return this.#g}get imageManager(){return(0,o.shadow)(this,"imageManager",new w)}}t.AnnotationEditorUIManager=D}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=void 0,t.deprecated=ee,t.getColorValues=be,t.getCurrentTransform=xe,t.getCurrentTransformInverse=Ee,t.getFilenameFromUrl=B,t.getPdfFilenameFromUrl=V,t.getRGB=he,t.getXfaPageViewport=pe,t.isDataScheme=N,t.isPdfFile=I,t.isValidFetchUrl=q,t.loadScript=$,t.noContextMenu=z,t.setLayerDimensions=we;var o=n(7),u=n(1);const d="http://www.w3.org/2000/svg";class f{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}t.PixelsPerInch=f;class v extends o.BaseFilterFactory{#e;#t;#n;#r;#o;#a;#s;#l;#c;#i;#f=0;constructor({docId:se,ownerDocument:J=globalThis.document}={}){super(),this.#n=se,this.#r=J}get#d(){return this.#e||=new Map}get#h(){if(!this.#t){const se=this.#r.createElement("div"),{style:J}=se;J.visibility="hidden",J.contain="strict",J.width=J.height=0,J.position="absolute",J.top=J.left=0,J.zIndex=-1;const Q=this.#r.createElementNS(d,"svg");Q.setAttribute("width",0),Q.setAttribute("height",0),this.#t=this.#r.createElementNS(d,"defs"),se.append(Q),Q.append(this.#t),this.#r.body.append(se)}return this.#t}addFilter(se){if(!se)return"none";let J=this.#d.get(se);if(J)return J;let Q,Z,K,ne;if(se.length===1){const X=se[0],le=new Array(256);for(let de=0;de<256;de++)le[de]=X[de]/255;ne=Q=Z=K=le.join(",")}else{const[X,le,de]=se,ce=new Array(256),me=new Array(256),Se=new Array(256);for(let Ce=0;Ce<256;Ce++)ce[Ce]=X[Ce]/255,me[Ce]=le[Ce]/255,Se[Ce]=de[Ce]/255;Q=ce.join(","),Z=me.join(","),K=Se.join(","),ne=`${Q}${Z}${K}`}if(J=this.#d.get(ne),J)return this.#d.set(se,J),J;const ue=`g_${this.#n}_transfer_map_${this.#f++}`,ye=`url(#${ue})`;this.#d.set(se,ye),this.#d.set(ne,ye);const fe=this.#v(ue);return this.#g(Q,Z,K,fe),ye}addHCMFilter(se,J){const Q=`${se}-${J}`;if(this.#a===Q)return this.#s;if(this.#a=Q,this.#s="none",this.#o?.remove(),!se||!J)return this.#s;const Z=this.#u(se);se=u.Util.makeHexColor(...Z);const K=this.#u(J);if(J=u.Util.makeHexColor(...K),this.#h.style.color="",se==="#000000"&&J==="#ffffff"||se===J)return this.#s;const ne=new Array(256);for(let le=0;le<=255;le++){const de=le/255;ne[le]=de<=.03928?de/12.92:((de+.055)/1.055)**2.4}const ue=ne.join(","),ye=`g_${this.#n}_hcm_filter`,fe=this.#l=this.#v(ye);this.#g(ue,ue,ue,fe),this.#p(fe);const X=(le,de)=>{const ce=Z[le]/255,me=K[le]/255,Se=new Array(de+1);for(let Ce=0;Ce<=de;Ce++)Se[Ce]=ce+Ce/de*(me-ce);return Se.join(",")};return this.#g(X(0,5),X(1,5),X(2,5),fe),this.#s=`url(#${ye})`,this.#s}addHighlightHCMFilter(se,J,Q,Z){const K=`${se}-${J}-${Q}-${Z}`;if(this.#c===K)return this.#i;if(this.#c=K,this.#i="none",this.#l?.remove(),!se||!J)return this.#i;const[ne,ue]=[se,J].map(this.#u.bind(this));let ye=Math.round(.2126*ne[0]+.7152*ne[1]+.0722*ne[2]),fe=Math.round(.2126*ue[0]+.7152*ue[1]+.0722*ue[2]),[X,le]=[Q,Z].map(this.#u.bind(this));fe<ye&&([ye,fe,X,le]=[fe,ye,le,X]),this.#h.style.color="";const de=(Se,Ce,Te)=>{const je=new Array(256),Oe=(fe-ye)/Te,Ne=Se/255,De=(Ce-Se)/(255*Te);let Be=0;for(let $e=0;$e<=Te;$e++){const Qe=Math.round(ye+$e*Oe),Ye=Ne+$e*De;for(let nt=Be;nt<=Qe;nt++)je[nt]=Ye;Be=Qe+1}for(let $e=Be;$e<256;$e++)je[$e]=je[Be-1];return je.join(",")},ce=`g_${this.#n}_hcm_highlight_filter`,me=this.#l=this.#v(ce);return this.#p(me),this.#g(de(X[0],le[0],5),de(X[1],le[1],5),de(X[2],le[2],5),me),this.#i=`url(#${ce})`,this.#i}destroy(se=!1){se&&(this.#s||this.#i)||(this.#t&&(this.#t.parentNode.parentNode.remove(),this.#t=null),this.#e&&(this.#e.clear(),this.#e=null),this.#f=0)}#p(se){const J=this.#r.createElementNS(d,"feColorMatrix");J.setAttribute("type","matrix"),J.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),se.append(J)}#v(se){const J=this.#r.createElementNS(d,"filter");return J.setAttribute("color-interpolation-filters","sRGB"),J.setAttribute("id",se),this.#h.append(J),J}#m(se,J,Q){const Z=this.#r.createElementNS(d,J);Z.setAttribute("type","discrete"),Z.setAttribute("tableValues",Q),se.append(Z)}#g(se,J,Q,Z){const K=this.#r.createElementNS(d,"feComponentTransfer");Z.append(K),this.#m(K,"feFuncR",se),this.#m(K,"feFuncG",J),this.#m(K,"feFuncB",Q)}#u(se){return this.#h.style.color=se,he(getComputedStyle(this.#h).getPropertyValue("color"))}}t.DOMFilterFactory=v;class w extends o.BaseCanvasFactory{constructor({ownerDocument:se=globalThis.document}={}){super(),this._document=se}_createCanvas(se,J){const Q=this._document.createElement("canvas");return Q.width=se,Q.height=J,Q}}t.DOMCanvasFactory=w;async function E(oe,se=!1){if(q(oe,document.baseURI)){const J=await fetch(oe);if(!J.ok)throw new Error(J.statusText);return se?new Uint8Array(await J.arrayBuffer()):(0,u.stringToBytes)(await J.text())}return new Promise((J,Q)=>{const Z=new XMLHttpRequest;Z.open("GET",oe,!0),se&&(Z.responseType="arraybuffer"),Z.onreadystatechange=()=>{if(Z.readyState===XMLHttpRequest.DONE){if(Z.status===200||Z.status===0){let K;if(se&&Z.response?K=new Uint8Array(Z.response):!se&&Z.responseText&&(K=(0,u.stringToBytes)(Z.responseText)),K){J(K);return}}Q(new Error(Z.statusText))}},Z.send(null)})}class C extends o.BaseCMapReaderFactory{_fetchData(se,J){return E(se,this.isCompressed).then(Q=>({cMapData:Q,compressionType:J}))}}t.DOMCMapReaderFactory=C;class _ extends o.BaseStandardFontDataFactory{_fetchData(se){return E(se,!0)}}t.DOMStandardFontDataFactory=_;class D extends o.BaseSVGFactory{_createSVG(se){return document.createElementNS(d,se)}}t.DOMSVGFactory=D;class O{constructor({viewBox:se,scale:J,rotation:Q,offsetX:Z=0,offsetY:K=0,dontFlip:ne=!1}){this.viewBox=se,this.scale=J,this.rotation=Q,this.offsetX=Z,this.offsetY=K;const ue=(se[2]+se[0])/2,ye=(se[3]+se[1])/2;let fe,X,le,de;switch(Q%=360,Q<0&&(Q+=360),Q){case 180:fe=-1,X=0,le=0,de=1;break;case 90:fe=0,X=1,le=1,de=0;break;case 270:fe=0,X=-1,le=-1,de=0;break;case 0:fe=1,X=0,le=0,de=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}ne&&(le=-le,de=-de);let ce,me,Se,Ce;fe===0?(ce=Math.abs(ye-se[1])*J+Z,me=Math.abs(ue-se[0])*J+K,Se=(se[3]-se[1])*J,Ce=(se[2]-se[0])*J):(ce=Math.abs(ue-se[0])*J+Z,me=Math.abs(ye-se[1])*J+K,Se=(se[2]-se[0])*J,Ce=(se[3]-se[1])*J),this.transform=[fe*J,X*J,le*J,de*J,ce-fe*J*ue-le*J*ye,me-X*J*ue-de*J*ye],this.width=Se,this.height=Ce}get rawDims(){const{viewBox:se}=this;return(0,u.shadow)(this,"rawDims",{pageWidth:se[2]-se[0],pageHeight:se[3]-se[1],pageX:se[0],pageY:se[1]})}clone({scale:se=this.scale,rotation:J=this.rotation,offsetX:Q=this.offsetX,offsetY:Z=this.offsetY,dontFlip:K=!1}={}){return new O({viewBox:this.viewBox.slice(),scale:se,rotation:J,offsetX:Q,offsetY:Z,dontFlip:K})}convertToViewportPoint(se,J){return u.Util.applyTransform([se,J],this.transform)}convertToViewportRectangle(se){const J=u.Util.applyTransform([se[0],se[1]],this.transform),Q=u.Util.applyTransform([se[2],se[3]],this.transform);return[J[0],J[1],Q[0],Q[1]]}convertToPdfPoint(se,J){return u.Util.applyInverseTransform([se,J],this.transform)}}t.PageViewport=O;class M extends u.BaseException{constructor(se,J=0){super(se,"RenderingCancelledException"),this.extraDelay=J}}t.RenderingCancelledException=M;function N(oe){const se=oe.length;let J=0;for(;J<se&&oe[J].trim()==="";)J++;return oe.substring(J,J+5).toLowerCase()==="data:"}function I(oe){return typeof oe=="string"&&/\.pdf$/i.test(oe)}function B(oe,se=!1){return se||([oe]=oe.split(/[#?]/,1)),oe.substring(oe.lastIndexOf("/")+1)}function V(oe,se="document.pdf"){if(typeof oe!="string")return se;if(N(oe))return(0,u.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),se;const J=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Q=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Z=J.exec(oe);let K=Q.exec(Z[1])||Q.exec(Z[2])||Q.exec(Z[3]);if(K&&(K=K[0],K.includes("%")))try{K=Q.exec(decodeURIComponent(K))[0]}catch{}return K||se}class j{started=Object.create(null);times=[];time(se){se in this.started&&(0,u.warn)(`Timer is already running for ${se}`),this.started[se]=Date.now()}timeEnd(se){se in this.started||(0,u.warn)(`Timer has not been started for ${se}`),this.times.push({name:se,start:this.started[se],end:Date.now()}),delete this.started[se]}toString(){const se=[];let J=0;for(const{name:Q}of this.times)J=Math.max(Q.length,J);for(const{name:Q,start:Z,end:K}of this.times)se.push(`${Q.padEnd(J)} ${K-Z}ms
`);return se.join("")}}t.StatTimer=j;function q(oe,se){try{const{protocol:J}=se?new URL(oe,se):new URL(oe);return J==="http:"||J==="https:"}catch{return!1}}function z(oe){oe.preventDefault()}function $(oe,se=!1){return new Promise((J,Q)=>{const Z=document.createElement("script");Z.src=oe,Z.onload=function(K){se&&Z.remove(),J(K)},Z.onerror=function(){Q(new Error(`Cannot load script at: ${Z.src}`))},(document.head||document.documentElement).append(Z)})}function ee(oe){console.log("Deprecated API usage: "+oe)}let ie;class ae{static toDateObject(se){if(!se||typeof se!="string")return null;ie||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const J=ie.exec(se);if(!J)return null;const Q=parseInt(J[1],10);let Z=parseInt(J[2],10);Z=Z>=1&&Z<=12?Z-1:0;let K=parseInt(J[3],10);K=K>=1&&K<=31?K:1;let ne=parseInt(J[4],10);ne=ne>=0&&ne<=23?ne:0;let ue=parseInt(J[5],10);ue=ue>=0&&ue<=59?ue:0;let ye=parseInt(J[6],10);ye=ye>=0&&ye<=59?ye:0;const fe=J[7]||"Z";let X=parseInt(J[8],10);X=X>=0&&X<=23?X:0;let le=parseInt(J[9],10)||0;return le=le>=0&&le<=59?le:0,fe==="-"?(ne+=X,ue+=le):fe==="+"&&(ne-=X,ue-=le),new Date(Date.UTC(Q,Z,K,ne,ue,ye))}}t.PDFDateString=ae;function pe(oe,{scale:se=1,rotation:J=0}){const{width:Q,height:Z}=oe.attributes.style,K=[0,0,parseInt(Q),parseInt(Z)];return new O({viewBox:K,scale:se,rotation:J})}function he(oe){if(oe.startsWith("#")){const se=parseInt(oe.slice(1),16);return[(se&16711680)>>16,(se&65280)>>8,se&255]}return oe.startsWith("rgb(")?oe.slice(4,-1).split(",").map(se=>parseInt(se)):oe.startsWith("rgba(")?oe.slice(5,-1).split(",").map(se=>parseInt(se)).slice(0,3):((0,u.warn)(`Not a valid color format: "${oe}"`),[0,0,0])}function be(oe){const se=document.createElement("span");se.style.visibility="hidden",document.body.append(se);for(const J of oe.keys()){se.style.color=J;const Q=window.getComputedStyle(se).color;oe.set(J,he(Q))}se.remove()}function xe(oe){const{a:se,b:J,c:Q,d:Z,e:K,f:ne}=oe.getTransform();return[se,J,Q,Z,K,ne]}function Ee(oe){const{a:se,b:J,c:Q,d:Z,e:K,f:ne}=oe.getTransform().invertSelf();return[se,J,Q,Z,K,ne]}function we(oe,se,J=!1,Q=!0){if(se instanceof O){const{pageWidth:Z,pageHeight:K}=se.rawDims,{style:ne}=oe,ue=u.FeatureTest.isCSSRoundSupported,ye=`var(--scale-factor) * ${Z}px`,fe=`var(--scale-factor) * ${K}px`,X=ue?`round(${ye}, 1px)`:`calc(${ye})`,le=ue?`round(${fe}, 1px)`:`calc(${fe})`;!J||se.rotation%180===0?(ne.width=X,ne.height=le):(ne.width=le,ne.height=X)}Q&&oe.setAttribute("data-main-rotation",se.rotation)}}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var o=n(1);class u{constructor(){this.constructor===u&&(0,o.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(C){return"none"}addHCMFilter(C,_){return"none"}addHighlightHCMFilter(C,_,D,O){return"none"}destroy(C=!1){}}t.BaseFilterFactory=u;class d{constructor(){this.constructor===d&&(0,o.unreachable)("Cannot initialize BaseCanvasFactory.")}create(C,_){if(C<=0||_<=0)throw new Error("Invalid canvas size");const D=this._createCanvas(C,_);return{canvas:D,context:D.getContext("2d")}}reset(C,_,D){if(!C.canvas)throw new Error("Canvas is not specified");if(_<=0||D<=0)throw new Error("Invalid canvas size");C.canvas.width=_,C.canvas.height=D}destroy(C){if(!C.canvas)throw new Error("Canvas is not specified");C.canvas.width=0,C.canvas.height=0,C.canvas=null,C.context=null}_createCanvas(C,_){(0,o.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=d;class f{constructor({baseUrl:C=null,isCompressed:_=!0}){this.constructor===f&&(0,o.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=C,this.isCompressed=_}async fetch({name:C}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!C)throw new Error("CMap name must be specified.");const _=this.baseUrl+C+(this.isCompressed?".bcmap":""),D=this.isCompressed?o.CMapCompressionType.BINARY:o.CMapCompressionType.NONE;return this._fetchData(_,D).catch(O=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${_}`)})}_fetchData(C,_){(0,o.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=f;class v{constructor({baseUrl:C=null}){this.constructor===v&&(0,o.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=C}async fetch({filename:C}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!C)throw new Error("Font filename must be specified.");const _=`${this.baseUrl}${C}`;return this._fetchData(_).catch(D=>{throw new Error(`Unable to load font data at: ${_}`)})}_fetchData(C){(0,o.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=v;class w{constructor(){this.constructor===w&&(0,o.unreachable)("Cannot initialize BaseSVGFactory.")}create(C,_,D=!1){if(C<=0||_<=0)throw new Error("Invalid SVG dimensions");const O=this._createSVG("svg:svg");return O.setAttribute("version","1.1"),D||(O.setAttribute("width",`${C}px`),O.setAttribute("height",`${_}px`)),O.setAttribute("preserveAspectRatio","none"),O.setAttribute("viewBox",`0 0 ${C} ${_}`),O}createElement(C){if(typeof C!="string")throw new Error("Invalid SVG element type");return this._createSVG(C)}_createSVG(C){(0,o.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=w}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var o=n(1);const u=3285377520,d=4294901760,f=65535;class v{constructor(E){this.h1=E?E&4294967295:u,this.h2=E?E&4294967295:u}update(E){let C,_;if(typeof E=="string"){C=new Uint8Array(E.length*2),_=0;for(let ee=0,ie=E.length;ee<ie;ee++){const ae=E.charCodeAt(ee);ae<=255?C[_++]=ae:(C[_++]=ae>>>8,C[_++]=ae&255)}}else if((0,o.isArrayBuffer)(E))C=E.slice(),_=C.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const D=_>>2,O=_-D*4,M=new Uint32Array(C.buffer,0,D);let N=0,I=0,B=this.h1,V=this.h2;const j=3432918353,q=461845907,z=j&f,$=q&f;for(let ee=0;ee<D;ee++)ee&1?(N=M[ee],N=N*j&d|N*z&f,N=N<<15|N>>>17,N=N*q&d|N*$&f,B^=N,B=B<<13|B>>>19,B=B*5+3864292196):(I=M[ee],I=I*j&d|I*z&f,I=I<<15|I>>>17,I=I*q&d|I*$&f,V^=I,V=V<<13|V>>>19,V=V*5+3864292196);switch(N=0,O){case 3:N^=C[D*4+2]<<16;case 2:N^=C[D*4+1]<<8;case 1:N^=C[D*4],N=N*j&d|N*z&f,N=N<<15|N>>>17,N=N*q&d|N*$&f,D&1?B^=N:V^=N}this.h1=B,this.h2=V}hexdigest(){let E=this.h1,C=this.h2;return E^=C>>>1,E=E*3981806797&d|E*36045&f,C=C*4283543511&d|((C<<16|E>>>16)*2950163797&d)>>>16,E^=C>>>1,E=E*444984403&d|E*60499&f,C=C*3301882366&d|((C<<16|E>>>16)*3120437893&d)>>>16,E^=C>>>1,(E>>>0).toString(16).padStart(8,"0")+(C>>>0).toString(16).padStart(8,"0")}}t.MurmurHash3_64=v}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var o=n(1);class u{#e=new Set;constructor({ownerDocument:v=globalThis.document,styleElement:w=null}){this._document=v,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(v){this.nativeFontFaces.add(v),this._document.fonts.add(v)}removeNativeFontFace(v){this.nativeFontFaces.delete(v),this._document.fonts.delete(v)}insertRule(v){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const w=this.styleElement.sheet;w.insertRule(v,w.cssRules.length)}clear(){for(const v of this.nativeFontFaces)this._document.fonts.delete(v);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(v){if(!(!v||this.#e.has(v.loadedName))){if((0,o.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:w,src:E,style:C}=v,_=new FontFace(w,E,C);this.addNativeFontFace(_);try{await _.load(),this.#e.add(w)}catch{(0,o.warn)(`Cannot load system font: ${v.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(_)}return}(0,o.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(v){if(v.attached||v.missingFile&&!v.systemFontInfo)return;if(v.attached=!0,v.systemFontInfo){await this.loadSystemFont(v.systemFontInfo);return}if(this.isFontLoadingAPISupported){const E=v.createNativeFontFace();if(E){this.addNativeFontFace(E);try{await E.loaded}catch(C){throw(0,o.warn)(`Failed to load font '${E.family}': '${C}'.`),v.disableFontFace=!0,C}}return}const w=v.createFontFaceRule();if(w){if(this.insertRule(w),this.isSyncFontLoadingSupported)return;await new Promise(E=>{const C=this._queueLoadingCallback(E);this._prepareFontLoadEvent(v,C)})}}get isFontLoadingAPISupported(){const v=!!this._document?.fonts;return(0,o.shadow)(this,"isFontLoadingAPISupported",v)}get isSyncFontLoadingSupported(){let v=!1;return(o.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(v=!0),(0,o.shadow)(this,"isSyncFontLoadingSupported",v)}_queueLoadingCallback(v){function w(){for((0,o.assert)(!C.done,"completeRequest() cannot be called twice."),C.done=!0;E.length>0&&E[0].done;){const _=E.shift();setTimeout(_.callback,0)}}const{loadingRequests:E}=this,C={done:!1,complete:w,callback:v};return E.push(C),C}get _loadTestFont(){const v=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,o.shadow)(this,"_loadTestFont",v)}_prepareFontLoadEvent(v,w){function E(pe,he){return pe.charCodeAt(he)<<24|pe.charCodeAt(he+1)<<16|pe.charCodeAt(he+2)<<8|pe.charCodeAt(he+3)&255}function C(pe,he,be,xe){const Ee=pe.substring(0,he),we=pe.substring(he+be);return Ee+xe+we}let _,D;const O=this._document.createElement("canvas");O.width=1,O.height=1;const M=O.getContext("2d");let N=0;function I(pe,he){if(++N>30){(0,o.warn)("Load test font never loaded."),he();return}if(M.font="30px "+pe,M.fillText(".",0,20),M.getImageData(0,0,1,1).data[3]>0){he();return}setTimeout(I.bind(null,pe,he))}const B=`lt${Date.now()}${this.loadTestFontId++}`;let V=this._loadTestFont;V=C(V,976,B.length,B);const q=16,z=1482184792;let $=E(V,q);for(_=0,D=B.length-3;_<D;_+=4)$=$-z+E(B,_)|0;_<B.length&&($=$-z+E(B+"XXX",_)|0),V=C(V,q,4,(0,o.string32)($));const ee=`url(data:font/opentype;base64,${btoa(V)});`,ie=`@font-face {font-family:"${B}";src:${ee}}`;this.insertRule(ie);const ae=this._document.createElement("div");ae.style.visibility="hidden",ae.style.width=ae.style.height="10px",ae.style.position="absolute",ae.style.top=ae.style.left="0px";for(const pe of[v.loadedName,B]){const he=this._document.createElement("span");he.textContent="Hi",he.style.fontFamily=pe,ae.append(he)}this._document.body.append(ae),I(B,()=>{ae.remove(),w.complete()})}}t.FontLoader=u;class d{constructor(v,{isEvalSupported:w=!0,disableFontFace:E=!1,ignoreErrors:C=!1,inspectFont:_=null}){this.compiledGlyphs=Object.create(null);for(const D in v)this[D]=v[D];this.isEvalSupported=w!==!1,this.disableFontFace=E===!0,this.ignoreErrors=C===!0,this._inspectFont=_}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let v;if(!this.cssFontInfo)v=new FontFace(this.loadedName,this.data,{});else{const w={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(w.style=`oblique ${this.cssFontInfo.italicAngle}deg`),v=new FontFace(this.cssFontInfo.fontFamily,this.data,w)}return this._inspectFont?.(this),v}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const v=(0,o.bytesToString)(this.data),w=`url(data:${this.mimetype};base64,${btoa(v)});`;let E;if(!this.cssFontInfo)E=`@font-face {font-family:"${this.loadedName}";src:${w}}`;else{let C=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(C+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),E=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${C}src:${w}}`}return this._inspectFont?.(this,w),E}getPathGenerator(v,w){if(this.compiledGlyphs[w]!==void 0)return this.compiledGlyphs[w];let E;try{E=v.get(this.loadedName+"_path_"+w)}catch(C){if(!this.ignoreErrors)throw C;return(0,o.warn)(`getPathGenerator - ignoring character: "${C}".`),this.compiledGlyphs[w]=function(_,D){}}if(this.isEvalSupported&&o.FeatureTest.isEvalSupported){const C=[];for(const _ of E){const D=_.args!==void 0?_.args.join(","):"";C.push("c.",_.cmd,"(",D,`);
`)}return this.compiledGlyphs[w]=new Function("c","size",C.join(""))}return this.compiledGlyphs[w]=function(C,_){for(const D of E)D.cmd==="scale"&&(D.args=[_,-_]),C[D.cmd].apply(C,D.args)}}}t.FontFaceObject=d}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var o=n(7);n(1);const u=function(E){return new Promise((C,_)=>{require$$5.readFile(E,(O,M)=>{if(O||!M){_(new Error(O));return}C(new Uint8Array(M))})})};class d extends o.BaseFilterFactory{}t.NodeFilterFactory=d;class f extends o.BaseCanvasFactory{_createCanvas(C,_){return require$$5.createCanvas(C,_)}}t.NodeCanvasFactory=f;class v extends o.BaseCMapReaderFactory{_fetchData(C,_){return u(C).then(D=>({cMapData:D,compressionType:_}))}}t.NodeCMapReaderFactory=v;class w extends o.BaseStandardFontDataFactory{_fetchData(C){return u(C)}}t.NodeStandardFontDataFactory=w}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var o=n(1),u=n(6),d=n(12),f=n(13);const v=16,w=100,E=4096,C=15,_=10,D=1e3,O=16;function M(J,Q){if(J._removeMirroring)throw new Error("Context is already forwarding operations.");J.__originalSave=J.save,J.__originalRestore=J.restore,J.__originalRotate=J.rotate,J.__originalScale=J.scale,J.__originalTranslate=J.translate,J.__originalTransform=J.transform,J.__originalSetTransform=J.setTransform,J.__originalResetTransform=J.resetTransform,J.__originalClip=J.clip,J.__originalMoveTo=J.moveTo,J.__originalLineTo=J.lineTo,J.__originalBezierCurveTo=J.bezierCurveTo,J.__originalRect=J.rect,J.__originalClosePath=J.closePath,J.__originalBeginPath=J.beginPath,J._removeMirroring=()=>{J.save=J.__originalSave,J.restore=J.__originalRestore,J.rotate=J.__originalRotate,J.scale=J.__originalScale,J.translate=J.__originalTranslate,J.transform=J.__originalTransform,J.setTransform=J.__originalSetTransform,J.resetTransform=J.__originalResetTransform,J.clip=J.__originalClip,J.moveTo=J.__originalMoveTo,J.lineTo=J.__originalLineTo,J.bezierCurveTo=J.__originalBezierCurveTo,J.rect=J.__originalRect,J.closePath=J.__originalClosePath,J.beginPath=J.__originalBeginPath,delete J._removeMirroring},J.save=function(){Q.save(),this.__originalSave()},J.restore=function(){Q.restore(),this.__originalRestore()},J.translate=function(K,ne){Q.translate(K,ne),this.__originalTranslate(K,ne)},J.scale=function(K,ne){Q.scale(K,ne),this.__originalScale(K,ne)},J.transform=function(K,ne,ue,ye,fe,X){Q.transform(K,ne,ue,ye,fe,X),this.__originalTransform(K,ne,ue,ye,fe,X)},J.setTransform=function(K,ne,ue,ye,fe,X){Q.setTransform(K,ne,ue,ye,fe,X),this.__originalSetTransform(K,ne,ue,ye,fe,X)},J.resetTransform=function(){Q.resetTransform(),this.__originalResetTransform()},J.rotate=function(K){Q.rotate(K),this.__originalRotate(K)},J.clip=function(K){Q.clip(K),this.__originalClip(K)},J.moveTo=function(Z,K){Q.moveTo(Z,K),this.__originalMoveTo(Z,K)},J.lineTo=function(Z,K){Q.lineTo(Z,K),this.__originalLineTo(Z,K)},J.bezierCurveTo=function(Z,K,ne,ue,ye,fe){Q.bezierCurveTo(Z,K,ne,ue,ye,fe),this.__originalBezierCurveTo(Z,K,ne,ue,ye,fe)},J.rect=function(Z,K,ne,ue){Q.rect(Z,K,ne,ue),this.__originalRect(Z,K,ne,ue)},J.closePath=function(){Q.closePath(),this.__originalClosePath()},J.beginPath=function(){Q.beginPath(),this.__originalBeginPath()}}class N{constructor(Q){this.canvasFactory=Q,this.cache=Object.create(null)}getCanvas(Q,Z,K){let ne;return this.cache[Q]!==void 0?(ne=this.cache[Q],this.canvasFactory.reset(ne,Z,K)):(ne=this.canvasFactory.create(Z,K),this.cache[Q]=ne),ne}delete(Q){delete this.cache[Q]}clear(){for(const Q in this.cache){const Z=this.cache[Q];this.canvasFactory.destroy(Z),delete this.cache[Q]}}}function I(J,Q,Z,K,ne,ue,ye,fe,X,le){const[de,ce,me,Se,Ce,Te]=(0,u.getCurrentTransform)(J);if(ce===0&&me===0){const Ne=ye*de+Ce,De=Math.round(Ne),Be=fe*Se+Te,$e=Math.round(Be),Qe=(ye+X)*de+Ce,Ye=Math.abs(Math.round(Qe)-De)||1,nt=(fe+le)*Se+Te,rt=Math.abs(Math.round(nt)-$e)||1;return J.setTransform(Math.sign(de),0,0,Math.sign(Se),De,$e),J.drawImage(Q,Z,K,ne,ue,0,0,Ye,rt),J.setTransform(de,ce,me,Se,Ce,Te),[Ye,rt]}if(de===0&&Se===0){const Ne=fe*me+Ce,De=Math.round(Ne),Be=ye*ce+Te,$e=Math.round(Be),Qe=(fe+le)*me+Ce,Ye=Math.abs(Math.round(Qe)-De)||1,nt=(ye+X)*ce+Te,rt=Math.abs(Math.round(nt)-$e)||1;return J.setTransform(0,Math.sign(ce),Math.sign(me),0,De,$e),J.drawImage(Q,Z,K,ne,ue,0,0,rt,Ye),J.setTransform(de,ce,me,Se,Ce,Te),[rt,Ye]}J.drawImage(Q,Z,K,ne,ue,ye,fe,X,le);const je=Math.hypot(de,ce),Oe=Math.hypot(me,Se);return[je*X,Oe*le]}function B(J){const{width:Q,height:Z}=J;if(Q>D||Z>D)return null;const K=1e3,ne=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),ue=Q+1;let ye=new Uint8Array(ue*(Z+1)),fe,X,le;const de=Q+7&-8;let ce=new Uint8Array(de*Z),me=0;for(const Oe of J.data){let Ne=128;for(;Ne>0;)ce[me++]=Oe&Ne?0:255,Ne>>=1}let Se=0;for(me=0,ce[me]!==0&&(ye[0]=1,++Se),X=1;X<Q;X++)ce[me]!==ce[me+1]&&(ye[X]=ce[me]?2:1,++Se),me++;for(ce[me]!==0&&(ye[X]=2,++Se),fe=1;fe<Z;fe++){me=fe*de,le=fe*ue,ce[me-de]!==ce[me]&&(ye[le]=ce[me]?1:8,++Se);let Oe=(ce[me]?4:0)+(ce[me-de]?8:0);for(X=1;X<Q;X++)Oe=(Oe>>2)+(ce[me+1]?4:0)+(ce[me-de+1]?8:0),ne[Oe]&&(ye[le+X]=ne[Oe],++Se),me++;if(ce[me-de]!==ce[me]&&(ye[le+X]=ce[me]?2:4,++Se),Se>K)return null}for(me=de*(Z-1),le=fe*ue,ce[me]!==0&&(ye[le]=8,++Se),X=1;X<Q;X++)ce[me]!==ce[me+1]&&(ye[le+X]=ce[me]?4:8,++Se),me++;if(ce[me]!==0&&(ye[le+X]=4,++Se),Se>K)return null;const Ce=new Int32Array([0,ue,-1,0,-ue,0,0,0,1]),Te=new Path2D;for(fe=0;Se&&fe<=Z;fe++){let Oe=fe*ue;const Ne=Oe+Q;for(;Oe<Ne&&!ye[Oe];)Oe++;if(Oe===Ne)continue;Te.moveTo(Oe%ue,fe);const De=Oe;let Be=ye[Oe];do{const $e=Ce[Be];do Oe+=$e;while(!ye[Oe]);const Qe=ye[Oe];Qe!==5&&Qe!==10?(Be=Qe,ye[Oe]=0):(Be=Qe&51*Be>>4,ye[Oe]&=Be>>2|Be<<2),Te.lineTo(Oe%ue,Oe/ue|0),ye[Oe]||--Se}while(De!==Oe);--fe}return ce=null,ye=null,function(Oe){Oe.save(),Oe.scale(1/Q,-1/Z),Oe.translate(0,-Z),Oe.fill(Te),Oe.beginPath(),Oe.restore()}}class V{constructor(Q,Z){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=o.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=o.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,Q,Z])}clone(){const Q=Object.create(this);return Q.clipBox=this.clipBox.slice(),Q}setCurrentPoint(Q,Z){this.x=Q,this.y=Z}updatePathMinMax(Q,Z,K){[Z,K]=o.Util.applyTransform([Z,K],Q),this.minX=Math.min(this.minX,Z),this.minY=Math.min(this.minY,K),this.maxX=Math.max(this.maxX,Z),this.maxY=Math.max(this.maxY,K)}updateRectMinMax(Q,Z){const K=o.Util.applyTransform(Z,Q),ne=o.Util.applyTransform(Z.slice(2),Q);this.minX=Math.min(this.minX,K[0],ne[0]),this.minY=Math.min(this.minY,K[1],ne[1]),this.maxX=Math.max(this.maxX,K[0],ne[0]),this.maxY=Math.max(this.maxY,K[1],ne[1])}updateScalingPathMinMax(Q,Z){o.Util.scaleMinMax(Q,Z),this.minX=Math.min(this.minX,Z[0]),this.maxX=Math.max(this.maxX,Z[1]),this.minY=Math.min(this.minY,Z[2]),this.maxY=Math.max(this.maxY,Z[3])}updateCurvePathMinMax(Q,Z,K,ne,ue,ye,fe,X,le,de){const ce=o.Util.bezierBoundingBox(Z,K,ne,ue,ye,fe,X,le);if(de){de[0]=Math.min(de[0],ce[0],ce[2]),de[1]=Math.max(de[1],ce[0],ce[2]),de[2]=Math.min(de[2],ce[1],ce[3]),de[3]=Math.max(de[3],ce[1],ce[3]);return}this.updateRectMinMax(Q,ce)}getPathBoundingBox(Q=d.PathType.FILL,Z=null){const K=[this.minX,this.minY,this.maxX,this.maxY];if(Q===d.PathType.STROKE){Z||(0,o.unreachable)("Stroke bounding box must include transform.");const ne=o.Util.singularValueDecompose2dScale(Z),ue=ne[0]*this.lineWidth/2,ye=ne[1]*this.lineWidth/2;K[0]-=ue,K[1]-=ye,K[2]+=ue,K[3]+=ye}return K}updateClipFromPath(){const Q=o.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(Q||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(Q){this.clipBox=Q,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(Q=d.PathType.FILL,Z=null){return o.Util.intersect(this.clipBox,this.getPathBoundingBox(Q,Z))}}function j(J,Q){if(typeof ImageData<"u"&&Q instanceof ImageData){J.putImageData(Q,0,0);return}const Z=Q.height,K=Q.width,ne=Z%O,ue=(Z-ne)/O,ye=ne===0?ue:ue+1,fe=J.createImageData(K,O);let X=0,le;const de=Q.data,ce=fe.data;let me,Se,Ce,Te;if(Q.kind===o.ImageKind.GRAYSCALE_1BPP){const je=de.byteLength,Oe=new Uint32Array(ce.buffer,0,ce.byteLength>>2),Ne=Oe.length,De=K+7>>3,Be=4294967295,$e=o.FeatureTest.isLittleEndian?4278190080:255;for(me=0;me<ye;me++){for(Ce=me<ue?O:ne,le=0,Se=0;Se<Ce;Se++){const Qe=je-X;let Ye=0;const nt=Qe>De?K:Qe*8-7,rt=nt&-8;let at=0,vt=0;for(;Ye<rt;Ye+=8)vt=de[X++],Oe[le++]=vt&128?Be:$e,Oe[le++]=vt&64?Be:$e,Oe[le++]=vt&32?Be:$e,Oe[le++]=vt&16?Be:$e,Oe[le++]=vt&8?Be:$e,Oe[le++]=vt&4?Be:$e,Oe[le++]=vt&2?Be:$e,Oe[le++]=vt&1?Be:$e;for(;Ye<nt;Ye++)at===0&&(vt=de[X++],at=128),Oe[le++]=vt&at?Be:$e,at>>=1}for(;le<Ne;)Oe[le++]=0;J.putImageData(fe,0,me*O)}}else if(Q.kind===o.ImageKind.RGBA_32BPP){for(Se=0,Te=K*O*4,me=0;me<ue;me++)ce.set(de.subarray(X,X+Te)),X+=Te,J.putImageData(fe,0,Se),Se+=O;me<ye&&(Te=K*ne*4,ce.set(de.subarray(X,X+Te)),J.putImageData(fe,0,Se))}else if(Q.kind===o.ImageKind.RGB_24BPP)for(Ce=O,Te=K*Ce,me=0;me<ye;me++){for(me>=ue&&(Ce=ne,Te=K*Ce),le=0,Se=Te;Se--;)ce[le++]=de[X++],ce[le++]=de[X++],ce[le++]=de[X++],ce[le++]=255;J.putImageData(fe,0,me*O)}else throw new Error(`bad image kind: ${Q.kind}`)}function q(J,Q){if(Q.bitmap){J.drawImage(Q.bitmap,0,0);return}const Z=Q.height,K=Q.width,ne=Z%O,ue=(Z-ne)/O,ye=ne===0?ue:ue+1,fe=J.createImageData(K,O);let X=0;const le=Q.data,de=fe.data;for(let ce=0;ce<ye;ce++){const me=ce<ue?O:ne;({srcPos:X}=(0,f.convertBlackAndWhiteToRGBA)({src:le,srcPos:X,dest:de,width:K,height:me,nonBlackColor:0})),J.putImageData(fe,0,ce*O)}}function z(J,Q){const Z=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const K of Z)J[K]!==void 0&&(Q[K]=J[K]);J.setLineDash!==void 0&&(Q.setLineDash(J.getLineDash()),Q.lineDashOffset=J.lineDashOffset)}function $(J){if(J.strokeStyle=J.fillStyle="#000000",J.fillRule="nonzero",J.globalAlpha=1,J.lineWidth=1,J.lineCap="butt",J.lineJoin="miter",J.miterLimit=10,J.globalCompositeOperation="source-over",J.font="10px sans-serif",J.setLineDash!==void 0&&(J.setLineDash([]),J.lineDashOffset=0),!o.isNodeJS){const{filter:Q}=J;Q!=="none"&&Q!==""&&(J.filter="none")}}function ee(J,Q,Z,K){const ne=J.length;for(let ue=3;ue<ne;ue+=4){const ye=J[ue];if(ye===0)J[ue-3]=Q,J[ue-2]=Z,J[ue-1]=K;else if(ye<255){const fe=255-ye;J[ue-3]=J[ue-3]*ye+Q*fe>>8,J[ue-2]=J[ue-2]*ye+Z*fe>>8,J[ue-1]=J[ue-1]*ye+K*fe>>8}}}function ie(J,Q,Z){const K=J.length,ne=1/255;for(let ue=3;ue<K;ue+=4){const ye=Z?Z[J[ue]]:J[ue];Q[ue]=Q[ue]*ye*ne|0}}function ae(J,Q,Z){const K=J.length;for(let ne=3;ne<K;ne+=4){const ue=J[ne-3]*77+J[ne-2]*152+J[ne-1]*28;Q[ne]=Z?Q[ne]*Z[ue>>8]>>8:Q[ne]*ue>>16}}function pe(J,Q,Z,K,ne,ue,ye,fe,X,le,de){const ce=!!ue,me=ce?ue[0]:0,Se=ce?ue[1]:0,Ce=ce?ue[2]:0,Te=ne==="Luminosity"?ae:ie,Oe=Math.min(K,Math.ceil(1048576/Z));for(let Ne=0;Ne<K;Ne+=Oe){const De=Math.min(Oe,K-Ne),Be=J.getImageData(fe-le,Ne+(X-de),Z,De),$e=Q.getImageData(fe,Ne+X,Z,De);ce&&ee(Be.data,me,Se,Ce),Te(Be.data,$e.data,ye),Q.putImageData($e,fe,Ne+X)}}function he(J,Q,Z,K){const ne=K[0],ue=K[1],ye=K[2]-ne,fe=K[3]-ue;ye===0||fe===0||(pe(Q.context,Z,ye,fe,Q.subtype,Q.backdrop,Q.transferMap,ne,ue,Q.offsetX,Q.offsetY),J.save(),J.globalAlpha=1,J.globalCompositeOperation="source-over",J.setTransform(1,0,0,1,0,0),J.drawImage(Z.canvas,0,0),J.restore())}function be(J,Q){const Z=o.Util.singularValueDecompose2dScale(J);Z[0]=Math.fround(Z[0]),Z[1]=Math.fround(Z[1]);const K=Math.fround((globalThis.devicePixelRatio||1)*u.PixelsPerInch.PDF_TO_CSS_UNITS);return Q!==void 0?Q:Z[0]<=K||Z[1]<=K}const xe=["butt","round","square"],Ee=["miter","round","bevel"],we={},oe={};class se{constructor(Q,Z,K,ne,ue,{optionalContentConfig:ye,markedContentStack:fe=null},X,le){this.ctx=Q,this.current=new V(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=Z,this.objs=K,this.canvasFactory=ne,this.filterFactory=ue,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=fe||[],this.optionalContentConfig=ye,this.cachedCanvases=new N(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=X,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=le,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(Q,Z=null){return typeof Q=="string"?Q.startsWith("g_")?this.commonObjs.get(Q):this.objs.get(Q):Z}beginDrawing({transform:Q,viewport:Z,transparency:K=!1,background:ne=null}){const ue=this.ctx.canvas.width,ye=this.ctx.canvas.height,fe=this.ctx.fillStyle;if(this.ctx.fillStyle=ne||"#ffffff",this.ctx.fillRect(0,0,ue,ye),this.ctx.fillStyle=fe,K){const X=this.cachedCanvases.getCanvas("transparent",ue,ye);this.compositeCtx=this.ctx,this.transparentCanvas=X.canvas,this.ctx=X.context,this.ctx.save(),this.ctx.transform(...(0,u.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),$(this.ctx),Q&&(this.ctx.transform(...Q),this.outputScaleX=Q[0],this.outputScaleY=Q[0]),this.ctx.transform(...Z.transform),this.viewportScale=Z.scale,this.baseTransform=(0,u.getCurrentTransform)(this.ctx)}executeOperatorList(Q,Z,K,ne){const ue=Q.argsArray,ye=Q.fnArray;let fe=Z||0;const X=ue.length;if(X===fe)return fe;const le=X-fe>_&&typeof K=="function",de=le?Date.now()+C:0;let ce=0;const me=this.commonObjs,Se=this.objs;let Ce;for(;;){if(ne!==void 0&&fe===ne.nextBreakPoint)return ne.breakIt(fe,K),fe;if(Ce=ye[fe],Ce!==o.OPS.dependency)this[Ce].apply(this,ue[fe]);else for(const Te of ue[fe]){const je=Te.startsWith("g_")?me:Se;if(!je.has(Te))return je.get(Te,K),fe}if(fe++,fe===X)return fe;if(le&&++ce>_){if(Date.now()>de)return K(),fe;ce=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const Q of this._cachedBitmapsMap.values()){for(const Z of Q.values())typeof HTMLCanvasElement<"u"&&Z instanceof HTMLCanvasElement&&(Z.width=Z.height=0);Q.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const Q=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(Q!=="none"){const Z=this.ctx.filter;this.ctx.filter=Q,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=Z}}}_scaleImage(Q,Z){const K=Q.width,ne=Q.height;let ue=Math.max(Math.hypot(Z[0],Z[1]),1),ye=Math.max(Math.hypot(Z[2],Z[3]),1),fe=K,X=ne,le="prescale1",de,ce;for(;ue>2&&fe>1||ye>2&&X>1;){let me=fe,Se=X;ue>2&&fe>1&&(me=fe>=16384?Math.floor(fe/2)-1||1:Math.ceil(fe/2),ue/=fe/me),ye>2&&X>1&&(Se=X>=16384?Math.floor(X/2)-1||1:Math.ceil(X)/2,ye/=X/Se),de=this.cachedCanvases.getCanvas(le,me,Se),ce=de.context,ce.clearRect(0,0,me,Se),ce.drawImage(Q,0,0,fe,X,0,0,me,Se),Q=de.canvas,fe=me,X=Se,le=le==="prescale1"?"prescale2":"prescale1"}return{img:Q,paintWidth:fe,paintHeight:X}}_createMaskCanvas(Q){const Z=this.ctx,{width:K,height:ne}=Q,ue=this.current.fillColor,ye=this.current.patternFill,fe=(0,u.getCurrentTransform)(Z);let X,le,de,ce;if((Q.bitmap||Q.data)&&Q.count>1){const Ye=Q.bitmap||Q.data.buffer;le=JSON.stringify(ye?fe:[fe.slice(0,4),ue]),X=this._cachedBitmapsMap.get(Ye),X||(X=new Map,this._cachedBitmapsMap.set(Ye,X));const nt=X.get(le);if(nt&&!ye){const rt=Math.round(Math.min(fe[0],fe[2])+fe[4]),at=Math.round(Math.min(fe[1],fe[3])+fe[5]);return{canvas:nt,offsetX:rt,offsetY:at}}de=nt}de||(ce=this.cachedCanvases.getCanvas("maskCanvas",K,ne),q(ce.context,Q));let me=o.Util.transform(fe,[1/K,0,0,-1/ne,0,0]);me=o.Util.transform(me,[1,0,0,1,0,-ne]);const Se=o.Util.applyTransform([0,0],me),Ce=o.Util.applyTransform([K,ne],me),Te=o.Util.normalizeRect([Se[0],Se[1],Ce[0],Ce[1]]),je=Math.round(Te[2]-Te[0])||1,Oe=Math.round(Te[3]-Te[1])||1,Ne=this.cachedCanvases.getCanvas("fillCanvas",je,Oe),De=Ne.context,Be=Math.min(Se[0],Ce[0]),$e=Math.min(Se[1],Ce[1]);De.translate(-Be,-$e),De.transform(...me),de||(de=this._scaleImage(ce.canvas,(0,u.getCurrentTransformInverse)(De)),de=de.img,X&&ye&&X.set(le,de)),De.imageSmoothingEnabled=be((0,u.getCurrentTransform)(De),Q.interpolate),I(De,de,0,0,de.width,de.height,0,0,K,ne),De.globalCompositeOperation="source-in";const Qe=o.Util.transform((0,u.getCurrentTransformInverse)(De),[1,0,0,1,-Be,-$e]);return De.fillStyle=ye?ue.getPattern(Z,this,Qe,d.PathType.FILL):ue,De.fillRect(0,0,K,ne),X&&!ye&&(this.cachedCanvases.delete("fillCanvas"),X.set(le,Ne.canvas)),{canvas:Ne.canvas,offsetX:Math.round(Be),offsetY:Math.round($e)}}setLineWidth(Q){Q!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=Q,this.ctx.lineWidth=Q}setLineCap(Q){this.ctx.lineCap=xe[Q]}setLineJoin(Q){this.ctx.lineJoin=Ee[Q]}setMiterLimit(Q){this.ctx.miterLimit=Q}setDash(Q,Z){const K=this.ctx;K.setLineDash!==void 0&&(K.setLineDash(Q),K.lineDashOffset=Z)}setRenderingIntent(Q){}setFlatness(Q){}setGState(Q){for(const[Z,K]of Q)switch(Z){case"LW":this.setLineWidth(K);break;case"LC":this.setLineCap(K);break;case"LJ":this.setLineJoin(K);break;case"ML":this.setMiterLimit(K);break;case"D":this.setDash(K[0],K[1]);break;case"RI":this.setRenderingIntent(K);break;case"FL":this.setFlatness(K);break;case"Font":this.setFont(K[0],K[1]);break;case"CA":this.current.strokeAlpha=K;break;case"ca":this.current.fillAlpha=K,this.ctx.globalAlpha=K;break;case"BM":this.ctx.globalCompositeOperation=K;break;case"SMask":this.current.activeSMask=K?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(K);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const Q=this.inSMaskMode;this.current.activeSMask&&!Q?this.beginSMaskMode():!this.current.activeSMask&&Q&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const Q=this.ctx.canvas.width,Z=this.ctx.canvas.height,K="smaskGroupAt"+this.groupLevel,ne=this.cachedCanvases.getCanvas(K,Q,Z);this.suspendedCtx=this.ctx,this.ctx=ne.context;const ue=this.ctx;ue.setTransform(...(0,u.getCurrentTransform)(this.suspendedCtx)),z(this.suspendedCtx,ue),M(ue,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),z(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(Q){if(!this.current.activeSMask)return;Q?(Q[0]=Math.floor(Q[0]),Q[1]=Math.floor(Q[1]),Q[2]=Math.ceil(Q[2]),Q[3]=Math.ceil(Q[3])):Q=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const Z=this.current.activeSMask,K=this.suspendedCtx;he(K,Z,this.ctx,Q),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(z(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const Q=this.current;this.stateStack.push(Q),this.current=Q.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),z(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(Q,Z,K,ne,ue,ye){this.ctx.transform(Q,Z,K,ne,ue,ye),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(Q,Z,K){const ne=this.ctx,ue=this.current;let ye=ue.x,fe=ue.y,X,le;const de=(0,u.getCurrentTransform)(ne),ce=de[0]===0&&de[3]===0||de[1]===0&&de[2]===0,me=ce?K.slice(0):null;for(let Se=0,Ce=0,Te=Q.length;Se<Te;Se++)switch(Q[Se]|0){case o.OPS.rectangle:ye=Z[Ce++],fe=Z[Ce++];const je=Z[Ce++],Oe=Z[Ce++],Ne=ye+je,De=fe+Oe;ne.moveTo(ye,fe),je===0||Oe===0?ne.lineTo(Ne,De):(ne.lineTo(Ne,fe),ne.lineTo(Ne,De),ne.lineTo(ye,De)),ce||ue.updateRectMinMax(de,[ye,fe,Ne,De]),ne.closePath();break;case o.OPS.moveTo:ye=Z[Ce++],fe=Z[Ce++],ne.moveTo(ye,fe),ce||ue.updatePathMinMax(de,ye,fe);break;case o.OPS.lineTo:ye=Z[Ce++],fe=Z[Ce++],ne.lineTo(ye,fe),ce||ue.updatePathMinMax(de,ye,fe);break;case o.OPS.curveTo:X=ye,le=fe,ye=Z[Ce+4],fe=Z[Ce+5],ne.bezierCurveTo(Z[Ce],Z[Ce+1],Z[Ce+2],Z[Ce+3],ye,fe),ue.updateCurvePathMinMax(de,X,le,Z[Ce],Z[Ce+1],Z[Ce+2],Z[Ce+3],ye,fe,me),Ce+=6;break;case o.OPS.curveTo2:X=ye,le=fe,ne.bezierCurveTo(ye,fe,Z[Ce],Z[Ce+1],Z[Ce+2],Z[Ce+3]),ue.updateCurvePathMinMax(de,X,le,ye,fe,Z[Ce],Z[Ce+1],Z[Ce+2],Z[Ce+3],me),ye=Z[Ce+2],fe=Z[Ce+3],Ce+=4;break;case o.OPS.curveTo3:X=ye,le=fe,ye=Z[Ce+2],fe=Z[Ce+3],ne.bezierCurveTo(Z[Ce],Z[Ce+1],ye,fe,ye,fe),ue.updateCurvePathMinMax(de,X,le,Z[Ce],Z[Ce+1],ye,fe,ye,fe,me),Ce+=4;break;case o.OPS.closePath:ne.closePath();break}ce&&ue.updateScalingPathMinMax(de,me),ue.setCurrentPoint(ye,fe)}closePath(){this.ctx.closePath()}stroke(Q=!0){const Z=this.ctx,K=this.current.strokeColor;Z.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof K=="object"&&K?.getPattern?(Z.save(),Z.strokeStyle=K.getPattern(Z,this,(0,u.getCurrentTransformInverse)(Z),d.PathType.STROKE),this.rescaleAndStroke(!1),Z.restore()):this.rescaleAndStroke(!0)),Q&&this.consumePath(this.current.getClippedPathBoundingBox()),Z.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(Q=!0){const Z=this.ctx,K=this.current.fillColor,ne=this.current.patternFill;let ue=!1;ne&&(Z.save(),Z.fillStyle=K.getPattern(Z,this,(0,u.getCurrentTransformInverse)(Z),d.PathType.FILL),ue=!0);const ye=this.current.getClippedPathBoundingBox();this.contentVisible&&ye!==null&&(this.pendingEOFill?(Z.fill("evenodd"),this.pendingEOFill=!1):Z.fill()),ue&&Z.restore(),Q&&this.consumePath(ye)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=we}eoClip(){this.pendingClip=oe}beginText(){this.current.textMatrix=o.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const Q=this.pendingTextPaths,Z=this.ctx;if(Q===void 0){Z.beginPath();return}Z.save(),Z.beginPath();for(const K of Q)Z.setTransform(...K.transform),Z.translate(K.x,K.y),K.addToPath(Z,K.fontSize);Z.restore(),Z.clip(),Z.beginPath(),delete this.pendingTextPaths}setCharSpacing(Q){this.current.charSpacing=Q}setWordSpacing(Q){this.current.wordSpacing=Q}setHScale(Q){this.current.textHScale=Q/100}setLeading(Q){this.current.leading=-Q}setFont(Q,Z){const K=this.commonObjs.get(Q),ne=this.current;if(!K)throw new Error(`Can't find font for ${Q}`);if(ne.fontMatrix=K.fontMatrix||o.FONT_IDENTITY_MATRIX,(ne.fontMatrix[0]===0||ne.fontMatrix[3]===0)&&(0,o.warn)("Invalid font matrix for font "+Q),Z<0?(Z=-Z,ne.fontDirection=-1):ne.fontDirection=1,this.current.font=K,this.current.fontSize=Z,K.isType3Font)return;const ue=K.loadedName||"sans-serif",ye=K.systemFontInfo?.css||`"${ue}", ${K.fallbackName}`;let fe="normal";K.black?fe="900":K.bold&&(fe="bold");const X=K.italic?"italic":"normal";let le=Z;Z<v?le=v:Z>w&&(le=w),this.current.fontSizeScale=Z/le,this.ctx.font=`${X} ${fe} ${le}px ${ye}`}setTextRenderingMode(Q){this.current.textRenderingMode=Q}setTextRise(Q){this.current.textRise=Q}moveText(Q,Z){this.current.x=this.current.lineX+=Q,this.current.y=this.current.lineY+=Z}setLeadingMoveText(Q,Z){this.setLeading(-Z),this.moveText(Q,Z)}setTextMatrix(Q,Z,K,ne,ue,ye){this.current.textMatrix=[Q,Z,K,ne,ue,ye],this.current.textMatrixScale=Math.hypot(Q,Z),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(Q,Z,K,ne){const ue=this.ctx,ye=this.current,fe=ye.font,X=ye.textRenderingMode,le=ye.fontSize/ye.fontSizeScale,de=X&o.TextRenderingMode.FILL_STROKE_MASK,ce=!!(X&o.TextRenderingMode.ADD_TO_PATH_FLAG),me=ye.patternFill&&!fe.missingFile;let Se;(fe.disableFontFace||ce||me)&&(Se=fe.getPathGenerator(this.commonObjs,Q)),fe.disableFontFace||me?(ue.save(),ue.translate(Z,K),ue.beginPath(),Se(ue,le),ne&&ue.setTransform(...ne),(de===o.TextRenderingMode.FILL||de===o.TextRenderingMode.FILL_STROKE)&&ue.fill(),(de===o.TextRenderingMode.STROKE||de===o.TextRenderingMode.FILL_STROKE)&&ue.stroke(),ue.restore()):((de===o.TextRenderingMode.FILL||de===o.TextRenderingMode.FILL_STROKE)&&ue.fillText(Q,Z,K),(de===o.TextRenderingMode.STROKE||de===o.TextRenderingMode.FILL_STROKE)&&ue.strokeText(Q,Z,K)),ce&&(this.pendingTextPaths||=[]).push({transform:(0,u.getCurrentTransform)(ue),x:Z,y:K,fontSize:le,addToPath:Se})}get isFontSubpixelAAEnabled(){const{context:Q}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);Q.scale(1.5,1),Q.fillText("I",0,10);const Z=Q.getImageData(0,0,10,10).data;let K=!1;for(let ne=3;ne<Z.length;ne+=4)if(Z[ne]>0&&Z[ne]<255){K=!0;break}return(0,o.shadow)(this,"isFontSubpixelAAEnabled",K)}showText(Q){const Z=this.current,K=Z.font;if(K.isType3Font)return this.showType3Text(Q);const ne=Z.fontSize;if(ne===0)return;const ue=this.ctx,ye=Z.fontSizeScale,fe=Z.charSpacing,X=Z.wordSpacing,le=Z.fontDirection,de=Z.textHScale*le,ce=Q.length,me=K.vertical,Se=me?1:-1,Ce=K.defaultVMetrics,Te=ne*Z.fontMatrix[0],je=Z.textRenderingMode===o.TextRenderingMode.FILL&&!K.disableFontFace&&!Z.patternFill;ue.save(),ue.transform(...Z.textMatrix),ue.translate(Z.x,Z.y+Z.textRise),le>0?ue.scale(de,-1):ue.scale(de,1);let Oe;if(Z.patternFill){ue.save();const Qe=Z.fillColor.getPattern(ue,this,(0,u.getCurrentTransformInverse)(ue),d.PathType.FILL);Oe=(0,u.getCurrentTransform)(ue),ue.restore(),ue.fillStyle=Qe}let Ne=Z.lineWidth;const De=Z.textMatrixScale;if(De===0||Ne===0){const Qe=Z.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;(Qe===o.TextRenderingMode.STROKE||Qe===o.TextRenderingMode.FILL_STROKE)&&(Ne=this.getSinglePixelWidth())}else Ne/=De;if(ye!==1&&(ue.scale(ye,ye),Ne/=ye),ue.lineWidth=Ne,K.isInvalidPDFjsFont){const Qe=[];let Ye=0;for(const nt of Q)Qe.push(nt.unicode),Ye+=nt.width;ue.fillText(Qe.join(""),0,0),Z.x+=Ye*Te*de,ue.restore(),this.compose();return}let Be=0,$e;for($e=0;$e<ce;++$e){const Qe=Q[$e];if(typeof Qe=="number"){Be+=Se*Qe*ne/1e3;continue}let Ye=!1;const nt=(Qe.isSpace?X:0)+fe,rt=Qe.fontChar,at=Qe.accent;let vt,nn,en=Qe.width;if(me){const wt=Qe.vmetric||Ce,Bn=-(Qe.vmetric?wt[1]:en*.5)*Te,Ba=wt[2]*Te;en=wt?-wt[0]:en,vt=Bn/ye,nn=(Be+Ba)/ye}else vt=Be/ye,nn=0;if(K.remeasure&&en>0){const wt=ue.measureText(rt).width*1e3/ne*ye;if(en<wt&&this.isFontSubpixelAAEnabled){const Bn=en/wt;Ye=!0,ue.save(),ue.scale(Bn,1),vt/=Bn}else en!==wt&&(vt+=(en-wt)/2e3*ne/ye)}if(this.contentVisible&&(Qe.isInFont||K.missingFile)){if(je&&!at)ue.fillText(rt,vt,nn);else if(this.paintChar(rt,vt,nn,Oe),at){const wt=vt+ne*at.offset.x/ye,Bn=nn-ne*at.offset.y/ye;this.paintChar(at.fontChar,wt,Bn,Oe)}}const Dt=me?en*Te-nt*le:en*Te+nt*le;Be+=Dt,Ye&&ue.restore()}me?Z.y-=Be:Z.x+=Be*de,ue.restore(),this.compose()}showType3Text(Q){const Z=this.ctx,K=this.current,ne=K.font,ue=K.fontSize,ye=K.fontDirection,fe=ne.vertical?1:-1,X=K.charSpacing,le=K.wordSpacing,de=K.textHScale*ye,ce=K.fontMatrix||o.FONT_IDENTITY_MATRIX,me=Q.length,Se=K.textRenderingMode===o.TextRenderingMode.INVISIBLE;let Ce,Te,je,Oe;if(!(Se||ue===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,Z.save(),Z.transform(...K.textMatrix),Z.translate(K.x,K.y),Z.scale(de,ye),Ce=0;Ce<me;++Ce){if(Te=Q[Ce],typeof Te=="number"){Oe=fe*Te*ue/1e3,this.ctx.translate(Oe,0),K.x+=Oe*de;continue}const Ne=(Te.isSpace?le:0)+X,De=ne.charProcOperatorList[Te.operatorListId];if(!De){(0,o.warn)(`Type3 character "${Te.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Te,this.save(),Z.scale(ue,ue),Z.transform(...ce),this.executeOperatorList(De),this.restore()),je=o.Util.applyTransform([Te.width,0],ce)[0]*ue+Ne,Z.translate(je,0),K.x+=je*de}Z.restore(),this.processingType3=null}}setCharWidth(Q,Z){}setCharWidthAndBounds(Q,Z,K,ne,ue,ye){this.ctx.rect(K,ne,ue-K,ye-ne),this.ctx.clip(),this.endPath()}getColorN_Pattern(Q){let Z;if(Q[0]==="TilingPattern"){const K=Q[1],ne=this.baseTransform||(0,u.getCurrentTransform)(this.ctx),ue={createCanvasGraphics:ye=>new se(ye,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};Z=new d.TilingPattern(Q,K,this.ctx,ue,ne)}else Z=this._getPattern(Q[1],Q[2]);return Z}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(Q,Z,K){const ne=o.Util.makeHexColor(Q,Z,K);this.ctx.strokeStyle=ne,this.current.strokeColor=ne}setFillRGBColor(Q,Z,K){const ne=o.Util.makeHexColor(Q,Z,K);this.ctx.fillStyle=ne,this.current.fillColor=ne,this.current.patternFill=!1}_getPattern(Q,Z=null){let K;return this.cachedPatterns.has(Q)?K=this.cachedPatterns.get(Q):(K=(0,d.getShadingPattern)(this.getObject(Q)),this.cachedPatterns.set(Q,K)),Z&&(K.matrix=Z),K}shadingFill(Q){if(!this.contentVisible)return;const Z=this.ctx;this.save();const K=this._getPattern(Q);Z.fillStyle=K.getPattern(Z,this,(0,u.getCurrentTransformInverse)(Z),d.PathType.SHADING);const ne=(0,u.getCurrentTransformInverse)(Z);if(ne){const{width:ue,height:ye}=Z.canvas,[fe,X,le,de]=o.Util.getAxialAlignedBoundingBox([0,0,ue,ye],ne);this.ctx.fillRect(fe,X,le-fe,de-X)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,o.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,o.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(Q,Z){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(Q)&&Q.length===6&&this.transform(...Q),this.baseTransform=(0,u.getCurrentTransform)(this.ctx),Z)){const K=Z[2]-Z[0],ne=Z[3]-Z[1];this.ctx.rect(Z[0],Z[1],K,ne),this.current.updateRectMinMax((0,u.getCurrentTransform)(this.ctx),Z),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(Q){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const Z=this.ctx;Q.isolated||(0,o.info)("TODO: Support non-isolated groups."),Q.knockout&&(0,o.warn)("Knockout groups not supported.");const K=(0,u.getCurrentTransform)(Z);if(Q.matrix&&Z.transform(...Q.matrix),!Q.bbox)throw new Error("Bounding box is required.");let ne=o.Util.getAxialAlignedBoundingBox(Q.bbox,(0,u.getCurrentTransform)(Z));const ue=[0,0,Z.canvas.width,Z.canvas.height];ne=o.Util.intersect(ne,ue)||[0,0,0,0];const ye=Math.floor(ne[0]),fe=Math.floor(ne[1]);let X=Math.max(Math.ceil(ne[2])-ye,1),le=Math.max(Math.ceil(ne[3])-fe,1),de=1,ce=1;X>E&&(de=X/E,X=E),le>E&&(ce=le/E,le=E),this.current.startNewPathAndClipBox([0,0,X,le]);let me="groupAt"+this.groupLevel;Q.smask&&(me+="_smask_"+this.smaskCounter++%2);const Se=this.cachedCanvases.getCanvas(me,X,le),Ce=Se.context;Ce.scale(1/de,1/ce),Ce.translate(-ye,-fe),Ce.transform(...K),Q.smask?this.smaskStack.push({canvas:Se.canvas,context:Ce,offsetX:ye,offsetY:fe,scaleX:de,scaleY:ce,subtype:Q.smask.subtype,backdrop:Q.smask.backdrop,transferMap:Q.smask.transferMap||null,startTransformInverse:null}):(Z.setTransform(1,0,0,1,0,0),Z.translate(ye,fe),Z.scale(de,ce),Z.save()),z(Z,Ce),this.ctx=Ce,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(Z),this.groupLevel++}endGroup(Q){if(!this.contentVisible)return;this.groupLevel--;const Z=this.ctx,K=this.groupStack.pop();if(this.ctx=K,this.ctx.imageSmoothingEnabled=!1,Q.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const ne=(0,u.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...ne);const ue=o.Util.getAxialAlignedBoundingBox([0,0,Z.canvas.width,Z.canvas.height],ne);this.ctx.drawImage(Z.canvas,0,0),this.ctx.restore(),this.compose(ue)}}beginAnnotation(Q,Z,K,ne,ue){if(this.#e(),$(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(Z)&&Z.length===4){const ye=Z[2]-Z[0],fe=Z[3]-Z[1];if(ue&&this.annotationCanvasMap){K=K.slice(),K[4]-=Z[0],K[5]-=Z[1],Z=Z.slice(),Z[0]=Z[1]=0,Z[2]=ye,Z[3]=fe;const[X,le]=o.Util.singularValueDecompose2dScale((0,u.getCurrentTransform)(this.ctx)),{viewportScale:de}=this,ce=Math.ceil(ye*this.outputScaleX*de),me=Math.ceil(fe*this.outputScaleY*de);this.annotationCanvas=this.canvasFactory.create(ce,me);const{canvas:Se,context:Ce}=this.annotationCanvas;this.annotationCanvasMap.set(Q,Se),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Ce,this.ctx.save(),this.ctx.setTransform(X,0,0,-le,0,fe*le),$(this.ctx)}else $(this.ctx),this.ctx.rect(Z[0],Z[1],ye,fe),this.ctx.clip(),this.endPath()}this.current=new V(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...K),this.transform(...ne)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(Q){if(!this.contentVisible)return;const Z=Q.count;Q=this.getObject(Q.data,Q),Q.count=Z;const K=this.ctx,ne=this.processingType3;if(ne&&(ne.compiled===void 0&&(ne.compiled=B(Q)),ne.compiled)){ne.compiled(K);return}const ue=this._createMaskCanvas(Q),ye=ue.canvas;K.save(),K.setTransform(1,0,0,1,0,0),K.drawImage(ye,ue.offsetX,ue.offsetY),K.restore(),this.compose()}paintImageMaskXObjectRepeat(Q,Z,K=0,ne=0,ue,ye){if(!this.contentVisible)return;Q=this.getObject(Q.data,Q);const fe=this.ctx;fe.save();const X=(0,u.getCurrentTransform)(fe);fe.transform(Z,K,ne,ue,0,0);const le=this._createMaskCanvas(Q);fe.setTransform(1,0,0,1,le.offsetX-X[4],le.offsetY-X[5]);for(let de=0,ce=ye.length;de<ce;de+=2){const me=o.Util.transform(X,[Z,K,ne,ue,ye[de],ye[de+1]]),[Se,Ce]=o.Util.applyTransform([0,0],me);fe.drawImage(le.canvas,Se,Ce)}fe.restore(),this.compose()}paintImageMaskXObjectGroup(Q){if(!this.contentVisible)return;const Z=this.ctx,K=this.current.fillColor,ne=this.current.patternFill;for(const ue of Q){const{data:ye,width:fe,height:X,transform:le}=ue,de=this.cachedCanvases.getCanvas("maskCanvas",fe,X),ce=de.context;ce.save();const me=this.getObject(ye,ue);q(ce,me),ce.globalCompositeOperation="source-in",ce.fillStyle=ne?K.getPattern(ce,this,(0,u.getCurrentTransformInverse)(Z),d.PathType.FILL):K,ce.fillRect(0,0,fe,X),ce.restore(),Z.save(),Z.transform(...le),Z.scale(1,-1),I(Z,de.canvas,0,0,fe,X,0,-1,1,1),Z.restore()}this.compose()}paintImageXObject(Q){if(!this.contentVisible)return;const Z=this.getObject(Q);if(!Z){(0,o.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(Z)}paintImageXObjectRepeat(Q,Z,K,ne){if(!this.contentVisible)return;const ue=this.getObject(Q);if(!ue){(0,o.warn)("Dependent image isn't ready yet");return}const ye=ue.width,fe=ue.height,X=[];for(let le=0,de=ne.length;le<de;le+=2)X.push({transform:[Z,0,0,K,ne[le],ne[le+1]],x:0,y:0,w:ye,h:fe});this.paintInlineImageXObjectGroup(ue,X)}applyTransferMapsToCanvas(Q){return this.current.transferMaps!=="none"&&(Q.filter=this.current.transferMaps,Q.drawImage(Q.canvas,0,0),Q.filter="none"),Q.canvas}applyTransferMapsToBitmap(Q){if(this.current.transferMaps==="none")return Q.bitmap;const{bitmap:Z,width:K,height:ne}=Q,ue=this.cachedCanvases.getCanvas("inlineImage",K,ne),ye=ue.context;return ye.filter=this.current.transferMaps,ye.drawImage(Z,0,0),ye.filter="none",ue.canvas}paintInlineImageXObject(Q){if(!this.contentVisible)return;const Z=Q.width,K=Q.height,ne=this.ctx;if(this.save(),!o.isNodeJS){const{filter:fe}=ne;fe!=="none"&&fe!==""&&(ne.filter="none")}ne.scale(1/Z,-1/K);let ue;if(Q.bitmap)ue=this.applyTransferMapsToBitmap(Q);else if(typeof HTMLElement=="function"&&Q instanceof HTMLElement||!Q.data)ue=Q;else{const X=this.cachedCanvases.getCanvas("inlineImage",Z,K).context;j(X,Q),ue=this.applyTransferMapsToCanvas(X)}const ye=this._scaleImage(ue,(0,u.getCurrentTransformInverse)(ne));ne.imageSmoothingEnabled=be((0,u.getCurrentTransform)(ne),Q.interpolate),I(ne,ye.img,0,0,ye.paintWidth,ye.paintHeight,0,-K,Z,K),this.compose(),this.restore()}paintInlineImageXObjectGroup(Q,Z){if(!this.contentVisible)return;const K=this.ctx;let ne;if(Q.bitmap)ne=Q.bitmap;else{const ue=Q.width,ye=Q.height,X=this.cachedCanvases.getCanvas("inlineImage",ue,ye).context;j(X,Q),ne=this.applyTransferMapsToCanvas(X)}for(const ue of Z)K.save(),K.transform(...ue.transform),K.scale(1,-1),I(K,ne,ue.x,ue.y,ue.w,ue.h,0,-1,1,1),K.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(Q){}markPointProps(Q,Z){}beginMarkedContent(Q){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(Q,Z){Q==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(Z)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(Q){const Z=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(Q);const K=this.ctx;this.pendingClip&&(Z||(this.pendingClip===oe?K.clip("evenodd"):K.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),K.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const Q=(0,u.getCurrentTransform)(this.ctx);if(Q[1]===0&&Q[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(Q[0]),Math.abs(Q[3]));else{const Z=Math.abs(Q[0]*Q[3]-Q[2]*Q[1]),K=Math.hypot(Q[0],Q[2]),ne=Math.hypot(Q[1],Q[3]);this._cachedGetSinglePixelWidth=Math.max(K,ne)/Z}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:Q}=this.current,{a:Z,b:K,c:ne,d:ue}=this.ctx.getTransform();let ye,fe;if(K===0&&ne===0){const X=Math.abs(Z),le=Math.abs(ue);if(X===le)if(Q===0)ye=fe=1/X;else{const de=X*Q;ye=fe=de<1?1/de:1}else if(Q===0)ye=1/X,fe=1/le;else{const de=X*Q,ce=le*Q;ye=de<1?1/de:1,fe=ce<1?1/ce:1}}else{const X=Math.abs(Z*ue-K*ne),le=Math.hypot(Z,K),de=Math.hypot(ne,ue);if(Q===0)ye=de/X,fe=le/X;else{const ce=Q*X;ye=de>ce?de/ce:1,fe=le>ce?le/ce:1}}this._cachedScaleForStroking[0]=ye,this._cachedScaleForStroking[1]=fe}return this._cachedScaleForStroking}rescaleAndStroke(Q){const{ctx:Z}=this,{lineWidth:K}=this.current,[ne,ue]=this.getScaleForStroking();if(Z.lineWidth=K||1,ne===1&&ue===1){Z.stroke();return}const ye=Z.getLineDash();if(Q&&Z.save(),Z.scale(ne,ue),ye.length>0){const fe=Math.max(ne,ue);Z.setLineDash(ye.map(X=>X/fe)),Z.lineDashOffset/=fe}Z.stroke(),Q&&Z.restore()}isContentVisible(){for(let Q=this.markedContentStack.length-1;Q>=0;Q--)if(!this.markedContentStack[Q].visible)return!1;return!0}}t.CanvasGraphics=se;for(const J in o.OPS)se.prototype[J]!==void 0&&(se.prototype[o.OPS[J]]=se.prototype[J])}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=O;var o=n(1),u=n(6);const d={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=d;function f(I,B){if(!B)return;const V=B[2]-B[0],j=B[3]-B[1],q=new Path2D;q.rect(B[0],B[1],V,j),I.clip(q)}class v{constructor(){this.constructor===v&&(0,o.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,o.unreachable)("Abstract method `getPattern` called.")}}class w extends v{constructor(B){super(),this._type=B[1],this._bbox=B[2],this._colorStops=B[3],this._p0=B[4],this._p1=B[5],this._r0=B[6],this._r1=B[7],this.matrix=null}_createGradient(B){let V;this._type==="axial"?V=B.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(V=B.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const j of this._colorStops)V.addColorStop(j[0],j[1]);return V}getPattern(B,V,j,q){let z;if(q===d.STROKE||q===d.FILL){const $=V.current.getClippedPathBoundingBox(q,(0,u.getCurrentTransform)(B))||[0,0,0,0],ee=Math.ceil($[2]-$[0])||1,ie=Math.ceil($[3]-$[1])||1,ae=V.cachedCanvases.getCanvas("pattern",ee,ie,!0),pe=ae.context;pe.clearRect(0,0,pe.canvas.width,pe.canvas.height),pe.beginPath(),pe.rect(0,0,pe.canvas.width,pe.canvas.height),pe.translate(-$[0],-$[1]),j=o.Util.transform(j,[1,0,0,1,$[0],$[1]]),pe.transform(...V.baseTransform),this.matrix&&pe.transform(...this.matrix),f(pe,this._bbox),pe.fillStyle=this._createGradient(pe),pe.fill(),z=B.createPattern(ae.canvas,"no-repeat");const he=new DOMMatrix(j);z.setTransform(he)}else f(B,this._bbox),z=this._createGradient(B);return z}}function E(I,B,V,j,q,z,$,ee){const ie=B.coords,ae=B.colors,pe=I.data,he=I.width*4;let be;ie[V+1]>ie[j+1]&&(be=V,V=j,j=be,be=z,z=$,$=be),ie[j+1]>ie[q+1]&&(be=j,j=q,q=be,be=$,$=ee,ee=be),ie[V+1]>ie[j+1]&&(be=V,V=j,j=be,be=z,z=$,$=be);const xe=(ie[V]+B.offsetX)*B.scaleX,Ee=(ie[V+1]+B.offsetY)*B.scaleY,we=(ie[j]+B.offsetX)*B.scaleX,oe=(ie[j+1]+B.offsetY)*B.scaleY,se=(ie[q]+B.offsetX)*B.scaleX,J=(ie[q+1]+B.offsetY)*B.scaleY;if(Ee>=J)return;const Q=ae[z],Z=ae[z+1],K=ae[z+2],ne=ae[$],ue=ae[$+1],ye=ae[$+2],fe=ae[ee],X=ae[ee+1],le=ae[ee+2],de=Math.round(Ee),ce=Math.round(J);let me,Se,Ce,Te,je,Oe,Ne,De;for(let Be=de;Be<=ce;Be++){if(Be<oe){const rt=Be<Ee?0:(Ee-Be)/(Ee-oe);me=xe-(xe-we)*rt,Se=Q-(Q-ne)*rt,Ce=Z-(Z-ue)*rt,Te=K-(K-ye)*rt}else{let rt;Be>J?rt=1:oe===J?rt=0:rt=(oe-Be)/(oe-J),me=we-(we-se)*rt,Se=ne-(ne-fe)*rt,Ce=ue-(ue-X)*rt,Te=ye-(ye-le)*rt}let $e;Be<Ee?$e=0:Be>J?$e=1:$e=(Ee-Be)/(Ee-J),je=xe-(xe-se)*$e,Oe=Q-(Q-fe)*$e,Ne=Z-(Z-X)*$e,De=K-(K-le)*$e;const Qe=Math.round(Math.min(me,je)),Ye=Math.round(Math.max(me,je));let nt=he*Be+Qe*4;for(let rt=Qe;rt<=Ye;rt++)$e=(me-rt)/(me-je),$e<0?$e=0:$e>1&&($e=1),pe[nt++]=Se-(Se-Oe)*$e|0,pe[nt++]=Ce-(Ce-Ne)*$e|0,pe[nt++]=Te-(Te-De)*$e|0,pe[nt++]=255}}function C(I,B,V){const j=B.coords,q=B.colors;let z,$;switch(B.type){case"lattice":const ee=B.verticesPerRow,ie=Math.floor(j.length/ee)-1,ae=ee-1;for(z=0;z<ie;z++){let pe=z*ee;for(let he=0;he<ae;he++,pe++)E(I,V,j[pe],j[pe+1],j[pe+ee],q[pe],q[pe+1],q[pe+ee]),E(I,V,j[pe+ee+1],j[pe+1],j[pe+ee],q[pe+ee+1],q[pe+1],q[pe+ee])}break;case"triangles":for(z=0,$=j.length;z<$;z+=3)E(I,V,j[z],j[z+1],j[z+2],q[z],q[z+1],q[z+2]);break;default:throw new Error("illegal figure")}}class _ extends v{constructor(B){super(),this._coords=B[2],this._colors=B[3],this._figures=B[4],this._bounds=B[5],this._bbox=B[7],this._background=B[8],this.matrix=null}_createMeshCanvas(B,V,j){const ee=Math.floor(this._bounds[0]),ie=Math.floor(this._bounds[1]),ae=Math.ceil(this._bounds[2])-ee,pe=Math.ceil(this._bounds[3])-ie,he=Math.min(Math.ceil(Math.abs(ae*B[0]*1.1)),3e3),be=Math.min(Math.ceil(Math.abs(pe*B[1]*1.1)),3e3),xe=ae/he,Ee=pe/be,we={coords:this._coords,colors:this._colors,offsetX:-ee,offsetY:-ie,scaleX:1/xe,scaleY:1/Ee},oe=he+4,se=be+4,J=j.getCanvas("mesh",oe,se,!1),Q=J.context,Z=Q.createImageData(he,be);if(V){const ne=Z.data;for(let ue=0,ye=ne.length;ue<ye;ue+=4)ne[ue]=V[0],ne[ue+1]=V[1],ne[ue+2]=V[2],ne[ue+3]=255}for(const ne of this._figures)C(Z,ne,we);return Q.putImageData(Z,2,2),{canvas:J.canvas,offsetX:ee-2*xe,offsetY:ie-2*Ee,scaleX:xe,scaleY:Ee}}getPattern(B,V,j,q){f(B,this._bbox);let z;if(q===d.SHADING)z=o.Util.singularValueDecompose2dScale((0,u.getCurrentTransform)(B));else if(z=o.Util.singularValueDecompose2dScale(V.baseTransform),this.matrix){const ee=o.Util.singularValueDecompose2dScale(this.matrix);z=[z[0]*ee[0],z[1]*ee[1]]}const $=this._createMeshCanvas(z,q===d.SHADING?null:this._background,V.cachedCanvases);return q!==d.SHADING&&(B.setTransform(...V.baseTransform),this.matrix&&B.transform(...this.matrix)),B.translate($.offsetX,$.offsetY),B.scale($.scaleX,$.scaleY),B.createPattern($.canvas,"no-repeat")}}class D extends v{getPattern(){return"hotpink"}}function O(I){switch(I[0]){case"RadialAxial":return new w(I);case"Mesh":return new _(I);case"Dummy":return new D}throw new Error(`Unknown IR type: ${I[0]}`)}const M={COLORED:1,UNCOLORED:2};class N{static MAX_PATTERN_SIZE=3e3;constructor(B,V,j,q,z){this.operatorList=B[2],this.matrix=B[3]||[1,0,0,1,0,0],this.bbox=B[4],this.xstep=B[5],this.ystep=B[6],this.paintType=B[7],this.tilingType=B[8],this.color=V,this.ctx=j,this.canvasGraphicsFactory=q,this.baseTransform=z}createPatternCanvas(B){const V=this.operatorList,j=this.bbox,q=this.xstep,z=this.ystep,$=this.paintType,ee=this.tilingType,ie=this.color,ae=this.canvasGraphicsFactory;(0,o.info)("TilingType: "+ee);const pe=j[0],he=j[1],be=j[2],xe=j[3],Ee=o.Util.singularValueDecompose2dScale(this.matrix),we=o.Util.singularValueDecompose2dScale(this.baseTransform),oe=[Ee[0]*we[0],Ee[1]*we[1]],se=this.getSizeAndScale(q,this.ctx.canvas.width,oe[0]),J=this.getSizeAndScale(z,this.ctx.canvas.height,oe[1]),Q=B.cachedCanvases.getCanvas("pattern",se.size,J.size,!0),Z=Q.context,K=ae.createCanvasGraphics(Z);K.groupLevel=B.groupLevel,this.setFillAndStrokeStyleToContext(K,$,ie);let ne=pe,ue=he,ye=be,fe=xe;return pe<0&&(ne=0,ye+=Math.abs(pe)),he<0&&(ue=0,fe+=Math.abs(he)),Z.translate(-(se.scale*ne),-(J.scale*ue)),K.transform(se.scale,0,0,J.scale,0,0),Z.save(),this.clipBbox(K,ne,ue,ye,fe),K.baseTransform=(0,u.getCurrentTransform)(K.ctx),K.executeOperatorList(V),K.endDrawing(),{canvas:Q.canvas,scaleX:se.scale,scaleY:J.scale,offsetX:ne,offsetY:ue}}getSizeAndScale(B,V,j){B=Math.abs(B);const q=Math.max(N.MAX_PATTERN_SIZE,V);let z=Math.ceil(B*j);return z>=q?z=q:j=z/B,{scale:j,size:z}}clipBbox(B,V,j,q,z){const $=q-V,ee=z-j;B.ctx.rect(V,j,$,ee),B.current.updateRectMinMax((0,u.getCurrentTransform)(B.ctx),[V,j,q,z]),B.clip(),B.endPath()}setFillAndStrokeStyleToContext(B,V,j){const q=B.ctx,z=B.current;switch(V){case M.COLORED:const $=this.ctx;q.fillStyle=$.fillStyle,q.strokeStyle=$.strokeStyle,z.fillColor=$.fillStyle,z.strokeColor=$.strokeStyle;break;case M.UNCOLORED:const ee=o.Util.makeHexColor(j[0],j[1],j[2]);q.fillStyle=ee,q.strokeStyle=ee,z.fillColor=ee,z.strokeColor=ee;break;default:throw new o.FormatError(`Unsupported paint type: ${V}`)}}getPattern(B,V,j,q){let z=j;q!==d.SHADING&&(z=o.Util.transform(z,V.baseTransform),this.matrix&&(z=o.Util.transform(z,this.matrix)));const $=this.createPatternCanvas(V);let ee=new DOMMatrix(z);ee=ee.translate($.offsetX,$.offsetY),ee=ee.scale(1/$.scaleX,1/$.scaleY);const ie=B.createPattern($.canvas,"repeat");return ie.setTransform(ee),ie}}t.TilingPattern=N}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=d,t.convertToRGBA=u,t.grayToRGBA=v;var o=n(1);function u(w){switch(w.kind){case o.ImageKind.GRAYSCALE_1BPP:return d(w);case o.ImageKind.RGB_24BPP:return f(w)}return null}function d({src:w,srcPos:E=0,dest:C,width:_,height:D,nonBlackColor:O=4294967295,inverseDecode:M=!1}){const N=o.FeatureTest.isLittleEndian?4278190080:255,[I,B]=M?[O,N]:[N,O],V=_>>3,j=_&7,q=w.length;C=new Uint32Array(C.buffer);let z=0;for(let $=0;$<D;$++){for(const ie=E+V;E<ie;E++){const ae=E<q?w[E]:255;C[z++]=ae&128?B:I,C[z++]=ae&64?B:I,C[z++]=ae&32?B:I,C[z++]=ae&16?B:I,C[z++]=ae&8?B:I,C[z++]=ae&4?B:I,C[z++]=ae&2?B:I,C[z++]=ae&1?B:I}if(j===0)continue;const ee=E<q?w[E++]:255;for(let ie=0;ie<j;ie++)C[z++]=ee&1<<7-ie?B:I}return{srcPos:E,destPos:z}}function f({src:w,srcPos:E=0,dest:C,destPos:_=0,width:D,height:O}){let M=0;const N=w.length>>2,I=new Uint32Array(w.buffer,E,N);if(o.FeatureTest.isLittleEndian){for(;M<N-2;M+=3,_+=4){const B=I[M],V=I[M+1],j=I[M+2];C[_]=B|4278190080,C[_+1]=B>>>24|V<<8|4278190080,C[_+2]=V>>>16|j<<16|4278190080,C[_+3]=j>>>8|4278190080}for(let B=M*4,V=w.length;B<V;B+=3)C[_++]=w[B]|w[B+1]<<8|w[B+2]<<16|4278190080}else{for(;M<N-2;M+=3,_+=4){const B=I[M],V=I[M+1],j=I[M+2];C[_]=B|255,C[_+1]=B<<24|V>>>8|255,C[_+2]=V<<16|j>>>16|255,C[_+3]=j<<8|255}for(let B=M*4,V=w.length;B<V;B+=3)C[_++]=w[B]<<24|w[B+1]<<16|w[B+2]<<8|255}return{srcPos:E,destPos:_}}function v(w,E){if(o.FeatureTest.isLittleEndian)for(let C=0,_=w.length;C<_;C++)E[C]=w[C]*65793|4278190080;else for(let C=0,_=w.length;C<_;C++)E[C]=w[C]*16843008|255}}),((e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const n=Object.create(null);t.GlobalWorkerOptions=n,n.workerPort=null,n.workerSrc=""}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var o=n(1);const u={DATA:1,ERROR:2},d={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function f(w){switch(w instanceof Error||typeof w=="object"&&w!==null||(0,o.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),w.name){case"AbortException":return new o.AbortException(w.message);case"MissingPDFException":return new o.MissingPDFException(w.message);case"PasswordException":return new o.PasswordException(w.message,w.code);case"UnexpectedResponseException":return new o.UnexpectedResponseException(w.message,w.status);case"UnknownErrorException":return new o.UnknownErrorException(w.message,w.details);default:return new o.UnknownErrorException(w.message,w.toString())}}class v{constructor(E,C,_){this.sourceName=E,this.targetName=C,this.comObj=_,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=D=>{const O=D.data;if(O.targetName!==this.sourceName)return;if(O.stream){this.#t(O);return}if(O.callback){const N=O.callbackId,I=this.callbackCapabilities[N];if(!I)throw new Error(`Cannot resolve callback ${N}`);if(delete this.callbackCapabilities[N],O.callback===u.DATA)I.resolve(O.data);else if(O.callback===u.ERROR)I.reject(f(O.reason));else throw new Error("Unexpected callback case");return}const M=this.actionHandler[O.action];if(!M)throw new Error(`Unknown action from worker: ${O.action}`);if(O.callbackId){const N=this.sourceName,I=O.sourceName;new Promise(function(B){B(M(O.data))}).then(function(B){_.postMessage({sourceName:N,targetName:I,callback:u.DATA,callbackId:O.callbackId,data:B})},function(B){_.postMessage({sourceName:N,targetName:I,callback:u.ERROR,callbackId:O.callbackId,reason:f(B)})});return}if(O.streamId){this.#e(O);return}M(O.data)},_.addEventListener("message",this._onComObjOnMessage)}on(E,C){const _=this.actionHandler;if(_[E])throw new Error(`There is already an actionName called "${E}"`);_[E]=C}send(E,C,_){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:E,data:C},_)}sendWithPromise(E,C,_){const D=this.callbackId++,O=new o.PromiseCapability;this.callbackCapabilities[D]=O;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:E,callbackId:D,data:C},_)}catch(M){O.reject(M)}return O.promise}sendWithStream(E,C,_,D){const O=this.streamId++,M=this.sourceName,N=this.targetName,I=this.comObj;return new ReadableStream({start:B=>{const V=new o.PromiseCapability;return this.streamControllers[O]={controller:B,startCall:V,pullCall:null,cancelCall:null,isClosed:!1},I.postMessage({sourceName:M,targetName:N,action:E,streamId:O,data:C,desiredSize:B.desiredSize},D),V.promise},pull:B=>{const V=new o.PromiseCapability;return this.streamControllers[O].pullCall=V,I.postMessage({sourceName:M,targetName:N,stream:d.PULL,streamId:O,desiredSize:B.desiredSize}),V.promise},cancel:B=>{(0,o.assert)(B instanceof Error,"cancel must have a valid reason");const V=new o.PromiseCapability;return this.streamControllers[O].cancelCall=V,this.streamControllers[O].isClosed=!0,I.postMessage({sourceName:M,targetName:N,stream:d.CANCEL,streamId:O,reason:f(B)}),V.promise}},_)}#e(E){const C=E.streamId,_=this.sourceName,D=E.sourceName,O=this.comObj,M=this,N=this.actionHandler[E.action],I={enqueue(B,V=1,j){if(this.isCancelled)return;const q=this.desiredSize;this.desiredSize-=V,q>0&&this.desiredSize<=0&&(this.sinkCapability=new o.PromiseCapability,this.ready=this.sinkCapability.promise),O.postMessage({sourceName:_,targetName:D,stream:d.ENQUEUE,streamId:C,chunk:B},j)},close(){this.isCancelled||(this.isCancelled=!0,O.postMessage({sourceName:_,targetName:D,stream:d.CLOSE,streamId:C}),delete M.streamSinks[C])},error(B){(0,o.assert)(B instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,O.postMessage({sourceName:_,targetName:D,stream:d.ERROR,streamId:C,reason:f(B)}))},sinkCapability:new o.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:E.desiredSize,ready:null};I.sinkCapability.resolve(),I.ready=I.sinkCapability.promise,this.streamSinks[C]=I,new Promise(function(B){B(N(E.data,I))}).then(function(){O.postMessage({sourceName:_,targetName:D,stream:d.START_COMPLETE,streamId:C,success:!0})},function(B){O.postMessage({sourceName:_,targetName:D,stream:d.START_COMPLETE,streamId:C,reason:f(B)})})}#t(E){const C=E.streamId,_=this.sourceName,D=E.sourceName,O=this.comObj,M=this.streamControllers[C],N=this.streamSinks[C];switch(E.stream){case d.START_COMPLETE:E.success?M.startCall.resolve():M.startCall.reject(f(E.reason));break;case d.PULL_COMPLETE:E.success?M.pullCall.resolve():M.pullCall.reject(f(E.reason));break;case d.PULL:if(!N){O.postMessage({sourceName:_,targetName:D,stream:d.PULL_COMPLETE,streamId:C,success:!0});break}N.desiredSize<=0&&E.desiredSize>0&&N.sinkCapability.resolve(),N.desiredSize=E.desiredSize,new Promise(function(I){I(N.onPull?.())}).then(function(){O.postMessage({sourceName:_,targetName:D,stream:d.PULL_COMPLETE,streamId:C,success:!0})},function(I){O.postMessage({sourceName:_,targetName:D,stream:d.PULL_COMPLETE,streamId:C,reason:f(I)})});break;case d.ENQUEUE:if((0,o.assert)(M,"enqueue should have stream controller"),M.isClosed)break;M.controller.enqueue(E.chunk);break;case d.CLOSE:if((0,o.assert)(M,"close should have stream controller"),M.isClosed)break;M.isClosed=!0,M.controller.close(),this.#n(M,C);break;case d.ERROR:(0,o.assert)(M,"error should have stream controller"),M.controller.error(f(E.reason)),this.#n(M,C);break;case d.CANCEL_COMPLETE:E.success?M.cancelCall.resolve():M.cancelCall.reject(f(E.reason)),this.#n(M,C);break;case d.CANCEL:if(!N)break;new Promise(function(I){I(N.onCancel?.(f(E.reason)))}).then(function(){O.postMessage({sourceName:_,targetName:D,stream:d.CANCEL_COMPLETE,streamId:C,success:!0})},function(I){O.postMessage({sourceName:_,targetName:D,stream:d.CANCEL_COMPLETE,streamId:C,reason:f(I)})}),N.sinkCapability.reject(f(E.reason)),N.isCancelled=!0,delete this.streamSinks[C];break;default:throw new Error("Unexpected stream case")}}async#n(E,C){await Promise.allSettled([E.startCall?.promise,E.pullCall?.promise,E.cancelCall?.promise]),delete this.streamControllers[C]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}t.MessageHandler=v}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var o=n(1);class u{#e;#t;constructor({parsedData:f,rawData:v}){this.#e=f,this.#t=v}getRaw(){return this.#t}get(f){return this.#e.get(f)??null}getAll(){return(0,o.objectFromMap)(this.#e)}has(f){return this.#e.has(f)}}t.Metadata=u}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var o=n(1),u=n(8);const d=Symbol("INTERNAL");class f{#e=!0;constructor(E,C){this.name=E,this.intent=C}get visible(){return this.#e}_setVisible(E,C){E!==d&&(0,o.unreachable)("Internal method `_setVisible` called."),this.#e=C}}class v{#e=null;#t=new Map;#n=null;#r=null;constructor(E){if(this.name=null,this.creator=null,E!==null){this.name=E.name,this.creator=E.creator,this.#r=E.order;for(const C of E.groups)this.#t.set(C.id,new f(C.name,C.intent));if(E.baseState==="OFF")for(const C of this.#t.values())C._setVisible(d,!1);for(const C of E.on)this.#t.get(C)._setVisible(d,!0);for(const C of E.off)this.#t.get(C)._setVisible(d,!1);this.#n=this.getHash()}}#o(E){const C=E.length;if(C<2)return!0;const _=E[0];for(let D=1;D<C;D++){const O=E[D];let M;if(Array.isArray(O))M=this.#o(O);else if(this.#t.has(O))M=this.#t.get(O).visible;else return(0,o.warn)(`Optional content group not found: ${O}`),!0;switch(_){case"And":if(!M)return!1;break;case"Or":if(M)return!0;break;case"Not":return!M;default:return!0}}return _==="And"}isVisible(E){if(this.#t.size===0)return!0;if(!E)return(0,o.warn)("Optional content group not defined."),!0;if(E.type==="OCG")return this.#t.has(E.id)?this.#t.get(E.id).visible:((0,o.warn)(`Optional content group not found: ${E.id}`),!0);if(E.type==="OCMD"){if(E.expression)return this.#o(E.expression);if(!E.policy||E.policy==="AnyOn"){for(const C of E.ids){if(!this.#t.has(C))return(0,o.warn)(`Optional content group not found: ${C}`),!0;if(this.#t.get(C).visible)return!0}return!1}else if(E.policy==="AllOn"){for(const C of E.ids){if(!this.#t.has(C))return(0,o.warn)(`Optional content group not found: ${C}`),!0;if(!this.#t.get(C).visible)return!1}return!0}else if(E.policy==="AnyOff"){for(const C of E.ids){if(!this.#t.has(C))return(0,o.warn)(`Optional content group not found: ${C}`),!0;if(!this.#t.get(C).visible)return!0}return!1}else if(E.policy==="AllOff"){for(const C of E.ids){if(!this.#t.has(C))return(0,o.warn)(`Optional content group not found: ${C}`),!0;if(this.#t.get(C).visible)return!1}return!0}return(0,o.warn)(`Unknown optional content policy ${E.policy}.`),!0}return(0,o.warn)(`Unknown group type ${E.type}.`),!0}setVisibility(E,C=!0){if(!this.#t.has(E)){(0,o.warn)(`Optional content group not found: ${E}`);return}this.#t.get(E)._setVisible(d,!!C),this.#e=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#r?this.#r.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?(0,o.objectFromMap)(this.#t):null}getGroup(E){return this.#t.get(E)||null}getHash(){if(this.#e!==null)return this.#e;const E=new u.MurmurHash3_64;for(const[C,_]of this.#t)E.update(`${C}:${_.visible}`);return this.#e=E.hexdigest()}}t.OptionalContentConfig=v}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var o=n(1),u=n(6);class d{constructor({length:E,initialData:C,progressiveDone:_=!1,contentDispositionFilename:D=null,disableRange:O=!1,disableStream:M=!1},N){if((0,o.assert)(N,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=_,this._contentDispositionFilename=D,C?.length>0){const I=C instanceof Uint8Array&&C.byteLength===C.buffer.byteLength?C.buffer:new Uint8Array(C).buffer;this._queuedChunks.push(I)}this._pdfDataRangeTransport=N,this._isStreamingSupported=!M,this._isRangeSupported=!O,this._contentLength=E,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((I,B)=>{this._onReceiveData({begin:I,chunk:B})}),this._pdfDataRangeTransport.addProgressListener((I,B)=>{this._onProgress({loaded:I,total:B})}),this._pdfDataRangeTransport.addProgressiveReadListener(I=>{this._onReceiveData({chunk:I})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:E,chunk:C}){const _=C instanceof Uint8Array&&C.byteLength===C.buffer.byteLength?C.buffer:new Uint8Array(C).buffer;if(E===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(_):this._queuedChunks.push(_);else{const D=this._rangeReaders.some(function(O){return O._begin!==E?!1:(O._enqueue(_),!0)});(0,o.assert)(D,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(E){E.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:E.loaded}):this._fullRequestReader?.onProgress?.({loaded:E.loaded,total:E.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(E){const C=this._rangeReaders.indexOf(E);C>=0&&this._rangeReaders.splice(C,1)}getFullReader(){(0,o.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const E=this._queuedChunks;return this._queuedChunks=null,new f(this,E,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(E,C){if(C<=this._progressiveDataLength)return null;const _=new v(this,E,C);return this._pdfDataRangeTransport.requestDataRange(E,C),this._rangeReaders.push(_),_}cancelAllRequests(E){this._fullRequestReader?.cancel(E);for(const C of this._rangeReaders.slice(0))C.cancel(E);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=d;class f{constructor(E,C,_=!1,D=null){this._stream=E,this._done=_||!1,this._filename=(0,u.isPdfFile)(D)?D:null,this._queuedChunks=C||[],this._loaded=0;for(const O of this._queuedChunks)this._loaded+=O.byteLength;this._requests=[],this._headersReady=Promise.resolve(),E._fullRequestReader=this,this.onProgress=null}_enqueue(E){this._done||(this._requests.length>0?this._requests.shift().resolve({value:E,done:!1}):this._queuedChunks.push(E),this._loaded+=E.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const E=new o.PromiseCapability;return this._requests.push(E),E.promise}cancel(E){this._done=!0;for(const C of this._requests)C.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class v{constructor(E,C,_){this._stream=E,this._begin=C,this._end=_,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(E){if(!this._done){if(this._requests.length===0)this._queuedChunk=E;else{this._requests.shift().resolve({value:E,done:!1});for(const _ of this._requests)_.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const C=this._queuedChunk;return this._queuedChunk=null,{value:C,done:!1}}if(this._done)return{value:void 0,done:!0};const E=new o.PromiseCapability;return this._requests.push(E),E.promise}cancel(E){this._done=!0;for(const C of this._requests)C.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var o=n(1),u=n(20);function d(_,D,O){return{method:"GET",headers:_,signal:O.signal,mode:"cors",credentials:D?"include":"same-origin",redirect:"follow"}}function f(_){const D=new Headers;for(const O in _){const M=_[O];M!==void 0&&D.append(O,M)}return D}function v(_){return _ instanceof Uint8Array?_.buffer:_ instanceof ArrayBuffer?_:((0,o.warn)(`getArrayBuffer - unexpected data format: ${_}`),new Uint8Array(_).buffer)}class w{constructor(D){this.source=D,this.isHttp=/^https?:/i.test(D.url),this.httpHeaders=this.isHttp&&D.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new E(this),this._fullRequestReader}getRangeReader(D,O){if(O<=this._progressiveDataLength)return null;const M=new C(this,D,O);return this._rangeRequestReaders.push(M),M}cancelAllRequests(D){this._fullRequestReader?.cancel(D);for(const O of this._rangeRequestReaders.slice(0))O.cancel(D)}}t.PDFFetchStream=w;class E{constructor(D){this._stream=D,this._reader=null,this._loaded=0,this._filename=null;const O=D.source;this._withCredentials=O.withCredentials||!1,this._contentLength=O.length,this._headersCapability=new o.PromiseCapability,this._disableRange=O.disableRange||!1,this._rangeChunkSize=O.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!O.disableStream,this._isRangeSupported=!O.disableRange,this._headers=f(this._stream.httpHeaders);const M=O.url;fetch(M,d(this._headers,this._withCredentials,this._abortController)).then(N=>{if(!(0,u.validateResponseStatus)(N.status))throw(0,u.createResponseStatusError)(N.status,M);this._reader=N.body.getReader(),this._headersCapability.resolve();const I=j=>N.headers.get(j),{allowRangeRequests:B,suggestedLength:V}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:I,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=B,this._contentLength=V||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(I),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new o.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:D,done:O}=await this._reader.read();return O?{value:D,done:O}:(this._loaded+=D.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:v(D),done:!1})}cancel(D){this._reader?.cancel(D),this._abortController.abort()}}class C{constructor(D,O,M){this._stream=D,this._reader=null,this._loaded=0;const N=D.source;this._withCredentials=N.withCredentials||!1,this._readCapability=new o.PromiseCapability,this._isStreamingSupported=!N.disableStream,this._abortController=new AbortController,this._headers=f(this._stream.httpHeaders),this._headers.append("Range",`bytes=${O}-${M-1}`);const I=N.url;fetch(I,d(this._headers,this._withCredentials,this._abortController)).then(B=>{if(!(0,u.validateResponseStatus)(B.status))throw(0,u.createResponseStatusError)(B.status,I);this._readCapability.resolve(),this._reader=B.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:D,done:O}=await this._reader.read();return O?{value:D,done:O}:(this._loaded+=D.byteLength,this.onProgress?.({loaded:this._loaded}),{value:v(D),done:!1})}cancel(D){this._reader?.cancel(D),this._abortController.abort()}}}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=w,t.extractFilenameFromHeader=v,t.validateRangeRequestCapabilities=f,t.validateResponseStatus=E;var o=n(1),u=n(21),d=n(6);function f({getResponseHeader:C,isHttp:_,rangeChunkSize:D,disableRange:O}){const M={allowRangeRequests:!1,suggestedLength:void 0},N=parseInt(C("Content-Length"),10);return!Number.isInteger(N)||(M.suggestedLength=N,N<=2*D)||O||!_||C("Accept-Ranges")!=="bytes"||(C("Content-Encoding")||"identity")!=="identity"||(M.allowRangeRequests=!0),M}function v(C){const _=C("Content-Disposition");if(_){let D=(0,u.getFilenameFromContentDispositionHeader)(_);if(D.includes("%"))try{D=decodeURIComponent(D)}catch{}if((0,d.isPdfFile)(D))return D}return null}function w(C,_){return C===404||C===0&&_.startsWith("file:")?new o.MissingPDFException('Missing PDF "'+_+'".'):new o.UnexpectedResponseException(`Unexpected server response (${C}) while retrieving PDF "${_}".`,C)}function E(C){return C===200||C===206}}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=u;var o=n(1);function u(d){let f=!0,v=w("filename\\*","i").exec(d);if(v){v=v[1];let N=D(v);return N=unescape(N),N=O(N),N=M(N),C(N)}if(v=_(d),v){const N=M(v);return C(N)}if(v=w("filename","i").exec(d),v){v=v[1];let N=D(v);return N=M(N),C(N)}function w(N,I){return new RegExp("(?:^|;)\\s*"+N+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',I)}function E(N,I){if(N){if(!/^[\x00-\xFF]+$/.test(I))return I;try{const B=new TextDecoder(N,{fatal:!0}),V=(0,o.stringToBytes)(I);I=B.decode(V),f=!1}catch{}}return I}function C(N){return f&&/[\x80-\xff]/.test(N)&&(N=E("utf-8",N),f&&(N=E("iso-8859-1",N))),N}function _(N){const I=[];let B;const V=w("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(B=V.exec(N))!==null;){let[,q,z,$]=B;if(q=parseInt(q,10),q in I){if(q===0)break;continue}I[q]=[z,$]}const j=[];for(let q=0;q<I.length&&q in I;++q){let[z,$]=I[q];$=D($),z&&($=unescape($),q===0&&($=O($))),j.push($)}return j.join("")}function D(N){if(N.startsWith('"')){const I=N.slice(1).split('\\"');for(let B=0;B<I.length;++B){const V=I[B].indexOf('"');V!==-1&&(I[B]=I[B].slice(0,V),I.length=B+1),I[B]=I[B].replaceAll(/\\(.)/g,"$1")}N=I.join('"')}return N}function O(N){const I=N.indexOf("'");if(I===-1)return N;const B=N.slice(0,I),j=N.slice(I+1).replace(/^[^']*'/,"");return E(B,j)}function M(N){return!N.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(N)?N:N.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(I,B,V,j){if(V==="q"||V==="Q")return j=j.replaceAll("_"," "),j=j.replaceAll(/=([0-9a-fA-F]{2})/g,function(q,z){return String.fromCharCode(parseInt(z,16))}),E(B,j);try{j=atob(j)}catch{}return E(B,j)})}return""}}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var o=n(1),u=n(20);const d=200,f=206;function v(D){const O=D.response;return typeof O!="string"?O:(0,o.stringToBytes)(O).buffer}class w{constructor(O,M={}){this.url=O,this.isHttp=/^https?:/i.test(O),this.httpHeaders=this.isHttp&&M.httpHeaders||Object.create(null),this.withCredentials=M.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(O,M,N){const I={begin:O,end:M};for(const B in N)I[B]=N[B];return this.request(I)}requestFull(O){return this.request(O)}request(O){const M=new XMLHttpRequest,N=this.currXhrId++,I=this.pendingRequests[N]={xhr:M};M.open("GET",this.url),M.withCredentials=this.withCredentials;for(const B in this.httpHeaders){const V=this.httpHeaders[B];V!==void 0&&M.setRequestHeader(B,V)}return this.isHttp&&"begin"in O&&"end"in O?(M.setRequestHeader("Range",`bytes=${O.begin}-${O.end-1}`),I.expectedStatus=f):I.expectedStatus=d,M.responseType="arraybuffer",O.onError&&(M.onerror=function(B){O.onError(M.status)}),M.onreadystatechange=this.onStateChange.bind(this,N),M.onprogress=this.onProgress.bind(this,N),I.onHeadersReceived=O.onHeadersReceived,I.onDone=O.onDone,I.onError=O.onError,I.onProgress=O.onProgress,M.send(null),N}onProgress(O,M){const N=this.pendingRequests[O];N&&N.onProgress?.(M)}onStateChange(O,M){const N=this.pendingRequests[O];if(!N)return;const I=N.xhr;if(I.readyState>=2&&N.onHeadersReceived&&(N.onHeadersReceived(),delete N.onHeadersReceived),I.readyState!==4||!(O in this.pendingRequests))return;if(delete this.pendingRequests[O],I.status===0&&this.isHttp){N.onError?.(I.status);return}const B=I.status||d;if(!(B===d&&N.expectedStatus===f)&&B!==N.expectedStatus){N.onError?.(I.status);return}const j=v(I);if(B===f){const q=I.getResponseHeader("Content-Range"),z=/bytes (\d+)-(\d+)\/(\d+)/.exec(q);N.onDone({begin:parseInt(z[1],10),chunk:j})}else j?N.onDone({begin:0,chunk:j}):N.onError?.(I.status)}getRequestXhr(O){return this.pendingRequests[O].xhr}isPendingRequest(O){return O in this.pendingRequests}abortRequest(O){const M=this.pendingRequests[O].xhr;delete this.pendingRequests[O],M.abort()}}class E{constructor(O){this._source=O,this._manager=new w(O.url,{httpHeaders:O.httpHeaders,withCredentials:O.withCredentials}),this._rangeChunkSize=O.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(O){const M=this._rangeRequestReaders.indexOf(O);M>=0&&this._rangeRequestReaders.splice(M,1)}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new C(this._manager,this._source),this._fullRequestReader}getRangeReader(O,M){const N=new _(this._manager,O,M);return N.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(N),N}cancelAllRequests(O){this._fullRequestReader?.cancel(O);for(const M of this._rangeRequestReaders.slice(0))M.cancel(O)}}t.PDFNetworkStream=E;class C{constructor(O,M){this._manager=O;const N={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=M.url,this._fullRequestId=O.requestFull(N),this._headersReceivedCapability=new o.PromiseCapability,this._disableRange=M.disableRange||!1,this._contentLength=M.length,this._rangeChunkSize=M.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const O=this._fullRequestId,M=this._manager.getRequestXhr(O),N=V=>M.getResponseHeader(V),{allowRangeRequests:I,suggestedLength:B}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:N,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});I&&(this._isRangeSupported=!0),this._contentLength=B||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(N),this._isRangeSupported&&this._manager.abortRequest(O),this._headersReceivedCapability.resolve()}_onDone(O){if(O&&(this._requests.length>0?this._requests.shift().resolve({value:O.chunk,done:!1}):this._cachedChunks.push(O.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const M of this._requests)M.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(O){this._storedError=(0,u.createResponseStatusError)(O,this._url),this._headersReceivedCapability.reject(this._storedError);for(const M of this._requests)M.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(O){this.onProgress?.({loaded:O.loaded,total:O.lengthComputable?O.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const O=new o.PromiseCapability;return this._requests.push(O),O.promise}cancel(O){this._done=!0,this._headersReceivedCapability.reject(O);for(const M of this._requests)M.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class _{constructor(O,M,N){this._manager=O;const I={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=O.url,this._requestId=O.requestRange(M,N,I),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(O){const M=O.chunk;this._requests.length>0?this._requests.shift().resolve({value:M,done:!1}):this._queuedChunk=M,this._done=!0;for(const N of this._requests)N.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(O){this._storedError=(0,u.createResponseStatusError)(O,this._url);for(const M of this._requests)M.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(O){this.isStreamingSupported||this.onProgress?.({loaded:O.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const M=this._queuedChunk;return this._queuedChunk=null,{value:M,done:!1}}if(this._done)return{value:void 0,done:!0};const O=new o.PromiseCapability;return this._requests.push(O),O.promise}cancel(O){this._done=!0;for(const M of this._requests)M.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var o=n(1),u=n(20);const d=/^file:\/\/\/[a-zA-Z]:\//;function f(N){const I=require$$5,B=I.parse(N);return B.protocol==="file:"||B.host?B:/^[a-z]:[/\\]/i.test(N)?I.parse(`file:///${N}`):(B.host||(B.protocol="file:"),B)}class v{constructor(I){this.source=I,this.url=f(I.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&I.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new O(this):new _(this),this._fullRequestReader}getRangeReader(I,B){if(B<=this._progressiveDataLength)return null;const V=this.isFsUrl?new M(this,I,B):new D(this,I,B);return this._rangeRequestReaders.push(V),V}cancelAllRequests(I){this._fullRequestReader?.cancel(I);for(const B of this._rangeRequestReaders.slice(0))B.cancel(I)}}t.PDFNodeStream=v;class w{constructor(I){this._url=I.url,this._done=!1,this._storedError=null,this.onProgress=null;const B=I.source;this._contentLength=B.length,this._loaded=0,this._filename=null,this._disableRange=B.disableRange||!1,this._rangeChunkSize=B.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!B.disableStream,this._isRangeSupported=!B.disableRange,this._readableStream=null,this._readCapability=new o.PromiseCapability,this._headersCapability=new o.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const I=this._readableStream.read();return I===null?(this._readCapability=new o.PromiseCapability,this.read()):(this._loaded+=I.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(I).buffer,done:!1})}cancel(I){if(!this._readableStream){this._error(I);return}this._readableStream.destroy(I)}_error(I){this._storedError=I,this._readCapability.resolve()}_setReadableStream(I){this._readableStream=I,I.on("readable",()=>{this._readCapability.resolve()}),I.on("end",()=>{I.destroy(),this._done=!0,this._readCapability.resolve()}),I.on("error",B=>{this._error(B)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new o.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class E{constructor(I){this._url=I.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new o.PromiseCapability;const B=I.source;this._isStreamingSupported=!B.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const I=this._readableStream.read();return I===null?(this._readCapability=new o.PromiseCapability,this.read()):(this._loaded+=I.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(I).buffer,done:!1})}cancel(I){if(!this._readableStream){this._error(I);return}this._readableStream.destroy(I)}_error(I){this._storedError=I,this._readCapability.resolve()}_setReadableStream(I){this._readableStream=I,I.on("readable",()=>{this._readCapability.resolve()}),I.on("end",()=>{I.destroy(),this._done=!0,this._readCapability.resolve()}),I.on("error",B=>{this._error(B)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function C(N,I){return{protocol:N.protocol,auth:N.auth,host:N.hostname,port:N.port,path:N.path,method:"GET",headers:I}}class _ extends w{constructor(I){super(I);const B=V=>{if(V.statusCode===404){const $=new o.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=$,this._headersCapability.reject($);return}this._headersCapability.resolve(),this._setReadableStream(V);const j=$=>this._readableStream.headers[$.toLowerCase()],{allowRangeRequests:q,suggestedLength:z}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:j,isHttp:I.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=q,this._contentLength=z||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(j)};if(this._request=null,this._url.protocol==="http:"){const V=require$$5;this._request=V.request(C(this._url,I.httpHeaders),B)}else{const V=require$$5;this._request=V.request(C(this._url,I.httpHeaders),B)}this._request.on("error",V=>{this._storedError=V,this._headersCapability.reject(V)}),this._request.end()}}class D extends E{constructor(I,B,V){super(I),this._httpHeaders={};for(const q in I.httpHeaders){const z=I.httpHeaders[q];z!==void 0&&(this._httpHeaders[q]=z)}this._httpHeaders.Range=`bytes=${B}-${V-1}`;const j=q=>{if(q.statusCode===404){const z=new o.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=z;return}this._setReadableStream(q)};if(this._request=null,this._url.protocol==="http:"){const q=require$$5;this._request=q.request(C(this._url,this._httpHeaders),j)}else{const q=require$$5;this._request=q.request(C(this._url,this._httpHeaders),j)}this._request.on("error",q=>{this._storedError=q}),this._request.end()}}class O extends w{constructor(I){super(I);let B=decodeURIComponent(this._url.path);d.test(this._url.href)&&(B=B.replace(/^\//,""));const V=require$$5;V.lstat(B,(j,q)=>{if(j){j.code==="ENOENT"&&(j=new o.MissingPDFException(`Missing PDF "${B}".`)),this._storedError=j,this._headersCapability.reject(j);return}this._contentLength=q.size,this._setReadableStream(V.createReadStream(B)),this._headersCapability.resolve()})}}class M extends E{constructor(I,B,V){super(I);let j=decodeURIComponent(this._url.path);d.test(this._url.href)&&(j=j.replace(/^\//,""));const q=require$$5;this._setReadableStream(q.createReadStream(j,{start:B,end:V-1}))}}}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var o=n(6),u=n(1);const d={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},f="http://www.w3.org/XML/1998/namespace",v="http://www.w3.org/1999/xlink",w=["butt","round","square"],E=["miter","round","bevel"],C=function(q,z="",$=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!$)return URL.createObjectURL(new Blob([q],{type:z}));const ee="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let ie=`data:${z};base64,`;for(let ae=0,pe=q.length;ae<pe;ae+=3){const he=q[ae]&255,be=q[ae+1]&255,xe=q[ae+2]&255,Ee=he>>2,we=(he&3)<<4|be>>4,oe=ae+1<pe?(be&15)<<2|xe>>6:64,se=ae+2<pe?xe&63:64;ie+=ee[Ee]+ee[we]+ee[oe]+ee[se]}return ie},_=(function(){const q=new Uint8Array([137,80,78,71,13,10,26,10]),z=12,$=new Int32Array(256);for(let xe=0;xe<256;xe++){let Ee=xe;for(let we=0;we<8;we++)Ee=Ee&1?3988292384^Ee>>1&2147483647:Ee>>1&2147483647;$[xe]=Ee}function ee(xe,Ee,we){let oe=-1;for(let se=Ee;se<we;se++){const J=(oe^xe[se])&255,Q=$[J];oe=oe>>>8^Q}return oe^-1}function ie(xe,Ee,we,oe){let se=oe;const J=Ee.length;we[se]=J>>24&255,we[se+1]=J>>16&255,we[se+2]=J>>8&255,we[se+3]=J&255,se+=4,we[se]=xe.charCodeAt(0)&255,we[se+1]=xe.charCodeAt(1)&255,we[se+2]=xe.charCodeAt(2)&255,we[se+3]=xe.charCodeAt(3)&255,se+=4,we.set(Ee,se),se+=Ee.length;const Q=ee(we,oe+4,se);we[se]=Q>>24&255,we[se+1]=Q>>16&255,we[se+2]=Q>>8&255,we[se+3]=Q&255}function ae(xe,Ee,we){let oe=1,se=0;for(let J=Ee;J<we;++J)oe=(oe+(xe[J]&255))%65521,se=(se+oe)%65521;return se<<16|oe}function pe(xe){if(!u.isNodeJS)return he(xe);try{const Ee=parseInt(process.versions.node)>=8?xe:Buffer.from(xe),we=require$$5.deflateSync(Ee,{level:9});return we instanceof Uint8Array?we:new Uint8Array(we)}catch(Ee){(0,u.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Ee)}return he(xe)}function he(xe){let Ee=xe.length;const we=65535,oe=Math.ceil(Ee/we),se=new Uint8Array(2+Ee+oe*5+4);let J=0;se[J++]=120,se[J++]=156;let Q=0;for(;Ee>we;)se[J++]=0,se[J++]=255,se[J++]=255,se[J++]=0,se[J++]=0,se.set(xe.subarray(Q,Q+we),J),J+=we,Q+=we,Ee-=we;se[J++]=1,se[J++]=Ee&255,se[J++]=Ee>>8&255,se[J++]=~Ee&65535&255,se[J++]=(~Ee&65535)>>8&255,se.set(xe.subarray(Q),J),J+=xe.length-Q;const Z=ae(xe,0,xe.length);return se[J++]=Z>>24&255,se[J++]=Z>>16&255,se[J++]=Z>>8&255,se[J++]=Z&255,se}function be(xe,Ee,we,oe){const se=xe.width,J=xe.height;let Q,Z,K;const ne=xe.data;switch(Ee){case u.ImageKind.GRAYSCALE_1BPP:Z=0,Q=1,K=se+7>>3;break;case u.ImageKind.RGB_24BPP:Z=2,Q=8,K=se*3;break;case u.ImageKind.RGBA_32BPP:Z=6,Q=8,K=se*4;break;default:throw new Error("invalid format")}const ue=new Uint8Array((1+K)*J);let ye=0,fe=0;for(let Se=0;Se<J;++Se)ue[ye++]=0,ue.set(ne.subarray(fe,fe+K),ye),fe+=K,ye+=K;if(Ee===u.ImageKind.GRAYSCALE_1BPP&&oe){ye=0;for(let Se=0;Se<J;Se++){ye++;for(let Ce=0;Ce<K;Ce++)ue[ye++]^=255}}const X=new Uint8Array([se>>24&255,se>>16&255,se>>8&255,se&255,J>>24&255,J>>16&255,J>>8&255,J&255,Q,Z,0,0,0]),le=pe(ue),de=q.length+z*3+X.length+le.length,ce=new Uint8Array(de);let me=0;return ce.set(q,me),me+=q.length,ie("IHDR",X,ce,me),me+=z+X.length,ie("IDATA",le,ce,me),me+=z+le.length,ie("IEND",new Uint8Array(0),ce,me),C(ce,"image/png",we)}return function(Ee,we,oe){const se=Ee.kind===void 0?u.ImageKind.GRAYSCALE_1BPP:Ee.kind;return be(Ee,se,we,oe)}})();class D{constructor(){this.fontSizeScale=1,this.fontWeight=d.fontWeight,this.fontSize=0,this.textMatrix=u.IDENTITY_MATRIX,this.fontMatrix=u.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=u.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=d.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(z,$){this.x=z,this.y=$}}function O(q){let z=[];const $=[];for(const ee of q){if(ee.fn==="save"){z.push({fnId:92,fn:"group",items:[]}),$.push(z),z=z.at(-1).items;continue}ee.fn==="restore"?z=$.pop():z.push(ee)}return z}function M(q){if(Number.isInteger(q))return q.toString();const z=q.toFixed(10);let $=z.length-1;if(z[$]!=="0")return z;do $--;while(z[$]==="0");return z.substring(0,z[$]==="."?$:$+1)}function N(q){if(q[4]===0&&q[5]===0){if(q[1]===0&&q[2]===0)return q[0]===1&&q[3]===1?"":`scale(${M(q[0])} ${M(q[3])})`;if(q[0]===q[3]&&q[1]===-q[2]){const z=Math.acos(q[0])*180/Math.PI;return`rotate(${M(z)})`}}else if(q[0]===1&&q[1]===0&&q[2]===0&&q[3]===1)return`translate(${M(q[4])} ${M(q[5])})`;return`matrix(${M(q[0])} ${M(q[1])} ${M(q[2])} ${M(q[3])} ${M(q[4])} ${M(q[5])})`}let I=0,B=0,V=0;class j{constructor(z,$,ee=!1){(0,o.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new o.DOMSVGFactory,this.current=new D,this.transformMatrix=u.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=z,this.objs=$,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!ee,this._operatorIdMapping=[];for(const ie in u.OPS)this._operatorIdMapping[u.OPS[ie]]=ie}getObject(z,$=null){return typeof z=="string"?z.startsWith("g_")?this.commonObjs.get(z):this.objs.get(z):$}save(){this.transformStack.push(this.transformMatrix);const z=this.current;this.extraStack.push(z),this.current=z.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(z){this.save(),this.executeOpTree(z),this.restore()}loadDependencies(z){const $=z.fnArray,ee=z.argsArray;for(let ie=0,ae=$.length;ie<ae;ie++)if($[ie]===u.OPS.dependency)for(const pe of ee[ie]){const he=pe.startsWith("g_")?this.commonObjs:this.objs,be=new Promise(xe=>{he.get(pe,xe)});this.current.dependencies.push(be)}return Promise.all(this.current.dependencies)}transform(z,$,ee,ie,ae,pe){const he=[z,$,ee,ie,ae,pe];this.transformMatrix=u.Util.transform(this.transformMatrix,he),this.tgrp=null}getSVG(z,$){this.viewport=$;const ee=this._initialize($);return this.loadDependencies(z).then(()=>(this.transformMatrix=u.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(z)),ee))}convertOpList(z){const $=this._operatorIdMapping,ee=z.argsArray,ie=z.fnArray,ae=[];for(let pe=0,he=ie.length;pe<he;pe++){const be=ie[pe];ae.push({fnId:be,fn:$[be],args:ee[pe]})}return O(ae)}executeOpTree(z){for(const $ of z){const ee=$.fn,ie=$.fnId,ae=$.args;switch(ie|0){case u.OPS.beginText:this.beginText();break;case u.OPS.dependency:break;case u.OPS.setLeading:this.setLeading(ae);break;case u.OPS.setLeadingMoveText:this.setLeadingMoveText(ae[0],ae[1]);break;case u.OPS.setFont:this.setFont(ae);break;case u.OPS.showText:this.showText(ae[0]);break;case u.OPS.showSpacedText:this.showText(ae[0]);break;case u.OPS.endText:this.endText();break;case u.OPS.moveText:this.moveText(ae[0],ae[1]);break;case u.OPS.setCharSpacing:this.setCharSpacing(ae[0]);break;case u.OPS.setWordSpacing:this.setWordSpacing(ae[0]);break;case u.OPS.setHScale:this.setHScale(ae[0]);break;case u.OPS.setTextMatrix:this.setTextMatrix(ae[0],ae[1],ae[2],ae[3],ae[4],ae[5]);break;case u.OPS.setTextRise:this.setTextRise(ae[0]);break;case u.OPS.setTextRenderingMode:this.setTextRenderingMode(ae[0]);break;case u.OPS.setLineWidth:this.setLineWidth(ae[0]);break;case u.OPS.setLineJoin:this.setLineJoin(ae[0]);break;case u.OPS.setLineCap:this.setLineCap(ae[0]);break;case u.OPS.setMiterLimit:this.setMiterLimit(ae[0]);break;case u.OPS.setFillRGBColor:this.setFillRGBColor(ae[0],ae[1],ae[2]);break;case u.OPS.setStrokeRGBColor:this.setStrokeRGBColor(ae[0],ae[1],ae[2]);break;case u.OPS.setStrokeColorN:this.setStrokeColorN(ae);break;case u.OPS.setFillColorN:this.setFillColorN(ae);break;case u.OPS.shadingFill:this.shadingFill(ae[0]);break;case u.OPS.setDash:this.setDash(ae[0],ae[1]);break;case u.OPS.setRenderingIntent:this.setRenderingIntent(ae[0]);break;case u.OPS.setFlatness:this.setFlatness(ae[0]);break;case u.OPS.setGState:this.setGState(ae[0]);break;case u.OPS.fill:this.fill();break;case u.OPS.eoFill:this.eoFill();break;case u.OPS.stroke:this.stroke();break;case u.OPS.fillStroke:this.fillStroke();break;case u.OPS.eoFillStroke:this.eoFillStroke();break;case u.OPS.clip:this.clip("nonzero");break;case u.OPS.eoClip:this.clip("evenodd");break;case u.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case u.OPS.paintImageXObject:this.paintImageXObject(ae[0]);break;case u.OPS.paintInlineImageXObject:this.paintInlineImageXObject(ae[0]);break;case u.OPS.paintImageMaskXObject:this.paintImageMaskXObject(ae[0]);break;case u.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(ae[0],ae[1]);break;case u.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case u.OPS.closePath:this.closePath();break;case u.OPS.closeStroke:this.closeStroke();break;case u.OPS.closeFillStroke:this.closeFillStroke();break;case u.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case u.OPS.nextLine:this.nextLine();break;case u.OPS.transform:this.transform(ae[0],ae[1],ae[2],ae[3],ae[4],ae[5]);break;case u.OPS.constructPath:this.constructPath(ae[0],ae[1]);break;case u.OPS.endPath:this.endPath();break;case 92:this.group($.items);break;default:(0,u.warn)(`Unimplemented operator ${ee}`);break}}}setWordSpacing(z){this.current.wordSpacing=z}setCharSpacing(z){this.current.charSpacing=z}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(z,$,ee,ie,ae,pe){const he=this.current;he.textMatrix=he.lineMatrix=[z,$,ee,ie,ae,pe],he.textMatrixScale=Math.hypot(z,$),he.x=he.lineX=0,he.y=he.lineY=0,he.xcoords=[],he.ycoords=[],he.tspan=this.svgFactory.createElement("svg:tspan"),he.tspan.setAttributeNS(null,"font-family",he.fontFamily),he.tspan.setAttributeNS(null,"font-size",`${M(he.fontSize)}px`),he.tspan.setAttributeNS(null,"y",M(-he.y)),he.txtElement=this.svgFactory.createElement("svg:text"),he.txtElement.append(he.tspan)}beginText(){const z=this.current;z.x=z.lineX=0,z.y=z.lineY=0,z.textMatrix=u.IDENTITY_MATRIX,z.lineMatrix=u.IDENTITY_MATRIX,z.textMatrixScale=1,z.tspan=this.svgFactory.createElement("svg:tspan"),z.txtElement=this.svgFactory.createElement("svg:text"),z.txtgrp=this.svgFactory.createElement("svg:g"),z.xcoords=[],z.ycoords=[]}moveText(z,$){const ee=this.current;ee.x=ee.lineX+=z,ee.y=ee.lineY+=$,ee.xcoords=[],ee.ycoords=[],ee.tspan=this.svgFactory.createElement("svg:tspan"),ee.tspan.setAttributeNS(null,"font-family",ee.fontFamily),ee.tspan.setAttributeNS(null,"font-size",`${M(ee.fontSize)}px`),ee.tspan.setAttributeNS(null,"y",M(-ee.y))}showText(z){const $=this.current,ee=$.font,ie=$.fontSize;if(ie===0)return;const ae=$.fontSizeScale,pe=$.charSpacing,he=$.wordSpacing,be=$.fontDirection,xe=$.textHScale*be,Ee=ee.vertical,we=Ee?1:-1,oe=ee.defaultVMetrics,se=ie*$.fontMatrix[0];let J=0;for(const K of z){if(K===null){J+=be*he;continue}else if(typeof K=="number"){J+=we*K*ie/1e3;continue}const ne=(K.isSpace?he:0)+pe,ue=K.fontChar;let ye,fe,X=K.width;if(Ee){let de;const ce=K.vmetric||oe;de=K.vmetric?ce[1]:X*.5,de=-de*se;const me=ce[2]*se;X=ce?-ce[0]:X,ye=de/ae,fe=(J+me)/ae}else ye=J/ae,fe=0;(K.isInFont||ee.missingFile)&&($.xcoords.push($.x+ye),Ee&&$.ycoords.push(-$.y+fe),$.tspan.textContent+=ue);const le=Ee?X*se-ne*be:X*se+ne*be;J+=le}$.tspan.setAttributeNS(null,"x",$.xcoords.map(M).join(" ")),Ee?$.tspan.setAttributeNS(null,"y",$.ycoords.map(M).join(" ")):$.tspan.setAttributeNS(null,"y",M(-$.y)),Ee?$.y-=J:$.x+=J*xe,$.tspan.setAttributeNS(null,"font-family",$.fontFamily),$.tspan.setAttributeNS(null,"font-size",`${M($.fontSize)}px`),$.fontStyle!==d.fontStyle&&$.tspan.setAttributeNS(null,"font-style",$.fontStyle),$.fontWeight!==d.fontWeight&&$.tspan.setAttributeNS(null,"font-weight",$.fontWeight);const Q=$.textRenderingMode&u.TextRenderingMode.FILL_STROKE_MASK;if(Q===u.TextRenderingMode.FILL||Q===u.TextRenderingMode.FILL_STROKE?($.fillColor!==d.fillColor&&$.tspan.setAttributeNS(null,"fill",$.fillColor),$.fillAlpha<1&&$.tspan.setAttributeNS(null,"fill-opacity",$.fillAlpha)):$.textRenderingMode===u.TextRenderingMode.ADD_TO_PATH?$.tspan.setAttributeNS(null,"fill","transparent"):$.tspan.setAttributeNS(null,"fill","none"),Q===u.TextRenderingMode.STROKE||Q===u.TextRenderingMode.FILL_STROKE){const K=1/($.textMatrixScale||1);this._setStrokeAttributes($.tspan,K)}let Z=$.textMatrix;$.textRise!==0&&(Z=Z.slice(),Z[5]+=$.textRise),$.txtElement.setAttributeNS(null,"transform",`${N(Z)} scale(${M(xe)}, -1)`),$.txtElement.setAttributeNS(f,"xml:space","preserve"),$.txtElement.append($.tspan),$.txtgrp.append($.txtElement),this._ensureTransformGroup().append($.txtElement)}setLeadingMoveText(z,$){this.setLeading(-$),this.moveText(z,$)}addFontStyle(z){if(!z.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const $=C(z.data,z.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${z.loadedName}"; src: url(${$}); }
`}setFont(z){const $=this.current,ee=this.commonObjs.get(z[0]);let ie=z[1];$.font=ee,this.embedFonts&&!ee.missingFile&&!this.embeddedFonts[ee.loadedName]&&(this.addFontStyle(ee),this.embeddedFonts[ee.loadedName]=ee),$.fontMatrix=ee.fontMatrix||u.FONT_IDENTITY_MATRIX;let ae="normal";ee.black?ae="900":ee.bold&&(ae="bold");const pe=ee.italic?"italic":"normal";ie<0?(ie=-ie,$.fontDirection=-1):$.fontDirection=1,$.fontSize=ie,$.fontFamily=ee.loadedName,$.fontWeight=ae,$.fontStyle=pe,$.tspan=this.svgFactory.createElement("svg:tspan"),$.tspan.setAttributeNS(null,"y",M(-$.y)),$.xcoords=[],$.ycoords=[]}endText(){const z=this.current;z.textRenderingMode&u.TextRenderingMode.ADD_TO_PATH_FLAG&&z.txtElement?.hasChildNodes()&&(z.element=z.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(z){z>0&&(this.current.lineWidth=z)}setLineCap(z){this.current.lineCap=w[z]}setLineJoin(z){this.current.lineJoin=E[z]}setMiterLimit(z){this.current.miterLimit=z}setStrokeAlpha(z){this.current.strokeAlpha=z}setStrokeRGBColor(z,$,ee){this.current.strokeColor=u.Util.makeHexColor(z,$,ee)}setFillAlpha(z){this.current.fillAlpha=z}setFillRGBColor(z,$,ee){this.current.fillColor=u.Util.makeHexColor(z,$,ee),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(z){this.current.strokeColor=this._makeColorN_Pattern(z)}setFillColorN(z){this.current.fillColor=this._makeColorN_Pattern(z)}shadingFill(z){const{width:$,height:ee}=this.viewport,ie=u.Util.inverseTransform(this.transformMatrix),[ae,pe,he,be]=u.Util.getAxialAlignedBoundingBox([0,0,$,ee],ie),xe=this.svgFactory.createElement("svg:rect");xe.setAttributeNS(null,"x",ae),xe.setAttributeNS(null,"y",pe),xe.setAttributeNS(null,"width",he-ae),xe.setAttributeNS(null,"height",be-pe),xe.setAttributeNS(null,"fill",this._makeShadingPattern(z)),this.current.fillAlpha<1&&xe.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(xe)}_makeColorN_Pattern(z){return z[0]==="TilingPattern"?this._makeTilingPattern(z):this._makeShadingPattern(z)}_makeTilingPattern(z){const $=z[1],ee=z[2],ie=z[3]||u.IDENTITY_MATRIX,[ae,pe,he,be]=z[4],xe=z[5],Ee=z[6],we=z[7],oe=`shading${V++}`,[se,J,Q,Z]=u.Util.normalizeRect([...u.Util.applyTransform([ae,pe],ie),...u.Util.applyTransform([he,be],ie)]),[K,ne]=u.Util.singularValueDecompose2dScale(ie),ue=xe*K,ye=Ee*ne,fe=this.svgFactory.createElement("svg:pattern");fe.setAttributeNS(null,"id",oe),fe.setAttributeNS(null,"patternUnits","userSpaceOnUse"),fe.setAttributeNS(null,"width",ue),fe.setAttributeNS(null,"height",ye),fe.setAttributeNS(null,"x",`${se}`),fe.setAttributeNS(null,"y",`${J}`);const X=this.svg,le=this.transformMatrix,de=this.current.fillColor,ce=this.current.strokeColor,me=this.svgFactory.create(Q-se,Z-J);if(this.svg=me,this.transformMatrix=ie,we===2){const Se=u.Util.makeHexColor(...$);this.current.fillColor=Se,this.current.strokeColor=Se}return this.executeOpTree(this.convertOpList(ee)),this.svg=X,this.transformMatrix=le,this.current.fillColor=de,this.current.strokeColor=ce,fe.append(me.childNodes[0]),this.defs.append(fe),`url(#${oe})`}_makeShadingPattern(z){switch(typeof z=="string"&&(z=this.objs.get(z)),z[0]){case"RadialAxial":const $=`shading${V++}`,ee=z[3];let ie;switch(z[1]){case"axial":const ae=z[4],pe=z[5];ie=this.svgFactory.createElement("svg:linearGradient"),ie.setAttributeNS(null,"id",$),ie.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),ie.setAttributeNS(null,"x1",ae[0]),ie.setAttributeNS(null,"y1",ae[1]),ie.setAttributeNS(null,"x2",pe[0]),ie.setAttributeNS(null,"y2",pe[1]);break;case"radial":const he=z[4],be=z[5],xe=z[6],Ee=z[7];ie=this.svgFactory.createElement("svg:radialGradient"),ie.setAttributeNS(null,"id",$),ie.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),ie.setAttributeNS(null,"cx",be[0]),ie.setAttributeNS(null,"cy",be[1]),ie.setAttributeNS(null,"r",Ee),ie.setAttributeNS(null,"fx",he[0]),ie.setAttributeNS(null,"fy",he[1]),ie.setAttributeNS(null,"fr",xe);break;default:throw new Error(`Unknown RadialAxial type: ${z[1]}`)}for(const ae of ee){const pe=this.svgFactory.createElement("svg:stop");pe.setAttributeNS(null,"offset",ae[0]),pe.setAttributeNS(null,"stop-color",ae[1]),ie.append(pe)}return this.defs.append(ie),`url(#${$})`;case"Mesh":return(0,u.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${z[0]}`)}}setDash(z,$){this.current.dashArray=z,this.current.dashPhase=$}constructPath(z,$){const ee=this.current;let ie=ee.x,ae=ee.y,pe=[],he=0;for(const be of z)switch(be|0){case u.OPS.rectangle:ie=$[he++],ae=$[he++];const xe=$[he++],Ee=$[he++],we=ie+xe,oe=ae+Ee;pe.push("M",M(ie),M(ae),"L",M(we),M(ae),"L",M(we),M(oe),"L",M(ie),M(oe),"Z");break;case u.OPS.moveTo:ie=$[he++],ae=$[he++],pe.push("M",M(ie),M(ae));break;case u.OPS.lineTo:ie=$[he++],ae=$[he++],pe.push("L",M(ie),M(ae));break;case u.OPS.curveTo:ie=$[he+4],ae=$[he+5],pe.push("C",M($[he]),M($[he+1]),M($[he+2]),M($[he+3]),M(ie),M(ae)),he+=6;break;case u.OPS.curveTo2:pe.push("C",M(ie),M(ae),M($[he]),M($[he+1]),M($[he+2]),M($[he+3])),ie=$[he+2],ae=$[he+3],he+=4;break;case u.OPS.curveTo3:ie=$[he+2],ae=$[he+3],pe.push("C",M($[he]),M($[he+1]),M(ie),M(ae),M(ie),M(ae)),he+=4;break;case u.OPS.closePath:pe.push("Z");break}pe=pe.join(" "),ee.path&&z.length>0&&z[0]!==u.OPS.rectangle&&z[0]!==u.OPS.moveTo?pe=ee.path.getAttributeNS(null,"d")+pe:(ee.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(ee.path)),ee.path.setAttributeNS(null,"d",pe),ee.path.setAttributeNS(null,"fill","none"),ee.element=ee.path,ee.setCurrentPoint(ie,ae)}endPath(){const z=this.current;if(z.path=null,!this.pendingClip)return;if(!z.element){this.pendingClip=null;return}const $=`clippath${I++}`,ee=this.svgFactory.createElement("svg:clipPath");ee.setAttributeNS(null,"id",$),ee.setAttributeNS(null,"transform",N(this.transformMatrix));const ie=z.element.cloneNode(!0);if(this.pendingClip==="evenodd"?ie.setAttributeNS(null,"clip-rule","evenodd"):ie.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,ee.append(ie),this.defs.append(ee),z.activeClipUrl){z.clipGroup=null;for(const ae of this.extraStack)ae.clipGroup=null;ee.setAttributeNS(null,"clip-path",z.activeClipUrl)}z.activeClipUrl=`url(#${$})`,this.tgrp=null}clip(z){this.pendingClip=z}closePath(){const z=this.current;if(z.path){const $=`${z.path.getAttributeNS(null,"d")}Z`;z.path.setAttributeNS(null,"d",$)}}setLeading(z){this.current.leading=-z}setTextRise(z){this.current.textRise=z}setTextRenderingMode(z){this.current.textRenderingMode=z}setHScale(z){this.current.textHScale=z/100}setRenderingIntent(z){}setFlatness(z){}setGState(z){for(const[$,ee]of z)switch($){case"LW":this.setLineWidth(ee);break;case"LC":this.setLineCap(ee);break;case"LJ":this.setLineJoin(ee);break;case"ML":this.setMiterLimit(ee);break;case"D":this.setDash(ee[0],ee[1]);break;case"RI":this.setRenderingIntent(ee);break;case"FL":this.setFlatness(ee);break;case"Font":this.setFont(ee);break;case"CA":this.setStrokeAlpha(ee);break;case"ca":this.setFillAlpha(ee);break;default:(0,u.warn)(`Unimplemented graphic state operator ${$}`);break}}fill(){const z=this.current;z.element&&(z.element.setAttributeNS(null,"fill",z.fillColor),z.element.setAttributeNS(null,"fill-opacity",z.fillAlpha),this.endPath())}stroke(){const z=this.current;z.element&&(this._setStrokeAttributes(z.element),z.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(z,$=1){const ee=this.current;let ie=ee.dashArray;$!==1&&ie.length>0&&(ie=ie.map(function(ae){return $*ae})),z.setAttributeNS(null,"stroke",ee.strokeColor),z.setAttributeNS(null,"stroke-opacity",ee.strokeAlpha),z.setAttributeNS(null,"stroke-miterlimit",M(ee.miterLimit)),z.setAttributeNS(null,"stroke-linecap",ee.lineCap),z.setAttributeNS(null,"stroke-linejoin",ee.lineJoin),z.setAttributeNS(null,"stroke-width",M($*ee.lineWidth)+"px"),z.setAttributeNS(null,"stroke-dasharray",ie.map(M).join(" ")),z.setAttributeNS(null,"stroke-dashoffset",M($*ee.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const z=this.svgFactory.createElement("svg:rect");z.setAttributeNS(null,"x","0"),z.setAttributeNS(null,"y","0"),z.setAttributeNS(null,"width","1px"),z.setAttributeNS(null,"height","1px"),z.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(z)}paintImageXObject(z){const $=this.getObject(z);if(!$){(0,u.warn)(`Dependent image with object ID ${z} is not ready yet`);return}this.paintInlineImageXObject($)}paintInlineImageXObject(z,$){const ee=z.width,ie=z.height,ae=_(z,this.forceDataSchema,!!$),pe=this.svgFactory.createElement("svg:rect");pe.setAttributeNS(null,"x","0"),pe.setAttributeNS(null,"y","0"),pe.setAttributeNS(null,"width",M(ee)),pe.setAttributeNS(null,"height",M(ie)),this.current.element=pe,this.clip("nonzero");const he=this.svgFactory.createElement("svg:image");he.setAttributeNS(v,"xlink:href",ae),he.setAttributeNS(null,"x","0"),he.setAttributeNS(null,"y",M(-ie)),he.setAttributeNS(null,"width",M(ee)+"px"),he.setAttributeNS(null,"height",M(ie)+"px"),he.setAttributeNS(null,"transform",`scale(${M(1/ee)} ${M(-1/ie)})`),$?$.append(he):this._ensureTransformGroup().append(he)}paintImageMaskXObject(z){const $=this.getObject(z.data,z);if($.bitmap){(0,u.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const ee=this.current,ie=$.width,ae=$.height,pe=ee.fillColor;ee.maskId=`mask${B++}`;const he=this.svgFactory.createElement("svg:mask");he.setAttributeNS(null,"id",ee.maskId);const be=this.svgFactory.createElement("svg:rect");be.setAttributeNS(null,"x","0"),be.setAttributeNS(null,"y","0"),be.setAttributeNS(null,"width",M(ie)),be.setAttributeNS(null,"height",M(ae)),be.setAttributeNS(null,"fill",pe),be.setAttributeNS(null,"mask",`url(#${ee.maskId})`),this.defs.append(he),this._ensureTransformGroup().append(be),this.paintInlineImageXObject($,he)}paintFormXObjectBegin(z,$){if(Array.isArray(z)&&z.length===6&&this.transform(z[0],z[1],z[2],z[3],z[4],z[5]),$){const ee=$[2]-$[0],ie=$[3]-$[1],ae=this.svgFactory.createElement("svg:rect");ae.setAttributeNS(null,"x",$[0]),ae.setAttributeNS(null,"y",$[1]),ae.setAttributeNS(null,"width",M(ee)),ae.setAttributeNS(null,"height",M(ie)),this.current.element=ae,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(z){const $=this.svgFactory.create(z.width,z.height),ee=this.svgFactory.createElement("svg:defs");$.append(ee),this.defs=ee;const ie=this.svgFactory.createElement("svg:g");return ie.setAttributeNS(null,"transform",N(z.transform)),$.append(ie),this.svg=ie,$}_ensureClipGroup(){if(!this.current.clipGroup){const z=this.svgFactory.createElement("svg:g");z.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(z),this.current.clipGroup=z}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",N(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}t.SVGGraphics=j}),((e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class n{static textContent(u){const d=[],f={items:d,styles:Object.create(null)};function v(w){if(!w)return;let E=null;const C=w.name;if(C==="#text")E=w.value;else if(n.shouldBuildText(C))w?.attributes?.textContent?E=w.attributes.textContent:w.value&&(E=w.value);else return;if(E!==null&&d.push({str:E}),!!w.children)for(const _ of w.children)v(_)}return v(u),f}static shouldBuildText(u){return!(u==="textarea"||u==="input"||u==="option"||u==="select")}}t.XfaText=n}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=N,t.updateTextLayer=I;var o=n(1),u=n(6);const d=1e5,f=30,v=.8,w=new Map;function E(B,V){let j;if(V&&o.FeatureTest.isOffscreenCanvasSupported)j=new OffscreenCanvas(B,B).getContext("2d",{alpha:!1});else{const q=document.createElement("canvas");q.width=q.height=B,j=q.getContext("2d",{alpha:!1})}return j}function C(B,V){const j=w.get(B);if(j)return j;const q=E(f,V);q.font=`${f}px ${B}`;const z=q.measureText("");let $=z.fontBoundingBoxAscent,ee=Math.abs(z.fontBoundingBoxDescent);if($){const ae=$/($+ee);return w.set(B,ae),q.canvas.width=q.canvas.height=0,ae}q.strokeStyle="red",q.clearRect(0,0,f,f),q.strokeText("g",0,0);let ie=q.getImageData(0,0,f,f).data;ee=0;for(let ae=ie.length-1-3;ae>=0;ae-=4)if(ie[ae]>0){ee=Math.ceil(ae/4/f);break}q.clearRect(0,0,f,f),q.strokeText("A",0,f),ie=q.getImageData(0,0,f,f).data,$=0;for(let ae=0,pe=ie.length;ae<pe;ae+=4)if(ie[ae]>0){$=f-Math.floor(ae/4/f);break}if(q.canvas.width=q.canvas.height=0,$){const ae=$/($+ee);return w.set(B,ae),ae}return w.set(B,v),v}function _(B,V,j){const q=document.createElement("span"),z={angle:0,canvasWidth:0,hasText:V.str!=="",hasEOL:V.hasEOL,fontSize:0};B._textDivs.push(q);const $=o.Util.transform(B._transform,V.transform);let ee=Math.atan2($[1],$[0]);const ie=j[V.fontName];ie.vertical&&(ee+=Math.PI/2);const ae=Math.hypot($[2],$[3]),pe=ae*C(ie.fontFamily,B._isOffscreenCanvasSupported);let he,be;ee===0?(he=$[4],be=$[5]-pe):(he=$[4]+pe*Math.sin(ee),be=$[5]-pe*Math.cos(ee));const xe="calc(var(--scale-factor)*",Ee=q.style;B._container===B._rootContainer?(Ee.left=`${(100*he/B._pageWidth).toFixed(2)}%`,Ee.top=`${(100*be/B._pageHeight).toFixed(2)}%`):(Ee.left=`${xe}${he.toFixed(2)}px)`,Ee.top=`${xe}${be.toFixed(2)}px)`),Ee.fontSize=`${xe}${ae.toFixed(2)}px)`,Ee.fontFamily=ie.fontFamily,z.fontSize=ae,q.setAttribute("role","presentation"),q.textContent=V.str,q.dir=V.dir,B._fontInspectorEnabled&&(q.dataset.fontName=V.fontName),ee!==0&&(z.angle=ee*(180/Math.PI));let we=!1;if(V.str.length>1)we=!0;else if(V.str!==" "&&V.transform[0]!==V.transform[3]){const oe=Math.abs(V.transform[0]),se=Math.abs(V.transform[3]);oe!==se&&Math.max(oe,se)/Math.min(oe,se)>1.5&&(we=!0)}we&&(z.canvasWidth=ie.vertical?V.height:V.width),B._textDivProperties.set(q,z),B._isReadableStream&&B._layoutText(q)}function D(B){const{div:V,scale:j,properties:q,ctx:z,prevFontSize:$,prevFontFamily:ee}=B,{style:ie}=V;let ae="";if(q.canvasWidth!==0&&q.hasText){const{fontFamily:pe}=ie,{canvasWidth:he,fontSize:be}=q;($!==be||ee!==pe)&&(z.font=`${be*j}px ${pe}`,B.prevFontSize=be,B.prevFontFamily=pe);const{width:xe}=z.measureText(V.textContent);xe>0&&(ae=`scaleX(${he*j/xe})`)}q.angle!==0&&(ae=`rotate(${q.angle}deg) ${ae}`),ae.length>0&&(ie.transform=ae)}function O(B){if(B._canceled)return;const V=B._textDivs,j=B._capability;if(V.length>d){j.resolve();return}if(!B._isReadableStream)for(const z of V)B._layoutText(z);j.resolve()}class M{constructor({textContentSource:V,container:j,viewport:q,textDivs:z,textDivProperties:$,textContentItemsStr:ee,isOffscreenCanvasSupported:ie}){this._textContentSource=V,this._isReadableStream=V instanceof ReadableStream,this._container=this._rootContainer=j,this._textDivs=z||[],this._textContentItemsStr=ee||[],this._isOffscreenCanvasSupported=ie,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=$||new WeakMap,this._canceled=!1,this._capability=new o.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:q.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:E(0,ie)};const{pageWidth:ae,pageHeight:pe,pageX:he,pageY:be}=q.rawDims;this._transform=[1,0,0,-1,-he,be+pe],this._pageWidth=ae,this._pageHeight=pe,(0,u.setLayerDimensions)(j,q),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new o.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new o.AbortException("TextLayer task cancelled."))}_processItems(V,j){for(const q of V){if(q.str===void 0){if(q.type==="beginMarkedContentProps"||q.type==="beginMarkedContent"){const z=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),q.id!==null&&this._container.setAttribute("id",`${q.id}`),z.append(this._container)}else q.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(q.str),_(this,q,j)}}_layoutText(V){const j=this._layoutTextParams.properties=this._textDivProperties.get(V);if(this._layoutTextParams.div=V,D(this._layoutTextParams),j.hasText&&this._container.append(V),j.hasEOL){const q=document.createElement("br");q.setAttribute("role","presentation"),this._container.append(q)}}_render(){const V=new o.PromiseCapability;let j=Object.create(null);if(this._isReadableStream){const q=()=>{this._reader.read().then(({value:z,done:$})=>{if($){V.resolve();return}Object.assign(j,z.styles),this._processItems(z.items,j),q()},V.reject)};this._reader=this._textContentSource.getReader(),q()}else if(this._textContentSource){const{items:q,styles:z}=this._textContentSource;this._processItems(q,z),V.resolve()}else throw new Error('No "textContentSource" parameter specified.');V.promise.then(()=>{j=null,O(this)},this._capability.reject)}}t.TextLayerRenderTask=M;function N(B){!B.textContentSource&&(B.textContent||B.textContentStream)&&((0,u.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),B.textContentSource=B.textContent||B.textContentStream);const{container:V,viewport:j}=B,q=getComputedStyle(V),z=q.getPropertyValue("visibility"),$=parseFloat(q.getPropertyValue("--scale-factor"));z==="visible"&&(!$||Math.abs($-j.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const ee=new M(B);return ee._render(),ee}function I({container:B,viewport:V,textDivs:j,textDivProperties:q,isOffscreenCanvasSupported:z,mustRotate:$=!0,mustRescale:ee=!0}){if($&&(0,u.setLayerDimensions)(B,{rotation:V.rotation}),ee){const ie=E(0,z),pe={prevFontSize:null,prevFontFamily:null,div:null,scale:V.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:ie};for(const he of j)pe.properties=q.get(he),pe.div=he,D(pe)}}}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var o=n(1),u=n(4),d=n(28),f=n(33),v=n(6),w=n(34);class E{#e;#t=!1;#n=null;#r=this.pointerup.bind(this);#o=this.pointerdown.bind(this);#a=new Map;#s=!1;#l=!1;#c=!1;#i;static _initialized=!1;constructor({uiManager:_,pageIndex:D,div:O,accessibilityManager:M,annotationLayer:N,viewport:I,l10n:B}){const V=[d.FreeTextEditor,f.InkEditor,w.StampEditor];if(!E._initialized){E._initialized=!0;for(const j of V)j.initialize(B)}_.registerEditorTypes(V),this.#i=_,this.pageIndex=D,this.div=O,this.#e=M,this.#n=N,this.viewport=I,this.#i.addLayer(this)}get isEmpty(){return this.#a.size===0}updateToolbar(_){this.#i.updateToolbar(_)}updateMode(_=this.#i.getMode()){this.#p(),_===o.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),_!==o.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",_===o.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",_===o.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",_===o.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(_){if(!_&&this.#i.getMode()!==o.AnnotationEditorType.INK)return;if(!_){for(const O of this.#a.values())if(O.isEmpty()){O.setInBackground();return}}this.#d({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(_){this.#i.setEditingState(_)}addCommands(_){this.#i.addCommands(_)}enable(){this.div.style.pointerEvents="auto";const _=new Set;for(const O of this.#a.values())O.enableEditing(),O.annotationElementId&&_.add(O.annotationElementId);if(!this.#n)return;const D=this.#n.getEditableAnnotations();for(const O of D){if(O.hide(),this.#i.isDeletedAnnotationElement(O.data.id)||_.has(O.data.id))continue;const M=this.deserialize(O);M&&(this.addOrRebuild(M),M.enableEditing())}}disable(){this.#c=!0,this.div.style.pointerEvents="none";const _=new Set;for(const D of this.#a.values()){if(D.disableEditing(),!D.annotationElementId||D.serialize()!==null){_.add(D.annotationElementId);continue}this.getEditableAnnotation(D.annotationElementId)?.show(),D.remove()}if(this.#n){const D=this.#n.getEditableAnnotations();for(const O of D){const{id:M}=O.data;_.has(M)||this.#i.isDeletedAnnotationElement(M)||O.show()}}this.#p(),this.isEmpty&&(this.div.hidden=!0),this.#c=!1}getEditableAnnotation(_){return this.#n?.getEditableAnnotation(_)||null}setActiveEditor(_){this.#i.getActive()!==_&&this.#i.setActiveEditor(_)}enableClick(){this.div.addEventListener("pointerdown",this.#o),this.div.addEventListener("pointerup",this.#r)}disableClick(){this.div.removeEventListener("pointerdown",this.#o),this.div.removeEventListener("pointerup",this.#r)}attach(_){this.#a.set(_.id,_);const{annotationElementId:D}=_;D&&this.#i.isDeletedAnnotationElement(D)&&this.#i.removeDeletedAnnotationElement(_)}detach(_){this.#a.delete(_.id),this.#e?.removePointerInTextLayer(_.contentDiv),!this.#c&&_.annotationElementId&&this.#i.addDeletedAnnotationElement(_)}remove(_){this.detach(_),this.#i.removeEditor(_),_.div.contains(document.activeElement)&&setTimeout(()=>{this.#i.focusMainContainer()},0),_.div.remove(),_.isAttachedToDOM=!1,this.#l||this.addInkEditorIfNeeded(!1)}changeParent(_){_.parent!==this&&(_.annotationElementId&&(this.#i.addDeletedAnnotationElement(_.annotationElementId),u.AnnotationEditor.deleteAnnotationElement(_),_.annotationElementId=null),this.attach(_),_.parent?.detach(_),_.setParent(this),_.div&&_.isAttachedToDOM&&(_.div.remove(),this.div.append(_.div)))}add(_){if(this.changeParent(_),this.#i.addEditor(_),this.attach(_),!_.isAttachedToDOM){const D=_.render();this.div.append(D),_.isAttachedToDOM=!0}_.fixAndSetPosition(),_.onceAdded(),this.#i.addToAnnotationStorage(_)}moveEditorInDOM(_){if(!_.isAttachedToDOM)return;const{activeElement:D}=document;_.div.contains(D)&&(_._focusEventsAllowed=!1,setTimeout(()=>{_.div.contains(document.activeElement)?_._focusEventsAllowed=!0:(_.div.addEventListener("focusin",()=>{_._focusEventsAllowed=!0},{once:!0}),D.focus())},0)),_._structTreeParentId=this.#e?.moveElementInDOM(this.div,_.div,_.contentDiv,!0)}addOrRebuild(_){_.needsToBeRebuilt()?_.rebuild():this.add(_)}addUndoableEditor(_){const D=()=>_._uiManager.rebuild(_),O=()=>{_.remove()};this.addCommands({cmd:D,undo:O,mustExec:!1})}getNextId(){return this.#i.getId()}#f(_){switch(this.#i.getMode()){case o.AnnotationEditorType.FREETEXT:return new d.FreeTextEditor(_);case o.AnnotationEditorType.INK:return new f.InkEditor(_);case o.AnnotationEditorType.STAMP:return new w.StampEditor(_)}return null}pasteEditor(_,D){this.#i.updateToolbar(_),this.#i.updateMode(_);const{offsetX:O,offsetY:M}=this.#h(),N=this.getNextId(),I=this.#f({parent:this,id:N,x:O,y:M,uiManager:this.#i,isCentered:!0,...D});I&&this.add(I)}deserialize(_){switch(_.annotationType??_.annotationEditorType){case o.AnnotationEditorType.FREETEXT:return d.FreeTextEditor.deserialize(_,this,this.#i);case o.AnnotationEditorType.INK:return f.InkEditor.deserialize(_,this,this.#i);case o.AnnotationEditorType.STAMP:return w.StampEditor.deserialize(_,this,this.#i)}return null}#d(_,D){const O=this.getNextId(),M=this.#f({parent:this,id:O,x:_.offsetX,y:_.offsetY,uiManager:this.#i,isCentered:D});return M&&this.add(M),M}#h(){const{x:_,y:D,width:O,height:M}=this.div.getBoundingClientRect(),N=Math.max(0,_),I=Math.max(0,D),B=Math.min(window.innerWidth,_+O),V=Math.min(window.innerHeight,D+M),j=(N+B)/2-_,q=(I+V)/2-D,[z,$]=this.viewport.rotation%180===0?[j,q]:[q,j];return{offsetX:z,offsetY:$}}addNewEditor(){this.#d(this.#h(),!0)}setSelected(_){this.#i.setSelected(_)}toggleSelected(_){this.#i.toggleSelected(_)}isSelected(_){return this.#i.isSelected(_)}unselect(_){this.#i.unselect(_)}pointerup(_){const{isMac:D}=o.FeatureTest.platform;if(!(_.button!==0||_.ctrlKey&&D)&&_.target===this.div&&this.#s){if(this.#s=!1,!this.#t){this.#t=!0;return}if(this.#i.getMode()===o.AnnotationEditorType.STAMP){this.#i.unselectAll();return}this.#d(_,!1)}}pointerdown(_){if(this.#s){this.#s=!1;return}const{isMac:D}=o.FeatureTest.platform;if(_.button!==0||_.ctrlKey&&D||_.target!==this.div)return;this.#s=!0;const O=this.#i.getActive();this.#t=!O||O.isEmpty()}findNewParent(_,D,O){const M=this.#i.findParent(D,O);return M===null||M===this?!1:(M.changeParent(_),!0)}destroy(){this.#i.getActive()?.parent===this&&(this.#i.commitOrRemove(),this.#i.setActiveEditor(null));for(const _ of this.#a.values())this.#e?.removePointerInTextLayer(_.contentDiv),_.setParent(null),_.isAttachedToDOM=!1,_.div.remove();this.div=null,this.#a.clear(),this.#i.removeLayer(this)}#p(){this.#l=!0;for(const _ of this.#a.values())_.isEmpty()&&_.remove();this.#l=!1}render({viewport:_}){this.viewport=_,(0,v.setLayerDimensions)(this.div,_);for(const D of this.#i.getEditors(this.pageIndex))this.add(D);this.updateMode()}update({viewport:_}){this.#i.commitOrRemove(),this.viewport=_,(0,v.setLayerDimensions)(this.div,{rotation:_.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:_,pageHeight:D}=this.viewport.rawDims;return[_,D]}}t.AnnotationEditorLayer=E}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var o=n(1),u=n(5),d=n(4),f=n(29);class v extends d.AnnotationEditor{#e=this.editorDivBlur.bind(this);#t=this.editorDivFocus.bind(this);#n=this.editorDivInput.bind(this);#r=this.editorDivKeydown.bind(this);#o;#a="";#s=`${this.id}-editor`;#l;#c=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const E=v.prototype,C=O=>O.isEmpty(),_=u.AnnotationEditorUIManager.TRANSLATE_SMALL,D=u.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,o.shadow)(this,"_keyboardManager",new u.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],E.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],E.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],E._translateEmpty,{args:[-_,0],checker:C}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],E._translateEmpty,{args:[-D,0],checker:C}],[["ArrowRight","mac+ArrowRight"],E._translateEmpty,{args:[_,0],checker:C}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],E._translateEmpty,{args:[D,0],checker:C}],[["ArrowUp","mac+ArrowUp"],E._translateEmpty,{args:[0,-_],checker:C}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],E._translateEmpty,{args:[0,-D],checker:C}],[["ArrowDown","mac+ArrowDown"],E._translateEmpty,{args:[0,_],checker:C}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],E._translateEmpty,{args:[0,D],checker:C}]]))}static _type="freetext";constructor(E){super({...E,name:"freeTextEditor"}),this.#o=E.color||v._defaultColor||d.AnnotationEditor._defaultLineColor,this.#l=E.fontSize||v._defaultFontSize}static initialize(E){d.AnnotationEditor.initialize(E,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const C=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(C.getPropertyValue("--freetext-padding"))}static updateDefaultParams(E,C){switch(E){case o.AnnotationEditorParamsType.FREETEXT_SIZE:v._defaultFontSize=C;break;case o.AnnotationEditorParamsType.FREETEXT_COLOR:v._defaultColor=C;break}}updateParams(E,C){switch(E){case o.AnnotationEditorParamsType.FREETEXT_SIZE:this.#i(C);break;case o.AnnotationEditorParamsType.FREETEXT_COLOR:this.#f(C);break}}static get defaultPropertiesToUpdate(){return[[o.AnnotationEditorParamsType.FREETEXT_SIZE,v._defaultFontSize],[o.AnnotationEditorParamsType.FREETEXT_COLOR,v._defaultColor||d.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[o.AnnotationEditorParamsType.FREETEXT_SIZE,this.#l],[o.AnnotationEditorParamsType.FREETEXT_COLOR,this.#o]]}#i(E){const C=D=>{this.editorDiv.style.fontSize=`calc(${D}px * var(--scale-factor))`,this.translate(0,-(D-this.#l)*this.parentScale),this.#l=D,this.#h()},_=this.#l;this.addCommands({cmd:()=>{C(E)},undo:()=>{C(_)},mustExec:!0,type:o.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#f(E){const C=this.#o;this.addCommands({cmd:()=>{this.#o=this.editorDiv.style.color=E},undo:()=>{this.#o=this.editorDiv.style.color=C},mustExec:!0,type:o.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(E,C){this._uiManager.translateSelectedEditors(E,C,!0)}getInitialTranslation(){const E=this.parentScale;return[-v._internalPadding*E,-(v._internalPadding+this.#l)*E]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(o.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#r),this.editorDiv.addEventListener("focus",this.#t),this.editorDiv.addEventListener("blur",this.#e),this.editorDiv.addEventListener("input",this.#n))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#s),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#r),this.editorDiv.removeEventListener("focus",this.#t),this.editorDiv.removeEventListener("blur",this.#e),this.editorDiv.removeEventListener("input",this.#n),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(E){this._focusEventsAllowed&&(super.focusin(E),E.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){if(this.width){this.#m();return}this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}#d(){const E=this.editorDiv.getElementsByTagName("div");if(E.length===0)return this.editorDiv.innerText;const C=[];for(const _ of E)C.push(_.innerText.replace(/\r\n?|\n/,""));return C.join(`
`)}#h(){const[E,C]=this.parentDimensions;let _;if(this.isAttachedToDOM)_=this.div.getBoundingClientRect();else{const{currentLayer:D,div:O}=this,M=O.style.display;O.style.display="hidden",D.div.append(this.div),_=O.getBoundingClientRect(),O.remove(),O.style.display=M}this.rotation%180===this.parentRotation%180?(this.width=_.width/E,this.height=_.height/C):(this.width=_.height/E,this.height=_.width/C),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const E=this.#a,C=this.#a=this.#d().trimEnd();if(E===C)return;const _=D=>{if(this.#a=D,!D){this.remove();return}this.#p(),this._uiManager.rebuild(this),this.#h()};this.addCommands({cmd:()=>{_(C)},undo:()=>{_(E)},mustExec:!1}),this.#h()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(E){this.enterInEditMode()}keydown(E){E.target===this.div&&E.key==="Enter"&&(this.enterInEditMode(),E.preventDefault())}editorDivKeydown(E){v._keyboardManager.exec(this,E)}editorDivFocus(E){this.isEditing=!0}editorDivBlur(E){this.isEditing=!1}editorDivInput(E){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let E,C;this.width&&(E=this.x,C=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#s),this.enableEditing(),d.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(D=>this.editorDiv?.setAttribute("aria-label",D)),d.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(D=>this.editorDiv?.setAttribute("default-content",D)),this.editorDiv.contentEditable=!0;const{style:_}=this.editorDiv;if(_.fontSize=`calc(${this.#l}px * var(--scale-factor))`,_.color=this.#o,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,u.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[D,O]=this.parentDimensions;if(this.annotationElementId){const{position:M}=this.#c;let[N,I]=this.getInitialTranslation();[N,I]=this.pageTranslationToScreen(N,I);const[B,V]=this.pageDimensions,[j,q]=this.pageTranslation;let z,$;switch(this.rotation){case 0:z=E+(M[0]-j)/B,$=C+this.height-(M[1]-q)/V;break;case 90:z=E+(M[0]-j)/B,$=C-(M[1]-q)/V,[N,I]=[I,-N];break;case 180:z=E-this.width+(M[0]-j)/B,$=C-(M[1]-q)/V,[N,I]=[-N,-I];break;case 270:z=E+(M[0]-j-this.height*V)/B,$=C+(M[1]-q-this.width*B)/V,[N,I]=[-I,N];break}this.setAt(z*D,$*O,N,I)}else this.setAt(E*D,C*O,this.width*D,this.height*O);this.#p(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#p(){if(this.editorDiv.replaceChildren(),!!this.#a)for(const E of this.#a.split(`
`)){const C=document.createElement("div");C.append(E?document.createTextNode(E):document.createElement("br")),this.editorDiv.append(C)}}get contentDiv(){return this.editorDiv}static deserialize(E,C,_){let D=null;if(E instanceof f.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:M,fontColor:N},rect:I,rotation:B,id:V},textContent:j,textPosition:q,parent:{page:{pageNumber:z}}}=E;if(!j||j.length===0)return null;D=E={annotationType:o.AnnotationEditorType.FREETEXT,color:Array.from(N),fontSize:M,value:j.join(`
`),position:q,pageIndex:z-1,rect:I,rotation:B,id:V,deleted:!1}}const O=super.deserialize(E,C,_);return O.#l=E.fontSize,O.#o=o.Util.makeHexColor(...E.color),O.#a=E.value,O.annotationElementId=E.id||null,O.#c=D,O}serialize(E=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const C=v._internalPadding*this.parentScale,_=this.getRect(C,C),D=d.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#o),O={annotationType:o.AnnotationEditorType.FREETEXT,color:D,fontSize:this.#l,value:this.#a,pageIndex:this.pageIndex,rect:_,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return E?O:this.annotationElementId&&!this.#v(O)?null:(O.id=this.annotationElementId,O)}#v(E){const{value:C,fontSize:_,color:D,rect:O,pageIndex:M}=this.#c;return E.value!==C||E.fontSize!==_||E.rect.some((N,I)=>Math.abs(N-O[I])>=1)||E.color.some((N,I)=>N!==D[I])||E.pageIndex!==M}#m(E=!1){if(!this.annotationElementId)return;if(this.#h(),!E&&(this.width===0||this.height===0)){setTimeout(()=>this.#m(!0),0);return}const C=v._internalPadding*this.parentScale;this.#c.rect=this.getRect(C,C)}}t.FreeTextEditor=v}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StampAnnotationElement=t.InkAnnotationElement=t.FreeTextAnnotationElement=t.AnnotationLayer=void 0;var o=n(1),u=n(6),d=n(3),f=n(30),v=n(31),w=n(32);const E=1e3,C=9,_=new WeakSet;function D(fe){return{width:fe[2]-fe[0],height:fe[3]-fe[1]}}class O{static create(X){switch(X.data.annotationType){case o.AnnotationType.LINK:return new N(X);case o.AnnotationType.TEXT:return new I(X);case o.AnnotationType.WIDGET:switch(X.data.fieldType){case"Tx":return new V(X);case"Btn":return X.data.radioButton?new z(X):X.data.checkBox?new q(X):new $(X);case"Ch":return new ee(X);case"Sig":return new j(X)}return new B(X);case o.AnnotationType.POPUP:return new ie(X);case o.AnnotationType.FREETEXT:return new pe(X);case o.AnnotationType.LINE:return new he(X);case o.AnnotationType.SQUARE:return new be(X);case o.AnnotationType.CIRCLE:return new xe(X);case o.AnnotationType.POLYLINE:return new Ee(X);case o.AnnotationType.CARET:return new oe(X);case o.AnnotationType.INK:return new se(X);case o.AnnotationType.POLYGON:return new we(X);case o.AnnotationType.HIGHLIGHT:return new J(X);case o.AnnotationType.UNDERLINE:return new Q(X);case o.AnnotationType.SQUIGGLY:return new Z(X);case o.AnnotationType.STRIKEOUT:return new K(X);case o.AnnotationType.STAMP:return new ne(X);case o.AnnotationType.FILEATTACHMENT:return new ue(X);default:return new M(X)}}}class M{#e=!1;constructor(X,{isRenderable:le=!1,ignoreBorder:de=!1,createQuadrilaterals:ce=!1}={}){this.isRenderable=le,this.data=X.data,this.layer=X.layer,this.linkService=X.linkService,this.downloadManager=X.downloadManager,this.imageResourcesPath=X.imageResourcesPath,this.renderForms=X.renderForms,this.svgFactory=X.svgFactory,this.annotationStorage=X.annotationStorage,this.enableScripting=X.enableScripting,this.hasJSActions=X.hasJSActions,this._fieldObjects=X.fieldObjects,this.parent=X.parent,le&&(this.container=this._createContainer(de)),ce&&this._createQuadrilaterals()}static _hasPopupData({titleObj:X,contentsObj:le,richText:de}){return!!(X?.str||le?.str||de?.str)}get hasPopupData(){return M._hasPopupData(this.data)}_createContainer(X){const{data:le,parent:{page:de,viewport:ce}}=this,me=document.createElement("section");me.setAttribute("data-annotation-id",le.id),this instanceof B||(me.tabIndex=E),me.style.zIndex=this.parent.zIndex++,this.data.popupRef&&me.setAttribute("aria-haspopup","dialog"),le.noRotate&&me.classList.add("norotate");const{pageWidth:Se,pageHeight:Ce,pageX:Te,pageY:je}=ce.rawDims;if(!le.rect||this instanceof ie){const{rotation:$e}=le;return!le.hasOwnCanvas&&$e!==0&&this.setRotation($e,me),me}const{width:Oe,height:Ne}=D(le.rect),De=o.Util.normalizeRect([le.rect[0],de.view[3]-le.rect[1]+de.view[1],le.rect[2],de.view[3]-le.rect[3]+de.view[1]]);if(!X&&le.borderStyle.width>0){me.style.borderWidth=`${le.borderStyle.width}px`;const $e=le.borderStyle.horizontalCornerRadius,Qe=le.borderStyle.verticalCornerRadius;if($e>0||Qe>0){const nt=`calc(${$e}px * var(--scale-factor)) / calc(${Qe}px * var(--scale-factor))`;me.style.borderRadius=nt}else if(this instanceof z){const nt=`calc(${Oe}px * var(--scale-factor)) / calc(${Ne}px * var(--scale-factor))`;me.style.borderRadius=nt}switch(le.borderStyle.style){case o.AnnotationBorderStyleType.SOLID:me.style.borderStyle="solid";break;case o.AnnotationBorderStyleType.DASHED:me.style.borderStyle="dashed";break;case o.AnnotationBorderStyleType.BEVELED:(0,o.warn)("Unimplemented border style: beveled");break;case o.AnnotationBorderStyleType.INSET:(0,o.warn)("Unimplemented border style: inset");break;case o.AnnotationBorderStyleType.UNDERLINE:me.style.borderBottomStyle="solid";break}const Ye=le.borderColor||null;Ye?(this.#e=!0,me.style.borderColor=o.Util.makeHexColor(Ye[0]|0,Ye[1]|0,Ye[2]|0)):me.style.borderWidth=0}me.style.left=`${100*(De[0]-Te)/Se}%`,me.style.top=`${100*(De[1]-je)/Ce}%`;const{rotation:Be}=le;return le.hasOwnCanvas||Be===0?(me.style.width=`${100*Oe/Se}%`,me.style.height=`${100*Ne/Ce}%`):this.setRotation(Be,me),me}setRotation(X,le=this.container){if(!this.data.rect)return;const{pageWidth:de,pageHeight:ce}=this.parent.viewport.rawDims,{width:me,height:Se}=D(this.data.rect);let Ce,Te;X%180===0?(Ce=100*me/de,Te=100*Se/ce):(Ce=100*Se/de,Te=100*me/ce),le.style.width=`${Ce}%`,le.style.height=`${Te}%`,le.setAttribute("data-main-rotation",(360-X)%360)}get _commonActions(){const X=(le,de,ce)=>{const me=ce.detail[le],Se=me[0],Ce=me.slice(1);ce.target.style[de]=f.ColorConverters[`${Se}_HTML`](Ce),this.annotationStorage.setValue(this.data.id,{[de]:f.ColorConverters[`${Se}_rgb`](Ce)})};return(0,o.shadow)(this,"_commonActions",{display:le=>{const{display:de}=le.detail,ce=de%2===1;this.container.style.visibility=ce?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:ce,noPrint:de===1||de===2})},print:le=>{this.annotationStorage.setValue(this.data.id,{noPrint:!le.detail.print})},hidden:le=>{const{hidden:de}=le.detail;this.container.style.visibility=de?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:de,noView:de})},focus:le=>{setTimeout(()=>le.target.focus({preventScroll:!1}),0)},userName:le=>{le.target.title=le.detail.userName},readonly:le=>{le.target.disabled=le.detail.readonly},required:le=>{this._setRequired(le.target,le.detail.required)},bgColor:le=>{X("bgColor","backgroundColor",le)},fillColor:le=>{X("fillColor","backgroundColor",le)},fgColor:le=>{X("fgColor","color",le)},textColor:le=>{X("textColor","color",le)},borderColor:le=>{X("borderColor","borderColor",le)},strokeColor:le=>{X("strokeColor","borderColor",le)},rotation:le=>{const de=le.detail.rotation;this.setRotation(de),this.annotationStorage.setValue(this.data.id,{rotation:de})}})}_dispatchEventFromSandbox(X,le){const de=this._commonActions;for(const ce of Object.keys(le.detail))(X[ce]||de[ce])?.(le)}_setDefaultPropertiesFromJS(X){if(!this.enableScripting)return;const le=this.annotationStorage.getRawValue(this.data.id);if(!le)return;const de=this._commonActions;for(const[ce,me]of Object.entries(le)){const Se=de[ce];if(Se){const Ce={detail:{[ce]:me},target:X};Se(Ce),delete le[ce]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:X}=this.data;if(!X)return;const[le,de,ce,me]=this.data.rect;if(X.length===1){const[,{x:Qe,y:Ye},{x:nt,y:rt}]=X[0];if(ce===Qe&&me===Ye&&le===nt&&de===rt)return}const{style:Se}=this.container;let Ce;if(this.#e){const{borderColor:Qe,borderWidth:Ye}=Se;Se.borderWidth=0,Ce=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Qe}" stroke-width="${Ye}">`],this.container.classList.add("hasBorder")}const Te=ce-le,je=me-de,{svgFactory:Oe}=this,Ne=Oe.createElement("svg");Ne.classList.add("quadrilateralsContainer"),Ne.setAttribute("width",0),Ne.setAttribute("height",0);const De=Oe.createElement("defs");Ne.append(De);const Be=Oe.createElement("clipPath"),$e=`clippath_${this.data.id}`;Be.setAttribute("id",$e),Be.setAttribute("clipPathUnits","objectBoundingBox"),De.append(Be);for(const[,{x:Qe,y:Ye},{x:nt,y:rt}]of X){const at=Oe.createElement("rect"),vt=(nt-le)/Te,nn=(me-Ye)/je,en=(Qe-nt)/Te,Dt=(Ye-rt)/je;at.setAttribute("x",vt),at.setAttribute("y",nn),at.setAttribute("width",en),at.setAttribute("height",Dt),Be.append(at),Ce?.push(`<rect vector-effect="non-scaling-stroke" x="${vt}" y="${nn}" width="${en}" height="${Dt}"/>`)}this.#e&&(Ce.push("</g></svg>')"),Se.backgroundImage=Ce.join("")),this.container.append(Ne),this.container.style.clipPath=`url(#${$e})`}_createPopup(){const{container:X,data:le}=this;X.setAttribute("aria-haspopup","dialog");const de=new ie({data:{color:le.color,titleObj:le.titleObj,modificationDate:le.modificationDate,contentsObj:le.contentsObj,richText:le.richText,parentRect:le.rect,borderStyle:0,id:`popup_${le.id}`,rotation:le.rotation},parent:this.parent,elements:[this]});this.parent.div.append(de.render())}render(){(0,o.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(X,le=null){const de=[];if(this._fieldObjects){const ce=this._fieldObjects[X];if(ce)for(const{page:me,id:Se,exportValues:Ce}of ce){if(me===-1||Se===le)continue;const Te=typeof Ce=="string"?Ce:null,je=document.querySelector(`[data-element-id="${Se}"]`);if(je&&!_.has(je)){(0,o.warn)(`_getElementsByName - element not allowed: ${Se}`);continue}de.push({id:Se,exportValue:Te,domElement:je})}return de}for(const ce of document.getElementsByName(X)){const{exportValue:me}=ce,Se=ce.getAttribute("data-element-id");Se!==le&&_.has(ce)&&de.push({id:Se,exportValue:me,domElement:ce})}return de}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const X=this.getElementsToTriggerPopup();if(Array.isArray(X))for(const le of X)le.classList.add("highlightArea");else X.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:X,data:{id:le}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:X,editId:le})})}}class N extends M{constructor(X,le=null){super(X,{isRenderable:!0,ignoreBorder:!!le?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=X.data.isTooltipOnly}render(){const{data:X,linkService:le}=this,de=document.createElement("a");de.setAttribute("data-element-id",X.id);let ce=!1;return X.url?(le.addLinkAttributes(de,X.url,X.newWindow),ce=!0):X.action?(this._bindNamedAction(de,X.action),ce=!0):X.attachment?(this._bindAttachment(de,X.attachment),ce=!0):X.setOCGState?(this.#t(de,X.setOCGState),ce=!0):X.dest?(this._bindLink(de,X.dest),ce=!0):(X.actions&&(X.actions.Action||X.actions["Mouse Up"]||X.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(de,X),ce=!0),X.resetForm?(this._bindResetFormAction(de,X.resetForm),ce=!0):this.isTooltipOnly&&!ce&&(this._bindLink(de,""),ce=!0)),this.container.classList.add("linkAnnotation"),ce&&this.container.append(de),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(X,le){X.href=this.linkService.getDestinationHash(le),X.onclick=()=>(le&&this.linkService.goToDestination(le),!1),(le||le==="")&&this.#e()}_bindNamedAction(X,le){X.href=this.linkService.getAnchorUrl(""),X.onclick=()=>(this.linkService.executeNamedAction(le),!1),this.#e()}_bindAttachment(X,le){X.href=this.linkService.getAnchorUrl(""),X.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,le.content,le.filename),!1),this.#e()}#t(X,le){X.href=this.linkService.getAnchorUrl(""),X.onclick=()=>(this.linkService.executeSetOCGState(le),!1),this.#e()}_bindJSAction(X,le){X.href=this.linkService.getAnchorUrl("");const de=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const ce of Object.keys(le.actions)){const me=de.get(ce);me&&(X[me]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:le.id,name:ce}}),!1))}X.onclick||(X.onclick=()=>!1),this.#e()}_bindResetFormAction(X,le){const de=X.onclick;if(de||(X.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){(0,o.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),de||(X.onclick=()=>!1);return}X.onclick=()=>{de?.();const{fields:ce,refs:me,include:Se}=le,Ce=[];if(ce.length!==0||me.length!==0){const Oe=new Set(me);for(const Ne of ce){const De=this._fieldObjects[Ne]||[];for(const{id:Be}of De)Oe.add(Be)}for(const Ne of Object.values(this._fieldObjects))for(const De of Ne)Oe.has(De.id)===Se&&Ce.push(De)}else for(const Oe of Object.values(this._fieldObjects))Ce.push(...Oe);const Te=this.annotationStorage,je=[];for(const Oe of Ce){const{id:Ne}=Oe;switch(je.push(Ne),Oe.type){case"text":{const Be=Oe.defaultValue||"";Te.setValue(Ne,{value:Be});break}case"checkbox":case"radiobutton":{const Be=Oe.defaultValue===Oe.exportValues;Te.setValue(Ne,{value:Be});break}case"combobox":case"listbox":{const Be=Oe.defaultValue||"";Te.setValue(Ne,{value:Be});break}default:continue}const De=document.querySelector(`[data-element-id="${Ne}"]`);if(De){if(!_.has(De)){(0,o.warn)(`_bindResetFormAction - element not allowed: ${Ne}`);continue}}else continue;De.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:je,name:"ResetForm"}}),!1}}}class I extends M{constructor(X){super(X,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const X=document.createElement("img");return X.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",X.alt="[{{type}} Annotation]",X.dataset.l10nId="text_annotation_type",X.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(X),this.container}}class B extends M{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(X){this.data.hasOwnCanvas&&(X.previousSibling?.nodeName==="CANVAS"&&(X.previousSibling.hidden=!0),X.hidden=!1)}_getKeyModifier(X){const{isWin:le,isMac:de}=o.FeatureTest.platform;return le&&X.ctrlKey||de&&X.metaKey}_setEventListener(X,le,de,ce,me){de.includes("mouse")?X.addEventListener(de,Se=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ce,value:me(Se),shift:Se.shiftKey,modifier:this._getKeyModifier(Se)}})}):X.addEventListener(de,Se=>{if(de==="blur"){if(!le.focused||!Se.relatedTarget)return;le.focused=!1}else if(de==="focus"){if(le.focused)return;le.focused=!0}me&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ce,value:me(Se)}})})}_setEventListeners(X,le,de,ce){for(const[me,Se]of de)(Se==="Action"||this.data.actions?.[Se])&&((Se==="Focus"||Se==="Blur")&&(le||={focused:!1}),this._setEventListener(X,le,me,Se,ce),Se==="Focus"&&!this.data.actions?.Blur?this._setEventListener(X,le,"blur","Blur",null):Se==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(X,le,"focus","Focus",null))}_setBackgroundColor(X){const le=this.data.backgroundColor||null;X.style.backgroundColor=le===null?"transparent":o.Util.makeHexColor(le[0],le[1],le[2])}_setTextStyle(X){const le=["left","center","right"],{fontColor:de}=this.data.defaultAppearanceData,ce=this.data.defaultAppearanceData.fontSize||C,me=X.style;let Se;const Ce=2,Te=je=>Math.round(10*je)/10;if(this.data.multiLine){const je=Math.abs(this.data.rect[3]-this.data.rect[1]-Ce),Oe=Math.round(je/(o.LINE_FACTOR*ce))||1,Ne=je/Oe;Se=Math.min(ce,Te(Ne/o.LINE_FACTOR))}else{const je=Math.abs(this.data.rect[3]-this.data.rect[1]-Ce);Se=Math.min(ce,Te(je/o.LINE_FACTOR))}me.fontSize=`calc(${Se}px * var(--scale-factor))`,me.color=o.Util.makeHexColor(de[0],de[1],de[2]),this.data.textAlignment!==null&&(me.textAlign=le[this.data.textAlignment])}_setRequired(X,le){le?X.setAttribute("required",!0):X.removeAttribute("required"),X.setAttribute("aria-required",le)}}class V extends B{constructor(X){const le=X.renderForms||!X.data.hasAppearance&&!!X.data.fieldValue;super(X,{isRenderable:le})}setPropertyOnSiblings(X,le,de,ce){const me=this.annotationStorage;for(const Se of this._getElementsByName(X.name,X.id))Se.domElement&&(Se.domElement[le]=de),me.setValue(Se.id,{[ce]:de})}render(){const X=this.annotationStorage,le=this.data.id;this.container.classList.add("textWidgetAnnotation");let de=null;if(this.renderForms){const ce=X.getValue(le,{value:this.data.fieldValue});let me=ce.value||"";const Se=X.getValue(le,{charLimit:this.data.maxLen}).charLimit;Se&&me.length>Se&&(me=me.slice(0,Se));let Ce=ce.formattedValue||this.data.textContent?.join(`
`)||null;Ce&&this.data.comb&&(Ce=Ce.replaceAll(/\s+/g,""));const Te={userValue:me,formattedValue:Ce,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(de=document.createElement("textarea"),de.textContent=Ce??me,this.data.doNotScroll&&(de.style.overflowY="hidden")):(de=document.createElement("input"),de.type="text",de.setAttribute("value",Ce??me),this.data.doNotScroll&&(de.style.overflowX="hidden")),this.data.hasOwnCanvas&&(de.hidden=!0),_.add(de),de.setAttribute("data-element-id",le),de.disabled=this.data.readOnly,de.name=this.data.fieldName,de.tabIndex=E,this._setRequired(de,this.data.required),Se&&(de.maxLength=Se),de.addEventListener("input",Oe=>{X.setValue(le,{value:Oe.target.value}),this.setPropertyOnSiblings(de,"value",Oe.target.value,"value"),Te.formattedValue=null}),de.addEventListener("resetform",Oe=>{const Ne=this.data.defaultFieldValue??"";de.value=Te.userValue=Ne,Te.formattedValue=null});let je=Oe=>{const{formattedValue:Ne}=Te;Ne!=null&&(Oe.target.value=Ne),Oe.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){de.addEventListener("focus",Ne=>{if(Te.focused)return;const{target:De}=Ne;Te.userValue&&(De.value=Te.userValue),Te.lastCommittedValue=De.value,Te.commitKey=1,Te.focused=!0}),de.addEventListener("updatefromsandbox",Ne=>{this.showElementAndHideCanvas(Ne.target);const De={value(Be){Te.userValue=Be.detail.value??"",X.setValue(le,{value:Te.userValue.toString()}),Be.target.value=Te.userValue},formattedValue(Be){const{formattedValue:$e}=Be.detail;Te.formattedValue=$e,$e!=null&&Be.target!==document.activeElement&&(Be.target.value=$e),X.setValue(le,{formattedValue:$e})},selRange(Be){Be.target.setSelectionRange(...Be.detail.selRange)},charLimit:Be=>{const{charLimit:$e}=Be.detail,{target:Qe}=Be;if($e===0){Qe.removeAttribute("maxLength");return}Qe.setAttribute("maxLength",$e);let Ye=Te.userValue;!Ye||Ye.length<=$e||(Ye=Ye.slice(0,$e),Qe.value=Te.userValue=Ye,X.setValue(le,{value:Ye}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:le,name:"Keystroke",value:Ye,willCommit:!0,commitKey:1,selStart:Qe.selectionStart,selEnd:Qe.selectionEnd}}))}};this._dispatchEventFromSandbox(De,Ne)}),de.addEventListener("keydown",Ne=>{Te.commitKey=1;let De=-1;if(Ne.key==="Escape"?De=0:Ne.key==="Enter"&&!this.data.multiLine?De=2:Ne.key==="Tab"&&(Te.commitKey=3),De===-1)return;const{value:Be}=Ne.target;Te.lastCommittedValue!==Be&&(Te.lastCommittedValue=Be,Te.userValue=Be,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:le,name:"Keystroke",value:Be,willCommit:!0,commitKey:De,selStart:Ne.target.selectionStart,selEnd:Ne.target.selectionEnd}}))});const Oe=je;je=null,de.addEventListener("blur",Ne=>{if(!Te.focused||!Ne.relatedTarget)return;Te.focused=!1;const{value:De}=Ne.target;Te.userValue=De,Te.lastCommittedValue!==De&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:le,name:"Keystroke",value:De,willCommit:!0,commitKey:Te.commitKey,selStart:Ne.target.selectionStart,selEnd:Ne.target.selectionEnd}}),Oe(Ne)}),this.data.actions?.Keystroke&&de.addEventListener("beforeinput",Ne=>{Te.lastCommittedValue=null;const{data:De,target:Be}=Ne,{value:$e,selectionStart:Qe,selectionEnd:Ye}=Be;let nt=Qe,rt=Ye;switch(Ne.inputType){case"deleteWordBackward":{const at=$e.substring(0,Qe).match(/\w*[^\w]*$/);at&&(nt-=at[0].length);break}case"deleteWordForward":{const at=$e.substring(Qe).match(/^[^\w]*\w*/);at&&(rt+=at[0].length);break}case"deleteContentBackward":Qe===Ye&&(nt-=1);break;case"deleteContentForward":Qe===Ye&&(rt+=1);break}Ne.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:le,name:"Keystroke",value:$e,change:De||"",willCommit:!1,selStart:nt,selEnd:rt}})}),this._setEventListeners(de,Te,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ne=>Ne.target.value)}if(je&&de.addEventListener("blur",je),this.data.comb){const Ne=(this.data.rect[2]-this.data.rect[0])/Se;de.classList.add("comb"),de.style.letterSpacing=`calc(${Ne}px * var(--scale-factor) - 1ch)`}}else de=document.createElement("div"),de.textContent=this.data.fieldValue,de.style.verticalAlign="middle",de.style.display="table-cell";return this._setTextStyle(de),this._setBackgroundColor(de),this._setDefaultPropertiesFromJS(de),this.container.append(de),this.container}}class j extends B{constructor(X){super(X,{isRenderable:!!X.data.hasOwnCanvas})}}class q extends B{constructor(X){super(X,{isRenderable:X.renderForms})}render(){const X=this.annotationStorage,le=this.data,de=le.id;let ce=X.getValue(de,{value:le.exportValue===le.fieldValue}).value;typeof ce=="string"&&(ce=ce!=="Off",X.setValue(de,{value:ce})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const me=document.createElement("input");return _.add(me),me.setAttribute("data-element-id",de),me.disabled=le.readOnly,this._setRequired(me,this.data.required),me.type="checkbox",me.name=le.fieldName,ce&&me.setAttribute("checked",!0),me.setAttribute("exportValue",le.exportValue),me.tabIndex=E,me.addEventListener("change",Se=>{const{name:Ce,checked:Te}=Se.target;for(const je of this._getElementsByName(Ce,de)){const Oe=Te&&je.exportValue===le.exportValue;je.domElement&&(je.domElement.checked=Oe),X.setValue(je.id,{value:Oe})}X.setValue(de,{value:Te})}),me.addEventListener("resetform",Se=>{const Ce=le.defaultFieldValue||"Off";Se.target.checked=Ce===le.exportValue}),this.enableScripting&&this.hasJSActions&&(me.addEventListener("updatefromsandbox",Se=>{const Ce={value(Te){Te.target.checked=Te.detail.value!=="Off",X.setValue(de,{value:Te.target.checked})}};this._dispatchEventFromSandbox(Ce,Se)}),this._setEventListeners(me,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Se=>Se.target.checked)),this._setBackgroundColor(me),this._setDefaultPropertiesFromJS(me),this.container.append(me),this.container}}class z extends B{constructor(X){super(X,{isRenderable:X.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const X=this.annotationStorage,le=this.data,de=le.id;let ce=X.getValue(de,{value:le.fieldValue===le.buttonValue}).value;typeof ce=="string"&&(ce=ce!==le.buttonValue,X.setValue(de,{value:ce}));const me=document.createElement("input");if(_.add(me),me.setAttribute("data-element-id",de),me.disabled=le.readOnly,this._setRequired(me,this.data.required),me.type="radio",me.name=le.fieldName,ce&&me.setAttribute("checked",!0),me.tabIndex=E,me.addEventListener("change",Se=>{const{name:Ce,checked:Te}=Se.target;for(const je of this._getElementsByName(Ce,de))X.setValue(je.id,{value:!1});X.setValue(de,{value:Te})}),me.addEventListener("resetform",Se=>{const Ce=le.defaultFieldValue;Se.target.checked=Ce!=null&&Ce===le.buttonValue}),this.enableScripting&&this.hasJSActions){const Se=le.buttonValue;me.addEventListener("updatefromsandbox",Ce=>{const Te={value:je=>{const Oe=Se===je.detail.value;for(const Ne of this._getElementsByName(je.target.name)){const De=Oe&&Ne.id===de;Ne.domElement&&(Ne.domElement.checked=De),X.setValue(Ne.id,{value:De})}}};this._dispatchEventFromSandbox(Te,Ce)}),this._setEventListeners(me,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ce=>Ce.target.checked)}return this._setBackgroundColor(me),this._setDefaultPropertiesFromJS(me),this.container.append(me),this.container}}class $ extends N{constructor(X){super(X,{ignoreBorder:X.data.hasAppearance})}render(){const X=super.render();X.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(X.title=this.data.alternativeText);const le=X.lastChild;return this.enableScripting&&this.hasJSActions&&le&&(this._setDefaultPropertiesFromJS(le),le.addEventListener("updatefromsandbox",de=>{this._dispatchEventFromSandbox({},de)})),X}}class ee extends B{constructor(X){super(X,{isRenderable:X.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const X=this.annotationStorage,le=this.data.id,de=X.getValue(le,{value:this.data.fieldValue}),ce=document.createElement("select");_.add(ce),ce.setAttribute("data-element-id",le),ce.disabled=this.data.readOnly,this._setRequired(ce,this.data.required),ce.name=this.data.fieldName,ce.tabIndex=E;let me=this.data.combo&&this.data.options.length>0;this.data.combo||(ce.size=this.data.options.length,this.data.multiSelect&&(ce.multiple=!0)),ce.addEventListener("resetform",Oe=>{const Ne=this.data.defaultFieldValue;for(const De of ce.options)De.selected=De.value===Ne});for(const Oe of this.data.options){const Ne=document.createElement("option");Ne.textContent=Oe.displayValue,Ne.value=Oe.exportValue,de.value.includes(Oe.exportValue)&&(Ne.setAttribute("selected",!0),me=!1),ce.append(Ne)}let Se=null;if(me){const Oe=document.createElement("option");Oe.value=" ",Oe.setAttribute("hidden",!0),Oe.setAttribute("selected",!0),ce.prepend(Oe),Se=()=>{Oe.remove(),ce.removeEventListener("input",Se),Se=null},ce.addEventListener("input",Se)}const Ce=Oe=>{const Ne=Oe?"value":"textContent",{options:De,multiple:Be}=ce;return Be?Array.prototype.filter.call(De,$e=>$e.selected).map($e=>$e[Ne]):De.selectedIndex===-1?null:De[De.selectedIndex][Ne]};let Te=Ce(!1);const je=Oe=>{const Ne=Oe.target.options;return Array.prototype.map.call(Ne,De=>({displayValue:De.textContent,exportValue:De.value}))};return this.enableScripting&&this.hasJSActions?(ce.addEventListener("updatefromsandbox",Oe=>{const Ne={value(De){Se?.();const Be=De.detail.value,$e=new Set(Array.isArray(Be)?Be:[Be]);for(const Qe of ce.options)Qe.selected=$e.has(Qe.value);X.setValue(le,{value:Ce(!0)}),Te=Ce(!1)},multipleSelection(De){ce.multiple=!0},remove(De){const Be=ce.options,$e=De.detail.remove;Be[$e].selected=!1,ce.remove($e),Be.length>0&&Array.prototype.findIndex.call(Be,Ye=>Ye.selected)===-1&&(Be[0].selected=!0),X.setValue(le,{value:Ce(!0),items:je(De)}),Te=Ce(!1)},clear(De){for(;ce.length!==0;)ce.remove(0);X.setValue(le,{value:null,items:[]}),Te=Ce(!1)},insert(De){const{index:Be,displayValue:$e,exportValue:Qe}=De.detail.insert,Ye=ce.children[Be],nt=document.createElement("option");nt.textContent=$e,nt.value=Qe,Ye?Ye.before(nt):ce.append(nt),X.setValue(le,{value:Ce(!0),items:je(De)}),Te=Ce(!1)},items(De){const{items:Be}=De.detail;for(;ce.length!==0;)ce.remove(0);for(const $e of Be){const{displayValue:Qe,exportValue:Ye}=$e,nt=document.createElement("option");nt.textContent=Qe,nt.value=Ye,ce.append(nt)}ce.options.length>0&&(ce.options[0].selected=!0),X.setValue(le,{value:Ce(!0),items:je(De)}),Te=Ce(!1)},indices(De){const Be=new Set(De.detail.indices);for(const $e of De.target.options)$e.selected=Be.has($e.index);X.setValue(le,{value:Ce(!0)}),Te=Ce(!1)},editable(De){De.target.disabled=!De.detail.editable}};this._dispatchEventFromSandbox(Ne,Oe)}),ce.addEventListener("input",Oe=>{const Ne=Ce(!0);X.setValue(le,{value:Ne}),Oe.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:le,name:"Keystroke",value:Te,changeEx:Ne,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(ce,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Oe=>Oe.target.value)):ce.addEventListener("input",function(Oe){X.setValue(le,{value:Ce(!0)})}),this.data.combo&&this._setTextStyle(ce),this._setBackgroundColor(ce),this._setDefaultPropertiesFromJS(ce),this.container.append(ce),this.container}}class ie extends M{constructor(X){const{data:le,elements:de}=X;super(X,{isRenderable:M._hasPopupData(le)}),this.elements=de}render(){this.container.classList.add("popupAnnotation");const X=new ae({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),le=[];for(const de of this.elements)de.popup=X,le.push(de.data.id),de.addHighlightArea();return this.container.setAttribute("aria-controls",le.map(de=>`${o.AnnotationPrefix}${de}`).join(",")),this.container}}class ae{#e=null;#t=this.#u.bind(this);#n=this.#w.bind(this);#r=this.#x.bind(this);#o=this.#y.bind(this);#a=null;#s=null;#l=null;#c=null;#i=null;#f=null;#d=!1;#h=null;#p=null;#v=null;#m=null;#g=!1;constructor({container:X,color:le,elements:de,titleObj:ce,modificationDate:me,contentsObj:Se,richText:Ce,parent:Te,rect:je,parentRect:Oe,open:Ne}){this.#s=X,this.#m=ce,this.#l=Se,this.#v=Ce,this.#i=Te,this.#a=le,this.#p=je,this.#f=Oe,this.#c=de;const De=u.PDFDateString.toDateObject(me);De&&(this.#e=Te.l10n.get("annotation_date_string",{date:De.toLocaleDateString(),time:De.toLocaleTimeString()})),this.trigger=de.flatMap(Be=>Be.getElementsToTriggerPopup());for(const Be of this.trigger)Be.addEventListener("click",this.#o),Be.addEventListener("mouseenter",this.#r),Be.addEventListener("mouseleave",this.#n),Be.classList.add("popupTriggerArea");for(const Be of de)Be.container?.addEventListener("keydown",this.#t);this.#s.hidden=!0,Ne&&this.#y()}render(){if(this.#h)return;const{page:{view:X},viewport:{rawDims:{pageWidth:le,pageHeight:de,pageX:ce,pageY:me}}}=this.#i,Se=this.#h=document.createElement("div");if(Se.className="popup",this.#a){const at=Se.style.outlineColor=o.Util.makeHexColor(...this.#a);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?Se.style.backgroundColor=`color-mix(in srgb, ${at} 30%, white)`:Se.style.backgroundColor=o.Util.makeHexColor(...this.#a.map(nn=>Math.floor(.7*(255-nn)+nn)))}const Ce=document.createElement("span");Ce.className="header";const Te=document.createElement("h1");if(Ce.append(Te),{dir:Te.dir,str:Te.textContent}=this.#m,Se.append(Ce),this.#e){const at=document.createElement("span");at.classList.add("popupDate"),this.#e.then(vt=>{at.textContent=vt}),Ce.append(at)}const je=this.#l,Oe=this.#v;if(Oe?.str&&(!je?.str||je.str===Oe.str))w.XfaLayer.render({xfaHtml:Oe.html,intent:"richText",div:Se}),Se.lastChild.classList.add("richText","popupContent");else{const at=this._formatContents(je);Se.append(at)}let Ne=!!this.#f,De=Ne?this.#f:this.#p;for(const at of this.#c)if(!De||o.Util.intersect(at.data.rect,De)!==null){De=at.data.rect,Ne=!0;break}const Be=o.Util.normalizeRect([De[0],X[3]-De[1]+X[1],De[2],X[3]-De[3]+X[1]]),Qe=Ne?De[2]-De[0]+5:0,Ye=Be[0]+Qe,nt=Be[1],{style:rt}=this.#s;rt.left=`${100*(Ye-ce)/le}%`,rt.top=`${100*(nt-me)/de}%`,this.#s.append(Se)}_formatContents({str:X,dir:le}){const de=document.createElement("p");de.classList.add("popupContent"),de.dir=le;const ce=X.split(/(?:\r\n?|\n)/);for(let me=0,Se=ce.length;me<Se;++me){const Ce=ce[me];de.append(document.createTextNode(Ce)),me<Se-1&&de.append(document.createElement("br"))}return de}#u(X){X.altKey||X.shiftKey||X.ctrlKey||X.metaKey||(X.key==="Enter"||X.key==="Escape"&&this.#d)&&this.#y()}#y(){this.#d=!this.#d,this.#d?(this.#x(),this.#s.addEventListener("click",this.#o),this.#s.addEventListener("keydown",this.#t)):(this.#w(),this.#s.removeEventListener("click",this.#o),this.#s.removeEventListener("keydown",this.#t))}#x(){this.#h||this.render(),this.isVisible?this.#d&&this.#s.classList.add("focused"):(this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#w(){this.#s.classList.remove("focused"),!(this.#d||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#g=this.isVisible,this.#g&&(this.#s.hidden=!0)}maybeShow(){this.#g&&(this.#g=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}}class pe extends M{constructor(X){super(X,{isRenderable:!0,ignoreBorder:!0}),this.textContent=X.data.textContent,this.textPosition=X.data.textPosition,this.annotationEditorType=o.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const X=document.createElement("div");X.classList.add("annotationTextContent"),X.setAttribute("role","comment");for(const le of this.textContent){const de=document.createElement("span");de.textContent=le,X.append(de)}this.container.append(X)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}t.FreeTextAnnotationElement=pe;class he extends M{#e=null;constructor(X){super(X,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const X=this.data,{width:le,height:de}=D(X.rect),ce=this.svgFactory.create(le,de,!0),me=this.#e=this.svgFactory.createElement("svg:line");return me.setAttribute("x1",X.rect[2]-X.lineCoordinates[0]),me.setAttribute("y1",X.rect[3]-X.lineCoordinates[1]),me.setAttribute("x2",X.rect[2]-X.lineCoordinates[2]),me.setAttribute("y2",X.rect[3]-X.lineCoordinates[3]),me.setAttribute("stroke-width",X.borderStyle.width||1),me.setAttribute("stroke","transparent"),me.setAttribute("fill","transparent"),ce.append(me),this.container.append(ce),!X.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class be extends M{#e=null;constructor(X){super(X,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const X=this.data,{width:le,height:de}=D(X.rect),ce=this.svgFactory.create(le,de,!0),me=X.borderStyle.width,Se=this.#e=this.svgFactory.createElement("svg:rect");return Se.setAttribute("x",me/2),Se.setAttribute("y",me/2),Se.setAttribute("width",le-me),Se.setAttribute("height",de-me),Se.setAttribute("stroke-width",me||1),Se.setAttribute("stroke","transparent"),Se.setAttribute("fill","transparent"),ce.append(Se),this.container.append(ce),!X.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class xe extends M{#e=null;constructor(X){super(X,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const X=this.data,{width:le,height:de}=D(X.rect),ce=this.svgFactory.create(le,de,!0),me=X.borderStyle.width,Se=this.#e=this.svgFactory.createElement("svg:ellipse");return Se.setAttribute("cx",le/2),Se.setAttribute("cy",de/2),Se.setAttribute("rx",le/2-me/2),Se.setAttribute("ry",de/2-me/2),Se.setAttribute("stroke-width",me||1),Se.setAttribute("stroke","transparent"),Se.setAttribute("fill","transparent"),ce.append(Se),this.container.append(ce),!X.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Ee extends M{#e=null;constructor(X){super(X,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const X=this.data,{width:le,height:de}=D(X.rect),ce=this.svgFactory.create(le,de,!0);let me=[];for(const Ce of X.vertices){const Te=Ce.x-X.rect[0],je=X.rect[3]-Ce.y;me.push(Te+","+je)}me=me.join(" ");const Se=this.#e=this.svgFactory.createElement(this.svgElementName);return Se.setAttribute("points",me),Se.setAttribute("stroke-width",X.borderStyle.width||1),Se.setAttribute("stroke","transparent"),Se.setAttribute("fill","transparent"),ce.append(Se),this.container.append(ce),!X.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class we extends Ee{constructor(X){super(X),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class oe extends M{constructor(X){super(X,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class se extends M{#e=[];constructor(X){super(X,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=o.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const X=this.data,{width:le,height:de}=D(X.rect),ce=this.svgFactory.create(le,de,!0);for(const me of X.inkLists){let Se=[];for(const Te of me){const je=Te.x-X.rect[0],Oe=X.rect[3]-Te.y;Se.push(`${je},${Oe}`)}Se=Se.join(" ");const Ce=this.svgFactory.createElement(this.svgElementName);this.#e.push(Ce),Ce.setAttribute("points",Se),Ce.setAttribute("stroke-width",X.borderStyle.width||1),Ce.setAttribute("stroke","transparent"),Ce.setAttribute("fill","transparent"),!X.popupRef&&this.hasPopupData&&this._createPopup(),ce.append(Ce)}return this.container.append(ce),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}t.InkAnnotationElement=se;class J extends M{constructor(X){super(X,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Q extends M{constructor(X){super(X,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Z extends M{constructor(X){super(X,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class K extends M{constructor(X){super(X,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class ne extends M{constructor(X){super(X,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}t.StampAnnotationElement=ne;class ue extends M{#e=null;constructor(X){super(X,{isRenderable:!0});const{filename:le,content:de}=this.data.file;this.filename=(0,u.getFilenameFromUrl)(le,!0),this.content=de,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:le,content:de})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:X,data:le}=this;let de;le.hasAppearance||le.fillAlpha===0?de=document.createElement("div"):(de=document.createElement("img"),de.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(le.name)?"paperclip":"pushpin"}.svg`,le.fillAlpha&&le.fillAlpha<1&&(de.style=`filter: opacity(${Math.round(le.fillAlpha*100)}%);`)),de.addEventListener("dblclick",this.#t.bind(this)),this.#e=de;const{isMac:ce}=o.FeatureTest.platform;return X.addEventListener("keydown",me=>{me.key==="Enter"&&(ce?me.metaKey:me.ctrlKey)&&this.#t()}),!le.popupRef&&this.hasPopupData?this._createPopup():de.classList.add("popupTriggerArea"),X.append(de),X}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class ye{#e=null;#t=null;#n=new Map;constructor({div:X,accessibilityManager:le,annotationCanvasMap:de,l10n:ce,page:me,viewport:Se}){this.div=X,this.#e=le,this.#t=de,this.l10n=ce,this.page=me,this.viewport=Se,this.zIndex=0,this.l10n||=v.NullL10n}#r(X,le){const de=X.firstChild||X;de.id=`${o.AnnotationPrefix}${le}`,this.div.append(X),this.#e?.moveElementInDOM(this.div,X,de,!1)}async render(X){const{annotations:le}=X,de=this.div;(0,u.setLayerDimensions)(de,this.viewport);const ce=new Map,me={data:null,layer:de,linkService:X.linkService,downloadManager:X.downloadManager,imageResourcesPath:X.imageResourcesPath||"",renderForms:X.renderForms!==!1,svgFactory:new u.DOMSVGFactory,annotationStorage:X.annotationStorage||new d.AnnotationStorage,enableScripting:X.enableScripting===!0,hasJSActions:X.hasJSActions,fieldObjects:X.fieldObjects,parent:this,elements:null};for(const Se of le){if(Se.noHTML)continue;const Ce=Se.annotationType===o.AnnotationType.POPUP;if(Ce){const Oe=ce.get(Se.id);if(!Oe)continue;me.elements=Oe}else{const{width:Oe,height:Ne}=D(Se.rect);if(Oe<=0||Ne<=0)continue}me.data=Se;const Te=O.create(me);if(!Te.isRenderable)continue;if(!Ce&&Se.popupRef){const Oe=ce.get(Se.popupRef);Oe?Oe.push(Te):ce.set(Se.popupRef,[Te])}Te.annotationEditorType>0&&this.#n.set(Te.data.id,Te);const je=Te.render();Se.hidden&&(je.style.visibility="hidden"),this.#r(je,Se.id)}this.#o(),await this.l10n.translate(de)}update({viewport:X}){const le=this.div;this.viewport=X,(0,u.setLayerDimensions)(le,{rotation:X.rotation}),this.#o(),le.hidden=!1}#o(){if(!this.#t)return;const X=this.div;for(const[le,de]of this.#t){const ce=X.querySelector(`[data-annotation-id="${le}"]`);if(!ce)continue;const{firstChild:me}=ce;me?me.nodeName==="CANVAS"?me.replaceWith(de):me.before(de):ce.append(de)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(X){return this.#n.get(X)}}t.AnnotationLayer=ye}),((e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function n(d){return Math.floor(Math.max(0,Math.min(1,d))*255).toString(16).padStart(2,"0")}function o(d){return Math.max(0,Math.min(255,255*d))}class u{static CMYK_G([f,v,w,E]){return["G",1-Math.min(1,.3*f+.59*w+.11*v+E)]}static G_CMYK([f]){return["CMYK",0,0,0,1-f]}static G_RGB([f]){return["RGB",f,f,f]}static G_rgb([f]){return f=o(f),[f,f,f]}static G_HTML([f]){const v=n(f);return`#${v}${v}${v}`}static RGB_G([f,v,w]){return["G",.3*f+.59*v+.11*w]}static RGB_rgb(f){return f.map(o)}static RGB_HTML(f){return`#${f.map(n).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([f,v,w,E]){return["RGB",1-Math.min(1,f+E),1-Math.min(1,w+E),1-Math.min(1,v+E)]}static CMYK_rgb([f,v,w,E]){return[o(1-Math.min(1,f+E)),o(1-Math.min(1,w+E)),o(1-Math.min(1,v+E))]}static CMYK_HTML(f){const v=this.CMYK_RGB(f).slice(1);return this.RGB_HTML(v)}static RGB_CMYK([f,v,w]){const E=1-f,C=1-v,_=1-w,D=Math.min(E,C,_);return["CMYK",E,C,_,D]}}t.ColorConverters=u}),((e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NullL10n=void 0,t.getL10nFallback=o;const n={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};n.print_progress_percent="{{progress}}%";function o(f,v){switch(f){case"find_match_count":f=`find_match_count[${v.total===1?"one":"other"}]`;break;case"find_match_count_limit":f=`find_match_count_limit[${v.limit===1?"one":"other"}]`;break}return n[f]||""}function u(f,v){return v?f.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(w,E)=>E in v?v[E]:"{{"+E+"}}"):f}const d={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(f,v=null,w=o(f,v)){return u(w,v)},async translate(f){}};t.NullL10n=d}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var o=n(25);class u{static setupStorage(f,v,w,E,C){const _=E.getValue(v,{value:null});switch(w.name){case"textarea":if(_.value!==null&&(f.textContent=_.value),C==="print")break;f.addEventListener("input",D=>{E.setValue(v,{value:D.target.value})});break;case"input":if(w.attributes.type==="radio"||w.attributes.type==="checkbox"){if(_.value===w.attributes.xfaOn?f.setAttribute("checked",!0):_.value===w.attributes.xfaOff&&f.removeAttribute("checked"),C==="print")break;f.addEventListener("change",D=>{E.setValue(v,{value:D.target.checked?D.target.getAttribute("xfaOn"):D.target.getAttribute("xfaOff")})})}else{if(_.value!==null&&f.setAttribute("value",_.value),C==="print")break;f.addEventListener("input",D=>{E.setValue(v,{value:D.target.value})})}break;case"select":if(_.value!==null){f.setAttribute("value",_.value);for(const D of w.children)D.attributes.value===_.value?D.attributes.selected=!0:D.attributes.hasOwnProperty("selected")&&delete D.attributes.selected}f.addEventListener("input",D=>{const O=D.target.options,M=O.selectedIndex===-1?"":O[O.selectedIndex].value;E.setValue(v,{value:M})});break}}static setAttributes({html:f,element:v,storage:w=null,intent:E,linkService:C}){const{attributes:_}=v,D=f instanceof HTMLAnchorElement;_.type==="radio"&&(_.name=`${_.name}-${E}`);for(const[O,M]of Object.entries(_))if(M!=null)switch(O){case"class":M.length&&f.setAttribute(O,M.join(" "));break;case"dataId":break;case"id":f.setAttribute("data-element-id",M);break;case"style":Object.assign(f.style,M);break;case"textContent":f.textContent=M;break;default:(!D||O!=="href"&&O!=="newWindow")&&f.setAttribute(O,M)}D&&C.addLinkAttributes(f,_.href,_.newWindow),w&&_.dataId&&this.setupStorage(f,_.dataId,v,w)}static render(f){const v=f.annotationStorage,w=f.linkService,E=f.xfaHtml,C=f.intent||"display",_=document.createElement(E.name);E.attributes&&this.setAttributes({html:_,element:E,intent:C,linkService:w});const D=[[E,-1,_]],O=f.div;if(O.append(_),f.viewport){const N=`matrix(${f.viewport.transform.join(",")})`;O.style.transform=N}C!=="richText"&&O.setAttribute("class","xfaLayer xfaFont");const M=[];for(;D.length>0;){const[N,I,B]=D.at(-1);if(I+1===N.children.length){D.pop();continue}const V=N.children[++D.at(-1)[1]];if(V===null)continue;const{name:j}=V;if(j==="#text"){const z=document.createTextNode(V.value);M.push(z),B.append(z);continue}const q=V?.attributes?.xmlns?document.createElementNS(V.attributes.xmlns,j):document.createElement(j);if(B.append(q),V.attributes&&this.setAttributes({html:q,element:V,storage:v,intent:C,linkService:w}),V.children&&V.children.length>0)D.push([V,-1,q]);else if(V.value){const z=document.createTextNode(V.value);o.XfaText.shouldBuildText(j)&&M.push(z),q.append(z)}}for(const N of O.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))N.setAttribute("readOnly",!0);return{textDivs:M}}static update(f){const v=`matrix(${f.viewport.transform.join(",")})`;f.div.style.transform=v,f.div.hidden=!1}}t.XfaLayer=u}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0;var o=n(1),u=n(4),d=n(29),f=n(6),v=n(5);class w extends u.AnnotationEditor{#e=0;#t=0;#n=this.canvasPointermove.bind(this);#r=this.canvasPointerleave.bind(this);#o=this.canvasPointerup.bind(this);#a=this.canvasPointerdown.bind(this);#s=new Path2D;#l=!1;#c=!1;#i=!1;#f=null;#d=0;#h=0;#p=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";constructor(C){super({...C,name:"inkEditor"}),this.color=C.color||null,this.thickness=C.thickness||null,this.opacity=C.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(C){u.AnnotationEditor.initialize(C,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(C,_){switch(C){case o.AnnotationEditorParamsType.INK_THICKNESS:w._defaultThickness=_;break;case o.AnnotationEditorParamsType.INK_COLOR:w._defaultColor=_;break;case o.AnnotationEditorParamsType.INK_OPACITY:w._defaultOpacity=_/100;break}}updateParams(C,_){switch(C){case o.AnnotationEditorParamsType.INK_THICKNESS:this.#v(_);break;case o.AnnotationEditorParamsType.INK_COLOR:this.#m(_);break;case o.AnnotationEditorParamsType.INK_OPACITY:this.#g(_);break}}static get defaultPropertiesToUpdate(){return[[o.AnnotationEditorParamsType.INK_THICKNESS,w._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,w._defaultColor||u.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round(w._defaultOpacity*100)]]}get propertiesToUpdate(){return[[o.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||w._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,this.color||w._defaultColor||u.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??w._defaultOpacity))]]}#v(C){const _=this.thickness;this.addCommands({cmd:()=>{this.thickness=C,this.#A()},undo:()=>{this.thickness=_,this.#A()},mustExec:!0,type:o.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#m(C){const _=this.color;this.addCommands({cmd:()=>{this.color=C,this.#C()},undo:()=>{this.color=_,this.#C()},mustExec:!0,type:o.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#g(C){C/=100;const _=this.opacity;this.addCommands({cmd:()=>{this.opacity=C,this.#C()},undo:()=>{this.opacity=_,this.#C()},mustExec:!0,type:o.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#D(),this.#P()),this.isAttachedToDOM||(this.parent.add(this),this.#b()),this.#A()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#f.disconnect(),this.#f=null,super.remove())}setParent(C){!this.parent&&C?this._uiManager.removeShouldRescale(this):this.parent&&C===null&&this._uiManager.addShouldRescale(this),super.setParent(C)}onScaleChanging(){const[C,_]=this.parentDimensions,D=this.width*C,O=this.height*_;this.setDimensions(D,O)}enableEditMode(){this.#l||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#a))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#a))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#u(){const{parentRotation:C,parentDimensions:[_,D]}=this;switch(C){case 90:return[0,D,D,_];case 180:return[_,D,_,D];case 270:return[_,0,D,_];default:return[0,0,_,D]}}#y(){const{ctx:C,color:_,opacity:D,thickness:O,parentScale:M,scaleFactor:N}=this;C.lineWidth=O*M/N,C.lineCap="round",C.lineJoin="round",C.miterLimit=10,C.strokeStyle=`${_}${(0,v.opacityToHex)(D)}`}#x(C,_){this.canvas.addEventListener("contextmenu",f.noContextMenu),this.canvas.addEventListener("pointerleave",this.#r),this.canvas.addEventListener("pointermove",this.#n),this.canvas.addEventListener("pointerup",this.#o),this.canvas.removeEventListener("pointerdown",this.#a),this.isEditing=!0,this.#i||(this.#i=!0,this.#b(),this.thickness||=w._defaultThickness,this.color||=w._defaultColor||u.AnnotationEditor._defaultLineColor,this.opacity??=w._defaultOpacity),this.currentPath.push([C,_]),this.#c=!1,this.#y(),this.#p=()=>{this.#L(),this.#p&&window.requestAnimationFrame(this.#p)},window.requestAnimationFrame(this.#p)}#w(C,_){const[D,O]=this.currentPath.at(-1);if(this.currentPath.length>1&&C===D&&_===O)return;const M=this.currentPath;let N=this.#s;if(M.push([C,_]),this.#c=!0,M.length<=2){N.moveTo(...M[0]),N.lineTo(C,_);return}M.length===3&&(this.#s=N=new Path2D,N.moveTo(...M[0])),this.#N(N,...M.at(-3),...M.at(-2),C,_)}#_(){if(this.currentPath.length===0)return;const C=this.currentPath.at(-1);this.#s.lineTo(...C)}#T(C,_){this.#p=null,C=Math.min(Math.max(C,0),this.canvas.width),_=Math.min(Math.max(_,0),this.canvas.height),this.#w(C,_),this.#_();let D;if(this.currentPath.length!==1)D=this.#I();else{const B=[C,_];D=[[B,B.slice(),B.slice(),B]]}const O=this.#s,M=this.currentPath;this.currentPath=[],this.#s=new Path2D;const N=()=>{this.allRawPaths.push(M),this.paths.push(D),this.bezierPath2D.push(O),this.rebuild()},I=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#D(),this.#P()),this.#A())};this.addCommands({cmd:N,undo:I,mustExec:!0})}#L(){if(!this.#c)return;this.#c=!1;const C=Math.ceil(this.thickness*this.parentScale),_=this.currentPath.slice(-3),D=_.map(N=>N[0]),O=_.map(N=>N[1]);Math.min(...D)-C,Math.max(...D)+C,Math.min(...O)-C,Math.max(...O)+C;const{ctx:M}=this;M.save(),M.clearRect(0,0,this.canvas.width,this.canvas.height);for(const N of this.bezierPath2D)M.stroke(N);M.stroke(this.#s),M.restore()}#N(C,_,D,O,M,N,I){const B=(_+O)/2,V=(D+M)/2,j=(O+N)/2,q=(M+I)/2;C.bezierCurveTo(B+2*(O-B)/3,V+2*(M-V)/3,j+2*(O-j)/3,q+2*(M-q)/3,j,q)}#I(){const C=this.currentPath;if(C.length<=2)return[[C[0],C[0],C.at(-1),C.at(-1)]];const _=[];let D,[O,M]=C[0];for(D=1;D<C.length-2;D++){const[z,$]=C[D],[ee,ie]=C[D+1],ae=(z+ee)/2,pe=($+ie)/2,he=[O+2*(z-O)/3,M+2*($-M)/3],be=[ae+2*(z-ae)/3,pe+2*($-pe)/3];_.push([[O,M],he,be,[ae,pe]]),[O,M]=[ae,pe]}const[N,I]=C[D],[B,V]=C[D+1],j=[O+2*(N-O)/3,M+2*(I-M)/3],q=[B+2*(N-B)/3,V+2*(I-V)/3];return _.push([[O,M],j,q,[B,V]]),_}#C(){if(this.isEmpty()){this.#E();return}this.#y();const{canvas:C,ctx:_}=this;_.setTransform(1,0,0,1,0,0),_.clearRect(0,0,C.width,C.height),this.#E();for(const D of this.bezierPath2D)_.stroke(D)}commit(){this.#l||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#l=!0,this.div.classList.add("disabled"),this.#A(!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(C){this._focusEventsAllowed&&(super.focusin(C),this.enableEditMode())}canvasPointerdown(C){C.button!==0||!this.isInEditMode()||this.#l||(this.setInForeground(),C.preventDefault(),C.type!=="mouse"&&this.div.focus(),this.#x(C.offsetX,C.offsetY))}canvasPointermove(C){C.preventDefault(),this.#w(C.offsetX,C.offsetY)}canvasPointerup(C){C.preventDefault(),this.#F(C)}canvasPointerleave(C){this.#F(C)}#F(C){this.canvas.removeEventListener("pointerleave",this.#r),this.canvas.removeEventListener("pointermove",this.#n),this.canvas.removeEventListener("pointerup",this.#o),this.canvas.addEventListener("pointerdown",this.#a),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",f.noContextMenu)},10),this.#T(C.offsetX,C.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#D(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",u.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(C=>this.canvas?.setAttribute("aria-label",C)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#P(){this.#f=new ResizeObserver(C=>{const _=C[0].contentRect;_.width&&_.height&&this.setDimensions(_.width,_.height)}),this.#f.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#l}render(){if(this.div)return this.div;let C,_;this.width&&(C=this.x,_=this.y),super.render(),u.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(I=>this.div?.setAttribute("aria-label",I));const[D,O,M,N]=this.#u();if(this.setAt(D,O,0,0),this.setDims(M,N),this.#D(),this.width){const[I,B]=this.parentDimensions;this.setAspectRatio(this.width*I,this.height*B),this.setAt(C*I,_*B,this.width*I,this.height*B),this.#i=!0,this.#b(),this.setDims(this.width*I,this.height*B),this.#C(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#P(),this.div}#b(){if(!this.#i)return;const[C,_]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*C),this.canvas.height=Math.ceil(this.height*_),this.#E()}setDimensions(C,_){const D=Math.round(C),O=Math.round(_);if(this.#d===D&&this.#h===O)return;this.#d=D,this.#h=O,this.canvas.style.visibility="hidden";const[M,N]=this.parentDimensions;this.width=C/M,this.height=_/N,this.fixAndSetPosition(),this.#l&&this.#R(C,_),this.#b(),this.#C(),this.canvas.style.visibility="visible",this.fixDims()}#R(C,_){const D=this.#O(),O=(C-D)/this.#t,M=(_-D)/this.#e;this.scaleFactor=Math.min(O,M)}#E(){const C=this.#O()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+C,this.translationY*this.scaleFactor+C)}static#k(C){const _=new Path2D;for(let D=0,O=C.length;D<O;D++){const[M,N,I,B]=C[D];D===0&&_.moveTo(...M),_.bezierCurveTo(N[0],N[1],I[0],I[1],B[0],B[1])}return _}static#B(C,_,D){const[O,M,N,I]=_;switch(D){case 0:for(let B=0,V=C.length;B<V;B+=2)C[B]+=O,C[B+1]=I-C[B+1];break;case 90:for(let B=0,V=C.length;B<V;B+=2){const j=C[B];C[B]=C[B+1]+O,C[B+1]=j+M}break;case 180:for(let B=0,V=C.length;B<V;B+=2)C[B]=N-C[B],C[B+1]+=M;break;case 270:for(let B=0,V=C.length;B<V;B+=2){const j=C[B];C[B]=N-C[B+1],C[B+1]=I-j}break;default:throw new Error("Invalid rotation")}return C}static#H(C,_,D){const[O,M,N,I]=_;switch(D){case 0:for(let B=0,V=C.length;B<V;B+=2)C[B]-=O,C[B+1]=I-C[B+1];break;case 90:for(let B=0,V=C.length;B<V;B+=2){const j=C[B];C[B]=C[B+1]-M,C[B+1]=j-O}break;case 180:for(let B=0,V=C.length;B<V;B+=2)C[B]=N-C[B],C[B+1]-=M;break;case 270:for(let B=0,V=C.length;B<V;B+=2){const j=C[B];C[B]=I-C[B+1],C[B+1]=N-j}break;default:throw new Error("Invalid rotation")}return C}#G(C,_,D,O){const M=[],N=this.thickness/2,I=C*_+N,B=C*D+N;for(const V of this.paths){const j=[],q=[];for(let z=0,$=V.length;z<$;z++){const[ee,ie,ae,pe]=V[z],he=C*ee[0]+I,be=C*ee[1]+B,xe=C*ie[0]+I,Ee=C*ie[1]+B,we=C*ae[0]+I,oe=C*ae[1]+B,se=C*pe[0]+I,J=C*pe[1]+B;z===0&&(j.push(he,be),q.push(he,be)),j.push(xe,Ee,we,oe,se,J),q.push(xe,Ee),z===$-1&&q.push(se,J)}M.push({bezier:w.#B(j,O,this.rotation),points:w.#B(q,O,this.rotation)})}return M}#M(){let C=1/0,_=-1/0,D=1/0,O=-1/0;for(const M of this.paths)for(const[N,I,B,V]of M){const j=o.Util.bezierBoundingBox(...N,...I,...B,...V);C=Math.min(C,j[0]),D=Math.min(D,j[1]),_=Math.max(_,j[2]),O=Math.max(O,j[3])}return[C,D,_,O]}#O(){return this.#l?Math.ceil(this.thickness*this.parentScale):0}#A(C=!1){if(this.isEmpty())return;if(!this.#l){this.#C();return}const _=this.#M(),D=this.#O();this.#t=Math.max(u.AnnotationEditor.MIN_SIZE,_[2]-_[0]),this.#e=Math.max(u.AnnotationEditor.MIN_SIZE,_[3]-_[1]);const O=Math.ceil(D+this.#t*this.scaleFactor),M=Math.ceil(D+this.#e*this.scaleFactor),[N,I]=this.parentDimensions;this.width=O/N,this.height=M/I,this.setAspectRatio(O,M);const B=this.translationX,V=this.translationY;this.translationX=-_[0],this.translationY=-_[1],this.#b(),this.#C(),this.#d=O,this.#h=M,this.setDims(O,M);const j=C?D/this.scaleFactor/2:0;this.translate(B-this.translationX-j,V-this.translationY-j)}static deserialize(C,_,D){if(C instanceof d.InkAnnotationElement)return null;const O=super.deserialize(C,_,D);O.thickness=C.thickness,O.color=o.Util.makeHexColor(...C.color),O.opacity=C.opacity;const[M,N]=O.pageDimensions,I=O.width*M,B=O.height*N,V=O.parentScale,j=C.thickness/2;O.#l=!0,O.#d=Math.round(I),O.#h=Math.round(B);const{paths:q,rect:z,rotation:$}=C;for(let{bezier:ie}of q){ie=w.#H(ie,z,$);const ae=[];O.paths.push(ae);let pe=V*(ie[0]-j),he=V*(ie[1]-j);for(let xe=2,Ee=ie.length;xe<Ee;xe+=6){const we=V*(ie[xe]-j),oe=V*(ie[xe+1]-j),se=V*(ie[xe+2]-j),J=V*(ie[xe+3]-j),Q=V*(ie[xe+4]-j),Z=V*(ie[xe+5]-j);ae.push([[pe,he],[we,oe],[se,J],[Q,Z]]),pe=Q,he=Z}const be=this.#k(ae);O.bezierPath2D.push(be)}const ee=O.#M();return O.#t=Math.max(u.AnnotationEditor.MIN_SIZE,ee[2]-ee[0]),O.#e=Math.max(u.AnnotationEditor.MIN_SIZE,ee[3]-ee[1]),O.#R(I,B),O}serialize(){if(this.isEmpty())return null;const C=this.getRect(0,0),_=u.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:o.AnnotationEditorType.INK,color:_,thickness:this.thickness,opacity:this.opacity,paths:this.#G(this.scaleFactor/this.parentScale,this.translationX,this.translationY,C),pageIndex:this.pageIndex,rect:C,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}t.InkEditor=w}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StampEditor=void 0;var o=n(1),u=n(4),d=n(6),f=n(29);class v extends u.AnnotationEditor{#e=null;#t=null;#n=null;#r=null;#o=null;#a=null;#s=null;#l=null;#c=!1;#i=!1;static _type="stamp";constructor(E){super({...E,name:"stampEditor"}),this.#r=E.bitmapUrl,this.#o=E.bitmapFile}static initialize(E){u.AnnotationEditor.initialize(E)}static get supportedTypes(){const E=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,o.shadow)(this,"supportedTypes",E.map(C=>`image/${C}`))}static get supportedTypesStr(){return(0,o.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(E){return this.supportedTypes.includes(E)}static paste(E,C){C.pasteEditor(o.AnnotationEditorType.STAMP,{bitmapFile:E.getAsFile()})}#f(E,C=!1){if(!E){this.remove();return}this.#e=E.bitmap,C||(this.#t=E.id,this.#c=E.isSvg),this.#p()}#d(){this.#n=null,this._uiManager.enableWaiting(!1),this.#a&&this.div.focus()}#h(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(C=>this.#f(C,!0)).finally(()=>this.#d());return}if(this.#r){const C=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(C).then(_=>this.#f(_)).finally(()=>this.#d());return}if(this.#o){const C=this.#o;this.#o=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(C).then(_=>this.#f(_)).finally(()=>this.#d());return}const E=document.createElement("input");E.type="file",E.accept=v.supportedTypesStr,this.#n=new Promise(C=>{E.addEventListener("change",async()=>{if(!E.files||E.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const _=await this._uiManager.imageManager.getFromFile(E.files[0]);this.#f(_)}C()}),E.addEventListener("cancel",()=>{this.remove(),C()})}).finally(()=>this.#d()),E.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#a?.remove(),this.#a=null,this.#s?.disconnect(),this.#s=null),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#h();return}super.rebuild(),this.div!==null&&(this.#t&&this.#h(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#r||this.#o)}get isResizable(){return!0}render(){if(this.div)return this.div;let E,C;if(this.width&&(E=this.x,C=this.y),super.render(),this.div.hidden=!0,this.#e?this.#p():this.#h(),this.width){const[_,D]=this.parentDimensions;this.setAt(E*_,C*D,this.width*_,this.height*D)}return this.div}#p(){const{div:E}=this;let{width:C,height:_}=this.#e;const[D,O]=this.pageDimensions,M=.75;if(this.width)C=this.width*D,_=this.height*O;else if(C>M*D||_>M*O){const V=Math.min(M*D/C,M*O/_);C*=V,_*=V}const[N,I]=this.parentDimensions;this.setDims(C*N/D,_*I/O),this._uiManager.enableWaiting(!1);const B=this.#a=document.createElement("canvas");E.append(B),E.hidden=!1,this.#g(C,_),this.#y(),this.#i||(this.parent.addUndoableEditor(this),this.#i=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()}#v(E,C){const[_,D]=this.parentDimensions;this.width=E/_,this.height=C/D,this.setDims(E,C),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#l!==null&&clearTimeout(this.#l);const O=200;this.#l=setTimeout(()=>{this.#l=null,this.#g(E,C)},O)}#m(E,C){const{width:_,height:D}=this.#e;let O=_,M=D,N=this.#e;for(;O>2*E||M>2*C;){const I=O,B=M;O>2*E&&(O=O>=16384?Math.floor(O/2)-1:Math.ceil(O/2)),M>2*C&&(M=M>=16384?Math.floor(M/2)-1:Math.ceil(M/2));const V=new OffscreenCanvas(O,M);V.getContext("2d").drawImage(N,0,0,I,B,0,0,O,M),N=V.transferToImageBitmap()}return N}#g(E,C){E=Math.ceil(E),C=Math.ceil(C);const _=this.#a;if(!_||_.width===E&&_.height===C)return;_.width=E,_.height=C;const D=this.#c?this.#e:this.#m(E,C),O=_.getContext("2d");O.filter=this._uiManager.hcmFilter,O.drawImage(D,0,0,D.width,D.height,0,0,E,C)}#u(E){if(E){if(this.#c){const D=this._uiManager.imageManager.getSvgUrl(this.#t);if(D)return D}const C=document.createElement("canvas");return{width:C.width,height:C.height}=this.#e,C.getContext("2d").drawImage(this.#e,0,0),C.toDataURL()}if(this.#c){const[C,_]=this.pageDimensions,D=Math.round(this.width*C*d.PixelsPerInch.PDF_TO_CSS_UNITS),O=Math.round(this.height*_*d.PixelsPerInch.PDF_TO_CSS_UNITS),M=new OffscreenCanvas(D,O);return M.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,D,O),M.transferToImageBitmap()}return structuredClone(this.#e)}#y(){this.#s=new ResizeObserver(E=>{const C=E[0].contentRect;C.width&&C.height&&this.#v(C.width,C.height)}),this.#s.observe(this.div)}static deserialize(E,C,_){if(E instanceof f.StampAnnotationElement)return null;const D=super.deserialize(E,C,_),{rect:O,bitmapUrl:M,bitmapId:N,isSvg:I,accessibilityData:B}=E;N&&_.imageManager.isValidId(N)?D.#t=N:D.#r=M,D.#c=I;const[V,j]=D.pageDimensions;return D.width=(O[2]-O[0])/V,D.height=(O[3]-O[1])/j,B&&(D.altTextData=B),D}serialize(E=!1,C=null){if(this.isEmpty())return null;const _={annotationType:o.AnnotationEditorType.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(E)return _.bitmapUrl=this.#u(!0),_.accessibilityData=this.altTextData,_;const{decorative:D,altText:O}=this.altTextData;if(!D&&O&&(_.accessibilityData={type:"Figure",alt:O}),C===null)return _;C.stamps||=new Map;const M=this.#c?(_.rect[2]-_.rect[0])*(_.rect[3]-_.rect[1]):null;if(!C.stamps.has(this.#t))C.stamps.set(this.#t,{area:M,serialized:_}),_.bitmap=this.#u(!1);else if(this.#c){const N=C.stamps.get(this.#t);M>N.area&&(N.area=M,N.serialized.bitmap.close(),N.serialized.bitmap=this.#u(!1))}return _}}t.StampEditor=v})],__webpack_module_cache__={};function __w_pdfjs_require__(e){var t=__webpack_module_cache__[e];if(t!==void 0)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__w_pdfjs_require__),n.exports}var __webpack_exports__={};return(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return d.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return f.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return v.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(e,"DOMSVGFactory",{enumerable:!0,get:function(){return o.DOMSVGFactory}}),Object.defineProperty(e,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return w.GlobalWorkerOptions}}),Object.defineProperty(e,"ImageKind",{enumerable:!0,get:function(){return t.ImageKind}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return n.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return o.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return n.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return o.PixelsPerInch}}),Object.defineProperty(e,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return o.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return n.SVGGraphics}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return E.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return n.build}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return n.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return o.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return o.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return o.getXfaPageViewport}}),Object.defineProperty(e,"isDataScheme",{enumerable:!0,get:function(){return o.isDataScheme}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return o.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return o.loadScript}}),Object.defineProperty(e,"noContextMenu",{enumerable:!0,get:function(){return o.noContextMenu}}),Object.defineProperty(e,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return u.renderTextLayer}}),Object.defineProperty(e,"setLayerDimensions",{enumerable:!0,get:function(){return o.setLayerDimensions}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(e,"updateTextLayer",{enumerable:!0,get:function(){return u.updateTextLayer}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return n.version}});var t=__w_pdfjs_require__(1),n=__w_pdfjs_require__(2),o=__w_pdfjs_require__(6),u=__w_pdfjs_require__(26),d=__w_pdfjs_require__(27),f=__w_pdfjs_require__(5),v=__w_pdfjs_require__(29),w=__w_pdfjs_require__(14),E=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf)),pdf.exports}var pdfExports=requirePdf();function _last(e){if(e?.length)return e[e.length-1]}function _areEqual(e,t,n){if(e===t)return!0;if(!e||!t)return e==null&&t==null;const o=e.length;if(o!==t.length)return!1;for(let u=0;u<o;u++)if(e[u]!==t[u])return!1;return!0}function _forAll(e,t){if(e){for(const n of e)if(t(n))return!0}}function _removeFromArray(e,t){const n=e.indexOf(t);n>=0&&e.splice(n,1)}function _moveInArray(e,t,n){for(let o=0;o<t.length;o++)_removeFromArray(e,t[o]);for(let o=t.length-1;o>=0;o--)e.splice(n,0,t[o])}var _makeNull=e=>e==null||e===""?null:e;function _exists(e){return e!=null&&e!==""}function _missing(e){return!_exists(e)}var _toStringOrNull=e=>e!=null&&typeof e.toString=="function"?e.toString():null,_defaultComparator=(e,t,n=!1)=>e==null?t==null?0:-1:t==null?1:(typeof e=="object"&&e.toNumber&&(e=e.toNumber()),typeof t=="object"&&t.toNumber&&(t=t.toNumber()),!n||typeof e!="string"?e>t?1:e<t?-1:0:e.localeCompare(t)),LocalEventService=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,n){const o=t?this.allAsyncListeners:this.allSyncListeners;let u=o.get(e);return!u&&n&&(u=new Set,o.set(e,u)),u}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,n=!1){this.getListeners(e,n,!0).add(t)}removeEventListener(e,t,n=!1){const o=this.getListeners(e,n,!1);o&&(o.delete(t),o.size===0&&(n?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){this.getGlobalListeners(t).add(e)}removeGlobalListener(e,t=!1){this.getGlobalListeners(t).delete(e)}dispatchEvent(e){this.dispatchToListeners(e,!0),this.dispatchToListeners(e,!1),this.firedEvents[e.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){const n=e.type;if(t&&"event"in e){const v=e.event;v instanceof Event&&(e.eventPath=v.composedPath())}const{frameworkOverrides:o}=this,u=v=>{const w=o?()=>o.wrapIncoming(v):v;t?this.dispatchAsync(w):w()},d=this.getListeners(n,t,!1);if((d?.size??0)>0){const v=new Set(d);for(const w of v)d?.has(w)&&u(()=>w(e))}const f=this.getGlobalListeners(t);if(f.size>0){const v=new Set(f);for(const w of v)u(()=>w(n,e))}}getGlobalListeners(e){return e?this.globalAsyncListeners:this.globalSyncListeners}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){const t=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)},n=this.frameworkOverrides;n?n.wrapIncoming(t):t(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[];for(const t of e)t()}},reUnescapedHtml=/[&<>"']/g,HTML_ESCAPES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function _toString(e){return e?.toString().toString()??null}function _escapeString(e){return _toString(e)?.replace(reUnescapedHtml,t=>HTML_ESCAPES[t])??null}function _isExpressionString(e){return typeof e=="string"&&e.startsWith("=")&&e.length>1}function _camelCaseToHumanText(e){if(!e||e==null)return null;const t=/([a-z])([A-Z])/g,n=/([A-Z]+)([A-Z])([a-z])/g;return e.replace(t,"$1 $2").replace(n,"$1 $2$3").replace(/\./g," ").split(" ").map(u=>u.substring(0,1).toUpperCase()+(u.length>1?u.substring(1,u.length):"")).join(" ")}function _getRootNode(e){return e.eRootDiv.getRootNode()}function _getActiveDomElement(e){return _getRootNode(e).activeElement}function _getDocument(e){const{gos:t,eRootDiv:n}=e;let o=null;const u=t.get("getDocument");return u&&_exists(u)?o=u():n&&(o=n.ownerDocument),o&&_exists(o)?o:document}function _isNothingFocused(e){const t=_getActiveDomElement(e);return t===null||t===_getDocument(e).body}function _getWindow(e){return _getDocument(e).defaultView||window}function _getPageBody(e){let t=null,n=null;try{t=_getDocument(e).fullscreenElement}catch{}finally{t||(t=_getRootNode(e));const o=t.querySelector("body");o?n=o:t instanceof ShadowRoot?n=t:t instanceof Document?n=t?.documentElement:n=t}return n}function _getBodyWidth(e){return _getPageBody(e)?.clientWidth??(window.innerWidth||-1)}function _getBodyHeight(e){return _getPageBody(e)?.clientHeight??(window.innerHeight||-1)}function _toggleAriaAttribute(e,t,n){n==null||typeof n=="string"&&n==""?_removeAriaAttribute(e,t):_setAriaAttribute(e,t,n)}function _setAriaAttribute(e,t,n){e.setAttribute(_ariaAttributeName(t),n.toString())}function _removeAriaAttribute(e,t){e.removeAttribute(_ariaAttributeName(t))}function _ariaAttributeName(e){return`aria-${e}`}function _setAriaRole(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function _getAriaSortState(e){const t=e?.direction;return t==="asc"?"ascending":t==="desc"?"descending":t==="mixed"?"other":"none"}function _getAriaLabel(e){return e.getAttribute("aria-label")}function _setAriaLabel(e,t){_toggleAriaAttribute(e,"label",t)}function _setAriaLabelledBy(e,t){_toggleAriaAttribute(e,"labelledby",t)}function _setAriaLive(e,t){_toggleAriaAttribute(e,"live",t)}function _setAriaAtomic(e,t){_toggleAriaAttribute(e,"atomic",t)}function _setAriaRelevant(e,t){_toggleAriaAttribute(e,"relevant",t)}function _setAriaInvalid(e,t){_toggleAriaAttribute(e,"invalid",t)}function _setAriaHidden(e,t){_toggleAriaAttribute(e,"hidden",t)}function _setAriaExpanded(e,t){_setAriaAttribute(e,"expanded",t)}function _setAriaRowCount(e,t){_setAriaAttribute(e,"rowcount",t)}function _setAriaRowIndex(e,t){_setAriaAttribute(e,"rowindex",t)}function _setAriaColCount(e,t){_setAriaAttribute(e,"colcount",t)}function _setAriaColIndex(e,t){_setAriaAttribute(e,"colindex",t)}function _setAriaColSpan(e,t){_setAriaAttribute(e,"colspan",t)}function _setAriaSort(e,t){_setAriaAttribute(e,"sort",t)}function _removeAriaSort(e){_removeAriaAttribute(e,"sort")}function _getAriaCheckboxStateName(e,t){return t===void 0?e("ariaIndeterminate","indeterminate"):t===!0?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}var FOCUSABLE_SELECTOR="[tabindex], input, select, button, textarea, [href]",FOCUSABLE_EXCLUDE="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function _isFocusableFormField(e){return!e||!e.matches("input, select, button, textarea")||!e.matches(FOCUSABLE_EXCLUDE)?!1:_isVisible(e)}function _setDisplayed(e,t,n={}){const{skipAriaHidden:o}=n;e.classList.toggle("ag-hidden",!t),o||_setAriaHidden(e,!t)}function _setVisible(e,t,n={}){const{skipAriaHidden:o}=n;e.classList.toggle("ag-invisible",!t),o||_setAriaHidden(e,!t)}function _setDisabled(e,t){const n="disabled",o=t?d=>d.setAttribute(n,""):d=>d.removeAttribute(n);o(e);const u=e.querySelectorAll("input")??[];for(const d of u)o(d)}function _isElementChildOfClass(e,t,n){let o=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,typeof n=="number"){if(++o>n)break}else if(e===n)break}return!1}function _getElementSize(e){const{height:t,width:n,borderTopWidth:o,borderRightWidth:u,borderBottomWidth:d,borderLeftWidth:f,paddingTop:v,paddingRight:w,paddingBottom:E,paddingLeft:C,marginTop:_,marginRight:D,marginBottom:O,marginLeft:M,boxSizing:N}=window.getComputedStyle(e),I=Number.parseFloat;return{height:I(t||"0"),width:I(n||"0"),borderTopWidth:I(o||"0"),borderRightWidth:I(u||"0"),borderBottomWidth:I(d||"0"),borderLeftWidth:I(f||"0"),paddingTop:I(v||"0"),paddingRight:I(w||"0"),paddingBottom:I(E||"0"),paddingLeft:I(C||"0"),marginTop:I(_||"0"),marginRight:I(D||"0"),marginBottom:I(O||"0"),marginLeft:I(M||"0"),boxSizing:N}}function _getInnerHeight(e){const t=_getElementSize(e);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom-t.borderTopWidth-t.borderBottomWidth:t.height}function _getInnerWidth(e){const t=_getElementSize(e);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight-t.borderLeftWidth-t.borderRightWidth:t.width}function _getElementRectWithOffset(e){const t=e.getBoundingClientRect(),{borderTopWidth:n,borderLeftWidth:o,borderRightWidth:u,borderBottomWidth:d}=_getElementSize(e);return{top:t.top+(n||0),left:t.left+(o||0),right:t.right+(u||0),bottom:t.bottom+(d||0)}}function _getScrollLeft(e,t){let n=e.scrollLeft;return t&&(n=Math.abs(n)),n}function _setScrollLeft(e,t,n){n&&(t*=-1),e.scrollLeft=t}function _clearElement(e){for(;e?.firstChild;)e.firstChild.remove()}function _removeFromParent(e){e?.parentNode&&e.remove()}function _isInDOM(e){return!!e.offsetParent}function _isVisible(e){return e.checkVisibility?e.checkVisibility({checkVisibilityCSS:!0}):!(!_isInDOM(e)||window.getComputedStyle(e).visibility!=="visible")}function _loadTemplate(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function _setElementWidth(e,t){t==="flex"?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):_setFixedWidth(e,t)}function _setFixedWidth(e,t){t=_formatSize(t),e.style.width=t,e.style.maxWidth=t,e.style.minWidth=t}function _setFixedHeight(e,t){t=_formatSize(t),e.style.height=t,e.style.maxHeight=t,e.style.minHeight=t}function _formatSize(e){return typeof e=="number"?`${e}px`:e}function _isNodeOrElement(e){return e instanceof Node||e instanceof HTMLElement}function _addOrRemoveAttribute(e,t,n){n==null||n===""?e.removeAttribute(t):e.setAttribute(t,n.toString())}function _placeCaretAtEnd(e,t){if(!t.isContentEditable)return;const n=_getWindow(e).getSelection();if(!n)return;const o=_getDocument(e).createRange();o.selectNodeContents(t),o.collapse(!1),n.removeAllRanges(),n.addRange(o)}function _observeResize(e,t,n){const u=_getWindow(e).ResizeObserver,d=u?new u(n):null;return d?.observe(t),()=>d?.disconnect()}function _requestAnimationFrame(e,t){const n=_getWindow(e);n.requestAnimationFrame?n.requestAnimationFrame(t):n.webkitRequestAnimationFrame?n.webkitRequestAnimationFrame(t):n.setTimeout(t,0)}var DataRefAttribute="data-ref",whitespaceNode;function getWhitespaceNode(){return whitespaceNode??(whitespaceNode=document.createTextNode(" ")),whitespaceNode.cloneNode()}function _createAgElement(e){const{attrs:t,children:n,cls:o,ref:u,role:d,tag:f}=e,v=document.createElement(f);if(o&&(v.className=o),u&&v.setAttribute(DataRefAttribute,u),d&&v.setAttribute("role",d),t)for(const w of Object.keys(t))v.setAttribute(w,t[w]);if(n)if(typeof n=="string")v.textContent=n;else{let w=!0;for(const E of n)E&&(typeof E=="string"?(v.appendChild(document.createTextNode(E)),w=!1):typeof E=="function"?v.appendChild(E()):(w&&(v.appendChild(getWhitespaceNode()),w=!1),v.append(_createAgElement(E)),v.appendChild(getWhitespaceNode())))}return v}var PASSIVE_EVENTS=["touchstart","touchend","touchmove","touchcancel","scroll"],NON_PASSIVE_EVENTS=["wheel"],supports={},_isEventSupported=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return n=>{if(typeof supports[n]=="boolean")return supports[n];const o=document.createElement(e[n]||"div");return n="on"+n,supports[n]=n in o}})();function _addSafePassiveEventListener(e,t,n){const o=getPassiveStateForEvent(t);let u;o!=null&&(u={passive:o}),e.addEventListener(t,n,u)}var getPassiveStateForEvent=e=>{const t=PASSIVE_EVENTS.includes(e),n=NON_PASSIVE_EVENTS.includes(e);if(t)return!0;if(n)return!1};function _areEventsNear(e,t,n){if(n===0)return!1;const o=Math.abs(e.clientX-t.clientX),u=Math.abs(e.clientY-t.clientY);return Math.max(o,u)<=n}var _getFirstActiveTouch=(e,t)=>{const n=e.identifier;for(let o=0,u=t.length;o<u;++o){const d=t[o];if(d.identifier===n)return d}return null};function _isEventFromThisInstance(e,t){return e.gos.isElementInThisInstance(t.target)}function _anchorElementToMouseMoveEvent(e,t,n){const u=e.getBoundingClientRect().height,d=_getBodyWidth(n)-2,f=_getBodyHeight(n)-2;if(!e.offsetParent)return;const w=_getElementRectWithOffset(e.offsetParent),{clientY:E,clientX:C}=t;let _=E-w.top-u/2,D=C-w.left-10;const O=_getDocument(n),M=O.defaultView||window,N=M.pageYOffset||O.documentElement.scrollTop,I=M.pageXOffset||O.documentElement.scrollLeft;d>0&&D+e.clientWidth>d+I&&(D=d+I-e.clientWidth),D<0&&(D=0),f>0&&_+e.clientHeight>f+N&&(_=f+N-e.clientHeight),_<0&&(_=0),e.style.left=`${D}px`,e.style.top=`${_}px`}var addTempEventHandlers=(e,...t)=>{for(const n of t){const[o,u,d,f]=n;o.addEventListener(u,d,f),e.push(n)}},clearTempEventHandlers=e=>{if(e){for(const[t,n,o,u]of e)t.removeEventListener(n,o,u);e.length=0}},preventEventDefault=e=>{e.cancelable&&e.preventDefault()};function defaultLocaleTextFunc(e,t){return t}function _getLocaleTextFunc(e){return e?.getLocaleTextFunc()??defaultLocaleTextFunc}var AgBeanStub=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.beans=e,this.stubContext=e.context,this.eventSvc=e.eventSvc,this.gos=e.gos}destroy(){const{destroyFunctions:e}=this;for(let t=0;t<e.length;t++)e[t]();e.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,n){this.localEventService||(this.localEventService=new LocalEventService),this.localEventService.addEventListener(e,t,n)}removeEventListener(e,t,n){this.localEventService?.removeEventListener(e,t,n)}dispatchLocalEvent(e){this.localEventService?.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventSvc,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){const n=[];for(const o of Object.keys(t)){const u=t[o];u&&n.push(this._setupListener(e,o,u))}return n}_setupListener(e,t,n){if(this.destroyed)return()=>null;let o;if(isAgEventEmitter(e))e.__addEventListener(t,n),o=()=>(e.__removeEventListener(t,n),null);else{const u=isEventService(e);e instanceof HTMLElement?_addSafePassiveEventListener(e,t,n):u?e.addListener(t,n):e.addEventListener(t,n),o=u?()=>(e.removeListener(t,n),null):()=>(e.removeEventListener(t,n),null)}return this.destroyFunctions.push(o),()=>(o(),this.destroyFunctions=this.destroyFunctions.filter(u=>u!==o),null)}setupPropertyListener(e,t){const{gos:n}=this;n.addPropertyEventListener(e,t);const o=()=>(n.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(o),()=>(o(),this.destroyFunctions=this.destroyFunctions.filter(u=>u!==o),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupPropertyListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const n=e.join("-")+this.propertyListenerId++,o=u=>{if(u.changeSet){if(u.changeSet&&u.changeSet.id===this.lastChangeSetIdLookup[n])return;this.lastChangeSetIdLookup[n]=u.changeSet.id}const d={type:"propertyChanged",changeSet:u.changeSet,source:u.source};t(d)};for(const u of e)this.setupPropertyListener(u,o)}getLocaleTextFunc(){return _getLocaleTextFunc(this.beans.localeSvc)}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createOptionalManagedBean(e,t){return e?this.createManagedBean(e,t):void 0}createManagedBean(e,t){const n=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),n}createBean(e,t,n){return(t||this.stubContext).createBean(e,n)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}};function isAgEventEmitter(e){return e.__addEventListener!==void 0}function isEventService(e){return e.eventServiceType==="global"}var BeanStub=class extends AgBeanStub{},doOnceSet=new Set,_doOnce=(e,t)=>{doOnceSet.has(t)||(doOnceSet.add(t),e())};_doOnce._set=doOnceSet;var batchedCallsSetTimeout={pending:!1,funcs:[]},batchedCallsRaf={pending:!1,funcs:[]};function _batchCall(e,t="setTimeout",n){const o=t==="raf"?batchedCallsRaf:batchedCallsSetTimeout;if(o.funcs.push(e),o.pending)return;o.pending=!0;const u=()=>{const d=o.funcs.slice();o.funcs.length=0,o.pending=!1;for(const f of d)f()};t==="raf"?_requestAnimationFrame(n,u):window.setTimeout(u,0)}function _debounce(e,t,n){let o;return function(...u){const d=this;return window.clearTimeout(o),o=window.setTimeout(function(){e.isAlive()&&t.apply(d,u)},n),o}}function _throttle(e,t){let n=0;return function(...o){const u=this,d=Date.now();d-n<t||(n=d,e.apply(u,o))}}function _waitUntil(e,t,n,o=100){const u=Date.now();let d=null,f=!1;const v=()=>{d!=null&&(window.clearInterval(d),d=null)};e.addDestroyFunc(v);const w=()=>{const E=Date.now()-u>o;(t()||E)&&(n(),f=!0,v())};w(),f||(d=window.setInterval(w,10))}var SKIP_JS_BUILTINS=new Set(["__proto__","constructor","prototype"]);function _iterateObject(e,t){if(e!=null){if(Array.isArray(e)){for(let n=0;n<e.length;n++)t(n.toString(),e[n]);return}for(const n of Object.keys(e).filter(o=>!SKIP_JS_BUILTINS.has(o)))t(n,e[n])}}function _mergeDeep(e,t,n=!0,o=!1){_exists(t)&&_iterateObject(t,(u,d)=>{let f=e[u];f!==d&&(o&&f==null&&d!=null&&typeof d=="object"&&d.constructor===Object&&(f={},e[u]=f),_isNonNullObject(d)&&_isNonNullObject(f)&&!Array.isArray(f)?_mergeDeep(f,d,n,o):(n||d!==void 0)&&(e[u]=d))})}function _isNonNullObject(e){return typeof e=="object"&&e!==null}var _GlobalGridOptions=class Ia{static applyGlobalGridOptions(t){if(!Ia.gridOptions)return{...t};let n={};return _mergeDeep(n,Ia.gridOptions,!0,!0),Ia.mergeStrategy==="deep"?_mergeDeep(n,t,!0,!0):n={...n,...t},Ia.gridOptions.context&&(n.context=Ia.gridOptions.context),t.context&&(Ia.mergeStrategy==="deep"&&n.context&&_mergeDeep(t.context,n.context,!0,!0),n.context=t.context),n}static applyGlobalGridOption(t,n){if(Ia.mergeStrategy==="deep"){const o=_getGlobalGridOption(t);if(o&&typeof o=="object"&&typeof n=="object")return Ia.applyGlobalGridOptions({[t]:n})[t]}return n}};_GlobalGridOptions.gridOptions=void 0;_GlobalGridOptions.mergeStrategy="shallow";var GlobalGridOptions=_GlobalGridOptions;function _getGlobalGridOption(e){return GlobalGridOptions.gridOptions?.[e]}var GRID_OPTION_DEFAULTS={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipSwitchShowDelay:200,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,cellFlashDuration:500,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,refreshAfterGroupEdit:!1,rowDragInsertDelay:500,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1,enableFilterHandlers:!1},BASE_URL="https://www.ag-grid.com";function _logIfDebug(e,t,...n){e.get("debug")&&console.log("AG Grid: "+t,...n)}function _warnOnce(e,...t){_doOnce(()=>console.warn("AG Grid: "+e,...t),e+t?.join(""))}function _errorOnce(e,...t){_doOnce(()=>console.error("AG Grid: "+e,...t),e+t?.join(""))}var allRegisteredModules=new Set,globalModulesMap={},gridModulesMap={},currentModuleVersion,userHasRegistered=!1,areGridScopedModules=!1,isUmd=!1;function isValidModuleVersion(e){const[t,n]=e.version.split(".")||[],[o,u]=currentModuleVersion.split(".")||[];return t===o&&n===u}function runVersionChecks(e){currentModuleVersion||(currentModuleVersion=e.version);const t=o=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${o} Please update all modules to the same version.`;e.version?isValidModuleVersion(e)||_errorOnce(t(`'${e.moduleName}' is version ${e.version} but the other modules are version ${currentModuleVersion}.`)):_errorOnce(t(`'${e.moduleName}' is incompatible.`));const n=e.validate?.();n&&!n.isValid&&_errorOnce(`${n.message}`)}function _registerModule(e,t,n=!1){n||(userHasRegistered=!0),runVersionChecks(e);const o=e.rowModels??["all"];allRegisteredModules.add(e);let u;t!==void 0?(areGridScopedModules=!0,gridModulesMap[t]===void 0&&(gridModulesMap[t]={}),u=gridModulesMap[t]):u=globalModulesMap;for(const d of o)u[d]===void 0&&(u[d]={}),u[d][e.moduleName]=e;if(e.dependsOn)for(const d of e.dependsOn)_registerModule(d,t,n)}function _unRegisterGridModules(e){delete gridModulesMap[e]}function _isModuleRegistered(e,t,n){const o=u=>!!globalModulesMap[u]?.[e]||!!gridModulesMap[t]?.[u]?.[e];return o(n)||o("all")}function _areModulesGridScoped(){return areGridScopedModules}function _getRegisteredModules(e,t){const n=gridModulesMap[e]??{};return[...Object.values(globalModulesMap.all??{}),...Object.values(n.all??{}),...Object.values(globalModulesMap[t]??{}),...Object.values(n[t]??{})]}function _getAllRegisteredModules(){return new Set(allRegisteredModules)}function _getGridRegisteredModules(e,t){const n=gridModulesMap[e]??{};return[...Object.values(n.all??{}),...Object.values(n[t]??{})]}function _hasUserRegistered(){return userHasRegistered}function _isUmd(){return isUmd}function _findEnterpriseCoreModule(e){for(const t of e){if("setLicenseKey"in t)return t;if(t.dependsOn){const n=_findEnterpriseCoreModule(t.dependsOn);if(n)return n}}}var VERSION="35.1.0",MAX_URL_LENGTH=2e3,MIN_PARAM_LENGTH=100,VERSION_PARAM_NAME="_version_",baseDocLink=`${BASE_URL}/javascript-data-grid`;function setValidationDocLink(e){baseDocLink=e}function getErrorParts(e,t,n){return[minifiedLog(e,t,n)]}function getMsgOrDefault(e,t,n,o,u){e(`${o?"warning":"error"} #${t}`,...getErrorParts(t,n,u))}function stringifyObject(e){if(!e)return String(e);const t={};for(const n of Object.keys(e))typeof e[n]!="object"&&typeof e[n]!="function"&&(t[n]=e[n]);return JSON.stringify(t)}function stringifyValue(e){let t=e;return e instanceof Error?t=e.toString():typeof e=="object"&&(t=stringifyObject(e)),t}function getParamsUrl(e,t){return`${e}?${t.toString()}`}function truncateUrl(e,t,n){const o=Array.from(t.entries()).sort((d,f)=>f[1].length-d[1].length);let u=getParamsUrl(e,t);for(const[d,f]of o){if(d===VERSION_PARAM_NAME)continue;const v=u.length-n;if(v<=0)break;const w="...",E=v+w.length,C=f.length-E>MIN_PARAM_LENGTH?f.slice(0,f.length-E)+w:f.slice(0,MIN_PARAM_LENGTH)+w;t.set(d,C),u=getParamsUrl(e,t)}return u}function getErrorLink(e,t){const n=new URLSearchParams;if(n.append(VERSION_PARAM_NAME,VERSION),t)for(const d of Object.keys(t))n.append(d,stringifyValue(t[d]));const o=`${baseDocLink}/errors/${e}`,u=getParamsUrl(o,n);return u.length<=MAX_URL_LENGTH?u:truncateUrl(o,n,MAX_URL_LENGTH)}var minifiedLog=(e,t,n)=>{const o=getErrorLink(e,t);return`${`${n?n+` 
`:""}Visit ${o}`}${n?"":` 
  Alternatively register the ValidationModule to see the full message in the console.`}`};function _warn(...e){getMsgOrDefault(_warnOnce,e[0],e[1],!0)}function _error(...e){getMsgOrDefault(_errorOnce,e[0],e[1],!1)}function _logPreInitErr(e,t,n){getMsgOrDefault(_errorOnce,e,t,!1,n)}function getErrMsg(e,t){const n=t[0];return`error #${n} `+getErrorParts(n,t[1],e).join(" ")}function _errMsg(...e){return getErrMsg(void 0,e)}function isRowModelType(e,t){return e.get("rowModelType")===t}function _isClientSideRowModel(e,t){return isRowModelType(e,"clientSide")}function _isServerSideRowModel(e,t){return isRowModelType(e,"serverSide")}function _isDomLayout(e,t){return e.get("domLayout")===t}function _isRowSelection(e){return _getRowSelectionMode(e)!==void 0}function _isGetRowHeightFunction(e){return typeof e.get("getRowHeight")=="function"}function _shouldMaintainColumnOrder(e,t){return t?!e.get("enableStrictPivotColumnOrder"):e.get("maintainColumnOrder")}function _isRowNumbers({gos:e,formula:t}){const n=e.get("rowNumbers");return n||!!t?.active&&n!==!1}function _getRowHeightForNode(e,t,n=!1,o){const{gos:u,environment:d}=e;if(o==null&&(o=d.getDefaultRowHeight()),_isGetRowHeightFunction(u)){if(n)return{height:o,estimated:!0};const w={node:t,data:t.data},E=u.getCallback("getRowHeight")(w);if(isNumeric(E))return E===0&&_warn(23),{height:Math.max(1,E),estimated:!1}}if(t.detail&&u.get("masterDetail"))return getMasterDetailRowHeight(u);const f=u.get("rowHeight");return{height:f&&isNumeric(f)?f:o,estimated:!1}}function getMasterDetailRowHeight(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};const t=e.get("detailRowHeight");return isNumeric(t)?{height:t,estimated:!1}:{height:300,estimated:!1}}function _getRowHeightAsNumber(e){const{environment:t,gos:n}=e,o=n.get("rowHeight");if(!o||_missing(o))return t.getDefaultRowHeight();const u=t.refreshRowHeightVariable();return u!==-1?u:(_warn(24),t.getDefaultRowHeight())}function isNumeric(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)}function _getDomData(e,t,n){const o=t[e.getDomDataKey()];return o?o[n]:void 0}function _setDomData(e,t,n,o){const u=e.getDomDataKey();let d=t[u];_missing(d)&&(d={},t[u]=d),d[n]=o}function _isAnimateRows(e){return e.get("ensureDomOrder")?!1:e.get("animateRows")}function _isGroupRowsSticky(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||_isDomLayout(e,"print"))}function _isColumnsSortingCoupledToGroup(e){return!e.get("autoGroupColumnDef")?.comparator&&!e.get("treeData")}function _isGroupUseEntireRow(e,t){return t?!1:e.get("groupDisplayType")==="groupRows"}function _isFullWidthGroupRow(e,t,n){return!!t.group&&!t.footer&&_isGroupUseEntireRow(e,n)}function _getCheckboxes(e){return e?.checkboxes??!0}function _getCheckboxLocation(e){if(typeof e=="object")return e.checkboxLocation??"selectionColumn"}function _isCellSelectionEnabled(e){const t=e.get("cellSelection");return t!==void 0?!!t:e.get("enableRangeSelection")}function _getEnableColumnSelection(e){const t=e.get("cellSelection")??!1;return(typeof t=="object"&&t.enableColumnSelection)??!1}function _getRowSelectionMode(e){const t="beanName"in e&&e.beanName==="gos"?e.get("rowSelection"):e.rowSelection;if(typeof t=="string")switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}switch(t?.mode){case"multiRow":case"singleRow":return t.mode;default:return}}function _getSelectAll(e,t=!0){const n=e.get("rowSelection");return typeof n!="object"?t?"all":void 0:n.mode==="multiRow"?n.selectAll:"all"}function _getCtrlASelectsRows(e){const t=e.get("rowSelection");return typeof t=="string"?!1:t?.mode==="multiRow"?t.ctrlASelectsRows??!1:!1}function _isLegacyMenuEnabled(e){return e.get("columnMenu")==="legacy"}function _getCallbackForEvent(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substring(1)}function _combineAttributesAndGridOptions(e,t,n){typeof e!="object"&&(e={});const o={...e};for(const u of n){const d=t[u];typeof d<"u"&&(o[u]=d)}return o}function _processOnChange(e,t){if(!e)return;const n={};let o=!1;for(const f of Object.keys(e))n[f]=e[f],o=!0;if(!o)return;const u={type:"gridOptionsChanged",options:n};t.dispatchEvent(u);const d={type:"componentStateChanged",...n};t.dispatchEvent(d)}function _addGridCommonParams(e,t){return e.addCommon(t)}function _getGridOption(e,t){return e[t]??e.gridOptions?.[t]??_getGlobalGridOption(t)??GRID_OPTION_DEFAULTS[t]}function _interpretAsRightClick({gos:e},t){return t.button===2||t.ctrlKey&&e.get("allowContextMenuWithControlKey")}var COL_DEF_DEFAULTS={resizable:!0,sortable:!0},instanceIdSequence=0;function getNextColInstanceId(){return instanceIdSequence++}function isColumn(e){return e instanceof AgColumn}var DEFAULT_SORTING_ORDER=["asc","desc",null],DEFAULT_ABSOLUTE_SORTING_ORDER=[{type:"absolute",direction:"asc"},{type:"absolute",direction:"desc"},null],AgColumn=class extends BeanStub{constructor(e,t,n,o){super(),this.colDef=e,this.userProvidedColDef=t,this.colId=n,this.primary=o,this.isColumn=!0,this.instanceId=getNextColInstanceId(),this.autoHeaderHeight=null,this.sortDef=_getSortDefFromInput(),this._wasSortExplicitlyRemoved=!1,this.moving=!1,this.resizing=!1,this.menuVisible=!1,this.formulaRef=null,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.colEventSvc=new LocalEventService,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.flex=null,this.colIdSanitised=_escapeString(n)}destroy(){super.destroy(),this.beans.rowSpanSvc?.deregister(this)}getInstanceId(){return this.instanceId}initState(){const{colDef:e,beans:{sortSvc:t,pinnedCols:n,colFlex:o}}=this;t?.initCol(this);const u=e.hide;u!==void 0?this.visible=!u:this.visible=!e.initialHide,n?.initCol(this),o?.initCol(this)}setColDef(e,t,n){const o=e.spanRows!==this.colDef.spanRows;this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),o&&(this.beans.rowSpanSvc?.deregister(this),this.initRowSpan()),this.dispatchColEvent("colDefChanged",n)}getUserProvidedColDef(){return this.userProvidedColDef}getParent(){return this.parent}getOriginalParent(){return this.originalParent}postConstruct(){this.initState(),this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip(),this.initRowSpan(),this.addPivotListener()}initDotNotation(){const{gos:e,colDef:{field:t,tooltipField:n}}=this,o=e.get("suppressFieldDotNotation");this.fieldContainsDots=_exists(t)&&t.includes(".")&&!o,this.tooltipFieldContainsDots=_exists(n)&&n.includes(".")&&!o}initMinAndMaxWidths(){const e=this.colDef;this.minWidth=e.minWidth??this.beans.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.beans.tooltipSvc?.initCol(this)}initRowSpan(){this.colDef.spanRows&&this.beans.rowSpanSvc?.register(this)}addPivotListener(){const e=this.beans.pivotColDefSvc,t=this.colDef.pivotValueColumn;!e||!t||this.addManagedListeners(t,{colDefChanged:n=>{const o=e.recreateColDef(this.colDef);this.setColDef(o,o,n.source)}})}resetActualWidth(e){const t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){const t=e.width??e.initialWidth??200;return Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){return this.beans.showRowGroupCols?.isRowGroupDisplayed(this,e)??!1}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}__addEventListener(e,t){this.colEventSvc.addEventListener(e,t)}__removeEventListener(e,t){this.colEventSvc.removeEventListener(e,t)}addEventListener(e,t){this.frameworkEventListenerService=this.beans.frameworkOverrides.createLocalEventListenerWrapper?.(this.frameworkEventListenerService,this.colEventSvc);const n=this.frameworkEventListenerService?.wrap(e,t)??t;this.colEventSvc.addEventListener(e,n)}removeEventListener(e,t){const n=this.frameworkEventListenerService?.unwrap(e,t)??t;this.colEventSvc.removeEventListener(e,n)}createColumnFunctionCallbackParams(e){return _addGridCommonParams(this.gos,{node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){return this.beans.cellNavigation?.isSuppressNavigable(this,e)??!1}isCellEditable(e){return this.beans.editSvc?.isCellEditable({rowNode:e,column:this})??!1}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){return this.beans.selectionSvc?.isCellCheckboxSelection(this,e)??!1}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?.suppressPaste??null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??COL_DEF_DEFAULTS[e]}isColumnFunc(e,t){if(typeof t=="boolean")return t;if(typeof t=="function"){const n=this.createColumnFunctionCallbackParams(e);return t(n)}return!1}createColumnEvent(e,t){return _addGridCommonParams(this.gos,{type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sortDef.direction}getSortDef(){return this.sortDef.direction?this.sortDef:null}getColDefAllowedSortTypes(){const e=[],{sort:t,initialSort:n}=this.colDef,o=t===null?t:_normalizeSortType(t?.type),u=n===null?n:_normalizeSortType(n?.type);return o&&e.push(o),u&&e.push(u),e}getSortingOrder(){const e=this.getColDefAllowedSortTypes().includes("absolute")?DEFAULT_ABSOLUTE_SORTING_ORDER:DEFAULT_SORTING_ORDER;return(this.colDef.sortingOrder??this.gos.get("sortingOrder")??e).map(t=>_getSortDefFromInput(t))}getAvailableSortTypes(){const e=this.getSortingOrder().reduce((t,n)=>(n.direction&&t.push(n.type),t),this.getColDefAllowedSortTypes());return new Set(e)}get wasSortExplicitlyRemoved(){return this._wasSortExplicitlyRemoved}setSortDef(e,t=!1){t||(this._wasSortExplicitlyRemoved=!e.direction),this.sortDef=e}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.getSort()==="asc"}isSortDescending(){return this.getSort()==="desc"}isSortNone(){return _missing(this.getSort())}isSorting(){return _exists(this.getSort())}getSortIndex(){return this.sortIndex}isMenuVisible(){return this.menuVisible}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchColEvent("leftChanged",t))}isFilterActive(){return this.filterActive}isHovered(){return _warn(261),!!this.beans.colHover?.isHovered(this)}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.dispatchColEvent("firstRightPinnedChanged",t))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.dispatchColEvent("lastLeftPinnedChanged",t))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,t){const n=e===!0;this.visible!==n&&(this.visible=n,this.dispatchColEvent("visibleChanged",t)),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getFirstRealParent(){let e=this.getOriginalParent();for(;e?.isPadding();)e=e.getOriginalParent();return e}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e?.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const t=e.getPaddingLevel()+1;let n=!0;for(;e;){if(!e.isPadding()){n=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:n}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return _addGridCommonParams(this.gos,{node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(_missing(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),n=this.colDef.colSpan(t);return Math.max(n,1)}getRowSpan(e){if(_missing(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),n=this.colDef.rowSpan(t);return Math.max(n,1)}setActualWidth(e,t,n=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex!=null&&t!=="flex"&&t!=="gridInitializing"&&(this.flex=null),n||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.dispatchColEvent("widthChanged",e)}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex}isRowGroupActive(){return this.rowGroupActive}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}isAllowFormula(){return this.colDef.allowFormula===!0}dispatchColEvent(e,t,n){const o=this.createColumnEvent(e,t);n&&_mergeDeep(o,n),this.colEventSvc.dispatchEvent(o)}dispatchStateUpdatedEvent(e){this.colEventSvc.dispatchEvent({type:"columnStateUpdated",key:e})}};function _getSortDefFromInput(e){return _isSortDefValid(e)?{direction:e.direction,type:e.type}:{direction:_normalizeSortDirection(e),type:_normalizeSortType(e)}}function _isSortDirectionValid(e){return e==="asc"||e==="desc"||e===null}function _isSortTypeValid(e){return e==="default"||e==="absolute"}function _isSortDefValid(e){if(!e||typeof e!="object")return!1;const t=e;return _isSortTypeValid(t.type)&&_isSortDirectionValid(t.direction)}function _areSortDefsEqual(e,t){return e?t?e.type===t.type&&e.direction===t.direction:e?e.direction===null:!0:t?t.direction===null:!0}function _normalizeSortDirection(e){return _isSortDirectionValid(e)?e:null}function _normalizeSortType(e){return _isSortTypeValid(e)?e:"default"}function _getDisplaySortForColumn(e,t){const n=t.sortSvc.getDisplaySortForColumn(e),o=_normalizeSortType(n?.type),u=_normalizeSortDirection(n?.direction),d=e.getAvailableSortTypes(),f=d.has("default"),v=d.has("absolute");return{isDefaultSortAllowed:f,isAbsoluteSortAllowed:v,isAbsoluteSort:o==="absolute",isDefaultSort:o==="default",isAscending:u==="asc",isDescending:u==="desc",direction:u}}function isProvidedColumnGroup(e){return e instanceof AgProvidedColumnGroup}var AgProvidedColumnGroup=class extends BeanStub{constructor(e,t,n,o){super(),this.colGroupDef=e,this.groupId=t,this.padding=n,this.level=o,this.isColumn=!1,this.expandable=!1,this.instanceId=getNextColInstanceId(),this.expandableListenerRemoveCallback=null,this.expanded=!!e?.openByDefault}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}forEachLeafColumn(e){if(this.children)for(const t of this.children)isColumn(t)?e(t):isProvidedColumnGroup(t)&&t.forEachLeafColumn(e)}addLeafColumns(e){if(this.children)for(const t of this.children)isColumn(t)?e.push(t):isProvidedColumnGroup(t)&&t.addLeafColumns(e)}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);for(const t of this.getLeafColumns())t.__addEventListener("visibleChanged",e);this.expandableListenerRemoveCallback=()=>{for(const t of this.getLeafColumns())t.__removeEventListener("visibleChanged",e);this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,n=!1;const o=this.findChildrenRemovingPadding();for(let d=0,f=o.length;d<f;d++){const v=o[d];if(!v.isVisible())continue;const w=v.getColumnGroupShow();w==="open"?(e=!0,n=!0):w==="closed"?(t=!0,n=!0):(e=!0,t=!0)}const u=e&&t&&n;this.expandable!==u&&(this.expandable=u,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const e=[],t=n=>{for(const o of n)isProvidedColumnGroup(o)&&o.isPadding()?t(o.children):e.push(o)};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},DefaultColumnTypes={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};function createMergedColGroupDef(e,t,n){const o={},u=e.gos;return Object.assign(o,u.get("defaultColGroupDef")),Object.assign(o,t),u.validateColDef(o,n),o}var ColumnKeyCreator=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=_toStringOrNull(e);let n=0;for(;;){let o=e??t;if(o?n!==0&&(o+="_"+n):o=n,!this.existingKeys[o]){const u=String(o);return e&&n>0&&_warn(273,{providedId:e,usedId:u}),this.existingKeys[u]=!0,u}n++}}},GROUP_AUTO_COLUMN_ID="ag-Grid-AutoColumn",SELECTION_COLUMN_ID="ag-Grid-SelectionColumn",ROW_NUMBERS_COLUMN_ID="ag-Grid-RowNumbersColumn";function _getColumnsFromTree(e){const t=[],n=o=>{for(let u=0;u<o.length;u++){const d=o[u];isColumn(d)?t.push(d):isProvidedColumnGroup(d)&&n(d.getChildren())}};return n(e),t}function getWidthOfColsInList(e){return e.reduce((t,n)=>t+n.getActualWidth(),0)}function _destroyColumnTree(e,t,n){const o={};if(!t)return;depthFirstOriginalTreeSearch(null,t,d=>{o[d.getInstanceId()]=d}),n&&depthFirstOriginalTreeSearch(null,n,d=>{o[d.getInstanceId()]=null});const u=Object.values(o).filter(d=>d!=null);e.context.destroyBeans(u)}function isColumnGroupAutoCol(e){return e.getId().startsWith(GROUP_AUTO_COLUMN_ID)}function isColumnSelectionCol(e){return(typeof e=="string"?e:"getColId"in e?e.getColId():e.colId)?.startsWith(SELECTION_COLUMN_ID)??!1}function isRowNumberCol(e){return(typeof e=="string"?e:"getColId"in e?e.getColId():e.colId)?.startsWith(ROW_NUMBERS_COLUMN_ID)??!1}function convertColumnTypes(e){let t=[];return e instanceof Array?t=e:typeof e=="string"&&(t=e.split(",")),t}function _convertColumnEventSourceType(e){return e==="optionsUpdated"?"gridOptionsChanged":e}function _columnsMatch(e,t){return e===t||e.colId==t||e.getColDef()===t}var getValueFactory=(e,t)=>(n,o)=>{const u={value1:void 0,value2:void 0};let d=!1;return e&&(e[n]!==void 0&&(u.value1=e[n],d=!0),_exists(o)&&e[o]!==void 0&&(u.value2=e[o],d=!0)),!d&&t&&(t[n]!==void 0&&(u.value1=t[n]),_exists(o)&&t[o]!==void 0&&(u.value2=t[o])),u};function _getSortDefFromColDef(e){const{sort:t,initialSort:n}=e,o=_isSortDefValid(t)||_isSortDirectionValid(t),u=_isSortDefValid(n)||_isSortDirectionValid(n);return o?_getSortDefFromInput(t):u?_getSortDefFromInput(n):null}var depthFirstCallback=(e,t)=>{isProvidedColumnGroup(e)&&e.setupExpandable(),e.originalParent=t};function _createColumnTree(e,t=null,n,o,u){const d=new ColumnKeyCreator,{existingCols:f,existingGroups:v,existingColKeys:w}=extractExistingTreeData(o);d.addExistingKeys(w);const E=_recursivelyCreateColumns(e,t,0,n,f,d,v,u),{colGroupSvc:C}=e,_=C?.findMaxDepth(E,0)??0,D=C?C.balanceColumnTree(E,0,_,d):E;return depthFirstOriginalTreeSearch(null,D,depthFirstCallback),{columnTree:D,treeDepth:_}}function extractExistingTreeData(e){const t=[],n=[],o=[];return e&&depthFirstOriginalTreeSearch(null,e,u=>{if(isProvidedColumnGroup(u)){const d=u;n.push(d)}else{const d=u;o.push(d.getId()),t.push(d)}}),{existingCols:t,existingGroups:n,existingColKeys:o}}function _recursivelyCreateColumns(e,t,n,o,u,d,f,v){if(!t)return[];const{colGroupSvc:w}=e,E=new Array(t.length);for(let C=0;C<E.length;C++){const _=t[C];w&&isColumnGroupDef(_)?E[C]=w.createProvidedColumnGroup(o,_,n,u,d,f,v):E[C]=createColumn(e,o,_,u,d,v)}return E}function createColumn(e,t,n,o,u,d){const f=findExistingColumn(n,o);f&&o?.splice(f.idx,1);let v=f?.column;if(v){const w=_addColumnDefaultAndTypes(e,n,v.getColId());v.setColDef(w,n,d),_updateColumnState(e,v,w,d)}else{const w=u.getUniqueKey(n.colId,n.field),E=_addColumnDefaultAndTypes(e,n,w);v=new AgColumn(E,n,w,t),e.context.createBean(v)}return e.dataTypeSvc?.addColumnListeners(v),v}function updateSomeColumnState(e,t,n,o,u,d,f,v){const{sortSvc:w,pinnedCols:E,colFlex:C}=e;n!==void 0&&t.setVisible(!n,v),w&&(w.updateColSort(t,o,v),u!==void 0&&w.setColSortIndex(t,u)),d!==void 0&&E?.setColPinned(t,d),f!==void 0&&C?.setColFlex(t,f)}function _updateColumnState(e,t,n,o){updateSomeColumnState(e,t,n.hide,n.sort,n.sortIndex,n.pinned,n.flex,o);const u=t.getFlex();if(!(u!=null&&u>0))if(n.width!=null)t.setActualWidth(n.width,o);else{const d=t.getActualWidth();t.setActualWidth(d,o)}}function findExistingColumn(e,t){if(t)for(let n=0;n<t.length;n++){const o=t[n].getUserProvidedColDef();if(!o)continue;if(e.colId!=null){if(t[n].getId()===e.colId)return{idx:n,column:t[n]};continue}if(e.field!=null){if(o.field===e.field)return{idx:n,column:t[n]};continue}if(o===e)return{idx:n,column:t[n]}}}function _addColumnDefaultAndTypes(e,t,n,o){const{gos:u,dataTypeSvc:d}=e,f={},v=u.get("defaultColDef");_mergeDeep(f,v,!1,!0);const w=updateColDefAndGetColumnType(e,f,t,n);w&&assignColumnTypes(e,w,f);const E=f.cellDataType;_mergeDeep(f,t,!1,!0),E!==void 0&&(f.cellDataType=E);const C=u.get("autoGroupColumnDef"),_=_isColumnsSortingCoupledToGroup(u);return t.rowGroup&&C&&_&&_mergeDeep(f,{sort:C.sort,initialSort:C.initialSort},!1,!0),d?.postProcess(f),d?.validateColDef(f),u.validateColDef(f,n,o),f}function updateColDefAndGetColumnType(e,t,n,o){const u=e.dataTypeSvc?.updateColDefAndGetColumnType(t,n,o),d=n.type??u??t.type;return t.type=d,d?convertColumnTypes(d):void 0}function assignColumnTypes(e,t,n){if(!t.length)return;const o=Object.assign({},DefaultColumnTypes),u=e.gos.get("columnTypes")||{};for(const d of Object.keys(u)){const f=u[d];d in o?_warn(34,{key:d}):(f.type&&_warn(35),o[d]=f)}for(const d of t){const f=o[d.trim()];f?_mergeDeep(n,f,!1,!0):_warn(36,{t:d})}}function isColumnGroupDef(e){return e.children!==void 0}function depthFirstOriginalTreeSearch(e,t,n){if(t)for(let o=0;o<t.length;o++){const u=t[o];isProvidedColumnGroup(u)&&depthFirstOriginalTreeSearch(u,u.getChildren(),n),n(u,e)}}function placeLockedColumns(e,t){const n=[],o=[],u=[];return e.forEach(f=>{const v=f.getColDef().lockPosition;v==="right"?u.push(f):v==="left"||v===!0?n.push(f):o.push(f)}),t.get("enableRtl")?[...u,...o,...n]:[...n,...o,...u]}function doesMovePassMarryChildren(e,t){let n=!0;return depthFirstOriginalTreeSearch(null,t,o=>{if(!isProvidedColumnGroup(o))return;const u=o;if(!u.getColGroupDef()?.marryChildren)return;const v=[];for(const D of u.getLeafColumns()){const O=e.indexOf(D);v.push(O)}const w=Math.max.apply(Math,v),E=Math.min.apply(Math,v),C=w-E,_=u.getLeafColumns().length-1;C>_&&(n=!1)}),n}function getCommonValue(e,t){if(!e||e.length==0)return;const n=t(e[0]);for(let o=1;o<e.length;o++)if(n!==t(e[o]))return;return n}function dispatchColumnPinnedEvent(e,t,n){if(!t.length)return;const o=t.length===1?t[0]:null,u=getCommonValue(t,d=>d.getPinned());e.dispatchEvent({type:"columnPinned",pinned:u??null,columns:t,column:o,source:n})}function dispatchColumnVisibleEvent(e,t,n){if(!t.length)return;const o=t.length===1?t[0]:null,u=getCommonValue(t,d=>d.isVisible());e.dispatchEvent({type:"columnVisible",visible:u,columns:t,column:o,source:n})}function dispatchColumnChangedEvent(e,t,n,o){e.dispatchEvent({type:t,columns:n,column:n&&n.length==1?n[0]:null,source:o})}function dispatchColumnResizedEvent(e,t,n,o,u=null){t?.length&&e.dispatchEvent({type:"columnResized",columns:t,column:t.length===1?t[0]:null,flexColumns:u,finished:n,source:o})}function _applyColumnState(e,t,n){const{colModel:o,rowGroupColsSvc:u,pivotColsSvc:d,autoColSvc:f,selectionColSvc:v,colAnimation:w,visibleCols:E,pivotResultCols:C,environment:_,valueColsSvc:D,eventSvc:O,gos:M}=e,N=o.getColDefCols()??[],I=v?.getColumns();if(!N.length&&!I?.length)return!1;if(t?.state&&!t.state.forEach)return _warn(32),!1;const B=(z,$,ee,ie,ae)=>{if(!z)return;const pe=getValueFactory($,t.defaultState),he=pe("flex").value1,be=pe("sort").value1,xe=pe("sortType").value1,Ee=_isSortDirectionValid(be)||_isSortTypeValid(xe),we=_normalizeSortType(xe),oe=_normalizeSortDirection(be),se=Ee?{type:we,direction:oe}:void 0;if(updateSomeColumnState(e,z,pe("hide").value1,se,pe("sortIndex").value1,pe("pinned").value1,he,n),he==null){const J=pe("width").value1;if(J!=null){const Q=z.getColDef().minWidth??_.getDefaultColumnMinWidth();Q!=null&&J>=Q&&z.setActualWidth(J,n)}}ae||!z.isPrimary()||(D?.syncColumnWithState(z,n,pe),u?.syncColumnWithState(z,n,pe,ee),d?.syncColumnWithState(z,n,pe,ie))},V=(z,$,ee)=>{const ie=_compareColumnStatesAndDispatchEvents(e,n),ae=$.slice(),pe={},he={},be=[],xe=[],Ee=[];let we=0;const oe=u?.columns.slice()??[],se=d?.columns.slice()??[];for(const Z of z){const K=Z.colId;if(K.startsWith(GROUP_AUTO_COLUMN_ID)){be.push(Z),Ee.push(Z);continue}if(isColumnSelectionCol(K)){xe.push(Z),Ee.push(Z);continue}const ue=ee(K);ue?(B(ue,Z,pe,he,!1),_removeFromArray(ae,ue)):(Ee.push(Z),we+=1)}const J=Z=>B(Z,null,pe,he,!1);ae.forEach(J),u?.sortColumns(comparatorByIndex.bind(u,pe,oe)),d?.sortColumns(comparatorByIndex.bind(d,he,se)),o.refreshCols(!1,n);const Q=(Z,K,ne=[])=>{for(const ue of K){const ye=Z(ue.colId);_removeFromArray(ne,ye),B(ye,ue,null,null,!0)}ne.forEach(J)};return Q(Z=>f?.getColumn(Z)??null,be,f?.getColumns()?.slice()),Q(Z=>v?.getColumn(Z)??null,xe,v?.getColumns()?.slice()),orderLiveColsLikeState(t,o,M),E.refresh(n),O.dispatchEvent({type:"columnEverythingChanged",source:n}),ie(),{unmatchedAndAutoStates:Ee,unmatchedCount:we}};w?.start();let{unmatchedAndAutoStates:j,unmatchedCount:q}=V(t.state||[],N,z=>o.getColDefCol(z));if(j.length>0||_exists(t.defaultState)){const z=C?.getPivotResultCols()?.list??[];q=V(j,z,$=>C?.getPivotResultCol($)??null).unmatchedCount}return w?.finish(),q===0}function _compareColumnStatesAndDispatchEvents(e,t){const{rowGroupColsSvc:n,pivotColsSvc:o,valueColsSvc:u,colModel:d,sortSvc:f,eventSvc:v}=e,w={rowGroupColumns:n?.columns.slice()??[],pivotColumns:o?.columns.slice()??[],valueColumns:u?.columns.slice()??[]},E=_getColumnState(e),C={};for(const _ of E)C[_.colId]=_;return()=>{const _=($,ee,ie,ae)=>{const pe=ee.map(ae),he=ie.map(ae);if(_areEqual(pe,he))return;const xe=new Set(ee);for(const we of ie)xe.delete(we)||xe.add(we);const Ee=[...xe];v.dispatchEvent({type:$,columns:Ee,column:Ee.length===1?Ee[0]:null,source:t})},D=$=>{const ee=[];return d.forAllCols(ie=>{const ae=C[ie.getColId()];ae&&$(ae,ie)&&ee.push(ie)}),ee},O=$=>$.getColId();_("columnRowGroupChanged",w.rowGroupColumns,n?.columns??[],O),_("columnPivotChanged",w.pivotColumns,o?.columns??[],O);const N=D(($,ee)=>{const ie=$.aggFunc!=null,ae=ie!=ee.isValueActive(),pe=ie&&$.aggFunc!=ee.getAggFunc();return ae||pe});N.length>0&&dispatchColumnChangedEvent(v,"columnValueChanged",N,t),dispatchColumnResizedEvent(v,D(($,ee)=>$.width!=ee.getActualWidth()),!0,t),dispatchColumnPinnedEvent(v,D(($,ee)=>$.pinned!=ee.getPinned()),t),dispatchColumnVisibleEvent(v,D(($,ee)=>$.hide==ee.isVisible()),t);const q=D(($,ee)=>!_areSortDefsEqual(ee.getSortDef(),{type:_normalizeSortType($.sortType),direction:_normalizeSortDirection($.sort)})||$.sortIndex!=ee.getSortIndex());q.length>0&&f?.dispatchSortChangedEvents(t,q);const z=_getColumnState(e);normaliseColumnMovedEventForColumnState(E,z,t,d,v)}}function _getColumnState(e){const{colModel:t,rowGroupColsSvc:n,pivotColsSvc:o}=e,u=t.getColDefCols();if(_missing(u)||!t.isAlive())return[];const d=n?.columns,f=o?.columns,v=[],w=C=>{const _=C.isRowGroupActive()&&d?d.indexOf(C):null,D=C.isPivotActive()&&f?f.indexOf(C):null,O=C.isValueActive()?C.getAggFunc():null,M=C.getSortIndex()!=null?C.getSortIndex():null;v.push({colId:C.getColId(),width:C.getActualWidth(),hide:!C.isVisible(),pinned:C.getPinned(),sort:C.getSort(),sortType:C.getSortDef()?.type,sortIndex:M,aggFunc:O,rowGroup:C.isRowGroupActive(),rowGroupIndex:_,pivot:C.isPivotActive(),pivotIndex:D,flex:C.getFlex()??null})};t.forAllCols(C=>w(C));const E=new Map(t.getCols().map((C,_)=>[C.getColId(),_]));return v.sort((C,_)=>{const D=E.has(C.colId)?E.get(C.colId):-1,O=E.has(_.colId)?E.get(_.colId):-1;return D-O}),v}function getColumnStateFromColDef(e){const t=(I,B)=>I??B??null,n=e.getColDef(),o=_getSortDefFromInput(t(n.sort,n.initialSort)),u=o.direction,d=o.type,f=t(n.sortIndex,n.initialSortIndex),v=t(n.hide,n.initialHide),w=t(n.pinned,n.initialPinned),E=t(n.width,n.initialWidth),C=t(n.flex,n.initialFlex);let _=t(n.rowGroupIndex,n.initialRowGroupIndex),D=t(n.rowGroup,n.initialRowGroup);_==null&&!D&&(_=null,D=null);let O=t(n.pivotIndex,n.initialPivotIndex),M=t(n.pivot,n.initialPivot);O==null&&!M&&(O=null,M=null);const N=t(n.aggFunc,n.initialAggFunc);return{colId:e.getColId(),sort:u,sortType:d,sortIndex:f,hide:v,pinned:w,width:E,flex:C,rowGroup:D,rowGroupIndex:_,pivot:M,pivotIndex:O,aggFunc:N}}function orderLiveColsLikeState(e,t,n){if(!e.applyOrder||!e.state)return;const o=[];for(const u of e.state)u.colId!=null&&o.push(u.colId);sortColsLikeKeys(t.cols,o,t,n)}function sortColsLikeKeys(e,t,n,o){if(e==null)return;let u=[];const d={};for(const v of t){if(d[v])continue;const w=e.map[v];w&&(u.push(w),d[v]=!0)}let f=0;for(const v of e.list){const w=v.getColId();if(d[w]!=null)continue;w.startsWith(GROUP_AUTO_COLUMN_ID)?u.splice(f++,0,v):u.push(v)}if(u=placeLockedColumns(u,o),!doesMovePassMarryChildren(u,n.getColTree())){_warn(39);return}e.list=u}function normaliseColumnMovedEventForColumnState(e,t,n,o,u){const d={};for(const C of t)d[C.colId]=C;const f={};for(const C of e)d[C.colId]&&(f[C.colId]=!0);const v=e.filter(C=>f[C.colId]),w=t.filter(C=>f[C.colId]),E=[];w.forEach((C,_)=>{const D=v?.[_];if(D&&D.colId!==C.colId){const O=o.getCol(D.colId);O&&E.push(O)}}),E.length&&u.dispatchEvent({type:"columnMoved",columns:E,column:E.length===1?E[0]:null,finished:!0,source:n})}var comparatorByIndex=(e,t,n,o)=>{const u=e[n.getId()],d=e[o.getId()],f=u!=null,v=d!=null;if(f&&v)return u-d;if(f)return-1;if(v)return 1;const w=t.indexOf(n),E=t.indexOf(o),C=w>=0,_=E>=0;return C&&_?w-E:C?-1:1};function createUniqueColumnGroupId(e,t){return e+"_"+t}function isColumnGroup(e){return e instanceof AgColumnGroup}var AgColumnGroup=class extends BeanStub{constructor(e,t,n,o){super(),this.providedColumnGroup=e,this.groupId=t,this.partId=n,this.pinned=o,this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null,this.colIdSanitised=_escapeString(this.getUniqueId())}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}getUniqueId(){return createUniqueColumnGroupId(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(t=>t.isMoving())}checkLeft(){for(const e of this.displayedChildren)isColumnGroup(e)&&e.checkLeft();if(this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const t=_last(this.displayedChildren).getLeft();this.setLeft(t)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;for(const t of this.displayedChildren??[])e+=t.getActualWidth();return e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;for(const t of this.displayedChildren)t.isResizable()&&(e=!0);return e}getMinWidth(){let e=0;for(const t of this.displayedChildren)e+=t.getMinWidth();return e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){return!!this.getColGroupDef()?.autoHeaderHeight}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){for(const t of this.displayedChildren??[])isColumn(t)?e.push(t):isColumnGroup(t)&&t.addDisplayedLeafColumns(e)}addLeafColumns(e){for(const t of this.children??[])isColumn(t)?e.push(t):isColumnGroup(t)&&t.addLeafColumns(e)}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return!this.isPadding()||!e?.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e?.isPadding();)e=e.getParent();if(!(e?e.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}for(const n of this.children??[]){if(isColumnGroup(n)&&!n.displayedChildren?.length)continue;switch(n.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(n);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(n);break;default:this.displayedChildren.push(n);break}}this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},KeyCode={BACKSPACE:"Backspace",TAB:"Tab",ENTER:"Enter",ESCAPE:"Escape",SPACE:" ",LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown",DELETE:"Delete",F2:"F2",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",PAGE_HOME:"Home",PAGE_END:"End",A:"KeyA",C:"KeyC",D:"KeyD",V:"KeyV",X:"KeyX",Y:"KeyY",Z:"KeyZ"},A_KEYCODE=65,C_KEYCODE=67,V_KEYCODE=86,D_KEYCODE=68,Z_KEYCODE=90,Y_KEYCODE=89;function _normaliseQwertyAzerty(e){const{keyCode:t}=e;let n;switch(t){case A_KEYCODE:n=KeyCode.A;break;case C_KEYCODE:n=KeyCode.C;break;case V_KEYCODE:n=KeyCode.V;break;case D_KEYCODE:n=KeyCode.D;break;case Z_KEYCODE:n=KeyCode.Z;break;case Y_KEYCODE:n=KeyCode.Y;break;default:n=e.code}return n}var AgPromise=class pd{constructor(t){this.status=0,this.resolution=null,this.waiters=[],t(n=>this.onDone(n),n=>this.onReject(n))}static all(t){return t.length?new pd(n=>{let o=t.length;const u=new Array(o);t.forEach((d,f)=>{d.then(v=>{u[f]=v,o--,o===0&&n(u)})})}):pd.resolve()}static resolve(t=null){return new pd(n=>n(t))}then(t){return new pd(n=>{this.status===1?n(t(this.resolution)):this.waiters.push(o=>n(t(o)))})}onDone(t){this.status=1,this.resolution=t;for(const n of this.waiters)n(t)}onReject(t){}},RefPlaceholder=null;function _createElement(e){return _createAgElement(e)}function _createIcon(e,t,n){const o=_createIconNoSpan(e,t,n);if(o){const{className:d}=o;if(typeof d=="string"&&d.includes("ag-icon")||typeof d=="object"&&d["ag-icon"])return o}const u=_createElement({tag:"span"});return u.appendChild(o),u}function _createIconNoSpan(e,t,n){let o=null;e==="smallDown"?_warn(262):e==="smallLeft"?_warn(263):e==="smallRight"&&_warn(264);const u=n?.getColDef().icons;if(u&&(o=u[e]),t.gos&&!o){const d=t.gos.get("icons");d&&(o=d[e])}if(o){let d;if(typeof o=="function")d=o();else if(typeof o=="string")d=o;else{_warn(38,{iconName:e});return}if(typeof d=="string")return _loadTemplate(d);if(_isNodeOrElement(d))return d;_warn(133,{iconName:e});return}else{const d=t.registry.getIcon(e);return d||t.validation?.validateIcon(e),_createElement({tag:"span",cls:`ag-icon ag-icon-${d??e}`,role:"presentation",attrs:{unselectable:"on"}})}}var CssClassManager=class{constructor(e){this.cssClassStates={},this.getGui=e}toggleCss(e,t){if(!e)return;if(e.includes(" ")){const o=(e||"").split(" ");if(o.length>1){for(const u of o)this.toggleCss(u,t);return}}this.cssClassStates[e]!==t&&e.length&&(this.getGui()?.classList.toggle(e,t),this.cssClassStates[e]=t)}},compIdSequence=0,AgComponentStub=class extends AgBeanStub{constructor(e,t){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=compIdSequence++,this.cssManager=new CssClassManager(()=>this.eGui),this.componentSelectors=new Map((t??[]).map(n=>[n.selector,n])),e&&this.setTemplate(e)}preConstruct(){this.wireTemplate(this.getGui()),this.addGlobalCss()}wireTemplate(e,t){e&&this.gos&&(this.applyElementsToComponent(e),this.createChildComponentsFromTags(e,t))}getCompId(){return this.compId}getDataRefAttribute(e){return e.getAttribute?e.getAttribute(DataRefAttribute):null}applyElementsToComponent(e,t,n,o=null){if(t===void 0&&(t=this.getDataRefAttribute(e)),t){const u=this[t];if(u===RefPlaceholder)this[t]=o??e;else{const d=n?.[t];if(!this.suppressDataRefValidation&&!d)throw new Error(`data-ref: ${t} on ${this.constructor.name} with ${u}`)}}}createChildComponentsFromTags(e,t){const n=[];for(const o of e.childNodes??[])n.push(o);for(const o of n){if(!(o instanceof HTMLElement))continue;const u=this.createComponentFromElement(o,d=>{const f=d.getGui();if(f)for(const v of o.attributes??[])f.setAttribute(v.name,v.value)},t);if(u){if(u.addItems&&o.children.length){this.createChildComponentsFromTags(o,t);const d=Array.prototype.slice.call(o.children);u.addItems(d)}this.swapComponentForNode(u,e,o)}else o.childNodes&&this.createChildComponentsFromTags(o,t)}}createComponentFromElement(e,t,n){const o=e.nodeName,u=this.getDataRefAttribute(e),d=o.indexOf("AG-")===0,f=d?this.componentSelectors.get(o):null;let v=null;if(f){const w=n&&u?n[u]:void 0;v=new f.component(w),v.setParentComponent(this),this.createBean(v,null,t)}else if(d)throw new Error(`selector: ${o}`);return this.applyElementsToComponent(e,u,n,v),v}swapComponentForNode(e,t,n){const o=e.getGui();t.replaceChild(o,n),t.insertBefore(document.createComment(n.nodeName),o),this.addDestroyFunc(this.destroyBean.bind(this,e))}activateTabIndex(e,t){const n=t??this.gos.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui());for(const o of e)o.setAttribute("tabindex",n.toString())}setTemplate(e,t,n){let o;typeof e=="string"||e==null?o=_loadTemplate(e):o=_createAgElement(e),this.setTemplateFromElement(o,t,n)}setTemplateFromElement(e,t,n,o=!1){if(this.eGui=e,this.suppressDataRefValidation=o,t)for(let u=0;u<t.length;u++){const d=t[u];this.componentSelectors.set(d.selector,d)}this.wireTemplate(e,n)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}getContainerAndElement(e,t){let n=t;return e==null?null:(n||(n=this.eGui),_isNodeOrElement(e)?{element:e,parent:n}:{element:e.getGui(),parent:n})}prependChild(e,t){const{element:n,parent:o}=this.getContainerAndElement(e,t)||{};!n||!o||o.prepend(n)}appendChild(e,t){const{element:n,parent:o}=this.getContainerAndElement(e,t)||{};!n||!o||o.appendChild(n)}isDisplayed(){return this.displayed}setVisible(e,t={}){if(e!==this.visible){this.visible=e;const{skipAriaHidden:n}=t;_setVisible(this.eGui,e,{skipAriaHidden:n})}}setDisplayed(e,t={}){if(e!==this.displayed){this.displayed=e;const{skipAriaHidden:n}=t;_setDisplayed(this.eGui,e,{skipAriaHidden:n});const o={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(o)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),super.destroy()}addGuiEventListener(e,t,n){this.eGui.addEventListener(e,t,n),this.addDestroyFunc(()=>this.eGui.removeEventListener(e,t))}addCss(e){this.cssManager.toggleCss(e,!0)}removeCss(e){this.cssManager.toggleCss(e,!1)}toggleCss(e,t){this.cssManager.toggleCss(e,t)}registerCSS(e){this.css===globalCssAdded?(this.css=[e],this.addGlobalCss()):(this.css||(this.css=[]),this.css.push(e))}addGlobalCss(){if(Array.isArray(this.css)){const e="component-"+Object.getPrototypeOf(this)?.constructor?.name;for(const t of this.css??[])this.beans.environment.addGlobalCSS(t,e)}this.css=globalCssAdded}},globalCssAdded=Symbol(),Component=class extends AgComponentStub{},dragAndDropImageComponentCSS=".ag-dnd-ghost{align-items:center;background-color:var(--ag-drag-and-drop-image-background-color);border:var(--ag-drag-and-drop-image-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-drag-and-drop-image-shadow);color:var(--ag-text-color);cursor:move;display:flex;font-weight:500;gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);overflow:hidden;padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding);text-overflow:ellipsis;transform:translateY(calc(var(--ag-spacing)*2));white-space:nowrap}.ag-dnd-ghost-not-allowed{border:var(--ag-drag-and-drop-image-not-allowed-border)}",DragAndDropElement={tag:"div",children:[{tag:"div",ref:"eGhost",cls:"ag-dnd-ghost ag-unselectable",children:[{tag:"span",ref:"eIcon",cls:"ag-dnd-ghost-icon ag-shake-left-to-right"},{tag:"div",ref:"eLabel",cls:"ag-dnd-ghost-label"}]}]},DragAndDropImageComponent=class extends Component{constructor(){super(),this.dragSource=null,this.eIcon=RefPlaceholder,this.eLabel=RefPlaceholder,this.eGhost=RefPlaceholder,this.registerCSS(dragAndDropImageComponentCSS)}postConstruct(){const e=t=>_createIcon(t,this.beans,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate(DragAndDropElement),this.beans.environment.applyThemeClasses(this.eGhost)}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t){const{eGhost:n,eIcon:o,dragSource:u,dropIconMap:d,gos:f}=this;_clearElement(o);let v=null;e||(e=u?.getDefaultIconName?u.getDefaultIconName():"notAllowed"),v=d[e],n.classList.toggle("ag-dnd-ghost-not-allowed",e==="notAllowed"),o.classList.toggle("ag-shake-left-to-right",t),!(v===d.hide&&f.get("suppressDragLeaveHidesColumns"))&&v&&o.appendChild(v)}setLabel(e){this.eLabel.textContent=e}},BaseDragAndDropService=class extends AgBeanStub{constructor(){super(...arguments),this.beanName="dragAndDrop",this.dragSourceAndParamsList=[],this.dragItem=null,this.dragInitialSourcePointerOffsetX=0,this.dragInitialSourcePointerOffsetY=0,this.lastMouseEvent=null,this.lastDraggingEvent=null,this.dragSource=null,this.dragImageCompPromise=null,this.dragImageComp=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0,this.dropTargets=[],this.externalDropZoneCount=0,this.lastDropTarget=null}addDragSource(e,t=!1){const n={capturePointer:!0,dragSource:e,eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:o=>this.onDragStart(e,o),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push(n),this.beans.dragSvc.addDragSource(n)}setDragImageCompIcon(e,t=!1){const n=this.dragImageComp;n&&(t||this.dragImageLastIcon!==e)&&(this.dragImageLastIcon=e,n.setIcon(e,t))}removeDragSource(e){const{dragSourceAndParamsList:t,beans:n}=this;for(let o=0,u=t.length;o<u;o++)if(t[o].dragSource===e){const d=t[o];n.dragSvc?.removeDragSource(d),t.splice(o,1);break}}destroy(){const{dragSourceAndParamsList:e,dropTargets:t,beans:n}=this,o=n.dragSvc;for(const u of e)o?.removeDragSource(u);e.length=0,t.length=0,this.externalDropZoneCount=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){const e=this.lastMouseEvent;e&&this.onDragging(e,!0)}onDragStart(e,t){this.lastMouseEvent=t,this.dragSource=e,this.dragItem=e.getDragItem();const n=e.eElement.getBoundingClientRect();this.dragInitialSourcePointerOffsetX=t.clientX-n.left,this.dragInitialSourcePointerOffsetY=t.clientY-n.top,e.onDragStarted?.(),this.createAndUpdateDragImageComp(e)}onDragStop(e){const{dragSource:t,lastDropTarget:n}=this;if(t?.onDragStopped?.(),n){const o=this.dropTargetEvent(n,e,!1);n.onDragStop?.(o)}this.clearDragAndDropProperties()}onDragCancel(){const{dragSource:e,lastDropTarget:t,lastMouseEvent:n}=this;if(e?.onDragCancelled?.(),t&&n){const o=this.dropTargetEvent(t,n,!1);t.onDragCancel?.(o)}this.clearDragAndDropProperties()}onDragging(e,t=!1){this.positionDragImageComp(e);const n=this.findCurrentDropTarget(e),{lastDropTarget:o,dragSource:u,dragItem:d}=this;let f=!1;if(n!==o){if(f=!0,o){const v=this.dropTargetEvent(o,e,t);o.onDragLeave?.(v)}if(o!==null&&!n?this.handleExit(u,d):o===null&&n&&this.handleEnter(u,d),n){const v=this.dropTargetEvent(n,e,t);n.onDragEnter?.(v)}this.lastDropTarget=n}else if(n){const v=this.dropTargetEvent(n,e,t);n.onDragging?.(v),v?.changed&&(f=!0)}this.lastMouseEvent=e,f&&this.updateDragImageComp()}clearDragAndDropProperties(){this.removeDragImageComp(this.dragImageComp),this.dragImageCompPromise=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0,this.lastMouseEvent=null,this.lastDraggingEvent=null,this.lastDropTarget=null,this.dragItem=null,this.dragInitialSourcePointerOffsetX=0,this.dragInitialSourcePointerOffsetY=0,this.dragSource=null}getAllContainersFromDropTarget(e){const t=e.getContainer(),n=e.getSecondaryContainers?.(),o=n?.length;if(!o)return[[t]];const u=new Array(o+1);u[0]=[t];for(let d=0;d<o;++d)u[d+1]=n[d];return u}isMouseOnDropTarget(e,t){const n=this.getAllContainersFromDropTarget(t);let o=!1;const u=(v,w)=>{for(const E of w){const{width:C,height:_,left:D,right:O,top:M,bottom:N}=E.getBoundingClientRect();if(C===0||_===0)return!1;const I=v.clientX>=D&&v.clientX<O,B=v.clientY>=M&&v.clientY<N;if(!I||!B)return!1}return!0};for(const v of n)if(u(e,v)){o=!0;break}const{eElement:d,type:f}=this.dragSource;return t.targetContainsSource&&!t.getContainer().contains(d)?!1:o&&t.isInterestedIn(f,d)}findCurrentDropTarget(e){const t=[],n=this.dropTargets;for(let f=0,v=n.length;f<v;++f){const w=n[f];this.isMouseOnDropTarget(e,w)&&t.push(w)}const o=t.length;if(o===0)return null;if(o===1)return t[0];const d=_getRootNode(this.beans).elementsFromPoint(e.clientX,e.clientY);for(let f=0,v=d.length;f<v;++f){const w=d[f];for(let E=0,C=t.length;E<C;E++){const _=t[E],D=this.getAllContainersFromDropTarget(_);let O=!1;for(let M=0,N=D.length;M<N&&!O;M++){const I=D[M];for(let B=0,V=I.length;B<V;B++)if(I[B]===w){O=!0;break}}if(O)return _}}return null}addDropTarget(e){this.dropTargets.push(e),e.external&&this.externalDropZoneCount++}removeDropTarget(e){const t=e.getContainer(),n=this.dropTargets;let o=0;for(let u=0,d=n.length;u<d;++u){const f=n[u];if(f.getContainer()===t){f.external&&--this.externalDropZoneCount;continue}o!==u&&(n[o]=f),++o}n.length=o}hasExternalDropZones(){return this.externalDropZoneCount>0}findExternalZone(e){const t=this.dropTargets;for(let n=0,o=t.length;n<o;++n){const u=t[n];if(u.external&&u.getContainer()===e)return u}return null}dropTargetEvent(e,t,n){const{dragSource:o,dragItem:u,lastDraggingEvent:d,lastMouseEvent:f,dragInitialSourcePointerOffsetX:v,dragInitialSourcePointerOffsetY:w}=this,E=e.getContainer(),C=E.getBoundingClientRect(),{clientX:_,clientY:D}=t,O=_-(f?.clientX||0),M=D-(f?.clientY||0),N=this.createEvent({event:t,x:_-C.left,y:D-C.top,vDirection:M>0?"down":M<0?"up":null,hDirection:O<0?"left":O>0?"right":null,initialSourcePointerOffsetX:v,initialSourcePointerOffsetY:w,dragSource:o,fromNudge:n,dragItem:u,dropZoneTarget:E,dropTarget:d?.dropTarget??null,changed:!!d?.changed});return this.lastDraggingEvent=N,N}positionDragImageComp(e){const t=this.dragImageComp?.getGui();t&&_anchorElementToMouseMoveEvent(t,e,this.beans)}removeDragImageComp(e){this.dragImageComp===e&&(this.dragImageComp=null),e&&(e.getGui()?.remove(),this.destroyBean(e))}createAndUpdateDragImageComp(e){const t=this.createDragImageComp(e)??null;this.dragImageCompPromise=t,t?.then(n=>{const o=this.lastMouseEvent;if(t!==this.dragImageCompPromise||!o||!this.isAlive()){this.destroyBean(n);return}this.dragImageCompPromise=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0;const u=this.dragImageComp;u!==n&&(this.dragImageComp=n,this.removeDragImageComp(u)),n&&(this.appendDragImageComp(n),this.updateDragImageComp(),this.positionDragImageComp(o))})}appendDragImageComp(e){const t=e.getGui(),n=t.style;n.position="absolute",n.zIndex="9999",this.beans.dragSvc?.hasPointerCapture()&&(n.pointerEvents="none"),this.gos.setInstanceDomData(t),this.beans.environment.applyThemeClasses(t),n.top="20px",n.left="20px";const o=_getPageBody(this.beans);o?o.appendChild(t):this.warnNoBody()}updateDragImageComp(){const{dragImageComp:e,dragSource:t,lastDropTarget:n,lastDraggingEvent:o,dragImageLastLabel:u}=this;if(!e)return;this.setDragImageCompIcon(n?.getIconName?.(o)??null);let d=t?.dragItemName;typeof d=="function"&&(d=d(o)),d||(d=""),u!==d&&(this.dragImageLastLabel=d,e.setLabel(d))}};function doesImplementIComponent(e){return e?e.prototype&&"getGui"in e.prototype:!1}function _getUserCompKeys(e,t,n,o){const{name:u}=n;let d,f,v,w,E,C;if(t){const _=t,D=_[u+"Selector"],O=D?D(o):null,M=N=>{typeof N=="string"?d=N:N!=null&&N!==!0&&(e.isFrameworkComponent(N)?v=N:f=N)};O?(M(O.component),w=O.params,E=O.popup,C=O.popupPosition):M(_[u])}return{compName:d,jsComp:f,fwComp:v,paramsFromSelector:w,popupFromSelector:E,popupPositionFromSelector:C}}var UserComponentFactory=class extends BeanStub{constructor(){super(...arguments),this.beanName="userCompFactory"}wireBeans(e){this.agCompUtils=e.agCompUtils,this.registry=e.registry,this.frameworkCompWrapper=e.frameworkCompWrapper,this.gridOptions=e.gridOptions}getCompDetailsFromGridOptions(e,t,n,o=!1){return this.getCompDetails(this.gridOptions,e,t,n,o)}getCompDetails(e,t,n,o,u=!1){const{name:d,cellRenderer:f}=t;let{compName:v,jsComp:w,fwComp:E,paramsFromSelector:C,popupFromSelector:_,popupPositionFromSelector:D}=_getUserCompKeys(this.beans.frameworkOverrides,e,t,o),O,M;const N=j=>{const q=this.registry.getUserComponent(d,j);q&&(w=q.componentFromFramework?void 0:q.component,E=q.componentFromFramework?q.component:void 0,O=q.params,M=q.processParams)};if(v!=null&&N(v),w==null&&E==null&&n!=null&&N(n),w&&f&&!doesImplementIComponent(w)&&(w=this.agCompUtils?.adaptFunction(t,w)),!w&&!E){const{validation:j}=this.beans;u&&(v!==n||!n)?v?j?.isProvidedUserComp(v)||_error(50,{compName:v}):n?j||_error(260,{...this.gos.getModuleErrorParams(),propName:d,compName:n}):_error(216,{name:d}):n&&!j&&_error(146,{comp:n});return}const I=this.mergeParams(e,t,o,C,O,M),B=w==null,V=w??E;return{componentFromFramework:B,componentClass:V,params:I,type:t,popupFromSelector:_,popupPositionFromSelector:D,newAgStackInstance:()=>this.newAgStackInstance(V,B,I,t)}}newAgStackInstance(e,t,n,o){const u=!t;let d;u?d=new e:d=this.frameworkCompWrapper.wrap(e,o.mandatoryMethods,o.optionalMethods,o),this.createBean(d);const f=d.init?.(n);return f==null?AgPromise.resolve(d):f.then(()=>d)}mergeParams(e,t,n,o=null,u,d){const f={...n,...u},w=e?.[t.name+"Params"];if(typeof w=="function"){const E=w(n);_mergeDeep(f,E)}else typeof w=="object"&&_mergeDeep(f,w);return _mergeDeep(f,o),d?d(f):f}},DragAndDropImageComponent2={name:"dragAndDropImageComponent",mandatoryMethods:["setIcon","setLabel"]},HeaderComponent={name:"headerComponent",optionalMethods:["refresh"]},InnerHeaderComponent={name:"innerHeaderComponent"},InnerHeaderGroupComponent={name:"innerHeaderGroupComponent"},HeaderGroupComponent={name:"headerGroupComponent"},CellRendererComponent={name:"cellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},LoadingCellRendererComponent={name:"loadingCellRenderer",cellRenderer:!0},FullWidth={name:"fullWidthCellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},FullWidthLoading={name:"loadingCellRenderer",cellRenderer:!0},FullWidthGroup={name:"groupRowRenderer",optionalMethods:["afterGuiAttached"],cellRenderer:!0},FullWidthDetail={name:"detailCellRenderer",optionalMethods:["refresh"],cellRenderer:!0};function _getDragAndDropImageCompDetails(e,t){return e.getCompDetailsFromGridOptions(DragAndDropImageComponent2,"agDragAndDropImage",t,!0)}function _getHeaderCompDetails(e,t,n){return e.getCompDetails(t,HeaderComponent,"agColumnHeader",n)}function _getInnerHeaderCompDetails(e,t,n){return e.getCompDetails(t,InnerHeaderComponent,void 0,n)}function _getHeaderGroupCompDetails(e,t){const n=t.columnGroup.getColGroupDef();return e.getCompDetails(n,HeaderGroupComponent,"agColumnGroupHeader",t)}function _getInnerHeaderGroupCompDetails(e,t,n){return e.getCompDetails(t,InnerHeaderGroupComponent,void 0,n)}function _getFullWidthCellRendererDetails(e,t){return e.getCompDetailsFromGridOptions(FullWidth,void 0,t,!0)}function _getFullWidthLoadingCellRendererDetails(e,t){return e.getCompDetailsFromGridOptions(FullWidthLoading,"agLoadingCellRenderer",t,!0)}function _getFullWidthGroupCellRendererDetails(e,t){return e.getCompDetailsFromGridOptions(FullWidthGroup,"agGroupRowRenderer",t,!0)}function _getFullWidthDetailCellRendererDetails(e,t){return e.getCompDetailsFromGridOptions(FullWidthDetail,"agDetailCellRenderer",t,!0)}function _getCellRendererDetails(e,t,n){return e.getCompDetails(t,CellRendererComponent,void 0,n)}function _getLoadingCellRendererDetails(e,t,n){return e.getCompDetails(t,LoadingCellRendererComponent,"agSkeletonCellRenderer",n,!0)}var DragAndDropService=class extends BaseDragAndDropService{createEvent(e){return _addGridCommonParams(this.gos,e)}createDragImageComp(e){const{gos:t,beans:n}=this;return _getDragAndDropImageCompDetails(n.userCompFactory,_addGridCommonParams(t,{dragSource:e}))?.newAgStackInstance()}handleEnter(e,t){e?.onGridEnter?.(t)}handleExit(e,t){e?.onGridExit?.(t)}warnNoBody(){_warn(54)}isDropZoneWithinThisGrid(e){return this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody.contains(e.dropZoneTarget)}registerGridDropTarget(e,t){const n={getContainer:e,isInterestedIn:o=>o===1||o===0,getIconName:()=>"notAllowed"};this.addDropTarget(n),t.addDestroyFunc(()=>this.removeDropTarget(n))}},isSafari,isFirefox,isMacOs,isIOS,invisibleScrollbar,browserScrollbarWidth,maxDivHeight;function _isBrowserSafari(){return isSafari===void 0&&(isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),isSafari}function _isBrowserFirefox(){return isFirefox===void 0&&(isFirefox=/(firefox)/i.test(navigator.userAgent)),isFirefox}function _isMacOsUserAgent(){return isMacOs===void 0&&(isMacOs=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),isMacOs}function _isIOSUserAgent(){return isIOS===void 0&&(isIOS=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),isIOS}function _getTabIndex(e){if(!e)return null;const t=e.tabIndex,n=e.getAttribute("tabIndex");return t===-1&&(n===null||n===""&&!_isBrowserFirefox())?null:t.toString()}function _getMaxDivHeight(){if(maxDivHeight!==void 0)return maxDivHeight;if(!document.body)return-1;let e=1e6;const t=_isBrowserFirefox()?6e6:1e9,n=document.createElement("div");for(document.body.appendChild(n);;){const o=e*2;if(n.style.height=o+"px",o>t||n.clientHeight!==o)break;e=o}return n.remove(),maxDivHeight=e,e}function _getScrollbarWidth(){return browserScrollbarWidth==null&&initScrollbarWidthAndVisibility(),browserScrollbarWidth}function initScrollbarWidthAndVisibility(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let n=t.offsetWidth-t.clientWidth;n===0&&t.clientWidth===0&&(n=null),t.parentNode&&t.remove(),n!=null&&(browserScrollbarWidth=n,invisibleScrollbar=n===0)}function _isInvisibleScrollbar(){return invisibleScrollbar==null&&initScrollbarWidthAndVisibility(),invisibleScrollbar}var keyboardModeActive=!1,instanceCount=0;function addKeyboardModeEvents(e){instanceCount>0||(e.addEventListener("keydown",toggleKeyboardMode),e.addEventListener("mousedown",toggleKeyboardMode))}function removeKeyboardModeEvents(e){instanceCount>0||(e.removeEventListener("keydown",toggleKeyboardMode),e.removeEventListener("mousedown",toggleKeyboardMode))}function toggleKeyboardMode(e){const t=keyboardModeActive,n=e.type==="keydown";n&&(e.ctrlKey||e.metaKey||e.altKey)||t!==n&&(keyboardModeActive=n)}function _registerKeyboardFocusEvents(e){const t=_getDocument(e);return addKeyboardModeEvents(t),instanceCount++,()=>{instanceCount--,removeKeyboardModeEvents(t)}}function _isKeyboardMode(){return keyboardModeActive}function _findFocusableElements(e,t,n=!1){const o=FOCUSABLE_SELECTOR;let u=FOCUSABLE_EXCLUDE;t&&(u+=", "+t),n&&(u+=', [tabindex="-1"]');const d=Array.prototype.slice.apply(e.querySelectorAll(o)).filter(w=>_isVisible(w)),f=Array.prototype.slice.apply(e.querySelectorAll(u));return f.length?((w,E)=>w.filter(C=>E.indexOf(C)===-1))(d,f):d}function _focusInto(e,t=!1,n=!1,o=!1){const u=_findFocusableElements(e,o?".ag-tab-guard":null,n),d=t?_last(u):u[0];return d?(d.focus({preventScroll:!0}),!0):!1}function _findNextFocusableElement(e,t,n,o){const u=_findFocusableElements(t,null),d=_getActiveDomElement(e);let f;f=u.indexOf(d);const v=f+(o?-1:1);return v<0||v>=u.length?null:u[v]}function _findTabbableParent(e,t=5){let n=0;for(;e&&_getTabIndex(e)===null&&++n<=t;)e=e.parentElement;return _getTabIndex(e)===null?null:e}var FOCUS_MANAGED_CLASS="ag-focus-managed",AgManagedFocusFeature=class extends AgBeanStub{constructor(e,t={isStopPropagation:()=>!1,stopPropagation:()=>{}},n={}){super(),this.eFocusable=e,this.stopPropagationCallbacks=t,this.callbacks=n,this.callbacks={shouldStopEventPropagation:()=>!1,onTabKeyDown:o=>{if(o.defaultPrevented)return;const u=_findNextFocusableElement(this.beans,this.eFocusable,!1,o.shiftKey);u&&(u.focus(),o.preventDefault())},...n}}postConstruct(){const{eFocusable:e,callbacks:{onFocusIn:t,onFocusOut:n}}=this;e.classList.add(FOCUS_MANAGED_CLASS),this.addKeyDownListeners(e),t&&this.addManagedElementListeners(e,{focusin:t}),n&&this.addManagedElementListeners(e,{focusout:n})}addKeyDownListeners(e){this.addManagedElementListeners(e,{keydown:t=>{if(t.defaultPrevented||this.stopPropagationCallbacks.isStopPropagation(t))return;const{callbacks:n}=this;if(n.shouldStopEventPropagation(t)){this.stopPropagationCallbacks.stopPropagation(t);return}t.key===KeyCode.TAB?n.onTabKeyDown(t):n.handleKeyDown&&n.handleKeyDown(t)}})}},AG_GRID_STOP_PROPAGATION="__ag_Grid_Stop_Propagation";function _stopPropagationForAgGrid(e){e[AG_GRID_STOP_PROPAGATION]=!0}function _isStopPropagationForAgGrid(e){return e[AG_GRID_STOP_PROPAGATION]===!0}var STOP_PROPAGATION_CALLBACKS={isStopPropagation:_isStopPropagationForAgGrid,stopPropagation:_stopPropagationForAgGrid},ManagedFocusFeature=class extends AgManagedFocusFeature{constructor(e,t){super(e,STOP_PROPAGATION_CALLBACKS,t)}};function _areCellsEqual(e,t){const n=e.column===t.column,o=e.rowPinned===t.rowPinned,u=e.rowIndex===t.rowIndex;return n&&o&&u}function _isRowBefore(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(_exists(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}function _getFirstRow(e){let t=0,n;const{pinnedRowModel:o,rowModel:u,pageBounds:d}=e;return o?.getPinnedTopRowCount()?n="top":u.getRowCount()?(n=null,t=d.getFirstRow()):o?.getPinnedBottomRowCount()&&(n="bottom"),n===void 0?null:{rowIndex:t,rowPinned:n}}function _getLastRow(e){let t,n=null;const{pinnedRowModel:o,pageBounds:u}=e,d=o?.getPinnedBottomRowCount(),f=o?.getPinnedTopRowCount();return d?(n="bottom",t=d-1):e.rowModel.getRowCount()?t=u.getLastRow():f&&(n="top",t=f-1),t===void 0?null:{rowIndex:t,rowPinned:n}}function _getRowNode(e,t){switch(t.rowPinned){case"top":return e.pinnedRowModel?.getPinnedTopRow(t.rowIndex);case"bottom":return e.pinnedRowModel?.getPinnedBottomRow(t.rowIndex);default:return e.rowModel.getRow(t.rowIndex)}}function _getCellByPosition(e,t){const n=e.spannedRowRenderer?.getCellByPosition(t);if(n)return n;const o=e.rowRenderer.getRowByPosition(t);return o?o.getCellCtrl(t.column):null}function _getRowById(e,t,n){const{rowModel:o,pinnedRowModel:u}=e;let d;return d??(d=o?.getRowNode(t)),n?d??(d=u?.getPinnedRowById(t,n)):(d??(d=u?.getPinnedRowById(t,"top")),d??(d=u?.getPinnedRowById(t,"bottom"))),d}function _getRowAbove(e,t,n=!1){const{rowIndex:o,rowPinned:u}=t,{pageBounds:d,pinnedRowModel:f,rowModel:v}=e;if(o===0)return u==="top"?null:u==="bottom"&&v.isRowsToRender()?{rowIndex:d.getLastRow(),rowPinned:null}:f?.isRowsToRender("top")?{rowIndex:f.getPinnedTopRowCount()-1,rowPinned:"top"}:null;if(n){const w=u?void 0:v.getRow(o);return getNextStickyPosition(e,w,!0)??{rowIndex:o-1,rowPinned:u}}return{rowIndex:o-1,rowPinned:u}}function _getRowBelow(e,t,n=!1){const{rowIndex:o,rowPinned:u}=t,{pageBounds:d,pinnedRowModel:f,rowModel:v}=e;if(isLastRowInContainer(e,t))return u==="bottom"?null:u==="top"&&v.isRowsToRender()?{rowIndex:d.getFirstRow(),rowPinned:null}:f?.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;if(n){const w=u?void 0:v.getRow(o);return getNextStickyPosition(e,w)??{rowIndex:o+1,rowPinned:u}}return{rowIndex:o+1,rowPinned:u}}function getNextStickyPosition(e,t,n=!1){const{gos:o,rowRenderer:u}=e;if(!t?.sticky||!_isGroupRowsSticky(o))return;const d=u.getStickyTopRowCtrls(),f=u.getStickyBottomRowCtrls(),v=!f.some(_=>_.rowNode.rowIndex===t.rowIndex),w=v?d:f,E=(n?-1:1)*(v?-1:1);let C;for(let _=0;_<w.length;_++)if(w[_].rowNode.rowIndex===t.rowIndex){C=w[_+E];break}return C?{rowIndex:C.rowNode.rowIndex,rowPinned:null}:void 0}function isLastRowInContainer(e,t){const{rowPinned:n,rowIndex:o}=t,{pinnedRowModel:u,pageBounds:d}=e;return n==="top"?(u?.getPinnedTopRowCount()??0)-1<=o:n==="bottom"?(u?.getPinnedBottomRowCount()??0)-1<=o:d.getLastRow()<=o}function _isHeaderFocusSuppressed(e){return e.gos.get("suppressHeaderFocus")||!!e.overlays?.exclusive}function _isCellFocusSuppressed(e){return e.gos.get("suppressCellFocus")||!!e.overlays?.exclusive}function _focusNextGridCoreContainer(e,t,n=!1){const o=e.ctrlsSvc.get("gridCtrl");return!n&&o.focusNextInnerContainer(t)?!0:((n||!t&&!o.isDetailGrid())&&o.forceFocusOutOfContainer(t),!1)}function _attemptToRestoreCellFocus(e,t){const n=e.focusSvc,o=n.getFocusedCell();if(o&&t&&_areCellsEqual(o,t)){const{rowIndex:u,rowPinned:d,column:f}=t;_isNothingFocused(e)&&n.setFocusedCell({rowIndex:u,column:f,rowPinned:d,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!_isKeyboardMode()})}}function getFocusHeaderRowCount(e){return e.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0}function getGroupRowsHeight(e){const t=[],n=e.ctrlsSvc.getHeaderRowContainerCtrls();for(const o of n){if(!o)continue;const u=o.getGroupRowCount()||0;for(let d=0;d<u;d++){const f=o.getGroupRowCtrlAtIndex(d),v=t[d];if(f){const w=getColumnGroupHeaderRowHeight(e,f);(v==null||w>v)&&(t[d]=w)}}}return t}function getColumnGroupHeaderRowHeight(e,t){let o=e.colModel.isPivotMode()?getPivotGroupHeaderHeight(e):getGroupHeaderHeight(e);const u=t.getHeaderCellCtrls();for(const d of u){const{column:f}=d,v=f.getAutoHeaderHeight();v!=null&&v>o&&f.isAutoHeaderHeight()&&(o=v)}return o}function getColumnHeaderRowHeight(e){let n=e.colModel.isPivotMode()?getPivotHeaderHeight(e):getHeaderHeight(e);return e.colModel.forAllCols(o=>{const u=o.getAutoHeaderHeight();u!=null&&u>n&&o.isAutoHeaderHeight()&&(n=u)}),n}function getHeaderHeight(e){return e.gos.get("headerHeight")??e.environment.getDefaultHeaderHeight()}function getFloatingFiltersHeight(e){return e.gos.get("floatingFiltersHeight")??getHeaderHeight(e)}function getGroupHeaderHeight(e){return e.gos.get("groupHeaderHeight")??getHeaderHeight(e)}function getPivotHeaderHeight(e){return e.gos.get("pivotHeaderHeight")??getHeaderHeight(e)}function getPivotGroupHeaderHeight(e){return e.gos.get("pivotGroupHeaderHeight")??getGroupHeaderHeight(e)}function isHeaderPositionEqual(e,t){return e.headerRowIndex===t.headerRowIndex&&e.column===t.column}var GridHeaderCtrl=class extends BeanStub{setComp(e,t,n){this.comp=e,this.eGui=t;const{beans:o}=this,{headerNavigation:u,touchSvc:d,ctrlsSvc:f}=o;u&&this.createManagedBean(new ManagedFocusFeature(n,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this,o),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this,o)}),this.onPivotModeChanged(o),this.setupHeaderHeight();const v=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:v}),d?.mockHeaderContextMenu(this,v),f.register("gridHeaderCtrl",this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({headerRowsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>_requestAnimationFrame(this.beans,()=>e()),stylesChanged:e,advancedFilterEnabledChanged:e})}setHeaderHeight(){const{beans:e}=this;let t=0;const n=getGroupRowsHeight(e).reduce((f,v)=>f+v,0),o=getColumnHeaderRowHeight(e);e.filterManager?.hasFloatingFilters()&&(t+=getFloatingFiltersHeight(e)),t+=n,t+=o;const u=e.environment.getHeaderRowBorderWidth(),d=t+u;if(this.headerHeightWithBorder!==d){this.headerHeightWithBorder=d;const f=`${d}px`;this.comp.setHeightAndMinHeight(f)}this.headerHeight!==t&&(this.headerHeight=t,this.eventSvc.dispatchEvent({type:"headerHeightChanged"}))}onPivotModeChanged(e){const t=e.colModel.isPivotMode();this.comp.toggleCss("ag-pivot-on",t),this.comp.toggleCss("ag-pivot-off",!t)}onDisplayedColumnsChanged(e){const n=e.visibleCols.allCols.some(o=>o.isSpanHeaderHeight());this.comp.toggleCss("ag-header-allow-overflow",n)}onTabKeyDown(e){const t=this.gos.get("enableRtl"),n=e.shiftKey,o=n!==t?"LEFT":"RIGHT",{beans:u}=this,{headerNavigation:d,focusSvc:f}=u;(d.navigateHorizontally(o,!0,e)||!n&&f.focusOverlay(!1)||_focusNextGridCoreContainer(u,n,!0))&&e.preventDefault()}handleKeyDown(e){let t=null;const{headerNavigation:n}=this.beans;switch(e.key){case KeyCode.LEFT:t="LEFT";case KeyCode.RIGHT:{_exists(t)||(t="RIGHT"),n.navigateHorizontally(t,!1,e)&&e.preventDefault();break}case KeyCode.UP:t="UP";case KeyCode.DOWN:{_exists(t)||(t="DOWN"),n.navigateVertically(t,e)&&e.preventDefault();break}default:return}}onFocusOut(e){const{relatedTarget:t}=e,{eGui:n,beans:o}=this;!t&&n.contains(_getActiveDomElement(o))||n.contains(t)||(o.focusSvc.focusedHeader=null)}onHeaderContextMenu(e,t,n){const{menuSvc:o,ctrlsSvc:u}=this.beans;if(!e&&!n||!o?.isHeaderContextMenuEnabled())return;const{target:d}=e??t;(d===this.eGui||d===u.getHeaderRowContainerCtrl()?.eViewport)&&o.showHeaderContextMenu(void 0,e,n)}},CenterWidthFeature=class extends BeanStub{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){const e=_isDomLayout(this.gos,"print"),{visibleCols:t,scrollVisibleSvc:n}=this.beans,o=t.bodyWidth,u=t.getColsLeftWidth(),d=t.getDisplayedColumnsRightWidth();let f;e?f=o+u+d:(f=o,this.addSpacer&&(this.gos.get("enableRtl")?u:d)===0&&n.verticalScrollShowing&&(f+=n.getScrollbarWidth())),this.callback(f)}},EmptyBean=class extends BeanStub{};function setupCompBean(e,t,n){return n&&e.addDestroyFunc(()=>t.destroyBean(n)),n??e}var SetLeftFeature=class extends BeanStub{constructor(e,t,n,o){super(),this.columnOrGroup=e,this.eCell=t,this.colsSpanning=o,this.columnOrGroup=e,this.ariaEl=t.querySelector("[role=columnheader]")||t,this.beans=n}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){const{beans:e,colsSpanning:t}=this;return e.gos.get("enableRtl")&&t?_last(t):this.columnOrGroup}postConstruct(){const e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){const{gos:e,colAnimation:t}=this.beans,n=e.get("suppressColumnMoveAnimation"),o=_exists(this.columnOrGroup.getOldLeft());t?.isActive()&&o&&!n?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=this.modifyLeftForPrintLayout(e,e.getOldLeft()),n=this.modifyLeftForPrintLayout(e,e.getLeft());this.setLeft(t),this.actualLeft=n,this.beans.colAnimation.executeNextVMTurn(()=>{this.actualLeft===n&&this.setLeft(n)})}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){const{gos:n,visibleCols:o}=this.beans;if(!_isDomLayout(n,"print")||e.getPinned()==="left")return t;const d=o.getColsLeftWidth();if(e.getPinned()==="right"){const f=o.bodyWidth;return d+f+t}return d+t}setLeft(e){if(_exists(e)&&(this.eCell.style.left=`${e}px`),isColumnGroup(this.columnOrGroup)){const t=this.columnOrGroup.getLeafColumns();if(!t.length)return;t.length>1&&_setAriaColSpan(this.ariaEl,t.length)}}},CSS_FIRST_COLUMN="ag-column-first",CSS_LAST_COLUMN="ag-column-last";function _getHeaderClassesFromColDef(e,t,n,o){return _missing(e)?[]:getColumnClassesFromCollDef(e.headerClass,e,t,n,o)}function refreshFirstAndLastStyles(e,t,n){e.toggleCss(CSS_FIRST_COLUMN,n.isColAtEdge(t,"first")),e.toggleCss(CSS_LAST_COLUMN,n.isColAtEdge(t,"last"))}function getClassParams(e,t,n,o){return _addGridCommonParams(t,{colDef:e,column:n,columnGroup:o})}function getColumnClassesFromCollDef(e,t,n,o,u){if(_missing(e))return[];let d;if(typeof e=="function"){const f=getClassParams(t,n,o,u);d=e(f)}else d=e;return typeof d=="string"?[d]:Array.isArray(d)?[...d]:[]}var instanceIdSequence2=0,DOM_DATA_KEY_HEADER_CTRL="headerCtrl",AbstractHeaderCellCtrl=class extends BeanStub{constructor(e,t){super(),this.column=e,this.rowCtrl=t,this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.reAttemptToFocus=!1,this.instanceId=e.getUniqueId()+"-"+instanceIdSequence2++}postConstruct(){const e=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],e),this.addManagedEventListeners({overlayExclusiveChanged:e})}setComp(e,t,n,o,u){t.setAttribute("col-id",this.column.colIdSanitised),this.wireComp(e,t,n,o,u),this.reAttemptToFocus&&(this.reAttemptToFocus=!1,this.focus(this.lastFocusEvent??void 0))}shouldStopEventPropagation(e){const{headerRowIndex:t,column:n}=this.beans.focusSvc.focusedHeader,o=n.getDefinition(),u=o?.suppressHeaderKeyboardEvent;if(!_exists(u))return!1;const d=_addGridCommonParams(this.gos,{colDef:o,column:n,headerRowIndex:t,event:e});return!!u(d)}getWrapperHasFocus(){return _getActiveDomElement(this.beans)===this.eGui}setGui(e,t){this.eGui=e,this.addDomData(t),t.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),t.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}refreshHeaderStyles(){const e=this.column.getDefinition();if(!e)return;const{headerStyle:t}=e;let n;if(typeof t=="function"){const o=this.getHeaderClassParams();n=t(o)}else n=t;n&&this.comp.setUserStyles(n)}onGuiFocus(){this.eventSvc.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(e){const{wrapperElement:t,checkMeasuringCallback:n,compBean:o}=e,{beans:u}=this,d=_=>{if(!this.isAlive()||!o.isAlive())return;const{paddingTop:D,paddingBottom:O,borderBottomWidth:M,borderTopWidth:N}=_getElementSize(this.eGui),I=D+O+M+N,V=t.offsetHeight+I;if(_<5){const q=!_getDocument(u)?.contains(t),z=V==0;if(q||z){_batchCall(()=>d(_+1),"raf",u);return}}this.setColHeaderHeight(this.column,V)};let f=!1,v;const w=()=>{const _=this.column.isAutoHeaderHeight();_&&!f&&E(),!_&&f&&C()},E=()=>{f=!0,this.comp.toggleCss("ag-header-cell-auto-height",!0),d(0),v=_observeResize(this.beans,t,()=>d(0))},C=()=>{f=!1,v&&v(),this.comp.toggleCss("ag-header-cell-auto-height",!1),v=void 0};w(),o.addDestroyFunc(()=>C()),o.addManagedListeners(this.column,{widthChanged:()=>f&&d(0)}),o.addManagedEventListeners({sortChanged:()=>{f&&window.setTimeout(()=>d(0))}}),n&&n(w)}onDisplayedColumnsChanged(){const{comp:e,column:t,beans:n,eGui:o}=this;!e||!t||!o||(refreshFirstAndLastStyles(e,t,n.visibleCols),_setAriaColIndex(o,n.visibleCols.getAriaColIndex(t)))}addResizeAndMoveKeyboardListeners(e){e.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){const e=_isHeaderFocusSuppressed(this.beans);this.eGui&&_addOrRemoveAttribute(this.eGui,"tabindex",e?null:"-1")}onGuiKeyDown(e){const t=_getActiveDomElement(this.beans),n=e.key===KeyCode.LEFT||e.key===KeyCode.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),t!==this.eGui||!e.shiftKey&&!e.altKey&&!e.ctrlKey&&!e.metaKey)return;if((this.isResizing||n)&&(e.preventDefault(),e.stopImmediatePropagation()),(e.ctrlKey||e.metaKey)&&_normaliseQwertyAzerty(e)===KeyCode.C)return this.beans.clipboardSvc?.copyToClipboard();if(!n)return;const d=e.key===KeyCode.LEFT!==this.gos.get("enableRtl")?"left":"right";if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const f=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(f,e.shiftKey),this.resizeFeature?.toggleColumnResizing(!0)}else this.moveHeader(d)}moveHeader(e){this.beans.colMoves?.moveHeader(e,this.eGui,this.column,this.rowCtrl.pinned,this)}getViewportAdjustedResizeDiff(e){const t=this.getResizeDiff(e),{pinnedCols:n}=this.beans;return n?n.getHeaderResizeDiff(t,this.column):t}getResizeDiff(e){const{gos:t,column:n}=this;let o=e.key===KeyCode.LEFT!==t.get("enableRtl");const u=n.getPinned(),d=t.get("enableRtl");return u&&d!==(u==="right")&&(o=!o),(o?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{this.resizeFeature?.toggleColumnResizing(!1)},150))}handleKeyDown(e){const t=this.getWrapperHasFocus();switch(e.key){case KeyCode.PAGE_DOWN:case KeyCode.PAGE_UP:case KeyCode.PAGE_HOME:case KeyCode.PAGE_END:t&&e.preventDefault()}}addDomData(e){const t=DOM_DATA_KEY_HEADER_CTRL,{eGui:n,gos:o}=this;_setDomData(o,n,t,this),e.addDestroyFunc(()=>_setDomData(o,n,t,null))}focus(e){if(!this.isAlive())return!1;const{eGui:t}=this;return t?(this.lastFocusEvent=e||null,t.focus()):this.reAttemptToFocus=!0,!0}focusThis(){this.beans.focusSvc.focusedHeader={headerRowIndex:this.rowCtrl.rowIndex,column:this.column}}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop?.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,t,n){const o=e??t,{menuSvc:u,gos:d}=this.beans;d.get("preventDefaultOnContextMenu")&&o.preventDefault(),u?.isHeaderContextMenuEnabled(n)&&u.showHeaderContextMenu(n,e,t),this.dispatchColumnMouseEvent("columnHeaderContextMenu",n)}dispatchColumnMouseEvent(e,t){this.eventSvc.dispatchEvent({type:e,column:t})}setColHeaderHeight(e,t){if(!e.setAutoHeaderHeight(t))return;const{eventSvc:n}=this;e.isColumn?n.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"}):n.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.rowCtrl=null}},HeaderCellCtrl=class extends AbstractHeaderCellCtrl{constructor(){super(...arguments),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map}wireComp(e,t,n,o,u){this.comp=e;const{rowCtrl:d,column:f,beans:v}=this,{colResize:w,context:E,colHover:C,rangeSvc:_}=v,D=setupCompBean(this,E,u);this.setGui(t,D),this.updateState(),this.setupWidth(D),this.setupMovingCss(D),this.setupMenuClass(D),this.setupSortableClass(D),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:o,checkMeasuringCallback:M=>this.setRefreshFunction("measuring",M),compBean:D}),this.addColumnHoverListener(D),this.setupFilterClass(D),this.setupStylesFromColDef(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(D),this.setupSelectAll(D),this.setupUserComp(),this.refreshAria(),w?this.resizeFeature=D.createManagedBean(w.createResizeFeature(d.pinned,f,n,e,this)):_setDisplayed(n,!1),C?.createHoverFeature(D,[f],t),_?.createRangeHighlightFeature(D,f,e),D.createManagedBean(new SetLeftFeature(f,t,v)),D.createManagedBean(new ManagedFocusFeature(t,{shouldStopEventPropagation:M=>this.shouldStopEventPropagation(M),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(D),D.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader","enableAdvancedFilter"],()=>this.refresh()),D.addManagedListeners(f,{colDefChanged:()=>this.refresh(),formulaRefChanged:()=>this.refresh(),headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});const O=()=>this.checkDisplayName();D.addManagedEventListeners({columnValueChanged:O,columnRowGroupChanged:O,columnPivotChanged:O,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),D.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(e,t){this.beans.colResize?.resizeHeader(this.column,e,t)}getHeaderClassParams(){const{column:e,beans:t}=this,n=e.colDef;return _addGridCommonParams(t.gos,{colDef:n,column:e,floatingFilter:!1})}setupUserComp(){const e=this.lookupUserCompDetails();e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){const e=this.createParams(),t=this.column.getColDef();return _getHeaderCompDetails(this.beans.userCompFactory,t,e)}createParams(){const{menuSvc:e,sortSvc:t,colFilter:n,gos:o}=this.beans;return _addGridCommonParams(o,{column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&!!e?.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!!n&&(!this.openFilterEnabled||_isLegacyMenuEnabled(this.gos)),showColumnMenu:(d,f)=>{e?.showColumnMenu({column:this.column,buttonElement:d,positionBy:"button",onClosedCallback:f})},showColumnMenuAfterMouseClick:(d,f)=>{e?.showColumnMenu({column:this.column,mouseEvent:d,positionBy:"mouse",onClosedCallback:f})},showFilter:d=>{e?.showFilterMenu({column:this.column,buttonElement:d,containerType:"columnFilter",positionBy:"button"})},progressSort:d=>{t?.progressSort(this.column,!!d,"uiColumnSorted")},setSort:(d,f)=>{t?.setSortForColumn(this.column,_getSortDefFromInput(d),!!f,"uiColumnSorted")},eGridHeader:this.eGui,setTooltip:(d,f)=>{o.assertModuleRegistered("Tooltip",3),this.setupTooltip(d,f)}})}setupSelectAll(e){const{selectionSvc:t}=this.beans;t&&(this.selectAllFeature=e.createOptionalManagedBean(t.createSelectAllFeature(this.column)),this.selectAllFeature?.setComp(this),e.addManagedPropertyListener("rowSelection",()=>{const n=t.createSelectAllFeature(this.column);n&&!this.selectAllFeature?(this.selectAllFeature=e.createManagedBean(n),this.selectAllFeature?.setComp(this),this.comp.refreshSelectAllGui()):this.selectAllFeature&&!n&&(this.comp.removeSelectAllGui(),this.selectAllFeature=this.destroyBean(this.selectAllFeature))}))}getSelectAllGui(){return this.selectAllFeature?.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===KeyCode.SPACE?this.selectAllFeature?.onSpaceKeyDown(e):e.key===KeyCode.ENTER?this.onEnterKeyDown(e):e.key===KeyCode.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){const{column:t,gos:n,sortable:o,beans:u}=this;let d=!1;(e.ctrlKey||e.metaKey)&&(d=this.showMenuOnKeyPress(e,!0)),d||(!e.altKey&&_getEnableColumnSelection(n)?u.rangeSvc?.handleColumnSelection(t,e):o&&u.sortSvc?.progressSort(t,e.shiftKey,"uiColumnSorted"))}showMenuOnKeyPress(e,t){const n=this.comp.getUserCompInstance();return isHeaderComp(n)&&n.onMenuKeyboardShortcut(t)?(e.preventDefault(),!0):!1}onFocusIn(e){this.eGui.contains(e.relatedTarget)||(this.focusThis(),this.announceAriaDescription()),_isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(e){this.eGui.contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t){this.tooltipFeature=this.beans.tooltipSvc?.setupHeaderTooltip(this.tooltipFeature,this,e,t)}setupStylesFromColDef(){this.setRefreshFunction("headerStyles",this.refreshHeaderStyles.bind(this)),this.refreshHeaderStyles()}setupClassesFromColDef(){const e=()=>{const t=this.column.getColDef(),n=_getHeaderClassesFromColDef(t,this.gos,this.column,null),o=this.userHeaderClasses;this.userHeaderClasses=new Set(n);for(const u of n)o.has(u)?o.delete(u):this.comp.toggleCss(u,!0);for(const u of o)this.comp.toggleCss(u,!1)};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){this.dragSourceElement=e,this.removeDragSource(),!(!e||!this.draggable)&&(this.dragSource=this.beans.colMoves?.setDragSourceForHeader(e,this.column,this.displayName)??null)}updateState(){const{menuSvc:e}=this.beans;this.menuEnabled=!!e?.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=!!e?.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria();for(const e of Object.values(this.refreshFunctions))e()}refreshHeaderComp(){const e=this.lookupUserCompDetails();if(!e)return;(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==e.componentClass?this.attemptHeaderCompRefresh(e.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.beans.colNames.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){const t=()=>{const n=this.column.getActualWidth();this.comp.setWidth(`${n}px`)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){const t=()=>{this.comp.toggleCss("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){const t=()=>{this.comp?.toggleCss("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){const t=()=>{this.comp.toggleCss("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){const t=()=>{const n=this.column.isFilterActive();this.comp.toggleCss("ag-header-cell-filtered",n),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){const e=()=>{const t=!!this.column.getColDef().wrapHeaderText;this.comp.toggleCss("ag-header-cell-wrap-text",t)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){const e=this.column.getHighlighted(),t=e===0,n=e===1;this.comp.toggleCss("ag-header-highlight-before",t),this.comp.toggleCss("ag-header-highlight-after",n)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:e,column:t,comp:n,beans:o}=this,u=getGroupRowsHeight(this.beans),d=u.reduce((D,O)=>D+O,0)===0;if(n.toggleCss("ag-header-parent-hidden",d),!t.isSpanHeaderHeight()){e.style.removeProperty("top"),e.style.removeProperty("height"),n.toggleCss("ag-header-span-height",!1),n.toggleCss("ag-header-span-total",!1);return}const{numberOfParents:f,isSpanningTotal:v}=this.column.getColumnGroupPaddingInfo();n.toggleCss("ag-header-span-height",f>0);const w=getColumnHeaderRowHeight(o);if(f===0){n.toggleCss("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${w}px`);return}n.toggleCss("ag-header-span-total",v);const E=(this.column.getFirstRealParent()?.getLevel()??-1)+1,C=u.length-E;let _=0;for(let D=0;D<C;D++)_+=u[u.length-1-D];e.style.setProperty("top",`${-_}px`),e.style.setProperty("height",`${w+_}px`)}refreshAriaSort(){let e=null;const{beans:t,column:n,comp:o,sortable:u}=this;if(u){const d=this.getLocaleTextFunc(),f=t.sortSvc?.getDisplaySortForColumn(n)??null;o.setAriaSort(_getAriaSortState(f)),e=d("ariaSortableColumn","Press ENTER to sort")}else o.setAriaSort();this.setAriaDescriptionProperty("sort",e)}refreshAriaMenu(){let e=null;this.menuEnabled&&(e=this.getLocaleTextFunc()("ariaMenuColumn","Press ALT DOWN to open column menu")),this.setAriaDescriptionProperty("menu",e)}refreshAriaFilterButton(){let e=null;const{openFilterEnabled:t,gos:n}=this;t&&!_isLegacyMenuEnabled(n)&&(e=this.getLocaleTextFunc()("ariaFilterColumn","Press CTRL ENTER to open filter")),this.setAriaDescriptionProperty("filterButton",e)}refreshAriaFiltered(){let e=null;this.column.isFilterActive()&&(e=this.getLocaleTextFunc()("ariaColumnFiltered","Column Filtered")),this.setAriaDescriptionProperty("filter",e)}refreshAriaCellSelection(){let e=null;const{gos:t,column:n,beans:o}=this;if(_getEnableColumnSelection(t)){const d=this.getLocaleTextFunc(),f=o.rangeSvc?.isColumnInAnyRange(n);e=d("ariaColumnCellSelection",`Press CTRL+SPACE to ${f?"de":""}select all visible cells in this column`)}this.setAriaDescriptionProperty("cellSelection",e)}setAriaDescriptionProperty(e,t){const n=this.ariaDescriptionProperties;t!=null?n.set(e,t):n.delete(e)}announceAriaDescription(){const{beans:e,eGui:t,ariaDescriptionProperties:n}=this;if(!t.contains(_getActiveDomElement(e)))return;const o=Array.from(n.keys()).sort((u,d)=>u==="filter"?-1:d.charCodeAt(0)-u.charCodeAt(0)).map(u=>n.get(u)).join(". ");e.ariaAnnounce?.announceValue(o,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered(),this.refreshAriaCellSelection()}addColumnHoverListener(e){this.beans.colHover?.addHeaderColumnHoverListener(e,this.comp,this.column)}addActiveHeaderMouseListeners(e){const t=u=>this.handleMouseOverChange(u.type==="mouseenter"),n=()=>{this.setActiveHeader(!0),this.dispatchColumnMouseEvent("columnHeaderClicked",this.column)},o=u=>this.handleContextMenuMouseEvent(u,void 0,this.column);e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:n,contextmenu:o})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.toggleCss("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return isHeaderComp(t)?t.getAnchorElementForMenu(e):this.eGui}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function isHeaderComp(e){return typeof e?.getAnchorElementForMenu=="function"&&typeof e.onMenuKeyboardShortcut=="function"}var instanceIdSequence3=0,HeaderRowCtrl=class extends BeanStub{constructor(e,t,n){super(),this.rowIndex=e,this.pinned=t,this.type=n,this.instanceId=instanceIdSequence3++,this.comp=null,this.allCtrls=[];let o="ag-header-row-column";n==="group"?o="ag-header-row-group":n==="filter"&&(o="ag-header-row-filter"),this.headerRowClass=`ag-header-row ${o}`}setRowIndex(e){this.rowIndex=e,this.comp?.setRowIndex(this.getAriaRowIndex()),this.onRowHeightChanged()}postConstruct(){this.isPrintLayout=_isDomLayout(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return this.comp?this.allCtrls.every(e=>e.eGui!=null):!1}setComp(e,t,n=!0){this.comp=e,t=setupCompBean(this,this.beans.context,t),n&&(this.setRowIndex(this.rowIndex),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){const t=this.onRowHeightChanged.bind(this),n=this.onDisplayedColumnsChanged.bind(this);e.addManagedEventListeners({columnResized:this.setWidth.bind(this),displayedColumnsChanged:n,virtualColumnsChanged:o=>this.onVirtualColumnsChanged(o.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,stylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",n),e.addManagedPropertyListener("ensureDomOrder",o=>this.isEnsureDomOrder=o.currentValue),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}onDisplayedColumnsChanged(){this.isPrintLayout=_isDomLayout(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}setWidth(){if(!this.comp)return;const e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){const{visibleCols:e}=this.beans;return this.isPrintLayout?this.pinned!=null?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){if(!this.comp)return;const{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){let e=0;const t=getGroupRowsHeight(this.beans);for(let u=0;u<t.length;u++){if(u===this.rowIndex&&this.type==="group")return{topOffset:e,rowHeight:t[u]};e+=t[u]}const n=getColumnHeaderRowHeight(this.beans);if(this.type==="column")return{topOffset:e,rowHeight:n};e+=n;const o=getFloatingFiltersHeight(this.beans);return{topOffset:e,rowHeight:o}}onVirtualColumnsChanged(e=!1){if(!this.comp)return;const t=this.getUpdatedHeaderCtrls(),n=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,n,e)}getUpdatedHeaderCtrls(){const e=this.ctrlsById;this.ctrlsById=new Map;const t=this.getColumnsInViewport();for(const o of t)this.recycleAndCreateHeaderCtrls(o,this.ctrlsById,e);const n=o=>{const{focusSvc:u,visibleCols:d}=this.beans;return u.isHeaderWrapperFocused(o)?d.isVisible(o.column):!1};if(e)for(const[o,u]of e)n(u)?this.ctrlsById.set(o,u):this.destroyBean(u);return this.allCtrls=Array.from(this.ctrlsById.values()),this.allCtrls}getHeaderCellCtrls(){return this.allCtrls}recycleAndCreateHeaderCtrls(e,t,n){if(e.isEmptyGroup())return;const o=e.getUniqueId();let u;if(n&&(u=n.get(o),n.delete(o)),u&&u.column!=e&&(this.destroyBean(u),u=void 0),u==null)switch(this.type){case"filter":{u=this.createBean(this.beans.registry.createDynamicBean("headerFilterCellCtrl",!0,e,this));break}case"group":u=this.createBean(this.beans.registry.createDynamicBean("headerGroupCellCtrl",!0,e,this));break;default:u=this.createBean(new HeaderCellCtrl(e,this));break}t.set(o,u)}getColumnsInViewport(){if(!this.isPrintLayout)return this.getComponentsToRender();if(this.pinned)return[];const e=[];for(const t of["left",null,"right"])e.push(...this.getComponentsToRender(t));return e}getComponentsToRender(e=this.pinned){return this.type==="group"?this.beans.colViewport.getHeadersToRender(e,this.rowIndex):this.beans.colViewport.getColumnHeadersToRender(e)}focusHeader(e,t){const n=this.allCtrls.find(u=>u.column==e);return n?n.focus(t):!1}destroy(){this.allCtrls=this.destroyBeans(this.allCtrls),this.ctrlsById=void 0,this.comp=null,super.destroy()}},HeaderRowContainerCtrl=class extends BeanStub{constructor(e){super(),this.pinned=e,this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[]}setComp(e,t){this.comp=e,this.eViewport=t;const{pinnedCols:n,ctrlsSvc:o,colModel:u,colMoves:d}=this.beans;this.setupCenterWidth(),n?.setupHeaderPinnedWidth(this),this.setupDragAndDrop(d,this.eViewport);const f=this.refresh.bind(this,!0);this.addManagedEventListeners({displayedColumnsChanged:f,advancedFilterEnabledChanged:f});const v=`${typeof this.pinned=="string"?this.pinned:"center"}Header`;o.register(v,this),u.ready&&this.refresh()}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){const{focusSvc:t,filterManager:n,visibleCols:o}=this.beans;let u=0;const d=t.getFocusHeaderToUseAfterRefresh(),f=()=>{const _=o.headerGroupRowCount;u=_,e||(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls));const D=this.groupsRowCtrls.length;if(D!==_){if(D>_){for(let O=_;O<D;O++)this.destroyBean(this.groupsRowCtrls[O]);this.groupsRowCtrls.length=_;return}for(let O=D;O<_;O++){const M=this.createBean(new HeaderRowCtrl(O,this.pinned,"group"));this.groupsRowCtrls.push(M)}}},v=()=>{const _=u++;if(this.hidden){this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl);return}this.columnsRowCtrl==null||!e?(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.columnsRowCtrl=this.createBean(new HeaderRowCtrl(_,this.pinned,"column"))):this.columnsRowCtrl.rowIndex!==_&&this.columnsRowCtrl.setRowIndex(_)},w=()=>{this.includeFloatingFilter=!!n?.hasFloatingFilters()&&!this.hidden;const _=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){_();return}e||_();const D=u++;this.filtersRowCtrl?this.filtersRowCtrl.rowIndex!==D&&this.filtersRowCtrl.setRowIndex(D):this.filtersRowCtrl=this.createBean(new HeaderRowCtrl(D,this.pinned,"filter"))},E=this.getAllCtrls();f(),v(),w();const C=this.getAllCtrls();this.comp.setCtrls(C),this.restoreFocusOnHeader(t,d),E.length!==C.length&&this.beans.eventSvc.dispatchEvent({type:"headerRowsChanged"})}getHeaderCtrlForColumn(e){const t=n=>n?.getHeaderCellCtrls().find(o=>o.column===e);if(isColumn(e))return t(this.columnsRowCtrl);if(this.groupsRowCtrls.length!==0)for(let n=0;n<this.groupsRowCtrls.length;n++){const o=t(this.groupsRowCtrls[n]);if(o)return o}}getHtmlElementForColumnHeader(e){return this.getHeaderCtrlForColumn(e)?.eGui??null}getRowType(e){return this.getAllCtrls()[e]?.type}focusHeader(e,t,n){const u=this.getAllCtrls()[e];return u?u.focusHeader(t,n):!1}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}destroy(){this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl),this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls),super.destroy()}setupDragAndDrop(e,t){const n=e?.createBodyDropTarget(this.pinned,t);n&&this.createManagedBean(n)}restoreFocusOnHeader(e,t){if(!t)return;const{column:n}=t;n.getPinned()==this.pinned&&e.focusHeaderPosition({headerPosition:t,scroll:!1})}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new CenterWidthFeature(e=>this.comp.setCenterWidth(`${e}px`),!0))}},OverlayComponent=class extends Component{constructor(){super()}},ExportingOverlayElement={tag:"div",cls:"ag-overlay-exporting-center",children:[{tag:"span",ref:"eExportingIcon",cls:"ag-loading-icon"},{tag:"span",ref:"eExportingText",cls:"ag-exporting-text"}]},ExportingOverlayComponent=class extends OverlayComponent{constructor(){super(...arguments),this.eExportingIcon=RefPlaceholder,this.eExportingText=RefPlaceholder}init(e){const{beans:t}=this;this.setTemplate(ExportingOverlayElement);const n=_createIconNoSpan("overlayExporting",t,null);n&&this.eExportingIcon.appendChild(n);const o=e.exporting?.overlayText??this.getLocaleTextFunc()("exportingOoo","Exporting...");this.eExportingText.textContent=o,t.ariaAnnounce.announceValue(o,"overlay")}},LoadingOverlayElement={tag:"div",cls:"ag-overlay-loading-center",children:[{tag:"span",ref:"eLoadingIcon",cls:"ag-loading-icon"},{tag:"span",ref:"eLoadingText",cls:"ag-loading-text"}]},LoadingOverlayComponent=class extends OverlayComponent{constructor(){super(...arguments),this.eLoadingIcon=RefPlaceholder,this.eLoadingText=RefPlaceholder}init(e){const{beans:t,gos:n}=this,o=_makeNull(n.get("overlayLoadingTemplate")?.trim());if(this.setTemplate(o??LoadingOverlayElement),!o){const u=_createIconNoSpan("overlayLoading",t,null);u&&this.eLoadingIcon.appendChild(u);const d=e.loading?.overlayText??this.getLocaleTextFunc()("loadingOoo","Loading...");this.eLoadingText.textContent=d,t.ariaAnnounce.announceValue(d,"overlay")}}},NoMatchingRowsOverlayElement={tag:"span",cls:"ag-overlay-no-matching-rows-center"},NoMatchingRowsOverlayComponent=class extends OverlayComponent{init(e){const{beans:t}=this;this.setTemplate(NoMatchingRowsOverlayElement);const n=e.noMatchingRows?.overlayText??this.getLocaleTextFunc()("noMatchingRows","No Matching Rows");this.getGui().textContent=n,t.ariaAnnounce.announceValue(n,"overlay")}},NoRowsOverlayElement={tag:"span",cls:"ag-overlay-no-rows-center"},NoRowsOverlayComponent=class extends OverlayComponent{init(e){const{beans:t,gos:n}=this,o=_makeNull(n.get("overlayNoRowsTemplate")?.trim());if(this.setTemplate(o??NoRowsOverlayElement),!o){const u=e.noRows?.overlayText??this.getLocaleTextFunc()("noRowsToShow","No Rows To Show");this.getGui().textContent=u,t.ariaAnnounce.announceValue(u,"overlay")}}},agAbstractLabelCSS=".ag-label{white-space:nowrap}:where(.ag-ltr) .ag-label{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-label-align-right) .ag-label{order:1}:where(.ag-ltr) :where(.ag-label-align-right) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-rtl) :where(.ag-label-align-right) .ag-label{margin-right:var(--ag-spacing)}:where(.ag-label-align-right){.ag-label,.ag-wrapper{flex:none}}.ag-label-align-top{align-items:flex-start;flex-direction:column}:where(.ag-label-align-top){.ag-label,.ag-wrapper{align-self:stretch}}.ag-label-ellipsis{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-label-align-top) .ag-label{margin-bottom:calc(var(--ag-spacing)*.5)}",AgAbstractLabel=class extends AgComponentStub{constructor(e,t,n){super(t,n),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{},this.registerCSS(agAbstractLabelCSS)}postConstruct(){this.addCss("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:n,labelAlignment:o,disabled:u,labelEllipsis:d}=this.config;u!=null&&this.setDisabled(u),e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),n!=null&&this.setLabelWidth(n),d!=null&&this.setLabelEllipsis(d),this.setLabelAlignment(o||this.labelAlignment),this.refreshLabel()}refreshLabel(){const{label:e,eLabel:t}=this;_clearElement(t),typeof e=="string"?t.innerText=e+this.labelSeparator:e&&t.appendChild(e),e===""?(_setDisplayed(t,!1),_setAriaRole(t,"presentation")):(_setDisplayed(t,!0),_setAriaRole(t,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){const e=this.eLabel;return e.id=e.id||`ag-${this.getCompId()}-label`,e.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){const n=this.getGui().classList;return n.toggle("ag-label-align-left",e==="left"),n.toggle("ag-label-align-right",e==="right"),n.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(_setElementWidth(this.eLabel,e),this)}setDisabled(e){e=!!e;const t=this.getGui();return _setDisabled(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},AgAbstractField=class extends AgAbstractLabel{constructor(e,t,n,o){super(e,t,n),this.className=o}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:n,ariaLabel:o}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),n!=null&&this.onValueChange(n),o!=null&&this.setAriaLabel(o),this.className&&this.addCss(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId(),n=this.getLabel();n==null||n==""||_getAriaLabel(e)!==null?_setAriaLabelledBy(e,""):_setAriaLabelledBy(e,t??"")}setAriaLabel(e){return _setAriaLabel(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return _setFixedWidth(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}};function buildTemplate(e){return{tag:"div",role:"presentation",children:[{tag:"div",ref:"eLabel",cls:"ag-input-field-label"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-input-wrapper",role:"presentation",children:[{tag:e,ref:"eInput",cls:"ag-input-field-input"}]}]}}var AgAbstractInputField=class extends AgAbstractField{constructor(e,t,n="text",o="input"){super(e,e?.template??buildTemplate(o),[],t),this.inputType=n,this.displayFieldTag=o,this.eLabel=RefPlaceholder,this.eWrapper=RefPlaceholder,this.eInput=RefPlaceholder}postConstruct(){super.postConstruct(),this.setInputType(this.inputType);const{eLabel:e,eWrapper:t,eInput:n,className:o}=this;e.classList.add(`${o}-label`),t.classList.add(`${o}-input-wrapper`),n.classList.add(`${o}-input`),this.addCss("ag-input-field"),n.id=n.id||`ag-${this.getCompId()}-input`;const{inputName:u,inputWidth:d,inputPlaceholder:f,autoComplete:v,tabIndex:w}=this.config;u!=null&&this.setInputName(u),d!=null&&this.setInputWidth(d),f!=null&&this.setInputPlaceholder(f),v!=null&&this.setAutoComplete(v),this.addInputListeners(),this.activateTabIndex([n],w)}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(e){this.displayFieldTag==="input"&&(this.inputType=e,_addOrRemoveAttribute(this.eInput,"type",e))}getInputElement(){return this.eInput}getWrapperElement(){return this.eWrapper}setInputWidth(e){return _setElementWidth(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){const t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return _addOrRemoveAttribute(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return _setAriaLabel(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return _setDisabled(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)_addOrRemoveAttribute(this.eInput,"autocomplete",null);else{const t=typeof e=="string"?e:"off";_addOrRemoveAttribute(this.eInput,"autocomplete",t)}return this}},AgCheckbox=class extends AgAbstractInputField{constructor(e,t="ag-checkbox",n="checkbox"){super(e,t,n),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t,name:n}=this.config;typeof e=="boolean"&&this.setReadOnly(e),typeof t=="boolean"&&this.setPassive(t),n!=null&&this.setName(n)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){const t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){if(this.isSelected()===e)return;this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0;const n=this.eInput;n.checked=e,n.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue)}dispatchChange(e,t,n){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:n});const o=this.getInputElement();this.eventSvc.dispatchEvent({type:"checkboxChanged",id:o.id,name:o.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),n=this.selected=e.target.checked;this.refreshSelectedClass(n),this.dispatchChange(n,t,e)}refreshSelectedClass(e){const t=this.eWrapper.classList;t.toggle("ag-checked",e===!0),t.toggle("ag-indeterminate",e==null)}},AgCheckboxSelector={selector:"AG-CHECKBOX",component:AgCheckbox},checkboxCellRendererCSS=".ag-checkbox-cell{height:100%}",CheckboxCellRendererElement={tag:"div",cls:"ag-cell-wrapper ag-checkbox-cell",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},CheckboxCellRenderer=class extends Component{constructor(){super(CheckboxCellRendererElement,[AgCheckboxSelector]),this.eCheckbox=RefPlaceholder,this.registerCSS(checkboxCellRendererCSS)}init(e){this.refresh(e);const{eCheckbox:t,beans:n}=this,o=t.getInputElement();o.setAttribute("tabindex","-1"),_setAriaLive(o,"polite"),this.addManagedListeners(o,{click:u=>{if(_stopPropagationForAgGrid(u),t.isDisabled())return;const d=t.getValue();this.onCheckboxChanged(d)},dblclick:u=>{_stopPropagationForAgGrid(u)}}),this.addManagedElementListeners(e.eGridCell,{keydown:u=>{if(u.key===KeyCode.SPACE&&!t.isDisabled()){e.eGridCell===_getActiveDomElement(n)&&t.toggle();const d=t.getValue();this.onCheckboxChanged(d),u.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){let t,n=!0;const{value:o,column:u,node:d}=e;if(d.group&&u)if(typeof o=="boolean")t=o;else{const _=u.getColId();_.startsWith(GROUP_AUTO_COLUMN_ID)?t=o==null||o===""?void 0:o==="true":d.aggData&&d.aggData[_]!==void 0||d.sourceRowIndex>=0?t=o??void 0:n=!1}else t=o??void 0;const{eCheckbox:f}=this;if(!n){f.setDisplayed(!1);return}f.setValue(t);const v=e.disabled??!u?.isCellEditable(d);f.setDisabled(v);const w=this.getLocaleTextFunc(),E=_getAriaCheckboxStateName(w,t),C=v?E:`${w("ariaToggleCellValue","Press SPACE to toggle cell value")} (${E})`;f.setInputAriaLabel(C)}onCheckboxChanged(e){const{params:t}=this,{column:n,node:o,value:u}=t,{editSvc:d}=this.beans;if(!n)return;const f={rowNode:o,column:n};d?.dispatchCellEvent(f,null,"cellEditingStarted",{value:u});const v=o.setDataValue(n,e,"ui");d?.dispatchCellEvent(f,null,"cellEditingStopped",{oldValue:u,newValue:e,valueChanged:v}),v||this.updateCheckbox(t)}},DOUBLE_TAP_MILLISECONDS=500,LONG_PRESS_MILLISECONDS=550,handledTouchEvents,addHandledTouchEvent=e=>{if(!handledTouchEvents)handledTouchEvents=new WeakSet;else if(handledTouchEvents.has(e))return!1;return handledTouchEvents.add(e),!0},TouchListener=class{constructor(e,t=!1){this.eElement=e,this.preventClick=t,this.startListener=null,this.handlers=[],this.eventSvc=void 0,this.touchStart=null,this.lastTapTime=null,this.longPressTimer=0,this.moved=!1}addEventListener(e,t){let n=this.eventSvc;if(!n){if(n===null)return;this.eventSvc=n=new LocalEventService;const o=this.onTouchStart.bind(this);this.startListener=o,this.eElement.addEventListener("touchstart",o,{passive:!0})}n.addEventListener(e,t)}removeEventListener(e,t){this.eventSvc?.removeEventListener(e,t)}onTouchStart(e){if(this.touchStart||!addHandledTouchEvent(e))return;const t=e.touches[0];this.touchStart=t;const n=this.handlers;if(!n.length){const o=this.eElement,u=o.ownerDocument,d=this.onTouchMove.bind(this),f=this.onTouchEnd.bind(this),v=this.onTouchCancel.bind(this),w={passive:!0},E={passive:!1};addTempEventHandlers(n,[o,"touchmove",d,w],[u,"touchcancel",v,w],[u,"touchend",f,E],[u,"contextmenu",preventEventDefault,E])}this.clearLongPress(),this.longPressTimer=window.setTimeout(()=>{this.longPressTimer=0,this.touchStart===t&&!this.moved&&(this.moved=!0,this.eventSvc?.dispatchEvent({type:"longTap",touchStart:t,touchEvent:e}))},LONG_PRESS_MILLISECONDS)}onTouchMove(e){const{moved:t,touchStart:n}=this;if(!t&&n){const o=_getFirstActiveTouch(n,e.touches);o&&!_areEventsNear(o,n,4)&&(this.clearLongPress(),this.moved=!0)}}onTouchEnd(e){const t=this.touchStart;!t||!_getFirstActiveTouch(t,e.changedTouches)||(this.moved||(this.eventSvc?.dispatchEvent({type:"tap",touchStart:t}),this.checkDoubleTap(t)),this.preventClick&&preventEventDefault(e),this.cancel())}onTouchCancel(e){const t=this.touchStart;!t||!_getFirstActiveTouch(t,e.changedTouches)||(this.lastTapTime=null,this.cancel())}checkDoubleTap(e){let t=Date.now();const n=this.lastTapTime;n&&t-n>DOUBLE_TAP_MILLISECONDS&&(this.eventSvc?.dispatchEvent({type:"doubleTap",touchStart:e}),t=null),this.lastTapTime=t}cancel(){this.clearLongPress(),clearTempEventHandlers(this.handlers),this.touchStart=null}clearLongPress(){window.clearTimeout(this.longPressTimer),this.longPressTimer=0,this.moved=!1}destroy(){const e=this.startListener;e&&(this.startListener=null,this.eElement.removeEventListener("touchstart",e)),this.cancel(),this.eElement=null,this.eventSvc=null}},contextId=1,AgContext=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,this.instanceId=contextId++,e?.beanClasses&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){this.id=e.id,this.beans.context=this,this.destroyCallback=e.destroyCallback;for(const t of Object.keys(e.providedBeanInstances))this.beans[t]=e.providedBeanInstances[t];for(const t of e.beanClasses){const n=new t;n.beanName?this.beans[n.beanName]=n:console.error(`Bean ${t.name} is missing beanName`),this.createdBeans.push(n)}for(const t of e.derivedBeans??[]){const{beanName:n,bean:o}=t(this);this.beans[n]=o,this.createdBeans.push(o)}e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){return this.initBeans([e],t),e}initBeans(e,t){const n=this.beans;for(const o of e)o.preWireBeans?.(n),o.wireBeans?.(n);for(const o of e)o.preConstruct?.();t&&e.forEach(t);for(const o of e)o.postConstruct?.()}getBeans(){return this.beans}getBean(e){return this.beans[e]}getId(){return this.id}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[],this.destroyCallback?.()}destroyBean(e){e?.destroy?.()}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}};function createGridApi(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionSvc").api}}var orderedCoreBeans=["licenseManager","environment","eventSvc","gos","paginationAutoPageSizeSvc","apiFunctionSvc","gridApi","registry","agCompUtils","userCompFactory","rowContainerHeight","horizontalResizeSvc","localeSvc","pinnedRowModel","dragSvc","colGroupSvc","visibleCols","popupSvc","selectionSvc","colFilter","quickFilter","filterManager","colModel","headerNavigation","pageBounds","pagination","pageBoundsListener","rowSpanSvc","stickyRowSvc","rowRenderer","expressionSvc","alignedGridsSvc","navigation","valueCache","valueSvc","autoWidthCalc","filterMenuFactory","dragAndDrop","focusSvc","cellNavigation","cellStyles","scrollVisibleSvc","sortSvc","colHover","colAnimation","autoColSvc","selectionColSvc","changeDetectionSvc","animationFrameSvc","undoRedo","colDefFactory","rowStyleSvc","rowNodeBlockLoader","rowNodeSorter","ctrlsSvc","pinnedCols","dataTypeSvc","syncSvc","overlays","stateSvc","expansionSvc","apiEventSvc","ariaAnnounce","menuSvc","colMoves","colAutosize","colFlex","colResize","pivotColsSvc","valueColsSvc","rowGroupColsSvc","colNames","colViewport","pivotResultCols","showRowGroupCols","validation"],beanNamePosition=Object.fromEntries(orderedCoreBeans.map((e,t)=>[e,t]));function gridBeanInitComparator(e,t){const n=(e.beanName?beanNamePosition[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER,o=(t.beanName?beanNamePosition[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return n-o}function gridBeanDestroyComparator(e,t){return e?.beanName==="gridDestroySvc"?-1:t?.beanName==="gridDestroySvc"?1:0}var LayoutCssClasses={AUTO_HEIGHT:"ag-layout-auto-height",NORMAL:"ag-layout-normal",PRINT:"ag-layout-print"},LayoutFeature=class extends BeanStub{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.gos.get("domLayout"),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},n=t.autoHeight?LayoutCssClasses.AUTO_HEIGHT:t.print?LayoutCssClasses.PRINT:LayoutCssClasses.NORMAL;this.view.updateLayoutClasses(n,t)}},AbstractFakeScrollComp=class extends Component{constructor(e,t){super(),this.direction=t,this.eViewport=RefPlaceholder,this.eContainer=RefPlaceholder,this.hideTimeout=0,this.setTemplate(e)}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.toggleCss("ag-apple-scrollbar",_isMacOsUserAgent()||_isIOSUserAgent())}destroy(){super.destroy(),window.clearTimeout(this.hideTimeout)}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=_isInvisibleScrollbar(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=this.getGui(),t=()=>this.toggleCss("ag-scrollbar-active",!0),n=()=>this.toggleCss("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:n,touchend:n})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),_requestAnimationFrame(this.beans,()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=0),this.toggleCss("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.toggleCss("ag-scrollbar-scrolling",!1),this.hideTimeout=0},400)}})}attemptSettingScrollPosition(e){const t=this.eViewport;_waitUntil(this,()=>_isVisible(t),()=>this.setScrollPosition(e),100)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}},FakeHScrollElement={tag:"div",cls:"ag-body-horizontal-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eLeftSpacer",cls:"ag-horizontal-left-spacer"},{tag:"div",ref:"eViewport",cls:"ag-body-horizontal-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-horizontal-scroll-container"}]},{tag:"div",ref:"eRightSpacer",cls:"ag-horizontal-right-spacer"}]},FakeHScrollComp=class extends AbstractFakeScrollComp{constructor(){super(FakeHScrollElement,"horizontal"),this.eLeftSpacer=RefPlaceholder,this.eRightSpacer=RefPlaceholder,this.setScrollVisibleDebounce=0}wireBeans(e){this.visibleCols=e.visibleCols,this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.refreshCompBottom.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.beans.ctrlsSvc.register("fakeHScrollComp",this),this.createManagedBean(new CenterWidthFeature(t=>this.eContainer.style.width=`${t}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}destroy(){window.clearTimeout(this.setScrollVisibleDebounce),super.destroy()}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}refreshCompBottom(){if(!this.invisibleScrollbar)return;const e=this.beans.pinnedRowModel?.getPinnedBottomTotalHeight()??0;this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleSvc.verticalScrollShowing;let t=this.visibleCols.getDisplayedColumnsRightWidth();const n=!this.enableRtl&&e,o=this.scrollVisibleSvc.getScrollbarWidth();n&&(t+=o),_setFixedWidth(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=o);let u=this.visibleCols.getColsLeftWidth();this.enableRtl&&e&&(u+=o),_setFixedWidth(this.eLeftSpacer,u),this.eLeftSpacer.classList.toggle("ag-scroller-corner",u<=o)}setScrollVisible(){const e=this.scrollVisibleSvc.horizontalScrollShowing,t=this.invisibleScrollbar,n=this.gos.get("suppressHorizontalScroll"),o=e&&this.scrollVisibleSvc.getScrollbarWidth()||0,d=n?0:o===0&&t?16:o,f=()=>{this.setScrollVisibleDebounce=0,this.toggleCss("ag-scrollbar-invisible",t),_setFixedHeight(this.getGui(),d),_setFixedHeight(this.eViewport,d),_setFixedHeight(this.eContainer,d),d||this.eContainer.style.setProperty("min-height","1px"),this.setVisible(e,{skipAriaHidden:!0})};window.clearTimeout(this.setScrollVisibleDebounce),e?this.setScrollVisibleDebounce=window.setTimeout(f,100):f()}getScrollPosition(){return _getScrollLeft(this.eViewport,this.enableRtl)}setScrollPosition(e){_isVisible(this.eViewport)||this.attemptSettingScrollPosition(e),_setScrollLeft(this.eViewport,e,this.enableRtl)}},SetHeightFeature=class extends BeanStub{constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this,this.beans.rowContainerHeight)})}onHeightChanged(e){const t=e.uiContainerHeight,n=t!=null?`${t}px`:"";this.eContainer.style.height=n,this.eViewport&&(this.eViewport.style.height=n)}},FakeVScrollElement={tag:"div",cls:"ag-body-vertical-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eViewport",cls:"ag-body-vertical-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-vertical-scroll-container"}]}]},FakeVScrollComp=class extends AbstractFakeScrollComp{constructor(){super(FakeVScrollElement,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new SetHeightFeature(this.eContainer));const{ctrlsSvc:e}=this.beans;e.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this,e)})}setScrollVisible(){const{scrollVisibleSvc:e}=this.beans,t=e.verticalScrollShowing,n=this.invisibleScrollbar,o=t&&e.getScrollbarWidth()||0,u=o===0&&n?16:o;this.toggleCss("ag-scrollbar-invisible",n),_setFixedWidth(this.getGui(),u),_setFixedWidth(this.eViewport,u),_setFixedWidth(this.eContainer,u),this.setDisplayed(t,{skipAriaHidden:!0})}onRowContainerHeightChanged(e){const n=e.getGridBodyCtrl().eBodyViewport,o=this.getScrollPosition(),u=n.scrollTop;o!=u&&this.setScrollPosition(u,!0)}getScrollPosition(){return this.eViewport.scrollTop}setScrollPosition(e,t){!t&&!_isVisible(this.eViewport)&&this.attemptSettingScrollPosition(e),this.eViewport.scrollTop=e}},VIEWPORT="Viewport",FAKE_V_SCROLLBAR="fakeVScrollComp",HORIZONTAL_SOURCES=["fakeHScrollComp","centerHeader","topCenter","bottomCenter","stickyTopCenter","stickyBottomCenter"],SCROLL_DEBOUNCE_TIMEOUT=100,SCROLL_END_TIMEOUT=150,GridBodyScrollFeature=class extends BeanStub{constructor(e){super(),this.clearRetryListenerFncs=[],this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.lastIsHorizontalScrollShowing=!1,this.scrollTimer=0,this.isScrollActive=!1,this.isVerticalPositionInvalidated=!0,this.isHorizontalPositionInvalidated=!0,this.eBodyViewport=e,this.resetLastHScrollDebounced=_debounce(this,()=>this.lastScrollSource[1]=null,SCROLL_END_TIMEOUT),this.resetLastVScrollDebounced=_debounce(this,()=>this.lastScrollSource[0]=null,SCROLL_END_TIMEOUT)}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.animationFrameSvc=e.animationFrameSvc,this.visibleCols=e.visibleCols}destroy(){super.destroy(),this.clearRetryListenerFncs=[],window.clearTimeout(this.scrollTimer)}postConstruct(){this.enableRtl=this.gos.get("enableRtl");const e=this.invalidateVerticalScroll.bind(this),t=this.invalidateHorizontalScroll.bind(this);this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),bodyHeightChanged:e,scrollGapChanged:t}),this.addManagedElementListeners(this.eBodyViewport,{scroll:e}),this.ctrlsSvc.whenReady(this,n=>{this.centerRowsCtrl=n.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}invalidateHorizontalScroll(){this.isHorizontalPositionInvalidated=!0}invalidateVerticalScroll(){this.isVerticalPositionInvalidated=!0}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.eViewport,{scroll:this.onHScroll.bind(this,VIEWPORT)});for(const e of HORIZONTAL_SOURCES){const t=this.ctrlsSvc.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){const e=this.ctrlsSvc.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),n=t?_debounce(this,this.onVScroll.bind(this,VIEWPORT),SCROLL_DEBOUNCE_TIMEOUT):this.onVScroll.bind(this,VIEWPORT),o=t?_debounce(this,this.onVScroll.bind(this,FAKE_V_SCROLLBAR),SCROLL_DEBOUNCE_TIMEOUT):this.onVScroll.bind(this,FAKE_V_SCROLLBAR);this.addManagedElementListeners(this.eBodyViewport,{scroll:n}),this.registerScrollPartner(e,o)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){this.centerRowsCtrl!=null&&(e===void 0&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(const t of[...HORIZONTAL_SOURCES,VIEWPORT]){if(this.lastScrollSource[1]===t)continue;const n=this.getViewportForSource(t);_setScrollLeft(n,e,this.enableRtl)}}getViewportForSource(e){return e===VIEWPORT?this.centerRowsCtrl.eViewport:this.ctrlsSvc.get(e).eViewport}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(t===0?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;const t=this.centerRowsCtrl.eViewport,{scrollLeft:n}=t;if(this.shouldBlockScrollUpdate(1,n,!0))return;const o=_getScrollLeft(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(o),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;if(e===VIEWPORT?t=this.eBodyViewport.scrollTop:t=this.ctrlsSvc.get("fakeVScrollComp").getScrollPosition(),this.shouldBlockScrollUpdate(0,t,!0))return;const{animationFrameSvc:n}=this;n?.setScrollTop(t),this.nextScrollTop=t,e===VIEWPORT?this.ctrlsSvc.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,n?.active?n.schedule():this.scrollGridIfNeeded(!0),this.resetLastVScrollDebounced()}doHorizontalScroll(e){const t=this.ctrlsSvc.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}isScrolling(){return this.isScrollActive}fireScrollEvent(e){const t={type:"bodyScroll",direction:e===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.isScrollActive=!0,this.eventSvc.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=window.setTimeout(()=>{this.scrollTimer=0,this.isScrollActive=!1,this.eventSvc.dispatchEvent({...t,type:"bodyScrollEnd"})},SCROLL_END_TIMEOUT)}shouldBlockScrollUpdate(e,t,n=!1){return n&&!_isIOSUserAgent()?!1:e===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){const t=_getInnerHeight(this.eBodyViewport),{scrollHeight:n}=this.eBodyViewport;return e<0||e+t>n}shouldBlockHorizontalScroll(e){const t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:n}=this.centerRowsCtrl.eViewport;if(this.enableRtl){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>n}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){const e=this.scrollLeft;let t=!1;for(const n of HORIZONTAL_SOURCES)if(this.getViewportForSource(n).scrollLeft!==e){t=!0;break}t&&this.onHScroll(VIEWPORT)}scrollGridIfNeeded(e=!1){const t=this.scrollTop!=this.nextScrollTop;return t&&(this.scrollTop=this.nextScrollTop,e&&this.invalidateVerticalScroll(),this.redrawRowsAfterScroll()),t}setHorizontalScrollPosition(e,t=!1){const o=this.centerRowsCtrl.eViewport.scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(this.enableRtl?e=e>0?0:o:e=Math.min(Math.max(e,0),o)),_setScrollLeft(this.centerRowsCtrl.eViewport,Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.invalidateVerticalScroll(),this.eBodyViewport.scrollTop=e}getVScrollPosition(){if(!this.isVerticalPositionInvalidated){const{lastOffsetHeight:n,lastScrollTop:o}=this;return{top:o,bottom:o+n}}this.isVerticalPositionInvalidated=!1;const{scrollTop:e,offsetHeight:t}=this.eBodyViewport;return this.lastScrollTop=e,this.lastOffsetHeight=t,{top:e,bottom:e+t}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.isHorizontalPositionInvalidated&&(this.lastIsHorizontalScrollShowing=this.centerRowsCtrl.isHorizontalScrollShowing(),this.isHorizontalPositionInvalidated=!1),this.lastIsHorizontalScrollShowing}scrollHorizontally(e){const t=this.centerRowsCtrl.eViewport.scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.eViewport.scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){const{rowModel:n}=this.beans,o=n.getRowCount();let u=-1;for(let d=0;d<o;d++){const f=n.getRow(d);if(typeof e=="function"){if(f&&e(f)){u=d;break}}else if(e===f||e===f.data){u=d;break}}u>=0&&this.ensureIndexVisible(u,t)}ensureIndexVisible(e,t,n=0){if(_isDomLayout(this.gos,"print"))return;const{rowModel:o}=this.beans,u=o.getRowCount();if(typeof e!="number"||e<0||e>=u){_warn(88,{index:e});return}this.clearRetryListeners();const{frameworkOverrides:d,pageBounds:f,rowContainerHeight:v,rowRenderer:w}=this.beans;d.wrapIncoming(()=>{const E=this.ctrlsSvc.getGridBodyCtrl(),C=o.getRow(e);let _,D,O=0;this.invalidateVerticalScroll();do{const{stickyTopHeight:M,stickyBottomHeight:N}=E,I=C.rowTop,B=C.rowHeight,V=f.getPixelOffset(),j=C.rowTop-V,q=j+C.rowHeight,z=this.getVScrollPosition(),$=v.divStretchOffset,ee=z.top+$,ie=z.bottom+$,ae=ie-ee,pe=v.getScrollPositionForPixel(j),he=v.getScrollPositionForPixel(q-ae),be=Math.min((pe+he)/2,j),xe=ee+M>j,Ee=ie-N<q;let we=null;t==="top"?we=pe-M:t==="bottom"?we=he+N:t==="middle"?we=be:xe?we=pe-M:Ee&&(he-pe>ae?we=pe-M:we=he+N),we!==null&&(this.setVerticalScrollPosition(we),w.redraw({afterScroll:!0})),_=I!==C.rowTop||B!==C.rowHeight,D=M!==E.stickyTopHeight||N!==E.stickyBottomHeight,O++}while((_||D)&&O<10);if(this.animationFrameSvc?.flushAllFrames(),n<10&&(C?.stub||!this.beans.rowAutoHeight?.areRowsMeasured())){const M=this.getVScrollPosition().top;this.clearRetryListenerFncs=this.addManagedEventListeners({bodyScroll:()=>{const N=this.getVScrollPosition().top;M!==N&&this.clearRetryListeners()},modelUpdated:()=>{this.clearRetryListeners(),!(e>=o.getRowCount())&&this.ensureIndexVisible(e,t,n+1)}})}})}clearRetryListeners(){for(const e of this.clearRetryListenerFncs)e();this.clearRetryListenerFncs=[]}ensureColumnVisible(e,t="auto"){const{colModel:n,frameworkOverrides:o}=this.beans,u=n.getCol(e);if(!u||u.isPinned()||!this.visibleCols.isColDisplayed(u))return;const d=this.getPositionedHorizontalScroll(u,t);o.wrapIncoming(()=>{d!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(d),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameSvc?.flushAllFrames()})}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:n,columnAfterEnd:o}=this.isColumnOutsideViewport(e),u=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),d=this.centerRowsCtrl.getCenterWidth(),f=this.enableRtl;let v=(f?n:o)||u,w=f?o:n;t!=="auto"&&(v=t==="start",w=t==="end");const E=t==="middle";if(v||w||E){const{colLeft:C,colMiddle:_,colRight:D}=this.getColumnBounds(e);return E?_-d/2:v?f?D:C:f?C-d:D-d}return null}isColumnOutsideViewport(e){const{start:t,end:n}=this.getViewportBounds(),{colLeft:o,colRight:u}=this.getColumnBounds(e),d=this.enableRtl,f=d?t>u:n<u,v=d?n<o:t>o;return{columnBeforeStart:f,columnAfterEnd:v}}getColumnBounds(e){const t=this.enableRtl,n=this.visibleCols.bodyWidth,o=e.getActualWidth(),u=e.getLeft(),d=t?-1:1,f=t?n-u:u,v=f+o*d,w=f+o/2*d;return{colLeft:f,colMiddle:w,colRight:v}}getViewportBounds(){const e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft(),n=t,o=e+t;return{start:n,end:o,width:e}}},AXES={horizontal:{overflow:e=>e.scrollWidth-e.clientWidth,scrollSize:e=>e.scrollWidth,clientSize:e=>e.clientWidth,opposite:"vertical"},vertical:{overflow:e=>e.scrollHeight-e.clientHeight,scrollSize:e=>e.scrollHeight,clientSize:e=>e.clientHeight,opposite:"horizontal"}};function _shouldShowHorizontalScroll(e,t,n=_getScrollbarWidth()||0,o,u){return shouldShowScroll(e,t,"horizontal",n,o,u)}function _shouldShowVerticalScroll(e,t,n=_getScrollbarWidth()||0,o,u){return shouldShowScroll(e,t,"vertical",n,o,u)}function shouldShowScroll(e,t,n,o,u,d){const f=AXES[n],v=AXES[f.opposite],w=u?_isVisible(u):!0,E=d?_isVisible(d):!0,C=f.overflow(e);if(C<=0)return!1;if(!t||o===0)return!0;const _=v.overflow(t);if(_<=0)return!0;if(C<=o){if(w&&E&&isScrollbarCausedByOppositeAxis({candidateOverflow:_,candidateScrollSize:v.scrollSize(t),candidateClientSize:v.clientSize(t),scrollbarWidth:o}))return!1;const D=f.clientSize(e)+o;return f.scrollSize(e)<=D}return!0}function isScrollbarCausedByOppositeAxis({candidateOverflow:e,candidateScrollSize:t,candidateClientSize:n,scrollbarWidth:o}){if(e<=0||e>o)return!1;const u=n+o;return t>n&&t<=u}var ViewportSizeFeature=class extends BeanStub{constructor(e){super(),this.centerContainerCtrl=e}wireBeans(e){this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const{beans:e,centerContainerCtrl:t,gridBodyCtrl:n}=this,o=()=>{_requestAnimationFrame(e,()=>{this.onCenterViewportResized()})};t.registerViewportResizeListener(o),n.registerBodyViewportResizeListener(o)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleSvc.updateScrollGap(),this.centerContainerCtrl.isViewportInTheDOMTree()){const{pinnedCols:e,colFlex:t}=this.beans;e?.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const n=this.centerContainerCtrl.getCenterWidth();n!==this.centerWidth&&(this.centerWidth=n,t?.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.scrollFeature.checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=this.gridBodyCtrl.eBodyViewport,t=_getInnerHeight(e);this.bodyHeight!==t&&(this.bodyHeight=t,this.eventSvc.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){if(!this.isAlive())return;const e={horizontalScrollShowing:this.centerContainerCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleSvc.setScrollsVisible(e)}onHorizontalViewportChanged(){const{centerContainerCtrl:e,beans:t}=this,n=e.getCenterWidth(),o=e.getViewportScrollLeft();t.colViewport.setScrollPosition(n,o)}};function _isEventFromPrintableCharacter(e){return e.altKey||e.ctrlKey||e.metaKey?!1:e.key?.length===1}function _suppressCellMouseEvent(e,t,n,o){const u=t.getColDef().cellRendererParams?.suppressMouseEventHandling;return suppressMouseEvent(e,t,n,o,u)}function _suppressFullWidthMouseEvent(e,t,n,o){const u=t?.suppressMouseEventHandling;return suppressMouseEvent(e,void 0,n,o,u)}function suppressMouseEvent(e,t,n,o,u){return u?u(_addGridCommonParams(e,{column:t,node:n,event:o})):!1}function _getCtrlForEventTarget(e,t,n){let o=t;for(;o;){const u=_getDomData(e,o,n);if(u)return u;o=o.parentElement}return null}var DOM_DATA_KEY_CELL_CTRL="cellCtrl";function _getCellCtrlForEventTarget(e,t){return _getCtrlForEventTarget(e,t,DOM_DATA_KEY_CELL_CTRL)}var DOM_DATA_KEY_ROW_CTRL="renderedRow";function _getRowCtrlForEventTarget(e,t){return _getCtrlForEventTarget(e,t,DOM_DATA_KEY_ROW_CTRL)}function _isUserSuppressingKeyboardEvent(e,t,n,o,u){const d=o?o.getColDef().suppressKeyboardEvent:void 0;if(!d)return!1;const f=_addGridCommonParams(e,{event:t,editing:u,column:o,node:n,data:n.data,colDef:o.getColDef()});return!!(d&&d(f))}function _selectAllCells(e){const{pinnedRowModel:t,rowModel:n,rangeSvc:o,visibleCols:u}=e;if(!o||u.allCols.length===0)return;const d=t?.isEmpty("top")??!0,f=t?.isEmpty("bottom")??!0,v=d?null:"top";let w,E;f?(w=null,E=n.getRowCount()-1):(w="bottom",E=t?.getPinnedBottomRowCount()??-1),o.setCellRange({rowStartIndex:0,rowStartPinned:v,rowEndIndex:E,rowEndPinned:w})}var RowContainerEventsFeature=class extends BeanStub{constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.beans.touchSvc?.mockRowContextMenu(this),this.editSvc=this.beans.editSvc}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){let e="mousedown";_isEventSupported("pointerdown")?e="pointerdown":_isEventSupported("touchstart")&&(e="touchstart");const t=["dblclick","contextmenu","mouseover","mouseout","click",e];for(const n of t){const o=this.processMouseEvent.bind(this,n);this.addManagedElementListeners(this.element,{[n]:o})}}processMouseEvent(e,t){if(!_isEventFromThisInstance(this.beans,t)||_isStopPropagationForAgGrid(t))return;const{cellCtrl:n,rowCtrl:o}=this.getControlsForEventTarget(t.target);e==="contextmenu"?(n?.column&&n.dispatchCellContextMenuEvent(t),this.beans.contextMenuSvc?.handleContextMenuMouseEvent(t,void 0,o,n)):(n&&n.onMouseEvent(e,t),o&&o.onMouseEvent(e,t))}getControlsForEventTarget(e){const{gos:t}=this;return{cellCtrl:_getCellCtrlForEventTarget(t,e),rowCtrl:_getRowCtrlForEventTarget(t,e)}}processKeyboardEvent(e,t){const{cellCtrl:n,rowCtrl:o}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(n?this.processCellKeyboardEvent(n,e,t):o?.isFullWidth()&&this.processFullWidthRowKeyboardEvent(o,e,t))}processCellKeyboardEvent(e,t,n){const o=this.editSvc?.isEditing(e,{withOpenEditor:!0})??!1;!_isUserSuppressingKeyboardEvent(this.gos,n,e.rowNode,e.column,o)&&t==="keydown"&&(!o&&this.beans.navigation?.handlePageScrollingKey(n)||e.onKeyDown(n),this.doGridOperations(n,o),_isEventFromPrintableCharacter(n)&&e.processCharacter(n)),t==="keydown"&&this.eventSvc.dispatchEvent(e.createEvent(n,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,n){const{rowNode:o}=e,{focusSvc:u,navigation:d}=this.beans,v=u.getFocusedCell()?.column;if(!_isUserSuppressingKeyboardEvent(this.gos,n,o,v,!1)){const E=n.key;if(t==="keydown")switch(E){case KeyCode.PAGE_HOME:case KeyCode.PAGE_END:case KeyCode.PAGE_UP:case KeyCode.PAGE_DOWN:d?.handlePageScrollingKey(n,!0);break;case KeyCode.LEFT:case KeyCode.RIGHT:if(!this.gos.get("embedFullWidthRows"))break;case KeyCode.UP:case KeyCode.DOWN:e.onKeyboardNavigate(n);break;case KeyCode.TAB:e.onTabKeyDown(n);break}}t==="keydown"&&this.eventSvc.dispatchEvent(e.createRowEvent("cellKeyDown",n))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!_isEventFromThisInstance(this.beans,e))return;const n=_normaliseQwertyAzerty(e),{clipboardSvc:o,undoRedo:u}=this.beans;if(n===KeyCode.A)return this.onCtrlAndA(e);if(n===KeyCode.C)return this.onCtrlAndC(o,e);if(n===KeyCode.D)return this.onCtrlAndD(o,e);if(n===KeyCode.V)return this.onCtrlAndV(o,e);if(n===KeyCode.X)return this.onCtrlAndX(o,e);if(n===KeyCode.Y)return this.onCtrlAndY(u);if(n===KeyCode.Z)return this.onCtrlAndZ(u,e)}onCtrlAndA(e){const{beans:{rowModel:t,rangeSvc:n,selectionSvc:o},gos:u}=this;n&&_isCellSelectionEnabled(u)&&!_getCtrlASelectsRows(u)&&t.isRowsToRender()?_selectAllCells(this.beans):o&&o.selectAllRowNodes({source:"keyboardSelectAll",selectAll:_getSelectAll(u)}),e.preventDefault()}onCtrlAndC(e,t){if(!e||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:n}=this.getControlsForEventTarget(t.target);this.editSvc?.isEditing(n,{withOpenEditor:!0})||(t.preventDefault(),e.copyToClipboard())}onCtrlAndX(e,t){if(!e||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:n}=this.getControlsForEventTarget(t.target);this.editSvc?.isEditing(n,{withOpenEditor:!0})||(t.preventDefault(),e.cutToClipboard(void 0,"ui"))}onCtrlAndV(e,t){const{cellCtrl:n}=this.getControlsForEventTarget(t.target);this.editSvc?.isEditing(n,{withOpenEditor:!0})||e&&!this.gos.get("suppressClipboardPaste")&&e.pasteFromClipboard()}onCtrlAndD(e,t){e&&!this.gos.get("suppressClipboardPaste")&&e.copyRangeDown(),t.preventDefault()}onCtrlAndZ(e,t){!this.gos.get("undoRedoCellEditing")||!e||(t.preventDefault(),t.shiftKey?e.redo("ui"):e.undo("ui"))}onCtrlAndY(e){e?.redo("ui")}},getTopRowCtrls=e=>e.topRowCtrls,getStickyTopRowCtrls=e=>e.getStickyTopRowCtrls(),getStickyBottomRowCtrls=e=>e.getStickyBottomRowCtrls(),getBottomRowCtrls=e=>e.bottomRowCtrls,getCentreRowCtrls=e=>e.allRowCtrls,getSpannedTopRowCtrls=e=>e.getCtrls("top"),getSpannedCenterRowCtrls=e=>e.getCtrls("center"),getSpannedBottomRowCtrls=e=>e.getCtrls("bottom"),ContainerCssClasses={center:{type:"center",name:"center-cols",getRowCtrls:getCentreRowCtrls,getSpannedRowCtrls:getSpannedCenterRowCtrls},left:{type:"left",name:"pinned-left-cols",pinnedType:"left",getRowCtrls:getCentreRowCtrls,getSpannedRowCtrls:getSpannedCenterRowCtrls},right:{type:"right",name:"pinned-right-cols",pinnedType:"right",getRowCtrls:getCentreRowCtrls,getSpannedRowCtrls:getSpannedCenterRowCtrls},fullWidth:{type:"fullWidth",name:"full-width",fullWidth:!0,getRowCtrls:getCentreRowCtrls},topCenter:{type:"center",name:"floating-top",getRowCtrls:getTopRowCtrls,getSpannedRowCtrls:getSpannedTopRowCtrls},topLeft:{type:"left",name:"pinned-left-floating",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:getTopRowCtrls,getSpannedRowCtrls:getSpannedTopRowCtrls},topRight:{type:"right",name:"pinned-right-floating",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:getTopRowCtrls,getSpannedRowCtrls:getSpannedTopRowCtrls},topFullWidth:{type:"fullWidth",name:"floating-top-full-width",fullWidth:!0,getRowCtrls:getTopRowCtrls},stickyTopCenter:{type:"center",name:"sticky-top",getRowCtrls:getStickyTopRowCtrls},stickyTopLeft:{type:"left",name:"pinned-left-sticky-top",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:getStickyTopRowCtrls},stickyTopRight:{type:"right",name:"pinned-right-sticky-top",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:getStickyTopRowCtrls},stickyTopFullWidth:{type:"fullWidth",name:"sticky-top-full-width",fullWidth:!0,getRowCtrls:getStickyTopRowCtrls},stickyBottomCenter:{type:"center",name:"sticky-bottom",getRowCtrls:getStickyBottomRowCtrls},stickyBottomLeft:{type:"left",name:"pinned-left-sticky-bottom",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:getStickyBottomRowCtrls},stickyBottomRight:{type:"right",name:"pinned-right-sticky-bottom",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:getStickyBottomRowCtrls},stickyBottomFullWidth:{type:"fullWidth",name:"sticky-bottom-full-width",fullWidth:!0,getRowCtrls:getStickyBottomRowCtrls},bottomCenter:{type:"center",name:"floating-bottom",getRowCtrls:getBottomRowCtrls,getSpannedRowCtrls:getSpannedBottomRowCtrls},bottomLeft:{type:"left",name:"pinned-left-floating-bottom",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:getBottomRowCtrls,getSpannedRowCtrls:getSpannedBottomRowCtrls},bottomRight:{type:"right",name:"pinned-right-floating-bottom",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:getBottomRowCtrls,getSpannedRowCtrls:getSpannedBottomRowCtrls},bottomFullWidth:{type:"fullWidth",name:"floating-bottom-full-width",fullWidth:!0,getRowCtrls:getBottomRowCtrls}};function _getRowViewportClass(e){return`ag-${_getRowContainerOptions(e).name}-viewport`}function _getRowContainerClass(e){const t=_getRowContainerOptions(e);return t.container??`ag-${t.name}-container`}function _getRowSpanContainerClass(e){return`ag-${_getRowContainerOptions(e).name}-spanned-cells-container`}function _getRowContainerOptions(e){return ContainerCssClasses[e]}var allTopNoFW=["topCenter","topLeft","topRight"],allBottomNoFW=["bottomCenter","bottomLeft","bottomRight"],allMiddleNoFW=["center","left","right"],allMiddle=["center","left","right","fullWidth"],allCenter=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],allLeft=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],allRight=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],allStickyTopNoFW=["stickyTopCenter","stickyTopLeft","stickyTopRight"],allStickyBottomNoFW=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],allStickyContainers=[...allStickyTopNoFW,"stickyTopFullWidth",...allStickyBottomNoFW,"stickyBottomFullWidth"],allNoFW=[...allTopNoFW,...allBottomNoFW,...allMiddleNoFW,...allStickyTopNoFW,...allStickyBottomNoFW],RowContainerCtrl=class extends BeanStub{constructor(e){super(),this.name=e,this.visible=!0,this.EMPTY_CTRLS=[],this.options=_getRowContainerOptions(e)}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new ViewportSizeFeature(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.beans.ctrlsSvc.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}setComp(e,t,n,o){this.comp=e,this.eContainer=t,this.eSpannedContainer=n,this.eViewport=o,this.createManagedBean(new RowContainerEventsFeature(this.eViewport??this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();const{pinnedCols:u,rangeSvc:d}=this.beans,f=()=>this.onPinnedWidthChanged();this.forContainers(allLeft,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(u?.createPinnedWidthFeature(!0,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:f})}),this.forContainers(allRight,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(u?.createPinnedWidthFeature(!1,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:f})}),this.forContainers(allMiddle,()=>this.createManagedBean(new SetHeightFeature(this.eContainer,this.name==="center"?o:void 0))),d&&this.forContainers(allNoFW,()=>this.createManagedBean(d.createDragListenerFeature(this.eContainer))),this.forContainers(allCenter,()=>this.createManagedBean(new CenterWidthFeature(v=>this.comp.setContainerWidth(`${v}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}addListeners(){const{spannedRowRenderer:e,gos:t}=this.beans,n=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({displayedColumnsChanged:n,displayedColumnsWidthChanged:n,displayedRowsChanged:o=>this.onDisplayedRowsChanged(o.afterScroll)}),n(),this.onDisplayedRowsChanged(),e&&this.options.getSpannedRowCtrls&&t.get("enableCellSpan")&&this.addManagedListeners(e,{spannedRowsUpdated:()=>{const o=this.options.getSpannedRowCtrls(e);o&&this.comp.setSpannedRowCtrls(o,!1)}})}listenOnDomOrder(){if(allStickyContainers.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}const t=()=>{const n=this.gos.get("ensureDomOrder"),o=_isDomLayout(this.gos,"print");this.comp.setDomOrder(n||o)};this.addManagedPropertyListener("domLayout",t),t()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const{dragSvc:e}=this.beans;if(!e)return;const t=n=>{e.dragging&&n.cancelable&&n.preventDefault()};this.eContainer.addEventListener("touchmove",t,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",t))}onHorizontalViewportChanged(e=!1){const t=this.getCenterWidth(),n=this.getCenterViewportScrollLeft();this.beans.colViewport.setScrollPosition(t,n,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return _getInnerWidth(this.eViewport)}getCenterViewportScrollLeft(){return _getScrollLeft(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=_observeResize(this.beans,this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return _isInDOM(this.eViewport)}getViewportScrollLeft(){return _getScrollLeft(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){const{beans:e,gos:t,eViewport:n}=this,o=t.get("alwaysShowHorizontalScroll"),{ctrlsSvc:u}=e,d=u.getGridBodyCtrl()?.eBodyViewport,f=u.get("fakeHScrollComp")?.getGui(),v=u.get("fakeVScrollComp")?.getGui();return o||_shouldShowHorizontalScroll(n,d,void 0,f,v)}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){_setScrollLeft(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){const t=this.options.getRowCtrls(this.beans.rowRenderer);if(!this.visible||t.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}const n=_isDomLayout(this.gos,"print"),u=this.gos.get("embedFullWidthRows")||n,d=t.filter(f=>{const v=f.isFullWidth();return this.options.fullWidth?!u&&v:u||!v});this.comp.setRowCtrls({rowCtrls:d,useFlushSync:e})}},CSS_CLASS_FORCE_VERTICAL_SCROLL="ag-force-vertical-scroll",CSS_CLASS_CELL_SELECTABLE="ag-selectable",CSS_CLASS_COLUMN_MOVING="ag-column-moving",GridBodyCtrl=class extends BeanStub{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colModel=e.colModel,this.scrollVisibleSvc=e.scrollVisibleSvc,this.pinnedRowModel=e.pinnedRowModel,this.filterManager=e.filterManager,this.rowGroupColsSvc=e.rowGroupColsSvc}setComp(e,t,n,o,u,d,f){this.comp=e,this.eGridBody=t,this.eBodyViewport=n,this.eTop=o,this.eBottom=u,this.eStickyTop=d,this.eStickyBottom=f,this.eCenterColsViewport=n.querySelector(`.${_getRowViewportClass("center")}`),this.eFullWidthContainer=n.querySelector(`.${_getRowContainerClass("fullWidth")}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",v=>this.setCellTextSelection(v.currentValue)),this.createManagedBean(new LayoutFeature(this.comp)),this.scrollFeature=this.createManagedBean(new GridBodyScrollFeature(n)),this.beans.rowDragSvc?.setupRowDrag(n,this),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([o,n,u,d,f]),this.setGridRootRole(),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),this.filterManager?.setupAdvFilterHeaderComp(o),this.ctrlsSvc.register("gridBodyCtrl",this)}addEventListeners(){const e=this.setFloatingHeights.bind(this),t=this.setGridRootRole.bind(this),n=this.toggleRowResizeStyles.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.updateScrollingClasses.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,pinnedRowsChanged:e,headerHeightChanged:this.setStickyTopOffsetTop.bind(this),columnRowGroupChanged:t,columnPivotChanged:t,rowResizeStarted:n,rowResizeEnded:n}),this.addManagedPropertyListener("treeData",t)}toggleRowResizeStyles(e){const t=e.type==="rowResizeStarted";this.eBodyViewport.classList.toggle("ag-prevent-animation",t)}onGridColumnsChanged(){const e=this.beans.colModel.getCols();this.comp.setColumnCount(e.length)}onScrollVisibilityChanged(){const{scrollVisibleSvc:e}=this,t=e.verticalScrollShowing;this.setVerticalScrollPaddingVisible(t),this.setStickyWidth(t),this.setStickyBottomOffsetBottom();const n=t&&e.getScrollbarWidth()||0,o=_isInvisibleScrollbar()?16:0,u=`calc(100% + ${n+o}px)`;_requestAnimationFrame(this.beans,()=>this.comp.setBodyViewportWidth(u)),this.updateScrollingClasses()}setGridRootRole(){const{rowGroupColsSvc:e,colModel:t,gos:n}=this;let o=n.get("treeData");if(!o){const u=t.isPivotMode();o=(e?e.columns.length:0)>=(u?2:1)}this.comp.setGridRootRole(o?"treegrid":"grid")}addFocusListeners(e){for(const t of e)this.addManagedElementListeners(t,{focusin:n=>{const{target:o}=n,u=_isElementChildOfClass(o,"ag-root",t);t.classList.toggle("ag-has-focus",!u)},focusout:n=>{const{target:o,relatedTarget:u}=n,d=t.contains(u),f=_isElementChildOfClass(u,"ag-root",t);_isElementChildOfClass(o,"ag-root",t)||(!d||f)&&t.classList.remove("ag-has-focus")}})}setColumnMovingCss(e){this.comp.setColumnMovingCss(CSS_CLASS_COLUMN_MOVING,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(CSS_CLASS_CELL_SELECTABLE,e)}updateScrollingClasses(){const{eGridBody:{classList:e},scrollVisibleSvc:t}=this;e.toggle("ag-body-vertical-content-no-gap",!t.verticalScrollGap),e.toggle("ag-body-horizontal-content-no-gap",!t.horizontalScrollGap)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){this.beans.editSvc?.addStopEditingWhenGridLosesFocus([this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom])}updateRowCount(){const e=(this.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0)+(this.filterManager?.getHeaderRowCount()??0),{rowModel:t}=this.beans,n=t.isLastRowIndexKnown()?t.getRowCount():-1,o=n===-1?-1:e+n;this.comp.setRowCount(o)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const{gos:e,comp:t,ctrlsSvc:n}=this,o=e.get("alwaysShowVerticalScroll"),u=o?CSS_CLASS_FORCE_VERTICAL_SCROLL:null,d=_isDomLayout(e,"normal");t.setAlwaysVerticalScrollClass(u,o);const f=n.get("center")?.eViewport,v=n.get("fakeHScrollComp")?.getGui(),w=n.get("fakeVScrollComp")?.getGui();return o||d&&_shouldShowVerticalScroll(this.eBodyViewport,f,void 0,w,v)}setupRowAnimationCssClass(){const{rowContainerHeight:e,environment:t}=this.beans;let n=t.sizesMeasured;const o=()=>{const u=n&&_isAnimateRows(this.gos)&&!e.stretching,d=u?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(d,u)};o(),this.addManagedEventListeners({heightScaleChanged:o}),this.addManagedPropertyListener("animateRows",o),this.addManagedEventListeners({stylesChanged:()=>{!n&&t.sizesMeasured&&(n=!0,o())}})}addBodyViewportListener(){const{eBodyViewport:e,eStickyTop:t,eStickyBottom:n,eTop:o,eBottom:u,beans:{popupSvc:d,touchSvc:f}}=this,v=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(e,{contextmenu:v}),f?.mockBodyContextMenu(this,v),this.addManagedElementListeners(e,{wheel:this.onBodyViewportWheel.bind(this,d)});const w=this.onStickyWheel.bind(this);for(const C of[t,n,o,u])this.addManagedElementListeners(C,{wheel:w});const E=this.onHorizontalWheel.bind(this);for(const C of["left","right","topLeft","topRight","bottomLeft","bottomRight"])this.addManagedElementListeners(this.ctrlsSvc.get(C).eContainer,{wheel:E});this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){const{deltaX:t,deltaY:n,shiftKey:o}=e;(o||Math.abs(t)>Math.abs(n))&&_isEventFromThisInstance(this.beans,e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){const{deltaY:t}=e;this.scrollVertically(t)>0&&e.preventDefault()}onHorizontalWheel(e){const{deltaX:t,deltaY:n,shiftKey:o}=e;(o||Math.abs(t)>Math.abs(n))&&this.scrollGridBodyToMatchEvent(e)}scrollGridBodyToMatchEvent(e){const{deltaX:t,deltaY:n}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||n})}onBodyViewportContextMenu(e,t,n){if(!e&&!n)return;this.gos.get("preventDefaultOnContextMenu")&&(e||n).preventDefault();const{target:o}=e||t;(o===this.eBodyViewport||o===this.ctrlsSvc.get("center").eViewport)&&this.beans.contextMenuSvc?.showContextMenu({mouseEvent:e,touchEvent:n,value:null,anchorToElement:this.eGridBody,source:"ui"})}onBodyViewportWheel(e,t){this.gos.get("suppressScrollWhenPopupsAreOpen")&&e?.hasAnchoredPopup()&&t.preventDefault()}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.scrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}setFloatingHeights(){const{pinnedRowModel:e,beans:{environment:t}}=this,n=e?.getPinnedTopTotalHeight(),o=e?.getPinnedBottomTotalHeight(),u=t.getPinnedRowBorderWidth(),d=t.getRowBorderWidth(),f=u-d,v=n?f+n:0,w=o?f+o:0;this.comp.setTopHeight(v),this.comp.setBottomHeight(w),this.comp.setTopInvisible(v<=0),this.comp.setBottomInvisible(w<=0),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}setStickyWidth(e){if(!e)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{const t=this.scrollVisibleSvc.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${t}px)`)}}setStickyTopOffsetTop(){const t=this.ctrlsSvc.get("gridHeaderCtrl").headerHeight+(this.filterManager?.getHeaderHeight()??0),n=this.pinnedRowModel?.getPinnedTopTotalHeight()??0;let o=0;t>0&&(o+=t),n>0&&(o+=n),o>0&&(o+=1),this.comp.setStickyTopTop(`${o}px`)}setStickyBottomOffsetBottom(){const{pinnedRowModel:e,scrollVisibleSvc:t,comp:n}=this,o=e?.getPinnedBottomTotalHeight()??0,d=t.horizontalScrollShowing&&t.getScrollbarWidth()||0,f=o+d;n.setStickyBottomBottom(`${f}px`)}},TabGuardClassNames={TAB_GUARD:"ag-tab-guard",TAB_GUARD_TOP:"ag-tab-guard-top",TAB_GUARD_BOTTOM:"ag-tab-guard-bottom"},AgTabGuardCtrl=class extends AgBeanStub{constructor(e,t){super(),this.stopPropagationCallbacks=t,this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp:n,eTopGuard:o,eBottomGuard:u,focusTrapActive:d,forceFocusOutWhenTabGuardsAreEmpty:f,isFocusableContainer:v,focusInnerElement:w,onFocusIn:E,onFocusOut:C,shouldStopEventPropagation:_,onTabKeyDown:D,handleKeyDown:O,isEmpty:M,eFocusableElement:N}=e;this.comp=n,this.eTopGuard=o,this.eBottomGuard=u,this.providedFocusInnerElement=w,this.eFocusableElement=N,this.focusTrapActive=!!d,this.forceFocusOutWhenTabGuardsAreEmpty=!!f,this.isFocusableContainer=!!v,this.providedFocusIn=E,this.providedFocusOut=C,this.providedShouldStopEventPropagation=_,this.providedOnTabKeyDown=D,this.providedHandleKeyDown=O,this.providedIsEmpty=M}postConstruct(){this.createManagedBean(new AgManagedFocusFeature(this.eFocusableElement,this.stopPropagationCallbacks,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards();for(const e of[this.eTopGuard,this.eBottomGuard])this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)})}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&(this.providedIsEmpty?this.providedIsEmpty():_findFocusableElements(this.eFocusableElement,".ag-tab-guard").length===0)){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;const t=e.target===this.eBottomGuard;!(this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t))&&this.forceFocusOutWhenTabGuardsAreEmpty&&this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}findNextElementOutsideAndFocus(e){const t=_getDocument(this.beans),n=_findFocusableElements(t.body,null,!0),o=n.indexOf(e?this.eTopGuard:this.eBottomGuard);if(o===-1)return;let u,d;e?(u=0,d=o):(u=o+1,d=n.length);const f=n.slice(u,d),v=this.gos.get("tabIndex");f.sort((w,E)=>{const C=Number.parseInt(w.getAttribute("tabindex")||"0"),_=Number.parseInt(E.getAttribute("tabindex")||"0");return _===v?1:C===v?-1:C===0?1:_===0?-1:C-_}),f[e?f.length-1:0]?.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const n=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),n&&(n.focus(),e.preventDefault())}focusInnerElement(e=!1){const t=_findFocusableElements(this.eFocusableElement);return this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(-1,1)),t.length?(t[e?t.length-1:0].focus({preventScroll:!0}),!0):!1}getNextFocusableElement(e){return _findNextFocusableElement(this.beans,this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},GridCtrl=class extends BeanStub{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}setComp(e,t,n){this.view=e,this.eGridHostDiv=t,this.eGui=n,this.eGui.setAttribute("grid-id",this.beans.context.getId());const{dragAndDrop:o,ctrlsSvc:u}=this.beans;o?.registerGridDropTarget(()=>this.eGui,this),this.createManagedBean(new LayoutFeature(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr");const d=_observeResize(this.beans,this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>d()),u.register("gridCtrl",this)}isDetailGrid(){return _findTabbableParent(this.getGui())?.getAttribute("row-id")?.startsWith("detail")||!1}getOptionalSelectors(){const e=this.beans;return{paginationSelector:e.pagination?.getPaginationSelector(),gridHeaderDropZonesSelector:e.registry?.getSelector("AG-GRID-HEADER-DROP-ZONES"),sideBarSelector:e.sideBar?.getSelector(),statusBarSelector:e.registry?.getSelector("AG-STATUS-BAR"),watermarkSelector:e.licenseManager?.getWatermarkSelector()}}onGridSizeChanged(){this.eventSvc.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){const{view:t}=this;if(e===!1)t.setCursor(null);else{const n=e===1?"ew-resize":"ns-resize";t.setCursor(n)}}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.getFocusableContainers(),{indexWithFocus:n,nextIndex:o}=this.getNextFocusableIndex(t,e);if(o<0||o>=t.length)return!1;if(o===0){if(n>0){const{visibleCols:u,focusSvc:d}=this.beans,f=u.allCols,v=_last(f);if(d.focusGridView({column:v,backwards:!0}))return!0}return!1}return this.focusContainer(t[o],e)}focusInnerElement(e){if(this.gos.getCallback("focusGridInnerElement")?.({fromBottom:!!e}))return!0;const n=this.getFocusableContainers(),{focusSvc:o,visibleCols:u}=this.beans,d=u.allCols;if(e){if(n.length>1)return this.focusContainer(_last(n),e);const f=_last(d);if(o.focusGridView({column:f,backwards:e}))return!0}if(this.gos.get("headerHeight")===0||_isHeaderFocusSuppressed(this.beans)){if(o.focusGridView({column:d[0],backwards:e}))return!0;for(let f=1;f<n.length;f++)if(_focusInto(n[f].getGui(),e))return!0;return!1}return o.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){const t=this.view.getFocusableContainers(),{nextIndex:n}=this.getNextFocusableIndex(t,e),o=t[n];o?this.focusContainer(o):this.forceFocusOutOfContainer(e)}isFocusable(){const e=this.beans;return!_isCellFocusSuppressed(e)||!_isHeaderFocusSuppressed(e)||!!e.sideBar?.comp?.isDisplayed()}getNextFocusableIndex(e,t){const n=_getActiveDomElement(this.beans),o=e.findIndex(d=>d.getGui().contains(n)),u=o+(t?-1:1);return{indexWithFocus:o,nextIndex:u}}focusContainer(e,t){e.setAllowFocus?.(!0);const n=_focusInto(e.getGui(),t,!1,!0);return e.setAllowFocus?.(!1),n}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},mod=(e,t)=>{for(const n of Object.keys(t))t[n]=e;return t},gridApiFunctionsMap={dispatchEvent:"CommunityCore",...mod("CommunityCore",{destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,isModuleRegistered:0}),...mod("GridState",{getState:0,setState:0}),...mod("SharedRowSelection",{setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0}),...mod("RowApi",{redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRowIndex:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0}),...mod("ScrollApi",{getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0}),...mod("KeyboardNavigation",{getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0}),...mod("EventApi",{addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0}),...mod("ValueCache",{expireValueCache:0}),...mod("CellApi",{getCellValue:0}),...mod("SharedMenu",{showColumnMenu:0,hidePopupMenu:0}),...mod("Sort",{onSortChanged:0}),...mod("PinnedRow",{getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,forEachPinnedRow:0}),...mod("Overlay",{showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0}),...mod("RenderApi",{setGridAriaProperty:0,refreshCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0}),...mod("HighlightChanges",{flashCells:0}),...mod("RowDrag",{addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getRowDropPositionIndicator:0,setRowDropPositionIndicator:0}),...mod("ColumnApi",{getColumnDefs:0,getColumnDef:0,getDisplayNameForColumn:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnsVisible:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0}),...mod("ColumnAutoSize",{sizeColumnsToFit:0,autoSizeColumns:0,autoSizeAllColumns:0}),...mod("ColumnGroup",{setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumnGroup:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0}),...mod("ColumnMove",{moveColumnByIndex:0,moveColumns:0}),...mod("ColumnResize",{setColumnWidths:0}),...mod("ColumnHover",{isColumnHovered:0}),...mod("EditCore",{getCellEditorInstances:0,getEditingCells:0,getEditRowValues:0,stopEditing:0,startEditingCell:0,isEditing:0,validateEdit:0}),...mod("BatchEdit",{startBatchEdit:0,cancelBatchEdit:0,commitBatchEdit:0,isBatchEditing:0}),...mod("UndoRedoEdit",{undoCellEditing:0,redoCellEditing:0,getCurrentUndoSize:0,getCurrentRedoSize:0}),...mod("FilterCore",{isAnyFilterPresent:0,onFilterChanged:0}),...mod("ColumnFilter",{isColumnFilterPresent:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,hideColumnFilter:0,getColumnFilterHandler:0,doFilterAction:0}),...mod("QuickFilter",{isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0}),...mod("Find",{findGetActiveMatch:0,findGetTotalMatches:0,findGoTo:0,findNext:0,findPrevious:0,findGetNumMatches:0,findGetParts:0,findClearActive:0,findRefresh:0}),...mod("Pagination",{paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0}),...mod("CsrmSsrmSharedApi",{expandAll:0,collapseAll:0}),...mod("SsrmInfiniteSharedApi",{setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0}),...mod("ClientSideRowModelApi",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0,onRowHeightChanged:0,resetRowHeights:0}),...mod("CsvExport",{getDataAsCsv:0,exportDataAsCsv:0}),...mod("InfiniteRowModel",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0}),...mod("AdvancedFilter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0}),...mod("IntegratedCharts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0}),...mod("Clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0}),...mod("ExcelExport",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0}),...mod("SharedMasterDetail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0}),...mod("ContextMenu",{showContextMenu:0}),...mod("ColumnMenu",{showColumnChooser:0,hideColumnChooser:0}),...mod("CellSelection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0}),...mod("SharedRowGrouping",{setRowGroupColumns:0,removeRowGroupColumns:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0}),...mod("SharedAggregation",{addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0}),...mod("SharedPivot",{isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumns:0,addValueColumns:0,setPivotColumns:0,removePivotColumns:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0}),...mod("ServerSideRowModelApi",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0,onRowHeightChanged:0,resetRowHeights:0}),...mod("SideBar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0}),...mod("StatusBar",{getStatusPanel:0}),...mod("AiToolkit",{getStructuredSchema:0})},defaultFns={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},dispatchEvent=(e,t)=>e.eventSvc.dispatchEvent(t),GridApiClass=class{};Reflect.defineProperty(GridApiClass,"name",{value:"GridApi"});var ApiFunctionService=class extends BeanStub{constructor(){super(),this.beanName="apiFunctionSvc",this.api=new GridApiClass,this.fns={...defaultFns,dispatchEvent},this.preDestroyLink="";const{api:e}=this;for(const t of Object.keys(gridApiFunctionsMap))e[t]=this.makeApi(t)[t]}postConstruct(){this.preDestroyLink=this.beans.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){const{fns:n,beans:o}=this;n!==defaultFns&&(n[e]=o?.validation?.validateApiFunction(e,t)??t)}makeApi(e){return{[e]:(...t)=>{const{beans:n,fns:{[e]:o}}=this;return o?o(n,...t):this.apiNotFound(e)}}}apiNotFound(e){const{beans:t,gos:n,preDestroyLink:o}=this;if(!t)_warn(26,{fnName:e,preDestroyLink:o});else{const u=gridApiFunctionsMap[e];n.assertModuleRegistered(u,`api.${e}`)&&_warn(27,{fnName:e,module:u})}}destroy(){super.destroy(),this.fns=defaultFns,this.beans=null}};function getGridId(e){return e.context.getId()}function destroy(e){e.gridDestroySvc.destroy()}function isDestroyed(e){return e.gridDestroySvc.destroyCalled}function getGridOption(e,t){return e.gos.get(t)}function setGridOption(e,t,n){updateGridOptions(e,{[t]:n})}function updateGridOptions(e,t){e.gos.updateGridOptions({options:t})}function isModuleRegistered(e,t){const n=t.replace(/Module$/,"");return e.gos.isModuleRegistered(n)}var tryPointerCapture=(e,t)=>{if(t!=null&&e?.setPointerCapture)try{return e.setPointerCapture(t),e.hasPointerCapture(t)}catch{}return!1},capturePointer=(e,t)=>{if(typeof PointerEvent>"u"||!(t instanceof PointerEvent))return null;const n=t.pointerId;if(!tryPointerCapture(e,n))return null;const o={eElement:e,pointerId:n,onLost(u){pointerLostHandler(o,u)}};return e.addEventListener("lostpointercapture",o.onLost),o},releasePointerCapture=e=>{if(!e)return;removeLostHandler(e);const{eElement:t,pointerId:n}=e;if(t){try{t.releasePointerCapture(n)}catch{}e.eElement=null}},removeLostHandler=e=>{const{eElement:t,onLost:n}=e;t&&n&&(t.removeEventListener("lostpointercapture",n),e.onLost=null)},pointerLostHandler=(e,t)=>{removeLostHandler(e);const{eElement:n,pointerId:o}=e;n&&t.pointerId===o&&tryPointerCapture(n,o)},activePointerDrags,handledDragEvents,PASSIVE_TRUE={passive:!0},PASSIVE_FALSE={passive:!1},addHandledDragEvent=e=>{if(!handledDragEvents)handledDragEvents=new WeakSet;else if(handledDragEvents.has(e))return!1;return handledDragEvents.add(e),!0},BaseDragService=class extends AgBeanStub{constructor(){super(...arguments),this.beanName="dragSvc",this.dragging=!1,this.drag=null,this.dragSources=[]}get startTarget(){return this.drag?.start.target??null}isPointer(){return!!activePointerDrags?.has(_getRootNode(this.beans))}hasPointerCapture(){const e=this.drag?.pointerCapture;return!!(e&&this.beans.eRootDiv.hasPointerCapture?.(e.pointerId))}destroy(){this.drag&&this.cancelDrag();const e=this.dragSources;for(const t of e)destroyDragSourceEntry(t);e.length=0,super.destroy()}removeDragSource(e){const t=this.dragSources;for(let n=0,o=t.length;n<o;++n){const u=t[n];if(u.params===e){t.splice(n,1),destroyDragSourceEntry(u);break}}}addDragSource(e){if(!this.isAlive())return;const{eElement:t,includeTouch:n}=e,o=[];let u;if(n){const E=t.style;E&&(u=E.touchAction,E.touchAction="none")}const d={handlers:o,params:e,oldTouchAction:u};this.dragSources.push(d),addTempEventHandlers(o,[t,"pointerdown",E=>this.onPointerDown(e,E),PASSIVE_FALSE],[t,"mousedown",E=>this.onMouseDown(e,E)]);const w=this.gos.get("suppressTouch");n&&!w&&addTempEventHandlers(o,[t,"touchstart",C=>this.onTouchStart(e,C),PASSIVE_FALSE])}cancelDrag(e){const t=this.drag;e??(e=t?.eElement),e&&this.eventSvc.dispatchEvent({type:"dragCancelled",target:e}),t?.params.onDragCancel?.(),this.destroyDrag()}shouldPreventMouseEvent(e){const t=e.type;return(t==="mousemove"||t==="pointermove")&&e.cancelable&&_isEventFromThisInstance(this.beans,e)&&!_isFocusableFormField(getEventTargetElement(e))}initDrag(e,...t){this.drag=e;const n=this.beans,o=v=>this.onScroll(v),u=v=>this.onKeyDown(v),d=_getRootNode(n),f=_getDocument(n);addTempEventHandlers(e.handlers,[d,"contextmenu",preventEventDefault],[d,"keydown",u],[f,"scroll",o,{capture:!0}],[f.defaultView||window,"scroll",o],...t)}destroyDrag(){this.dragging=!1;const e=this.drag;if(e){const t=e.rootEl;activePointerDrags?.get(t)===e&&activePointerDrags.delete(t),this.drag=null,releasePointerCapture(e.pointerCapture),clearTempEventHandlers(e.handlers)}}onPointerDown(e,t){if(this.isPointer())return;const n=this.beans;if(handledDragEvents?.has(t))return;const o=t.pointerType;if(o==="touch"&&(n.gos.get("suppressTouch")||!e.includeTouch||(e.stopPropagationForTouch&&t.stopPropagation(),_isFocusableFormField(getEventTargetElement(t))))||!t.isPrimary||o==="mouse"&&t.button!==0)return;this.destroyDrag();const u=_getRootNode(n),d=e.eElement,f=t.pointerId,v=new Dragging(u,e,t,f);activePointerDrags??(activePointerDrags=new WeakMap),activePointerDrags.set(u,v);const w=D=>{D.pointerId===f&&this.onMouseOrPointerMove(D)},E=D=>{D.pointerId===f&&this.onMouseOrPointerUp(D)},C=D=>{D.pointerId===f&&addHandledDragEvent(D)&&this.cancelDrag()},_=D=>this.draggingPreventDefault(D);this.initDrag(v,[u,"pointerup",E],[u,"pointercancel",C],[u,"pointermove",w,PASSIVE_FALSE],[u,"touchmove",_,PASSIVE_FALSE],[d,"mousemove",_,PASSIVE_FALSE]),e.dragStartPixels===0?this.onMouseOrPointerMove(t):addHandledDragEvent(t)}onTouchStart(e,t){if(this.gos.get("suppressTouch")||!e.includeTouch||!addHandledDragEvent(t)||_isFocusableFormField(getEventTargetElement(t)))return;if(e.stopPropagationForTouch&&t.stopPropagation(),this.isPointer()){this.dragging&&preventEventDefault(t);return}this.destroyDrag();const o=this.beans,u=_getRootNode(o),d=new Dragging(u,e,t.touches[0]),f=D=>this.onTouchMove(D),v=D=>this.onTouchUp(D),w=D=>this.onTouchCancel(D),E=D=>this.draggingPreventDefault(D),C=_getRootNode(o),_=t.target??e.eElement;this.initDrag(d,[_,"touchmove",f,PASSIVE_TRUE],[_,"touchend",v,PASSIVE_TRUE],[_,"touchcancel",w,PASSIVE_TRUE],[C,"touchmove",E,PASSIVE_FALSE],[C,"touchend",v,PASSIVE_FALSE],[C,"touchcancel",w,PASSIVE_FALSE]),e.dragStartPixels===0&&this.onMove(d.start)}draggingPreventDefault(e){this.dragging&&preventEventDefault(e)}onMouseDown(e,t){if(t.button!==0||handledDragEvents?.has(t)||this.isPointer())return;const n=this.beans;this.destroyDrag();const o=new Dragging(_getRootNode(n),e,t),u=v=>this.onMouseOrPointerMove(v),d=v=>this.onMouseOrPointerUp(v),f=_getRootNode(n);this.initDrag(o,[f,"mousemove",u],[f,"mouseup",d]),e.dragStartPixels===0?this.onMouseOrPointerMove(t):addHandledDragEvent(t)}onScroll(e){if(!addHandledDragEvent(e))return;const t=this.drag,n=t?.lastDrag;n&&this.dragging&&t.params?.onDragging?.(n)}onMouseOrPointerMove(e){addHandledDragEvent(e)&&(_isBrowserSafari()&&_getDocument(this.beans).getSelection()?.removeAllRanges(),this.shouldPreventMouseEvent(e)&&preventEventDefault(e),this.onMove(e))}onTouchCancel(e){const t=this.drag;!t||!addHandledDragEvent(e)||_getFirstActiveTouch(t.start,e.changedTouches)&&this.cancelDrag()}onTouchMove(e){const t=this.drag;if(!t||!addHandledDragEvent(e))return;const n=_getFirstActiveTouch(t.start,e.touches);n&&(this.onMove(n),this.draggingPreventDefault(e))}onMove(e){const t=this.drag;if(!t)return;t.lastDrag=e;const n=t.params;if(!this.dragging){const o=t.start,d=n.dragStartPixels??4;if(_areEventsNear(e,o,d)||(this.dragging=!0,n.capturePointer&&(t.pointerCapture=capturePointer(this.beans.eRootDiv,e)),this.eventSvc.dispatchEvent({type:"dragStarted",target:n.eElement}),n.onDragStart?.(o),this.drag!==t)||(n.onDragging?.(o),this.drag!==t))return}n.onDragging?.(e)}onTouchUp(e){const t=this.drag;t&&addHandledDragEvent(e)&&this.onUp(_getFirstActiveTouch(t.start,e.changedTouches))}onMouseOrPointerUp(e){addHandledDragEvent(e)&&this.onUp(e)}onUp(e){const t=this.drag;t&&(e||(e=t.lastDrag),e&&this.dragging&&(this.dragging=!1,t.params.onDragStop?.(e),this.eventSvc.dispatchEvent({type:"dragStopped",target:t.params.eElement})),this.destroyDrag())}onKeyDown(e){e.key===KeyCode.ESCAPE&&this.cancelDrag()}},destroyDragSourceEntry=e=>{clearTempEventHandlers(e.handlers);const t=e.oldTouchAction;if(t!=null){const n=e.params.eElement.style;n&&(n.touchAction=t)}},Dragging=class{constructor(e,t,n,o=null){this.rootEl=e,this.params=t,this.start=n,this.pointerId=o,this.handlers=[],this.lastDrag=null,this.pointerCapture=null,this.eElement=t.eElement}},getEventTargetElement=e=>{const t=e.target;return t instanceof Element?t:null},DragService=class extends BaseDragService{shouldPreventMouseEvent(e){return this.gos.get("enableCellTextSelection")&&super.shouldPreventMouseEvent(e)}},HorizontalResizeService=class extends BeanStub{constructor(){super(...arguments),this.beanName="horizontalResizeSvc"}addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0},{dragSvc:n}=this.beans;return n.addDragSource(t),()=>n.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const n=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(n)}setResizeIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(1),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},_csrmFirstLeaf=e=>{let t=e.childrenAfterGroup;for(;t?.length;){const n=t[0];if(n.sourceRowIndex>=0)return n;t=n.childrenAfterGroup}};function _getCellPositionForEvent(e,t){return _getCellCtrlForEventTarget(e,t.target)?.getFocusedCellPosition()??null}var ChangedPath=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}depthFirstSearchChangedPath(e,t){const{rowNode:n,children:o}=e;if(o)for(let u=0;u<o.length;++u)this.depthFirstSearchChangedPath(o[u],t);t(n)}depthFirstSearchEverything(e,t,n){const o=e.childrenAfterGroup;if(o)for(let u=0,d=o.length;u<d;++u){const f=o[u];f.childrenAfterGroup?this.depthFirstSearchEverything(f,t,n):n&&t(f)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,n=!1){this.active&&!n?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,n=0;for(;!this.mapToItems[t.id];){const o={rowNode:t,children:null};this.mapToItems[t.id]=o,n++,t=t.parent}return n}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let n=e;for(;n;){this.nodeIdsToColumns[n.id]||(this.nodeIdsToColumns[n.id]={});for(const o of t)this.nodeIdsToColumns[n.id][o.getId()]=!0;n=n.parent}}linkPathItems(e,t){let n=e;for(let o=0;o<t;o++){const u=this.mapToItems[n.id],d=this.mapToItems[n.parent.id];d.children||(d.children=[]),d.children.push(u),n=n.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const n=this.createPathItems(e);this.linkPathItems(e,n),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const n=this.nodeIdsToColumns[e.id];return t.filter(u=>n[u.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const n=this.nodeIdsToColumns[e.id];return t.filter(u=>!n[u.getId()])}},DragModule={moduleName:"Drag",version:VERSION,beans:[DragService]},SharedDragAndDropModule={moduleName:"SharedDragAndDrop",version:VERSION,beans:[DragAndDropService],dependsOn:[DragModule],userComponents:{agDragAndDropImage:DragAndDropImageComponent},icons:{columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",rowDrag:"grip"}},HorizontalResizeModule={moduleName:"HorizontalResize",version:VERSION,beans:[HorizontalResizeService],dependsOn:[DragModule]},columnMovingCSS=":where(.ag-ltr) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:left .2s}.ag-header-group-cell{transition:left .2s,width .2s}}:where(.ag-rtl) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:right .2s}.ag-header-group-cell{transition:right .2s,width .2s}}",ColumnAnimationService=class extends BeanStub{constructor(){super(...arguments),this.beanName="colAnimation",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){if(this.active)return;const{gos:e}=this;e.get("suppressColumnMoveAnimation")||e.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount,{gridBodyCtrl:t}=this;t.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&t.setColumnMovingCss(!1)})}flush(e,t){const{executeNextFuncs:n,executeLaterFuncs:o}=this;if(n.length===0&&o.length===0){e(),t();return}const u=d=>{for(;d.length;){const f=d.pop();f&&f()}};this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e(),u(n)},0),window.setTimeout(()=>{t(),u(o)},200)})}};function moveColumnByIndex(e,t,n){e.colMoves?.moveColumnByIndex(t,n,"api")}function moveColumns(e,t,n){e.colMoves?.moveColumns(t,n,"api")}var BodyDropPivotTarget=class extends BeanStub{constructor(e){super(),this.pinned=e,this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[]}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const t=e.dragItem.columns;if(t)for(const n of t)n.isPrimary()&&(n.isAnyFunctionActive()||(n.isAllowValue()?this.columnsToAggregate.push(n):n.isAllowRowGroup()?this.columnsToGroup.push(n):n.isAllowPivot()&&this.columnsToPivot.push(n)))}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){const{valueColsSvc:t,rowGroupColsSvc:n,pivotColsSvc:o}=this.beans;this.columnsToAggregate.length>0&&t?.addColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&n?.addColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&o?.addColumns(this.columnsToPivot,"toolPanelDragAndDrop")}onDragCancel(){this.clearColumnsList()}};function sortColsLikeCols(e,t){!t||t.length<=1||t.filter(o=>e.indexOf(o)<0).length>0||t.sort((o,u)=>{const d=e.indexOf(o),f=e.indexOf(u);return d-f})}function getColsToMove(e){const t=[...e];for(const n of e){let o=null,u=n.getParent();for(;u!=null&&u.getDisplayedLeafColumns().length===1;)o=u,u=u.getParent();if(o!=null){const f=!!o.getColGroupDef()?.marryChildren?o.getProvidedColumnGroup().getLeafColumns():o.getLeafColumns();for(const v of f)t.includes(v)||t.push(v)}}return t}function getLowestFragMove(e,t,n,o){const u=o.allCols;let d=null,f=null;for(let v=0;v<e.length;v++){const w=e[v],E=n.getProposedColumnOrder(t,w);if(!n.doesOrderPassRules(E))continue;const C=E.filter(D=>u.includes(D));if(f===null)f=C;else if(!_areEqual(C,f))break;const _=groupFragCount(E);(d===null||_<d.fragCount)&&(d={move:w,fragCount:_})}return d}function getBestColumnMoveIndexFromXPosition(e){const{isFromHeader:t,fromLeft:n,xPosition:o,fromEnter:u,fakeEvent:d,pinned:f,gos:v,colModel:w,colMoves:E,visibleCols:C}=e;let{allMovingColumns:_}=e;t&&(_=getColsToMove(_));const D=_.slice();sortColsLikeCols(w.getCols(),D);const O=calculateValidMoves({movingCols:D,draggingRight:n,xPosition:o,pinned:f,gos:v,colModel:w,visibleCols:C}),M=calculateOldIndex(D,w);if(O.length===0)return;const N=O[0];if(M!==null&&(t||!u)&&!d&&(!n&&N>=M||n&&N<=M))return;const B=getLowestFragMove(O,D,E,C);if(!B)return;const V=B.move;if(!(V>w.getCols().length-D.length))return{columns:D,toIndex:V}}function attemptMoveColumns(e){const{columns:t,toIndex:n}=getBestColumnMoveIndexFromXPosition(e)||{},{finished:o,colMoves:u}=e;return!t||n==null?null:(u.moveColumns(t,n,"uiColumnMoved",o),o?null:{columns:t,toIndex:n})}function calculateOldIndex(e,t){const n=t.getCols(),o=e.map(w=>n.indexOf(w)).sort((w,E)=>w-E),u=o[0];return _last(o)-u!==o.length-1?null:u}function groupFragCount(e){function t(o){const u=[];let d=o.getOriginalParent();for(;d!=null;)u.push(d),d=d.getOriginalParent();return u}let n=0;for(let o=0;o<e.length-1;o++){let u=t(e[o]),d=t(e[o+1]);[u,d]=u.length>d.length?[u,d]:[d,u];for(const f of u)d.indexOf(f)===-1&&n++}return n}function getDisplayedColumns(e,t){switch(t){case"left":return e.leftCols;case"right":return e.rightCols;default:return e.centerCols}}function calculateValidMoves(e){const{movingCols:t,draggingRight:n,xPosition:o,pinned:u,gos:d,colModel:f,visibleCols:v}=e;if(d.get("suppressMovableColumns")||t.some(j=>j.getColDef().suppressMovable))return[];const E=getDisplayedColumns(v,u),C=f.getCols(),_=E.filter(j=>t.includes(j)),D=E.filter(j=>!t.includes(j)),O=C.filter(j=>!t.includes(j));let M=0,N=o;if(n){let j=0;for(const q of _)j+=q.getActualWidth();N-=j}if(N>0){for(let j=0;j<D.length;j++){const q=D[j];if(N-=q.getActualWidth(),N<0)break;M++}n&&M++}let I;if(M>0){const j=D[M-1];I=O.indexOf(j)+1}else I=O.indexOf(D[0]),I===-1&&(I=0);const B=[I],V=(j,q)=>j-q;if(n){let j=I+1;const q=C.length-1;for(;j<=q;)B.push(j),j++;B.sort(V)}else{let j=I;const q=C.length-1;let z=C[j];for(;j<=q&&E.indexOf(z)<0;)j++,B.push(j),z=C[j];j=I-1;const $=0;for(;j>=$;)B.push(j),j--;B.sort(V).reverse()}return B}function normaliseX(e){const{pinned:t,fromKeyboard:n,gos:o,ctrlsSvc:u,useHeaderRow:d,skipScrollPadding:f}=e;let v=u.getHeaderRowContainerCtrl(t)?.eViewport,{x:w}=e;return v?(n&&(w-=v.getBoundingClientRect().left),o.get("enableRtl")&&(d&&(v=v.querySelector(".ag-header-row")),w=v.clientWidth-w),t==null&&!f&&(w+=u.get("center").getCenterViewportScrollLeft()),w):0}function setColumnsMoving(e,t){for(const n of e)n.moving=t,n.dispatchColEvent("movingChanged","uiColumnMoved")}var MOVE_FAIL_THRESHOLD=7,SCROLL_MOVE_WIDTH=100,SCROLL_GAP_NEEDED_BEFORE_MOVE=SCROLL_MOVE_WIDTH/2,SCROLL_ACCELERATION_RATE=5,SCROLL_TIME_INTERVAL=100,MoveColumnFeature=class extends BeanStub{constructor(e){super(),this.pinned=e,this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.isCenterContainer=!_exists(e)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){const{pinned:e,lastDraggingEvent:t}=this,{dragItem:n}=t||{},o=n?.columns??[];for(const u of o){const d=u.getPinned();if(u.getColDef().lockPinned){if(d==e)return"move";continue}const f=n?.containerType;if(f===e||!e)return"move";if(e&&(!d||f!==e))return"pinned"}return"notAllowed"}onDragEnter(e){const t=e.dragItem,n=t.columns;if(e.dragSource.type===0)this.setColumnsVisible(n,!0,"uiColumnDragged");else{const u=t.visibleState,d=(n||[]).filter(f=>u[f.getId()]&&!f.isVisible());this.setColumnsVisible(d,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(n,this.pinned),this.onDragging(e,!0,!0)}onDragging(e=this.lastDraggingEvent,t=!1,n=!1,o=!1){const{gos:u,ctrlsSvc:d}=this.beans,f=u.get("suppressMoveWhenColumnDragging");if(o&&!f){this.finishColumnMoving();return}if(this.lastDraggingEvent=e,!e||!o&&_missing(e.hDirection))return;const v=normaliseX({x:e.x,pinned:this.pinned,gos:u,ctrlsSvc:d});t||this.checkCenterForScrolling(v),f?this.handleColumnDragWhileSuppressingMovement(e,t,n,v,o):this.handleColumnDragWhileAllowingMovement(e,t,n,v,o)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.updateDragItemContainerType(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,n){if(!e?.length)return;const o=e.filter(u=>!u.getColDef().lockVisible);o.length&&this.beans.colModel.setColsVisible(o,t,n)}finishColumnMoving(){this.clearHighlighted();const e=this.lastMovedInfo;if(!e)return;const{columns:t,toIndex:n}=e;this.beans.colMoves.moveColumns(t,n,"uiColumnMoved",!0)}updateDragItemContainerType(){const{lastDraggingEvent:e}=this;if(this.gos.get("suppressMoveWhenColumnDragging")||!e)return;const t=e.dragItem;t&&(t.containerType=this.pinned)}handleColumnDragWhileSuppressingMovement(e,t,n,o,u){const d=this.getAllMovingColumns(e,!0);if(u){const f=this.isAttemptingToPin(d);f&&this.attemptToPinColumns(d,void 0,!0);const{fromLeft:v,xPosition:w}=this.getNormalisedXPositionInfo(d,f)||{};if(v==null||w==null){this.finishColumnMoving();return}this.moveColumnsAfterHighlight({allMovingColumns:d,xPosition:w,fromEnter:t,fakeEvent:n,fromLeft:v})}else{if(!this.beans.dragAndDrop.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(d,o)}}handleColumnDragWhileAllowingMovement(e,t,n,o,u){const d=this.getAllMovingColumns(e),f=this.normaliseDirection(e.hDirection)==="right",v=e.dragSource.type===1,w=this.getMoveColumnParams({allMovingColumns:d,isFromHeader:v,xPosition:o,fromLeft:f,fromEnter:t,fakeEvent:n}),E=attemptMoveColumns({...w,finished:u});E&&(this.lastMovedInfo=E)}getAllMovingColumns(e,t=!1){const n=e.dragSource.getDragItem();let o=null;t?(o=n.columnsInSplit,o||(o=n.columns)):o=n.columns;const u=d=>d.getColDef().lockPinned?d.getPinned()==this.pinned:!0;return o?o.filter(u):[]}getMoveColumnParams(e){const{allMovingColumns:t,isFromHeader:n,xPosition:o,fromLeft:u,fromEnter:d,fakeEvent:f}=e,{gos:v,colModel:w,colMoves:E,visibleCols:C}=this.beans;return{allMovingColumns:t,isFromHeader:n,fromLeft:u,xPosition:o,pinned:this.pinned,fromEnter:d,fakeEvent:f,gos:v,colModel:w,colMoves:E,visibleCols:C}}highlightHoveredColumn(e,t){const{gos:n,colModel:o}=this.beans,u=n.get("enableRtl"),d=o.getCols().filter(C=>C.isVisible()&&C.getPinned()===this.pinned);let f=null,v=null,w=null;for(const C of d){if(v=C.getActualWidth(),f=this.getNormalisedColumnLeft(C,0,u),f!=null){const _=f+v;if(f<=t&&_>=t){w=C;break}}f=null,v=null}if(w)e.indexOf(w)!==-1&&(w=null);else{for(let C=d.length-1;C>=0;C--){const _=d[C],D=d[C].getParent();if(!D){w=_;break}const O=D?.getDisplayedLeafColumns();if(O.length){w=_last(O);break}}if(!w)return;f=this.getNormalisedColumnLeft(w,0,u),v=w.getActualWidth()}if(w==null||f==null||v==null){this.lastHighlightedColumn?.column!==w&&this.clearHighlighted();return}let E;if(t-f<v/2){const C=d.indexOf(w);C===0?E=0:(E=1,w=d[C-1])}else E=1;(this.lastHighlightedColumn?.column!==w||this.lastHighlightedColumn?.position!==E)&&this.clearHighlighted(),setColumnHighlighted(w,E),this.lastHighlightedColumn={column:w,position:E}}getNormalisedXPositionInfo(e,t){const{gos:n,visibleCols:o}=this.beans,u=n.get("enableRtl"),{firstMovingCol:d,column:f,position:v}=this.getColumnMoveAndTargetInfo(e,t,u);if(!d||!f||v==null)return;const w=o.allCols,E=w.indexOf(d),C=w.indexOf(f),_=v===0,D=E<C||E===C&&!_;let O=0;if(_?D&&(O-=1):D||(O+=1),C+O===E)return;const M=w[C+O];if(!M)return;const N=this.getNormalisedColumnLeft(M,20,u);return{fromLeft:D,xPosition:N}}getColumnMoveAndTargetInfo(e,t,n){const o=this.lastHighlightedColumn||{},{firstMovingCol:u,lastMovingCol:d}=findFirstAndLastMovingColumns(e);if(!u||!d||o.column||!t)return{firstMovingCol:u,...o};const v=this.getPinDirection()==="left";return{firstMovingCol:u,position:v?1:0,column:v!==n?u:d}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case"left":return"right";case"right":return"left"}return e}getNormalisedColumnLeft(e,t,n){const{gos:o,ctrlsSvc:u}=this.beans,d=e.getLeft();if(d==null)return null;const f=e.getActualWidth();return normaliseX({x:n?d+f-t:d+t,pinned:e.getPinned(),useHeaderRow:n,skipScrollPadding:!0,gos:o,ctrlsSvc:u})}isAttemptingToPin(e){const t=this.needToMoveLeft||this.needToMoveRight,n=this.failedMoveAttempts>MOVE_FAIL_THRESHOLD;return t&&n||e.some(o=>o.getPinned()!==this.pinned)}moveColumnsAfterHighlight(e){const{allMovingColumns:t,xPosition:n,fromEnter:o,fakeEvent:u,fromLeft:d}=e,f=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:n,fromLeft:d,fromEnter:o,fakeEvent:u}),{columns:v,toIndex:w}=getBestColumnMoveIndexFromXPosition(f)||{};v&&w!=null&&(this.lastMovedInfo={columns:v,toIndex:w}),this.finishColumnMoving()}clearHighlighted(){const{lastHighlightedColumn:e}=this;e&&(setColumnHighlighted(e.column,null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;const t=this.beans.ctrlsSvc.get("center"),n=t.getCenterViewportScrollLeft(),o=n+t.getCenterWidth();let u,d;this.gos.get("enableRtl")?(u=e<n+SCROLL_GAP_NEEDED_BEFORE_MOVE,d=e>o-SCROLL_GAP_NEEDED_BEFORE_MOVE):(d=e<n+SCROLL_GAP_NEEDED_BEFORE_MOVE,u=e>o-SCROLL_GAP_NEEDED_BEFORE_MOVE),this.needToMoveRight=u,this.needToMoveLeft=d,d||u?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),SCROLL_TIME_INTERVAL),this.beans.dragAndDrop.setDragImageCompIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,this.beans.dragAndDrop.setDragImageCompIcon(this.getIconName()))}moveInterval(){let e;this.intervalCount++,e=10+this.intervalCount*SCROLL_ACCELERATION_RATE,e>SCROLL_MOVE_WIDTH&&(e=SCROLL_MOVE_WIDTH);let t=null;const n=this.gridBodyCon.scrollFeature;if(this.needToMoveLeft?t=n.scrollHorizontally(-e):this.needToMoveRight&&(t=n.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;const{pinnedCols:o,dragAndDrop:u,gos:d}=this.beans;if(this.failedMoveAttempts<=MOVE_FAIL_THRESHOLD+1||!o)return;if(u.setDragImageCompIcon("pinned"),!d.get("suppressMoveWhenColumnDragging")){const f=this.lastDraggingEvent?.dragItem.columns;this.attemptToPinColumns(f,void 0,!0)}}}getPinDirection(){if(this.needToMoveLeft||this.pinned==="left")return"left";if(this.needToMoveRight||this.pinned==="right")return"right"}attemptToPinColumns(e,t,n=!1){const o=(e||[]).filter(f=>!f.getColDef().lockPinned);if(!o.length)return 0;n&&(t=this.getPinDirection());const{pinnedCols:u,dragAndDrop:d}=this.beans;return u?.setColsPinned(o,t,"uiColumnDragged"),n&&d.nudge(),o.length}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}};function setColumnHighlighted(e,t){e.highlighted!==t&&(e.highlighted=t,e.dispatchColEvent("headerHighlightChanged","uiColumnMoved"))}function findFirstAndLastMovingColumns(e){const t=e.length;let n,o;for(let u=0;u<t;u++){if(!n){const d=e[u];d.getLeft()!=null&&(n=d)}if(!o){const d=e[t-1-u];d.getLeft()!=null&&(o=d)}if(n&&o)break}return{firstMovingCol:n,lastMovingCol:o}}var BodyDropTarget=class extends BeanStub{constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){const{ctrlsSvc:e,dragAndDrop:t}=this.beans,n=this.pinned;e.whenReady(this,o=>{let u;const d=o.gridBodyCtrl.eBodyViewport;switch(n){case"left":u=[[d,o.left.eContainer],[o.bottomLeft.eContainer],[o.topLeft.eContainer]];break;case"right":u=[[d,o.right.eContainer],[o.bottomRight.eContainer],[o.topRight.eContainer]];break;default:u=[[d,o.center.eViewport],[o.bottomCenter.eViewport],[o.topCenter.eViewport]];break}this.eSecondaryContainers=u}),this.moveColumnFeature=this.createManagedBean(new MoveColumnFeature(n)),this.bodyDropPivotTarget=this.createManagedBean(new BodyDropPivotTarget(n)),t.addDropTarget(this),this.addDestroyFunc(()=>t.removeDropTarget(this))}isInterestedIn(e){return e===1||e===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.beans.colModel.isPivotMode()&&e.dragSource.type===0}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}},ColumnMoveService=class extends BeanStub{constructor(){super(...arguments),this.beanName="colMoves"}moveColumnByIndex(e,t,n){const o=this.beans.colModel.getCols();if(!o)return;const u=o[e];this.moveColumns([u],t,n)}moveColumns(e,t,n,o=!0){const{colModel:u,colAnimation:d,visibleCols:f,eventSvc:v}=this.beans,w=u.getCols();if(!w)return;if(t>w.length-e.length){_warn(30,{toIndex:t});return}d?.start();const E=u.getColsForKeys(e);this.doesMovePassRules(E,t)&&(_moveInArray(u.getCols(),E,t),f.refresh(n),v.dispatchEvent({type:"columnMoved",columns:E,column:E.length===1?E[0]:null,toIndex:t,finished:o,source:n})),d?.finish()}doesMovePassRules(e,t){const n=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(n)}doesOrderPassRules(e){const{colModel:t,gos:n}=this.beans;return!(!doesMovePassMarryChildren(e,t.getColTree())||!(u=>{const d=E=>E?E==="left"||E===!0?-1:1:0,f=n.get("enableRtl");let v=f?1:-1,w=!0;for(const E of u){const C=d(E.getColDef().lockPosition);f?C>v&&(w=!1):C<v&&(w=!1),v=C}return w})(e))}getProposedColumnOrder(e,t){const o=this.beans.colModel.getCols().slice();return _moveInArray(o,e,t),o}createBodyDropTarget(e,t){return new BodyDropTarget(e,t)}moveHeader(e,t,n,o,u){const{ctrlsSvc:d,gos:f,colModel:v,visibleCols:w,focusSvc:E}=this.beans,C=t.getBoundingClientRect(),_=C.left,D=isColumnGroup(n),O=D?C.width:n.getActualWidth(),M=e==="left"!==f.get("enableRtl"),N=normaliseX({x:M?_-20:_+O+20,pinned:o,fromKeyboard:!0,gos:f,ctrlsSvc:d}),I=E.focusedHeader;attemptMoveColumns({allMovingColumns:D?n.getLeafColumns():[n],isFromHeader:!0,fromLeft:e==="right",xPosition:N,pinned:o,fromEnter:!1,fakeEvent:!1,gos:f,colModel:v,colMoves:this,visibleCols:w,finished:!0});let B;if(D){const V=n.getDisplayedLeafColumns();B=M?V[0]:_last(V)}else B=n;if(d.getScrollFeature().ensureColumnVisible(B,"auto"),(!u.isAlive()||f.get("ensureDomOrder"))&&I){let V;if(D){const j=n.getGroupId(),q=n.getLeafColumns();if(!q.length)return;const z=q[0].getParent();if(!z)return;V=findGroupWidthId(z,j)}else V=n;V&&E.focusHeaderPosition({headerPosition:{...I,column:V}})}}setDragSourceForHeader(e,t,n){const{gos:o,colModel:u,dragAndDrop:d,visibleCols:f}=this.beans;let v=!o.get("suppressDragLeaveHidesColumns");const w=isColumnGroup(t),E=w?t.getProvidedColumnGroup().getLeafColumns():[t],_={type:1,eElement:e,getDefaultIconName:()=>v?"hide":"notAllowed",getDragItem:w?()=>createDragItemForGroup(t,f.allCols):()=>createDragItem(t),dragItemName:n,onDragStarted:()=>{v=!o.get("suppressDragLeaveHidesColumns"),setColumnsMoving(E,!0)},onDragStopped:()=>setColumnsMoving(E,!1),onDragCancelled:()=>setColumnsMoving(E,!1),onGridEnter:D=>{if(v){const{columns:O=[],visibleState:M}=D??{},N=w?B=>!M||M[B.getColId()]:()=>!0,I=O.filter(B=>!B.getColDef().lockVisible&&N(B));u.setColsVisible(I,!0,"uiColumnMoved")}},onGridExit:D=>{if(v){const O=D?.columns?.filter(M=>!M.getColDef().lockVisible)||[];u.setColsVisible(O,!1,"uiColumnMoved")}}};return d.addDragSource(_,!0),_}};function findGroupWidthId(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}}function createDragItem(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t,containerType:e.pinned}}function createDragItemForGroup(e,t){const n=e.getProvidedColumnGroup().getLeafColumns(),o={};for(const v of n)o[v.getId()]=v.isVisible();const u=[];for(const v of t)n.indexOf(v)>=0&&(u.push(v),_removeFromArray(n,v));for(const v of n)u.push(v);const d=[],f=e.getLeafColumns();for(const v of u)f.indexOf(v)!==-1&&d.push(v);return{columns:u,columnsInSplit:d,visibleState:o,containerType:d[0]?.pinned}}var ColumnMoveModule={moduleName:"ColumnMove",version:VERSION,beans:[ColumnMoveService,ColumnAnimationService],apiFunctions:{moveColumnByIndex,moveColumns},dependsOn:[SharedDragAndDropModule],css:[columnMovingCSS]},AutoWidthCalculator=class extends BeanStub{constructor(){super(...arguments),this.beanName="autoWidthCalc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){const n=this.getHeaderCellForColumn(e);if(!n)return-1;const o=this.beans.rowRenderer.getAllCellsNotSpanningForColumn(e);return t||o.push(n),this.getPreferredWidthForElements(o)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.getPreferredWidthForElements([t]):-1}getPreferredWidthForElements(e,t){const n=document.createElement("form");n.style.position="fixed";const o=this.centerRowContainerCtrl.eContainer;for(const d of e)this.cloneItemIntoDummy(d,n);o.appendChild(n);const u=Math.ceil(n.getBoundingClientRect().width);return n.remove(),t=t??this.gos.get("autoSizePadding"),u+t}getHeaderCellForColumn(e){let t=null;for(const n of this.beans.ctrlsSvc.getHeaderRowContainerCtrls()){const o=n.getHtmlElementForColumnHeader(e);o!=null&&(t=o)}return t}cloneItemIntoDummy(e,t){const n=e.cloneNode(!0);n.style.width="",n.style.position="static",n.style.left="";const o=document.createElement("div"),u=o.classList;["ag-header-cell","ag-header-group-cell"].some(v=>n.classList.contains(v))?(u.add("ag-header","ag-header-row"),o.style.position="static"):u.add("ag-row");let f=e.parentElement;for(;f;){if(["ag-header-row","ag-row"].some(w=>f.classList.contains(w))){for(let w=0;w<f.classList.length;w++){const E=f.classList[w];E!="ag-row-position-absolute"&&u.add(E)}break}f=f.parentElement}o.appendChild(n),t.appendChild(o)}},AutoWidthModule={moduleName:"AutoWidth",version:VERSION,beans:[AutoWidthCalculator]};function setColumnWidths(e,t,n=!0,o="api"){e.colResize?.setColumnWidths(t,!1,n,o)}var GroupResizeFeature=class extends BeanStub{constructor(e,t,n,o){super(),this.comp=e,this.eResize=t,this.pinned=n,this.columnGroup=o}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}const{horizontalResizeSvc:e,gos:t,colAutosize:n}=this.beans,o=e.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});this.addDestroyFunc(o),!t.get("suppressAutoSize")&&n&&this.addDestroyFunc(n.addColumnGroupResize(this.eResize,this.columnGroup,()=>this.resizeLeafColumnsToFit("uiColumnResized")))}onResizeStart(e){const{columnsToResize:t,resizeStartWidth:n,resizeRatios:o,groupAfterColumns:u,groupAfterStartWidth:d,groupAfterRatios:f}=this.getInitialValues(e);this.resizeCols=t,this.resizeStartWidth=n,this.resizeRatios=o,this.resizeTakeFromCols=u,this.resizeTakeFromStartWidth=d,this.resizeTakeFromRatios=f,this.toggleColumnResizing(!0)}onResizing(e,t,n="uiColumnResized"){const o=this.normaliseDragChange(t),u=this.resizeStartWidth+o;this.resizeColumnsFromLocalValues(u,n,e)}getInitialValues(e){const t=w=>w.reduce((E,C)=>E+C.getActualWidth(),0),n=(w,E)=>w.map(C=>C.getActualWidth()/E),o=this.getColumnsToResize(),u=t(o),d=n(o,u),f={columnsToResize:o,resizeStartWidth:u,resizeRatios:d};let v=null;if(e&&(v=this.beans.colGroupSvc?.getGroupAtDirection(this.columnGroup,"After")??null),v){const w=v.getDisplayedLeafColumns(),E=f.groupAfterColumns=w.filter(_=>_.isResizable()),C=f.groupAfterStartWidth=t(E);f.groupAfterRatios=n(E,C)}else f.groupAfterColumns=void 0,f.groupAfterStartWidth=void 0,f.groupAfterRatios=void 0;return f}resizeLeafColumnsToFit(e){const t=this.beans.autoWidthCalc.getPreferredWidthForColumnGroup(this.columnGroup),n=this.getInitialValues();t>n.resizeStartWidth&&this.resizeColumns(n,t,e,!0)}resizeColumnsFromLocalValues(e,t,n=!0){if(!this.resizeCols||!this.resizeRatios)return;const o={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols,groupAfterStartWidth:this.resizeTakeFromStartWidth,groupAfterRatios:this.resizeTakeFromRatios};this.resizeColumns(o,e,t,n)}resizeColumns(e,t,n,o=!0){const{columnsToResize:u,resizeStartWidth:d,resizeRatios:f,groupAfterColumns:v,groupAfterStartWidth:w,groupAfterRatios:E}=e,C=[];if(C.push({columns:u,ratios:f,width:t}),v){const _=t-d;C.push({columns:v,ratios:E,width:w-_})}this.beans.colResize?.resizeColumnSets({resizeSets:C,finished:o,source:n}),o&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.toggleCss("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}destroy(){super.destroy(),this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}},ResizeFeature=class extends BeanStub{constructor(e,t,n,o,u){super(),this.pinned=e,this.column=t,this.eResize=n,this.comp=o,this.ctrl=u}postConstruct(){const e=[];let t,n;const o=()=>{if(_setDisplayed(this.eResize,t),!t)return;const{horizontalResizeSvc:f,colAutosize:v}=this.beans,w=f.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});e.push(w),n&&v&&e.push(v.addColumnAutosizeListeners(this.eResize,this.column))},u=()=>{for(const f of e)f();e.length=0},d=()=>{const f=this.column.isResizable(),v=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(f!==t||v!==n)&&(t=f,n=v,u(),o())};d(),this.addDestroyFunc(u),this.ctrl.setRefreshFunction("resize",d)}onResizing(e,t){const{column:n,lastResizeAmount:o,resizeStartWidth:u,beans:d}=this,f=this.normaliseResizeAmount(t),v=u+f,w=[{key:n,newWidth:v}],{pinnedCols:E,ctrlsSvc:C,colResize:_}=d;if(this.column.getPinned()){const D=E?.leftWidth??0,O=E?.rightWidth??0,M=_getInnerWidth(C.getGridBodyCtrl().eBodyViewport)-50;if(D+O+(f-o)>M)return}this.lastResizeAmount=f,_?.setColumnWidths(w,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.column.resizing=e,this.comp.toggleCss("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const n=this.pinned!=="left",o=this.pinned==="right";return this.gos.get("enableRtl")?n&&(t*=-1):o&&(t*=-1),t}},ColumnResizeService=class extends BeanStub{constructor(){super(...arguments),this.beanName="colResize"}setColumnWidths(e,t,n,o){const u=[],{colModel:d,gos:f,visibleCols:v}=this.beans;for(const w of e){const E=d.getColDefCol(w.key)||d.getCol(w.key);if(!E)continue;if(u.push({width:w.newWidth,ratios:[1],columns:[E]}),f.get("colResizeDefault")==="shift"&&(t=!t),t){const _=v.getColAfter(E);if(!_)continue;const D=E.getActualWidth()-w.newWidth,O=_.getActualWidth()+D;u.push({width:O,ratios:[1],columns:[_]})}}u.length!==0&&this.resizeColumnSets({resizeSets:u,finished:n,source:o})}resizeColumnSets(e){const{resizeSets:t,finished:n,source:o}=e;if(!(!t||t.every(C=>checkMinAndMaxWidthsForSet(C)))){if(n){const C=t&&t.length>0?t[0].columns:null;dispatchColumnResizedEvent(this.eventSvc,C,n,o)}return}const d=[],f=[];for(const C of t){const{width:_,columns:D,ratios:O}=C,M={},N={};for(const V of D)f.push(V);let I=!0,B=0;for(;I;){if(B++,B>1e3){_error(31);break}I=!1;const V=[];let j=0,q=_;D.forEach(($,ee)=>{if(N[$.getId()])q-=M[$.getId()];else{V.push($);const ae=O[ee];j+=ae}});const z=1/j;V.forEach(($,ee)=>{const ie=ee===V.length-1;let ae;ie?ae=q:(ae=Math.round(O[ee]*_*z),q-=ae);const pe=$.getMinWidth(),he=$.getMaxWidth();ae<pe?(ae=pe,N[$.getId()]=!0,I=!0):he>0&&ae>he&&(ae=he,N[$.getId()]=!0,I=!0),M[$.getId()]=ae})}for(const V of D){const j=M[V.getId()];V.getActualWidth()!==j&&(V.setActualWidth(j,o),d.push(V))}}const v=d.length>0;let w=[];if(v){const{colFlex:C,visibleCols:_,colViewport:D}=this.beans;w=C?.refreshFlexedColumns({resizingCols:f,skipSetLeft:!0})??[],_.setLeftValues(o),_.updateBodyWidths(),D.checkViewportColumns()}const E=f.concat(w);(v||n)&&dispatchColumnResizedEvent(this.eventSvc,E,n,o,w)}resizeHeader(e,t,n){if(!e.isResizable())return;const o=e.getActualWidth(),u=e.getMinWidth(),d=e.getMaxWidth(),f=Math.min(Math.max(o+t,u),d);this.setColumnWidths([{key:e,newWidth:f}],n,!0,"uiColumnResized")}createResizeFeature(e,t,n,o,u){return new ResizeFeature(e,t,n,o,u)}createGroupResizeFeature(e,t,n,o){return new GroupResizeFeature(e,t,n,o)}};function checkMinAndMaxWidthsForSet(e){const{columns:t,width:n}=e;let o=0,u=0,d=!0;for(const w of t){const E=w.getMinWidth();o+=E||0;const C=w.getMaxWidth();C>0?u+=C:d=!1}const f=n>=o,v=!d||n<=u;return f&&v}var ColumnResizeModule={moduleName:"ColumnResize",version:VERSION,beans:[ColumnResizeService],apiFunctions:{setColumnWidths},dependsOn:[HorizontalResizeModule,AutoWidthModule]},GroupWidthFeature=class extends BeanStub{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);for(const t of this.columnGroup.getLeafColumns())t.__addEventListener("widthChanged",e),t.__addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.__removeEventListener("widthChanged",e),t.__removeEventListener("visibleChanged",e)})}removeListenersOnChildrenColumns(){for(const e of this.removeChildListenersFuncs)e();this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.toggleCss("ag-hidden",e===0)}},HeaderGroupCellCtrl=class extends AbstractHeaderCellCtrl{constructor(){super(...arguments),this.onSuppressColMoveChange=()=>{!this.isAlive()||this.isSuppressMoving()?this.removeDragSource():this.dragSource||this.setDragSource(this.eGui)}}wireComp(e,t,n,o,u){const{column:d,beans:f}=this,{context:v,colNames:w,colHover:E,rangeSvc:C,colResize:_}=f;this.comp=e,u=setupCompBean(this,v,u),this.setGui(t,u),this.displayName=w.getDisplayNameForColumnGroup(d,"header"),this.refreshHeaderStyles(),this.addClasses(),this.setupMovingCss(u),this.setupExpandable(u),this.setupTooltip(),this.refreshAnnouncement(),this.setupAutoHeight({wrapperElement:o,compBean:u}),this.setupUserComp(),this.addHeaderMouseListeners(u,o),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();const D=this.rowCtrl.pinned,O=d.getProvidedColumnGroup().getLeafColumns();E?.createHoverFeature(u,O,t),C?.createRangeHighlightFeature(u,d,e),u.createManagedBean(new SetLeftFeature(d,t,f)),u.createManagedBean(new GroupWidthFeature(e,d)),_?this.resizeFeature=u.createManagedBean(_.createGroupResizeFeature(e,n,D,d)):e.setResizableDisplayed(!1),u.createManagedBean(new ManagedFocusFeature(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(u,O),this.addManagedEventListeners({cellSelectionChanged:()=>this.refreshAnnouncement()}),u.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(u),u.addDestroyFunc(()=>this.clearComponent())}getHeaderClassParams(){const{column:e,beans:t}=this,n=e.getDefinition();return _addGridCommonParams(t.gos,{colDef:n,columnGroup:e,floatingFilter:!1})}refreshMaxHeaderHeight(){const{gos:e,comp:t}=this,n=e.get("groupHeaderHeight");n!=null?n===0?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(n):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(const n of t)e.addManagedListeners(n,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,n)})}onLeafColumnHighlightChanged(e){const t=this.column.getDisplayedLeafColumns(),n=t[0]===e,o=_last(t)===e;if(!n&&!o)return;const u=e.getHighlighted(),d=!!this.rowCtrl.getHeaderCellCtrls().find(w=>w.column.isMoving());let f=!1,v=!1;if(d){const w=this.beans.gos.get("enableRtl"),E=u===1,C=u===0;n&&(w?v=E:f=C),o&&(w?f=C:v=E)}this.comp.toggleCss("ag-header-highlight-before",f),this.comp.toggleCss("ag-header-highlight-after",v)}resizeHeader(e,t){const{resizeFeature:n}=this;if(!n)return;const o=n.getInitialValues(t);n.resizeColumns(o,o.resizeStartWidth+e,"uiColumnResized",!0)}resizeLeafColumnsToFit(e){this.resizeFeature?.resizeLeafColumnsToFit(e)}setupUserComp(){const{colGroupSvc:e,userCompFactory:t,gos:n,enterpriseMenuFactory:o}=this.beans,u=this.column,d=u.getProvidedColumnGroup(),f=_addGridCommonParams(n,{displayName:this.displayName,columnGroup:u,setExpanded:w=>{e.setColumnGroupOpened(d,w,"gridInitializing")},setTooltip:(w,E)=>{n.assertModuleRegistered("Tooltip",3),this.setupTooltip(w,E)},showColumnMenu:(w,E)=>o?.showMenuAfterButtonClick(d,w,"columnMenu",E),showColumnMenuAfterMouseClick:(w,E)=>o?.showMenuAfterMouseEvent(d,w,"columnMenu",E),eGridHeader:this.eGui}),v=_getHeaderGroupCompDetails(t,f);v&&this.comp.setUserCompDetails(v)}addHeaderMouseListeners(e,t){const{column:n,comp:o,beans:{rangeSvc:u},gos:d}=this,f=C=>this.handleMouseOverChange(C.type==="mouseenter"),v=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",n.getProvidedColumnGroup()),w=C=>this.handleContextMenuMouseEvent(C,void 0,n.getProvidedColumnGroup());e.addManagedListeners(this.eGui,{mouseenter:f,mouseleave:f,click:v,contextmenu:w}),o.toggleCss("ag-header-group-cell-selectable",_getEnableColumnSelection(d));const E=u?.createHeaderGroupCellMouseListenerFeature(this.column,t);E&&this.createManagedBean(E)}handleMouseOverChange(e){this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t){this.tooltipFeature=this.beans.tooltipSvc?.setupHeaderGroupTooltip(this.tooltipFeature,this,e,t)}setupExpandable(e){const t=this.column.getProvidedColumnGroup();this.refreshExpanded();const n=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:n,expandableChanged:n})}refreshExpanded(){const{column:e}=this;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0),this.refreshHeaderStyles()}addClasses(){const{column:e}=this,t=e.getColGroupDef(),n=_getHeaderClassesFromColDef(t,this.gos,null,e);e.isPadding()?(n.push("ag-header-group-cell-no-group"),e.getLeafColumns().every(u=>u.isSpanHeaderHeight())&&n.push("ag-header-span-height")):(n.push("ag-header-group-cell-with-group"),t?.wrapHeaderText&&n.push("ag-header-cell-wrap-text"));for(const o of n)this.comp.toggleCss(o,!0)}setupMovingCss(e){const{column:t}=this,o=t.getProvidedColumnGroup().getLeafColumns(),u=()=>this.comp.toggleCss("ag-header-cell-moving",t.isMoving());for(const d of o)e.addManagedListeners(d,{movingChanged:u});u()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||(this.focusThis(),this.announceAriaDescription())}handleKeyDown(e){if(super.handleKeyDown(e),!this.getWrapperHasFocus())return;const{column:n,expandable:o,gos:u,beans:d}=this,f=_getEnableColumnSelection(u);if(e.key==KeyCode.ENTER){if(f&&!e.altKey)d.rangeSvc?.handleColumnSelection(n,e);else if(o){const v=!n.isExpanded();d.colGroupSvc.setColumnGroupOpened(n.getProvidedColumnGroup(),v,"uiColumnExpanded")}}}refreshAnnouncement(){let e;const{gos:t,column:n,beans:o}=this;if(_getEnableColumnSelection(t)){const d=this.getLocaleTextFunc(),f=o.rangeSvc?.isColumnInAnyRange(n);e=d("ariaColumnCellSelection",`Press CTRL+SPACE to ${f?"de":""}select all visible cells in this column group`)}this.ariaAnnouncement=e}announceAriaDescription(){const{beans:e,eGui:t,ariaAnnouncement:n}=this;!n||!t.contains(_getActiveDomElement(e))||e.ariaAnnounce?.announceValue(n,"columnHeader")}setDragSource(e){!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),e&&(this.dragSource=this.beans.colMoves?.setDragSourceForHeader(e,this.column,this.displayName)??null))}isSuppressMoving(){return this.gos.get("suppressMovableColumns")||this.column.getLeafColumns().some(e=>e.getColDef().suppressMovable||e.getColDef().lockPosition)}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function setColumnGroupOpened(e,t,n){e.colGroupSvc?.setColumnGroupOpened(t,n,"api")}function getColumnGroup(e,t,n){return e.colGroupSvc?.getColumnGroup(t,n)??null}function getProvidedColumnGroup(e,t){return e.colGroupSvc?.getProvidedColGroup(t)??null}function getDisplayNameForColumnGroup(e,t,n){return e.colNames.getDisplayNameForColumnGroup(t,n)||""}function getColumnGroupState(e){return e.colGroupSvc?.getColumnGroupState()??[]}function setColumnGroupState(e,t){e.colGroupSvc?.setColumnGroupState(t,"api")}function resetColumnGroupState(e){e.colGroupSvc?.resetColumnGroupState("api")}function getLeftDisplayedColumnGroups(e){return e.visibleCols.treeLeft}function getCenterDisplayedColumnGroups(e){return e.visibleCols.treeCenter}function getRightDisplayedColumnGroups(e){return e.visibleCols.treeRight}function getAllDisplayedColumnGroups(e){return e.visibleCols.getAllTrees()}var GroupInstanceIdCreator=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let n;return typeof t!="number"?n=0:n=t+1,this.existingIds[e]=n,n}};function _removeAllFromUnorderedArray(e,t){for(let n=0;n<t.length;n++){const o=e.indexOf(t[n]);o>=0&&(e[o]=e[e.length-1],e.pop())}}var VisibleColsService=class extends BeanStub{constructor(){super(...arguments),this.beanName="visibleCols",this.colsAndGroupsMap={},this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.headerGroupRowCount=0,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.isBodyWidthDirty=!0}refresh(e,t=!1){const{colFlex:n,colModel:o,colGroupSvc:u,colViewport:d,selectionColSvc:f}=this.beans;t||this.buildTrees(o,u),u?.updateOpenClosedVisibility(),this.leftCols=pickDisplayedCols(this.treeLeft),this.centerCols=pickDisplayedCols(this.treeCenter),this.rightCols=pickDisplayedCols(this.treeRight),f?.refreshVisibility(this.leftCols,this.centerCols,this.rightCols),this.joinColsAriaOrder(o),this.joinCols(),this.headerGroupRowCount=this.getHeaderRowCount(),this.setLeftValues(e),this.autoHeightCols=this.allCols.filter(v=>v.isAutoHeight()),n?.refreshFlexedColumns(),this.updateBodyWidths(),this.setFirstRightAndLastLeftPinned(o,this.leftCols,this.rightCols,e),d.checkViewportColumns(!1),this.eventSvc.dispatchEvent({type:"displayedColumnsChanged",source:e})}getHeaderRowCount(){if(!this.gos.get("hidePaddedHeaderRows"))return this.beans.colModel.cols.treeDepth;let e=0;for(const t of this.allCols){let n=t.getParent();for(;n;){if(!n.isPadding()){const o=n.getProvidedColumnGroup().getLevel()+1;o>e&&(e=o);break}n=n.getParent()}}return e}updateBodyWidths(){const e=getWidthOfColsInList(this.centerCols),t=getWidthOfColsInList(this.leftCols),n=getWidthOfColsInList(this.rightCols);this.isBodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==n)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=n,this.eventSvc.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventSvc.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e,t,n,o){let u,d;this.gos.get("enableRtl")?(u=t?t[0]:null,d=n?_last(n):null):(u=t?_last(t):null,d=n?n[0]:null);for(const f of e.getCols())f.setLastLeftPinned(f===u,o),f.setFirstRightPinned(f===d,o)}buildTrees(e,t){const n=e.getColsToShow(),o=n.filter(w=>w.getPinned()=="left"),u=n.filter(w=>w.getPinned()=="right"),d=n.filter(w=>w.getPinned()!="left"&&w.getPinned()!="right"),f=new GroupInstanceIdCreator,v=w=>t?t.createColumnGroups(w):w.columns;this.treeLeft=v({columns:o,idCreator:f,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=v({columns:u,idCreator:f,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=v({columns:d,idCreator:f,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.ariaOrderColumns=[]}joinColsAriaOrder(e){const t=e.getCols(),n=[],o=[],u=[];for(const d of t){const f=d.getPinned();f?f===!0||f==="left"?n.push(d):u.push(d):o.push(d)}this.ariaOrderColumns=n.concat(o).concat(u)}getAriaColIndex(e){let t;return isColumnGroup(e)?t=e.getLeafColumns()[0]:t=e,this.ariaOrderColumns.indexOf(t)+1}setLeftValuesOfGroups(){for(const e of[this.treeLeft,this.treeRight,this.treeCenter])for(const t of e)isColumnGroup(t)&&t.checkLeft()}setLeftValuesOfCols(e){const{colModel:t}=this.beans;if(!t.getColDefCols())return;const o=t.getCols().slice(0),u=this.gos.get("enableRtl");for(const d of[this.leftCols,this.rightCols,this.centerCols]){if(u){let f=getWidthOfColsInList(d);for(const v of d)f-=v.getActualWidth(),v.setLeft(f,e)}else{let f=0;for(const v of d)v.setLeft(f,e),f+=v.getActualWidth()}_removeAllFromUnorderedArray(o,d)}for(const d of o)d.setLeft(null,e)}joinCols(){this.gos.get("enableRtl")?this.allCols=this.rightCols.concat(this.centerCols).concat(this.leftCols):this.allCols=this.leftCols.concat(this.centerCols).concat(this.rightCols)}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}isColDisplayed(e){return this.allCols.indexOf(e)>=0}getLeftColsForRow(e){const{leftCols:t,beans:{colModel:n}}=this;return n.colSpanActive?this.getColsForRow(e,t):t}getRightColsForRow(e){const{rightCols:t,beans:{colModel:n}}=this;return n.colSpanActive?this.getColsForRow(e,t):t}getColsForRow(e,t,n,o){const u=[];let d=null;for(let f=0;f<t.length;f++){const v=t[f],w=t.length-f,E=Math.min(v.getColSpan(e),w),C=[v];if(E>1){const D=E-1;for(let O=1;O<=D;O++)C.push(t[f+O]);f+=D}let _;if(n){_=!1;for(const D of C)n(D)&&(_=!0)}else _=!0;_&&(u.length===0&&d&&(o&&o(v))&&u.push(d),u.push(v)),d=v}return u}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getColBefore(e){const t=this.allCols,n=t.indexOf(e);return n>0?t[n-1]:null}isPinningLeft(){return this.leftCols.length>0}isPinningRight(){return this.rightCols.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const e=t=>{this.colsAndGroupsMap[t.getUniqueId()]=t};depthFirstAllColumnTreeSearch(this.treeCenter,!1,e),depthFirstAllColumnTreeSearch(this.treeLeft,!1,e),depthFirstAllColumnTreeSearch(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}getFirstColumn(){const e=this.gos.get("enableRtl"),t=["leftCols","centerCols","rightCols"];e&&t.reverse();for(let n=0;n<t.length;n++){const o=this[t[n]];if(o.length)return e?_last(o):o[0]}return null}getColAfter(e){const t=this.allCols,n=t.indexOf(e);return n<t.length-1?t[n+1]:null}getColsLeftWidth(){return getWidthOfColsInList(this.leftCols)}getDisplayedColumnsRightWidth(){return getWidthOfColsInList(this.rightCols)}isColAtEdge(e,t){const n=this.allCols;if(!n.length)return!1;const o=t==="first";let u;if(isColumnGroup(e)){const d=e.getDisplayedLeafColumns();if(!d.length)return!1;u=o?d[0]:_last(d)}else u=e;return(o?n[0]:_last(n))===u}};function depthFirstAllColumnTreeSearch(e,t,n){if(e)for(let o=0;o<e.length;o++){const u=e[o];if(isColumnGroup(u)){const d=t?u.getDisplayedChildren():u.getChildren();depthFirstAllColumnTreeSearch(d,t,n)}n(u)}}function pickDisplayedCols(e){const t=[];return depthFirstAllColumnTreeSearch(e,!0,n=>{isColumn(n)&&t.push(n)}),t}var ColumnGroupService=class extends BeanStub{constructor(){super(...arguments),this.beanName="colGroupSvc"}getColumnGroupState(){const e=[],t=this.beans.colModel.getColTree();return depthFirstOriginalTreeSearch(null,t,n=>{isProvidedColumnGroup(n)&&e.push({groupId:n.getGroupId(),open:n.isExpanded()})}),e}resetColumnGroupState(e){const t=this.beans.colModel.getColDefColTree();if(!t)return;const n=[];depthFirstOriginalTreeSearch(null,t,o=>{if(isProvidedColumnGroup(o)){const u=o.getColGroupDef(),d={groupId:o.getGroupId(),open:u?u.openByDefault:void 0};n.push(d)}}),this.setColumnGroupState(n,e)}setColumnGroupState(e,t){const{colModel:n,colAnimation:o,visibleCols:u,eventSvc:d}=this.beans;if(!n.getColTree().length)return;o?.start();const v=[];for(const w of e){const E=w.groupId,C=w.open,_=this.getProvidedColGroup(E);_&&_.isExpanded()!==C&&(_.setExpanded(C),v.push(_))}u.refresh(t,!0),v.length&&d.dispatchEvent({type:"columnGroupOpened",columnGroup:v.length===1?v[0]:void 0,columnGroups:v}),o?.finish()}setColumnGroupOpened(e,t,n){let o;isProvidedColumnGroup(e)?o=e.getId():o=e||"",this.setColumnGroupState([{groupId:o,open:t}],n)}getProvidedColGroup(e){let t=null;return depthFirstOriginalTreeSearch(null,this.beans.colModel.getColTree(),n=>{isProvidedColumnGroup(n)&&n.getId()===e&&(t=n)}),t}getGroupAtDirection(e,t){const n=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),o=e.getDisplayedLeafColumns(),u=t==="After"?_last(o):o[0],d=`getCol${t}`;for(;;){const f=this.beans.visibleCols[d](u);if(!f)return null;const v=this.getColGroupAtLevel(f,n);if(v!==e)return v}}getColGroupAtLevel(e,t){let n=e.getParent(),o,u;for(;o=n.getProvidedColumnGroup().getLevel(),u=n.getPaddingLevel(),!(o+u<=t);)n=n.getParent();return n}updateOpenClosedVisibility(){const e=this.beans.visibleCols.getAllTrees();depthFirstAllColumnTreeSearch(e,!1,t=>{isColumnGroup(t)&&t.calculateDisplayedColumns()})}getColumnGroup(e,t){if(!e)return null;if(isColumnGroup(e))return e;const n=this.beans.visibleCols.getAllTrees(),o=typeof t=="number";let u=null;return depthFirstAllColumnTreeSearch(n,!1,d=>{if(isColumnGroup(d)){const f=d;let v;o?v=e===f.getGroupId()&&t===f.getPartId():v=e===f.getGroupId(),v&&(u=f)}}),u}createColumnGroups(e){const{columns:t,idCreator:n,pinned:o,oldDisplayedGroups:u,isStandaloneStructure:d}=e,f=this.mapOldGroupsById(u),v=[];let w=t;for(;w.length;){const E=w;w=[];let C=0;const _=D=>{const O=C;C=D;const M=E[O],I=(isColumnGroup(M)?M.getProvidedColumnGroup():M).getOriginalParent();if(I==null){for(let V=O;V<D;V++)v.push(E[V]);return}const B=this.createColumnGroup(I,n,f,o,d);for(let V=O;V<D;V++)B.addChild(E[V]);w.push(B)};for(let D=1;D<E.length;D++){const O=E[D],N=(isColumnGroup(O)?O.getProvidedColumnGroup():O).getOriginalParent(),I=E[C],V=(isColumnGroup(I)?I.getProvidedColumnGroup():I).getOriginalParent();N!==V&&_(D)}C<E.length&&_(E.length)}return d||this.setupParentsIntoCols(v,null),v}createProvidedColumnGroup(e,t,n,o,u,d,f){const v=u.getUniqueKey(t.groupId||null,null),w=createMergedColGroupDef(this.beans,t,v),E=new AgProvidedColumnGroup(w,v,!1,n);this.createBean(E);const C=this.findExistingGroup(t,d);C&&d.splice(C.idx,1);const _=C?.group;_&&E.setExpanded(_.isExpanded());const D=_recursivelyCreateColumns(this.beans,w.children,n+1,e,o,u,d,f);return E.setChildren(D),E}balanceColumnTree(e,t,n,o){const u=[];for(let d=0;d<e.length;d++){const f=e[d];if(isProvidedColumnGroup(f)){const v=f,w=this.balanceColumnTree(v.getChildren(),t+1,n,o);v.setChildren(w),u.push(v)}else{let v,w;for(let E=t;E<n;E++){const C=o.getUniqueKey(null,null),_=createMergedColGroupDef(this.beans,null,C),D=new AgProvidedColumnGroup(_,C,!0,E);this.createBean(D),w&&w.setChildren([D]),w=D,v||(v=w)}if(v&&w)if(u.push(v),e.some(C=>isProvidedColumnGroup(C))){w.setChildren([f]);continue}else{w.setChildren(e);break}u.push(f)}}return u}findDepth(e){let t=0,n=e;for(;n?.[0]&&isProvidedColumnGroup(n[0]);)t++,n=n[0].getChildren();return t}findMaxDepth(e,t){let n=t;for(let o=0;o<e.length;o++){const u=e[o];if(isProvidedColumnGroup(u)){const d=u,f=this.findMaxDepth(d.getChildren(),t+1);n<f&&(n=f)}}return n}balanceTreeForAutoCols(e,t){const n=[];for(const o of e){let u=o;for(let d=t-1;d>=0;d--){const f=new AgProvidedColumnGroup(null,`FAKE_PATH_${o.getId()}_${d}`,!0,d);this.createBean(f),f.setChildren([u]),u.originalParent=f,u=f}t===0&&(o.originalParent=null),n.push(u)}return n}findExistingGroup(e,t){if(e.groupId!=null)for(let o=0;o<t.length;o++){const u=t[o];if(u.getColGroupDef()&&u.getId()===e.groupId)return{idx:o,group:u}}}createColumnGroup(e,t,n,o,u){const d=e.getGroupId(),f=t.getInstanceIdForKey(d),v=createUniqueColumnGroupId(d,f);let w=n[v];return w&&w.getProvidedColumnGroup()!==e&&(w=null),_exists(w)?w.reset():(w=new AgColumnGroup(e,d,f,o),u||this.createBean(w)),w}mapOldGroupsById(e){const t={},n=o=>{for(const u of o)if(isColumnGroup(u)){const d=u;t[u.getUniqueId()]=d,n(d.getChildren())}};return e&&n(e),t}setupParentsIntoCols(e,t){for(const n of e??[])if(n.parent!==t&&(this.beans.colViewport.colsWithinViewportHash=""),n.parent=t,isColumnGroup(n)){const o=n;this.setupParentsIntoCols(o.getChildren(),o)}}},ColumnGroupModule={moduleName:"ColumnGroup",version:VERSION,dynamicBeans:{headerGroupCellCtrl:HeaderGroupCellCtrl},beans:[ColumnGroupService],apiFunctions:{getAllDisplayedColumnGroups,getCenterDisplayedColumnGroups,getColumnGroup,getColumnGroupState,getDisplayNameForColumnGroup,getLeftDisplayedColumnGroups,getProvidedColumnGroup,getRightDisplayedColumnGroups,resetColumnGroupState,setColumnGroupOpened,setColumnGroupState}},ColumnModel=class extends BeanStub{constructor(){super(...arguments),this.beanName="colModel",this.pivotMode=!1,this.ready=!1,this.changeEventsDispatching=!1}postConstruct(){this.pivotMode=this.gos.get("pivotMode"),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents","rowNumbers","hidePaddedHeaderRows"],e=>this.refreshAll(_convertColumnEventSourceType(e.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],this.recreateColumnDefs.bind(this)),this.addManagedPropertyListener("pivotMode",e=>this.setPivotMode(this.gos.get("pivotMode"),_convertColumnEventSourceType(e.source)))}createColsFromColDefs(e){const{beans:t}=this,{valueCache:n,colAutosize:o,rowGroupColsSvc:u,pivotColsSvc:d,valueColsSvc:f,visibleCols:v,eventSvc:w,groupHierarchyColSvc:E}=t,C=this.colDefs?_compareColumnStatesAndDispatchEvents(t,e):void 0;n?.expire();const _=this.colDefCols?.list,D=this.colDefCols?.tree,O=_createColumnTree(t,this.colDefs,!0,D,e);_destroyColumnTree(t,this.colDefCols?.tree,O.columnTree);const M=O.columnTree,N=O.treeDepth,I=_getColumnsFromTree(M),B={};for(const V of I)B[V.getId()]=V;this.colDefCols={tree:M,treeDepth:N,list:I,map:B},this.createColumnsForService([E],this.colDefCols,e),u?.extractCols(e,_),d?.extractCols(e,_),f?.extractCols(e,_),this.ready=!0,this.changeEventsDispatching=!0,this.refreshCols(!0,e),this.changeEventsDispatching=!1,v.refresh(e),w.dispatchEvent({type:"columnEverythingChanged",source:e}),C&&(this.changeEventsDispatching=!0,C(),this.changeEventsDispatching=!1),w.dispatchEvent({type:"newColumnsLoaded",source:e}),e==="gridInitializing"&&o?.applyAutosizeStrategy()}refreshCols(e,t){if(!this.colDefCols)return;const n=this.cols?.tree;this.saveColOrder();const{autoColSvc:o,selectionColSvc:u,rowNumbersSvc:d,quickFilter:f,pivotResultCols:v,showRowGroupCols:w,rowAutoHeight:E,visibleCols:C,colViewport:_,eventSvc:D,formula:O}=this.beans,M=this.selectCols(v,this.colDefCols);O?.setFormulasActive(M),this.createColumnsForService([o,u,d],M,t);const N=_shouldMaintainColumnOrder(this.gos,this.showingPivotResult);(!e||N)&&this.restoreColOrder(M),this.positionLockedCols(M),w?.refresh(),f?.refreshCols(),this.setColSpanActive(),E?.setAutoHeightActive(M),C.clear(),_.clear(),_areEqual(n,this.cols.tree)||D.dispatchEvent({type:"gridColumnsChanged"})}createColumnsForService(e,t,n){for(const o of e)o&&(o.createColumns(t,u=>{this.lastOrder=u(this.lastOrder),this.lastPivotOrder=u(this.lastPivotOrder)},n),o.addColumns(t))}selectCols(e,t){const n=e?.getPivotResultCols()??null;this.showingPivotResult=n!=null;const{map:o,list:u,tree:d,treeDepth:f}=n??t;return this.cols={list:u.slice(),map:{...o},tree:d.slice(),treeDepth:f},n&&(n.list.some(w=>this.cols?.map[w.getColId()]!==void 0)||(this.lastPivotOrder=null)),this.cols}getColsToShow(){if(!this.cols)return[];const{beans:e,showingPivotResult:t,cols:n}=this,{valueColsSvc:o,selectionColSvc:u}=e,d=this.isPivotMode()&&!t,f=u?.isSelectionColumnEnabled(),v=_isRowNumbers(e),w=o?.columns;return n.list.filter(C=>{const _=isColumnGroupAutoCol(C);if(d){const D=w?.includes(C);return _||D||f&&isColumnSelectionCol(C)||v&&isRowNumberCol(C)}else return _||C.isVisible()})}refreshAll(e){this.ready&&(this.refreshCols(!1,e),this.beans.visibleCols.refresh(e))}setColsVisible(e,t=!1,n){_applyColumnState(this.beans,{state:e.map(o=>({colId:typeof o=="string"?o:o.getColId(),hide:!t}))},n)}restoreColOrder(e){const t=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!t)return;const n=t.filter(_=>e.map[_.getId()]!=null);if(n.length===0)return;if(n.length===e.list.length){e.list=n;return}const o=_=>{const D=_.getOriginalParent();return D?D.getChildren().length>1?!0:o(D):!1};if(!n.some(_=>o(_))){const _=new Set(n);for(const D of e.list)_.has(D)||n.push(D);e.list=n;return}const u=new Map;for(let _=0;_<n.length;_++){const D=n[_];u.set(D,_)}const d=e.list.filter(_=>!u.has(_));if(d.length===0){e.list=n;return}const f=(_,D)=>{const O=D?D.getOriginalParent():_.getOriginalParent();if(!O)return null;let M=null,N=null;for(const I of O.getChildren())if(!(I===D||I===_)){if(I instanceof AgColumn){const B=u.get(I);if(B==null)continue;(M==null||M<B)&&(M=B,N=I);continue}I.forEachLeafColumn(B=>{const V=u.get(B);V!=null&&(M==null||M<V)&&(M=V,N=B)})}return N??f(_,O)},v=[],w=new Map;for(const _ of d){const D=f(_,null);if(D==null){v.push(_);continue}const O=w.get(D);O===void 0?w.set(D,_):Array.isArray(O)?O.push(_):w.set(D,[O,_])}const E=new Array(e.list.length);let C=E.length-1;for(let _=v.length-1;_>=0;_--)E[C--]=v[_];for(let _=n.length-1;_>=0;_--){const D=n[_],O=w.get(D);if(O)if(Array.isArray(O))for(let M=O.length-1;M>=0;M--){const N=O[M];E[C--]=N}else E[C--]=O;E[C--]=D}e.list=E}positionLockedCols(e){e.list=placeLockedColumns(e.list,this.gos)}saveColOrder(){this.showingPivotResult?this.lastPivotOrder=this.cols?.list??null:this.lastOrder=this.cols?.list??null}getColumnDefs(e){return this.colDefCols&&this.beans.colDefFactory?.getColumnDefs(this.colDefCols.list,this.showingPivotResult,this.lastOrder,this.cols?.list??[],e)}setColSpanActive(){this.colSpanActive=!!this.cols?.list.some(e=>e.getColDef().colSpan!=null)}isPivotMode(){return this.pivotMode}setPivotMode(e,t){if(e===this.pivotMode||(this.pivotMode=e,!this.ready))return;this.refreshCols(!1,t);const{visibleCols:n,eventSvc:o}=this.beans;n.refresh(t),o.dispatchEvent({type:"columnPivotModeChanged"})}isPivotActive(){const e=this.beans.pivotColsSvc?.columns;return this.pivotMode&&!!e?.length}recreateColumnDefs(e){if(!this.cols)return;this.beans.autoColSvc?.updateColumns(e);const t=_convertColumnEventSourceType(e.source);this.createColsFromColDefs(t)}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){_destroyColumnTree(this.beans,this.colDefCols?.tree),super.destroy()}getColTree(){return this.cols?.tree??[]}getColDefColTree(){return this.colDefCols?.tree??[]}getColDefCols(){return this.colDefCols?.list??null}getCols(){return this.cols?.list??[]}forAllCols(e){const{pivotResultCols:t,autoColSvc:n,selectionColSvc:o,groupHierarchyColSvc:u}=this.beans;_forAll(this.colDefCols?.list,e)||_forAll(n?.columns?.list,e)||_forAll(o?.columns?.list,e)||_forAll(u?.columns?.list,e)||_forAll(t?.getPivotResultCols()?.list,e)}getColsForKeys(e){return e?e.map(t=>this.getCol(t)).filter(t=>t!=null):[]}getColDefCol(e){return this.colDefCols?.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return e==null?null:this.getColFromCollection(e,this.cols)}getColById(e){return this.cols?.map[e]??null}getColFromCollection(e,t){if(t==null)return null;const{map:n,list:o}=t;if(typeof e=="string"&&n[e])return n[e];for(let v=0;v<o.length;v++)if(_columnsMatch(o[v],e))return o[v];const{autoColSvc:u,selectionColSvc:d,groupHierarchyColSvc:f}=this.beans;return u?.getColumn(e)??d?.getColumn(e)??f?.getColumn(e)??null}},SkeletonCellRendererElement={tag:"div",cls:"ag-skeleton-container"},SkeletonCellRenderer$1=class extends Component{constructor(){super(SkeletonCellRendererElement)}init(t){const n=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",n),this.addDestroyFunc(()=>_setAriaLabelledBy(t.eParentOfValue)),_setAriaLabelledBy(t.eParentOfValue,n),t.deferRender?this.setupLoading(t):t.node.failedLoad?this.setupFailed():this.setupLoading(t)}setupFailed(){const t=this.getLocaleTextFunc();this.getGui().textContent=t("loadingError","ERR");const n=t("ariaSkeletonCellLoadingFailed","Row failed to load");_setAriaLabel(this.getGui(),n)}setupLoading(t){const n=_createElement({tag:"div",cls:"ag-skeleton-effect"}),o=t.node.rowIndex;if(o!=null){const f=75+25*(o%2===0?Math.sin(o):Math.cos(o));n.style.width=`${f}%`}this.getGui().appendChild(n);const u=this.getLocaleTextFunc(),d=t.deferRender?u("ariaDeferSkeletonCellLoading","Cell is loading"):u("ariaSkeletonCellLoading","Row data is loading");_setAriaLabel(this.getGui(),d)}refresh(t){return!1}},CheckboxCellRendererModule={moduleName:"CheckboxCellRenderer",version:VERSION,userComponents:{agCheckboxCellRenderer:CheckboxCellRenderer}},SkeletonCellRendererModule={moduleName:"SkeletonCellRenderer",version:VERSION,userComponents:{agSkeletonCellRenderer:SkeletonCellRenderer$1}},ColumnFlexService=class extends BeanStub{constructor(){super(...arguments),this.beanName="colFlex",this.columnsHidden=!1}refreshFlexedColumns(e={}){const t=e.source??"flex";e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth);const n=this.flexViewportWidth,{visibleCols:o,colDelayRenderSvc:u}=this.beans,d=o.centerCols;let f=-1;if(e.resizingCols){const N=new Set(e.resizingCols);for(let I=d.length-1;I>=0;I--)if(N.has(d[I])){f=I;break}}let v=!1;const w=d.map((N,I)=>{const B=N.getFlex(),V=B!=null&&B>0&&I>f;return v||(v=V),{col:N,isFlex:V,flex:Math.max(0,B??0),initialSize:N.getActualWidth(),min:N.getMinWidth(),max:N.getMaxWidth(),targetSize:0}});if(v?(u?.hideColumns("colFlex"),this.columnsHidden=!0):this.columnsHidden&&this.revealColumns(u),!n||!v)return[];let E=w.length,C=w.reduce((N,I)=>N+I.flex,0),_=n;const D=(N,I)=>{N.frozenSize=I,N.col.setActualWidth(I,t),_-=I,C-=N.flex,E-=1},O=N=>N.frozenSize!=null;for(const N of w)N.isFlex||D(N,N.initialSize);for(;E>0;){const N=Math.round(C<1?_*C:_);let I,B=0,V=0;for(const z of w){if(O(z))continue;I=z,V+=N*(z.flex/C);const $=V-B,ee=Math.round($);z.targetSize=ee,B+=ee}I&&(I.targetSize+=N-B);let j=0;for(const z of w){if(O(z))continue;const $=z.targetSize,ee=Math.min(Math.max($,z.min),z.max);j+=ee-$,z.violationType=ee===$?void 0:ee<$?"max":"min",z.targetSize=ee}const q=j===0?"all":j>0?"min":"max";for(const z of w)O(z)||(q==="all"||z.violationType===q)&&D(z,z.targetSize)}e.skipSetLeft||o.setLeftValues(t),e.updateBodyWidths&&o.updateBodyWidths();const M=w.filter(N=>N.isFlex&&!N.violationType).map(N=>N.col);if(e.fireResizedEvent){const N=w.filter(B=>B.initialSize!==B.frozenSize).map(B=>B.col),I=w.filter(B=>B.flex).map(B=>B.col);dispatchColumnResizedEvent(this.eventSvc,N,!0,t,I)}return this.revealColumns(u),M}revealColumns(e){this.columnsHidden&&(e?.revealColumns("colFlex"),this.columnsHidden=!1)}initCol(e){const{flex:t,initialFlex:n}=e.colDef;t!==void 0?e.flex=t:n!==void 0&&(e.flex=n)}setColFlex(e,t){e.flex=t??null,e.dispatchStateUpdatedEvent("flex")}},_parseBigIntOrNull=e=>{if(typeof e=="bigint")return e;let t;if(typeof e=="number")t=e;else if(typeof e=="string"&&(t=e.trim(),t===""||(t.endsWith("n")&&(t=t.slice(0,-1)),!/^[+-]?\d+$/.test(t))))return null;if(t==null)return null;try{return BigInt(t)}catch{return null}},DATE_TIME_SEPARATOR="T",DATE_TIME_SEPARATOR_REGEXP=new RegExp(`[${DATE_TIME_SEPARATOR} ]`),DATE_TIME_REGEXP=new RegExp(`^\\d{4}-\\d{2}-\\d{2}(${DATE_TIME_SEPARATOR}\\d{2}:\\d{2}:\\d{2}\\D?)?`);function _padStartWidthZeros(e,t){return e.toString().padStart(t,"0")}function _serialiseDate(e,t=!0,n=DATE_TIME_SEPARATOR){if(!e)return null;let o=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(u=>_padStartWidthZeros(u,2)).join("-");return t&&(o+=n+[e.getHours(),e.getMinutes(),e.getSeconds()].map(u=>_padStartWidthZeros(u,2)).join(":")),o}function _isValidDate(e,t=!1){return!!_parseDateTimeFromString(e,t)}function _isValidDateTime(e){return _isValidDate(e,!0)}function _parseDateTimeFromString(e,t=!1,n){if(!e||!DATE_TIME_REGEXP.test(e))return null;const[o,u]=e.split(DATE_TIME_SEPARATOR_REGEXP);if(!o)return null;const d=o.split("-").map(O=>Number.parseInt(O,10));if(d.filter(O=>!isNaN(O)).length!==3)return null;const[f,v,w]=d,E=new Date(f,v-1,w);if(E.getFullYear()!==f||E.getMonth()!==v-1||E.getDate()!==w||!u&&t)return null;if(!u||u==="00:00:00")return E;const[C,_,D]=u.split(":").map(O=>Number.parseInt(O,10));if(C>=0&&C<24)E.setHours(C);else if(t)return null;if(_>=0&&_<60)E.setMinutes(_);else if(t)return null;if(D>=0&&D<60)E.setSeconds(D);else if(t)return null;return E}function _getValueUsingField(e,t,n){if(!t||!e)return;if(!n)return e[t];const o=t.split(".");let u=e;for(let d=0;d<o.length;d++){if(u==null)return;u=u[o[d]]}return u}var SORTED_CELL_DATA_TYPES_FOR_MATCHING=["dateTimeString","dateString","text","number","bigint","boolean","date"],DataTypeService=class extends BeanStub{constructor(){super(...arguments),this.beanName="dataTypeSvc",this.dataTypeDefinitions={},this.isPendingInference=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[],this.columnDefinitionPropsPerDataType={number(){return{cellEditor:"agNumberCellEditor"}},bigint({filterModuleBean:e}){return e?{cellEditor:"agTextCellEditor"}:{cellEditor:"agTextCellEditor",comparator:{default:bigintComparator,absolute:bigintAbsoluteComparator}}},boolean(){return{cellEditor:"agCheckboxCellEditor",cellRenderer:"agCheckboxCellRenderer",getFindText:()=>null,suppressKeyboardEvent:({node:e,event:t,column:n})=>t.key===KeyCode.SPACE&&n.isCellEditable(e)}},date({formatValue:e}){return{cellEditor:"agDateCellEditor",keyCreator:e}},dateString({formatValue:e}){return{cellEditor:"agDateStringCellEditor",keyCreator:e}},dateTime(e){return this.date(e)},dateTimeString(e){return this.dateString(e)},object({formatValue:e,colModel:t,colId:n}){return{cellEditorParams:{useFormatter:!0},comparator:(o,u)=>{const d=t.getColDefCol(n),f=d?.getColDef();if(!d||!f)return 0;const v=o==null?"":e({column:d,node:null,value:o}),w=u==null?"":e({column:d,node:null,value:u});return v===w?0:v>w?1:-1},keyCreator:e}},text(){return{}}}}wireBeans(e){this.colModel=e.colModel}postConstruct(){this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.colModel.recreateColumnDefs(e)})}processDataTypeDefinitions(){const e=this.getDefaultDataTypes(),t={},n={},o=C=>_=>{const{column:D,node:O,value:M}=_;let N=D.getColDef().valueFormatter;return N===C.groupSafeValueFormatter&&(N=C.valueFormatter),this.beans.valueSvc.formatValue(D,O,M,N)};for(const C of Object.keys(e)){const _=e[C],D={..._,groupSafeValueFormatter:createGroupSafeValueFormatter(_,this.gos)};t[C]=D,n[C]=o(D)}const u=this.gos.get("dataTypeDefinitions")??{},d={};for(const C of Object.keys(u)){const _=u[C],D=this.processDataTypeDefinition(_,u,[C],e);D&&(t[C]=D,_.dataTypeMatcher&&(d[C]=_.dataTypeMatcher),n[C]=o(D))}const{valueParser:f,valueFormatter:v}=e.object,{valueParser:w,valueFormatter:E}=t.object;this.hasObjectValueParser=w!==f,this.hasObjectValueFormatter=E!==v,this.formatValueFuncs=n,this.dataTypeDefinitions=t,this.dataTypeMatchers=this.sortKeysInMatchers(d,e)}sortKeysInMatchers(e,t){const n={...e};for(const o of SORTED_CELL_DATA_TYPES_FOR_MATCHING)delete n[o],n[o]=e[o]??t[o].dataTypeMatcher;return n}processDataTypeDefinition(e,t,n,o){let u;const d=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let f=o[d];const v=t[d];if(f&&v&&(f=v),!validateDataTypeDefinition(e,f,d))return;u=mergeDataTypeDefinitions(f,e)}else{if(n.includes(d)){_warn(44);return}const f=t[d];if(!validateDataTypeDefinition(e,f,d))return;const v=this.processDataTypeDefinition(f,t,[...n,d],o);if(!v)return;u=mergeDataTypeDefinitions(v,e)}return{...u,groupSafeValueFormatter:createGroupSafeValueFormatter(u,this.gos)}}updateColDefAndGetColumnType(e,t,n){let{cellDataType:o}=t;o===void 0&&(o=e.cellDataType);const{field:u}=t;if((o==null||o===!0)&&(o=this.canInferCellDataType(e,t)?this.inferCellDataType(u,n):!1),this.addFormulaCellEditorToColDef(e,t),!o){e.cellDataType=!1;return}const d=this.dataTypeDefinitions[o];if(!d){_warn(47,{cellDataType:o});return}return e.cellDataType=o,d.groupSafeValueFormatter&&(e.valueFormatter=d.groupSafeValueFormatter),d.valueParser&&(e.valueParser=d.valueParser),d.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,o,d,n),d.columnTypes}addFormulaCellEditorToColDef(e,t){!(t.allowFormula??e.allowFormula)||t.cellEditor||(e.cellEditor="agFormulaCellEditor")}addColumnListeners(e){if(!this.isPendingInference)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const n=o=>{t.add(o.key)};e.__addEventListener("columnStateUpdated",n),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.__removeEventListener("columnStateUpdated",n))}canInferCellDataType(e,t){const{gos:n}=this;if(!_isClientSideRowModel(n))return!1;const o={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(doColDefPropsPreventInference(t,o))return!1;const u=t.type===null?e.type:t.type;if(u){const d=n.get("columnTypes")??{};if(convertColumnTypes(u).some(v=>{const w=d[v.trim()];return w&&doColDefPropsPreventInference(w,o)}))return!1}return!doColDefPropsPreventInference(e,o)}inferCellDataType(e,t){if(!e)return;let n;const o=this.getInitialData();if(o){const d=e.includes(".")&&!this.gos.get("suppressFieldDotNotation");n=_getValueUsingField(o,e,d)}else this.initWaitForRowData(t);return n==null?void 0:Object.keys(this.dataTypeMatchers).find(d=>this.dataTypeMatchers[d](n))??"object"}getInitialData(){const e=this.gos.get("rowData");if(e?.length)return e[0];if(this.initialData)return this.initialData;{const t=this.beans.rowModel.rootNode?._leafs;if(t?.length)return t[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isPendingInference)return;this.isPendingInference=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions,{colAutosize:n,eventSvc:o}=this.beans;t&&n&&(n.shouldQueueResizeOperations=!0);const[u]=this.addManagedEventListeners({rowDataUpdateStarted:d=>{const{firstRowData:f}=d;f&&(u?.(),this.isPendingInference=!1,this.processColumnsPendingInference(f,t),this.columnStateUpdatesPendingInference={},t&&n?.processResizeOperations(),o.dispatchEvent({type:"dataTypesInferred"}))}})}processColumnsPendingInference(e,t){this.initialData=e;const n=[];this.destroyColumnStateUpdateListeners();const o={},u={};for(const d of Object.keys(this.columnStateUpdatesPendingInference)){const f=this.columnStateUpdatesPendingInference[d],v=this.colModel.getCol(d);if(!v)continue;const w=v.getColDef();if(!this.resetColDefIntoCol(v,"cellDataTypeInferred"))continue;const E=v.getColDef();if(t&&E.type&&E.type!==w.type){const C=getUpdatedColumnState(v,f);C.rowGroup&&C.rowGroupIndex==null&&(o[d]=C),C.pivot&&C.pivotIndex==null&&(u[d]=C),n.push(C)}}t&&n.push(...this.generateColumnStateForRowGroupAndPivotIndexes(o,u)),n.length&&_applyColumnState(this.beans,{state:n},"cellDataTypeInferred"),this.initialData=null}generateColumnStateForRowGroupAndPivotIndexes(e,t){const n={},{rowGroupColsSvc:o,pivotColsSvc:u}=this.beans;return o?.restoreColumnOrder(n,e),u?.restoreColumnOrder(n,t),Object.values(n)}resetColDefIntoCol(e,t){const n=e.getUserProvidedColDef();if(!n)return!1;const o=_addColumnDefaultAndTypes(this.beans,n,e.getColId());return e.setColDef(o,n,t),!0}getDateStringTypeDefinition(e){const{dateString:t}=this.dataTypeDefinitions;return e?this.getDataTypeDefinition(e)??t:t}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDateIncludesTimeFlag(e){return e==="dateTime"||e==="dateTimeString"}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){return this.getDataTypeDefinition(e)?.baseDataType}checkType(e,t){if(t==null)return!0;const n=this.getDataTypeDefinition(e)?.dataTypeMatcher;return!n||e.getColDef().allowFormula&&this.beans.formula?.isFormula(t)?!0:n(t)}validateColDef(e){const t=n=>_warn(48,{property:n});if(e.cellDataType==="object"){const{object:n}=this.dataTypeDefinitions;e.valueFormatter===n.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&t("Formatter"),e.editable&&e.valueParser===n.valueParser&&!this.hasObjectValueParser&&t("Parser")}}postProcess(e){const t=e.cellDataType;if(!t||typeof t!="string")return;const{dataTypeDefinitions:n,beans:o,formatValueFuncs:u}=this,d=n[t];d&&o.colFilter?.setColDefPropsForDataType(e,d,u[t])}getFormatValue(e){return this.formatValueFuncs[e]}isColPendingInference(e){return this.isPendingInference&&!!this.columnStateUpdatesPendingInference[e]}setColDefPropertiesForBaseDataType(e,t,n,o){const u=this.formatValueFuncs[t],d=this.columnDefinitionPropsPerDataType[n.baseDataType]({colDef:e,cellDataType:t,colModel:this.colModel,dataTypeDefinition:n,colId:o,formatValue:u,filterModuleBean:this.beans.filterManager});e.cellEditor==="agFormulaCellEditor"&&d.cellEditor!==e.cellEditor&&(d.cellEditor=e.cellEditor),Object.assign(e,d)}getDateObjectTypeDef(e){const t=this.getLocaleTextFunc(),n=this.getDateIncludesTimeFlag(e);return{baseDataType:e,valueParser:o=>_parseDateTimeFromString(o.newValue&&String(o.newValue)),valueFormatter:o=>o.value==null?"":!(o.value instanceof Date)||isNaN(o.value.getTime())?t("invalidDate","Invalid Date"):_serialiseDate(o.value,n)??"",dataTypeMatcher:o=>o instanceof Date}}getDateStringTypeDef(e){const t=this.getDateIncludesTimeFlag(e);return{baseDataType:e,dateParser:n=>_parseDateTimeFromString(n)??void 0,dateFormatter:n=>_serialiseDate(n??null,t)??void 0,valueParser:n=>_isValidDate(String(n.newValue))?n.newValue:null,valueFormatter:n=>_isValidDate(String(n.value))?String(n.value):"",dataTypeMatcher:n=>typeof n=="string"&&_isValidDate(n)}}getDefaultDataTypes(){const e=this.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:t=>t.newValue?.trim?.()===""?null:Number(t.newValue),valueFormatter:t=>t.value==null?"":typeof t.value!="number"||isNaN(t.value)?e("invalidNumber","Invalid Number"):String(t.value),dataTypeMatcher:t=>typeof t=="number"},bigint:{baseDataType:"bigint",valueParser:t=>{const{newValue:n}=t;return n==null||typeof n=="string"&&n.trim()===""?null:_parseBigIntOrNull(n)},valueFormatter:t=>t.value==null?"":typeof t.value!="bigint"?e("invalidBigInt","Invalid BigInt"):String(t.value),dataTypeMatcher:t=>typeof t=="bigint"},text:{baseDataType:"text",valueParser:t=>t.newValue===""?null:_toStringOrNull(t.newValue),dataTypeMatcher:t=>typeof t=="string"},boolean:{baseDataType:"boolean",valueParser:t=>t.newValue==null?t.newValue:t.newValue?.trim?.()===""?null:String(t.newValue).toLowerCase()==="true",valueFormatter:t=>t.value==null?"":String(t.value),dataTypeMatcher:t=>typeof t=="boolean"},date:this.getDateObjectTypeDef("date"),dateString:this.getDateStringTypeDef("dateString"),dateTime:this.getDateObjectTypeDef("dateTime"),dateTimeString:{...this.getDateStringTypeDef("dateTimeString"),dataTypeMatcher:t=>typeof t=="string"&&_isValidDateTime(t)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:t=>_toStringOrNull(t.value)??""}}}destroyColumnStateUpdateListeners(){for(const e of this.columnStateUpdateListenerDestroyFuncs)e();this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}};function mergeDataTypeDefinitions(e,t){const n={...e,...t};return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(n.columnTypes=[...convertColumnTypes(e.columnTypes),...convertColumnTypes(t.columnTypes)]),n}function validateDataTypeDefinition(e,t,n){return t?t.baseDataType!==e.baseDataType?(_warn(46),!1):!0:(_warn(45,{parentCellDataType:n}),!1)}var isNumberOrBigintType=e=>typeof e=="bigint"||typeof e=="number",isNumberOrBigintBaseDataType=e=>e==="number"||e==="bigint";function createGroupSafeValueFormatter(e,t){if(e.valueFormatter)return n=>{const{node:o,colDef:u,column:d,value:f}=n;if(o?.group){const v=(u.pivotValueColumn??d).getAggFunc();if(v){if(v==="first"||v==="last")return e.valueFormatter(n);const{baseDataType:w}=e;if(isNumberOrBigintBaseDataType(w)&&v!=="count"){if(isNumberOrBigintType(f))return e.valueFormatter(n);if(f==null)return;if(typeof f=="object"){if(typeof f.toNumber=="function")return e.valueFormatter({...n,value:f.toNumber()});if("value"in f)return e.valueFormatter({...n,value:f.value})}}return}}else if(t.get("groupHideOpenParents")&&n.column.isRowGroupActive()&&typeof n.value=="string"&&!e.dataTypeMatcher?.(n.value))return;return e.valueFormatter(n)}}function doesColDefPropPreventInference(e,t,n,o){if(!t[n])return!1;const u=e[n];return u===null?(t[n]=!1,!1):o===void 0?!!u:u===o}function bigintComparator(e,t){if(e==null)return t==null?0:-1;if(t==null)return 1;const n=_parseBigIntOrNull(e),o=_parseBigIntOrNull(t);return n!=null&&o!=null?n===o?0:n>o?1:-1:0}function bigintAbsoluteComparator(e,t){if(e==null)return t==null?0:-1;if(t==null)return 1;const n=toAbsoluteBigInt(e),o=toAbsoluteBigInt(t);return n!=null&&o!=null?n===o?0:n>o?1:-1:0}function toAbsoluteBigInt(e){const t=_parseBigIntOrNull(e);return t==null?null:t<0n?-t:t}function doColDefPropsPreventInference(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([n,o])=>doesColDefPropPreventInference(e,t,n,o))}function getUpdatedColumnState(e,t){const n=getColumnStateFromColDef(e);for(const o of t)delete n[o],o==="rowGroup"?delete n.rowGroupIndex:o==="pivot"&&delete n.pivotIndex;return n}var DataTypeModule={moduleName:"DataType",version:VERSION,beans:[DataTypeService],dependsOn:[CheckboxCellRendererModule]},ColumnFlexModule={moduleName:"ColumnFlex",version:VERSION,beans:[ColumnFlexService]},ColumnNameService=class extends BeanStub{constructor(){super(...arguments),this.beanName="colNames"}getDisplayNameForColumn(e,t,n=!1){if(!e)return null;const o=this.getHeaderName(e.getColDef(),e,null,null,t),{aggColNameSvc:u}=this.beans;return n&&u?u.getHeaderName(e,o):o}getDisplayNameForProvidedColumnGroup(e,t,n){const o=t?.getColGroupDef();return o?this.getHeaderName(o,null,e,t,n):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,n,o,u){const d=e.headerValueGetter;if(d){const f=_addGridCommonParams(this.gos,{colDef:e,column:t,columnGroup:n,providedColumnGroup:o,location:u});return typeof d=="function"?d(f):typeof d=="string"?this.beans.expressionSvc?.evaluate(d,f)??null:""}else{if(e.headerName!=null)return e.headerName;if(e.field)return _camelCaseToHumanText(e.field)}return""}},ColumnViewportService=class extends BeanStub{constructor(){super(...arguments),this.beanName="colViewport",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.columnsToRenderLeft=[],this.columnsToRenderRight=[],this.columnsToRenderCenter=[]}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}getScrollPosition(){return this.scrollPosition}setScrollPosition(e,t,n=!1){const{visibleCols:o}=this,u=o.isBodyWidthDirty;if(!(e===this.scrollWidth&&t===this.scrollPosition&&!u)){if(this.scrollWidth=e,this.scrollPosition=t,o.isBodyWidthDirty=!0,this.gos.get("enableRtl")){const f=o.bodyWidth;this.viewportLeft=f-t-e,this.viewportRight=f-t}else this.viewportLeft=t,this.viewportRight=e+t;this.colModel.ready&&this.checkViewportColumns(n)}}getColumnHeadersToRender(e){switch(e){case"left":return this.columnsToRenderLeft;case"right":return this.columnsToRenderRight;default:return this.columnsToRenderCenter}}getHeadersToRender(e,t){let n;switch(e){case"left":n=this.rowsOfHeadersToRenderLeft[t];break;case"right":n=this.rowsOfHeadersToRenderRight[t];break;default:n=this.rowsOfHeadersToRenderCenter[t];break}return n??[]}extractViewportColumns(){const e=this.visibleCols.centerCols;this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()||isAnyParentAutoHeaderHeight(e)?!0:this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,n=t+e.getActualWidth(),o=this.viewportLeft-200,u=this.viewportRight+200,d=t<o&&n<o,f=t>u&&n>u;return!d&&!f}getViewportColumns(){const{leftCols:e,rightCols:t}=this.visibleCols;return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.colModel.colSpanActive)return this.colsWithinViewport;const t=d=>{const f=d.getLeft();return _exists(f)&&f>this.viewportLeft},n=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),{visibleCols:o}=this,u=o.centerCols;return o.getColsForRow(e,u,n,t)}checkViewportColumns(e=!1){this.extractViewport()&&this.eventSvc.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}calculateHeaderRows(){const{leftCols:e,rightCols:t}=this.visibleCols;this.columnsToRenderLeft=e,this.columnsToRenderRight=t,this.columnsToRenderCenter=this.colsWithinViewport;const n=o=>{const u=new Set,d={};for(const f of o){let v=f.getParent();const w=f.isSpanHeaderHeight();for(;v&&!u.has(v);){if(w&&v.isPadding()){v=v.getParent();continue}const C=v.getProvidedColumnGroup().getLevel();d[C]??(d[C]=[]),d[C].push(v),u.add(v),v=v.getParent()}}return d};this.rowsOfHeadersToRenderLeft=n(e),this.rowsOfHeadersToRenderRight=n(t),this.rowsOfHeadersToRenderCenter=n(this.headerColsWithinViewport)}extractViewport(){const e=o=>`${o.getId()}-${o.getPinned()||"normal"}`;this.extractViewportColumns();const t=this.getViewportColumns().map(e).join("#"),n=this.colsWithinViewportHash!==t;return n&&(this.colsWithinViewportHash=t,this.calculateHeaderRows()),n}};function isAnyParentAutoHeaderHeight(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}var AgComponentUtils=class extends BeanStub{constructor(){super(...arguments),this.beanName="agCompUtils"}adaptFunction(e,t){if(!e.cellRenderer)return null;class n{refresh(){return!1}getGui(){return this.eGui}init(u){const d=t(u),f=typeof d;if(f==="string"||f==="number"||f==="boolean"){this.eGui=_loadTemplate("<span>"+d+"</span>");return}if(d==null){this.eGui=_createElement({tag:"span"});return}this.eGui=d}}return n}},CellRendererFunctionModule={moduleName:"CellRendererFunction",version:VERSION,beans:[AgComponentUtils]},BaseRegistry=class extends AgBeanStub{constructor(){super(...arguments),this.beanName="registry"}registerDynamicBeans(e){if(e){this.dynamicBeans??(this.dynamicBeans={});for(const t of Object.keys(e))this.dynamicBeans[t]=e[t]}}createDynamicBean(e,t,...n){if(!this.dynamicBeans)throw new Error(this.getDynamicError(e,!0));const o=this.dynamicBeans[e];if(o==null){if(t)throw new Error(this.getDynamicError(e,!1));return}return new o(...n)}};function isComponentMetaFunc(e){return typeof e=="object"&&!!e.getComp}var Registry=class extends BaseRegistry{constructor(){super(...arguments),this.agGridDefaults={},this.agGridDefaultOverrides={},this.jsComps={},this.selectors={},this.icons={}}postConstruct(){const e=this.gos.get("components");if(e!=null)for(const t of Object.keys(e))this.jsComps[t]=e[t]}registerModule(e){const{icons:t,userComponents:n,dynamicBeans:o,selectors:u}=e;if(n){const d=(f,v,w,E)=>{this.agGridDefaults[f]=v,(w||E)&&(this.agGridDefaultOverrides[f]={params:w,processParams:E})};for(const f of Object.keys(n)){let v=n[f];if(isComponentMetaFunc(v)&&(v=v.getComp(this.beans)),typeof v=="object"){const{classImp:w,params:E,processParams:C}=v;d(f,w,E,C)}else d(f,v)}}this.registerDynamicBeans(o);for(const d of u??[])this.selectors[d.selector]=d;if(t)for(const d of Object.keys(t))this.icons[d]=t[d]}getUserComponent(e,t){const n=(v,w,E,C)=>({componentFromFramework:w,component:v,params:E,processParams:C}),{frameworkOverrides:o}=this.beans,u=o.frameworkComponent(t,this.gos.get("components"));if(u!=null)return n(u,!0);const d=this.jsComps[t];if(d){const v=o.isFrameworkComponent(d);return n(d,v)}const f=this.agGridDefaults[t];if(f){const v=this.agGridDefaultOverrides[t];return n(f,!1,v?.params,v?.processParams)}return this.beans.validation?.missingUserComponent(e,t,this.agGridDefaults,this.jsComps),null}getSelector(e){return this.selectors[e]}getIcon(e){return this.icons[e]}getDynamicError(e,t){return t?_errMsg(279,{name:e}):this.beans.validation?.missingDynamicBean(e)??_errMsg(256)}},NUM_CTRLS=23,CtrlsService=class extends BeanStub{constructor(){super(...arguments),this.beanName="ctrlsSvc",this.params={},this.ready=!1,this.readyCallbacks=[]}postConstruct(){this.addEventListener("ready",()=>{if(this.updateReady(),this.ready){for(const e of this.readyCallbacks)e(this.params);this.readyCallbacks.length=0}},this.beans.frameworkOverrides.runWhenReadyAsync?.()??!1)}updateReady(){const e=Object.values(this.params);this.ready=e.length===NUM_CTRLS&&e.every(t=>t?.isAlive()??!1)}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc(()=>{const n=this.readyCallbacks.indexOf(t);n>=0&&this.readyCallbacks.splice(n,1)})}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc(()=>{this.updateReady()})}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader:e,centerHeader:t,rightHeader:n}=this.params;return[e,n,t]}getHeaderRowContainerCtrl(e){const t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}getScrollFeature(){return this.getGridBodyCtrl().scrollFeature}},sharedCSS=':where([class^=ag-]),:where([class^=ag-]):after,:where([class^=ag-]):before{box-sizing:border-box}:where([class^=ag-]):where(button){color:inherit}:where([class^=ag-]):where(div,span,label):focus-visible{box-shadow:inset var(--ag-focus-shadow);outline:none;&:where(.invalid){box-shadow:inset var(--ag-focus-error-shadow)}}:where([class^=ag-]) ::-ms-clear{display:none}.ag-hidden{display:none!important}.ag-invisible{visibility:hidden!important}.ag-tab-guard{display:block;height:0;position:absolute;width:0}.ag-tab-guard-top{top:1px}.ag-tab-guard-bottom{bottom:1px}.ag-measurement-container{height:0;overflow:hidden;visibility:hidden;width:0}.ag-measurement-element-border{display:inline-block}.ag-measurement-element-border:before{border-left:var(--ag-internal-measurement-border);content:"";display:block}.ag-popup-child{top:0;z-index:5}.ag-popup-child:where(:not(.ag-tooltip-custom)){box-shadow:var(--ag-popup-shadow)}.ag-input-wrapper,.ag-picker-field-wrapper{align-items:center;display:flex;flex:1 1 auto;line-height:normal;position:relative}.ag-input-field{align-items:center;display:flex;flex-direction:row}.ag-input-field-input:where(:not([type=checkbox],[type=radio])){flex:1 1 auto;min-width:0;width:100%}.ag-chart,.ag-dnd-ghost,.ag-external,.ag-popup,.ag-root-wrapper{cursor:default;line-height:normal;white-space:normal;-webkit-font-smoothing:antialiased;background-color:var(--ag-background-color);color:var(--ag-text-color);color-scheme:var(--ag-browser-color-scheme);font-family:var(--ag-font-family);font-size:var(--ag-font-size);--ag-indentation-level:0}:where(.ag-icon):before{align-items:center;background-color:currentcolor;color:inherit;content:"";display:flex;font-family:inherit;font-size:var(--ag-icon-size);font-style:normal;font-variant:normal;height:var(--ag-icon-size);justify-content:center;line-height:var(--ag-icon-size);-webkit-mask-size:contain;mask-size:contain;text-transform:none;width:var(--ag-icon-size)}.ag-icon{background-position:50%;background-repeat:no-repeat;background-size:contain;color:var(--ag-icon-color);display:block;height:var(--ag-icon-size);position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-icon-size)}.ag-disabled .ag-icon,[disabled] .ag-icon{opacity:.5}.ag-icon-grip.ag-disabled,.ag-icon-grip[disabled]{opacity:.35}.ag-resizer{pointer-events:none;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:1}:where(.ag-resizer){&.ag-resizer-topLeft{cursor:nwse-resize;height:5px;left:0;top:0;width:5px}&.ag-resizer-top{cursor:ns-resize;height:5px;left:5px;right:5px;top:0}&.ag-resizer-topRight{cursor:nesw-resize;height:5px;right:0;top:0;width:5px}&.ag-resizer-right{bottom:5px;cursor:ew-resize;right:0;top:5px;width:5px}&.ag-resizer-bottomRight{bottom:0;cursor:nwse-resize;height:5px;right:0;width:5px}&.ag-resizer-bottom{bottom:0;cursor:ns-resize;height:5px;left:5px;right:5px}&.ag-resizer-bottomLeft{bottom:0;cursor:nesw-resize;height:5px;left:0;width:5px}&.ag-resizer-left{bottom:5px;cursor:ew-resize;left:0;top:5px;width:5px}}.ag-menu{background-color:var(--ag-menu-background-color);border:var(--ag-menu-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-menu-shadow);color:var(--ag-menu-text-color);max-height:100%;overflow-y:auto;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}',IS_SSR=typeof window!="object"||!window?.document?.fonts?.forEach,FORCE_LEGACY_THEMES=!1,_injectGlobalCSS=(e,t,n,o,u,d,f=!1)=>{if(IS_SSR||FORCE_LEGACY_THEMES)return;o&&(e=`@layer ${CSS.escape(o).replaceAll("\\.",".")} { ${e} }`);let v=injectionState.map.get(t);if(v||(v=[],injectionState.map.set(t,v)),v.some(_=>_.css===e))return;const w=document.createElement("style");d&&w.setAttribute("nonce",d),w.dataset.agGlobalCss=n,w.textContent=e;const E={css:e,el:w,priority:u,isParams:f};let C;for(const _ of v){if(_.priority>u)break;C=_}if(C){C.el.after(w);const _=v.indexOf(C);v.splice(_+1,0,E)}else t.nodeName==="STYLE"?t.after(w):t.insertBefore(w,t.querySelector(":not(title, meta)")),v.push(E)},_injectCoreAndModuleCSS=(e,t,n,o)=>{_injectGlobalCSS(sharedCSS,e,"shared",t,0,n),o?.forEach((u,d)=>u.forEach(f=>_injectGlobalCSS(f,e,d,t,0,n)))},_useParamsCss=(e,t,n,o,u,d)=>{if(IS_SSR||FORCE_LEGACY_THEMES)return;const f=injectionState.grids.get(e);f?f.paramsCss=t:injectionState.grids.set(e,{styleContainer:o,paramsCss:t}),removeStaleParamsCss(o),t&&n&&_injectGlobalCSS(t,o,n,u,2,d,!0)},_unregisterInstanceUsingThemingAPI=e=>{const t=injectionState.grids.get(e)?.styleContainer;if(!t)return;injectionState.grids.delete(e),Array.from(injectionState.grids.values()).some(o=>o.styleContainer===t)?removeStaleParamsCss(t):(removeStaleParamsCss(t,!0),injectionState.map.delete(t))},removeStaleParamsCss=(e,t=!1)=>{const n=new Set;for(const u of injectionState.grids.values())u.styleContainer===e&&n.add(u.paramsCss);const o=injectionState.map.get(e)??[];for(let u=o.length-1;u>=0;u--)(t||o[u].isParams&&!n.has(o[u].css))&&(o[u].el.remove(),o.splice(u,1))},_a,injectionState=(_a=typeof window=="object"?window:{}).agStyleInjectionState??(_a.agStyleInjectionState={map:new WeakMap,grids:new Map}),createPart=e=>new PartImpl(e),defaultModeName="$default",partCounter=0,PartImpl=class{constructor({feature:e,params:t,modeParams:n={},css:o,cssImports:u}){this.feature=e,this.css=o,this.cssImports=u,this.modeParams={[defaultModeName]:{...n[defaultModeName]??{},...t??{}},...n}}use(e,t,n){let o=this._inject;if(o==null){let{css:u}=this;if(u){const d=`ag-theme-${this.feature??"part"}-${++partCounter}`;typeof u=="function"&&(u=u()),u=`:where(.${d}) {
${u}
}
`;for(const f of this.cssImports??[])u=`@import url(${JSON.stringify(f)});
${u}`;o={css:u,class:d}}else o=!1;this._inject=o}return o&&e&&_injectGlobalCSS(o.css,e,o.class,t,1,n),o?o.class:!1}},kebabCase=e=>e.replace(/[A-Z]|\d+/g,t=>`-${t}`).toLowerCase(),paramToVariableName=e=>`--ag-${kebabCase(e)}`,paramToVariableExpression=e=>`var(${paramToVariableName(e)})`,clamp=(e,t,n)=>Math.max(t,Math.min(n,e)),memoize=e=>{const t=new Map;return n=>{const o=n;return t.has(o)||t.set(o,e(n)),t.get(o)}},accentMix=e=>({ref:"accentColor",mix:e}),foregroundMix=e=>({ref:"foregroundColor",mix:e}),foregroundBackgroundMix=e=>({ref:"foregroundColor",mix:e,onto:"backgroundColor"}),foregroundHeaderBackgroundMix=e=>({ref:"foregroundColor",mix:e,onto:"headerBackgroundColor"}),backgroundColor={ref:"backgroundColor"},foregroundColor={ref:"foregroundColor"},accentColor={ref:"accentColor"},defaultLightColorSchemeParams={backgroundColor:"#fff",foregroundColor:"#181d1f",borderColor:foregroundMix(.15),chromeBackgroundColor:foregroundBackgroundMix(.02),browserColorScheme:"light"},sharedDefaults={...defaultLightColorSchemeParams,textColor:foregroundColor,accentColor:"#2196f3",invalidColor:"#e02525",fontFamily:["-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"],subtleTextColor:{ref:"textColor",mix:.5},borderWidth:1,borderRadius:4,spacing:8,fontSize:14,focusShadow:{spread:3,color:accentMix(.5)},focusErrorShadow:{spread:3,color:{ref:"invalidColor",onto:"backgroundColor",mix:.5}},popupShadow:"0 0 16px #00000026",cardShadow:"0 1px 4px 1px #00000018",dropdownShadow:{ref:"cardShadow"},listItemHeight:{calc:"max(iconSize, dataFontSize) + widgetVerticalSpacing"},dragAndDropImageBackgroundColor:backgroundColor,dragAndDropImageBorder:!0,dragAndDropImageNotAllowedBorder:{color:{ref:"invalidColor",onto:"dragAndDropImageBackgroundColor",mix:.5}},dragAndDropImageShadow:{ref:"popupShadow"},iconSize:16,iconColor:"inherit",toggleButtonWidth:28,toggleButtonHeight:18,toggleButtonOnBackgroundColor:accentColor,toggleButtonOffBackgroundColor:foregroundBackgroundMix(.3),toggleButtonSwitchBackgroundColor:backgroundColor,toggleButtonSwitchInset:2,tooltipBackgroundColor:{ref:"chromeBackgroundColor"},tooltipErrorBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.1},tooltipTextColor:{ref:"textColor"},tooltipErrorTextColor:{ref:"invalidColor"},tooltipBorder:!0,tooltipErrorBorder:{color:{ref:"invalidColor",onto:"backgroundColor",mix:.25}},panelBackgroundColor:backgroundColor,panelTitleBarHeight:{ref:"headerHeight"},panelTitleBarBackgroundColor:{ref:"headerBackgroundColor"},panelTitleBarIconColor:{ref:"headerTextColor"},panelTitleBarTextColor:{ref:"headerTextColor"},panelTitleBarFontFamily:{ref:"headerFontFamily"},panelTitleBarFontSize:{ref:"headerFontSize"},panelTitleBarFontWeight:{ref:"headerFontWeight"},panelTitleBarBorder:!0,dialogShadow:{ref:"popupShadow"},dialogBorder:{color:foregroundMix(.2)},widgetContainerHorizontalPadding:{calc:"spacing * 1.5"},widgetContainerVerticalPadding:{calc:"spacing * 1.5"},widgetHorizontalSpacing:{calc:"spacing * 1.5"},widgetVerticalSpacing:{ref:"spacing"},dataFontSize:{ref:"fontSize"},headerBackgroundColor:{ref:"chromeBackgroundColor"},headerFontFamily:{ref:"fontFamily"},headerFontSize:{ref:"fontSize"},headerFontWeight:500,headerTextColor:{ref:"textColor"},headerHeight:{calc:"max(iconSize, dataFontSize) + spacing * 4 * headerVerticalPaddingScale"},headerVerticalPaddingScale:1,menuBorder:{color:foregroundMix(.2)},menuBackgroundColor:foregroundBackgroundMix(.03),menuTextColor:foregroundBackgroundMix(.95),menuShadow:{ref:"popupShadow"},menuSeparatorColor:{ref:"borderColor"}},paramTypes=["colorScheme","color","length","scale","borderStyle","border","shadow","image","fontFamily","fontWeight","duration"],getParamType=memoize(e=>(e=e.toLowerCase(),paramTypes.find(t=>e.endsWith(t.toLowerCase()))??"length")),literalToCSS=e=>typeof e=="object"&&e?.ref?paramToVariableExpression(e.ref):typeof e=="string"?e:typeof e=="number"?String(e):!1,colorValueToCss=e=>{if(typeof e=="string")return e;if(typeof e=="object"&&e&&"ref"in e){const t=paramToVariableExpression(e.ref);return e.mix==null?t:`color-mix(in srgb, ${e.onto?paramToVariableExpression(e.onto):"transparent"}, ${t} ${clamp(e.mix*100,0,100)}%)`}return!1},colorSchemeValueToCss=literalToCSS,lengthValueToCss=e=>typeof e=="string"?e:typeof e=="number"?`${e}px`:typeof e=="object"&&e&&"calc"in e?`calc(${e.calc.replace(/ ?[*/+] ?/g," $& ").replace(/-?\b[a-z][a-z0-9]*\b(?![-(])/gi,n=>n[0]==="-"?n:" "+paramToVariableExpression(n)+" ")})`:typeof e=="object"&&e&&"ref"in e?paramToVariableExpression(e.ref):!1,scaleValueToCss=literalToCSS,borderValueToCss=(e,t)=>typeof e=="string"?e:e===!0?borderValueToCss({},t):e===!1?t==="columnBorder"?borderValueToCss({color:"transparent"},t):"none":typeof e=="object"&&e&&"ref"in e?paramToVariableExpression(e.ref):borderStyleValueToCss(e.style??"solid")+" "+lengthValueToCss(e.width??{ref:"borderWidth"})+" "+colorValueToCss(e.color??{ref:"borderColor"}),shadowValueParamsToCss=e=>[lengthValueToCss(e.offsetX??0),lengthValueToCss(e.offsetY??0),lengthValueToCss(e.radius??0),lengthValueToCss(e.spread??0),colorValueToCss(e.color??{ref:"foregroundColor"}),...e.inset?["inset"]:[]].join(" "),shadowValueToCss=e=>typeof e=="string"?e:e===!1?"none":typeof e=="object"&&e&&"ref"in e?paramToVariableExpression(e.ref):Array.isArray(e)?e.map(shadowValueParamsToCss).join(", "):shadowValueParamsToCss(e),borderStyleValueToCss=literalToCSS,fontFamilyValueToCss=e=>typeof e=="string"?e.includes(",")?e:quoteUnsafeChars(e):typeof e=="object"&&e&&"googleFont"in e?fontFamilyValueToCss(e.googleFont):typeof e=="object"&&e&&"ref"in e?paramToVariableExpression(e.ref):Array.isArray(e)?e.map(t=>(typeof t=="object"&&"googleFont"in t&&(t=t.googleFont),quoteUnsafeChars(t))).join(", "):!1,quoteUnsafeChars=e=>/^[\w-]+$|\w\(/.test(e)?e:JSON.stringify(e),fontWeightValueToCss=literalToCSS,imageValueToCss=e=>typeof e=="string"?e:typeof e=="object"&&e&&"url"in e?`url(${JSON.stringify(e.url)})`:typeof e=="object"&&e&&"svg"in e?imageValueToCss({url:`data:image/svg+xml,${encodeURIComponent(e.svg)}`}):typeof e=="object"&&e&&"ref"in e?paramToVariableExpression(e.ref):!1,durationValueToCss=(e,t,n)=>typeof e=="string"?e:typeof e=="number"?(e>=10&&n.warn(104,{value:e,param:t}),`${e}s`):typeof e=="object"&&e&&"ref"in e?paramToVariableExpression(e.ref):!1,paramValidators={color:colorValueToCss,colorScheme:colorSchemeValueToCss,length:lengthValueToCss,scale:scaleValueToCss,border:borderValueToCss,borderStyle:borderStyleValueToCss,shadow:shadowValueToCss,image:imageValueToCss,fontFamily:fontFamilyValueToCss,fontWeight:fontWeightValueToCss,duration:durationValueToCss},paramValueToCss=(e,t,n)=>{const o=getParamType(e);return paramValidators[o](t,e,n)},paramsId=0,createSharedTheme=(e,t)=>new ThemeImpl({themeLogger:e,overridePrefix:t}),ThemeImpl=class Sp{constructor(t,n=[]){this.params=t,this.parts=n}withPart(t){return typeof t=="function"&&(t=t()),t instanceof PartImpl?new Sp(this.params,[...this.parts,t]):(this.params.themeLogger.preInitErr(259,"Invalid part",{part:t}),this)}withoutPart(t){return this.withPart(createPart({feature:t}))}withParams(t,n=defaultModeName){return this.withPart(createPart({modeParams:{[n]:t}}))}_startUse({styleContainer:t,cssLayer:n,nonce:o,loadThemeGoogleFonts:u,moduleCss:d}){if(IS_SSR)return;uninstallLegacyCSS(),_injectCoreAndModuleCSS(t,n,o,d);const f=getGoogleFontsUsed(this);if(f.length>0)for(const v of f)u&&loadGoogleFont(v,o);for(const v of this.parts)v.use(t,n,o)}_getCssClass(){return this._cssClassCache??(this._cssClassCache=deduplicatePartsByFeature(this.parts).map(t=>t.use(void 0,void 0,void 0)).filter(Boolean).concat(this._getParamsClassName()).join(" "))}_getParamsClassName(){return this._paramsClassName??(this._paramsClassName=`ag-theme-params-${++paramsId}`)}_getModeParams(){let t=this._paramsCache;if(!t){const n={[defaultModeName]:{...sharedDefaults}};for(const o of deduplicatePartsByFeature(this.parts))for(const u of Object.keys(o.modeParams)){const d=o.modeParams[u];if(d){const f=n[u]??(n[u]={}),v=new Set;for(const w of Object.keys(d)){const E=d[w];E!==void 0&&(f[w]=E,v.add(w))}if(u===defaultModeName)for(const w of Object.keys(n)){const E=n[w];if(w!==defaultModeName)for(const C of v)delete E[C]}}}this._paramsCache=t=n}return t}_getParamsCss(){if(!this._paramsCssCache){let t="",n="";const o=this._getModeParams(),{overridePrefix:u,themeLogger:d}=this.params,f=u?`--ag-${u}-`:void 0;for(const E of Object.keys(o)){const C=o[E];if(E!==defaultModeName){const D=`:where([data-ag-theme-mode="${typeof CSS=="object"?CSS.escape(E):E}"]) & {
`;t+=D,n+=D}for(const _ of Object.keys(C).sort()){const D=C[_],O=paramValueToCss(_,D,d);if(O===!1)d.error(107,{key:_,value:D});else{const M=paramToVariableName(_),N=f?M.replace("--ag-",f):M,I=M.replace("--ag-","--ag-inherited-");t+=`	${M}: var(${I}, ${O});
`,n+=`	${I}: var(${N});
`}}E!==defaultModeName&&(t+=`}
`,n+=`}
`)}const v=`:where(.${this._getParamsClassName()})`;let w=`${v} {
${t}}
`;w+=`:has(> ${v}):not(${v}) {
${n}}
`,this._paramsCssCache=w}return this._paramsCssCache}},deduplicatePartsByFeature=e=>{const t=new Map;for(const o of e)t.set(o.feature,o);const n=[];for(const o of e)(!o.feature||t.get(o.feature)===o)&&n.push(o);return n},getGoogleFontsUsed=e=>{const t=new Set,n=d=>{if(Array.isArray(d))d.forEach(n);else{const f=d?.googleFont;typeof f=="string"&&t.add(f)}};return Object.values(e._getModeParams()).flatMap(d=>Object.values(d)).forEach(n),Array.from(t).sort()},uninstalledLegacyCSS=!1,uninstallLegacyCSS=()=>{if(!uninstalledLegacyCSS){uninstalledLegacyCSS=!0;for(const e of Array.from(document.head.querySelectorAll('style[data-ag-scope="legacy"]')))e.remove()}},loadGoogleFont=async(e,t)=>{const n=`@import url('https://${googleFontsDomain}/css2?family=${encodeURIComponent(e)}:wght@100;200;300;400;500;600;700;800;900&display=swap');
`;_injectGlobalCSS(n,document.head,`googleFont:${e}`,void 0,0,t)},googleFontsDomain="fonts.googleapis.com",LIST_ITEM_HEIGHT={changeKey:"listItemHeight",type:"length",defaultValue:24},BaseEnvironment=class extends AgBeanStub{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.sizesMeasured=!1,this.globalCSS=[]}wireBeans(e){this.eRootDiv=e.eRootDiv}postConstruct(){const{gos:e,eRootDiv:t}=this;e.setInstanceDomData(t);const n=e.get("themeStyleContainer"),o=typeof ShadowRoot<"u",u=o&&t.getRootNode()instanceof ShadowRoot;this.eStyleContainer=(typeof n=="function"?n():n)??(u?t:document.head),!n&&!u&&o&&warnOnAttachToShadowRoot(t,this.shadowRootError.bind(this),this.addDestroyFunc.bind(this)),this.cssLayer=e.get("themeCssLayer"),this.styleNonce=e.get("styleNonce"),this.addManagedPropertyListener("theme",()=>this.handleThemeChange()),this.handleThemeChange(),this.getSizeEl(LIST_ITEM_HEIGHT),this.initVariables(),this.addDestroyFunc(()=>_unregisterInstanceUsingThemingAPI(this)),this.mutationObserver=new MutationObserver(()=>{this.fireStylesChangedEvent("theme")}),this.addDestroyFunc(()=>this.mutationObserver.disconnect())}applyThemeClasses(e,t=[]){const{theme:n}=this,o=n?n._getCssClass():this.applyLegacyThemeClasses();for(const u of Array.from(e.classList))u.startsWith("ag-theme-")&&e.classList.remove(u);if(o){const u=e.className;e.className=`${u}${u?" ":""}${o}${t?.length?" "+t.join(" "):""}`}}applyLegacyThemeClasses(){let e="";this.mutationObserver.disconnect();let t=this.eRootDiv;for(;t;){let n=!1;for(const o of Array.from(t.classList))o.startsWith("ag-theme-")&&(n=!0,e=e?`${e} ${o}`:o);n&&this.mutationObserver.observe(t,{attributes:!0,attributeFilter:["class"]}),t=t.parentElement}return e}addGlobalCSS(e,t){this.theme?_injectGlobalCSS(e,this.eStyleContainer,t,this.cssLayer,0,this.styleNonce):this.globalCSS.push([e,t])}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(LIST_ITEM_HEIGHT)}getCSSVariablePixelValue(e){const t=this.lastKnownValues.get(e);if(t!=null)return t;const n=this.measureSizeEl(e);return n==="detached"||n==="no-styles"?(e.cacheDefault&&this.lastKnownValues.set(e,e.defaultValue),e.defaultValue):(this.lastKnownValues.set(e,n),n)}measureSizeEl(e){const t=this.getSizeEl(e);if(t.offsetParent==null)return"detached";const n=t.offsetWidth;return n===NO_VALUE_SENTINEL?"no-styles":(this.sizesMeasured=!0,n)}getMeasurementContainer(){let e=this.eMeasurementContainer;return e||(e=this.eMeasurementContainer=_createAgElement({tag:"div",cls:"ag-measurement-container"}),this.eRootDiv.appendChild(e)),e}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;const n=this.getMeasurementContainer();t=_createAgElement({tag:"div"});const o=this.setSizeElStyles(t,e);n.appendChild(t),this.sizeEls.set(e,t);const{type:u,noWarn:d}=e;if(u!=="length"&&u!=="border")return t;let f=this.measureSizeEl(e);f==="no-styles"&&!d&&this.varError(o,e.defaultValue);const v=_observeResize(this.beans,t,()=>{const w=this.measureSizeEl(e);w==="detached"||w==="no-styles"||(this.lastKnownValues.set(e,w),w!==f&&(f=w,this.fireStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>v()),t}setSizeElStyles(e,t){const{changeKey:n,type:o}=t;let u=paramToVariableName(n);return o==="border"?(u.endsWith("-width")&&(u=u.slice(0,-6)),e.className="ag-measurement-element-border",e.style.setProperty("--ag-internal-measurement-border",`var(${u}, solid ${NO_VALUE_SENTINEL}px)`)):e.style.width=`var(${u}, ${NO_VALUE_SENTINEL}px)`,u}handleThemeChange(){const{gos:e,theme:t}=this,n=e.get("theme");let o;if(n==="legacy")o=void 0;else{const u=n??this.getDefaultTheme();u instanceof ThemeImpl?o=u:this.themeError(u)}o!==t&&this.handleNewTheme(o),this.postProcessThemeChange(o,n)}handleNewTheme(e){const{gos:t,eRootDiv:n,globalCSS:o}=this,u=this.getAdditionalCss();if(e){_injectCoreAndModuleCSS(this.eStyleContainer,this.cssLayer,this.styleNonce,u);for(const[d,f]of o)_injectGlobalCSS(d,this.eStyleContainer,f,this.cssLayer,0,this.styleNonce);o.length=0}this.theme=e,e?._startUse({loadThemeGoogleFonts:t.get("loadThemeGoogleFonts"),styleContainer:this.eStyleContainer,cssLayer:this.cssLayer,nonce:this.styleNonce,moduleCss:u}),_useParamsCss(this,e?._getParamsCss()??null,e?._getParamsClassName()??null,this.eStyleContainer,this.cssLayer,this.styleNonce),this.applyThemeClasses(n),this.fireStylesChangedEvent("theme")}fireStylesChangedEvent(e){this.eventSvc.dispatchEvent({type:"stylesChanged",[`${e}Changed`]:!0})}},NO_VALUE_SENTINEL=15538,warnOnAttachToShadowRoot=(e,t,n)=>{let o=60;const u=setInterval(()=>{typeof ShadowRoot<"u"&&e.getRootNode()instanceof ShadowRoot&&(t(),clearInterval(u)),(_isInDOM(e)||--o<0)&&clearInterval(u)},1e3);n(()=>clearInterval(u))},coreCSS='.ag-aria-description-container{border:0;z-index:9999;clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.ag-unselectable{-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-selectable{-webkit-user-select:text;-moz-user-select:text;user-select:text}.ag-shake-left-to-right{animation-direction:alternate;animation-duration:.2s;animation-iteration-count:infinite;animation-name:ag-shake-left-to-right}@keyframes ag-shake-left-to-right{0%{padding-left:6px;padding-right:2px}to{padding-left:2px;padding-right:6px}}.ag-body-horizontal-scroll-viewport,.ag-body-vertical-scroll-viewport,.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{flex:1 1 auto;height:100%;min-width:0;overflow:hidden;position:relative}.ag-viewport{position:relative}.ag-spanning-container{position:absolute;top:0;z-index:1}.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{overflow-x:auto;-ms-overflow-style:none!important;scrollbar-width:none!important}.ag-body-viewport::-webkit-scrollbar,.ag-center-cols-viewport::-webkit-scrollbar,.ag-floating-bottom-viewport::-webkit-scrollbar,.ag-floating-top-viewport::-webkit-scrollbar,.ag-header-viewport::-webkit-scrollbar,.ag-sticky-bottom-viewport::-webkit-scrollbar,.ag-sticky-top-viewport::-webkit-scrollbar{display:none!important}.ag-body-viewport{display:flex;overflow-x:hidden;&:where(.ag-layout-normal){overflow-y:auto;-webkit-overflow-scrolling:touch}}.ag-floating-bottom-container,.ag-floating-top-container,.ag-sticky-bottom-container,.ag-sticky-top-container{min-height:1px}.ag-center-cols-viewport{min-height:100%;width:100%}.ag-body-horizontal-scroll-viewport{overflow-x:scroll}.ag-body-vertical-scroll-viewport{overflow-y:scroll}.ag-body-container,.ag-body-horizontal-scroll-container,.ag-body-vertical-scroll-container,.ag-center-cols-container,.ag-floating-bottom-container,.ag-floating-bottom-full-width-container,.ag-floating-top-container,.ag-full-width-container,.ag-header-container,.ag-pinned-left-cols-container,.ag-pinned-left-sticky-bottom,.ag-pinned-right-cols-container,.ag-pinned-right-sticky-bottom,.ag-sticky-bottom-container,.ag-sticky-top-container{position:relative}.ag-floating-bottom-container,.ag-floating-top-container,.ag-header-container,.ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top,.ag-sticky-bottom-container,.ag-sticky-top-container{height:100%;white-space:nowrap}.ag-center-cols-container,.ag-pinned-right-cols-container{display:block}.ag-body-horizontal-scroll-container{height:100%}.ag-body-vertical-scroll-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container,.ag-full-width-container,.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{pointer-events:none;position:absolute;top:0}:where(.ag-ltr) .ag-floating-bottom-full-width-container,:where(.ag-ltr) .ag-floating-top-full-width-container,:where(.ag-ltr) .ag-full-width-container,:where(.ag-ltr) .ag-sticky-bottom-full-width-container,:where(.ag-ltr) .ag-sticky-top-full-width-container{left:0}:where(.ag-rtl) .ag-floating-bottom-full-width-container,:where(.ag-rtl) .ag-floating-top-full-width-container,:where(.ag-rtl) .ag-full-width-container,:where(.ag-rtl) .ag-sticky-bottom-full-width-container,:where(.ag-rtl) .ag-sticky-top-full-width-container{right:0}.ag-full-width-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container{display:inline-block;height:100%;overflow:hidden;width:100%}.ag-body{display:flex;flex:1 1 auto;flex-direction:row!important;min-height:0;position:relative}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:flex;min-height:0;min-width:0;position:relative;&:where(.ag-scrollbar-invisible){bottom:0;position:absolute;&:where(.ag-apple-scrollbar){opacity:0;transition:opacity .4s;visibility:hidden;&:where(.ag-scrollbar-active),&:where(.ag-scrollbar-scrolling){opacity:1;visibility:visible}}}}.ag-body-horizontal-scroll{width:100%;&:where(.ag-scrollbar-invisible){left:0;right:0}}.ag-body-vertical-scroll{height:100%;&:where(.ag-scrollbar-invisible){top:0;z-index:10}}:where(.ag-ltr) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){right:0}}:where(.ag-rtl) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){left:0}}.ag-force-vertical-scroll{overflow-y:scroll!important}.ag-horizontal-left-spacer,.ag-horizontal-right-spacer{height:100%;min-width:0;overflow-x:scroll;&:where(.ag-scroller-corner){overflow-x:hidden}}:where(.ag-row-animation) .ag-row{transition:transform .4s,top .4s,opacity .2s;&:where(.ag-after-created){transition:transform .4s,top .4s,height .4s,opacity .2s}}:where(.ag-row-animation.ag-prevent-animation) .ag-row{transition:none!important;&:where(.ag-row.ag-after-created){transition:none!important}}:where(.ag-row-no-animation) .ag-row{transition:none}.ag-row-loading{align-items:center;display:flex}.ag-row-position-absolute{position:absolute}.ag-row-position-relative{position:relative}.ag-full-width-row{overflow:hidden;pointer-events:all}.ag-row-inline-editing{z-index:1}.ag-row-dragging{z-index:2}.ag-stub-cell{align-items:center;display:flex}.ag-cell{display:inline-block;height:100%;position:absolute;white-space:nowrap;&:focus-visible{box-shadow:none}}.ag-cell-value{flex:1 1 auto}.ag-cell-value:not(.ag-allow-overflow),.ag-group-value{overflow:hidden;text-overflow:ellipsis}.ag-cell-wrap-text{white-space:normal;word-break:break-word}:where(.ag-cell) .ag-icon{display:inline-block;vertical-align:middle}.ag-floating-top{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-top:not(.ag-invisible)){border-bottom:var(--ag-pinned-row-border)}.ag-floating-bottom{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-bottom:not(.ag-invisible)){border-top:var(--ag-pinned-row-border)}.ag-sticky-bottom,.ag-sticky-top{background-color:var(--ag-data-background-color);display:flex;height:0;overflow:hidden;position:absolute;width:100%;z-index:1}.ag-sticky-bottom{box-sizing:content-box!important;:where(.ag-pinned-left-sticky-bottom),:where(.ag-pinned-right-sticky-bottom),:where(.ag-sticky-bottom-container){border-top:var(--ag-row-border);box-sizing:border-box}}.ag-opacity-zero{opacity:0!important}.ag-cell-label-container{align-items:center;display:flex;flex-direction:row-reverse;height:100%;justify-content:space-between;width:100%}:where(.ag-right-aligned-header){.ag-cell-label-container{flex-direction:row}.ag-header-cell-text{text-align:end}}.ag-column-group-icons{display:block;:where(.ag-column-group-closed-icon),:where(.ag-column-group-opened-icon){cursor:pointer}}:where(.ag-ltr){direction:ltr;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row}}:where(.ag-rtl){direction:rtl;text-align:right;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row-reverse}.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{display:block}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(180deg)}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(-180deg)}}:where(.ag-ltr) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-left:var(--ag-row-group-indent-size)}:where(.ag-rtl) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-right:var(--ag-row-group-indent-size)}:where(.ag-ltr) .ag-row-group-leaf-indent{margin-left:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}:where(.ag-rtl) .ag-row-group-leaf-indent{margin-right:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}.ag-value-change-delta{padding:0 2px}.ag-value-change-delta-up{color:var(--ag-value-change-delta-up-color)}.ag-value-change-delta-down{color:var(--ag-value-change-delta-down-color)}.ag-value-change-value{background-color:transparent;border-radius:1px;padding-left:1px;padding-right:1px;transition:background-color 1s}.ag-value-change-value-highlight{background-color:var(--ag-value-change-value-highlight-background-color);transition:background-color .1s}.ag-cell-data-changed{background-color:var(--ag-value-change-value-highlight-background-color)!important}.ag-cell-data-changed-animation{background-color:transparent}.ag-cell-highlight{background-color:var(--ag-range-selection-highlight-color)!important}.ag-row,.ag-spanned-row{color:var(--ag-cell-text-color);font-family:var(--ag-cell-font-family);font-size:var(--ag-data-font-size);white-space:nowrap;--ag-internal-content-line-height:calc(min(var(--ag-row-height), var(--ag-line-height, 1000px)) - var(--ag-internal-row-border-width, 1px) - 2px)}.ag-row{background-color:var(--ag-data-background-color);border-bottom:var(--ag-row-border);height:var(--ag-row-height);width:100%;&.ag-row-editing-invalid{background-color:var(--ag-full-row-edit-invalid-background-color)}}:where(.ag-body-vertical-content-no-gap>div>div>div,.ag-body-vertical-content-no-gap>div>div>div>div)>.ag-row-last{border-bottom-color:transparent}.ag-group-contracted,.ag-group-expanded{cursor:pointer}.ag-cell,.ag-full-width-row .ag-cell-wrapper.ag-row-group{border:1px solid transparent;line-height:var(--ag-internal-content-line-height);-webkit-font-smoothing:subpixel-antialiased}:where(.ag-ltr) .ag-cell{border-right:var(--ag-column-border)}:where(.ag-rtl) .ag-cell{border-left:var(--ag-column-border)}.ag-spanned-cell-wrapper{background-color:var(--ag-data-background-color);position:absolute}.ag-spanned-cell-wrapper>.ag-spanned-cell{display:block;position:relative}:where(.ag-ltr) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-right-color:transparent}:where(.ag-rtl) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-left-color:transparent}.ag-cell-wrapper{align-items:center;display:flex;>:where(:not(.ag-cell-value,.ag-group-value)){align-items:center;display:flex;height:var(--ag-internal-content-line-height)}&:where(.ag-row-group){align-items:flex-start}:where(.ag-full-width-row) &:where(.ag-row-group){align-items:center;height:100%}}:where(.ag-ltr) .ag-cell-wrapper{padding-left:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-rtl) .ag-cell-wrapper{padding-right:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-cell-wrap-text:not(.ag-cell-auto-height)) .ag-cell-wrapper{align-items:normal;height:100%;:where(.ag-cell-value){height:100%}}:where(.ag-ltr) .ag-row>.ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}:where(.ag-rtl) .ag-row>.ag-cell-wrapper.ag-row-group{padding-right:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-cell-focus:not(.ag-cell-range-selected):focus-within,.ag-cell-range-single-cell,.ag-cell-range-single-cell.ag-cell-range-handle,.ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected),.ag-context-menu-open .ag-full-width-row.ag-row-focus .ag-cell-wrapper.ag-row-group,.ag-full-width-row.ag-row-focus:focus .ag-cell-wrapper.ag-row-group{border:1px solid;border-color:var(--ag-range-selection-border-color);border-style:var(--ag-range-selection-border-style);outline:initial}.ag-full-width-row.ag-row-focus:focus{box-shadow:none}:where(.ag-ltr) .ag-group-contracted,:where(.ag-ltr) .ag-group-expanded,:where(.ag-ltr) .ag-row-drag,:where(.ag-ltr) .ag-selection-checkbox{margin-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-group-contracted,:where(.ag-rtl) .ag-group-expanded,:where(.ag-rtl) .ag-row-drag,:where(.ag-rtl) .ag-selection-checkbox{margin-left:var(--ag-cell-widget-spacing)}.ag-drag-handle-disabled{opacity:.35;pointer-events:none}:where(.ag-ltr) .ag-group-child-count{margin-left:3px}:where(.ag-rtl) .ag-group-child-count{margin-right:3px}.ag-row-highlight-above:after,.ag-row-highlight-below:after,.ag-row-highlight-inside:after{background-color:var(--ag-row-drag-indicator-color);border-radius:calc(var(--ag-row-drag-indicator-width)/2);content:"";height:var(--ag-row-drag-indicator-width);pointer-events:none;position:absolute;width:calc(100% - 1px)}:where(.ag-ltr) .ag-row-highlight-above:after,:where(.ag-ltr) .ag-row-highlight-below:after,:where(.ag-ltr) .ag-row-highlight-inside:after{left:1px}:where(.ag-rtl) .ag-row-highlight-above:after,:where(.ag-rtl) .ag-row-highlight-below:after,:where(.ag-rtl) .ag-row-highlight-inside:after{right:1px}.ag-row-highlight-above:after{top:0}.ag-row-highlight-below:after{bottom:0}.ag-row-highlight-indent:after{display:block;width:auto}:where(.ag-ltr) .ag-row-highlight-indent:after{left:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size));right:1px}:where(.ag-rtl) .ag-row-highlight-indent:after{left:1px;right:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size))}.ag-row-highlight-inside:after{background-color:var(--ag-selected-row-background-color);border:1px solid var(--ag-range-selection-border-color);display:block;height:auto;inset:0;width:auto}.ag-body,.ag-floating-bottom,.ag-floating-top{background-color:var(--ag-data-background-color)}.ag-row-odd{background-color:var(--ag-odd-row-background-color)}.ag-row-selected:before{background-color:var(--ag-selected-row-background-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-full-width-row.ag-row-group:before,.ag-row-hover:not(.ag-full-width-row):before{background-color:var(--ag-row-hover-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-row-selected:before{background-color:var(--ag-row-hover-color);background-image:linear-gradient(var(--ag-selected-row-background-color),var(--ag-selected-row-background-color))}.ag-row.ag-full-width-row.ag-row-group>*{position:relative}.ag-column-hover{background-color:var(--ag-column-hover-color)}.ag-header-range-highlight{background-color:var(--ag-range-header-highlight-color)}.ag-right-aligned-cell{font-variant-numeric:tabular-nums}:where(.ag-ltr) .ag-right-aligned-cell{text-align:right}:where(.ag-rtl) .ag-right-aligned-cell{text-align:left}.ag-right-aligned-cell .ag-cell-value,.ag-right-aligned-cell .ag-group-value{margin-left:auto}:where(.ag-ltr) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-ltr) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level));padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}:where(.ag-rtl) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-rtl) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-row>.ag-cell-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}.ag-row-dragging{cursor:move;opacity:.5}.ag-details-row{background-color:var(--ag-data-background-color);padding:calc(var(--ag-spacing)*3.75)}.ag-layout-auto-height,.ag-layout-print{.ag-center-cols-container,.ag-center-cols-viewport{min-height:150px}}.ag-overlay-exporting-wrapper,.ag-overlay-loading-wrapper,.ag-overlay-modal-wrapper{background-color:var(--ag-modal-overlay-background-color)}.ag-skeleton-container{align-content:center;height:100%;width:100%}.ag-skeleton-effect{animation:ag-skeleton-loading 1.5s ease-in-out .5s infinite;background-color:var(--ag-row-loading-skeleton-effect-color);border-radius:.25rem;height:1em;width:100%}:where(.ag-ltr) .ag-right-aligned-cell .ag-skeleton-effect{margin-left:auto}:where(.ag-rtl) .ag-right-aligned-cell .ag-skeleton-effect{margin-right:auto}@keyframes ag-skeleton-loading{0%{background-color:var(--ag-row-loading-skeleton-effect-color)}50%{background-color:color-mix(in srgb,transparent,var(--ag-row-loading-skeleton-effect-color) 40%)}to{background-color:var(--ag-row-loading-skeleton-effect-color)}}.ag-loading{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-loading{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-loading{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-ltr) .ag-loading-icon{padding-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-loading-icon{padding-left:var(--ag-cell-widget-spacing)}.ag-icon-loading{animation-duration:1s;animation-iteration-count:infinite;animation-name:spin;animation-timing-function:linear}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.ag-header{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);color:var(--ag-header-text-color);display:flex;font-family:var(--ag-header-font-family);font-size:var(--ag-header-font-size);font-weight:var(--ag-header-font-weight);overflow:hidden;white-space:nowrap;width:100%}.ag-header-row{height:var(--ag-header-height);position:absolute}.ag-floating-filter-button-button,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,:where(.ag-header-cell-sortable) .ag-header-cell-label,:where(.ag-header-group-cell-selectable) .ag-header-cell-comp-wrapper{cursor:pointer}:where(.ag-ltr) .ag-header-expand-icon{margin-left:4px}:where(.ag-rtl) .ag-header-expand-icon{margin-right:4px}.ag-header-row:where(:not(:first-child)){:where(.ag-header-cell:not(.ag-header-span-height.ag-header-span-total,.ag-header-parent-hidden)),:where(.ag-header-group-cell.ag-header-group-cell-with-group){border-top:var(--ag-header-row-border)}}.ag-header-row:where(:not(.ag-header-row-column-group)){overflow:hidden}:where(.ag-header.ag-header-allow-overflow) .ag-header-row{overflow:visible}.ag-header-cell{display:inline-flex;overflow:hidden}.ag-header-group-cell{contain:paint;display:flex}.ag-header-cell,.ag-header-group-cell{align-items:center;gap:var(--ag-cell-widget-spacing);height:100%;padding:0 var(--ag-cell-horizontal-padding);position:absolute}@property --ag-internal-moving-color{syntax:"<color>";inherits:false;initial-value:transparent}@property --ag-internal-hover-color{syntax:"<color>";inherits:false;initial-value:transparent}.ag-header-cell:where(:not(.ag-floating-filter)):before,.ag-header-group-cell:before{background-image:linear-gradient(var(--ag-internal-hover-color),var(--ag-internal-hover-color)),linear-gradient(var(--ag-internal-moving-color),var(--ag-internal-moving-color));content:"";inset:0;position:absolute;--ag-internal-moving-color:transparent;--ag-internal-hover-color:transparent;transition:--ag-internal-moving-color var(--ag-header-cell-background-transition-duration),--ag-internal-hover-color var(--ag-header-cell-background-transition-duration)}.ag-header-cell:where(:not(.ag-floating-filter)):where(:hover):before,.ag-header-group-cell:where(:hover):before{--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}.ag-header-cell:where(:not(.ag-floating-filter)):where(.ag-header-cell-moving):before,.ag-header-group-cell:where(.ag-header-cell-moving):before{--ag-internal-moving-color:var(--ag-header-cell-moving-background-color);--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}:where(.ag-header-cell:not(.ag-floating-filter)>*,.ag-header-group-cell>*){position:relative;z-index:1}.ag-header-cell-menu-button:where(:not(.ag-header-menu-always-show)){opacity:0;transition:opacity .2s}.ag-header-cell-filter-button,:where(.ag-header-cell.ag-header-active) .ag-header-cell-menu-button{opacity:1}.ag-header-cell-label,.ag-header-group-cell-label{align-items:center;align-self:stretch;display:flex;flex:1 1 auto;overflow:hidden;padding:5px 0}:where(.ag-ltr) .ag-sort-indicator-icon{padding-left:var(--ag-spacing)}:where(.ag-rtl) .ag-sort-indicator-icon{padding-right:var(--ag-spacing)}.ag-header-cell-label{text-overflow:ellipsis}.ag-header-group-cell-label.ag-sticky-label{flex:none;max-width:100%;overflow:visible;position:sticky}:where(.ag-ltr) .ag-header-group-cell-label.ag-sticky-label{left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-header-group-cell-label.ag-sticky-label{right:var(--ag-cell-horizontal-padding)}.ag-header-cell-text,.ag-header-group-text{overflow:hidden;text-overflow:ellipsis}.ag-header-cell-text{word-break:break-word}.ag-header-cell-comp-wrapper{width:100%}:where(.ag-header-group-cell) .ag-header-cell-comp-wrapper{display:flex}:where(.ag-header-cell:not(.ag-header-cell-auto-height)) .ag-header-cell-comp-wrapper{align-items:center;display:flex;height:100%}.ag-header-cell-wrap-text .ag-header-cell-comp-wrapper{white-space:normal}.ag-header-cell-comp-wrapper-limited-height>*{overflow:hidden}:where(.ag-right-aligned-header) .ag-header-cell-label{flex-direction:row-reverse}:where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-col-ref{color:var(--ag-subtle-text-color)}}:where(.ag-ltr) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-col-ref{margin-right:var(--ag-spacing)}.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-col-ref{margin-left:var(--ag-spacing)}.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-header-cell.ag-right-aligned-header){.ag-header-col-ref{color:var(--ag-subtle-text-color)}}:where(.ag-ltr) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-col-ref{margin-left:var(--ag-spacing)}.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-col-ref{margin-right:var(--ag-spacing)}.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}.ag-header-cell:after,.ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{content:"";height:var(--ag-header-column-border-height);position:absolute;top:calc(50% - var(--ag-header-column-border-height)*.5);z-index:1}:where(.ag-ltr) .ag-header-cell:after,:where(.ag-ltr) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-right:var(--ag-header-column-border);right:0}:where(.ag-rtl) .ag-header-cell:after,:where(.ag-rtl) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-left:var(--ag-header-column-border);left:0}.ag-header-highlight-after:after,.ag-header-highlight-before:after{background-color:var(--ag-column-drag-indicator-color);border-radius:calc(var(--ag-column-drag-indicator-width)/2);content:"";height:100%;position:absolute;top:0;width:var(--ag-column-drag-indicator-width)}:where(.ag-ltr) .ag-header-highlight-before:after{left:0}:where(.ag-rtl) .ag-header-highlight-before:after{right:0}:where(.ag-ltr) .ag-header-highlight-after:after{right:0;:where(.ag-pinned-left-header) &{right:1px}}:where(.ag-rtl) .ag-header-highlight-after:after{left:0;:where(.ag-pinned-left-header) &{left:1px}}.ag-header-cell-resize{align-items:center;cursor:ew-resize;display:flex;height:100%;position:absolute;top:0;width:8px;z-index:2}:where(.ag-ltr) .ag-header-cell-resize{right:-3px}:where(.ag-rtl) .ag-header-cell-resize{left:-3px}.ag-header-cell-resize:after{background-color:var(--ag-header-column-resize-handle-color);content:"";height:var(--ag-header-column-resize-handle-height);position:absolute;top:calc(50% - var(--ag-header-column-resize-handle-height)*.5);width:var(--ag-header-column-resize-handle-width);z-index:1}:where(.ag-ltr) .ag-header-cell-resize:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}:where(.ag-rtl) .ag-header-cell-resize:after{right:calc(50% - var(--ag-header-column-resize-handle-width))}:where(.ag-header-cell.ag-header-span-height) .ag-header-cell-resize:after{height:calc(100% - var(--ag-spacing)*4);top:calc(var(--ag-spacing)*2)}.ag-header-group-cell-no-group:where(.ag-header-span-height){display:none}.ag-sort-indicator-container{display:flex;gap:var(--ag-spacing)}.ag-layout-print{&.ag-body{display:block;height:unset}&.ag-root-wrapper{container-type:normal;display:inline-block}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:none}&.ag-force-vertical-scroll{overflow-y:visible!important}}@media print{.ag-root-wrapper.ag-layout-print{container-type:normal;display:table;.ag-body-horizontal-scroll-viewport,.ag-body-viewport,.ag-center-cols-container,.ag-center-cols-viewport,.ag-root,.ag-root-wrapper-body,.ag-virtual-list-viewport{display:block!important;height:auto!important;overflow:hidden!important}.ag-cell,.ag-row{-moz-column-break-inside:avoid;break-inside:avoid}}}ag-grid,ag-grid-angular{display:block}.ag-root-wrapper{border:var(--ag-wrapper-border);border-radius:var(--ag-wrapper-border-radius);container-type:inline-size;display:flex;flex-direction:column;overflow:hidden;position:relative;&.ag-layout-normal{height:100%}}.ag-root-wrapper-body{display:flex;flex-direction:row;&.ag-layout-normal{flex:1 1 auto;height:0;min-height:0}}.ag-root{display:flex;flex-direction:column;position:relative;&.ag-layout-auto-height,&.ag-layout-normal{flex:1 1 auto;overflow:hidden;width:0}&.ag-layout-normal{height:100%}}.ag-drag-handle{color:var(--ag-drag-handle-color);cursor:grab;:where(.ag-icon){color:var(--ag-drag-handle-color)}}.ag-chart-menu-icon,.ag-chart-settings-next,.ag-chart-settings-prev,.ag-column-group-icons,.ag-column-select-header-icon,.ag-filter-toolpanel-expand,.ag-floating-filter-button-button,.ag-group-title-bar-icon,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,.ag-panel-title-bar-button-icon,.ag-set-filter-group-icons,:where(.ag-group-contracted) .ag-icon,:where(.ag-group-expanded) .ag-icon{background-color:var(--ag-icon-button-background-color);border-radius:var(--ag-icon-button-border-radius);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-background-color);color:var(--ag-icon-button-color)}.ag-chart-menu-icon:hover,.ag-chart-settings-next:hover,.ag-chart-settings-prev:hover,.ag-column-group-icons:hover,.ag-column-select-header-icon:hover,.ag-filter-toolpanel-expand:hover,.ag-floating-filter-button-button:hover,.ag-group-title-bar-icon:hover,.ag-header-cell-filter-button:hover,.ag-header-cell-menu-button:hover,.ag-header-expand-icon:hover,.ag-panel-title-bar-button-icon:hover,.ag-panel-title-bar-button:hover,.ag-set-filter-group-icons:hover,:where(.ag-group-contracted) .ag-icon:hover,:where(.ag-group-expanded) .ag-icon:hover{background-color:var(--ag-icon-button-hover-background-color);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-hover-background-color);color:var(--ag-icon-button-hover-color)}:where(.ag-filter-active),:where(.ag-filter-toolpanel-group-instance-header-icon),:where(.ag-filter-toolpanel-instance-header-icon){position:relative}:where(.ag-filter-active):after,:where(.ag-filter-toolpanel-group-instance-header-icon):after,:where(.ag-filter-toolpanel-instance-header-icon):after{background-color:var(--ag-icon-button-active-indicator-color);border-radius:50%;content:"";height:6px;position:absolute;top:-1px;width:6px}:where(.ag-ltr) :where(.ag-filter-active):after,:where(.ag-ltr) :where(.ag-filter-toolpanel-group-instance-header-icon):after,:where(.ag-ltr) :where(.ag-filter-toolpanel-instance-header-icon):after{right:-1px}:where(.ag-rtl) :where(.ag-filter-active):after,:where(.ag-rtl) :where(.ag-filter-toolpanel-group-instance-header-icon):after,:where(.ag-rtl) :where(.ag-filter-toolpanel-instance-header-icon):after{left:-1px}.ag-filter-active{background-image:linear-gradient(var(--ag-icon-button-active-background-color),var(--ag-icon-button-active-background-color));border-radius:1px;outline:solid var(--ag-icon-button-background-spread) var(--ag-icon-button-active-background-color);:where(.ag-icon-filter){clip-path:path("M8,0C8,4.415 11.585,8 16,8L16,16L0,16L0,0L8,0Z");color:var(--ag-icon-button-active-color)}}',coreDefaults={wrapperBorder:!0,rowBorder:!0,headerRowBorder:!0,footerRowBorder:{ref:"rowBorder"},columnBorder:{style:"solid",width:1,color:"transparent"},headerColumnBorder:!1,headerColumnBorderHeight:"100%",pinnedColumnBorder:!0,pinnedRowBorder:!0,sidePanelBorder:!0,sideBarPanelWidth:250,sideBarBackgroundColor:{ref:"chromeBackgroundColor"},sideButtonBarBackgroundColor:{ref:"sideBarBackgroundColor"},sideButtonBarTopPadding:0,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineColor:"transparent",sideButtonSelectedUnderlineTransitionDuration:0,sideButtonBackgroundColor:"transparent",sideButtonTextColor:{ref:"textColor"},sideButtonHoverBackgroundColor:{ref:"sideButtonBackgroundColor"},sideButtonHoverTextColor:{ref:"sideButtonTextColor"},sideButtonSelectedBackgroundColor:backgroundColor,sideButtonSelectedTextColor:{ref:"sideButtonTextColor"},sideButtonBorder:"solid 1px transparent",sideButtonSelectedBorder:!0,sideButtonLeftPadding:{ref:"spacing"},sideButtonRightPadding:{ref:"spacing"},sideButtonVerticalPadding:{calc:"spacing * 3"},cellFontFamily:{ref:"fontFamily"},headerCellHoverBackgroundColor:"transparent",headerCellMovingBackgroundColor:{ref:"headerCellHoverBackgroundColor"},headerCellBackgroundTransitionDuration:"0.2s",cellTextColor:{ref:"textColor"},rangeSelectionBorderStyle:"solid",rangeSelectionBorderColor:accentColor,rangeSelectionBackgroundColor:accentMix(.2),rangeSelectionChartBackgroundColor:"#0058FF1A",rangeSelectionChartCategoryBackgroundColor:"#00FF841A",rangeSelectionHighlightColor:accentMix(.5),rangeHeaderHighlightColor:foregroundHeaderBackgroundMix(.08),rowNumbersSelectedColor:accentMix(.5),rowHoverColor:accentMix(.08),columnHoverColor:accentMix(.05),selectedRowBackgroundColor:accentMix(.12),modalOverlayBackgroundColor:{ref:"backgroundColor",mix:.66},dataBackgroundColor:backgroundColor,oddRowBackgroundColor:{ref:"dataBackgroundColor"},wrapperBorderRadius:8,cellHorizontalPadding:{calc:"spacing * 2 * cellHorizontalPaddingScale"},cellWidgetSpacing:{calc:"spacing * 1.5"},cellHorizontalPaddingScale:1,rowGroupIndentSize:{calc:"cellWidgetSpacing + iconSize"},valueChangeDeltaUpColor:"#43a047",valueChangeDeltaDownColor:"#e53935",valueChangeValueHighlightBackgroundColor:"#16a08580",rowHeight:{calc:"max(iconSize, dataFontSize) + spacing * 3.25 * rowVerticalPaddingScale"},rowVerticalPaddingScale:1,paginationPanelHeight:{ref:"rowHeight",calc:"max(rowHeight, 22px)"},dragHandleColor:foregroundMix(.7),headerColumnResizeHandleHeight:"30%",headerColumnResizeHandleWidth:2,headerColumnResizeHandleColor:{ref:"borderColor"},iconButtonColor:{ref:"iconColor"},iconButtonBackgroundColor:"transparent",iconButtonBackgroundSpread:4,iconButtonBorderRadius:1,iconButtonHoverColor:{ref:"iconButtonColor"},iconButtonHoverBackgroundColor:foregroundMix(.1),iconButtonActiveColor:accentColor,iconButtonActiveBackgroundColor:accentMix(.28),iconButtonActiveIndicatorColor:accentColor,setFilterIndentSize:{ref:"iconSize"},chartMenuPanelWidth:260,chartMenuLabelColor:foregroundMix(.8),cellEditingBorder:{color:accentColor},cellEditingShadow:{ref:"cardShadow"},fullRowEditInvalidBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.25},columnSelectIndentSize:{ref:"iconSize"},toolPanelSeparatorBorder:!0,columnDropCellBackgroundColor:foregroundMix(.07),columnDropCellTextColor:{ref:"textColor"},columnDropCellDragHandleColor:{ref:"textColor"},columnDropCellBorder:{color:foregroundMix(.13)},selectCellBackgroundColor:foregroundMix(.07),selectCellBorder:{color:foregroundMix(.13)},advancedFilterBuilderButtonBarBorder:!0,advancedFilterBuilderIndentSize:{calc:"spacing * 2 + iconSize"},advancedFilterBuilderJoinPillColor:"#f08e8d",advancedFilterBuilderColumnPillColor:"#a6e194",advancedFilterBuilderOptionPillColor:"#f3c08b",advancedFilterBuilderValuePillColor:"#85c0e4",filterPanelApplyButtonColor:backgroundColor,filterPanelApplyButtonBackgroundColor:accentColor,filterPanelCardSubtleColor:{ref:"textColor",mix:.7},filterPanelCardSubtleHoverColor:{ref:"textColor"},findMatchColor:foregroundColor,findMatchBackgroundColor:"#ffff00",findActiveMatchColor:foregroundColor,findActiveMatchBackgroundColor:"#ffa500",filterToolPanelGroupIndent:{ref:"spacing"},rowLoadingSkeletonEffectColor:foregroundMix(.15),statusBarLabelColor:foregroundColor,statusBarLabelFontWeight:500,statusBarValueColor:foregroundColor,statusBarValueFontWeight:500,pinnedSourceRowTextColor:{ref:"textColor"},pinnedSourceRowBackgroundColor:{ref:"dataBackgroundColor"},pinnedSourceRowFontWeight:600,pinnedRowFontWeight:600,pinnedRowBackgroundColor:{ref:"dataBackgroundColor"},pinnedRowTextColor:{ref:"textColor"},rowDragIndicatorColor:{ref:"rangeSelectionBorderColor"},rowDragIndicatorWidth:2,columnDragIndicatorColor:{ref:"accentColor"},columnDragIndicatorWidth:2},batchEditStyleDefaultCSS=".ag-cell-batch-edit{background-color:var(--ag-cell-batch-edit-background-color);color:var(--ag-cell-batch-edit-text-color);display:inherit}.ag-row-batch-edit{background-color:var(--ag-row-batch-edit-background-color);color:var(--ag-row-batch-edit-text-color)}",baseParams={cellBatchEditBackgroundColor:"rgba(220 181 139 / 16%)",cellBatchEditTextColor:"#422f00",rowBatchEditBackgroundColor:{ref:"cellBatchEditBackgroundColor"},rowBatchEditTextColor:{ref:"cellBatchEditTextColor"}},baseDarkBatchEditParams={...baseParams,cellBatchEditTextColor:"#f3d0b3"},makeBatchEditStyleBaseTreeShakeable=()=>createPart({feature:"batchEditStyle",params:baseParams,css:batchEditStyleDefaultCSS}),batchEditStyleBase=makeBatchEditStyleBaseTreeShakeable(),buttonStyleBaseCSS=":where(.ag-button){background:none;border:none;color:inherit;cursor:pointer;font-family:inherit;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0;text-indent:inherit;text-shadow:inherit;text-transform:inherit;word-spacing:inherit;&:disabled{cursor:default}&:focus-visible{box-shadow:var(--ag-focus-shadow);outline:none}}.ag-standard-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--ag-button-background-color);border:var(--ag-button-border);border-radius:var(--ag-button-border-radius);color:var(--ag-button-text-color);cursor:pointer;font-weight:var(--ag-button-font-weight);padding:var(--ag-button-vertical-padding) var(--ag-button-horizontal-padding);&:active{background-color:var(--ag-button-active-background-color);border:var(--ag-button-active-border);color:var(--ag-button-active-text-color)}&:disabled{background-color:var(--ag-button-disabled-background-color);border:var(--ag-button-disabled-border);color:var(--ag-button-disabled-text-color)}}.ag-standard-button:hover{background-color:var(--ag-button-hover-background-color);border:var(--ag-button-hover-border);color:var(--ag-button-hover-text-color)}",baseParams2={buttonTextColor:"inherit",buttonFontWeight:"normal",buttonBackgroundColor:"transparent",buttonBorder:!1,buttonBorderRadius:{ref:"borderRadius"},buttonHorizontalPadding:{calc:"spacing * 2"},buttonVerticalPadding:{ref:"spacing"},buttonHoverTextColor:{ref:"buttonTextColor"},buttonHoverBackgroundColor:{ref:"buttonBackgroundColor"},buttonHoverBorder:{ref:"buttonBorder"},buttonActiveTextColor:{ref:"buttonHoverTextColor"},buttonActiveBackgroundColor:{ref:"buttonHoverBackgroundColor"},buttonActiveBorder:{ref:"buttonHoverBorder"},buttonDisabledTextColor:{ref:"inputDisabledTextColor"},buttonDisabledBackgroundColor:{ref:"inputDisabledBackgroundColor"},buttonDisabledBorder:{ref:"inputDisabledBorder"}},makeButtonStyleQuartzTreeShakeable=()=>createPart({feature:"buttonStyle",params:{...baseParams2,buttonBackgroundColor:backgroundColor,buttonBorder:!0,buttonHoverBackgroundColor:{ref:"rowHoverColor"},buttonActiveBorder:{color:accentColor}},css:buttonStyleBaseCSS}),buttonStyleQuartz=makeButtonStyleQuartzTreeShakeable(),columnDropStyleBorderedCSS=".ag-column-drop-vertical-empty-message{align-items:center;border:dashed var(--ag-border-width);border-color:var(--ag-border-color);display:flex;inset:0;justify-content:center;margin:calc(var(--ag-spacing)*1.5) calc(var(--ag-spacing)*2);overflow:hidden;padding:calc(var(--ag-spacing)*2);position:absolute}",makeColumnDropStyleBorderedTreeShakeable=()=>createPart({feature:"columnDropStyle",css:columnDropStyleBorderedCSS}),columnDropStyleBordered=makeColumnDropStyleBorderedTreeShakeable(),baseParams3={formulaToken1Color:"#3269c6",formulaToken1BackgroundColor:{ref:"formulaToken1Color",mix:.08},formulaToken1Border:{color:{ref:"formulaToken1Color"}},formulaToken2Color:"#c0343f",formulaToken2BackgroundColor:{ref:"formulaToken2Color",mix:.06},formulaToken2Border:{color:{ref:"formulaToken2Color"}},formulaToken3Color:"#8156b8",formulaToken3BackgroundColor:{ref:"formulaToken3Color",mix:.08},formulaToken3Border:{color:{ref:"formulaToken3Color"}},formulaToken4Color:"#007c1f",formulaToken4BackgroundColor:{ref:"formulaToken4Color",mix:.06},formulaToken4Border:{color:{ref:"formulaToken4Color"}},formulaToken5Color:"#b03e85",formulaToken5BackgroundColor:{ref:"formulaToken5Color",mix:.08},formulaToken5Border:{color:{ref:"formulaToken5Color"}},formulaToken6Color:"#b74900",formulaToken6BackgroundColor:{ref:"formulaToken6Color",mix:.06},formulaToken6Border:{color:{ref:"formulaToken6Color"}},formulaToken7Color:"#247492",formulaToken7BackgroundColor:{ref:"formulaToken7Color",mix:.08},formulaToken7Border:{color:{ref:"formulaToken7Color"}}},makeBatchEditStyleBaseTreeShakeable2=()=>createPart({feature:"formulaStyle",params:baseParams3}),formulaStyleBase=makeBatchEditStyleBaseTreeShakeable2(),gridThemeLogger={warn:(...e)=>{_warn(e[0],e[1])},error:(...e)=>{_error(e[0],e[1])},preInitErr:(...e)=>{_logPreInitErr(e[0],e[2],e[1])}},createTheme=()=>createSharedTheme(gridThemeLogger).withParams(coreDefaults).withPart(buttonStyleQuartz).withPart(columnDropStyleBordered).withPart(batchEditStyleBase).withPart(formulaStyleBase),checkboxStyleDefaultCSS='.ag-checkbox-input-wrapper,.ag-radio-button-input-wrapper{background-color:var(--ag-checkbox-unchecked-background-color);border:solid var(--ag-checkbox-border-width) var(--ag-checkbox-unchecked-border-color);flex:none;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);&:where(.ag-checked){background-color:var(--ag-checkbox-checked-background-color);border-color:var(--ag-checkbox-checked-border-color)}&:where(.ag-checked):after{background-color:var(--ag-checkbox-checked-shape-color)}&:where(.ag-disabled){filter:grayscale();opacity:.5}}.ag-checkbox-input,.ag-radio-button-input{-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:block;height:var(--ag-icon-size);margin:0;opacity:0;width:var(--ag-icon-size)}.ag-checkbox-input-wrapper:after,.ag-radio-button-input-wrapper:after{content:"";display:block;inset:0;-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;pointer-events:none;position:absolute}.ag-checkbox-input-wrapper:where(:focus-within,:active),.ag-radio-button-input-wrapper:where(:focus-within,:active){box-shadow:var(--ag-focus-shadow)}.ag-checkbox-input-wrapper{border-radius:var(--ag-checkbox-border-radius);&:where(.ag-checked):after{-webkit-mask-image:var(--ag-checkbox-checked-shape-image);mask-image:var(--ag-checkbox-checked-shape-image)}&:where(.ag-indeterminate){background-color:var(--ag-checkbox-indeterminate-background-color);border-color:var(--ag-checkbox-indeterminate-border-color)}&:where(.ag-indeterminate):after{background-color:var(--ag-checkbox-indeterminate-shape-color);-webkit-mask-image:var(--ag-checkbox-indeterminate-shape-image);mask-image:var(--ag-checkbox-indeterminate-shape-image)}}.ag-cell-editing-error .ag-checkbox-input-wrapper:focus-within{box-shadow:var(--ag-focus-error-shadow)}.ag-radio-button-input-wrapper{border-radius:100%;&:where(.ag-checked):after{-webkit-mask-image:var(--ag-radio-checked-shape-image);mask-image:var(--ag-radio-checked-shape-image)}}',makeCheckboxStyleDefaultTreeShakeable=()=>createPart({feature:"checkboxStyle",params:{checkboxBorderWidth:1,checkboxBorderRadius:{ref:"borderRadius"},checkboxUncheckedBackgroundColor:backgroundColor,checkboxUncheckedBorderColor:foregroundBackgroundMix(.3),checkboxCheckedBackgroundColor:accentColor,checkboxCheckedBorderColor:{ref:"checkboxCheckedBackgroundColor"},checkboxCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="7" fill="none"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75" d="M1 3.5 3.5 6l5-5"/></svg>'},checkboxCheckedShapeColor:backgroundColor,checkboxIndeterminateBackgroundColor:foregroundBackgroundMix(.3),checkboxIndeterminateBorderColor:{ref:"checkboxIndeterminateBackgroundColor"},checkboxIndeterminateShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="2" fill="none"><rect width="10" height="2" fill="#000" rx="1"/></svg>'},checkboxIndeterminateShapeColor:backgroundColor,radioCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" fill="none"><circle cx="3" cy="3" r="3" fill="#000"/></svg>'}},css:checkboxStyleDefaultCSS}),checkboxStyleDefault=makeCheckboxStyleDefaultTreeShakeable(),darkParams=()=>({...defaultLightColorSchemeParams,...baseDarkBatchEditParams,backgroundColor:"hsl(217, 0%, 17%)",foregroundColor:"#FFF",chromeBackgroundColor:foregroundBackgroundMix(.05),rowHoverColor:accentMix(.15),selectedRowBackgroundColor:accentMix(.2),menuBackgroundColor:foregroundBackgroundMix(.1),browserColorScheme:"dark",popupShadow:"0 0px 20px #000A",cardShadow:"0 1px 4px 1px #000A",advancedFilterBuilderJoinPillColor:"#7a3a37",advancedFilterBuilderColumnPillColor:"#355f2d",advancedFilterBuilderOptionPillColor:"#5a3168",advancedFilterBuilderValuePillColor:"#374c86",filterPanelApplyButtonColor:foregroundColor,findMatchColor:backgroundColor,findActiveMatchColor:backgroundColor,checkboxUncheckedBorderColor:foregroundBackgroundMix(.4),toggleButtonOffBackgroundColor:foregroundBackgroundMix(.4),rowBatchEditBackgroundColor:foregroundBackgroundMix(.1),formulaToken1Color:"#4da3e5",formulaToken2Color:"#f55864",formulaToken3Color:"#b688f2",formulaToken4Color:"#24bb4a",formulaToken5Color:"#e772ba",formulaToken6Color:"#f69b5f",formulaToken7Color:"#a3e6ff"}),darkBlueParams=()=>({...darkParams(),backgroundColor:"#1f2836"}),makeColorSchemeVariableTreeShakeable=()=>createPart({feature:"colorScheme",params:defaultLightColorSchemeParams,modeParams:{light:defaultLightColorSchemeParams,dark:darkParams(),"dark-blue":darkBlueParams()}}),colorSchemeVariable=makeColorSchemeVariableTreeShakeable(),iconNameToSvgFragment={aggregation:'<path d="M18 7V4H6l6 8-6 8h12v-3"/>',arrows:'<polyline points="5 9 2 12 5 15"/><polyline points="9 5 12 2 15 5"/><polyline points="15 19 12 22 9 19"/><polyline points="19 9 22 12 19 15"/><line x1="2" x2="22" y1="12" y2="12"/><line x1="12" x2="12" y1="2" y2="22"/>',asc:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',cancel:'<path d="m18 6-12 12"/><path d="m6 6 12 12"/>',chart:'<line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/>',"color-picker":'<path d="m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z"/><path d="m5 2 5 5"/><path d="M2 13h15"/><path d="M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z"/>',columns:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"/>',contracted:'<path d="m9 18 6-6-6-6"/>',copy:'<rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>',cross:'<path d="M18 6 6 18"/><path d="m6 6 12 12"/>',csv:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',cut:'<circle cx="6" cy="6" r="3"/><path d="M8.12 8.12 12 12"/><path d="M20 4 8.12 15.88"/><circle cx="6" cy="18" r="3"/><path d="M14.8 14.8 20 20"/>',desc:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',down:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',excel:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',expanded:'<path d="m15 18-6-6 6-6"/>',eye:'<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/>',"eye-slash":'<path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/>',filter:'<path d="M3 6h18"/><path d="M7 12h10"/><path d="M10 18h4"/>',first:'<path d="m17 18-6-6 6-6"/><path d="M7 6v12"/>',grip:'<circle cx="5" cy="8" r="0.5"/><circle cx="12" cy="8" r="0.5"/><circle cx="19" cy="8" r="0.5"/><circle cx="5" cy="16" r="0.5"/><circle cx="12" cy="16" r="0.5"/><circle cx="19" cy="16" r="0.5"/><g stroke="none" fill="currentColor"><circle cx="5" cy="8" r="1"/><circle cx="12" cy="8" r="1"/><circle cx="19" cy="8" r="1"/><circle cx="5" cy="16" r="1"/><circle cx="12" cy="16" r="1"/><circle cx="19" cy="16" r="1"/></g>',group:'<path d="M16 12H3"/><path d="M16 18H3"/><path d="M10 6H3"/><path d="M21 18V8a2 2 0 0 0-2-2h-5"/><path d="m16 8-2-2 2-2"/>',last:'<path d="m7 18 6-6-6-6"/><path d="M17 6v12"/>',left:'<path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>',linked:'<path d="M9 17H7A5 5 0 0 1 7 7h2"/><path d="M15 7h2a5 5 0 1 1 0 10h-2"/><line x1="8" x2="16" y1="12" y2="12"/>',loading:'<line x1="12" x2="12" y1="2" y2="6"/><line x1="12" x2="12" y1="18" y2="22"/><line x1="4.93" x2="7.76" y1="4.93" y2="7.76"/><line x1="16.24" x2="19.07" y1="16.24" y2="19.07"/><line x1="2" x2="6" y1="12" y2="12"/><line x1="18" x2="22" y1="12" y2="12"/><line x1="4.93" x2="7.76" y1="19.07" y2="16.24"/><line x1="16.24" x2="19.07" y1="7.76" y2="4.93"/>',maximize:'<polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" x2="14" y1="3" y2="10"/><line x1="3" x2="10" y1="21" y2="14"/>',menu:'<line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/>',"menu-alt":'<circle cx="12" cy="5" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="12" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="19" r="0.75" fill="#D9D9D9"/>',minimize:'<polyline points="4 14 10 14 10 20"/><polyline points="20 10 14 10 14 4"/><line x1="14" x2="21" y1="10" y2="3"/><line x1="3" x2="10" y1="21" y2="14"/>',minus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/>',next:'<path d="m9 18 6-6-6-6"/>',none:'<path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/>',"not-allowed":'<circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/>',paste:'<path d="M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10"/><path d="m17 10 4 4-4 4"/>',pin:'<line x1="12" x2="12" y1="17" y2="22"/><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"/>',pivot:'<path d="M15 3v18"/><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M21 9H3"/><path d="M21 15H3"/>',plus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/>',previous:'<path d="m15 18-6-6 6-6"/>',right:'<path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>',save:'<path d="M12 17V3"/><path d="m6 11 6 6 6-6"/><path d="M19 21H5"/>',settings:'<path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/>',"small-left":'<path d="m15 18-6-6 6-6"/>',"small-right":'<path d="m9 18 6-6-6-6"/>',tick:'<path d="M20 6 9 17l-5-5"/>',"tree-closed":'<path d="m9 18 6-6-6-6"/>',"tree-indeterminate":'<path d="M5 12h14"/>',"tree-open":'<path d="m6 9 6 6 6-6"/>',unlinked:'<path d="M9 17H7A5 5 0 0 1 7 7"/><path d="M15 7h2a5 5 0 0 1 4 8"/><line x1="8" x2="12" y1="12" y2="12"/><line x1="2" x2="22" y1="2" y2="22"/>',up:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>'},iconNameToFullSvg={aasc:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.2012 8.07928C13.6346 8.0793 14.0128 8.15365 14.3359 8.30193C14.6609 8.45018 14.9141 8.65595 15.0947 8.9201C15.2754 9.18439 15.3683 9.49109 15.374 9.83904H14.1904C14.1676 9.60898 14.0695 9.4303 13.8965 9.30291C13.7235 9.1756 13.4889 9.1115 13.1924 9.1115C12.9909 9.1115 12.8204 9.1404 12.6816 9.19744C12.543 9.25255 12.4364 9.32917 12.3623 9.42791C12.2901 9.52678 12.2539 9.63933 12.2539 9.76482C12.2501 9.8692 12.272 9.9604 12.3193 10.0383C12.3688 10.1162 12.4369 10.1843 12.5225 10.2414C12.6079 10.2964 12.7064 10.3451 12.8184 10.3869C12.9304 10.4268 13.0505 10.4609 13.1777 10.4894L13.7031 10.6144C13.9578 10.6715 14.1914 10.7479 14.4043 10.8429C14.6173 10.938 14.8021 11.0547 14.958 11.1935C15.1138 11.3323 15.2348 11.4957 15.3203 11.6838C15.4077 11.8719 15.4522 12.088 15.4541 12.3312C15.4522 12.6885 15.3611 12.9986 15.1807 13.2609C15.0019 13.5214 14.7427 13.7248 14.4043 13.8693C14.0678 14.0118 13.6617 14.0832 13.1865 14.0832C12.7153 14.0832 12.3048 14.0107 11.9551 13.8664C11.6071 13.7219 11.3345 13.5071 11.1387 13.2238C10.9449 12.9387 10.8435 12.5862 10.834 12.1662H12.0283C12.0416 12.362 12.0984 12.5252 12.1973 12.6564C12.298 12.7857 12.4323 12.8838 12.5996 12.9504C12.7688 13.0149 12.96 13.047 13.1729 13.047C13.3817 13.047 13.563 13.0169 13.7168 12.9562C13.8727 12.8954 13.9935 12.8106 14.0791 12.7023C14.1647 12.5939 14.208 12.469 14.208 12.3283C14.2079 12.1974 14.1686 12.0875 14.0908 11.9982C14.0148 11.9089 13.9022 11.8324 13.7539 11.7697C13.6076 11.707 13.4276 11.6501 13.2148 11.5988L12.5791 11.4387C12.0869 11.3189 11.6982 11.1318 11.4131 10.8771C11.128 10.6224 10.9855 10.2793 10.9873 9.84783C10.9854 9.49418 11.0804 9.18439 11.2705 8.9201C11.4625 8.65603 11.7261 8.45015 12.0605 8.30193C12.3951 8.15369 12.7754 8.07928 13.2012 8.07928Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M5.8125 14.0002H4.48926L4.05664 12.6681H1.94824L1.51465 14.0002H0.19043L2.20703 8.15935H3.79883L5.8125 14.0002ZM2.26172 11.7043H3.74316L3.02539 9.49334H2.98047L2.26172 11.7043Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M8.45215 8.15935C8.88165 8.15935 9.24031 8.22251 9.52734 8.34978C9.81445 8.47717 10.0303 8.65477 10.1748 8.88103C10.3192 9.10536 10.3916 9.36368 10.3916 9.65642C10.3916 9.88452 10.3461 10.085 10.2549 10.258C10.1637 10.4289 10.0384 10.5696 9.87891 10.6799C9.72117 10.7882 9.54024 10.8657 9.33691 10.9113V10.9679C9.55917 10.9775 9.76716 11.0406 9.96094 11.1564C10.1568 11.2724 10.3158 11.4356 10.4375 11.6447C10.5591 11.8519 10.6201 12.099 10.6201 12.3859C10.6201 12.6958 10.5427 12.9727 10.3887 13.216C10.2366 13.4573 10.0113 13.6486 9.71289 13.7892C9.41443 13.9299 9.04655 14.0002 8.60938 14.0002H6.11426V8.15935H8.45215ZM7.34863 12.9904H8.35547C8.69943 12.9904 8.95057 12.9252 9.1084 12.7941C9.26621 12.661 9.34473 12.4834 9.34473 12.2629C9.34468 12.1014 9.30643 11.9587 9.22852 11.8351C9.15056 11.7116 9.03903 11.6145 8.89453 11.5441C8.75195 11.4738 8.58148 11.4387 8.38379 11.4387H7.34863V12.9904ZM7.34863 10.6037H8.26465C8.43369 10.6036 8.58376 10.5737 8.71484 10.5148C8.84793 10.454 8.95227 10.3683 9.02832 10.258C9.10628 10.1477 9.14551 10.0155 9.14551 9.8615C9.14546 9.65055 9.07008 9.48001 8.91992 9.35076C8.77165 9.22169 8.56064 9.15741 8.28711 9.1574H7.34863V10.6037Z" fill="black"/><path d="M7.16602 0.377127C7.44584 0.189493 7.82551 0.20905 8.08496 0.442557L11.418 3.44256C11.7257 3.71966 11.7507 4.19428 11.4736 4.50213C11.1966 4.80961 10.7228 4.83441 10.415 4.55779L7.60938 2.03338L5.11328 4.53045C4.82042 4.82326 4.34562 4.82322 4.05273 4.53045C3.75986 4.23757 3.75989 3.7628 4.05273 3.4699L7.05273 0.4699L7.16602 0.377127Z" fill="black"/></svg>',adesc:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.3867 11.4697C10.6796 11.1771 11.1544 11.1769 11.4473 11.4697C11.7399 11.7626 11.7399 12.2374 11.4473 12.5303L8.44727 15.5303L8.33398 15.623C8.05425 15.8106 7.67449 15.7909 7.41504 15.5576L4.08203 12.5576C3.77415 12.2805 3.74927 11.8059 4.02637 11.498C4.30342 11.1907 4.77722 11.1657 5.08496 11.4424L7.89062 13.9668L10.3867 11.4697Z" fill="black"/><path d="M13.2012 3.0791C13.6346 3.07912 14.0128 3.1535 14.3359 3.30176C14.6611 3.45006 14.9141 3.65661 15.0947 3.9209C15.2752 4.18513 15.3683 4.49104 15.374 4.83887H14.1904C14.1676 4.60882 14.0695 4.43012 13.8965 4.30273C13.7235 4.17546 13.4889 4.11133 13.1924 4.11133C12.9909 4.11133 12.8204 4.14023 12.6816 4.19727C12.5431 4.25236 12.4364 4.32902 12.3623 4.42773C12.2901 4.52659 12.2539 4.63919 12.2539 4.76465C12.2501 4.86901 12.272 4.96023 12.3193 5.03809C12.3688 5.11604 12.4369 5.18417 12.5225 5.24121C12.6079 5.29623 12.7064 5.34496 12.8184 5.38672C12.9304 5.42661 13.0505 5.46075 13.1777 5.48926L13.7031 5.61426C13.9578 5.67128 14.1914 5.74776 14.4043 5.84277C14.6172 5.93784 14.8021 6.05457 14.958 6.19336C15.1139 6.33216 15.2348 6.49633 15.3203 6.68457C15.4076 6.8727 15.4522 7.08885 15.4541 7.33203C15.4521 7.68929 15.3612 7.99944 15.1807 8.26172C15.0019 8.52216 14.7427 8.72465 14.4043 8.86914C14.0678 9.01165 13.6617 9.08301 13.1865 9.08301C12.7153 9.08299 12.3048 9.01057 11.9551 8.86621C11.6072 8.72173 11.3345 8.50786 11.1387 8.22461C10.9447 7.9394 10.8435 7.58622 10.834 7.16602H12.0283C12.0416 7.36176 12.0985 7.52509 12.1973 7.65625C12.298 7.78554 12.4323 7.88365 12.5996 7.9502C12.7688 8.01477 12.96 8.04785 13.1729 8.04785C13.3817 8.04781 13.5629 8.01678 13.7168 7.95605C13.8727 7.89522 13.9935 7.81051 14.0791 7.70215C14.1646 7.59387 14.2079 7.46965 14.208 7.3291C14.208 7.19796 14.1687 7.08739 14.0908 6.99805C14.0148 6.90868 13.9022 6.83228 13.7539 6.76953C13.6076 6.70685 13.4276 6.64993 13.2148 6.59863L12.5791 6.43848C12.0868 6.31871 11.6982 6.13163 11.4131 5.87695C11.1279 5.62221 10.9855 5.27916 10.9873 4.84766C10.9854 4.49404 11.0804 4.18517 11.2705 3.9209C11.4625 3.65661 11.7259 3.45006 12.0605 3.30176C12.3951 3.15353 12.7754 3.0791 13.2012 3.0791Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M5.8125 9H4.48926L4.05664 7.66797H1.94824L1.51465 9H0.19043L2.20703 3.15918H3.79883L5.8125 9ZM2.26172 6.7041H3.74316L3.02539 4.49414H2.98047L2.26172 6.7041Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M8.45215 3.15918C8.88181 3.15918 9.24025 3.22322 9.52734 3.35059C9.81445 3.47798 10.0303 3.6546 10.1748 3.88086C10.3193 4.10518 10.3916 4.36351 10.3916 4.65625C10.3916 4.88432 10.3461 5.08484 10.2549 5.25781C10.1636 5.4289 10.0386 5.57039 9.87891 5.68066C9.72118 5.78898 9.54022 5.86549 9.33691 5.91113V5.96875C9.55913 5.9783 9.76719 6.04044 9.96094 6.15625C10.1568 6.27223 10.3158 6.43538 10.4375 6.64453C10.5591 6.85173 10.6201 7.09875 10.6201 7.38574C10.6201 7.69567 10.5427 7.97245 10.3887 8.21582C10.2366 8.45719 10.0113 8.64841 9.71289 8.78906C9.41442 8.9297 9.04658 8.99999 8.60938 9H6.11426V3.15918H8.45215ZM7.34863 7.99023H8.35547C8.69948 7.99023 8.95057 7.92504 9.1084 7.79395C9.26621 7.66085 9.34473 7.48325 9.34473 7.2627C9.34466 7.10125 9.3064 6.95844 9.22852 6.83496C9.15056 6.71143 9.03899 6.61427 8.89453 6.54395C8.75196 6.47365 8.58145 6.43848 8.38379 6.43848H7.34863V7.99023ZM7.34863 5.60352H8.26465C8.43369 5.60347 8.58376 5.57354 8.71484 5.51465C8.84791 5.45381 8.95228 5.36807 9.02832 5.25781C9.10623 5.14755 9.14551 5.01529 9.14551 4.86133C9.14542 4.65046 9.07002 4.48078 8.91992 4.35156C8.77163 4.22228 8.56087 4.15724 8.28711 4.15723H7.34863V5.60352Z" fill="black"/></svg>',"chevron-down":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 6L8 10L4 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-left":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 12L6 8L10 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-right":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-up":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 10L8 6L12 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"column-arrow":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 26C0 28.2092 1.79086 30 4 30H14C16.2091 30 18 28.2092 18 26V15H25.8786L24.4394 16.4393C23.8536 17.0251 23.8536 17.9749 24.4394 18.5607C25.0252 19.1464 25.9748 19.1464 26.5606 18.5607L30.5606 14.5607C31.1464 13.9749 31.1464 13.0251 30.5606 12.4393L26.5606 8.43934C25.9748 7.85356 25.0252 7.85356 24.4394 8.43934C23.8536 9.02512 23.8536 9.97488 24.4394 10.5607L25.8786 12H18V6C18 3.79086 16.2091 2 14 2H4C1.79086 2 0 3.79086 0 6V26ZM14 5H10.5V12H15V6C15 5.44772 14.5523 5 14 5ZM4 5H7.5V12H3V6C3 5.44772 3.44772 5 4 5ZM10.5 15H15V26C15 26.5522 14.5523 27 14 27H10.5V15ZM4 27H7.5V15H3V26C3 26.5522 3.44772 27 4 27Z" fill="currentColor"/></svg>',edit:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 10.6262V12.5012H5.375L10.905 6.97122L9.03 5.09622L3.5 10.6262ZM12.355 5.52122C12.4014 5.47497 12.4381 5.42002 12.4632 5.35953C12.4883 5.29905 12.5012 5.23421 12.5012 5.16872C12.5012 5.10324 12.4883 5.0384 12.4632 4.97791C12.4381 4.91742 12.4014 4.86248 12.355 4.81622L11.185 3.64622C11.1387 3.59987 11.0838 3.5631 11.0233 3.53801C10.9628 3.51291 10.898 3.5 10.8325 3.5C10.767 3.5 10.7022 3.51291 10.6417 3.53801C10.5812 3.5631 10.5263 3.59987 10.48 3.64622L9.565 4.56122L11.44 6.43622L12.355 5.52122Z" fill="currentColor"/></svg>',"filter-add":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.12126 7.75L10.8517 7.75" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M6.65934 11.748L9.32778 11.748" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M12.2943 1.04872V6.19184M14.9886 3.74341H9.68478" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M8.25488 3C8.04799 3.18323 7.91706 3.45099 7.91699 3.74902C7.91713 4.04868 8.04988 4.31681 8.25879 4.5H2C1.58579 4.5 1.25 4.16421 1.25 3.75C1.25 3.33579 1.58579 3 2 3H8.25488Z" fill="currentColor"/></svg>',"pinned-bottom":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M3.47 12.28A.75.75 0 0 1 4 11h8a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.53-.22ZM12.731 5.256a.75.75 0 0 1-.2.524l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 1 1 1.06-1.06l2.72 2.72V2a.75.75 0 0 1 1.5 0v5.44l2.72-2.72a.75.75 0 0 1 1.26.536Z"/></svg>',"pinned-top":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M12.53 3.72A.75.75 0 0 1 12 5H4a.75.75 0 0 1 0-1.5h8a.75.75 0 0 1 .53.22ZM3.269 10.744a.75.75 0 0 1 .2-.524l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 1 1-1.06 1.06L8.75 8.56V14a.75.75 0 0 1-1.5 0V8.56l-2.72 2.72a.75.75 0 0 1-1.26-.536Z"/></svg>',"small-down":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 10.667 16 21.334l8.667-10.667H7.334Z"/></svg>',"small-up":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 21.333 16 10.666l8.667 10.667H7.334Z"/></svg>',"un-pin":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M8 11a.75.75 0 0 0-.75.75v3.333a.75.75 0 1 0 1.5 0V11.75A.75.75 0 0 0 8 11Z"/><path fill="currentColor" d="M13.11 1.436a.75.75 0 0 0-1.22-.872l-10 14a.75.75 0 1 0 1.22.872L5.207 12.5h7.376a.75.75 0 0 0 .75-.75v-1.174a2.08 2.08 0 0 0-1.153-1.863l-1.185-.599-.005-.002a.58.58 0 0 1-.323-.522V5.165a2.083 2.083 0 0 0 1.854-2.904l.589-.825Zm-3.943 5.52v.634a2.08 2.08 0 0 0 1.153 1.863l1.185.6.005.002a.58.58 0 0 1 .323.522V11H6.28l2.887-4.044ZM9.277 1H5.25a2.084 2.084 0 0 0-.083 4.165v1.676l1.5-2.132v-.292a.75.75 0 0 0-.75-.75H5.25a.584.584 0 0 1 0-1.167h2.972L9.277 1Z"/></svg>'},getQuartzIconsCss=(e={})=>{let t="";for(const n of[...Object.keys(iconNameToSvgFragment),...Object.keys(iconNameToFullSvg)]){const o=quartzIconSvg(n,e.strokeWidth);t+=`.ag-icon-${n}::before { mask-image: url('data:image/svg+xml,${encodeURIComponent(o)}'); }
`}return t},quartzIconSvg=(e,t=1.5)=>{const n=iconNameToFullSvg[e];if(n)return n;const o=iconNameToSvgFragment[e];if(!o)throw new Error(`Missing icon data for ${e}`);return`<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="black" stroke-width="${t}" viewBox="0 0 24 24"><style>* { vector-effect: non-scaling-stroke; }</style>`+o+"</svg>"},iconSetQuartz=(e={})=>createPart({feature:"iconSet",css:()=>getQuartzIconsCss(e)}),iconSetQuartzRegular=iconSetQuartz(),inputStyleBaseCSS=':where(.ag-input-field-input[type=number]:not(.ag-number-field-input-stepper)){-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield;&::-webkit-inner-spin-button,&::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none;margin:0}}.ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){background-color:var(--ag-input-background-color);border:var(--ag-input-border);border-radius:var(--ag-input-border-radius);color:var(--ag-input-text-color);font-family:inherit;font-size:inherit;line-height:inherit;margin:0;min-height:var(--ag-input-height);padding:0;&:where(:disabled){background-color:var(--ag-input-disabled-background-color);border:var(--ag-input-disabled-border);color:var(--ag-input-disabled-text-color)}&:where(:focus){background-color:var(--ag-input-focus-background-color);border:var(--ag-input-focus-border);box-shadow:var(--ag-input-focus-shadow);color:var(--ag-input-focus-text-color);outline:none}&:where(:invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&::-moz-placeholder{color:var(--ag-input-placeholder-text-color)}&::placeholder{color:var(--ag-input-placeholder-text-color)}}:where(.ag-ltr) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-left:var(--ag-input-padding-start)}:where(.ag-rtl) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-right:var(--ag-input-padding-start)}&:where(.ag-ltr,.ag-rtl) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding:0 var(--ag-input-padding-start)}:where(.ag-column-select-header-filter-wrapper),:where(.ag-filter-add-select),:where(.ag-filter-filter),:where(.ag-filter-toolpanel-search),:where(.ag-floating-filter-search-icon),:where(.ag-mini-filter){.ag-input-wrapper:before{background-color:currentcolor;color:var(--ag-input-icon-color);content:"";display:block;height:12px;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;opacity:.5;position:absolute;width:12px}}:where(.ag-ltr) :where(.ag-column-select-header-filter-wrapper),:where(.ag-ltr) :where(.ag-filter-add-select),:where(.ag-ltr) :where(.ag-filter-filter),:where(.ag-ltr) :where(.ag-filter-toolpanel-search),:where(.ag-ltr) :where(.ag-floating-filter-search-icon),:where(.ag-ltr) :where(.ag-mini-filter){.ag-input-wrapper:before{margin-left:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-left:calc(var(--ag-spacing)*1.5 + 12px)}}:where(.ag-rtl) :where(.ag-column-select-header-filter-wrapper),:where(.ag-rtl) :where(.ag-filter-add-select),:where(.ag-rtl) :where(.ag-filter-filter),:where(.ag-rtl) :where(.ag-filter-toolpanel-search),:where(.ag-rtl) :where(.ag-floating-filter-search-icon),:where(.ag-rtl) :where(.ag-mini-filter){.ag-input-wrapper:before{margin-right:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-right:calc(var(--ag-spacing)*1.5 + 12px)}}',inputStyleBorderedCSS=".ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){&:focus{box-shadow:var(--ag-focus-shadow);&:where(.invalid),&:where(:invalid){box-shadow:var(--ag-focus-error-shadow)}}}",baseParams4={inputBackgroundColor:"transparent",inputBorder:!1,inputBorderRadius:0,inputTextColor:{ref:"textColor"},inputPlaceholderTextColor:{ref:"inputTextColor",mix:.5},inputPaddingStart:0,inputHeight:{calc:"max(iconSize, fontSize) + spacing * 2"},inputFocusBackgroundColor:{ref:"inputBackgroundColor"},inputFocusBorder:{ref:"inputBorder"},inputFocusShadow:"none",inputFocusTextColor:{ref:"inputTextColor"},inputDisabledBackgroundColor:{ref:"inputBackgroundColor"},inputDisabledBorder:{ref:"inputBorder"},inputDisabledTextColor:{ref:"inputTextColor"},inputInvalidBackgroundColor:{ref:"inputBackgroundColor"},inputInvalidBorder:{ref:"inputBorder"},inputInvalidTextColor:{ref:"inputTextColor"},inputIconColor:{ref:"inputTextColor"},pickerButtonBorder:!1,pickerButtonFocusBorder:{ref:"inputFocusBorder"},pickerButtonBackgroundColor:{ref:"backgroundColor"},pickerButtonFocusBackgroundColor:{ref:"backgroundColor"},pickerListBorder:!1,pickerListBackgroundColor:{ref:"backgroundColor"},colorPickerThumbSize:18,colorPickerTrackSize:12,colorPickerThumbBorderWidth:3,colorPickerTrackBorderRadius:12,colorPickerColorBorderRadius:4},makeInputStyleBorderedTreeShakeable=()=>createPart({feature:"inputStyle",params:{...baseParams4,inputBackgroundColor:backgroundColor,inputBorder:!0,inputBorderRadius:{ref:"borderRadius"},inputPaddingStart:{ref:"spacing"},inputFocusBorder:{color:accentColor},inputFocusShadow:{ref:"focusShadow"},inputDisabledBackgroundColor:foregroundBackgroundMix(.06),inputDisabledTextColor:{ref:"textColor",mix:.5},inputInvalidBorder:{color:{ref:"invalidColor"}},pickerButtonBorder:!0,pickerListBorder:!0},css:()=>inputStyleBaseCSS+inputStyleBorderedCSS}),inputStyleBordered=makeInputStyleBorderedTreeShakeable(),tabStyleBaseCSS='.ag-tabs-header{background-color:var(--ag-tab-bar-background-color);border-bottom:var(--ag-tab-bar-border);display:flex;flex:1;gap:var(--ag-tab-spacing);padding:var(--ag-tab-bar-top-padding) var(--ag-tab-bar-horizontal-padding) 0}.ag-tabs-header-wrapper{display:flex}.ag-tabs-close-button-wrapper{align-items:center;border:0;display:flex;padding:var(--ag-spacing)}:where(.ag-ltr) .ag-tabs-close-button-wrapper{border-right:solid var(--ag-border-width) var(--ag-border-color)}:where(.ag-rtl) .ag-tabs-close-button-wrapper{border-left:solid var(--ag-border-width) var(--ag-border-color)}.ag-tabs-close-button{background-color:unset;border:0;cursor:pointer;padding:0}.ag-tab{align-items:center;background-color:var(--ag-tab-background-color);border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;color:var(--ag-tab-text-color);cursor:pointer;display:flex;flex:1;justify-content:center;padding:var(--ag-tab-top-padding) var(--ag-tab-horizontal-padding) var(--ag-tab-bottom-padding);position:relative}.ag-tab:hover{background-color:var(--ag-tab-hover-background-color);color:var(--ag-tab-hover-text-color)}.ag-tab.ag-tab-selected{background-color:var(--ag-tab-selected-background-color);color:var(--ag-tab-selected-text-color)}:where(.ag-ltr) .ag-tab.ag-tab-selected:where(:not(:first-of-type)){border-left-color:var(--ag-tab-selected-border-color)}:where(.ag-rtl) .ag-tab.ag-tab-selected:where(:not(:first-of-type)){border-right-color:var(--ag-tab-selected-border-color)}:where(.ag-ltr) .ag-tab.ag-tab-selected:where(:not(:last-of-type)){border-right-color:var(--ag-tab-selected-border-color)}:where(.ag-rtl) .ag-tab.ag-tab-selected:where(:not(:last-of-type)){border-left-color:var(--ag-tab-selected-border-color)}.ag-tab:after{background-color:var(--ag-tab-selected-underline-color);bottom:0;content:"";display:block;height:var(--ag-tab-selected-underline-width);left:0;opacity:0;position:absolute;right:0;transition:opacity var(--ag-tab-selected-underline-transition-duration)}.ag-tab.ag-tab-selected:after{opacity:1}',baseParams5={tabBarBackgroundColor:"transparent",tabBarHorizontalPadding:0,tabBarTopPadding:0,tabBackgroundColor:"transparent",tabTextColor:{ref:"textColor"},tabHorizontalPadding:{ref:"spacing"},tabTopPadding:{ref:"spacing"},tabBottomPadding:{ref:"spacing"},tabSpacing:"0",tabHoverBackgroundColor:{ref:"tabBackgroundColor"},tabHoverTextColor:{ref:"tabTextColor"},tabSelectedBackgroundColor:{ref:"tabBackgroundColor"},tabSelectedTextColor:{ref:"tabTextColor"},tabSelectedBorderWidth:{ref:"borderWidth"},tabSelectedBorderColor:"transparent",tabSelectedUnderlineColor:"transparent",tabSelectedUnderlineWidth:0,tabSelectedUnderlineTransitionDuration:0,tabBarBorder:!1},makeTabStyleQuartzTreeShakeable=()=>createPart({feature:"tabStyle",params:{...baseParams5,tabBarBorder:!0,tabBarBackgroundColor:foregroundMix(.05),tabTextColor:{ref:"textColor",mix:.7},tabSelectedTextColor:{ref:"textColor"},tabHoverTextColor:{ref:"textColor"},tabSelectedBorderColor:{ref:"borderColor"},tabSelectedBackgroundColor:backgroundColor},css:tabStyleBaseCSS}),tabStyleQuartz=makeTabStyleQuartzTreeShakeable(),themeQuartzParams=()=>({fontFamily:[{googleFont:"IBM Plex Sans"},"-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu"]}),makeThemeQuartzTreeShakeable=()=>createTheme().withPart(checkboxStyleDefault).withPart(colorSchemeVariable).withPart(iconSetQuartzRegular).withPart(tabStyleQuartz).withPart(inputStyleBordered).withPart(columnDropStyleBordered).withParams(themeQuartzParams()),themeQuartz=makeThemeQuartzTreeShakeable(),cssVariable=(e,t,n,o,u)=>({changeKey:e,type:t,defaultValue:n,noWarn:o,cacheDefault:u}),CELL_HORIZONTAL_PADDING=cssVariable("cellHorizontalPadding","length",16),INDENTATION_LEVEL=cssVariable("indentationLevel","length",0,!0,!0),ROW_GROUP_INDENT_SIZE=cssVariable("rowGroupIndentSize","length",0),ROW_HEIGHT=cssVariable("rowHeight","length",42),HEADER_HEIGHT=cssVariable("headerHeight","length",48),ROW_BORDER_WIDTH=cssVariable("rowBorderWidth","border",1),PINNED_BORDER_WIDTH=cssVariable("pinnedRowBorderWidth","border",1),HEADER_ROW_BORDER_WIDTH=cssVariable("headerRowBorderWidth","border",1);function _addAdditionalCss(e,t){for(const n of t.sort((o,u)=>o.moduleName.localeCompare(u.moduleName))){const o=n.css;o&&e.set(`module-${n.moduleName}`,o)}}var Environment=class extends BaseEnvironment{initVariables(){this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.getSizeEl(ROW_HEIGHT),this.getSizeEl(HEADER_HEIGHT),this.getSizeEl(ROW_BORDER_WIDTH),this.getSizeEl(PINNED_BORDER_WIDTH),this.refreshRowBorderWidthVariable()}getPinnedRowBorderWidth(){return this.getCSSVariablePixelValue(PINNED_BORDER_WIDTH)}getRowBorderWidth(){return this.getCSSVariablePixelValue(ROW_BORDER_WIDTH)}getHeaderRowBorderWidth(){return this.getCSSVariablePixelValue(HEADER_ROW_BORDER_WIDTH)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(ROW_HEIGHT)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(HEADER_HEIGHT)}getDefaultCellHorizontalPadding(){return this.getCSSVariablePixelValue(CELL_HORIZONTAL_PADDING)}getCellPaddingLeft(){const e=this.getDefaultCellHorizontalPadding(),t=this.getCSSVariablePixelValue(INDENTATION_LEVEL),n=this.getCSSVariablePixelValue(ROW_GROUP_INDENT_SIZE);return e-1+n*t}getCellPadding(){const e=this.getDefaultCellHorizontalPadding()-1;return this.getCellPaddingLeft()+e}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}refreshRowHeightVariable(){const{eRootDiv:e}=this,t=e.style.getPropertyValue("--ag-line-height").trim(),n=this.gos.get("rowHeight");if(n==null||isNaN(n)||!isFinite(n))return t!==null&&e.style.setProperty("--ag-line-height",null),-1;const o=`${n}px`;return t!=o?(e.style.setProperty("--ag-line-height",o),n):t!=""?Number.parseFloat(t):-1}fireStylesChangedEvent(e){e==="rowBorderWidth"&&this.refreshRowBorderWidthVariable(),super.fireStylesChangedEvent(e)}refreshRowBorderWidthVariable(){const e=this.getCSSVariablePixelValue(ROW_BORDER_WIDTH);this.eRootDiv.style.setProperty("--ag-internal-row-border-width",`${e}px`)}postProcessThemeChange(e,t){e&&getComputedStyle(this.getMeasurementContainer()).getPropertyValue("--ag-legacy-styles-loaded")&&_error(t?106:239)}getAdditionalCss(){const e=new Map;return e.set("core",[coreCSS]),_addAdditionalCss(e,Array.from(_getAllRegisteredModules())),e}getDefaultTheme(){return themeQuartz}varError(e,t){_warn(9,{variable:{cssName:e,defaultValue:t}})}themeError(e){_error(240,{theme:e})}shadowRootError(){_error(293)}},BaseEventService=class extends AgBeanStub{constructor(){super(...arguments),this.beanName="eventSvc",this.eventServiceType="global",this.globalSvc=new LocalEventService}addListener(e,t,n){this.globalSvc.addEventListener(e,t,n)}removeListener(e,t,n){this.globalSvc.removeEventListener(e,t,n)}addGlobalListener(e,t=!1){this.globalSvc.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalSvc.removeGlobalListener(e,t)}dispatchEvent(e){this.globalSvc.dispatchEvent(this.gos.addCommon(e))}dispatchEventOnce(e){this.globalSvc.dispatchEventOnce(this.gos.addCommon(e))}},EventService=class extends BaseEventService{postConstruct(){const{globalListener:e,globalSyncListener:t}=this.beans;e&&this.addGlobalListener(e,!0),t&&this.addGlobalListener(t,!1)}};function getHeaderIndexToFocus(e,t,n){const o=e.visibleCols.headerGroupRowCount;if(n>=o)return{column:t,headerRowIndex:n};let u=t.getParent();for(;u&&u.getProvidedColumnGroup().getLevel()>n;)u=u.getParent();const d=t.isSpanHeaderHeight();return!u||d&&u.isPadding()?{column:t,headerRowIndex:o}:{column:u,headerRowIndex:u.getProvidedColumnGroup().getLevel()}}var HeaderNavigationService=class extends BeanStub{constructor(){super(...arguments),this.beanName="headerNavigation",this.currentHeaderRowWithoutSpan=-1}postConstruct(){const e=this.beans;e.ctrlsSvc.whenReady(this,n=>{this.gridBodyCon=n.gridBodyCtrl});const t=_getDocument(e);this.addManagedElementListeners(t,{mousedown:()=>{this.currentHeaderRowWithoutSpan=-1}})}getHeaderPositionForColumn(e,t){let n;const{colModel:o,colGroupSvc:u,ctrlsSvc:d}=this.beans;if(typeof e=="string"?(n=o.getCol(e),n||(n=u?.getColumnGroup(e)??null)):n=e,!n)return null;const v=d.getHeaderRowContainerCtrl()?.getAllCtrls(),w=_last(v||[]).type==="filter",E=getFocusHeaderRowCount(this.beans)-1;let C=-1,_=n;for(;_;)C++,_=_.getParent();let D=C;return t&&w&&D===E-1&&D++,D===-1?null:{headerRowIndex:D,column:n}}navigateVertically(e,t){const{focusSvc:n,visibleCols:o}=this.beans,{focusedHeader:u}=n;if(!u)return!1;const{headerRowIndex:d}=u,f=u.column,v=getFocusHeaderRowCount(this.beans),w=this.getHeaderRowType(d),E=o.headerGroupRowCount;let{headerRowIndex:C,column:_,headerRowIndexWithoutSpan:D}=e==="UP"?getColumnVisibleParent(w,f,d):getColumnVisibleChild(f,d,E),O=!1;return C<0&&(C=0,_=f,O=!0),C>=v?(C=-1,this.currentHeaderRowWithoutSpan=-1):D!==void 0&&(this.currentHeaderRowWithoutSpan=D),!O&&!_?!1:n.focusHeaderPosition({headerPosition:{headerRowIndex:C,column:_},allowUserOverride:!0,event:t})}navigateHorizontally(e,t=!1,n){const{focusSvc:o,gos:u}=this.beans,d={...o.focusedHeader};let f,v;this.currentHeaderRowWithoutSpan!==-1?d.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=d.headerRowIndex,e==="LEFT"!==u.get("enableRtl")?(v="Before",f=this.findHeader(d,v)):(v="After",f=this.findHeader(d,v));const w=u.getCallback("tabToNextHeader");if(t&&w){const E=o.focusHeaderPositionFromUserFunc({userFunc:w,headerPosition:f,direction:v});if(E){const{headerRowIndex:C}=o.focusedHeader||{};C!=null&&C!=d.headerRowIndex&&(this.currentHeaderRowWithoutSpan=C)}return E}return f||!t?o.focusHeaderPosition({headerPosition:f,direction:v,fromTab:t,allowUserOverride:!0,event:n}):this.focusNextHeaderRow(d,v,n)}focusNextHeaderRow(e,t,n){const o=this.beans,u=e.headerRowIndex;let d=null,f;const v=getFocusHeaderRowCount(o),w=this.beans.visibleCols.allCols;if(t==="Before"){if(u<=0)return!1;d=_last(w),f=u-1,this.currentHeaderRowWithoutSpan-=1}else d=w[0],f=u+1,this.currentHeaderRowWithoutSpan<v?this.currentHeaderRowWithoutSpan+=1:this.currentHeaderRowWithoutSpan=-1;let{column:E,headerRowIndex:C}=getHeaderIndexToFocus(this.beans,d,f);return C>=v&&(C=-1),o.focusSvc.focusHeaderPosition({headerPosition:{column:E,headerRowIndex:C},direction:t,fromTab:!0,allowUserOverride:!0,event:n})}scrollToColumn(e,t="After"){if(e.getPinned())return;let n;if(isColumnGroup(e)){const o=e.getDisplayedLeafColumns();n=t==="Before"?_last(o):o[0]}else n=e;this.gridBodyCon.scrollFeature.ensureColumnVisible(n)}findHeader(e,t){const{colGroupSvc:n,visibleCols:o}=this.beans;let u=e.column;if(u instanceof AgColumnGroup){const w=u.getDisplayedLeafColumns();u=t==="Before"?w[0]:w[w.length-1]}const d=t==="Before"?o.getColBefore(u):o.getColAfter(u);if(!d)return;const f=o.headerGroupRowCount;if(e.headerRowIndex>=f)return{headerRowIndex:e.headerRowIndex,column:d};const v=n?.getColGroupAtLevel(d,e.headerRowIndex);return v?v.isPadding()&&d.isSpanHeaderHeight()?{headerRowIndex:o.headerGroupRowCount,column:d}:{headerRowIndex:e.headerRowIndex,column:v??d}:{headerRowIndex:d instanceof AgColumn&&d.isSpanHeaderHeight()?o.headerGroupRowCount:e.headerRowIndex,column:d}}getHeaderRowType(e){const t=this.beans.ctrlsSvc.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}};function getColumnVisibleParent(e,t,n){const o=n-1;if(e!=="filter"){const u=t instanceof AgColumn&&t.isSpanHeaderHeight();let d=t.getParent();for(;d&&(d.getProvidedColumnGroup().getLevel()>o||u&&d.isPadding());)d=d.getParent();if(d)return u?{column:d,headerRowIndex:d.getProvidedColumnGroup().getLevel(),headerRowIndexWithoutSpan:o}:{column:d,headerRowIndex:o,headerRowIndexWithoutSpan:o}}return{column:t,headerRowIndex:o,headerRowIndexWithoutSpan:o}}function getColumnVisibleChild(e,t,n){const o=t+1,u={column:e,headerRowIndex:o,headerRowIndexWithoutSpan:o};if(e instanceof AgColumnGroup){if(o>=n)return{column:e.getDisplayedLeafColumns()[0],headerRowIndex:n,headerRowIndexWithoutSpan:o};let f=e.getDisplayedChildren()[0];if(f instanceof AgColumnGroup&&f.isPadding()){const w=f.getDisplayedLeafColumns()[0];w.isSpanHeaderHeight()&&(f=w)}u.column=f,f instanceof AgColumn&&f.isSpanHeaderHeight()&&(u.headerRowIndex=n,u.headerRowIndexWithoutSpan=o)}return u}var FocusService=class extends BeanStub{constructor(){super(...arguments),this.beanName="focusSvc",this.focusFallbackTimeout=null,this.needsFocusRestored=!1}wireBeans(e){this.colModel=e.colModel,this.visibleCols=e.visibleCols,this.rowRenderer=e.rowRenderer,this.navigation=e.navigation,this.filterManager=e.filterManager,this.overlays=e.overlays}postConstruct(){const e=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:e,columnRowGroupChanged:e}),this.addDestroyFunc(_registerKeyboardFocusEvents(this.beans))}attemptToRecoverFocus(){this.needsFocusRestored=!0,this.focusFallbackTimeout!=null&&clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=window.setTimeout(this.setFocusRecovered.bind(this),100)}setFocusRecovered(){this.needsFocusRestored=!1,this.focusFallbackTimeout!=null&&(clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=null)}shouldTakeFocus(){return this.gos.get("suppressFocusAfterRefresh")?(this.setFocusRecovered(),!1):this.needsFocusRestored?(this.setFocusRecovered(),!0):this.doesRowOrCellHaveBrowserFocus()}onColumnEverythingChanged(){if(!this.focusedCell)return;const e=this.focusedCell.column,t=this.colModel.getCol(e.getId());e!==t&&this.clearFocusedCell()}getFocusCellToUseAfterRefresh(){const{gos:e,focusedCell:t}=this;return e.get("suppressFocusAfterRefresh")||e.get("suppressCellFocus")||!t||!this.doesRowOrCellHaveBrowserFocus()?null:t}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeader||!this.isDomDataPresentInHierarchy(_getActiveDomElement(this.beans),DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeader}doesRowOrCellHaveBrowserFocus(){const e=_getActiveDomElement(this.beans);return this.isDomDataPresentInHierarchy(e,DOM_DATA_KEY_CELL_CTRL,!0)?!0:this.isDomDataPresentInHierarchy(e,DOM_DATA_KEY_ROW_CTRL,!0)}isDomDataPresentInHierarchy(e,t,n){let o=e;for(;o;){const u=_getDomData(this.gos,o,t);if(u)return u.destroyed&&n?(this.attemptToRecoverFocus(),!1):!0;o=o.parentNode}return!1}getFocusedCell(){return this.focusedCell}getFocusEventParams(e){const{rowIndex:t,rowPinned:n,column:o}=e,u={rowIndex:t,rowPinned:n,column:o,isFullWidthCell:!1},d=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:n});return d&&(u.isFullWidthCell=d.isFullWidth()),u}clearFocusedCell(){if(this.focusedCell==null)return;const e=this.getFocusEventParams(this.focusedCell);this.focusedCell=null,this.eventSvc.dispatchEvent({type:"cellFocusCleared",...e})}setFocusedCell(e){this.setFocusRecovered();const{column:t,rowIndex:n,rowPinned:o,forceBrowserFocus:u=!1,preventScrollOnBrowserFocus:d=!1,sourceEvent:f}=e,v=this.colModel.getCol(t);if(!v){this.focusedCell=null;return}this.focusedCell={rowIndex:n,rowPinned:_makeNull(o),column:v};const w=this.getFocusEventParams(this.focusedCell);this.eventSvc.dispatchEvent({type:"cellFocused",...w,...this.previousCellFocusParams&&{previousParams:this.previousCellFocusParams},forceBrowserFocus:u,preventScrollOnBrowserFocus:d,sourceEvent:f}),this.previousCellFocusParams=w}isCellFocused(e){return this.focusedCell==null?!1:_areCellsEqual(e,this.focusedCell)}isHeaderWrapperFocused(e){if(this.focusedHeader==null)return!1;const{column:t,rowCtrl:{rowIndex:n,pinned:o}}=e,{column:u,headerRowIndex:d}=this.focusedHeader;return t===u&&n===d&&o==u.getPinned()}focusHeaderPosition(e){if(this.setFocusRecovered(),_isHeaderFocusSuppressed(this.beans))return!1;const{direction:t,fromTab:n,allowUserOverride:o,event:u,fromCell:d,rowWithoutSpanValue:f,scroll:v=!0}=e;let{headerPosition:w}=e;if(d&&this.filterManager?.isAdvFilterHeaderActive())return this.focusAdvancedFilter(w);if(o){const E=this.focusedHeader,C=getFocusHeaderRowCount(this.beans);if(n){const _=this.gos.getCallback("tabToNextHeader");_&&(w=this.getHeaderPositionFromUserFunc({userFunc:_,direction:t,currentPosition:E,headerPosition:w,headerRowCount:C}))}else{const _=this.gos.getCallback("navigateToNextHeader");if(_&&u){const D={key:u.key,previousHeaderPosition:E,nextHeaderPosition:w,headerRowCount:C,event:u};w=_(D)}}}return w?this.focusProvidedHeaderPosition({headerPosition:w,direction:t,event:u,fromCell:d,rowWithoutSpanValue:f,scroll:v}):!1}focusHeaderPositionFromUserFunc(e){if(_isHeaderFocusSuppressed(this.beans))return!1;const{userFunc:t,headerPosition:n,direction:o,event:u}=e,d=this.focusedHeader,f=getFocusHeaderRowCount(this.beans),v=this.getHeaderPositionFromUserFunc({userFunc:t,direction:o,currentPosition:d,headerPosition:n,headerRowCount:f});return!!v&&this.focusProvidedHeaderPosition({headerPosition:v,direction:o,event:u})}getHeaderPositionFromUserFunc(e){const{userFunc:t,direction:n,currentPosition:o,headerPosition:u,headerRowCount:d}=e,v=t({backwards:n==="Before",previousHeaderPosition:o,nextHeaderPosition:u,headerRowCount:d});return v===!0?o:v===!1?null:v}focusProvidedHeaderPosition(e){const{headerPosition:t,direction:n,fromCell:o,rowWithoutSpanValue:u,event:d,scroll:f=!0}=e,{column:v,headerRowIndex:w}=t,{filterManager:E,ctrlsSvc:C,headerNavigation:_}=this.beans;if(this.focusedHeader&&isHeaderPositionEqual(e.headerPosition,this.focusedHeader))return!1;if(w===-1)return E?.isAdvFilterHeaderActive()?this.focusAdvancedFilter(t):this.focusGridView({column:v,event:d});f&&_?.scrollToColumn(v,n);const O=C.getHeaderRowContainerCtrl(v.getPinned())?.focusHeader(t.headerRowIndex,v,d)||!1;return _&&O&&(u!=null||o)&&(_.currentHeaderRowWithoutSpan=u??-1),O}focusFirstHeader(){if(this.overlays?.exclusive&&this.focusOverlay())return!0;const e=this.visibleCols.allCols[0];if(!e)return!1;const t=getHeaderIndexToFocus(this.beans,e,0);return this.focusHeaderPosition({headerPosition:t,rowWithoutSpanValue:0})}focusLastHeader(e){if(this.overlays?.exclusive&&this.focusOverlay(!0))return!0;const t=getFocusHeaderRowCount(this.beans)-1,n=_last(this.visibleCols.allCols);return this.focusHeaderPosition({headerPosition:{headerRowIndex:t,column:n},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){return this.filterManager?.isAdvFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCell}isRowFocused(e,t){return this.focusedCell==null?!1:this.focusedCell.rowIndex===e&&this.focusedCell.rowPinned===_makeNull(t)}focusOverlay(e){const t=this.overlays?.isVisible()&&this.overlays.eWrapper?.getGui();return!!t&&_focusInto(t,e)}focusGridView(e){const{backwards:t=!1,canFocusOverlay:n=!0,event:o}=e;if(this.overlays?.exclusive)return n&&this.focusOverlay(t);if(_isCellFocusSuppressed(this.beans))return t&&!_isHeaderFocusSuppressed(this.beans)?this.focusLastHeader():n&&this.focusOverlay(t)?!0:t?!1:_focusNextGridCoreContainer(this.beans,t);const u=t?_getLastRow(this.beans):_getFirstRow(this.beans);if(u){const d=e.column??this.focusedHeader?.column,{rowIndex:f,rowPinned:v}=u,w=_getRowNode(this.beans,u);if(!d||!w||f==null)return!1;if(d.isSuppressNavigable(w)){const E=this.gos.get("enableRtl");let C;return!o||o.key===KeyCode.TAB?C=E?KeyCode.LEFT:KeyCode.RIGHT:C=o.key,this.beans.navigation?.navigateToNextCell(null,C,{rowIndex:f,column:d,rowPinned:v||null},!0),!0}return this.navigation?.ensureCellVisible({rowIndex:f,column:d,rowPinned:v}),t&&this.rowRenderer.getRowByPosition(u)?.isFullWidth()&&this.navigation?.tryToFocusFullWidthRow(u,t)||(this.setFocusedCell({rowIndex:f,column:d,rowPinned:_makeNull(v),forceBrowserFocus:!0}),this.beans.rangeSvc?.setRangeToCell({rowIndex:f,rowPinned:v,column:d})),!0}return!!(n&&this.focusOverlay(t)||t&&this.focusLastHeader())}focusAdvancedFilter(e){return this.advFilterFocusColumn=e?.column,this.beans.advancedFilter?.getCtrl().focusHeaderComp()??!1}focusNextFromAdvancedFilter(e,t){const n=(t?void 0:this.advFilterFocusColumn)??this.visibleCols.allCols?.[0];return e?this.focusHeaderPosition({headerPosition:{column:n,headerRowIndex:getFocusHeaderRowCount(this.beans)-1}}):this.focusGridView({column:n})}clearAdvancedFilterColumn(){this.advFilterFocusColumn=void 0}},ScrollVisibleService=class extends BeanStub{constructor(){super(...arguments),this.beanName="scrollVisibleSvc"}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colAnimation=e.colAnimation}postConstruct(){const{gos:e}=this;this.horizontalScrollShowing=e.get("alwaysShowHorizontalScroll")===!0,this.verticalScrollShowing=e.get("alwaysShowVerticalScroll")===!0,this.getScrollbarWidth();const t=this.updateScrollVisible.bind(this);this.addManagedEventListeners({displayedColumnsChanged:t,displayedColumnsWidthChanged:t,newColumnsLoaded:t})}updateScrollVisible(){const{colAnimation:e}=this;e?.isActive()?e.executeLaterVMTurn(()=>{e.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){const e=this.ctrlsSvc.get("center");if(!e||this.colAnimation?.isActive())return;const t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.verticalScrollShowing};this.setScrollsVisible(t),this.updateScrollGap()}updateScrollGap(){const e=this.ctrlsSvc.get("center"),t=e.hasHorizontalScrollGap(),n=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==n)&&(this.horizontalScrollGap=t,this.verticalScrollGap=n,this.eventSvc.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventSvc.dispatchEvent({type:"scrollVisibilityChanged"}))}getScrollbarWidth(){if(this.scrollbarWidth==null){const e=this.gos.get("scrollbarWidth"),n=typeof e=="number"&&e>=0?e:_getScrollbarWidth();n!=null&&(this.scrollbarWidth=n,this.eventSvc.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},GridDestroyService=class extends BeanStub{constructor(){super(...arguments),this.beanName="gridDestroySvc",this.destroyCalled=!1}destroy(){if(this.destroyCalled)return;const{stateSvc:e,ctrlsSvc:t,context:n}=this.beans;this.eventSvc.dispatchEvent({type:"gridPreDestroyed",state:e?.getState()??{}}),this.destroyCalled=!0,t.get("gridCtrl")?.destroyGridUi(),n.destroy(),super.destroy()}},_PUBLIC_EVENTS=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","pinnedRowsChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterUiChanged","filterOpened","floatingFilterUiChanged","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel","findChanged","rowResizeStarted","rowResizeEnded","columnsReset","bulkEditingStarted","bulkEditingStopped","batchEditingStarted","batchEditingStopped"],ALWAYS_SYNC_GLOBAL_EVENTS=new Set(["gridPreDestroyed","fillStart","pasteStart"]),_PUBLIC_EVENT_HANDLERS_MAP=_PUBLIC_EVENTS.reduce((e,t)=>(e[t]=_getCallbackForEvent(t),e),{}),USER_COMP_MODULES={agSetColumnFilter:"SetFilter",agSetColumnFloatingFilter:"SetFilter",agMultiColumnFilter:"MultiFilter",agMultiColumnFloatingFilter:"MultiFilter",agGroupColumnFilter:"GroupFilter",agGroupColumnFloatingFilter:"GroupFilter",agGroupCellRenderer:"GroupCellRenderer",agGroupRowRenderer:"GroupCellRenderer",agRichSelect:"RichSelect",agRichSelectCellEditor:"RichSelect",agDetailCellRenderer:"SharedMasterDetail",agSparklineCellRenderer:"Sparklines",agDragAndDropImage:"SharedDragAndDrop",agColumnHeader:"ColumnHeaderComp",agColumnGroupHeader:"ColumnGroupHeaderComp",agSortIndicator:"Sort",agAnimateShowChangeCellRenderer:"HighlightChanges",agAnimateSlideCellRenderer:"HighlightChanges",agLoadingCellRenderer:"LoadingCellRenderer",agSkeletonCellRenderer:"SkeletonCellRenderer",agCheckboxCellRenderer:"CheckboxCellRenderer",agLoadingOverlay:"Overlay",agExportingOverlay:"Overlay",agNoRowsOverlay:"Overlay",agNoMatchingRowsOverlay:"Overlay",agTooltipComponent:"Tooltip",agReadOnlyFloatingFilter:"CustomFilter",agTextColumnFilter:"TextFilter",agNumberColumnFilter:"NumberFilter",agBigIntColumnFilter:"BigIntFilter",agDateColumnFilter:"DateFilter",agDateInput:"DateFilter",agTextColumnFloatingFilter:"TextFilter",agNumberColumnFloatingFilter:"NumberFilter",agBigIntColumnFloatingFilter:"BigIntFilter",agDateColumnFloatingFilter:"DateFilter",agFormulaCellEditor:"Formula",agCellEditor:"TextEditor",agSelectCellEditor:"SelectEditor",agTextCellEditor:"TextEditor",agNumberCellEditor:"NumberEditor",agDateCellEditor:"DateEditor",agDateStringCellEditor:"DateEditor",agCheckboxCellEditor:"CheckboxEditor",agLargeTextCellEditor:"LargeTextEditor",agMenuItem:"MenuItem",agColumnsToolPanel:"ColumnsToolPanel",agFiltersToolPanel:"FiltersToolPanel",agNewFiltersToolPanel:"NewFiltersToolPanel",agAggregationComponent:"StatusBar",agSelectedRowCountComponent:"StatusBar",agTotalRowCountComponent:"StatusBar",agFilteredRowCountComponent:"StatusBar",agTotalAndFilteredRowCountComponent:"StatusBar",agFindCellRenderer:"Find"},COLUMN_DEFINITION_MOD_VALIDATIONS={allowFormula:"Formula",aggFunc:"SharedAggregation",autoHeight:"RowAutoHeight",cellClass:"CellStyle",cellClassRules:"CellStyle",cellEditor:({cellEditor:e,editable:t,...n})=>{const o=n.groupRowEditable;return!!t||!!o?typeof e=="string"?USER_COMP_MODULES[e]??"CustomEditor":"CustomEditor":null},cellRenderer:({cellRenderer:e})=>typeof e!="string"?null:USER_COMP_MODULES[e],cellStyle:"CellStyle",columnChooserParams:"ColumnMenu",contextMenuItems:"ContextMenu",dndSource:"DragAndDrop",dndSourceOnRowDrag:"DragAndDrop",editable:({editable:e,cellEditor:t})=>e&&!t?"TextEditor":null,enableCellChangeFlash:"HighlightChanges",enablePivot:"SharedPivot",enableRowGroup:"SharedRowGrouping",enableValue:"SharedAggregation",filter:({filter:e})=>e&&typeof e!="string"&&typeof e!="boolean"?"CustomFilter":typeof e=="string"?USER_COMP_MODULES[e]??"ColumnFilter":"ColumnFilter",floatingFilter:"ColumnFilter",getQuickFilterText:"QuickFilter",headerTooltip:"Tooltip",headerTooltipValueGetter:"Tooltip",mainMenuItems:"ColumnMenu",menuTabs:e=>{const t=["columnsMenuTab","generalMenuTab"];return e.menuTabs?.some(n=>t.includes(n))?"ColumnMenu":null},pivot:"SharedPivot",pivotIndex:"SharedPivot",rowDrag:"RowDrag",rowGroup:"SharedRowGrouping",rowGroupIndex:"SharedRowGrouping",tooltipField:"Tooltip",tooltipValueGetter:"Tooltip",tooltipComponentSelector:"Tooltip",spanRows:"CellSpan",groupHierarchy:"SharedRowGrouping"},GRID_OPTIONS_MODULES={alignedGrids:"AlignedGrids",allowContextMenuWithControlKey:"ContextMenu",autoSizeStrategy:"ColumnAutoSize",cellSelection:"CellSelection",columnHoverHighlight:"ColumnHover",datasource:"InfiniteRowModel",doesExternalFilterPass:"ExternalFilter",editType:"EditCore",invalidEditValueMode:"EditCore",enableAdvancedFilter:"AdvancedFilter",enableCellSpan:"CellSpan",enableCharts:"IntegratedCharts",enableRangeSelection:"CellSelection",enableRowPinning:"PinnedRow",findSearchValue:"Find",getFullRowEditValidationErrors:"EditCore",getContextMenuItems:"ContextMenu",getLocaleText:"Locale",getMainMenuItems:"ColumnMenu",getRowClass:"RowStyle",getRowStyle:"RowStyle",groupTotalRow:"SharedRowGrouping",grandTotalRow:"ClientSideRowModelHierarchy",initialState:"GridState",isExternalFilterPresent:"ExternalFilter",isRowPinnable:"PinnedRow",isRowPinned:"PinnedRow",localeText:"Locale",masterDetail:"SharedMasterDetail",pagination:"Pagination",pinnedBottomRowData:"PinnedRow",pinnedTopRowData:"PinnedRow",pivotMode:"SharedPivot",pivotPanelShow:"RowGroupingPanel",quickFilterText:"QuickFilter",rowClass:"RowStyle",rowClassRules:"RowStyle",rowData:"ClientSideRowModel",rowDragManaged:"RowDrag",refreshAfterGroupEdit:["RowGrouping","TreeData"],rowGroupPanelShow:"RowGroupingPanel",rowNumbers:"RowNumbers",rowSelection:"SharedRowSelection",rowStyle:"RowStyle",serverSideDatasource:"ServerSideRowModel",sideBar:"SideBar",statusBar:"StatusBar",treeData:"SharedTreeData",undoRedoCellEditing:"UndoRedoEdit",valueCache:"ValueCache",viewportDatasource:"ViewportRowModel"},changeSetId=0,gridInstanceSequence=0,GRID_DOM_KEY="__ag_grid_instance",GridOptionsService=class extends BeanStub{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.instanceId=gridInstanceSequence++,this.gridReadyFired=!1,this.queueEvents=[],this.propEventSvc=new LocalEventService,this.globalEventHandlerFactory=e=>(t,n)=>{if(!this.isAlive())return;const o=ALWAYS_SYNC_GLOBAL_EVENTS.has(t);if(o&&!e||!o&&e||!isPublicEventHandler(t))return;const u=(d,f)=>{const v=_PUBLIC_EVENT_HANDLERS_MAP[d],w=this.gridOptions[v];typeof w=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>w(f))};if(this.gridReadyFired)u(t,n);else if(t==="gridReady"){u(t,n),this.gridReadyFired=!0;for(const d of this.queueEvents)u(d.eventName,d.event);this.queueEvents=[]}else this.queueEvents.push({eventName:t,event:n})}}wireBeans(e){this.gridOptions=e.gridOptions,this.validation=e.validation,this.api=e.gridApi,this.gridId=e.context.getId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){this.validateGridOptions(this.gridOptions),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory().bind(this),!0),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propEventSvc.setFrameworkOverrides(this.beans.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:e})=>{this.updateGridOptions({options:e,force:!0,source:"optionsUpdated"})}})}destroy(){super.destroy(),this.queueEvents=[]}get(e){return this.gridOptions[e]??GRID_OPTION_DEFAULTS[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return _exists(this.gridOptions[e])}mergeGridCommonParams(e){return e&&(n=>e(this.addCommon(n)))}updateGridOptions({options:e,force:t,source:n="api"}){const o={id:changeSetId++,properties:[]},u=[],{gridOptions:d,validation:f}=this;for(const v of Object.keys(e)){const w=GlobalGridOptions.applyGlobalGridOption(v,e[v]);f?.warnOnInitialPropertyUpdate(n,v);const E=t||typeof w=="object"&&n==="api",C=d[v];if(E||C!==w){d[v]=w;const _={type:v,currentValue:w,previousValue:C,changeSet:o,source:n};u.push(_)}}this.validateGridOptions(this.gridOptions),o.properties=u.map(v=>v.type);for(const v of u)_logIfDebug(this,`Updated property ${v.type} from`,v.previousValue," to ",v.currentValue),this.propEventSvc.dispatchEvent(v)}addPropertyEventListener(e,t){this.propEventSvc.addEventListener(e,t)}removePropertyEventListener(e,t){this.propEventSvc.removeEventListener(e,t)}getDomDataKey(){return this.domDataKey}addCommon(e){return e.api=this.api,e.context=this.gridOptionsContext,e}validateOptions(e,t){for(const n of Object.keys(e)){const o=e[n];if(o==null||o===!1)continue;let u=t[n];typeof u=="function"&&(u=u(e,this.gridOptions,this.beans)),u&&this.assertModuleRegistered(u,n)}}validateGridOptions(e){this.validateOptions(e,GRID_OPTIONS_MODULES),this.validation?.processGridOptions(e)}validateColDef(e,t,n){(n||!this.beans.dataTypeSvc?.isColPendingInference(t))&&(this.validateOptions(e,COLUMN_DEFINITION_MOD_VALIDATIONS),this.validation?.validateColDef(e))}assertModuleRegistered(e,t){const n=Array.isArray(e)?e.some(o=>this.isModuleRegistered(o)):this.isModuleRegistered(e);return n||_error(200,{...this.getModuleErrorParams(),moduleName:e,reasonOrId:t}),n}getModuleErrorParams(){return{gridId:this.gridId,gridScoped:_areModulesGridScoped(),rowModelType:this.get("rowModelType"),isUmd:_isUmd()}}isModuleRegistered(e){return _isModuleRegistered(e,this.gridId,this.get("rowModelType"))}setInstanceDomData(e){e[GRID_DOM_KEY]=this.instanceId}isElementInThisInstance(e){let t=e;for(;t;){const n=t[GRID_DOM_KEY];if(_exists(n))return n===this.instanceId;t=t.parentElement}return!1}};function isPublicEventHandler(e){return!!_PUBLIC_EVENT_HANDLERS_MAP[e]}var HeaderCellMouseListenerFeature=class extends BeanStub{constructor(e,t){super(),this.column=e,this.eGui=t,this.lastMovingChanged=0}postConstruct(){this.addManagedElementListeners(this.eGui,{click:e=>e&&this.onClick(e)}),this.addManagedListeners(this.column,{movingChanged:()=>{this.lastMovingChanged=Date.now()}})}onClick(e){const{sortSvc:t,rangeSvc:n,gos:o}=this.beans;if(!(_getEnableColumnSelection(o)?e.altKey:!0))n?.handleColumnSelection(this.column,e);else if(this.column.isSortable()){const d=this.column.isMoving(),v=Date.now()-this.lastMovingChanged<50;d||v||t?.progressSortFromEvent(this.column,e)}}};function getHeaderCompElementParams(e,t){const n={"aria-hidden":"true"};return{tag:"div",cls:"ag-cell-label-container",role:"presentation",children:[{tag:"span",ref:"eMenu",cls:"ag-header-icon ag-header-cell-menu-button",attrs:n},{tag:"span",ref:"eFilterButton",cls:"ag-header-icon ag-header-cell-filter-button",attrs:n},{tag:"div",ref:"eLabel",cls:"ag-header-cell-label",role:"presentation",children:[e?{tag:"span",ref:"eColRef",cls:"ag-header-col-ref"}:null,{tag:"span",ref:"eText",cls:"ag-header-cell-text"},{tag:"span",ref:"eFilter",cls:"ag-header-icon ag-header-label-icon ag-filter-icon",attrs:n},t?{tag:"ag-sort-indicator",ref:"eSortIndicator"}:null]}]}}var HeaderComp=class extends Component{constructor(){super(...arguments),this.eFilter=RefPlaceholder,this.eFilterButton=RefPlaceholder,this.eSortIndicator=RefPlaceholder,this.eMenu=RefPlaceholder,this.eLabel=RefPlaceholder,this.eText=RefPlaceholder,this.eColRef=RefPlaceholder,this.eSortOrder=RefPlaceholder,this.eSortAsc=RefPlaceholder,this.eSortDesc=RefPlaceholder,this.eSortMixed=RefPlaceholder,this.eSortNone=RefPlaceholder,this.eSortAbsoluteAsc=RefPlaceholder,this.eSortAbsoluteDesc=RefPlaceholder,this.isLoadingInnerComponent=!1}refresh(e){const t=this.params;if(this.params=e,this.workOutTemplate(e,!!this.beans?.sortSvc)!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||e.enableSorting!=this.currentSort||e.column.formulaRef!=this.currentRef||this.currentSuppressMenuHide!=null&&this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||t.enableFilterButton!=e.enableFilterButton||t.enableFilterIcon!=e.enableFilterIcon)return!1;if(this.innerHeaderComponent){const n={...e};_mergeDeep(n,e.innerHeaderComponentParams),this.innerHeaderComponent.refresh?.(n)}else this.setDisplayName(e);return!0}workOutTemplate(e,t){const{formula:n}=this.beans,o=e.template;return o?o?.trim?o.trim():o:getHeaderCompElementParams(!!n?.active,t)}init(e){this.params=e;const{sortSvc:t,touchSvc:n,rowNumbersSvc:o,userCompFactory:u}=this.beans,d=t?.getSortIndicatorSelector();this.currentTemplate=this.workOutTemplate(e,!!d),this.setTemplate(this.currentTemplate,d?[d]:void 0),this.eLabel&&(this.mouseListener??(this.mouseListener=this.createManagedBean(new HeaderCellMouseListenerFeature(e.column,this.eLabel)))),n?.setupForHeader(this),this.setMenu(),this.setupSort(),this.setupColumnRefIndicator(),o?.setupForHeader(this),this.setupFilterIcon(),this.setupFilterButton(),this.workOutInnerHeaderComponent(u,e),this.setDisplayName(e)}workOutInnerHeaderComponent(e,t){const n=_getInnerHeaderCompDetails(e,t,t);n&&(this.isLoadingInnerComponent=!0,n.newAgStackInstance().then(o=>{this.isLoadingInnerComponent=!1,o&&(this.isAlive()?(this.innerHeaderComponent=o,this.eText&&this.eText.appendChild(o.getGui())):this.destroyBean(o))}))}setDisplayName(e){const{displayName:t}=e,n=this.currentDisplayName;this.currentDisplayName=t,!(!this.eText||n===t||this.innerHeaderComponent||this.isLoadingInnerComponent)&&(this.eText.textContent=_toString(t))}addInIcon(e,t,n){const o=_createIconNoSpan(e,this.beans,n);o&&t.appendChild(o)}workOutShowMenu(){return this.params.enableMenu&&!!this.beans.menuSvc?.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return!!this.beans.menuSvc?.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){_removeFromParent(this.eMenu),this.eMenu=void 0;return}const{gos:e,eMenu:t,params:n}=this,o=_isLegacyMenuEnabled(e);this.addInIcon(o?"menu":"menuAlt",t,n.column),t.classList.toggle("ag-header-menu-icon",!o);const u=this.shouldSuppressMenuHide();this.currentSuppressMenuHide=u,this.addManagedElementListeners(t,{click:()=>this.showColumnMenu(this.eMenu)}),this.toggleMenuAlwaysShow(u)}toggleMenuAlwaysShow(e){this.eMenu?.classList.toggle("ag-header-menu-always-show",e)}showColumnMenu(e){const{currentSuppressMenuHide:t,params:n}=this;t||this.toggleMenuAlwaysShow(!0),n.showColumnMenu(e,()=>{t||this.toggleMenuAlwaysShow(!1)})}onMenuKeyboardShortcut(e){const{params:t,gos:n,beans:o,eMenu:u,eFilterButton:d}=this,f=t.column,v=_isLegacyMenuEnabled(n);if(e&&!v){if(o.menuSvc?.isFilterMenuInHeaderEnabled(f))return t.showFilter(d??u??this.getGui()),!0}else if(t.enableMenu)return this.showColumnMenu(u??d??this.getGui()),!0;return!1}setupSort(){const{sortSvc:e}=this.beans;if(!e)return;const{enableSorting:t,column:n}=this.params;if(this.currentSort=t,!this.eSortIndicator){this.eSortIndicator=this.createBean(e.createSortIndicator(!0));const{eSortIndicator:o,eSortOrder:u,eSortAsc:d,eSortDesc:f,eSortMixed:v,eSortNone:w,eSortAbsoluteAsc:E,eSortAbsoluteDesc:C}=this;o.attachCustomElements(u,d,f,v,w,E,C)}this.eSortIndicator.setupSort(n),this.currentSort&&e.setupHeader(this,n)}setupColumnRefIndicator(){const{eColRef:e,beans:{editModelSvc:t},params:n}=this;e&&(this.currentRef=n.column.formulaRef,e.textContent=this.currentRef,_setDisplayed(e,!1),this.addManagedEventListeners({cellEditingStarted:()=>{const o=t?.getEditPositions(),u=!!this.currentRef&&!!o?.some(d=>d.column.isAllowFormula());_setDisplayed(e,u)},cellEditingStopped:()=>{_setDisplayed(e,!1)}}))}setupFilterIcon(){const{eFilter:e,params:t}=this;if(!e)return;const n=()=>{const o=t.column.isFilterActive();_setDisplayed(e,o,{skipAriaHidden:!0})};this.configureFilter(t.enableFilterIcon,e,n,"filterActive")}setupFilterButton(){const{eFilterButton:e,params:t}=this;if(!e)return;this.configureFilter(t.enableFilterButton,e,this.onFilterChangedButton.bind(this),"filter")?this.addManagedElementListeners(e,{click:()=>t.showFilter(e)}):this.eFilterButton=void 0}configureFilter(e,t,n,o){if(!e)return _removeFromParent(t),!1;const u=this.params.column;return this.addInIcon(o,t,u),this.addManagedListeners(u,{filterChanged:n}),n(),!0}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){const{eFilterButton:t,eMenu:n}=this;return e?t??n??this.getGui():n??t??this.getGui()}destroy(){super.destroy(),this.innerHeaderComponent=this.destroyBean(this.innerHeaderComponent),this.mouseListener=this.destroyBean(this.mouseListener)}},GroupStickyLabelFeature=class extends BeanStub{constructor(e,t){super(),this.eLabel=e,this.columnGroup=t,this.isSticky=!1,this.left=null,this.right=null}postConstruct(){const{columnGroup:e,beans:t}=this,{ctrlsSvc:n}=t;n.whenReady(this,()=>{const o=this.refreshPosition.bind(this);e.getPinned()==null&&this.addManagedEventListeners({bodyScroll:u=>{u.direction==="horizontal"&&this.updateSticky(u.left)}}),this.addManagedListeners(e,{leftChanged:o,displayedChildrenChanged:o}),this.addManagedEventListeners({columnResized:o}),this.refreshPosition()})}refreshPosition(){const{columnGroup:e,beans:t}=this,n=e.getLeft(),o=e.getActualWidth();if(n==null||o===0){this.left=null,this.right=null,this.setSticky(!1);return}this.left=n,this.right=n+o;const u=t.colViewport.getScrollPosition();u!=null&&this.updateSticky(u)}updateSticky(e){const{beans:t,left:n,right:o}=this;if(n==null||o==null){this.setSticky(!1);return}const{gos:u,visibleCols:d}=t,v=u.get("enableRtl")?d.bodyWidth-e:e;this.setSticky(n<v&&o>v)}setSticky(e){const{isSticky:t,eLabel:n}=this;t!==e&&(this.isSticky=e,n.classList.toggle("ag-sticky-label",e))}},HeaderGroupCompElement={tag:"div",cls:"ag-header-group-cell-label",role:"presentation",children:[{tag:"span",ref:"agLabel",cls:"ag-header-group-text",role:"presentation"},{tag:"span",ref:"agOpened",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"},{tag:"span",ref:"agClosed",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"}]},HeaderGroupComp=class extends Component{constructor(){super(HeaderGroupCompElement),this.agOpened=RefPlaceholder,this.agClosed=RefPlaceholder,this.agLabel=RefPlaceholder,this.isLoadingInnerComponent=!1}init(e){const{userCompFactory:t,touchSvc:n}=this.beans;this.params=e,this.checkWarnings(),this.workOutInnerHeaderGroupComponent(t,e),this.setupLabel(e),this.addGroupExpandIcon(e),this.setupExpandIcons(),n?.setupForHeaderGroup(this)}checkWarnings(){this.params.template&&_warn(89)}workOutInnerHeaderGroupComponent(e,t){const n=_getInnerHeaderGroupCompDetails(e,t,t);n&&(this.isLoadingInnerComponent=!0,n.newAgStackInstance().then(o=>{this.isLoadingInnerComponent=!1,o&&(this.isAlive()?(this.innerHeaderGroupComponent=o,this.agLabel.appendChild(o.getGui())):this.destroyBean(o))}))}setupExpandIcons(){const{agOpened:e,agClosed:t,params:{columnGroup:n},beans:{colGroupSvc:o}}=this;this.addInIcon("columnGroupOpened",e),this.addInIcon("columnGroupClosed",t);const u=w=>{if(_isStopPropagationForAgGrid(w))return;const E=!n.isExpanded();o.setColumnGroupOpened(n.getProvidedColumnGroup(),E,"uiColumnExpanded")};this.addTouchAndClickListeners(t,u),this.addTouchAndClickListeners(e,u);const d=w=>{_stopPropagationForAgGrid(w)};this.addManagedElementListeners(t,{dblclick:d}),this.addManagedElementListeners(e,{dblclick:d}),this.addManagedElementListeners(this.getGui(),{dblclick:u}),this.updateIconVisibility();const f=n.getProvidedColumnGroup(),v=this.updateIconVisibility.bind(this);this.addManagedListeners(f,{expandedChanged:v,expandableChanged:v})}addTouchAndClickListeners(e,t){this.beans.touchSvc?.setupForHeaderGroupElement(this,e,t),this.addManagedElementListeners(e,{click:t})}updateIconVisibility(){const{agOpened:e,agClosed:t,params:{columnGroup:n}}=this;if(n.isExpandable()){const o=n.isExpanded();_setDisplayed(e,o),_setDisplayed(t,!o)}else _setDisplayed(e,!1),_setDisplayed(t,!1)}addInIcon(e,t){const n=_createIconNoSpan(e,this.beans,null);n&&t.appendChild(n)}addGroupExpandIcon(e){if(!e.columnGroup.isExpandable()){const{agOpened:t,agClosed:n}=this;_setDisplayed(t,!1),_setDisplayed(n,!1)}}setupLabel(e){const{displayName:t,columnGroup:n}=e,{innerHeaderGroupComponent:o,isLoadingInnerComponent:u}=this,d=o||u;_exists(t)&&!d&&(this.agLabel.textContent=_toString(t)),n.getColGroupDef()?.suppressStickyLabel||this.createManagedBean(new GroupStickyLabelFeature(this.getGui(),n))}destroy(){super.destroy(),this.innerHeaderGroupComponent&&(this.destroyBean(this.innerHeaderGroupComponent),this.innerHeaderGroupComponent=void 0)}},ColumnHeaderCompModule={moduleName:"ColumnHeaderComp",version:VERSION,userComponents:{agColumnHeader:HeaderComp},icons:{menu:"menu",menuAlt:"menu-alt"}},ColumnGroupHeaderCompModule={moduleName:"ColumnGroupHeaderComp",version:VERSION,userComponents:{agColumnGroupHeader:HeaderGroupComp},icons:{columnGroupOpened:"expanded",columnGroupClosed:"contracted"}},AnimationFrameService=class extends BeanStub{constructor(){super(...arguments),this.beanName="animationFrameSvc",this.p1={list:[],sorted:!1},this.p2={list:[],sorted:!1},this.f1={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastScrollTop=0,this.taskCount=0}setScrollTop(e){this.scrollGoingDown=e>=this.lastScrollTop,e===0&&(this.scrollGoingDown=!0),this.lastScrollTop=e}postConstruct(){this.active=!this.gos.get("suppressAnimationFrame"),this.batchFrameworkComps=this.beans.frameworkOverrides.batchFrameworkComps}verify(){this.active===!1&&_warn(92)}createTask(e,t,n,o,u=!1){this.verify();let d=n;o&&this.batchFrameworkComps&&(d="f1");const f={task:e,index:t,createOrder:++this.taskCount,deferred:u};this.addTaskToList(this[d],f),this.schedule()}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort((n,o)=>n.deferred!==o.deferred?n.deferred?-1:1:n.index!==o.index?t*(o.index-n.index):o.createOrder-n.createOrder),e.sorted=!0}addDestroyTask(e){this.verify(),this.destroyTasks.push(e),this.schedule()}executeFrame(e){const{p1:t,p2:n,f1:o,destroyTasks:u,beans:d}=this,{ctrlsSvc:f,frameworkOverrides:v}=d,w=t.list,E=n.list,C=o.list,_=Date.now();let D=0;const O=e<=0,M=f.getScrollFeature();for(;O||D<e;){if(!M.scrollGridIfNeeded()){let I;if(w.length)this.sortTaskList(t),I=w.pop().task;else if(E.length)this.sortTaskList(n),I=E.pop().task;else if(C.length)v.wrapOutgoing(()=>{for(;(O||D<e)&&!M.scrollGridIfNeeded();){if(C.length)this.sortTaskList(o),I=C.pop().task,I();else break;D=Date.now()-_}}),I=()=>{};else if(u.length)I=u.pop();else break;I()}D=Date.now()-_}w.length||E.length||C.length||u.length?this.requestFrame():this.ticking=!1}flushAllFrames(){this.active&&this.executeFrame(-1)}schedule(){this.active&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);_requestAnimationFrame(this.beans,e)}isQueueEmpty(){return!this.ticking}},AnimationFrameModule={moduleName:"AnimationFrame",version:VERSION,beans:[AnimationFrameService]},IconService=class extends BeanStub{constructor(){super(...arguments),this.beanName="iconSvc"}createIconNoSpan(e,t){return _createIconNoSpan(e,this.beans,t?.column)}},TouchService=class extends BeanStub{constructor(){super(...arguments),this.beanName="touchSvc"}mockBodyContextMenu(e,t){this.mockContextMenu(e,e.eBodyViewport,t)}mockHeaderContextMenu(e,t){this.mockContextMenu(e,e.eGui,t)}mockRowContextMenu(e){if(!_isIOSUserAgent())return;const t=(n,o,u)=>{const{rowCtrl:d,cellCtrl:f}=e.getControlsForEventTarget(u?.target??null);f?.column&&f.dispatchCellContextMenuEvent(u??null),this.beans.contextMenuSvc?.handleContextMenuMouseEvent(void 0,u,d,f)};this.mockContextMenu(e,e.element,t)}handleCellDoubleClick(e,t){return(()=>{if(!_isIOSUserAgent()||_isEventSupported("dblclick"))return!1;const o=Date.now(),u=o-e.lastIPadMouseClickEvent<200;return e.lastIPadMouseClickEvent=o,u})()?(e.onCellDoubleClicked(t),t.preventDefault(),!0):!1}setupForHeader(e){const{gos:t,sortSvc:n,menuSvc:o}=this.beans;if(t.get("suppressTouch"))return;const{params:u,eMenu:d,eFilterButton:f}=e,v=new TouchListener(e.getGui(),!0);e.addDestroyFunc(()=>v.destroy());const w=e.shouldSuppressMenuHide(),E=w&&_exists(d)&&u.enableMenu;let C=v;if(E&&(C=new TouchListener(d,!0),e.addDestroyFunc(()=>C.destroy())),u.enableMenu||o?.isHeaderContextMenuEnabled(u.column)){const _=E?"tap":"longTap",D=O=>u.showColumnMenuAfterMouseClick(O.touchStart);e.addManagedListeners(C,{[_]:D}),e.addManagedListeners(v,{longTap:D})}if(u.enableSorting){const _=D=>{const O=D.touchStart.target;w&&(d?.contains(O)||f?.contains(O))||n?.progressSort(u.column,!1,"uiColumnSorted")};e.addManagedListeners(v,{tap:_})}if(u.enableFilterButton&&f){const _=new TouchListener(f,!0);e.addManagedListeners(_,{tap:()=>u.showFilter(f)}),e.addDestroyFunc(()=>_.destroy())}}setupForHeaderGroup(e){const t=e.params;if(this.beans.menuSvc?.isHeaderContextMenuEnabled(t.columnGroup.getProvidedColumnGroup())){const n=new TouchListener(t.eGridHeader,!0),o=u=>t.showColumnMenuAfterMouseClick(u.touchStart);e.addManagedListeners(n,{longTap:o}),e.addDestroyFunc(()=>n.destroy())}}setupForHeaderGroupElement(e,t,n){const o=new TouchListener(t,!0);e.addManagedListeners(o,{tap:n}),e.addDestroyFunc(()=>o.destroy())}mockContextMenu(e,t,n){if(!_isIOSUserAgent())return;const o=new TouchListener(t),u=d=>{_isEventFromThisInstance(this.beans,d.touchEvent)&&n(void 0,d.touchStart,d.touchEvent)};e.addManagedListeners(o,{longTap:u}),e.addDestroyFunc(()=>o.destroy())}},TouchModule={moduleName:"Touch",version:VERSION,beans:[TouchService]},CellNavigationService=class extends BeanStub{constructor(){super(...arguments),this.beanName="cellNavigation"}wireBeans(e){this.rowSpanSvc=e.rowSpanSvc}getNextCellToFocus(e,t,n=!1){return n?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const n=e===KeyCode.UP,o=e===KeyCode.DOWN,u=e===KeyCode.LEFT;let d,f;const{pageBounds:v,gos:w,visibleCols:E,pinnedRowModel:C}=this.beans,{rowPinned:_}=t;if(n||o)_&&C?n?f=0:f=_==="top"?C.getPinnedTopRowCount()-1:C.getPinnedBottomRowCount()-1:f=n?v.getFirstRow():v.getLastRow(),d=t.column;else{const D=w.get("enableRtl");f=t.rowIndex,d=(u!==D?E.allCols:[...E.allCols].reverse()).find(M=>this.isCellGoodToFocusOn({rowIndex:f,rowPinned:null,column:M}))}return d?{rowIndex:f,rowPinned:_,column:d}:null}getNextCellToFocusWithoutCtrlPressed(e,t){let n=t,o=!1;for(;!o;){switch(e){case KeyCode.UP:n=this.getCellAbove(n);break;case KeyCode.DOWN:n=this.getCellBelow(n);break;case KeyCode.RIGHT:n=this.gos.get("enableRtl")?this.getCellToLeft(n):this.getCellToRight(n);break;case KeyCode.LEFT:n=this.gos.get("enableRtl")?this.getCellToRight(n):this.getCellToLeft(n);break;default:n=null,_warn(8,{key:e});break}n?o=this.isCellGoodToFocusOn(n):o=!0}return n}isCellGoodToFocusOn(e){const t=e.column;let n;const{pinnedRowModel:o,rowModel:u}=this.beans;switch(e.rowPinned){case"top":n=o?.getPinnedTopRow(e.rowIndex);break;case"bottom":n=o?.getPinnedBottomRow(e.rowIndex);break;default:n=u.getRow(e.rowIndex);break}return n?!this.isSuppressNavigable(t,n):!1}getCellToLeft(e){if(!e)return null;const t=this.beans.visibleCols.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.beans.visibleCols.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellBelow(e){if(!e)return null;const t=this.rowSpanSvc?.getCellEnd(e)??e,n=_getRowBelow(this.beans,t,!0);return n?{rowIndex:n.rowIndex,column:e.column,rowPinned:n.rowPinned}:null}getCellAbove(e){if(!e)return null;const t=this.rowSpanSvc?.getCellStart(e)??e,n=_getRowAbove(this.beans,{rowIndex:t.rowIndex,rowPinned:t.rowPinned},!0);return n?{rowIndex:n.rowIndex,column:e.column,rowPinned:n.rowPinned}:null}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){const{visibleCols:t,pagination:n}=this.beans,o=t.allCols;let u=e.rowIndex,d=e.rowPinned,f=t.getColAfter(e.column);if(!f){f=o[0];const v=_getRowBelow(this.beans,e,!0);if(_missing(v)||!v.rowPinned&&!(n?.isRowInPage(v.rowIndex)??!0))return null;u=v?v.rowIndex:null,d=v?v.rowPinned:null}return{rowIndex:u,column:f,rowPinned:d}}getNextTabbedCellBackwards(e){const{beans:t}=this,{visibleCols:n,pagination:o}=t,u=n.allCols;let d=e.rowIndex,f=e.rowPinned,v=n.getColBefore(e.column);if(!v){v=_last(u);const w=_getRowAbove(t,{rowIndex:e.rowIndex,rowPinned:e.rowPinned},!0);if(_missing(w)||!w.rowPinned&&!(o?.isRowInPage(w.rowIndex)??!0))return null;d=w?w.rowIndex:null,f=w?w.rowPinned:null}return{rowIndex:d,column:v,rowPinned:f}}isSuppressNavigable(e,t){const{suppressNavigable:n}=e.colDef;if(typeof n=="boolean")return n;if(typeof n=="function"){const o=e.createColumnFunctionCallbackParams(t);return n(o)}return!1}};function getFocusedCell(e){return e.focusSvc.getFocusedCell()}function clearFocusedCell(e){return e.focusSvc.clearFocusedCell()}function setFocusedCell(e,t,n,o){e.focusSvc.setFocusedCell({rowIndex:t,column:n,rowPinned:o,forceBrowserFocus:!0})}function tabToNextCell(e,t){return e.navigation?.tabToNextCell(!1,t)??!1}function tabToPreviousCell(e,t){return e.navigation?.tabToNextCell(!0,t)??!1}function setFocusedHeader(e,t,n=!1){const o=e.headerNavigation?.getHeaderPositionForColumn(t,n);o&&e.focusSvc.focusHeaderPosition({headerPosition:o})}function _unwrapUserComp(e){const t=e;return t?.getFrameworkComponentInstance!=null?t.getFrameworkComponentInstance():e}var EditCellValidationModel=class{constructor(){this.cellValidations=new Map}getCellValidation(e){const{rowNode:t,column:n}=e||{};return this.cellValidations?.get(t)?.get(n)}hasCellValidation(e){return!e?.rowNode||!e.column?this.cellValidations.size>0:!!this.getCellValidation(e)}setCellValidation(e,t){const{rowNode:n,column:o}=e;this.cellValidations.has(n)||this.cellValidations.set(n,new Map),this.cellValidations.get(n).set(o,t)}clearCellValidation(e){const{rowNode:t,column:n}=e;this.cellValidations.get(t)?.delete(n)}setCellValidationMap(e){this.cellValidations=e}getCellValidationMap(){return this.cellValidations}clearCellValidationMap(){this.cellValidations.clear()}},EditRowValidationModel=class{constructor(){this.rowValidations=new Map}getRowValidation(e){const{rowNode:t}=e||{};return this.rowValidations.get(t)}hasRowValidation(e){return e?.rowNode?!!this.getRowValidation(e):this.rowValidations.size>0}setRowValidation({rowNode:e},t){this.rowValidations.set(e,t)}clearRowValidation({rowNode:e}){this.rowValidations.delete(e)}setRowValidationMap(e){this.rowValidations=e}getRowValidationMap(){return this.rowValidations}clearRowValidationMap(){this.rowValidations.clear()}};function _getRowCtrl(e,t={}){const{rowIndex:n,rowId:o,rowCtrl:u,rowPinned:d}=t;if(u)return u;const{rowModel:f,rowRenderer:v}=e;let{rowNode:w}=t;return w||(o?w=_getRowById(e,o,d):n!=null&&(w=f.getRow(n))),v.getRowCtrls(w?[w]:[])?.[0]}function _getCellCtrl(e,t={}){const{cellCtrl:n,colId:o,columnId:u,column:d}=t;if(n)return n;const f=e.colModel.getCol(o??u??_getColId(d)),v=t.rowCtrl??_getRowCtrl(e,t),w=v?.getCellCtrl(f)??void 0;if(w)return w;const E=t.rowNode??v?.rowNode;if(E)return e.rowRenderer.getCellCtrls([E],[f])?.[0]}function _getColId(e){if(e)return typeof e=="string"?e:e.getColId()}var UNEDITED=Symbol("unedited");function _valueFromEditor(e,t,n){const o={editorValueExists:!1};if(_hasValidationRules(e)&&(t.getValidationErrors?.()?.length??0)>0||n?.isCancelling)return o;if(n?.isStopping){const d=t?.isCancelAfterEnd?.();if(d)return{...o,isCancelAfterEnd:d}}return{editorValue:t.getValue(),editorValueExists:!0}}function _syncFromEditors(e,t){for(const n of e.editModelSvc?.getEditPositions()??[]){const o=_getCellCtrl(e,n);if(!o)continue;const u=o.comp?.getCellEditor();if(!u)continue;const{editorValue:d,editorValueExists:f,isCancelAfterEnd:v}=_valueFromEditor(e,u,t);v&&e.editModelSvc?.setEdit(n,{editorState:{isCancelAfterEnd:v}}),_syncFromEditor(e,n,d,void 0,!f)}}function _syncFromEditor(e,t,n,o,u,d){const{editModelSvc:f,valueSvc:v}=e;if(!f)return;const{rowNode:w,column:E}=t;if(!(w&&E))return;let C=f.getEdit(t);if(C?.sourceValue===void 0){const _=C?getNormalisedFormula(e,C.editorValue,!1,E):UNEDITED,D={sourceValue:v.getValue(E,w,"data"),pendingValue:_};C=f.setEdit(t,D)}f.setEdit(t,{editorValue:u?getNormalisedFormula(e,C.sourceValue,!0,E):n})}function getNormalisedFormula(e,t,n,o){const{formula:u}=e;return o.isAllowFormula()&&u?.isFormula(t)?u?.normaliseFormula(t,n)??t:t}function _columnDefsRequireValidation(e){if(!e)return!1;for(let t=0,n=e.length;t<n;++t){const o=e[t],u=o.cellEditorParams;if(!(!u||!o.editable&&!o.groupRowEditable)&&(u.minLength!==void 0||u.maxLength!==void 0||u.getValidationErrors!==void 0||u.min!==void 0||u.max!==void 0))return!0}return!1}function _editorsRequireValidation(e){const t=e.rowRenderer.getCellCtrls();for(let n=0,o=t.length;n<o;++n){const d=t[n].comp?.getCellEditor();if(d){const f=_unwrapUserComp(d);if(f.getValidationElement||f.getValidationErrors)return!0}}return!1}function _hasValidationRules(e){return!!e.gos.get("getFullRowEditValidationErrors")||_columnDefsRequireValidation(e.colModel.getColumnDefs())||_editorsRequireValidation(e)}function _populateModelValidationErrors(e,t){if(!_hasValidationRules(e))return;const n=new EditCellValidationModel,{ariaAnnounce:o,localeSvc:u,editModelSvc:d,gos:f}=e,v=f.get("editType")==="fullRow",E=_getLocaleTextFunc(u)("ariaValidationErrorPrefix","Cell Editor Validation"),C=new Set;for(const _ of e.rowRenderer.getCellCtrls()){const D=_.comp?.getCellEditor();if(!D)continue;const O=_unwrapUserComp(D),{rowNode:M,column:N}=_,I=O.getValidationErrors?.()??[],B=O.getValidationElement?.(!1)||!O.isPopup?.()&&_.eGui;if(B){const V=I!=null&&I.length>0,j=V?I.join(". "):"";_setAriaInvalid(B,V),V&&o.announceValue(`${E} ${I}`,"editorValidation"),B instanceof HTMLInputElement?B.setCustomValidity(j):B.classList.toggle("invalid",V)}I?.length>0&&n.setCellValidation({rowNode:M,column:N},{errorMessages:I}),C.add(_.rowCtrl)}if(_syncFromEditors(e,{}),d?.setCellValidationModel(n),v){const _=_generateRowValidationErrors(e);d?.setRowValidationModel(_)}for(const _ of C.values()){_.rowEditStyleFeature?.applyRowStyles();for(const D of _.getAllCellCtrls())D.tooltipFeature?.refreshTooltip(!0),D.editorTooltipFeature?.refreshTooltip(!0),D.editStyleFeature?.applyCellStyles?.()}}var _generateRowValidationErrors=e=>{const t=new EditRowValidationModel,n=e.gos.get("getFullRowEditValidationErrors"),o=e.editModelSvc?.getEditMap();if(!o)return t;for(const u of o.keys()){const d=o.get(u);if(!d)continue;const f=[],{rowIndex:v,rowPinned:w}=u;for(const C of d.keys()){const _=d.get(C);if(!_)continue;const{editorValue:D,pendingValue:O,sourceValue:M}=_,N=D??(O===UNEDITED?void 0:O)??M;f.push({column:C,colId:C.getColId(),rowIndex:v,rowPinned:w,oldValue:M,newValue:N})}const E=n?.({editorsState:f})??[];E.length>0&&t.setRowValidation({rowNode:u},{errorMessages:E})}return t};function _isManualPinnedRow(e){return!!(e.rowPinned&&e.pinnedSibling)}function _createCellEvent(e,t,n,{rowNode:o,column:u},d){return _addGridCommonParams(e.gos,{type:n,node:o,data:o.data,value:d,column:u,colDef:u.getColDef(),rowPinned:o.rowPinned,event:t,rowIndex:o.rowIndex})}function _isDeleteKey(e,t=!1){return e===KeyCode.DELETE?!0:!t&&e===KeyCode.BACKSPACE?_isMacOsUserAgent():!1}var CellKeyboardListenerFeature=class extends BeanStub{constructor(e,t,n,o){super(),this.cellCtrl=e,this.rowNode=n,this.rowCtrl=o,this.beans=t}init(){this.eGui=this.cellCtrl.eGui}onKeyDown(e){const t=e.key;switch(t){case KeyCode.ENTER:this.onEnterKeyDown(e);break;case KeyCode.F2:this.onF2KeyDown(e);break;case KeyCode.ESCAPE:this.onEscapeKeyDown(e);break;case KeyCode.TAB:this.onTabKeyDown(e);break;case KeyCode.BACKSPACE:case KeyCode.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case KeyCode.DOWN:case KeyCode.UP:case KeyCode.RIGHT:case KeyCode.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){const{cellCtrl:n,beans:o}=this;if(!o.editSvc?.isEditing(n,{withOpenEditor:!0})){if(e.shiftKey&&n.isRangeSelectionEnabled())this.onShiftRangeSelect(e);else{const u=n.getFocusedCellPosition();o.navigation?.navigateToNextCell(e,t,u,!0)}e.preventDefault()}}onShiftRangeSelect(e){const{rangeSvc:t,navigation:n}=this.beans;if(!t)return;const o=t.extendLatestRangeInDirection(e);o&&(e.key===KeyCode.LEFT||e.key===KeyCode.RIGHT?n?.ensureColumnVisible(o.column):n?.ensureRowVisible(o.rowIndex))}onTabKeyDown(e){this.beans.navigation?.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){const{cellCtrl:n,beans:o,rowNode:u}=this,{gos:d,rangeSvc:f,eventSvc:v,editSvc:w}=o;if(v.dispatchEvent({type:"keyShortcutChangedCellStart"}),_isDeleteKey(e,d.get("enableCellEditingOnBackspace"))&&!w?.isEditing(n,{withOpenEditor:!0})){if(f&&_isCellSelectionEnabled(d))f.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(n.isCellEditable()){const E=o.valueSvc.getDeleteValue(n.column,u);u.setDataValue(n.column,E,"cellClear")}}else w?.isEditing(n,{withOpenEditor:!0})||o.editSvc?.startEditing(n,{startedEdit:!0,event:t});v.dispatchEvent({type:"keyShortcutChangedCellEnd"})}onEnterKeyDown(e){const{cellCtrl:t,beans:n}=this,{editSvc:o,navigation:u}=n,d=o?.isEditing(t,{withOpenEditor:!0}),f=t.rowNode,v=o?.isRowEditing(f,{withOpenEditor:!0}),w=E=>{o?.startEditing(E,{startedEdit:!0,event:e,source:"edit"})&&e.preventDefault()};if(d||v){if(this.isCtrlEnter(e)){o?.applyBulkEdit(t,n?.rangeSvc?.getCellRanges()||[]);return}if(_populateModelValidationErrors(n),o?.checkNavWithValidation(void 0,e)==="block-stop")return;o?.isEditing(t,{withOpenEditor:!0})?o?.stopEditing(t,{event:e,source:"edit"}):v&&!t.isCellEditable()?o?.stopEditing({rowNode:f},{event:e,source:"edit"}):w(t)}else if(n.gos.get("enterNavigatesVertically")){const E=e.shiftKey?KeyCode.UP:KeyCode.DOWN;u?.navigateToNextCell(null,E,t.cellPosition,!1)}else{if(o?.hasValidationErrors())return;o?.hasValidationErrors(t)&&o.revertSingleCellEdit(t,!0),w(t)}}isCtrlEnter(e){return(e.ctrlKey||e.metaKey)&&e.key===KeyCode.ENTER}onF2KeyDown(e){const{cellCtrl:t,beans:{editSvc:n}}=this;n?.isEditing()&&(_populateModelValidationErrors(this.beans),n?.checkNavWithValidation(void 0,e)==="block-stop")||n?.startEditing(t,{startedEdit:!0,event:e})}onEscapeKeyDown(e){const{cellCtrl:t,beans:{editSvc:n}}=this;n?.checkNavWithValidation(t,e)==="block-stop"&&n.revertSingleCellEdit(t),setTimeout(()=>{n?.stopEditing(t,{event:e,cancel:!0})})}processCharacter(e){const n=e.target!==this.eGui,{beans:{editSvc:o},cellCtrl:u}=this;if(n||o?.isEditing(u,{withOpenEditor:!0}))return;if(e.key===KeyCode.SPACE)this.onSpaceKeyDown(e);else if(o?.isCellEditable(u,"ui")){if(o?.hasValidationErrors()&&!o?.hasValidationErrors(u))return;o?.startEditing(u,{startedEdit:!0,event:e,source:"api",editable:!0}),!u.editCompDetails?.params?.suppressPreventDefault&&e.preventDefault()}}onSpaceKeyDown(e){const{gos:t,editSvc:n}=this.beans,{rowNode:o}=this.cellCtrl;!n?.isEditing(this.cellCtrl,{withOpenEditor:!0})&&_isRowSelection(t)&&this.beans.selectionSvc?.handleSelectionEvent(e,o,"spaceKey"),e.preventDefault()}},CellMouseListenerFeature=class extends BeanStub{constructor(e,t,n){super(),this.cellCtrl=e,this.column=n,this.beans=t}onMouseEvent(e,t){if(!_isStopPropagationForAgGrid(t))switch(e){case"click":this.onCellClicked(t);break;case"pointerdown":case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){if(this.beans.touchSvc?.handleCellDoubleClick(this,e))return;const{eventSvc:t,rangeSvc:n,editSvc:o,editModelSvc:u,frameworkOverrides:d,gos:f}=this.beans,v=e.ctrlKey||e.metaKey,{cellCtrl:w}=this,{column:E,cellPosition:C,rowNode:_}=w,D=_suppressCellMouseEvent(f,E,_,e);n&&v&&!D&&n.getCellRangeCount(C)>1&&n.intersectLastRange(!0);const O=w.createEvent(e,"cellClicked");O.isEventHandlingSuppressed=D,t.dispatchEvent(O);const M=E.getColDef();if(M.onCellClicked&&window.setTimeout(()=>{d.wrapOutgoing(()=>{M.onCellClicked(O)})},0),!D&&u?.getState(w)!=="editing"){const N=o?.isEditing(),I=o?.isRangeSelectionEnabledWhileEditing(),B=u?.getCellValidationModel().getCellValidationMap().size??0,V=u?.getRowValidationModel().getRowValidationMap().size??0;if(N&&(I||B>0||V>0))return;o?.shouldStartEditing(w,e)?o?.startEditing(w,{event:e}):o?.shouldStopEditing(w,e)&&(this.beans.gos.get("editType")==="fullRow"?o?.stopEditing(w,{event:e,source:"edit"}):o?.stopEditing(void 0,{event:e,source:"edit"}))}}onCellDoubleClicked(e){const{column:t,beans:n,cellCtrl:o}=this,{eventSvc:u,frameworkOverrides:d,editSvc:f,editModelSvc:v,gos:w}=n,E=_suppressCellMouseEvent(w,o.column,o.rowNode,e),C=t.getColDef(),_=o.createEvent(e,"cellDoubleClicked");if(_.isEventHandlingSuppressed=E,u.dispatchEvent(_),typeof C.onCellDoubleClicked=="function"&&window.setTimeout(()=>{d.wrapOutgoing(()=>{C.onCellDoubleClicked(_)})},0),!E&&f?.shouldStartEditing(o,e)&&v?.getState(o)!=="editing"){const D=f?.isEditing(),O=f?.isRangeSelectionEnabledWhileEditing(),M=v?.getCellValidationModel().getCellValidationMap().size??0,N=v?.getRowValidationModel().getRowValidationMap().size??0;if(D&&(O||M>0||N>0))return;f?.startEditing(o,{event:e})}}onMouseDown(e){const{shiftKey:t}=e,n=e.target,{cellCtrl:o,beans:u}=this,{eventSvc:d,rangeSvc:f,rowNumbersSvc:v,focusSvc:w,gos:E,editSvc:C}=u,{column:_,rowNode:D,cellPosition:O}=o,M=_suppressCellMouseEvent(E,_,D,e),N=()=>{const j=o.createEvent(e,"cellMouseDown");j.isEventHandlingSuppressed=M,d.dispatchEvent(j)};if(M){N();return}if(this.isRightClickInExistingRange(e))return;const I=f&&!f.isEmpty(),B=this.containsWidget(n),V=isRowNumberCol(_);if(!(v&&V&&!v.handleMouseDownOnCell(O,e))){if(!t||!I){const j=C?.isEditing(o),z=E.get("enableCellTextSelection")&&e.defaultPrevented,$=(_isBrowserSafari()||z)&&!j&&!_isFocusableFormField(n)&&!B;o.focusCell($,e)}if(t&&I&&!w.isCellFocused(O)){e.preventDefault();const j=w.getFocusedCell();if(j){const{column:q,rowIndex:z,rowPinned:$}=j,ee=!!C?.isRangeSelectionEnabledWhileEditing?.();C?.isEditing(j)&&!ee&&C?.stopEditing(j),ee||w.setFocusedCell({column:q,rowIndex:z,rowPinned:$,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,sourceEvent:e})}}B||(f?.handleCellMouseDown(e,O),N())}}isRightClickInExistingRange(e){const{rangeSvc:t}=this.beans;if(t){const n=t.isCellInAnyRange(this.cellCtrl.cellPosition),o=_interpretAsRightClick(this.beans,e);if(n&&o)return!0}return!1}containsWidget(e){return _isElementChildOfClass(e,"ag-selection-checkbox",3)||_isElementChildOfClass(e,"ag-drag-handle",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:n}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),n?.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:n}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),n?.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.eGui,n=t.contains(e.target),o=t.contains(e.relatedTarget);return n&&o}},CellPositionFeature=class extends BeanStub{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.column,this.rowNode=e.rowNode}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}init(){this.eSetLeft=this.cellCtrl.getRootElement(),this.eContent=this.cellCtrl.eGui;const e=this.cellCtrl.getCellSpan();if(e||(this.setupColSpan(),this.setupRowSpan()),this.onLeftChanged(),this.onWidthChanged(),e||this._legacyApplyRowSpan(),e){const t=this.refreshSpanHeight.bind(this,e);t(),this.addManagedListeners(this.beans.eventSvc,{paginationChanged:t,recalculateRowBounds:t,pinnedHeightChanged:t})}}refreshSpanHeight(e){const t=e.getCellHeight();t!=null&&(this.eContent.style.height=`${t}px`)}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this._legacyApplyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();_areEqual(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eContent)return;const e=this.getCellWidth();this.eContent.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const{column:e,rowNode:t}=this,n=e.getColSpan(t),o=[];if(n===1)o.push(e);else{let u=e;const d=e.getPinned();for(let f=0;u&&f<n&&(o.push(u),u=this.beans.visibleCols.getColAfter(u),!(!u||_missing(u)||d!==u.getPinned()));f++);}return o}onLeftChanged(){if(!this.eSetLeft)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eSetLeft.style.left=e+"px"}getCellLeft(){let e;return this.beans.gos.get("enableRtl")&&this.colsSpanning?e=_last(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.printLayout||this.column.getPinned()==="left")return e;const{visibleCols:t}=this.beans,n=t.getColsLeftWidth();if(this.column.getPinned()==="right"){const o=t.bodyWidth;return n+o+(e||0)}return n+(e||0)}_legacyApplyRowSpan(e){if(this.rowSpan===1&&!e)return;const n=_getRowHeightAsNumber(this.beans)*this.rowSpan;this.eContent.style.height=`${n}px`,this.eContent.style.zIndex="1"}destroy(){super.destroy()}},CSS_CELL="ag-cell",CSS_AUTO_HEIGHT="ag-cell-auto-height",CSS_NORMAL_HEIGHT="ag-cell-normal-height",CSS_CELL_FOCUS="ag-cell-focus",CSS_CELL_FIRST_RIGHT_PINNED="ag-cell-first-right-pinned",CSS_CELL_LAST_LEFT_PINNED="ag-cell-last-left-pinned",CSS_CELL_NOT_INLINE_EDITING="ag-cell-not-inline-editing",CSS_CELL_WRAP_TEXT="ag-cell-wrap-text",instanceIdSequence4=0,CellCtrl=class extends BeanStub{constructor(e,t,n,o){super(),this.column=e,this.rowNode=t,this.rowCtrl=o,this.rangeFeature=void 0,this.rowResizeFeature=void 0,this.positionFeature=void 0,this.customStyleFeature=void 0,this.editStyleFeature=void 0,this.mouseListener=void 0,this.keyboardListener=void 0,this.suppressRefreshCell=!1,this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.focusEventWhileNotReady=null,this.hasBeenFocused=!1,this.hasEdit=!1,this.tooltipFeature=void 0,this.editorTooltipFeature=void 0,this.beans=n,this.gos=n.gos,this.editSvc=n.editSvc,this.hasEdit=!!n.editSvc;const{colId:u}=e;this.instanceId=u+"-"+instanceIdSequence4++,this.createCellPosition(),this.updateAndFormatValue(!1)}addFeatures(){const{beans:e}=this;this.positionFeature=new CellPositionFeature(this,e),this.customStyleFeature=e.cellStyles?.createCellCustomStyleFeature(this),this.editStyleFeature=e.editSvc?.createCellStyleFeature(this),this.mouseListener=new CellMouseListenerFeature(this,e,this.column),this.keyboardListener=new CellKeyboardListenerFeature(this,e,this.rowNode,this.rowCtrl),this.enableTooltipFeature();const{rangeSvc:t}=e;t&&_isCellSelectionEnabled(e.gos)&&(this.rangeFeature=t.createCellRangeFeature(this)),isRowNumberCol(this.column)&&(this.rowResizeFeature=this.beans.rowNumbersSvc.createRowNumbersRowResizerFeature(this))}isCellSpanning(){return!1}getCellSpan(){}removeFeatures(){const e=this.beans.context;this.positionFeature=e.destroyBean(this.positionFeature),this.editorTooltipFeature=e.destroyBean(this.editorTooltipFeature),this.customStyleFeature=e.destroyBean(this.customStyleFeature),this.editStyleFeature=e.destroyBean(this.editStyleFeature),this.mouseListener=e.destroyBean(this.mouseListener),this.keyboardListener=e.destroyBean(this.keyboardListener),this.rangeFeature=e.destroyBean(this.rangeFeature),this.rowResizeFeature=e.destroyBean(this.rowResizeFeature),this.disableTooltipFeature()}enableTooltipFeature(e,t){this.tooltipFeature=this.beans.tooltipSvc?.enableCellTooltipFeature(this,e,t)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}enableEditorTooltipFeature(e){this.editorTooltipFeature&&this.disableEditorTooltipFeature(),this.editorTooltipFeature=this.beans.tooltipSvc?.setupCellEditorTooltip(this,e),_populateModelValidationErrors(this.beans)}disableEditorTooltipFeature(){this.editorTooltipFeature=this.beans.context.destroyBean(this.editorTooltipFeature)}setComp(e,t,n,o,u,d,f){this.comp=e,this.eGui=t,this.printLayout=u,f??(f=this),this.addDomData(f),this.addFeatures(),f.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.setupFocus(),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(o,f),this.refreshFirstAndLastStyles(),this.checkFormulaError(),this.refreshAriaColIndex(),this.positionFeature?.init(),this.customStyleFeature?.setComp(e),this.editStyleFeature?.setComp(e),this.tooltipFeature?.refreshTooltip(),this.keyboardListener?.init(),this.rangeFeature?.setComp(e),this.rowResizeFeature?.refreshRowResizer();const v=d?this.isCellEditable():void 0,w=!v&&this.hasEdit&&this.editSvc?.isEditing(this,{withOpenEditor:!0});if(v||w?this.editSvc?.startEditing(this,{startedEdit:!1,source:"api",silent:!0,continueEditing:!0,editable:v}):this.showValue(!1,!0),this.onCompAttachedFuncs.length){for(const E of this.onCompAttachedFuncs)E();this.onCompAttachedFuncs=[]}}checkFormulaError(){const e=!!this.beans.formula?.getFormulaError(this.column,this.rowNode);this.eGui.classList.toggle("formula-error",e)}setupAutoHeight(e,t){this.isAutoHeight=this.beans.rowAutoHeight?.setupCellAutoHeight(this,e,t)??!1}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){const e=this.column.getColDef();return e.cellRenderer!=null||e.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}getDeferLoadingCellRenderer(){const{beans:e,column:t}=this,{userCompFactory:n,ctrlsSvc:o,eventSvc:u}=e,d=t.getColDef(),f=this.createCellRendererParams();f.deferRender=!0;const v=_getLoadingCellRendererDetails(n,d,f);if(o.getGridBodyCtrl()?.scrollFeature?.isScrolling()){let w;const E=new AgPromise(_=>{w=_}),[C]=this.addManagedListeners(u,{bodyScrollEnd:()=>{w(),C()}});return{loadingComp:v,onReady:E}}return{loadingComp:v,onReady:AgPromise.resolve()}}showValue(e,t){const{beans:n,column:o,rowNode:u,rangeFeature:d}=this,{userCompFactory:f}=n;let v=this.getValueToDisplay(),w;const E=u.stub&&u.groupData?.[o.getId()]==null,C=o.getColDef();if(E||this.isCellRenderer()){const _=this.createCellRendererParams();!E||isRowNumberCol(o)?w=_getCellRendererDetails(f,C,_):w=_getLoadingCellRendererDetails(f,C,_)}if(!w&&!E&&n.findSvc?.isMatch(u,o)){const _=this.createCellRendererParams();w=_getCellRendererDetails(f,{...o.getColDef(),cellRenderer:"agFindCellRenderer"},_)}if(this.hasEdit&&this.editSvc.isBatchEditing()&&this.editSvc.isRowEditing(u,{checkSiblings:!0})){const _=this.editSvc.prepDetailsDuringBatch(this,{compDetails:w,valueToDisplay:v});_&&(_.compDetails?w=_.compDetails:_.valueToDisplay&&(v=_.valueToDisplay))}this.comp.setRenderDetails(w,v,e),this.customRowDragComp?.refreshVisibility(),!t&&d&&_requestAnimationFrame(n,()=>d?.refreshRangeStyleAndHandle()),this.rowResizeFeature?.refreshRowResizer()}setupControlComps(){const e=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(e),!0),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.comp.setIncludeSelection(this.includeSelection),this.comp.setIncludeDndSource(this.includeDndSource),this.comp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}getCellValueClass(){const e="ag-cell-value",t=this.column.getColDef().cellRenderer==="agCheckboxCellRenderer";let n="";return t&&(n=" ag-allow-overflow"),`${e}${n}`}isIncludeControl(e,t=!1){return(this.rowNode.rowPinned==null||t&&_isManualPinnedRow(this.rowNode))&&!!e}isCheckboxSelection(e){const{rowSelection:t,groupDisplayType:n}=this.beans.gridOptions,o=_getCheckboxLocation(t),u=isColumnSelectionCol(this.column);return n==="custom"&&o!=="selectionColumn"&&u?!1:e.checkboxSelection||u&&typeof t=="object"&&_getCheckboxes(t)}refreshShouldDestroy(){const e=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(e),!0),n=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),o=this.includeDndSource!=this.isIncludeControl(e.dndSource),u=this.isAutoHeight!=this.column.isAutoHeight();return t||n||o||u}onPopupEditorClosed(){const{editSvc:e}=this.beans;e?.isEditing(this,{withOpenEditor:!0})&&e?.stopEditing(this,{source:e?.isBatchEditing()?"ui":"api"})}stopEditing(e=!1){const{editSvc:t}=this.beans;return t?.stopEditing(this,{cancel:e,source:t?.isBatchEditing()?"ui":"api"})??!1}createCellRendererParams(){const{value:e,valueFormatted:t,column:n,rowNode:o,comp:u,eGui:d,beans:{valueSvc:f,gos:v,editSvc:w}}=this;return _addGridCommonParams(v,{value:e,valueFormatted:t,getValue:()=>f.getValueForDisplay({column:n,node:o,from:"edit"}).value,setValue:C=>w?.setDataValue({rowNode:o,column:n},C)||o.setDataValue(n,C),formatValue:this.formatValue.bind(this),data:o.data,node:o,pinned:n.getPinned(),colDef:n.getColDef(),column:n,refreshCell:this.refreshCell.bind(this),eGridCell:d,eParentOfValue:u.getParentOfValue(),registerRowDragger:(C,_,D,O)=>this.registerRowDragger(C,_,O),setTooltip:(C,_)=>{v.assertModuleRegistered("Tooltip",3),this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(C,_),this.tooltipFeature?.refreshTooltip()}})}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){if(this.refreshShouldDestroy()?this.rowCtrl?.recreateCell(this):this.refreshCell(e),this.hasEdit&&this.editCompDetails){const{editSvc:t,comp:n}=this;!n?.getCellEditor()&&t.isEditing(this,{withOpenEditor:!0})&&t.startEditing(this,{startedEdit:!1,source:"api",silent:!0})}}refreshCell({force:e,suppressFlash:t,newData:n}={}){const{editStyleFeature:o,customStyleFeature:u,rowCtrl:{rowEditStyleFeature:d},beans:{cellFlashSvc:f,filterManager:v},column:w,comp:E,suppressRefreshCell:C,tooltipFeature:_}=this;if(C)return;const{field:D,valueGetter:O,showRowGroup:M,enableCellChangeFlash:N}=w.getColDef(),I=D==null&&O==null&&M==null,B=e||I||n,V=!!E,j=this.updateAndFormatValue(V),q=B||j;if(V){if(q){this.showValue(!!n,!1);const z=v?.isSuppressFlashingCellsBecauseFiltering();!t&&!z&&N&&f?.flashCell(this),o?.applyCellStyles?.(),u?.applyUserStyles(),u?.applyClassesFromColDef(),d?.applyRowStyles(),this.checkFormulaError()}_?.refreshTooltip(),u?.applyCellClassRules()}}isCellEditable(){return this.column.isCellEditable(this.rowNode)}formatValue(e){return this.callValueFormatter(e)??e}callValueFormatter(e){return this.beans.valueSvc.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){const t=this.value,n=this.valueFormatted,{value:o,valueFormatted:u}=this.beans.valueSvc.getValueForDisplay({column:this.column,node:this.rowNode,includeValueFormatted:!0,from:"edit"});return this.value=o,this.valueFormatted=u,e?!this.valuesAreEqual(t,this.value)||this.valueFormatted!=n:!0}valuesAreEqual(e,t){const n=this.column.getColDef();return n.equals?n.equals(e,t):e===t}addDomData(e){const t=this.eGui;_setDomData(this.beans.gos,t,DOM_DATA_KEY_CELL_CTRL,this),e.addDestroyFunc(()=>_setDomData(this.beans.gos,t,DOM_DATA_KEY_CELL_CTRL,null))}createEvent(e,t){const{rowNode:n,column:o,value:u,beans:d}=this;return _createCellEvent(d,e,t,{rowNode:n,column:o},u)}processCharacter(e){this.keyboardListener?.processCharacter(e)}onKeyDown(e){this.keyboardListener?.onKeyDown(e)}onMouseEvent(e,t){this.mouseListener?.onMouseEvent(e,t)}getColSpanningList(){return this.positionFeature?.getColSpanningList()??[]}onLeftChanged(){this.comp&&this.positionFeature?.onLeftChanged()}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{comp:e,column:t,beans:n}=this;refreshFirstAndLastStyles(e,t,n.visibleCols)}refreshAriaColIndex(){const e=this.beans.visibleCols.getAriaColIndex(this.column);_setAriaColIndex(this.eGui,e)}onWidthChanged(){return this.positionFeature?.onWidthChanged()}getRowPosition(){const{rowIndex:e,rowPinned:t}=this.cellPosition;return{rowIndex:e,rowPinned:t}}updateRangeBordersIfRangeCount(){this.comp&&this.rangeFeature?.updateRangeBordersIfRangeCount()}onCellSelectionChanged(){this.comp&&this.rangeFeature?.onCellSelectionChanged()}isRangeSelectionEnabled(){return this.rangeFeature!=null}focusCell(e=!1,t){const n=this.editSvc?.allowedFocusTargetOnValidation(this);n&&n!==this||this.beans.focusSvc.setFocusedCell({...this.getFocusedCellPosition(),forceBrowserFocus:e,sourceEvent:t})}restoreFocus(e=!1){const{beans:{editSvc:t,focusSvc:n},comp:o}=this;if(!o||t?.isEditing(this)||!this.isCellFocused()||!n.shouldTakeFocus())return;const u=()=>{if(!this.isAlive())return;const d=o.getFocusableElement();this.isCellFocused()&&d.focus({preventScroll:!0})};if(e){setTimeout(u,0);return}u()}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.restoreFocus(),this.rangeFeature?.onCellSelectionChanged(),this.rowResizeFeature?.refreshRowResizer()}onSuppressCellFocusChanged(e){const t=this.eGui;t&&(isRowNumberCol(this.column)&&(e=!0),_addOrRemoveAttribute(t,"tabindex",e?void 0:-1))}onFirstRightPinnedChanged(){if(!this.comp)return;const e=this.column.isFirstRightPinned();this.comp.toggleCss(CSS_CELL_FIRST_RIGHT_PINNED,e)}onLastLeftPinnedChanged(){if(!this.comp)return;const e=this.column.isLastLeftPinned();this.comp.toggleCss(CSS_CELL_LAST_LEFT_PINNED,e)}checkCellFocused(){return this.beans.focusSvc.isCellFocused(this.cellPosition)}isCellFocused(){const e=this.checkCellFocused();return this.hasBeenFocused||(this.hasBeenFocused=e),e}setupFocus(){this.restoreFocus(!0),this.onCellFocused(this.focusEventWhileNotReady??void 0)}onCellFocused(e){const{beans:t}=this;if(_isCellFocusSuppressed(t))return;if(!this.comp){e&&(this.focusEventWhileNotReady=e);return}const n=this.isCellFocused(),o=t.editSvc?.isEditing(this)??!1;if(this.comp.toggleCss(CSS_CELL_FOCUS,n),n&&(e?.forceBrowserFocus||!this.hasBrowserFocus()&&this.beans.focusSvc.shouldTakeFocus())){let u=this.comp.getFocusableElement();if(o){const f=_findFocusableElements(u,null,!0);f.length&&(u=f[0])}const d=e?e.preventScrollOnBrowserFocus:!0;u.focus({preventScroll:d}),_placeCaretAtEnd(t,u)}n&&this.focusEventWhileNotReady&&(this.focusEventWhileNotReady=null),n&&e&&this.rowCtrl.announceDescription()}createCellPosition(){const{rowIndex:e,rowPinned:t}=this.rowNode;this.cellPosition={rowIndex:e,rowPinned:_makeNull(t),column:this.column}}applyStaticCssClasses(){const{comp:e}=this;e.toggleCss(CSS_CELL,!0),e.toggleCss(CSS_CELL_NOT_INLINE_EDITING,!0);const t=this.column.isAutoHeight()==!0;e.toggleCss(CSS_AUTO_HEIGHT,t),e.toggleCss(CSS_NORMAL_HEIGHT,!t)}onColumnHover(){this.beans.colHover?.onCellColumnHover(this.column,this.comp)}onColDefChanged(){this.comp&&(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editSvc?.isEditing(this)?this.editSvc?.handleColDefChanged(this):this.refreshOrDestroyCell({force:!0,suppressFlash:!0}))}setWrapText(){const e=this.column.getColDef().wrapText==!0;this.comp.toggleCss(CSS_CELL_WRAP_TEXT,e)}dispatchCellContextMenuEvent(e){const t=this.column.getColDef(),n=this.createEvent(e,"cellContextMenu"),{beans:o}=this;o.eventSvc.dispatchEvent(n),t.onCellContextMenu&&window.setTimeout(()=>{o.frameworkOverrides.wrapOutgoing(()=>{t.onCellContextMenu(n)})},0)}getCellRenderer(){return this.comp?.getCellRenderer()??null}destroy(){this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.isCellFocused()&&this.hasBrowserFocus()&&this.beans.focusSvc.attemptToRecoverFocus(),super.destroy()}hasBrowserFocus(){return this.eGui?.contains(_getActiveDomElement(this.beans))??!1}createSelectionCheckbox(){const e=this.beans.selectionSvc?.createCheckboxSelectionComponent();if(e)return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e}createDndSource(){const e=this.beans.registry.createDynamicBean("dndSourceComp",!1,this.rowNode,this.column,this.eGui);return e&&this.beans.context.createBean(e),e}registerRowDragger(e,t,n){if(this.customRowDragComp){this.customRowDragComp.setDragElement(e,t);return}const o=this.createRowDragComp(e,t,n);o&&(this.customRowDragComp=o,this.addDestroyFunc(()=>{this.beans.context.destroyBean(o),this.customRowDragComp=null}),o.refreshVisibility())}createRowDragComp(e,t,n){const o=this.beans.rowDragSvc?.createRowDragCompForCell(this.rowNode,this.column,()=>this.value,e,t,n);if(o)return this.beans.context.createBean(o),o}cellEditorAttached(){for(const e of this.onEditorAttachedFuncs)e();this.onEditorAttachedFuncs=[]}setFocusedCellPosition(e){}getFocusedCellPosition(){return this.cellPosition}refreshAriaRowIndex(){}getRootElement(){return this.eGui}};function calculateRowLevel(e){if(e.group)return e.level;const t=e.parent;return t?t.level+1:0}var instanceIdSequence5=0,RowCtrl=class extends BeanStub{constructor(e,t,n,o,u){super(),this.rowNode=e,this.useAnimationFrameForCreate=o,this.printLayout=u,this.focusEventWhileNotReady=null,this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKey=null,this.beans=t,this.gos=t.gos,this.paginationPage=t.pagination?.getCurrentPage()??0,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=e.id+"-"+instanceIdSequence5++,this.rowId=_escapeString(e.id),this.initRowBusinessKey(),this.rowFocused=t.focusSvc.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(n),this.rowStyles=this.processStylesFromGridOptions(),this.rowEditStyleFeature=t.editSvc?.createRowStyleFeature(this),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;const e=this.businessKeyForNodeFunc(this.rowNode);this.businessKey=_escapeString(e)}updateGui(e,t){e==="left"?this.leftGui=t:e==="right"?this.rightGui=t:e==="fullWidth"?this.fullWidthGui=t:this.centerGui=t}setComp(e,t,n,o){const{context:u,rowRenderer:d}=this.beans;o=setupCompBean(this,u,o);const f={rowComp:e,element:t,containerType:n,compBean:o};this.allRowGuis.push(f),this.updateGui(n,f),this.initialiseRowComp(f);const v=this.rowNode,w=this.rowType==="FullWidthLoading"||v.stub,E=!v.data&&this.beans.rowModel.getType()==="infinite";!w&&!E&&!v.rowPinned&&d.dispatchFirstDataRenderedEvent(),this.setupFocus()}unsetComp(e){this.allRowGuis=this.allRowGuis.filter(t=>t.containerType!==e),this.updateGui(e,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(e){const t=e?"none":"";for(const n of this.allRowGuis)n.element.style.display=t}initialiseRowComp(e){const t=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(e),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),_isRowSelection(t)&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);const n=e.rowComp,o=this.getInitialRowClasses(e.containerType);for(const u of o)n.toggleCss(u,!0);this.executeSlideAndFadeAnimations(e),this.rowNode.group&&_setAriaExpanded(e.element,this.rowNode.expanded==!0),this.setRowCompRowId(n),this.setRowCompRowBusinessKey(n),_setDomData(t,e.element,DOM_DATA_KEY_ROW_CTRL,this),e.compBean.addDestroyFunc(()=>_setDomData(t,e.element,DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameSvc.createTask(this.addHoverFunctionality.bind(this,e),this.rowNode.rowIndex,"p2",!1):this.addHoverFunctionality(e),this.isFullWidth()&&this.setupFullWidth(e),t.get("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameSvc.addDestroyTask(()=>{this.isAlive()&&e.rowComp.toggleCss("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){this.businessKey!=null&&e.setRowBusinessKey(this.businessKey)}setRowCompRowId(e){const t=_escapeString(this.rowNode.id);this.rowId=t,t!=null&&e.setRowId(t)}executeSlideAndFadeAnimations(e){const{containerType:t}=e;this.slideInAnimation[t]&&(_batchCall(()=>{this.onTopChanged()}),this.slideInAnimation[t]=!1),this.fadeInAnimation[t]&&(_batchCall(()=>{e.rowComp.toggleCss("ag-opacity-zero",!1)}),this.fadeInAnimation[t]=!1)}addRowDraggerToRow(e){const t=this.beans.rowDragSvc?.createRowDragCompForRow(this.rowNode,e.element);if(!t)return;const n=this.createBean(t,this.beans.context);this.rowDragComps.push(n),e.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(o=>o!==n),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,this.beans.context),this.destroyBean(n,this.beans.context)})}setupFullWidth(e){const t=this.getPinnedForContainer(e.containerType),n=this.createFullWidthCompDetails(e.element,t);e.rowComp.showFullWidth(n)}getFullWidthCellRenderers(){return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(e=>e?.rowComp?.getFullWidthCellRenderer()):[this.fullWidthGui?.rowComp?.getFullWidthCellRenderer()]}executeProcessRowPostCreateFunc(){const e=this.gos.getCallback("processRowPostCreate");if(!e||!this.areAllContainersReady())return;const t={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};e(t)}areAllContainersReady(){const{leftGui:e,centerGui:t,rightGui:n,beans:{visibleCols:o}}=this,u=!!e||!o.isPinningLeft(),d=!!t,f=!!n||!o.isPinningRight();return u&&d&&f}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this.rowNode}):!1}setRowType(){const{rowNode:e,gos:t,beans:{colModel:n}}=this,o=e.stub&&!t.get("suppressServerSideFullWidthLoadingRow")&&!t.get("groupHideOpenParents"),u=this.isNodeFullWidthCell(),d=t.get("masterDetail")&&e.detail,f=n.isPivotMode(),v=_isFullWidthGroupRow(t,e,f);o?this.rowType="FullWidthLoading":d?this.rowType="FullWidthDetail":u?this.rowType="FullWidth":v?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(e=!1,t=!1){if(this.isFullWidth())return;const{animationFrameSvc:n}=this.beans;if(!n?.active||e||this.printLayout){this.updateColumnListsImpl(t);return}this.updateColumnListsPending||(n.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"p1",!1),this.updateColumnListsPending=!0)}getNewCellCtrl(e){if(!this.beans.rowSpanSvc?.isCellSpanning(e,this.rowNode))return new CellCtrl(e,this.rowNode,this.beans,this)}isCorrectCtrlForSpan(e){return!this.beans.rowSpanSvc?.isCellSpanning(e.column,this.rowNode)}createCellCtrls(e,t,n=null){const o={list:[],map:{}},u=(E,C,_)=>{_!=null?o.list.splice(_,0,C):o.list.push(C),o.map[E]=C},d=[];for(const E of t){const C=E.getInstanceId();let _=e.map[C];_&&!this.isCorrectCtrlForSpan(_)&&(_.destroy(),_=void 0),_||(_=this.getNewCellCtrl(E)),_&&u(C,_)}for(const E of e.list){const C=E.column.getInstanceId();if(o.map[C]!=null)continue;!this.isCellEligibleToBeRemoved(E,n)?d.push([C,E]):E.destroy()}if(d.length)for(const[E,C]of d){const _=o.list.findIndex(O=>O.column.getLeft()>C.column.getLeft()),D=_===-1?void 0:Math.max(_-1,0);u(E,C,D)}const{focusSvc:f,visibleCols:v}=this.beans,w=f.getFocusedCell();if(w&&w.column.getPinned()==n){const E=w.column.getInstanceId();if(!o.map[E]&&v.allCols.includes(w.column)){const _=this.createFocusedCellCtrl();if(_){const D=o.list.findIndex(M=>M.column.getLeft()>_.column.getLeft()),O=D===-1?void 0:Math.max(D-1,0);u(E,_,O)}}}return o}createFocusedCellCtrl(){const{focusSvc:e,rowSpanSvc:t}=this.beans,n=e.getFocusedCell();if(!n)return;const o=t?.getCellSpan(n.column,this.rowNode);if(o){if(o.firstNode!==this.rowNode||!o.doesSpanContain(n))return}else if(!e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned))return;return this.getNewCellCtrl(n.column)}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){for(const t of this.allRowGuis){const n=this.getCellCtrlsForContainer(t.containerType);t.rowComp.setCellCtrls(n,e)}}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const e=this.beans.colViewport,t=this.beans.visibleCols;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.allCols),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const n=e.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,n);const o=t.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,o,"left");const u=t.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,u,"right")}}isCellEligibleToBeRemoved(e,t){const{column:u}=e;if(u.getPinned()!=t||!this.isCorrectCtrlForSpan(e))return!0;const{visibleCols:d,editSvc:f}=this.beans,v=f?.isEditing(e),w=e.isCellFocused();return v||w?!(d.allCols.indexOf(u)>=0):!0}getDomOrder(){return this.gos.get("ensureDomOrder")||_isDomLayout(this.gos,"print")}listenOnDomOrder(e){const t=()=>{e.rowComp.setDomOrder(this.getDomOrder())};e.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],t)}setAnimateFlags(e){if(this.rowNode.sticky||!e)return;const t=_exists(this.rowNode.oldRowTop),{visibleCols:n}=this.beans,o=n.isPinningLeft(),u=n.isPinningRight();if(t){const{slideInAnimation:d}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){d.fullWidth=!0;return}d.center=!0,d.left=o,d.right=u}else{const{fadeInAnimation:d}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){d.fullWidth=!0;return}d.center=!0,d.left=o,d.right=u}}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){const e=(f,v)=>f?f.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(f.element,v).params):!0,t=e(this.fullWidthGui,null),n=e(this.centerGui,null),o=e(this.leftGui,"left"),u=e(this.rightGui,"right");return t&&n&&o&&u}addListeners(){const{beans:e,gos:t,rowNode:n}=this,{expansionSvc:o,eventSvc:u,context:d,rowSpanSvc:f}=e;this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),...o?.getRowExpandedListeners(this)??{}}),n.detail&&this.addManagedListeners(n.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(n,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this),rowPinned:this.onRowPinned.bind(this)}),this.addManagedListeners(u,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),f&&this.addManagedListeners(f,{spannedCellsUpdated:({pinned:v})=>{v&&!n.rowPinned||this.updateColumnLists()}}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,d),this.tooltipFeature=this.destroyBean(this.tooltipFeature,d),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,d)}),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",()=>{if(t.get("rowDragEntireRow")){for(const w of this.allRowGuis)this.addRowDraggerToRow(w);return}this.rowDragComps=this.destroyBeans(this.rowDragComps,d)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{for(const e of this.getAllCellCtrls())e.onRowIndexChanged()},cellChanged:e=>{for(const t of this.getAllCellCtrls())t.onCellChanged(e)}})}onRowPinned(){for(const e of this.allRowGuis)e.rowComp.toggleCss("ag-row-pinned-source",!!this.rowNode.pinnedSibling)}onRowNodeDataChanged(e){this.refreshRow({suppressFlash:!e.update,newData:!e.update})}refreshRow(e){if(this.isFullWidth()!==!!this.isNodeFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}for(const n of this.getAllCellCtrls())n.refreshCell(e);for(const n of this.allRowGuis)this.setRowCompRowId(n.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(n.rowComp);this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.rowEditStyleFeature?.applyRowStyles(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const e=this.beans.rowDropHighlightSvc,t=e?.row===this.rowNode?e.position:"none",n=t==="above",o=t==="inside",u=t==="below",d=t!=="none",f=n||u,v=this.rowNode.uiLevel,w=f&&v>0,E=w?v.toString():"0";for(const C of this.allRowGuis){const _=C.rowComp;_.toggleCss("ag-row-highlight-above",n),_.toggleCss("ag-row-highlight-inside",o),_.toggleCss("ag-row-highlight-below",u),_.toggleCss("ag-row-highlight-indent",w),d?C.element.style.setProperty("--ag-row-highlight-level",E):C.element.style.removeProperty("--ag-row-highlight-level")}}postProcessRowDragging(){const e=this.rowNode.dragging;for(const t of this.allRowGuis)t.rowComp.toggleCss("ag-row-dragging",e)}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.rowAutoHeight?.requestCheckAutoHeight()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:_makeNull(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){const t=this.findFullWidthInfoForEvent(e);if(!t)return;const{rowGui:n,column:o}=t;if(!(n.element===e.target))return;const f=this.rowNode,{focusSvc:v,navigation:w}=this.beans,E=v.getFocusedCell(),C={rowIndex:f.rowIndex,rowPinned:f.rowPinned,column:E?.column??o};w?.navigateToNextCell(e,e.key,C,!0),e.preventDefault()}onTabKeyDown(e){if(e.defaultPrevented||_isStopPropagationForAgGrid(e))return;const t=this.allRowGuis.find(v=>v.element.contains(e.target)),n=t?t.element:null,o=n===e.target,u=_getActiveDomElement(this.beans);let d=!1;n&&u&&(d=n.contains(u)&&u.classList.contains("ag-cell"));let f=null;!o&&!d&&(f=_findNextFocusableElement(this.beans,n,!1,e.shiftKey)),(this.isFullWidth()&&o||!f)&&this.beans.navigation?.onTabKeyDown(this,e)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){const e=this.allRowGuis.find(t=>_isVisible(t.element))?.element;return e?e.getBoundingClientRect().top:0}onSuppressCellFocusChanged(e){const t=this.isFullWidth()&&e?void 0:this.gos.get("tabIndex");for(const n of this.allRowGuis)_addOrRemoveAttribute(n.element,"tabindex",t)}setupFocus(){this.isFullWidth()&&(this.restoreFullWidthFocus(!0),this.onFullWidthRowFocused(this.focusEventWhileNotReady??void 0))}restoreFullWidthFocus(e=!1){const{focusSvc:t,editSvc:n}=this.beans;if(n?.isEditing(this)||!t.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned)||!t.shouldTakeFocus())return;const o=this.getFullWidthRowGuiForFocus();if(!o)return;const u=()=>{this.isAlive()&&t.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned)&&o.element.focus({preventScroll:!0})};if(e){setTimeout(u,0);return}u()}getFullWidthRowGuiForFocus(e){if(this.fullWidthGui)return this.fullWidthGui;const t=this.beans.focusSvc.getFocusedCell(),n=this.beans.colModel.getCol(e?.column??t?.column);if(!n)return;const o=n?.pinned;return o==="right"?this.rightGui:o==="left"?this.leftGui:this.centerGui}setFullWidthRowFocusedClass(e,t){this.forEachGui(void 0,n=>{n.element.classList.toggle("ag-full-width-focus",t&&n===e)})}onFullWidthRowFocused(e){const{focusSvc:t}=this.beans;if(!(this.isFullWidth()&&t.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned))){this.setFullWidthRowFocusedClass(void 0,!1);return}const o=this.getFullWidthRowGuiForFocus(e);if(!o){e&&(this.focusEventWhileNotReady=e),this.setFullWidthRowFocusedClass(void 0,!1);return}this.setFullWidthRowFocusedClass(o,!0),this.focusEventWhileNotReady=null,e?.forceBrowserFocus&&o.element.focus({preventScroll:!0})}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,t){const n={list:[],map:{}};for(const o of e.list)o!==t&&(n.list.push(o),n.map[o.column.getInstanceId()]=o);return n}onMouseEvent(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break;case"pointerdown":case"touchstart":case"mousedown":this.onRowMouseDown(t);break}}createRowEvent(e,t){const{rowNode:n}=this;return _addGridCommonParams(this.gos,{type:e,node:n,data:n.data,rowIndex:n.rowIndex,rowPinned:n.rowPinned,event:t})}createRowEventWithSource(e,t){const n=this.createRowEvent(e,t);return n.source=this,n}onRowDblClick(e){if(_isStopPropagationForAgGrid(e))return;const t=this.createRowEventWithSource("rowDoubleClicked",e);t.isEventHandlingSuppressed=this.isSuppressMouseEvent(e),this.beans.eventSvc.dispatchEvent(t)}findFullWidthInfoForEvent(e){if(!e)return;const t=this.findFullWidthRowGui(e.target),n=this.getColumnForFullWidth(t);if(!(!t||!n))return{rowGui:t,column:n}}findFullWidthRowGui(e){return this.allRowGuis.find(t=>t.element.contains(e))}getColumnForFullWidth(e){const{visibleCols:t}=this.beans;switch(e?.containerType){case"center":return t.centerCols[0];case"left":return t.leftCols[0];case"right":return t.rightCols[0];default:return t.allCols[0]}}onRowMouseDown(e){if(this.lastMouseDownOnDragger=_isElementChildOfClass(e.target,"ag-row-drag",3),!this.isFullWidth()||this.isSuppressMouseEvent(e))return;const{rangeSvc:t,focusSvc:n}=this.beans;t?.removeAllCellRanges();const o=this.findFullWidthInfoForEvent(e);if(!o)return;const{rowGui:u,column:d}=o,f=u.element,v=e.target,w=this.rowNode;let E=e.defaultPrevented||_isBrowserSafari();f&&f.contains(v)&&_isFocusableFormField(v)&&(E=!1),n.setFocusedCell({rowIndex:w.rowIndex,column:d,rowPinned:w.rowPinned,forceBrowserFocus:E})}isSuppressMouseEvent(e){const{gos:t,rowNode:n}=this;if(this.isFullWidth()){const u=this.findFullWidthRowGui(e.target);return _suppressFullWidthMouseEvent(t,u?.rowComp.getFullWidthCellRendererParams(),n,e)}const o=_getCellCtrlForEventTarget(t,e.target);return o!=null&&_suppressCellMouseEvent(t,o.column,n,e)}onRowClick(e){if(_isStopPropagationForAgGrid(e)||this.lastMouseDownOnDragger)return;const n=this.isSuppressMouseEvent(e),{eventSvc:o,selectionSvc:u}=this.beans,d=this.createRowEventWithSource("rowClicked",e);d.isEventHandlingSuppressed=n,o.dispatchEvent(d),!n&&u?.handleSelectionEvent(e,this.rowNode,"rowClicked")}setupDetailRowAutoHeight(e){this.rowType==="FullWidthDetail"&&this.beans.masterDetailSvc?.setupDetailRowAutoHeight(this,e)}createFullWidthCompDetails(e,t){const{gos:n,rowNode:o}=this,u=_addGridCommonParams(n,{fullWidth:!0,data:o.data,node:o,value:o.key,valueFormatted:o.key,eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(f,v,w,E)=>this.addFullWidthRowDragging(f,v,w,E),setTooltip:(f,v)=>{n.assertModuleRegistered("Tooltip",3),this.setupFullWidthRowTooltip(f,v)}}),d=this.beans.userCompFactory;switch(this.rowType){case"FullWidthDetail":return _getFullWidthDetailCellRendererDetails(d,u);case"FullWidthGroup":{const{value:f,valueFormatted:v}=this.beans.valueSvc.getValueForDisplay({node:this.rowNode,includeValueFormatted:!0,from:"edit"});return u.value=f,u.valueFormatted=v,_getFullWidthGroupCellRendererDetails(d,u)}case"FullWidthLoading":return _getFullWidthLoadingCellRendererDetails(d,u);default:return _getFullWidthCellRendererDetails(d,u)}}setupFullWidthRowTooltip(e,t){this.fullWidthGui&&(this.tooltipFeature=this.beans.tooltipSvc?.setupFullWidthRowTooltip(this.tooltipFeature,this,e,t))}addFullWidthRowDragging(e,t,n="",o){const{rowDragSvc:u,context:d}=this.beans;if(!u||!this.isFullWidth())return;const f=u.createRowDragComp(()=>n,this.rowNode,void 0,e,t,o);this.createBean(f,d),this.addDestroyFunc(()=>{this.destroyBean(f,d)})}onUiLevelChanged(){const e=calculateRowLevel(this.rowNode);if(this.rowLevel!=e){const t="ag-row-level-"+e,n="ag-row-level-"+this.rowLevel;for(const o of this.allRowGuis)o.rowComp.toggleCss(t,!0),o.rowComp.toggleCss(n,!1)}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getLastRow()}refreshFirstAndLastRowStyles(){const e=this.isFirstRowOnPage(),t=this.isLastRowOnPage();if(this.firstRowOnPage!==e){this.firstRowOnPage=e;for(const n of this.allRowGuis)n.rowComp.toggleCss("ag-row-first",e)}if(this.lastRowOnPage!==t){this.lastRowOnPage=t;for(const n of this.allRowGuis)n.rowComp.toggleCss("ag-row-last",t)}}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){const e=[];if(this.beans.rowStyleSvc?.processClassesFromGridOptions(e,this.rowNode),!!e.length)for(const t of e)for(const n of this.allRowGuis)n.rowComp.toggleCss(t,!0)}postProcessRowClassRules(){this.beans.rowStyleSvc?.processRowClassRules(this.rowNode,e=>{for(const t of this.allRowGuis)t.rowComp.toggleCss(e,!0)},e=>{for(const t of this.allRowGuis)t.rowComp.toggleCss(e,!1)})}setStylesFromGridOptions(e,t){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(t,n=>n.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(e){return e==="left"||e==="right"?e:null}getInitialRowClasses(e){const t=this.getPinnedForContainer(e),n=this.isFullWidth(),{rowNode:o,beans:u}=this,d=[];d.push("ag-row"),d.push(this.rowFocused?"ag-row-focus":"ag-row-no-focus"),this.fadeInAnimation[e]&&d.push("ag-opacity-zero"),d.push(o.rowIndex%2===0?"ag-row-even":"ag-row-odd"),o.isRowPinned()&&(d.push("ag-row-pinned"),u.pinnedRowModel?.isManual()&&d.push("ag-row-pinned-manual")),!o.isRowPinned()&&o.pinnedSibling&&d.push("ag-row-pinned-source"),o.isSelected()&&d.push("ag-row-selected"),o.footer&&d.push("ag-row-footer"),d.push("ag-row-level-"+this.rowLevel),o.stub&&d.push("ag-row-loading"),n&&d.push("ag-full-width-row"),u.expansionSvc?.addExpandedCss(d,o),o.dragging&&d.push("ag-row-dragging");const{rowStyleSvc:f}=u;return f&&(f.processClassesFromGridOptions(d,o),f.preProcessRowClassRules(d,o)),d.push(this.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),this.isFirstRowOnPage()&&d.push("ag-row-first"),this.isLastRowOnPage()&&d.push("ag-row-last"),n&&(t==="left"&&d.push("ag-cell-last-left-pinned"),t==="right"&&d.push("ag-cell-first-right-pinned")),d}processStylesFromGridOptions(){return this.beans.rowStyleSvc?.processStylesFromGridOptions(this.rowNode)??this.emptyStyle}onRowSelected(e){this.beans.selectionSvc?.onRowCtrlSelected(this,t=>{(t===this.centerGui||t===this.fullWidthGui)&&this.announceDescription()},e)}announceDescription(){this.beans.selectionSvc?.announceAriaRowSelection(this.rowNode)}addHoverFunctionality(e){if(!this.active)return;const{element:t,compBean:n}=e,{rowNode:o,beans:u,gos:d}=this;n.addManagedListeners(t,{pointerenter:f=>{f.pointerType==="mouse"&&o.dispatchRowEvent("mouseEnter")},pointerleave:f=>{f.pointerType==="mouse"&&o.dispatchRowEvent("mouseLeave")}}),n.addManagedListeners(o,{mouseEnter:()=>{!u.dragSvc?.dragging&&!d.get("suppressRowHoverHighlight")&&(t.classList.add("ag-row-hover"),o.setHovered(!0))},mouseLeave:()=>{this.resetHoveredStatus(t)}})}resetHoveredStatus(e){const t=e?[e]:this.allRowGuis.map(n=>n.element);for(const n of t)n.classList.remove("ag-row-hover");this.rowNode.setHovered(!1)}roundRowTopToBounds(e){const t=this.beans.ctrlsSvc.getScrollFeature().getApproximateVScollPosition(),n=this.applyPaginationOffset(t.top,!0)-100,o=this.applyPaginationOffset(t.bottom,!0)+100;return Math.min(Math.max(n,e),o)}forEachGui(e,t){if(e)t(e);else for(const n of this.allRowGuis)t(n)}isRowRendered(){return this.allRowGuis.length>0}onRowHeightChanged(e){if(this.rowNode.rowHeight==null)return;const t=this.rowNode.rowHeight,n=this.beans.environment.getDefaultRowHeight(),u=_isGetRowHeightFunction(this.gos)?_getRowHeightForNode(this.beans,this.rowNode).height:void 0,d=u?`${Math.min(n,u)-2}px`:void 0;this.forEachGui(e,f=>{f.element.style.height=`${t}px`,d&&f.element.style.setProperty("--ag-line-height",d)})}destroyFirstPass(e=!1){this.active=!1;const{rowNode:t}=this;if(!e&&_isAnimateRows(this.gos)&&!t.sticky)if(t.rowTop!=null){const u=this.roundRowTopToBounds(t.rowTop);this.setRowTop(u)}else for(const u of this.allRowGuis)u.rowComp.toggleCss("ag-opacity-zero",!0);this.fullWidthGui?.element.contains(_getActiveDomElement(this.beans))&&this.beans.focusSvc.attemptToRecoverFocus(),t.setHovered(!1);const n=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(n),this.beans.eventSvc.dispatchEvent(n),super.destroy()}destroySecondPass(){this.allRowGuis.length=0;const e=t=>{for(const n of t.list)n.destroy();return{list:[],map:{}}};this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,t=>{t.rowComp.toggleCss("ag-row-focus",this.rowFocused),t.rowComp.toggleCss("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const{focusSvc:e}=this.beans,t=e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses())}onPaginationChanged(){const e=this.beans.pagination?.getCurrentPage()??0;this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e,t=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return e;const n=this.beans.pageBounds.getPixelOffset();return e+n*(t?1:-1)}setRowTop(e){if(!this.printLayout&&_exists(e)){const t=this.applyPaginationOffset(e),u=`${this.rowNode.isRowPinned()||this.rowNode.sticky?t:this.beans.rowContainerHeight.getRealPixelPosition(t)}px`;this.setRowTopStyle(u)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(e)})`}getInitialRowTopShared(e){if(this.printLayout)return"";const t=this.rowNode;let n;if(t.sticky)n=t.stickyRowTop;else{const o=this.slideInAnimation[e]?this.roundRowTopToBounds(t.oldRowTop):t.rowTop,u=this.applyPaginationOffset(o);n=t.isRowPinned()?u:this.beans.rowContainerHeight.getRealPixelPosition(u)}return n+"px"}setRowTopStyle(e){for(const t of this.allRowGuis)this.suppressRowTransform?t.rowComp.setTop(e):t.rowComp.setTransform(`translateY(${e})`)}getCellCtrl(e,t=!1){let n=null;for(const o of this.getAllCellCtrls())o.column==e&&(n=o);if(n!=null||t)return n;for(const o of this.getAllCellCtrls())o?.getColSpanningList().indexOf(e)>=0&&(n=o);return n}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}updateRowIndexes(e){const t=this.rowNode.getRowIndexString();if(t===null)return;const n=(this.beans.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0)+(this.beans.filterManager?.getHeaderRowCount()??0),o=this.rowNode.rowIndex%2===0,u=n+this.rowNode.rowIndex+1;this.forEachGui(e,d=>{d.rowComp.setRowIndex(t),d.rowComp.toggleCss("ag-row-even",o),d.rowComp.toggleCss("ag-row-odd",!o),_setAriaRowIndex(d.element,u)})}},NavigationService=class extends BeanStub{constructor(){super(),this.beanName="navigation",this.onPageDown=_throttle(this.onPageDown,100),this.onPageUp=_throttle(this.onPageUp,100)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){const n=e.key,o=e.altKey,u=e.ctrlKey||e.metaKey,d=!!this.beans.rangeSvc&&e.shiftKey,f=_getCellPositionForEvent(this.gos,e);let v=!1;switch(n){case KeyCode.PAGE_HOME:case KeyCode.PAGE_END:!u&&!o&&(this.onHomeOrEndKey(n),v=!0);break;case KeyCode.LEFT:case KeyCode.RIGHT:case KeyCode.UP:case KeyCode.DOWN:if(!f)return!1;u&&!o&&!d&&(this.onCtrlUpDownLeftRight(n,f),v=!0);break;case KeyCode.PAGE_DOWN:case KeyCode.PAGE_UP:!u&&!o&&(v=this.handlePageUpDown(n,f,t));break}return v&&e.preventDefault(),v}handlePageUpDown(e,t,n){return n&&(t=this.beans.focusSvc.getFocusedCell()),t?(e===KeyCode.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo({scrollIndex:e,scrollType:t,scrollColumn:n,focusIndex:o,focusColumn:u,isAsync:d,rowPinned:f}){const{scrollFeature:v}=this.gridBodyCon;_exists(n)&&!n.isPinned()&&v.ensureColumnVisible(n),_exists(e)&&v.ensureIndexVisible(e,t),d||v.ensureIndexVisible(o);const{focusSvc:w,rangeSvc:E}=this.beans;w.setFocusedCell({rowIndex:o,column:u,rowPinned:f,forceBrowserFocus:!0}),E?.setRangeToCell({rowIndex:o,rowPinned:f,column:u})}onPageDown(e){const t=this.beans,n=getVScroll(t),o=this.getViewportHeight(),{pageBounds:u,rowModel:d,rowAutoHeight:f}=t,v=u.getPixelOffset(),w=n.top+o,E=d.getRowIndexAtPixel(w+v);f?.active?this.navigateToNextPageWithAutoHeight(e,E):this.navigateToNextPage(e,E)}onPageUp(e){const t=this.beans,n=getVScroll(t),{pageBounds:o,rowModel:u,rowAutoHeight:d}=t,f=o.getPixelOffset(),v=n.top,w=u.getRowIndexAtPixel(v+f);d?.active?this.navigateToNextPageWithAutoHeight(e,w,!0):this.navigateToNextPage(e,w,!0)}navigateToNextPage(e,t,n=!1){const{pageBounds:o,rowModel:u}=this.beans,d=this.getViewportHeight(),f=o.getFirstRow(),v=o.getLastRow(),w=o.getPixelOffset(),E=u.getRow(e.rowIndex),C=n?E?.rowHeight-d-w:d-w,_=E?.rowTop+C;let D=u.getRowIndexAtPixel(_+w);if(D===e.rowIndex){const M=n?-1:1;t=D=e.rowIndex+M}let O;n?(O="bottom",D<f&&(D=f),t<f&&(t=f)):(O="top",D>v&&(D=v),t>v&&(t=v)),this.isRowTallerThanView(u.getRow(D))&&(t=D,O="top"),this.navigateTo({scrollIndex:t,scrollType:O,scrollColumn:null,focusIndex:D,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,n=!1){this.navigateTo({scrollIndex:t,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{const o=this.getNextFocusIndexForAutoHeight(e,n);this.navigateTo({scrollIndex:t,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:o,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){const n=t?-1:1,o=this.getViewportHeight(),{pageBounds:u,rowModel:d}=this.beans,f=u.getLastRow();let v=0,w=e.rowIndex;for(;w>=0&&w<=f;){const E=d.getRow(w);if(E){const C=E.rowHeight??0;if(v+C>o)break;v+=C}w+=n}return Math.max(0,Math.min(w,f))}getViewportHeight(){const e=this.beans,t=getVScroll(e),n=this.beans.scrollVisibleSvc.getScrollbarWidth();let o=t.bottom-t.top;return e.ctrlsSvc.get("center").isHorizontalScrollShowing()&&(o-=n),o}isRowTallerThanView(e){if(!e)return!1;const t=e.rowHeight;return typeof t!="number"?!1:t>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const n=this.beans.cellNavigation.getNextCellToFocus(e,t,!0),o=this.getNormalisedPosition(n),{rowIndex:u,rowPinned:d,column:f}=o??n,v=f;this.navigateTo({scrollIndex:u,scrollType:null,scrollColumn:v,focusIndex:u,focusColumn:v,rowPinned:d})}onHomeOrEndKey(e){const t=e===KeyCode.PAGE_HOME,{visibleCols:n,pageBounds:o,rowModel:u}=this.beans,d=n.allCols,f=t?o.getFirstRow():o.getLastRow(),v=u.getRow(f);if(!v)return;const w=(t?d:[...d].reverse()).find(E=>!E.isSuppressNavigable(v));w&&this.navigateTo({scrollIndex:f,scrollType:null,scrollColumn:w,focusIndex:f,focusColumn:w})}onTabKeyDown(e,t){const n=t.shiftKey,o=this.tabToNextCellCommon(e,n,t),u=this.beans,{ctrlsSvc:d,pageBounds:f,focusSvc:v,gos:w}=u;if(o!==!1){o?t.preventDefault():o===null&&d.get("gridCtrl").allowFocusForNextCoreContainer(n);return}if(n){const{rowIndex:E,rowPinned:C}=e.getRowPosition();(C?E===0:E===f.getFirstRow())&&(w.get("headerHeight")===0||_isHeaderFocusSuppressed(u)?_focusNextGridCoreContainer(u,!0,!0):(t.preventDefault(),v.focusPreviousFromFirstCell(t)))}else e instanceof CellCtrl&&e.focusCell(!0),(v.focusOverlay(!1)||_focusNextGridCoreContainer(u,n))&&t.preventDefault()}tabToNextCell(e,t){const n=this.beans,{focusSvc:o,rowRenderer:u}=n,d=o.getFocusedCell();if(!d)return!1;let f=_getCellByPosition(n,d);return!f&&(f=u.getRowByPosition(d),!f?.isFullWidth())?!1:!!this.tabToNextCellCommon(f,e,t,"api")}tabToNextCellCommon(e,t,n,o="ui"){const{editSvc:u,focusSvc:d}=this.beans;let f;const v=e instanceof CellCtrl?e:e.getAllCellCtrls()?.[0];return u?.isEditing()?f=u?.moveToNextCell(v,t,n,o):f=this.moveToNextCellNotEditing(e,t,n),f===null?f:f||!!d.focusedHeader}moveToNextCellNotEditing(e,t,n){const o=this.beans.visibleCols.allCols;let u;if(e instanceof RowCtrl){if(u={...e.getRowPosition(),column:t?o[0]:_last(o)},this.gos.get("embedFullWidthRows")&&n){const f=e.findFullWidthInfoForEvent(n);f&&(u.column=f.column)}}else u=e.getFocusedCellPosition();const d=this.findNextCellToFocusOn(u,{backwards:t,startEditing:!1});if(d===!1)return null;if(d instanceof CellCtrl)d.focusCell(!0);else if(d)return this.tryToFocusFullWidthRow(d,t);return _exists(d)}findNextCellToFocusOn(e,{backwards:t,startEditing:n,skipToNextEditableCell:o}){let u=e;const d=this.beans,{cellNavigation:f,gos:v,focusSvc:w,rowRenderer:E,rangeSvc:C}=d;for(;;){e!==u&&(e=u),t||(u=this.getLastCellOfColSpan(u)),u=f.getNextTabbedCell(u,t);const _=v.getCallback("tabToNextCell");if(_exists(_)){const N=_({backwards:t,editing:n,previousCellPosition:e,nextCellPosition:u||null});if(N===!0)u=e;else{if(N===!1)return!1;u={rowIndex:N.rowIndex,column:N.column,rowPinned:N.rowPinned}}}if(!u)return null;if(u.rowIndex<0){const M=getFocusHeaderRowCount(d);return w.focusHeaderPosition({headerPosition:{headerRowIndex:M+u.rowIndex,column:u.column},fromCell:!0}),null}const D=v.get("editType")==="fullRow";if(n&&(!D||o)&&!this.isCellEditable(u))continue;this.ensureCellVisible(u);const O=_getCellByPosition(d,u);if(!O){const M=E.getRowByPosition(u);if(!M||!M.isFullWidth()||n)continue;return{...M.getRowPosition(),column:u?.column}}if(!f.isSuppressNavigable(O.column,O.rowNode))return O.setFocusedCellPosition(u),C?.setRangeToCell(u),O}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}lookupRowNodeForCell({rowIndex:e,rowPinned:t}){const{pinnedRowModel:n,rowModel:o}=this.beans;return t==="top"?n?.getPinnedTopRow(e):t==="bottom"?n?.getPinnedBottomRow(e):o.getRow(e)}navigateToNextCell(e,t,n,o){let u=n,d=!1;const f=this.beans,{cellNavigation:v,focusSvc:w,gos:E}=f;for(;u&&(u===n||!this.isValidNavigateCell(u));)E.get("enableRtl")?t===KeyCode.LEFT&&(u=this.getLastCellOfColSpan(u)):t===KeyCode.RIGHT&&(u=this.getLastCellOfColSpan(u)),u=v.getNextCellToFocus(t,u),d=_missing(u);if(d&&e&&e.key===KeyCode.UP&&(u={rowIndex:-1,rowPinned:null,column:n.column}),o){const _=E.getCallback("navigateToNextCell");if(_exists(_)){const O=_({key:t,previousCellPosition:n,nextCellPosition:u||null,event:e});_exists(O)?u={rowPinned:O.rowPinned,rowIndex:O.rowIndex,column:O.column}:u=null}}if(!u)return;if(u.rowIndex<0){const _=getFocusHeaderRowCount(f);w.focusHeaderPosition({headerPosition:{headerRowIndex:_+u.rowIndex,column:n.column},event:e||void 0,fromCell:!0});return}const C=this.getNormalisedPosition(u);C?this.focusPosition(C):this.tryToFocusFullWidthRow(u)}getNormalisedPosition(e){if(!!this.beans.spannedRowRenderer?.getCellByPosition(e))return e;this.ensureCellVisible(e);const n=_getCellByPosition(this.beans,e);return n?(e=n.getFocusedCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){const{visibleCols:n,rowRenderer:o,focusSvc:u,eventSvc:d}=this.beans,f=n.allCols;if(!o.getRowByPosition(e)?.isFullWidth())return!1;const w=u.getFocusedCell(),E={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?_last(f):f[0])};this.focusPosition(E);const C=t??(w!=null&&_isRowBefore(E,w));return d.dispatchEvent({type:"fullWidthRowFocused",rowIndex:E.rowIndex,rowPinned:E.rowPinned,column:E.column,isFullWidthCell:!0,fromBelow:C}),!0}focusPosition(e){const{focusSvc:t,rangeSvc:n}=this.beans;t.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),n?.setRangeToCell(e)}isValidNavigateCell(e){return!!_getRowNode(this.beans,e)}getLastCellOfColSpan(e){const t=_getCellByPosition(this.beans,e);if(!t)return e;const n=t.getColSpanningList();return n.length===1?e:{rowIndex:e.rowIndex,column:_last(n),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=_isGroupRowsSticky(this.gos),n=this.beans.rowModel.getRow(e.rowIndex),o=t&&n?.sticky,{scrollFeature:u}=this.gridBodyCon;!o&&_missing(e.rowPinned)&&u.ensureIndexVisible(e.rowIndex),e.column.isPinned()||u.ensureColumnVisible(e.column)}ensureColumnVisible(e){const t=this.gridBodyCon.scrollFeature;e.isPinned()||t.ensureColumnVisible(e)}ensureRowVisible(e){this.gridBodyCon.scrollFeature.ensureIndexVisible(e)}};function getVScroll(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}var KeyboardNavigationModule={moduleName:"KeyboardNavigation",version:VERSION,beans:[NavigationService,CellNavigationService,HeaderNavigationService],apiFunctions:{getFocusedCell,clearFocusedCell,setFocusedCell,setFocusedHeader,tabToNextCell,tabToPreviousCell}},PageBoundsListener=class extends BeanStub{constructor(){super(...arguments),this.beanName="pageBoundsListener"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventSvc.dispatchEvent({type:"paginationChanged",animate:e?.animate??!1,newData:e?.newData??!1,newPage:e?.newPage??!1,newPageSize:e?.newPageSize??!1,keepRenderedRows:e?.keepRenderedRows??!1})}calculatePages(){const{pageBounds:e,pagination:t,rowModel:n}=this.beans;t?t.calculatePages():e.calculateBounds(0,n.getRowCount()-1)}},PageBoundsService=class extends BeanStub{constructor(){super(...arguments),this.beanName="pageBounds",this.pixelOffset=0}getFirstRow(){return this.topRowBounds?.rowIndex??-1}getLastRow(){return this.bottomRowBounds?.rowIndex??-1}getCurrentPageHeight(){const{topRowBounds:e,bottomRowBounds:t}=this;return!e||!t?0:Math.max(t.rowTop+t.rowHeight-e.rowTop,0)}getCurrentPagePixelRange(){const{topRowBounds:e,bottomRowBounds:t}=this,n=e?.rowTop??0,o=t?t.rowTop+t.rowHeight:0;return{pageFirstPixel:n,pageLastPixel:o}}calculateBounds(e,t){const{rowModel:n}=this.beans,o=n.getRowBounds(e);o&&(o.rowIndex=e),this.topRowBounds=o;const u=n.getRowBounds(t);u&&(u.rowIndex=t),this.bottomRowBounds=u,this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){const e=this.topRowBounds?.rowTop??0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventSvc.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},pinnedColumnModuleCSS=".ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top{min-width:0;overflow:hidden;position:relative}.ag-pinned-left-sticky-top,.ag-pinned-right-sticky-top{height:100%;overflow:hidden;position:relative}.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{height:100%;overflow:hidden;width:100%}.ag-pinned-left-header,.ag-pinned-right-header{display:inline-block;height:100%;overflow:hidden;position:relative}.ag-body-horizontal-scroll:not(.ag-scrollbar-invisible){.ag-horizontal-left-spacer:not(.ag-scroller-corner){border-right:var(--ag-pinned-column-border)}.ag-horizontal-right-spacer:not(.ag-scroller-corner){border-left:var(--ag-pinned-column-border)}}.ag-pinned-right-header{border-left:var(--ag-pinned-column-border)}.ag-pinned-left-header{border-right:var(--ag-pinned-column-border)}.ag-cell.ag-cell-first-right-pinned:not(.ag-cell-range-left,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-left:var(--ag-pinned-column-border)}.ag-cell.ag-cell-last-left-pinned:not(.ag-cell-range-right,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-right:var(--ag-pinned-column-border)}.ag-pinned-left-header .ag-header-cell-resize:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}.ag-pinned-right-header .ag-header-cell-resize:after{left:50%}.ag-pinned-left-header .ag-header-cell-resize{right:-3px}.ag-pinned-right-header .ag-header-cell-resize{left:-3px}",SetPinnedWidthFeature=class extends BeanStub{constructor(e,t){super(),this.isLeft=e,this.elements=t,this.getWidth=e?()=>this.beans.pinnedCols.leftWidth:()=>this.beans.pinnedCols.rightWidth}postConstruct(){this.addManagedEventListeners({[`${this.isLeft?"left":"right"}PinnedWidthChanged`]:this.onPinnedWidthChanged.bind(this)})}onPinnedWidthChanged(){const e=this.getWidth(),t=e>0;for(const n of this.elements)n&&(_setDisplayed(n,t),_setFixedWidth(n,e))}},PinnedColumnService=class extends BeanStub{constructor(){super(...arguments),this.beanName="pinnedCols"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,t=>{this.gridBodyCtrl=t.gridBodyCtrl});const e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const{gos:e,visibleCols:t,eventSvc:n}=this.beans,o=_isDomLayout(e,"print"),u=o?0:t.getColsLeftWidth(),d=o?0:t.getDisplayedColumnsRightWidth();u!=this.leftWidth&&(this.leftWidth=u,n.dispatchEvent({type:"leftPinnedWidthChanged"})),d!=this.rightWidth&&(this.rightWidth=d,n.dispatchEvent({type:"rightPinnedWidthChanged"}))}keepPinnedColumnsNarrowerThanViewport(){const e=this.gridBodyCtrl.eBodyViewport,t=_getInnerWidth(e);if(t<=50)return;const n=this.getPinnedColumnsOverflowingViewport(t-50),o=this.gos.getCallback("processUnpinnedColumns"),{columns:u,hasLockedPinned:d}=n;let f=u;!f.length&&!d||(o&&(f=o({columns:f,viewportWidth:t})),f?.length&&(f=f.filter(v=>!isRowNumberCol(v)),this.setColsPinned(f,null,"viewportSizeFeature")))}createPinnedWidthFeature(e,...t){return new SetPinnedWidthFeature(e,t)}setColsPinned(e,t,n){const{colModel:o,colAnimation:u,visibleCols:d,gos:f}=this.beans;if(!o.cols||!e?.length)return;if(_isDomLayout(f,"print")){_warn(37);return}u?.start();let v;t===!0||t==="left"?v="left":t==="right"?v="right":v=null;const w=[];for(const E of e){if(!E)continue;const C=o.getCol(E);C&&C.getPinned()!==v&&(this.setColPinned(C,v),w.push(C))}w.length&&(d.refresh(n),dispatchColumnPinnedEvent(this.eventSvc,w,n)),u?.finish()}initCol(e){const{pinned:t,initialPinned:n}=e.colDef;t!==void 0?this.setColPinned(e,t):this.setColPinned(e,n)}setColPinned(e,t){t===!0||t==="left"?e.pinned="left":t==="right"?e.pinned="right":e.pinned=null,e.dispatchStateUpdatedEvent("pinned")}setupHeaderPinnedWidth(e){const{scrollVisibleSvc:t}=this.beans;if(e.pinned==null)return;const n=e.pinned==="left",o=e.pinned==="right";e.hidden=!0;const u=()=>{const d=n?this.leftWidth:this.rightWidth;if(d==null)return;const f=d==0,v=e.hidden!==f,w=this.gos.get("enableRtl"),E=t.getScrollbarWidth(),_=t.verticalScrollShowing&&(w&&n||!w&&o)?d+E:d;e.comp.setPinnedContainerWidth(`${_}px`),e.comp.setDisplayed(!f),v&&(e.hidden=f,e.refresh())};e.addManagedEventListeners({leftPinnedWidthChanged:u,rightPinnedWidthChanged:u,scrollVisibilityChanged:u,scrollbarWidthChanged:u})}getHeaderResizeDiff(e,t){if(t.getPinned()){const{leftWidth:o,rightWidth:u}=this,d=_getInnerWidth(this.beans.ctrlsSvc.getGridBodyCtrl().eBodyViewport)-50;if(o+u+e>d)if(d>o+u)e=d-o-u;else return 0}return e}getPinnedColumnsOverflowingViewport(e){const t=this.rightWidth??0,n=this.leftWidth??0,o=t+n;let u=!1;if(o<e)return{columns:[],hasLockedPinned:u};const{visibleCols:d}=this.beans,f=[...d.leftCols],v=[...d.rightCols];let w=0,E=0;const C=0,_=[];let D=o-C-e;for(;(E<f.length||w<v.length)&&D>0;){if(w<v.length){const O=v[w++];if(O.colDef.lockPinned){u=!0;continue}D-=O.getActualWidth(),_.push(O)}if(E<f.length&&D>0){const O=f[E++];if(O.colDef.lockPinned){u=!0;continue}D-=O.getActualWidth(),_.push(O)}}return{columns:_,hasLockedPinned:u}}},PinnedColumnModule={moduleName:"PinnedColumn",version:VERSION,beans:[PinnedColumnService],css:[pinnedColumnModuleCSS]},BaseAriaAnnouncementService=class extends AgBeanStub{constructor(){super(),this.beanName="ariaAnnounce",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.lastAnnouncement="",this.updateAnnouncement=_debounce(this,this.updateAnnouncement.bind(this),200)}postConstruct(){const e=this.beans,t=_getDocument(e),n=this.descriptionContainer=t.createElement("div");n.classList.add("ag-aria-description-container"),_setAriaLive(n,"polite"),_setAriaRelevant(n,"additions text"),_setAriaAtomic(n,!0),e.eRootDiv.appendChild(n)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;const e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{this.handleAnnouncementUpdate(e)},50)}handleAnnouncementUpdate(e){if(!this.isAlive()||!this.descriptionContainer)return;let t=e;if(t==null||t.replace(/[ .]/g,"")==""){this.lastAnnouncement="";return}this.lastAnnouncement===t&&(t=`${t}`),this.lastAnnouncement=t,this.descriptionContainer.textContent=t}destroy(){super.destroy();const{descriptionContainer:e}=this;e&&(_clearElement(e),e.remove()),this.descriptionContainer=null,this.pendingAnnouncements.clear()}},AriaAnnouncementService=class extends BaseAriaAnnouncementService{},AriaModule={moduleName:"Aria",version:VERSION,beans:[AriaAnnouncementService]},columnDelayRenderCSS=":where(.ag-delay-render){.ag-cell,.ag-header-cell,.ag-header-group-cell,.ag-row,.ag-spanned-cell-wrapper{visibility:hidden}}",HideClass="ag-delay-render",ColumnDelayRenderService=class extends BeanStub{constructor(){super(...arguments),this.beanName="colDelayRenderSvc",this.hideRequested=!1,this.alreadyRevealed=!1,this.timesRetried=0,this.requesters=new Set}hideColumns(e){this.alreadyRevealed||this.requesters.has(e)||(this.requesters.add(e),this.hideRequested||(this.beans.ctrlsSvc.whenReady(this,t=>{t.gridBodyCtrl.eGridBody.classList.add(HideClass)}),this.hideRequested=!0))}revealColumns(e){if(this.alreadyRevealed||!this.isAlive()||(this.requesters.delete(e),this.requesters.size>0))return;const{renderStatus:t,ctrlsSvc:n}=this.beans;if(t){if(!t.areHeaderCellsRendered()&&this.timesRetried<5){this.timesRetried++,setTimeout(()=>this.revealColumns(e));return}this.timesRetried=0}n.getGridBodyCtrl().eGridBody.classList.remove(HideClass),this.alreadyRevealed=!0}},ColumnDelayRenderModule={moduleName:"ColumnDelayRender",version:VERSION,beans:[ColumnDelayRenderService],css:[columnDelayRenderCSS]};function showLoadingOverlay(e){e.overlays?.showLoadingOverlay()}function showNoRowsOverlay(e){e.overlays?.showNoRowsOverlay()}function hideOverlay(e){e.overlays?.hideOverlay()}var overlayWrapperComponentCSS=".ag-overlay{inset:0;pointer-events:none;position:absolute;z-index:2}.ag-overlay-panel,.ag-overlay-wrapper{display:flex;height:100%;width:100%}.ag-overlay-wrapper{align-items:center;flex:none;justify-content:center;text-align:center}.ag-overlay-exporting-wrapper,.ag-overlay-loading-wrapper,.ag-overlay-modal-wrapper{pointer-events:all}.ag-overlay-exporting-center,.ag-overlay-loading-center{background:var(--ag-background-color);border:solid var(--ag-border-width) var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-popup-shadow);display:flex;padding:var(--ag-spacing)}",OverlayWrapperElement={tag:"div",cls:"ag-overlay",role:"presentation",children:[{tag:"div",cls:"ag-overlay-panel",role:"presentation",children:[{tag:"div",ref:"eOverlayWrapper",cls:"ag-overlay-wrapper",role:"presentation"}]}]},OverlayWrapperComponent=class extends Component{constructor(){super(OverlayWrapperElement),this.eOverlayWrapper=RefPlaceholder,this.activeOverlay=null,this.activePromise=null,this.activeCssClass=null,this.elToFocusAfter=null,this.overlayExclusive=!1,this.oldWrapperPadding=null,this.registerCSS(overlayWrapperComponentCSS)}handleKeyDown(e){if(e.key!==KeyCode.TAB||e.defaultPrevented||_isStopPropagationForAgGrid(e))return;const{beans:t,eOverlayWrapper:n}=this;if(n&&_findNextFocusableElement(t,n,!1,e.shiftKey))return;let u=!1;e.shiftKey?u=t.focusSvc.focusGridView({column:_last(t.visibleCols.allCols),backwards:!0,canFocusOverlay:!1}):u=_focusNextGridCoreContainer(t,!1),u&&e.preventDefault()}updateLayoutClasses(e,t){const n=this.eOverlayWrapper;if(!n)return;const o=n.classList,{AUTO_HEIGHT:u,NORMAL:d,PRINT:f}=LayoutCssClasses;o.toggle(u,t.autoHeight),o.toggle(d,t.normal),o.toggle(f,t.print)}postConstruct(){this.createManagedBean(new LayoutFeature(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.beans.overlays.setWrapperComp(this,!1),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)}),this.addManagedEventListeners({gridSizeChanged:this.refreshWrapperPadding.bind(this)})}setWrapperTypeClass(e){const t=this.eOverlayWrapper?.classList;if(!t){this.activeCssClass=null;return}this.activeCssClass&&t.toggle(this.activeCssClass,!1),this.activeCssClass=e,t.toggle(e,!0)}showOverlay(e,t,n){if(this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,this.overlayExclusive=n,!e)return this.refreshWrapperPadding(),AgPromise.resolve();if(this.setWrapperTypeClass(t),this.setDisplayed(!0,{skipAriaHidden:!0}),this.refreshWrapperPadding(),n&&this.isGridFocused()){const o=_getActiveDomElement(this.beans);o&&!_isNothingFocused(this.beans)&&(this.elToFocusAfter=o)}return e.then(o=>{const u=this.eOverlayWrapper;if(!u){this.destroyBean(o);return}if(this.activePromise!==e){this.activeOverlay!==o&&(this.destroyBean(o),o=null);return}this.activePromise=null,o&&(this.activeOverlay!==o&&(u.appendChild(o.getGui()),this.activeOverlay=o),n&&this.isGridFocused()&&_focusInto(u))}),e}refreshWrapperPadding(){if(!this.eOverlayWrapper){this.oldWrapperPadding=null;return}const e=!!this.activeOverlay||!!this.activePromise;let t=0;e&&!this.overlayExclusive&&(t=this.beans.ctrlsSvc.get("gridHeaderCtrl")?.headerHeight||0),t!==this.oldWrapperPadding&&(this.oldWrapperPadding=t,this.eOverlayWrapper.style.setProperty("padding-top",`${t}px`))}destroyActiveOverlay(){this.activePromise=null;const e=this.activeOverlay;if(!e){this.overlayExclusive=!1,this.elToFocusAfter=null,this.refreshWrapperPadding();return}let t=this.elToFocusAfter;this.elToFocusAfter=null,this.activeOverlay=null,this.overlayExclusive=!1,t&&!this.isGridFocused()&&(t=null),this.destroyBean(e);const n=this.eOverlayWrapper;n&&_clearElement(n),t?.focus?.({preventScroll:!0}),this.refreshWrapperPadding()}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}isGridFocused(){const e=_getActiveDomElement(this.beans);return!!e&&this.beans.eGridDiv.contains(e)}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.beans.overlays.setWrapperComp(this,!0),super.destroy(),this.eOverlayWrapper=null}},OverlayWrapperSelector={selector:"AG-OVERLAY-WRAPPER",component:OverlayWrapperComponent},overlayCompTypeOptionalMethods=["refresh"],overlayCompType=e=>({name:e,optionalMethods:overlayCompTypeOptionalMethods}),LoadingOverlayDef={id:"agLoadingOverlay",overlayType:"loading",comp:overlayCompType("loadingOverlayComponent"),wrapperCls:"ag-overlay-loading-wrapper",exclusive:!0,compKey:"loadingOverlayComponent",paramsKey:"loadingOverlayComponentParams",isSuppressed:e=>{const t=e.get("loading");return t===!1||e.get("suppressLoadingOverlay")===!0&&t!==!0}},NoRowsOverlayDef={id:"agNoRowsOverlay",overlayType:"noRows",comp:overlayCompType("noRowsOverlayComponent"),wrapperCls:"ag-overlay-no-rows-wrapper",compKey:"noRowsOverlayComponent",paramsKey:"noRowsOverlayComponentParams",isSuppressed:e=>e.get("suppressNoRowsOverlay")},NoMatchingRowsOverlayDef={id:"agNoMatchingRowsOverlay",overlayType:"noMatchingRows",comp:overlayCompType("noMatchingRowsOverlayComponent"),wrapperCls:"ag-overlay-no-matching-rows-wrapper"},ExportingOverlayDef={id:"agExportingOverlay",overlayType:"exporting",comp:overlayCompType("exportingOverlayComponent"),wrapperCls:"ag-overlay-exporting-wrapper",exclusive:!0},CustomOverlayDef={id:"activeOverlay",comp:overlayCompType("activeOverlay"),wrapperCls:"ag-overlay-modal-wrapper",exclusive:!0},getActiveOverlayDef=e=>e?{agLoadingOverlay:LoadingOverlayDef,agNoRowsOverlay:NoRowsOverlayDef,agNoMatchingRowsOverlay:NoMatchingRowsOverlayDef,agExportingOverlay:ExportingOverlayDef}[e]??CustomOverlayDef:null,getOverlayDefForType=e=>e?{loading:LoadingOverlayDef,noRows:NoRowsOverlayDef,noMatchingRows:NoMatchingRowsOverlayDef,exporting:ExportingOverlayDef}[e]:null,OverlayService=class extends BeanStub{constructor(){super(...arguments),this.beanName="overlays",this.eWrapper=void 0,this.exclusive=!1,this.oldExclusive=!1,this.currentDef=null,this.showInitialOverlay=!0,this.userForcedNoRows=!1,this.exportsInProgress=0,this.newColumnsLoadedCleanup=null}postConstruct(){const e=this.gos;this.showInitialOverlay=_isClientSideRowModel(e);const t=()=>{this.userForcedNoRows||this.updateOverlay(!1)},[n,o,u,d]=this.addManagedEventListeners({newColumnsLoaded:t,rowCountReady:()=>{this.disableInitialOverlay(),t(),o()},rowDataUpdated:t,modelUpdated:t});this.newColumnsLoadedCleanup=n,this.addManagedPropertyListeners(["loading","activeOverlay","activeOverlayParams","overlayComponentParams","loadingOverlayComponentParams","noRowsOverlayComponentParams"],f=>this.onPropChange(new Set(f.changeSet?.properties)))}destroy(){this.doHideOverlay(),super.destroy(),this.eWrapper=void 0}setWrapperComp(e,t){this.isAlive()&&(t?this.eWrapper===e&&(this.eWrapper=void 0):this.eWrapper=e,this.updateOverlay(!1))}isVisible(){return!!this.currentDef}showLoadingOverlay(){this.showInitialOverlay=!1;const e=this.gos;if(!this.eWrapper||e.get("activeOverlay")||this.isDisabled(LoadingOverlayDef))return;const t=e.get("loading");!t&&t!==void 0||this.doShowOverlay(LoadingOverlayDef)}showNoRowsOverlay(){this.showInitialOverlay=!1;const e=this.gos;!this.eWrapper||e.get("activeOverlay")||e.get("loading")||this.isDisabled(NoRowsOverlayDef)||(this.userForcedNoRows=!0,this.doShowOverlay(NoRowsOverlayDef))}async showExportOverlay(e){const{gos:t,beans:n}=this;if(!this.eWrapper||t.get("activeOverlay")||t.get("loading")||this.isDisabled(ExportingOverlayDef)||this.userForcedNoRows&&this.currentDef===NoRowsOverlayDef){e();return}const o=this.getDesiredDefWithOverride(ExportingOverlayDef);if(!o){e();return}this.exportsInProgress++,this.focusedCell=n.focusSvc.getFocusedCell(),await this.doShowOverlay(o),await new Promise(d=>setTimeout(()=>d()));const u=Date.now();try{e()}finally{const d=Date.now()-u,f=Math.max(0,300-d),v=()=>{this.exportsInProgress--,this.exportsInProgress===0&&(this.updateOverlay(!1),_attemptToRestoreCellFocus(n,this.focusedCell),this.focusedCell=null)};f>0?setTimeout(()=>v(),f):v()}}hideOverlay(){const e=this.gos;this.showInitialOverlay=!1;const t=this.userForcedNoRows;if(this.userForcedNoRows=!1,e.get("loading")){_warn(99);return}if(e.get("activeOverlay")){_warn(296);return}if(this.currentDef===NoMatchingRowsOverlayDef){_warn(297);return}this.doHideOverlay(),t&&this.getOverlayDef()!==NoRowsOverlayDef&&this.updateOverlay(!1)}getOverlayWrapperSelector(){return OverlayWrapperSelector}getOverlayWrapperCompClass(){return OverlayWrapperComponent}onPropChange(e){const t=e.has("activeOverlay");if((t||e.has("loading"))&&this.updateOverlay(t))return;const n=this.currentDef,o=this.eWrapper?.activeOverlay;if(o&&n){const u=e.has("activeOverlayParams");if(n===CustomOverlayDef)u&&o.refresh?.(this.makeCompParams(!0));else{const d=n.paramsKey;(e.has("overlayComponentParams")||d&&e.has(d))&&o.refresh?.(this.makeCompParams(!1,d,n.overlayType))}}}updateOverlay(e){const t=this.eWrapper;if(!t)return this.currentDef=null,!1;const n=this.getDesiredDefWithOverride(),o=this.currentDef,u=n===CustomOverlayDef&&e;return n!==o?n?(this.doShowOverlay(n),!0):(this.disableInitialOverlay(),this.doHideOverlay()):u&&n?(t.hideOverlay(),this.doShowOverlay(n),!0):(n||this.disableInitialOverlay(),!1)}getDesiredDefWithOverride(e){const{gos:t}=this;let n=getActiveOverlayDef(t.get("activeOverlay"));return n||(n=e??this.getOverlayDef(),n&&this.isDisabled(n)&&(n=null)),n}getOverlayDef(){const{gos:e,beans:t}=this,{rowModel:n}=t,o=e.get("loading");if(o!==void 0){if(this.disableInitialOverlay(),o)return LoadingOverlayDef}else if(this.showInitialOverlay){if(!this.isDisabled(LoadingOverlayDef)&&(!e.get("columnDefs")||!e.get("rowData")))return LoadingOverlayDef;this.disableInitialOverlay()}else this.disableInitialOverlay();const d=n.getOverlayType();return getOverlayDefForType(d)}disableInitialOverlay(){this.showInitialOverlay=!1,this.newColumnsLoadedCleanup?.(),this.newColumnsLoadedCleanup=null}doShowOverlay(e){const{gos:t,beans:n}=this,{userCompFactory:o}=n;this.currentDef=e;const u=e!==CustomOverlayDef,d=!!e.exclusive;this.exclusive=d;let f;(e.paramsKey&&t.get(e.paramsKey)||e.compKey&&t.get(e.compKey))&&(f=e.paramsKey);let v;u&&(t.get("overlayComponent")||t.get("overlayComponentSelector"))&&(v=o.getCompDetailsFromGridOptions({name:"overlayComponent",optionalMethods:["refresh"]},void 0,this.makeCompParams(!1,e.paramsKey,e.overlayType))),v??(v=o.getCompDetailsFromGridOptions(e.comp,u?e.id:void 0,this.makeCompParams(!u,f,e.overlayType),!1));const w=v?.newAgStackInstance()??null,E=this.eWrapper?this.eWrapper.showOverlay(w,e.wrapperCls,d):AgPromise.resolve();return this.eWrapper?.refreshWrapperPadding(),this.setExclusive(d),E}makeCompParams(e,t,n){const{gos:o}=this,u=e?o.get("activeOverlayParams"):{...o.get("overlayComponentParams"),...t&&o.get(t)||null,overlayType:n};return _addGridCommonParams(o,u??{})}doHideOverlay(){let e=!1;this.currentDef&&(this.currentDef=null,e=!0),this.exclusive=!1;const t=this.eWrapper;return t&&(t.hideOverlay(),t.refreshWrapperPadding(),this.setExclusive(!1)),e}setExclusive(e){this.oldExclusive!==e&&(this.oldExclusive=e,this.eventSvc.dispatchEvent({type:"overlayExclusiveChanged"}))}isDisabled(e){const{gos:t}=this;return e.overlayType&&t.get("suppressOverlays")?.includes(e.overlayType)||e.isSuppressed?.(t)===!0}},OverlayModule={moduleName:"Overlay",version:VERSION,userComponents:{agLoadingOverlay:LoadingOverlayComponent,agNoRowsOverlay:NoRowsOverlayComponent,agNoMatchingRowsOverlay:NoMatchingRowsOverlayComponent,agExportingOverlay:ExportingOverlayComponent},apiFunctions:{showLoadingOverlay,showNoRowsOverlay,hideOverlay},icons:{overlayLoading:"loading",overlayExporting:"loading"},beans:[OverlayService]},RowContainerHeightService=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowContainerHeight",this.scrollY=0,this.uiBodyHeight=0}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=_getMaxDivHeight(),_logIfDebug(this.gos,"RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}updateOffset(){if(!this.stretching)return;const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition().top,t=this.getUiBodyHeight();(e!==this.scrollY||t!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=t,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;_logIfDebug(this.gos,`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventSvc.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventSvc.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=this.modelHeight-this.getUiBodyHeight(),n=e/t;return this.maxScrollY*n}},ROW_ANIMATION_TIMEOUT=400,RowRenderer=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{for(const d of this.getAllCellCtrls())d.onCellSelectionChanged()},t=()=>{for(const d of this.getAllCellCtrls())d.updateRangeBordersIfRangeCount()},n=()=>{this.eventSvc.addListener("cellSelectionChanged",e),this.eventSvc.addListener("columnMoved",t),this.eventSvc.addListener("columnPinned",t),this.eventSvc.addListener("columnVisible",t)},o=()=>{this.eventSvc.removeListener("cellSelectionChanged",e),this.eventSvc.removeListener("columnMoved",t),this.eventSvc.removeListener("columnPinned",t),this.eventSvc.removeListener("columnVisible",t)};this.addDestroyFunc(()=>o()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{_isCellSelectionEnabled(this.gos)?n():o()}),_isCellSelectionEnabled(this.gos)&&n()}}wireBeans(e){this.pageBounds=e.pageBounds,this.colModel=e.colModel,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusSvc=e.focusSvc,this.rowContainerHeight=e.rowContainerHeight,this.ctrlsSvc=e.ctrlsSvc,this.editSvc=e.editSvc}postConstruct(){this.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),pinnedRowsChanged:this.onPinnedRowsChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",o=>this.onSuppressCellFocusChanged(o.currentValue)),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.addManagedPropertyListener("cellSelection",({currentValue:o,previousValue:u})=>{(!u&&o||u&&!o)&&this.redrawRows()});const{stickyRowSvc:e,gos:t,showRowGroupCols:n}=this.beans;if(n&&this.addManagedPropertyListener("showOpenedGroup",()=>{const o=n.columns;o.length&&this.refreshCells({columns:o,force:!0})}),e)this.stickyRowFeature=e.createStickyRowFeature(this,this.createRowCon.bind(this),this.destroyRowCtrls.bind(this));else{const o=this.gridBodyCtrl;o.setStickyTopHeight(0),o.setStickyBottomHeight(0)}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=_isDomLayout(t,"print"),this.embedFullWidthRows=this.printLayout||t.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new RowCtrlCache(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?.stickyTopRowCtrls??[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?.stickyBottomRowCtrls??[]}updateAllRowCtrls(){const e=Object.values(this.rowCtrlsByRowIndex),t=Object.values(this.zombieRowCtrls),n=this.cachedRowCtrls?.getEntries()??[];t.length>0||n.length>0?this.allRowCtrls=[...e,...t,...n]:this.allRowCtrls=e}isCellBeingRendered(e,t){const n=this.rowCtrlsByRowIndex[e];return!t||!n?!!n:n.isFullWidth()?!0:!!this.beans.spannedRowRenderer?.getCellByPosition({rowIndex:e,column:t,rowPinned:null})||!!n.getCellCtrl(t)||!n.isRowRendered()}updateCellFocus(e){for(const t of this.getAllCellCtrls())t.onCellFocused(e);for(const t of this.getFullWidthRowCtrls())t.onFullWidthRowFocused(e)}onCellFocusChanged(e){if(e?.rowIndex!=null&&!e.rowPinned){const t=this.beans.colModel.getCol(e.column)??void 0;this.isCellBeingRendered(e.rowIndex,t)||this.redraw()}this.updateCellFocus(e)}onSuppressCellFocusChanged(e){for(const t of this.getAllCellCtrls())t.onSuppressCellFocusChanged(e);for(const t of this.getFullWidthRowCtrls())t.onSuppressCellFocusChanged(e)}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>this.onCellFocusChanged(e),cellFocusCleared:()=>this.updateCellFocus(),flashCells:e=>{const{cellFlashSvc:t}=this.beans;if(t)for(const n of this.getAllCellCtrls())t.onFlashCells(n,e)},columnHoverChanged:()=>{for(const e of this.getAllCellCtrls())e.onColumnHover()},displayedColumnsChanged:()=>{for(const e of this.getAllCellCtrls())e.onDisplayedColumnsChanged()},displayedColumnsWidthChanged:()=>{if(this.printLayout)for(const e of this.getAllCellCtrls())e.onLeftChanged()}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){for(const e of this.destroyFuncsForColumnListeners)e();this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners();const e=this.colModel.getCols();for(const t of e){const n=w=>{for(const E of this.getAllCellCtrls())E.column===t&&w(E)},o=()=>{n(w=>w.onLeftChanged())},u=()=>{n(w=>w.onWidthChanged())},d=()=>{n(w=>w.onFirstRightPinnedChanged())},f=()=>{n(w=>w.onLastLeftPinnedChanged())},v=()=>{n(w=>w.onColDefChanged())};t.__addEventListener("leftChanged",o),t.__addEventListener("widthChanged",u),t.__addEventListener("firstRightPinnedChanged",d),t.__addEventListener("lastLeftPinnedChanged",f),t.__addEventListener("colDefChanged",v),this.destroyFuncsForColumnListeners.push(()=>{t.__removeEventListener("leftChanged",o),t.__removeEventListener("widthChanged",u),t.__removeEventListener("firstRightPinnedChanged",d),t.__removeEventListener("lastLeftPinnedChanged",f),t.__removeEventListener("colDefChanged",v)})}}onDomLayoutChanged(){const e=_isDomLayout(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),n=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,n&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsNotSpanningForColumn(e){const t=[];for(const n of this.getAllRowCtrls()){const o=n.getCellCtrl(e,!0)?.eGui;o&&t.push(o)}return t}refreshFloatingRowComps(e=!0){this.refreshFloatingRows(this.topRowCtrls,"top",e),this.refreshFloatingRows(this.bottomRowCtrls,"bottom",e)}refreshFloatingRows(e,t,n){const{pinnedRowModel:o,beans:u,printLayout:d}=this,f=Object.fromEntries(e.map(w=>[w.rowNode.id,w]));o?.forEachPinnedRow(t,(w,E)=>{const C=e[E];C&&o.getPinnedRowById(C.rowNode.id,t)===void 0&&(C.destroyFirstPass(),C.destroySecondPass()),w.id in f&&n?(e[E]=f[w.id],delete f[w.id]):e[E]=new RowCtrl(w,u,!1,!1,d)});const v=(t==="top"?o?.getPinnedTopRowCount():o?.getPinnedBottomRowCount())??0;e.length=v}onPinnedRowDataChanged(){const e={recycleRows:!0};this.redrawAfterModelUpdate(e)}onPinnedRowsChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}redrawRow(e,t=!1){if(e.sticky)this.stickyRowFeature?.refreshStickyNode(e);else if(this.cachedRowCtrls?.has(e)){this.cachedRowCtrls.removeRow(e);return}else{const n=o=>{const u=o[e.rowIndex];u&&u.rowNode===e&&(u.destroyFirstPass(),u.destroySecondPass(),o[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":n(this.topRowCtrls);break;case"bottom":n(this.bottomRowCtrls);break;default:n(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){const{editSvc:t}=this.beans;if(t?.isEditing()&&(t.isBatchEditing()?t.cleanupEditors():t.stopEditing(void 0,{source:"api"})),e!=null){for(const o of e??[])this.redrawRow(o,!0);this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();const t=this.beans.focusSvc?.getFocusCellToUseAfterRefresh();this.updateContainerHeights(),this.scrollToTopIfNewData(e);const n=!e.domLayoutChanged&&!!e.recycleRows,o=e.animate&&_isAnimateRows(this.gos),u=n?this.getRowsToRecycle():null;n||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender();const{stickyRowFeature:d,gos:f}=this;if(d){d.checkStickyRows();const v=d.extraTopHeight+d.extraBottomHeight;v&&this.updateContainerHeights(v)}this.recycleRows(u,o),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(f.get("enableRowPinning")?n:void 0),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){const t=e.newData||e.newPage,n=this.gos.get("suppressScrollOnNewData");t&&!n&&(this.gridBodyCtrl.scrollFeature.scrollToTop(),this.stickyRowFeature?.resetOffsets())}updateContainerHeights(e=0){const{rowContainerHeight:t}=this;if(this.printLayout){t.setModelHeight(null);return}let n=this.pageBounds.getCurrentPageHeight();n===0&&(n=1),t.setModelHeight(n+e)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error(_errMsg(252));this.refreshInProgress=!0,this.beans.frameworkOverrides.getLockOnRefresh?.()}releaseLockOnRefresh(){this.refreshInProgress=!1,this.beans.frameworkOverrides.releaseLockOnRefresh?.()}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){if(!e)return;const t=this.beans.focusSvc,n=this.findPositionToFocus(e);if(!n){t.focusHeaderPosition({headerPosition:{headerRowIndex:getFocusHeaderRowCount(this.beans)-1,column:e.column}});return}if(e.rowIndex!==n.rowIndex||e.rowPinned!=n.rowPinned){t.setFocusedCell({...n,preventScrollOnBrowserFocus:!0,forceBrowserFocus:!0});return}t.doesRowOrCellHaveBrowserFocus()||this.updateCellFocus(_addGridCommonParams(this.gos,{...n,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))}findPositionToFocus(e){const{pagination:t,pageBounds:n}=this.beans;let o=e;for(o.rowPinned==null&&t&&n&&!t.isRowInPage(o.rowIndex)&&(o={rowPinned:null,rowIndex:n.getFirstRow()});o;){if(o.rowPinned==null&&n)if(o.rowIndex<n.getFirstRow()){if(o=_getRowAbove(this.beans,{rowPinned:null,rowIndex:0}),!o)return null}else o.rowIndex>n.getLastRow()&&(o={rowPinned:null,rowIndex:n.getLastRow()});const u=this.getRowByPosition(o);if(u?.isAlive())return{...u.getRowPosition(),column:e.column};o=_getRowAbove(this.beans,o)}return null}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),n=t.length;for(let o=0;o<n;o++){const u=t[o].getAllCellCtrls(),d=u.length;for(let f=0;f<d;f++)e.push(u[f])}return e}getAllRowCtrls(){const{spannedRowRenderer:e}=this.beans,t=this.getStickyTopRowCtrls(),n=this.getStickyBottomRowCtrls();return[...this.topRowCtrls,...this.bottomRowCtrls,...t,...n,...e?.getCtrls("top")??[],...e?.getCtrls("bottom")??[],...e?.getCtrls("center")??[],...Object.values(this.rowCtrlsByRowIndex)]}addRenderedRowListener(e,t,n){const o=this.rowCtrlsByRowIndex[t];o&&o.addEventListener(e,n)}refreshCells({rowNodes:e,columns:t,force:n,suppressFlash:o}={}){const u={force:n,newData:!1,suppressFlash:o};for(const d of this.getCellCtrls(e,t))d.refreshOrDestroyCell(u);this.refreshFullWidth(e)}refreshRows(e={}){for(const t of this.getRowCtrls(e.rowNodes))t.refreshRow(e);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=!1;for(const n of this.getRowCtrls(e)){if(!n.isFullWidth())continue;n.refreshFullWidth()||(t=!0,this.redrawRow(n.rowNode,!0))}t&&this.dispatchDisplayedRowsChanged(!1)}getRowCtrls(e){const t=mapRowNodes(e),n=this.getAllRowCtrls();return!e||!t?n:n.filter(o=>{const u=o.rowNode;return isRowInMap(u,t)})}getCellCtrls(e,t){let n;_exists(t)&&(n={},t.forEach(u=>{const d=this.colModel.getCol(u);_exists(d)&&(n[d.getId()]=!0)}));const o=[];for(const u of this.getRowCtrls(e))for(const d of u.getAllCellCtrls()){const f=d.column.getId();n&&!n[f]||o.push(d)}return o}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(e=!1){const t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t,e),this.stickyRowFeature?.destroyStickyCtrls()}getRowsToRecycle(){const e=[];for(const n of Object.keys(this.rowCtrlsByRowIndex))this.rowCtrlsByRowIndex[n].rowNode.id==null&&e.push(n);this.removeRowCtrls(e);const t={};for(const n of Object.values(this.rowCtrlsByRowIndex)){const o=n.rowNode;t[o.id]=n}return this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){for(const n of e){const o=this.rowCtrlsByRowIndex[n];o&&(o.destroyFirstPass(t),o.destroySecondPass()),delete this.rowCtrlsByRowIndex[n]}}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){const{focusSvc:t,animationFrameSvc:n}=this.beans,{afterScroll:o}=e;let u;const d=this.stickyRowFeature;d&&(u=t?.getFocusCellToUseAfterRefresh()||void 0);const f=this.firstRenderedRow,v=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let w=!1;if(d){w=d.checkStickyRows();const C=d.extraTopHeight+d.extraBottomHeight;C&&this.updateContainerHeights(C)}const E=this.firstRenderedRow!==f||this.lastRenderedRow!==v;if(!(o&&!w&&!E)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,o),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(o&&!w),u!=null)){const C=t?.getFocusCellToUseAfterRefresh();u!=null&&C==null&&(n?.flushAllFrames(),this.restoreFocusedCell(u))}}removeRowCompsNotToDraw(e,t){const n={};for(const d of e)n[d]=!0;const u=Object.keys(this.rowCtrlsByRowIndex).filter(d=>!n[d]);this.removeRowCtrls(u,t)}calculateIndexesToDraw(e){const t=[];for(let f=this.firstRenderedRow;f<=this.lastRenderedRow;f++)t.push(f);const n=this.beans.pagination,o=this.beans.focusSvc?.getFocusedCell()?.rowIndex;o!=null&&(o<this.firstRenderedRow||o>this.lastRenderedRow)&&(!n||n.isRowInPage(o))&&o<this.rowModel.getRowCount()&&t.push(o);const u=f=>{const v=f.rowNode.rowIndex;v==null||v===o||(v<this.firstRenderedRow||v>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(f)&&t.push(v)};for(const f of Object.values(this.rowCtrlsByRowIndex))u(f);if(e)for(const f of Object.values(e))u(f);t.sort((f,v)=>f-v);const d=[];for(let f=0;f<t.length;f++){const v=t[f],w=this.rowModel.getRow(v);w&&!w.sticky&&d.push(v)}return d}recycleRows(e,t=!1,n=!1){const o=this.calculateIndexesToDraw(e);(this.printLayout||n)&&(t=!1),this.removeRowCompsNotToDraw(o,!t);for(const u of o)this.createOrUpdateRowCtrl(u,e,t,n);if(e){const{animationFrameSvc:u}=this.beans;u?.active&&n&&!this.printLayout?u.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)}this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){this.eventSvc.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){const{visibleCols:e}=this.beans,t=e.isPinningLeft(),n=e.isPinningRight();(this.pinningLeft!==t||n!==this.pinningRight)&&(this.pinningLeft=t,this.pinningRight=n,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];for(const t of this.getFullWidthRowCtrls()){const n=t.rowNode.rowIndex;e.push(n.toString())}this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=mapRowNodes(e);return this.getAllRowCtrls().filter(n=>{if(!n.isFullWidth())return!1;const o=n.rowNode;return!(t!=null&&!isRowInMap(o,t))})}createOrUpdateRowCtrl(e,t,n,o){let u,d=this.rowCtrlsByRowIndex[e];if(d||(u=this.rowModel.getRow(e),_exists(u)&&_exists(t)&&t[u.id]&&u.alreadyRendered&&(d=t[u.id],t[u.id]=null)),!d)if(u||(u=this.rowModel.getRow(e)),_exists(u))d=this.createRowCon(u,n,o);else return;u&&(u.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=d}destroyRowCtrls(e,t){const n=[];if(e){for(const o of Object.values(e))if(o){if(this.cachedRowCtrls&&o.isCacheable()){this.cachedRowCtrls.addRow(o);continue}if(o.destroyFirstPass(!t),t){const u=o.instanceId;this.zombieRowCtrls[u]=o,n.push(()=>{o.destroySecondPass(),delete this.zombieRowCtrls[u]})}else o.destroySecondPass()}}t&&(n.push(()=>{this.isAlive()&&(this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged())}),window.setTimeout(()=>{for(const o of n)o()},ROW_ANIMATION_TIMEOUT))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){const e=this.getRowBuffer(),t=_getRowHeightAsNumber(this.beans);return e*t}workOutFirstAndLastRowsToRender(){const{rowContainerHeight:e,pageBounds:t,rowModel:n}=this;e.updateOffset();let o,u;if(!n.isRowsToRender())o=0,u=-1;else if(this.printLayout)this.beans.environment.refreshRowHeightVariable(),o=t.getFirstRow(),u=t.getLastRow();else{const C=this.getRowBufferInPixels(),_=this.ctrlsSvc.getScrollFeature(),D=this.gos.get("suppressRowVirtualisation");let O=!1,M,N;do{const q=t.getPixelOffset(),{pageFirstPixel:z,pageLastPixel:$}=t.getCurrentPagePixelRange(),ee=e.divStretchOffset,ie=_.getVScrollPosition(),ae=ie.top,pe=ie.bottom;D?(M=z+ee,N=$+ee):(M=Math.max(ae+q-C,z)+ee,N=Math.min(pe+q+C,$)+ee),this.firstVisibleVPixel=Math.max(ae+q,z)+ee,this.lastVisibleVPixel=Math.min(pe+q,$)+ee,O=this.ensureAllRowsInRangeHaveHeightsCalculated(M,N)}while(O);let I=n.getRowIndexAtPixel(M),B=n.getRowIndexAtPixel(N);const V=t.getFirstRow(),j=t.getLastRow();I<V&&(I=V),B>j&&(B=j),o=I,u=B}const d=_isDomLayout(this.gos,"normal"),f=this.gos.get("suppressMaxRenderedRowRestriction"),v=Math.max(this.getRowBuffer(),500);d&&!f&&u-o>v&&(u=o+v);const w=o!==this.firstRenderedRow,E=u!==this.lastRenderedRow;(w||E)&&(this.firstRenderedRow=o,this.lastRenderedRow=u,this.eventSvc.dispatchEvent({type:"viewportChanged",firstRow:o,lastRow:u}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,_requestAnimationFrame(this.beans,()=>{this.beans.eventSvc.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){const n=this.pinnedRowModel?.ensureRowHeightsValid(),o=this.stickyRowFeature?.ensureRowHeightsValid(),{pageBounds:u,rowModel:d}=this,f=d.ensureRowHeightsValid(e,t,u.getFirstRow(),u.getLastRow());return(f||o)&&this.eventSvc.dispatchEvent({type:"recalculateRowBounds"}),o||f||n?(this.updateContainerHeights(),!0):!1}doNotUnVirtualiseRow(e){const o=e.rowNode,u=this.focusSvc.isRowFocused(o.rowIndex,o.rowPinned),d=this.editSvc?.isEditing(e),f=o.detail;return u||d||f?!!this.isRowPresent(o):!1}isRowPresent(e){return this.rowModel.isRowPresent(e)?this.beans.pagination?.isRowInPage(e.rowIndex)??!0:!1}createRowCon(e,t,n){const o=this.cachedRowCtrls?.getRow(e)??null;if(o)return o;const u=n&&!this.printLayout&&!!this.beans.animationFrameSvc?.active;return new RowCtrl(e,this.beans,t,u,this.printLayout)}getRenderedNodes(){const e=Object.values(this.rowCtrlsByRowIndex).map(o=>o.rowNode),t=this.getStickyTopRowCtrls().map(o=>o.rowNode),n=this.getStickyBottomRowCtrls().map(o=>o.rowNode);return[...t,...e,...n]}getRowByPosition(e){let t;const{rowIndex:n}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[n];break;case"bottom":t=this.bottomRowCtrls[n];break;default:t=this.rowCtrlsByRowIndex[n],t||(t=this.getStickyTopRowCtrls().find(o=>o.rowNode.rowIndex===n)||null,t||(t=this.getStickyBottomRowCtrls().find(o=>o.rowNode.rowIndex===n)||null));break}return t}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;const o=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!o}},RowCtrlCache=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.rowNode.id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if(e?.id==null)return null;const t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.rowNode!=e?null:t):null}has(e){return this.entriesMap[e.id]!=null}removeRow(e){const t=e.id,n=this.entriesMap[t];delete this.entriesMap[t],_removeFromArray(this.entriesList,n)}removeFromCache(e){const t=e.rowNode.id;delete this.entriesMap[t],_removeFromArray(this.entriesList,e)}getEntries(){return this.entriesList}};function mapRowNodes(e){if(!e)return;const t={top:{},bottom:{},normal:{}};for(const n of e){const o=n.id;switch(n.rowPinned){case"top":t.top[o]=n;break;case"bottom":t.bottom[o]=n;break;default:t.normal[o]=n;break}}return t}function isRowInMap(e,t){const n=e.id;switch(e.rowPinned){case"top":return t.top[n]!=null;case"bottom":return t.bottom[n]!=null;default:return t.normal[n]!=null}}var RowNodeSorter=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowNodeSorter",this.accentedSort=!1,this.primaryColumnsSortGroups=!1,this.pivotActive=!1}postConstruct(){this.firstLeaf=_isClientSideRowModel(this.gos)?_csrmFirstLeaf:defaultGetLeaf,this.addManagedPropertyListeners(["accentedSort","autoGroupColumnDef","treeData"],this.updateOptions.bind(this));const e=this.updatePivotModeState.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,columnPivotChanged:e}),this.updateOptions(),e()}updateOptions(){this.accentedSort=!!this.gos.get("accentedSort"),this.primaryColumnsSortGroups=_isColumnsSortingCoupledToGroup(this.gos)}updatePivotModeState(){this.pivotActive=this.beans.colModel.isPivotActive()}doFullSortInPlace(e,t){return e.sort((n,o)=>this.compareRowNodes(t,n,o))}compareRowNodes(e,t,n){if(t===n)return 0;const o=this.accentedSort;for(let u=0,d=e.length;u<d;++u){const f=e[u],v=f.sort==="desc";let w=this.getValue(t,f.column),E=this.getValue(n,f.column),C;const _=this.getComparator(f,t);if(_?C=_(w,E,t,n,v):(f.type==="absolute"&&(w=absoluteValueTransformer(w),E=absoluteValueTransformer(E)),C=_defaultComparator(w,E,o)),C)return f.sort==="asc"?C:-C}return 0}getComparator(e,t){const n=e.column.getColDef(),o=this.getComparatorFromColDef(n,e);if(o)return o;if(!n.showRowGroup)return;const u=!t.group&&n.field;if(!u)return;const d=this.beans.colModel.getColDefCol(u);if(d)return this.getComparatorFromColDef(d.getColDef(),e)}getComparatorFromColDef(e,t){const n=e.comparator;if(n!=null)return typeof n=="object"?n[_normalizeSortType(t.type)]:n}getValue(e,t){const n=this.beans;if(this.primaryColumnsSortGroups){if(e.rowGroupColumn===t)return this.getGroupDataValue(e,t);if(e.group&&t.getColDef().showRowGroup)return}const o=n.valueSvc.getValue(t,e,"data");if(t.isAllowFormula()){const u=n.formula;if(u?.isFormula(o))return u.resolveValue(t,e)}return o}getGroupDataValue(e,t){if(_isGroupUseEntireRow(this.gos,this.pivotActive)){const o=this.firstLeaf(e);return o&&this.beans.valueSvc.getValue(t,o,"data")}const n=this.beans.showRowGroupCols?.getShowRowGroupCol(t.getId());return n?e.groupData?.[n.getId()]:void 0}},defaultGetLeaf=e=>{if(e.data)return e;let t=e.childrenAfterGroup;for(;t?.length;){const n=t[0];if(n.data)return n;t=n.childrenAfterGroup}},absoluteValueTransformer=e=>{if(!e)return e;if(typeof e=="bigint")return e<0n?-e:e;const t=Number(e);return isNaN(t)?e:Math.abs(t)};function onSortChanged(e){e.sortSvc?.onSortChanged("api")}var makeIconParams=(e,t)=>({tag:"span",ref:`eSort${e}`,cls:`ag-sort-indicator-icon ag-sort-${t} ag-hidden`,attrs:{"aria-hidden":"true"}}),SortIndicatorElement={tag:"span",cls:"ag-sort-indicator-container",children:[makeIconParams("Order","order"),makeIconParams("Asc","ascending-icon"),makeIconParams("Desc","descending-icon"),makeIconParams("Mixed","mixed-icon"),makeIconParams("AbsoluteAsc","absolute-ascending-icon"),makeIconParams("AbsoluteDesc","absolute-descending-icon"),makeIconParams("None","none-icon")]},SortIndicatorComp=class extends Component{constructor(e){super(),this.eSortOrder=RefPlaceholder,this.eSortAsc=RefPlaceholder,this.eSortDesc=RefPlaceholder,this.eSortMixed=RefPlaceholder,this.eSortNone=RefPlaceholder,this.eSortAbsoluteAsc=RefPlaceholder,this.eSortAbsoluteDesc=RefPlaceholder,e||this.setTemplate(SortIndicatorElement)}attachCustomElements(e,t,n,o,u,d,f){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=n,this.eSortMixed=o,this.eSortNone=u,this.eSortAbsoluteAsc=d,this.eSortAbsoluteDesc=f}setupSort(e,t=!1){if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!e.isSortable()&&!e.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e),this.addInIcon("sortAbsoluteAscending",this.eSortAbsoluteAsc,e),this.addInIcon("sortAbsoluteDescending",this.eSortAbsoluteDesc,e);const n=this.updateIcons.bind(this),o=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",n),this.addManagedEventListeners({newColumnsLoaded:n,sortChanged:o,columnRowGroupChanged:o}),this.onSortChanged()}addInIcon(e,t,n){if(t==null)return;const o=_createIconNoSpan(e,this.beans,n);o&&t.appendChild(o)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const{eSortAsc:e,eSortDesc:t,eSortAbsoluteAsc:n,eSortAbsoluteDesc:o,eSortNone:u,column:d,gos:f,beans:v}=this,{isDefaultSortAllowed:w,isAbsoluteSortAllowed:E,isAbsoluteSort:C,isDefaultSort:_,isAscending:D,isDescending:O,direction:M}=_getDisplaySortForColumn(d,v);if(e&&_setDisplayed(e,D&&_&&w,{skipAriaHidden:!0}),t&&_setDisplayed(t,O&&_&&w,{skipAriaHidden:!0}),u){const N=!d.getColDef().unSortIcon&&!f.get("unSortIcon");_setDisplayed(u,!N&&!M,{skipAriaHidden:!0})}n&&_setDisplayed(n,D&&C&&E,{skipAriaHidden:!0}),o&&_setDisplayed(o,O&&C&&E,{skipAriaHidden:!0})}setupMultiSortIndicator(){const{eSortMixed:e,column:t,gos:n}=this;this.addInIcon("sortUnSort",e,t);const o=t.getColDef().showRowGroup;_isColumnsSortingCoupledToGroup(n)&&o&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){const{eSortMixed:e,beans:t,column:n}=this;if(e){const o=t.sortSvc.getDisplaySortForColumn(n)?.direction==="mixed";_setDisplayed(e,o,{skipAriaHidden:!0})}}updateSortOrder(){const{eSortOrder:e,column:t,beans:{sortSvc:n}}=this;if(!e)return;const o=n.getColumnsWithSortingOrdered(),u=n.getDisplaySortIndexForColumn(t)??-1,d=o.some(v=>n.getDisplaySortIndexForColumn(v)??!1),f=u>=0&&d;_setDisplayed(e,f,{skipAriaHidden:!0}),u>=0?e.textContent=(u+1).toString():_clearElement(e)}},SortIndicatorSelector={selector:"AG-SORT-INDICATOR",component:SortIndicatorComp},SortService=class extends BeanStub{constructor(){super(...arguments),this.beanName="sortSvc"}progressSort(e,t,n){const o=this.getNextSortDirection(e);this.setSortForColumn(e,o,t,n)}progressSortFromEvent(e,t){const o=this.gos.get("multiSortKey")==="ctrl"?t.ctrlKey||t.metaKey:t.shiftKey;this.progressSort(e,o,"uiColumnSorted")}setSortForColumn(e,t,n,o){const{gos:u,showRowGroupCols:d}=this.beans,f=_isColumnsSortingCoupledToGroup(u);let v=[e];if(f&&e.getColDef().showRowGroup){const _=d?.getSourceColumnsForGroupColumn?.(e)?.filter(D=>D.isSortable());_&&(v=[e,..._])}for(const C of v)this.setColSort(C,t,o);const w=(n||u.get("alwaysMultiSort"))&&!u.get("suppressMultiSort"),E=[];if(!w){const C=this.clearSortBarTheseColumns(v,o);E.push(...C)}this.updateSortIndex(e),E.push(...v),this.dispatchSortChangedEvents(o,E)}updateSortIndex(e){const{gos:t,colModel:n,showRowGroupCols:o}=this.beans,u=_isColumnsSortingCoupledToGroup(t),d=o?.getShowRowGroupCol(e.getId()),f=u&&d||e,v=this.getColumnsWithSortingOrdered();n.forAllCols(C=>this.setColSortIndex(C,null));const w=v.filter(C=>u&&C.getColDef().showRowGroup?!1:C!==f);(f.getSortDef()?[...w,f]:w).forEach((C,_)=>this.setColSortIndex(C,_))}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){let e=!1;return this.beans.colModel.forAllCols(t=>{if(t.getSortDef())return e=!0,!0}),e}dispatchSortChangedEvents(e,t){const n={type:"sortChanged",source:e};t&&(n.columns=t),this.eventSvc.dispatchEvent(n)}clearSortBarTheseColumns(e,t){const n=[];return this.beans.colModel.forAllCols(o=>{e.includes(o)||(o.getSortDef()&&n.push(o),this.setColSort(o,void 0,t))}),n}getNextSortDirection(e){const t=e.getSortingOrder(),n=e.getSortDef();let u=t.findIndex(d=>_areSortDefsEqual(d,n))+1;return u>=t.length&&(u=0),_getSortDefFromInput(t[u])}getIndexedSortMap(){const{gos:e,colModel:t,showRowGroupCols:n,rowGroupColsSvc:o}=this.beans;let u=[];if(t.forAllCols(E=>{E.getSortDef()&&u.push(E)}),t.isPivotMode()){const E=_isColumnsSortingCoupledToGroup(e);u=u.filter(C=>{const _=!!C.getAggFunc(),D=!C.isPrimary(),O=E?n?.getShowRowGroupCol(C.getId()):C.getColDef().showRowGroup;return _||D||O})}const d=o?.columns.filter(E=>!!E.getSortDef())??[],f={};u.forEach((E,C)=>f[E.getId()]=C),u.sort((E,C)=>{const _=E.getSortIndex(),D=C.getSortIndex();if(_!=null&&D!=null)return _-D;if(_==null&&D==null){const O=f[E.getId()],M=f[C.getId()];return O>M?1:-1}else return D==null?-1:1});const v=_isColumnsSortingCoupledToGroup(e)&&!!d.length;v&&(u=[...new Set(u.map(E=>n?.getShowRowGroupCol(E.getId())??E))]);const w=new Map;if(u.forEach((E,C)=>w.set(E,C)),v)for(const E of d){const C=n.getShowRowGroupCol(E.getId());w.set(E,w.get(C))}return w}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([,e],[,t])=>e-t).map(([e])=>e)}collectSortItems(e=!1){const t=[],n=this.getColumnsWithSortingOrdered();for(const o of n){const u=o.getSortDef()?.direction;if(!u)continue;const d=_normalizeSortType(o.getSortDef()?.type),f={sort:u,type:d};e?f.colId=o.getId():f.column=o,t.push(f)}return t}getSortModel(){return this.collectSortItems(!0)}getSortOptions(){return this.collectSortItems()}canColumnDisplayMixedSort(e){const t=_isColumnsSortingCoupledToGroup(this.gos),n=!!e.getColDef().showRowGroup;return t&&n}getDisplaySortForColumn(e){const t=this.beans.showRowGroupCols?.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!t?.length)return e.getSortDef();const o=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...t]:t,u=o[0].getSortDef();return o.every(f=>_areSortDefsEqual(f.getSortDef(),u))?u:{type:_normalizeSortType(e.getSortDef()?.type),direction:"mixed"}}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}setupHeader(e,t){const n=()=>{const{type:o,direction:u}=_getSortDefFromInput(t.getSortDef());if(e.toggleCss("ag-header-cell-sorted-asc",u==="asc"),e.toggleCss("ag-header-cell-sorted-desc",u==="desc"),e.toggleCss("ag-header-cell-sorted-abs-asc",o==="absolute"&&u==="asc"),e.toggleCss("ag-header-cell-sorted-abs-desc",o==="absolute"&&u==="desc"),e.toggleCss("ag-header-cell-sorted-none",!u),t.getColDef().showRowGroup){const v=!this.beans.showRowGroupCols?.getSourceColumnsForGroupColumn(t)?.every(w=>u==w.getSortDef()?.direction);e.toggleCss("ag-header-cell-sorted-mixed",v)}};e.addManagedEventListeners({sortChanged:n,columnPinned:n,columnRowGroupChanged:n,displayedColumnsChanged:n})}initCol(e){const{sortIndex:t,initialSortIndex:n}=e.colDef,o=_getSortDefFromColDef(e.colDef);o&&e.setSortDef(o,!0),t!==void 0?t!==null&&(e.sortIndex=t):n!==null&&(e.sortIndex=n)}updateColSort(e,t,n){t!==void 0&&this.setColSort(e,_getSortDefFromInput(t),n)}setColSort(e,t,n){_areSortDefsEqual(e.getSortDef(),t)||(e.setSortDef(_getSortDefFromInput(t),t===void 0),e.dispatchColEvent("sortChanged",n)),e.dispatchStateUpdatedEvent("sort")}setColSortIndex(e,t){e.sortIndex=t,e.dispatchStateUpdatedEvent("sortIndex")}createSortIndicator(e){return new SortIndicatorComp(e)}getSortIndicatorSelector(){return SortIndicatorSelector}},SortModule={moduleName:"Sort",version:VERSION,beans:[SortService,RowNodeSorter],apiFunctions:{onSortChanged},userComponents:{agSortIndicator:SortIndicatorComp},icons:{sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",sortAbsoluteAscending:"aasc",sortAbsoluteDescending:"adesc"}},SyncService=class extends BeanStub{constructor(){super(...arguments),this.beanName="syncSvc",this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.beans.ctrlsSvc.whenReady(this,()=>{const e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){const{colModel:t,rowModel:n}=this.beans;t.setColumnDefs(e??[],"gridInitializing"),n.start()}gridReady(){const{eventSvc:e,gos:t}=this;e.dispatchEvent({type:"gridReady"}),_logIfDebug(t,`initialised successfully, enterprise = ${t.isModuleRegistered("EnterpriseCore")}`)}setColumnDefs(e){const t=this.gos.get("columnDefs");if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.beans.colModel.setColumnDefs(t,_convertColumnEventSourceType(e.source))}}},SOURCE_PASTE="paste",ChangeDetectionService=class extends BeanStub{constructor(){super(...arguments),this.beanName="changeDetectionSvc",this.clientSideRowModel=null}postConstruct(){const{gos:e,rowModel:t}=this.beans;_isClientSideRowModel(e)&&(this.clientSideRowModel=t),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){const{gos:t,rowRenderer:n}=this.beans;if(e.source===SOURCE_PASTE||t.get("suppressChangeDetection"))return;const o=e.node,u=[o],d=this.clientSideRowModel,f=d?.rootNode;if(f&&!o.isRowPinned()){const v=t.get("aggregateOnlyChangedColumns"),w=new ChangedPath(v,f);w.addParentNode(o.parent,[e.column]),d.doAggregate(w),w.forEachChangedNodeDepthFirst(E=>{u.push(E),E.sibling&&u.push(E.sibling)})}n.refreshCells({rowNodes:u})}},ExpressionService=class extends BeanStub{constructor(){super(...arguments),this.beanName="expressionSvc",this.cache={}}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);_error(15,{expression:e})}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(n){return _error(16,{expression:e,params:t,e:n}),null}}createExpressionFunction(e){const t=this.cache;if(t[e])return t[e];const n=this.createFunctionBody(e),o=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",n);return t[e]=o,o}createFunctionBody(e){return e.includes("return")?e:"return "+e+";"}},ExpressionModule={moduleName:"Expression",version:VERSION,beans:[ExpressionService]},ChangeDetectionModule={moduleName:"ChangeDetection",version:VERSION,beans:[ChangeDetectionService]},ValueService=class extends BeanStub{constructor(){super(...arguments),this.beanName="valueSvc",this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionSvc=e.expressionSvc,this.colModel=e.colModel,this.valueCache=e.valueCache,this.dataTypeSvc=e.dataTypeSvc,this.editSvc=e.editSvc,this.formulaDataSvc=e.formulaDataSvc}postConstruct(){this.initialised||this.init()}init(){const{gos:e,valueCache:t}=this;this.executeValueGetter=t?this.executeValueGetterWithValueCache.bind(this):this.executeValueGetterWithoutValueCache.bind(this),this.isSsrm=_isServerSideRowModel(e),this.cellExpressions=e.get("enableCellExpressions"),this.isTreeData=e.get("treeData"),this.initialised=!0;const n=o=>this.callColumnCellValueChangedHandler(o);this.eventSvc.addListener("cellValueChanged",n,!0),this.addDestroyFunc(()=>this.eventSvc.removeListener("cellValueChanged",n,!0)),this.addManagedPropertyListener("treeData",o=>this.isTreeData=o.currentValue)}getValueForDisplay(e){const t=this.beans,n=e.column,o=e.node,u=t.showRowGroupColValueSvc,d=!n&&o.group,f=n?.colDef.showRowGroup,v=!this.isTreeData||o.footer;if(u&&v&&(d||f)){const D=u.getGroupValue(o,n,this.displayIgnoresAggData(o));return D==null?{value:null,valueFormatted:null}:{value:D.value,valueFormatted:e.includeValueFormatted?u.formatAndPrefixGroupColValue(D,n,e.exporting):null}}if(!n)return{value:o.key,valueFormatted:null};let w=this.getValue(n,o,e.from,this.displayIgnoresAggData(o)),E=w;const C=t.formula;n.isAllowFormula()&&C?.isFormula(w)&&(e.useRawFormula?(w=C.normaliseFormula(w,!0),E=C.resolveValue(n,o)):(w=C.resolveValue(n,o),E=w));const _=e.includeValueFormatted&&!(e.exporting&&n.colDef.useValueFormatterForExport===!1);return{value:w,valueFormatted:_?this.formatValue(n,o,E):null}}getValue(e,t,n,o=!1){if(this.initialised||this.init(),!t)return;const u=e.getColDef();if(!t.group){const w=u.pivotValueColumn;w&&(e=w)}const d=this.editSvc?.getPendingEditValue(t,e,n);if(d!==void 0)return d;const f=u.showRowGroup;if(typeof f=="string"&&(this.beans.rowGroupColsSvc?.getColumnIndex(f)??-1)>t.level)return null;let v=this.resolveValue(e,t,o);if(this.cellExpressions&&_isExpressionString(v)){const w=v.substring(1);v=this.executeValueGetter(w,t.data,e,t)}return v}getFormulaFromDataSource(e,t){const n=this.formulaDataSvc;if(!n?.hasDataSource()||!e.isAllowFormula())return;const o=n.getFormula({column:e,rowNode:t});return _isExpressionString(o)?o:void 0}displayIgnoresAggData(e){return!e.group||!e.expanded||e.footer||e.leafGroup&&this.colModel.isPivotMode()?!1:!!e.sibling&&!this.gos.get("groupSuppressBlankHeader")}resolveValue(e,t,n){const o=e.getColDef(),u=e.getColId(),d=this.isTreeData,f=this.getFormulaFromDataSource(e,t);if(f!==void 0)return f;const v=!n&&t.aggData&&t.aggData[u]!==void 0;if(d&&v)return t.aggData[u];const w=t.data,E=o.field;if(d&&o.valueGetter)return this.executeValueGetter(o.valueGetter,w,e,t);if(d&&E&&w)return _getValueUsingField(w,E,e.isFieldContainsDots());const C=t.groupData;if(C&&u in C)return t.groupData[u];if(v)return t.aggData[u];const D=o.showRowGroup,O=typeof D!="string"||!t.group,M=this.isSsrm&&n&&!!o.aggFunc,N=this.isSsrm&&t.footer&&t.field&&(D===!0||D===t.field);if(o.valueGetter&&!M)return O?this.executeValueGetter(o.valueGetter,w,e,t):void 0;if(N)return _getValueUsingField(w,t.field,e.isFieldContainsDots());if(E&&w&&!M)return O?_getValueUsingField(w,E,e.isFieldContainsDots()):void 0}parseValue(e,t,n,o){const u=e.getColDef();if(u.allowFormula&&this.beans.formula?.isFormula(n))return n;const d=u.valueParser;if(_exists(d)){const f=_addGridCommonParams(this.gos,{node:t,data:t?.data,oldValue:o,newValue:n,colDef:u,column:e});return typeof d=="function"?d(f):this.expressionSvc?.evaluate(d,f)}return n}getDeleteValue(e,t){return _exists(e.getColDef().valueParser)?this.parseValue(e,t,"",this.getValueForDisplay({column:e,node:t,from:"edit"}).value)??null:null}formatValue(e,t,n,o,u=!0){const{expressionSvc:d}=this.beans;let f=null,v;const w=e.getColDef();if(o?v=o:u&&(v=w.valueFormatter),v){const E=t?t.data:null,C=_addGridCommonParams(this.gos,{value:n,node:t,data:E,colDef:w,column:e});typeof v=="function"?f=v(C):f=d?d.evaluate(v,C):null}else if(w.refData)return w.refData[n]||"";return f==null&&Array.isArray(n)&&(f=n.join(", ")),f}setValue(e,t,n,o){const u=t.getColDef();if(!e.data&&this.canCreateRowNodeData(e,u)&&(e.data={}),!this.isSetValueSupported({column:t,newValue:n,colDef:u}))return!1;const d=this.getValue(t,e,"data"),f=_addGridCommonParams(this.gos,{node:e,data:e.data,oldValue:d,newValue:n,colDef:u,column:t}),v=e.group?u.groupRowValueSetter:void 0;let w=!1,E=!1;if(e.data){const C=this.handleExternalFormulaChange({column:t,eventSource:o,newValue:n,setterParams:f,rowNode:e});if(C!==null)return C;w=this.computeValueChange({column:t,rowNode:e,newValue:n,params:f,rowData:e.data,valueSetter:u.valueSetter,field:u.field})??!0}return v&&(E=v(_addGridCommonParams(this.gos,{node:e,data:e.data,oldValue:d,newValue:n,colDef:u,column:t,eventSource:o,valueChanged:w||n!==d,aggregatedChildren:this.beans.aggStage?.getAggregatedChildren(e,t)??[]}))??!0),!w&&!E?!1:this.finishValueChange(e,t,f,o)}canCreateRowNodeData(e,t){return e.group?!(t.groupRowValueSetter!=null||t.groupRowEditable!=null||t.pivotValueColumn):!0}finishValueChange(e,t,n,o){e.resetQuickFilterAggregateText(),this.valueCache?.onDataChanged();const u=this.getValue(t,e,"data");return this.dispatchCellValueChangedEvent(e,n,u,o),e.pinnedSibling&&this.dispatchCellValueChangedEvent(e.pinnedSibling,n,u,o),!0}isSetValueSupported(e){const{column:t,newValue:n,colDef:o}=e,{field:u,valueSetter:d}=o,f=this.beans.formula,v=t.isAllowFormula()&&f?.isFormula(n),w=!!this.formulaDataSvc?.hasDataSource();return _missing(u)&&_missing(d)&&!(w&&v)?(_warn(17),!1):this.dataTypeSvc&&!this.dataTypeSvc.checkType(t,n)?(_warn(135),!1):!0}handleExternalFormulaChange(e){const{column:t,rowNode:n,newValue:o,eventSource:u,setterParams:d}=e,f=this.beans.formula,v=this.formulaDataSvc;if(!v?.hasDataSource()||!t.isAllowFormula())return null;const w=f?.isFormula(o),E=v.getFormula({column:t,rowNode:n});if(w){if(!(E!==o))return!1;v.setFormula({column:t,rowNode:n,formula:o});const _=f?.resolveValue(t,n),D=t.getColDef();if(_exists(D.valueSetter)||!_missing(D.field)){const O={...d,newValue:_};this.computeValueChange({column:t,rowNode:n,newValue:_,params:O,rowData:n.data,valueSetter:D.valueSetter,field:D.field})}return this.finishValueChange(n,t,d,u)}return E!==void 0&&v.setFormula({column:t,rowNode:n,formula:void 0}),null}computeValueChange(e){const{valueSetter:t,params:n,rowData:o,field:u,column:d,newValue:f}=e;return _exists(t)?typeof t=="function"?t(n):this.expressionSvc?.evaluate(t,n):!!o&&this.setValueUsingField(o,u,f,d.isFieldContainsDots())}dispatchCellValueChangedEvent(e,t,n,o){this.eventSvc.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:t.column,colDef:t.colDef,data:e.data,node:e,oldValue:t.oldValue,newValue:n,value:n,source:o})}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;typeof t=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,n,o){if(!t)return!1;let u=!1;if(!o)u=e[t]===n,u||(e[t]=n);else{const d=t.split(".");let f=e;for(;d.length>0&&f;){const v=d.shift();d.length===0?(u=f[v]===n,u||(f[v]=n)):f=f[v]}}return!u}executeValueGetterWithValueCache(e,t,n,o){const u=n.getColId(),d=this.valueCache.getValue(o,u);if(d!==void 0)return d;const f=this.executeValueGetterWithoutValueCache(e,t,n,o);return this.valueCache.setValue(o,u,f),f}executeValueGetterWithoutValueCache(e,t,n,o){const u=_addGridCommonParams(this.gos,{data:t,node:o,column:n,colDef:n.getColDef(),getValue:f=>this.getValueCallback(o,f)});let d;return typeof e=="function"?d=e(u):d=this.expressionSvc?.evaluate(e,u),d}getValueCallback(e,t){const n=this.colModel.getColDefCol(t);return n?this.getValue(n,e,"data"):null}getKeyForNode(e,t){const n=this.getValue(e,t,"data"),o=e.getColDef().keyCreator;let u=n;if(o){const d=_addGridCommonParams(this.gos,{value:n,colDef:e.getColDef(),column:e,node:t,data:t.data});u=o(d)}return typeof u=="string"||u==null||(u=String(u),u==="[object Object]"&&_warn(121)),u}},CommunityCoreModule={moduleName:"CommunityCore",version:VERSION,beans:[GridDestroyService,ApiFunctionService,Registry,UserComponentFactory,RowContainerHeightService,VisibleColsService,EventService,GridOptionsService,ColumnModel,PageBoundsService,PageBoundsListener,RowRenderer,ValueService,FocusService,Environment,ScrollVisibleService,CtrlsService,SyncService,ColumnNameService,ColumnViewportService,IconService],icons:{selectOpen:"small-down",smallDown:"small-down",colorPicker:"color-picker",smallUp:"small-up",checkboxChecked:"small-up",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off",smallLeft:"small-left",smallRight:"small-right"},apiFunctions:{getGridId,destroy,isDestroyed,getGridOption,setGridOption,updateGridOptions,isModuleRegistered},dependsOn:[DataTypeModule,ColumnMoveModule,ColumnResizeModule,SortModule,ColumnHeaderCompModule,ColumnGroupModule,ColumnGroupHeaderCompModule,OverlayModule,ChangeDetectionModule,AnimationFrameModule,KeyboardNavigationModule,PinnedColumnModule,AriaModule,TouchModule,CellRendererFunctionModule,ColumnFlexModule,ExpressionModule,SkeletonCellRendererModule,ColumnDelayRenderModule]},NoModulesRegisteredError=()=>`No AG Grid modules are registered! It is recommended to start with all Community features via the AllCommunityModule:
                    
    import { ModuleRegistry, AllCommunityModule } from 'ag-grid-community';
    
    ModuleRegistry.registerModules([ AllCommunityModule ]);
    `;function missingRowModelTypeError({moduleName:e,rowModelType:t}){return`To use the ${e}Module you must set the gridOption "rowModelType='${t}'"`}var VanillaFrameworkOverrides=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.batchFrameworkComps=!1,this.wrapIncoming=t=>t(),this.wrapOutgoing=t=>t(),this.baseDocLink=`${BASE_URL}/${this.frameworkName}-data-grid`,setValidationDocLink(this.baseDocLink)}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return this.baseDocLink+(e?"/"+e:"")}},_gridApiCache=new WeakMap,_gridElementCache=new WeakMap,nextGridId=1,GridCoreCreator=class{create(e,t,n,o,u,d){const f=GlobalGridOptions.applyGlobalGridOptions(t),v=f.gridId??String(nextGridId++),w=this.getRegisteredModules(u,v,f.rowModelType),E=this.createBeansList(f.rowModelType,w,v),C=this.createProvidedBeans(e,f,u);if(!E)return;const D={providedBeanInstances:C,beanClasses:E,id:v,beanInitComparator:gridBeanInitComparator,beanDestroyComparator:gridBeanDestroyComparator,derivedBeans:[createGridApi],destroyCallback:()=>{_gridElementCache.delete(M),_gridApiCache.delete(e),_unRegisterGridModules(v),d?.()}},O=new AgContext(D);this.registerModuleFeatures(O,w),n(O),O.getBean("syncSvc").start(),o?.(O);const M=O.getBean("gridApi");return _gridApiCache.set(e,M),_gridElementCache.set(M,e),M}getRegisteredModules(e,t,n){return _registerModule(CommunityCoreModule,void 0,!0),e?.modules?.forEach(o=>_registerModule(o,t)),_getRegisteredModules(t,getDefaultRowModelType(n))}registerModuleFeatures(e,t){const n=e.getBean("registry"),o=e.getBean("apiFunctionSvc");for(const u of t){n.registerModule(u);const d=u.apiFunctions;if(d){const f=Object.keys(d);for(const v of f)o?.addFunction(v,d[v])}}}createProvidedBeans(e,t,n){let o=n?n.frameworkOverrides:null;_missing(o)&&(o=new VanillaFrameworkOverrides);const u={gridOptions:t,eGridDiv:e,eRootDiv:e,globalListener:n?n.globalListener:null,globalSyncListener:n?n.globalSyncListener:null,frameworkOverrides:o};return n?.providedBeanInstances&&Object.assign(u,n.providedBeanInstances),u}createBeansList(e,t,n){const o={clientSide:"ClientSideRowModel",infinite:"InfiniteRowModel",serverSide:"ServerSideRowModel",viewport:"ViewportRowModel"},u=getDefaultRowModelType(e),d=o[u];if(!d){_logPreInitErr(201,{rowModelType:u},`Unknown rowModelType ${u}.`);return}if(!_hasUserRegistered()){_logPreInitErr(272,void 0,NoModulesRegisteredError());return}if(!e){const v=Object.entries(o).filter(([w,E])=>_isModuleRegistered(E,n,w));if(v.length==1){const[w,E]=v[0];if(w!==u){const C={moduleName:E,rowModelType:w};_logPreInitErr(275,C,missingRowModelTypeError(C));return}}}if(!_isModuleRegistered(d,n,u)){const v=_isUmd(),w=`rowModelType = '${u}'`,E=`Missing module ${d}Module for rowModelType ${u}.`;_logPreInitErr(200,{reasonOrId:w,moduleName:d,gridScoped:_areModulesGridScoped(),gridId:n,rowModelType:u,isUmd:v},E);return}const f=new Set;for(const v of t)for(const w of v.beans??[])f.add(w);return Array.from(f)}};function getDefaultRowModelType(e){return e??"clientSide"}var STOP_EDIT_SOURCE_TRANSFORM={paste:"api",rangeSvc:"api",fillHandle:"api",cellClear:"api",bulk:"api"};new Set(Object.keys(STOP_EDIT_SOURCE_TRANSFORM));var FILTER_HANDLER_MAP={agSetColumnFilter:"agSetColumnFilterHandler",agMultiColumnFilter:"agMultiColumnFilterHandler",agGroupColumnFilter:"agGroupColumnFilterHandler",agNumberColumnFilter:"agNumberColumnFilterHandler",agBigIntColumnFilter:"agBigIntColumnFilterHandler",agDateColumnFilter:"agDateColumnFilterHandler",agTextColumnFilter:"agTextColumnFilterHandler"};new Set(Object.values(FILTER_HANDLER_MAP));var BaseComponentWrapper=class{wrap(e,t,n,o){const u=this.createWrapper(e,o);for(const d of t??[])this.createMethod(u,d,!0);for(const d of n??[])this.createMethod(u,d,!1);return u}createMethod(e,t,n){e.addMethod(t,this.createMethodProxy(e,t,n))}createMethodProxy(e,t,n){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(n&&_warn(49,{methodName:t}),null)}}},TabGuardCtrl=class extends AgTabGuardCtrl{constructor(e){super(e,STOP_PROPAGATION_CALLBACKS)}},BeansContext=React.createContext({}),RenderModeContext=React.createContext("default"),showJsComp=(e,t,n,o)=>{if(!e||e.componentFromFramework||t.isDestroyed())return;const d=e.newAgStackInstance();let f,v,w=!1;return d.then(E=>{if(w){t.destroyBean(E);return}f=E,v=f.getGui(),n.appendChild(v),setRef(o,f)}),()=>{w=!0,f&&(v?.remove(),t.destroyBean(f),o&&setRef(o,void 0))}},setRef=(e,t)=>{if(e)if(e instanceof Function)e(t);else{const n=e;n.current=t}},classesList=(...e)=>e.filter(n=>n!=null&&n!=="").join(" "),CssClasses=class wp{constructor(...t){this.classesMap={};for(const n of t)this.classesMap[n]=!0}setClass(t,n){if(!!this.classesMap[t]==n)return this;const u=new wp;return u.classesMap={...this.classesMap},u.classesMap[t]=n,u}toString(){return Object.keys(this.classesMap).filter(n=>this.classesMap[n]).join(" ")}},isComponentStateless=e=>{const t=()=>typeof Symbol=="function"&&Symbol.for,n=()=>t()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===n()},reactVersion=React.version?.split(".")[0],isReactVersion17Minus=reactVersion==="16"||reactVersion==="17";function isReact19(){return reactVersion==="19"}var disableFlushSync=!1;function runWithoutFlushSync(e){return disableFlushSync||setTimeout(()=>disableFlushSync=!1,0),disableFlushSync=!0,e()}var agFlushSync=(e,t)=>{!isReactVersion17Minus&&e&&!disableFlushSync?ReactDOM.flushSync(t):t()},agStartTransition=e=>{isReactVersion17Minus?e():React.startTransition(e)};function agUseSyncExternalStore(e,t,n){return React.useSyncExternalStore?React.useSyncExternalStore(e,t):n}function getNextValueIfDifferent(e,t,n){if(t==null||e==null)return t;if(e===t||t.length===0&&e.length===0)return e;if(n||e.length===0&&t.length>0||e.length>0&&t.length===0)return t;const o=[],u=[],d=new Map,f=new Map;for(let v=0;v<t.length;v++){const w=t[v];f.set(w.instanceId,w)}for(let v=0;v<e.length;v++){const w=e[v];d.set(w.instanceId,w),f.has(w.instanceId)&&o.push(w)}for(let v=0;v<t.length;v++){const w=t[v],E=w.instanceId;d.has(E)||u.push(w)}return o.length===e.length&&u.length===0?e:o.length===0&&u.length===t.length?t:o.length===0?u:u.length===0?o:[...o,...u]}var GroupCellRenderer=reactExports.forwardRef((e,t)=>{const{registry:n,context:o}=reactExports.useContext(BeansContext),u=reactExports.useRef(null),d=reactExports.useRef(null),f=reactExports.useRef(null),v=reactExports.useRef(null),w=reactExports.useRef(null),E=reactExports.useRef(),[C,_]=reactExports.useState(),[D,O]=reactExports.useState(),[M,N]=reactExports.useState(),[I,B]=reactExports.useState(()=>new CssClasses),[V,j]=reactExports.useState(()=>new CssClasses("ag-hidden")),[q,z]=reactExports.useState(()=>new CssClasses("ag-hidden")),[$,ee]=reactExports.useState(()=>new CssClasses("ag-invisible"));reactExports.useImperativeHandle(t,()=>({refresh(){return!1}})),reactExports.useLayoutEffect(()=>showJsComp(C,o,d.current),[C]);const ie=reactExports.useCallback(se=>{if(u.current=se,!se||o.isDestroyed()){E.current=o.destroyBean(E.current);return}const J={setInnerRenderer:(Z,K)=>{_(Z),N(K)},setChildCount:Z=>O(Z),toggleCss:(Z,K)=>B(ne=>ne.setClass(Z,K)),setContractedDisplayed:Z=>z(K=>K.setClass("ag-hidden",!Z)),setExpandedDisplayed:Z=>j(K=>K.setClass("ag-hidden",!Z)),setCheckboxVisible:Z=>ee(K=>K.setClass("ag-invisible",!Z)),setCheckboxSpacing:Z=>ee(K=>K.setClass("ag-group-checkbox-spacing",Z))},Q=n.createDynamicBean("groupCellRendererCtrl",!0);Q&&(E.current=o.createBean(Q),E.current.init(J,se,f.current,v.current,w.current,GroupCellRenderer,e))},[]),ae=reactExports.useMemo(()=>`ag-cell-wrapper ${I.toString()}`,[I]),pe=reactExports.useMemo(()=>`ag-group-expanded ${V.toString()}`,[V]),he=reactExports.useMemo(()=>`ag-group-contracted ${q.toString()}`,[q]),be=reactExports.useMemo(()=>`ag-group-checkbox ${$.toString()}`,[$]),xe=C?.componentFromFramework,Ee=xe?C.componentClass:void 0,we=C==null&&M!=null,oe=_toString(M);return React.createElement("span",{className:ae,ref:ie,...e.colDef?{}:{role:E.current?.getCellAriaRole()}},React.createElement("span",{className:pe,ref:v}),React.createElement("span",{className:he,ref:w}),React.createElement("span",{className:be,ref:f}),React.createElement("span",{className:"ag-group-value",ref:d},we?oe:xe?React.createElement(Ee,{...C.params}):null),React.createElement("span",{className:"ag-group-child-count"},D))}),groupCellRenderer_default=GroupCellRenderer,CustomContext=reactExports.createContext({setMethods:()=>{}}),CustomWrapperComp=e=>{const{initialProps:t,addUpdateCallback:n,CustomComponentClass:o,setMethods:u}=e,[{key:d,...f},v]=reactExports.useState(t);return reactExports.useEffect(()=>{n(w=>v(w))},[]),React.createElement(CustomContext.Provider,{value:{setMethods:u}},React.createElement(o,{key:d,...f}))},customWrapperComp_default=reactExports.memo(CustomWrapperComp),counter=0;function generateNewKey(){return`agPortalKey_${++counter}`}var ReactComponent=class{constructor(e,t,n,o){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=t,this.componentType=n,this.suppressFallbackMethods=!!o,this.statelessComponent=this.isStateless(this.reactComponent),this.key=generateNewKey(),this.portalKey=generateNewKey(),this.instanceCreated=this.isStatelessComponent()?AgPromise.resolve(!1):new AgPromise(u=>{this.resolveInstanceCreated=u})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const t=this.portalManager.getComponentWrappingElement(),n=document.createElement(t||"div");return n.classList.add("ag-react-container"),e.reactContainer=n,n}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const t=this.getFrameworkComponentInstance();return!!t&&t[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,t){const n=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,t&&t[0]?t[0]:{});if(!n){setTimeout(()=>this.callMethod(e,t));return}const o=n[e];if(o)return o.apply(n,t);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,t&&t[0]?t[0]:{})}addMethod(e,t){this[e]=t}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new AgPromise(t=>this.createReactComponent(t))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=t=>{this.componentInstance=t,this.resolveInstanceCreated?.(!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=reactDomExports.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,t){return reactExports.createElement(e,t)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,t){const n=this[`${e}Component`];if(!this.suppressFallbackMethods&&n)return n.bind(this)(t)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this[`${e}Component`]}};function addOptionalMethods(e,t,n){for(const o of e){const u=t[o];u&&(n[o]=u)}}var CustomComponentWrapper=class extends ReactComponent{constructor(){super(...arguments),this.awaitUpdateCallback=new AgPromise(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=customWrapperComp_default}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,t){return super.createElement(this.wrapperComponent,{initialProps:t,CustomComponentClass:e,setMethods:n=>this.setMethods(n),addUpdateCallback:n=>{this.updateCallback=()=>(n(this.getProps()),new AgPromise(o=>{setTimeout(()=>{o()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,addOptionalMethods(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new AgPromise(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},CellRendererComponentWrapper=class extends CustomComponentWrapper{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},CustomOverlayComponentWrapper=class extends CustomComponentWrapper{refresh(e){this.sourceParams=e,this.refreshProps()}},DateComponentWrapper=class extends CustomComponentWrapper{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},DragAndDropImageComponentWrapper=class extends CustomComponentWrapper{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,t){this.icon=e,this.shake=t,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:t,icon:n,shake:o}=this;return e.label=t,e.icon=n,e.shake=o,e}},FilterComponentWrapper=class extends CustomComponentWrapper{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterModifiedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1,this.awaitSetMethodsCallback=new AgPromise(e=>{this.resolveSetMethodsCallback=e})}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const t=this.providedMethods;t?t.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){this.expectingNewMethods===!1&&this.hasBeenActive&&this.providedMethods?.doesFilterPass!==e?.doesFilterPass&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e),this.resolveSetMethodsCallback(),this.resolveFilterPassCallback?.(),this.resolveFilterPassCallback=void 0}updateModel(e){this.resolveFilterPassCallback?.();const t=new AgPromise(n=>{this.resolveFilterPassCallback=n});this.setModel(e).then(()=>{t.then(()=>{this.sourceParams.filterChangedCallback()})})}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,e}},FilterDisplayComponentWrapper=class extends CustomComponentWrapper{constructor(){super(...arguments),this.awaitSetMethodsCallback=new AgPromise(e=>{this.resolveSetMethodsCallback=e})}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const t=this.providedMethods;t?t.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","onAnyFilterChanged"]}setMethods(e){super.setMethods(e),this.resolveSetMethodsCallback()}};function updateFloatingFilterParent(e,t){e.parentFilterInstance(n=>{(n.setModel(t)||AgPromise.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var FloatingFilterComponentProxy=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t,this.model=null,this.onModelChange=n=>this.updateModel(n)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){addOptionalMethods(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),updateFloatingFilterParent(this.floatingFilterParams,e)}},FloatingFilterComponentWrapper=class extends CustomComponentWrapper{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),updateFloatingFilterParent(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},FloatingFilterDisplayComponentWrapper=class extends CustomComponentWrapper{refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}},InnerHeaderComponentWrapper=class extends CustomComponentWrapper{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},MenuItemComponentWrapper=class extends CustomComponentWrapper{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const t=this.awaitSetActive(e);e&&t.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},StatusPanelComponentWrapper=class extends CustomComponentWrapper{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},ToolPanelComponentWrapper=class extends CustomComponentWrapper{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function warnReactiveCustomComponents(){_warn(231)}var MAX_COMPONENT_CREATION_TIME_IN_MS=1e3,PortalManager=class{constructor(e,t,n){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=t||"div",this.refresher=e,this.maxComponentCreationTimeMs=n||MAX_COMPONENT_CREATION_TIME_IN_MS}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(t=>t!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,t,n){this.portals=[...this.portals,e],this.waitForInstance(t,n),this.batchUpdate()}updateReactPortal(e,t){this.portals[this.portals.indexOf(e)]=t,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,t,n=Date.now()){if(this.destroyed){t(null);return}if(e.rendered())t(e);else{if(Date.now()-n>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate){agFlushSync(!0,()=>this.refresher()),e.rendered()&&t(e);return}window.setTimeout(()=>{this.waitForInstance(e,t,n)})}}},ModulesContext=React.createContext([]),LicenseContext=React.createContext(void 0),HeaderCellComp=({ctrl:e})=>{const t=e.isAlive(),{context:n}=reactExports.useContext(BeansContext),[o,u]=reactExports.useState(),[d,f]=reactExports.useState(),v=reactExports.useRef(),w=reactExports.useRef(null),E=reactExports.useRef(null),C=reactExports.useRef(null),_=reactExports.useRef(),D=reactExports.useRef();t&&!D.current&&(D.current=new CssClassManager(()=>w.current));const O=reactExports.useCallback(B=>{if(w.current=B,!B||!e.isAlive()||n.isDestroyed()){v.current=n.destroyBean(v.current);return}v.current=n.createBean(new EmptyBean);const V=()=>{const q=e.getSelectAllGui();q&&(E.current?.insertAdjacentElement("afterend",q),v.current.addDestroyFunc(()=>q.remove()))},j={setWidth:q=>{w.current&&(w.current.style.width=q)},toggleCss:(q,z)=>D.current.toggleCss(q,z),setUserStyles:q=>f(q),setAriaSort:q=>{w.current&&(q?_setAriaSort(w.current,q):_removeAriaSort(w.current))},setUserCompDetails:q=>u(q),getUserCompInstance:()=>_.current||void 0,refreshSelectAllGui:V,removeSelectAllGui:()=>e.getSelectAllGui()?.remove()};e.setComp(j,B,E.current,C.current,v.current),V()},[]);reactExports.useLayoutEffect(()=>showJsComp(o,n,C.current,_),[o]),reactExports.useEffect(()=>{e.setDragSource(w.current)},[o]);const M=reactExports.useMemo(()=>!!(o?.componentFromFramework&&isComponentStateless(o.componentClass)),[o]),N=o?.componentFromFramework,I=o?.componentClass;return React.createElement("div",{ref:O,style:d,className:"ag-header-cell",role:"columnheader"},React.createElement("div",{ref:E,className:"ag-header-cell-resize",role:"presentation"}),React.createElement("div",{ref:C,className:"ag-header-cell-comp-wrapper",role:"presentation"},N?M?React.createElement(I,{...o.params}):React.createElement(I,{...o.params,ref:_}):null))},headerCellComp_default=reactExports.memo(HeaderCellComp),FloatingFilterDisplayComponentProxy=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t}getProps(){return this.floatingFilterParams}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){addOptionalMethods(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}},HeaderFilterCellComp=({ctrl:e})=>{const{context:t,gos:n}=reactExports.useContext(BeansContext),[o,u]=reactExports.useState(),[d,f]=reactExports.useState(()=>new CssClasses("ag-header-cell","ag-floating-filter")),[v,w]=reactExports.useState(()=>new CssClasses),[E,C]=reactExports.useState(()=>new CssClasses("ag-floating-filter-button","ag-hidden")),[_,D]=reactExports.useState("false"),[O,M]=reactExports.useState(),[,N]=reactExports.useState(1),I=reactExports.useRef(),B=reactExports.useRef(null),V=reactExports.useRef(null),j=reactExports.useRef(null),q=reactExports.useRef(null),z=reactExports.useRef(),$=reactExports.useRef(),ee=Z=>{Z!=null&&z.current?.(Z)},ie=reactExports.useCallback(Z=>{if(B.current=Z,!Z||!e.isAlive()||t.isDestroyed()){I.current=t.destroyBean(I.current);return}I.current=t.createBean(new EmptyBean),$.current=new AgPromise(ne=>{z.current=ne});const K={toggleCss:(ne,ue)=>f(ye=>ye.setClass(ne,ue)),setUserStyles:ne=>u(ne),addOrRemoveBodyCssClass:(ne,ue)=>w(ye=>ye.setClass(ne,ue)),setButtonWrapperDisplayed:ne=>{C(ue=>ue.setClass("ag-hidden",!ne)),D(ne?"false":"true")},setWidth:ne=>{B.current&&(B.current.style.width=ne)},setCompDetails:ne=>M(ne),getFloatingFilterComp:()=>$.current?$.current:null,setMenuIcon:ne=>q.current?.appendChild(ne)};e.setComp(K,Z,q.current,V.current,I.current)},[]);reactExports.useLayoutEffect(()=>showJsComp(O,t,V.current,ee),[O]);const ae=reactExports.useMemo(()=>d.toString(),[d]),pe=reactExports.useMemo(()=>v.toString(),[v]),he=reactExports.useMemo(()=>E.toString(),[E]),be=reactExports.useMemo(()=>!!(O&&O.componentFromFramework&&isComponentStateless(O.componentClass)),[O]),xe=reactExports.useMemo(()=>n.get("reactiveCustomComponents"),[]),Ee=reactExports.useMemo(()=>n.get("enableFilterHandlers"),[]),[we,oe]=reactExports.useState();reactExports.useEffect(()=>{if(O?.componentFromFramework)if(xe){const Z=Ee?FloatingFilterDisplayComponentProxy:FloatingFilterComponentProxy,K=new Z(O.params,()=>N(ne=>ne+1));ee(K),oe(K)}else warnReactiveCustomComponents()},[O]);const se=we?.getProps(),J=O?.componentFromFramework,Q=O?.componentClass;return React.createElement("div",{ref:ie,style:o,className:ae,role:"gridcell"},React.createElement("div",{ref:V,className:pe,role:"presentation"},J?xe?se&&React.createElement(CustomContext.Provider,{value:{setMethods:Z=>we.setMethods(Z)}},React.createElement(Q,{...se})):React.createElement(Q,{...O.params,ref:be?()=>{}:ee}):null),React.createElement("div",{ref:j,"aria-hidden":_,className:he,role:"presentation"},React.createElement("button",{ref:q,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},headerFilterCellComp_default=reactExports.memo(HeaderFilterCellComp),HeaderGroupCellComp=({ctrl:e})=>{const{context:t}=reactExports.useContext(BeansContext),[n,o]=reactExports.useState(),[u,d]=reactExports.useState(()=>new CssClasses),[f,v]=reactExports.useState(()=>new CssClasses),[w,E]=reactExports.useState("false"),[C,_]=reactExports.useState(),[D,O]=reactExports.useState(),M=reactExports.useRef(),N=reactExports.useRef(null),I=reactExports.useRef(null),B=reactExports.useRef(null),V=reactExports.useRef(),j=reactExports.useCallback(ae=>{if(N.current=ae,!ae||!e.isAlive()||t.isDestroyed()){M.current=t.destroyBean(M.current);return}M.current=t.createBean(new EmptyBean);const pe={setWidth:he=>{N.current&&(N.current.style.width=he)},toggleCss:(he,be)=>d(xe=>xe.setClass(he,be)),setUserStyles:he=>o(he),setHeaderWrapperHidden:he=>{const be=B.current;be&&(he?be.style.setProperty("display","none"):be.style.removeProperty("display"))},setHeaderWrapperMaxHeight:he=>{const be=B.current;be&&(he!=null?be.style.setProperty("max-height",`${he}px`):be.style.removeProperty("max-height"),be.classList.toggle("ag-header-cell-comp-wrapper-limited-height",he!=null))},setUserCompDetails:he=>O(he),setResizableDisplayed:he=>{v(be=>be.setClass("ag-hidden",!he)),E(he?"false":"true")},setAriaExpanded:he=>_(he),getUserCompInstance:()=>V.current||void 0};e.setComp(pe,ae,I.current,B.current,M.current)},[]);reactExports.useLayoutEffect(()=>showJsComp(D,t,B.current),[D]),reactExports.useEffect(()=>{N.current&&e.setDragSource(N.current)},[D]);const q=reactExports.useMemo(()=>!!(D?.componentFromFramework&&isComponentStateless(D.componentClass)),[D]),z=reactExports.useMemo(()=>"ag-header-group-cell "+u.toString(),[u]),$=reactExports.useMemo(()=>"ag-header-cell-resize "+f.toString(),[f]),ee=D?.componentFromFramework,ie=D?.componentClass;return React.createElement("div",{ref:j,style:n,className:z,role:"columnheader","aria-expanded":C},React.createElement("div",{ref:B,className:"ag-header-cell-comp-wrapper",role:"presentation"},ee?q?React.createElement(ie,{...D.params}):React.createElement(ie,{...D.params,ref:V}):null),React.createElement("div",{ref:I,"aria-hidden":w,className:$}))},headerGroupCellComp_default=reactExports.memo(HeaderGroupCellComp),HeaderRowComp=({ctrl:e})=>{const{gos:t,context:n}=reactExports.useContext(BeansContext),{topOffset:o,rowHeight:u}=reactExports.useMemo(()=>e.getTopAndHeight(),[]),d=reactExports.useMemo(()=>t.get("tabIndex"),[]),[f,v]=reactExports.useState(()=>e.getAriaRowIndex()),w=e.headerRowClass,[E,C]=reactExports.useState(()=>u+"px"),[_,D]=reactExports.useState(()=>o+"px"),O=reactExports.useRef(null),[M,N]=reactExports.useState(()=>e.getUpdatedHeaderCtrls()),I=reactExports.useRef(),B=reactExports.useRef(null),V=reactExports.useCallback(z=>{if(B.current=z,!z||!e.isAlive()||n.isDestroyed()){I.current=n.destroyBean(I.current);return}I.current=n.createBean(new EmptyBean);const $={setHeight:ee=>C(ee),setTop:ee=>D(ee),setHeaderCtrls:(ee,ie,ae)=>{const pe=O.current,he=getNextValueIfDifferent(pe,ee,ie);he!==pe&&(O.current=he,agFlushSync(ae,()=>N(he)))},setWidth:ee=>{B.current&&(B.current.style.width=ee)},setRowIndex:ee=>{v(ee)}};e.setComp($,I.current,!1)},[]),j=reactExports.useMemo(()=>({height:E,top:_}),[E,_]),q=reactExports.useCallback(z=>{switch(e.type){case"group":return React.createElement(headerGroupCellComp_default,{ctrl:z,key:z.instanceId});case"filter":return React.createElement(headerFilterCellComp_default,{ctrl:z,key:z.instanceId});default:return React.createElement(headerCellComp_default,{ctrl:z,key:z.instanceId})}},[]);return React.createElement("div",{ref:V,className:w,role:"row",style:j,tabIndex:d,"aria-rowindex":f},M.map(q))},headerRowComp_default=reactExports.memo(HeaderRowComp),HeaderRowContainerComp=({pinned:e})=>{const[t,n]=reactExports.useState(!0),[o,u]=reactExports.useState([]),{context:d}=reactExports.useContext(BeansContext),f=reactExports.useRef(null),v=reactExports.useRef(null),w=reactExports.useRef(),E=e==="left",C=e==="right",_=!E&&!C,D=reactExports.useCallback(N=>{if(f.current=N,!N||d.isDestroyed()){w.current=d.destroyBean(w.current);return}w.current=d.createBean(new HeaderRowContainerCtrl(e));const I={setDisplayed:n,setCtrls:B=>u(B),setCenterWidth:B=>{v.current&&(v.current.style.width=B)},setViewportScrollLeft:B=>{f.current&&(f.current.scrollLeft=B)},setPinnedContainerWidth:B=>{f.current&&(f.current.style.width=B,f.current.style.minWidth=B,f.current.style.maxWidth=B)}};w.current.setComp(I,f.current)},[]),O=t?"":"ag-hidden",M=()=>o.map(N=>React.createElement(headerRowComp_default,{ctrl:N,key:N.instanceId}));return E?React.createElement("div",{ref:D,className:"ag-pinned-left-header "+O,"aria-hidden":!t,role:"rowgroup"},M()):C?React.createElement("div",{ref:D,className:"ag-pinned-right-header "+O,"aria-hidden":!t,role:"rowgroup"},M()):_?React.createElement("div",{ref:D,className:"ag-header-viewport "+O,role:"rowgroup",tabIndex:-1},React.createElement("div",{ref:v,className:"ag-header-container",role:"presentation"},M())):null},headerRowContainerComp_default=reactExports.memo(HeaderRowContainerComp),GridHeaderComp=()=>{const[e,t]=reactExports.useState(()=>new CssClasses),[n,o]=reactExports.useState(),{context:u}=reactExports.useContext(BeansContext),d=reactExports.useRef(null),f=reactExports.useRef(),v=reactExports.useCallback(C=>{if(d.current=C,!C||u.isDestroyed()){f.current=u.destroyBean(f.current);return}f.current=u.createBean(new GridHeaderCtrl);const _={toggleCss:(D,O)=>t(M=>M.setClass(D,O)),setHeightAndMinHeight:D=>o(D)};f.current.setComp(_,C,C)},[]),w=reactExports.useMemo(()=>"ag-header "+e.toString(),[e]),E=reactExports.useMemo(()=>({height:n,minHeight:n}),[n]);return React.createElement("div",{ref:v,className:w,style:E,role:"presentation"},React.createElement(headerRowContainerComp_default,{pinned:"left"}),React.createElement(headerRowContainerComp_default,{pinned:null}),React.createElement(headerRowContainerComp_default,{pinned:"right"}))},gridHeaderComp_default=reactExports.memo(GridHeaderComp),useReactCommentEffect=(e,t)=>{reactExports.useEffect(()=>{const n=t.current;if(n){const o=n.parentElement;if(o){const u=document.createComment(e);return o.insertBefore(u,n),()=>{u.remove()}}}},[e])},reactComment_default=useReactCommentEffect,CellEditorComponentProxy=class{constructor(e,t){this.cellEditorParams=e,this.refreshProps=t,this.instanceCreated=new AgPromise(n=>{this.resolveInstanceCreated=n}),this.onValueChange=n=>this.updateValue(n),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){addOptionalMethods(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){this.componentInstance=e,this.resolveInstanceCreated?.(),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached","getValidationErrors","getValidationElement"]}updateValue(e){this.value=e,this.refreshProps()}},useEffectOnce=e=>{const t=reactExports.useRef(e),n=reactExports.useRef(),o=reactExports.useRef(!1),u=reactExports.useRef(!1),[,d]=reactExports.useState(0);o.current&&(u.current=!0),reactExports.useEffect(()=>(o.current||(n.current=t.current(),o.current=!0),d(f=>f+1),()=>{u.current&&n.current?.()}),[])},PopupEditorComp=e=>{const[t,n]=reactExports.useState(),o=reactExports.useContext(BeansContext),{context:u,popupSvc:d,gos:f,editSvc:v}=o,{editDetails:w,cellCtrl:E,eParentCell:C}=e;return useEffectOnce(()=>{const{compDetails:_}=w,D=f.get("stopEditingWhenCellsLoseFocus");let O,M;if(!u.isDestroyed()){M=u.createBean(v.createPopupEditorWrapper(_.params));const N=M.getGui();if(e.jsChildComp){const z=e.jsChildComp.getGui();z&&N.appendChild(z)}const{column:I,rowNode:B}=E,V={column:I,rowNode:B,type:"popupCellEditor",eventSource:C,ePopup:N,position:w.popupPosition,keepWithinBounds:!0},j=d?.positionPopupByComponent.bind(d,V),q=d?.addPopup({modal:D,eChild:N,closeOnEsc:!0,closedCallback:()=>{E.onPopupEditorClosed()},anchorToElement:C,positionCallback:j,ariaOwns:C});O=q?q.hideFunc:void 0,n(M),e.jsChildComp?.afterGuiAttached?.()}return()=>{O?.(),u.destroyBean(M)}}),reactExports.useLayoutEffect(()=>()=>{E.isCellFocused()&&t?.getGui().contains(_getActiveDomElement(o))&&C.focus({preventScroll:!0})},[t]),t&&e.wrappedContent?reactDomExports.createPortal(e.wrappedContent,t.getGui()):null},popupEditorComp_default=reactExports.memo(PopupEditorComp),jsxEditorProxy=(e,t,n)=>{const{compProxy:o}=e;n(o);const u=o.getProps(),d=isComponentStateless(t);return React.createElement(CustomContext.Provider,{value:{setMethods:f=>o.setMethods(f)}},d?React.createElement(t,{...u}):React.createElement(t,{...u,ref:f=>o.setRef(f)}))},jsxEditor=(e,t,n)=>e.compProxy?jsxEditorProxy(e,t,n):React.createElement(t,{...e.compDetails.params,ref:n}),jsxEditValue=(e,t,n,o,u)=>{const d=e.compDetails,f=d.componentClass,v=d.componentFromFramework&&!e.popup,w=d.componentFromFramework&&e.popup,E=!d.componentFromFramework&&e.popup;return v?jsxEditor(e,f,t):w?React.createElement(popupEditorComp_default,{editDetails:e,cellCtrl:o,eParentCell:n,wrappedContent:jsxEditor(e,f,t)}):E&&u?React.createElement(popupEditorComp_default,{editDetails:e,cellCtrl:o,eParentCell:n,jsChildComp:u}):null},useJsCellRenderer=(e,t,n,o,u,d,f=!1)=>{const{context:v}=reactExports.useContext(BeansContext),w=reactExports.useCallback(()=>{const E=u.current;if(!E)return;const C=E.getGui();C&&C.parentElement&&C.remove(),v.destroyBean(E),u.current=void 0},[]);reactExports.useEffect(()=>{const E=e!=null&&!f,C=e?.compDetails&&!e.compDetails.componentFromFramework,_=t&&n==null;if(!(E&&C&&!_)){w();return}const O=e.compDetails;if(u.current){const N=u.current,B=N.refresh!=null&&e.force==!1?N.refresh(O.params):!1;if(B===!0||B===void 0)return;w()}O.newAgStackInstance().then(N=>{if(!N)return;const I=N.getGui();if(!I)return;(t?n:d.current).appendChild(I),u.current=N})},[e,t,o,f]),reactExports.useEffect(()=>w,[])},showJsRenderer_default=useJsCellRenderer,SkeletonCellRenderer=({cellCtrl:e,parent:t})=>{const n=reactExports.useRef(),o=reactExports.useMemo(()=>{const{loadingComp:u}=e.getDeferLoadingCellRenderer();return u?{value:void 0,compDetails:u,force:!1}:void 0},[e]);if(showJsRenderer_default(o,!1,void 0,1,n,t),o?.compDetails?.componentFromFramework){const u=o.compDetails.componentClass;return React.createElement(u,{...o.compDetails.params})}return React.createElement(React.Fragment,null)},CellComp=({cellCtrl:e,printLayout:t,editingCell:n})=>{const o=reactExports.useContext(BeansContext),{context:u}=o,{column:{colIdSanitised:d},instanceId:f}=e,v=reactExports.useRef(),[w,E]=reactExports.useState(()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1}),[C,_]=reactExports.useState(),[D,O]=reactExports.useState(1),[M,N]=reactExports.useState(),[I,B]=reactExports.useState(!1),[V,j]=reactExports.useState(!1),[q,z]=reactExports.useState(!1),[$,ee]=reactExports.useState(),ie=reactExports.useMemo(()=>e.isForceWrapper(),[e]),ae=reactExports.useMemo(()=>e.getCellAriaRole(),[e]),pe=reactExports.useRef(null),he=reactExports.useRef(null),be=reactExports.useRef(null),xe=reactExports.useRef(),Ee=reactExports.useRef(),we=reactExports.useRef(),oe=reactExports.useRef([]),se=reactExports.useRef(),J=reactExports.useRef(),[Q,Z]=reactExports.useState(0),K=reactExports.useCallback(De=>{J.current=De,Z(Be=>Be+1)},[]),ne=w!=null&&(I||q||V)&&(C==null||!!C.popup),ue=ie||ne,ye=reactExports.useMemo(()=>e.getCellValueClass(),[e]),fe=reactExports.useCallback(De=>{if(Ee.current=De,De){const Be=De.isCancelBeforeStart&&De.isCancelBeforeStart();setTimeout(()=>{Be?(e.stopEditing(!0),e.focusCell(!0)):(e.cellEditorAttached(),e.enableEditorTooltipFeature(De))})}},[e]),X=reactExports.useRef();X.current||(X.current=new CssClassManager(()=>pe.current));const le=!!C&&!C.popup;showJsRenderer_default(w,ue,J.current,Q,xe,pe,le);const de=reactExports.useRef();reactExports.useLayoutEffect(()=>{const De=de.current,Be=w;if(de.current=w,De==null||De.compDetails==null||Be==null||Be.compDetails==null)return;se.current?.refreshVisibility();const $e=De.compDetails,Qe=Be.compDetails;if($e.componentClass!=Qe.componentClass||be.current?.refresh==null)return;be.current.refresh(Qe.params)!=!0&&O(nt=>nt+1)},[w]),reactExports.useLayoutEffect(()=>{if(!(C&&!C.compDetails.componentFromFramework)||u.isDestroyed())return;const Be=C.compDetails,$e=C.popup===!0,Qe=Be.newAgStackInstance();return Qe.then(Ye=>{if(!Ye)return;const nt=Ye.getGui();fe(Ye),$e||((ie?we:pe).current?.appendChild(nt),Ye.afterGuiAttached?.()),ee(Ye)}),()=>{Qe.then(Ye=>{const nt=Ye.getGui();e.disableEditorTooltipFeature(),u.destroyBean(Ye),fe(void 0),ee(void 0),nt?.remove()})}},[C]);const ce=reactExports.useCallback(De=>{if(we.current=De,!De||u.isDestroyed()||!e.isAlive()){const Qe=oe.current;oe.current=[];for(const Ye of Qe)Ye();return}let Be;const $e=Qe=>{Qe&&(De.insertAdjacentElement("afterbegin",Qe.getGui()),oe.current.push(()=>{_removeFromParent(Qe.getGui()),u.destroyBean(Qe),se.current===Be&&(se.current=void 0)}))};I&&$e(e.createSelectionCheckbox()),q&&$e(e.createDndSource()),V&&(Be=e.createRowDragComp(),se.current=Be,Be&&($e(Be),Be.refreshVisibility()))},[e,u,q,V,I]),me=reactExports.useCallback(()=>{const De=!e.isCellSpanning()||he.current,Be=pe.current;if(!Be||!De||!e||!e.isAlive()||u.isDestroyed()){v.current=u.destroyBean(v.current);return}v.current=u.createBean(new EmptyBean);const $e={toggleCss:(Ye,nt)=>X.current.toggleCss(Ye,nt),setUserStyles:Ye=>N(Ye),getFocusableElement:()=>pe.current,setIncludeSelection:Ye=>B(Ye),setIncludeRowDrag:Ye=>j(Ye),setIncludeDndSource:Ye=>z(Ye),getCellEditor:()=>Ee.current??null,getCellRenderer:()=>be.current??xe.current,getParentOfValue:()=>J.current??we.current??pe.current,setRenderDetails:(Ye,nt,rt)=>{const at=()=>{E(vt=>vt?.compDetails!==Ye||vt?.value!==nt||vt?.force!==rt?{value:nt,compDetails:Ye,force:rt}:vt)};if(Ye?.params?.deferRender&&!e.rowNode.group){const{loadingComp:vt,onReady:nn}=e.getDeferLoadingCellRenderer();if(vt){E({value:void 0,compDetails:vt,force:!1}),nn.then(()=>agStartTransition(at));return}}at()},setEditDetails:(Ye,nt,rt,at)=>{if(Ye){let vt;Ye.componentFromFramework&&(at?vt=new CellEditorComponentProxy(Ye.params,()=>O(nn=>nn+1)):warnReactiveCustomComponents()),_({compDetails:Ye,popup:nt,popupPosition:rt,compProxy:vt}),nt||E(void 0)}else e.hasBrowserFocus()&&$e.getFocusableElement().focus({preventScroll:!0}),Ee.current=void 0,_(void 0)},refreshEditStyles:(Ye,nt)=>{if(!pe.current)return;const{current:rt}=X;rt.toggleCss("ag-cell-value",!ue),rt.toggleCss("ag-cell-inline-editing",!!Ye&&!nt),rt.toggleCss("ag-cell-popup-editing",!!Ye&&!!nt),rt.toggleCss("ag-cell-not-inline-editing",!Ye||!!nt)}},Qe=we.current||void 0;e.setComp($e,Be,he.current??void 0,Qe,t,n,v.current)},[]),Se=reactExports.useCallback(De=>{pe.current=De,me()},[]),Ce=reactExports.useCallback(De=>{he.current=De,me()},[]),Te=reactExports.useMemo(()=>!!(w?.compDetails?.componentFromFramework&&isComponentStateless(w.compDetails.componentClass)),[w]);reactExports.useLayoutEffect(()=>{if(!pe.current)return;const{current:De}=X;De.toggleCss("ag-cell-value",!ue),De.toggleCss("ag-cell-inline-editing",!!C&&!C.popup),De.toggleCss("ag-cell-popup-editing",!!C&&!!C.popup),De.toggleCss("ag-cell-not-inline-editing",!C||!!C.popup)});const je=()=>{const{compDetails:De,value:Be}=w;if(!De)return Be?.toString?.()??Be;if(De.componentFromFramework){const $e=De.componentClass;return React.createElement(reactExports.Suspense,{fallback:React.createElement(SkeletonCellRenderer,{cellCtrl:e,parent:pe})},Te?React.createElement($e,{...De.params,key:D}):React.createElement($e,{...De.params,key:D,ref:be}))}},Oe=()=>{const De=()=>w==null?null:ue?React.createElement("span",{role:"presentation",id:`cell-${f}`,className:ye,ref:K},je()):je(),Be=$e=>jsxEditValue($e,fe,pe.current,e,$);return C!=null?C.popup?React.createElement(React.Fragment,null,De(),Be(C)):Be(C):De()},Ne=()=>React.createElement("div",{ref:Se,style:M,role:ae,"col-id":d},ue?React.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:ce},Oe()):Oe());return e.isCellSpanning()?React.createElement("div",{ref:Ce,className:"ag-spanned-cell-wrapper",role:"presentation"},Ne()):Ne()},cellComp_default=reactExports.memo(CellComp),RowComp=({rowCtrl:e,containerType:t})=>{const{context:n,gos:o,editSvc:u}=reactExports.useContext(BeansContext),d=reactExports.useContext(RenderModeContext)==="default",f=reactExports.useRef(),v=reactExports.useRef(e.getDomOrder()),w=e.isFullWidth(),E=e.rowNode.displayed,[C,_]=reactExports.useState(()=>E?e.rowNode.getRowIndexString():null),[D,O]=reactExports.useState(()=>e.rowId),[M,N]=reactExports.useState(()=>e.businessKey),[I,B]=reactExports.useState(()=>e.rowStyles),V=reactExports.useRef(null),[j,q]=reactExports.useState(()=>null),[z,$]=reactExports.useState(),[ee,ie]=reactExports.useState(()=>E?e.getInitialRowTop(t):void 0),[ae,pe]=reactExports.useState(()=>E?e.getInitialTransform(t):void 0),he=reactExports.useRef(null),be=reactExports.useRef(),xe=reactExports.useRef(),Ee=reactExports.useRef(!1),[we,oe]=reactExports.useState(0);reactExports.useEffect(()=>{if(Ee.current||!z||we>10)return;const me=he.current?.firstChild;me?(e.setupDetailRowAutoHeight(me),Ee.current=!0):oe(Se=>Se+1)},[z,we]);const se=reactExports.useRef();se.current||(se.current=new CssClassManager(()=>he.current));const J=reactExports.useRef(()=>{}),Q=reactExports.useCallback(me=>(J.current=me,()=>{J.current=()=>{}}),[]),Z=agUseSyncExternalStore(Q,()=>V.current,[]),K=d?Z:j,ne=reactExports.useCallback(me=>{if(he.current=me,f.current=me?n.createBean(new EmptyBean):n.destroyBean(f.current),!me){e.unsetComp(t);return}if(!e.isAlive()||n.isDestroyed())return;const Se={setTop:ie,setTransform:pe,toggleCss:(Ce,Te)=>se.current.toggleCss(Ce,Te),setDomOrder:Ce=>v.current=Ce,setRowIndex:_,setRowId:O,setRowBusinessKey:N,setUserStyles:B,setCellCtrls:(Ce,Te)=>{const je=V.current,Oe=getNextValueIfDifferent(je,Ce,v.current);Oe!==je&&(V.current=Oe,d?J.current():agFlushSync(Te,()=>q(Oe)))},showFullWidth:Ce=>{xe.current=Ce.params,$(Ce)},getFullWidthCellRenderer:()=>be.current,getFullWidthCellRendererParams:()=>xe.current,refreshFullWidth:Ce=>{const Te=Ce();return xe.current=Te,le.current?($(je=>({...je,params:Te})),!0):!be.current||!be.current.refresh?!1:be.current.refresh(Te)}};e.setComp(Se,me,t,f.current)},[]);reactExports.useLayoutEffect(()=>showJsComp(z,n,he.current,be),[z]);const ue=reactExports.useMemo(()=>{const me={top:ee,transform:ae};return Object.assign(me,I),me},[ee,ae,I]),ye=w&&z?.componentFromFramework,fe=!w&&K!=null,X=reactExports.useMemo(()=>!!(z?.componentFromFramework&&isComponentStateless(z.componentClass)),[z]),le=reactExports.useRef(!1);reactExports.useEffect(()=>{le.current=X&&!!z&&!!o.get("reactiveCustomComponents")},[X,z]);const de=()=>K?.map(me=>React.createElement(cellComp_default,{cellCtrl:me,editingCell:u?.isEditing(me,{withOpenEditor:!0})??!1,printLayout:e.printLayout,key:me.instanceId})),ce=()=>{const me=z.componentClass;return X?React.createElement(me,{...z.params}):React.createElement(me,{...z.params,ref:be})};return React.createElement("div",{ref:ne,role:"row",style:ue,"row-index":C,"row-id":D,"row-business-key":M},fe?de():ye?ce():null)},rowComp_default=reactExports.memo(RowComp),RowContainerComp=({name:e})=>{const{context:t,gos:n}=reactExports.useContext(BeansContext),o=reactExports.useMemo(()=>_getRowContainerOptions(e),[e]),u=reactExports.useRef(null),d=reactExports.useRef(null),f=reactExports.useRef(null),v=reactExports.useRef([]),w=reactExports.useRef([]),[E,C]=reactExports.useState(()=>[]),_=!!n.get("enableCellSpan")&&!!o.getSpannedRowCtrls,D=reactExports.useRef([]),O=reactExports.useRef([]),[M,N]=reactExports.useState(()=>[]),I=reactExports.useRef(!1),B=reactExports.useRef(),V=reactExports.useMemo(()=>classesList("ag-viewport",_getRowViewportClass(e)),[e]),j=reactExports.useMemo(()=>classesList(_getRowContainerClass(e)),[e]),q=reactExports.useMemo(()=>classesList("ag-spanning-container",_getRowSpanContainerClass(e)),[e]),z=o.type==="center"||_,$=z?u:d;reactComment_default(" AG Row Container "+e+" ",$);const ee=reactExports.useCallback(()=>{const we=!z||u.current!=null,oe=d.current!=null,se=!_||f.current!=null;return we&&oe&&se},[]),ie=reactExports.useCallback(()=>u.current==null&&d.current==null&&f.current==null,[]),ae=reactExports.useCallback(()=>{if(ie()&&(B.current=t.destroyBean(B.current)),!t.isDestroyed()&&ee()){const we=J=>{const Q=getNextValueIfDifferent(w.current,v.current,I.current);Q!==w.current&&(w.current=Q,agFlushSync(J,()=>C(Q)))},oe=J=>{const Q=getNextValueIfDifferent(O.current,D.current,I.current);Q!==O.current&&(O.current=Q,agFlushSync(J,()=>N(Q)))},se={setHorizontalScroll:J=>{u.current&&(u.current.scrollLeft=J)},setViewportHeight:J=>{u.current&&(u.current.style.height=J)},setRowCtrls:({rowCtrls:J,useFlushSync:Q})=>{const Z=!!Q&&v.current.length>0&&J.length>0;v.current=J,we(Z)},setSpannedRowCtrls:(J,Q)=>{const Z=!!Q&&D.current.length>0&&J.length>0;D.current=J,oe(Z)},setDomOrder:J=>{I.current!=J&&(I.current=J,we(!1))},setContainerWidth:J=>{d.current&&(d.current.style.width=J)},setOffsetTop:J=>{d.current&&(d.current.style.transform=`translateY(${J})`)}};B.current=t.createBean(new RowContainerCtrl(e)),B.current.setComp(se,d.current,f.current??void 0,u.current)}},[ee,ie]),pe=reactExports.useCallback(we=>{d.current=we,ae()},[ae]),he=reactExports.useCallback(we=>{f.current=we,ae()},[ae]),be=reactExports.useCallback(we=>{u.current=we,ae()},[ae]),xe=()=>React.createElement("div",{className:j,ref:pe,role:z?"presentation":"rowgroup"},E.map(we=>React.createElement(rowComp_default,{rowCtrl:we,containerType:o.type,key:we.instanceId})));if(!z)return xe();const Ee=()=>React.createElement("div",{className:q,ref:he,role:"presentation"},M.map(we=>React.createElement(rowComp_default,{rowCtrl:we,containerType:o.type,key:we.instanceId})));return React.createElement("div",{className:V,ref:be,role:"rowgroup"},xe(),_?Ee():null)},rowContainerComp_default=reactExports.memo(RowContainerComp),GridBodyComp=()=>{const e=reactExports.useContext(BeansContext),{context:t,overlays:n}=e,[o,u]=reactExports.useState(""),[d,f]=reactExports.useState(0),[v,w]=reactExports.useState(0),[E,C]=reactExports.useState("0px"),[_,D]=reactExports.useState("0px"),[O,M]=reactExports.useState("100%"),[N,I]=reactExports.useState("0px"),[B,V]=reactExports.useState("0px"),[j,q]=reactExports.useState("100%"),[z,$]=reactExports.useState(!0),[ee,ie]=reactExports.useState(!0),[ae,pe]=reactExports.useState(null),[he,be]=reactExports.useState(""),[xe,Ee]=reactExports.useState(null),[we,oe]=reactExports.useState("ag-layout-normal"),se=reactExports.useRef();se.current||(se.current=new CssClassManager(()=>J.current));const J=reactExports.useRef(null),Q=reactExports.useRef(null),Z=reactExports.useRef(null),K=reactExports.useRef(null),ne=reactExports.useRef(null),ue=reactExports.useRef(null),ye=reactExports.useRef(null),fe=reactExports.useRef([]),X=reactExports.useRef([]);reactComment_default(" AG Grid Body ",J),reactComment_default(" AG Pinned Top ",Q),reactComment_default(" AG Sticky Top ",Z),reactComment_default(" AG Middle ",ue),reactComment_default(" AG Pinned Bottom ",ye);const le=reactExports.useCallback(Ye=>{if(J.current=Ye,!Ye||t.isDestroyed()){fe.current=t.destroyBeans(fe.current);for(const Dt of X.current)Dt();X.current=[];return}const nt=(Dt,wt)=>{Dt.appendChild(wt),X.current.push(()=>wt.remove())},rt=Dt=>{const wt=t.createBean(new Dt);return fe.current.push(wt),wt},at=(Dt,wt,Bn)=>{nt(Dt,document.createComment(Bn)),nt(Dt,rt(wt).getGui())};at(Ye,FakeHScrollComp," AG Fake Horizontal Scroll ");const vt=n?.getOverlayWrapperCompClass();vt&&at(Ye,vt," AG Overlay Wrapper "),ne.current&&at(ne.current,FakeVScrollComp," AG Fake Vertical Scroll ");const nn={setRowAnimationCssOnBodyViewport:u,setColumnCount:Dt=>{J.current&&_setAriaColCount(J.current,Dt)},setRowCount:Dt=>{J.current&&_setAriaRowCount(J.current,Dt)},setTopHeight:f,setBottomHeight:w,setStickyTopHeight:C,setStickyTopTop:D,setStickyTopWidth:M,setTopInvisible:$,setBottomInvisible:ie,setColumnMovingCss:(Dt,wt)=>se.current.toggleCss(Dt,wt),updateLayoutClasses:oe,setAlwaysVerticalScrollClass:pe,setPinnedTopBottomOverflowY:be,setCellSelectableCss:(Dt,wt)=>Ee(wt?Dt:null),setBodyViewportWidth:Dt=>{ue.current&&(ue.current.style.width=Dt)},registerBodyViewportResizeListener:Dt=>{if(ue.current){const wt=_observeResize(e,ue.current,Dt);X.current.push(()=>wt())}},setStickyBottomHeight:I,setStickyBottomBottom:V,setStickyBottomWidth:q,setGridRootRole:Dt=>Ye.setAttribute("role",Dt)},en=t.createBean(new GridBodyCtrl);fe.current.push(en),en.setComp(nn,Ye,ue.current,Q.current,ye.current,Z.current,K.current)},[]),de=reactExports.useMemo(()=>classesList("ag-root","ag-unselectable",we),[we]),ce=reactExports.useMemo(()=>classesList("ag-body-viewport",o,we,ae,xe),[o,we,ae,xe]),me=reactExports.useMemo(()=>classesList("ag-body",we),[we]),Se=reactExports.useMemo(()=>classesList("ag-floating-top",z?"ag-invisible":null,xe),[xe,z]),Ce=reactExports.useMemo(()=>classesList("ag-sticky-top",xe),[xe]),Te=reactExports.useMemo(()=>classesList("ag-sticky-bottom",N==="0px"?"ag-invisible":null,xe),[xe,N]),je=reactExports.useMemo(()=>classesList("ag-floating-bottom",ee?"ag-invisible":null,xe),[xe,ee]),Oe=reactExports.useMemo(()=>({height:d,minHeight:d,overflowY:he}),[d,he]),Ne=reactExports.useMemo(()=>({height:E,top:_,width:O}),[E,_,O]),De=reactExports.useMemo(()=>({height:N,bottom:B,width:j}),[N,B,j]),Be=reactExports.useMemo(()=>({height:v,minHeight:v,overflowY:he}),[v,he]),$e=Ye=>React.createElement(rowContainerComp_default,{name:Ye,key:`${Ye}-container`}),Qe=({section:Ye,children:nt,className:rt,style:at})=>React.createElement("div",{ref:Ye,className:rt,role:"presentation",style:at},nt.map($e));return React.createElement("div",{ref:le,className:de},React.createElement(gridHeaderComp_default,null),Qe({section:Q,className:Se,style:Oe,children:["topLeft","topCenter","topRight","topFullWidth"]}),React.createElement("div",{className:me,ref:ne,role:"presentation"},Qe({section:ue,className:ce,children:["left","center","right","fullWidth"]})),Qe({section:Z,className:Ce,style:Ne,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),Qe({section:K,className:Te,style:De,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),Qe({section:ye,className:je,style:Be,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},gridBodyComp_default=reactExports.memo(GridBodyComp),TabGuardCompRef=(e,t)=>{const{children:n,eFocusableElement:o,onTabKeyDown:u,gridCtrl:d,forceFocusOutWhenTabGuardsAreEmpty:f,isEmpty:v}=e,{context:w}=reactExports.useContext(BeansContext),E=reactExports.useRef(null),C=reactExports.useRef(null),_=reactExports.useRef(),D=B=>{const V=B==null?void 0:parseInt(B,10).toString();for(const j of[E,C])V===void 0?j.current?.removeAttribute("tabindex"):j.current?.setAttribute("tabindex",V)};reactExports.useImperativeHandle(t,()=>({forceFocusOutOfContainer(B){_.current?.forceFocusOutOfContainer(B)}}));const O=reactExports.useCallback(()=>{const B=E.current,V=C.current;if(!B&&!V||w.isDestroyed()){_.current=w.destroyBean(_.current);return}if(B&&V){const j={setTabIndex:D};_.current=w.createBean(new TabGuardCtrl({comp:j,eTopGuard:B,eBottomGuard:V,eFocusableElement:o,onTabKeyDown:u,forceFocusOutWhenTabGuardsAreEmpty:f,focusInnerElement:q=>d.focusInnerElement(q),isEmpty:v}))}},[]),M=reactExports.useCallback(B=>{E.current=B,O()},[O]),N=reactExports.useCallback(B=>{C.current=B,O()},[O]),I=B=>{const V=B==="top"?TabGuardClassNames.TAB_GUARD_TOP:TabGuardClassNames.TAB_GUARD_BOTTOM;return React.createElement("div",{className:`${TabGuardClassNames.TAB_GUARD} ${V}`,role:"presentation",ref:B==="top"?M:N})};return React.createElement(React.Fragment,null,I("top"),n,I("bottom"))},TabGuardComp=reactExports.forwardRef(TabGuardCompRef),tabGuardComp_default=reactExports.memo(TabGuardComp),GridComp=({context:e})=>{const[t,n]=reactExports.useState(""),[o,u]=reactExports.useState(""),[d,f]=reactExports.useState(null),[v,w]=reactExports.useState(null),[E,C]=reactExports.useState(!1),[_,D]=reactExports.useState(),O=reactExports.useRef(),M=reactExports.useRef(null),N=reactExports.useRef(),[I,B]=reactExports.useState(null),V=reactExports.useRef(()=>{}),j=reactExports.useRef(),q=reactExports.useRef([]),z=reactExports.useCallback(()=>{},[]);reactComment_default(" AG Grid ",M);const $=reactExports.useCallback(be=>{if(M.current=be,O.current=be?e.createBean(new GridCtrl):e.destroyBean(O.current),!be||e.isDestroyed())return;const xe=O.current;V.current=xe.focusInnerElement.bind(xe);const Ee={destroyGridUi:()=>{},setRtlClass:n,forceFocusOutOfContainer:we=>{if(!we&&j.current?.isDisplayed()){j.current.forceFocusOutOfContainer(we);return}N.current?.forceFocusOutOfContainer(we)},updateLayoutClasses:u,getFocusableContainers:()=>{const we=[],oe=M.current?.querySelector(".ag-root");oe&&we.push({getGui:()=>oe});for(const se of q.current)se.isDisplayed()&&we.push(se);return we},setCursor:f,setUserSelect:w};xe.setComp(Ee,be,be),C(!0)},[]);reactExports.useEffect(()=>{const be=O.current,xe=M.current;if(!_||!be||!I||!xe||e.isDestroyed())return;const Ee=[],{watermarkSelector:we,paginationSelector:oe,sideBarSelector:se,statusBarSelector:J,gridHeaderDropZonesSelector:Q}=be.getOptionalSelectors(),Z=[];if(Q){const ne=e.createBean(new Q.component),ue=ne.getGui();xe.insertAdjacentElement("afterbegin",ue),Z.push(ue),Ee.push(ne)}if(se){const ne=e.createBean(new se.component),ue=ne.getGui(),ye=I.querySelector(".ag-tab-guard-bottom");ye&&(ye.insertAdjacentElement("beforebegin",ue),Z.push(ue)),Ee.push(ne),q.current.push(ne)}const K=ne=>{const ue=e.createBean(new ne),ye=ue.getGui();return xe.insertAdjacentElement("beforeend",ye),Z.push(ye),Ee.push(ue),ue};if(J&&K(J.component),oe){const ne=K(oe.component);j.current=ne,q.current.push(ne)}return we&&K(we.component),()=>{e.destroyBeans(Ee);for(const ne of Z)ne.remove()}},[_,I,e]);const ee=reactExports.useMemo(()=>classesList("ag-root-wrapper",t,o),[t,o]),ie=reactExports.useMemo(()=>classesList("ag-root-wrapper-body","ag-focus-managed",o),[o]),ae=reactExports.useMemo(()=>({userSelect:v??"",WebkitUserSelect:v??"",cursor:d??""}),[v,d]),pe=reactExports.useCallback(be=>{N.current=be,D(be!==null)},[]),he=reactExports.useCallback(()=>!O.current?.isFocusable(),[]);return React.createElement("div",{ref:$,className:ee,style:ae,role:"presentation"},React.createElement("div",{className:ie,ref:B,role:"presentation"},E&&I&&!e.isDestroyed()&&React.createElement(BeansContext.Provider,{value:e.getBeans()},React.createElement(tabGuardComp_default,{ref:pe,eFocusableElement:I,onTabKeyDown:z,gridCtrl:O.current,forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:he},React.createElement(gridBodyComp_default,null)))))},gridComp_default=reactExports.memo(GridComp),RenderStatusService=class extends BeanStub{postConstruct(){if(this.beans.colAutosize){const e=this.queueResizeOperationsForTick.bind(this);this.addManagedEventListeners({rowExpansionStateChanged:e,expandOrCollapseAll:e,cellValueChanged:e,rowNodeDataChanged:e,rowDataUpdated:e})}}queueResizeOperationsForTick(){const e=this.beans.colAutosize;e.shouldQueueResizeOperations=!0,setTimeout(()=>{e.processResizeOperations()},0)}areHeaderCellsRendered(){return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(t=>t.areCellsRendered()))}areCellsRendered(){return this.beans.rowRenderer.getAllRowCtrls().every(e=>e.isRowRendered()&&e.getAllCellCtrls().every(t=>!!t.eGui))}},useIsomorphicLayoutEffect=typeof window>"u"?reactExports.useEffect:reactExports.useLayoutEffect,deprecatedProps={setGridApi:void 0,maxComponentCreationTimeMs:void 0,children:void 0},reactPropsNotGridOptions={gridOptions:void 0,modules:void 0,containerStyle:void 0,className:void 0,passGridApi:void 0,componentWrappingElement:void 0,...deprecatedProps},excludeReactCompProps=new Set(Object.keys(reactPropsNotGridOptions)),deprecatedReactCompProps=new Set(Object.keys(deprecatedProps)),AgGridReactUi=e=>{const t=reactExports.useContext(ModulesContext),n=reactExports.useContext(LicenseContext),o=reactExports.useRef(),u=reactExports.useRef(null),d=reactExports.useRef(null),f=reactExports.useRef([]),v=reactExports.useRef([]),w=reactExports.useRef(e),E=reactExports.useRef(),C=reactExports.useRef(),_=reactExports.useRef(!1),[D,O]=reactExports.useState(void 0),[,M]=reactExports.useState(0),N=reactExports.useRef(),I=z=>{const $=u.current?.classList,ee=(ie="")=>ie.trim().split(/\s+/g).filter(Boolean);if(N.current!==z){for(const ie of ee(N.current))$?.contains(ie)&&$.remove(ie);for(const ie of ee(z))$?.contains(ie)||$?.add(ie);N.current=z}};useIsomorphicLayoutEffect(()=>{I(e.className)},[e.className]);const B=reactExports.useCallback(z=>{if(u.current=z,I(e.className),!z){for(const we of f.current)we();f.current.length=0;return}const $=[...e.modules??[],...t??[]];n&&_findEnterpriseCoreModule($)?.setLicenseKey(n),d.current||(d.current=new PortalManager(()=>M(we=>we+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),f.current.push(()=>{d.current?.destroy(),d.current=null}));const ee=_combineAttributesAndGridOptions(e.gridOptions,e,Object.keys(e).filter(we=>!excludeReactCompProps.has(we))),ie=()=>{if(_.current){const we=()=>E.current?.shouldQueueUpdates()?void 0:v.current.shift();let oe=we();for(;oe;)oe(),oe=we()}},ae=new ReactFrameworkOverrides(ie);E.current=ae;const pe=new RenderStatusService,he={providedBeanInstances:{frameworkCompWrapper:new ReactFrameworkComponentWrapper(d.current,ee),renderStatus:pe},modules:$,frameworkOverrides:ae,setThemeOnGridDiv:!0},be=we=>{O(we),we.createBean(pe),f.current.push(()=>{we.destroy()}),we.getBean("ctrlsSvc").whenReady({addDestroyFunc:oe=>{f.current.push(oe)}},()=>{if(we.isDestroyed())return;const oe=o.current;oe&&e.passGridApi?.(oe)})},xe=we=>{we.getBean("ctrlsSvc").whenReady({addDestroyFunc:oe=>{f.current.push(oe)}},()=>{for(const oe of v.current)oe();v.current.length=0,_.current=!0})},Ee=new GridCoreCreator;ee.gridId??(ee.gridId=C.current),o.current=Ee.create(z,ee,be,xe,he),f.current.push(()=>{o.current=void 0}),o.current&&(C.current=o.current.getGridId())},[]),V=reactExports.useMemo(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),j=reactExports.useCallback(z=>{_.current&&!E.current?.shouldQueueUpdates()?z():v.current.push(z)},[]);reactExports.useEffect(()=>{const z=extractGridPropertyChanges(w.current,e);w.current=e,j(()=>{o.current&&_processOnChange(z,o.current)})},[e]);const q=!React.useSyncExternalStore||_getGridOption(e,"renderingMode")==="legacy"?"legacy":"default";return React.createElement("div",{style:V,ref:B},React.createElement(RenderModeContext.Provider,{value:q},D&&!D.isDestroyed()?React.createElement(gridComp_default,{key:D.instanceId,context:D}):null,d.current?.getPortals()??null))};function extractGridPropertyChanges(e,t){const n={};for(const o of Object.keys(t)){if(excludeReactCompProps.has(o)){deprecatedReactCompProps.has(o)&&_warn(274,{prop:o});continue}const u=t[o];e[o]!==u&&(n[o]=u)}return n}var ReactFrameworkComponentWrapper=class extends BaseComponentWrapper{constructor(e,t){super(),this.parent=e,this.gridOptions=t}createWrapper(e,t){const n=this.gridOptions;if(_getGridOption(n,"reactiveCustomComponents")){const f=(v=>{switch(v){case"filter":return _getGridOption(n,"enableFilterHandlers")?FilterDisplayComponentWrapper:FilterComponentWrapper;case"floatingFilterComponent":return _getGridOption(n,"enableFilterHandlers")?FloatingFilterDisplayComponentWrapper:FloatingFilterComponentWrapper;case"dateComponent":return DateComponentWrapper;case"dragAndDropImageComponent":return DragAndDropImageComponentWrapper;case"loadingOverlayComponent":case"noRowsOverlayComponent":case"activeOverlay":return CustomOverlayComponentWrapper;case"statusPanel":return StatusPanelComponentWrapper;case"toolPanel":return ToolPanelComponentWrapper;case"menuItem":return MenuItemComponentWrapper;case"cellRenderer":return CellRendererComponentWrapper;case"innerHeaderComponent":return InnerHeaderComponentWrapper}})(t.name);if(f)return new f(e,this.parent,t)}else switch(t.name){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"activeOverlay":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":warnReactiveCustomComponents();break}const u=!t.cellRenderer&&t.name!=="toolPanel";return new ReactComponent(e,this.parent,t,u)}},DetailCellRenderer=reactExports.forwardRef((e,t)=>{const n=reactExports.useContext(BeansContext),{registry:o,context:u,gos:d,rowModel:f}=n,[v,w]=reactExports.useState(()=>new CssClasses),[E,C]=reactExports.useState(()=>new CssClasses),[_,D]=reactExports.useState(),[O,M]=reactExports.useState(),N=reactExports.useRef(),I=reactExports.useRef(null),B=reactExports.useRef(),V=reactExports.useMemo(()=>_getGridRegisteredModules(e.api.getGridId(),_?.rowModelType??"clientSide"),[e]),j=reactExports.useMemo(()=>v.toString()+" ag-details-row",[v]),q=reactExports.useMemo(()=>E.toString()+" ag-details-grid",[E]);t&&reactExports.useImperativeHandle(t,()=>({refresh(){return N.current?.refresh()??!1}})),e.template&&_warn(230);const z=reactExports.useCallback(ee=>{if(I.current=ee,!ee||u.isDestroyed()){N.current=u.destroyBean(N.current),B.current?.();return}const ie={toggleCss:(pe,he)=>w(be=>be.setClass(pe,he)),toggleDetailGridCss:(pe,he)=>C(be=>be.setClass(pe,he)),setDetailGrid:pe=>D(pe),setRowData:pe=>M(pe),getGui:()=>I.current},ae=o.createDynamicBean("detailCellRendererCtrl",!0);if(ae&&(u.createBean(ae),ae.init(ie,e),N.current=ae,d.get("detailRowAutoHeight"))){const pe=()=>{if(I.current==null)return;const he=I.current.clientHeight;he!=null&&he>0&&setTimeout(()=>{e.node.setRowHeight(he),(_isClientSideRowModel(d)||_isServerSideRowModel(d))&&f.onRowHeightChanged()},0)};B.current=_observeResize(n,ee,pe),pe()}},[]),$=reactExports.useCallback(ee=>{N.current?.registerDetailWithMaster(ee)},[]);return React.createElement("div",{className:j,ref:z},_&&React.createElement(AgGridReactUi,{className:q,..._,modules:V,rowData:O,passGridApi:$}))}),ReactFrameworkOverrides=class extends VanillaFrameworkOverrides{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.renderingEngine="react",this.frameworkComponents={agGroupCellRenderer:groupCellRenderer_default,agGroupRowRenderer:groupCellRenderer_default,agDetailCellRenderer:DetailCellRenderer},this.wrapIncoming=(t,n)=>n==="ensureVisible"?runWithoutFlushSync(t):t()}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const t=e.prototype;return!(t&&"getGui"in t)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return isReact19()}},AgGridReact=class extends reactExports.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e;for(const t of this.apiListeners)t(e)}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return React.createElement(AgGridReactUi,{...this.props,passGridApi:this.setGridApi})}};pdfExports.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";const ROOM_COLORS=["#93C5FD","#86EFAC","#FCD34D","#F9A8D4","#A5B4FC","#6EE7B7","#FCA5A5","#C4B5FD","#67E8F9","#FDE68A"],USE_TYPES=["Office","Conference Room","Corridor","Storage","Restroom","Open Area","Lab","Reception","Utility","Other"];function Editor(){const[e,t]=reactExports.useState(null),[n,o]=reactExports.useState({width:900,height:600}),[u,d]=reactExports.useState("select"),[f,v]=reactExports.useState([]),[w,E]=reactExports.useState(!1),[C,_]=reactExports.useState(null),[D,O]=reactExports.useState([]),[M,N]=reactExports.useState(null),[I,B]=reactExports.useState(1),[V,j]=reactExports.useState(""),q=reactExports.useRef(null),z=reactExports.useRef(null),$=[{field:"id",headerName:"ID",width:60,editable:!1},{field:"name",headerName:"Room Name",editable:!0,flex:1},{field:"useType",headerName:"Use Type",editable:!0,flex:1,cellEditor:"agSelectCellEditor",cellEditorParams:{values:USE_TYPES}},{field:"area",headerName:"Area (sq ft)",editable:!0,width:120,valueParser:oe=>Number(oe.newValue)},{field:"department",headerName:"Department",editable:!0,flex:1},{field:"notes",headerName:"Notes",editable:!0,flex:1}];reactExports.useEffect(()=>{const oe=new ResizeObserver(()=>{z.current&&o({width:z.current.offsetWidth,height:z.current.offsetHeight})});return z.current&&oe.observe(z.current),()=>oe.disconnect()},[]);const ee=async oe=>{const se=oe.target.files[0];if(se){j("");try{const J=await se.arrayBuffer(),Z=await(await pdfExports.getDocument({data:J}).promise).getPage(1),K=Z.getViewport({scale:1.5}),ne=document.createElement("canvas");ne.width=K.width,ne.height=K.height;const ue=ne.getContext("2d");await Z.render({canvasContext:ue,viewport:K}).promise;const ye=new window.Image;ye.src=ne.toDataURL(),ye.onload=()=>{t(ye);const fe=n.width/K.width;B(Math.min(fe,1))}}catch(J){console.error(J),j("Failed to load PDF. Make sure it's a valid PDF file.")}}},ie=()=>{const oe=q.current.getPointerPosition();return{x:oe.x/I,y:oe.y/I}},ae=()=>{if(u==="rect"){const oe=ie();_({x:oe.x,y:oe.y,width:0,height:0}),E(!0)}else if(u==="polygon"){const oe=ie();O(se=>[...se,oe.x,oe.y])}else u==="select"&&N(null)},pe=()=>{if(u==="rect"&&w&&C){const oe=ie();_(se=>({...se,width:oe.x-se.x,height:oe.y-se.y}))}},he=()=>{if(u==="rect"&&w&&C){if(E(!1),Math.abs(C.width)>5&&Math.abs(C.height)>5){const oe={id:f.length+1,type:"rect",x:C.width<0?C.x+C.width:C.x,y:C.height<0?C.y+C.height:C.y,width:Math.abs(C.width),height:Math.abs(C.height),name:`Room ${f.length+1}`,useType:"Office",area:Math.round(Math.abs(C.width)*Math.abs(C.height)/100),department:"",notes:"",color:ROOM_COLORS[f.length%ROOM_COLORS.length]};v(se=>[...se,oe])}_(null)}},be=()=>{if(D.length<6)return;const oe={id:f.length+1,type:"polygon",points:D,name:`Room ${f.length+1}`,useType:"Office",area:0,department:"",notes:"",color:ROOM_COLORS[f.length%ROOM_COLORS.length]};v(se=>[...se,oe]),O([])},xe=()=>{M&&(v(oe=>oe.filter(se=>se.id!==M)),N(null))},Ee=oe=>{v(se=>se.map(J=>J.id===oe.data.id?{...J,...oe.data}:J))},we=()=>{const oe=["ID","Name","Use Type","Area (sq ft)","Department","Notes"],se=f.map(ne=>[ne.id,ne.name,ne.useType,ne.area,ne.department,ne.notes].join(",")),J=[oe.join(","),...se].join(`
`),Q=new Blob([J],{type:"text/csv"}),Z=URL.createObjectURL(Q),K=document.createElement("a");K.href=Z,K.download="space-data.csv",K.click(),URL.revokeObjectURL(Z)};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-2xl shadow-md border border-gray-200 p-4 flex flex-wrap items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-gray-700 mr-2",children:"Floor Plan Editor"}),jsxRuntimeExports.jsxs("label",{className:"cursor-pointer px-4 py-2 bg-gray-800 text-white text-sm rounded-md hover:bg-gray-700 transition",children:[" Load PDF",jsxRuntimeExports.jsx("input",{type:"file",accept:".pdf",className:"hidden",onChange:ee})]}),jsxRuntimeExports.jsx("div",{className:"h-6 w-px bg-gray-300"}),[{id:"select",label:" Select"},{id:"rect",label:" Rectangle"},{id:"polygon",label:" Polygon"}].map(oe=>jsxRuntimeExports.jsx("button",{onClick:()=>{d(oe.id),O([])},className:`px-3 py-2 text-sm rounded-md border transition ${u===oe.id?"bg-gray-800 text-white border-gray-800":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:oe.label},oe.id)),u==="polygon"&&D.length>=6&&jsxRuntimeExports.jsx("button",{onClick:be,className:"px-3 py-2 text-sm rounded-md bg-green-600 text-white hover:bg-green-700 transition",children:" Finish Polygon"}),M&&jsxRuntimeExports.jsx("button",{onClick:xe,className:"px-3 py-2 text-sm rounded-md bg-red-500 text-white hover:bg-red-600 transition",children:" Delete Room"}),jsxRuntimeExports.jsx("div",{className:"ml-auto",children:jsxRuntimeExports.jsx("button",{onClick:we,disabled:f.length===0,className:"px-4 py-2 text-sm rounded-md bg-blue-600 text-white hover:bg-blue-700 transition disabled:opacity-40",children:" Export CSV"})})]}),V&&jsxRuntimeExports.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 rounded-xl px-4 py-3 text-sm",children:[" ",V]}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-2xl shadow-md border border-gray-200 overflow-hidden",children:jsxRuntimeExports.jsxs("div",{ref:z,className:"w-full",style:{height:"560px",background:"#F8FAFC",cursor:u==="select"?"default":"crosshair"},children:[!e&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center h-full text-gray-400 flex-col gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-4xl",children:""}),jsxRuntimeExports.jsx("span",{className:"text-lg",children:"Load a PDF floor plan to get started"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:"Then use the Rectangle or Polygon tool to draw rooms"})]}),jsxRuntimeExports.jsx(Stage,{ref:q,width:n.width,height:n.height,scaleX:I,scaleY:I,onMouseDown:ae,onMouseMove:pe,onMouseUp:he,children:jsxRuntimeExports.jsxs(Layer,{children:[e&&jsxRuntimeExports.jsx(Image$1,{image:e,x:0,y:0,width:e.naturalWidth,height:e.naturalHeight}),f.map(oe=>{const se=oe.id===M;return oe.type==="rect"?jsxRuntimeExports.jsxs(React.Fragment,{children:[jsxRuntimeExports.jsx(Rect,{x:oe.x,y:oe.y,width:oe.width,height:oe.height,fill:oe.color,opacity:.45,stroke:se?"#1D4ED8":"#374151",strokeWidth:se?2:1,onClick:()=>u==="select"&&N(oe.id)}),jsxRuntimeExports.jsx(Text,{x:oe.x+4,y:oe.y+4,text:oe.name,fontSize:11,fill:"#1F2937",listening:!1})]},oe.id):oe.type==="polygon"?jsxRuntimeExports.jsxs(React.Fragment,{children:[jsxRuntimeExports.jsx(Line,{points:oe.points,fill:oe.color,opacity:.45,stroke:se?"#1D4ED8":"#374151",strokeWidth:se?2:1,closed:!0,onClick:()=>u==="select"&&N(oe.id)}),jsxRuntimeExports.jsx(Text,{x:oe.points[0]+4,y:oe.points[1]+4,text:oe.name,fontSize:11,fill:"#1F2937",listening:!1})]},oe.id):null}),C&&jsxRuntimeExports.jsx(Rect,{x:C.x,y:C.y,width:C.width,height:C.height,fill:"#93C5FD",opacity:.35,stroke:"#3B82F6",strokeWidth:1,dash:[4,4]}),D.length>0&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Line,{points:D,stroke:"#3B82F6",strokeWidth:1.5,dash:[4,4]}),Array.from({length:D.length/2}).map((oe,se)=>jsxRuntimeExports.jsx(Circle,{x:D[se*2],y:D[se*2+1],radius:4,fill:"#3B82F6"},se))]})]})})]})}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-2xl shadow-md border border-gray-200 p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-3",children:[jsxRuntimeExports.jsxs("h3",{className:"font-semibold text-gray-700",children:["Room Data  ",f.length," room",f.length!==1?"s":""]}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:"Click any cell to edit"})]}),f.length===0?jsxRuntimeExports.jsx("div",{className:"text-center text-gray-400 py-8 border border-dashed border-gray-300 rounded-xl",children:"Draw rooms on the floor plan to populate this table"}):jsxRuntimeExports.jsx("div",{className:"ag-theme-alpine w-full",style:{height:300},children:jsxRuntimeExports.jsx(AgGridReact,{rowData:f,columnDefs:$,onCellValueChanged:Ee,getRowId:oe=>String(oe.data.id),stopEditingWhenCellsLoseFocus:!0,onRowClicked:oe=>N(oe.data.id)})})]})]})}function App(){const[e,t]=reactExports.useState([]),n=({isActive:o})=>`px-3 py-2 rounded-md text-sm font-medium transition ${o?"bg-gray-700 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"}`;return jsxRuntimeExports.jsx(HashRouter,{children:jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gray-100 text-gray-900",children:[jsxRuntimeExports.jsxs("nav",{className:"bg-gray-900 shadow-md p-4 flex justify-between items-center",children:[jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold text-white",children:" Space Manager"}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsx(NavLink,{to:"/",className:n,children:"Dashboard"}),jsxRuntimeExports.jsx(NavLink,{to:"/upload",className:n,children:"Upload"}),jsxRuntimeExports.jsx(NavLink,{to:"/editor",className:n,children:"Floor Plan"})]})]}),jsxRuntimeExports.jsx("main",{className:"max-w-7xl mx-auto mt-8 p-4",children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Dashboard,{data:e})}),jsxRuntimeExports.jsx(Route,{path:"/upload",element:jsxRuntimeExports.jsx(FileUploader,{onUpload:t})}),jsxRuntimeExports.jsx(Route,{path:"/editor",element:jsxRuntimeExports.jsx(Editor,{})})]})}),jsxRuntimeExports.jsxs("footer",{className:"text-center text-gray-500 text-sm py-6",children:[" ",new Date().getFullYear()," Space Management Dashboard"]})]})})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));

var i4=t=>{throw TypeError(t)};var Qx=(t,e,n)=>e.has(t)||i4("Cannot "+n);var $n=(t,e,n)=>(Qx(t,e,"read from private field"),n?n.call(t):e.get(t)),Pl=(t,e,n)=>e.has(t)?i4("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ns=(t,e,n,i)=>(Qx(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),Ol=(t,e,n)=>(Qx(t,e,"access private method"),n);var r4=(t,e,n,i)=>({set _(r){Ns(t,e,r,n)},get _(){return $n(t,e,i)}});function Aj(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Wo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Jx={exports:{}},t0={};var s4;function Ej(){if(s4)return t0;s4=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,s){var a=null;if(s!==void 0&&(a=""+s),r.key!==void 0&&(a=""+r.key),"key"in r){s={};for(var o in r)o!=="key"&&(s[o]=r[o])}else s=r;return r=s.ref,{$$typeof:t,type:i,key:a,ref:r!==void 0?r:null,props:s}}return t0.Fragment=e,t0.jsx=n,t0.jsxs=n,t0}var a4;function Tj(){return a4||(a4=1,Jx.exports=Ej()),Jx.exports}var ke=Tj(),eA={exports:{}},ft={};var o4;function Rj(){if(o4)return ft;o4=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),v=Symbol.iterator;function y(V){return V===null||typeof V!="object"?null:(V=v&&V[v]||V["@@iterator"],typeof V=="function"?V:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,x={};function T(V,Z,ae){this.props=V,this.context=Z,this.refs=x,this.updater=ae||w}T.prototype.isReactComponent={},T.prototype.setState=function(V,Z){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,Z,"setState")},T.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function _(){}_.prototype=T.prototype;function M(V,Z,ae){this.props=V,this.context=Z,this.refs=x,this.updater=ae||w}var F=M.prototype=new _;F.constructor=M,S(F,T.prototype),F.isPureReactComponent=!0;var L=Array.isArray;function k(){}var B={H:null,A:null,T:null,S:null},H=Object.prototype.hasOwnProperty;function U(V,Z,ae){var Ee=ae.ref;return{$$typeof:t,type:V,key:Z,ref:Ee!==void 0?Ee:null,props:ae}}function W(V,Z){return U(V.type,Z,V.props)}function j(V){return typeof V=="object"&&V!==null&&V.$$typeof===t}function X(V){var Z={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ae){return Z[ae]})}var ne=/\/+/g;function $(V,Z){return typeof V=="object"&&V!==null&&V.key!=null?X(""+V.key):Z.toString(36)}function q(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(k,k):(V.status="pending",V.then(function(Z){V.status==="pending"&&(V.status="fulfilled",V.value=Z)},function(Z){V.status==="pending"&&(V.status="rejected",V.reason=Z)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function z(V,Z,ae,Ee,Pe){var Ie=typeof V;(Ie==="undefined"||Ie==="boolean")&&(V=null);var ze=!1;if(V===null)ze=!0;else switch(Ie){case"bigint":case"string":case"number":ze=!0;break;case"object":switch(V.$$typeof){case t:case e:ze=!0;break;case h:return ze=V._init,z(ze(V._payload),Z,ae,Ee,Pe)}}if(ze)return Pe=Pe(V),ze=Ee===""?"."+$(V,0):Ee,L(Pe)?(ae="",ze!=null&&(ae=ze.replace(ne,"$&/")+"/"),z(Pe,Z,ae,"",function(Be){return Be})):Pe!=null&&(j(Pe)&&(Pe=W(Pe,ae+(Pe.key==null||V&&V.key===Pe.key?"":(""+Pe.key).replace(ne,"$&/")+"/")+ze)),Z.push(Pe)),1;ze=0;var Ot=Ee===""?".":Ee+":";if(L(V))for(var me=0;me<V.length;me++)Ee=V[me],Ie=Ot+$(Ee,me),ze+=z(Ee,Z,ae,Ie,Pe);else if(me=y(V),typeof me=="function")for(V=me.call(V),me=0;!(Ee=V.next()).done;)Ee=Ee.value,Ie=Ot+$(Ee,me++),ze+=z(Ee,Z,ae,Ie,Pe);else if(Ie==="object"){if(typeof V.then=="function")return z(q(V),Z,ae,Ee,Pe);throw Z=String(V),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return ze}function K(V,Z,ae){if(V==null)return V;var Ee=[],Pe=0;return z(V,Ee,"","",function(Ie){return Z.call(ae,Ie,Pe++)}),Ee}function Q(V){if(V._status===-1){var Z=V._result;Z=Z(),Z.then(function(ae){(V._status===0||V._status===-1)&&(V._status=1,V._result=ae)},function(ae){(V._status===0||V._status===-1)&&(V._status=2,V._result=ae)}),V._status===-1&&(V._status=0,V._result=Z)}if(V._status===1)return V._result.default;throw V._result}var oe=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},le={map:K,forEach:function(V,Z,ae){K(V,function(){Z.apply(this,arguments)},ae)},count:function(V){var Z=0;return K(V,function(){Z++}),Z},toArray:function(V){return K(V,function(Z){return Z})||[]},only:function(V){if(!j(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return ft.Activity=g,ft.Children=le,ft.Component=T,ft.Fragment=n,ft.Profiler=r,ft.PureComponent=M,ft.StrictMode=i,ft.Suspense=l,ft.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,ft.__COMPILER_RUNTIME={__proto__:null,c:function(V){return B.H.useMemoCache(V)}},ft.cache=function(V){return function(){return V.apply(null,arguments)}},ft.cacheSignal=function(){return null},ft.cloneElement=function(V,Z,ae){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var Ee=S({},V.props),Pe=V.key;if(Z!=null)for(Ie in Z.key!==void 0&&(Pe=""+Z.key),Z)!H.call(Z,Ie)||Ie==="key"||Ie==="__self"||Ie==="__source"||Ie==="ref"&&Z.ref===void 0||(Ee[Ie]=Z[Ie]);var Ie=arguments.length-2;if(Ie===1)Ee.children=ae;else if(1<Ie){for(var ze=Array(Ie),Ot=0;Ot<Ie;Ot++)ze[Ot]=arguments[Ot+2];Ee.children=ze}return U(V.type,Pe,Ee)},ft.createContext=function(V){return V={$$typeof:a,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:s,_context:V},V},ft.createElement=function(V,Z,ae){var Ee,Pe={},Ie=null;if(Z!=null)for(Ee in Z.key!==void 0&&(Ie=""+Z.key),Z)H.call(Z,Ee)&&Ee!=="key"&&Ee!=="__self"&&Ee!=="__source"&&(Pe[Ee]=Z[Ee]);var ze=arguments.length-2;if(ze===1)Pe.children=ae;else if(1<ze){for(var Ot=Array(ze),me=0;me<ze;me++)Ot[me]=arguments[me+2];Pe.children=Ot}if(V&&V.defaultProps)for(Ee in ze=V.defaultProps,ze)Pe[Ee]===void 0&&(Pe[Ee]=ze[Ee]);return U(V,Ie,Pe)},ft.createRef=function(){return{current:null}},ft.forwardRef=function(V){return{$$typeof:o,render:V}},ft.isValidElement=j,ft.lazy=function(V){return{$$typeof:h,_payload:{_status:-1,_result:V},_init:Q}},ft.memo=function(V,Z){return{$$typeof:u,type:V,compare:Z===void 0?null:Z}},ft.startTransition=function(V){var Z=B.T,ae={};B.T=ae;try{var Ee=V(),Pe=B.S;Pe!==null&&Pe(ae,Ee),typeof Ee=="object"&&Ee!==null&&typeof Ee.then=="function"&&Ee.then(k,oe)}catch(Ie){oe(Ie)}finally{Z!==null&&ae.types!==null&&(Z.types=ae.types),B.T=Z}},ft.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},ft.use=function(V){return B.H.use(V)},ft.useActionState=function(V,Z,ae){return B.H.useActionState(V,Z,ae)},ft.useCallback=function(V,Z){return B.H.useCallback(V,Z)},ft.useContext=function(V){return B.H.useContext(V)},ft.useDebugValue=function(){},ft.useDeferredValue=function(V,Z){return B.H.useDeferredValue(V,Z)},ft.useEffect=function(V,Z){return B.H.useEffect(V,Z)},ft.useEffectEvent=function(V){return B.H.useEffectEvent(V)},ft.useId=function(){return B.H.useId()},ft.useImperativeHandle=function(V,Z,ae){return B.H.useImperativeHandle(V,Z,ae)},ft.useInsertionEffect=function(V,Z){return B.H.useInsertionEffect(V,Z)},ft.useLayoutEffect=function(V,Z){return B.H.useLayoutEffect(V,Z)},ft.useMemo=function(V,Z){return B.H.useMemo(V,Z)},ft.useOptimistic=function(V,Z){return B.H.useOptimistic(V,Z)},ft.useReducer=function(V,Z,ae){return B.H.useReducer(V,Z,ae)},ft.useRef=function(V){return B.H.useRef(V)},ft.useState=function(V){return B.H.useState(V)},ft.useSyncExternalStore=function(V,Z,ae){return B.H.useSyncExternalStore(V,Z,ae)},ft.useTransition=function(){return B.H.useTransition()},ft.version="19.2.0",ft}var l4;function Rf(){return l4||(l4=1,eA.exports=Rj()),eA.exports}var D=Rf();const Se=Wo(D),Dj=Aj({__proto__:null,default:Se},[D]);var tA={exports:{}},n0={},nA={exports:{}},iA={};var c4;function Mj(){return c4||(c4=1,(function(t){function e(z,K){var Q=z.length;z.push(K);e:for(;0<Q;){var oe=Q-1>>>1,le=z[oe];if(0<r(le,K))z[oe]=K,z[Q]=le,Q=oe;else break e}}function n(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var K=z[0],Q=z.pop();if(Q!==K){z[0]=Q;e:for(var oe=0,le=z.length,V=le>>>1;oe<V;){var Z=2*(oe+1)-1,ae=z[Z],Ee=Z+1,Pe=z[Ee];if(0>r(ae,Q))Ee<le&&0>r(Pe,ae)?(z[oe]=Pe,z[Ee]=Q,oe=Ee):(z[oe]=ae,z[Z]=Q,oe=Z);else if(Ee<le&&0>r(Pe,Q))z[oe]=Pe,z[Ee]=Q,oe=Ee;else break e}}return K}function r(z,K){var Q=z.sortIndex-K.sortIndex;return Q!==0?Q:z.id-K.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],u=[],h=1,g=null,v=3,y=!1,w=!1,S=!1,x=!1,T=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;function F(z){for(var K=n(u);K!==null;){if(K.callback===null)i(u);else if(K.startTime<=z)i(u),K.sortIndex=K.expirationTime,e(l,K);else break;K=n(u)}}function L(z){if(S=!1,F(z),!w)if(n(l)!==null)w=!0,k||(k=!0,X());else{var K=n(u);K!==null&&q(L,K.startTime-z)}}var k=!1,B=-1,H=5,U=-1;function W(){return x?!0:!(t.unstable_now()-U<H)}function j(){if(x=!1,k){var z=t.unstable_now();U=z;var K=!0;try{e:{w=!1,S&&(S=!1,_(B),B=-1),y=!0;var Q=v;try{t:{for(F(z),g=n(l);g!==null&&!(g.expirationTime>z&&W());){var oe=g.callback;if(typeof oe=="function"){g.callback=null,v=g.priorityLevel;var le=oe(g.expirationTime<=z);if(z=t.unstable_now(),typeof le=="function"){g.callback=le,F(z),K=!0;break t}g===n(l)&&i(l),F(z)}else i(l);g=n(l)}if(g!==null)K=!0;else{var V=n(u);V!==null&&q(L,V.startTime-z),K=!1}}break e}finally{g=null,v=Q,y=!1}K=void 0}}finally{K?X():k=!1}}}var X;if(typeof M=="function")X=function(){M(j)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,$=ne.port2;ne.port1.onmessage=j,X=function(){$.postMessage(null)}}else X=function(){T(j,0)};function q(z,K){B=T(function(){z(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(z){switch(v){case 1:case 2:case 3:var K=3;break;default:K=v}var Q=v;v=K;try{return z()}finally{v=Q}},t.unstable_requestPaint=function(){x=!0},t.unstable_runWithPriority=function(z,K){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Q=v;v=z;try{return K()}finally{v=Q}},t.unstable_scheduleCallback=function(z,K,Q){var oe=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?oe+Q:oe):Q=oe,z){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=Q+le,z={id:h++,callback:K,priorityLevel:z,startTime:Q,expirationTime:le,sortIndex:-1},Q>oe?(z.sortIndex=Q,e(u,z),n(l)===null&&z===n(u)&&(S?(_(B),B=-1):S=!0,q(L,Q-oe))):(z.sortIndex=le,e(l,z),w||y||(w=!0,k||(k=!0,X()))),z},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(z){var K=v;return function(){var Q=v;v=K;try{return z.apply(this,arguments)}finally{v=Q}}}})(iA)),iA}var u4;function nM(){return u4||(u4=1,nA.exports=Mj()),nA.exports}var rA={exports:{}},Kr={};var h4;function _j(){if(h4)return Kr;h4=1;var t=Rf();function e(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)u+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function s(l,u,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:g==null?null:""+g,children:l,containerInfo:u,implementation:h}}var a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Kr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Kr.createPortal=function(l,u){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return s(l,u,null,h)},Kr.flushSync=function(l){var u=a.T,h=i.p;try{if(a.T=null,i.p=2,l)return l()}finally{a.T=u,i.p=h,i.d.f()}},Kr.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,i.d.C(l,u))},Kr.prefetchDNS=function(l){typeof l=="string"&&i.d.D(l)},Kr.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var h=u.as,g=o(h,u.crossOrigin),v=typeof u.integrity=="string"?u.integrity:void 0,y=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;h==="style"?i.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:g,integrity:v,fetchPriority:y}):h==="script"&&i.d.X(l,{crossOrigin:g,integrity:v,fetchPriority:y,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Kr.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var h=o(u.as,u.crossOrigin);i.d.M(l,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&i.d.M(l)},Kr.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var h=u.as,g=o(h,u.crossOrigin);i.d.L(l,h,{crossOrigin:g,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Kr.preloadModule=function(l,u){if(typeof l=="string")if(u){var h=o(u.as,u.crossOrigin);i.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else i.d.m(l)},Kr.requestFormReset=function(l){i.d.r(l)},Kr.unstable_batchedUpdates=function(l,u){return l(u)},Kr.useFormState=function(l,u,h){return a.H.useFormState(l,u,h)},Kr.useFormStatus=function(){return a.H.useHostTransitionStatus()},Kr.version="19.2.0",Kr}var d4;function Y7(){if(d4)return rA.exports;d4=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),rA.exports=_j(),rA.exports}var f4;function Pj(){if(f4)return n0;f4=1;var t=nM(),e=Rf(),n=Y7();function i(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function s(c){var d=c,m=c;if(c.alternate)for(;d.return;)d=d.return;else{c=d;do d=c,(d.flags&4098)!==0&&(m=d.return),c=d.return;while(c)}return d.tag===3?m:null}function a(c){if(c.tag===13){var d=c.memoizedState;if(d===null&&(c=c.alternate,c!==null&&(d=c.memoizedState)),d!==null)return d.dehydrated}return null}function o(c){if(c.tag===31){var d=c.memoizedState;if(d===null&&(c=c.alternate,c!==null&&(d=c.memoizedState)),d!==null)return d.dehydrated}return null}function l(c){if(s(c)!==c)throw Error(i(188))}function u(c){var d=c.alternate;if(!d){if(d=s(c),d===null)throw Error(i(188));return d!==c?null:c}for(var m=c,C=d;;){var E=m.return;if(E===null)break;var R=E.alternate;if(R===null){if(C=E.return,C!==null){m=C;continue}break}if(E.child===R.child){for(R=E.child;R;){if(R===m)return l(E),c;if(R===C)return l(E),d;R=R.sibling}throw Error(i(188))}if(m.return!==C.return)m=E,C=R;else{for(var N=!1,G=E.child;G;){if(G===m){N=!0,m=E,C=R;break}if(G===C){N=!0,C=E,m=R;break}G=G.sibling}if(!N){for(G=R.child;G;){if(G===m){N=!0,m=R,C=E;break}if(G===C){N=!0,C=R,m=E;break}G=G.sibling}if(!N)throw Error(i(189))}}if(m.alternate!==C)throw Error(i(190))}if(m.tag!==3)throw Error(i(188));return m.stateNode.current===m?c:d}function h(c){var d=c.tag;if(d===5||d===26||d===27||d===6)return c;for(c=c.child;c!==null;){if(d=h(c),d!==null)return d;c=c.sibling}return null}var g=Object.assign,v=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),_=Symbol.for("react.consumer"),M=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),W=Symbol.for("react.memo_cache_sentinel"),j=Symbol.iterator;function X(c){return c===null||typeof c!="object"?null:(c=j&&c[j]||c["@@iterator"],typeof c=="function"?c:null)}var ne=Symbol.for("react.client.reference");function $(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===ne?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case S:return"Fragment";case T:return"Profiler";case x:return"StrictMode";case L:return"Suspense";case k:return"SuspenseList";case U:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case w:return"Portal";case M:return c.displayName||"Context";case _:return(c._context.displayName||"Context")+".Consumer";case F:var d=c.render;return c=c.displayName,c||(c=d.displayName||d.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case B:return d=c.displayName||null,d!==null?d:$(c.type)||"Memo";case H:d=c._payload,c=c._init;try{return $(c(d))}catch{}}return null}var q=Array.isArray,z=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},oe=[],le=-1;function V(c){return{current:c}}function Z(c){0>le||(c.current=oe[le],oe[le]=null,le--)}function ae(c,d){le++,oe[le]=c.current,c.current=d}var Ee=V(null),Pe=V(null),Ie=V(null),ze=V(null);function Ot(c,d){switch(ae(Ie,d),ae(Pe,c),ae(Ee,null),d.nodeType){case 9:case 11:c=(c=d.documentElement)&&(c=c.namespaceURI)?T5(c):0;break;default:if(c=d.tagName,d=d.namespaceURI)d=T5(d),c=R5(d,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}Z(Ee),ae(Ee,c)}function me(){Z(Ee),Z(Pe),Z(Ie)}function Be(c){c.memoizedState!==null&&ae(ze,c);var d=Ee.current,m=R5(d,c.type);d!==m&&(ae(Pe,c),ae(Ee,m))}function Je(c){Pe.current===c&&(Z(Ee),Z(Pe)),ze.current===c&&(Z(ze),Zv._currentValue=Q)}var be,wt;function nt(c){if(be===void 0)try{throw Error()}catch(m){var d=m.stack.trim().match(/\n( *(at )?)/);be=d&&d[1]||"",wt=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+be+c+wt}var jt=!1;function $t(c,d){if(!c||jt)return"";jt=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var C={DetermineComponentFrameRoot:function(){try{if(d){var xe=function(){throw Error()};if(Object.defineProperty(xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xe,[])}catch(ye){var de=ye}Reflect.construct(c,[],xe)}else{try{xe.call()}catch(ye){de=ye}c.call(xe.prototype)}}else{try{throw Error()}catch(ye){de=ye}(xe=c())&&typeof xe.catch=="function"&&xe.catch(function(){})}}catch(ye){if(ye&&de&&typeof ye.stack=="string")return[ye.stack,de.stack]}return[null,null]}};C.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(C.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(C.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var R=C.DetermineComponentFrameRoot(),N=R[0],G=R[1];if(N&&G){var J=N.split(`
`),ue=G.split(`
`);for(E=C=0;C<J.length&&!J[C].includes("DetermineComponentFrameRoot");)C++;for(;E<ue.length&&!ue[E].includes("DetermineComponentFrameRoot");)E++;if(C===J.length||E===ue.length)for(C=J.length-1,E=ue.length-1;1<=C&&0<=E&&J[C]!==ue[E];)E--;for(;1<=C&&0<=E;C--,E--)if(J[C]!==ue[E]){if(C!==1||E!==1)do if(C--,E--,0>E||J[C]!==ue[E]){var Ce=`
`+J[C].replace(" at new "," at ");return c.displayName&&Ce.includes("<anonymous>")&&(Ce=Ce.replace("<anonymous>",c.displayName)),Ce}while(1<=C&&0<=E);break}}}finally{jt=!1,Error.prepareStackTrace=m}return(m=c?c.displayName||c.name:"")?nt(m):""}function Ke(c,d){switch(c.tag){case 26:case 27:case 5:return nt(c.type);case 16:return nt("Lazy");case 13:return c.child!==d&&d!==null?nt("Suspense Fallback"):nt("Suspense");case 19:return nt("SuspenseList");case 0:case 15:return $t(c.type,!1);case 11:return $t(c.type.render,!1);case 1:return $t(c.type,!0);case 31:return nt("Activity");default:return""}}function Lt(c){try{var d="",m=null;do d+=Ke(c,m),m=c,c=c.return;while(c);return d}catch(C){return`
Error generating stack: `+C.message+`
`+C.stack}}var Nn=Object.prototype.hasOwnProperty,Zt=t.unstable_scheduleCallback,Ye=t.unstable_cancelCallback,Wt=t.unstable_shouldYield,Vt=t.unstable_requestPaint,un=t.unstable_now,qi=t.unstable_getCurrentPriorityLevel,fa=t.unstable_ImmediatePriority,fo=t.unstable_UserBlockingPriority,qt=t.unstable_NormalPriority,Sn=t.unstable_LowPriority,go=t.unstable_IdlePriority,wC=t.log,SC=t.unstable_setDisableYieldValue,gu=null,Br=null;function po(c){if(typeof wC=="function"&&SC(c),Br&&typeof Br.setStrictMode=="function")try{Br.setStrictMode(gu,c)}catch{}}var Qr=Math.clz32?Math.clz32:xC,Em=Math.log,vx=Math.LN2;function xC(c){return c>>>=0,c===0?32:31-(Em(c)/vx|0)|0}var Uf=256,pu=262144,Jl=4194304;function $o(c){var d=c&42;if(d!==0)return d;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return c&261888;case 262144:case 524288:case 1048576:case 2097152:return c&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function ec(c,d,m){var C=c.pendingLanes;if(C===0)return 0;var E=0,R=c.suspendedLanes,N=c.pingedLanes;c=c.warmLanes;var G=C&134217727;return G!==0?(C=G&~R,C!==0?E=$o(C):(N&=G,N!==0?E=$o(N):m||(m=G&~c,m!==0&&(E=$o(m))))):(G=C&~R,G!==0?E=$o(G):N!==0?E=$o(N):m||(m=C&~c,m!==0&&(E=$o(m)))),E===0?0:d!==0&&d!==E&&(d&R)===0&&(R=E&-E,m=d&-d,R>=m||R===32&&(m&4194048)!==0)?d:E}function mu(c,d){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&d)===0}function AC(c,d){switch(c){case 1:case 2:case 4:case 8:case 64:return d+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zo(){var c=Jl;return Jl<<=1,(Jl&62914560)===0&&(Jl=4194304),c}function jf(c){for(var d=[],m=0;31>m;m++)d.push(c);return d}function vu(c,d){c.pendingLanes|=d,d!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function Wf(c,d,m,C,E,R){var N=c.pendingLanes;c.pendingLanes=m,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=m,c.entangledLanes&=m,c.errorRecoveryDisabledLanes&=m,c.shellSuspendCounter=0;var G=c.entanglements,J=c.expirationTimes,ue=c.hiddenUpdates;for(m=N&~m;0<m;){var Ce=31-Qr(m),xe=1<<Ce;G[Ce]=0,J[Ce]=-1;var de=ue[Ce];if(de!==null)for(ue[Ce]=null,Ce=0;Ce<de.length;Ce++){var ye=de[Ce];ye!==null&&(ye.lane&=-536870913)}m&=~xe}C!==0&&yu(c,C,0),R!==0&&E===0&&c.tag!==0&&(c.suspendedLanes|=R&~(N&~d))}function yu(c,d,m){c.pendingLanes|=d,c.suspendedLanes&=~d;var C=31-Qr(d);c.entangledLanes|=d,c.entanglements[C]=c.entanglements[C]|1073741824|m&261930}function Xh(c,d){var m=c.entangledLanes|=d;for(c=c.entanglements;m;){var C=31-Qr(m),E=1<<C;E&d|c[C]&d&&(c[C]|=d),m&=~E}}function Tm(c,d){var m=d&-d;return m=(m&42)!==0?1:Cu(m),(m&(c.suspendedLanes|d))!==0?0:m}function Cu(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function bu(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function qf(){var c=K.p;return c!==0?c:(c=window.event,c===void 0?32:$5(c.type))}function Qo(c,d){var m=K.p;try{return K.p=c,d()}finally{K.p=m}}var mo=Math.random().toString(36).slice(2),gi="__reactFiber$"+mo,rr="__reactProps$"+mo,Jo="__reactContainer$"+mo,ga="__reactEvents$"+mo,el="__reactListeners$"+mo,$h="__reactHandles$"+mo,Kf="__reactResources$"+mo,vo="__reactMarker$"+mo;function tc(c){delete c[gi],delete c[rr],delete c[ga],delete c[el],delete c[$h]}function nc(c){var d=c[gi];if(d)return d;for(var m=c.parentNode;m;){if(d=m[Jo]||m[gi]){if(m=d.alternate,d.child!==null||m!==null&&m.child!==null)for(c=F5(c);c!==null;){if(m=c[gi])return m;c=F5(c)}return d}c=m,m=c.parentNode}return null}function ic(c){if(c=c[gi]||c[Jo]){var d=c.tag;if(d===5||d===6||d===13||d===31||d===26||d===27||d===3)return c}return null}function wu(c){var d=c.tag;if(d===5||d===26||d===27||d===6)return c.stateNode;throw Error(i(33))}function tl(c){var d=c[Kf];return d||(d=c[Kf]={hoistableStyles:new Map,hoistableScripts:new Map}),d}function pi(c){c[vo]=!0}var yo=new Set,Yf={};function nl(c,d){Jr(c,d),Jr(c+"Capture",d)}function Jr(c,d){for(Yf[c]=d,c=0;c<d.length;c++)yo.add(d[c])}var es=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zh={},Bn={};function Rm(c){return Nn.call(Bn,c)?!0:Nn.call(Zh,c)?!1:es.test(c)?Bn[c]=!0:(Zh[c]=!0,!1)}function Su(c,d,m){if(Rm(d))if(m===null)c.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":c.removeAttribute(d);return;case"boolean":var C=d.toLowerCase().slice(0,5);if(C!=="data-"&&C!=="aria-"){c.removeAttribute(d);return}}c.setAttribute(d,""+m)}}function Qh(c,d,m){if(m===null)c.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(d);return}c.setAttribute(d,""+m)}}function pa(c,d,m,C){if(C===null)c.removeAttribute(m);else{switch(typeof C){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(m);return}c.setAttributeNS(d,m,""+C)}}function vs(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function Xf(c){var d=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function Dm(c,d,m){var C=Object.getOwnPropertyDescriptor(c.constructor.prototype,d);if(!c.hasOwnProperty(d)&&typeof C<"u"&&typeof C.get=="function"&&typeof C.set=="function"){var E=C.get,R=C.set;return Object.defineProperty(c,d,{configurable:!0,get:function(){return E.call(this)},set:function(N){m=""+N,R.call(this,N)}}),Object.defineProperty(c,d,{enumerable:C.enumerable}),{getValue:function(){return m},setValue:function(N){m=""+N},stopTracking:function(){c._valueTracker=null,delete c[d]}}}}function Jh(c){if(!c._valueTracker){var d=Xf(c)?"checked":"value";c._valueTracker=Dm(c,d,""+c[d])}}function sr(c){if(!c)return!1;var d=c._valueTracker;if(!d)return!0;var m=d.getValue(),C="";return c&&(C=Xf(c)?c.checked?"true":"false":c.value),c=C,c!==m?(d.setValue(c),!0):!1}function xn(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var $f=/[\n"\\]/g;function ar(c){return c.replace($f,function(d){return"\\"+d.charCodeAt(0).toString(16)+" "})}function xu(c,d,m,C,E,R,N,G){c.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?c.type=N:c.removeAttribute("type"),d!=null?N==="number"?(d===0&&c.value===""||c.value!=d)&&(c.value=""+vs(d)):c.value!==""+vs(d)&&(c.value=""+vs(d)):N!=="submit"&&N!=="reset"||c.removeAttribute("value"),d!=null?Ks(c,N,vs(d)):m!=null?Ks(c,N,vs(m)):C!=null&&c.removeAttribute("value"),E==null&&R!=null&&(c.defaultChecked=!!R),E!=null&&(c.checked=E&&typeof E!="function"&&typeof E!="symbol"),G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"?c.name=""+vs(G):c.removeAttribute("name")}function Zf(c,d,m,C,E,R,N,G){if(R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(c.type=R),d!=null||m!=null){if(!(R!=="submit"&&R!=="reset"||d!=null)){Jh(c);return}m=m!=null?""+vs(m):"",d=d!=null?""+vs(d):m,G||d===c.value||(c.value=d),c.defaultValue=d}C=C??E,C=typeof C!="function"&&typeof C!="symbol"&&!!C,c.checked=G?c.checked:!!C,c.defaultChecked=!!C,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(c.name=N),Jh(c)}function Ks(c,d,m){d==="number"&&xn(c.ownerDocument)===c||c.defaultValue===""+m||(c.defaultValue=""+m)}function Co(c,d,m,C){if(c=c.options,d){d={};for(var E=0;E<m.length;E++)d["$"+m[E]]=!0;for(m=0;m<c.length;m++)E=d.hasOwnProperty("$"+c[m].value),c[m].selected!==E&&(c[m].selected=E),E&&C&&(c[m].defaultSelected=!0)}else{for(m=""+vs(m),d=null,E=0;E<c.length;E++){if(c[E].value===m){c[E].selected=!0,C&&(c[E].defaultSelected=!0);return}d!==null||c[E].disabled||(d=c[E])}d!==null&&(d.selected=!0)}}function Qf(c,d,m){if(d!=null&&(d=""+vs(d),d!==c.value&&(c.value=d),m==null)){c.defaultValue!==d&&(c.defaultValue=d);return}c.defaultValue=m!=null?""+vs(m):""}function Jf(c,d,m,C){if(d==null){if(C!=null){if(m!=null)throw Error(i(92));if(q(C)){if(1<C.length)throw Error(i(93));C=C[0]}m=C}m==null&&(m=""),d=m}m=vs(d),c.defaultValue=m,C=c.textContent,C===m&&C!==""&&C!==null&&(c.value=C),Jh(c)}function rc(c,d){if(d){var m=c.firstChild;if(m&&m===c.lastChild&&m.nodeType===3){m.nodeValue=d;return}}c.textContent=d}var EC=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Mm(c,d,m){var C=d.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?C?c.setProperty(d,""):d==="float"?c.cssFloat="":c[d]="":C?c.setProperty(d,m):typeof m!="number"||m===0||EC.has(d)?d==="float"?c.cssFloat=m:c[d]=(""+m).trim():c[d]=m+"px"}function _m(c,d,m){if(d!=null&&typeof d!="object")throw Error(i(62));if(c=c.style,m!=null){for(var C in m)!m.hasOwnProperty(C)||d!=null&&d.hasOwnProperty(C)||(C.indexOf("--")===0?c.setProperty(C,""):C==="float"?c.cssFloat="":c[C]="");for(var E in d)C=d[E],d.hasOwnProperty(E)&&m[E]!==C&&Mm(c,E,C)}else for(var R in d)d.hasOwnProperty(R)&&Mm(c,R,d[R])}function eg(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var TC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ed(c){return Pm.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}function bo(){}var tg=null;function ng(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var sc=null,il=null;function Om(c){var d=ic(c);if(d&&(c=d.stateNode)){var m=c[rr]||null;e:switch(c=d.stateNode,d.type){case"input":if(xu(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),d=m.name,m.type==="radio"&&d!=null){for(m=c;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+ar(""+d)+'"][type="radio"]'),d=0;d<m.length;d++){var C=m[d];if(C!==c&&C.form===c.form){var E=C[rr]||null;if(!E)throw Error(i(90));xu(C,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(d=0;d<m.length;d++)C=m[d],C.form===c.form&&sr(C)}break e;case"textarea":Qf(c,m.value,m.defaultValue);break e;case"select":d=m.value,d!=null&&Co(c,!!m.multiple,d,!1)}}}var ig=!1;function Lm(c,d,m){if(ig)return c(d,m);ig=!0;try{var C=c(d);return C}finally{if(ig=!1,(sc!==null||il!==null)&&(Qs(),sc&&(d=sc,c=il,il=sc=null,Om(d),c)))for(d=0;d<c.length;d++)Om(c[d])}}function Au(c,d){var m=c.stateNode;if(m===null)return null;var C=m[rr]||null;if(C===null)return null;m=C[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(c=c.type,C=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!C;break e;default:c=!1}if(c)return null;if(m&&typeof m!="function")throw Error(i(231,d,typeof m));return m}var ma=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fm=!1;if(ma)try{var Eu={};Object.defineProperty(Eu,"passive",{get:function(){Fm=!0}}),window.addEventListener("test",Eu,Eu),window.removeEventListener("test",Eu,Eu)}catch{Fm=!1}var ts=null,rg=null,ac=null;function td(){if(ac)return ac;var c,d=rg,m=d.length,C,E="value"in ts?ts.value:ts.textContent,R=E.length;for(c=0;c<m&&d[c]===E[c];c++);var N=m-c;for(C=1;C<=N&&d[m-C]===E[R-C];C++);return ac=E.slice(c,1<C?1-C:void 0)}function nd(c){var d=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&d===13&&(c=13)):c=d,c===10&&(c=13),32<=c||c===13?c:0}function Tu(){return!0}function RC(){return!1}function vr(c){function d(m,C,E,R,N){this._reactName=m,this._targetInst=E,this.type=C,this.nativeEvent=R,this.target=N,this.currentTarget=null;for(var G in c)c.hasOwnProperty(G)&&(m=c[G],this[G]=m?m(R):R[G]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?Tu:RC,this.isPropagationStopped=RC,this}return g(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Tu)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Tu)},persist:function(){},isPersistent:Tu}),d}var rl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},id=vr(rl),Ru=g({},rl,{view:0,detail:0}),DC=vr(Ru),rd,sg,Du,Mu=g({},Ru,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cg,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Du&&(Du&&c.type==="mousemove"?(rd=c.screenX-Du.screenX,sg=c.screenY-Du.screenY):sg=rd=0,Du=c),rd)},movementY:function(c){return"movementY"in c?c.movementY:sg}}),km=vr(Mu),MC=g({},Mu,{dataTransfer:0}),_C=vr(MC),Nm=g({},Ru,{relatedTarget:0}),ag=vr(Nm),PC=g({},rl,{animationName:0,elapsedTime:0,pseudoElement:0}),yx=vr(PC),Cx=g({},rl,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),OC=vr(Cx),sd=g({},rl,{data:0}),og=vr(sd),lg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},LC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},FC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bm(c){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(c):(c=FC[c])?!!d[c]:!1}function cg(){return Bm}var kC=g({},Ru,{key:function(c){if(c.key){var d=lg[c.key]||c.key;if(d!=="Unidentified")return d}return c.type==="keypress"?(c=nd(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?LC[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cg,charCode:function(c){return c.type==="keypress"?nd(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?nd(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),oc=vr(kC),ug=g({},Mu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Im=vr(ug),Hm=g({},Ru,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cg}),NC=vr(Hm),BC=g({},rl,{propertyName:0,elapsedTime:0,pseudoElement:0}),bx=vr(BC),Ki=g({},Mu,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),IC=vr(Ki),HC=g({},rl,{newState:0,oldState:0}),GC=vr(HC),zC=[9,13,27,32],lc=ma&&"CompositionEvent"in window,_u=null;ma&&"documentMode"in document&&(_u=document.documentMode);var hg=ma&&"TextEvent"in window&&!_u,Gm=ma&&(!lc||_u&&8<_u&&11>=_u),VC=" ",ad=!1;function dg(c,d){switch(c){case"keyup":return zC.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zm(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var cc=!1;function UC(c,d){switch(c){case"compositionend":return zm(d);case"keypress":return d.which!==32?null:(ad=!0,VC);case"textInput":return c=d.data,c===VC&&ad?null:c;default:return null}}function Vm(c,d){if(cc)return c==="compositionend"||!lc&&dg(c,d)?(c=td(),ac=rg=ts=null,cc=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Gm&&d.locale!=="ko"?null:d.data;default:return null}}var Um={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jm(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d==="input"?!!Um[c.type]:d==="textarea"}function fg(c,d,m,C){sc?il?il.push(C):il=[C]:sc=C,d=Yb(d,"onChange"),0<d.length&&(m=new id("onChange","change",null,m,C),c.push({event:m,listeners:d}))}var sl=null,uc=null;function jC(c){b5(c,0)}function Pu(c){var d=wu(c);if(sr(d))return c}function Wm(c,d){if(c==="change")return d}var va=!1;if(ma){var od;if(ma){var qm="oninput"in document;if(!qm){var Km=document.createElement("div");Km.setAttribute("oninput","return;"),qm=typeof Km.oninput=="function"}od=qm}else od=!1;va=od&&(!document.documentMode||9<document.documentMode)}function ys(){sl&&(sl.detachEvent("onpropertychange",ld),uc=sl=null)}function ld(c){if(c.propertyName==="value"&&Pu(uc)){var d=[];fg(d,uc,c,ng(c)),Lm(jC,d)}}function WC(c,d,m){c==="focusin"?(ys(),sl=d,uc=m,sl.attachEvent("onpropertychange",ld)):c==="focusout"&&ys()}function Ym(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Pu(uc)}function qC(c,d){if(c==="click")return Pu(d)}function KC(c,d){if(c==="input"||c==="change")return Pu(d)}function Xm(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var yr=typeof Object.is=="function"?Object.is:Xm;function Ou(c,d){if(yr(c,d))return!0;if(typeof c!="object"||c===null||typeof d!="object"||d===null)return!1;var m=Object.keys(c),C=Object.keys(d);if(m.length!==C.length)return!1;for(C=0;C<m.length;C++){var E=m[C];if(!Nn.call(d,E)||!yr(c[E],d[E]))return!1}return!0}function cd(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function Lu(c,d){var m=cd(c);c=0;for(var C;m;){if(m.nodeType===3){if(C=c+m.textContent.length,c<=d&&C>=d)return{node:m,offset:d-c};c=C}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=cd(m)}}function dn(c,d){return c&&d?c===d?!0:c&&c.nodeType===3?!1:d&&d.nodeType===3?dn(c,d.parentNode):"contains"in c?c.contains(d):c.compareDocumentPosition?!!(c.compareDocumentPosition(d)&16):!1:!1}function YC(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var d=xn(c.document);d instanceof c.HTMLIFrameElement;){try{var m=typeof d.contentWindow.location.href=="string"}catch{m=!1}if(m)c=d.contentWindow;else break;d=xn(c.document)}return d}function $m(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d&&(d==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||d==="textarea"||c.contentEditable==="true")}var XC=ma&&"documentMode"in document&&11>=document.documentMode,ya=null,Ca=null,Fu=null,gg=!1;function ku(c,d,m){var C=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;gg||ya==null||ya!==xn(C)||(C=ya,"selectionStart"in C&&$m(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),Fu&&Ou(Fu,C)||(Fu=C,C=Yb(Ca,"onSelect"),0<C.length&&(d=new id("onSelect","select",null,d,m),c.push({event:d,listeners:C}),d.target=ya)))}function or(c,d){var m={};return m[c.toLowerCase()]=d.toLowerCase(),m["Webkit"+c]="webkit"+d,m["Moz"+c]="moz"+d,m}var hc={animationend:or("Animation","AnimationEnd"),animationiteration:or("Animation","AnimationIteration"),animationstart:or("Animation","AnimationStart"),transitionrun:or("Transition","TransitionRun"),transitionstart:or("Transition","TransitionStart"),transitioncancel:or("Transition","TransitionCancel"),transitionend:or("Transition","TransitionEnd")},ud={},Zm={};ma&&(Zm=document.createElement("div").style,"AnimationEvent"in window||(delete hc.animationend.animation,delete hc.animationiteration.animation,delete hc.animationstart.animation),"TransitionEvent"in window||delete hc.transitionend.transition);function wo(c){if(ud[c])return ud[c];if(!hc[c])return c;var d=hc[c],m;for(m in d)if(d.hasOwnProperty(m)&&m in Zm)return ud[c]=d[m];return c}var pg=wo("animationend"),hd=wo("animationiteration"),Qm=wo("animationstart"),$C=wo("transitionrun"),wx=wo("transitionstart"),ZC=wo("transitioncancel"),Jm=wo("transitionend"),Cs=new Map,dd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");dd.push("scrollEnd");function bs(c,d){Cs.set(c,d),nl(d,[c])}var fd=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var d=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(d))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)},ws=[],So=0,_i=0;function gd(){for(var c=So,d=_i=So=0;d<c;){var m=ws[d];ws[d++]=null;var C=ws[d];ws[d++]=null;var E=ws[d];ws[d++]=null;var R=ws[d];if(ws[d++]=null,C!==null&&E!==null){var N=C.pending;N===null?E.next=E:(E.next=N.next,N.next=E),C.pending=E}R!==0&&al(m,E,R)}}function Pi(c,d,m,C){ws[So++]=c,ws[So++]=d,ws[So++]=m,ws[So++]=C,_i|=C,c.lanes|=C,c=c.alternate,c!==null&&(c.lanes|=C)}function mg(c,d,m,C){return Pi(c,d,m,C),Ss(c)}function Cr(c,d){return Pi(c,null,null,d),Ss(c)}function al(c,d,m){c.lanes|=m;var C=c.alternate;C!==null&&(C.lanes|=m);for(var E=!1,R=c.return;R!==null;)R.childLanes|=m,C=R.alternate,C!==null&&(C.childLanes|=m),R.tag===22&&(c=R.stateNode,c===null||c._visibility&1||(E=!0)),c=R,R=R.return;return c.tag===3?(R=c.stateNode,E&&d!==null&&(E=31-Qr(m),c=R.hiddenUpdates,C=c[E],C===null?c[E]=[d]:C.push(d),d.lane=m|536870912),R):null}function Ss(c){if(50<El)throw El=0,_c=null,Error(i(185));for(var d=c.return;d!==null;)c=d,d=c.return;return c.tag===3?c.stateNode:null}var ol={};function ev(c,d,m,C){this.tag=c,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(c,d,m,C){return new ev(c,d,m,C)}function vg(c){return c=c.prototype,!(!c||!c.isReactComponent)}function Ir(c,d){var m=c.alternate;return m===null?(m=In(c.tag,d,c.key,c.mode),m.elementType=c.elementType,m.type=c.type,m.stateNode=c.stateNode,m.alternate=c,c.alternate=m):(m.pendingProps=d,m.type=c.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=c.flags&65011712,m.childLanes=c.childLanes,m.lanes=c.lanes,m.child=c.child,m.memoizedProps=c.memoizedProps,m.memoizedState=c.memoizedState,m.updateQueue=c.updateQueue,d=c.dependencies,m.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},m.sibling=c.sibling,m.index=c.index,m.ref=c.ref,m.refCleanup=c.refCleanup,m}function Nu(c,d){c.flags&=65011714;var m=c.alternate;return m===null?(c.childLanes=0,c.lanes=d,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=m.childLanes,c.lanes=m.lanes,c.child=m.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=m.memoizedProps,c.memoizedState=m.memoizedState,c.updateQueue=m.updateQueue,c.type=m.type,d=m.dependencies,c.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),c}function ba(c,d,m,C,E,R){var N=0;if(C=c,typeof c=="function")vg(c)&&(N=1);else if(typeof c=="string")N=dj(c,m,Ee.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case U:return c=In(31,m,d,E),c.elementType=U,c.lanes=R,c;case S:return ll(m.children,E,R,d);case x:N=8,E|=24;break;case T:return c=In(12,m,d,E|2),c.elementType=T,c.lanes=R,c;case L:return c=In(13,m,d,E),c.elementType=L,c.lanes=R,c;case k:return c=In(19,m,d,E),c.elementType=k,c.lanes=R,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case M:N=10;break e;case _:N=9;break e;case F:N=11;break e;case B:N=14;break e;case H:N=16,C=null;break e}N=29,m=Error(i(130,c===null?"null":typeof c,"")),C=null}return d=In(N,m,d,E),d.elementType=c,d.type=C,d.lanes=R,d}function ll(c,d,m,C){return c=In(7,c,C,d),c.lanes=m,c}function yg(c,d,m){return c=In(6,c,null,d),c.lanes=m,c}function Bu(c){var d=In(18,null,null,0);return d.stateNode=c,d}function Cg(c,d,m){return d=In(4,c.children!==null?c.children:[],c.key,d),d.lanes=m,d.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},d}var pd=new WeakMap;function ns(c,d){if(typeof c=="object"&&c!==null){var m=pd.get(c);return m!==void 0?m:(d={value:c,source:d,stack:Lt(d)},pd.set(c,d),d)}return{value:c,source:d,stack:Lt(d)}}var cl=[],ul=0,Iu=null,Hu=0,Hr=[],An=0,xo=null,Hn=1,Ys="";function wa(c,d){cl[ul++]=Hu,cl[ul++]=Iu,Iu=c,Hu=d}function QC(c,d,m){Hr[An++]=Hn,Hr[An++]=Ys,Hr[An++]=xo,xo=c;var C=Hn;c=Ys;var E=32-Qr(C)-1;C&=~(1<<E),m+=1;var R=32-Qr(d)+E;if(30<R){var N=E-E%5;R=(C&(1<<N)-1).toString(32),C>>=N,E-=N,Hn=1<<32-Qr(d)+E|m<<E|C,Ys=R+c}else Hn=1<<R|m<<E|C,Ys=c}function Sa(c){c.return!==null&&(wa(c,1),QC(c,1,0))}function bg(c){for(;c===Iu;)Iu=cl[--ul],cl[ul]=null,Hu=cl[--ul],cl[ul]=null;for(;c===xo;)xo=Hr[--An],Hr[An]=null,Ys=Hr[--An],Hr[An]=null,Hn=Hr[--An],Hr[An]=null}function wg(c,d){Hr[An++]=Hn,Hr[An++]=Ys,Hr[An++]=xo,Hn=d.id,Ys=d.overflow,xo=c}var qn=null,fn=null,_t=!1,Ao=null,is=!1,Gu=Error(i(519));function xa(c){var d=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Aa(ns(d,c)),Gu}function JC(c){var d=c.stateNode,m=c.type,C=c.memoizedProps;switch(d[gi]=c,d[rr]=C,m){case"dialog":kt("cancel",d),kt("close",d);break;case"iframe":case"object":case"embed":kt("load",d);break;case"video":case"audio":for(m=0;m<ks.length;m++)kt(ks[m],d);break;case"source":kt("error",d);break;case"img":case"image":case"link":kt("error",d),kt("load",d);break;case"details":kt("toggle",d);break;case"input":kt("invalid",d),Zf(d,C.value,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name,!0);break;case"select":kt("invalid",d);break;case"textarea":kt("invalid",d),Jf(d,C.value,C.defaultValue,C.children)}m=C.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||d.textContent===""+m||C.suppressHydrationWarning===!0||A5(d.textContent,m)?(C.popover!=null&&(kt("beforetoggle",d),kt("toggle",d)),C.onScroll!=null&&kt("scroll",d),C.onScrollEnd!=null&&kt("scrollend",d),C.onClick!=null&&(d.onclick=bo),d=!0):d=!1,d||xa(c,!0)}function eb(c){for(qn=c.return;qn;)switch(qn.tag){case 5:case 31:case 13:is=!1;return;case 27:case 3:is=!0;return;default:qn=qn.return}}function zu(c){if(c!==qn)return!1;if(!_t)return eb(c),_t=!0,!1;var d=c.tag,m;if((m=d!==3&&d!==27)&&((m=d===5)&&(m=c.type,m=!(m!=="form"&&m!=="button")||Bx(c.type,c.memoizedProps)),m=!m),m&&fn&&xa(c),eb(c),d===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(i(317));fn=L5(c)}else if(d===31){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(i(317));fn=L5(c)}else d===27?(d=fn,oh(c.type)?(c=Vx,Vx=null,fn=c):fn=d):fn=qn?Ia(c.stateNode.nextSibling):null;return!0}function hl(){fn=qn=null,_t=!1}function Sg(){var c=Ao;return c!==null&&(Yn===null?Yn=c:Yn.push.apply(Yn,c),Ao=null),c}function Aa(c){Ao===null?Ao=[c]:Ao.push(c)}var Vu=V(null),dl=null,Ea=null;function Eo(c,d,m){ae(Vu,d._currentValue),d._currentValue=m}function Ta(c){c._currentValue=Vu.current,Z(Vu)}function xg(c,d,m){for(;c!==null;){var C=c.alternate;if((c.childLanes&d)!==d?(c.childLanes|=d,C!==null&&(C.childLanes|=d)):C!==null&&(C.childLanes&d)!==d&&(C.childLanes|=d),c===m)break;c=c.return}}function Ag(c,d,m,C){var E=c.child;for(E!==null&&(E.return=c);E!==null;){var R=E.dependencies;if(R!==null){var N=E.child;R=R.firstContext;e:for(;R!==null;){var G=R;R=E;for(var J=0;J<d.length;J++)if(G.context===d[J]){R.lanes|=m,G=R.alternate,G!==null&&(G.lanes|=m),xg(R.return,m,c),C||(N=null);break e}R=G.next}}else if(E.tag===18){if(N=E.return,N===null)throw Error(i(341));N.lanes|=m,R=N.alternate,R!==null&&(R.lanes|=m),xg(N,m,c),N=null}else N=E.child;if(N!==null)N.return=E;else for(N=E;N!==null;){if(N===c){N=null;break}if(E=N.sibling,E!==null){E.return=N.return,N=E;break}N=N.return}E=N}}function Ra(c,d,m,C){c=null;for(var E=d,R=!1;E!==null;){if(!R){if((E.flags&524288)!==0)R=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var N=E.alternate;if(N===null)throw Error(i(387));if(N=N.memoizedProps,N!==null){var G=E.type;yr(E.pendingProps.value,N.value)||(c!==null?c.push(G):c=[G])}}else if(E===ze.current){if(N=E.alternate,N===null)throw Error(i(387));N.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(c!==null?c.push(Zv):c=[Zv])}E=E.return}c!==null&&Ag(d,c,m,C),d.flags|=262144}function md(c){for(c=c.firstContext;c!==null;){if(!yr(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function fl(c){dl=c,Ea=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function it(c){return tb(dl,c)}function Uu(c,d){return dl===null&&fl(c),tb(c,d)}function tb(c,d){var m=d._currentValue;if(d={context:d,memoizedValue:m,next:null},Ea===null){if(c===null)throw Error(i(308));Ea=d,c.dependencies={lanes:0,firstContext:d},c.flags|=524288}else Ea=Ea.next=d;return m}var nb=typeof AbortController<"u"?AbortController:function(){var c=[],d=this.signal={aborted:!1,addEventListener:function(m,C){c.push(C)}};this.abort=function(){d.aborted=!0,c.forEach(function(m){return m()})}},Sx=t.unstable_scheduleCallback,xx=t.unstable_NormalPriority,mi={$$typeof:M,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function tv(){return{controller:new nb,data:new Map,refCount:0}}function dc(c){c.refCount--,c.refCount===0&&Sx(xx,function(){c.controller.abort()})}var rs=null,Eg=0,To=0,xs=null;function nv(c,d){if(rs===null){var m=rs=[];Eg=0,To=fe(),xs={status:"pending",value:void 0,then:function(C){m.push(C)}}}return Eg++,d.then(iv,iv),d}function iv(){if(--Eg===0&&rs!==null){xs!==null&&(xs.status="fulfilled");var c=rs;rs=null,To=0,xs=null;for(var d=0;d<c.length;d++)(0,c[d])()}}function rv(c,d){var m=[],C={status:"pending",value:null,reason:null,then:function(E){m.push(E)}};return c.then(function(){C.status="fulfilled",C.value=d;for(var E=0;E<m.length;E++)(0,m[E])(d)},function(E){for(C.status="rejected",C.reason=E,E=0;E<m.length;E++)(0,m[E])(void 0)}),C}var ib=z.S;z.S=function(c,d){Wv=un(),typeof d=="object"&&d!==null&&typeof d.then=="function"&&nv(c,d),ib!==null&&ib(c,d)};var gl=V(null);function Tg(){var c=gl.current;return c!==null?c:st.pooledCache}function vd(c,d){d===null?ae(gl,gl.current):ae(gl,d.pool)}function sv(){var c=Tg();return c===null?null:{parent:mi._currentValue,pool:c}}var fc=Error(i(460)),yd=Error(i(474)),mt=Error(i(542)),Rg={then:function(){}};function Gr(c){return c=c.status,c==="fulfilled"||c==="rejected"}function Dg(c,d,m){switch(m=c[m],m===void 0?c.push(d):m!==d&&(d.then(bo,bo),d=m),d.status){case"fulfilled":return d.value;case"rejected":throw c=d.reason,mc(c),c;default:if(typeof d.status=="string")d.then(bo,bo);else{if(c=st,c!==null&&100<c.shellSuspendCounter)throw Error(i(482));c=d,c.status="pending",c.then(function(C){if(d.status==="pending"){var E=d;E.status="fulfilled",E.value=C}},function(C){if(d.status==="pending"){var E=d;E.status="rejected",E.reason=C}})}switch(d.status){case"fulfilled":return d.value;case"rejected":throw c=d.reason,mc(c),c}throw Da=d,fc}}function gc(c){try{var d=c._init;return d(c._payload)}catch(m){throw m!==null&&typeof m=="object"&&typeof m.then=="function"?(Da=m,fc):m}}var Da=null;function pc(){if(Da===null)throw Error(i(459));var c=Da;return Da=null,c}function mc(c){if(c===fc||c===mt)throw Error(i(483))}var vc=null,yc=0;function Cd(c){var d=yc;return yc+=1,vc===null&&(vc=[]),Dg(vc,c,d)}function As(c,d){d=d.props.ref,c.ref=d!==void 0?d:null}function ju(c,d){throw d.$$typeof===v?Error(i(525)):(c=Object.prototype.toString.call(d),Error(i(31,c==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":c)))}function Mg(c){function d(ie,te){if(c){var ce=ie.deletions;ce===null?(ie.deletions=[te],ie.flags|=16):ce.push(te)}}function m(ie,te){if(!c)return null;for(;te!==null;)d(ie,te),te=te.sibling;return null}function C(ie){for(var te=new Map;ie!==null;)ie.key!==null?te.set(ie.key,ie):te.set(ie.index,ie),ie=ie.sibling;return te}function E(ie,te){return ie=Ir(ie,te),ie.index=0,ie.sibling=null,ie}function R(ie,te,ce){return ie.index=ce,c?(ce=ie.alternate,ce!==null?(ce=ce.index,ce<te?(ie.flags|=67108866,te):ce):(ie.flags|=67108866,te)):(ie.flags|=1048576,te)}function N(ie){return c&&ie.alternate===null&&(ie.flags|=67108866),ie}function G(ie,te,ce,we){return te===null||te.tag!==6?(te=yg(ce,ie.mode,we),te.return=ie,te):(te=E(te,ce),te.return=ie,te)}function J(ie,te,ce,we){var $e=ce.type;return $e===S?Ce(ie,te,ce.props.children,we,ce.key):te!==null&&(te.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===H&&gc($e)===te.type)?(te=E(te,ce.props),As(te,ce),te.return=ie,te):(te=ba(ce.type,ce.key,ce.props,null,ie.mode,we),As(te,ce),te.return=ie,te)}function ue(ie,te,ce,we){return te===null||te.tag!==4||te.stateNode.containerInfo!==ce.containerInfo||te.stateNode.implementation!==ce.implementation?(te=Cg(ce,ie.mode,we),te.return=ie,te):(te=E(te,ce.children||[]),te.return=ie,te)}function Ce(ie,te,ce,we,$e){return te===null||te.tag!==7?(te=ll(ce,ie.mode,we,$e),te.return=ie,te):(te=E(te,ce),te.return=ie,te)}function xe(ie,te,ce){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return te=yg(""+te,ie.mode,ce),te.return=ie,te;if(typeof te=="object"&&te!==null){switch(te.$$typeof){case y:return ce=ba(te.type,te.key,te.props,null,ie.mode,ce),As(ce,te),ce.return=ie,ce;case w:return te=Cg(te,ie.mode,ce),te.return=ie,te;case H:return te=gc(te),xe(ie,te,ce)}if(q(te)||X(te))return te=ll(te,ie.mode,ce,null),te.return=ie,te;if(typeof te.then=="function")return xe(ie,Cd(te),ce);if(te.$$typeof===M)return xe(ie,Uu(ie,te),ce);ju(ie,te)}return null}function de(ie,te,ce,we){var $e=te!==null?te.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return $e!==null?null:G(ie,te,""+ce,we);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case y:return ce.key===$e?J(ie,te,ce,we):null;case w:return ce.key===$e?ue(ie,te,ce,we):null;case H:return ce=gc(ce),de(ie,te,ce,we)}if(q(ce)||X(ce))return $e!==null?null:Ce(ie,te,ce,we,null);if(typeof ce.then=="function")return de(ie,te,Cd(ce),we);if(ce.$$typeof===M)return de(ie,te,Uu(ie,ce),we);ju(ie,ce)}return null}function ye(ie,te,ce,we,$e){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return ie=ie.get(ce)||null,G(te,ie,""+we,$e);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case y:return ie=ie.get(we.key===null?ce:we.key)||null,J(te,ie,we,$e);case w:return ie=ie.get(we.key===null?ce:we.key)||null,ue(te,ie,we,$e);case H:return we=gc(we),ye(ie,te,ce,we,$e)}if(q(we)||X(we))return ie=ie.get(ce)||null,Ce(te,ie,we,$e,null);if(typeof we.then=="function")return ye(ie,te,ce,Cd(we),$e);if(we.$$typeof===M)return ye(ie,te,ce,Uu(te,we),$e);ju(te,we)}return null}function je(ie,te,ce,we){for(var $e=null,Kt=null,We=te,Ct=te=0,It=null;We!==null&&Ct<ce.length;Ct++){We.index>Ct?(It=We,We=null):It=We.sibling;var Yt=de(ie,We,ce[Ct],we);if(Yt===null){We===null&&(We=It);break}c&&We&&Yt.alternate===null&&d(ie,We),te=R(Yt,te,Ct),Kt===null?$e=Yt:Kt.sibling=Yt,Kt=Yt,We=It}if(Ct===ce.length)return m(ie,We),_t&&wa(ie,Ct),$e;if(We===null){for(;Ct<ce.length;Ct++)We=xe(ie,ce[Ct],we),We!==null&&(te=R(We,te,Ct),Kt===null?$e=We:Kt.sibling=We,Kt=We);return _t&&wa(ie,Ct),$e}for(We=C(We);Ct<ce.length;Ct++)It=ye(We,ie,Ct,ce[Ct],we),It!==null&&(c&&It.alternate!==null&&We.delete(It.key===null?Ct:It.key),te=R(It,te,Ct),Kt===null?$e=It:Kt.sibling=It,Kt=It);return c&&We.forEach(function(dh){return d(ie,dh)}),_t&&wa(ie,Ct),$e}function tt(ie,te,ce,we){if(ce==null)throw Error(i(151));for(var $e=null,Kt=null,We=te,Ct=te=0,It=null,Yt=ce.next();We!==null&&!Yt.done;Ct++,Yt=ce.next()){We.index>Ct?(It=We,We=null):It=We.sibling;var dh=de(ie,We,Yt.value,we);if(dh===null){We===null&&(We=It);break}c&&We&&dh.alternate===null&&d(ie,We),te=R(dh,te,Ct),Kt===null?$e=dh:Kt.sibling=dh,Kt=dh,We=It}if(Yt.done)return m(ie,We),_t&&wa(ie,Ct),$e;if(We===null){for(;!Yt.done;Ct++,Yt=ce.next())Yt=xe(ie,Yt.value,we),Yt!==null&&(te=R(Yt,te,Ct),Kt===null?$e=Yt:Kt.sibling=Yt,Kt=Yt);return _t&&wa(ie,Ct),$e}for(We=C(We);!Yt.done;Ct++,Yt=ce.next())Yt=ye(We,ie,Ct,Yt.value,we),Yt!==null&&(c&&Yt.alternate!==null&&We.delete(Yt.key===null?Ct:Yt.key),te=R(Yt,te,Ct),Kt===null?$e=Yt:Kt.sibling=Yt,Kt=Yt);return c&&We.forEach(function(xj){return d(ie,xj)}),_t&&wa(ie,Ct),$e}function mn(ie,te,ce,we){if(typeof ce=="object"&&ce!==null&&ce.type===S&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case y:e:{for(var $e=ce.key;te!==null;){if(te.key===$e){if($e=ce.type,$e===S){if(te.tag===7){m(ie,te.sibling),we=E(te,ce.props.children),we.return=ie,ie=we;break e}}else if(te.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===H&&gc($e)===te.type){m(ie,te.sibling),we=E(te,ce.props),As(we,ce),we.return=ie,ie=we;break e}m(ie,te);break}else d(ie,te);te=te.sibling}ce.type===S?(we=ll(ce.props.children,ie.mode,we,ce.key),we.return=ie,ie=we):(we=ba(ce.type,ce.key,ce.props,null,ie.mode,we),As(we,ce),we.return=ie,ie=we)}return N(ie);case w:e:{for($e=ce.key;te!==null;){if(te.key===$e)if(te.tag===4&&te.stateNode.containerInfo===ce.containerInfo&&te.stateNode.implementation===ce.implementation){m(ie,te.sibling),we=E(te,ce.children||[]),we.return=ie,ie=we;break e}else{m(ie,te);break}else d(ie,te);te=te.sibling}we=Cg(ce,ie.mode,we),we.return=ie,ie=we}return N(ie);case H:return ce=gc(ce),mn(ie,te,ce,we)}if(q(ce))return je(ie,te,ce,we);if(X(ce)){if($e=X(ce),typeof $e!="function")throw Error(i(150));return ce=$e.call(ce),tt(ie,te,ce,we)}if(typeof ce.then=="function")return mn(ie,te,Cd(ce),we);if(ce.$$typeof===M)return mn(ie,te,Uu(ie,ce),we);ju(ie,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint"?(ce=""+ce,te!==null&&te.tag===6?(m(ie,te.sibling),we=E(te,ce),we.return=ie,ie=we):(m(ie,te),we=yg(ce,ie.mode,we),we.return=ie,ie=we),N(ie)):m(ie,te)}return function(ie,te,ce,we){try{yc=0;var $e=mn(ie,te,ce,we);return vc=null,$e}catch(We){if(We===fc||We===mt)throw We;var Kt=In(29,We,null,ie.mode);return Kt.lanes=we,Kt.return=ie,Kt}finally{}}}var Ro=Mg(!0),_g=Mg(!1),br=!1;function bd(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function av(c,d){c=c.updateQueue,d.updateQueue===c&&(d.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function Do(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function pl(c,d,m){var C=c.updateQueue;if(C===null)return null;if(C=C.shared,(qe&2)!==0){var E=C.pending;return E===null?d.next=d:(d.next=E.next,E.next=d),C.pending=d,d=Ss(c),al(c,null,m),d}return Pi(c,C,d,m),Ss(c)}function ml(c,d,m){if(d=d.updateQueue,d!==null&&(d=d.shared,(m&4194048)!==0)){var C=d.lanes;C&=c.pendingLanes,m|=C,d.lanes=m,Xh(c,m)}}function Xe(c,d){var m=c.updateQueue,C=c.alternate;if(C!==null&&(C=C.updateQueue,m===C)){var E=null,R=null;if(m=m.firstBaseUpdate,m!==null){do{var N={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};R===null?E=R=N:R=R.next=N,m=m.next}while(m!==null);R===null?E=R=d:R=R.next=d}else E=R=d;m={baseState:C.baseState,firstBaseUpdate:E,lastBaseUpdate:R,shared:C.shared,callbacks:C.callbacks},c.updateQueue=m;return}c=m.lastBaseUpdate,c===null?m.firstBaseUpdate=d:c.next=d,m.lastBaseUpdate=d}var ov=!1;function wd(){if(ov){var c=xs;if(c!==null)throw c}}function Wu(c,d,m,C){ov=!1;var E=c.updateQueue;br=!1;var R=E.firstBaseUpdate,N=E.lastBaseUpdate,G=E.shared.pending;if(G!==null){E.shared.pending=null;var J=G,ue=J.next;J.next=null,N===null?R=ue:N.next=ue,N=J;var Ce=c.alternate;Ce!==null&&(Ce=Ce.updateQueue,G=Ce.lastBaseUpdate,G!==N&&(G===null?Ce.firstBaseUpdate=ue:G.next=ue,Ce.lastBaseUpdate=J))}if(R!==null){var xe=E.baseState;N=0,Ce=ue=J=null,G=R;do{var de=G.lane&-536870913,ye=de!==G.lane;if(ye?(gt&de)===de:(C&de)===de){de!==0&&de===To&&(ov=!0),Ce!==null&&(Ce=Ce.next={lane:0,tag:G.tag,payload:G.payload,callback:null,next:null});e:{var je=c,tt=G;de=d;var mn=m;switch(tt.tag){case 1:if(je=tt.payload,typeof je=="function"){xe=je.call(mn,xe,de);break e}xe=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=tt.payload,de=typeof je=="function"?je.call(mn,xe,de):je,de==null)break e;xe=g({},xe,de);break e;case 2:br=!0}}de=G.callback,de!==null&&(c.flags|=64,ye&&(c.flags|=8192),ye=E.callbacks,ye===null?E.callbacks=[de]:ye.push(de))}else ye={lane:de,tag:G.tag,payload:G.payload,callback:G.callback,next:null},Ce===null?(ue=Ce=ye,J=xe):Ce=Ce.next=ye,N|=de;if(G=G.next,G===null){if(G=E.shared.pending,G===null)break;ye=G,G=ye.next,ye.next=null,E.lastBaseUpdate=ye,E.shared.pending=null}}while(!0);Ce===null&&(J=xe),E.baseState=J,E.firstBaseUpdate=ue,E.lastBaseUpdate=Ce,R===null&&(E.shared.lanes=0),ka|=N,c.lanes=N,c.memoizedState=xe}}function qu(c,d){if(typeof c!="function")throw Error(i(191,c));c.call(d)}function rb(c,d){var m=c.callbacks;if(m!==null)for(c.callbacks=null,c=0;c<m.length;c++)qu(m[c],d)}var Ku=V(null),Pg=V(0);function sb(c,d){c=ls,ae(Pg,c),ae(Ku,d),ls=c|d.baseLanes}function lv(){ae(Pg,ls),ae(Ku,Ku.current)}function Sd(){ls=Pg.current,Z(Ku),Z(Pg)}var zr=V(null),wr=null;function Mo(c){var d=c.alternate;ae(Pt,Pt.current&1),ae(zr,c),wr===null&&(d===null||Ku.current!==null||d.memoizedState!==null)&&(wr=c)}function cv(c){ae(Pt,Pt.current),ae(zr,c),wr===null&&(wr=c)}function ab(c){c.tag===22?(ae(Pt,Pt.current),ae(zr,c),wr===null&&(wr=c)):Vr()}function Vr(){ae(Pt,Pt.current),ae(zr,zr.current)}function ni(c){Z(zr),wr===c&&(wr=null),Z(Pt)}var Pt=V(0);function ss(c){for(var d=c;d!==null;){if(d.tag===13){var m=d.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||Gx(m)||zx(m)))return d}else if(d.tag===19&&(d.memoizedProps.revealOrder==="forwards"||d.memoizedProps.revealOrder==="backwards"||d.memoizedProps.revealOrder==="unstable_legacy-backwards"||d.memoizedProps.revealOrder==="together")){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var En=0,ht=null,ln=null,Rt=null,Es=!1,Yu=!1,Cc=!1,Og=0,xd=0,Xu=null,uv=0;function Gn(){throw Error(i(321))}function hv(c,d){if(d===null)return!1;for(var m=0;m<d.length&&m<c.length;m++)if(!yr(c[m],d[m]))return!1;return!0}function Lg(c,d,m,C,E,R){return En=R,ht=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,z.H=c===null||c.memoizedState===null?Ib:Pv,Cc=!1,R=m(C,E),Cc=!1,Yu&&(R=bc(d,m,C,E)),ob(c),R}function ob(c){z.H=$u;var d=ln!==null&&ln.next!==null;if(En=0,Rt=ln=ht=null,Es=!1,xd=0,Xu=null,d)throw Error(i(300));c===null||vi||(c=c.dependencies,c!==null&&md(c)&&(vi=!0))}function bc(c,d,m,C){ht=c;var E=0;do{if(Yu&&(Xu=null),xd=0,Yu=!1,25<=E)throw Error(i(301));if(E+=1,Rt=ln=null,c.updateQueue!=null){var R=c.updateQueue;R.lastEffect=null,R.events=null,R.stores=null,R.memoCache!=null&&(R.memoCache.index=0)}z.H=Ts,R=d(m,C)}while(Yu);return R}function wc(){var c=z.H,d=c.useState()[0];return d=typeof d.then=="function"?Ad(d):d,c=c.useState()[0],(ln!==null?ln.memoizedState:null)!==c&&(ht.flags|=1024),d}function dv(){var c=Og!==0;return Og=0,c}function fv(c,d,m){d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~m}function gv(c){if(Es){for(c=c.memoizedState;c!==null;){var d=c.queue;d!==null&&(d.pending=null),c=c.next}Es=!1}En=0,Rt=ln=ht=null,Yu=!1,xd=Og=0,Xu=null}function Si(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?ht.memoizedState=Rt=c:Rt=Rt.next=c,Rt}function ii(){if(ln===null){var c=ht.alternate;c=c!==null?c.memoizedState:null}else c=ln.next;var d=Rt===null?ht.memoizedState:Rt.next;if(d!==null)Rt=d,ln=c;else{if(c===null)throw ht.alternate===null?Error(i(467)):Error(i(310));ln=c,c={memoizedState:ln.memoizedState,baseState:ln.baseState,baseQueue:ln.baseQueue,queue:ln.queue,next:null},Rt===null?ht.memoizedState=Rt=c:Rt=Rt.next=c}return Rt}function Fg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ad(c){var d=xd;return xd+=1,Xu===null&&(Xu=[]),c=Dg(Xu,c,d),d=ht,(Rt===null?d.memoizedState:Rt.next)===null&&(d=d.alternate,z.H=d===null||d.memoizedState===null?Ib:Pv),c}function vl(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return Ad(c);if(c.$$typeof===M)return it(c)}throw Error(i(438,String(c)))}function pv(c){var d=null,m=ht.updateQueue;if(m!==null&&(d=m.memoCache),d==null){var C=ht.alternate;C!==null&&(C=C.updateQueue,C!==null&&(C=C.memoCache,C!=null&&(d={data:C.data.map(function(E){return E.slice()}),index:0})))}if(d==null&&(d={data:[],index:0}),m===null&&(m=Fg(),ht.updateQueue=m),m.memoCache=d,m=d.data[d.index],m===void 0)for(m=d.data[d.index]=Array(c),C=0;C<c;C++)m[C]=W;return d.index++,m}function _o(c,d){return typeof d=="function"?d(c):d}function kg(c){var d=ii();return mv(d,ln,c)}function mv(c,d,m){var C=c.queue;if(C===null)throw Error(i(311));C.lastRenderedReducer=m;var E=c.baseQueue,R=C.pending;if(R!==null){if(E!==null){var N=E.next;E.next=R.next,R.next=N}d.baseQueue=E=R,C.pending=null}if(R=c.baseState,E===null)c.memoizedState=R;else{d=E.next;var G=N=null,J=null,ue=d,Ce=!1;do{var xe=ue.lane&-536870913;if(xe!==ue.lane?(gt&xe)===xe:(En&xe)===xe){var de=ue.revertLane;if(de===0)J!==null&&(J=J.next={lane:0,revertLane:0,gesture:null,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null}),xe===To&&(Ce=!0);else if((En&de)===de){ue=ue.next,de===To&&(Ce=!0);continue}else xe={lane:0,revertLane:ue.revertLane,gesture:null,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},J===null?(G=J=xe,N=R):J=J.next=xe,ht.lanes|=de,ka|=de;xe=ue.action,Cc&&m(R,xe),R=ue.hasEagerState?ue.eagerState:m(R,xe)}else de={lane:xe,revertLane:ue.revertLane,gesture:ue.gesture,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},J===null?(G=J=de,N=R):J=J.next=de,ht.lanes|=xe,ka|=xe;ue=ue.next}while(ue!==null&&ue!==d);if(J===null?N=R:J.next=G,!yr(R,c.memoizedState)&&(vi=!0,Ce&&(m=xs,m!==null)))throw m;c.memoizedState=R,c.baseState=N,c.baseQueue=J,C.lastRenderedState=R}return E===null&&(C.lanes=0),[c.memoizedState,C.dispatch]}function vv(c){var d=ii(),m=d.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=c;var C=m.dispatch,E=m.pending,R=d.memoizedState;if(E!==null){m.pending=null;var N=E=E.next;do R=c(R,N.action),N=N.next;while(N!==E);yr(R,d.memoizedState)||(vi=!0),d.memoizedState=R,d.baseQueue===null&&(d.baseState=R),m.lastRenderedState=R}return[R,C]}function lb(c,d,m){var C=ht,E=ii(),R=_t;if(R){if(m===void 0)throw Error(i(407));m=m()}else m=d();var N=!yr((ln||E).memoizedState,m);if(N&&(E.memoizedState=m,vi=!0),E=E.queue,Ev(hb.bind(null,C,E,c),[c]),E.getSnapshot!==d||N||Rt!==null&&Rt.memoizedState.tag&1){if(C.flags|=2048,yl(9,{destroy:void 0},ub.bind(null,C,E,m,d),null),st===null)throw Error(i(349));R||(En&127)!==0||cb(C,d,m)}return m}function cb(c,d,m){c.flags|=16384,c={getSnapshot:d,value:m},d=ht.updateQueue,d===null?(d=Fg(),ht.updateQueue=d,d.stores=[c]):(m=d.stores,m===null?d.stores=[c]:m.push(c))}function ub(c,d,m,C){d.value=m,d.getSnapshot=C,db(d)&&fb(c)}function hb(c,d,m){return m(function(){db(d)&&fb(c)})}function db(c){var d=c.getSnapshot;c=c.value;try{var m=d();return!yr(c,m)}catch{return!0}}function fb(c){var d=Cr(c,2);d!==null&&yt(d,c,2)}function yv(c){var d=Si();if(typeof c=="function"){var m=c;if(c=m(),Cc){po(!0);try{m()}finally{po(!1)}}}return d.memoizedState=d.baseState=c,d.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:c},d}function Cv(c,d,m,C){return c.baseState=m,mv(c,ln,typeof C=="function"?C:_o)}function Ax(c,d,m,C,E){if(Hg(c))throw Error(i(485));if(c=d.action,c!==null){var R={payload:E,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){R.listeners.push(N)}};z.T!==null?m(!0):R.isTransition=!1,C(R),m=d.pending,m===null?(R.next=d.pending=R,gb(d,R)):(R.next=m.next,d.pending=m.next=R)}}function gb(c,d){var m=d.action,C=d.payload,E=c.state;if(d.isTransition){var R=z.T,N={};z.T=N;try{var G=m(E,C),J=z.S;J!==null&&J(N,G),pb(c,d,G)}catch(ue){bv(c,d,ue)}finally{R!==null&&N.types!==null&&(R.types=N.types),z.T=R}}else try{R=m(E,C),pb(c,d,R)}catch(ue){bv(c,d,ue)}}function pb(c,d,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(C){mb(c,d,C)},function(C){return bv(c,d,C)}):mb(c,d,m)}function mb(c,d,m){d.status="fulfilled",d.value=m,vb(d),c.state=m,d=c.pending,d!==null&&(m=d.next,m===d?c.pending=null:(m=m.next,d.next=m,gb(c,m)))}function bv(c,d,m){var C=c.pending;if(c.pending=null,C!==null){C=C.next;do d.status="rejected",d.reason=m,vb(d),d=d.next;while(d!==C)}c.action=null}function vb(c){c=c.listeners;for(var d=0;d<c.length;d++)(0,c[d])()}function wv(c,d){return d}function Sv(c,d){if(_t){var m=st.formState;if(m!==null){e:{var C=ht;if(_t){if(fn){t:{for(var E=fn,R=is;E.nodeType!==8;){if(!R){E=null;break t}if(E=Ia(E.nextSibling),E===null){E=null;break t}}R=E.data,E=R==="F!"||R==="F"?E:null}if(E){fn=Ia(E.nextSibling),C=E.data==="F!";break e}}xa(C)}C=!1}C&&(d=m[0])}}return m=Si(),m.memoizedState=m.baseState=d,C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wv,lastRenderedState:d},m.queue=C,m=kb.bind(null,ht,C),C.dispatch=m,C=yv(!1),R=_v.bind(null,ht,!1,C.queue),C=Si(),E={state:d,dispatch:null,action:c,pending:null},C.queue=E,m=Ax.bind(null,ht,E,R,m),E.dispatch=m,C.memoizedState=c,[d,m,!1]}function yb(c){var d=ii();return xv(d,ln,c)}function xv(c,d,m){if(d=mv(c,d,wv)[0],c=kg(_o)[0],typeof d=="object"&&d!==null&&typeof d.then=="function")try{var C=Ad(d)}catch(N){throw N===fc?mt:N}else C=d;d=ii();var E=d.queue,R=E.dispatch;return m!==d.memoizedState&&(ht.flags|=2048,yl(9,{destroy:void 0},Cb.bind(null,E,m),null)),[C,R,c]}function Cb(c,d){c.action=d}function Av(c){var d=ii(),m=ln;if(m!==null)return xv(d,m,c);ii(),d=d.memoizedState,m=ii();var C=m.queue.dispatch;return m.memoizedState=c,[d,C,!1]}function yl(c,d,m,C){return c={tag:c,create:m,deps:C,inst:d,next:null},d=ht.updateQueue,d===null&&(d=Fg(),ht.updateQueue=d),m=d.lastEffect,m===null?d.lastEffect=c.next=c:(C=m.next,m.next=c,c.next=C,d.lastEffect=c),c}function Ng(){return ii().memoizedState}function Bg(c,d,m,C){var E=Si();ht.flags|=c,E.memoizedState=yl(1|d,{destroy:void 0},m,C===void 0?null:C)}function Ig(c,d,m,C){var E=ii();C=C===void 0?null:C;var R=E.memoizedState.inst;ln!==null&&C!==null&&hv(C,ln.memoizedState.deps)?E.memoizedState=yl(d,R,m,C):(ht.flags|=c,E.memoizedState=yl(1|d,R,m,C))}function bb(c,d){Bg(8390656,8,c,d)}function Ev(c,d){Ig(2048,8,c,d)}function wb(c){ht.flags|=4;var d=ht.updateQueue;if(d===null)d=Fg(),ht.updateQueue=d,d.events=[c];else{var m=d.events;m===null?d.events=[c]:m.push(c)}}function Sb(c){var d=ii().memoizedState;return wb({ref:d,nextImpl:c}),function(){if((qe&2)!==0)throw Error(i(440));return d.impl.apply(void 0,arguments)}}function xb(c,d){return Ig(4,2,c,d)}function Ab(c,d){return Ig(4,4,c,d)}function Eb(c,d){if(typeof d=="function"){c=c();var m=d(c);return function(){typeof m=="function"?m():d(null)}}if(d!=null)return c=c(),d.current=c,function(){d.current=null}}function Tb(c,d,m){m=m!=null?m.concat([c]):null,Ig(4,4,Eb.bind(null,d,c),m)}function Tv(){}function Rb(c,d){var m=ii();d=d===void 0?null:d;var C=m.memoizedState;return d!==null&&hv(d,C[1])?C[0]:(m.memoizedState=[c,d],c)}function Db(c,d){var m=ii();d=d===void 0?null:d;var C=m.memoizedState;if(d!==null&&hv(d,C[1]))return C[0];if(C=c(),Cc){po(!0);try{c()}finally{po(!1)}}return m.memoizedState=[C,d],C}function Rv(c,d,m){return m===void 0||(En&1073741824)!==0&&(gt&261930)===0?c.memoizedState=d:(c.memoizedState=m,c=St(),ht.lanes|=c,ka|=c,m)}function Mb(c,d,m,C){return yr(m,d)?m:Ku.current!==null?(c=Rv(c,m,C),yr(c,d)||(vi=!0),c):(En&42)===0||(En&1073741824)!==0&&(gt&261930)===0?(vi=!0,c.memoizedState=m):(c=St(),ht.lanes|=c,ka|=c,d)}function _b(c,d,m,C,E){var R=K.p;K.p=R!==0&&8>R?R:8;var N=z.T,G={};z.T=G,_v(c,!1,d,m);try{var J=E(),ue=z.S;if(ue!==null&&ue(G,J),J!==null&&typeof J=="object"&&typeof J.then=="function"){var Ce=rv(J,C);Ed(c,d,Ce,us(c))}else Ed(c,d,C,us(c))}catch(xe){Ed(c,d,{then:function(){},status:"rejected",reason:xe},us())}finally{K.p=R,N!==null&&G.types!==null&&(N.types=G.types),z.T=N}}function Ex(){}function Dv(c,d,m,C){if(c.tag!==5)throw Error(i(476));var E=Pb(c).queue;_b(c,E,d,Q,m===null?Ex:function(){return Ob(c),m(C)})}function Pb(c){var d=c.memoizedState;if(d!==null)return d;d={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:Q},next:null};var m={};return d.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:m},next:null},c.memoizedState=d,c=c.alternate,c!==null&&(c.memoizedState=d),d}function Ob(c){var d=Pb(c);d.next===null&&(d=c.alternate.memoizedState),Ed(c,d.next.queue,{},us())}function Mv(){return it(Zv)}function Lb(){return ii().memoizedState}function Fb(){return ii().memoizedState}function Tx(c){for(var d=c.return;d!==null;){switch(d.tag){case 24:case 3:var m=us();c=Do(m);var C=pl(d,c,m);C!==null&&(yt(C,d,m),ml(C,d,m)),d={cache:tv()},c.payload=d;return}d=d.return}}function Rx(c,d,m){var C=us();m={lane:C,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Hg(c)?Nb(d,m):(m=mg(c,d,m,C),m!==null&&(yt(m,c,C),Bb(m,d,C)))}function kb(c,d,m){var C=us();Ed(c,d,m,C)}function Ed(c,d,m,C){var E={lane:C,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null};if(Hg(c))Nb(d,E);else{var R=c.alternate;if(c.lanes===0&&(R===null||R.lanes===0)&&(R=d.lastRenderedReducer,R!==null))try{var N=d.lastRenderedState,G=R(N,m);if(E.hasEagerState=!0,E.eagerState=G,yr(G,N))return Pi(c,d,E,0),st===null&&gd(),!1}catch{}finally{}if(m=mg(c,d,E,C),m!==null)return yt(m,c,C),Bb(m,d,C),!0}return!1}function _v(c,d,m,C){if(C={lane:2,revertLane:fe(),gesture:null,action:C,hasEagerState:!1,eagerState:null,next:null},Hg(c)){if(d)throw Error(i(479))}else d=mg(c,m,C,2),d!==null&&yt(d,c,2)}function Hg(c){var d=c.alternate;return c===ht||d!==null&&d===ht}function Nb(c,d){Yu=Es=!0;var m=c.pending;m===null?d.next=d:(d.next=m.next,m.next=d),c.pending=d}function Bb(c,d,m){if((m&4194048)!==0){var C=d.lanes;C&=c.pendingLanes,m|=C,d.lanes=m,Xh(c,m)}}var $u={readContext:it,use:vl,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useLayoutEffect:Gn,useInsertionEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useSyncExternalStore:Gn,useId:Gn,useHostTransitionStatus:Gn,useFormState:Gn,useActionState:Gn,useOptimistic:Gn,useMemoCache:Gn,useCacheRefresh:Gn};$u.useEffectEvent=Gn;var Ib={readContext:it,use:vl,useCallback:function(c,d){return Si().memoizedState=[c,d===void 0?null:d],c},useContext:it,useEffect:bb,useImperativeHandle:function(c,d,m){m=m!=null?m.concat([c]):null,Bg(4194308,4,Eb.bind(null,d,c),m)},useLayoutEffect:function(c,d){return Bg(4194308,4,c,d)},useInsertionEffect:function(c,d){Bg(4,2,c,d)},useMemo:function(c,d){var m=Si();d=d===void 0?null:d;var C=c();if(Cc){po(!0);try{c()}finally{po(!1)}}return m.memoizedState=[C,d],C},useReducer:function(c,d,m){var C=Si();if(m!==void 0){var E=m(d);if(Cc){po(!0);try{m(d)}finally{po(!1)}}}else E=d;return C.memoizedState=C.baseState=E,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:E},C.queue=c,c=c.dispatch=Rx.bind(null,ht,c),[C.memoizedState,c]},useRef:function(c){var d=Si();return c={current:c},d.memoizedState=c},useState:function(c){c=yv(c);var d=c.queue,m=kb.bind(null,ht,d);return d.dispatch=m,[c.memoizedState,m]},useDebugValue:Tv,useDeferredValue:function(c,d){var m=Si();return Rv(m,c,d)},useTransition:function(){var c=yv(!1);return c=_b.bind(null,ht,c.queue,!0,!1),Si().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,d,m){var C=ht,E=Si();if(_t){if(m===void 0)throw Error(i(407));m=m()}else{if(m=d(),st===null)throw Error(i(349));(gt&127)!==0||cb(C,d,m)}E.memoizedState=m;var R={value:m,getSnapshot:d};return E.queue=R,bb(hb.bind(null,C,R,c),[c]),C.flags|=2048,yl(9,{destroy:void 0},ub.bind(null,C,R,m,d),null),m},useId:function(){var c=Si(),d=st.identifierPrefix;if(_t){var m=Ys,C=Hn;m=(C&~(1<<32-Qr(C)-1)).toString(32)+m,d="_"+d+"R_"+m,m=Og++,0<m&&(d+="H"+m.toString(32)),d+="_"}else m=uv++,d="_"+d+"r_"+m.toString(32)+"_";return c.memoizedState=d},useHostTransitionStatus:Mv,useFormState:Sv,useActionState:Sv,useOptimistic:function(c){var d=Si();d.memoizedState=d.baseState=c;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return d.queue=m,d=_v.bind(null,ht,!0,m),m.dispatch=d,[c,d]},useMemoCache:pv,useCacheRefresh:function(){return Si().memoizedState=Tx.bind(null,ht)},useEffectEvent:function(c){var d=Si(),m={impl:c};return d.memoizedState=m,function(){if((qe&2)!==0)throw Error(i(440));return m.impl.apply(void 0,arguments)}}},Pv={readContext:it,use:vl,useCallback:Rb,useContext:it,useEffect:Ev,useImperativeHandle:Tb,useInsertionEffect:xb,useLayoutEffect:Ab,useMemo:Db,useReducer:kg,useRef:Ng,useState:function(){return kg(_o)},useDebugValue:Tv,useDeferredValue:function(c,d){var m=ii();return Mb(m,ln.memoizedState,c,d)},useTransition:function(){var c=kg(_o)[0],d=ii().memoizedState;return[typeof c=="boolean"?c:Ad(c),d]},useSyncExternalStore:lb,useId:Lb,useHostTransitionStatus:Mv,useFormState:yb,useActionState:yb,useOptimistic:function(c,d){var m=ii();return Cv(m,ln,c,d)},useMemoCache:pv,useCacheRefresh:Fb};Pv.useEffectEvent=Sb;var Ts={readContext:it,use:vl,useCallback:Rb,useContext:it,useEffect:Ev,useImperativeHandle:Tb,useInsertionEffect:xb,useLayoutEffect:Ab,useMemo:Db,useReducer:vv,useRef:Ng,useState:function(){return vv(_o)},useDebugValue:Tv,useDeferredValue:function(c,d){var m=ii();return ln===null?Rv(m,c,d):Mb(m,ln.memoizedState,c,d)},useTransition:function(){var c=vv(_o)[0],d=ii().memoizedState;return[typeof c=="boolean"?c:Ad(c),d]},useSyncExternalStore:lb,useId:Lb,useHostTransitionStatus:Mv,useFormState:Av,useActionState:Av,useOptimistic:function(c,d){var m=ii();return ln!==null?Cv(m,ln,c,d):(m.baseState=c,[c,m.queue.dispatch])},useMemoCache:pv,useCacheRefresh:Fb};Ts.useEffectEvent=Sb;function Gg(c,d,m,C){d=c.memoizedState,m=m(C,d),m=m==null?d:g({},d,m),c.memoizedState=m,c.lanes===0&&(c.updateQueue.baseState=m)}var Td={enqueueSetState:function(c,d,m){c=c._reactInternals;var C=us(),E=Do(C);E.payload=d,m!=null&&(E.callback=m),d=pl(c,E,C),d!==null&&(yt(d,c,C),ml(d,c,C))},enqueueReplaceState:function(c,d,m){c=c._reactInternals;var C=us(),E=Do(C);E.tag=1,E.payload=d,m!=null&&(E.callback=m),d=pl(c,E,C),d!==null&&(yt(d,c,C),ml(d,c,C))},enqueueForceUpdate:function(c,d){c=c._reactInternals;var m=us(),C=Do(m);C.tag=2,d!=null&&(C.callback=d),d=pl(c,C,m),d!==null&&(yt(d,c,m),ml(d,c,m))}};function Ov(c,d,m,C,E,R,N){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(C,R,N):d.prototype&&d.prototype.isPureReactComponent?!Ou(m,C)||!Ou(E,R):!0}function Lv(c,d,m,C){c=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(m,C),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(m,C),d.state!==c&&Td.enqueueReplaceState(d,d.state,null)}function Cl(c,d){var m=d;if("ref"in d){m={};for(var C in d)C!=="ref"&&(m[C]=d[C])}if(c=c.defaultProps){m===d&&(m=g({},m));for(var E in c)m[E]===void 0&&(m[E]=c[E])}return m}function Hb(c){fd(c)}function Fv(c){console.error(c)}function kv(c){fd(c)}function zg(c,d){try{var m=c.onUncaughtError;m(d.value,{componentStack:d.stack})}catch(C){setTimeout(function(){throw C})}}function Gb(c,d,m){try{var C=c.onCaughtError;C(m.value,{componentStack:m.stack,errorBoundary:d.tag===1?d.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function Nv(c,d,m){return m=Do(m),m.tag=3,m.payload={element:null},m.callback=function(){zg(c,d)},m}function Bv(c){return c=Do(c),c.tag=3,c}function zb(c,d,m,C){var E=m.type.getDerivedStateFromError;if(typeof E=="function"){var R=C.value;c.payload=function(){return E(R)},c.callback=function(){Gb(d,m,C)}}var N=m.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(c.callback=function(){Gb(d,m,C),typeof E!="function"&&(ai===null?ai=new Set([this]):ai.add(this));var G=C.stack;this.componentDidCatch(C.value,{componentStack:G!==null?G:""})})}function xi(c,d,m,C,E){if(m.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){if(d=m.alternate,d!==null&&Ra(d,m,E,!0),m=zr.current,m!==null){switch(m.tag){case 31:case 13:return wr===null?ih():m.alternate===null&&zn===0&&(zn=3),m.flags&=-257,m.flags|=65536,m.lanes=E,C===Rg?m.flags|=16384:(d=m.updateQueue,d===null?m.updateQueue=new Set([C]):d.add(C),Id(c,C,E)),!1;case 22:return m.flags|=65536,C===Rg?m.flags|=16384:(d=m.updateQueue,d===null?(d={transitions:null,markerInstances:null,retryQueue:new Set([C])},m.updateQueue=d):(m=d.retryQueue,m===null?d.retryQueue=new Set([C]):m.add(C)),Id(c,C,E)),!1}throw Error(i(435,m.tag))}return Id(c,C,E),ih(),!1}if(_t)return d=zr.current,d!==null?((d.flags&65536)===0&&(d.flags|=256),d.flags|=65536,d.lanes=E,C!==Gu&&(c=Error(i(422),{cause:C}),Aa(ns(c,m)))):(C!==Gu&&(d=Error(i(423),{cause:C}),Aa(ns(d,m))),c=c.current.alternate,c.flags|=65536,E&=-E,c.lanes|=E,C=ns(C,m),E=Nv(c.stateNode,C,E),Xe(c,E),zn!==4&&(zn=2)),!1;var R=Error(i(520),{cause:C});if(R=ns(R,m),Mc===null?Mc=[R]:Mc.push(R),zn!==4&&(zn=2),d===null)return!0;C=ns(C,m),m=d;do{switch(m.tag){case 3:return m.flags|=65536,c=E&-E,m.lanes|=c,c=Nv(m.stateNode,C,c),Xe(m,c),!1;case 1:if(d=m.type,R=m.stateNode,(m.flags&128)===0&&(typeof d.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(ai===null||!ai.has(R))))return m.flags|=65536,E&=-E,m.lanes|=E,E=Bv(E),zb(E,c,m,C),Xe(m,E),!1}m=m.return}while(m!==null);return!1}var Vg=Error(i(461)),vi=!1;function Oi(c,d,m,C){d.child=c===null?_g(d,null,m,C):Ro(d,c.child,m,C)}function Iv(c,d,m,C,E){m=m.render;var R=d.ref;if("ref"in C){var N={};for(var G in C)G!=="ref"&&(N[G]=C[G])}else N=C;return fl(d),C=Lg(c,d,m,N,R,E),G=dv(),c!==null&&!vi?(fv(c,d,E),ri(c,d,E)):(_t&&G&&Sa(d),d.flags|=1,Oi(c,d,C,E),d.child)}function Sc(c,d,m,C,E){if(c===null){var R=m.type;return typeof R=="function"&&!vg(R)&&R.defaultProps===void 0&&m.compare===null?(d.tag=15,d.type=R,Ug(c,d,R,C,E)):(c=ba(m.type,null,C,d,d.mode,E),c.ref=d.ref,c.return=d,d.child=c)}if(R=c.child,!Xg(c,E)){var N=R.memoizedProps;if(m=m.compare,m=m!==null?m:Ou,m(N,C)&&c.ref===d.ref)return ri(c,d,E)}return d.flags|=1,c=Ir(R,C),c.ref=d.ref,c.return=d,d.child=c}function Ug(c,d,m,C,E){if(c!==null){var R=c.memoizedProps;if(Ou(R,C)&&c.ref===d.ref)if(vi=!1,d.pendingProps=C=R,Xg(c,E))(c.flags&131072)!==0&&(vi=!0);else return d.lanes=c.lanes,ri(c,d,E)}return Zu(c,d,m,C,E)}function xc(c,d,m,C){var E=C.children,R=c!==null?c.memoizedState:null;if(c===null&&d.stateNode===null&&(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),C.mode==="hidden"){if((d.flags&128)!==0){if(R=R!==null?R.baseLanes|m:m,c!==null){for(C=d.child=c.child,E=0;C!==null;)E=E|C.lanes|C.childLanes,C=C.sibling;C=E&~R}else C=0,d.child=null;return Ur(c,d,R,m,C)}if((m&536870912)!==0)d.memoizedState={baseLanes:0,cachePool:null},c!==null&&vd(d,R!==null?R.cachePool:null),R!==null?sb(d,R):lv(),ab(d);else return C=d.lanes=536870912,Ur(c,d,R!==null?R.baseLanes|m:m,m,C)}else R!==null?(vd(d,R.cachePool),sb(d,R),Vr(),d.memoizedState=null):(c!==null&&vd(d,null),lv(),Vr());return Oi(c,d,E,m),d.child}function Ma(c,d){return c!==null&&c.tag===22||d.stateNode!==null||(d.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.sibling}function Ur(c,d,m,C,E){var R=Tg();return R=R===null?null:{parent:mi._currentValue,pool:R},d.memoizedState={baseLanes:m,cachePool:R},c!==null&&vd(d,null),lv(),ab(d),c!==null&&Ra(c,d,C,!0),d.childLanes=E,null}function jg(c,d){return d=Yg({mode:d.mode,children:d.children},c.mode),d.ref=c.ref,c.child=d,d.return=c,d}function Vb(c,d,m){return Ro(d,c.child,null,m),c=jg(d,d.pendingProps),c.flags|=2,ni(d),d.memoizedState=null,c}function Wg(c,d,m){var C=d.pendingProps,E=(d.flags&128)!==0;if(d.flags&=-129,c===null){if(_t){if(C.mode==="hidden")return c=jg(d,C),d.lanes=536870912,Ma(null,c);if(cv(d),(c=fn)?(c=O5(c,is),c=c!==null&&c.data==="&"?c:null,c!==null&&(d.memoizedState={dehydrated:c,treeContext:xo!==null?{id:Hn,overflow:Ys}:null,retryLane:536870912,hydrationErrors:null},m=Bu(c),m.return=d,d.child=m,qn=d,fn=null)):c=null,c===null)throw xa(d);return d.lanes=536870912,null}return jg(d,C)}var R=c.memoizedState;if(R!==null){var N=R.dehydrated;if(cv(d),E)if(d.flags&256)d.flags&=-257,d=Vb(c,d,m);else if(d.memoizedState!==null)d.child=c.child,d.flags|=128,d=null;else throw Error(i(558));else if(vi||Ra(c,d,m,!1),E=(m&c.childLanes)!==0,vi||E){if(C=st,C!==null&&(N=Tm(C,m),N!==0&&N!==R.retryLane))throw R.retryLane=N,Cr(c,N),yt(C,c,N),Vg;ih(),d=Vb(c,d,m)}else c=R.treeContext,fn=Ia(N.nextSibling),qn=d,_t=!0,Ao=null,is=!1,c!==null&&wg(d,c),d=jg(d,C),d.flags|=4096;return d}return c=Ir(c.child,{mode:C.mode,children:C.children}),c.ref=d.ref,d.child=c,c.return=d,c}function Ac(c,d){var m=d.ref;if(m===null)c!==null&&c.ref!==null&&(d.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(i(284));(c===null||c.ref!==m)&&(d.flags|=4194816)}}function Zu(c,d,m,C,E){return fl(d),m=Lg(c,d,m,C,void 0,E),C=dv(),c!==null&&!vi?(fv(c,d,E),ri(c,d,E)):(_t&&C&&Sa(d),d.flags|=1,Oi(c,d,m,E),d.child)}function Rd(c,d,m,C,E,R){return fl(d),d.updateQueue=null,m=bc(d,C,m,E),ob(c),C=dv(),c!==null&&!vi?(fv(c,d,R),ri(c,d,R)):(_t&&C&&Sa(d),d.flags|=1,Oi(c,d,m,R),d.child)}function qg(c,d,m,C,E){if(fl(d),d.stateNode===null){var R=ol,N=m.contextType;typeof N=="object"&&N!==null&&(R=it(N)),R=new m(C,R),d.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,R.updater=Td,d.stateNode=R,R._reactInternals=d,R=d.stateNode,R.props=C,R.state=d.memoizedState,R.refs={},bd(d),N=m.contextType,R.context=typeof N=="object"&&N!==null?it(N):ol,R.state=d.memoizedState,N=m.getDerivedStateFromProps,typeof N=="function"&&(Gg(d,m,N,C),R.state=d.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(N=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),N!==R.state&&Td.enqueueReplaceState(R,R.state,null),Wu(d,C,R,E),wd(),R.state=d.memoizedState),typeof R.componentDidMount=="function"&&(d.flags|=4194308),C=!0}else if(c===null){R=d.stateNode;var G=d.memoizedProps,J=Cl(m,G);R.props=J;var ue=R.context,Ce=m.contextType;N=ol,typeof Ce=="object"&&Ce!==null&&(N=it(Ce));var xe=m.getDerivedStateFromProps;Ce=typeof xe=="function"||typeof R.getSnapshotBeforeUpdate=="function",G=d.pendingProps!==G,Ce||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(G||ue!==N)&&Lv(d,R,C,N),br=!1;var de=d.memoizedState;R.state=de,Wu(d,C,R,E),wd(),ue=d.memoizedState,G||de!==ue||br?(typeof xe=="function"&&(Gg(d,m,xe,C),ue=d.memoizedState),(J=br||Ov(d,m,J,C,de,ue,N))?(Ce||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(d.flags|=4194308)):(typeof R.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=C,d.memoizedState=ue),R.props=C,R.state=ue,R.context=N,C=J):(typeof R.componentDidMount=="function"&&(d.flags|=4194308),C=!1)}else{R=d.stateNode,av(c,d),N=d.memoizedProps,Ce=Cl(m,N),R.props=Ce,xe=d.pendingProps,de=R.context,ue=m.contextType,J=ol,typeof ue=="object"&&ue!==null&&(J=it(ue)),G=m.getDerivedStateFromProps,(ue=typeof G=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(N!==xe||de!==J)&&Lv(d,R,C,J),br=!1,de=d.memoizedState,R.state=de,Wu(d,C,R,E),wd();var ye=d.memoizedState;N!==xe||de!==ye||br||c!==null&&c.dependencies!==null&&md(c.dependencies)?(typeof G=="function"&&(Gg(d,m,G,C),ye=d.memoizedState),(Ce=br||Ov(d,m,Ce,C,de,ye,J)||c!==null&&c.dependencies!==null&&md(c.dependencies))?(ue||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(C,ye,J),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(C,ye,J)),typeof R.componentDidUpdate=="function"&&(d.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof R.componentDidUpdate!="function"||N===c.memoizedProps&&de===c.memoizedState||(d.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||N===c.memoizedProps&&de===c.memoizedState||(d.flags|=1024),d.memoizedProps=C,d.memoizedState=ye),R.props=C,R.state=ye,R.context=J,C=Ce):(typeof R.componentDidUpdate!="function"||N===c.memoizedProps&&de===c.memoizedState||(d.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||N===c.memoizedProps&&de===c.memoizedState||(d.flags|=1024),C=!1)}return R=C,Ac(c,d),C=(d.flags&128)!==0,R||C?(R=d.stateNode,m=C&&typeof m.getDerivedStateFromError!="function"?null:R.render(),d.flags|=1,c!==null&&C?(d.child=Ro(d,c.child,null,E),d.child=Ro(d,null,m,E)):Oi(c,d,m,E),d.memoizedState=R.state,c=d.child):c=ri(c,d,E),c}function Ub(c,d,m,C){return hl(),d.flags|=256,Oi(c,d,m,C),d.child}var Hv={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function lr(c){return{baseLanes:c,cachePool:sv()}}function Kg(c,d,m){return c=c!==null?c.childLanes&~m:0,d&&(c|=Er),c}function jb(c,d,m){var C=d.pendingProps,E=!1,R=(d.flags&128)!==0,N;if((N=R)||(N=c!==null&&c.memoizedState===null?!1:(Pt.current&2)!==0),N&&(E=!0,d.flags&=-129),N=(d.flags&32)!==0,d.flags&=-33,c===null){if(_t){if(E?Mo(d):Vr(),(c=fn)?(c=O5(c,is),c=c!==null&&c.data!=="&"?c:null,c!==null&&(d.memoizedState={dehydrated:c,treeContext:xo!==null?{id:Hn,overflow:Ys}:null,retryLane:536870912,hydrationErrors:null},m=Bu(c),m.return=d,d.child=m,qn=d,fn=null)):c=null,c===null)throw xa(d);return zx(c)?d.lanes=32:d.lanes=536870912,null}var G=C.children;return C=C.fallback,E?(Vr(),E=d.mode,G=Yg({mode:"hidden",children:G},E),C=ll(C,E,m,null),G.return=d,C.return=d,G.sibling=C,d.child=G,C=d.child,C.memoizedState=lr(m),C.childLanes=Kg(c,N,m),d.memoizedState=Hv,Ma(null,C)):(Mo(d),Dd(d,G))}var J=c.memoizedState;if(J!==null&&(G=J.dehydrated,G!==null)){if(R)d.flags&256?(Mo(d),d.flags&=-257,d=Gv(c,d,m)):d.memoizedState!==null?(Vr(),d.child=c.child,d.flags|=128,d=null):(Vr(),G=C.fallback,E=d.mode,C=Yg({mode:"visible",children:C.children},E),G=ll(G,E,m,null),G.flags|=2,C.return=d,G.return=d,C.sibling=G,d.child=C,Ro(d,c.child,null,m),C=d.child,C.memoizedState=lr(m),C.childLanes=Kg(c,N,m),d.memoizedState=Hv,d=Ma(null,C));else if(Mo(d),zx(G)){if(N=G.nextSibling&&G.nextSibling.dataset,N)var ue=N.dgst;N=ue,C=Error(i(419)),C.stack="",C.digest=N,Aa({value:C,source:null,stack:null}),d=Gv(c,d,m)}else if(vi||Ra(c,d,m,!1),N=(m&c.childLanes)!==0,vi||N){if(N=st,N!==null&&(C=Tm(N,m),C!==0&&C!==J.retryLane))throw J.retryLane=C,Cr(c,C),yt(N,c,C),Vg;Gx(G)||ih(),d=Gv(c,d,m)}else Gx(G)?(d.flags|=192,d.child=c.child,d=null):(c=J.treeContext,fn=Ia(G.nextSibling),qn=d,_t=!0,Ao=null,is=!1,c!==null&&wg(d,c),d=Dd(d,C.children),d.flags|=4096);return d}return E?(Vr(),G=C.fallback,E=d.mode,J=c.child,ue=J.sibling,C=Ir(J,{mode:"hidden",children:C.children}),C.subtreeFlags=J.subtreeFlags&65011712,ue!==null?G=Ir(ue,G):(G=ll(G,E,m,null),G.flags|=2),G.return=d,C.return=d,C.sibling=G,d.child=C,Ma(null,C),C=d.child,G=c.child.memoizedState,G===null?G=lr(m):(E=G.cachePool,E!==null?(J=mi._currentValue,E=E.parent!==J?{parent:J,pool:J}:E):E=sv(),G={baseLanes:G.baseLanes|m,cachePool:E}),C.memoizedState=G,C.childLanes=Kg(c,N,m),d.memoizedState=Hv,Ma(c.child,C)):(Mo(d),m=c.child,c=m.sibling,m=Ir(m,{mode:"visible",children:C.children}),m.return=d,m.sibling=null,c!==null&&(N=d.deletions,N===null?(d.deletions=[c],d.flags|=16):N.push(c)),d.child=m,d.memoizedState=null,m)}function Dd(c,d){return d=Yg({mode:"visible",children:d},c.mode),d.return=c,c.child=d}function Yg(c,d){return c=In(22,c,null,d),c.lanes=0,c}function Gv(c,d,m){return Ro(d,c.child,null,m),c=Dd(d,d.pendingProps.children),c.flags|=2,d.memoizedState=null,c}function Wb(c,d,m){c.lanes|=d;var C=c.alternate;C!==null&&(C.lanes|=d),xg(c.return,d,m)}function Ec(c,d,m,C,E,R){var N=c.memoizedState;N===null?c.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:C,tail:m,tailMode:E,treeForkCount:R}:(N.isBackwards=d,N.rendering=null,N.renderingStartTime=0,N.last=C,N.tail=m,N.tailMode=E,N.treeForkCount=R)}function jr(c,d,m){var C=d.pendingProps,E=C.revealOrder,R=C.tail;C=C.children;var N=Pt.current,G=(N&2)!==0;if(G?(N=N&1|2,d.flags|=128):N&=1,ae(Pt,N),Oi(c,d,C,m),C=_t?Hu:0,!G&&c!==null&&(c.flags&128)!==0)e:for(c=d.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&Wb(c,m,d);else if(c.tag===19)Wb(c,m,d);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===d)break e;for(;c.sibling===null;){if(c.return===null||c.return===d)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}switch(E){case"forwards":for(m=d.child,E=null;m!==null;)c=m.alternate,c!==null&&ss(c)===null&&(E=m),m=m.sibling;m=E,m===null?(E=d.child,d.child=null):(E=m.sibling,m.sibling=null),Ec(d,!1,E,m,R,C);break;case"backwards":case"unstable_legacy-backwards":for(m=null,E=d.child,d.child=null;E!==null;){if(c=E.alternate,c!==null&&ss(c)===null){d.child=E;break}c=E.sibling,E.sibling=m,m=E,E=c}Ec(d,!0,m,null,R,C);break;case"together":Ec(d,!1,null,null,void 0,C);break;default:d.memoizedState=null}return d.child}function ri(c,d,m){if(c!==null&&(d.dependencies=c.dependencies),ka|=d.lanes,(m&d.childLanes)===0)if(c!==null){if(Ra(c,d,m,!1),(m&d.childLanes)===0)return null}else return null;if(c!==null&&d.child!==c.child)throw Error(i(153));if(d.child!==null){for(c=d.child,m=Ir(c,c.pendingProps),d.child=m,m.return=d;c.sibling!==null;)c=c.sibling,m=m.sibling=Ir(c,c.pendingProps),m.return=d;m.sibling=null}return d.child}function Xg(c,d){return(c.lanes&d)!==0?!0:(c=c.dependencies,!!(c!==null&&md(c)))}function Dx(c,d,m){switch(d.tag){case 3:Ot(d,d.stateNode.containerInfo),Eo(d,mi,c.memoizedState.cache),hl();break;case 27:case 5:Be(d);break;case 4:Ot(d,d.stateNode.containerInfo);break;case 10:Eo(d,d.type,d.memoizedProps.value);break;case 31:if(d.memoizedState!==null)return d.flags|=128,cv(d),null;break;case 13:var C=d.memoizedState;if(C!==null)return C.dehydrated!==null?(Mo(d),d.flags|=128,null):(m&d.child.childLanes)!==0?jb(c,d,m):(Mo(d),c=ri(c,d,m),c!==null?c.sibling:null);Mo(d);break;case 19:var E=(c.flags&128)!==0;if(C=(m&d.childLanes)!==0,C||(Ra(c,d,m,!1),C=(m&d.childLanes)!==0),E){if(C)return jr(c,d,m);d.flags|=128}if(E=d.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),ae(Pt,Pt.current),C)break;return null;case 22:return d.lanes=0,xc(c,d,m,d.pendingProps);case 24:Eo(d,mi,c.memoizedState.cache)}return ri(c,d,m)}function $g(c,d,m){if(c!==null)if(c.memoizedProps!==d.pendingProps)vi=!0;else{if(!Xg(c,m)&&(d.flags&128)===0)return vi=!1,Dx(c,d,m);vi=(c.flags&131072)!==0}else vi=!1,_t&&(d.flags&1048576)!==0&&QC(d,Hu,d.index);switch(d.lanes=0,d.tag){case 16:e:{var C=d.pendingProps;if(c=gc(d.elementType),d.type=c,typeof c=="function")vg(c)?(C=Cl(c,C),d.tag=1,d=qg(null,d,c,C,m)):(d.tag=0,d=Zu(null,d,c,C,m));else{if(c!=null){var E=c.$$typeof;if(E===F){d.tag=11,d=Iv(null,d,c,C,m);break e}else if(E===B){d.tag=14,d=Sc(null,d,c,C,m);break e}}throw d=$(c)||c,Error(i(306,d,""))}}return d;case 0:return Zu(c,d,d.type,d.pendingProps,m);case 1:return C=d.type,E=Cl(C,d.pendingProps),qg(c,d,C,E,m);case 3:e:{if(Ot(d,d.stateNode.containerInfo),c===null)throw Error(i(387));C=d.pendingProps;var R=d.memoizedState;E=R.element,av(c,d),Wu(d,C,null,m);var N=d.memoizedState;if(C=N.cache,Eo(d,mi,C),C!==R.cache&&Ag(d,[mi],m,!0),wd(),C=N.element,R.isDehydrated)if(R={element:C,isDehydrated:!1,cache:N.cache},d.updateQueue.baseState=R,d.memoizedState=R,d.flags&256){d=Ub(c,d,C,m);break e}else if(C!==E){E=ns(Error(i(424)),d),Aa(E),d=Ub(c,d,C,m);break e}else{switch(c=d.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(fn=Ia(c.firstChild),qn=d,_t=!0,Ao=null,is=!0,m=_g(d,null,C,m),d.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(hl(),C===E){d=ri(c,d,m);break e}Oi(c,d,C,m)}d=d.child}return d;case 26:return Ac(c,d),c===null?(m=I5(d.type,null,d.pendingProps,null))?d.memoizedState=m:_t||(m=d.type,c=d.pendingProps,C=Xb(Ie.current).createElement(m),C[gi]=d,C[rr]=c,Rr(C,m,c),pi(C),d.stateNode=C):d.memoizedState=I5(d.type,c.memoizedProps,d.pendingProps,c.memoizedState),null;case 27:return Be(d),c===null&&_t&&(C=d.stateNode=k5(d.type,d.pendingProps,Ie.current),qn=d,is=!0,E=fn,oh(d.type)?(Vx=E,fn=Ia(C.firstChild)):fn=E),Oi(c,d,d.pendingProps.children,m),Ac(c,d),c===null&&(d.flags|=4194304),d.child;case 5:return c===null&&_t&&((E=C=fn)&&(C=JU(C,d.type,d.pendingProps,is),C!==null?(d.stateNode=C,qn=d,fn=Ia(C.firstChild),is=!1,E=!0):E=!1),E||xa(d)),Be(d),E=d.type,R=d.pendingProps,N=c!==null?c.memoizedProps:null,C=R.children,Bx(E,R)?C=null:N!==null&&Bx(E,N)&&(d.flags|=32),d.memoizedState!==null&&(E=Lg(c,d,wc,null,null,m),Zv._currentValue=E),Ac(c,d),Oi(c,d,C,m),d.child;case 6:return c===null&&_t&&((c=m=fn)&&(m=ej(m,d.pendingProps,is),m!==null?(d.stateNode=m,qn=d,fn=null,c=!0):c=!1),c||xa(d)),null;case 13:return jb(c,d,m);case 4:return Ot(d,d.stateNode.containerInfo),C=d.pendingProps,c===null?d.child=Ro(d,null,C,m):Oi(c,d,C,m),d.child;case 11:return Iv(c,d,d.type,d.pendingProps,m);case 7:return Oi(c,d,d.pendingProps,m),d.child;case 8:return Oi(c,d,d.pendingProps.children,m),d.child;case 12:return Oi(c,d,d.pendingProps.children,m),d.child;case 10:return C=d.pendingProps,Eo(d,d.type,C.value),Oi(c,d,C.children,m),d.child;case 9:return E=d.type._context,C=d.pendingProps.children,fl(d),E=it(E),C=C(E),d.flags|=1,Oi(c,d,C,m),d.child;case 14:return Sc(c,d,d.type,d.pendingProps,m);case 15:return Ug(c,d,d.type,d.pendingProps,m);case 19:return jr(c,d,m);case 31:return Wg(c,d,m);case 22:return xc(c,d,m,d.pendingProps);case 24:return fl(d),C=it(mi),c===null?(E=Tg(),E===null&&(E=st,R=tv(),E.pooledCache=R,R.refCount++,R!==null&&(E.pooledCacheLanes|=m),E=R),d.memoizedState={parent:C,cache:E},bd(d),Eo(d,mi,E)):((c.lanes&m)!==0&&(av(c,d),Wu(d,null,null,m),wd()),E=c.memoizedState,R=d.memoizedState,E.parent!==C?(E={parent:C,cache:C},d.memoizedState=E,d.lanes===0&&(d.memoizedState=d.updateQueue.baseState=E),Eo(d,mi,C)):(C=R.cache,Eo(d,mi,C),C!==E.cache&&Ag(d,[mi],m,!0))),Oi(c,d,d.pendingProps.children,m),d.child;case 29:throw d.pendingProps}throw Error(i(156,d.tag))}function _a(c){c.flags|=4}function Md(c,d,m,C,E){if((d=(c.mode&32)!==0)&&(d=!1),d){if(c.flags|=16777216,(E&335544128)===E)if(c.stateNode.complete)c.flags|=8192;else if(Un())c.flags|=8192;else throw Da=Rg,yd}else c.flags&=-16777217}function zv(c,d){if(d.type!=="stylesheet"||(d.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!U5(d))if(Un())c.flags|=8192;else throw Da=Rg,yd}function Po(c,d){d!==null&&(c.flags|=4),c.flags&16384&&(d=c.tag!==22?Zo():536870912,c.lanes|=d,Cn|=d)}function Pa(c,d){if(!_t)switch(c.tailMode){case"hidden":d=c.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?c.tail=null:m.sibling=null;break;case"collapsed":m=c.tail;for(var C=null;m!==null;)m.alternate!==null&&(C=m),m=m.sibling;C===null?d||c.tail===null?c.tail=null:c.tail.sibling=null:C.sibling=null}}function cn(c){var d=c.alternate!==null&&c.alternate.child===c.child,m=0,C=0;if(d)for(var E=c.child;E!==null;)m|=E.lanes|E.childLanes,C|=E.subtreeFlags&65011712,C|=E.flags&65011712,E.return=c,E=E.sibling;else for(E=c.child;E!==null;)m|=E.lanes|E.childLanes,C|=E.subtreeFlags,C|=E.flags,E.return=c,E=E.sibling;return c.subtreeFlags|=C,c.childLanes=m,d}function _d(c,d,m){var C=d.pendingProps;switch(bg(d),d.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(d),null;case 1:return cn(d),null;case 3:return m=d.stateNode,C=null,c!==null&&(C=c.memoizedState.cache),d.memoizedState.cache!==C&&(d.flags|=2048),Ta(mi),me(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(c===null||c.child===null)&&(zu(d)?_a(d):c===null||c.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Sg())),cn(d),null;case 26:var E=d.type,R=d.memoizedState;return c===null?(_a(d),R!==null?(cn(d),zv(d,R)):(cn(d),Md(d,E,null,C,m))):R?R!==c.memoizedState?(_a(d),cn(d),zv(d,R)):(cn(d),d.flags&=-16777217):(c=c.memoizedProps,c!==C&&_a(d),cn(d),Md(d,E,c,C,m)),null;case 27:if(Je(d),m=Ie.current,E=d.type,c!==null&&d.stateNode!=null)c.memoizedProps!==C&&_a(d);else{if(!C){if(d.stateNode===null)throw Error(i(166));return cn(d),null}c=Ee.current,zu(d)?JC(d):(c=k5(E,C,m),d.stateNode=c,_a(d))}return cn(d),null;case 5:if(Je(d),E=d.type,c!==null&&d.stateNode!=null)c.memoizedProps!==C&&_a(d);else{if(!C){if(d.stateNode===null)throw Error(i(166));return cn(d),null}if(R=Ee.current,zu(d))JC(d);else{var N=Xb(Ie.current);switch(R){case 1:R=N.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:R=N.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":R=N.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":R=N.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":R=N.createElement("div"),R.innerHTML="<script><\/script>",R=R.removeChild(R.firstChild);break;case"select":R=typeof C.is=="string"?N.createElement("select",{is:C.is}):N.createElement("select"),C.multiple?R.multiple=!0:C.size&&(R.size=C.size);break;default:R=typeof C.is=="string"?N.createElement(E,{is:C.is}):N.createElement(E)}}R[gi]=d,R[rr]=C;e:for(N=d.child;N!==null;){if(N.tag===5||N.tag===6)R.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===d)break e;for(;N.sibling===null;){if(N.return===null||N.return===d)break e;N=N.return}N.sibling.return=N.return,N=N.sibling}d.stateNode=R;e:switch(Rr(R,E,C),E){case"button":case"input":case"select":case"textarea":C=!!C.autoFocus;break e;case"img":C=!0;break e;default:C=!1}C&&_a(d)}}return cn(d),Md(d,d.type,c===null?null:c.memoizedProps,d.pendingProps,m),null;case 6:if(c&&d.stateNode!=null)c.memoizedProps!==C&&_a(d);else{if(typeof C!="string"&&d.stateNode===null)throw Error(i(166));if(c=Ie.current,zu(d)){if(c=d.stateNode,m=d.memoizedProps,C=null,E=qn,E!==null)switch(E.tag){case 27:case 5:C=E.memoizedProps}c[gi]=d,c=!!(c.nodeValue===m||C!==null&&C.suppressHydrationWarning===!0||A5(c.nodeValue,m)),c||xa(d,!0)}else c=Xb(c).createTextNode(C),c[gi]=d,d.stateNode=c}return cn(d),null;case 31:if(m=d.memoizedState,c===null||c.memoizedState!==null){if(C=zu(d),m!==null){if(c===null){if(!C)throw Error(i(318));if(c=d.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(i(557));c[gi]=d}else hl(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;cn(d),c=!1}else m=Sg(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=m),c=!0;if(!c)return d.flags&256?(ni(d),d):(ni(d),null);if((d.flags&128)!==0)throw Error(i(558))}return cn(d),null;case 13:if(C=d.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(E=zu(d),C!==null&&C.dehydrated!==null){if(c===null){if(!E)throw Error(i(318));if(E=d.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(i(317));E[gi]=d}else hl(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;cn(d),E=!1}else E=Sg(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=E),E=!0;if(!E)return d.flags&256?(ni(d),d):(ni(d),null)}return ni(d),(d.flags&128)!==0?(d.lanes=m,d):(m=C!==null,c=c!==null&&c.memoizedState!==null,m&&(C=d.child,E=null,C.alternate!==null&&C.alternate.memoizedState!==null&&C.alternate.memoizedState.cachePool!==null&&(E=C.alternate.memoizedState.cachePool.pool),R=null,C.memoizedState!==null&&C.memoizedState.cachePool!==null&&(R=C.memoizedState.cachePool.pool),R!==E&&(C.flags|=2048)),m!==c&&m&&(d.child.flags|=8192),Po(d,d.updateQueue),cn(d),null);case 4:return me(),c===null&&Ox(d.stateNode.containerInfo),cn(d),null;case 10:return Ta(d.type),cn(d),null;case 19:if(Z(Pt),C=d.memoizedState,C===null)return cn(d),null;if(E=(d.flags&128)!==0,R=C.rendering,R===null)if(E)Pa(C,!1);else{if(zn!==0||c!==null&&(c.flags&128)!==0)for(c=d.child;c!==null;){if(R=ss(c),R!==null){for(d.flags|=128,Pa(C,!1),c=R.updateQueue,d.updateQueue=c,Po(d,c),d.subtreeFlags=0,c=m,m=d.child;m!==null;)Nu(m,c),m=m.sibling;return ae(Pt,Pt.current&1|2),_t&&wa(d,C.treeForkCount),d.child}c=c.sibling}C.tail!==null&&un()>si&&(d.flags|=128,E=!0,Pa(C,!1),d.lanes=4194304)}else{if(!E)if(c=ss(R),c!==null){if(d.flags|=128,E=!0,c=c.updateQueue,d.updateQueue=c,Po(d,c),Pa(C,!0),C.tail===null&&C.tailMode==="hidden"&&!R.alternate&&!_t)return cn(d),null}else 2*un()-C.renderingStartTime>si&&m!==536870912&&(d.flags|=128,E=!0,Pa(C,!1),d.lanes=4194304);C.isBackwards?(R.sibling=d.child,d.child=R):(c=C.last,c!==null?c.sibling=R:d.child=R,C.last=R)}return C.tail!==null?(c=C.tail,C.rendering=c,C.tail=c.sibling,C.renderingStartTime=un(),c.sibling=null,m=Pt.current,ae(Pt,E?m&1|2:m&1),_t&&wa(d,C.treeForkCount),c):(cn(d),null);case 22:case 23:return ni(d),Sd(),C=d.memoizedState!==null,c!==null?c.memoizedState!==null!==C&&(d.flags|=8192):C&&(d.flags|=8192),C?(m&536870912)!==0&&(d.flags&128)===0&&(cn(d),d.subtreeFlags&6&&(d.flags|=8192)):cn(d),m=d.updateQueue,m!==null&&Po(d,m.retryQueue),m=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),C=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(C=d.memoizedState.cachePool.pool),C!==m&&(d.flags|=2048),c!==null&&Z(gl),null;case 24:return m=null,c!==null&&(m=c.memoizedState.cache),d.memoizedState.cache!==m&&(d.flags|=2048),Ta(mi),cn(d),null;case 25:return null;case 30:return null}throw Error(i(156,d.tag))}function Rs(c,d){switch(bg(d),d.tag){case 1:return c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 3:return Ta(mi),me(),c=d.flags,(c&65536)!==0&&(c&128)===0?(d.flags=c&-65537|128,d):null;case 26:case 27:case 5:return Je(d),null;case 31:if(d.memoizedState!==null){if(ni(d),d.alternate===null)throw Error(i(340));hl()}return c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 13:if(ni(d),c=d.memoizedState,c!==null&&c.dehydrated!==null){if(d.alternate===null)throw Error(i(340));hl()}return c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 19:return Z(Pt),null;case 4:return me(),null;case 10:return Ta(d.type),null;case 22:case 23:return ni(d),Sd(),c!==null&&Z(gl),c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 24:return Ta(mi),null;case 25:return null;default:return null}}function as(c,d){switch(bg(d),d.tag){case 3:Ta(mi),me();break;case 26:case 27:case 5:Je(d);break;case 4:me();break;case 31:d.memoizedState!==null&&ni(d);break;case 13:ni(d);break;case 19:Z(Pt);break;case 10:Ta(d.type);break;case 22:case 23:ni(d),Sd(),c!==null&&Z(gl);break;case 24:Ta(mi)}}function Ds(c,d){try{var m=d.updateQueue,C=m!==null?m.lastEffect:null;if(C!==null){var E=C.next;m=E;do{if((m.tag&c)===c){C=void 0;var R=m.create,N=m.inst;C=R(),N.destroy=C}m=m.next}while(m!==E)}}catch(G){Gt(d,d.return,G)}}function Yi(c,d,m){try{var C=d.updateQueue,E=C!==null?C.lastEffect:null;if(E!==null){var R=E.next;C=R;do{if((C.tag&c)===c){var N=C.inst,G=N.destroy;if(G!==void 0){N.destroy=void 0,E=d;var J=m,ue=G;try{ue()}catch(Ce){Gt(E,J,Ce)}}}C=C.next}while(C!==R)}}catch(Ce){Gt(d,d.return,Ce)}}function Xs(c){var d=c.updateQueue;if(d!==null){var m=c.stateNode;try{rb(d,m)}catch(C){Gt(c,c.return,C)}}}function Li(c,d,m){m.props=Cl(c.type,c.memoizedProps),m.state=c.memoizedState;try{m.componentWillUnmount()}catch(C){Gt(c,d,C)}}function Oo(c,d){try{var m=c.ref;if(m!==null){switch(c.tag){case 26:case 27:case 5:var C=c.stateNode;break;case 30:C=c.stateNode;break;default:C=c.stateNode}typeof m=="function"?c.refCleanup=m(C):m.current=C}}catch(E){Gt(c,d,E)}}function Xi(c,d){var m=c.ref,C=c.refCleanup;if(m!==null)if(typeof C=="function")try{C()}catch(E){Gt(c,d,E)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(E){Gt(c,d,E)}else m.current=null}function Pd(c){var d=c.type,m=c.memoizedProps,C=c.stateNode;try{e:switch(d){case"button":case"input":case"select":case"textarea":m.autoFocus&&C.focus();break e;case"img":m.src?C.src=m.src:m.srcSet&&(C.srcset=m.srcSet)}}catch(E){Gt(c,c.return,E)}}function Ai(c,d,m){try{var C=c.stateNode;KU(C,c.type,m,d),C[rr]=d}catch(E){Gt(c,c.return,E)}}function Tn(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&oh(c.type)||c.tag===4}function Dt(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||Tn(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&oh(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Oa(c,d,m){var C=c.tag;if(C===5||C===6)c=c.stateNode,d?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(c,d):(d=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,d.appendChild(c),m=m._reactRootContainer,m!=null||d.onclick!==null||(d.onclick=bo));else if(C!==4&&(C===27&&oh(c.type)&&(m=c.stateNode,d=null),c=c.child,c!==null))for(Oa(c,d,m),c=c.sibling;c!==null;)Oa(c,d,m),c=c.sibling}function Sr(c,d,m){var C=c.tag;if(C===5||C===6)c=c.stateNode,d?m.insertBefore(c,d):m.appendChild(c);else if(C!==4&&(C===27&&oh(c.type)&&(m=c.stateNode),c=c.child,c!==null))for(Sr(c,d,m),c=c.sibling;c!==null;)Sr(c,d,m),c=c.sibling}function Zg(c){var d=c.stateNode,m=c.memoizedProps;try{for(var C=c.type,E=d.attributes;E.length;)d.removeAttributeNode(E[0]);Rr(d,C,m),d[gi]=c,d[rr]=m}catch(R){Gt(c,c.return,R)}}var Ms=!1,gn=!1,$s=!1,qb=typeof WeakSet=="function"?WeakSet:Set,Fi=null;function Mx(c,d){if(c=c.containerInfo,kx=n1,c=YC(c),$m(c)){if("selectionStart"in c)var m={start:c.selectionStart,end:c.selectionEnd};else e:{m=(m=c.ownerDocument)&&m.defaultView||window;var C=m.getSelection&&m.getSelection();if(C&&C.rangeCount!==0){m=C.anchorNode;var E=C.anchorOffset,R=C.focusNode;C=C.focusOffset;try{m.nodeType,R.nodeType}catch{m=null;break e}var N=0,G=-1,J=-1,ue=0,Ce=0,xe=c,de=null;t:for(;;){for(var ye;xe!==m||E!==0&&xe.nodeType!==3||(G=N+E),xe!==R||C!==0&&xe.nodeType!==3||(J=N+C),xe.nodeType===3&&(N+=xe.nodeValue.length),(ye=xe.firstChild)!==null;)de=xe,xe=ye;for(;;){if(xe===c)break t;if(de===m&&++ue===E&&(G=N),de===R&&++Ce===C&&(J=N),(ye=xe.nextSibling)!==null)break;xe=de,de=xe.parentNode}xe=ye}m=G===-1||J===-1?null:{start:G,end:J}}else m=null}m=m||{start:0,end:0}}else m=null;for(Nx={focusedElem:c,selectionRange:m},n1=!1,Fi=d;Fi!==null;)if(d=Fi,c=d.child,(d.subtreeFlags&1028)!==0&&c!==null)c.return=d,Fi=c;else for(;Fi!==null;){switch(d=Fi,R=d.alternate,c=d.flags,d.tag){case 0:if((c&4)!==0&&(c=d.updateQueue,c=c!==null?c.events:null,c!==null))for(m=0;m<c.length;m++)E=c[m],E.ref.impl=E.nextImpl;break;case 11:case 15:break;case 1:if((c&1024)!==0&&R!==null){c=void 0,m=d,E=R.memoizedProps,R=R.memoizedState,C=m.stateNode;try{var je=Cl(m.type,E);c=C.getSnapshotBeforeUpdate(je,R),C.__reactInternalSnapshotBeforeUpdate=c}catch(tt){Gt(m,m.return,tt)}}break;case 3:if((c&1024)!==0){if(c=d.stateNode.containerInfo,m=c.nodeType,m===9)Hx(c);else if(m===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":Hx(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(i(163))}if(c=d.sibling,c!==null){c.return=d.return,Fi=c;break}Fi=d.return}}function Rn(c,d,m){var C=m.flags;switch(m.tag){case 0:case 11:case 15:Os(c,m),C&4&&Ds(5,m);break;case 1:if(Os(c,m),C&4)if(c=m.stateNode,d===null)try{c.componentDidMount()}catch(N){Gt(m,m.return,N)}else{var E=Cl(m.type,d.memoizedProps);d=d.memoizedState;try{c.componentDidUpdate(E,d,c.__reactInternalSnapshotBeforeUpdate)}catch(N){Gt(m,m.return,N)}}C&64&&Xs(m),C&512&&Oo(m,m.return);break;case 3:if(Os(c,m),C&64&&(c=m.updateQueue,c!==null)){if(d=null,m.child!==null)switch(m.child.tag){case 27:case 5:d=m.child.stateNode;break;case 1:d=m.child.stateNode}try{rb(c,d)}catch(N){Gt(m,m.return,N)}}break;case 27:d===null&&C&4&&Zg(m);case 26:case 5:Os(c,m),d===null&&C&4&&Pd(m),C&512&&Oo(m,m.return);break;case 12:Os(c,m);break;case 31:Os(c,m),C&4&&bl(c,m);break;case 13:Os(c,m),C&4&&Qu(c,m),C&64&&(c=m.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(m=b.bind(null,m),tj(c,m))));break;case 22:if(C=m.memoizedState!==null||Ms,!C){d=d!==null&&d.memoizedState!==null||gn,E=Ms;var R=gn;Ms=C,(gn=d)&&!R?xr(c,m,(m.subtreeFlags&8772)!==0):Os(c,m),Ms=E,gn=R}break;case 30:break;default:Os(c,m)}}function Od(c){var d=c.alternate;d!==null&&(c.alternate=null,Od(d)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(d=c.stateNode,d!==null&&tc(d)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var Qt=null,cr=!1;function _s(c,d,m){for(m=m.child;m!==null;)Qg(c,d,m),m=m.sibling}function Qg(c,d,m){if(Br&&typeof Br.onCommitFiberUnmount=="function")try{Br.onCommitFiberUnmount(gu,m)}catch{}switch(m.tag){case 26:gn||Xi(m,d),_s(c,d,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:gn||Xi(m,d);var C=Qt,E=cr;oh(m.type)&&(Qt=m.stateNode,cr=!1),_s(c,d,m),Yv(m.stateNode),Qt=C,cr=E;break;case 5:gn||Xi(m,d);case 6:if(C=Qt,E=cr,Qt=null,_s(c,d,m),Qt=C,cr=E,Qt!==null)if(cr)try{(Qt.nodeType===9?Qt.body:Qt.nodeName==="HTML"?Qt.ownerDocument.body:Qt).removeChild(m.stateNode)}catch(R){Gt(m,d,R)}else try{Qt.removeChild(m.stateNode)}catch(R){Gt(m,d,R)}break;case 18:Qt!==null&&(cr?(c=Qt,_5(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,m.stateNode),ap(c)):_5(Qt,m.stateNode));break;case 4:C=Qt,E=cr,Qt=m.stateNode.containerInfo,cr=!0,_s(c,d,m),Qt=C,cr=E;break;case 0:case 11:case 14:case 15:Yi(2,m,d),gn||Yi(4,m,d),_s(c,d,m);break;case 1:gn||(Xi(m,d),C=m.stateNode,typeof C.componentWillUnmount=="function"&&Li(m,d,C)),_s(c,d,m);break;case 21:_s(c,d,m);break;case 22:gn=(C=gn)||m.memoizedState!==null,_s(c,d,m),gn=C;break;default:_s(c,d,m)}}function bl(c,d){if(d.memoizedState===null&&(c=d.alternate,c!==null&&(c=c.memoizedState,c!==null))){c=c.dehydrated;try{ap(c)}catch(m){Gt(d,d.return,m)}}}function Qu(c,d){if(d.memoizedState===null&&(c=d.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{ap(c)}catch(m){Gt(d,d.return,m)}}function Vv(c){switch(c.tag){case 31:case 13:case 19:var d=c.stateNode;return d===null&&(d=c.stateNode=new qb),d;case 22:return c=c.stateNode,d=c._retryCache,d===null&&(d=c._retryCache=new qb),d;default:throw Error(i(435,c.tag))}}function Lo(c,d){var m=Vv(c);d.forEach(function(C){if(!m.has(C)){m.add(C);var E=A.bind(null,c,C);C.then(E,E)}})}function Ei(c,d){var m=d.deletions;if(m!==null)for(var C=0;C<m.length;C++){var E=m[C],R=c,N=d,G=N;e:for(;G!==null;){switch(G.tag){case 27:if(oh(G.type)){Qt=G.stateNode,cr=!1;break e}break;case 5:Qt=G.stateNode,cr=!1;break e;case 3:case 4:Qt=G.stateNode.containerInfo,cr=!0;break e}G=G.return}if(Qt===null)throw Error(i(160));Qg(R,N,E),Qt=null,cr=!1,R=E.alternate,R!==null&&(R.return=null),E.return=null}if(d.subtreeFlags&13886)for(d=d.child;d!==null;)wl(d,c),d=d.sibling}var Ps=null;function wl(c,d){var m=c.alternate,C=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:Ei(d,c),Ti(c),C&4&&(Yi(3,c,c.return),Ds(3,c),Yi(5,c,c.return));break;case 1:Ei(d,c),Ti(c),C&512&&(gn||m===null||Xi(m,m.return)),C&64&&Ms&&(c=c.updateQueue,c!==null&&(C=c.callbacks,C!==null&&(m=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=m===null?C:m.concat(C))));break;case 26:var E=Ps;if(Ei(d,c),Ti(c),C&512&&(gn||m===null||Xi(m,m.return)),C&4){var R=m!==null?m.memoizedState:null;if(C=c.memoizedState,m===null)if(C===null)if(c.stateNode===null){e:{C=c.type,m=c.memoizedProps,E=E.ownerDocument||E;t:switch(C){case"title":R=E.getElementsByTagName("title")[0],(!R||R[vo]||R[gi]||R.namespaceURI==="http://www.w3.org/2000/svg"||R.hasAttribute("itemprop"))&&(R=E.createElement(C),E.head.insertBefore(R,E.querySelector("head > title"))),Rr(R,C,m),R[gi]=c,pi(R),C=R;break e;case"link":var N=z5("link","href",E).get(C+(m.href||""));if(N){for(var G=0;G<N.length;G++)if(R=N[G],R.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&R.getAttribute("rel")===(m.rel==null?null:m.rel)&&R.getAttribute("title")===(m.title==null?null:m.title)&&R.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){N.splice(G,1);break t}}R=E.createElement(C),Rr(R,C,m),E.head.appendChild(R);break;case"meta":if(N=z5("meta","content",E).get(C+(m.content||""))){for(G=0;G<N.length;G++)if(R=N[G],R.getAttribute("content")===(m.content==null?null:""+m.content)&&R.getAttribute("name")===(m.name==null?null:m.name)&&R.getAttribute("property")===(m.property==null?null:m.property)&&R.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&R.getAttribute("charset")===(m.charSet==null?null:m.charSet)){N.splice(G,1);break t}}R=E.createElement(C),Rr(R,C,m),E.head.appendChild(R);break;default:throw Error(i(468,C))}R[gi]=c,pi(R),C=R}c.stateNode=C}else V5(E,c.type,c.stateNode);else c.stateNode=G5(E,C,c.memoizedProps);else R!==C?(R===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):R.count--,C===null?V5(E,c.type,c.stateNode):G5(E,C,c.memoizedProps)):C===null&&c.stateNode!==null&&Ai(c,c.memoizedProps,m.memoizedProps)}break;case 27:Ei(d,c),Ti(c),C&512&&(gn||m===null||Xi(m,m.return)),m!==null&&C&4&&Ai(c,c.memoizedProps,m.memoizedProps);break;case 5:if(Ei(d,c),Ti(c),C&512&&(gn||m===null||Xi(m,m.return)),c.flags&32){E=c.stateNode;try{rc(E,"")}catch(je){Gt(c,c.return,je)}}C&4&&c.stateNode!=null&&(E=c.memoizedProps,Ai(c,E,m!==null?m.memoizedProps:E)),C&1024&&($s=!0);break;case 6:if(Ei(d,c),Ti(c),C&4){if(c.stateNode===null)throw Error(i(162));C=c.memoizedProps,m=c.stateNode;try{m.nodeValue=C}catch(je){Gt(c,c.return,je)}}break;case 3:if(Qb=null,E=Ps,Ps=$b(d.containerInfo),Ei(d,c),Ps=E,Ti(c),C&4&&m!==null&&m.memoizedState.isDehydrated)try{ap(d.containerInfo)}catch(je){Gt(c,c.return,je)}$s&&($s=!1,Jg(c));break;case 4:C=Ps,Ps=$b(c.stateNode.containerInfo),Ei(d,c),Ti(c),Ps=C;break;case 12:Ei(d,c),Ti(c);break;case 31:Ei(d,c),Ti(c),C&4&&(C=c.updateQueue,C!==null&&(c.updateQueue=null,Lo(c,C)));break;case 13:Ei(d,c),Ti(c),c.child.flags&8192&&c.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(Ju=un()),C&4&&(C=c.updateQueue,C!==null&&(c.updateQueue=null,Lo(c,C)));break;case 22:E=c.memoizedState!==null;var J=m!==null&&m.memoizedState!==null,ue=Ms,Ce=gn;if(Ms=ue||E,gn=Ce||J,Ei(d,c),gn=Ce,Ms=ue,Ti(c),C&8192)e:for(d=c.stateNode,d._visibility=E?d._visibility&-2:d._visibility|1,E&&(m===null||J||Ms||gn||La(c)),m=null,d=c;;){if(d.tag===5||d.tag===26){if(m===null){J=m=d;try{if(R=J.stateNode,E)N=R.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{G=J.stateNode;var xe=J.memoizedProps.style,de=xe!=null&&xe.hasOwnProperty("display")?xe.display:null;G.style.display=de==null||typeof de=="boolean"?"":(""+de).trim()}}catch(je){Gt(J,J.return,je)}}}else if(d.tag===6){if(m===null){J=d;try{J.stateNode.nodeValue=E?"":J.memoizedProps}catch(je){Gt(J,J.return,je)}}}else if(d.tag===18){if(m===null){J=d;try{var ye=J.stateNode;E?P5(ye,!0):P5(J.stateNode,!1)}catch(je){Gt(J,J.return,je)}}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===c)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break e;for(;d.sibling===null;){if(d.return===null||d.return===c)break e;m===d&&(m=null),d=d.return}m===d&&(m=null),d.sibling.return=d.return,d=d.sibling}C&4&&(C=c.updateQueue,C!==null&&(m=C.retryQueue,m!==null&&(C.retryQueue=null,Lo(c,m))));break;case 19:Ei(d,c),Ti(c),C&4&&(C=c.updateQueue,C!==null&&(c.updateQueue=null,Lo(c,C)));break;case 30:break;case 21:break;default:Ei(d,c),Ti(c)}}function Ti(c){var d=c.flags;if(d&2){try{for(var m,C=c.return;C!==null;){if(Tn(C)){m=C;break}C=C.return}if(m==null)throw Error(i(160));switch(m.tag){case 27:var E=m.stateNode,R=Dt(c);Sr(c,R,E);break;case 5:var N=m.stateNode;m.flags&32&&(rc(N,""),m.flags&=-33);var G=Dt(c);Sr(c,G,N);break;case 3:case 4:var J=m.stateNode.containerInfo,ue=Dt(c);Oa(c,ue,J);break;default:throw Error(i(161))}}catch(Ce){Gt(c,c.return,Ce)}c.flags&=-3}d&4096&&(c.flags&=-4097)}function Jg(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var d=c;Jg(d),d.tag===5&&d.flags&1024&&d.stateNode.reset(),c=c.sibling}}function Os(c,d){if(d.subtreeFlags&8772)for(d=d.child;d!==null;)Rn(c,d.alternate,d),d=d.sibling}function La(c){for(c=c.child;c!==null;){var d=c;switch(d.tag){case 0:case 11:case 14:case 15:Yi(4,d,d.return),La(d);break;case 1:Xi(d,d.return);var m=d.stateNode;typeof m.componentWillUnmount=="function"&&Li(d,d.return,m),La(d);break;case 27:Yv(d.stateNode);case 26:case 5:Xi(d,d.return),La(d);break;case 22:d.memoizedState===null&&La(d);break;case 30:La(d);break;default:La(d)}c=c.sibling}}function xr(c,d,m){for(m=m&&(d.subtreeFlags&8772)!==0,d=d.child;d!==null;){var C=d.alternate,E=c,R=d,N=R.flags;switch(R.tag){case 0:case 11:case 15:xr(E,R,m),Ds(4,R);break;case 1:if(xr(E,R,m),C=R,E=C.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(ue){Gt(C,C.return,ue)}if(C=R,E=C.updateQueue,E!==null){var G=C.stateNode;try{var J=E.shared.hiddenCallbacks;if(J!==null)for(E.shared.hiddenCallbacks=null,E=0;E<J.length;E++)qu(J[E],G)}catch(ue){Gt(C,C.return,ue)}}m&&N&64&&Xs(R),Oo(R,R.return);break;case 27:Zg(R);case 26:case 5:xr(E,R,m),m&&C===null&&N&4&&Pd(R),Oo(R,R.return);break;case 12:xr(E,R,m);break;case 31:xr(E,R,m),m&&N&4&&bl(E,R);break;case 13:xr(E,R,m),m&&N&4&&Qu(E,R);break;case 22:R.memoizedState===null&&xr(E,R,m),Oo(R,R.return);break;case 30:break;default:xr(E,R,m)}d=d.sibling}}function Sl(c,d){var m=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),c=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(c=d.memoizedState.cachePool.pool),c!==m&&(c!=null&&c.refCount++,m!=null&&dc(m))}function Tc(c,d){c=null,d.alternate!==null&&(c=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==c&&(d.refCount++,c!=null&&dc(c))}function $i(c,d,m,C){if(d.subtreeFlags&10256)for(d=d.child;d!==null;)Uv(c,d,m,C),d=d.sibling}function Uv(c,d,m,C){var E=d.flags;switch(d.tag){case 0:case 11:case 15:$i(c,d,m,C),E&2048&&Ds(9,d);break;case 1:$i(c,d,m,C);break;case 3:$i(c,d,m,C),E&2048&&(c=null,d.alternate!==null&&(c=d.alternate.memoizedState.cache),d=d.memoizedState.cache,d!==c&&(d.refCount++,c!=null&&dc(c)));break;case 12:if(E&2048){$i(c,d,m,C),c=d.stateNode;try{var R=d.memoizedProps,N=R.id,G=R.onPostCommit;typeof G=="function"&&G(N,d.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(J){Gt(d,d.return,J)}}else $i(c,d,m,C);break;case 31:$i(c,d,m,C);break;case 13:$i(c,d,m,C);break;case 23:break;case 22:R=d.stateNode,N=d.alternate,d.memoizedState!==null?R._visibility&2?$i(c,d,m,C):Fa(c,d):R._visibility&2?$i(c,d,m,C):(R._visibility|=2,Zi(c,d,m,C,(d.subtreeFlags&10256)!==0||!1)),E&2048&&Sl(N,d);break;case 24:$i(c,d,m,C),E&2048&&Tc(d.alternate,d);break;default:$i(c,d,m,C)}}function Zi(c,d,m,C,E){for(E=E&&((d.subtreeFlags&10256)!==0||!1),d=d.child;d!==null;){var R=c,N=d,G=m,J=C,ue=N.flags;switch(N.tag){case 0:case 11:case 15:Zi(R,N,G,J,E),Ds(8,N);break;case 23:break;case 22:var Ce=N.stateNode;N.memoizedState!==null?Ce._visibility&2?Zi(R,N,G,J,E):Fa(R,N):(Ce._visibility|=2,Zi(R,N,G,J,E)),E&&ue&2048&&Sl(N.alternate,N);break;case 24:Zi(R,N,G,J,E),E&&ue&2048&&Tc(N.alternate,N);break;default:Zi(R,N,G,J,E)}d=d.sibling}}function Fa(c,d){if(d.subtreeFlags&10256)for(d=d.child;d!==null;){var m=c,C=d,E=C.flags;switch(C.tag){case 22:Fa(m,C),E&2048&&Sl(C.alternate,C);break;case 24:Fa(m,C),E&2048&&Tc(C.alternate,C);break;default:Fa(m,C)}d=d.sibling}}var Rc=8192;function os(c,d,m){if(c.subtreeFlags&Rc)for(c=c.child;c!==null;)ep(c,d,m),c=c.sibling}function ep(c,d,m){switch(c.tag){case 26:os(c,d,m),c.flags&Rc&&c.memoizedState!==null&&fj(m,Ps,c.memoizedState,c.memoizedProps);break;case 5:os(c,d,m);break;case 3:case 4:var C=Ps;Ps=$b(c.stateNode.containerInfo),os(c,d,m),Ps=C;break;case 22:c.memoizedState===null&&(C=c.alternate,C!==null&&C.memoizedState!==null?(C=Rc,Rc=16777216,os(c,d,m),Rc=C):os(c,d,m));break;default:os(c,d,m)}}function Dc(c){var d=c.alternate;if(d!==null&&(c=d.child,c!==null)){d.child=null;do d=c.sibling,c.sibling=null,c=d;while(c!==null)}}function xl(c){var d=c.deletions;if((c.flags&16)!==0){if(d!==null)for(var m=0;m<d.length;m++){var C=d[m];Fi=C,Kn(C,c)}Dc(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)Wr(c),c=c.sibling}function Wr(c){switch(c.tag){case 0:case 11:case 15:xl(c),c.flags&2048&&Yi(9,c,c.return);break;case 3:xl(c);break;case 12:xl(c);break;case 22:var d=c.stateNode;c.memoizedState!==null&&d._visibility&2&&(c.return===null||c.return.tag!==13)?(d._visibility&=-3,Ar(c)):xl(c);break;default:xl(c)}}function Ar(c){var d=c.deletions;if((c.flags&16)!==0){if(d!==null)for(var m=0;m<d.length;m++){var C=d[m];Fi=C,Kn(C,c)}Dc(c)}for(c=c.child;c!==null;){switch(d=c,d.tag){case 0:case 11:case 15:Yi(8,d,d.return),Ar(d);break;case 22:m=d.stateNode,m._visibility&2&&(m._visibility&=-3,Ar(d));break;default:Ar(d)}c=c.sibling}}function Kn(c,d){for(;Fi!==null;){var m=Fi;switch(m.tag){case 0:case 11:case 15:Yi(8,m,d);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var C=m.memoizedState.cachePool.pool;C!=null&&C.refCount++}break;case 24:dc(m.memoizedState.cache)}if(C=m.child,C!==null)C.return=m,Fi=C;else e:for(m=c;Fi!==null;){C=Fi;var E=C.sibling,R=C.return;if(Od(C),C===m){Fi=null;break e}if(E!==null){E.return=R,Fi=E;break e}Fi=R}}}var Fo={getCacheForType:function(c){var d=it(mi),m=d.data.get(c);return m===void 0&&(m=c(),d.data.set(c,m)),m},cacheSignal:function(){return it(mi).controller.signal}},dt=typeof WeakMap=="function"?WeakMap:Map,qe=0,st=null,vt=null,gt=0,Ft=0,ur=null,Ls=!1,Zs=!1,jv=!1,ls=0,zn=0,ka=0,Al=0,Ld=0,Er=0,Cn=0,Mc=null,Yn=null,Xn=!1,Ju=0,Wv=0,si=1/0,Vn=null,ai=null,Jt=0,cs=null,eh=null,Fs=0,th=0,nh=null,Fd=null,El=0,_c=null;function us(){return(qe&2)!==0&&gt!==0?gt&-gt:z.T!==null?fe():qf()}function St(){if(Er===0)if((gt&536870912)===0||_t){var c=pu;pu<<=1,(pu&3932160)===0&&(pu=262144),Er=c}else Er=536870912;return c=zr.current,c!==null&&(c.flags|=32),Er}function yt(c,d,m){(c===st&&(Ft===2||Ft===9)||c.cancelPendingCommit!==null)&&(Rl(c,0),yi(c,gt,Er,!1)),vu(c,m),((qe&2)===0||c!==st)&&(c===st&&((qe&2)===0&&(Al|=m),zn===4&&yi(c,gt,Er,!1)),Te(c))}function xt(c,d,m){if((qe&6)!==0)throw Error(i(327));var C=!m&&(d&127)===0&&(d&c.expiredLanes)===0||mu(c,d),E=C?kd(c,d):Tr(c,d,!0),R=C;do{if(E===0){Zs&&!C&&yi(c,d,0,!1);break}else{if(m=c.current.alternate,R&&!en(m)){E=Tr(c,d,!1),R=!1;continue}if(E===2){if(R=d,c.errorRecoveryDisabledLanes&R)var N=0;else N=c.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){d=N;e:{var G=c;E=Mc;var J=G.current.memoizedState.isDehydrated;if(J&&(Rl(G,N).flags|=256),N=Tr(G,N,!1),N!==2){if(jv&&!J){G.errorRecoveryDisabledLanes|=R,Al|=R,E=4;break e}R=Yn,Yn=E,R!==null&&(Yn===null?Yn=R:Yn.push.apply(Yn,R))}E=N}if(R=!1,E!==2)continue}}if(E===1){Rl(c,0),yi(c,d,0,!0);break}e:{switch(C=c,R=E,R){case 0:case 1:throw Error(i(345));case 4:if((d&4194048)!==d)break;case 6:yi(C,d,Er,!Ls);break e;case 2:Yn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((d&62914560)===d&&(E=Ju+300-un(),10<E)){if(yi(C,d,Er,!Ls),ec(C,0,!0)!==0)break e;Fs=d,C.timeoutHandle=D5(Mt.bind(null,C,m,Yn,Vn,Xn,d,Er,Al,Cn,Ls,R,"Throttled",-0,0),E);break e}Mt(C,m,Yn,Vn,Xn,d,Er,Al,Cn,Ls,R,null,-0,0)}}break}while(!0);Te(c)}function Mt(c,d,m,C,E,R,N,G,J,ue,Ce,xe,de,ye){if(c.timeoutHandle=-1,xe=d.subtreeFlags,xe&8192||(xe&16785408)===16785408){xe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:bo},ep(d,R,xe);var je=(R&62914560)===R?Ju-un():(R&4194048)===R?Wv-un():0;if(je=gj(xe,je),je!==null){Fs=R,c.cancelPendingCommit=je(No.bind(null,c,d,R,m,C,E,N,G,J,Ce,xe,null,de,ye)),yi(c,R,N,!ue);return}}No(c,d,R,m,C,E,N,G,J)}function en(c){for(var d=c;;){var m=d.tag;if((m===0||m===11||m===15)&&d.flags&16384&&(m=d.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var C=0;C<m.length;C++){var E=m[C],R=E.getSnapshot;E=E.value;try{if(!yr(R(),E))return!1}catch{return!1}}if(m=d.child,d.subtreeFlags&16384&&m!==null)m.return=d,d=m;else{if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function yi(c,d,m,C){d&=~Ld,d&=~Al,c.suspendedLanes|=d,c.pingedLanes&=~d,C&&(c.warmLanes|=d),C=c.expirationTimes;for(var E=d;0<E;){var R=31-Qr(E),N=1<<R;C[R]=-1,E&=~N}m!==0&&yu(c,m,d)}function Qs(){return(qe&6)===0?(Ne(0),!1):!0}function Tl(){if(vt!==null){if(Ft===0)var c=vt.return;else c=vt,Ea=dl=null,gv(c),vc=null,yc=0,c=vt;for(;c!==null;)as(c.alternate,c),c=c.return;vt=null}}function Rl(c,d){var m=c.timeoutHandle;m!==-1&&(c.timeoutHandle=-1,$U(m)),m=c.cancelPendingCommit,m!==null&&(c.cancelPendingCommit=null,m()),Fs=0,Tl(),st=c,vt=m=Ir(c.current,null),gt=d,Ft=0,ur=null,Ls=!1,Zs=mu(c,d),jv=!1,Cn=Er=Ld=Al=ka=zn=0,Yn=Mc=null,Xn=!1,(d&8)!==0&&(d|=d&32);var C=c.entangledLanes;if(C!==0)for(c=c.entanglements,C&=d;0<C;){var E=31-Qr(C),R=1<<E;d|=c[E],C&=~R}return ls=d,gd(),m}function Na(c,d){ht=null,z.H=$u,d===fc||d===mt?(d=pc(),Ft=3):d===yd?(d=pc(),Ft=4):Ft=d===Vg?8:d!==null&&typeof d=="object"&&typeof d.then=="function"?6:1,ur=d,vt===null&&(zn=1,zg(c,ns(d,c.current)))}function Un(){var c=zr.current;return c===null?!0:(gt&4194048)===gt?wr===null:(gt&62914560)===gt||(gt&536870912)!==0?c===wr:!1}function ko(){var c=z.H;return z.H=$u,c===null?$u:c}function Dl(){var c=z.A;return z.A=Fo,c}function ih(){zn=4,Ls||(gt&4194048)!==gt&&zr.current!==null||(Zs=!0),(ka&134217727)===0&&(Al&134217727)===0||st===null||yi(st,gt,Er,!1)}function Tr(c,d,m){var C=qe;qe|=2;var E=ko(),R=Dl();(st!==c||gt!==d)&&(Vn=null,Rl(c,d)),d=!1;var N=zn;e:do try{if(Ft!==0&&vt!==null){var G=vt,J=ur;switch(Ft){case 8:Tl(),N=6;break e;case 3:case 2:case 9:case 6:zr.current===null&&(d=!0);var ue=Ft;if(Ft=0,ur=null,Pc(c,G,J,ue),m&&Zs){N=0;break e}break;default:ue=Ft,Ft=0,ur=null,Pc(c,G,J,ue)}}rh(),N=zn;break}catch(Ce){Na(c,Ce)}while(!0);return d&&c.shellSuspendCounter++,Ea=dl=null,qe=C,z.H=E,z.A=R,vt===null&&(st=null,gt=0,gd()),N}function rh(){for(;vt!==null;)tp(vt)}function kd(c,d){var m=qe;qe|=2;var C=ko(),E=Dl();st!==c||gt!==d?(Vn=null,si=un()+500,Rl(c,d)):Zs=mu(c,d);e:do try{if(Ft!==0&&vt!==null){d=vt;var R=ur;t:switch(Ft){case 1:Ft=0,ur=null,Pc(c,d,R,1);break;case 2:case 9:if(Gr(R)){Ft=0,ur=null,Nd(d);break}d=function(){Ft!==2&&Ft!==9||st!==c||(Ft=7),Te(c)},R.then(d,d);break e;case 3:Ft=7;break e;case 4:Ft=5;break e;case 7:Gr(R)?(Ft=0,ur=null,Nd(d)):(Ft=0,ur=null,Pc(c,d,R,7));break;case 5:var N=null;switch(vt.tag){case 26:N=vt.memoizedState;case 5:case 27:var G=vt;if(N?U5(N):G.stateNode.complete){Ft=0,ur=null;var J=G.sibling;if(J!==null)vt=J;else{var ue=G.return;ue!==null?(vt=ue,Ml(ue)):vt=null}break t}}Ft=0,ur=null,Pc(c,d,R,5);break;case 6:Ft=0,ur=null,Pc(c,d,R,6);break;case 8:Tl(),zn=6;break e;default:throw Error(i(462))}}qr();break}catch(Ce){Na(c,Ce)}while(!0);return Ea=dl=null,z.H=C,z.A=E,qe=m,vt!==null?0:(st=null,gt=0,gd(),zn)}function qr(){for(;vt!==null&&!Wt();)tp(vt)}function tp(c){var d=$g(c.alternate,c,ls);c.memoizedProps=c.pendingProps,d===null?Ml(c):vt=d}function Nd(c){var d=c,m=d.alternate;switch(d.tag){case 15:case 0:d=Rd(m,d,d.pendingProps,d.type,void 0,gt);break;case 11:d=Rd(m,d,d.pendingProps,d.type.render,d.ref,gt);break;case 5:gv(d);default:as(m,d),d=vt=Nu(d,ls),d=$g(m,d,ls)}c.memoizedProps=c.pendingProps,d===null?Ml(c):vt=d}function Pc(c,d,m,C){Ea=dl=null,gv(d),vc=null,yc=0;var E=d.return;try{if(xi(c,E,d,m,gt)){zn=1,zg(c,ns(m,c.current)),vt=null;return}}catch(R){if(E!==null)throw vt=E,R;zn=1,zg(c,ns(m,c.current)),vt=null;return}d.flags&32768?(_t||C===1?c=!0:Zs||(gt&536870912)!==0?c=!1:(Ls=c=!0,(C===2||C===9||C===3||C===6)&&(C=zr.current,C!==null&&C.tag===13&&(C.flags|=16384))),Bd(d,c)):Ml(d)}function Ml(c){var d=c;do{if((d.flags&32768)!==0){Bd(d,Ls);return}c=d.return;var m=_d(d.alternate,d,ls);if(m!==null){vt=m;return}if(d=d.sibling,d!==null){vt=d;return}vt=d=c}while(d!==null);zn===0&&(zn=5)}function Bd(c,d){do{var m=Rs(c.alternate,c);if(m!==null){m.flags&=32767,vt=m;return}if(m=c.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!d&&(c=c.sibling,c!==null)){vt=c;return}vt=c=m}while(c!==null);zn=6,vt=null}function No(c,d,m,C,E,R,N,G,J){c.cancelPendingCommit=null;do sh();while(Jt!==0);if((qe&6)!==0)throw Error(i(327));if(d!==null){if(d===c.current)throw Error(i(177));if(R=d.lanes|d.childLanes,R|=_i,Wf(c,m,R,N,G,J),c===st&&(vt=st=null,gt=0),eh=d,cs=c,Fs=m,th=R,nh=E,Fd=C,(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,P(qt,function(){return np(),null})):(c.callbackNode=null,c.callbackPriority=0),C=(d.flags&13878)!==0,(d.subtreeFlags&13878)!==0||C){C=z.T,z.T=null,E=K.p,K.p=2,N=qe,qe|=4;try{Mx(c,d,m)}finally{qe=N,K.p=E,z.T=C}}Jt=1,Ci(),Bo(),Oc()}}function Ci(){if(Jt===1){Jt=0;var c=cs,d=eh,m=(d.flags&13878)!==0;if((d.subtreeFlags&13878)!==0||m){m=z.T,z.T=null;var C=K.p;K.p=2;var E=qe;qe|=4;try{wl(d,c);var R=Nx,N=YC(c.containerInfo),G=R.focusedElem,J=R.selectionRange;if(N!==G&&G&&G.ownerDocument&&dn(G.ownerDocument.documentElement,G)){if(J!==null&&$m(G)){var ue=J.start,Ce=J.end;if(Ce===void 0&&(Ce=ue),"selectionStart"in G)G.selectionStart=ue,G.selectionEnd=Math.min(Ce,G.value.length);else{var xe=G.ownerDocument||document,de=xe&&xe.defaultView||window;if(de.getSelection){var ye=de.getSelection(),je=G.textContent.length,tt=Math.min(J.start,je),mn=J.end===void 0?tt:Math.min(J.end,je);!ye.extend&&tt>mn&&(N=mn,mn=tt,tt=N);var ie=Lu(G,tt),te=Lu(G,mn);if(ie&&te&&(ye.rangeCount!==1||ye.anchorNode!==ie.node||ye.anchorOffset!==ie.offset||ye.focusNode!==te.node||ye.focusOffset!==te.offset)){var ce=xe.createRange();ce.setStart(ie.node,ie.offset),ye.removeAllRanges(),tt>mn?(ye.addRange(ce),ye.extend(te.node,te.offset)):(ce.setEnd(te.node,te.offset),ye.addRange(ce))}}}}for(xe=[],ye=G;ye=ye.parentNode;)ye.nodeType===1&&xe.push({element:ye,left:ye.scrollLeft,top:ye.scrollTop});for(typeof G.focus=="function"&&G.focus(),G=0;G<xe.length;G++){var we=xe[G];we.element.scrollLeft=we.left,we.element.scrollTop=we.top}}n1=!!kx,Nx=kx=null}finally{qe=E,K.p=C,z.T=m}}c.current=d,Jt=2}}function Bo(){if(Jt===2){Jt=0;var c=cs,d=eh,m=(d.flags&8772)!==0;if((d.subtreeFlags&8772)!==0||m){m=z.T,z.T=null;var C=K.p;K.p=2;var E=qe;qe|=4;try{Rn(c,d.alternate,d)}finally{qe=E,K.p=C,z.T=m}}Jt=3}}function Oc(){if(Jt===4||Jt===3){Jt=0,Vt();var c=cs,d=eh,m=Fs,C=Fd;(d.subtreeFlags&10256)!==0||(d.flags&10256)!==0?Jt=5:(Jt=0,eh=cs=null,Ba(c,c.pendingLanes));var E=c.pendingLanes;if(E===0&&(ai=null),bu(m),d=d.stateNode,Br&&typeof Br.onCommitFiberRoot=="function")try{Br.onCommitFiberRoot(gu,d,void 0,(d.current.flags&128)===128)}catch{}if(C!==null){d=z.T,E=K.p,K.p=2,z.T=null;try{for(var R=c.onRecoverableError,N=0;N<C.length;N++){var G=C[N];R(G.value,{componentStack:G.stack})}}finally{z.T=d,K.p=E}}(Fs&3)!==0&&sh(),Te(c),E=c.pendingLanes,(m&261930)!==0&&(E&42)!==0?c===_c?El++:(El=0,_c=c):El=0,Ne(0)}}function Ba(c,d){(c.pooledCacheLanes&=d)===0&&(d=c.pooledCache,d!=null&&(c.pooledCache=null,dc(d)))}function sh(){return Ci(),Bo(),Oc(),np()}function np(){if(Jt!==5)return!1;var c=cs,d=th;th=0;var m=bu(Fs),C=z.T,E=K.p;try{K.p=32>m?32:m,z.T=null,m=nh,nh=null;var R=cs,N=Fs;if(Jt=0,eh=cs=null,Fs=0,(qe&6)!==0)throw Error(i(331));var G=qe;if(qe|=4,Wr(R.current),Uv(R,R.current,N,m),qe=G,Ne(0,!1),Br&&typeof Br.onPostCommitFiberRoot=="function")try{Br.onPostCommitFiberRoot(gu,R)}catch{}return!0}finally{K.p=E,z.T=C,Ba(c,d)}}function qv(c,d,m){d=ns(m,d),d=Nv(c.stateNode,d,2),c=pl(c,d,2),c!==null&&(vu(c,2),Te(c))}function Gt(c,d,m){if(c.tag===3)qv(c,c,m);else for(;d!==null;){if(d.tag===3){qv(d,c,m);break}else if(d.tag===1){var C=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(ai===null||!ai.has(C))){c=ns(m,c),m=Bv(2),C=pl(d,m,2),C!==null&&(zb(m,C,d,c),vu(C,2),Te(C));break}}d=d.return}}function Id(c,d,m){var C=c.pingCache;if(C===null){C=c.pingCache=new dt;var E=new Set;C.set(d,E)}else E=C.get(d),E===void 0&&(E=new Set,C.set(d,E));E.has(m)||(jv=!0,E.add(m),c=f.bind(null,c,d,m),d.then(c,c))}function f(c,d,m){var C=c.pingCache;C!==null&&C.delete(d),c.pingedLanes|=c.suspendedLanes&m,c.warmLanes&=~m,st===c&&(gt&m)===m&&(zn===4||zn===3&&(gt&62914560)===gt&&300>un()-Ju?(qe&2)===0&&Rl(c,0):Ld|=m,Cn===gt&&(Cn=0)),Te(c)}function p(c,d){d===0&&(d=Zo()),c=Cr(c,d),c!==null&&(vu(c,d),Te(c))}function b(c){var d=c.memoizedState,m=0;d!==null&&(m=d.retryLane),p(c,m)}function A(c,d){var m=0;switch(c.tag){case 31:case 13:var C=c.stateNode,E=c.memoizedState;E!==null&&(m=E.retryLane);break;case 19:C=c.stateNode;break;case 22:C=c.stateNode._retryCache;break;default:throw Error(i(314))}C!==null&&C.delete(d),p(c,m)}function P(c,d){return Zt(c,d)}var O=null,I=null,ee=!1,ge=!1,Ae=!1,_e=0;function Te(c){c!==I&&c.next===null&&(I===null?O=I=c:I=I.next=c),ge=!0,ee||(ee=!0,se())}function Ne(c,d){if(!Ae&&ge){Ae=!0;do for(var m=!1,C=O;C!==null;){if(c!==0){var E=C.pendingLanes;if(E===0)var R=0;else{var N=C.suspendedLanes,G=C.pingedLanes;R=(1<<31-Qr(42|c)+1)-1,R&=E&~(N&~G),R=R&201326741?R&201326741|1:R?R|2:0}R!==0&&(m=!0,he(C,R))}else R=gt,R=ec(C,C===st?R:0,C.cancelPendingCommit!==null||C.timeoutHandle!==-1),(R&3)===0||mu(C,R)||(m=!0,he(C,R));C=C.next}while(m);Ae=!1}}function lt(){ki()}function ki(){ge=ee=!1;var c=0;_e!==0&&XU()&&(c=_e);for(var d=un(),m=null,C=O;C!==null;){var E=C.next,R=ah(C,d);R===0?(C.next=null,m===null?O=E:m.next=E,E===null&&(I=m)):(m=C,(c!==0||(R&3)!==0)&&(ge=!0)),C=E}Jt!==0&&Jt!==5||Ne(c),_e!==0&&(_e=0)}function ah(c,d){for(var m=c.suspendedLanes,C=c.pingedLanes,E=c.expirationTimes,R=c.pendingLanes&-62914561;0<R;){var N=31-Qr(R),G=1<<N,J=E[N];J===-1?((G&m)===0||(G&C)!==0)&&(E[N]=AC(G,d)):J<=d&&(c.expiredLanes|=G),R&=~G}if(d=st,m=gt,m=ec(c,c===d?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),C=c.callbackNode,m===0||c===d&&(Ft===2||Ft===9)||c.cancelPendingCommit!==null)return C!==null&&C!==null&&Ye(C),c.callbackNode=null,c.callbackPriority=0;if((m&3)===0||mu(c,m)){if(d=m&-m,d===c.callbackPriority)return d;switch(C!==null&&Ye(C),bu(m)){case 2:case 8:m=fo;break;case 32:m=qt;break;case 268435456:m=go;break;default:m=qt}return C=_l.bind(null,c),m=Zt(m,C),c.callbackPriority=d,c.callbackNode=m,d}return C!==null&&C!==null&&Ye(C),c.callbackPriority=2,c.callbackNode=null,2}function _l(c,d){if(Jt!==0&&Jt!==5)return c.callbackNode=null,c.callbackPriority=0,null;var m=c.callbackNode;if(sh()&&c.callbackNode!==m)return null;var C=gt;return C=ec(c,c===st?C:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),C===0?null:(xt(c,C,d),ah(c,un()),c.callbackNode!=null&&c.callbackNode===m?_l.bind(null,c):null)}function he(c,d){if(sh())return null;xt(c,d,!0)}function se(){ZU(function(){(qe&6)!==0?Zt(fa,lt):ki()})}function fe(){if(_e===0){var c=To;c===0&&(c=Uf,Uf<<=1,(Uf&261888)===0&&(Uf=256)),_e=c}return _e}function De(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:ed(""+c)}function Qe(c,d){var m=d.ownerDocument.createElement("input");return m.name=d.name,m.value=d.value,c.id&&m.setAttribute("form",c.id),d.parentNode.insertBefore(m,d),c=new FormData(c),m.parentNode.removeChild(m),c}function jn(c,d,m,C,E){if(d==="submit"&&m&&m.stateNode===E){var R=De((E[rr]||null).action),N=C.submitter;N&&(d=(d=N[rr]||null)?De(d.formAction):N.getAttribute("formAction"),d!==null&&(R=d,N=null));var G=new id("action","action",null,C,E);c.push({event:G,listeners:[{instance:null,listener:function(){if(C.defaultPrevented){if(_e!==0){var J=N?Qe(E,N):new FormData(E);Dv(m,{pending:!0,data:J,method:E.method,action:R},null,J)}}else typeof R=="function"&&(G.preventDefault(),J=N?Qe(E,N):new FormData(E),Dv(m,{pending:!0,data:J,method:E.method,action:R},R,J))},currentTarget:E}]})}}for(var et=0;et<dd.length;et++){var Bt=dd[et],Ni=Bt.toLowerCase(),Ut=Bt[0].toUpperCase()+Bt.slice(1);bs(Ni,"on"+Ut)}bs(pg,"onAnimationEnd"),bs(hd,"onAnimationIteration"),bs(Qm,"onAnimationStart"),bs("dblclick","onDoubleClick"),bs("focusin","onFocus"),bs("focusout","onBlur"),bs($C,"onTransitionRun"),bs(wx,"onTransitionStart"),bs(ZC,"onTransitionCancel"),bs(Jm,"onTransitionEnd"),Jr("onMouseEnter",["mouseout","mouseover"]),Jr("onMouseLeave",["mouseout","mouseover"]),Jr("onPointerEnter",["pointerout","pointerover"]),Jr("onPointerLeave",["pointerout","pointerover"]),nl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),nl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),nl("onBeforeInput",["compositionend","keypress","textInput","paste"]),nl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),nl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),nl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ks="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_x=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ks));function b5(c,d){d=(d&4)!==0;for(var m=0;m<c.length;m++){var C=c[m],E=C.event;C=C.listeners;e:{var R=void 0;if(d)for(var N=C.length-1;0<=N;N--){var G=C[N],J=G.instance,ue=G.currentTarget;if(G=G.listener,J!==R&&E.isPropagationStopped())break e;R=G,E.currentTarget=ue;try{R(E)}catch(Ce){fd(Ce)}E.currentTarget=null,R=J}else for(N=0;N<C.length;N++){if(G=C[N],J=G.instance,ue=G.currentTarget,G=G.listener,J!==R&&E.isPropagationStopped())break e;R=G,E.currentTarget=ue;try{R(E)}catch(Ce){fd(Ce)}E.currentTarget=null,R=J}}}}function kt(c,d){var m=d[ga];m===void 0&&(m=d[ga]=new Set);var C=c+"__bubble";m.has(C)||(w5(d,c,2,!1),m.add(C))}function Px(c,d,m){var C=0;d&&(C|=4),w5(m,c,C,d)}var Kb="_reactListening"+Math.random().toString(36).slice(2);function Ox(c){if(!c[Kb]){c[Kb]=!0,yo.forEach(function(m){m!=="selectionchange"&&(_x.has(m)||Px(m,!1,c),Px(m,!0,c))});var d=c.nodeType===9?c:c.ownerDocument;d===null||d[Kb]||(d[Kb]=!0,Px("selectionchange",!1,d))}}function w5(c,d,m,C){switch($5(d)){case 2:var E=vj;break;case 8:E=yj;break;default:E=Kx}m=E.bind(null,d,m,c),E=void 0,!Fm||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(E=!0),C?E!==void 0?c.addEventListener(d,m,{capture:!0,passive:E}):c.addEventListener(d,m,!0):E!==void 0?c.addEventListener(d,m,{passive:E}):c.addEventListener(d,m,!1)}function Lx(c,d,m,C,E){var R=C;if((d&1)===0&&(d&2)===0&&C!==null)e:for(;;){if(C===null)return;var N=C.tag;if(N===3||N===4){var G=C.stateNode.containerInfo;if(G===E)break;if(N===4)for(N=C.return;N!==null;){var J=N.tag;if((J===3||J===4)&&N.stateNode.containerInfo===E)return;N=N.return}for(;G!==null;){if(N=nc(G),N===null)return;if(J=N.tag,J===5||J===6||J===26||J===27){C=R=N;continue e}G=G.parentNode}}C=C.return}Lm(function(){var ue=R,Ce=ng(m),xe=[];e:{var de=Cs.get(c);if(de!==void 0){var ye=id,je=c;switch(c){case"keypress":if(nd(m)===0)break e;case"keydown":case"keyup":ye=oc;break;case"focusin":je="focus",ye=ag;break;case"focusout":je="blur",ye=ag;break;case"beforeblur":case"afterblur":ye=ag;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=km;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=_C;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=NC;break;case pg:case hd:case Qm:ye=yx;break;case Jm:ye=bx;break;case"scroll":case"scrollend":ye=DC;break;case"wheel":ye=IC;break;case"copy":case"cut":case"paste":ye=OC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=Im;break;case"toggle":case"beforetoggle":ye=GC}var tt=(d&4)!==0,mn=!tt&&(c==="scroll"||c==="scrollend"),ie=tt?de!==null?de+"Capture":null:de;tt=[];for(var te=ue,ce;te!==null;){var we=te;if(ce=we.stateNode,we=we.tag,we!==5&&we!==26&&we!==27||ce===null||ie===null||(we=Au(te,ie),we!=null&&tt.push(Kv(te,we,ce))),mn)break;te=te.return}0<tt.length&&(de=new ye(de,je,null,m,Ce),xe.push({event:de,listeners:tt}))}}if((d&7)===0){e:{if(de=c==="mouseover"||c==="pointerover",ye=c==="mouseout"||c==="pointerout",de&&m!==tg&&(je=m.relatedTarget||m.fromElement)&&(nc(je)||je[Jo]))break e;if((ye||de)&&(de=Ce.window===Ce?Ce:(de=Ce.ownerDocument)?de.defaultView||de.parentWindow:window,ye?(je=m.relatedTarget||m.toElement,ye=ue,je=je?nc(je):null,je!==null&&(mn=s(je),tt=je.tag,je!==mn||tt!==5&&tt!==27&&tt!==6)&&(je=null)):(ye=null,je=ue),ye!==je)){if(tt=km,we="onMouseLeave",ie="onMouseEnter",te="mouse",(c==="pointerout"||c==="pointerover")&&(tt=Im,we="onPointerLeave",ie="onPointerEnter",te="pointer"),mn=ye==null?de:wu(ye),ce=je==null?de:wu(je),de=new tt(we,te+"leave",ye,m,Ce),de.target=mn,de.relatedTarget=ce,we=null,nc(Ce)===ue&&(tt=new tt(ie,te+"enter",je,m,Ce),tt.target=ce,tt.relatedTarget=mn,we=tt),mn=we,ye&&je)t:{for(tt=jU,ie=ye,te=je,ce=0,we=ie;we;we=tt(we))ce++;we=0;for(var $e=te;$e;$e=tt($e))we++;for(;0<ce-we;)ie=tt(ie),ce--;for(;0<we-ce;)te=tt(te),we--;for(;ce--;){if(ie===te||te!==null&&ie===te.alternate){tt=ie;break t}ie=tt(ie),te=tt(te)}tt=null}else tt=null;ye!==null&&S5(xe,de,ye,tt,!1),je!==null&&mn!==null&&S5(xe,mn,je,tt,!0)}}e:{if(de=ue?wu(ue):window,ye=de.nodeName&&de.nodeName.toLowerCase(),ye==="select"||ye==="input"&&de.type==="file")var Kt=Wm;else if(jm(de))if(va)Kt=KC;else{Kt=Ym;var We=WC}else ye=de.nodeName,!ye||ye.toLowerCase()!=="input"||de.type!=="checkbox"&&de.type!=="radio"?ue&&eg(ue.elementType)&&(Kt=Wm):Kt=qC;if(Kt&&(Kt=Kt(c,ue))){fg(xe,Kt,m,Ce);break e}We&&We(c,de,ue),c==="focusout"&&ue&&de.type==="number"&&ue.memoizedProps.value!=null&&Ks(de,"number",de.value)}switch(We=ue?wu(ue):window,c){case"focusin":(jm(We)||We.contentEditable==="true")&&(ya=We,Ca=ue,Fu=null);break;case"focusout":Fu=Ca=ya=null;break;case"mousedown":gg=!0;break;case"contextmenu":case"mouseup":case"dragend":gg=!1,ku(xe,m,Ce);break;case"selectionchange":if(XC)break;case"keydown":case"keyup":ku(xe,m,Ce)}var Ct;if(lc)e:{switch(c){case"compositionstart":var It="onCompositionStart";break e;case"compositionend":It="onCompositionEnd";break e;case"compositionupdate":It="onCompositionUpdate";break e}It=void 0}else cc?dg(c,m)&&(It="onCompositionEnd"):c==="keydown"&&m.keyCode===229&&(It="onCompositionStart");It&&(Gm&&m.locale!=="ko"&&(cc||It!=="onCompositionStart"?It==="onCompositionEnd"&&cc&&(Ct=td()):(ts=Ce,rg="value"in ts?ts.value:ts.textContent,cc=!0)),We=Yb(ue,It),0<We.length&&(It=new og(It,c,null,m,Ce),xe.push({event:It,listeners:We}),Ct?It.data=Ct:(Ct=zm(m),Ct!==null&&(It.data=Ct)))),(Ct=hg?UC(c,m):Vm(c,m))&&(It=Yb(ue,"onBeforeInput"),0<It.length&&(We=new og("onBeforeInput","beforeinput",null,m,Ce),xe.push({event:We,listeners:It}),We.data=Ct)),jn(xe,c,ue,m,Ce)}b5(xe,d)})}function Kv(c,d,m){return{instance:c,listener:d,currentTarget:m}}function Yb(c,d){for(var m=d+"Capture",C=[];c!==null;){var E=c,R=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||R===null||(E=Au(c,m),E!=null&&C.unshift(Kv(c,E,R)),E=Au(c,d),E!=null&&C.push(Kv(c,E,R))),c.tag===3)return C;c=c.return}return[]}function jU(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function S5(c,d,m,C,E){for(var R=d._reactName,N=[];m!==null&&m!==C;){var G=m,J=G.alternate,ue=G.stateNode;if(G=G.tag,J!==null&&J===C)break;G!==5&&G!==26&&G!==27||ue===null||(J=ue,E?(ue=Au(m,R),ue!=null&&N.unshift(Kv(m,ue,J))):E||(ue=Au(m,R),ue!=null&&N.push(Kv(m,ue,J)))),m=m.return}N.length!==0&&c.push({event:d,listeners:N})}var WU=/\r\n?/g,qU=/\u0000|\uFFFD/g;function x5(c){return(typeof c=="string"?c:""+c).replace(WU,`
`).replace(qU,"")}function A5(c,d){return d=x5(d),x5(c)===d}function pn(c,d,m,C,E,R){switch(m){case"children":typeof C=="string"?d==="body"||d==="textarea"&&C===""||rc(c,C):(typeof C=="number"||typeof C=="bigint")&&d!=="body"&&rc(c,""+C);break;case"className":Qh(c,"class",C);break;case"tabIndex":Qh(c,"tabindex",C);break;case"dir":case"role":case"viewBox":case"width":case"height":Qh(c,m,C);break;case"style":_m(c,C,R);break;case"data":if(d!=="object"){Qh(c,"data",C);break}case"src":case"href":if(C===""&&(d!=="a"||m!=="href")){c.removeAttribute(m);break}if(C==null||typeof C=="function"||typeof C=="symbol"||typeof C=="boolean"){c.removeAttribute(m);break}C=ed(""+C),c.setAttribute(m,C);break;case"action":case"formAction":if(typeof C=="function"){c.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof R=="function"&&(m==="formAction"?(d!=="input"&&pn(c,d,"name",E.name,E,null),pn(c,d,"formEncType",E.formEncType,E,null),pn(c,d,"formMethod",E.formMethod,E,null),pn(c,d,"formTarget",E.formTarget,E,null)):(pn(c,d,"encType",E.encType,E,null),pn(c,d,"method",E.method,E,null),pn(c,d,"target",E.target,E,null)));if(C==null||typeof C=="symbol"||typeof C=="boolean"){c.removeAttribute(m);break}C=ed(""+C),c.setAttribute(m,C);break;case"onClick":C!=null&&(c.onclick=bo);break;case"onScroll":C!=null&&kt("scroll",c);break;case"onScrollEnd":C!=null&&kt("scrollend",c);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(i(61));if(m=C.__html,m!=null){if(E.children!=null)throw Error(i(60));c.innerHTML=m}}break;case"multiple":c.multiple=C&&typeof C!="function"&&typeof C!="symbol";break;case"muted":c.muted=C&&typeof C!="function"&&typeof C!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(C==null||typeof C=="function"||typeof C=="boolean"||typeof C=="symbol"){c.removeAttribute("xlink:href");break}m=ed(""+C),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":C!=null&&typeof C!="function"&&typeof C!="symbol"?c.setAttribute(m,""+C):c.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":C&&typeof C!="function"&&typeof C!="symbol"?c.setAttribute(m,""):c.removeAttribute(m);break;case"capture":case"download":C===!0?c.setAttribute(m,""):C!==!1&&C!=null&&typeof C!="function"&&typeof C!="symbol"?c.setAttribute(m,C):c.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":C!=null&&typeof C!="function"&&typeof C!="symbol"&&!isNaN(C)&&1<=C?c.setAttribute(m,C):c.removeAttribute(m);break;case"rowSpan":case"start":C==null||typeof C=="function"||typeof C=="symbol"||isNaN(C)?c.removeAttribute(m):c.setAttribute(m,C);break;case"popover":kt("beforetoggle",c),kt("toggle",c),Su(c,"popover",C);break;case"xlinkActuate":pa(c,"http://www.w3.org/1999/xlink","xlink:actuate",C);break;case"xlinkArcrole":pa(c,"http://www.w3.org/1999/xlink","xlink:arcrole",C);break;case"xlinkRole":pa(c,"http://www.w3.org/1999/xlink","xlink:role",C);break;case"xlinkShow":pa(c,"http://www.w3.org/1999/xlink","xlink:show",C);break;case"xlinkTitle":pa(c,"http://www.w3.org/1999/xlink","xlink:title",C);break;case"xlinkType":pa(c,"http://www.w3.org/1999/xlink","xlink:type",C);break;case"xmlBase":pa(c,"http://www.w3.org/XML/1998/namespace","xml:base",C);break;case"xmlLang":pa(c,"http://www.w3.org/XML/1998/namespace","xml:lang",C);break;case"xmlSpace":pa(c,"http://www.w3.org/XML/1998/namespace","xml:space",C);break;case"is":Su(c,"is",C);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=TC.get(m)||m,Su(c,m,C))}}function Fx(c,d,m,C,E,R){switch(m){case"style":_m(c,C,R);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(i(61));if(m=C.__html,m!=null){if(E.children!=null)throw Error(i(60));c.innerHTML=m}}break;case"children":typeof C=="string"?rc(c,C):(typeof C=="number"||typeof C=="bigint")&&rc(c,""+C);break;case"onScroll":C!=null&&kt("scroll",c);break;case"onScrollEnd":C!=null&&kt("scrollend",c);break;case"onClick":C!=null&&(c.onclick=bo);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yf.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(E=m.endsWith("Capture"),d=m.slice(2,E?m.length-7:void 0),R=c[rr]||null,R=R!=null?R[m]:null,typeof R=="function"&&c.removeEventListener(d,R,E),typeof C=="function")){typeof R!="function"&&R!==null&&(m in c?c[m]=null:c.hasAttribute(m)&&c.removeAttribute(m)),c.addEventListener(d,C,E);break e}m in c?c[m]=C:C===!0?c.setAttribute(m,""):Su(c,m,C)}}}function Rr(c,d,m){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":kt("error",c),kt("load",c);var C=!1,E=!1,R;for(R in m)if(m.hasOwnProperty(R)){var N=m[R];if(N!=null)switch(R){case"src":C=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,d));default:pn(c,d,R,N,m,null)}}E&&pn(c,d,"srcSet",m.srcSet,m,null),C&&pn(c,d,"src",m.src,m,null);return;case"input":kt("invalid",c);var G=R=N=E=null,J=null,ue=null;for(C in m)if(m.hasOwnProperty(C)){var Ce=m[C];if(Ce!=null)switch(C){case"name":E=Ce;break;case"type":N=Ce;break;case"checked":J=Ce;break;case"defaultChecked":ue=Ce;break;case"value":R=Ce;break;case"defaultValue":G=Ce;break;case"children":case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(i(137,d));break;default:pn(c,d,C,Ce,m,null)}}Zf(c,R,G,J,ue,N,E,!1);return;case"select":kt("invalid",c),C=N=R=null;for(E in m)if(m.hasOwnProperty(E)&&(G=m[E],G!=null))switch(E){case"value":R=G;break;case"defaultValue":N=G;break;case"multiple":C=G;default:pn(c,d,E,G,m,null)}d=R,m=N,c.multiple=!!C,d!=null?Co(c,!!C,d,!1):m!=null&&Co(c,!!C,m,!0);return;case"textarea":kt("invalid",c),R=E=C=null;for(N in m)if(m.hasOwnProperty(N)&&(G=m[N],G!=null))switch(N){case"value":C=G;break;case"defaultValue":E=G;break;case"children":R=G;break;case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(91));break;default:pn(c,d,N,G,m,null)}Jf(c,C,E,R);return;case"option":for(J in m)if(m.hasOwnProperty(J)&&(C=m[J],C!=null))switch(J){case"selected":c.selected=C&&typeof C!="function"&&typeof C!="symbol";break;default:pn(c,d,J,C,m,null)}return;case"dialog":kt("beforetoggle",c),kt("toggle",c),kt("cancel",c),kt("close",c);break;case"iframe":case"object":kt("load",c);break;case"video":case"audio":for(C=0;C<ks.length;C++)kt(ks[C],c);break;case"image":kt("error",c),kt("load",c);break;case"details":kt("toggle",c);break;case"embed":case"source":case"link":kt("error",c),kt("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ue in m)if(m.hasOwnProperty(ue)&&(C=m[ue],C!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,d));default:pn(c,d,ue,C,m,null)}return;default:if(eg(d)){for(Ce in m)m.hasOwnProperty(Ce)&&(C=m[Ce],C!==void 0&&Fx(c,d,Ce,C,m,void 0));return}}for(G in m)m.hasOwnProperty(G)&&(C=m[G],C!=null&&pn(c,d,G,C,m,null))}function KU(c,d,m,C){switch(d){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,R=null,N=null,G=null,J=null,ue=null,Ce=null;for(ye in m){var xe=m[ye];if(m.hasOwnProperty(ye)&&xe!=null)switch(ye){case"checked":break;case"value":break;case"defaultValue":J=xe;default:C.hasOwnProperty(ye)||pn(c,d,ye,null,C,xe)}}for(var de in C){var ye=C[de];if(xe=m[de],C.hasOwnProperty(de)&&(ye!=null||xe!=null))switch(de){case"type":R=ye;break;case"name":E=ye;break;case"checked":ue=ye;break;case"defaultChecked":Ce=ye;break;case"value":N=ye;break;case"defaultValue":G=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(i(137,d));break;default:ye!==xe&&pn(c,d,de,ye,C,xe)}}xu(c,N,G,J,ue,Ce,R,E);return;case"select":ye=N=G=de=null;for(R in m)if(J=m[R],m.hasOwnProperty(R)&&J!=null)switch(R){case"value":break;case"multiple":ye=J;default:C.hasOwnProperty(R)||pn(c,d,R,null,C,J)}for(E in C)if(R=C[E],J=m[E],C.hasOwnProperty(E)&&(R!=null||J!=null))switch(E){case"value":de=R;break;case"defaultValue":G=R;break;case"multiple":N=R;default:R!==J&&pn(c,d,E,R,C,J)}d=G,m=N,C=ye,de!=null?Co(c,!!m,de,!1):!!C!=!!m&&(d!=null?Co(c,!!m,d,!0):Co(c,!!m,m?[]:"",!1));return;case"textarea":ye=de=null;for(G in m)if(E=m[G],m.hasOwnProperty(G)&&E!=null&&!C.hasOwnProperty(G))switch(G){case"value":break;case"children":break;default:pn(c,d,G,null,C,E)}for(N in C)if(E=C[N],R=m[N],C.hasOwnProperty(N)&&(E!=null||R!=null))switch(N){case"value":de=E;break;case"defaultValue":ye=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(i(91));break;default:E!==R&&pn(c,d,N,E,C,R)}Qf(c,de,ye);return;case"option":for(var je in m)if(de=m[je],m.hasOwnProperty(je)&&de!=null&&!C.hasOwnProperty(je))switch(je){case"selected":c.selected=!1;break;default:pn(c,d,je,null,C,de)}for(J in C)if(de=C[J],ye=m[J],C.hasOwnProperty(J)&&de!==ye&&(de!=null||ye!=null))switch(J){case"selected":c.selected=de&&typeof de!="function"&&typeof de!="symbol";break;default:pn(c,d,J,de,C,ye)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var tt in m)de=m[tt],m.hasOwnProperty(tt)&&de!=null&&!C.hasOwnProperty(tt)&&pn(c,d,tt,null,C,de);for(ue in C)if(de=C[ue],ye=m[ue],C.hasOwnProperty(ue)&&de!==ye&&(de!=null||ye!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(i(137,d));break;default:pn(c,d,ue,de,C,ye)}return;default:if(eg(d)){for(var mn in m)de=m[mn],m.hasOwnProperty(mn)&&de!==void 0&&!C.hasOwnProperty(mn)&&Fx(c,d,mn,void 0,C,de);for(Ce in C)de=C[Ce],ye=m[Ce],!C.hasOwnProperty(Ce)||de===ye||de===void 0&&ye===void 0||Fx(c,d,Ce,de,C,ye);return}}for(var ie in m)de=m[ie],m.hasOwnProperty(ie)&&de!=null&&!C.hasOwnProperty(ie)&&pn(c,d,ie,null,C,de);for(xe in C)de=C[xe],ye=m[xe],!C.hasOwnProperty(xe)||de===ye||de==null&&ye==null||pn(c,d,xe,de,C,ye)}function E5(c){switch(c){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function YU(){if(typeof performance.getEntriesByType=="function"){for(var c=0,d=0,m=performance.getEntriesByType("resource"),C=0;C<m.length;C++){var E=m[C],R=E.transferSize,N=E.initiatorType,G=E.duration;if(R&&G&&E5(N)){for(N=0,G=E.responseEnd,C+=1;C<m.length;C++){var J=m[C],ue=J.startTime;if(ue>G)break;var Ce=J.transferSize,xe=J.initiatorType;Ce&&E5(xe)&&(J=J.responseEnd,N+=Ce*(J<G?1:(G-ue)/(J-ue)))}if(--C,d+=8*(R+N)/(E.duration/1e3),c++,10<c)break}}if(0<c)return d/c/1e6}return navigator.connection&&(c=navigator.connection.downlink,typeof c=="number")?c:5}var kx=null,Nx=null;function Xb(c){return c.nodeType===9?c:c.ownerDocument}function T5(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function R5(c,d){if(c===0)switch(d){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&d==="foreignObject"?0:c}function Bx(c,d){return c==="textarea"||c==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.children=="bigint"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var Ix=null;function XU(){var c=window.event;return c&&c.type==="popstate"?c===Ix?!1:(Ix=c,!0):(Ix=null,!1)}var D5=typeof setTimeout=="function"?setTimeout:void 0,$U=typeof clearTimeout=="function"?clearTimeout:void 0,M5=typeof Promise=="function"?Promise:void 0,ZU=typeof queueMicrotask=="function"?queueMicrotask:typeof M5<"u"?function(c){return M5.resolve(null).then(c).catch(QU)}:D5;function QU(c){setTimeout(function(){throw c})}function oh(c){return c==="head"}function _5(c,d){var m=d,C=0;do{var E=m.nextSibling;if(c.removeChild(m),E&&E.nodeType===8)if(m=E.data,m==="/$"||m==="/&"){if(C===0){c.removeChild(E),ap(d);return}C--}else if(m==="$"||m==="$?"||m==="$~"||m==="$!"||m==="&")C++;else if(m==="html")Yv(c.ownerDocument.documentElement);else if(m==="head"){m=c.ownerDocument.head,Yv(m);for(var R=m.firstChild;R;){var N=R.nextSibling,G=R.nodeName;R[vo]||G==="SCRIPT"||G==="STYLE"||G==="LINK"&&R.rel.toLowerCase()==="stylesheet"||m.removeChild(R),R=N}}else m==="body"&&Yv(c.ownerDocument.body);m=E}while(m);ap(d)}function P5(c,d){var m=c;c=0;do{var C=m.nextSibling;if(m.nodeType===1?d?(m._stashedDisplay=m.style.display,m.style.display="none"):(m.style.display=m._stashedDisplay||"",m.getAttribute("style")===""&&m.removeAttribute("style")):m.nodeType===3&&(d?(m._stashedText=m.nodeValue,m.nodeValue=""):m.nodeValue=m._stashedText||""),C&&C.nodeType===8)if(m=C.data,m==="/$"){if(c===0)break;c--}else m!=="$"&&m!=="$?"&&m!=="$~"&&m!=="$!"||c++;m=C}while(m)}function Hx(c){var d=c.firstChild;for(d&&d.nodeType===10&&(d=d.nextSibling);d;){var m=d;switch(d=d.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":Hx(m),tc(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}c.removeChild(m)}}function JU(c,d,m,C){for(;c.nodeType===1;){var E=m;if(c.nodeName.toLowerCase()!==d.toLowerCase()){if(!C&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(C){if(!c[vo])switch(d){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(R=c.getAttribute("rel"),R==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(R!==E.rel||c.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||c.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||c.getAttribute("title")!==(E.title==null?null:E.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(R=c.getAttribute("src"),(R!==(E.src==null?null:E.src)||c.getAttribute("type")!==(E.type==null?null:E.type)||c.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&R&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(d==="input"&&c.type==="hidden"){var R=E.name==null?null:""+E.name;if(E.type==="hidden"&&c.getAttribute("name")===R)return c}else return c;if(c=Ia(c.nextSibling),c===null)break}return null}function ej(c,d,m){if(d==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!m||(c=Ia(c.nextSibling),c===null))return null;return c}function O5(c,d){for(;c.nodeType!==8;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!d||(c=Ia(c.nextSibling),c===null))return null;return c}function Gx(c){return c.data==="$?"||c.data==="$~"}function zx(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState!=="loading"}function tj(c,d){var m=c.ownerDocument;if(c.data==="$~")c._reactRetry=d;else if(c.data!=="$?"||m.readyState!=="loading")d();else{var C=function(){d(),m.removeEventListener("DOMContentLoaded",C)};m.addEventListener("DOMContentLoaded",C),c._reactRetry=C}}function Ia(c){for(;c!=null;c=c.nextSibling){var d=c.nodeType;if(d===1||d===3)break;if(d===8){if(d=c.data,d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"||d==="F!"||d==="F")break;if(d==="/$"||d==="/&")return null}}return c}var Vx=null;function L5(c){c=c.nextSibling;for(var d=0;c;){if(c.nodeType===8){var m=c.data;if(m==="/$"||m==="/&"){if(d===0)return Ia(c.nextSibling);d--}else m!=="$"&&m!=="$!"&&m!=="$?"&&m!=="$~"&&m!=="&"||d++}c=c.nextSibling}return null}function F5(c){c=c.previousSibling;for(var d=0;c;){if(c.nodeType===8){var m=c.data;if(m==="$"||m==="$!"||m==="$?"||m==="$~"||m==="&"){if(d===0)return c;d--}else m!=="/$"&&m!=="/&"||d++}c=c.previousSibling}return null}function k5(c,d,m){switch(d=Xb(m),c){case"html":if(c=d.documentElement,!c)throw Error(i(452));return c;case"head":if(c=d.head,!c)throw Error(i(453));return c;case"body":if(c=d.body,!c)throw Error(i(454));return c;default:throw Error(i(451))}}function Yv(c){for(var d=c.attributes;d.length;)c.removeAttributeNode(d[0]);tc(c)}var Ha=new Map,N5=new Set;function $b(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var Lc=K.d;K.d={f:nj,r:ij,D:rj,C:sj,L:aj,m:oj,X:cj,S:lj,M:uj};function nj(){var c=Lc.f(),d=Qs();return c||d}function ij(c){var d=ic(c);d!==null&&d.tag===5&&d.type==="form"?Ob(d):Lc.r(c)}var ip=typeof document>"u"?null:document;function B5(c,d,m){var C=ip;if(C&&typeof d=="string"&&d){var E=ar(d);E='link[rel="'+c+'"][href="'+E+'"]',typeof m=="string"&&(E+='[crossorigin="'+m+'"]'),N5.has(E)||(N5.add(E),c={rel:c,crossOrigin:m,href:d},C.querySelector(E)===null&&(d=C.createElement("link"),Rr(d,"link",c),pi(d),C.head.appendChild(d)))}}function rj(c){Lc.D(c),B5("dns-prefetch",c,null)}function sj(c,d){Lc.C(c,d),B5("preconnect",c,d)}function aj(c,d,m){Lc.L(c,d,m);var C=ip;if(C&&c&&d){var E='link[rel="preload"][as="'+ar(d)+'"]';d==="image"&&m&&m.imageSrcSet?(E+='[imagesrcset="'+ar(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(E+='[imagesizes="'+ar(m.imageSizes)+'"]')):E+='[href="'+ar(c)+'"]';var R=E;switch(d){case"style":R=rp(c);break;case"script":R=sp(c)}Ha.has(R)||(c=g({rel:"preload",href:d==="image"&&m&&m.imageSrcSet?void 0:c,as:d},m),Ha.set(R,c),C.querySelector(E)!==null||d==="style"&&C.querySelector(Xv(R))||d==="script"&&C.querySelector($v(R))||(d=C.createElement("link"),Rr(d,"link",c),pi(d),C.head.appendChild(d)))}}function oj(c,d){Lc.m(c,d);var m=ip;if(m&&c){var C=d&&typeof d.as=="string"?d.as:"script",E='link[rel="modulepreload"][as="'+ar(C)+'"][href="'+ar(c)+'"]',R=E;switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":R=sp(c)}if(!Ha.has(R)&&(c=g({rel:"modulepreload",href:c},d),Ha.set(R,c),m.querySelector(E)===null)){switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector($v(R)))return}C=m.createElement("link"),Rr(C,"link",c),pi(C),m.head.appendChild(C)}}}function lj(c,d,m){Lc.S(c,d,m);var C=ip;if(C&&c){var E=tl(C).hoistableStyles,R=rp(c);d=d||"default";var N=E.get(R);if(!N){var G={loading:0,preload:null};if(N=C.querySelector(Xv(R)))G.loading=5;else{c=g({rel:"stylesheet",href:c,"data-precedence":d},m),(m=Ha.get(R))&&Ux(c,m);var J=N=C.createElement("link");pi(J),Rr(J,"link",c),J._p=new Promise(function(ue,Ce){J.onload=ue,J.onerror=Ce}),J.addEventListener("load",function(){G.loading|=1}),J.addEventListener("error",function(){G.loading|=2}),G.loading|=4,Zb(N,d,C)}N={type:"stylesheet",instance:N,count:1,state:G},E.set(R,N)}}}function cj(c,d){Lc.X(c,d);var m=ip;if(m&&c){var C=tl(m).hoistableScripts,E=sp(c),R=C.get(E);R||(R=m.querySelector($v(E)),R||(c=g({src:c,async:!0},d),(d=Ha.get(E))&&jx(c,d),R=m.createElement("script"),pi(R),Rr(R,"link",c),m.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},C.set(E,R))}}function uj(c,d){Lc.M(c,d);var m=ip;if(m&&c){var C=tl(m).hoistableScripts,E=sp(c),R=C.get(E);R||(R=m.querySelector($v(E)),R||(c=g({src:c,async:!0,type:"module"},d),(d=Ha.get(E))&&jx(c,d),R=m.createElement("script"),pi(R),Rr(R,"link",c),m.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},C.set(E,R))}}function I5(c,d,m,C){var E=(E=Ie.current)?$b(E):null;if(!E)throw Error(i(446));switch(c){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(d=rp(m.href),m=tl(E).hoistableStyles,C=m.get(d),C||(C={type:"style",instance:null,count:0,state:null},m.set(d,C)),C):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){c=rp(m.href);var R=tl(E).hoistableStyles,N=R.get(c);if(N||(E=E.ownerDocument||E,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},R.set(c,N),(R=E.querySelector(Xv(c)))&&!R._p&&(N.instance=R,N.state.loading=5),Ha.has(c)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},Ha.set(c,m),R||hj(E,c,m,N.state))),d&&C===null)throw Error(i(528,""));return N}if(d&&C!==null)throw Error(i(529,""));return null;case"script":return d=m.async,m=m.src,typeof m=="string"&&d&&typeof d!="function"&&typeof d!="symbol"?(d=sp(m),m=tl(E).hoistableScripts,C=m.get(d),C||(C={type:"script",instance:null,count:0,state:null},m.set(d,C)),C):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,c))}}function rp(c){return'href="'+ar(c)+'"'}function Xv(c){return'link[rel="stylesheet"]['+c+"]"}function H5(c){return g({},c,{"data-precedence":c.precedence,precedence:null})}function hj(c,d,m,C){c.querySelector('link[rel="preload"][as="style"]['+d+"]")?C.loading=1:(d=c.createElement("link"),C.preload=d,d.addEventListener("load",function(){return C.loading|=1}),d.addEventListener("error",function(){return C.loading|=2}),Rr(d,"link",m),pi(d),c.head.appendChild(d))}function sp(c){return'[src="'+ar(c)+'"]'}function $v(c){return"script[async]"+c}function G5(c,d,m){if(d.count++,d.instance===null)switch(d.type){case"style":var C=c.querySelector('style[data-href~="'+ar(m.href)+'"]');if(C)return d.instance=C,pi(C),C;var E=g({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return C=(c.ownerDocument||c).createElement("style"),pi(C),Rr(C,"style",E),Zb(C,m.precedence,c),d.instance=C;case"stylesheet":E=rp(m.href);var R=c.querySelector(Xv(E));if(R)return d.state.loading|=4,d.instance=R,pi(R),R;C=H5(m),(E=Ha.get(E))&&Ux(C,E),R=(c.ownerDocument||c).createElement("link"),pi(R);var N=R;return N._p=new Promise(function(G,J){N.onload=G,N.onerror=J}),Rr(R,"link",C),d.state.loading|=4,Zb(R,m.precedence,c),d.instance=R;case"script":return R=sp(m.src),(E=c.querySelector($v(R)))?(d.instance=E,pi(E),E):(C=m,(E=Ha.get(R))&&(C=g({},m),jx(C,E)),c=c.ownerDocument||c,E=c.createElement("script"),pi(E),Rr(E,"link",C),c.head.appendChild(E),d.instance=E);case"void":return null;default:throw Error(i(443,d.type))}else d.type==="stylesheet"&&(d.state.loading&4)===0&&(C=d.instance,d.state.loading|=4,Zb(C,m.precedence,c));return d.instance}function Zb(c,d,m){for(var C=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=C.length?C[C.length-1]:null,R=E,N=0;N<C.length;N++){var G=C[N];if(G.dataset.precedence===d)R=G;else if(R!==E)break}R?R.parentNode.insertBefore(c,R.nextSibling):(d=m.nodeType===9?m.head:m,d.insertBefore(c,d.firstChild))}function Ux(c,d){c.crossOrigin==null&&(c.crossOrigin=d.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=d.referrerPolicy),c.title==null&&(c.title=d.title)}function jx(c,d){c.crossOrigin==null&&(c.crossOrigin=d.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=d.referrerPolicy),c.integrity==null&&(c.integrity=d.integrity)}var Qb=null;function z5(c,d,m){if(Qb===null){var C=new Map,E=Qb=new Map;E.set(m,C)}else E=Qb,C=E.get(m),C||(C=new Map,E.set(m,C));if(C.has(c))return C;for(C.set(c,null),m=m.getElementsByTagName(c),E=0;E<m.length;E++){var R=m[E];if(!(R[vo]||R[gi]||c==="link"&&R.getAttribute("rel")==="stylesheet")&&R.namespaceURI!=="http://www.w3.org/2000/svg"){var N=R.getAttribute(d)||"";N=c+N;var G=C.get(N);G?G.push(R):C.set(N,[R])}}return C}function V5(c,d,m){c=c.ownerDocument||c,c.head.insertBefore(m,d==="title"?c.querySelector("head > title"):null)}function dj(c,d,m){if(m===1||d.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof d.precedence!="string"||typeof d.href!="string"||d.href==="")break;return!0;case"link":if(typeof d.rel!="string"||typeof d.href!="string"||d.href===""||d.onLoad||d.onError)break;switch(d.rel){case"stylesheet":return c=d.disabled,typeof d.precedence=="string"&&c==null;default:return!0}case"script":if(d.async&&typeof d.async!="function"&&typeof d.async!="symbol"&&!d.onLoad&&!d.onError&&d.src&&typeof d.src=="string")return!0}return!1}function U5(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}function fj(c,d,m,C){if(m.type==="stylesheet"&&(typeof C.media!="string"||matchMedia(C.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var E=rp(C.href),R=d.querySelector(Xv(E));if(R){d=R._p,d!==null&&typeof d=="object"&&typeof d.then=="function"&&(c.count++,c=Jb.bind(c),d.then(c,c)),m.state.loading|=4,m.instance=R,pi(R);return}R=d.ownerDocument||d,C=H5(C),(E=Ha.get(E))&&Ux(C,E),R=R.createElement("link"),pi(R);var N=R;N._p=new Promise(function(G,J){N.onload=G,N.onerror=J}),Rr(R,"link",C),m.instance=R}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(m,d),(d=m.state.preload)&&(m.state.loading&3)===0&&(c.count++,m=Jb.bind(c),d.addEventListener("load",m),d.addEventListener("error",m))}}var Wx=0;function gj(c,d){return c.stylesheets&&c.count===0&&t1(c,c.stylesheets),0<c.count||0<c.imgCount?function(m){var C=setTimeout(function(){if(c.stylesheets&&t1(c,c.stylesheets),c.unsuspend){var R=c.unsuspend;c.unsuspend=null,R()}},6e4+d);0<c.imgBytes&&Wx===0&&(Wx=62500*YU());var E=setTimeout(function(){if(c.waitingForImages=!1,c.count===0&&(c.stylesheets&&t1(c,c.stylesheets),c.unsuspend)){var R=c.unsuspend;c.unsuspend=null,R()}},(c.imgBytes>Wx?50:800)+d);return c.unsuspend=m,function(){c.unsuspend=null,clearTimeout(C),clearTimeout(E)}}:null}function Jb(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)t1(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var e1=null;function t1(c,d){c.stylesheets=null,c.unsuspend!==null&&(c.count++,e1=new Map,d.forEach(pj,c),e1=null,Jb.call(c))}function pj(c,d){if(!(d.state.loading&4)){var m=e1.get(c);if(m)var C=m.get(null);else{m=new Map,e1.set(c,m);for(var E=c.querySelectorAll("link[data-precedence],style[data-precedence]"),R=0;R<E.length;R++){var N=E[R];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(m.set(N.dataset.precedence,N),C=N)}C&&m.set(null,C)}E=d.instance,N=E.getAttribute("data-precedence"),R=m.get(N)||C,R===C&&m.set(null,E),m.set(N,E),this.count++,C=Jb.bind(this),E.addEventListener("load",C),E.addEventListener("error",C),R?R.parentNode.insertBefore(E,R.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(E,c.firstChild)),d.state.loading|=4}}var Zv={$$typeof:M,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function mj(c,d,m,C,E,R,N,G,J){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=jf(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jf(0),this.hiddenUpdates=jf(null),this.identifierPrefix=C,this.onUncaughtError=E,this.onCaughtError=R,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=J,this.incompleteTransitions=new Map}function j5(c,d,m,C,E,R,N,G,J,ue,Ce,xe){return c=new mj(c,d,m,N,J,ue,Ce,xe,G),d=1,R===!0&&(d|=24),R=In(3,null,null,d),c.current=R,R.stateNode=c,d=tv(),d.refCount++,c.pooledCache=d,d.refCount++,R.memoizedState={element:C,isDehydrated:m,cache:d},bd(R),c}function W5(c){return c?(c=ol,c):ol}function q5(c,d,m,C,E,R){E=W5(E),C.context===null?C.context=E:C.pendingContext=E,C=Do(d),C.payload={element:m},R=R===void 0?null:R,R!==null&&(C.callback=R),m=pl(c,C,d),m!==null&&(yt(m,c,d),ml(m,c,d))}function K5(c,d){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var m=c.retryLane;c.retryLane=m!==0&&m<d?m:d}}function qx(c,d){K5(c,d),(c=c.alternate)&&K5(c,d)}function Y5(c){if(c.tag===13||c.tag===31){var d=Cr(c,67108864);d!==null&&yt(d,c,67108864),qx(c,67108864)}}function X5(c){if(c.tag===13||c.tag===31){var d=us();d=Cu(d);var m=Cr(c,d);m!==null&&yt(m,c,d),qx(c,d)}}var n1=!0;function vj(c,d,m,C){var E=z.T;z.T=null;var R=K.p;try{K.p=2,Kx(c,d,m,C)}finally{K.p=R,z.T=E}}function yj(c,d,m,C){var E=z.T;z.T=null;var R=K.p;try{K.p=8,Kx(c,d,m,C)}finally{K.p=R,z.T=E}}function Kx(c,d,m,C){if(n1){var E=Yx(C);if(E===null)Lx(c,d,C,i1,m),Z5(c,C);else if(bj(E,c,d,m,C))C.stopPropagation();else if(Z5(c,C),d&4&&-1<Cj.indexOf(c)){for(;E!==null;){var R=ic(E);if(R!==null)switch(R.tag){case 3:if(R=R.stateNode,R.current.memoizedState.isDehydrated){var N=$o(R.pendingLanes);if(N!==0){var G=R;for(G.pendingLanes|=2,G.entangledLanes|=2;N;){var J=1<<31-Qr(N);G.entanglements[1]|=J,N&=~J}Te(R),(qe&6)===0&&(si=un()+500,Ne(0))}}break;case 31:case 13:G=Cr(R,2),G!==null&&yt(G,R,2),Qs(),qx(R,2)}if(R=Yx(C),R===null&&Lx(c,d,C,i1,m),R===E)break;E=R}E!==null&&C.stopPropagation()}else Lx(c,d,C,null,m)}}function Yx(c){return c=ng(c),Xx(c)}var i1=null;function Xx(c){if(i1=null,c=nc(c),c!==null){var d=s(c);if(d===null)c=null;else{var m=d.tag;if(m===13){if(c=a(d),c!==null)return c;c=null}else if(m===31){if(c=o(d),c!==null)return c;c=null}else if(m===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;c=null}else d!==c&&(c=null)}}return i1=c,null}function $5(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(qi()){case fa:return 2;case fo:return 8;case qt:case Sn:return 32;case go:return 268435456;default:return 32}default:return 32}}var $x=!1,lh=null,ch=null,uh=null,Qv=new Map,Jv=new Map,hh=[],Cj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Z5(c,d){switch(c){case"focusin":case"focusout":lh=null;break;case"dragenter":case"dragleave":ch=null;break;case"mouseover":case"mouseout":uh=null;break;case"pointerover":case"pointerout":Qv.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jv.delete(d.pointerId)}}function e0(c,d,m,C,E,R){return c===null||c.nativeEvent!==R?(c={blockedOn:d,domEventName:m,eventSystemFlags:C,nativeEvent:R,targetContainers:[E]},d!==null&&(d=ic(d),d!==null&&Y5(d)),c):(c.eventSystemFlags|=C,d=c.targetContainers,E!==null&&d.indexOf(E)===-1&&d.push(E),c)}function bj(c,d,m,C,E){switch(d){case"focusin":return lh=e0(lh,c,d,m,C,E),!0;case"dragenter":return ch=e0(ch,c,d,m,C,E),!0;case"mouseover":return uh=e0(uh,c,d,m,C,E),!0;case"pointerover":var R=E.pointerId;return Qv.set(R,e0(Qv.get(R)||null,c,d,m,C,E)),!0;case"gotpointercapture":return R=E.pointerId,Jv.set(R,e0(Jv.get(R)||null,c,d,m,C,E)),!0}return!1}function Q5(c){var d=nc(c.target);if(d!==null){var m=s(d);if(m!==null){if(d=m.tag,d===13){if(d=a(m),d!==null){c.blockedOn=d,Qo(c.priority,function(){X5(m)});return}}else if(d===31){if(d=o(m),d!==null){c.blockedOn=d,Qo(c.priority,function(){X5(m)});return}}else if(d===3&&m.stateNode.current.memoizedState.isDehydrated){c.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}c.blockedOn=null}function r1(c){if(c.blockedOn!==null)return!1;for(var d=c.targetContainers;0<d.length;){var m=Yx(c.nativeEvent);if(m===null){m=c.nativeEvent;var C=new m.constructor(m.type,m);tg=C,m.target.dispatchEvent(C),tg=null}else return d=ic(m),d!==null&&Y5(d),c.blockedOn=m,!1;d.shift()}return!0}function J5(c,d,m){r1(c)&&m.delete(d)}function wj(){$x=!1,lh!==null&&r1(lh)&&(lh=null),ch!==null&&r1(ch)&&(ch=null),uh!==null&&r1(uh)&&(uh=null),Qv.forEach(J5),Jv.forEach(J5)}function s1(c,d){c.blockedOn===d&&(c.blockedOn=null,$x||($x=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,wj)))}var a1=null;function e4(c){a1!==c&&(a1=c,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){a1===c&&(a1=null);for(var d=0;d<c.length;d+=3){var m=c[d],C=c[d+1],E=c[d+2];if(typeof C!="function"){if(Xx(C||m)===null)continue;break}var R=ic(m);R!==null&&(c.splice(d,3),d-=3,Dv(R,{pending:!0,data:E,method:m.method,action:C},C,E))}}))}function ap(c){function d(J){return s1(J,c)}lh!==null&&s1(lh,c),ch!==null&&s1(ch,c),uh!==null&&s1(uh,c),Qv.forEach(d),Jv.forEach(d);for(var m=0;m<hh.length;m++){var C=hh[m];C.blockedOn===c&&(C.blockedOn=null)}for(;0<hh.length&&(m=hh[0],m.blockedOn===null);)Q5(m),m.blockedOn===null&&hh.shift();if(m=(c.ownerDocument||c).$$reactFormReplay,m!=null)for(C=0;C<m.length;C+=3){var E=m[C],R=m[C+1],N=E[rr]||null;if(typeof R=="function")N||e4(m);else if(N){var G=null;if(R&&R.hasAttribute("formAction")){if(E=R,N=R[rr]||null)G=N.formAction;else if(Xx(E)!==null)continue}else G=N.action;typeof G=="function"?m[C+1]=G:(m.splice(C,3),C-=3),e4(m)}}}function t4(){function c(R){R.canIntercept&&R.info==="react-transition"&&R.intercept({handler:function(){return new Promise(function(N){return E=N})},focusReset:"manual",scroll:"manual"})}function d(){E!==null&&(E(),E=null),C||setTimeout(m,20)}function m(){if(!C&&!navigation.transition){var R=navigation.currentEntry;R&&R.url!=null&&navigation.navigate(R.url,{state:R.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var C=!1,E=null;return navigation.addEventListener("navigate",c),navigation.addEventListener("navigatesuccess",d),navigation.addEventListener("navigateerror",d),setTimeout(m,100),function(){C=!0,navigation.removeEventListener("navigate",c),navigation.removeEventListener("navigatesuccess",d),navigation.removeEventListener("navigateerror",d),E!==null&&(E(),E=null)}}}function Zx(c){this._internalRoot=c}o1.prototype.render=Zx.prototype.render=function(c){var d=this._internalRoot;if(d===null)throw Error(i(409));var m=d.current,C=us();q5(m,C,c,d,null,null)},o1.prototype.unmount=Zx.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var d=c.containerInfo;q5(c.current,2,null,c,null,null),Qs(),d[Jo]=null}};function o1(c){this._internalRoot=c}o1.prototype.unstable_scheduleHydration=function(c){if(c){var d=qf();c={blockedOn:null,target:c,priority:d};for(var m=0;m<hh.length&&d!==0&&d<hh[m].priority;m++);hh.splice(m,0,c),m===0&&Q5(c)}};var n4=e.version;if(n4!=="19.2.0")throw Error(i(527,n4,"19.2.0"));K.findDOMNode=function(c){var d=c._reactInternals;if(d===void 0)throw typeof c.render=="function"?Error(i(188)):(c=Object.keys(c).join(","),Error(i(268,c)));return c=u(d),c=c!==null?h(c):null,c=c===null?null:c.stateNode,c};var Sj={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var l1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!l1.isDisabled&&l1.supportsFiber)try{gu=l1.inject(Sj),Br=l1}catch{}}return n0.createRoot=function(c,d){if(!r(c))throw Error(i(299));var m=!1,C="",E=Hb,R=Fv,N=kv;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(C=d.identifierPrefix),d.onUncaughtError!==void 0&&(E=d.onUncaughtError),d.onCaughtError!==void 0&&(R=d.onCaughtError),d.onRecoverableError!==void 0&&(N=d.onRecoverableError)),d=j5(c,1,!1,null,null,m,C,null,E,R,N,t4),c[Jo]=d.current,Ox(c),new Zx(d)},n0.hydrateRoot=function(c,d,m){if(!r(c))throw Error(i(299));var C=!1,E="",R=Hb,N=Fv,G=kv,J=null;return m!=null&&(m.unstable_strictMode===!0&&(C=!0),m.identifierPrefix!==void 0&&(E=m.identifierPrefix),m.onUncaughtError!==void 0&&(R=m.onUncaughtError),m.onCaughtError!==void 0&&(N=m.onCaughtError),m.onRecoverableError!==void 0&&(G=m.onRecoverableError),m.formState!==void 0&&(J=m.formState)),d=j5(c,1,!0,d,m??null,C,E,J,R,N,G,t4),d.context=W5(null),m=d.current,C=us(),C=Cu(C),E=Do(C),E.callback=null,pl(m,E,C),m=C,d.current.lanes=m,vu(d,m),Te(d),c[Jo]=d.current,Ox(c),new o1(d)},n0.version="19.2.0",n0}var g4;function Oj(){if(g4)return tA.exports;g4=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),tA.exports=Pj(),tA.exports}var Lj=Oj();var p4="popstate";function Fj(t={}){function e(r,s){let{pathname:a="/",search:o="",hash:l=""}=Df(r.location.hash.substring(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),YT("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){let a=r.document.querySelector("base"),o="";if(a&&a.getAttribute("href")){let l=r.location.href,u=l.indexOf("#");o=u===-1?l:l.slice(0,u)}return o+"#"+(typeof s=="string"?s:ty(s))}function i(r,s){Uo(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(s)})`)}return Nj(e,n,i,t)}function ui(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Uo(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function kj(){return Math.random().toString(36).substring(2,10)}function m4(t,e){return{usr:t.state,key:t.key,idx:e}}function YT(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Df(e):e,state:n,key:e&&e.key||i||kj()}}function ty({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Df(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function Nj(t,e,n,i={}){let{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,o="POP",l=null,u=h();u==null&&(u=0,a.replaceState({...a.state,idx:u},""));function h(){return(a.state||{idx:null}).idx}function g(){o="POP";let x=h(),T=x==null?null:x-u;u=x,l&&l({action:o,location:S.location,delta:T})}function v(x,T){o="PUSH";let _=YT(S.location,x,T);n&&n(_,x),u=h()+1;let M=m4(_,u),F=S.createHref(_);try{a.pushState(M,"",F)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;r.location.assign(F)}s&&l&&l({action:o,location:S.location,delta:1})}function y(x,T){o="REPLACE";let _=YT(S.location,x,T);n&&n(_,x),u=h();let M=m4(_,u),F=S.createHref(_);a.replaceState(M,"",F),s&&l&&l({action:o,location:S.location,delta:0})}function w(x){return Bj(x)}let S={get action(){return o},get location(){return t(r,a)},listen(x){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(p4,g),l=x,()=>{r.removeEventListener(p4,g),l=null}},createHref(x){return e(r,x)},createURL:w,encodeLocation(x){let T=w(x);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:v,replace:y,go(x){return a.go(x)}};return S}function Bj(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ui(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:ty(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function X7(t,e,n="/"){return Ij(t,e,n,!1)}function Ij(t,e,n,i){let r=typeof e=="string"?Df(e):e,s=Yc(r.pathname||"/",n);if(s==null)return null;let a=$7(t);Hj(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=$j(s);o=Yj(a[l],u,i)}return o}function $7(t,e=[],n=[],i="",r=!1){let s=(a,o,l=r,u)=>{let h={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(i)&&l)return;ui(h.relativePath.startsWith(i),`Absolute route path "${h.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(i.length)}let g=jc([i,h.relativePath]),v=n.concat(h);a.children&&a.children.length>0&&(ui(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),$7(a.children,e,v,g,l)),!(a.path==null&&!a.index)&&e.push({path:g,score:qj(g,a.index),routesMeta:v})};return t.forEach((a,o)=>{if(a.path===""||!a.path?.includes("?"))s(a,o);else for(let l of Z7(a.path))s(a,o,!0,l)}),e}function Z7(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let a=Z7(i.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),r&&o.push(...a),o.map(l=>t.startsWith("/")&&l===""?"/":l)}function Hj(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Kj(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var Gj=/^:[\w-]+$/,zj=3,Vj=2,Uj=1,jj=10,Wj=-2,v4=t=>t==="*";function qj(t,e){let n=t.split("/"),i=n.length;return n.some(v4)&&(i+=Wj),e&&(i+=Vj),n.filter(r=>!v4(r)).reduce((r,s)=>r+(Gj.test(s)?zj:s===""?Uj:jj),i)}function Kj(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function Yj(t,e,n=!1){let{routesMeta:i}=t,r={},s="/",a=[];for(let o=0;o<i.length;++o){let l=i[o],u=o===i.length-1,h=s==="/"?e:e.slice(s.length)||"/",g=kw({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),v=l.route;if(!g&&u&&n&&!i[i.length-1].route.index&&(g=kw({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!g)return null;Object.assign(r,g.params),a.push({params:r,pathname:jc([s,g.pathname]),pathnameBase:eW(jc([s,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(s=jc([s,g.pathnameBase]))}return a}function kw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=Xj(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:i.reduce((u,{paramName:h,isOptional:g},v)=>{if(h==="*"){let w=o[v]||"";a=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const y=o[v];return g&&!y?u[h]=void 0:u[h]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:t}}function Xj(t,e=!1,n=!0){Uo(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(i.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function $j(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Uo(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Yc(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}var Zj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Qj(t,e="/"){let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Df(t):t,s;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?s=y4(n.substring(1),"/"):s=y4(n,e)):s=e,{pathname:s,search:tW(i),hash:nW(r)}}function y4(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function sA(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Jj(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Q7(t){let e=Jj(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function J7(t,e,n,i=!1){let r;typeof t=="string"?r=Df(t):(r={...t},ui(!r.pathname||!r.pathname.includes("?"),sA("?","pathname","search",r)),ui(!r.pathname||!r.pathname.includes("#"),sA("#","pathname","hash",r)),ui(!r.search||!r.search.includes("#"),sA("#","search","hash",r)));let s=t===""||r.pathname==="",a=s?"/":r.pathname,o;if(a==null)o=n;else{let g=e.length-1;if(!i&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),g-=1;r.pathname=v.join("/")}o=g>=0?e[g]:"/"}let l=Qj(r,o),u=a&&a!=="/"&&a.endsWith("/"),h=(s||a===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}var jc=t=>t.join("/").replace(/\/\/+/g,"/"),eW=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),tW=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,nW=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,iW=class{constructor(t,e,n,i=!1){this.status=t,this.statusText=e||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function rW(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function sW(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var e9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function t9(t,e){let n=t;if(typeof n!="string"||!Zj.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let i=n,r=!1;if(e9)try{let s=new URL(window.location.href),a=n.startsWith("//")?new URL(s.protocol+n):new URL(n),o=Yc(a.pathname,e);a.origin===s.origin&&o!=null?n=o+a.search+a.hash:r=!0}catch{Uo(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:r,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var n9=["POST","PUT","PATCH","DELETE"];new Set(n9);var aW=["GET",...n9];new Set(aW);var am=D.createContext(null);am.displayName="DataRouter";var $S=D.createContext(null);$S.displayName="DataRouterState";var oW=D.createContext(!1),i9=D.createContext({isTransitioning:!1});i9.displayName="ViewTransition";var lW=D.createContext(new Map);lW.displayName="Fetchers";var cW=D.createContext(null);cW.displayName="Await";var co=D.createContext(null);co.displayName="Navigation";var Fy=D.createContext(null);Fy.displayName="Location";var ru=D.createContext({outlet:null,matches:[],isDataRoute:!1});ru.displayName="Route";var iM=D.createContext(null);iM.displayName="RouteError";var r9="REACT_ROUTER_ERROR",uW="REDIRECT",hW="ROUTE_ERROR_RESPONSE";function dW(t){if(t.startsWith(`${r9}:${uW}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function fW(t){if(t.startsWith(`${r9}:${hW}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new iW(e.status,e.statusText,e.data)}catch{}}function gW(t,{relative:e}={}){ui(ky(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=D.useContext(co),{hash:r,pathname:s,search:a}=Ny(t,{relative:e}),o=s;return n!=="/"&&(o=s==="/"?n:jc([n,s])),i.createHref({pathname:o,search:a,hash:r})}function ky(){return D.useContext(Fy)!=null}function Mf(){return ui(ky(),"useLocation() may be used only in the context of a <Router> component."),D.useContext(Fy).location}var s9="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function a9(t){D.useContext(co).static||D.useLayoutEffect(t)}function pW(){let{isDataRoute:t}=D.useContext(ru);return t?DW():mW()}function mW(){ui(ky(),"useNavigate() may be used only in the context of a <Router> component.");let t=D.useContext(am),{basename:e,navigator:n}=D.useContext(co),{matches:i}=D.useContext(ru),{pathname:r}=Mf(),s=JSON.stringify(Q7(i)),a=D.useRef(!1);return a9(()=>{a.current=!0}),D.useCallback((l,u={})=>{if(Uo(a.current,s9),!a.current)return;if(typeof l=="number"){n.go(l);return}let h=J7(l,JSON.parse(s),r,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:jc([e,h.pathname])),(u.replace?n.replace:n.push)(h,u.state,u)},[e,n,s,r,t])}D.createContext(null);function Ny(t,{relative:e}={}){let{matches:n}=D.useContext(ru),{pathname:i}=Mf(),r=JSON.stringify(Q7(n));return D.useMemo(()=>J7(t,JSON.parse(r),i,e==="path"),[t,r,i,e])}function vW(t,e){return o9(t,e)}function o9(t,e,n,i,r){ui(ky(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=D.useContext(co),{matches:a}=D.useContext(ru),o=a[a.length-1],l=o?o.params:{},u=o?o.pathname:"/",h=o?o.pathnameBase:"/",g=o&&o.route;{let _=g&&g.path||"";c9(u,!g||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let v=Mf(),y;if(e){let _=typeof e=="string"?Df(e):e;ui(h==="/"||_.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${_.pathname}" was given in the \`location\` prop.`),y=_}else y=v;let w=y.pathname||"/",S=w;if(h!=="/"){let _=h.replace(/^\//,"").split("/");S="/"+w.replace(/^\//,"").split("/").slice(_.length).join("/")}let x=X7(t,{pathname:S});Uo(g||x!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),Uo(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=SW(x&&x.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:jc([h,s.encodeLocation?s.encodeLocation(_.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?h:jc([h,s.encodeLocation?s.encodeLocation(_.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathnameBase])})),a,n,i,r);return e&&T?D.createElement(Fy.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},T):T}function yW(){let t=RW(),e=rW(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=D.createElement(D.Fragment,null,D.createElement("p",null," Hey developer "),D.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",D.createElement("code",{style:s},"ErrorBoundary")," or"," ",D.createElement("code",{style:s},"errorElement")," prop on your route.")),D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:r},n):null,a)}var CW=D.createElement(yW,null),l9=class extends D.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=fW(t.digest);n&&(t=n)}let e=t!==void 0?D.createElement(ru.Provider,{value:this.props.routeContext},D.createElement(iM.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?D.createElement(bW,{error:t},e):e}};l9.contextType=oW;var aA=new WeakMap;function bW({children:t,error:e}){let{basename:n}=D.useContext(co);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=dW(e.digest);if(i){let r=aA.get(e);if(r)throw r;let s=t9(i.location,n);if(e9&&!aA.get(e))if(s.isExternal||i.reloadDocument)window.location.href=s.absoluteURL||s.to;else{const a=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(s.to,{replace:i.replace}));throw aA.set(e,a),a}return D.createElement("meta",{httpEquiv:"refresh",content:`0;url=${s.absoluteURL||s.to}`})}}return t}function wW({routeContext:t,match:e,children:n}){let i=D.useContext(am);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),D.createElement(ru.Provider,{value:t},n)}function SW(t,e=[],n=null,i=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,a=n?.errors;if(a!=null){let h=s.findIndex(g=>g.route.id&&a?.[g.route.id]!==void 0);ui(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let o=!1,l=-1;if(n)for(let h=0;h<s.length;h++){let g=s[h];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(l=h),g.route.id){let{loaderData:v,errors:y}=n,w=g.route.loader&&!v.hasOwnProperty(g.route.id)&&(!y||y[g.route.id]===void 0);if(g.route.lazy||w){o=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}let u=n&&i?(h,g)=>{i(h,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:sW(n.matches),errorInfo:g})}:void 0;return s.reduceRight((h,g,v)=>{let y,w=!1,S=null,x=null;n&&(y=a&&g.route.id?a[g.route.id]:void 0,S=g.route.errorElement||CW,o&&(l<0&&v===0?(c9("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,x=null):l===v&&(w=!0,x=g.route.hydrateFallbackElement||null)));let T=e.concat(s.slice(0,v+1)),_=()=>{let M;return y?M=S:w?M=x:g.route.Component?M=D.createElement(g.route.Component,null):g.route.element?M=g.route.element:M=h,D.createElement(wW,{match:g,routeContext:{outlet:h,matches:T,isDataRoute:n!=null},children:M})};return n&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?D.createElement(l9,{location:n.location,revalidation:n.revalidation,component:S,error:y,children:_(),routeContext:{outlet:null,matches:T,isDataRoute:!0},onError:u}):_()},null)}function rM(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xW(t){let e=D.useContext(am);return ui(e,rM(t)),e}function AW(t){let e=D.useContext($S);return ui(e,rM(t)),e}function EW(t){let e=D.useContext(ru);return ui(e,rM(t)),e}function sM(t){let e=EW(t),n=e.matches[e.matches.length-1];return ui(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function TW(){return sM("useRouteId")}function RW(){let t=D.useContext(iM),e=AW("useRouteError"),n=sM("useRouteError");return t!==void 0?t:e.errors?.[n]}function DW(){let{router:t}=xW("useNavigate"),e=sM("useNavigate"),n=D.useRef(!1);return a9(()=>{n.current=!0}),D.useCallback(async(r,s={})=>{Uo(n.current,s9),n.current&&(typeof r=="number"?await t.navigate(r):await t.navigate(r,{fromRouteId:e,...s}))},[t,e])}var C4={};function c9(t,e,n){!e&&!C4[t]&&(C4[t]=!0,Uo(!1,n))}D.memo(MW);function MW({routes:t,future:e,state:n,onError:i}){return o9(t,void 0,n,i,e)}function iw(t){ui(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _W({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:r,static:s=!1,unstable_useTransitions:a}){ui(!ky(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=D.useMemo(()=>({basename:o,navigator:r,static:s,unstable_useTransitions:a,future:{}}),[o,r,s,a]);typeof n=="string"&&(n=Df(n));let{pathname:u="/",search:h="",hash:g="",state:v=null,key:y="default"}=n,w=D.useMemo(()=>{let S=Yc(u,o);return S==null?null:{location:{pathname:S,search:h,hash:g,state:v,key:y},navigationType:i}},[o,u,h,g,v,y,i]);return Uo(w!=null,`<Router basename="${o}"> is not able to match the URL "${u}${h}${g}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:D.createElement(co.Provider,{value:l},D.createElement(Fy.Provider,{children:e,value:w}))}function PW({children:t,location:e}){return vW(XT(t),e)}function XT(t,e=[]){let n=[];return D.Children.forEach(t,(i,r)=>{if(!D.isValidElement(i))return;let s=[...e,r];if(i.type===D.Fragment){n.push.apply(n,XT(i.props.children,s));return}ui(i.type===iw,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ui(!i.props.index||!i.props.children,"An index route cannot have child routes.");let a={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=XT(i.props.children,s)),n.push(a)}),n}var rw="get",sw="application/x-www-form-urlencoded";function ZS(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function OW(t){return ZS(t)&&t.tagName.toLowerCase()==="button"}function LW(t){return ZS(t)&&t.tagName.toLowerCase()==="form"}function FW(t){return ZS(t)&&t.tagName.toLowerCase()==="input"}function kW(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function NW(t,e){return t.button===0&&(!e||e==="_self")&&!kW(t)}var c1=null;function BW(){if(c1===null)try{new FormData(document.createElement("form"),0),c1=!1}catch{c1=!0}return c1}var IW=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function oA(t){return t!=null&&!IW.has(t)?(Uo(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${sw}"`),null):t}function HW(t,e){let n,i,r,s,a;if(LW(t)){let o=t.getAttribute("action");i=o?Yc(o,e):null,n=t.getAttribute("method")||rw,r=oA(t.getAttribute("enctype"))||sw,s=new FormData(t)}else if(OW(t)||FW(t)&&(t.type==="submit"||t.type==="image")){let o=t.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||o.getAttribute("action");if(i=l?Yc(l,e):null,n=t.getAttribute("formmethod")||o.getAttribute("method")||rw,r=oA(t.getAttribute("formenctype"))||oA(o.getAttribute("enctype"))||sw,s=new FormData(o,t),!BW()){let{name:u,type:h,value:g}=t;if(h==="image"){let v=u?`${u}.`:"";s.append(`${v}x`,"0"),s.append(`${v}y`,"0")}else u&&s.append(u,g)}}else{if(ZS(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=rw,i=null,r=sw,a=t}return s&&r==="text/plain"&&(a=s,s=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:s,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function aM(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function GW(t,e,n,i){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?r.pathname.endsWith("/")?r.pathname=`${r.pathname}_.${i}`:r.pathname=`${r.pathname}.${i}`:r.pathname==="/"?r.pathname=`_root.${i}`:e&&Yc(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${i}`,r}async function zW(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function VW(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function UW(t,e,n){let i=await Promise.all(t.map(async r=>{let s=e.routes[r.route.id];if(s){let a=await zW(s,n);return a.links?a.links():[]}return[]}));return KW(i.flat(1).filter(VW).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function b4(t,e,n,i,r,s){let a=(l,u)=>n[u]?l.route.id!==n[u].route.id:!0,o=(l,u)=>n[u].pathname!==l.pathname||n[u].route.path?.endsWith("*")&&n[u].params["*"]!==l.params["*"];return s==="assets"?e.filter((l,u)=>a(l,u)||o(l,u)):s==="data"?e.filter((l,u)=>{let h=i.routes[l.route.id];if(!h||!h.hasLoader)return!1;if(a(l,u)||o(l,u))return!0;if(l.route.shouldRevalidate){let g=l.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function jW(t,e,{includeHydrateFallback:n}={}){return WW(t.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let s=[r.module];return r.clientActionModule&&(s=s.concat(r.clientActionModule)),r.clientLoaderModule&&(s=s.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(s=s.concat(r.hydrateFallbackModule)),r.imports&&(s=s.concat(r.imports)),s}).flat(1))}function WW(t){return[...new Set(t)]}function qW(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function KW(t,e){let n=new Set;return new Set(e),t.reduce((i,r)=>{let s=JSON.stringify(qW(r));return n.has(s)||(n.add(s),i.push({key:s,link:r})),i},[])}function u9(){let t=D.useContext(am);return aM(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function YW(){let t=D.useContext($S);return aM(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var oM=D.createContext(void 0);oM.displayName="FrameworkContext";function h9(){let t=D.useContext(oM);return aM(t,"You must render this element inside a <HydratedRouter> element"),t}function XW(t,e){let n=D.useContext(oM),[i,r]=D.useState(!1),[s,a]=D.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:u,onMouseLeave:h,onTouchStart:g}=e,v=D.useRef(null);D.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let S=T=>{T.forEach(_=>{a(_.isIntersecting)})},x=new IntersectionObserver(S,{threshold:.5});return v.current&&x.observe(v.current),()=>{x.disconnect()}}},[t]),D.useEffect(()=>{if(i){let S=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(S)}}},[i]);let y=()=>{r(!0)},w=()=>{r(!1),a(!1)};return n?t!=="intent"?[s,v,{}]:[s,v,{onFocus:i0(o,y),onBlur:i0(l,w),onMouseEnter:i0(u,y),onMouseLeave:i0(h,w),onTouchStart:i0(g,y)}]:[!1,v,{}]}function i0(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function $W({page:t,...e}){let{router:n}=u9(),i=D.useMemo(()=>X7(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?D.createElement(QW,{page:t,matches:i,...e}):null}function ZW(t){let{manifest:e,routeModules:n}=h9(),[i,r]=D.useState([]);return D.useEffect(()=>{let s=!1;return UW(t,e,n).then(a=>{s||r(a)}),()=>{s=!0}},[t,e,n]),i}function QW({page:t,matches:e,...n}){let i=Mf(),{future:r,manifest:s,routeModules:a}=h9(),{basename:o}=u9(),{loaderData:l,matches:u}=YW(),h=D.useMemo(()=>b4(t,e,u,s,i,"data"),[t,e,u,s,i]),g=D.useMemo(()=>b4(t,e,u,s,i,"assets"),[t,e,u,s,i]),v=D.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let S=new Set,x=!1;if(e.forEach(_=>{let M=s.routes[_.route.id];!M||!M.hasLoader||(!h.some(F=>F.route.id===_.route.id)&&_.route.id in l&&a[_.route.id]?.shouldRevalidate||M.hasClientLoader?x=!0:S.add(_.route.id))}),S.size===0)return[];let T=GW(t,o,r.unstable_trailingSlashAwareDataRequests,"data");return x&&S.size>0&&T.searchParams.set("_routes",e.filter(_=>S.has(_.route.id)).map(_=>_.route.id).join(",")),[T.pathname+T.search]},[o,r.unstable_trailingSlashAwareDataRequests,l,i,s,h,e,t,a]),y=D.useMemo(()=>jW(g,s),[g,s]),w=ZW(g);return D.createElement(D.Fragment,null,v.map(S=>D.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...n})),y.map(S=>D.createElement("link",{key:S,rel:"modulepreload",href:S,...n})),w.map(({key:S,link:x})=>D.createElement("link",{key:S,nonce:n.nonce,...x,crossOrigin:x.crossOrigin??n.crossOrigin})))}function JW(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var eq=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{eq&&(window.__reactRouterVersion="7.13.0")}catch{}function tq({basename:t,children:e,unstable_useTransitions:n,window:i}){let r=D.useRef();r.current==null&&(r.current=Fj({window:i,v5Compat:!0}));let s=r.current,[a,o]=D.useState({action:s.action,location:s.location}),l=D.useCallback(u=>{n===!1?o(u):D.startTransition(()=>o(u))},[n]);return D.useLayoutEffect(()=>s.listen(l),[s,l]),D.createElement(_W,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:s,unstable_useTransitions:n})}var d9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,f9=D.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:r,reloadDocument:s,replace:a,state:o,target:l,to:u,preventScrollReset:h,viewTransition:g,unstable_defaultShouldRevalidate:v,...y},w){let{basename:S,unstable_useTransitions:x}=D.useContext(co),T=typeof u=="string"&&d9.test(u),_=t9(u,S);u=_.to;let M=gW(u,{relative:r}),[F,L,k]=XW(i,y),B=rq(u,{replace:a,state:o,target:l,preventScrollReset:h,relative:r,viewTransition:g,unstable_defaultShouldRevalidate:v,unstable_useTransitions:x});function H(W){e&&e(W),W.defaultPrevented||B(W)}let U=D.createElement("a",{...y,...k,href:_.absoluteURL||M,onClick:_.isExternal||s?e:H,ref:JW(w,L),target:l,"data-discover":!T&&n==="render"?"true":void 0});return F&&!T?D.createElement(D.Fragment,null,U,D.createElement($W,{page:M})):U});f9.displayName="Link";var aw=D.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:r=!1,style:s,to:a,viewTransition:o,children:l,...u},h){let g=Ny(a,{relative:u.relative}),v=Mf(),y=D.useContext($S),{navigator:w,basename:S}=D.useContext(co),x=y!=null&&cq(g)&&o===!0,T=w.encodeLocation?w.encodeLocation(g).pathname:g.pathname,_=v.pathname,M=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;n||(_=_.toLowerCase(),M=M?M.toLowerCase():null,T=T.toLowerCase()),M&&S&&(M=Yc(M,S)||M);const F=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let L=_===T||!r&&_.startsWith(T)&&_.charAt(F)==="/",k=M!=null&&(M===T||!r&&M.startsWith(T)&&M.charAt(T.length)==="/"),B={isActive:L,isPending:k,isTransitioning:x},H=L?e:void 0,U;typeof i=="function"?U=i(B):U=[i,L?"active":null,k?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let W=typeof s=="function"?s(B):s;return D.createElement(f9,{...u,"aria-current":H,className:U,ref:h,style:W,to:a,viewTransition:o},typeof l=="function"?l(B):l)});aw.displayName="NavLink";var nq=D.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:r,state:s,method:a=rw,action:o,onSubmit:l,relative:u,preventScrollReset:h,viewTransition:g,unstable_defaultShouldRevalidate:v,...y},w)=>{let{unstable_useTransitions:S}=D.useContext(co),x=oq(),T=lq(o,{relative:u}),_=a.toLowerCase()==="get"?"get":"post",M=typeof o=="string"&&d9.test(o),F=L=>{if(l&&l(L),L.defaultPrevented)return;L.preventDefault();let k=L.nativeEvent.submitter,B=k?.getAttribute("formmethod")||a,H=()=>x(k||L.currentTarget,{fetcherKey:e,method:B,navigate:n,replace:r,state:s,relative:u,preventScrollReset:h,viewTransition:g,unstable_defaultShouldRevalidate:v});S&&n!==!1?D.startTransition(()=>H()):H()};return D.createElement("form",{ref:w,method:_,action:T,onSubmit:i?l:F,...y,"data-discover":!M&&t==="render"?"true":void 0})});nq.displayName="Form";function iq(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function g9(t){let e=D.useContext(am);return ui(e,iq(t)),e}function rq(t,{target:e,replace:n,state:i,preventScrollReset:r,relative:s,viewTransition:a,unstable_defaultShouldRevalidate:o,unstable_useTransitions:l}={}){let u=pW(),h=Mf(),g=Ny(t,{relative:s});return D.useCallback(v=>{if(NW(v,e)){v.preventDefault();let y=n!==void 0?n:ty(h)===ty(g),w=()=>u(t,{replace:y,state:i,preventScrollReset:r,relative:s,viewTransition:a,unstable_defaultShouldRevalidate:o});l?D.startTransition(()=>w()):w()}},[h,u,g,n,i,e,t,r,s,a,o,l])}var sq=0,aq=()=>`__${String(++sq)}__`;function oq(){let{router:t}=g9("useSubmit"),{basename:e}=D.useContext(co),n=TW(),i=t.fetch,r=t.navigate;return D.useCallback(async(s,a={})=>{let{action:o,method:l,encType:u,formData:h,body:g}=HW(s,e);if(a.navigate===!1){let v=a.fetcherKey||aq();await i(v,n,a.action||o,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:h,body:g,formMethod:a.method||l,formEncType:a.encType||u,flushSync:a.flushSync})}else await r(a.action||o,{unstable_defaultShouldRevalidate:a.unstable_defaultShouldRevalidate,preventScrollReset:a.preventScrollReset,formData:h,body:g,formMethod:a.method||l,formEncType:a.encType||u,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[i,r,e,n])}function lq(t,{relative:e}={}){let{basename:n}=D.useContext(co),i=D.useContext(ru);ui(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),s={...Ny(t||".",{relative:e})},a=Mf();if(t==null){s.search=a.search;let o=new URLSearchParams(s.search),l=o.getAll("index");if(l.some(h=>h==="")){o.delete("index"),l.filter(g=>g).forEach(g=>o.append("index",g));let h=o.toString();s.search=h?`?${h}`:""}}return(!t||t===".")&&r.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:jc([n,s.pathname])),ty(s)}function cq(t,{relative:e}={}){let n=D.useContext(i9);ui(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=g9("useViewTransitionState"),r=Ny(t,{relative:e});if(!n.isTransitioning)return!1;let s=Yc(n.currentLocation.pathname,i)||n.currentLocation.pathname,a=Yc(n.nextLocation.pathname,i)||n.nextLocation.pathname;return kw(r.pathname,a)!=null||kw(r.pathname,s)!=null}var QS=Y7();const uq=Wo(QS);function p9(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=p9(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function Wi(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=p9(t))&&(i&&(i+=" "),i+=e);return i}var hq=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function lM(t){if(typeof t!="string")return!1;var e=hq;return e.includes(t)}var dq=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function m9(t){if(typeof t!="string")return!1;var e=dq;return e.includes(t)}function v9(t){return typeof t=="string"&&t.startsWith("data-")}function qp(t){var e=Object.entries(t).filter(n=>{var[i]=n;return m9(i)||v9(i)});return Object.fromEntries(e)}function $T(t){if(t==null)return null;if(D.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return qp(e)}return typeof t=="object"&&!Array.isArray(t)?qp(t):null}function ro(t){var e=Object.entries(t).filter(n=>{var[i]=n;return m9(i)||v9(i)||lM(i)});return Object.fromEntries(e)}var fq=["children","width","height","viewBox","className","style","title","desc"];function ZT(){return ZT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ZT.apply(null,arguments)}function gq(t,e){if(t==null)return{};var n,i,r=pq(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function pq(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var y9=D.forwardRef((t,e)=>{var{children:n,width:i,height:r,viewBox:s,className:a,style:o,title:l,desc:u}=t,h=gq(t,fq),g=s||{width:i,height:r,x:0,y:0},v=Wi("recharts-surface",a);return D.createElement("svg",ZT({},ro(h),{className:v,width:i,height:r,style:o,viewBox:"".concat(g.x," ").concat(g.y," ").concat(g.width," ").concat(g.height),ref:e}),D.createElement("title",null,l),D.createElement("desc",null,u),n)}),mq=["children","className"];function QT(){return QT=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},QT.apply(null,arguments)}function vq(t,e){if(t==null)return{};var n,i,r=yq(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function yq(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var Dh=D.forwardRef((t,e)=>{var{children:n,className:i}=t,r=vq(t,mq),s=Wi("recharts-layer",i);return D.createElement("g",QT({className:s},ro(r),{ref:e}),n)}),Cq=D.createContext(null);function _n(t){return function(){return t}}const C9=Math.cos,Nw=Math.sin,qo=Math.sqrt,Bw=Math.PI,JS=2*Bw,JT=Math.PI,eR=2*JT,Vd=1e-6,bq=eR-Vd;function b9(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function wq(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return b9;const n=10**e;return function(i){this._+=i[0];for(let r=1,s=i.length;r<s;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}let Sq=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?b9:wq(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,i,r){this._append`Q${+e},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(e,n,i,r,s,a){this._append`C${+e},${+n},${+i},${+r},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,i,r,s){if(e=+e,n=+n,i=+i,r=+r,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,l=i-e,u=r-n,h=a-e,g=o-n,v=h*h+g*g;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(v>Vd)if(!(Math.abs(g*l-u*h)>Vd)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let y=i-a,w=r-o,S=l*l+u*u,x=y*y+w*w,T=Math.sqrt(S),_=Math.sqrt(v),M=s*Math.tan((JT-Math.acos((S+v-x)/(2*T*_)))/2),F=M/_,L=M/T;Math.abs(F-1)>Vd&&this._append`L${e+F*h},${n+F*g}`,this._append`A${s},${s},0,0,${+(g*y>h*w)},${this._x1=e+L*l},${this._y1=n+L*u}`}}arc(e,n,i,r,s,a){if(e=+e,n=+n,i=+i,a=!!a,i<0)throw new Error(`negative radius: ${i}`);let o=i*Math.cos(r),l=i*Math.sin(r),u=e+o,h=n+l,g=1^a,v=a?r-s:s-r;this._x1===null?this._append`M${u},${h}`:(Math.abs(this._x1-u)>Vd||Math.abs(this._y1-h)>Vd)&&this._append`L${u},${h}`,i&&(v<0&&(v=v%eR+eR),v>bq?this._append`A${i},${i},0,1,${g},${e-o},${n-l}A${i},${i},0,1,${g},${this._x1=u},${this._y1=h}`:v>Vd&&this._append`A${i},${i},0,${+(v>=JT)},${g},${this._x1=e+i*Math.cos(s)},${this._y1=n+i*Math.sin(s)}`)}rect(e,n,i,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function cM(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);e=i}return t},()=>new Sq(e)}function uM(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function w9(t){this._context=t}w9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function e2(t){return new w9(t)}function S9(t){return t[0]}function x9(t){return t[1]}function A9(t,e){var n=_n(!0),i=null,r=e2,s=null,a=cM(o);t=typeof t=="function"?t:t===void 0?S9:_n(t),e=typeof e=="function"?e:e===void 0?x9:_n(e);function o(l){var u,h=(l=uM(l)).length,g,v=!1,y;for(i==null&&(s=r(y=a())),u=0;u<=h;++u)!(u<h&&n(g=l[u],u,l))===v&&((v=!v)?s.lineStart():s.lineEnd()),v&&s.point(+t(g,u,l),+e(g,u,l));if(y)return s=null,y+""||null}return o.x=function(l){return arguments.length?(t=typeof l=="function"?l:_n(+l),o):t},o.y=function(l){return arguments.length?(e=typeof l=="function"?l:_n(+l),o):e},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:_n(!!l),o):n},o.curve=function(l){return arguments.length?(r=l,i!=null&&(s=r(i)),o):r},o.context=function(l){return arguments.length?(l==null?i=s=null:s=r(i=l),o):i},o}function u1(t,e,n){var i=null,r=_n(!0),s=null,a=e2,o=null,l=cM(u);t=typeof t=="function"?t:t===void 0?S9:_n(+t),e=typeof e=="function"?e:_n(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?x9:_n(+n);function u(g){var v,y,w,S=(g=uM(g)).length,x,T=!1,_,M=new Array(S),F=new Array(S);for(s==null&&(o=a(_=l())),v=0;v<=S;++v){if(!(v<S&&r(x=g[v],v,g))===T)if(T=!T)y=v,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),w=v-1;w>=y;--w)o.point(M[w],F[w]);o.lineEnd(),o.areaEnd()}T&&(M[v]=+t(x,v,g),F[v]=+e(x,v,g),o.point(i?+i(x,v,g):M[v],n?+n(x,v,g):F[v]))}if(_)return o=null,_+""||null}function h(){return A9().defined(r).curve(a).context(s)}return u.x=function(g){return arguments.length?(t=typeof g=="function"?g:_n(+g),i=null,u):t},u.x0=function(g){return arguments.length?(t=typeof g=="function"?g:_n(+g),u):t},u.x1=function(g){return arguments.length?(i=g==null?null:typeof g=="function"?g:_n(+g),u):i},u.y=function(g){return arguments.length?(e=typeof g=="function"?g:_n(+g),n=null,u):e},u.y0=function(g){return arguments.length?(e=typeof g=="function"?g:_n(+g),u):e},u.y1=function(g){return arguments.length?(n=g==null?null:typeof g=="function"?g:_n(+g),u):n},u.lineX0=u.lineY0=function(){return h().x(t).y(e)},u.lineY1=function(){return h().x(t).y(n)},u.lineX1=function(){return h().x(i).y(e)},u.defined=function(g){return arguments.length?(r=typeof g=="function"?g:_n(!!g),u):r},u.curve=function(g){return arguments.length?(a=g,s!=null&&(o=a(s)),u):a},u.context=function(g){return arguments.length?(g==null?s=o=null:o=a(s=g),u):s},u}class E9{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function xq(t){return new E9(t,!0)}function Aq(t){return new E9(t,!1)}const hM={draw(t,e){const n=qo(e/Bw);t.moveTo(n,0),t.arc(0,0,n,0,JS)}},Eq={draw(t,e){const n=qo(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},T9=qo(1/3),Tq=T9*2,Rq={draw(t,e){const n=qo(e/Tq),i=n*T9;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}},Dq={draw(t,e){const n=qo(e),i=-n/2;t.rect(i,i,n,n)}},Mq=.8908130915292852,R9=Nw(Bw/10)/Nw(7*Bw/10),_q=Nw(JS/10)*R9,Pq=-C9(JS/10)*R9,Oq={draw(t,e){const n=qo(e*Mq),i=_q*n,r=Pq*n;t.moveTo(0,-n),t.lineTo(i,r);for(let s=1;s<5;++s){const a=JS*s/5,o=C9(a),l=Nw(a);t.lineTo(l*n,-o*n),t.lineTo(o*i-l*r,l*i+o*r)}t.closePath()}},lA=qo(3),Lq={draw(t,e){const n=-qo(e/(lA*3));t.moveTo(0,n*2),t.lineTo(-lA*n,-n),t.lineTo(lA*n,-n),t.closePath()}},Ga=-.5,za=qo(3)/2,tR=1/qo(12),Fq=(tR/2+1)*3,kq={draw(t,e){const n=qo(e/Fq),i=n/2,r=n*tR,s=i,a=n*tR+n,o=-s,l=a;t.moveTo(i,r),t.lineTo(s,a),t.lineTo(o,l),t.lineTo(Ga*i-za*r,za*i+Ga*r),t.lineTo(Ga*s-za*a,za*s+Ga*a),t.lineTo(Ga*o-za*l,za*o+Ga*l),t.lineTo(Ga*i+za*r,Ga*r-za*i),t.lineTo(Ga*s+za*a,Ga*a-za*s),t.lineTo(Ga*o+za*l,Ga*l-za*o),t.closePath()}};function Nq(t,e){let n=null,i=cM(r);t=typeof t=="function"?t:_n(t||hM),e=typeof e=="function"?e:_n(e===void 0?64:+e);function r(){let s;if(n||(n=s=i()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),s)return n=null,s+""||null}return r.type=function(s){return arguments.length?(t=typeof s=="function"?s:_n(s),r):t},r.size=function(s){return arguments.length?(e=typeof s=="function"?s:_n(+s),r):e},r.context=function(s){return arguments.length?(n=s??null,r):n},r}function Iw(){}function Hw(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function D9(t){this._context=t}D9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Hw(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Hw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Bq(t){return new D9(t)}function M9(t){this._context=t}M9.prototype={areaStart:Iw,areaEnd:Iw,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Hw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Iq(t){return new M9(t)}function _9(t){this._context=t}_9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Hw(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function Hq(t){return new _9(t)}function P9(t){this._context=t}P9.prototype={areaStart:Iw,areaEnd:Iw,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function Gq(t){return new P9(t)}function w4(t){return t<0?-1:1}function S4(t,e,n){var i=t._x1-t._x0,r=e-t._x1,s=(t._y1-t._y0)/(i||r<0&&-0),a=(n-t._y1)/(r||i<0&&-0),o=(s*r+a*i)/(i+r);return(w4(s)+w4(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function x4(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function cA(t,e,n){var i=t._x0,r=t._y0,s=t._x1,a=t._y1,o=(s-i)/3;t._context.bezierCurveTo(i+o,r+o*e,s-o,a-o*n,s,a)}function Gw(t){this._context=t}Gw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:cA(this,this._t0,x4(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,cA(this,x4(this,n=S4(this,t,e)),n);break;default:cA(this,this._t0,n=S4(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function O9(t){this._context=new L9(t)}(O9.prototype=Object.create(Gw.prototype)).point=function(t,e){Gw.prototype.point.call(this,e,t)};function L9(t){this._context=t}L9.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,s){this._context.bezierCurveTo(e,t,i,n,s,r)}};function zq(t){return new Gw(t)}function Vq(t){return new O9(t)}function F9(t){this._context=t}F9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=A4(t),r=A4(e),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(i[0][s],r[0][s],i[1][s],r[1][s],t[a],e[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function A4(t){var e,n=t.length-1,i,r=new Array(n),s=new Array(n),a=new Array(n);for(r[0]=0,s[0]=2,a[0]=t[0]+2*t[1],e=1;e<n-1;++e)r[e]=1,s[e]=4,a[e]=4*t[e]+2*t[e+1];for(r[n-1]=2,s[n-1]=7,a[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=r[e]/s[e-1],s[e]-=i,a[e]-=i*a[e-1];for(r[n-1]=a[n-1]/s[n-1],e=n-2;e>=0;--e)r[e]=(a[e]-r[e+1])/s[e];for(s[n-1]=(t[n]+r[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-r[e+1];return[r,s]}function Uq(t){return new F9(t)}function t2(t,e){this._context=t,this._t=e}t2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function jq(t){return new t2(t,.5)}function Wq(t){return new t2(t,0)}function qq(t){return new t2(t,1)}function Kp(t,e){if((a=t.length)>1)for(var n=1,i,r,s=t[e[0]],a,o=s.length;n<a;++n)for(r=s,s=t[e[n]],i=0;i<o;++i)s[i][1]+=s[i][0]=isNaN(r[i][1])?r[i][0]:r[i][1]}function nR(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Kq(t,e){return t[e]}function Yq(t){const e=[];return e.key=t,e}function Xq(){var t=_n([]),e=nR,n=Kp,i=Kq;function r(s){var a=Array.from(t.apply(this,arguments),Yq),o,l=a.length,u=-1,h;for(const g of s)for(o=0,++u;o<l;++o)(a[o][u]=[0,+i(g,a[o].key,u,s)]).data=g;for(o=0,h=uM(e(a));o<l;++o)a[h[o]].index=o;return n(a,h),a}return r.keys=function(s){return arguments.length?(t=typeof s=="function"?s:_n(Array.from(s)),r):t},r.value=function(s){return arguments.length?(i=typeof s=="function"?s:_n(+s),r):i},r.order=function(s){return arguments.length?(e=s==null?nR:typeof s=="function"?s:_n(Array.from(s)),r):e},r.offset=function(s){return arguments.length?(n=s??Kp,r):n},r}function $q(t,e){if((i=t.length)>0){for(var n,i,r=0,s=t[0].length,a;r<s;++r){for(a=n=0;n<i;++n)a+=t[n][r][1]||0;if(a)for(n=0;n<i;++n)t[n][r][1]/=a}Kp(t,e)}}function Zq(t,e){if((r=t.length)>0){for(var n=0,i=t[e[0]],r,s=i.length;n<s;++n){for(var a=0,o=0;a<r;++a)o+=t[a][n][1]||0;i[n][1]+=i[n][0]=-o/2}Kp(t,e)}}function Qq(t,e){if(!(!((a=t.length)>0)||!((s=(r=t[e[0]]).length)>0))){for(var n=0,i=1,r,s,a;i<s;++i){for(var o=0,l=0,u=0;o<a;++o){for(var h=t[e[o]],g=h[i][1]||0,v=h[i-1][1]||0,y=(g-v)/2,w=0;w<o;++w){var S=t[e[w]],x=S[i][1]||0,T=S[i-1][1]||0;y+=x-T}l+=g,u+=y*g}r[i-1][1]+=r[i-1][0]=n,l&&(n-=u/l)}r[i-1][1]+=r[i-1][0]=n,Kp(t,e)}}var uA={},hA={},E4;function Jq(){return E4||(E4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(hA)),hA}var dA={},T4;function k9(){return T4||(T4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(dA)),dA}var fA={},R4;function dM(){return R4||(R4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=e})(fA)),fA}var gA={},pA={},D4;function eK(){return D4||(D4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const i=String(n);return i==="0"&&Object.is(Number(n),-0)?"-0":i}t.toString=e})(pA)),pA}var M4;function fM(){return M4||(M4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=eK(),n=dM();function i(r){if(Array.isArray(r))return r.map(n.toKey);if(typeof r=="symbol")return[r];r=e.toString(r);const s=[],a=r.length;if(a===0)return s;let o=0,l="",u="",h=!1;for(r.charCodeAt(0)===46&&(s.push(""),o++);o<a;){const g=r[o];u?g==="\\"&&o+1<a?(o++,l+=r[o]):g===u?u="":l+=g:h?g==='"'||g==="'"?u=g:g==="]"?(h=!1,s.push(l),l=""):l+=g:g==="["?(h=!0,l&&(s.push(l),l="")):g==="."?l&&(s.push(l),l=""):l+=g,o++}return l&&s.push(l),s}t.toPath=i})(gA)),gA}var _4;function gM(){return _4||(_4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Jq(),n=k9(),i=dM(),r=fM();function s(o,l,u){if(o==null)return u;switch(typeof l){case"string":{if(e.isUnsafeProperty(l))return u;const h=o[l];return h===void 0?n.isDeepKey(l)?s(o,r.toPath(l),u):u:h}case"number":case"symbol":{typeof l=="number"&&(l=i.toKey(l));const h=o[l];return h===void 0?u:h}default:{if(Array.isArray(l))return a(o,l,u);if(Object.is(l?.valueOf(),-0)?l="-0":l=String(l),e.isUnsafeProperty(l))return u;const h=o[l];return h===void 0?u:h}}}function a(o,l,u){if(l.length===0)return u;let h=o;for(let g=0;g<l.length;g++){if(h==null||e.isUnsafeProperty(l[g]))return u;h=h[l[g]]}return h===void 0?u:h}t.get=s})(uA)),uA}var mA,P4;function tK(){return P4||(P4=1,mA=gM().get),mA}var nK=tK();const ny=Wo(nK);var Gs=t=>t===0?0:t>0?1:-1,Kl=t=>typeof t=="number"&&t!=+t,Xc=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,At=t=>(typeof t=="number"||t instanceof Number)&&!Kl(t),$c=t=>At(t)||typeof t=="string",iK=0,iy=t=>{var e=++iK;return"".concat(t||"").concat(e)},aa=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!At(e)&&typeof e!="string")return i;var s;if(Xc(e)){if(n==null)return i;var a=e.indexOf("%");s=n*parseFloat(e.slice(0,a))/100}else s=+e;return Kl(s)&&(s=i),r&&n!=null&&s>n&&(s=n),s},N9=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},i=0;i<e;i++)if(!n[t[i]])n[t[i]]=!0;else return!0;return!1};function Go(t,e,n){return At(t)&&At(e)?t+n*(e-t):e}function rK(t,e,n){if(!(!t||!t.length))return t.find(i=>i&&(typeof e=="function"?e(i):ny(i,e))===n)}var ua=t=>t===null||typeof t>"u",By=t=>ua(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),sK=["type","size","sizeType"];function iR(){return iR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},iR.apply(null,arguments)}function O4(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function L4(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O4(Object(n),!0).forEach(function(i){aK(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O4(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function aK(t,e,n){return(e=oK(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oK(t){var e=lK(t,"string");return typeof e=="symbol"?e:e+""}function lK(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cK(t,e){if(t==null)return{};var n,i,r=uK(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function uK(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var B9={symbolCircle:hM,symbolCross:Eq,symbolDiamond:Rq,symbolSquare:Dq,symbolStar:Oq,symbolTriangle:Lq,symbolWye:kq},hK=Math.PI/180,dK=t=>{var e="symbol".concat(By(t));return B9[e]||hM},fK=(t,e,n)=>{if(e==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*hK;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.tan(i)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},gK=(t,e)=>{B9["symbol".concat(By(t))]=e},I9=t=>{var{type:e="circle",size:n=64,sizeType:i="area"}=t,r=cK(t,sK),s=L4(L4({},r),{},{type:e,size:n,sizeType:i}),a="circle";typeof e=="string"&&(a=e);var o=()=>{var v=dK(a),y=Nq().type(v).size(fK(n,i,a)),w=y();if(w!==null)return w},{className:l,cx:u,cy:h}=s,g=ro(s);return u===+u&&h===+h&&n===+n?D.createElement("path",iR({},g,{className:Wi("recharts-symbols",l),transform:"translate(".concat(u,", ").concat(h,")"),d:o()})):null};I9.registerSymbol=gK;var pK=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(D.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var i={};return Object.keys(n).forEach(r=>{lM(r)&&(i[r]=(s=>n[r](n,s)))}),i},mK=(t,e,n)=>i=>(t(e,n,i),null),vK=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var i=null;return Object.keys(t).forEach(r=>{var s=t[r];lM(r)&&typeof s=="function"&&(i||(i={}),i[r]=mK(s,e,n))}),i},vA={},yA={},F4;function yK(){return F4||(F4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i){const r=new Map;for(let s=0;s<n.length;s++){const a=n[s],o=i(a);r.has(o)||r.set(o,a)}return Array.from(r.values())}t.uniqBy=e})(yA)),yA}var CA={},k4;function H9(){return k4||(k4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(CA)),CA}var bA={},wA={},SA={},N4;function CK(){return N4||(N4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(SA)),SA}var B4;function pM(){return B4||(B4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=CK();function n(i){return i!=null&&typeof i!="function"&&e.isLength(i.length)}t.isArrayLike=n})(wA)),wA}var xA={},I4;function bK(){return I4||(I4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(xA)),xA}var H4;function wK(){return H4||(H4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=pM(),n=bK();function i(r){return n.isObjectLike(r)&&e.isArrayLike(r)}t.isArrayLikeObject=i})(bA)),bA}var AA={},EA={},G4;function SK(){return G4||(G4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=gM();function n(i){return function(r){return e.get(r,i)}}t.property=n})(EA)),EA}var TA={},RA={},DA={},MA={},z4;function G9(){return z4||(z4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(MA)),MA}var _A={},V4;function z9(){return V4||(V4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(_A)),_A}var PA={},U4;function V9(){return U4||(U4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i){return n===i||Number.isNaN(n)&&Number.isNaN(i)}t.eq=e})(PA)),PA}var j4;function xK(){return j4||(j4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=G9(),n=z9(),i=V9();function r(h,g,v){return typeof v!="function"?r(h,g,()=>{}):s(h,g,function y(w,S,x,T,_,M){const F=v(w,S,x,T,_,M);return F!==void 0?!!F:s(w,S,y,M)},new Map)}function s(h,g,v,y){if(g===h)return!0;switch(typeof g){case"object":return a(h,g,v,y);case"function":return Object.keys(g).length>0?s(h,{...g},v,y):i.eq(h,g);default:return e.isObject(h)?typeof g=="string"?g==="":!0:i.eq(h,g)}}function a(h,g,v,y){if(g==null)return!0;if(Array.isArray(g))return l(h,g,v,y);if(g instanceof Map)return o(h,g,v,y);if(g instanceof Set)return u(h,g,v,y);const w=Object.keys(g);if(h==null)return w.length===0;if(w.length===0)return!0;if(y?.has(g))return y.get(g)===h;y?.set(g,h);try{for(let S=0;S<w.length;S++){const x=w[S];if(!n.isPrimitive(h)&&!(x in h)||g[x]===void 0&&h[x]!==void 0||g[x]===null&&h[x]!==null||!v(h[x],g[x],x,h,g,y))return!1}return!0}finally{y?.delete(g)}}function o(h,g,v,y){if(g.size===0)return!0;if(!(h instanceof Map))return!1;for(const[w,S]of g.entries()){const x=h.get(w);if(v(x,S,w,h,g,y)===!1)return!1}return!0}function l(h,g,v,y){if(g.length===0)return!0;if(!Array.isArray(h))return!1;const w=new Set;for(let S=0;S<g.length;S++){const x=g[S];let T=!1;for(let _=0;_<h.length;_++){if(w.has(_))continue;const M=h[_];let F=!1;if(v(M,x,S,h,g,y)&&(F=!0),F){w.add(_),T=!0;break}}if(!T)return!1}return!0}function u(h,g,v,y){return g.size===0?!0:h instanceof Set?l([...h],[...g],v,y):!1}t.isMatchWith=r,t.isSetMatch=u})(DA)),DA}var W4;function U9(){return W4||(W4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=xK();function n(i,r){return e.isMatchWith(i,r,()=>{})}t.isMatch=n})(RA)),RA}var OA={},LA={},FA={},q4;function AK(){return q4||(q4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(i=>Object.prototype.propertyIsEnumerable.call(n,i))}t.getSymbols=e})(FA)),FA}var kA={},K4;function j9(){return K4||(K4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(kA)),kA}var NA={},Y4;function W9(){return Y4||(Y4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",i="[object Number]",r="[object Boolean]",s="[object Arguments]",a="[object Symbol]",o="[object Date]",l="[object Map]",u="[object Set]",h="[object Array]",g="[object Function]",v="[object ArrayBuffer]",y="[object Object]",w="[object Error]",S="[object DataView]",x="[object Uint8Array]",T="[object Uint8ClampedArray]",_="[object Uint16Array]",M="[object Uint32Array]",F="[object BigUint64Array]",L="[object Int8Array]",k="[object Int16Array]",B="[object Int32Array]",H="[object BigInt64Array]",U="[object Float32Array]",W="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=v,t.arrayTag=h,t.bigInt64ArrayTag=H,t.bigUint64ArrayTag=F,t.booleanTag=r,t.dataViewTag=S,t.dateTag=o,t.errorTag=w,t.float32ArrayTag=U,t.float64ArrayTag=W,t.functionTag=g,t.int16ArrayTag=k,t.int32ArrayTag=B,t.int8ArrayTag=L,t.mapTag=l,t.numberTag=i,t.objectTag=y,t.regexpTag=e,t.setTag=u,t.stringTag=n,t.symbolTag=a,t.uint16ArrayTag=_,t.uint32ArrayTag=M,t.uint8ArrayTag=x,t.uint8ClampedArrayTag=T})(NA)),NA}var BA={},X4;function EK(){return X4||(X4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(BA)),BA}var $4;function q9(){return $4||($4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=AK(),n=j9(),i=W9(),r=z9(),s=EK();function a(h,g){return o(h,void 0,h,new Map,g)}function o(h,g,v,y=new Map,w=void 0){const S=w?.(h,g,v,y);if(S!==void 0)return S;if(r.isPrimitive(h))return h;if(y.has(h))return y.get(h);if(Array.isArray(h)){const x=new Array(h.length);y.set(h,x);for(let T=0;T<h.length;T++)x[T]=o(h[T],T,v,y,w);return Object.hasOwn(h,"index")&&(x.index=h.index),Object.hasOwn(h,"input")&&(x.input=h.input),x}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const x=new RegExp(h.source,h.flags);return x.lastIndex=h.lastIndex,x}if(h instanceof Map){const x=new Map;y.set(h,x);for(const[T,_]of h)x.set(T,o(_,T,v,y,w));return x}if(h instanceof Set){const x=new Set;y.set(h,x);for(const T of h)x.add(o(T,void 0,v,y,w));return x}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(s.isTypedArray(h)){const x=new(Object.getPrototypeOf(h)).constructor(h.length);y.set(h,x);for(let T=0;T<h.length;T++)x[T]=o(h[T],T,v,y,w);return x}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const x=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return y.set(h,x),l(x,h,v,y,w),x}if(typeof File<"u"&&h instanceof File){const x=new File([h],h.name,{type:h.type});return y.set(h,x),l(x,h,v,y,w),x}if(typeof Blob<"u"&&h instanceof Blob){const x=new Blob([h],{type:h.type});return y.set(h,x),l(x,h,v,y,w),x}if(h instanceof Error){const x=new h.constructor;return y.set(h,x),x.message=h.message,x.name=h.name,x.stack=h.stack,x.cause=h.cause,l(x,h,v,y,w),x}if(h instanceof Boolean){const x=new Boolean(h.valueOf());return y.set(h,x),l(x,h,v,y,w),x}if(h instanceof Number){const x=new Number(h.valueOf());return y.set(h,x),l(x,h,v,y,w),x}if(h instanceof String){const x=new String(h.valueOf());return y.set(h,x),l(x,h,v,y,w),x}if(typeof h=="object"&&u(h)){const x=Object.create(Object.getPrototypeOf(h));return y.set(h,x),l(x,h,v,y,w),x}return h}function l(h,g,v=h,y,w){const S=[...Object.keys(g),...e.getSymbols(g)];for(let x=0;x<S.length;x++){const T=S[x],_=Object.getOwnPropertyDescriptor(h,T);(_==null||_.writable)&&(h[T]=o(g[T],T,v,y,w))}}function u(h){switch(n.getTag(h)){case i.argumentsTag:case i.arrayTag:case i.arrayBufferTag:case i.dataViewTag:case i.booleanTag:case i.dateTag:case i.float32ArrayTag:case i.float64ArrayTag:case i.int8ArrayTag:case i.int16ArrayTag:case i.int32ArrayTag:case i.mapTag:case i.numberTag:case i.objectTag:case i.regexpTag:case i.setTag:case i.stringTag:case i.symbolTag:case i.uint8ArrayTag:case i.uint8ClampedArrayTag:case i.uint16ArrayTag:case i.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=a,t.cloneDeepWithImpl=o,t.copyProperties=l})(LA)),LA}var Z4;function TK(){return Z4||(Z4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=q9();function n(i){return e.cloneDeepWithImpl(i,void 0,i,new Map,void 0)}t.cloneDeep=n})(OA)),OA}var Q4;function RK(){return Q4||(Q4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=U9(),n=TK();function i(r){return r=n.cloneDeep(r),s=>e.isMatch(s,r)}t.matches=i})(TA)),TA}var IA={},HA={},GA={},J4;function DK(){return J4||(J4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=q9(),n=W9();function i(r,s){return e.cloneDeepWith(r,(a,o,l,u)=>{const h=s?.(a,o,l,u);if(h!==void 0)return h;if(typeof r=="object")switch(Object.prototype.toString.call(r)){case n.numberTag:case n.stringTag:case n.booleanTag:{const g=new r.constructor(r?.valueOf());return e.copyProperties(g,r),g}case n.argumentsTag:{const g={};return e.copyProperties(g,r),g.length=r.length,g[Symbol.iterator]=r[Symbol.iterator],g}default:return}})}t.cloneDeepWith=i})(GA)),GA}var eP;function MK(){return eP||(eP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=DK();function n(i){return e.cloneDeepWith(i)}t.cloneDeep=n})(HA)),HA}var zA={},VA={},tP;function K9(){return tP||(tP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(i,r=Number.MAX_SAFE_INTEGER){switch(typeof i){case"number":return Number.isInteger(i)&&i>=0&&i<r;case"symbol":return!1;case"string":return e.test(i)}}t.isIndex=n})(VA)),VA}var UA={},nP;function _K(){return nP||(nP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=j9();function n(i){return i!==null&&typeof i=="object"&&e.getTag(i)==="[object Arguments]"}t.isArguments=n})(UA)),UA}var iP;function PK(){return iP||(iP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=k9(),n=K9(),i=_K(),r=fM();function s(a,o){let l;if(Array.isArray(o)?l=o:typeof o=="string"&&e.isDeepKey(o)&&a?.[o]==null?l=r.toPath(o):l=[o],l.length===0)return!1;let u=a;for(let h=0;h<l.length;h++){const g=l[h];if((u==null||!Object.hasOwn(u,g))&&!((Array.isArray(u)||i.isArguments(u))&&n.isIndex(g)&&g<u.length))return!1;u=u[g]}return!0}t.has=s})(zA)),zA}var rP;function OK(){return rP||(rP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=U9(),n=dM(),i=MK(),r=gM(),s=PK();function a(o,l){switch(typeof o){case"object":{Object.is(o?.valueOf(),-0)&&(o="-0");break}case"number":{o=n.toKey(o);break}}return l=i.cloneDeep(l),function(u){const h=r.get(u,o);return h===void 0?s.has(u,o):l===void 0?h===void 0:e.isMatch(h,l)}}t.matchesProperty=a})(IA)),IA}var sP;function LK(){return sP||(sP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=H9(),n=SK(),i=RK(),r=OK();function s(a){if(a==null)return e.identity;switch(typeof a){case"function":return a;case"object":return Array.isArray(a)&&a.length===2?r.matchesProperty(a[0],a[1]):i.matches(a);case"string":case"symbol":case"number":return n.property(a)}}t.iteratee=s})(AA)),AA}var aP;function FK(){return aP||(aP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=yK(),n=H9(),i=wK(),r=LK();function s(a,o=n.identity){return i.isArrayLikeObject(a)?e.uniqBy(Array.from(a),r.iteratee(o)):[]}t.uniqBy=s})(vA)),vA}var jA,oP;function kK(){return oP||(oP=1,jA=FK().uniqBy),jA}var NK=kK();const lP=Wo(NK);function BK(t,e,n){return e===!0?lP(t,n):typeof e=="function"?lP(t,e):t}var WA={exports:{}},qA={},KA={exports:{}},YA={};var cP;function IK(){if(cP)return YA;cP=1;var t=Rf();function e(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var n=typeof Object.is=="function"?Object.is:e,i=t.useState,r=t.useEffect,s=t.useLayoutEffect,a=t.useDebugValue;function o(g,v){var y=v(),w=i({inst:{value:y,getSnapshot:v}}),S=w[0].inst,x=w[1];return s(function(){S.value=y,S.getSnapshot=v,l(S)&&x({inst:S})},[g,y,v]),r(function(){return l(S)&&x({inst:S}),g(function(){l(S)&&x({inst:S})})},[g]),a(y),y}function l(g){var v=g.getSnapshot;g=g.value;try{var y=v();return!n(g,y)}catch{return!0}}function u(g,v){return v()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return YA.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,YA}var uP;function HK(){return uP||(uP=1,KA.exports=IK()),KA.exports}var hP;function GK(){if(hP)return qA;hP=1;var t=Rf(),e=HK();function n(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var i=typeof Object.is=="function"?Object.is:n,r=e.useSyncExternalStore,s=t.useRef,a=t.useEffect,o=t.useMemo,l=t.useDebugValue;return qA.useSyncExternalStoreWithSelector=function(u,h,g,v,y){var w=s(null);if(w.current===null){var S={hasValue:!1,value:null};w.current=S}else S=w.current;w=o(function(){function T(k){if(!_){if(_=!0,M=k,k=v(k),y!==void 0&&S.hasValue){var B=S.value;if(y(B,k))return F=B}return F=k}if(B=F,i(M,k))return B;var H=v(k);return y!==void 0&&y(B,H)?(M=k,B):(M=k,F=H)}var _=!1,M,F,L=g===void 0?null:g;return[function(){return T(h())},L===null?void 0:function(){return T(L())}]},[h,g,v,y]);var x=r(u,w[0],w[1]);return a(function(){S.hasValue=!0,S.value=x},[x]),l(x),x},qA}var dP;function zK(){return dP||(dP=1,WA.exports=GK()),WA.exports}var VK=zK(),mM=D.createContext(null),UK=t=>t,Nr=()=>{var t=D.useContext(mM);return t?t.store.dispatch:UK},ow=()=>{},jK=()=>ow,WK=(t,e)=>t===e;function Nt(t){var e=D.useContext(mM);return VK.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:jK,e?e.store.getState:ow,e?e.store.getState:ow,e?t:ow,WK)}function qK(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function KK(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function YK(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(i=>typeof i=="function"?`function ${i.name||"unnamed"}()`:typeof i).join(", ");throw new TypeError(`${e}[${n}]`)}}var fP=t=>Array.isArray(t)?t:[t];function XK(t){const e=Array.isArray(t[0])?t[0]:t;return YK(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function $K(t,e){const n=[],{length:i}=t;for(let r=0;r<i;r++)n.push(t[r].apply(null,e));return n}var ZK=class{constructor(t){this.value=t}deref(){return this.value}},QK=typeof WeakRef<"u"?WeakRef:ZK,JK=0,gP=1;function h1(){return{s:JK,v:void 0,o:null,p:null}}function Y9(t,e={}){let n=h1();const{resultEqualityCheck:i}=e;let r,s=0;function a(){let o=n;const{length:l}=arguments;for(let g=0,v=l;g<v;g++){const y=arguments[g];if(typeof y=="function"||typeof y=="object"&&y!==null){let w=o.o;w===null&&(o.o=w=new WeakMap);const S=w.get(y);S===void 0?(o=h1(),w.set(y,o)):o=S}else{let w=o.p;w===null&&(o.p=w=new Map);const S=w.get(y);S===void 0?(o=h1(),w.set(y,o)):o=S}}const u=o;let h;if(o.s===gP)h=o.v;else if(h=t.apply(null,arguments),s++,i){const g=r?.deref?.()??r;g!=null&&i(g,h)&&(h=g,s!==0&&s--),r=typeof h=="object"&&h!==null||typeof h=="function"?new QK(h):h}return u.s=gP,u.v=h,h}return a.clearCache=()=>{n=h1(),a.resetResultsCount()},a.resultsCount=()=>s,a.resetResultsCount=()=>{s=0},a}function eY(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,i=(...r)=>{let s=0,a=0,o,l={},u=r.pop();typeof u=="object"&&(l=u,u=r.pop()),qK(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const h={...n,...l},{memoize:g,memoizeOptions:v=[],argsMemoize:y=Y9,argsMemoizeOptions:w=[]}=h,S=fP(v),x=fP(w),T=XK(r),_=g(function(){return s++,u.apply(null,arguments)},...S),M=y(function(){a++;const L=$K(T,arguments);return o=_.apply(null,L),o},...x);return Object.assign(M,{resultFunc:u,memoizedResultFunc:_,dependencies:T,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>o,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:g,argsMemoize:y})};return Object.assign(i,{withTypes:()=>i}),i}var pe=eY(Y9),tY=Object.assign((t,e=pe)=>{KK(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),i=n.map(s=>t[s]);return e(i,(...s)=>s.reduce((a,o,l)=>(a[n[l]]=o,a),{}))},{withTypes:()=>tY}),XA={},$A={},ZA={},pP;function nY(){return pP||(pP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(i){return typeof i=="symbol"?1:i===null?2:i===void 0?3:i!==i?4:0}const n=(i,r,s)=>{if(i!==r){const a=e(i),o=e(r);if(a===o&&a===0){if(i<r)return s==="desc"?1:-1;if(i>r)return s==="desc"?-1:1}return s==="desc"?o-a:a-o}return 0};t.compareValues=n})(ZA)),ZA}var QA={},JA={},mP;function X9(){return mP||(mP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(JA)),JA}var vP;function iY(){return vP||(vP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=X9(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function r(s,a){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(i.test(s)||!n.test(s))||a!=null&&Object.hasOwn(a,s)}t.isKey=r})(QA)),QA}var yP;function rY(){return yP||(yP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=nY(),n=iY(),i=fM();function r(s,a,o,l){if(s==null)return[];o=l?void 0:o,Array.isArray(s)||(s=Object.values(s)),Array.isArray(a)||(a=a==null?[null]:[a]),a.length===0&&(a=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(y=>String(y));const u=(y,w)=>{let S=y;for(let x=0;x<w.length&&S!=null;++x)S=S[w[x]];return S},h=(y,w)=>w==null||y==null?w:typeof y=="object"&&"key"in y?Object.hasOwn(w,y.key)?w[y.key]:u(w,y.path):typeof y=="function"?y(w):Array.isArray(y)?u(w,y):typeof w=="object"?w[y]:w,g=a.map(y=>(Array.isArray(y)&&y.length===1&&(y=y[0]),y==null||typeof y=="function"||Array.isArray(y)||n.isKey(y)?y:{key:y,path:i.toPath(y)}));return s.map(y=>({original:y,criteria:g.map(w=>h(w,y))})).slice().sort((y,w)=>{for(let S=0;S<g.length;S++){const x=e.compareValues(y.criteria[S],w.criteria[S],o[S]);if(x!==0)return x}return 0}).map(y=>y.original)}t.orderBy=r})($A)),$A}var eE={},CP;function sY(){return CP||(CP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i=1){const r=[],s=Math.floor(i),a=(o,l)=>{for(let u=0;u<o.length;u++){const h=o[u];Array.isArray(h)&&l<s?a(h,l+1):r.push(h)}};return a(n,0),r}t.flatten=e})(eE)),eE}var tE={},bP;function $9(){return bP||(bP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=K9(),n=pM(),i=G9(),r=V9();function s(a,o,l){return i.isObject(l)&&(typeof o=="number"&&n.isArrayLike(l)&&e.isIndex(o)&&o<l.length||typeof o=="string"&&o in l)?r.eq(l[o],a):!1}t.isIterateeCall=s})(tE)),tE}var wP;function aY(){return wP||(wP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=rY(),n=sY(),i=$9();function r(s,...a){const o=a.length;return o>1&&i.isIterateeCall(s,a[0],a[1])?a=[]:o>2&&i.isIterateeCall(a[0],a[1],a[2])&&(a=[a[0]]),e.orderBy(s,n.flatten(a),["asc"])}t.sortBy=r})(XA)),XA}var nE,SP;function oY(){return SP||(SP=1,nE=aY().sortBy),nE}var lY=oY();const n2=Wo(lY);var Z9=t=>t.legend.settings,cY=t=>t.legend.size,uY=t=>t.legend.payload;pe([uY,Z9],(t,e)=>{var{itemSorter:n}=e,i=t.flat(1);return n?n2(i,n):i});var d1=1;function hY(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=D.useState({height:0,left:0,top:0,width:0}),i=D.useCallback(r=>{if(r!=null){var s=r.getBoundingClientRect(),a={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(a.height-e.height)>d1||Math.abs(a.left-e.left)>d1||Math.abs(a.top-e.top)>d1||Math.abs(a.width-e.width)>d1)&&n({height:a.height,left:a.left,top:a.top,width:a.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,i]}function Mr(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var dY=typeof Symbol=="function"&&Symbol.observable||"@@observable",xP=dY,iE=()=>Math.random().toString(36).substring(7).split("").join("."),fY={INIT:`@@redux/INIT${iE()}`,REPLACE:`@@redux/REPLACE${iE()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${iE()}`},zw=fY;function vM(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function Q9(t,e,n){if(typeof t!="function")throw new Error(Mr(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Mr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Mr(1));return n(Q9)(t,e)}let i=t,r=e,s=new Map,a=s,o=0,l=!1;function u(){a===s&&(a=new Map,s.forEach((x,T)=>{a.set(T,x)}))}function h(){if(l)throw new Error(Mr(3));return r}function g(x){if(typeof x!="function")throw new Error(Mr(4));if(l)throw new Error(Mr(5));let T=!0;u();const _=o++;return a.set(_,x),function(){if(T){if(l)throw new Error(Mr(6));T=!1,u(),a.delete(_),s=null}}}function v(x){if(!vM(x))throw new Error(Mr(7));if(typeof x.type>"u")throw new Error(Mr(8));if(typeof x.type!="string")throw new Error(Mr(17));if(l)throw new Error(Mr(9));try{l=!0,r=i(r,x)}finally{l=!1}return(s=a).forEach(_=>{_()}),x}function y(x){if(typeof x!="function")throw new Error(Mr(10));i=x,v({type:zw.REPLACE})}function w(){const x=g;return{subscribe(T){if(typeof T!="object"||T===null)throw new Error(Mr(11));function _(){const F=T;F.next&&F.next(h())}return _(),{unsubscribe:x(_)}},[xP](){return this}}}return v({type:zw.INIT}),{dispatch:v,subscribe:g,getState:h,replaceReducer:y,[xP]:w}}function gY(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:zw.INIT})>"u")throw new Error(Mr(12));if(typeof n(void 0,{type:zw.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Mr(13))})}function J9(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const a=e[s];typeof t[a]=="function"&&(n[a]=t[a])}const i=Object.keys(n);let r;try{gY(n)}catch(s){r=s}return function(a={},o){if(r)throw r;let l=!1;const u={};for(let h=0;h<i.length;h++){const g=i[h],v=n[g],y=a[g],w=v(y,o);if(typeof w>"u")throw o&&o.type,new Error(Mr(14));u[g]=w,l=l||w!==y}return l=l||i.length!==Object.keys(a).length,l?u:a}}function Vw(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...i)=>e(n(...i)))}function pY(...t){return e=>(n,i)=>{const r=e(n,i);let s=()=>{throw new Error(Mr(15))};const a={getState:r.getState,dispatch:(l,...u)=>s(l,...u)},o=t.map(l=>l(a));return s=Vw(...o)(r.dispatch),{...r,dispatch:s}}}function ek(t){return vM(t)&&"type"in t&&typeof t.type=="string"}var tk=Symbol.for("immer-nothing"),AP=Symbol.for("immer-draftable"),ha=Symbol.for("immer-state");function zo(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var ry=Object.getPrototypeOf;function vf(t){return!!t&&!!t[ha]}function Zc(t){return t?nk(t)||Array.isArray(t)||!!t[AP]||!!t.constructor?.[AP]||Iy(t)||r2(t):!1}var mY=Object.prototype.constructor.toString(),EP=new WeakMap;function nk(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let i=EP.get(n);return i===void 0&&(i=Function.toString.call(n),EP.set(n,i)),i===mY}function Uw(t,e,n=!0){i2(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(r=>{e(r,t[r],t)}):t.forEach((i,r)=>e(r,i,t))}function i2(t){const e=t[ha];return e?e.type_:Array.isArray(t)?1:Iy(t)?2:r2(t)?3:0}function rR(t,e){return i2(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function ik(t,e,n){const i=i2(t);i===2?t.set(e,n):i===3?t.add(n):t[e]=n}function vY(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Iy(t){return t instanceof Map}function r2(t){return t instanceof Set}function Ud(t){return t.copy_||t.base_}function sR(t,e){if(Iy(t))return new Map(t);if(r2(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=nk(t);if(e===!0||e==="class_only"&&!n){const i=Object.getOwnPropertyDescriptors(t);delete i[ha];let r=Reflect.ownKeys(i);for(let s=0;s<r.length;s++){const a=r[s],o=i[a];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(i[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[a]})}return Object.create(ry(t),i)}else{const i=ry(t);if(i!==null&&n)return{...t};const r=Object.create(i);return Object.assign(r,t)}}function yM(t,e=!1){return s2(t)||vf(t)||!Zc(t)||(i2(t)>1&&Object.defineProperties(t,{set:f1,add:f1,clear:f1,delete:f1}),Object.freeze(t),e&&Object.values(t).forEach(n=>yM(n,!0))),t}function yY(){zo(2)}var f1={value:yY};function s2(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var CY={};function yf(t){const e=CY[t];return e||zo(0,t),e}var sy;function rk(){return sy}function bY(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function TP(t,e){e&&(yf("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function aR(t){oR(t),t.drafts_.forEach(wY),t.drafts_=null}function oR(t){t===sy&&(sy=t.parent_)}function RP(t){return sy=bY(sy,t)}function wY(t){const e=t[ha];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function DP(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[ha].modified_&&(aR(e),zo(4)),Zc(t)&&(t=jw(e,t),e.parent_||Ww(e,t)),e.patches_&&yf("Patches").generateReplacementPatches_(n[ha].base_,t,e.patches_,e.inversePatches_)):t=jw(e,n,[]),aR(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==tk?t:void 0}function jw(t,e,n){if(s2(e))return e;const i=t.immer_.shouldUseStrictIteration(),r=e[ha];if(!r)return Uw(e,(s,a)=>MP(t,r,e,s,a,n),i),e;if(r.scope_!==t)return e;if(!r.modified_)return Ww(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const s=r.copy_;let a=s,o=!1;r.type_===3&&(a=new Set(s),s.clear(),o=!0),Uw(a,(l,u)=>MP(t,r,s,l,u,n,o),i),Ww(t,s,!1),n&&t.patches_&&yf("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function MP(t,e,n,i,r,s,a){if(r==null||typeof r!="object"&&!a)return;const o=s2(r);if(!(o&&!a)){if(vf(r)){const l=s&&e&&e.type_!==3&&!rR(e.assigned_,i)?s.concat(i):void 0,u=jw(t,r,l);if(ik(n,i,u),vf(u))t.canAutoFreeze_=!1;else return}else a&&n.add(r);if(Zc(r)&&!o){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[i]===r&&o)return;jw(t,r),(!e||!e.scope_.parent_)&&typeof i!="symbol"&&(Iy(n)?n.has(i):Object.prototype.propertyIsEnumerable.call(n,i))&&Ww(t,r)}}}function Ww(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&yM(e,n)}function SY(t,e){const n=Array.isArray(t),i={type_:n?1:0,scope_:e?e.scope_:rk(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=i,s=CM;n&&(r=[i],s=ay);const{revoke:a,proxy:o}=Proxy.revocable(r,s);return i.draft_=o,i.revoke_=a,o}var CM={get(t,e){if(e===ha)return t;const n=Ud(t);if(!rR(n,e))return xY(t,n,e);const i=n[e];return t.finalized_||!Zc(i)?i:i===rE(t.base_,e)?(sE(t),t.copy_[e]=cR(i,t)):i},has(t,e){return e in Ud(t)},ownKeys(t){return Reflect.ownKeys(Ud(t))},set(t,e,n){const i=sk(Ud(t),e);if(i?.set)return i.set.call(t.draft_,n),!0;if(!t.modified_){const r=rE(Ud(t),e),s=r?.[ha];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(vY(n,r)&&(n!==void 0||rR(t.base_,e)))return!0;sE(t),lR(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return rE(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,sE(t),lR(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Ud(t),i=Reflect.getOwnPropertyDescriptor(n,e);return i&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:i.enumerable,value:n[e]}},defineProperty(){zo(11)},getPrototypeOf(t){return ry(t.base_)},setPrototypeOf(){zo(12)}},ay={};Uw(CM,(t,e)=>{ay[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});ay.deleteProperty=function(t,e){return ay.set.call(this,t,e,void 0)};ay.set=function(t,e,n){return CM.set.call(this,t[0],e,n,t[0])};function rE(t,e){const n=t[ha];return(n?Ud(n):t)[e]}function xY(t,e,n){const i=sk(e,n);return i?"value"in i?i.value:i.get?.call(t.draft_):void 0}function sk(t,e){if(!(e in t))return;let n=ry(t);for(;n;){const i=Object.getOwnPropertyDescriptor(n,e);if(i)return i;n=ry(n)}}function lR(t){t.modified_||(t.modified_=!0,t.parent_&&lR(t.parent_))}function sE(t){t.copy_||(t.copy_=sR(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var AY=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,i)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const a=this;return function(l=s,...u){return a.produce(l,h=>n.call(this,h,...u))}}typeof n!="function"&&zo(6),i!==void 0&&typeof i!="function"&&zo(7);let r;if(Zc(e)){const s=RP(this),a=cR(e,void 0);let o=!0;try{r=n(a),o=!1}finally{o?aR(s):oR(s)}return TP(s,i),DP(r,s)}else if(!e||typeof e!="object"){if(r=n(e),r===void 0&&(r=e),r===tk&&(r=void 0),this.autoFreeze_&&yM(r,!0),i){const s=[],a=[];yf("Patches").generateReplacementPatches_(e,r,s,a),i(s,a)}return r}else zo(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(a,...o)=>this.produceWithPatches(a,l=>e(l,...o));let i,r;return[this.produce(e,n,(a,o)=>{i=a,r=o}),i,r]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof t?.useStrictIteration=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Zc(t)||zo(8),vf(t)&&(t=Wc(t));const e=RP(this),n=cR(t,void 0);return n[ha].isManual_=!0,oR(e),n}finishDraft(t,e){const n=t&&t[ha];(!n||!n.isManual_)&&zo(9);const{scope_:i}=n;return TP(i,e),DP(void 0,i)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const r=e[n];if(r.path.length===0&&r.op==="replace"){t=r.value;break}}n>-1&&(e=e.slice(n+1));const i=yf("Patches").applyPatches_;return vf(t)?i(t,e):this.produce(t,r=>i(r,e))}};function cR(t,e){const n=Iy(t)?yf("MapSet").proxyMap_(t,e):r2(t)?yf("MapSet").proxySet_(t,e):SY(t,e);return(e?e.scope_:rk()).drafts_.push(n),n}function Wc(t){return vf(t)||zo(10,t),ak(t)}function ak(t){if(!Zc(t)||s2(t))return t;const e=t[ha];let n,i=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=sR(t,e.scope_.immer_.useStrictShallowCopy_),i=e.scope_.immer_.shouldUseStrictIteration()}else n=sR(t,!0);return Uw(n,(r,s)=>{ik(n,r,ak(s))},i),e&&(e.finalized_=!1),n}var uR=new AY,ok=uR.produce,EY=uR.setUseStrictIteration.bind(uR);function lk(t){return({dispatch:n,getState:i})=>r=>s=>typeof s=="function"?s(n,i,t):r(s)}var TY=lk(),RY=lk,DY=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Vw:Vw.apply(null,arguments)};function so(t,e){function n(...i){if(e){let r=e(...i);if(!r)throw new Error(oa(0));return{type:t,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:t,payload:i[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=i=>ek(i)&&i.type===t,n}var ck=class T0 extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,T0.prototype)}static get[Symbol.species](){return T0}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new T0(...e[0].concat(this)):new T0(...e.concat(this))}};function _P(t){return Zc(t)?ok(t,()=>{}):t}function g1(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function MY(t){return typeof t=="boolean"}var _Y=()=>function(e){const{thunk:n=!0,immutableCheck:i=!0,serializableCheck:r=!0,actionCreatorCheck:s=!0}=e??{};let a=new ck;return n&&(MY(n)?a.push(TY):a.push(RY(n.extraArgument))),a},uk="RTK_autoBatch",ds=()=>t=>({payload:t,meta:{[uk]:!0}}),PP=t=>e=>{setTimeout(e,t)},hk=(t={type:"raf"})=>e=>(...n)=>{const i=e(...n);let r=!0,s=!1,a=!1;const o=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:PP(10):t.type==="callback"?t.queueNotification:PP(t.timeout),u=()=>{a=!1,s&&(s=!1,o.forEach(h=>h()))};return Object.assign({},i,{subscribe(h){const g=()=>r&&h(),v=i.subscribe(g);return o.add(h),()=>{v(),o.delete(h)}},dispatch(h){try{return r=!h?.meta?.[uk],s=!r,s&&(a||(a=!0,l(u))),i.dispatch(h)}finally{r=!0}}})},PY=t=>function(n){const{autoBatch:i=!0}=n??{};let r=new ck(t);return i&&r.push(hk(typeof i=="object"?i:void 0)),r};function OY(t){const e=_Y(),{reducer:n=void 0,middleware:i,devTools:r=!0,preloadedState:s=void 0,enhancers:a=void 0}=t||{};let o;if(typeof n=="function")o=n;else if(vM(n))o=J9(n);else throw new Error(oa(1));let l;typeof i=="function"?l=i(e):l=e();let u=Vw;r&&(u=DY({trace:!1,...typeof r=="object"&&r}));const h=pY(...l),g=PY(h);let v=typeof a=="function"?a(g):g();const y=u(...v);return Q9(o,s,y)}function dk(t){const e={},n=[];let i;const r={addCase(s,a){const o=typeof s=="string"?s:s.type;if(!o)throw new Error(oa(28));if(o in e)throw new Error(oa(29));return e[o]=a,r},addAsyncThunk(s,a){return a.pending&&(e[s.pending.type]=a.pending),a.rejected&&(e[s.rejected.type]=a.rejected),a.fulfilled&&(e[s.fulfilled.type]=a.fulfilled),a.settled&&n.push({matcher:s.settled,reducer:a.settled}),r},addMatcher(s,a){return n.push({matcher:s,reducer:a}),r},addDefaultCase(s){return i=s,r}};return t(r),[e,n,i]}EY(!1);function LY(t){return typeof t=="function"}function FY(t,e){let[n,i,r]=dk(e),s;if(LY(t))s=()=>_P(t());else{const o=_P(t);s=()=>o}function a(o=s(),l){let u=[n[l.type],...i.filter(({matcher:h})=>h(l)).map(({reducer:h})=>h)];return u.filter(h=>!!h).length===0&&(u=[r]),u.reduce((h,g)=>{if(g)if(vf(h)){const y=g(h,l);return y===void 0?h:y}else{if(Zc(h))return ok(h,v=>g(v,l));{const v=g(h,l);if(v===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return h},o)}return a.getInitialState=s,a}var kY="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",NY=(t=21)=>{let e="",n=t;for(;n--;)e+=kY[Math.random()*64|0];return e},BY=Symbol.for("rtk-slice-createasyncthunk");function IY(t,e){return`${t}/${e}`}function HY({creators:t}={}){const e=t?.asyncThunk?.[BY];return function(i){const{name:r,reducerPath:s=r}=i;if(!r)throw new Error(oa(11));const a=(typeof i.reducers=="function"?i.reducers(zY()):i.reducers)||{},o=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(M,F){const L=typeof M=="string"?M:M.type;if(!L)throw new Error(oa(12));if(L in l.sliceCaseReducersByType)throw new Error(oa(13));return l.sliceCaseReducersByType[L]=F,u},addMatcher(M,F){return l.sliceMatchers.push({matcher:M,reducer:F}),u},exposeAction(M,F){return l.actionCreators[M]=F,u},exposeCaseReducer(M,F){return l.sliceCaseReducersByName[M]=F,u}};o.forEach(M=>{const F=a[M],L={reducerName:M,type:IY(r,M),createNotation:typeof i.reducers=="function"};UY(F)?WY(L,F,u,e):VY(L,F,u)});function h(){const[M={},F=[],L=void 0]=typeof i.extraReducers=="function"?dk(i.extraReducers):[i.extraReducers],k={...M,...l.sliceCaseReducersByType};return FY(i.initialState,B=>{for(let H in k)B.addCase(H,k[H]);for(let H of l.sliceMatchers)B.addMatcher(H.matcher,H.reducer);for(let H of F)B.addMatcher(H.matcher,H.reducer);L&&B.addDefaultCase(L)})}const g=M=>M,v=new Map,y=new WeakMap;let w;function S(M,F){return w||(w=h()),w(M,F)}function x(){return w||(w=h()),w.getInitialState()}function T(M,F=!1){function L(B){let H=B[M];return typeof H>"u"&&F&&(H=g1(y,L,x)),H}function k(B=g){const H=g1(v,F,()=>new WeakMap);return g1(H,B,()=>{const U={};for(const[W,j]of Object.entries(i.selectors??{}))U[W]=GY(j,B,()=>g1(y,B,x),F);return U})}return{reducerPath:M,getSelectors:k,get selectors(){return k(L)},selectSlice:L}}const _={name:r,reducer:S,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:x,...T(s),injectInto(M,{reducerPath:F,...L}={}){const k=F??s;return M.inject({reducerPath:k,reducer:S},L),{..._,...T(k,!0)}}};return _}}function GY(t,e,n,i){function r(s,...a){let o=e(s);return typeof o>"u"&&i&&(o=n()),t(o,...a)}return r.unwrapped=t,r}var da=HY();function zY(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function VY({type:t,reducerName:e,createNotation:n},i,r){let s,a;if("reducer"in i){if(n&&!jY(i))throw new Error(oa(17));s=i.reducer,a=i.prepare}else s=i;r.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,a?so(t,a):so(t))}function UY(t){return t._reducerDefinitionType==="asyncThunk"}function jY(t){return t._reducerDefinitionType==="reducerWithPrepare"}function WY({type:t,reducerName:e},n,i,r){if(!r)throw new Error(oa(18));const{payloadCreator:s,fulfilled:a,pending:o,rejected:l,settled:u,options:h}=n,g=r(t,s,h);i.exposeAction(e,g),a&&i.addCase(g.fulfilled,a),o&&i.addCase(g.pending,o),l&&i.addCase(g.rejected,l),u&&i.addMatcher(g.settled,u),i.exposeCaseReducer(e,{fulfilled:a||p1,pending:o||p1,rejected:l||p1,settled:u||p1})}function p1(){}var qY="task",fk="listener",gk="completed",bM="cancelled",KY=`task-${bM}`,YY=`task-${gk}`,hR=`${fk}-${bM}`,XY=`${fk}-${gk}`,a2=class{constructor(t){this.code=t,this.message=`${qY} ${bM} (reason: ${t})`}name="TaskAbortError";message},wM=(t,e)=>{if(typeof t!="function")throw new TypeError(oa(32))},qw=()=>{},pk=(t,e=qw)=>(t.catch(e),t),mk=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),af=(t,e)=>{const n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:e,configurable:!0,writable:!0}),t.abort(e))},of=t=>{if(t.aborted){const{reason:e}=t;throw new a2(e)}};function vk(t,e){let n=qw;return new Promise((i,r)=>{const s=()=>r(new a2(t.reason));if(t.aborted){s();return}n=mk(t,s),e.finally(()=>n()).then(i,r)}).finally(()=>{n=qw})}var $Y=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof a2?"cancelled":"rejected",error:n}}finally{e?.()}},Kw=t=>e=>pk(vk(t,e).then(n=>(of(t),n))),yk=t=>{const e=Kw(t);return n=>e(new Promise(i=>setTimeout(i,n)))},{assign:Lp}=Object,OP={},o2="listenerMiddleware",ZY=(t,e)=>{const n=i=>mk(t,()=>af(i,t.reason));return(i,r)=>{wM(i);const s=new AbortController;n(s);const a=$Y(async()=>{of(t),of(s.signal);const o=await i({pause:Kw(s.signal),delay:yk(s.signal),signal:s.signal});return of(s.signal),o},()=>af(s,YY));return r?.autoJoin&&e.push(a.catch(qw)),{result:Kw(t)(a),cancel(){af(s,KY)}}}},QY=(t,e)=>{const n=async(i,r)=>{of(e);let s=()=>{};const o=[new Promise((l,u)=>{let h=t({predicate:i,effect:(g,v)=>{v.unsubscribe(),l([g,v.getState(),v.getOriginalState()])}});s=()=>{h(),u()}})];r!=null&&o.push(new Promise(l=>setTimeout(l,r,null)));try{const l=await vk(e,Promise.race(o));return of(e),l}finally{s()}};return(i,r)=>pk(n(i,r))},Ck=t=>{let{type:e,actionCreator:n,matcher:i,predicate:r,effect:s}=t;if(e)r=so(e).match;else if(n)e=n.type,r=n.match;else if(i)r=i;else if(!r)throw new Error(oa(21));return wM(s),{predicate:r,type:e,effect:s}},bk=Lp(t=>{const{type:e,predicate:n,effect:i}=Ck(t);return{id:NY(),effect:i,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(oa(22))}}},{withTypes:()=>bk}),LP=(t,e)=>{const{type:n,effect:i,predicate:r}=Ck(e);return Array.from(t.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===r)&&s.effect===i)},dR=t=>{t.pending.forEach(e=>{af(e,hR)})},JY=(t,e)=>()=>{for(const n of e.keys())dR(n);t.clear()},FP=(t,e,n)=>{try{t(e,n)}catch(i){setTimeout(()=>{throw i},0)}},wk=Lp(so(`${o2}/add`),{withTypes:()=>wk}),eX=so(`${o2}/removeAll`),Sk=Lp(so(`${o2}/remove`),{withTypes:()=>Sk}),tX=(...t)=>{console.error(`${o2}/error`,...t)},Hy=(t={})=>{const e=new Map,n=new Map,i=y=>{const w=n.get(y)??0;n.set(y,w+1)},r=y=>{const w=n.get(y)??1;w===1?n.delete(y):n.set(y,w-1)},{extra:s,onError:a=tX}=t;wM(a);const o=y=>(y.unsubscribe=()=>e.delete(y.id),e.set(y.id,y),w=>{y.unsubscribe(),w?.cancelActive&&dR(y)}),l=y=>{const w=LP(e,y)??bk(y);return o(w)};Lp(l,{withTypes:()=>l});const u=y=>{const w=LP(e,y);return w&&(w.unsubscribe(),y.cancelActive&&dR(w)),!!w};Lp(u,{withTypes:()=>u});const h=async(y,w,S,x)=>{const T=new AbortController,_=QY(l,T.signal),M=[];try{y.pending.add(T),i(y),await Promise.resolve(y.effect(w,Lp({},S,{getOriginalState:x,condition:(F,L)=>_(F,L).then(Boolean),take:_,delay:yk(T.signal),pause:Kw(T.signal),extra:s,signal:T.signal,fork:ZY(T.signal,M),unsubscribe:y.unsubscribe,subscribe:()=>{e.set(y.id,y)},cancelActiveListeners:()=>{y.pending.forEach((F,L,k)=>{F!==T&&(af(F,hR),k.delete(F))})},cancel:()=>{af(T,hR),y.pending.delete(T)},throwIfCancelled:()=>{of(T.signal)}})))}catch(F){F instanceof a2||FP(a,F,{raisedBy:"effect"})}finally{await Promise.all(M),af(T,XY),r(y),y.pending.delete(T)}},g=JY(e,n);return{middleware:y=>w=>S=>{if(!ek(S))return w(S);if(wk.match(S))return l(S.payload);if(eX.match(S)){g();return}if(Sk.match(S))return u(S.payload);let x=y.getState();const T=()=>{if(x===OP)throw new Error(oa(23));return x};let _;try{if(_=w(S),e.size>0){const M=y.getState(),F=Array.from(e.values());for(const L of F){let k=!1;try{k=L.predicate(S,M,x)}catch(B){k=!1,FP(a,B,{raisedBy:"predicate"})}k&&h(L,S,y,T)}}}finally{x=OP}return _},startListening:l,stopListening:u,clearListeners:g}};function oa(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var nX={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},xk=da({name:"chartLayout",initialState:nX,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,i,r,s;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(i=e.payload.right)!==null&&i!==void 0?i:0,t.margin.bottom=(r=e.payload.bottom)!==null&&r!==void 0?r:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:iX,setLayout:rX,setChartSize:sX,setScale:aX}=xk.actions,oX=xk.reducer;function kP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function NP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kP(Object(n),!0).forEach(function(i){lX(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function lX(t,e,n){return(e=cX(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function cX(t){var e=uX(t,"string");return typeof e=="symbol"?e:e+""}function uX(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Yw=Math.PI/180,hX=t=>t*180/Math.PI,Vi=(t,e,n,i)=>({x:t+Math.cos(-Yw*i)*n,y:e+Math.sin(-Yw*i)*n}),Ak=function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(i.left||0)-(i.right||0)),Math.abs(n-(i.top||0)-(i.bottom||0)))/2},dX=(t,e)=>{var{x:n,y:i}=t,{x:r,y:s}=e;return Math.sqrt((n-r)**2+(i-s)**2)},fX=(t,e)=>{var{x:n,y:i}=t,{cx:r,cy:s}=e,a=dX({x:n,y:i},{x:r,y:s});if(a<=0)return{radius:a,angle:0};var o=(n-r)/a,l=Math.acos(o);return i>s&&(l=2*Math.PI-l),{radius:a,angle:hX(l),angleInRadian:l}},gX=t=>{var{startAngle:e,endAngle:n}=t,i=Math.floor(e/360),r=Math.floor(n/360),s=Math.min(i,r);return{startAngle:e-s*360,endAngle:n-s*360}},pX=(t,e)=>{var{startAngle:n,endAngle:i}=e,r=Math.floor(n/360),s=Math.floor(i/360),a=Math.min(r,s);return t+a*360},mX=(t,e)=>{var{x:n,y:i}=t,{radius:r,angle:s}=fX({x:n,y:i},e),{innerRadius:a,outerRadius:o}=e;if(r<a||r>o||r===0)return null;var{startAngle:l,endAngle:u}=gX(e),h=s,g;if(l<=u){for(;h>u;)h-=360;for(;h<l;)h+=360;g=h>=l&&h<=u}else{for(;h>l;)h-=360;for(;h<u;)h+=360;g=h>=u&&h<=l}return g?NP(NP({},e),{},{radius:r,angle:pX(h,e)}):null};function Ek(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function BP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Za(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?BP(Object(n),!0).forEach(function(i){vX(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function vX(t,e,n){return(e=yX(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yX(t){var e=CX(t,"string");return typeof e=="symbol"?e:e+""}function CX(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ui(t,e,n){return ua(t)||ua(e)?n:$c(e)?ny(t,e,n):typeof e=="function"?e(t):n}var bX=(t,e,n,i,r)=>{var s,a=-1,o=(s=e?.length)!==null&&s!==void 0?s:0;if(o<=1||t==null)return 0;if(i==="angleAxis"&&r!=null&&Math.abs(Math.abs(r[1]-r[0])-360)<=1e-6)for(var l=0;l<o;l++){var u=l>0?n[l-1].coordinate:n[o-1].coordinate,h=n[l].coordinate,g=l>=o-1?n[0].coordinate:n[l+1].coordinate,v=void 0;if(Gs(h-u)!==Gs(g-h)){var y=[];if(Gs(g-h)===Gs(r[1]-r[0])){v=g;var w=h+r[1]-r[0];y[0]=Math.min(w,(w+u)/2),y[1]=Math.max(w,(w+u)/2)}else{v=u;var S=g+r[1]-r[0];y[0]=Math.min(h,(S+h)/2),y[1]=Math.max(h,(S+h)/2)}var x=[Math.min(h,(v+h)/2),Math.max(h,(v+h)/2)];if(t>x[0]&&t<=x[1]||t>=y[0]&&t<=y[1]){({index:a}=n[l]);break}}else{var T=Math.min(u,g),_=Math.max(u,g);if(t>(T+h)/2&&t<=(_+h)/2){({index:a}=n[l]);break}}}else if(e){for(var M=0;M<o;M++)if(M===0&&t<=(e[M].coordinate+e[M+1].coordinate)/2||M>0&&M<o-1&&t>(e[M].coordinate+e[M-1].coordinate)/2&&t<=(e[M].coordinate+e[M+1].coordinate)/2||M===o-1&&t>(e[M].coordinate+e[M-1].coordinate)/2){({index:a}=e[M]);break}}return a},wX=(t,e,n)=>{if(e&&n){var{width:i,height:r}=n,{align:s,verticalAlign:a,layout:o}=e;if((o==="vertical"||o==="horizontal"&&a==="middle")&&s!=="center"&&At(t[s]))return Za(Za({},t),{},{[s]:t[s]+(i||0)});if((o==="horizontal"||o==="vertical"&&s==="center")&&a!=="middle"&&At(t[a]))return Za(Za({},t),{},{[a]:t[a]+(r||0)})}return t},_f=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",IP=1e-4,SX=t=>{var e=t.domain();if(!(!e||e.length<=2)){var n=e.length,i=t.range(),r=Math.min(i[0],i[1])-IP,s=Math.max(i[0],i[1])+IP,a=t(e[0]),o=t(e[n-1]);(a<r||a>s||o<r||o>s)&&t.domain([e[0],e[n-1]])}},xX=t=>{var e=t.length;if(!(e<=0))for(var n=0,i=t[0].length;n<i;++n)for(var r=0,s=0,a=0;a<e;++a){var o=Kl(t[a][n][1])?t[a][n][0]:t[a][n][1];o>=0?(t[a][n][0]=r,t[a][n][1]=r+o,r=t[a][n][1]):(t[a][n][0]=s,t[a][n][1]=s+o,s=t[a][n][1])}},AX=t=>{var e=t.length;if(!(e<=0))for(var n=0,i=t[0].length;n<i;++n)for(var r=0,s=0;s<e;++s){var a=Kl(t[s][n][1])?t[s][n][0]:t[s][n][1];a>=0?(t[s][n][0]=r,t[s][n][1]=r+a,r=t[s][n][1]):(t[s][n][0]=0,t[s][n][1]=0)}},EX={sign:xX,expand:$q,none:Kp,silhouette:Zq,wiggle:Qq,positive:AX},TX=(t,e,n)=>{var i=EX[n],r=Xq().keys(e).value((s,a)=>+Ui(s,a,0)).order(nR).offset(i);return r(t)},RX=t=>{var e=t.flat(2).filter(At);return[Math.min(...e),Math.max(...e)]},DX=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],MX=(t,e,n)=>{if(t!=null)return DX(Object.keys(t).reduce((i,r)=>{var s=t[r],{stackedData:a}=s,o=a.reduce((l,u)=>{var h=Ek(u,e,n),g=RX(h);return[Math.min(l[0],g[0]),Math.max(l[1],g[1])]},[1/0,-1/0]);return[Math.min(o[0],i[0]),Math.max(o[1],i[1])]},[1/0,-1/0]))},HP=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,GP=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,_X=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();return i}if(t&&e&&e.length>=2){for(var r=n2(e,h=>h.coordinate),s=1/0,a=1,o=r.length;a<o;a++){var l=r[a],u=r[a-1];s=Math.min((l.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return 0};function zP(t){var{tooltipEntrySettings:e,dataKey:n,payload:i,value:r,name:s}=t;return Za(Za({},e),{},{dataKey:n,payload:i,value:r,name:s})}function Tk(t,e){if(t)return String(t);if(typeof e=="string")return e}function PX(t,e,n,i,r){if(n==="horizontal"||n==="vertical"){var s=t>=r.left&&t<=r.left+r.width&&e>=r.top&&e<=r.top+r.height;return s?{x:t,y:e}:null}return i?mX({x:t,y:e},i):null}var OX=(t,e,n,i)=>{var r=e.find(u=>u&&u.index===n);if(r){if(t==="horizontal")return{x:r.coordinate,y:i.y};if(t==="vertical")return{x:i.x,y:r.coordinate};if(t==="centric"){var s=r.coordinate,{radius:a}=i;return Za(Za(Za({},i),Vi(i.cx,i.cy,a,s)),{},{angle:s,radius:a})}var o=r.coordinate,{angle:l}=i;return Za(Za(Za({},i),Vi(i.cx,i.cy,o,l)),{},{angle:l,radius:o})}return{x:0,y:0}},LX=(t,e)=>e==="horizontal"?t.x:e==="vertical"?t.y:e==="centric"?t.angle:t.radius,su=t=>t.layout.width,au=t=>t.layout.height,FX=t=>t.layout.scale,Rk=t=>t.layout.margin,l2=pe(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),c2=pe(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),Dk="data-recharts-item-index",Mk="data-recharts-item-data-key",Gy=60;function VP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function m1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VP(Object(n),!0).forEach(function(i){kX(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function kX(t,e,n){return(e=NX(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NX(t){var e=BX(t,"string");return typeof e=="symbol"?e:e+""}function BX(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var IX=t=>t.brush.height;function HX(t){var e=c2(t);return e.reduce((n,i)=>{if(i.orientation==="left"&&!i.mirror&&!i.hide){var r=typeof i.width=="number"?i.width:Gy;return n+r}return n},0)}function GX(t){var e=c2(t);return e.reduce((n,i)=>{if(i.orientation==="right"&&!i.mirror&&!i.hide){var r=typeof i.width=="number"?i.width:Gy;return n+r}return n},0)}function zX(t){var e=l2(t);return e.reduce((n,i)=>i.orientation==="top"&&!i.mirror&&!i.hide?n+i.height:n,0)}function VX(t){var e=l2(t);return e.reduce((n,i)=>i.orientation==="bottom"&&!i.mirror&&!i.hide?n+i.height:n,0)}var pr=pe([su,au,Rk,IX,HX,GX,zX,VX,Z9,cY],(t,e,n,i,r,s,a,o,l,u)=>{var h={left:(n.left||0)+r,right:(n.right||0)+s},g={top:(n.top||0)+a,bottom:(n.bottom||0)+o},v=m1(m1({},g),h),y=v.bottom;v.bottom+=i,v=wX(v,l,u);var w=t-v.left-v.right,S=e-v.top-v.bottom;return m1(m1({brushBottom:y},v),{},{width:Math.max(w,0),height:Math.max(S,0)})}),UX=pe(pr,t=>({x:t.left,y:t.top,width:t.width,height:t.height}));pe(su,au,(t,e)=>({x:0,y:0,width:t,height:e}));var jX=D.createContext(null),Pf=()=>D.useContext(jX)!=null,u2=t=>t.brush,h2=pe([u2,pr,Rk],(t,e,n)=>({height:t.height,x:At(t.x)?t.x:e.left,y:At(t.y)?t.y:e.top+e.height+e.brushBottom-(n?.bottom||0),width:At(t.width)?t.width:e.width})),aE={},oE={},lE={},UP;function WX(){return UP||(UP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,i,{signal:r,edges:s}={}){let a,o=null;const l=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),h=()=>{o!==null&&(n.apply(a,o),a=void 0,o=null)},g=()=>{u&&h(),S()};let v=null;const y=()=>{v!=null&&clearTimeout(v),v=setTimeout(()=>{v=null,g()},i)},w=()=>{v!==null&&(clearTimeout(v),v=null)},S=()=>{w(),a=void 0,o=null},x=()=>{h()},T=function(..._){if(r?.aborted)return;a=this,o=_;const M=v==null;y(),l&&M&&h()};return T.schedule=y,T.cancel=S,T.flush=x,r?.addEventListener("abort",S,{once:!0}),T}t.debounce=e})(lE)),lE}var jP;function qX(){return jP||(jP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=WX();function n(i,r=0,s={}){typeof s!="object"&&(s={});const{leading:a=!1,trailing:o=!0,maxWait:l}=s,u=Array(2);a&&(u[0]="leading"),o&&(u[1]="trailing");let h,g=null;const v=e.debounce(function(...S){h=i.apply(this,S),g=null},r,{edges:u}),y=function(...S){return l!=null&&(g===null&&(g=Date.now()),Date.now()-g>=l)?(h=i.apply(this,S),g=Date.now(),v.cancel(),v.schedule(),h):(v.apply(this,S),h)},w=()=>(v.flush(),h);return y.cancel=v.cancel,y.flush=w,y}t.debounce=n})(oE)),oE}var WP;function KX(){return WP||(WP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qX();function n(i,r=0,s={}){const{leading:a=!0,trailing:o=!0}=s;return e.debounce(i,r,{leading:a,maxWait:r,trailing:o})}t.throttle=n})(aE)),aE}var cE,qP;function YX(){return qP||(qP=1,cE=KX().throttle),cE}var XX=YX();const $X=Wo(XX);var KP=function(e,n){for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s]},_k=(t,e,n)=>{var{width:i="100%",height:r="100%",aspect:s,maxHeight:a}=n,o=Xc(i)?t:Number(i),l=Xc(r)?e:Number(r);return s&&s>0&&(o?l=o/s:l&&(o=l*s),a&&l>a&&(l=a)),{calculatedWidth:o,calculatedHeight:l}},ZX={width:0,height:0,overflow:"visible"},QX={width:0,overflowX:"visible"},JX={height:0,overflowY:"visible"},e$={},t$=t=>{var{width:e,height:n}=t,i=Xc(e),r=Xc(n);return i&&r?ZX:i?QX:r?JX:e$};function n$(t){var{width:e,height:n,aspect:i}=t,r=e,s=n;return r===void 0&&s===void 0?(r="100%",s="100%"):r===void 0?r=i&&i>0?void 0:"100%":s===void 0&&(s=i&&i>0?void 0:"100%"),{width:r,height:s}}function qs(t){return Number.isFinite(t)}function Yp(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function fR(){return fR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},fR.apply(null,arguments)}function YP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function XP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YP(Object(n),!0).forEach(function(i){i$(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function i$(t,e,n){return(e=r$(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r$(t){var e=s$(t,"string");return typeof e=="symbol"?e:e+""}function s$(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Pk=D.createContext({width:-1,height:-1});function Ok(t){var{children:e,width:n,height:i}=t,r=D.useMemo(()=>({width:n,height:i}),[n,i]);return n<=0||i<=0?null:D.createElement(Pk.Provider,{value:r},e)}var SM=()=>D.useContext(Pk),a$=D.forwardRef((t,e)=>{var{aspect:n,initialDimension:i={width:-1,height:-1},width:r,height:s,minWidth:a=0,minHeight:o,maxHeight:l,children:u,debounce:h=0,id:g,className:v,onResize:y,style:w={}}=t,S=D.useRef(null),x=D.useRef();x.current=y,D.useImperativeHandle(e,()=>S.current);var[T,_]=D.useState({containerWidth:i.width,containerHeight:i.height}),M=D.useCallback((H,U)=>{_(W=>{var j=Math.round(H),X=Math.round(U);return W.containerWidth===j&&W.containerHeight===X?W:{containerWidth:j,containerHeight:X}})},[]);D.useEffect(()=>{var H=X=>{var ne,{width:$,height:q}=X[0].contentRect;M($,q),(ne=x.current)===null||ne===void 0||ne.call(x,$,q)};h>0&&(H=$X(H,h,{trailing:!0,leading:!1}));var U=new ResizeObserver(H),{width:W,height:j}=S.current.getBoundingClientRect();return M(W,j),U.observe(S.current),()=>{U.disconnect()}},[M,h]);var{containerWidth:F,containerHeight:L}=T;KP(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:k,calculatedHeight:B}=_k(F,L,{width:r,height:s,aspect:n,maxHeight:l});return KP(k>0||B>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,k,B,r,s,a,o,n),D.createElement("div",{id:g?"".concat(g):void 0,className:Wi("recharts-responsive-container",v),style:XP(XP({},w),{},{width:r,height:s,minWidth:a,minHeight:o,maxHeight:l}),ref:S},D.createElement("div",{style:t$({width:r,height:s})},D.createElement(Ok,{width:k,height:B},u)))}),o$=D.forwardRef((t,e)=>{var n=SM();if(Yp(n.width)&&Yp(n.height))return t.children;var{width:i,height:r}=n$({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:a}=_k(void 0,void 0,{width:i,height:r,aspect:t.aspect,maxHeight:t.maxHeight});return At(s)&&At(a)?D.createElement(Ok,{width:s,height:a},t.children):D.createElement(a$,fR({},t,{width:i,height:r,ref:e}))}),d2=()=>{var t,e=Pf(),n=Nt(UX),i=Nt(h2),r=(t=Nt(u2))===null||t===void 0?void 0:t.padding;return!e||!i||!r?n:{width:i.width-r.left-r.right,height:i.height-r.top-r.bottom,x:r.left,y:r.top}},l$={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},c$=()=>{var t;return(t=Nt(pr))!==null&&t!==void 0?t:l$},u$=()=>Nt(su),h$=()=>Nt(au),Fn=t=>t.layout.layoutType,Lk=()=>Nt(Fn),f2=t=>{var e=Nr(),n=Pf(),{width:i,height:r}=t,s=SM(),a=i,o=r;return s&&(a=s.width>0?s.width:i,o=s.height>0?s.height:r),D.useEffect(()=>{!n&&Yp(a)&&Yp(o)&&e(sX({width:a,height:o}))},[e,n,a,o]),null},d$={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Fk=da({name:"legend",initialState:d$,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:ds()},removeLegendPayload:{reducer(t,e){var n=Wc(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:ds()}}}),{setLegendSize:FTe,setLegendSettings:kTe,addLegendPayload:f$,removeLegendPayload:g$}=Fk.actions,p$=Fk.reducer;function gR(){return gR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},gR.apply(null,arguments)}function $P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function uE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$P(Object(n),!0).forEach(function(i){m$(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$P(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function m$(t,e,n){return(e=v$(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v$(t){var e=y$(t,"string");return typeof e=="symbol"?e:e+""}function y$(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function C$(t){return Array.isArray(t)&&$c(t[0])&&$c(t[1])?t.join(" ~ "):t}var b$=t=>{var{separator:e=" : ",contentStyle:n={},itemStyle:i={},labelStyle:r={},payload:s,formatter:a,itemSorter:o,wrapperClassName:l,labelClassName:u,label:h,labelFormatter:g,accessibilityLayer:v=!1}=t,y=()=>{if(s&&s.length){var L={padding:0,margin:0},k=(o?n2(s,o):s).map((B,H)=>{if(B.type==="none")return null;var U=B.formatter||a||C$,{value:W,name:j}=B,X=W,ne=j;if(U){var $=U(W,j,B,H,s);if(Array.isArray($))[X,ne]=$;else if($!=null)X=$;else return null}var q=uE({display:"block",paddingTop:4,paddingBottom:4,color:B.color||"#000"},i);return D.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(H),style:q},$c(ne)?D.createElement("span",{className:"recharts-tooltip-item-name"},ne):null,$c(ne)?D.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,D.createElement("span",{className:"recharts-tooltip-item-value"},X),D.createElement("span",{className:"recharts-tooltip-item-unit"},B.unit||""))});return D.createElement("ul",{className:"recharts-tooltip-item-list",style:L},k)}return null},w=uE({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),S=uE({margin:0},r),x=!ua(h),T=x?h:"",_=Wi("recharts-default-tooltip",l),M=Wi("recharts-tooltip-label",u);x&&g&&s!==void 0&&s!==null&&(T=g(h,s));var F=v?{role:"status","aria-live":"assertive"}:{};return D.createElement("div",gR({className:_,style:w},F),D.createElement("p",{className:M,style:S},D.isValidElement(T)?T:"".concat(T)),y())},r0="recharts-tooltip-wrapper",w$={visibility:"hidden"};function S$(t){var{coordinate:e,translateX:n,translateY:i}=t;return Wi(r0,{["".concat(r0,"-right")]:At(n)&&e&&At(e.x)&&n>=e.x,["".concat(r0,"-left")]:At(n)&&e&&At(e.x)&&n<e.x,["".concat(r0,"-bottom")]:At(i)&&e&&At(e.y)&&i>=e.y,["".concat(r0,"-top")]:At(i)&&e&&At(e.y)&&i<e.y})}function ZP(t){var{allowEscapeViewBox:e,coordinate:n,key:i,offsetTopLeft:r,position:s,reverseDirection:a,tooltipDimension:o,viewBox:l,viewBoxDimension:u}=t;if(s&&At(s[i]))return s[i];var h=n[i]-o-(r>0?r:0),g=n[i]+r;if(e[i])return a[i]?h:g;var v=l[i];if(v==null)return 0;if(a[i]){var y=h,w=v;return y<w?Math.max(g,v):Math.max(h,v)}if(u==null)return 0;var S=g+o,x=v+u;return S>x?Math.max(h,v):Math.max(g,v)}function x$(t){var{translateX:e,translateY:n,useTranslate3d:i}=t;return{transform:i?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function A$(t){var{allowEscapeViewBox:e,coordinate:n,offsetTopLeft:i,position:r,reverseDirection:s,tooltipBox:a,useTranslate3d:o,viewBox:l}=t,u,h,g;return a.height>0&&a.width>0&&n?(h=ZP({allowEscapeViewBox:e,coordinate:n,key:"x",offsetTopLeft:i,position:r,reverseDirection:s,tooltipDimension:a.width,viewBox:l,viewBoxDimension:l.width}),g=ZP({allowEscapeViewBox:e,coordinate:n,key:"y",offsetTopLeft:i,position:r,reverseDirection:s,tooltipDimension:a.height,viewBox:l,viewBoxDimension:l.height}),u=x$({translateX:h,translateY:g,useTranslate3d:o})):u=w$,{cssProperties:u,cssClasses:S$({translateX:h,translateY:g,coordinate:n})}}function QP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function v1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QP(Object(n),!0).forEach(function(i){pR(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function pR(t,e,n){return(e=E$(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function E$(t){var e=T$(t,"string");return typeof e=="symbol"?e:e+""}function T$(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class R$ extends D.PureComponent{constructor(){super(...arguments),pR(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),pR(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,i,r,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(i=this.props.coordinate)===null||i===void 0?void 0:i.x)!==null&&n!==void 0?n:0,y:(r=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&r!==void 0?r:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:i,animationEasing:r,children:s,coordinate:a,hasPayload:o,isAnimationActive:l,offset:u,position:h,reverseDirection:g,useTranslate3d:v,viewBox:y,wrapperStyle:w,lastBoundingBox:S,innerRef:x,hasPortalFromProps:T}=this.props,{cssClasses:_,cssProperties:M}=A$({allowEscapeViewBox:n,coordinate:a,offsetTopLeft:u,position:h,reverseDirection:g,tooltipBox:{height:S.height,width:S.width},useTranslate3d:v,viewBox:y}),F=T?{}:v1(v1({transition:l&&e?"transform ".concat(i,"ms ").concat(r):void 0},M),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),L=v1(v1({},F),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},w);return D.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:_,style:L,ref:x},s)}}var D$=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),zy={devToolsEnabled:!1,isSsr:D$()},kk=()=>Nt(t=>t.rootProps.accessibilityLayer);function mR(){return mR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},mR.apply(null,arguments)}function JP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function eO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JP(Object(n),!0).forEach(function(i){M$(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JP(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function M$(t,e,n){return(e=_$(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _$(t){var e=P$(t,"string");return typeof e=="symbol"?e:e+""}function P$(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var tO={curveBasisClosed:Iq,curveBasisOpen:Hq,curveBasis:Bq,curveBumpX:xq,curveBumpY:Aq,curveLinearClosed:Gq,curveLinear:e2,curveMonotoneX:zq,curveMonotoneY:Vq,curveNatural:Uq,curveStep:jq,curveStepAfter:qq,curveStepBefore:Wq},y1=t=>qs(t.x)&&qs(t.y),s0=t=>t.x,a0=t=>t.y,O$=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(By(t));return(n==="curveMonotone"||n==="curveBump")&&e?tO["".concat(n).concat(e==="vertical"?"Y":"X")]:tO[n]||e2},L$=t=>{var{type:e="linear",points:n=[],baseLine:i,layout:r,connectNulls:s=!1}=t,a=O$(e,r),o=s?n.filter(y1):n,l;if(Array.isArray(i)){var u=s?i.filter(g=>y1(g)):i,h=o.map((g,v)=>eO(eO({},g),{},{base:u[v]}));return r==="vertical"?l=u1().y(a0).x1(s0).x0(g=>g.base.x):l=u1().x(s0).y1(a0).y0(g=>g.base.y),l.defined(y1).curve(a),l(h)}return r==="vertical"&&At(i)?l=u1().y(a0).x1(s0).x0(i):At(i)?l=u1().x(s0).y1(a0).y0(i):l=A9().x(s0).y(a0),l.defined(y1).curve(a),l(o)},Nk=t=>{var{className:e,points:n,path:i,pathRef:r}=t;if((!n||!n.length)&&!i)return null;var s=n&&n.length?L$(t):i;return D.createElement("path",mR({},qp(t),pK(t),{className:Wi("recharts-curve",e),d:s===null?void 0:s,ref:r}))},F$=["x","y","top","left","width","height","className"];function vR(){return vR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},vR.apply(null,arguments)}function nO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function k$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nO(Object(n),!0).forEach(function(i){N$(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nO(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function N$(t,e,n){return(e=B$(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B$(t){var e=I$(t,"string");return typeof e=="symbol"?e:e+""}function I$(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function H$(t,e){if(t==null)return{};var n,i,r=G$(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function G$(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var z$=(t,e,n,i,r,s)=>"M".concat(t,",").concat(r,"v").concat(i,"M").concat(s,",").concat(e,"h").concat(n),V$=t=>{var{x:e=0,y:n=0,top:i=0,left:r=0,width:s=0,height:a=0,className:o}=t,l=H$(t,F$),u=k$({x:e,y:n,top:i,left:r,width:s,height:a},l);return!At(e)||!At(n)||!At(s)||!At(a)||!At(i)||!At(r)?null:D.createElement("path",vR({},ro(u),{className:Wi("recharts-cross",o),d:z$(e,n,s,a,i,r)}))};function U$(t,e,n,i){var r=i/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-r:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-r,width:t==="horizontal"?i:n.width-1,height:t==="horizontal"?n.height-1:i}}function iO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function j$(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iO(Object(n),!0).forEach(function(i){W$(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iO(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function W$(t,e,n){return(e=q$(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function q$(t){var e=K$(t,"string");return typeof e=="symbol"?e:e+""}function K$(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ou(t,e){var n=j$({},t),i=e,r=Object.keys(e),s=r.reduce((a,o)=>(a[o]===void 0&&i[o]!==void 0&&(a[o]=i[o]),a),n);return s}function Y$(){}function X$(t){return t!=null}function rO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function sO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rO(Object(n),!0).forEach(function(i){$$(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rO(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function $$(t,e,n){return(e=Z$(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Z$(t){var e=Q$(t,"string");return typeof e=="symbol"?e:e+""}function Q$(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var J$=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),Bk=(t,e,n)=>t.map(i=>"".concat(J$(i)," ").concat(e,"ms ").concat(n)).join(","),eZ=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,i)=>n.filter(r=>i.includes(r))),oy=(t,e)=>Object.keys(e).reduce((n,i)=>sO(sO({},n),{},{[i]:t(i,e[i])}),{});function aO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Or(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aO(Object(n),!0).forEach(function(i){tZ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aO(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function tZ(t,e,n){return(e=nZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nZ(t){var e=iZ(t,"string");return typeof e=="symbol"?e:e+""}function iZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Xw=(t,e,n)=>t+(e-t)*n,yR=t=>{var{from:e,to:n}=t;return e!==n},Ik=(t,e,n)=>{var i=oy((r,s)=>{if(yR(s)){var[a,o]=t(s.from,s.to,s.velocity);return Or(Or({},s),{},{from:a,velocity:o})}return s},e);return n<1?oy((r,s)=>yR(s)?Or(Or({},s),{},{velocity:Xw(s.velocity,i[r].velocity,n),from:Xw(s.from,i[r].from,n)}):s,e):Ik(t,i,n-1)};function rZ(t,e,n,i,r,s){var a,o=i.reduce((v,y)=>Or(Or({},v),{},{[y]:{from:t[y],velocity:0,to:e[y]}}),{}),l=()=>oy((v,y)=>y.from,o),u=()=>!Object.values(o).filter(yR).length,h=null,g=v=>{a||(a=v);var y=v-a,w=y/n.dt;o=Ik(n,o,w),r(Or(Or(Or({},t),e),l())),a=v,u()||(h=s.setTimeout(g))};return()=>(h=s.setTimeout(g),()=>{h()})}function sZ(t,e,n,i,r,s,a){var o=null,l=r.reduce((g,v)=>Or(Or({},g),{},{[v]:[t[v],e[v]]}),{}),u,h=g=>{u||(u=g);var v=(g-u)/i,y=oy((S,x)=>Xw(...x,n(v)),l);if(s(Or(Or(Or({},t),e),y)),v<1)o=a.setTimeout(h);else{var w=oy((S,x)=>Xw(...x,n(1)),l);s(Or(Or(Or({},t),e),w))}};return()=>(o=a.setTimeout(h),()=>{o()})}const aZ=(t,e,n,i,r,s)=>{var a=eZ(t,e);return n.isStepper===!0?rZ(t,e,n,a,r,s):sZ(t,e,n,i,a,r,s)};var $w=1e-4,Hk=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],Gk=(t,e)=>t.map((n,i)=>n*e**i).reduce((n,i)=>n+i),oO=(t,e)=>n=>{var i=Hk(t,e);return Gk(i,n)},oZ=(t,e)=>n=>{var i=Hk(t,e),r=[...i.map((s,a)=>s*a).slice(1),0];return Gk(r,n)},lO=function(){for(var e,n,i,r,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];if(a.length===1)switch(a[0]){case"linear":[e,i,n,r]=[0,0,1,1];break;case"ease":[e,i,n,r]=[.25,.1,.25,1];break;case"ease-in":[e,i,n,r]=[.42,0,1,1];break;case"ease-out":[e,i,n,r]=[.42,0,.58,1];break;case"ease-in-out":[e,i,n,r]=[0,0,.58,1];break;default:{var l=a[0].split("(");l[0]==="cubic-bezier"&&l[1].split(")")[0].split(",").length===4&&([e,i,n,r]=l[1].split(")")[0].split(",").map(w=>parseFloat(w)))}}else a.length===4&&([e,i,n,r]=a);var u=oO(e,n),h=oO(i,r),g=oZ(e,n),v=w=>w>1?1:w<0?0:w,y=w=>{for(var S=w>1?1:w,x=S,T=0;T<8;++T){var _=u(x)-S,M=g(x);if(Math.abs(_-S)<$w||M<$w)return h(x);x=v(x-_/M)}return h(x)};return y.isStepper=!1,y},lZ=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:i=8,dt:r=17}=e,s=(a,o,l)=>{var u=-(a-o)*n,h=l*i,g=l+(u-h)*r/1e3,v=l*r/1e3+a;return Math.abs(v-o)<$w&&Math.abs(g)<$w?[o,0]:[v,g]};return s.isStepper=!0,s.dt=r,s},cZ=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return lO(t);case"spring":return lZ();default:if(t.split("(")[0]==="cubic-bezier")return lO(t)}return typeof t=="function"?t:null};function uZ(t){var e,n=()=>null,i=!1,r=null,s=a=>{if(!i){if(Array.isArray(a)){if(!a.length)return;var o=a,[l,...u]=o;if(typeof l=="number"){r=t.setTimeout(s.bind(null,u),l);return}s(l),r=t.setTimeout(s.bind(null,u));return}typeof a=="string"&&(e=a,n(e)),typeof a=="object"&&(e=a,n(e)),typeof a=="function"&&a()}};return{stop:()=>{i=!0},start:a=>{i=!1,r&&(r(),r=null),s(a)},subscribe:a=>(n=a,()=>{n=()=>null}),getTimeoutController:()=>t}}class hZ{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=performance.now(),r=null,s=a=>{a-i>=n?e(a):typeof requestAnimationFrame=="function"&&(r=requestAnimationFrame(s))};return r=requestAnimationFrame(s),()=>{cancelAnimationFrame(r)}}}function dZ(){return uZ(new hZ)}var fZ=D.createContext(dZ);function gZ(t,e){var n=D.useContext(fZ);return D.useMemo(()=>e??n(t),[t,e,n])}var pZ={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},cO={t:0},hE={t:1};function xM(t){var e=ou(t,pZ),{isActive:n,canBegin:i,duration:r,easing:s,begin:a,onAnimationEnd:o,onAnimationStart:l,children:u}=e,h=gZ(e.animationId,e.animationManager),[g,v]=D.useState(n?cO:hE),y=D.useRef(null);return D.useEffect(()=>{n||v(hE)},[n]),D.useEffect(()=>{if(!n||!i)return Y$;var w=aZ(cO,hE,cZ(s),r,v,h.getTimeoutController()),S=()=>{y.current=w()};return h.start([l,a,S,r,o]),()=>{h.stop(),y.current&&y.current(),o()}},[n,i,r,s,a,l,o,h]),u(g.t)}function AM(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=D.useRef(iy(e)),i=D.useRef(t);return i.current!==t&&(n.current=iy(e),i.current=t),n.current}var mZ=["radius"],vZ=["radius"];function uO(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function hO(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?uO(Object(n),!0).forEach(function(i){yZ(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uO(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function yZ(t,e,n){return(e=CZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CZ(t){var e=bZ(t,"string");return typeof e=="symbol"?e:e+""}function bZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zw(){return Zw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Zw.apply(null,arguments)}function dO(t,e){if(t==null)return{};var n,i,r=wZ(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function wZ(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var fO=(t,e,n,i,r)=>{var s=Math.min(Math.abs(n)/2,Math.abs(i)/2),a=i>=0?1:-1,o=n>=0?1:-1,l=i>=0&&n>=0||i<0&&n<0?1:0,u;if(s>0&&r instanceof Array){for(var h=[0,0,0,0],g=0,v=4;g<v;g++)h[g]=r[g]>s?s:r[g];u="M".concat(t,",").concat(e+a*h[0]),h[0]>0&&(u+="A ".concat(h[0],",").concat(h[0],",0,0,").concat(l,",").concat(t+o*h[0],",").concat(e)),u+="L ".concat(t+n-o*h[1],",").concat(e),h[1]>0&&(u+="A ".concat(h[1],",").concat(h[1],",0,0,").concat(l,`,
        `).concat(t+n,",").concat(e+a*h[1])),u+="L ".concat(t+n,",").concat(e+i-a*h[2]),h[2]>0&&(u+="A ".concat(h[2],",").concat(h[2],",0,0,").concat(l,`,
        `).concat(t+n-o*h[2],",").concat(e+i)),u+="L ".concat(t+o*h[3],",").concat(e+i),h[3]>0&&(u+="A ".concat(h[3],",").concat(h[3],",0,0,").concat(l,`,
        `).concat(t,",").concat(e+i-a*h[3])),u+="Z"}else if(s>0&&r===+r&&r>0){var y=Math.min(s,r);u="M ".concat(t,",").concat(e+a*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(l,",").concat(t+o*y,",").concat(e,`
            L `).concat(t+n-o*y,",").concat(e,`
            A `).concat(y,",").concat(y,",0,0,").concat(l,",").concat(t+n,",").concat(e+a*y,`
            L `).concat(t+n,",").concat(e+i-a*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(l,",").concat(t+n-o*y,",").concat(e+i,`
            L `).concat(t+o*y,",").concat(e+i,`
            A `).concat(y,",").concat(y,",0,0,").concat(l,",").concat(t,",").concat(e+i-a*y," Z")}else u="M ".concat(t,",").concat(e," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return u},SZ={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},zk=t=>{var e=ou(t,SZ),n=D.useRef(null),[i,r]=D.useState(-1);D.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var K=n.current.getTotalLength();K&&r(K)}catch{}},[]);var{x:s,y:a,width:o,height:l,radius:u,className:h}=e,{animationEasing:g,animationDuration:v,animationBegin:y,isAnimationActive:w,isUpdateAnimationActive:S}=e,x=D.useRef(o),T=D.useRef(l),_=D.useRef(s),M=D.useRef(a),F=D.useMemo(()=>({x:s,y:a,width:o,height:l,radius:u}),[s,a,o,l,u]),L=AM(F,"rectangle-");if(s!==+s||a!==+a||o!==+o||l!==+l||o===0||l===0)return null;var k=Wi("recharts-rectangle",h);if(!S){var B=ro(e),{radius:H}=B,U=dO(B,mZ);return D.createElement("path",Zw({},U,{radius:typeof u=="number"?u:void 0,className:k,d:fO(s,a,o,l,u)}))}var W=x.current,j=T.current,X=_.current,ne=M.current,$="0px ".concat(i===-1?1:i,"px"),q="".concat(i,"px 0px"),z=Bk(["strokeDasharray"],v,typeof g=="string"?g:void 0);return D.createElement(xM,{animationId:L,key:L,canBegin:i>0,duration:v,easing:g,isActive:S,begin:y},K=>{var Q=Go(W,o,K),oe=Go(j,l,K),le=Go(X,s,K),V=Go(ne,a,K);n.current&&(x.current=Q,T.current=oe,_.current=le,M.current=V);var Z;w?K>0?Z={transition:z,strokeDasharray:q}:Z={strokeDasharray:$}:Z={strokeDasharray:q};var ae=ro(e),{radius:Ee}=ae,Pe=dO(ae,vZ);return D.createElement("path",Zw({},Pe,{radius:typeof u=="number"?u:void 0,className:k,d:fO(le,V,Q,oe,u),ref:n,style:hO(hO({},Z),e.style)}))})};function Vk(t){var{cx:e,cy:n,radius:i,startAngle:r,endAngle:s}=t,a=Vi(e,n,i,r),o=Vi(e,n,i,s);return{points:[a,o],cx:e,cy:n,radius:i,startAngle:r,endAngle:s}}function CR(){return CR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},CR.apply(null,arguments)}var xZ=(t,e)=>{var n=Gs(e-t),i=Math.min(Math.abs(e-t),359.999);return n*i},C1=t=>{var{cx:e,cy:n,radius:i,angle:r,sign:s,isExternal:a,cornerRadius:o,cornerIsExternal:l}=t,u=o*(a?1:-1)+i,h=Math.asin(o/u)/Yw,g=l?r:r+s*h,v=Vi(e,n,u,g),y=Vi(e,n,i,g),w=l?r-s*h:r,S=Vi(e,n,u*Math.cos(h*Yw),w);return{center:v,circleTangency:y,lineTangency:S,theta:h}},Uk=t=>{var{cx:e,cy:n,innerRadius:i,outerRadius:r,startAngle:s,endAngle:a}=t,o=xZ(s,a),l=s+o,u=Vi(e,n,r,s),h=Vi(e,n,r,l),g="M ".concat(u.x,",").concat(u.y,`
    A `).concat(r,",").concat(r,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(s>l),`,
    `).concat(h.x,",").concat(h.y,`
  `);if(i>0){var v=Vi(e,n,i,s),y=Vi(e,n,i,l);g+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(s<=l),`,
            `).concat(v.x,",").concat(v.y," Z")}else g+="L ".concat(e,",").concat(n," Z");return g},AZ=t=>{var{cx:e,cy:n,innerRadius:i,outerRadius:r,cornerRadius:s,forceCornerRadius:a,cornerIsExternal:o,startAngle:l,endAngle:u}=t,h=Gs(u-l),{circleTangency:g,lineTangency:v,theta:y}=C1({cx:e,cy:n,radius:r,angle:l,sign:h,cornerRadius:s,cornerIsExternal:o}),{circleTangency:w,lineTangency:S,theta:x}=C1({cx:e,cy:n,radius:r,angle:u,sign:-h,cornerRadius:s,cornerIsExternal:o}),T=o?Math.abs(l-u):Math.abs(l-u)-y-x;if(T<0)return a?"M ".concat(v.x,",").concat(v.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):Uk({cx:e,cy:n,innerRadius:i,outerRadius:r,startAngle:l,endAngle:u});var _="M ".concat(v.x,",").concat(v.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(r,",").concat(r,",0,").concat(+(T>180),",").concat(+(h<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(S.x,",").concat(S.y,`
  `);if(i>0){var{circleTangency:M,lineTangency:F,theta:L}=C1({cx:e,cy:n,radius:i,angle:l,sign:h,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),{circleTangency:k,lineTangency:B,theta:H}=C1({cx:e,cy:n,radius:i,angle:u,sign:-h,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),U=o?Math.abs(l-u):Math.abs(l-u)-L-H;if(U<0&&s===0)return"".concat(_,"L").concat(e,",").concat(n,"Z");_+="L".concat(B.x,",").concat(B.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(k.x,",").concat(k.y,`
      A`).concat(i,",").concat(i,",0,").concat(+(U>180),",").concat(+(h>0),",").concat(M.x,",").concat(M.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(h<0),",").concat(F.x,",").concat(F.y,"Z")}else _+="L".concat(e,",").concat(n,"Z");return _},EZ={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},jk=t=>{var e=ou(t,EZ),{cx:n,cy:i,innerRadius:r,outerRadius:s,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:h,className:g}=e;if(s<r||u===h)return null;var v=Wi("recharts-sector",g),y=s-r,w=aa(a,y,0,!0),S;return w>0&&Math.abs(u-h)<360?S=AZ({cx:n,cy:i,innerRadius:r,outerRadius:s,cornerRadius:Math.min(w,y/2),forceCornerRadius:o,cornerIsExternal:l,startAngle:u,endAngle:h}):S=Uk({cx:n,cy:i,innerRadius:r,outerRadius:s,startAngle:u,endAngle:h}),D.createElement("path",CR({},ro(e),{className:v,d:S}))};function TZ(t,e,n){var i,r,s,a;if(t==="horizontal")i=e.x,s=i,r=n.top,a=n.top+n.height;else if(t==="vertical")r=e.y,a=r,i=n.left,s=n.left+n.width;else if(e.cx!=null&&e.cy!=null)if(t==="centric"){var{cx:o,cy:l,innerRadius:u,outerRadius:h,angle:g}=e,v=Vi(o,l,u,g),y=Vi(o,l,h,g);i=v.x,r=v.y,s=y.x,a=y.y}else return Vk(e);return[{x:i,y:r},{x:s,y:a}]}var dE={},fE={},gE={},gO;function RZ(){return gO||(gO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=X9();function n(i){return e.isSymbol(i)?NaN:Number(i)}t.toNumber=n})(gE)),gE}var pO;function DZ(){return pO||(pO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=RZ();function n(i){return i?(i=e.toNumber(i),i===1/0||i===-1/0?(i<0?-1:1)*Number.MAX_VALUE:i===i?i:0):i===0?i:0}t.toFinite=n})(fE)),fE}var mO;function MZ(){return mO||(mO=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=$9(),n=DZ();function i(r,s,a){a&&typeof a!="number"&&e.isIterateeCall(r,s,a)&&(s=a=void 0),r=n.toFinite(r),s===void 0?(s=r,r=0):s=n.toFinite(s),a=a===void 0?r<s?1:-1:n.toFinite(a);const o=Math.max(Math.ceil((s-r)/(a||1)),0),l=new Array(o);for(let u=0;u<o;u++)l[u]=r,r+=a;return l}t.range=i})(dE)),dE}var pE,vO;function _Z(){return vO||(vO=1,pE=MZ().range),pE}var PZ=_Z();const Wk=Wo(PZ);function Eh(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function OZ(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function EM(t){let e,n,i;t.length!==2?(e=Eh,n=(o,l)=>Eh(t(o),l),i=(o,l)=>t(o)-l):(e=t===Eh||t===OZ?t:LZ,n=t,i=t);function r(o,l,u=0,h=o.length){if(u<h){if(e(l,l)!==0)return h;do{const g=u+h>>>1;n(o[g],l)<0?u=g+1:h=g}while(u<h)}return u}function s(o,l,u=0,h=o.length){if(u<h){if(e(l,l)!==0)return h;do{const g=u+h>>>1;n(o[g],l)<=0?u=g+1:h=g}while(u<h)}return u}function a(o,l,u=0,h=o.length){const g=r(o,l,u,h-1);return g>u&&i(o[g-1],l)>-i(o[g],l)?g-1:g}return{left:r,center:a,right:s}}function LZ(){return 0}function qk(t){return t===null?NaN:+t}function*FZ(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const kZ=EM(Eh),Vy=kZ.right;EM(qk).center;class yO extends Map{constructor(e,n=IZ){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[i,r]of e)this.set(i,r)}get(e){return super.get(CO(this,e))}has(e){return super.has(CO(this,e))}set(e,n){return super.set(NZ(this,e),n)}delete(e){return super.delete(BZ(this,e))}}function CO({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):n}function NZ({_intern:t,_key:e},n){const i=e(n);return t.has(i)?t.get(i):(t.set(i,n),n)}function BZ({_intern:t,_key:e},n){const i=e(n);return t.has(i)&&(n=t.get(i),t.delete(i)),n}function IZ(t){return t!==null&&typeof t=="object"?t.valueOf():t}function HZ(t=Eh){if(t===Eh)return Kk;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const i=t(e,n);return i||i===0?i:(t(n,n)===0)-(t(e,e)===0)}}function Kk(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const GZ=Math.sqrt(50),zZ=Math.sqrt(10),VZ=Math.sqrt(2);function Qw(t,e,n){const i=(e-t)/Math.max(0,n),r=Math.floor(Math.log10(i)),s=i/Math.pow(10,r),a=s>=GZ?10:s>=zZ?5:s>=VZ?2:1;let o,l,u;return r<0?(u=Math.pow(10,-r)/a,o=Math.round(t*u),l=Math.round(e*u),o/u<t&&++o,l/u>e&&--l,u=-u):(u=Math.pow(10,r)*a,o=Math.round(t/u),l=Math.round(e/u),o*u<t&&++o,l*u>e&&--l),l<o&&.5<=n&&n<2?Qw(t,e,n*2):[o,l,u]}function bR(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const i=e<t,[r,s,a]=i?Qw(e,t,n):Qw(t,e,n);if(!(s>=r))return[];const o=s-r+1,l=new Array(o);if(i)if(a<0)for(let u=0;u<o;++u)l[u]=(s-u)/-a;else for(let u=0;u<o;++u)l[u]=(s-u)*a;else if(a<0)for(let u=0;u<o;++u)l[u]=(r+u)/-a;else for(let u=0;u<o;++u)l[u]=(r+u)*a;return l}function wR(t,e,n){return e=+e,t=+t,n=+n,Qw(t,e,n)[2]}function SR(t,e,n){e=+e,t=+t,n=+n;const i=e<t,r=i?wR(e,t,n):wR(t,e,n);return(i?-1:1)*(r<0?1/-r:r)}function bO(t,e){let n;for(const i of t)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);return n}function wO(t,e){let n;for(const i of t)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);return n}function Yk(t,e,n=0,i=1/0,r){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=e&&e<=i))return t;for(r=r===void 0?Kk:HZ(r);i>n;){if(i-n>600){const l=i-n+1,u=e-n+1,h=Math.log(l),g=.5*Math.exp(2*h/3),v=.5*Math.sqrt(h*g*(l-g)/l)*(u-l/2<0?-1:1),y=Math.max(n,Math.floor(e-u*g/l+v)),w=Math.min(i,Math.floor(e+(l-u)*g/l+v));Yk(t,e,y,w,r)}const s=t[e];let a=n,o=i;for(o0(t,n,e),r(t[i],s)>0&&o0(t,n,i);a<o;){for(o0(t,a,o),++a,--o;r(t[a],s)<0;)++a;for(;r(t[o],s)>0;)--o}r(t[n],s)===0?o0(t,n,o):(++o,o0(t,o,i)),o<=e&&(n=o+1),e<=o&&(i=o-1)}return t}function o0(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function UZ(t,e,n){if(t=Float64Array.from(FZ(t)),!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return wO(t);if(e>=1)return bO(t);var i,r=(i-1)*e,s=Math.floor(r),a=bO(Yk(t,s).subarray(0,s+1)),o=wO(t.subarray(s+1));return a+(o-a)*(r-s)}}function jZ(t,e,n=qk){if(!(!(i=t.length)||isNaN(e=+e))){if(e<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,s=Math.floor(r),a=+n(t[s],s,t),o=+n(t[s+1],s+1,t);return a+(o-a)*(r-s)}}function WZ(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(r);++i<r;)s[i]=t+i*n;return s}function uo(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function lu(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const xR=Symbol("implicit");function TM(){var t=new yO,e=[],n=[],i=xR;function r(s){let a=t.get(s);if(a===void 0){if(i!==xR)return i;t.set(s,a=e.push(s)-1)}return n[a%n.length]}return r.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new yO;for(const a of s)t.has(a)||t.set(a,e.push(a)-1);return r},r.range=function(s){return arguments.length?(n=Array.from(s),r):n.slice()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return TM(e,n).unknown(i)},uo.apply(r,arguments),r}function RM(){var t=TM().unknown(void 0),e=t.domain,n=t.range,i=0,r=1,s,a,o=!1,l=0,u=0,h=.5;delete t.unknown;function g(){var v=e().length,y=r<i,w=y?r:i,S=y?i:r;s=(S-w)/Math.max(1,v-l+u*2),o&&(s=Math.floor(s)),w+=(S-w-s*(v-l))*h,a=s*(1-l),o&&(w=Math.round(w),a=Math.round(a));var x=WZ(v).map(function(T){return w+s*T});return n(y?x.reverse():x)}return t.domain=function(v){return arguments.length?(e(v),g()):e()},t.range=function(v){return arguments.length?([i,r]=v,i=+i,r=+r,g()):[i,r]},t.rangeRound=function(v){return[i,r]=v,i=+i,r=+r,o=!0,g()},t.bandwidth=function(){return a},t.step=function(){return s},t.round=function(v){return arguments.length?(o=!!v,g()):o},t.padding=function(v){return arguments.length?(l=Math.min(1,u=+v),g()):l},t.paddingInner=function(v){return arguments.length?(l=Math.min(1,v),g()):l},t.paddingOuter=function(v){return arguments.length?(u=+v,g()):u},t.align=function(v){return arguments.length?(h=Math.max(0,Math.min(1,v)),g()):h},t.copy=function(){return RM(e(),[i,r]).round(o).paddingInner(l).paddingOuter(u).align(h)},uo.apply(g(),arguments)}function Xk(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return Xk(e())},t}function qZ(){return Xk(RM.apply(null,arguments).paddingInner(1))}function DM(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function $k(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Uy(){}var ly=.7,Jw=1/ly,Fp="\\s*([+-]?\\d+)\\s*",cy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",jl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",KZ=/^#([0-9a-f]{3,8})$/,YZ=new RegExp(`^rgb\\(${Fp},${Fp},${Fp}\\)$`),XZ=new RegExp(`^rgb\\(${jl},${jl},${jl}\\)$`),$Z=new RegExp(`^rgba\\(${Fp},${Fp},${Fp},${cy}\\)$`),ZZ=new RegExp(`^rgba\\(${jl},${jl},${jl},${cy}\\)$`),QZ=new RegExp(`^hsl\\(${cy},${jl},${jl}\\)$`),JZ=new RegExp(`^hsla\\(${cy},${jl},${jl},${cy}\\)$`),SO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};DM(Uy,uy,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:xO,formatHex:xO,formatHex8:eQ,formatHsl:tQ,formatRgb:AO,toString:AO});function xO(){return this.rgb().formatHex()}function eQ(){return this.rgb().formatHex8()}function tQ(){return Zk(this).formatHsl()}function AO(){return this.rgb().formatRgb()}function uy(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=KZ.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?EO(e):n===3?new zs(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?b1(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?b1(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=YZ.exec(t))?new zs(e[1],e[2],e[3],1):(e=XZ.exec(t))?new zs(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=$Z.exec(t))?b1(e[1],e[2],e[3],e[4]):(e=ZZ.exec(t))?b1(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=QZ.exec(t))?DO(e[1],e[2]/100,e[3]/100,1):(e=JZ.exec(t))?DO(e[1],e[2]/100,e[3]/100,e[4]):SO.hasOwnProperty(t)?EO(SO[t]):t==="transparent"?new zs(NaN,NaN,NaN,0):null}function EO(t){return new zs(t>>16&255,t>>8&255,t&255,1)}function b1(t,e,n,i){return i<=0&&(t=e=n=NaN),new zs(t,e,n,i)}function nQ(t){return t instanceof Uy||(t=uy(t)),t?(t=t.rgb(),new zs(t.r,t.g,t.b,t.opacity)):new zs}function AR(t,e,n,i){return arguments.length===1?nQ(t):new zs(t,e,n,i??1)}function zs(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}DM(zs,AR,$k(Uy,{brighter(t){return t=t==null?Jw:Math.pow(Jw,t),new zs(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ly:Math.pow(ly,t),new zs(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new zs(lf(this.r),lf(this.g),lf(this.b),eS(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:TO,formatHex:TO,formatHex8:iQ,formatRgb:RO,toString:RO}));function TO(){return`#${Yd(this.r)}${Yd(this.g)}${Yd(this.b)}`}function iQ(){return`#${Yd(this.r)}${Yd(this.g)}${Yd(this.b)}${Yd((isNaN(this.opacity)?1:this.opacity)*255)}`}function RO(){const t=eS(this.opacity);return`${t===1?"rgb(":"rgba("}${lf(this.r)}, ${lf(this.g)}, ${lf(this.b)}${t===1?")":`, ${t})`}`}function eS(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function lf(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Yd(t){return t=lf(t),(t<16?"0":"")+t.toString(16)}function DO(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Vo(t,e,n,i)}function Zk(t){if(t instanceof Vo)return new Vo(t.h,t.s,t.l,t.opacity);if(t instanceof Uy||(t=uy(t)),!t)return new Vo;if(t instanceof Vo)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),a=NaN,o=s-r,l=(s+r)/2;return o?(e===s?a=(n-i)/o+(n<i)*6:n===s?a=(i-e)/o+2:a=(e-n)/o+4,o/=l<.5?s+r:2-s-r,a*=60):o=l>0&&l<1?0:a,new Vo(a,o,l,t.opacity)}function rQ(t,e,n,i){return arguments.length===1?Zk(t):new Vo(t,e,n,i??1)}function Vo(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}DM(Vo,rQ,$k(Uy,{brighter(t){return t=t==null?Jw:Math.pow(Jw,t),new Vo(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ly:Math.pow(ly,t),new Vo(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new zs(mE(t>=240?t-240:t+120,r,i),mE(t,r,i),mE(t<120?t+240:t-120,r,i),this.opacity)},clamp(){return new Vo(MO(this.h),w1(this.s),w1(this.l),eS(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=eS(this.opacity);return`${t===1?"hsl(":"hsla("}${MO(this.h)}, ${w1(this.s)*100}%, ${w1(this.l)*100}%${t===1?")":`, ${t})`}`}}));function MO(t){return t=(t||0)%360,t<0?t+360:t}function w1(t){return Math.max(0,Math.min(1,t||0))}function mE(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const MM=t=>()=>t;function sQ(t,e){return function(n){return t+n*e}}function aQ(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function oQ(t){return(t=+t)==1?Qk:function(e,n){return n-e?aQ(e,n,t):MM(isNaN(e)?n:e)}}function Qk(t,e){var n=e-t;return n?sQ(t,n):MM(isNaN(t)?e:t)}const _O=(function t(e){var n=oQ(e);function i(r,s){var a=n((r=AR(r)).r,(s=AR(s)).r),o=n(r.g,s.g),l=n(r.b,s.b),u=Qk(r.opacity,s.opacity);return function(h){return r.r=a(h),r.g=o(h),r.b=l(h),r.opacity=u(h),r+""}}return i.gamma=t,i})(1);function lQ(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),r;return function(s){for(r=0;r<n;++r)i[r]=t[r]*(1-s)+e[r]*s;return i}}function cQ(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function uQ(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,r=new Array(i),s=new Array(n),a;for(a=0;a<i;++a)r[a]=om(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(o){for(a=0;a<i;++a)s[a]=r[a](o);return s}}function hQ(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function tS(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function dQ(t,e){var n={},i={},r;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in t?n[r]=om(t[r],e[r]):i[r]=e[r];return function(s){for(r in n)i[r]=n[r](s);return i}}var ER=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vE=new RegExp(ER.source,"g");function fQ(t){return function(){return t}}function gQ(t){return function(e){return t(e)+""}}function pQ(t,e){var n=ER.lastIndex=vE.lastIndex=0,i,r,s,a=-1,o=[],l=[];for(t=t+"",e=e+"";(i=ER.exec(t))&&(r=vE.exec(e));)(s=r.index)>n&&(s=e.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(i=i[0])===(r=r[0])?o[a]?o[a]+=r:o[++a]=r:(o[++a]=null,l.push({i:a,x:tS(i,r)})),n=vE.lastIndex;return n<e.length&&(s=e.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?gQ(l[0].x):fQ(e):(e=l.length,function(u){for(var h=0,g;h<e;++h)o[(g=l[h]).i]=g.x(u);return o.join("")})}function om(t,e){var n=typeof e,i;return e==null||n==="boolean"?MM(e):(n==="number"?tS:n==="string"?(i=uy(e))?(e=i,_O):pQ:e instanceof uy?_O:e instanceof Date?hQ:cQ(e)?lQ:Array.isArray(e)?uQ:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?dQ:tS)(t,e)}function _M(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function mQ(t,e){e===void 0&&(e=t,t=om);for(var n=0,i=e.length-1,r=e[0],s=new Array(i<0?0:i);n<i;)s[n]=t(r,r=e[++n]);return function(a){var o=Math.max(0,Math.min(i-1,Math.floor(a*=i)));return s[o](a-o)}}function vQ(t){return function(){return t}}function nS(t){return+t}var PO=[0,1];function fs(t){return t}function TR(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:vQ(isNaN(e)?NaN:.5)}function yQ(t,e){var n;return t>e&&(n=t,t=e,e=n),function(i){return Math.max(t,Math.min(e,i))}}function CQ(t,e,n){var i=t[0],r=t[1],s=e[0],a=e[1];return r<i?(i=TR(r,i),s=n(a,s)):(i=TR(i,r),s=n(s,a)),function(o){return s(i(o))}}function bQ(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),s=new Array(i),a=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<i;)r[a]=TR(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(o){var l=Vy(t,o,1,i)-1;return s[l](r[l](o))}}function jy(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function g2(){var t=PO,e=PO,n=om,i,r,s,a=fs,o,l,u;function h(){var v=Math.min(t.length,e.length);return a!==fs&&(a=yQ(t[0],t[v-1])),o=v>2?bQ:CQ,l=u=null,g}function g(v){return v==null||isNaN(v=+v)?s:(l||(l=o(t.map(i),e,n)))(i(a(v)))}return g.invert=function(v){return a(r((u||(u=o(e,t.map(i),tS)))(v)))},g.domain=function(v){return arguments.length?(t=Array.from(v,nS),h()):t.slice()},g.range=function(v){return arguments.length?(e=Array.from(v),h()):e.slice()},g.rangeRound=function(v){return e=Array.from(v),n=_M,h()},g.clamp=function(v){return arguments.length?(a=v?!0:fs,h()):a!==fs},g.interpolate=function(v){return arguments.length?(n=v,h()):n},g.unknown=function(v){return arguments.length?(s=v,g):s},function(v,y){return i=v,r=y,h()}}function PM(){return g2()(fs,fs)}function wQ(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function iS(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function Xp(t){return t=iS(Math.abs(t)),t?t[1]:NaN}function SQ(t,e){return function(n,i){for(var r=n.length,s=[],a=0,o=t[0],l=0;r>0&&o>0&&(l+o+1>i&&(o=Math.max(1,i-l)),s.push(n.substring(r-=o,r+o)),!((l+=o+1)>i));)o=t[a=(a+1)%t.length];return s.reverse().join(e)}}function xQ(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var AQ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function hy(t){if(!(e=AQ.exec(t)))throw new Error("invalid format: "+t);var e;return new OM({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}hy.prototype=OM.prototype;function OM(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}OM.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function EQ(t){e:for(var e=t.length,n=1,i=-1,r;n<e;++n)switch(t[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+t[n])break e;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}var Jk;function TQ(t,e){var n=iS(t,e);if(!n)return t+"";var i=n[0],r=n[1],s=r-(Jk=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,a=i.length;return s===a?i:s>a?i+new Array(s-a+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+iS(t,Math.max(0,e+s-1))[0]}function OO(t,e){var n=iS(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const LO={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:wQ,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>OO(t*100,e),r:OO,s:TQ,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function FO(t){return t}var kO=Array.prototype.map,NO=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function RQ(t){var e=t.grouping===void 0||t.thousands===void 0?FO:SQ(kO.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",r=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?FO:xQ(kO.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(g){g=hy(g);var v=g.fill,y=g.align,w=g.sign,S=g.symbol,x=g.zero,T=g.width,_=g.comma,M=g.precision,F=g.trim,L=g.type;L==="n"?(_=!0,L="g"):LO[L]||(M===void 0&&(M=12),F=!0,L="g"),(x||v==="0"&&y==="=")&&(x=!0,v="0",y="=");var k=S==="$"?n:S==="#"&&/[boxX]/.test(L)?"0"+L.toLowerCase():"",B=S==="$"?i:/[%p]/.test(L)?a:"",H=LO[L],U=/[defgprs%]/.test(L);M=M===void 0?6:/[gprs]/.test(L)?Math.max(1,Math.min(21,M)):Math.max(0,Math.min(20,M));function W(j){var X=k,ne=B,$,q,z;if(L==="c")ne=H(j)+ne,j="";else{j=+j;var K=j<0||1/j<0;if(j=isNaN(j)?l:H(Math.abs(j),M),F&&(j=EQ(j)),K&&+j==0&&w!=="+"&&(K=!1),X=(K?w==="("?w:o:w==="-"||w==="("?"":w)+X,ne=(L==="s"?NO[8+Jk/3]:"")+ne+(K&&w==="("?")":""),U){for($=-1,q=j.length;++$<q;)if(z=j.charCodeAt($),48>z||z>57){ne=(z===46?r+j.slice($+1):j.slice($))+ne,j=j.slice(0,$);break}}}_&&!x&&(j=e(j,1/0));var Q=X.length+j.length+ne.length,oe=Q<T?new Array(T-Q+1).join(v):"";switch(_&&x&&(j=e(oe+j,oe.length?T-ne.length:1/0),oe=""),y){case"<":j=X+j+ne+oe;break;case"=":j=X+oe+j+ne;break;case"^":j=oe.slice(0,Q=oe.length>>1)+X+j+ne+oe.slice(Q);break;default:j=oe+X+j+ne;break}return s(j)}return W.toString=function(){return g+""},W}function h(g,v){var y=u((g=hy(g),g.type="f",g)),w=Math.max(-8,Math.min(8,Math.floor(Xp(v)/3)))*3,S=Math.pow(10,-w),x=NO[8+w/3];return function(T){return y(S*T)+x}}return{format:u,formatPrefix:h}}var S1,LM,eN;DQ({thousands:",",grouping:[3],currency:["$",""]});function DQ(t){return S1=RQ(t),LM=S1.format,eN=S1.formatPrefix,S1}function MQ(t){return Math.max(0,-Xp(Math.abs(t)))}function _Q(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Xp(e)/3)))*3-Xp(Math.abs(t)))}function PQ(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Xp(e)-Xp(t))+1}function tN(t,e,n,i){var r=SR(t,e,n),s;switch(i=hy(i??",f"),i.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(s=_Q(r,a))&&(i.precision=s),eN(i,a)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(s=PQ(r,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=s-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(s=MQ(r))&&(i.precision=s-(i.type==="%")*2);break}}return LM(i)}function kh(t){var e=t.domain;return t.ticks=function(n){var i=e();return bR(i[0],i[i.length-1],n??10)},t.tickFormat=function(n,i){var r=e();return tN(r[0],r[r.length-1],n??10,i)},t.nice=function(n){n==null&&(n=10);var i=e(),r=0,s=i.length-1,a=i[r],o=i[s],l,u,h=10;for(o<a&&(u=a,a=o,o=u,u=r,r=s,s=u);h-- >0;){if(u=wR(a,o,n),u===l)return i[r]=a,i[s]=o,e(i);if(u>0)a=Math.floor(a/u)*u,o=Math.ceil(o/u)*u;else if(u<0)a=Math.ceil(a*u)/u,o=Math.floor(o*u)/u;else break;l=u}return t},t}function nN(){var t=PM();return t.copy=function(){return jy(t,nN())},uo.apply(t,arguments),kh(t)}function iN(t){var e;function n(i){return i==null||isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=Array.from(i,nS),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return iN(t).unknown(e)},t=arguments.length?Array.from(t,nS):[0,1],kh(n)}function rN(t,e){t=t.slice();var n=0,i=t.length-1,r=t[n],s=t[i],a;return s<r&&(a=n,n=i,i=a,a=r,r=s,s=a),t[n]=e.floor(r),t[i]=e.ceil(s),t}function BO(t){return Math.log(t)}function IO(t){return Math.exp(t)}function OQ(t){return-Math.log(-t)}function LQ(t){return-Math.exp(-t)}function FQ(t){return isFinite(t)?+("1e"+t):t<0?0:t}function kQ(t){return t===10?FQ:t===Math.E?Math.exp:e=>Math.pow(t,e)}function NQ(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function HO(t){return(e,n)=>-t(-e,n)}function FM(t){const e=t(BO,IO),n=e.domain;let i=10,r,s;function a(){return r=NQ(i),s=kQ(i),n()[0]<0?(r=HO(r),s=HO(s),t(OQ,LQ)):t(BO,IO),e}return e.base=function(o){return arguments.length?(i=+o,a()):i},e.domain=function(o){return arguments.length?(n(o),a()):n()},e.ticks=o=>{const l=n();let u=l[0],h=l[l.length-1];const g=h<u;g&&([u,h]=[h,u]);let v=r(u),y=r(h),w,S;const x=o==null?10:+o;let T=[];if(!(i%1)&&y-v<x){if(v=Math.floor(v),y=Math.ceil(y),u>0){for(;v<=y;++v)for(w=1;w<i;++w)if(S=v<0?w/s(-v):w*s(v),!(S<u)){if(S>h)break;T.push(S)}}else for(;v<=y;++v)for(w=i-1;w>=1;--w)if(S=v>0?w/s(-v):w*s(v),!(S<u)){if(S>h)break;T.push(S)}T.length*2<x&&(T=bR(u,h,x))}else T=bR(v,y,Math.min(y-v,x)).map(s);return g?T.reverse():T},e.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=i===10?"s":","),typeof l!="function"&&(!(i%1)&&(l=hy(l)).precision==null&&(l.trim=!0),l=LM(l)),o===1/0)return l;const u=Math.max(1,i*o/e.ticks().length);return h=>{let g=h/s(Math.round(r(h)));return g*i<i-.5&&(g*=i),g<=u?l(h):""}},e.nice=()=>n(rN(n(),{floor:o=>s(Math.floor(r(o))),ceil:o=>s(Math.ceil(r(o)))})),e}function sN(){const t=FM(g2()).domain([1,10]);return t.copy=()=>jy(t,sN()).base(t.base()),uo.apply(t,arguments),t}function GO(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function zO(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function kM(t){var e=1,n=t(GO(e),zO(e));return n.constant=function(i){return arguments.length?t(GO(e=+i),zO(e)):e},kh(n)}function aN(){var t=kM(g2());return t.copy=function(){return jy(t,aN()).constant(t.constant())},uo.apply(t,arguments)}function VO(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function BQ(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function IQ(t){return t<0?-t*t:t*t}function NM(t){var e=t(fs,fs),n=1;function i(){return n===1?t(fs,fs):n===.5?t(BQ,IQ):t(VO(n),VO(1/n))}return e.exponent=function(r){return arguments.length?(n=+r,i()):n},kh(e)}function BM(){var t=NM(g2());return t.copy=function(){return jy(t,BM()).exponent(t.exponent())},uo.apply(t,arguments),t}function HQ(){return BM.apply(null,arguments).exponent(.5)}function UO(t){return Math.sign(t)*t*t}function GQ(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function oN(){var t=PM(),e=[0,1],n=!1,i;function r(s){var a=GQ(t(s));return isNaN(a)?i:n?Math.round(a):a}return r.invert=function(s){return t.invert(UO(s))},r.domain=function(s){return arguments.length?(t.domain(s),r):t.domain()},r.range=function(s){return arguments.length?(t.range((e=Array.from(s,nS)).map(UO)),r):e.slice()},r.rangeRound=function(s){return r.range(s).round(!0)},r.round=function(s){return arguments.length?(n=!!s,r):n},r.clamp=function(s){return arguments.length?(t.clamp(s),r):t.clamp()},r.unknown=function(s){return arguments.length?(i=s,r):i},r.copy=function(){return oN(t.domain(),e).round(n).clamp(t.clamp()).unknown(i)},uo.apply(r,arguments),kh(r)}function lN(){var t=[],e=[],n=[],i;function r(){var a=0,o=Math.max(1,e.length);for(n=new Array(o-1);++a<o;)n[a-1]=jZ(t,a/o);return s}function s(a){return a==null||isNaN(a=+a)?i:e[Vy(n,a)]}return s.invertExtent=function(a){var o=e.indexOf(a);return o<0?[NaN,NaN]:[o>0?n[o-1]:t[0],o<n.length?n[o]:t[t.length-1]]},s.domain=function(a){if(!arguments.length)return t.slice();t=[];for(let o of a)o!=null&&!isNaN(o=+o)&&t.push(o);return t.sort(Eh),r()},s.range=function(a){return arguments.length?(e=Array.from(a),r()):e.slice()},s.unknown=function(a){return arguments.length?(i=a,s):i},s.quantiles=function(){return n.slice()},s.copy=function(){return lN().domain(t).range(e).unknown(i)},uo.apply(s,arguments)}function cN(){var t=0,e=1,n=1,i=[.5],r=[0,1],s;function a(l){return l!=null&&l<=l?r[Vy(i,l,0,n)]:s}function o(){var l=-1;for(i=new Array(n);++l<n;)i[l]=((l+1)*e-(l-n)*t)/(n+1);return a}return a.domain=function(l){return arguments.length?([t,e]=l,t=+t,e=+e,o()):[t,e]},a.range=function(l){return arguments.length?(n=(r=Array.from(l)).length-1,o()):r.slice()},a.invertExtent=function(l){var u=r.indexOf(l);return u<0?[NaN,NaN]:u<1?[t,i[0]]:u>=n?[i[n-1],e]:[i[u-1],i[u]]},a.unknown=function(l){return arguments.length&&(s=l),a},a.thresholds=function(){return i.slice()},a.copy=function(){return cN().domain([t,e]).range(r).unknown(s)},uo.apply(kh(a),arguments)}function uN(){var t=[.5],e=[0,1],n,i=1;function r(s){return s!=null&&s<=s?e[Vy(t,s,0,i)]:n}return r.domain=function(s){return arguments.length?(t=Array.from(s),i=Math.min(t.length,e.length-1),r):t.slice()},r.range=function(s){return arguments.length?(e=Array.from(s),i=Math.min(t.length,e.length-1),r):e.slice()},r.invertExtent=function(s){var a=e.indexOf(s);return[t[a-1],t[a]]},r.unknown=function(s){return arguments.length?(n=s,r):n},r.copy=function(){return uN().domain(t).range(e).unknown(n)},uo.apply(r,arguments)}const yE=new Date,CE=new Date;function er(t,e,n,i){function r(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return r.floor=s=>(t(s=new Date(+s)),s),r.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),r.round=s=>{const a=r(s),o=r.ceil(s);return s-a<o-s?a:o},r.offset=(s,a)=>(e(s=new Date(+s),a==null?1:Math.floor(a)),s),r.range=(s,a,o)=>{const l=[];if(s=r.ceil(s),o=o==null?1:Math.floor(o),!(s<a)||!(o>0))return l;let u;do l.push(u=new Date(+s)),e(s,o),t(s);while(u<s&&s<a);return l},r.filter=s=>er(a=>{if(a>=a)for(;t(a),!s(a);)a.setTime(a-1)},(a,o)=>{if(a>=a)if(o<0)for(;++o<=0;)for(;e(a,-1),!s(a););else for(;--o>=0;)for(;e(a,1),!s(a););}),n&&(r.count=(s,a)=>(yE.setTime(+s),CE.setTime(+a),t(yE),t(CE),Math.floor(n(yE,CE))),r.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?r.filter(i?a=>i(a)%s===0:a=>r.count(0,a)%s===0):r)),r}const rS=er(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);rS.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?er(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):rS);rS.range;const Vc=1e3,eo=Vc*60,Uc=eo*60,Qc=Uc*24,IM=Qc*7,jO=Qc*30,bE=Qc*365,Xd=er(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Vc)},(t,e)=>(e-t)/Vc,t=>t.getUTCSeconds());Xd.range;const HM=er(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Vc)},(t,e)=>{t.setTime(+t+e*eo)},(t,e)=>(e-t)/eo,t=>t.getMinutes());HM.range;const GM=er(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*eo)},(t,e)=>(e-t)/eo,t=>t.getUTCMinutes());GM.range;const zM=er(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Vc-t.getMinutes()*eo)},(t,e)=>{t.setTime(+t+e*Uc)},(t,e)=>(e-t)/Uc,t=>t.getHours());zM.range;const VM=er(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*Uc)},(t,e)=>(e-t)/Uc,t=>t.getUTCHours());VM.range;const Wy=er(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*eo)/Qc,t=>t.getDate()-1);Wy.range;const p2=er(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Qc,t=>t.getUTCDate()-1);p2.range;const hN=er(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Qc,t=>Math.floor(t/Qc));hN.range;function Of(t){return er(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*eo)/IM)}const m2=Of(0),sS=Of(1),zQ=Of(2),VQ=Of(3),$p=Of(4),UQ=Of(5),jQ=Of(6);m2.range;sS.range;zQ.range;VQ.range;$p.range;UQ.range;jQ.range;function Lf(t){return er(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/IM)}const v2=Lf(0),aS=Lf(1),WQ=Lf(2),qQ=Lf(3),Zp=Lf(4),KQ=Lf(5),YQ=Lf(6);v2.range;aS.range;WQ.range;qQ.range;Zp.range;KQ.range;YQ.range;const UM=er(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());UM.range;const jM=er(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());jM.range;const Jc=er(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Jc.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:er(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Jc.range;const eu=er(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());eu.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:er(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});eu.range;function dN(t,e,n,i,r,s){const a=[[Xd,1,Vc],[Xd,5,5*Vc],[Xd,15,15*Vc],[Xd,30,30*Vc],[s,1,eo],[s,5,5*eo],[s,15,15*eo],[s,30,30*eo],[r,1,Uc],[r,3,3*Uc],[r,6,6*Uc],[r,12,12*Uc],[i,1,Qc],[i,2,2*Qc],[n,1,IM],[e,1,jO],[e,3,3*jO],[t,1,bE]];function o(u,h,g){const v=h<u;v&&([u,h]=[h,u]);const y=g&&typeof g.range=="function"?g:l(u,h,g),w=y?y.range(u,+h+1):[];return v?w.reverse():w}function l(u,h,g){const v=Math.abs(h-u)/g,y=EM(([,,x])=>x).right(a,v);if(y===a.length)return t.every(SR(u/bE,h/bE,g));if(y===0)return rS.every(Math.max(SR(u,h,g),1));const[w,S]=a[v/a[y-1][2]<a[y][2]/v?y-1:y];return w.every(S)}return[o,l]}const[XQ,$Q]=dN(eu,jM,v2,hN,VM,GM),[ZQ,QQ]=dN(Jc,UM,m2,Wy,zM,HM);function wE(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function SE(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function l0(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function JQ(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,s=t.days,a=t.shortDays,o=t.months,l=t.shortMonths,u=c0(r),h=u0(r),g=c0(s),v=u0(s),y=c0(a),w=u0(a),S=c0(o),x=u0(o),T=c0(l),_=u0(l),M={a:K,A:Q,b:oe,B:le,c:null,d:$O,e:$O,f:SJ,g:OJ,G:FJ,H:CJ,I:bJ,j:wJ,L:fN,m:xJ,M:AJ,p:V,q:Z,Q:JO,s:e6,S:EJ,u:TJ,U:RJ,V:DJ,w:MJ,W:_J,x:null,X:null,y:PJ,Y:LJ,Z:kJ,"%":QO},F={a:ae,A:Ee,b:Pe,B:Ie,c:null,d:ZO,e:ZO,f:HJ,g:XJ,G:ZJ,H:NJ,I:BJ,j:IJ,L:pN,m:GJ,M:zJ,p:ze,q:Ot,Q:JO,s:e6,S:VJ,u:UJ,U:jJ,V:WJ,w:qJ,W:KJ,x:null,X:null,y:YJ,Y:$J,Z:QJ,"%":QO},L={a:W,A:j,b:X,B:ne,c:$,d:YO,e:YO,f:pJ,g:KO,G:qO,H:XO,I:XO,j:hJ,L:gJ,m:uJ,M:dJ,p:U,q:cJ,Q:vJ,s:yJ,S:fJ,u:rJ,U:sJ,V:aJ,w:iJ,W:oJ,x:q,X:z,y:KO,Y:qO,Z:lJ,"%":mJ};M.x=k(n,M),M.X=k(i,M),M.c=k(e,M),F.x=k(n,F),F.X=k(i,F),F.c=k(e,F);function k(me,Be){return function(Je){var be=[],wt=-1,nt=0,jt=me.length,$t,Ke,Lt;for(Je instanceof Date||(Je=new Date(+Je));++wt<jt;)me.charCodeAt(wt)===37&&(be.push(me.slice(nt,wt)),(Ke=WO[$t=me.charAt(++wt)])!=null?$t=me.charAt(++wt):Ke=$t==="e"?" ":"0",(Lt=Be[$t])&&($t=Lt(Je,Ke)),be.push($t),nt=wt+1);return be.push(me.slice(nt,wt)),be.join("")}}function B(me,Be){return function(Je){var be=l0(1900,void 0,1),wt=H(be,me,Je+="",0),nt,jt;if(wt!=Je.length)return null;if("Q"in be)return new Date(be.Q);if("s"in be)return new Date(be.s*1e3+("L"in be?be.L:0));if(Be&&!("Z"in be)&&(be.Z=0),"p"in be&&(be.H=be.H%12+be.p*12),be.m===void 0&&(be.m="q"in be?be.q:0),"V"in be){if(be.V<1||be.V>53)return null;"w"in be||(be.w=1),"Z"in be?(nt=SE(l0(be.y,0,1)),jt=nt.getUTCDay(),nt=jt>4||jt===0?aS.ceil(nt):aS(nt),nt=p2.offset(nt,(be.V-1)*7),be.y=nt.getUTCFullYear(),be.m=nt.getUTCMonth(),be.d=nt.getUTCDate()+(be.w+6)%7):(nt=wE(l0(be.y,0,1)),jt=nt.getDay(),nt=jt>4||jt===0?sS.ceil(nt):sS(nt),nt=Wy.offset(nt,(be.V-1)*7),be.y=nt.getFullYear(),be.m=nt.getMonth(),be.d=nt.getDate()+(be.w+6)%7)}else("W"in be||"U"in be)&&("w"in be||(be.w="u"in be?be.u%7:"W"in be?1:0),jt="Z"in be?SE(l0(be.y,0,1)).getUTCDay():wE(l0(be.y,0,1)).getDay(),be.m=0,be.d="W"in be?(be.w+6)%7+be.W*7-(jt+5)%7:be.w+be.U*7-(jt+6)%7);return"Z"in be?(be.H+=be.Z/100|0,be.M+=be.Z%100,SE(be)):wE(be)}}function H(me,Be,Je,be){for(var wt=0,nt=Be.length,jt=Je.length,$t,Ke;wt<nt;){if(be>=jt)return-1;if($t=Be.charCodeAt(wt++),$t===37){if($t=Be.charAt(wt++),Ke=L[$t in WO?Be.charAt(wt++):$t],!Ke||(be=Ke(me,Je,be))<0)return-1}else if($t!=Je.charCodeAt(be++))return-1}return be}function U(me,Be,Je){var be=u.exec(Be.slice(Je));return be?(me.p=h.get(be[0].toLowerCase()),Je+be[0].length):-1}function W(me,Be,Je){var be=y.exec(Be.slice(Je));return be?(me.w=w.get(be[0].toLowerCase()),Je+be[0].length):-1}function j(me,Be,Je){var be=g.exec(Be.slice(Je));return be?(me.w=v.get(be[0].toLowerCase()),Je+be[0].length):-1}function X(me,Be,Je){var be=T.exec(Be.slice(Je));return be?(me.m=_.get(be[0].toLowerCase()),Je+be[0].length):-1}function ne(me,Be,Je){var be=S.exec(Be.slice(Je));return be?(me.m=x.get(be[0].toLowerCase()),Je+be[0].length):-1}function $(me,Be,Je){return H(me,e,Be,Je)}function q(me,Be,Je){return H(me,n,Be,Je)}function z(me,Be,Je){return H(me,i,Be,Je)}function K(me){return a[me.getDay()]}function Q(me){return s[me.getDay()]}function oe(me){return l[me.getMonth()]}function le(me){return o[me.getMonth()]}function V(me){return r[+(me.getHours()>=12)]}function Z(me){return 1+~~(me.getMonth()/3)}function ae(me){return a[me.getUTCDay()]}function Ee(me){return s[me.getUTCDay()]}function Pe(me){return l[me.getUTCMonth()]}function Ie(me){return o[me.getUTCMonth()]}function ze(me){return r[+(me.getUTCHours()>=12)]}function Ot(me){return 1+~~(me.getUTCMonth()/3)}return{format:function(me){var Be=k(me+="",M);return Be.toString=function(){return me},Be},parse:function(me){var Be=B(me+="",!1);return Be.toString=function(){return me},Be},utcFormat:function(me){var Be=k(me+="",F);return Be.toString=function(){return me},Be},utcParse:function(me){var Be=B(me+="",!0);return Be.toString=function(){return me},Be}}}var WO={"-":"",_:" ",0:"0"},mr=/^\s*\d+/,eJ=/^%/,tJ=/[\\^$*+?|[\]().{}]/g;function Xt(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(e)+r:r)}function nJ(t){return t.replace(tJ,"\\$&")}function c0(t){return new RegExp("^(?:"+t.map(nJ).join("|")+")","i")}function u0(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function iJ(t,e,n){var i=mr.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function rJ(t,e,n){var i=mr.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function sJ(t,e,n){var i=mr.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function aJ(t,e,n){var i=mr.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function oJ(t,e,n){var i=mr.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function qO(t,e,n){var i=mr.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function KO(t,e,n){var i=mr.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function lJ(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function cJ(t,e,n){var i=mr.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function uJ(t,e,n){var i=mr.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function YO(t,e,n){var i=mr.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function hJ(t,e,n){var i=mr.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function XO(t,e,n){var i=mr.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function dJ(t,e,n){var i=mr.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function fJ(t,e,n){var i=mr.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function gJ(t,e,n){var i=mr.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function pJ(t,e,n){var i=mr.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function mJ(t,e,n){var i=eJ.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function vJ(t,e,n){var i=mr.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function yJ(t,e,n){var i=mr.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function $O(t,e){return Xt(t.getDate(),e,2)}function CJ(t,e){return Xt(t.getHours(),e,2)}function bJ(t,e){return Xt(t.getHours()%12||12,e,2)}function wJ(t,e){return Xt(1+Wy.count(Jc(t),t),e,3)}function fN(t,e){return Xt(t.getMilliseconds(),e,3)}function SJ(t,e){return fN(t,e)+"000"}function xJ(t,e){return Xt(t.getMonth()+1,e,2)}function AJ(t,e){return Xt(t.getMinutes(),e,2)}function EJ(t,e){return Xt(t.getSeconds(),e,2)}function TJ(t){var e=t.getDay();return e===0?7:e}function RJ(t,e){return Xt(m2.count(Jc(t)-1,t),e,2)}function gN(t){var e=t.getDay();return e>=4||e===0?$p(t):$p.ceil(t)}function DJ(t,e){return t=gN(t),Xt($p.count(Jc(t),t)+(Jc(t).getDay()===4),e,2)}function MJ(t){return t.getDay()}function _J(t,e){return Xt(sS.count(Jc(t)-1,t),e,2)}function PJ(t,e){return Xt(t.getFullYear()%100,e,2)}function OJ(t,e){return t=gN(t),Xt(t.getFullYear()%100,e,2)}function LJ(t,e){return Xt(t.getFullYear()%1e4,e,4)}function FJ(t,e){var n=t.getDay();return t=n>=4||n===0?$p(t):$p.ceil(t),Xt(t.getFullYear()%1e4,e,4)}function kJ(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Xt(e/60|0,"0",2)+Xt(e%60,"0",2)}function ZO(t,e){return Xt(t.getUTCDate(),e,2)}function NJ(t,e){return Xt(t.getUTCHours(),e,2)}function BJ(t,e){return Xt(t.getUTCHours()%12||12,e,2)}function IJ(t,e){return Xt(1+p2.count(eu(t),t),e,3)}function pN(t,e){return Xt(t.getUTCMilliseconds(),e,3)}function HJ(t,e){return pN(t,e)+"000"}function GJ(t,e){return Xt(t.getUTCMonth()+1,e,2)}function zJ(t,e){return Xt(t.getUTCMinutes(),e,2)}function VJ(t,e){return Xt(t.getUTCSeconds(),e,2)}function UJ(t){var e=t.getUTCDay();return e===0?7:e}function jJ(t,e){return Xt(v2.count(eu(t)-1,t),e,2)}function mN(t){var e=t.getUTCDay();return e>=4||e===0?Zp(t):Zp.ceil(t)}function WJ(t,e){return t=mN(t),Xt(Zp.count(eu(t),t)+(eu(t).getUTCDay()===4),e,2)}function qJ(t){return t.getUTCDay()}function KJ(t,e){return Xt(aS.count(eu(t)-1,t),e,2)}function YJ(t,e){return Xt(t.getUTCFullYear()%100,e,2)}function XJ(t,e){return t=mN(t),Xt(t.getUTCFullYear()%100,e,2)}function $J(t,e){return Xt(t.getUTCFullYear()%1e4,e,4)}function ZJ(t,e){var n=t.getUTCDay();return t=n>=4||n===0?Zp(t):Zp.ceil(t),Xt(t.getUTCFullYear()%1e4,e,4)}function QJ(){return"+0000"}function QO(){return"%"}function JO(t){return+t}function e6(t){return Math.floor(+t/1e3)}var op,vN,yN;JJ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function JJ(t){return op=JQ(t),vN=op.format,op.parse,yN=op.utcFormat,op.utcParse,op}function eee(t){return new Date(t)}function tee(t){return t instanceof Date?+t:+new Date(+t)}function WM(t,e,n,i,r,s,a,o,l,u){var h=PM(),g=h.invert,v=h.domain,y=u(".%L"),w=u(":%S"),S=u("%I:%M"),x=u("%I %p"),T=u("%a %d"),_=u("%b %d"),M=u("%B"),F=u("%Y");function L(k){return(l(k)<k?y:o(k)<k?w:a(k)<k?S:s(k)<k?x:i(k)<k?r(k)<k?T:_:n(k)<k?M:F)(k)}return h.invert=function(k){return new Date(g(k))},h.domain=function(k){return arguments.length?v(Array.from(k,tee)):v().map(eee)},h.ticks=function(k){var B=v();return t(B[0],B[B.length-1],k??10)},h.tickFormat=function(k,B){return B==null?L:u(B)},h.nice=function(k){var B=v();return(!k||typeof k.range!="function")&&(k=e(B[0],B[B.length-1],k??10)),k?v(rN(B,k)):h},h.copy=function(){return jy(h,WM(t,e,n,i,r,s,a,o,l,u))},h}function nee(){return uo.apply(WM(ZQ,QQ,Jc,UM,m2,Wy,zM,HM,Xd,vN).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function iee(){return uo.apply(WM(XQ,$Q,eu,jM,v2,p2,VM,GM,Xd,yN).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function y2(){var t=0,e=1,n,i,r,s,a=fs,o=!1,l;function u(g){return g==null||isNaN(g=+g)?l:a(r===0?.5:(g=(s(g)-n)*r,o?Math.max(0,Math.min(1,g)):g))}u.domain=function(g){return arguments.length?([t,e]=g,n=s(t=+t),i=s(e=+e),r=n===i?0:1/(i-n),u):[t,e]},u.clamp=function(g){return arguments.length?(o=!!g,u):o},u.interpolator=function(g){return arguments.length?(a=g,u):a};function h(g){return function(v){var y,w;return arguments.length?([y,w]=v,a=g(y,w),u):[a(0),a(1)]}}return u.range=h(om),u.rangeRound=h(_M),u.unknown=function(g){return arguments.length?(l=g,u):l},function(g){return s=g,n=g(t),i=g(e),r=n===i?0:1/(i-n),u}}function Nh(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function CN(){var t=kh(y2()(fs));return t.copy=function(){return Nh(t,CN())},lu.apply(t,arguments)}function bN(){var t=FM(y2()).domain([1,10]);return t.copy=function(){return Nh(t,bN()).base(t.base())},lu.apply(t,arguments)}function wN(){var t=kM(y2());return t.copy=function(){return Nh(t,wN()).constant(t.constant())},lu.apply(t,arguments)}function qM(){var t=NM(y2());return t.copy=function(){return Nh(t,qM()).exponent(t.exponent())},lu.apply(t,arguments)}function ree(){return qM.apply(null,arguments).exponent(.5)}function SN(){var t=[],e=fs;function n(i){if(i!=null&&!isNaN(i=+i))return e((Vy(t,i,1)-1)/(t.length-1))}return n.domain=function(i){if(!arguments.length)return t.slice();t=[];for(let r of i)r!=null&&!isNaN(r=+r)&&t.push(r);return t.sort(Eh),n},n.interpolator=function(i){return arguments.length?(e=i,n):e},n.range=function(){return t.map((i,r)=>e(r/(t.length-1)))},n.quantiles=function(i){return Array.from({length:i+1},(r,s)=>UZ(t,s/i))},n.copy=function(){return SN(e).domain(t)},lu.apply(n,arguments)}function C2(){var t=0,e=.5,n=1,i=1,r,s,a,o,l,u=fs,h,g=!1,v;function y(S){return isNaN(S=+S)?v:(S=.5+((S=+h(S))-s)*(i*S<i*s?o:l),u(g?Math.max(0,Math.min(1,S)):S))}y.domain=function(S){return arguments.length?([t,e,n]=S,r=h(t=+t),s=h(e=+e),a=h(n=+n),o=r===s?0:.5/(s-r),l=s===a?0:.5/(a-s),i=s<r?-1:1,y):[t,e,n]},y.clamp=function(S){return arguments.length?(g=!!S,y):g},y.interpolator=function(S){return arguments.length?(u=S,y):u};function w(S){return function(x){var T,_,M;return arguments.length?([T,_,M]=x,u=mQ(S,[T,_,M]),y):[u(0),u(.5),u(1)]}}return y.range=w(om),y.rangeRound=w(_M),y.unknown=function(S){return arguments.length?(v=S,y):v},function(S){return h=S,r=S(t),s=S(e),a=S(n),o=r===s?0:.5/(s-r),l=s===a?0:.5/(a-s),i=s<r?-1:1,y}}function xN(){var t=kh(C2()(fs));return t.copy=function(){return Nh(t,xN())},lu.apply(t,arguments)}function AN(){var t=FM(C2()).domain([.1,1,10]);return t.copy=function(){return Nh(t,AN()).base(t.base())},lu.apply(t,arguments)}function EN(){var t=kM(C2());return t.copy=function(){return Nh(t,EN()).constant(t.constant())},lu.apply(t,arguments)}function KM(){var t=NM(C2());return t.copy=function(){return Nh(t,KM()).exponent(t.exponent())},lu.apply(t,arguments)}function see(){return KM.apply(null,arguments).exponent(.5)}const R0=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:RM,scaleDiverging:xN,scaleDivergingLog:AN,scaleDivergingPow:KM,scaleDivergingSqrt:see,scaleDivergingSymlog:EN,scaleIdentity:iN,scaleImplicit:xR,scaleLinear:nN,scaleLog:sN,scaleOrdinal:TM,scalePoint:qZ,scalePow:BM,scaleQuantile:lN,scaleQuantize:cN,scaleRadial:oN,scaleSequential:CN,scaleSequentialLog:bN,scaleSequentialPow:qM,scaleSequentialQuantile:SN,scaleSequentialSqrt:ree,scaleSequentialSymlog:wN,scaleSqrt:HQ,scaleSymlog:aN,scaleThreshold:uN,scaleTime:nee,scaleUtc:iee,tickFormat:tN},Symbol.toStringTag,{value:"Module"}));var Bh=t=>t.chartData,YM=pe([Bh],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),TN=(t,e,n,i)=>i?YM(t):Bh(t);function Cf(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(qs(e)&&qs(n))return!0}return!1}function t6(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function RN(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,i]=t,r,s;if(qs(n))r=n;else if(typeof n=="function")return;if(qs(i))s=i;else if(typeof i=="function")return;var a=[r,s];if(Cf(a))return a}}function aee(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var i=t(e,n);if(Cf(i))return t6(i,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[r,s]=t,a,o;if(r==="auto")e!=null&&(a=Math.min(...e));else if(At(r))a=r;else if(typeof r=="function")try{e!=null&&(a=r(e?.[0]))}catch{}else if(typeof r=="string"&&HP.test(r)){var l=HP.exec(r);if(l==null||e==null)a=void 0;else{var u=+l[1];a=e[0]-u}}else a=e?.[0];if(s==="auto")e!=null&&(o=Math.max(...e));else if(At(s))o=s;else if(typeof s=="function")try{e!=null&&(o=s(e?.[1]))}catch{}else if(typeof s=="string"&&GP.test(s)){var h=GP.exec(s);if(h==null||e==null)o=void 0;else{var g=+h[1];o=e[1]+g}}else o=e?.[1];var v=[a,o];if(Cf(v))return e==null?v:t6(v,e,n)}}}var lm=1e9,oee={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},$M,Jn=!0,ao="[DecimalError] ",cf=ao+"Invalid argument: ",XM=ao+"Exponent out of range: ",cm=Math.floor,jd=Math.pow,lee=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ia,fr=1e7,Wn=7,DN=9007199254740991,oS=cm(DN/Wn),Ue={};Ue.absoluteValue=Ue.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};Ue.comparedTo=Ue.cmp=function(t){var e,n,i,r,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(i=s.d.length,r=t.d.length,e=0,n=i<r?i:r;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return i===r?0:i>r^s.s<0?1:-1};Ue.decimalPlaces=Ue.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Wn;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};Ue.dividedBy=Ue.div=function(t){return qc(this,new this.constructor(t))};Ue.dividedToIntegerBy=Ue.idiv=function(t){var e=this,n=e.constructor;return bn(qc(e,new n(t),0,1),n.precision)};Ue.equals=Ue.eq=function(t){return!this.cmp(t)};Ue.exponent=function(){return ji(this)};Ue.greaterThan=Ue.gt=function(t){return this.cmp(t)>0};Ue.greaterThanOrEqualTo=Ue.gte=function(t){return this.cmp(t)>=0};Ue.isInteger=Ue.isint=function(){return this.e>this.d.length-2};Ue.isNegative=Ue.isneg=function(){return this.s<0};Ue.isPositive=Ue.ispos=function(){return this.s>0};Ue.isZero=function(){return this.s===0};Ue.lessThan=Ue.lt=function(t){return this.cmp(t)<0};Ue.lessThanOrEqualTo=Ue.lte=function(t){return this.cmp(t)<1};Ue.logarithm=Ue.log=function(t){var e,n=this,i=n.constructor,r=i.precision,s=r+5;if(t===void 0)t=new i(10);else if(t=new i(t),t.s<1||t.eq(ia))throw Error(ao+"NaN");if(n.s<1)throw Error(ao+(n.s?"NaN":"-Infinity"));return n.eq(ia)?new i(0):(Jn=!1,e=qc(dy(n,s),dy(t,s),s),Jn=!0,bn(e,r))};Ue.minus=Ue.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?PN(e,t):MN(e,(t.s=-t.s,t))};Ue.modulo=Ue.mod=function(t){var e,n=this,i=n.constructor,r=i.precision;if(t=new i(t),!t.s)throw Error(ao+"NaN");return n.s?(Jn=!1,e=qc(n,t,0,1).times(t),Jn=!0,n.minus(e)):bn(new i(n),r)};Ue.naturalExponential=Ue.exp=function(){return _N(this)};Ue.naturalLogarithm=Ue.ln=function(){return dy(this)};Ue.negated=Ue.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};Ue.plus=Ue.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?MN(e,t):PN(e,(t.s=-t.s,t))};Ue.precision=Ue.sd=function(t){var e,n,i,r=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(cf+t);if(e=ji(r)+1,i=r.d.length-1,n=i*Wn+1,i=r.d[i],i){for(;i%10==0;i/=10)n--;for(i=r.d[0];i>=10;i/=10)n++}return t&&e>n?e:n};Ue.squareRoot=Ue.sqrt=function(){var t,e,n,i,r,s,a,o=this,l=o.constructor;if(o.s<1){if(!o.s)return new l(0);throw Error(ao+"NaN")}for(t=ji(o),Jn=!1,r=Math.sqrt(+o),r==0||r==1/0?(e=Gl(o.d),(e.length+t)%2==0&&(e+="0"),r=Math.sqrt(e),t=cm((t+1)/2)-(t<0||t%2),r==1/0?e="5e"+t:(e=r.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),i=new l(e)):i=new l(r.toString()),n=l.precision,r=a=n+3;;)if(s=i,i=s.plus(qc(o,s,a+2)).times(.5),Gl(s.d).slice(0,a)===(e=Gl(i.d)).slice(0,a)){if(e=e.slice(a-3,a+1),r==a&&e=="4999"){if(bn(s,n+1,0),s.times(s).eq(o)){i=s;break}}else if(e!="9999")break;a+=4}return Jn=!0,bn(i,n)};Ue.times=Ue.mul=function(t){var e,n,i,r,s,a,o,l,u,h=this,g=h.constructor,v=h.d,y=(t=new g(t)).d;if(!h.s||!t.s)return new g(0);for(t.s*=h.s,n=h.e+t.e,l=v.length,u=y.length,l<u&&(s=v,v=y,y=s,a=l,l=u,u=a),s=[],a=l+u,i=a;i--;)s.push(0);for(i=u;--i>=0;){for(e=0,r=l+i;r>i;)o=s[r]+y[i]*v[r-i-1]+e,s[r--]=o%fr|0,e=o/fr|0;s[r]=(s[r]+e)%fr|0}for(;!s[--a];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,Jn?bn(t,g.precision):t};Ue.toDecimalPlaces=Ue.todp=function(t,e){var n=this,i=n.constructor;return n=new i(n),t===void 0?n:(Yl(t,0,lm),e===void 0?e=i.rounding:Yl(e,0,8),bn(n,t+ji(n)+1,e))};Ue.toExponential=function(t,e){var n,i=this,r=i.constructor;return t===void 0?n=bf(i,!0):(Yl(t,0,lm),e===void 0?e=r.rounding:Yl(e,0,8),i=bn(new r(i),t+1,e),n=bf(i,!0,t+1)),n};Ue.toFixed=function(t,e){var n,i,r=this,s=r.constructor;return t===void 0?bf(r):(Yl(t,0,lm),e===void 0?e=s.rounding:Yl(e,0,8),i=bn(new s(r),t+ji(r)+1,e),n=bf(i.abs(),!1,t+ji(i)+1),r.isneg()&&!r.isZero()?"-"+n:n)};Ue.toInteger=Ue.toint=function(){var t=this,e=t.constructor;return bn(new e(t),ji(t)+1,e.rounding)};Ue.toNumber=function(){return+this};Ue.toPower=Ue.pow=function(t){var e,n,i,r,s,a,o=this,l=o.constructor,u=12,h=+(t=new l(t));if(!t.s)return new l(ia);if(o=new l(o),!o.s){if(t.s<1)throw Error(ao+"Infinity");return o}if(o.eq(ia))return o;if(i=l.precision,t.eq(ia))return bn(o,i);if(e=t.e,n=t.d.length-1,a=e>=n,s=o.s,a){if((n=h<0?-h:h)<=DN){for(r=new l(ia),e=Math.ceil(i/Wn+4),Jn=!1;n%2&&(r=r.times(o),i6(r.d,e)),n=cm(n/2),n!==0;)o=o.times(o),i6(o.d,e);return Jn=!0,t.s<0?new l(ia).div(r):bn(r,i)}}else if(s<0)throw Error(ao+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,o.s=1,Jn=!1,r=t.times(dy(o,i+u)),Jn=!0,r=_N(r),r.s=s,r};Ue.toPrecision=function(t,e){var n,i,r=this,s=r.constructor;return t===void 0?(n=ji(r),i=bf(r,n<=s.toExpNeg||n>=s.toExpPos)):(Yl(t,1,lm),e===void 0?e=s.rounding:Yl(e,0,8),r=bn(new s(r),t,e),n=ji(r),i=bf(r,t<=n||n<=s.toExpNeg,t)),i};Ue.toSignificantDigits=Ue.tosd=function(t,e){var n=this,i=n.constructor;return t===void 0?(t=i.precision,e=i.rounding):(Yl(t,1,lm),e===void 0?e=i.rounding:Yl(e,0,8)),bn(new i(n),t,e)};Ue.toString=Ue.valueOf=Ue.val=Ue.toJSON=Ue[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=ji(t),n=t.constructor;return bf(t,e<=n.toExpNeg||e>=n.toExpPos)};function MN(t,e){var n,i,r,s,a,o,l,u,h=t.constructor,g=h.precision;if(!t.s||!e.s)return e.s||(e=new h(t)),Jn?bn(e,g):e;if(l=t.d,u=e.d,a=t.e,r=e.e,l=l.slice(),s=a-r,s){for(s<0?(i=l,s=-s,o=u.length):(i=u,r=a,o=l.length),a=Math.ceil(g/Wn),o=a>o?a+1:o+1,s>o&&(s=o,i.length=1),i.reverse();s--;)i.push(0);i.reverse()}for(o=l.length,s=u.length,o-s<0&&(s=o,i=u,u=l,l=i),n=0;s;)n=(l[--s]=l[s]+u[s]+n)/fr|0,l[s]%=fr;for(n&&(l.unshift(n),++r),o=l.length;l[--o]==0;)l.pop();return e.d=l,e.e=r,Jn?bn(e,g):e}function Yl(t,e,n){if(t!==~~t||t<e||t>n)throw Error(cf+t)}function Gl(t){var e,n,i,r=t.length-1,s="",a=t[0];if(r>0){for(s+=a,e=1;e<r;e++)i=t[e]+"",n=Wn-i.length,n&&(s+=yh(n)),s+=i;a=t[e],i=a+"",n=Wn-i.length,n&&(s+=yh(n))}else if(a===0)return"0";for(;a%10===0;)a/=10;return s+a}var qc=(function(){function t(i,r){var s,a=0,o=i.length;for(i=i.slice();o--;)s=i[o]*r+a,i[o]=s%fr|0,a=s/fr|0;return a&&i.unshift(a),i}function e(i,r,s,a){var o,l;if(s!=a)l=s>a?1:-1;else for(o=l=0;o<s;o++)if(i[o]!=r[o]){l=i[o]>r[o]?1:-1;break}return l}function n(i,r,s){for(var a=0;s--;)i[s]-=a,a=i[s]<r[s]?1:0,i[s]=a*fr+i[s]-r[s];for(;!i[0]&&i.length>1;)i.shift()}return function(i,r,s,a){var o,l,u,h,g,v,y,w,S,x,T,_,M,F,L,k,B,H,U=i.constructor,W=i.s==r.s?1:-1,j=i.d,X=r.d;if(!i.s)return new U(i);if(!r.s)throw Error(ao+"Division by zero");for(l=i.e-r.e,B=X.length,L=j.length,y=new U(W),w=y.d=[],u=0;X[u]==(j[u]||0);)++u;if(X[u]>(j[u]||0)&&--l,s==null?_=s=U.precision:a?_=s+(ji(i)-ji(r))+1:_=s,_<0)return new U(0);if(_=_/Wn+2|0,u=0,B==1)for(h=0,X=X[0],_++;(u<L||h)&&_--;u++)M=h*fr+(j[u]||0),w[u]=M/X|0,h=M%X|0;else{for(h=fr/(X[0]+1)|0,h>1&&(X=t(X,h),j=t(j,h),B=X.length,L=j.length),F=B,S=j.slice(0,B),x=S.length;x<B;)S[x++]=0;H=X.slice(),H.unshift(0),k=X[0],X[1]>=fr/2&&++k;do h=0,o=e(X,S,B,x),o<0?(T=S[0],B!=x&&(T=T*fr+(S[1]||0)),h=T/k|0,h>1?(h>=fr&&(h=fr-1),g=t(X,h),v=g.length,x=S.length,o=e(g,S,v,x),o==1&&(h--,n(g,B<v?H:X,v))):(h==0&&(o=h=1),g=X.slice()),v=g.length,v<x&&g.unshift(0),n(S,g,x),o==-1&&(x=S.length,o=e(X,S,B,x),o<1&&(h++,n(S,B<x?H:X,x))),x=S.length):o===0&&(h++,S=[0]),w[u++]=h,o&&S[0]?S[x++]=j[F]||0:(S=[j[F]],x=1);while((F++<L||S[0]!==void 0)&&_--)}return w[0]||w.shift(),y.e=l,bn(y,a?s+ji(y)+1:s)}})();function _N(t,e){var n,i,r,s,a,o,l=0,u=0,h=t.constructor,g=h.precision;if(ji(t)>16)throw Error(XM+ji(t));if(!t.s)return new h(ia);for(Jn=!1,o=g,a=new h(.03125);t.abs().gte(.1);)t=t.times(a),u+=5;for(i=Math.log(jd(2,u))/Math.LN10*2+5|0,o+=i,n=r=s=new h(ia),h.precision=o;;){if(r=bn(r.times(t),o),n=n.times(++l),a=s.plus(qc(r,n,o)),Gl(a.d).slice(0,o)===Gl(s.d).slice(0,o)){for(;u--;)s=bn(s.times(s),o);return h.precision=g,e==null?(Jn=!0,bn(s,g)):s}s=a}}function ji(t){for(var e=t.e*Wn,n=t.d[0];n>=10;n/=10)e++;return e}function xE(t,e,n){if(e>t.LN10.sd())throw Jn=!0,n&&(t.precision=n),Error(ao+"LN10 precision limit exceeded");return bn(new t(t.LN10),e)}function yh(t){for(var e="";t--;)e+="0";return e}function dy(t,e){var n,i,r,s,a,o,l,u,h,g=1,v=10,y=t,w=y.d,S=y.constructor,x=S.precision;if(y.s<1)throw Error(ao+(y.s?"NaN":"-Infinity"));if(y.eq(ia))return new S(0);if(e==null?(Jn=!1,u=x):u=e,y.eq(10))return e==null&&(Jn=!0),xE(S,u);if(u+=v,S.precision=u,n=Gl(w),i=n.charAt(0),s=ji(y),Math.abs(s)<15e14){for(;i<7&&i!=1||i==1&&n.charAt(1)>3;)y=y.times(t),n=Gl(y.d),i=n.charAt(0),g++;s=ji(y),i>1?(y=new S("0."+n),s++):y=new S(i+"."+n.slice(1))}else return l=xE(S,u+2,x).times(s+""),y=dy(new S(i+"."+n.slice(1)),u-v).plus(l),S.precision=x,e==null?(Jn=!0,bn(y,x)):y;for(o=a=y=qc(y.minus(ia),y.plus(ia),u),h=bn(y.times(y),u),r=3;;){if(a=bn(a.times(h),u),l=o.plus(qc(a,new S(r),u)),Gl(l.d).slice(0,u)===Gl(o.d).slice(0,u))return o=o.times(2),s!==0&&(o=o.plus(xE(S,u+2,x).times(s+""))),o=qc(o,new S(g),u),S.precision=x,e==null?(Jn=!0,bn(o,x)):o;o=l,r+=2}}function n6(t,e){var n,i,r;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(n<0&&(n=i),n+=+e.slice(i+1),e=e.substring(0,i)):n<0&&(n=e.length),i=0;e.charCodeAt(i)===48;)++i;for(r=e.length;e.charCodeAt(r-1)===48;)--r;if(e=e.slice(i,r),e){if(r-=i,n=n-i-1,t.e=cm(n/Wn),t.d=[],i=(n+1)%Wn,n<0&&(i+=Wn),i<r){for(i&&t.d.push(+e.slice(0,i)),r-=Wn;i<r;)t.d.push(+e.slice(i,i+=Wn));e=e.slice(i),i=Wn-e.length}else i-=r;for(;i--;)e+="0";if(t.d.push(+e),Jn&&(t.e>oS||t.e<-oS))throw Error(XM+n)}else t.s=0,t.e=0,t.d=[0];return t}function bn(t,e,n){var i,r,s,a,o,l,u,h,g=t.d;for(a=1,s=g[0];s>=10;s/=10)a++;if(i=e-a,i<0)i+=Wn,r=e,u=g[h=0];else{if(h=Math.ceil((i+1)/Wn),s=g.length,h>=s)return t;for(u=s=g[h],a=1;s>=10;s/=10)a++;i%=Wn,r=i-Wn+a}if(n!==void 0&&(s=jd(10,a-r-1),o=u/s%10|0,l=e<0||g[h+1]!==void 0||u%s,l=n<4?(o||l)&&(n==0||n==(t.s<0?3:2)):o>5||o==5&&(n==4||l||n==6&&(i>0?r>0?u/jd(10,a-r):0:g[h-1])%10&1||n==(t.s<0?8:7))),e<1||!g[0])return l?(s=ji(t),g.length=1,e=e-s-1,g[0]=jd(10,(Wn-e%Wn)%Wn),t.e=cm(-e/Wn)||0):(g.length=1,g[0]=t.e=t.s=0),t;if(i==0?(g.length=h,s=1,h--):(g.length=h+1,s=jd(10,Wn-i),g[h]=r>0?(u/jd(10,a-r)%jd(10,r)|0)*s:0),l)for(;;)if(h==0){(g[0]+=s)==fr&&(g[0]=1,++t.e);break}else{if(g[h]+=s,g[h]!=fr)break;g[h--]=0,s=1}for(i=g.length;g[--i]===0;)g.pop();if(Jn&&(t.e>oS||t.e<-oS))throw Error(XM+ji(t));return t}function PN(t,e){var n,i,r,s,a,o,l,u,h,g,v=t.constructor,y=v.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new v(t),Jn?bn(e,y):e;if(l=t.d,g=e.d,i=e.e,u=t.e,l=l.slice(),a=u-i,a){for(h=a<0,h?(n=l,a=-a,o=g.length):(n=g,i=u,o=l.length),r=Math.max(Math.ceil(y/Wn),o)+2,a>r&&(a=r,n.length=1),n.reverse(),r=a;r--;)n.push(0);n.reverse()}else{for(r=l.length,o=g.length,h=r<o,h&&(o=r),r=0;r<o;r++)if(l[r]!=g[r]){h=l[r]<g[r];break}a=0}for(h&&(n=l,l=g,g=n,e.s=-e.s),o=l.length,r=g.length-o;r>0;--r)l[o++]=0;for(r=g.length;r>a;){if(l[--r]<g[r]){for(s=r;s&&l[--s]===0;)l[s]=fr-1;--l[s],l[r]+=fr}l[r]-=g[r]}for(;l[--o]===0;)l.pop();for(;l[0]===0;l.shift())--i;return l[0]?(e.d=l,e.e=i,Jn?bn(e,y):e):new v(0)}function bf(t,e,n){var i,r=ji(t),s=Gl(t.d),a=s.length;return e?(n&&(i=n-a)>0?s=s.charAt(0)+"."+s.slice(1)+yh(i):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(r<0?"e":"e+")+r):r<0?(s="0."+yh(-r-1)+s,n&&(i=n-a)>0&&(s+=yh(i))):r>=a?(s+=yh(r+1-a),n&&(i=n-r-1)>0&&(s=s+"."+yh(i))):((i=r+1)<a&&(s=s.slice(0,i)+"."+s.slice(i)),n&&(i=n-a)>0&&(r+1===a&&(s+="."),s+=yh(i))),t.s<0?"-"+s:s}function i6(t,e){if(t.length>e)return t.length=e,!0}function ON(t){var e,n,i;function r(s){var a=this;if(!(a instanceof r))return new r(s);if(a.constructor=r,s instanceof r){a.s=s.s,a.e=s.e,a.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(cf+s);if(s>0)a.s=1;else if(s<0)s=-s,a.s=-1;else{a.s=0,a.e=0,a.d=[0];return}if(s===~~s&&s<1e7){a.e=0,a.d=[s];return}return n6(a,s.toString())}else if(typeof s!="string")throw Error(cf+s);if(s.charCodeAt(0)===45?(s=s.slice(1),a.s=-1):a.s=1,lee.test(s))n6(a,s);else throw Error(cf+s)}if(r.prototype=Ue,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.clone=ON,r.config=r.set=cee,t===void 0&&(t={}),t)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<i.length;)t.hasOwnProperty(n=i[e++])||(t[n]=this[n]);return r.config(t),r}function cee(t){if(!t||typeof t!="object")throw Error(ao+"Object expected");var e,n,i,r=["precision",1,lm,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<r.length;e+=3)if((i=t[n=r[e]])!==void 0)if(cm(i)===i&&i>=r[e+1]&&i<=r[e+2])this[n]=i;else throw Error(cf+n+": "+i);if((i=t[n="LN10"])!==void 0)if(i==Math.LN10)this[n]=new this(i);else throw Error(cf+n+": "+i);return this}var $M=ON(oee);ia=new $M(1);const hn=$M;var uee=t=>t,LN={},FN=t=>t===LN,r6=t=>function e(){return arguments.length===0||arguments.length===1&&FN(arguments.length<=0?void 0:arguments[0])?e:t(...arguments)},kN=(t,e)=>t===1?e:r6(function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var s=i.filter(a=>a!==LN).length;return s>=t?e(...i):kN(t-s,r6(function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];var u=i.map(h=>FN(h)?o.shift():h);return e(...u,...o)}))}),b2=t=>kN(t.length,t),RR=(t,e)=>{for(var n=[],i=t;i<e;++i)n[i-t]=i;return n},hee=b2((t,e)=>Array.isArray(e)?e.map(t):Object.keys(e).map(n=>e[n]).map(t)),dee=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(!n.length)return uee;var r=n.reverse(),s=r[0],a=r.slice(1);return function(){return a.reduce((o,l)=>l(o),s(...arguments))}},DR=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),NN=t=>{var e=null,n=null;return function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e&&r.every((a,o)=>{var l;return a===((l=e)===null||l===void 0?void 0:l[o])})||(e=r,n=t(...r)),n}};function BN(t){var e;return t===0?e=1:e=Math.floor(new hn(t).abs().log(10).toNumber())+1,e}function IN(t,e,n){for(var i=new hn(t),r=0,s=[];i.lt(e)&&r<1e5;)s.push(i.toNumber()),i=i.add(n),r++;return s}b2((t,e,n)=>{var i=+t,r=+e;return i+n*(r-i)});b2((t,e,n)=>{var i=e-+t;return i=i||1/0,(n-t)/i});b2((t,e,n)=>{var i=e-+t;return i=i||1/0,Math.max(0,Math.min(1,(n-t)/i))});var HN=t=>{var[e,n]=t,[i,r]=[e,n];return e>n&&([i,r]=[n,e]),[i,r]},GN=(t,e,n)=>{if(t.lte(0))return new hn(0);var i=BN(t.toNumber()),r=new hn(10).pow(i),s=t.div(r),a=i!==1?.05:.1,o=new hn(Math.ceil(s.div(a).toNumber())).add(n).mul(a),l=o.mul(r);return e?new hn(l.toNumber()):new hn(Math.ceil(l.toNumber()))},fee=(t,e,n)=>{var i=new hn(1),r=new hn(t);if(!r.isint()&&n){var s=Math.abs(t);s<1?(i=new hn(10).pow(BN(t)-1),r=new hn(Math.floor(r.div(i).toNumber())).mul(i)):s>1&&(r=new hn(Math.floor(t)))}else t===0?r=new hn(Math.floor((e-1)/2)):n||(r=new hn(Math.floor(t)));var a=Math.floor((e-1)/2),o=dee(hee(l=>r.add(new hn(l-a).mul(i)).toNumber()),RR);return o(0,e)},zN=function(e,n,i,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(i-1)))return{step:new hn(0),tickMin:new hn(0),tickMax:new hn(0)};var a=GN(new hn(n).sub(e).div(i-1),r,s),o;e<=0&&n>=0?o=new hn(0):(o=new hn(e).add(n).div(2),o=o.sub(new hn(o).mod(a)));var l=Math.ceil(o.sub(e).div(a).toNumber()),u=Math.ceil(new hn(n).sub(o).div(a).toNumber()),h=l+u+1;return h>i?zN(e,n,i,r,s+1):(h<i&&(u=n>0?u+(i-h):u,l=n>0?l:l+(i-h)),{step:a,tickMin:o.sub(new hn(l).mul(a)),tickMax:o.add(new hn(u).mul(a))})};function gee(t){var[e,n]=t,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(i,2),[a,o]=HN([e,n]);if(a===-1/0||o===1/0){var l=o===1/0?[a,...RR(0,i-1).map(()=>1/0)]:[...RR(0,i-1).map(()=>-1/0),o];return e>n?DR(l):l}if(a===o)return fee(a,i,r);var{step:u,tickMin:h,tickMax:g}=zN(a,o,s,r,0),v=IN(h,g.add(new hn(.1).mul(u)),u);return e>n?DR(v):v}function pee(t,e){var[n,i]=t,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,a]=HN([n,i]);if(s===-1/0||a===1/0)return[n,i];if(s===a)return[s];var o=Math.max(e,2),l=GN(new hn(a).sub(s).div(o-1),r,0),u=[...IN(new hn(s),new hn(a),l),a];return r===!1&&(u=u.map(h=>Math.round(h))),n>i?DR(u):u}var mee=NN(gee),vee=NN(pee),yee=t=>t.rootProps.barCategoryGap,qy=t=>t.rootProps.stackOffset,ZM=t=>t.options.chartName,QM=t=>t.rootProps.syncId,VN=t=>t.rootProps.syncMethod,JM=t=>t.options.eventEmitter,Gc={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},ta={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},w2=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e},Cee={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Gc.angleAxisId,includeHidden:!1,name:void 0,reversed:Gc.reversed,scale:Gc.scale,tick:Gc.tick,tickCount:void 0,ticks:void 0,type:Gc.type,unit:void 0},bee={allowDataOverflow:ta.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ta.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ta.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ta.scale,tick:ta.tick,tickCount:ta.tickCount,ticks:void 0,type:ta.type,unit:void 0},wee={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Gc.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Gc.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Gc.scale,tick:Gc.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},See={allowDataOverflow:ta.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ta.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ta.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ta.scale,tick:ta.tick,tickCount:ta.tickCount,ticks:void 0,type:"category",unit:void 0},e_=(t,e)=>t.polarAxis.angleAxis[e]!=null?t.polarAxis.angleAxis[e]:t.layout.layoutType==="radial"?wee:Cee,t_=(t,e)=>t.polarAxis.radiusAxis[e]!=null?t.polarAxis.radiusAxis[e]:t.layout.layoutType==="radial"?See:bee,S2=t=>t.polarOptions,n_=pe([su,au,pr],Ak),UN=pe([S2,n_],(t,e)=>{if(t!=null)return aa(t.innerRadius,e,0)}),jN=pe([S2,n_],(t,e)=>{if(t!=null)return aa(t.outerRadius,e,e*.8)}),xee=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},WN=pe([S2],xee);pe([e_,WN],w2);var qN=pe([n_,UN,jN],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});pe([t_,qN],w2);var KN=pe([Fn,S2,UN,jN,su,au],(t,e,n,i,r,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||i==null)){var{cx:a,cy:o,startAngle:l,endAngle:u}=e;return{cx:aa(a,r,r/2),cy:aa(o,s,s/2),innerRadius:n,outerRadius:i,startAngle:l,endAngle:u,clockWise:!1}}}),ti=(t,e)=>e,Ky=(t,e,n)=>n;function YN(t){return t?.id}var tr=t=>{var e=Fn(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},um=t=>t.tooltip.settings.axisId,nr=t=>{var e=tr(t),n=um(t);return Yy(t,e,n)},XN=pe([nr],t=>t?.dataKey);function $N(t,e,n){var{chartData:i=[]}=e,{allowDuplicatedCategory:r,dataKey:s}=n,a=new Map;return t.forEach(o=>{var l,u=(l=o.data)!==null&&l!==void 0?l:i;if(!(u==null||u.length===0)){var h=YN(o);u.forEach((g,v)=>{var y=s==null||r?v:String(Ui(g,s,null)),w=Ui(g,o.dataKey,0),S;a.has(y)?S=a.get(y):S={},Object.assign(S,{[h]:w}),a.set(y,S)})}}),Array.from(a.values())}function i_(t){return t.stackId!=null&&t.dataKey!=null}var x2=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function A2(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function s6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function lS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?s6(Object(n),!0).forEach(function(i){Aee(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s6(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Aee(t,e,n){return(e=Eee(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Eee(t){var e=Tee(t,"string");return typeof e=="symbol"?e:e+""}function Tee(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var MR=[0,"auto"],Ree={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Dee=(t,e)=>t.cartesianAxis.xAxis[e],Ih=(t,e)=>{var n=Dee(t,e);return n??Ree},Mee={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:MR,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Gy},_ee=(t,e)=>t.cartesianAxis.yAxis[e],Hh=(t,e)=>{var n=_ee(t,e);return n??Mee},Pee={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},r_=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??Pee},di=(t,e,n)=>{switch(e){case"xAxis":return Ih(t,n);case"yAxis":return Hh(t,n);case"zAxis":return r_(t,n);case"angleAxis":return e_(t,n);case"radiusAxis":return t_(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Oee=(t,e,n)=>{switch(e){case"xAxis":return Ih(t,n);case"yAxis":return Hh(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Yy=(t,e,n)=>{switch(e){case"xAxis":return Ih(t,n);case"yAxis":return Hh(t,n);case"angleAxis":return e_(t,n);case"radiusAxis":return t_(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},ZN=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function s_(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var Lee=t=>t.graphicalItems.cartesianItems,Fee=pe([ti,Ky],s_),a_=(t,e,n)=>t.filter(n).filter(i=>e?.includeHidden===!0?!0:!i.hide),Xy=pe([Lee,di,Fee],a_,{memoizeOptions:{resultEqualityCheck:A2}}),QN=pe([Xy],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(i_)),JN=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),kee=pe([Xy],JN),o_=t=>t.map(e=>e.data).filter(Boolean).flat(1),Nee=pe([Xy],o_,{memoizeOptions:{resultEqualityCheck:A2}}),l_=(t,e)=>{var{chartData:n=[],dataStartIndex:i,dataEndIndex:r}=e;return t.length>0?t:n.slice(i,r+1)},c_=pe([Nee,TN],l_),u_=(t,e,n)=>e?.dataKey!=null?t.map(i=>({value:Ui(i,e.dataKey)})):n.length>0?n.map(i=>i.dataKey).flatMap(i=>t.map(r=>({value:Ui(r,i)}))):t.map(i=>({value:i})),E2=pe([c_,di,Xy],u_);function eB(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function lw(t){if($c(t)||t instanceof Date){var e=Number(t);if(qs(e))return e}}function a6(t){if(Array.isArray(t)){var e=[lw(t[0]),lw(t[1])];return Cf(e)?e:void 0}var n=lw(t);if(n!=null)return[n,n]}function hm(t){return t.map(lw).filter(X$)}function Bee(t,e,n){return!n||typeof e!="number"||Kl(e)?[]:n.length?hm(n.flatMap(i=>{var r=Ui(t,i.dataKey),s,a;if(Array.isArray(r)?[s,a]=r:s=a=r,!(!qs(s)||!qs(a)))return[e-s,e+a]})):[]}var Iee=pe([QN,TN,nr],$N),tB=(t,e,n)=>{var i={},r=e.reduce((s,a)=>(a.stackId==null||(s[a.stackId]==null&&(s[a.stackId]=[]),s[a.stackId].push(a)),s),i);return Object.fromEntries(Object.entries(r).map(s=>{var[a,o]=s,l=o.map(YN);return[a,{stackedData:TX(t,l,n),graphicalItems:o}]}))},Hee=pe([Iee,QN,qy],tB),nB=(t,e,n,i)=>{var{dataStartIndex:r,dataEndIndex:s}=e;if(i==null&&n!=="zAxis"){var a=MX(t,r,s);if(!(a!=null&&a[0]===0&&a[1]===0))return a}},Gee=pe([di],t=>t.allowDataOverflow),h_=t=>{var e;if(t==null||!("domain"in t))return MR;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var n=hm(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t?.domain)!==null&&e!==void 0?e:MR},d_=pe([di],h_),f_=pe([d_,Gee],RN),zee=pe([Hee,Bh,ti,f_],nB,{memoizeOptions:{resultEqualityCheck:x2}}),T2=t=>t.errorBars,Vee=(t,e,n)=>t.flatMap(i=>e[i.id]).filter(Boolean).filter(i=>eB(n,i)),cS=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=n.filter(Boolean);if(r.length!==0){var s=r.flat(),a=Math.min(...s),o=Math.max(...s);return[a,o]}},g_=(t,e,n,i,r)=>{var s,a;if(n.length>0&&t.forEach(o=>{n.forEach(l=>{var u,h,g=(u=i[l.id])===null||u===void 0?void 0:u.filter(T=>eB(r,T)),v=Ui(o,(h=e.dataKey)!==null&&h!==void 0?h:l.dataKey),y=Bee(o,v,g);if(y.length>=2){var w=Math.min(...y),S=Math.max(...y);(s==null||w<s)&&(s=w),(a==null||S>a)&&(a=S)}var x=a6(v);x!=null&&(s=s==null?x[0]:Math.min(s,x[0]),a=a==null?x[1]:Math.max(a,x[1]))})}),e?.dataKey!=null&&t.forEach(o=>{var l=a6(Ui(o,e.dataKey));l!=null&&(s=s==null?l[0]:Math.min(s,l[0]),a=a==null?l[1]:Math.max(a,l[1]))}),qs(s)&&qs(a))return[s,a]},Uee=pe([c_,di,kee,T2,ti],g_,{memoizeOptions:{resultEqualityCheck:x2}});function jee(t){var{value:e}=t;if($c(e)||e instanceof Date)return e}var Wee=(t,e,n)=>{var i=t.map(jee).filter(r=>r!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&N9(i))?Wk(0,t.length):e.allowDuplicatedCategory?i:Array.from(new Set(i))},iB=t=>t.referenceElements.dots,dm=(t,e,n)=>t.filter(i=>i.ifOverflow==="extendDomain").filter(i=>e==="xAxis"?i.xAxisId===n:i.yAxisId===n),qee=pe([iB,ti,Ky],dm),rB=t=>t.referenceElements.areas,Kee=pe([rB,ti,Ky],dm),sB=t=>t.referenceElements.lines,Yee=pe([sB,ti,Ky],dm),aB=(t,e)=>{var n=hm(t.map(i=>e==="xAxis"?i.x:i.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Xee=pe(qee,ti,aB),oB=(t,e)=>{var n=hm(t.flatMap(i=>[e==="xAxis"?i.x1:i.y1,e==="xAxis"?i.x2:i.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},$ee=pe([Kee,ti],oB),lB=(t,e)=>{var n=hm(t.map(i=>e==="xAxis"?i.x:i.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Zee=pe(Yee,ti,lB),Qee=pe(Xee,Zee,$ee,(t,e,n)=>cS(t,n,e)),p_=(t,e,n,i,r,s,a,o)=>{if(n!=null)return n;var l=a==="vertical"&&o==="xAxis"||a==="horizontal"&&o==="yAxis",u=l?cS(i,s,r):cS(s,r);return aee(e,u,t.allowDataOverflow)},Jee=pe([di,d_,f_,zee,Uee,Qee,Fn,ti],p_,{memoizeOptions:{resultEqualityCheck:x2}}),ete=[0,1],m_=(t,e,n,i,r,s,a)=>{if(!((t==null||n==null||n.length===0)&&a===void 0)){var{dataKey:o,type:l}=t,u=_f(e,s);return u&&o==null?Wk(0,n.length):l==="category"?Wee(i,t,u):r==="expand"?ete:a}},v_=pe([di,Fn,c_,E2,qy,ti,Jee],m_),cB=(t,e,n,i,r)=>{if(t!=null){var{scale:s,type:a}=t;if(s==="auto")return e==="radial"&&r==="radiusAxis"?"band":e==="radial"&&r==="angleAxis"?"linear":a==="category"&&i&&(i.indexOf("LineChart")>=0||i.indexOf("AreaChart")>=0||i.indexOf("ComposedChart")>=0&&!n)?"point":a==="category"?"band":"linear";if(typeof s=="string"){var o="scale".concat(By(s));return o in R0?o:"point"}}},fm=pe([di,Fn,ZN,ZM,ti],cB);function tte(t){if(t!=null){if(t in R0)return R0[t]();var e="scale".concat(By(t));if(e in R0)return R0[e]()}}function y_(t,e,n,i){if(!(n==null||i==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(i);var r=tte(e);if(r!=null){var s=r.domain(n).range(i);return SX(s),s}}}var C_=(t,e,n)=>{var i=h_(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(i)&&(i[0]==="auto"||i[1]==="auto")&&Cf(t))return mee(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&Cf(t))return vee(t,e.tickCount,e.allowDecimals)}},b_=pe([v_,Yy,fm],C_),w_=(t,e,n,i)=>{if(i!=="angleAxis"&&t?.type==="number"&&Cf(e)&&Array.isArray(n)&&n.length>0){var r=e[0],s=n[0],a=e[1],o=n[n.length-1];return[Math.min(r,s),Math.max(a,o)]}return e},nte=pe([di,v_,b_,ti],w_),ite=pe(E2,di,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,i=Array.from(hm(t.map(o=>o.value))).sort((o,l)=>o-l);if(i.length<2)return 1/0;var r=i[i.length-1]-i[0];if(r===0)return 1/0;for(var s=0;s<i.length-1;s++){var a=i[s+1]-i[s];n=Math.min(n,a)}return n/r}}),uB=pe(ite,Fn,yee,pr,(t,e,n,i)=>i,(t,e,n,i,r)=>{if(!qs(t))return 0;var s=e==="vertical"?i.height:i.width;if(r==="gap")return t*s/2;if(r==="no-gap"){var a=aa(n,t*s),o=t*s/2;return o-a-(o-a)/s*a}return 0}),rte=(t,e)=>{var n=Ih(t,e);return n==null||typeof n.padding!="string"?0:uB(t,"xAxis",e,n.padding)},ste=(t,e)=>{var n=Hh(t,e);return n==null||typeof n.padding!="string"?0:uB(t,"yAxis",e,n.padding)},ate=pe(Ih,rte,(t,e)=>{var n,i;if(t==null)return{left:0,right:0};var{padding:r}=t;return typeof r=="string"?{left:e,right:e}:{left:((n=r.left)!==null&&n!==void 0?n:0)+e,right:((i=r.right)!==null&&i!==void 0?i:0)+e}}),ote=pe(Hh,ste,(t,e)=>{var n,i;if(t==null)return{top:0,bottom:0};var{padding:r}=t;return typeof r=="string"?{top:e,bottom:e}:{top:((n=r.top)!==null&&n!==void 0?n:0)+e,bottom:((i=r.bottom)!==null&&i!==void 0?i:0)+e}}),lte=pe([pr,ate,h2,u2,(t,e,n)=>n],(t,e,n,i,r)=>{var{padding:s}=i;return r?[s.left,n.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),cte=pe([pr,Fn,ote,h2,u2,(t,e,n)=>n],(t,e,n,i,r,s)=>{var{padding:a}=r;return s?[i.height-a.bottom,a.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),$y=(t,e,n,i)=>{var r;switch(e){case"xAxis":return lte(t,n,i);case"yAxis":return cte(t,n,i);case"zAxis":return(r=r_(t,n))===null||r===void 0?void 0:r.range;case"angleAxis":return WN(t);case"radiusAxis":return qN(t,n);default:return}},hB=pe([di,$y],w2),R2=pe([di,fm,nte,hB],y_);pe([Xy,T2,ti],Vee);function dB(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var D2=(t,e)=>e,M2=(t,e,n)=>n,ute=pe(l2,D2,M2,(t,e,n)=>t.filter(i=>i.orientation===e).filter(i=>i.mirror===n).sort(dB)),hte=pe(c2,D2,M2,(t,e,n)=>t.filter(i=>i.orientation===e).filter(i=>i.mirror===n).sort(dB)),fB=(t,e)=>({width:t.width,height:e.height}),dte=(t,e)=>{var n=typeof e.width=="number"?e.width:Gy;return{width:n,height:t.height}};pe(pr,Ih,fB);var fte=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},gte=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},pte=pe(au,pr,ute,D2,M2,(t,e,n,i,r)=>{var s={},a;return n.forEach(o=>{var l=fB(e,o);a==null&&(a=fte(e,i,t));var u=i==="top"&&!r||i==="bottom"&&r;s[o.id]=a-Number(u)*l.height,a+=(u?-1:1)*l.height}),s}),mte=pe(su,pr,hte,D2,M2,(t,e,n,i,r)=>{var s={},a;return n.forEach(o=>{var l=dte(e,o);a==null&&(a=gte(e,i,t));var u=i==="left"&&!r||i==="right"&&r;s[o.id]=a-Number(u)*l.width,a+=(u?-1:1)*l.width}),s}),vte=(t,e)=>{var n=Ih(t,e);if(n!=null)return pte(t,n.orientation,n.mirror)};pe([pr,Ih,vte,(t,e)=>e],(t,e,n,i)=>{if(e!=null){var r=n?.[i];return r==null?{x:t.left,y:0}:{x:t.left,y:r}}});var yte=(t,e)=>{var n=Hh(t,e);if(n!=null)return mte(t,n.orientation,n.mirror)};pe([pr,Hh,yte,(t,e)=>e],(t,e,n,i)=>{if(e!=null){var r=n?.[i];return r==null?{x:0,y:t.top}:{x:r,y:t.top}}});pe(pr,Hh,(t,e)=>{var n=typeof e.width=="number"?e.width:Gy;return{width:n,height:t.height}});var gB=(t,e,n,i)=>{if(n!=null){var{allowDuplicatedCategory:r,type:s,dataKey:a}=n,o=_f(t,i),l=e.map(u=>u.value);if(a&&o&&s==="category"&&r&&N9(l))return l}},S_=pe([Fn,E2,di,ti],gB),pB=(t,e,n,i)=>{if(!(n==null||n.dataKey==null)){var{type:r,scale:s}=n,a=_f(t,i);if(a&&(r==="number"||s!=="auto"))return e.map(o=>o.value)}},x_=pe([Fn,E2,Yy,ti],pB);pe([Fn,Oee,fm,R2,S_,x_,$y,b_,ti],(t,e,n,i,r,s,a,o,l)=>{if(e==null)return null;var u=_f(t,l);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:l,categoricalDomain:s,duplicateDomain:r,isCategorical:u,niceTicks:o,range:a,realScaleType:n,scale:i}});var Cte=(t,e,n,i,r,s,a,o,l)=>{if(!(e==null||i==null)){var u=_f(t,l),{type:h,ticks:g,tickCount:v}=e,y=n==="scaleBand"&&typeof i.bandwidth=="function"?i.bandwidth()/2:2,w=h==="category"&&i.bandwidth?i.bandwidth()/y:0;w=l==="angleAxis"&&s!=null&&s.length>=2?Gs(s[0]-s[1])*2*w:w;var S=g||r;if(S){var x=S.map((T,_)=>{var M=a?a.indexOf(T):T;return{index:_,coordinate:i(M)+w,value:T,offset:w}});return x.filter(T=>!Kl(T.coordinate))}return u&&o?o.map((T,_)=>({coordinate:i(T)+w,value:T,index:_,offset:w})):i.ticks?i.ticks(v).map(T=>({coordinate:i(T)+w,value:T,offset:w})):i.domain().map((T,_)=>({coordinate:i(T)+w,value:a?a[T]:T,index:_,offset:w}))}};pe([Fn,Yy,fm,R2,b_,$y,S_,x_,ti],Cte);var bte=(t,e,n,i,r,s,a)=>{if(!(e==null||n==null||i==null||i[0]===i[1])){var o=_f(t,a),{tickCount:l}=e,u=0;return u=a==="angleAxis"&&i?.length>=2?Gs(i[0]-i[1])*2*u:u,o&&s?s.map((h,g)=>({coordinate:n(h)+u,value:h,index:g,offset:u})):n.ticks?n.ticks(l).map(h=>({coordinate:n(h)+u,value:h,offset:u})):n.domain().map((h,g)=>({coordinate:n(h)+u,value:r?r[h]:h,index:g,offset:u}))}};pe([Fn,Yy,R2,$y,S_,x_,ti],bte);pe(di,R2,(t,e)=>{if(!(t==null||e==null))return lS(lS({},t),{},{scale:e})});var wte=pe([di,fm,v_,hB],y_);pe((t,e,n)=>r_(t,n),wte,(t,e)=>{if(!(t==null||e==null))return lS(lS({},t),{},{scale:e})});var Ste=pe([Fn,l2,c2],(t,e,n)=>{switch(t){case"horizontal":return e.some(i=>i.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(i=>i.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),mB=t=>t.options.defaultTooltipEventType,vB=t=>t.options.validateTooltipEventTypes;function yB(t,e,n){if(t==null)return e;var i=t?"axis":"item";return n==null?e:n.includes(i)?i:e}function A_(t,e){var n=mB(t),i=vB(t);return yB(e,n,i)}function xte(t){return Nt(e=>A_(e,t))}var CB=(t,e)=>{var n,i=Number(e);if(!(Kl(i)||e==null))return i>=0?t==null||(n=t[i])===null||n===void 0?void 0:n.value:void 0},Ate=t=>t.tooltip.settings,bh={active:!1,index:null,dataKey:void 0,coordinate:void 0},Ete={itemInteraction:{click:bh,hover:bh},axisInteraction:{click:bh,hover:bh},keyboardInteraction:bh,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},bB=da({name:"tooltip",initialState:Ete,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:ds()},removeTooltipEntrySettings:{reducer(t,e){var n=Wc(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:ds()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate,t.keyboardInteraction.dataKey=e.payload.activeDataKey}}}),{addTooltipEntrySettings:Tte,removeTooltipEntrySettings:Rte,setTooltipSettingsState:Dte,setActiveMouseOverItemIndex:wB,mouseLeaveItem:Mte,mouseLeaveChart:SB,setActiveClickItemIndex:_te,setMouseOverAxisIndex:xB,setMouseClickAxisIndex:Pte,setSyncInteraction:_R,setKeyboardInteraction:PR}=bB.actions,Ote=bB.reducer;function o6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function x1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?o6(Object(n),!0).forEach(function(i){Lte(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o6(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Lte(t,e,n){return(e=Fte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fte(t){var e=kte(t,"string");return typeof e=="symbol"?e:e+""}function kte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Nte(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function Bte(t){return t.index!=null}var AB=(t,e,n,i)=>{if(e==null)return bh;var r=Nte(t,e,n);if(r==null)return bh;if(r.active)return r;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(Bte(r)){if(s)return x1(x1({},r),{},{active:!0})}else if(i!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:i};return x1(x1({},bh),{},{coordinate:r.coordinate})},E_=(t,e)=>{var n=t?.index;if(n==null)return null;var i=Number(n);if(!qs(i))return n;var r=0,s=1/0;return e.length>0&&(s=e.length-1),String(Math.max(r,Math.min(i,s)))},EB=(t,e,n,i,r,s,a,o)=>{if(!(s==null||o==null)){var l=a[0],u=l==null?void 0:o(l.positions,s);if(u!=null)return u;var h=r?.[Number(s)];if(h)switch(n){case"horizontal":return{x:h.coordinate,y:(i.top+e)/2};default:return{x:(i.left+t)/2,y:h.coordinate}}}},TB=(t,e,n,i)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var r;return n==="hover"?r=t.itemInteraction.hover.dataKey:r=t.itemInteraction.click.dataKey,r==null&&i!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(s=>{var a;return((a=s.settings)===null||a===void 0?void 0:a.dataKey)===r})},Zy=t=>t.options.tooltipPayloadSearcher,gm=t=>t.tooltip;function l6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function c6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?l6(Object(n),!0).forEach(function(i){Ite(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l6(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Ite(t,e,n){return(e=Hte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hte(t){var e=Gte(t,"string");return typeof e=="symbol"?e:e+""}function Gte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zte(t,e){return t??e}var RB=(t,e,n,i,r,s,a)=>{if(!(e==null||s==null)){var{chartData:o,computedData:l,dataStartIndex:u,dataEndIndex:h}=n,g=[];return t.reduce((v,y)=>{var w,{dataDefinedOnItem:S,settings:x}=y,T=zte(S,o),_=Array.isArray(T)?Ek(T,u,h):T,M=(w=x?.dataKey)!==null&&w!==void 0?w:i,F=x?.nameKey,L;if(i&&Array.isArray(_)&&!Array.isArray(_[0])&&a==="axis"?L=rK(_,i,r):L=s(_,e,l,F),Array.isArray(L))L.forEach(B=>{var H=c6(c6({},x),{},{name:B.name,unit:B.unit,color:void 0,fill:void 0});v.push(zP({tooltipEntrySettings:H,dataKey:B.dataKey,payload:B.payload,value:Ui(B.payload,B.dataKey),name:B.name}))});else{var k;v.push(zP({tooltipEntrySettings:x,dataKey:M,payload:L,value:Ui(L,M),name:(k=Ui(L,F))!==null&&k!==void 0?k:x?.name}))}return v},g)}},T_=pe([nr,Fn,ZN,ZM,tr],cB),Vte=pe([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),Ute=pe([tr,um],s_),Qy=pe([Vte,nr,Ute],a_,{memoizeOptions:{resultEqualityCheck:A2}}),jte=pe([Qy],t=>t.filter(i_)),Wte=pe([Qy],o_,{memoizeOptions:{resultEqualityCheck:A2}}),pm=pe([Wte,Bh],l_),qte=pe([jte,Bh,nr],$N),R_=pe([pm,nr,Qy],u_),DB=pe([nr],h_),Kte=pe([nr],t=>t.allowDataOverflow),MB=pe([DB,Kte],RN),Yte=pe([Qy],t=>t.filter(i_)),Xte=pe([qte,Yte,qy],tB),$te=pe([Xte,Bh,tr,MB],nB),Zte=pe([Qy],JN),Qte=pe([pm,nr,Zte,T2,tr],g_,{memoizeOptions:{resultEqualityCheck:x2}}),Jte=pe([iB,tr,um],dm),ene=pe([Jte,tr],aB),tne=pe([rB,tr,um],dm),nne=pe([tne,tr],oB),ine=pe([sB,tr,um],dm),rne=pe([ine,tr],lB),sne=pe([ene,rne,nne],cS),ane=pe([nr,DB,MB,$te,Qte,sne,Fn,tr],p_),_B=pe([nr,Fn,pm,R_,qy,tr,ane],m_),one=pe([_B,nr,T_],C_),lne=pe([nr,_B,one,tr],w_),PB=t=>{var e=tr(t),n=um(t),i=!1;return $y(t,e,n,i)},OB=pe([nr,PB],w2),LB=pe([nr,T_,lne,OB],y_),cne=pe([Fn,R_,nr,tr],gB),une=pe([Fn,R_,nr,tr],pB),hne=(t,e,n,i,r,s,a,o)=>{if(e){var{type:l}=e,u=_f(t,o);if(i){var h=n==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,g=l==="category"&&i.bandwidth?i.bandwidth()/h:0;return g=o==="angleAxis"&&r!=null&&r?.length>=2?Gs(r[0]-r[1])*2*g:g,u&&a?a.map((v,y)=>({coordinate:i(v)+g,value:v,index:y,offset:g})):i.domain().map((v,y)=>({coordinate:i(v)+g,value:s?s[v]:v,index:y,offset:g}))}}},cu=pe([Fn,nr,T_,LB,PB,cne,une,tr],hne),D_=pe([mB,vB,Ate],(t,e,n)=>yB(n.shared,t,e)),FB=t=>t.tooltip.settings.trigger,M_=t=>t.tooltip.settings.defaultIndex,_2=pe([gm,D_,FB,M_],AB),fy=pe([_2,pm],E_),kB=pe([cu,fy],CB),dne=pe([_2],t=>{if(t)return t.dataKey}),NB=pe([gm,D_,FB,M_],TB),fne=pe([su,au,Fn,pr,cu,M_,NB,Zy],EB),gne=pe([_2,fne],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),pne=pe([_2],t=>t.active),mne=pe([NB,fy,Bh,XN,kB,Zy,D_],RB);pe([mne],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function u6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function h6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u6(Object(n),!0).forEach(function(i){vne(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u6(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function vne(t,e,n){return(e=yne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yne(t){var e=Cne(t,"string");return typeof e=="symbol"?e:e+""}function Cne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bne=()=>Nt(nr),wne=()=>{var t=bne(),e=Nt(cu),n=Nt(LB);return _X(h6(h6({},t),{},{scale:n}),e)},Sne=()=>Nt(ZM),__=(t,e)=>e,BB=(t,e,n)=>n,P_=(t,e,n,i)=>i,xne=pe(cu,t=>n2(t,e=>e.coordinate)),O_=pe([gm,__,BB,P_],AB),IB=pe([O_,pm],E_),Ane=(t,e,n)=>{if(e!=null){var i=gm(t);return e==="axis"?n==="hover"?i.axisInteraction.hover.dataKey:i.axisInteraction.click.dataKey:n==="hover"?i.itemInteraction.hover.dataKey:i.itemInteraction.click.dataKey}},HB=pe([gm,__,BB,P_],TB),uS=pe([su,au,Fn,pr,cu,P_,HB,Zy],EB),Ene=pe([O_,uS],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),GB=pe(cu,IB,CB),Tne=pe([HB,IB,Bh,XN,GB,Zy,__],RB),Rne=pe([O_],t=>({isActive:t.active,activeIndex:t.index})),Dne=(t,e,n,i,r,s,a,o)=>{if(!(!t||!e||!i||!r||!s)){var l=PX(t.chartX,t.chartY,e,n,o);if(l){var u=LX(l,e),h=bX(u,a,s,i,r),g=OX(e,s,h,l);return{activeIndex:String(h),activeCoordinate:g}}}};function OR(){return OR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},OR.apply(null,arguments)}function d6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function A1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?d6(Object(n),!0).forEach(function(i){Mne(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d6(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Mne(t,e,n){return(e=_ne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _ne(t){var e=Pne(t,"string");return typeof e=="symbol"?e:e+""}function Pne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function One(t){var{coordinate:e,payload:n,index:i,offset:r,tooltipAxisBandSize:s,layout:a,cursor:o,tooltipEventType:l,chartName:u}=t,h=e,g=n,v=i;if(!o||!h||u!=="ScatterChart"&&l!=="axis")return null;var y,w;if(u==="ScatterChart")y=h,w=V$;else if(u==="BarChart")y=U$(a,h,r,s),w=zk;else if(a==="radial"){var{cx:S,cy:x,radius:T,startAngle:_,endAngle:M}=Vk(h);y={cx:S,cy:x,startAngle:_,endAngle:M,innerRadius:T,outerRadius:T},w=jk}else y={points:TZ(a,h,r)},w=Nk;var F=typeof o=="object"&&"className"in o?o.className:void 0,L=A1(A1(A1(A1({stroke:"#ccc",pointerEvents:"none"},r),y),$T(o)),{},{payload:g,payloadIndex:v,className:Wi("recharts-tooltip-cursor",F)});return D.isValidElement(o)?D.cloneElement(o,L):D.createElement(w,L)}function Lne(t){var e=wne(),n=c$(),i=Lk(),r=Sne();return D.createElement(One,OR({},t,{coordinate:t.coordinate,index:t.index,payload:t.payload,offset:n,layout:i,tooltipAxisBandSize:e,chartName:r}))}var zB=D.createContext(null),Fne=()=>D.useContext(zB),AE={exports:{}},f6;function kne(){return f6||(f6=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function r(l,u,h){this.fn=l,this.context=u,this.once=h||!1}function s(l,u,h,g,v){if(typeof h!="function")throw new TypeError("The listener must be a function");var y=new r(h,g||l,v),w=n?n+u:u;return l._events[w]?l._events[w].fn?l._events[w]=[l._events[w],y]:l._events[w].push(y):(l._events[w]=y,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new i:delete l._events[u]}function o(){this._events=new i,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],h,g;if(this._eventsCount===0)return u;for(g in h=this._events)e.call(h,g)&&u.push(n?g.slice(1):g);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},o.prototype.listeners=function(u){var h=n?n+u:u,g=this._events[h];if(!g)return[];if(g.fn)return[g.fn];for(var v=0,y=g.length,w=new Array(y);v<y;v++)w[v]=g[v].fn;return w},o.prototype.listenerCount=function(u){var h=n?n+u:u,g=this._events[h];return g?g.fn?1:g.length:0},o.prototype.emit=function(u,h,g,v,y,w){var S=n?n+u:u;if(!this._events[S])return!1;var x=this._events[S],T=arguments.length,_,M;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),T){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,h),!0;case 3:return x.fn.call(x.context,h,g),!0;case 4:return x.fn.call(x.context,h,g,v),!0;case 5:return x.fn.call(x.context,h,g,v,y),!0;case 6:return x.fn.call(x.context,h,g,v,y,w),!0}for(M=1,_=new Array(T-1);M<T;M++)_[M-1]=arguments[M];x.fn.apply(x.context,_)}else{var F=x.length,L;for(M=0;M<F;M++)switch(x[M].once&&this.removeListener(u,x[M].fn,void 0,!0),T){case 1:x[M].fn.call(x[M].context);break;case 2:x[M].fn.call(x[M].context,h);break;case 3:x[M].fn.call(x[M].context,h,g);break;case 4:x[M].fn.call(x[M].context,h,g,v);break;default:if(!_)for(L=1,_=new Array(T-1);L<T;L++)_[L-1]=arguments[L];x[M].fn.apply(x[M].context,_)}}return!0},o.prototype.on=function(u,h,g){return s(this,u,h,g,!1)},o.prototype.once=function(u,h,g){return s(this,u,h,g,!0)},o.prototype.removeListener=function(u,h,g,v){var y=n?n+u:u;if(!this._events[y])return this;if(!h)return a(this,y),this;var w=this._events[y];if(w.fn)w.fn===h&&(!v||w.once)&&(!g||w.context===g)&&a(this,y);else{for(var S=0,x=[],T=w.length;S<T;S++)(w[S].fn!==h||v&&!w[S].once||g&&w[S].context!==g)&&x.push(w[S]);x.length?this._events[y]=x.length===1?x[0]:x:a(this,y)}return this},o.prototype.removeAllListeners=function(u){var h;return u?(h=n?n+u:u,this._events[h]&&a(this,h)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o})(AE)),AE.exports}var Nne=kne();const Bne=Wo(Nne);var gy=new Bne,LR="recharts.syncEvent.tooltip",g6="recharts.syncEvent.brush";function Ine(t,e){if(e){var n=Number.parseInt(e,10);if(!Kl(n))return t?.[n]}}var Hne={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},VB=da({name:"options",initialState:Hne,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Gne=VB.reducer,{createEventEmitter:zne}=VB.actions;function Vne(t){return t.tooltip.syncInteraction}var Une={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},UB=da({name:"chartData",initialState:Une,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:i}=e.payload;n!=null&&(t.dataStartIndex=n),i!=null&&(t.dataEndIndex=i)}}}),{setChartData:p6,setDataStartEndIndexes:jne,setComputedData:NTe}=UB.actions,Wne=UB.reducer,qne=["x","y"];function m6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function lp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?m6(Object(n),!0).forEach(function(i){Kne(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m6(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Kne(t,e,n){return(e=Yne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yne(t){var e=Xne(t,"string");return typeof e=="symbol"?e:e+""}function Xne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $ne(t,e){if(t==null)return{};var n,i,r=Zne(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Zne(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var jB=()=>{};function Qne(){var t=Nt(QM),e=Nt(JM),n=Nr(),i=Nt(VN),r=Nt(cu),s=Lk(),a=d2(),o=Nt(l=>l.rootProps.className);D.useEffect(()=>{if(t==null)return jB;var l=(u,h,g)=>{if(e!==g&&t===u){if(i==="index"){var v;if(a&&h!==null&&h!==void 0&&(v=h.payload)!==null&&v!==void 0&&v.coordinate&&h.payload.sourceViewBox){var y=h.payload.coordinate,{x:w,y:S}=y,x=$ne(y,qne),{x:T,y:_,width:M,height:F}=h.payload.sourceViewBox,L=lp(lp({},x),{},{x:a.x+(M?(w-T)/M:0)*a.width,y:a.y+(F?(S-_)/F:0)*a.height});n(lp(lp({},h),{},{payload:lp(lp({},h.payload),{},{coordinate:L})}))}else n(h);return}if(r!=null){var k;if(typeof i=="function"){var B={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},H=i(r,B);k=r[H]}else i==="value"&&(k=r.find(z=>String(z.value)===h.payload.label));var{coordinate:U}=h.payload;if(k==null||h.payload.active===!1||U==null||a==null){n(_R({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:W,y:j}=U,X=Math.min(W,a.x+a.width),ne=Math.min(j,a.y+a.height),$={x:s==="horizontal"?k.coordinate:X,y:s==="horizontal"?ne:k.coordinate},q=_R({active:h.payload.active,coordinate:$,dataKey:h.payload.dataKey,index:String(k.index),label:h.payload.label,sourceViewBox:h.payload.sourceViewBox});n(q)}}};return gy.on(LR,l),()=>{gy.off(LR,l)}},[o,n,e,t,i,r,s,a])}function Jne(){var t=Nt(QM),e=Nt(JM),n=Nr();D.useEffect(()=>{if(t==null)return jB;var i=(r,s,a)=>{e!==a&&t===r&&n(jne(s))};return gy.on(g6,i),()=>{gy.off(g6,i)}},[n,e,t])}function eie(){var t=Nr();D.useEffect(()=>{t(zne())},[t]),Qne(),Jne()}function tie(t,e,n,i,r,s){var a=Nt(y=>Ane(y,t,e)),o=Nt(JM),l=Nt(QM),u=Nt(VN),h=Nt(Vne),g=h?.active,v=d2();D.useEffect(()=>{if(!g&&l!=null&&o!=null){var y=_R({active:s,coordinate:n,dataKey:a,index:r,label:typeof i=="number"?String(i):i,sourceViewBox:v});gy.emit(LR,l,y,o)}},[g,n,a,r,i,o,l,u,s,v])}function v6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function y6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?v6(Object(n),!0).forEach(function(i){nie(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v6(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function nie(t,e,n){return(e=iie(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function iie(t){var e=rie(t,"string");return typeof e=="symbol"?e:e+""}function rie(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sie(t){return t.dataKey}function aie(t,e){return D.isValidElement(t)?D.cloneElement(t,e):typeof t=="function"?D.createElement(t,e):D.createElement(b$,e)}var C6=[],oie={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!zy.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function lie(t){var e=ou(t,oie),{active:n,allowEscapeViewBox:i,animationDuration:r,animationEasing:s,content:a,filterNull:o,isAnimationActive:l,offset:u,payloadUniqBy:h,position:g,reverseDirection:v,useTranslate3d:y,wrapperStyle:w,cursor:S,shared:x,trigger:T,defaultIndex:_,portal:M,axisId:F}=e,L=Nr(),k=typeof _=="number"?String(_):_;D.useEffect(()=>{L(Dte({shared:x,trigger:T,axisId:F,active:n,defaultIndex:k}))},[L,x,T,F,n,k]);var B=d2(),H=kk(),U=xte(x),{activeIndex:W,isActive:j}=Nt(Pe=>Rne(Pe,U,T,k)),X=Nt(Pe=>Tne(Pe,U,T,k)),ne=Nt(Pe=>GB(Pe,U,T,k)),$=Nt(Pe=>Ene(Pe,U,T,k)),q=X,z=Fne(),K=n??j,[Q,oe]=hY([q,K]),le=U==="axis"?ne:void 0;tie(U,T,$,le,W,K);var V=M??z;if(V==null)return null;var Z=q??C6;K||(Z=C6),o&&Z.length&&(Z=BK(q.filter(Pe=>Pe.value!=null&&(Pe.hide!==!0||e.includeHidden)),h,sie));var ae=Z.length>0,Ee=D.createElement(R$,{allowEscapeViewBox:i,animationDuration:r,animationEasing:s,isAnimationActive:l,active:K,coordinate:$,hasPayload:ae,offset:u,position:g,reverseDirection:v,useTranslate3d:y,viewBox:B,wrapperStyle:w,lastBoundingBox:Q,innerRef:oe,hasPortalFromProps:!!M},aie(a,y6(y6({},e),{},{payload:Z,label:le,active:K,coordinate:$,accessibilityLayer:H})));return D.createElement(D.Fragment,null,QS.createPortal(Ee,V),K&&D.createElement(Lne,{cursor:S,tooltipEventType:U,coordinate:$,payload:q,index:W}))}var P2=t=>null;P2.displayName="Cell";function cie(t,e,n){return(e=uie(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uie(t){var e=hie(t,"string");return typeof e=="symbol"?e:e+""}function hie(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class die{constructor(e){cie(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var i=this.cache.keys().next().value;this.cache.delete(i)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function b6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function fie(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b6(Object(n),!0).forEach(function(i){gie(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b6(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function gie(t,e,n){return(e=pie(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pie(t){var e=mie(t,"string");return typeof e=="symbol"?e:e+""}function mie(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vie={cacheSize:2e3,enableCache:!0},WB=fie({},vie),w6=new die(WB.cacheSize),yie={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},S6="recharts_measurement_span";function Cie(t,e){var n=e.fontSize||"",i=e.fontFamily||"",r=e.fontWeight||"",s=e.fontStyle||"",a=e.letterSpacing||"",o=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(i,"|").concat(r,"|").concat(s,"|").concat(a,"|").concat(o)}var x6=(t,e)=>{try{var n=document.getElementById(S6);n||(n=document.createElement("span"),n.setAttribute("id",S6),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,yie,e),n.textContent="".concat(t);var i=n.getBoundingClientRect();return{width:i.width,height:i.height}}catch{return{width:0,height:0}}},A6=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||zy.isSsr)return{width:0,height:0};if(!WB.enableCache)return x6(e,n);var i=Cie(e,n),r=w6.get(i);if(r)return r;var s=x6(e,n);return w6.set(i,s),s},E6=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,T6=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,bie=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,wie=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,qB={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Sie=Object.keys(qB),yp="NaN";function xie(t,e){return t*qB[e]}class Is{static parse(e){var n,[,i,r]=(n=wie.exec(e))!==null&&n!==void 0?n:[];return new Is(parseFloat(i),r??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,Kl(e)&&(this.unit=""),n!==""&&!bie.test(n)&&(this.num=NaN,this.unit=""),Sie.includes(n)&&(this.num=xie(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new Is(NaN,""):new Is(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new Is(NaN,""):new Is(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Is(NaN,""):new Is(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new Is(NaN,""):new Is(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Kl(this.num)}}function KB(t){if(t.includes(yp))return yp;for(var e=t;e.includes("*")||e.includes("/");){var n,[,i,r,s]=(n=E6.exec(e))!==null&&n!==void 0?n:[],a=Is.parse(i??""),o=Is.parse(s??""),l=r==="*"?a.multiply(o):a.divide(o);if(l.isNaN())return yp;e=e.replace(E6,l.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var u,[,h,g,v]=(u=T6.exec(e))!==null&&u!==void 0?u:[],y=Is.parse(h??""),w=Is.parse(v??""),S=g==="+"?y.add(w):y.subtract(w);if(S.isNaN())return yp;e=e.replace(T6,S.toString())}return e}var R6=/\(([^()]*)\)/;function Aie(t){for(var e=t,n;(n=R6.exec(e))!=null;){var[,i]=n;e=e.replace(R6,KB(i))}return e}function Eie(t){var e=t.replace(/\s+/g,"");return e=Aie(e),e=KB(e),e}function Tie(t){try{return Eie(t)}catch{return yp}}function EE(t){var e=Tie(t.slice(5,-1));return e===yp?"":e}var Rie=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Die=["dx","dy","angle","className","breakAll"];function FR(){return FR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},FR.apply(null,arguments)}function D6(t,e){if(t==null)return{};var n,i,r=Mie(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Mie(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var YB=/[ \f\n\r\t\v\u2028\u2029]+/,XB=t=>{var{children:e,breakAll:n,style:i}=t;try{var r=[];ua(e)||(n?r=e.toString().split(""):r=e.toString().split(YB));var s=r.map(o=>({word:o,width:A6(o,i).width})),a=n?0:A6("",i).width;return{wordsWithComputedWidth:s,spaceWidth:a}}catch{return null}},_ie=(t,e,n,i,r)=>{var{maxLines:s,children:a,style:o,breakAll:l}=t,u=At(s),h=a,g=function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return j.reduce((X,ne)=>{var{word:$,width:q}=ne,z=X[X.length-1];if(z&&(i==null||r||z.width+q+n<Number(i)))z.words.push($),z.width+=q+n;else{var K={words:[$],width:q};X.push(K)}return X},[])},v=g(e),y=W=>W.reduce((j,X)=>j.width>X.width?j:X);if(!u||r)return v;var w=v.length>s||y(v).width>Number(i);if(!w)return v;for(var S="",x=W=>{var j=h.slice(0,W),X=XB({breakAll:l,style:o,children:j+S}).wordsWithComputedWidth,ne=g(X),$=ne.length>s||y(ne).width>Number(i);return[$,ne]},T=0,_=h.length-1,M=0,F;T<=_&&M<=h.length-1;){var L=Math.floor((T+_)/2),k=L-1,[B,H]=x(k),[U]=x(L);if(!B&&!U&&(T=L+1),B&&U&&(_=L-1),!B&&U){F=H;break}M++}return F||v},M6=t=>{var e=ua(t)?[]:t.toString().split(YB);return[{words:e}]},Pie=t=>{var{width:e,scaleToFit:n,children:i,style:r,breakAll:s,maxLines:a}=t;if((e||n)&&!zy.isSsr){var o,l,u=XB({breakAll:s,children:i,style:r});if(u){var{wordsWithComputedWidth:h,spaceWidth:g}=u;o=h,l=g}else return M6(i);return _ie({breakAll:s,children:i,maxLines:a,style:r},o,l,e,n)}return M6(i)},_6="#808080",L_=D.forwardRef((t,e)=>{var{x:n=0,y:i=0,lineHeight:r="1em",capHeight:s="0.71em",scaleToFit:a=!1,textAnchor:o="start",verticalAnchor:l="end",fill:u=_6}=t,h=D6(t,Rie),g=D.useMemo(()=>Pie({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:a,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,a,h.style,h.width]),{dx:v,dy:y,angle:w,className:S,breakAll:x}=h,T=D6(h,Die);if(!$c(n)||!$c(i)||g.length===0)return null;var _=n+(At(v)?v:0),M=i+(At(y)?y:0),F;switch(l){case"start":F=EE("calc(".concat(s,")"));break;case"middle":F=EE("calc(".concat((g.length-1)/2," * -").concat(r," + (").concat(s," / 2))"));break;default:F=EE("calc(".concat(g.length-1," * -").concat(r,")"));break}var L=[];if(a){var k=g[0].width,{width:B}=h;L.push("scale(".concat(At(B)?B/k:1,")"))}return w&&L.push("rotate(".concat(w,", ").concat(_,", ").concat(M,")")),L.length&&(T.transform=L.join(" ")),D.createElement("text",FR({},ro(T),{ref:e,x:_,y:M,className:Wi("recharts-text",S),textAnchor:o,fill:u.includes("url")?_6:u}),g.map((H,U)=>{var W=H.words.join(x?"":" ");return D.createElement("tspan",{x:_,dy:U===0?F:r,key:"".concat(W,"-").concat(U)},W)}))});L_.displayName="Text";var Oie=["labelRef"];function Lie(t,e){if(t==null)return{};var n,i,r=Fie(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Fie(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function P6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Ii(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?P6(Object(n),!0).forEach(function(i){kie(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P6(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function kie(t,e,n){return(e=Nie(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nie(t){var e=Bie(t,"string");return typeof e=="symbol"?e:e+""}function Bie(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hS(){return hS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},hS.apply(null,arguments)}var Iie=D.createContext(null),Hie=()=>{var t=D.useContext(Iie),e=d2();return t||e},Gie=D.createContext(null),zie=()=>{var t=D.useContext(Gie),e=Nt(KN);return t||e},Vie=t=>{var{value:e,formatter:n}=t,i=ua(t.children)?e:t.children;return typeof n=="function"?n(i):i},Uie=t=>t!=null&&typeof t=="function",jie=(t,e)=>{var n=Gs(e-t),i=Math.min(Math.abs(e-t),360);return n*i},Wie=(t,e,n,i,r)=>{var{offset:s,className:a}=t,{cx:o,cy:l,innerRadius:u,outerRadius:h,startAngle:g,endAngle:v,clockWise:y}=r,w=(u+h)/2,S=jie(g,v),x=S>=0?1:-1,T,_;switch(e){case"insideStart":T=g+x*s,_=y;break;case"insideEnd":T=v-x*s,_=!y;break;case"end":T=v+x*s,_=y;break;default:throw new Error("Unsupported position ".concat(e))}_=S<=0?_:!_;var M=Vi(o,l,w,T),F=Vi(o,l,w,T+(_?1:-1)*359),L="M".concat(M.x,",").concat(M.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(_?0:1,`,
    `).concat(F.x,",").concat(F.y),k=ua(t.id)?iy("recharts-radial-line-"):t.id;return D.createElement("text",hS({},i,{dominantBaseline:"central",className:Wi("recharts-radial-bar-label",a)}),D.createElement("defs",null,D.createElement("path",{id:k,d:L})),D.createElement("textPath",{xlinkHref:"#".concat(k)},n))},qie=(t,e,n)=>{var{cx:i,cy:r,innerRadius:s,outerRadius:a,startAngle:o,endAngle:l}=t,u=(o+l)/2;if(n==="outside"){var{x:h,y:g}=Vi(i,r,a+e,u);return{x:h,y:g,textAnchor:h>=i?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:i,y:r,textAnchor:"middle",verticalAnchor:"end"};var v=(s+a)/2,{x:y,y:w}=Vi(i,r,v,u);return{x:y,y:w,textAnchor:"middle",verticalAnchor:"middle"}},$B=t=>"cx"in t&&At(t.cx),Kie=(t,e)=>{var{parentViewBox:n,offset:i,position:r}=t,s;n!=null&&!$B(n)&&(s=n);var{x:a,y:o,width:l,height:u}=e,h=u>=0?1:-1,g=h*i,v=h>0?"end":"start",y=h>0?"start":"end",w=l>=0?1:-1,S=w*i,x=w>0?"end":"start",T=w>0?"start":"end";if(r==="top"){var _={x:a+l/2,y:o-h*i,textAnchor:"middle",verticalAnchor:v};return Ii(Ii({},_),s?{height:Math.max(o-s.y,0),width:l}:{})}if(r==="bottom"){var M={x:a+l/2,y:o+u+g,textAnchor:"middle",verticalAnchor:y};return Ii(Ii({},M),s?{height:Math.max(s.y+s.height-(o+u),0),width:l}:{})}if(r==="left"){var F={x:a-S,y:o+u/2,textAnchor:x,verticalAnchor:"middle"};return Ii(Ii({},F),s?{width:Math.max(F.x-s.x,0),height:u}:{})}if(r==="right"){var L={x:a+l+S,y:o+u/2,textAnchor:T,verticalAnchor:"middle"};return Ii(Ii({},L),s?{width:Math.max(s.x+s.width-L.x,0),height:u}:{})}var k=s?{width:l,height:u}:{};return r==="insideLeft"?Ii({x:a+S,y:o+u/2,textAnchor:T,verticalAnchor:"middle"},k):r==="insideRight"?Ii({x:a+l-S,y:o+u/2,textAnchor:x,verticalAnchor:"middle"},k):r==="insideTop"?Ii({x:a+l/2,y:o+g,textAnchor:"middle",verticalAnchor:y},k):r==="insideBottom"?Ii({x:a+l/2,y:o+u-g,textAnchor:"middle",verticalAnchor:v},k):r==="insideTopLeft"?Ii({x:a+S,y:o+g,textAnchor:T,verticalAnchor:y},k):r==="insideTopRight"?Ii({x:a+l-S,y:o+g,textAnchor:x,verticalAnchor:y},k):r==="insideBottomLeft"?Ii({x:a+S,y:o+u-g,textAnchor:T,verticalAnchor:v},k):r==="insideBottomRight"?Ii({x:a+l-S,y:o+u-g,textAnchor:x,verticalAnchor:v},k):r&&typeof r=="object"&&(At(r.x)||Xc(r.x))&&(At(r.y)||Xc(r.y))?Ii({x:a+aa(r.x,l),y:o+aa(r.y,u),textAnchor:"end",verticalAnchor:"end"},k):Ii({x:a+l/2,y:o+u/2,textAnchor:"middle",verticalAnchor:"middle"},k)},Yie={offset:5};function ZB(t){var e=ou(t,Yie),{viewBox:n,position:i,value:r,children:s,content:a,className:o="",textBreakAll:l,labelRef:u}=e,h=zie(),g=Hie(),v=i==="center"?g:h??g,y=n||v;if(!y||ua(r)&&ua(s)&&!D.isValidElement(a)&&typeof a!="function")return null;var w=Ii(Ii({},e),{},{viewBox:y});if(D.isValidElement(a)){var{labelRef:S}=w,x=Lie(w,Oie);return D.cloneElement(a,x)}var T;if(typeof a=="function"){if(T=D.createElement(a,w),D.isValidElement(T))return T}else T=Vie(e);var _=$B(y),M=ro(e);if(_&&(i==="insideStart"||i==="insideEnd"||i==="end"))return Wie(e,i,T,M,y);var F=_?qie(y,e.offset,e.position):Kie(e,y);return D.createElement(L_,hS({ref:u,className:Wi("recharts-label",o)},M,F,{breakAll:l}),T)}ZB.displayName="Label";var TE={},RE={},O6;function Xie(){return O6||(O6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(RE)),RE}var DE={},L6;function $ie(){return L6||(L6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(DE)),DE}var F6;function Zie(){return F6||(F6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Xie(),n=$ie(),i=pM();function r(s){if(i.isArrayLike(s))return e.last(n.toArray(s))}t.last=r})(TE)),TE}var ME,k6;function Qie(){return k6||(k6=1,ME=Zie().last),ME}var Jie=Qie();const ere=Wo(Jie);var tre=["valueAccessor"],nre=["dataKey","clockWise","id","textBreakAll"];function dS(){return dS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},dS.apply(null,arguments)}function N6(t,e){if(t==null)return{};var n,i,r=ire(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function ire(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var rre=t=>Array.isArray(t.value)?ere(t.value):t.value,QB=D.createContext(void 0);QB.Provider;var JB=D.createContext(void 0),sre=JB.Provider;function are(){return D.useContext(QB)}function ore(){return D.useContext(JB)}function cw(t){var{valueAccessor:e=rre}=t,n=N6(t,tre),{dataKey:i,clockWise:r,id:s,textBreakAll:a}=n,o=N6(n,nre),l=are(),u=ore(),h=l||u;return!h||!h.length?null:D.createElement(Dh,{className:"recharts-label-list"},h.map((g,v)=>{var y,w=ua(i)?e(g,v):Ui(g&&g.payload,i),S=ua(s)?{}:{id:"".concat(s,"-").concat(v)};return D.createElement(ZB,dS({key:"label-".concat(v)},ro(g),o,S,{fill:(y=n.fill)!==null&&y!==void 0?y:g.fill,parentViewBox:g.parentViewBox,value:w,textBreakAll:a,viewBox:g.viewBox,index:v}))}))}cw.displayName="LabelList";function lre(t){var{label:e}=t;return e?e===!0?D.createElement(cw,{key:"labelList-implicit"}):D.isValidElement(e)||Uie(e)?D.createElement(cw,{key:"labelList-implicit",content:e}):typeof e=="object"?D.createElement(cw,dS({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}var eI=t=>t.graphicalItems.polarItems,cre=pe([ti,Ky],s_),O2=pe([eI,di,cre],a_),ure=pe([O2],o_),L2=pe([ure,YM],l_),hre=pe([L2,di,O2],u_);pe([L2,di,O2],(t,e,n)=>n.length>0?t.flatMap(i=>n.flatMap(r=>{var s,a=Ui(i,(s=e.dataKey)!==null&&s!==void 0?s:r.dataKey);return{value:a,errorDomain:[]}})).filter(Boolean):e?.dataKey!=null?t.map(i=>({value:Ui(i,e.dataKey),errorDomain:[]})):t.map(i=>({value:i,errorDomain:[]})));var B6=()=>{},dre=pe([L2,di,O2,T2,ti],g_),fre=pe([di,d_,f_,B6,dre,B6,Fn,ti],p_),tI=pe([di,Fn,L2,hre,qy,ti,fre],m_),gre=pe([tI,di,fm],C_);pe([di,tI,gre,ti],w_);var pre={radiusAxis:{},angleAxis:{}},nI=da({name:"polarAxis",initialState:pre,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:BTe,removeRadiusAxis:ITe,addAngleAxis:HTe,removeAngleAxis:GTe}=nI.actions,mre=nI.reducer;function I6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function H6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?I6(Object(n),!0).forEach(function(i){vre(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I6(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function vre(t,e,n){return(e=yre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yre(t){var e=Cre(t,"string");return typeof e=="symbol"?e:e+""}function Cre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bre=(t,e)=>e,F_=pe([eI,bre],(t,e)=>t.filter(n=>n.type==="pie").find(n=>n.id===e)),wre=[],k_=(t,e,n)=>n?.length===0?wre:n,iI=pe([YM,F_,k_],(t,e,n)=>{var{chartData:i}=t;if(e!=null){var r;if(e?.data!=null&&e.data.length>0?r=e.data:r=i,(!r||!r.length)&&n!=null&&(r=n.map(s=>H6(H6({},e.presentationProps),s.props))),r!=null)return r}}),Sre=pe([iI,F_,k_],(t,e,n)=>{if(!(t==null||e==null))return t.map((i,r)=>{var s,a=Ui(i,e.nameKey,e.name),o;return n!=null&&(s=n[r])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?o=n[r].props.fill:typeof i=="object"&&i!=null&&"fill"in i?o=i.fill:o=e.fill,{value:Tk(a,e.dataKey),color:o,payload:i,type:e.legendType}})}),xre=pe([iI,F_,k_,pr],(t,e,n,i)=>{if(!(e==null||t==null))return Rse({offset:i,pieSettings:e,displayedData:t,cells:n})}),_E={exports:{}},vn={};var G6;function Are(){if(G6)return vn;G6=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.for("react.view_transition"),y=Symbol.for("react.client.reference");function w(S){if(typeof S=="object"&&S!==null){var x=S.$$typeof;switch(x){case t:switch(S=S.type,S){case n:case r:case i:case l:case u:case v:return S;default:switch(S=S&&S.$$typeof,S){case a:case o:case g:case h:return S;case s:return S;default:return x}}case e:return x}}}return vn.ContextConsumer=s,vn.ContextProvider=a,vn.Element=t,vn.ForwardRef=o,vn.Fragment=n,vn.Lazy=g,vn.Memo=h,vn.Portal=e,vn.Profiler=r,vn.StrictMode=i,vn.Suspense=l,vn.SuspenseList=u,vn.isContextConsumer=function(S){return w(S)===s},vn.isContextProvider=function(S){return w(S)===a},vn.isElement=function(S){return typeof S=="object"&&S!==null&&S.$$typeof===t},vn.isForwardRef=function(S){return w(S)===o},vn.isFragment=function(S){return w(S)===n},vn.isLazy=function(S){return w(S)===g},vn.isMemo=function(S){return w(S)===h},vn.isPortal=function(S){return w(S)===e},vn.isProfiler=function(S){return w(S)===r},vn.isStrictMode=function(S){return w(S)===i},vn.isSuspense=function(S){return w(S)===l},vn.isSuspenseList=function(S){return w(S)===u},vn.isValidElementType=function(S){return typeof S=="string"||typeof S=="function"||S===n||S===r||S===i||S===l||S===u||typeof S=="object"&&S!==null&&(S.$$typeof===g||S.$$typeof===h||S.$$typeof===a||S.$$typeof===s||S.$$typeof===o||S.$$typeof===y||S.getModuleId!==void 0)},vn.typeOf=w,vn}var z6;function Ere(){return z6||(z6=1,_E.exports=Are()),_E.exports}var Tre=Ere(),V6=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",U6=null,PE=null,rI=t=>{if(t===U6&&Array.isArray(PE))return PE;var e=[];return D.Children.forEach(t,n=>{ua(n)||(Tre.isFragment(n)?e=e.concat(rI(n.props.children)):e.push(n))}),PE=e,U6=t,e};function sI(t,e){var n=[],i=[];return Array.isArray(e)?i=e.map(r=>V6(r)):i=[V6(e)],rI(t).forEach(r=>{var s=ny(r,"type.displayName")||ny(r,"type.name");i.indexOf(s)!==-1&&n.push(r)}),n}var OE={},j6;function Rre(){return j6||(j6=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const r=n[Symbol.toStringTag];return r==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${r}]`}let i=n;for(;Object.getPrototypeOf(i)!==null;)i=Object.getPrototypeOf(i);return Object.getPrototypeOf(n)===i}t.isPlainObject=e})(OE)),OE}var LE,W6;function Dre(){return W6||(W6=1,LE=Rre().isPlainObject),LE}var Mre=Dre();const _re=Wo(Mre);function q6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function K6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?q6(Object(n),!0).forEach(function(i){Pre(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q6(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Pre(t,e,n){return(e=Ore(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ore(t){var e=Lre(t,"string");return typeof e=="symbol"?e:e+""}function Lre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fS(){return fS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},fS.apply(null,arguments)}var Y6=(t,e,n,i,r)=>{var s=n-i,a;return a="M ".concat(t,",").concat(e),a+="L ".concat(t+n,",").concat(e),a+="L ".concat(t+n-s/2,",").concat(e+r),a+="L ".concat(t+n-s/2-i,",").concat(e+r),a+="L ".concat(t,",").concat(e," Z"),a},Fre={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},kre=t=>{var e=ou(t,Fre),{x:n,y:i,upperWidth:r,lowerWidth:s,height:a,className:o}=e,{animationEasing:l,animationDuration:u,animationBegin:h,isUpdateAnimationActive:g}=e,v=D.useRef(null),[y,w]=D.useState(-1),S=D.useRef(r),x=D.useRef(s),T=D.useRef(a),_=D.useRef(n),M=D.useRef(i),F=AM(t,"trapezoid-");if(D.useEffect(()=>{if(v.current&&v.current.getTotalLength)try{var $=v.current.getTotalLength();$&&w($)}catch{}},[]),n!==+n||i!==+i||r!==+r||s!==+s||a!==+a||r===0&&s===0||a===0)return null;var L=Wi("recharts-trapezoid",o);if(!g)return D.createElement("g",null,D.createElement("path",fS({},ro(e),{className:L,d:Y6(n,i,r,s,a)})));var k=S.current,B=x.current,H=T.current,U=_.current,W=M.current,j="0px ".concat(y===-1?1:y,"px"),X="".concat(y,"px 0px"),ne=Bk(["strokeDasharray"],u,l);return D.createElement(xM,{animationId:F,key:F,canBegin:y>0,duration:u,easing:l,isActive:g,begin:h},$=>{var q=Go(k,r,$),z=Go(B,s,$),K=Go(H,a,$),Q=Go(U,n,$),oe=Go(W,i,$);v.current&&(S.current=q,x.current=z,T.current=K,_.current=Q,M.current=oe);var le=$>0?{transition:ne,strokeDasharray:X}:{strokeDasharray:j};return D.createElement("path",fS({},ro(e),{className:L,d:Y6(Q,oe,q,z,K),ref:v,style:K6(K6({},le),e.style)}))})},Nre=["option","shapeType","propTransformer","activeClassName","isActive"];function Bre(t,e){if(t==null)return{};var n,i,r=Ire(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Ire(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function X6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function gS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?X6(Object(n),!0).forEach(function(i){Hre(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X6(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Hre(t,e,n){return(e=Gre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gre(t){var e=zre(t,"string");return typeof e=="symbol"?e:e+""}function zre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vre(t,e){return gS(gS({},e),t)}function Ure(t,e){return t==="symbols"}function $6(t){var{shapeType:e,elementProps:n}=t;switch(e){case"rectangle":return D.createElement(zk,n);case"trapezoid":return D.createElement(kre,n);case"sector":return D.createElement(jk,n);case"symbols":if(Ure(e))return D.createElement(I9,n);break;default:return null}}function jre(t){return D.isValidElement(t)?t.props:t}function Wre(t){var{option:e,shapeType:n,propTransformer:i=Vre,activeClassName:r="recharts-active-shape",isActive:s}=t,a=Bre(t,Nre),o;if(D.isValidElement(e))o=D.cloneElement(e,gS(gS({},a),jre(e)));else if(typeof e=="function")o=e(a);else if(_re(e)&&typeof e!="boolean"){var l=i(e,a);o=D.createElement($6,{shapeType:n,elementProps:l})}else{var u=a;o=D.createElement($6,{shapeType:n,elementProps:u})}return s?D.createElement(Dh,{className:r},o):o}var qre=(t,e)=>{var n=Nr();return(i,r)=>s=>{t?.(i,r,s),n(wB({activeIndex:String(r),activeDataKey:e,activeCoordinate:i.tooltipPosition}))}},Kre=t=>{var e=Nr();return(n,i)=>r=>{t?.(n,i,r),e(Mte())}},Yre=(t,e)=>{var n=Nr();return(i,r)=>s=>{t?.(i,r,s),n(_te({activeIndex:String(r),activeDataKey:e,activeCoordinate:i.tooltipPosition}))}};function Xre(t){var{fn:e,args:n}=t,i=Nr(),r=Pf();return D.useLayoutEffect(()=>{if(!r){var s=e(n);return i(Tte(s)),()=>{i(Rte(s))}}},[e,n,i,r]),null}var $re=()=>{};function Zre(t){var{legendPayload:e}=t,n=Nr(),i=Nt(Fn);return D.useLayoutEffect(()=>i!=="centric"&&i!=="radial"?$re:(n(f$(e)),()=>{n(g$(e))}),[n,i,e]),null}var FE,Qre=()=>{var[t]=D.useState(()=>iy("uid-"));return t},Jre=(FE=Dj.useId)!==null&&FE!==void 0?FE:Qre;function ese(t,e){var n=Jre();return e||(t?"".concat(t,"-").concat(n):n)}var tse=D.createContext(void 0),nse=t=>{var{id:e,type:n,children:i}=t,r=ese("recharts-".concat(n),e);return D.createElement(tse.Provider,{value:r},i(r))},ise={cartesianItems:[],polarItems:[]},aI=da({name:"graphicalItems",initialState:ise,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:ds()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:i}=e.payload,r=Wc(t).cartesianItems.indexOf(n);r>-1&&(t.cartesianItems[r]=i)},prepare:ds()},removeCartesianGraphicalItem:{reducer(t,e){var n=Wc(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:ds()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:ds()},removePolarGraphicalItem:{reducer(t,e){var n=Wc(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:ds()}}}),{addCartesianGraphicalItem:zTe,replaceCartesianGraphicalItem:VTe,removeCartesianGraphicalItem:UTe,addPolarGraphicalItem:rse,removePolarGraphicalItem:sse}=aI.actions,ase=aI.reducer;function ose(t){var e=Nr();return D.useLayoutEffect(()=>(e(rse(t)),()=>{e(sse(t))}),[e,t]),null}var lse=["onMouseEnter","onClick","onMouseLeave"],cse=["id"],use=["id"];function N_(t,e){if(t==null)return{};var n,i,r=hse(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function hse(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function Z6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Qn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Z6(Object(n),!0).forEach(function(i){dse(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z6(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function dse(t,e,n){return(e=fse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fse(t){var e=gse(t,"string");return typeof e=="symbol"?e:e+""}function gse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mh(){return Mh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Mh.apply(null,arguments)}function pse(t){var e=D.useMemo(()=>sI(t.children,P2),[t.children]),n=Nt(i=>Sre(i,t.id,e));return n==null?null:D.createElement(Zre,{legendPayload:n})}function mse(t){var{dataKey:e,nameKey:n,sectors:i,stroke:r,strokeWidth:s,fill:a,name:o,hide:l,tooltipType:u}=t;return{dataDefinedOnItem:i.map(h=>h.tooltipPayload),positions:i.map(h=>h.tooltipPosition),settings:{stroke:r,strokeWidth:s,fill:a,dataKey:e,nameKey:n,name:Tk(o,e),hide:l,type:u,color:a,unit:""}}}var vse=(t,e)=>t>e?"start":t<e?"end":"middle",yse=(t,e,n)=>aa(typeof e=="function"?e(t):e,n,n*.8),Cse=(t,e,n)=>{var{top:i,left:r,width:s,height:a}=e,o=Ak(s,a),l=r+aa(t.cx,s,s/2),u=i+aa(t.cy,a,a/2),h=aa(t.innerRadius,o,0),g=yse(n,t.outerRadius,o),v=t.maxRadius||Math.sqrt(s*s+a*a)/2;return{cx:l,cy:u,innerRadius:h,outerRadius:g,maxRadius:v}},bse=(t,e)=>{var n=Gs(e-t),i=Math.min(Math.abs(e-t),360);return n*i};function wse(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var Sse=(t,e)=>{if(D.isValidElement(t))return D.cloneElement(t,e);if(typeof t=="function")return t(e);var n=Wi("recharts-pie-label-line",typeof t!="boolean"?t.className:"");return D.createElement(Nk,Mh({},e,{type:"linear",className:n}))},xse=(t,e,n)=>{if(D.isValidElement(t))return D.cloneElement(t,e);var i=n;if(typeof t=="function"&&(i=t(e),D.isValidElement(i)))return i;var r=Wi("recharts-pie-label-text",wse(t));return D.createElement(L_,Mh({},e,{alignmentBaseline:"middle",className:r}),i)};function Ase(t){var{sectors:e,props:n,showLabels:i}=t,{label:r,labelLine:s,dataKey:a}=n;if(!i||!r||!e)return null;var o=qp(n),l=$T(r),u=$T(s),h=typeof r=="object"&&"offsetRadius"in r&&typeof r.offsetRadius=="number"&&r.offsetRadius||20,g=e.map((v,y)=>{var w=(v.startAngle+v.endAngle)/2,S=Vi(v.cx,v.cy,v.outerRadius+h,w),x=Qn(Qn(Qn(Qn({},o),v),{},{stroke:"none"},l),{},{index:y,textAnchor:vse(S.x,v.cx)},S),T=Qn(Qn(Qn(Qn({},o),v),{},{fill:"none",stroke:v.fill},u),{},{index:y,points:[Vi(v.cx,v.cy,v.outerRadius,w),S],key:"line"});return D.createElement(Dh,{key:"label-".concat(v.startAngle,"-").concat(v.endAngle,"-").concat(v.midAngle,"-").concat(y)},s&&Sse(s,T),xse(r,x,Ui(v,a)))});return D.createElement(Dh,{className:"recharts-pie-labels"},g)}function Ese(t){var{sectors:e,props:n,showLabels:i}=t,{label:r}=n;return typeof r=="object"&&r!=null&&"position"in r?D.createElement(lre,{label:r}):D.createElement(Ase,{sectors:e,props:n,showLabels:i})}function Tse(t){var{sectors:e,activeShape:n,inactiveShape:i,allOtherPieProps:r}=t,s=Nt(fy),{onMouseEnter:a,onClick:o,onMouseLeave:l}=r,u=N_(r,lse),h=qre(a,r.dataKey),g=Kre(l),v=Yre(o,r.dataKey);return e==null||e.length===0?null:D.createElement(D.Fragment,null,e.map((y,w)=>{if(y?.startAngle===0&&y?.endAngle===0&&e.length!==1)return null;var S=n&&String(w)===s,x=s?i:null,T=S?n:x,_=Qn(Qn({},y),{},{stroke:y.stroke,tabIndex:-1,[Dk]:w,[Mk]:r.dataKey});return D.createElement(Dh,Mh({key:"sector-".concat(y?.startAngle,"-").concat(y?.endAngle,"-").concat(y.midAngle,"-").concat(w),tabIndex:-1,className:"recharts-pie-sector"},vK(u,y,w),{onMouseEnter:h(y,w),onMouseLeave:g(y,w),onClick:v(y,w)}),D.createElement(Wre,Mh({option:T,isActive:S,shapeType:"sector"},_)))}))}function Rse(t){var e,{pieSettings:n,displayedData:i,cells:r,offset:s}=t,{cornerRadius:a,startAngle:o,endAngle:l,dataKey:u,nameKey:h,tooltipType:g}=n,v=Math.abs(n.minAngle),y=bse(o,l),w=Math.abs(y),S=i.length<=1?0:(e=n.paddingAngle)!==null&&e!==void 0?e:0,x=i.filter(k=>Ui(k,u,0)!==0).length,T=(w>=360?x:x-1)*S,_=w-x*v-T,M=i.reduce((k,B)=>{var H=Ui(B,u,0);return k+(At(H)?H:0)},0),F;if(M>0){var L;F=i.map((k,B)=>{var H=Ui(k,u,0),U=Ui(k,h,B),W=Cse(n,s,k),j=(At(H)?H:0)/M,X,ne=Qn(Qn({},k),r&&r[B]&&r[B].props);B?X=L.endAngle+Gs(y)*S*(H!==0?1:0):X=o;var $=X+Gs(y)*((H!==0?v:0)+j*_),q=(X+$)/2,z=(W.innerRadius+W.outerRadius)/2,K=[{name:U,value:H,payload:ne,dataKey:u,type:g}],Q=Vi(W.cx,W.cy,z,q);return L=Qn(Qn(Qn(Qn({},n.presentationProps),{},{percent:j,cornerRadius:a,name:U,tooltipPayload:K,midAngle:q,middleRadius:z,tooltipPosition:Q},ne),W),{},{value:H,startAngle:X,endAngle:$,payload:ne,paddingAngle:Gs(y)*S}),L})}return F}function Dse(t){var{showLabels:e,sectors:n,children:i}=t,r=D.useMemo(()=>!e||!n?[]:n.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[n,e]);return D.createElement(sre,{value:e?r:void 0},i)}function Mse(t){var{props:e,previousSectorsRef:n}=t,{sectors:i,isAnimationActive:r,animationBegin:s,animationDuration:a,animationEasing:o,activeShape:l,inactiveShape:u,onAnimationStart:h,onAnimationEnd:g}=e,v=AM(e,"recharts-pie-"),y=n.current,[w,S]=D.useState(!1),x=D.useCallback(()=>{typeof g=="function"&&g(),S(!1)},[g]),T=D.useCallback(()=>{typeof h=="function"&&h(),S(!0)},[h]);return D.createElement(Dse,{showLabels:!w,sectors:i},D.createElement(xM,{animationId:v,begin:s,duration:a,isActive:r,easing:o,onAnimationStart:T,onAnimationEnd:x,key:v},_=>{var M=[],F=i&&i[0],L=F?.startAngle;return i?.forEach((k,B)=>{var H=y&&y[B],U=B>0?ny(k,"paddingAngle",0):0;if(H){var W=Go(H.endAngle-H.startAngle,k.endAngle-k.startAngle,_),j=Qn(Qn({},k),{},{startAngle:L+U,endAngle:L+W+U});M.push(j),L=j.endAngle}else{var{endAngle:X,startAngle:ne}=k,$=Go(0,X-ne,_),q=Qn(Qn({},k),{},{startAngle:L+U,endAngle:L+$+U});M.push(q),L=q.endAngle}}),n.current=M,D.createElement(Dh,null,D.createElement(Tse,{sectors:M,activeShape:l,inactiveShape:u,allOtherPieProps:e}))}),D.createElement(Ese,{showLabels:!w,sectors:i,props:e}),e.children)}var _se={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!zy.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function Pse(t){var{id:e}=t,n=N_(t,cse),{hide:i,className:r,rootTabIndex:s}=t,a=D.useMemo(()=>sI(t.children,P2),[t.children]),o=Nt(h=>xre(h,e,a)),l=D.useRef(null),u=Wi("recharts-pie",r);return i||o==null?(l.current=null,D.createElement(Dh,{tabIndex:s,className:u})):D.createElement(D.Fragment,null,D.createElement(Xre,{fn:mse,args:Qn(Qn({},t),{},{sectors:o})}),D.createElement(Dh,{tabIndex:s,className:u},D.createElement(Mse,{props:Qn(Qn({},n),{},{sectors:o}),previousSectorsRef:l})))}function oI(t){var e=ou(t,_se),{id:n}=e,i=N_(e,use),r=qp(i);return D.createElement(nse,{id:n,type:"pie"},s=>D.createElement(D.Fragment,null,D.createElement(ose,{type:"pie",id:s,data:i.data,dataKey:i.dataKey,hide:i.hide,angleAxisId:0,radiusAxisId:0,name:i.name,nameKey:i.nameKey,tooltipType:i.tooltipType,legendType:i.legendType,fill:i.fill,cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,paddingAngle:i.paddingAngle,minAngle:i.minAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius,cornerRadius:i.cornerRadius,presentationProps:r,maxRadius:e.maxRadius}),D.createElement(pse,Mh({},i,{id:s})),D.createElement(Pse,Mh({},i,{id:s}))))}oI.displayName="Pie";function Q6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function J6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Q6(Object(n),!0).forEach(function(i){Ose(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q6(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Ose(t,e,n){return(e=Lse(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Lse(t){var e=Fse(t,"string");return typeof e=="symbol"?e:e+""}function Fse(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kse={xAxis:{},yAxis:{},zAxis:{}},lI=da({name:"cartesianAxis",initialState:kse,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:ds()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:ds()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:ds()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:ds()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:ds()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:ds()},updateYAxisWidth(t,e){var{id:n,width:i}=e.payload,r=t.yAxis[n];if(r){var s=r.widthHistory||[];if(s.length===3&&s[0]===s[2]&&i===s[1]&&i!==r.width&&Math.abs(i-s[0])<=1)return;var a=[...s,i].slice(-3);t.yAxis[n]=J6(J6({},t.yAxis[n]),{},{width:i,widthHistory:a})}}}}),{addXAxis:jTe,removeXAxis:WTe,addYAxis:qTe,removeYAxis:KTe,addZAxis:YTe,removeZAxis:XTe,updateYAxisWidth:$Te}=lI.actions,Nse=lI.reducer,Bse=pe([pr],t=>{if(t)return{top:t.top,bottom:t.bottom,left:t.left,right:t.right}}),Ise=pe([Bse,su,au],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),Hse=()=>Nt(Ise),Gse={},cI=da({name:"errorBars",initialState:Gse,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:i}=e.payload;t[n]||(t[n]=[]),t[n].push(i)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:i,next:r}=e.payload;t[n]&&(t[n]=t[n].map(s=>s.dataKey===i.dataKey&&s.direction===i.direction?r:s))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:i}=e.payload;t[n]&&(t[n]=t[n].filter(r=>r.dataKey!==i.dataKey||r.direction!==i.direction))}}}),{addErrorBar:ZTe,replaceErrorBar:QTe,removeErrorBar:JTe}=cI.actions,zse=cI.reducer,Vse=t=>{var{chartData:e}=t,n=Nr(),i=Pf();return D.useEffect(()=>i?()=>{}:(n(p6(e)),()=>{n(p6(void 0))}),[e,n,i]),null},e8={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},uI=da({name:"brush",initialState:e8,reducers:{setBrushSettings(t,e){return e.payload==null?e8:e.payload}}}),{setBrushSettings:eRe}=uI.actions,Use=uI.reducer,jse={dots:[],areas:[],lines:[]},hI=da({name:"referenceElements",initialState:jse,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=Wc(t).dots.findIndex(i=>i===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=Wc(t).areas.findIndex(i=>i===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=Wc(t).lines.findIndex(i=>i===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:tRe,removeDot:nRe,addArea:iRe,removeArea:rRe,addLine:sRe,removeLine:aRe}=hI.actions,Wse=hI.reducer,qse=D.createContext(void 0),Kse=t=>{var{children:e}=t,[n]=D.useState("".concat(iy("recharts"),"-clip")),i=Hse();if(i==null)return null;var{x:r,y:s,width:a,height:o}=i;return D.createElement(qse.Provider,{value:n},D.createElement("defs",null,D.createElement("clipPath",{id:n},D.createElement("rect",{x:r,y:s,height:o,width:a}))),e)},kE={exports:{}},NE={};var t8;function Yse(){if(t8)return NE;t8=1;var t=Rf();function e(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var n=typeof Object.is=="function"?Object.is:e,i=t.useSyncExternalStore,r=t.useRef,s=t.useEffect,a=t.useMemo,o=t.useDebugValue;return NE.useSyncExternalStoreWithSelector=function(l,u,h,g,v){var y=r(null);if(y.current===null){var w={hasValue:!1,value:null};y.current=w}else w=y.current;y=a(function(){function x(L){if(!T){if(T=!0,_=L,L=g(L),v!==void 0&&w.hasValue){var k=w.value;if(v(k,L))return M=k}return M=L}if(k=M,n(_,L))return k;var B=g(L);return v!==void 0&&v(k,B)?(_=L,k):(_=L,M=B)}var T=!1,_,M,F=h===void 0?null:h;return[function(){return x(u())},F===null?void 0:function(){return x(F())}]},[u,h,g,v]);var S=i(l,y[0],y[1]);return s(function(){w.hasValue=!0,w.value=S},[S]),o(S),S},NE}var n8;function Xse(){return n8||(n8=1,kE.exports=Yse()),kE.exports}Xse();function $se(t){t()}function Zse(){let t=null,e=null;return{clear(){t=null,e=null},notify(){$se(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let i=t;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0;const r=e={callback:n,next:null,prev:e};return r.prev?r.prev.next=r:t=r,function(){!i||t===null||(i=!1,r.next?r.next.prev=r.prev:e=r.prev,r.prev?r.prev.next=r.next:t=r.next)}}}}var i8={notify(){},get:()=>[]};function Qse(t,e){let n,i=i8,r=0,s=!1;function a(S){h();const x=i.subscribe(S);let T=!1;return()=>{T||(T=!0,x(),g())}}function o(){i.notify()}function l(){w.onStateChange&&w.onStateChange()}function u(){return s}function h(){r++,n||(n=t.subscribe(l),i=Zse())}function g(){r--,n&&r===0&&(n(),n=void 0,i.clear(),i=i8)}function v(){s||(s=!0,h())}function y(){s&&(s=!1,g())}const w={addNestedSub:a,notifyNestedSubs:o,handleChangeWrapper:l,isSubscribed:u,trySubscribe:v,tryUnsubscribe:y,getListeners:()=>i};return w}var Jse=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",eae=Jse(),tae=()=>typeof navigator<"u"&&navigator.product==="ReactNative",nae=tae(),iae=()=>eae||nae?D.useLayoutEffect:D.useEffect,rae=iae(),sae=Symbol.for("react-redux-context"),aae=typeof globalThis<"u"?globalThis:{};function oae(){if(!D.createContext)return{};const t=aae[sae]??=new Map;let e=t.get(D.createContext);return e||(e=D.createContext(null),t.set(D.createContext,e)),e}var lae=oae();function cae(t){const{children:e,context:n,serverState:i,store:r}=t,s=D.useMemo(()=>{const l=Qse(r);return{store:r,subscription:l,getServerState:i?()=>i:void 0}},[r,i]),a=D.useMemo(()=>r.getState(),[r]);rae(()=>{const{subscription:l}=s;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==r.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[s,a]);const o=n||lae;return D.createElement(o.Provider,{value:s},e)}var uae=cae,hae=(t,e)=>e,B_=pe([hae,Fn,KN,tr,OB,cu,xne,pr],Dne),I_=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,i=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/i)}},dI=so("mouseClick"),fI=Hy();fI.startListening({actionCreator:dI,effect:(t,e)=>{var n=t.payload,i=B_(e.getState(),I_(n));i?.activeIndex!=null&&e.dispatch(Pte({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}});var kR=so("mouseMove"),gI=Hy();gI.startListening({actionCreator:kR,effect:(t,e)=>{var n=t.payload,i=e.getState(),r=A_(i,i.tooltip.settings.shared),s=B_(i,I_(n));r==="axis"&&(s?.activeIndex!=null?e.dispatch(xB({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):e.dispatch(SB()))}});var r8={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},pI=da({name:"rootProps",initialState:r8,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:r8.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className}}}),dae=pI.reducer,{updateOptions:fae}=pI.actions,mI=da({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,e)=>e.payload}}),{updatePolarOptions:gae}=mI.actions,pae=mI.reducer,vI=so("keyDown"),yI=so("focus"),H_=Hy();H_.startListening({actionCreator:vI,effect:(t,e)=>{var n=e.getState(),i=n.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:r}=n.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var a=Number(E_(r,pm(n))),o=cu(n);if(s==="Enter"){var l=uS(n,"axis","hover",String(r.index));e.dispatch(PR({active:!r.active,activeIndex:r.index,activeDataKey:r.dataKey,activeCoordinate:l}));return}var u=Ste(n),h=u==="left-to-right"?1:-1,g=s==="ArrowRight"?1:-1,v=a+g*h;if(!(o==null||v>=o.length||v<0)){var y=uS(n,"axis","hover",String(v));e.dispatch(PR({active:!0,activeIndex:v.toString(),activeDataKey:void 0,activeCoordinate:y}))}}}}});H_.startListening({actionCreator:yI,effect:(t,e)=>{var n=e.getState(),i=n.rootProps.accessibilityLayer!==!1;if(i){var{keyboardInteraction:r}=n.tooltip;if(!r.active&&r.index==null){var s="0",a=uS(n,"axis","hover",String(s));e.dispatch(PR({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:a}))}}}});var qa=so("externalEvent"),CI=Hy();CI.startListening({actionCreator:qa,effect:(t,e)=>{if(t.payload.handler!=null){var n=e.getState(),i={activeCoordinate:gne(n),activeDataKey:dne(n),activeIndex:fy(n),activeLabel:kB(n),activeTooltipIndex:fy(n),isTooltipActive:pne(n)};t.payload.handler(i,t.payload.reactEvent)}}});var mae=pe([gm],t=>t.tooltipItemPayloads),vae=pe([mae,Zy,(t,e,n)=>e,(t,e,n)=>n],(t,e,n,i)=>{var r=t.find(o=>o.settings.dataKey===i);if(r!=null){var{positions:s}=r;if(s!=null){var a=e(s,n);return a}}}),bI=so("touchMove"),wI=Hy();wI.startListening({actionCreator:bI,effect:(t,e)=>{var n=t.payload,i=e.getState(),r=A_(i,i.tooltip.settings.shared);if(r==="axis"){var s=B_(i,I_({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));s?.activeIndex!=null&&e.dispatch(xB({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(r==="item"){var a,o=n.touches[0],l=document.elementFromPoint(o.clientX,o.clientY);if(!l||!l.getAttribute)return;var u=l.getAttribute(Dk),h=(a=l.getAttribute(Mk))!==null&&a!==void 0?a:void 0,g=vae(e.getState(),u,h);e.dispatch(wB({activeDataKey:h,activeIndex:u,activeCoordinate:g}))}}});var yae=J9({brush:Use,cartesianAxis:Nse,chartData:Wne,errorBars:zse,graphicalItems:ase,layout:oX,legend:p$,options:Gne,polarAxis:mre,polarOptions:pae,referenceElements:Wse,rootProps:dae,tooltip:Ote}),Cae=function(e){return OY({reducer:yae,preloadedState:e,middleware:n=>n({serializableCheck:!1}).concat([fI.middleware,gI.middleware,H_.middleware,CI.middleware,wI.middleware]),enhancers:n=>{var i=n;return typeof n=="function"&&(i=n()),i.concat(hk({type:"raf"}))},devTools:zy.devToolsEnabled})};function bae(t){var{preloadedState:e,children:n,reduxStoreName:i}=t,r=Pf(),s=D.useRef(null);if(r)return n;s.current==null&&(s.current=Cae(e));var a=mM;return D.createElement(uae,{context:a,store:s.current},n)}function wae(t){var{layout:e,margin:n}=t,i=Nr(),r=Pf();return D.useEffect(()=>{r||(i(rX(e)),i(iX(n)))},[i,r,e,n]),null}function Sae(t){var e=Nr();return D.useEffect(()=>{e(fae(t))},[e,t]),null}var xae=["children"];function Aae(t,e){if(t==null)return{};var n,i,r=Eae(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Eae(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}function pS(){return pS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},pS.apply(null,arguments)}var Tae={width:"100%",height:"100%",display:"block"},Rae=D.forwardRef((t,e)=>{var n=u$(),i=h$(),r=kk();if(!Yp(n)||!Yp(i))return null;var{children:s,otherAttributes:a,title:o,desc:l}=t,u,h;return typeof a.tabIndex=="number"?u=a.tabIndex:u=r?0:void 0,typeof a.role=="string"?h=a.role:h=r?"application":void 0,D.createElement(y9,pS({},a,{title:o,desc:l,role:h,tabIndex:u,width:n,height:i,style:Tae,ref:e}),s)}),Dae=t=>{var{children:e}=t,n=Nt(h2);if(!n)return null;var{width:i,height:r,y:s,x:a}=n;return D.createElement(y9,{width:i,height:r,x:a,y:s},e)},s8=D.forwardRef((t,e)=>{var{children:n}=t,i=Aae(t,xae),r=Pf();return r?D.createElement(Dae,null,n):D.createElement(Rae,pS({ref:e},i),n)});function Mae(){var t=Nr(),[e,n]=D.useState(null),i=Nt(FX);return D.useEffect(()=>{if(e!=null){var r=e.getBoundingClientRect(),s=r.width/e.offsetWidth;qs(s)&&s!==i&&t(aX(s))}},[e,t,i]),n}function a8(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function _ae(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?a8(Object(n),!0).forEach(function(i){Pae(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a8(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Pae(t,e,n){return(e=Oae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Oae(t){var e=Lae(t,"string");return typeof e=="symbol"?e:e+""}function Lae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function wf(){return wf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},wf.apply(null,arguments)}var Fae=()=>(eie(),null);function mS(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var kae=D.forwardRef((t,e)=>{var n,i,r=D.useRef(null),[s,a]=D.useState({containerWidth:mS((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:mS((i=t.style)===null||i===void 0?void 0:i.height)}),o=D.useCallback((u,h)=>{a(g=>{var v=Math.round(u),y=Math.round(h);return g.containerWidth===v&&g.containerHeight===y?g:{containerWidth:v,containerHeight:y}})},[]),l=D.useCallback(u=>{if(typeof e=="function"&&e(u),u!=null){var{width:h,height:g}=u.getBoundingClientRect();o(h,g);var v=w=>{var{width:S,height:x}=w[0].contentRect;o(S,x)},y=new ResizeObserver(v);y.observe(u),r.current=y}},[e,o]);return D.useEffect(()=>()=>{var u=r.current;u?.disconnect()},[o]),D.createElement(D.Fragment,null,D.createElement(f2,{width:s.containerWidth,height:s.containerHeight}),D.createElement("div",wf({ref:l},t)))}),Nae=D.forwardRef((t,e)=>{var{width:n,height:i}=t,[r,s]=D.useState({containerWidth:mS(n),containerHeight:mS(i)}),a=D.useCallback((l,u)=>{s(h=>{var g=Math.round(l),v=Math.round(u);return h.containerWidth===g&&h.containerHeight===v?h:{containerWidth:g,containerHeight:v}})},[]),o=D.useCallback(l=>{if(typeof e=="function"&&e(l),l!=null){var{width:u,height:h}=l.getBoundingClientRect();a(u,h)}},[e,a]);return D.createElement(D.Fragment,null,D.createElement(f2,{width:r.containerWidth,height:r.containerHeight}),D.createElement("div",wf({ref:o},t)))}),Bae=D.forwardRef((t,e)=>{var{width:n,height:i}=t;return D.createElement(D.Fragment,null,D.createElement(f2,{width:n,height:i}),D.createElement("div",wf({ref:e},t)))}),Iae=D.forwardRef((t,e)=>{var{width:n,height:i}=t;return Xc(n)||Xc(i)?D.createElement(Nae,wf({},t,{ref:e})):D.createElement(Bae,wf({},t,{ref:e}))});function Hae(t){return t===!0?kae:Iae}var Gae=D.forwardRef((t,e)=>{var{children:n,className:i,height:r,onClick:s,onContextMenu:a,onDoubleClick:o,onMouseDown:l,onMouseEnter:u,onMouseLeave:h,onMouseMove:g,onMouseUp:v,onTouchEnd:y,onTouchMove:w,onTouchStart:S,style:x,width:T,responsive:_,dispatchTouchEvents:M=!0}=t,F=D.useRef(null),L=Nr(),[k,B]=D.useState(null),[H,U]=D.useState(null),W=Mae(),j=SM(),X=j?.width>0?j.width:T,ne=j?.height>0?j.height:r,$=D.useCallback(me=>{W(me),typeof e=="function"&&e(me),B(me),U(me),me!=null&&(F.current=me)},[W,e,B,U]),q=D.useCallback(me=>{L(dI(me)),L(qa({handler:s,reactEvent:me}))},[L,s]),z=D.useCallback(me=>{L(kR(me)),L(qa({handler:u,reactEvent:me}))},[L,u]),K=D.useCallback(me=>{L(SB()),L(qa({handler:h,reactEvent:me}))},[L,h]),Q=D.useCallback(me=>{L(kR(me)),L(qa({handler:g,reactEvent:me}))},[L,g]),oe=D.useCallback(()=>{L(yI())},[L]),le=D.useCallback(me=>{L(vI(me.key))},[L]),V=D.useCallback(me=>{L(qa({handler:a,reactEvent:me}))},[L,a]),Z=D.useCallback(me=>{L(qa({handler:o,reactEvent:me}))},[L,o]),ae=D.useCallback(me=>{L(qa({handler:l,reactEvent:me}))},[L,l]),Ee=D.useCallback(me=>{L(qa({handler:v,reactEvent:me}))},[L,v]),Pe=D.useCallback(me=>{L(qa({handler:S,reactEvent:me}))},[L,S]),Ie=D.useCallback(me=>{M&&L(bI(me)),L(qa({handler:w,reactEvent:me}))},[L,M,w]),ze=D.useCallback(me=>{L(qa({handler:y,reactEvent:me}))},[L,y]),Ot=Hae(_);return D.createElement(zB.Provider,{value:k},D.createElement(Cq.Provider,{value:H},D.createElement(Ot,{width:X??x?.width,height:ne??x?.height,className:Wi("recharts-wrapper",i),style:_ae({position:"relative",cursor:"default",width:X,height:ne},x),onClick:q,onContextMenu:V,onDoubleClick:Z,onFocus:oe,onKeyDown:le,onMouseDown:ae,onMouseEnter:z,onMouseLeave:K,onMouseMove:Q,onMouseUp:Ee,onTouchEnd:ze,onTouchMove:Ie,onTouchStart:Pe,ref:$},D.createElement(Fae,null),n)))}),zae=["width","height","responsive","children","className","style","compact","title","desc"];function Vae(t,e){if(t==null)return{};var n,i,r=Uae(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Uae(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var jae=D.forwardRef((t,e)=>{var{width:n,height:i,responsive:r,children:s,className:a,style:o,compact:l,title:u,desc:h}=t,g=Vae(t,zae),v=qp(g);return l?D.createElement(D.Fragment,null,D.createElement(f2,{width:n,height:i}),D.createElement(s8,{otherAttributes:v,title:u,desc:h},s)):D.createElement(Gae,{className:a,style:o,width:n,height:i,responsive:r,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},D.createElement(s8,{otherAttributes:v,title:u,desc:h,ref:e},D.createElement(Kse,null,s)))});function Wae(t){var e=Nr();return D.useEffect(()=>{e(gae(t))},[e,t]),null}var qae=["layout"];function NR(){return NR=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},NR.apply(null,arguments)}function Kae(t,e){if(t==null)return{};var n,i,r=Yae(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function Yae(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}var Xae={top:5,right:5,bottom:5,left:5},$ae={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Xae,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1},Zae=D.forwardRef(function(e,n){var i,r=ou(e.categoricalChartProps,$ae),{layout:s}=r,a=Kae(r,qae),{chartName:o,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:h}=e,g={chartName:o,defaultTooltipEventType:l,validateTooltipEventTypes:u,tooltipPayloadSearcher:h,eventEmitter:void 0};return D.createElement(bae,{preloadedState:{options:g},reduxStoreName:(i=r.id)!==null&&i!==void 0?i:o},D.createElement(Vse,{chartData:r.data}),D.createElement(wae,{layout:s,margin:r.margin}),D.createElement(Sae,{accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className}),D.createElement(Wae,{cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius}),D.createElement(jae,NR({},a,{ref:n})))}),Qae=["item"],Jae={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},eoe=D.forwardRef((t,e)=>{var n=ou(t,Jae);return D.createElement(Zae,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Qae,tooltipPayloadSearcher:Ine,categoricalChartProps:n,ref:e})});const SI=D.createContext({});function toe(t){const e=D.useRef(null);return e.current===null&&(e.current=t()),e.current}const G_=typeof window<"u",noe=G_?D.useLayoutEffect:D.useEffect,z_=D.createContext(null);function V_(t,e){t.indexOf(e)===-1&&t.push(e)}function U_(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const tu=(t,e,n)=>n>e?e:n<t?t:n;let j_=()=>{};const nu={},xI=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function AI(t){return typeof t=="object"&&t!==null}const EI=t=>/^0[^.\s]+$/u.test(t);function W_(t){let e;return()=>(e===void 0&&(e=t()),e)}const io=t=>t,ioe=(t,e)=>n=>e(t(n)),Jy=(...t)=>t.reduce(ioe),py=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i};class q_{constructor(){this.subscriptions=[]}add(e){return V_(this.subscriptions,e),()=>U_(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let s=0;s<r;s++){const a=this.subscriptions[s];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Wl=t=>t*1e3,to=t=>t/1e3;function TI(t,e){return e?t*(1e3/e):0}const RI=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,roe=1e-7,soe=12;function aoe(t,e,n,i,r){let s,a,o=0;do a=e+(n-e)/2,s=RI(a,i,r)-t,s>0?n=a:e=a;while(Math.abs(s)>roe&&++o<soe);return a}function eC(t,e,n,i){if(t===e&&n===i)return io;const r=s=>aoe(s,0,1,t,n);return s=>s===0||s===1?s:RI(r(s),e,i)}const DI=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,MI=t=>e=>1-t(1-e),_I=eC(.33,1.53,.69,.99),K_=MI(_I),PI=DI(K_),OI=t=>(t*=2)<1?.5*K_(t):.5*(2-Math.pow(2,-10*(t-1))),Y_=t=>1-Math.sin(Math.acos(t)),LI=MI(Y_),FI=DI(Y_),ooe=eC(.42,0,1,1),loe=eC(0,0,.58,1),kI=eC(.42,0,.58,1),coe=t=>Array.isArray(t)&&typeof t[0]!="number",NI=t=>Array.isArray(t)&&typeof t[0]=="number",uoe={linear:io,easeIn:ooe,easeInOut:kI,easeOut:loe,circIn:Y_,circInOut:FI,circOut:LI,backIn:K_,backInOut:PI,backOut:_I,anticipate:OI},hoe=t=>typeof t=="string",o8=t=>{if(NI(t)){j_(t.length===4);const[e,n,i,r]=t;return eC(e,n,i,r)}else if(hoe(t))return uoe[t];return t},E1=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function doe(t,e){let n=new Set,i=new Set,r=!1,s=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(h){a.has(h)&&(u.schedule(h),t()),h(o)}const u={schedule:(h,g=!1,v=!1)=>{const w=v&&r?n:i;return g&&a.add(h),w.has(h)||w.add(h),h},cancel:h=>{i.delete(h),a.delete(h)},process:h=>{if(o=h,r){s=!0;return}r=!0,[n,i]=[i,n],n.forEach(l),n.clear(),r=!1,s&&(s=!1,u.process(h))}};return u}const foe=40;function BI(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=E1.reduce((M,F)=>(M[F]=doe(s),M),{}),{setup:o,read:l,resolveKeyframes:u,preUpdate:h,update:g,preRender:v,render:y,postRender:w}=a,S=()=>{const M=nu.useManualTiming?r.timestamp:performance.now();n=!1,nu.useManualTiming||(r.delta=i?1e3/60:Math.max(Math.min(M-r.timestamp,foe),1)),r.timestamp=M,r.isProcessing=!0,o.process(r),l.process(r),u.process(r),h.process(r),g.process(r),v.process(r),y.process(r),w.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(S))},x=()=>{n=!0,i=!0,r.isProcessing||t(S)};return{schedule:E1.reduce((M,F)=>{const L=a[F];return M[F]=(k,B=!1,H=!1)=>(n||x(),L.schedule(k,B,H)),M},{}),cancel:M=>{for(let F=0;F<E1.length;F++)a[E1[F]].cancel(M)},state:r,steps:a}}const{schedule:ei,cancel:_h,state:_r,steps:BE}=BI(typeof requestAnimationFrame<"u"?requestAnimationFrame:io,!0);let uw;function goe(){uw=void 0}const Vs={now:()=>(uw===void 0&&Vs.set(_r.isProcessing||nu.useManualTiming?_r.timestamp:performance.now()),uw),set:t=>{uw=t,queueMicrotask(goe)}},II=t=>e=>typeof e=="string"&&e.startsWith(t),X_=II("--"),poe=II("var(--"),$_=t=>poe(t)?moe.test(t.split("/*")[0].trim()):!1,moe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,mm={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},my={...mm,transform:t=>tu(0,1,t)},T1={...mm,default:1},z0=t=>Math.round(t*1e5)/1e5,Z_=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function voe(t){return t==null}const yoe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Q_=(t,e)=>n=>!!(typeof n=="string"&&yoe.test(n)&&n.startsWith(t)||e&&!voe(n)&&Object.prototype.hasOwnProperty.call(n,e)),HI=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,s,a,o]=i.match(Z_);return{[t]:parseFloat(r),[e]:parseFloat(s),[n]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},Coe=t=>tu(0,255,t),IE={...mm,transform:t=>Math.round(Coe(t))},$d={test:Q_("rgb","red"),parse:HI("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+IE.transform(t)+", "+IE.transform(e)+", "+IE.transform(n)+", "+z0(my.transform(i))+")"};function boe(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const BR={test:Q_("#"),parse:boe,transform:$d.transform},tC=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ph=tC("deg"),ql=tC("%"),at=tC("px"),woe=tC("vh"),Soe=tC("vw"),l8={...ql,parse:t=>ql.parse(t)/100,transform:t=>ql.transform(t*100)},Cp={test:Q_("hsl","hue"),parse:HI("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+ql.transform(z0(e))+", "+ql.transform(z0(n))+", "+z0(my.transform(i))+")"},Gi={test:t=>$d.test(t)||BR.test(t)||Cp.test(t),parse:t=>$d.test(t)?$d.parse(t):Cp.test(t)?Cp.parse(t):BR.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?$d.transform(t):Cp.transform(t),getAnimatableNone:t=>{const e=Gi.parse(t);return e.alpha=0,Gi.transform(e)}},xoe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Aoe(t){return isNaN(t)&&typeof t=="string"&&(t.match(Z_)?.length||0)+(t.match(xoe)?.length||0)>0}const GI="number",zI="color",Eoe="var",Toe="var(",c8="${}",Roe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function vy(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let s=0;const o=e.replace(Roe,l=>(Gi.test(l)?(i.color.push(s),r.push(zI),n.push(Gi.parse(l))):l.startsWith(Toe)?(i.var.push(s),r.push(Eoe),n.push(l)):(i.number.push(s),r.push(GI),n.push(parseFloat(l))),++s,c8)).split(c8);return{values:n,split:o,indexes:i,types:r}}function VI(t){return vy(t).values}function UI(t){const{split:e,types:n}=vy(t),i=e.length;return r=>{let s="";for(let a=0;a<i;a++)if(s+=e[a],r[a]!==void 0){const o=n[a];o===GI?s+=z0(r[a]):o===zI?s+=Gi.transform(r[a]):s+=r[a]}return s}}const Doe=t=>typeof t=="number"?0:Gi.test(t)?Gi.getAnimatableNone(t):t;function Moe(t){const e=VI(t);return UI(t)(e.map(Doe))}const Ph={test:Aoe,parse:VI,createTransformer:UI,getAnimatableNone:Moe};function HE(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function _oe({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,s=0,a=0;if(!e)r=s=a=n;else{const o=n<.5?n*(1+e):n+e-n*e,l=2*n-o;r=HE(l,o,t+1/3),s=HE(l,o,t),a=HE(l,o,t-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:i}}function vS(t,e){return n=>n>0?e:t}const ci=(t,e,n)=>t+(e-t)*n,GE=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},Poe=[BR,$d,Cp],Ooe=t=>Poe.find(e=>e.test(t));function u8(t){const e=Ooe(t);if(!e)return!1;let n=e.parse(t);return e===Cp&&(n=_oe(n)),n}const h8=(t,e)=>{const n=u8(t),i=u8(e);if(!n||!i)return vS(t,e);const r={...n};return s=>(r.red=GE(n.red,i.red,s),r.green=GE(n.green,i.green,s),r.blue=GE(n.blue,i.blue,s),r.alpha=ci(n.alpha,i.alpha,s),$d.transform(r))},IR=new Set(["none","hidden"]);function Loe(t,e){return IR.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Foe(t,e){return n=>ci(t,e,n)}function J_(t){return typeof t=="number"?Foe:typeof t=="string"?$_(t)?vS:Gi.test(t)?h8:Boe:Array.isArray(t)?jI:typeof t=="object"?Gi.test(t)?h8:koe:vS}function jI(t,e){const n=[...t],i=n.length,r=t.map((s,a)=>J_(s)(s,e[a]));return s=>{for(let a=0;a<i;a++)n[a]=r[a](s);return n}}function koe(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=J_(t[r])(t[r],e[r]));return r=>{for(const s in i)n[s]=i[s](r);return n}}function Noe(t,e){const n=[],i={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const s=e.types[r],a=t.indexes[s][i[s]],o=t.values[a]??0;n[r]=o,i[s]++}return n}const Boe=(t,e)=>{const n=Ph.createTransformer(e),i=vy(t),r=vy(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?IR.has(t)&&!r.values.length||IR.has(e)&&!i.values.length?Loe(t,e):Jy(jI(Noe(i,r),r.values),n):vS(t,e)};function WI(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?ci(t,e,n):J_(t)(t,e)}const Ioe=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>ei.update(e,n),stop:()=>_h(e),now:()=>_r.isProcessing?_r.timestamp:Vs.now()}},qI=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let s=0;s<r;s++)i+=Math.round(t(s/(r-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},yS=2e4;function e3(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<yS;)e+=n,i=t.next(e);return e>=yS?1/0:e}function Hoe(t,e=100,n){const i=n({...t,keyframes:[0,e]}),r=Math.min(e3(i),yS);return{type:"keyframes",ease:s=>i.next(r*s).value/e,duration:to(r)}}const Goe=5;function KI(t,e,n){const i=Math.max(e-Goe,0);return TI(n-t(i),e-i)}const bi={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},zE=.001;function zoe({duration:t=bi.duration,bounce:e=bi.bounce,velocity:n=bi.velocity,mass:i=bi.mass}){let r,s,a=1-e;a=tu(bi.minDamping,bi.maxDamping,a),t=tu(bi.minDuration,bi.maxDuration,to(t)),a<1?(r=u=>{const h=u*a,g=h*t,v=h-n,y=HR(u,a),w=Math.exp(-g);return zE-v/y*w},s=u=>{const g=u*a*t,v=g*n+n,y=Math.pow(a,2)*Math.pow(u,2)*t,w=Math.exp(-g),S=HR(Math.pow(u,2),a);return(-r(u)+zE>0?-1:1)*((v-y)*w)/S}):(r=u=>{const h=Math.exp(-u*t),g=(u-n)*t+1;return-zE+h*g},s=u=>{const h=Math.exp(-u*t),g=(n-u)*(t*t);return h*g});const o=5/t,l=Uoe(r,s,o);if(t=Wl(t),isNaN(l))return{stiffness:bi.stiffness,damping:bi.damping,duration:t};{const u=Math.pow(l,2)*i;return{stiffness:u,damping:a*2*Math.sqrt(i*u),duration:t}}}const Voe=12;function Uoe(t,e,n){let i=n;for(let r=1;r<Voe;r++)i=i-t(i)/e(i);return i}function HR(t,e){return t*Math.sqrt(1-e*e)}const joe=["duration","bounce"],Woe=["stiffness","damping","mass"];function d8(t,e){return e.some(n=>t[n]!==void 0)}function qoe(t){let e={velocity:bi.velocity,stiffness:bi.stiffness,damping:bi.damping,mass:bi.mass,isResolvedFromDuration:!1,...t};if(!d8(t,Woe)&&d8(t,joe))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,s=2*tu(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:bi.mass,stiffness:r,damping:s}}else{const n=zoe(t);e={...e,...n,mass:bi.mass},e.isResolvedFromDuration=!0}return e}function CS(t=bi.visualDuration,e=bi.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const s=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],o={done:!1,value:s},{stiffness:l,damping:u,mass:h,duration:g,velocity:v,isResolvedFromDuration:y}=qoe({...n,velocity:-to(n.velocity||0)}),w=v||0,S=u/(2*Math.sqrt(l*h)),x=a-s,T=to(Math.sqrt(l/h)),_=Math.abs(x)<5;i||(i=_?bi.restSpeed.granular:bi.restSpeed.default),r||(r=_?bi.restDelta.granular:bi.restDelta.default);let M;if(S<1){const L=HR(T,S);M=k=>{const B=Math.exp(-S*T*k);return a-B*((w+S*T*x)/L*Math.sin(L*k)+x*Math.cos(L*k))}}else if(S===1)M=L=>a-Math.exp(-T*L)*(x+(w+T*x)*L);else{const L=T*Math.sqrt(S*S-1);M=k=>{const B=Math.exp(-S*T*k),H=Math.min(L*k,300);return a-B*((w+S*T*x)*Math.sinh(H)+L*x*Math.cosh(H))/L}}const F={calculatedDuration:y&&g||null,next:L=>{const k=M(L);if(y)o.done=L>=g;else{let B=L===0?w:0;S<1&&(B=L===0?Wl(w):KI(M,L,k));const H=Math.abs(B)<=i,U=Math.abs(a-k)<=r;o.done=H&&U}return o.value=o.done?a:k,o},toString:()=>{const L=Math.min(e3(F),yS),k=qI(B=>F.next(L*B).value,L,30);return L+"ms "+k},toTransition:()=>{}};return F}CS.applyToOptions=t=>{const e=Hoe(t,100,CS);return t.ease=e.ease,t.duration=Wl(e.duration),t.type="keyframes",t};function GR({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:u=.5,restSpeed:h}){const g=t[0],v={done:!1,value:g},y=H=>o!==void 0&&H<o||l!==void 0&&H>l,w=H=>o===void 0?l:l===void 0||Math.abs(o-H)<Math.abs(l-H)?o:l;let S=n*e;const x=g+S,T=a===void 0?x:a(x);T!==x&&(S=T-g);const _=H=>-S*Math.exp(-H/i),M=H=>T+_(H),F=H=>{const U=_(H),W=M(H);v.done=Math.abs(U)<=u,v.value=v.done?T:W};let L,k;const B=H=>{y(v.value)&&(L=H,k=CS({keyframes:[v.value,w(v.value)],velocity:KI(M,H,v.value),damping:r,stiffness:s,restDelta:u,restSpeed:h}))};return B(0),{calculatedDuration:null,next:H=>{let U=!1;return!k&&L===void 0&&(U=!0,F(H),B(H)),L!==void 0&&H>=L?k.next(H-L):(!U&&F(H),v)}}}function Koe(t,e,n){const i=[],r=n||nu.mix||WI,s=t.length-1;for(let a=0;a<s;a++){let o=r(t[a],t[a+1]);if(e){const l=Array.isArray(e)?e[a]||io:e;o=Jy(l,o)}i.push(o)}return i}function Yoe(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const s=t.length;if(j_(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=Koe(e,i,r),l=o.length,u=h=>{if(a&&h<t[0])return e[0];let g=0;if(l>1)for(;g<t.length-2&&!(h<t[g+1]);g++);const v=py(t[g],t[g+1],h);return o[g](v)};return n?h=>u(tu(t[0],t[s-1],h)):u}function Xoe(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=py(0,e,i);t.push(ci(n,1,r))}}function $oe(t){const e=[0];return Xoe(e,t.length-1),e}function Zoe(t,e){return t.map(n=>n*e)}function Qoe(t,e){return t.map(()=>e||kI).splice(0,t.length-1)}function V0({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=coe(i)?i.map(o8):o8(i),s={done:!1,value:e[0]},a=Zoe(n&&n.length===e.length?n:$oe(e),t),o=Yoe(a,e,{ease:Array.isArray(r)?r:Qoe(e,r)});return{calculatedDuration:t,next:l=>(s.value=o(l),s.done=l>=t,s)}}const Joe=t=>t!==null;function t3(t,{repeat:e,repeatType:n="loop"},i,r=1){const s=t.filter(Joe),o=r<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!o||i===void 0?s[o]:i}const ele={decay:GR,inertia:GR,tween:V0,keyframes:V0,spring:CS};function YI(t){typeof t.type=="string"&&(t.type=ele[t.type])}class n3{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const tle=t=>t/100;class i3 extends n3{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Vs.now()&&this.tick(Vs.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;YI(e);const{type:n=V0,repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:a=0}=e;let{keyframes:o}=e;const l=n||V0;l!==V0&&typeof o[0]!="number"&&(this.mixKeyframes=Jy(tle,WI(o[0],o[1])),o=[0,100]);const u=l({...e,keyframes:o});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...o].reverse(),velocity:-a})),u.calculatedDuration===null&&(u.calculatedDuration=e3(u));const{calculatedDuration:h}=u;this.calculatedDuration=h,this.resolvedDuration=h+r,this.totalDuration=this.resolvedDuration*(i+1)-r,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:i,totalDuration:r,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return i.next(0);const{delay:u=0,keyframes:h,repeat:g,repeatType:v,repeatDelay:y,type:w,onUpdate:S,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const T=this.currentTime-u*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?T<0:T>r;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let M=this.currentTime,F=i;if(g){const H=Math.min(this.currentTime,r)/o;let U=Math.floor(H),W=H%1;!W&&H>=1&&(W=1),W===1&&U--,U=Math.min(U,g+1),!!(U%2)&&(v==="reverse"?(W=1-W,y&&(W-=y/o)):v==="mirror"&&(F=a)),M=tu(0,1,W)*o}const L=_?{done:!1,value:h[0]}:F.next(M);s&&(L.value=s(L.value));let{done:k}=L;!_&&l!==null&&(k=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const B=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&k);return B&&w!==GR&&(L.value=t3(h,this.options,x,this.speed)),S&&S(L.value),B&&this.finish(),L}then(e,n){return this.finished.then(e,n)}get duration(){return to(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+to(e)}get time(){return to(this.currentTime)}set time(e){e=Wl(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Vs.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=to(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=Ioe,startTime:n}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Vs.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function nle(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Zd=t=>t*180/Math.PI,zR=t=>{const e=Zd(Math.atan2(t[1],t[0]));return VR(e)},ile={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:zR,rotateZ:zR,skewX:t=>Zd(Math.atan(t[1])),skewY:t=>Zd(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},VR=t=>(t=t%360,t<0&&(t+=360),t),f8=zR,g8=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),p8=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),rle={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:g8,scaleY:p8,scale:t=>(g8(t)+p8(t))/2,rotateX:t=>VR(Zd(Math.atan2(t[6],t[5]))),rotateY:t=>VR(Zd(Math.atan2(-t[2],t[0]))),rotateZ:f8,rotate:f8,skewX:t=>Zd(Math.atan(t[4])),skewY:t=>Zd(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function UR(t){return t.includes("scale")?1:0}function jR(t,e){if(!t||t==="none")return UR(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,r;if(n)i=rle,r=n;else{const o=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=ile,r=o}if(!r)return UR(e);const s=i[e],a=r[1].split(",").map(ale);return typeof s=="function"?s(a):a[s]}const sle=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return jR(n,e)};function ale(t){return parseFloat(t.trim())}const vm=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ym=new Set(vm),m8=t=>t===mm||t===at,ole=new Set(["x","y","z"]),lle=vm.filter(t=>!ole.has(t));function cle(t){const e=[];return lle.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const uf={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>jR(e,"x"),y:(t,{transform:e})=>jR(e,"y")};uf.translateX=uf.x;uf.translateY=uf.y;const hf=new Set;let WR=!1,qR=!1,KR=!1;function XI(){if(qR){const t=Array.from(hf).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=cle(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([s,a])=>{i.getValue(s)?.set(a)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}qR=!1,WR=!1,hf.forEach(t=>t.complete(KR)),hf.clear()}function $I(){hf.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(qR=!0)})}function ule(){KR=!0,$I(),XI(),KR=!1}class r3{constructor(e,n,i,r,s,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=s,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(hf.add(this),WR||(WR=!0,ei.read($I),ei.resolveKeyframes(XI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;if(e[0]===null){const s=r?.get(),a=e[e.length-1];if(s!==void 0)e[0]=s;else if(i&&n){const o=i.readValue(n,a);o!=null&&(e[0]=o)}e[0]===void 0&&(e[0]=a),r&&s===void 0&&r.set(e[0])}nle(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),hf.delete(this)}cancel(){this.state==="scheduled"&&(hf.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const hle=t=>t.startsWith("--");function dle(t,e,n){hle(e)?t.style.setProperty(e,n):t.style[e]=n}const fle=W_(()=>window.ScrollTimeline!==void 0),gle={};function ple(t,e){const n=W_(t);return()=>gle[e]??n()}const ZI=ple(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),D0=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,v8={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:D0([0,.65,.55,1]),circOut:D0([.55,0,1,.45]),backIn:D0([.31,.01,.66,-.59]),backOut:D0([.33,1.53,.69,.99])};function QI(t,e){if(t)return typeof t=="function"?ZI()?qI(t,e):"ease-out":NI(t)?D0(t):Array.isArray(t)?t.map(n=>QI(n,e)||v8.easeOut):v8[t]}function mle(t,e,n,{delay:i=0,duration:r=300,repeat:s=0,repeatType:a="loop",ease:o="easeOut",times:l}={},u=void 0){const h={[e]:n};l&&(h.offset=l);const g=QI(o,r);Array.isArray(g)&&(h.easing=g);const v={delay:i,duration:r,easing:Array.isArray(g)?"linear":g,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"};return u&&(v.pseudoElement=u),t.animate(h,v)}function JI(t){return typeof t=="function"&&"applyToOptions"in t}function vle({type:t,...e}){return JI(t)&&ZI()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class yle extends n3{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:i,keyframes:r,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:o,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=a,this.options=e,j_(typeof e.type!="string");const u=vle(e);this.animation=mle(n,i,r,u,s),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const h=t3(r,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(h):dle(n,i,h),this.animation.cancel()}l?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return to(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+to(e)}get time(){return to(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Wl(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&fle()?(this.animation.timeline=e,io):n(this)}}const eH={anticipate:OI,backInOut:PI,circInOut:FI};function Cle(t){return t in eH}function ble(t){typeof t.ease=="string"&&Cle(t.ease)&&(t.ease=eH[t.ease])}const y8=10;class wle extends yle{constructor(e){ble(e),YI(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:i,onComplete:r,element:s,...a}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const o=new i3({...a,autoplay:!1}),l=Wl(this.finishedTime??this.time);n.setWithVelocity(o.sample(l-y8).value,o.sample(l).value,y8),o.stop()}}const C8=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ph.test(t)||t==="0")&&!t.startsWith("url("));function Sle(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function xle(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],a=C8(r,e),o=C8(s,e);return!a||!o?!1:Sle(t)||(n==="spring"||JI(n))&&i}function YR(t){t.duration=0,t.type="keyframes"}const Ale=new Set(["opacity","clipPath","filter","transform"]),Ele=W_(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Tle(t){const{motionValue:e,name:n,repeatDelay:i,repeatType:r,damping:s,type:a}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:u}=e.owner.getProps();return Ele()&&n&&Ale.has(n)&&(n!=="transform"||!u)&&!l&&!i&&r!=="mirror"&&s!==0&&a!=="inertia"}const Rle=40;class Dle extends n3{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:a="loop",keyframes:o,name:l,motionValue:u,element:h,...g}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Vs.now();const v={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:s,repeatType:a,name:l,motionValue:u,element:h,...g},y=h?.KeyframeResolver||r3;this.keyframeResolver=new y(o,(w,S,x)=>this.onKeyframesResolved(w,S,v,!x),l,u,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,i,r){this.keyframeResolver=void 0;const{name:s,type:a,velocity:o,delay:l,isHandoff:u,onUpdate:h}=i;this.resolvedAt=Vs.now(),xle(e,s,a,o)||((nu.instantAnimations||!l)&&h?.(t3(e,i,n)),e[0]=e[e.length-1],YR(i),i.repeat=0);const v={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>Rle?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:e},y=!u&&Tle(v)?new wle({...v,element:v.motionValue.owner.current}):new i3(v);y.finished.then(()=>this.notifyFinished()).catch(io),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),ule()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const Mle=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function _le(t){const e=Mle.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function tH(t,e,n=1){const[i,r]=_le(t);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const a=s.trim();return xI(a)?parseFloat(a):a}return $_(r)?tH(r,e,n+1):r}function s3(t,e){return t?.[e]??t?.default??t}const nH=new Set(["width","height","top","left","right","bottom",...vm]),Ple={test:t=>t==="auto",parse:t=>t},iH=t=>e=>e.test(t),rH=[mm,at,ql,ph,Soe,woe,Ple],b8=t=>rH.find(iH(t));function Ole(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||EI(t):!0}const Lle=new Set(["brightness","contrast","saturate","opacity"]);function Fle(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(Z_)||[];if(!i)return t;const r=n.replace(i,"");let s=Lle.has(e)?1:0;return i!==n&&(s*=100),e+"("+s+r+")"}const kle=/\b([a-z-]*)\(.*?\)/gu,XR={...Ph,getAnimatableNone:t=>{const e=t.match(kle);return e?e.map(Fle).join(" "):t}},w8={...mm,transform:Math.round},Nle={rotate:ph,rotateX:ph,rotateY:ph,rotateZ:ph,scale:T1,scaleX:T1,scaleY:T1,scaleZ:T1,skew:ph,skewX:ph,skewY:ph,distance:at,translateX:at,translateY:at,translateZ:at,x:at,y:at,z:at,perspective:at,transformPerspective:at,opacity:my,originX:l8,originY:l8,originZ:at},a3={borderWidth:at,borderTopWidth:at,borderRightWidth:at,borderBottomWidth:at,borderLeftWidth:at,borderRadius:at,radius:at,borderTopLeftRadius:at,borderTopRightRadius:at,borderBottomRightRadius:at,borderBottomLeftRadius:at,width:at,maxWidth:at,height:at,maxHeight:at,top:at,right:at,bottom:at,left:at,padding:at,paddingTop:at,paddingRight:at,paddingBottom:at,paddingLeft:at,margin:at,marginTop:at,marginRight:at,marginBottom:at,marginLeft:at,backgroundPositionX:at,backgroundPositionY:at,...Nle,zIndex:w8,fillOpacity:my,strokeOpacity:my,numOctaves:w8},Ble={...a3,color:Gi,backgroundColor:Gi,outlineColor:Gi,fill:Gi,stroke:Gi,borderColor:Gi,borderTopColor:Gi,borderRightColor:Gi,borderBottomColor:Gi,borderLeftColor:Gi,filter:XR,WebkitFilter:XR},sH=t=>Ble[t];function aH(t,e){let n=sH(t);return n!==XR&&(n=Ph),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Ile=new Set(["auto","none","0"]);function Hle(t,e,n){let i=0,r;for(;i<t.length&&!r;){const s=t[i];typeof s=="string"&&!Ile.has(s)&&vy(s).values.length&&(r=t[i]),i++}if(r&&n)for(const s of e)t[s]=aH(n,r)}class Gle extends r3{constructor(e,n,i,r,s){super(e,n,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),$_(u))){const h=tH(u,n.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!nH.has(i)||e.length!==2)return;const[r,s]=e,a=b8(r),o=b8(s);if(a!==o)if(m8(a)&&m8(o))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else uf[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)(e[r]===null||Ole(e[r]))&&i.push(r);i.length&&Hle(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=uf[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const r=e.getValue(n);r&&r.jump(this.measuredOrigin,!1);const s=i.length-1,a=i[s];i[s]=uf[n](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),this.removedTransforms?.length&&this.removedTransforms.forEach(([o,l])=>{e.getValue(o).set(l)}),this.resolveNoneKeyframes()}}function zle(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let i=document;const r=n?.[t]??i.querySelectorAll(t);return r?Array.from(r):[]}return Array.from(t)}const oH=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function Vle(t){return AI(t)&&"offsetHeight"in t}const S8=30,Ule=t=>!isNaN(parseFloat(t));class jle{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const r=Vs.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Vs.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Ule(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new q_);const i=this.events[e].add(n);return e==="change"?()=>{i(),ei.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Vs.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>S8)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,S8);return TI(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Qp(t,e){return new jle(t,e)}const{schedule:o3}=BI(queueMicrotask,!1),Io={x:!1,y:!1};function lH(){return Io.x||Io.y}function Wle(t){return t==="x"||t==="y"?Io[t]?null:(Io[t]=!0,()=>{Io[t]=!1}):Io.x||Io.y?null:(Io.x=Io.y=!0,()=>{Io.x=Io.y=!1})}function cH(t,e){const n=zle(t),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function x8(t){return!(t.pointerType==="touch"||lH())}function qle(t,e,n={}){const[i,r,s]=cH(t,n),a=o=>{if(!x8(o))return;const{target:l}=o,u=e(l,o);if(typeof u!="function"||!l)return;const h=g=>{x8(g)&&(u(g),l.removeEventListener("pointerleave",h))};l.addEventListener("pointerleave",h,r)};return i.forEach(o=>{o.addEventListener("pointerenter",a,r)}),s}const uH=(t,e)=>e?t===e?!0:uH(t,e.parentElement):!1,l3=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Kle=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Yle(t){return Kle.has(t.tagName)||t.tabIndex!==-1}const hw=new WeakSet;function A8(t){return e=>{e.key==="Enter"&&t(e)}}function VE(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Xle=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=A8(()=>{if(hw.has(n))return;VE(n,"down");const r=A8(()=>{VE(n,"up")}),s=()=>VE(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function E8(t){return l3(t)&&!lH()}function $le(t,e,n={}){const[i,r,s]=cH(t,n),a=o=>{const l=o.currentTarget;if(!E8(o))return;hw.add(l);const u=e(l,o),h=(y,w)=>{window.removeEventListener("pointerup",g),window.removeEventListener("pointercancel",v),hw.has(l)&&hw.delete(l),E8(y)&&typeof u=="function"&&u(y,{success:w})},g=y=>{h(y,l===window||l===document||n.useGlobalTarget||uH(l,y.target))},v=y=>{h(y,!1)};window.addEventListener("pointerup",g,r),window.addEventListener("pointercancel",v,r)};return i.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",a,r),Vle(o)&&(o.addEventListener("focus",u=>Xle(u,r)),!Yle(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),s}function hH(t){return AI(t)&&"ownerSVGElement"in t}function Zle(t){return hH(t)&&t.tagName==="svg"}const $r=t=>!!(t&&t.getVelocity),Qle=[...rH,Gi,Ph],Jle=t=>Qle.find(iH(t)),dH=D.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function ece(t=!0){const e=D.useContext(z_);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,s=D.useId();D.useEffect(()=>{if(t)return r(s)},[t]);const a=D.useCallback(()=>t&&i&&i(s),[s,i,t]);return!n&&i?[!1,a]:[!0]}const fH=D.createContext({strict:!1}),T8={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Jp={};for(const t in T8)Jp[t]={isEnabled:e=>T8[t].some(n=>!!e[n])};function tce(t){for(const e in t)Jp[e]={...Jp[e],...t[e]}}const nce=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function bS(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||nce.has(t)}let gH=t=>!bS(t);function ice(t){typeof t=="function"&&(gH=e=>e.startsWith("on")?!bS(e):t(e))}try{ice(require("@emotion/is-prop-valid").default)}catch{}function rce(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(gH(r)||n===!0&&bS(r)||!e&&!bS(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}const F2=D.createContext({});function k2(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function yy(t){return typeof t=="string"||Array.isArray(t)}const c3=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],u3=["initial",...c3];function N2(t){return k2(t.animate)||u3.some(e=>yy(t[e]))}function pH(t){return!!(N2(t)||t.variants)}function sce(t,e){if(N2(t)){const{initial:n,animate:i}=t;return{initial:n===!1||yy(n)?n:void 0,animate:yy(i)?i:void 0}}return t.inherit!==!1?e:{}}function ace(t){const{initial:e,animate:n}=sce(t,D.useContext(F2));return D.useMemo(()=>({initial:e,animate:n}),[R8(e),R8(n)])}function R8(t){return Array.isArray(t)?t.join(" "):t}const Cy={};function oce(t){for(const e in t)Cy[e]=t[e],X_(e)&&(Cy[e].isCSSVariable=!0)}function mH(t,{layout:e,layoutId:n}){return ym.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Cy[t]||t==="opacity")}const lce={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},cce=vm.length;function uce(t,e,n){let i="",r=!0;for(let s=0;s<cce;s++){const a=vm[s],o=t[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const u=oH(o,a3[a]);if(!l){r=!1;const h=lce[a]||a;i+=`${h}(${u}) `}n&&(e[a]=u)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function h3(t,e,n){const{style:i,vars:r,transformOrigin:s}=t;let a=!1,o=!1;for(const l in e){const u=e[l];if(ym.has(l)){a=!0;continue}else if(X_(l)){r[l]=u;continue}else{const h=oH(u,a3[l]);l.startsWith("origin")?(o=!0,s[l]=h):i[l]=h}}if(e.transform||(a||n?i.transform=uce(e,t.transform,n):i.transform&&(i.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:h=0}=s;i.transformOrigin=`${l} ${u} ${h}`}}const d3=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function vH(t,e,n){for(const i in e)!$r(e[i])&&!mH(i,n)&&(t[i]=e[i])}function hce({transformTemplate:t},e){return D.useMemo(()=>{const n=d3();return h3(n,e,t),Object.assign({},n.vars,n.style)},[e])}function dce(t,e){const n=t.style||{},i={};return vH(i,n,t),Object.assign(i,hce(t,e)),i}function fce(t,e){const n={},i=dce(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}const gce={offset:"stroke-dashoffset",array:"stroke-dasharray"},pce={offset:"strokeDashoffset",array:"strokeDasharray"};function mce(t,e,n=1,i=0,r=!0){t.pathLength=1;const s=r?gce:pce;t[s.offset]=at.transform(-i);const a=at.transform(e),o=at.transform(n);t[s.array]=`${a} ${o}`}function yH(t,{attrX:e,attrY:n,attrScale:i,pathLength:r,pathSpacing:s=1,pathOffset:a=0,...o},l,u,h){if(h3(t,o,u),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:g,style:v}=t;g.transform&&(v.transform=g.transform,delete g.transform),(v.transform||g.transformOrigin)&&(v.transformOrigin=g.transformOrigin??"50% 50%",delete g.transformOrigin),v.transform&&(v.transformBox=h?.transformBox??"fill-box",delete g.transformBox),e!==void 0&&(g.x=e),n!==void 0&&(g.y=n),i!==void 0&&(g.scale=i),r!==void 0&&mce(g,r,s,a,!1)}const CH=()=>({...d3(),attrs:{}}),bH=t=>typeof t=="string"&&t.toLowerCase()==="svg";function vce(t,e,n,i){const r=D.useMemo(()=>{const s=CH();return yH(s,e,bH(i),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};vH(s,t.style,t),r.style={...s,...r.style}}return r}const yce=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function f3(t){return typeof t!="string"||t.includes("-")?!1:!!(yce.indexOf(t)>-1||/[A-Z]/u.test(t))}function Cce(t,e,n,{latestValues:i},r,s=!1){const o=(f3(t)?vce:fce)(e,i,r,t),l=rce(e,typeof t=="string",s),u=t!==D.Fragment?{...l,...o,ref:n}:{},{children:h}=e,g=D.useMemo(()=>$r(h)?h.get():h,[h]);return D.createElement(t,{...u,children:g})}function D8(t){const e=[{},{}];return t?.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function g3(t,e,n,i){if(typeof e=="function"){const[r,s]=D8(i);e=e(n!==void 0?n:t.custom,r,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,s]=D8(i);e=e(n!==void 0?n:t.custom,r,s)}return e}function dw(t){return $r(t)?t.get():t}function bce({scrapeMotionValuesFromProps:t,createRenderState:e},n,i,r){return{latestValues:wce(n,i,r,t),renderState:e()}}function wce(t,e,n,i){const r={},s=i(t,{});for(const v in s)r[v]=dw(s[v]);let{initial:a,animate:o}=t;const l=N2(t),u=pH(t);e&&u&&!l&&t.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let h=n?n.initial===!1:!1;h=h||a===!1;const g=h?o:a;if(g&&typeof g!="boolean"&&!k2(g)){const v=Array.isArray(g)?g:[g];for(let y=0;y<v.length;y++){const w=g3(t,v[y]);if(w){const{transitionEnd:S,transition:x,...T}=w;for(const _ in T){let M=T[_];if(Array.isArray(M)){const F=h?M.length-1:0;M=M[F]}M!==null&&(r[_]=M)}for(const _ in S)r[_]=S[_]}}}return r}const wH=t=>(e,n)=>{const i=D.useContext(F2),r=D.useContext(z_),s=()=>bce(t,e,i,r);return n?s():toe(s)};function p3(t,e,n){const{style:i}=t,r={};for(const s in i)($r(i[s])||e.style&&$r(e.style[s])||mH(s,t)||n?.getValue(s)?.liveStyle!==void 0)&&(r[s]=i[s]);return r}const Sce=wH({scrapeMotionValuesFromProps:p3,createRenderState:d3});function SH(t,e,n){const i=p3(t,e,n);for(const r in t)if($r(t[r])||$r(e[r])){const s=vm.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=t[r]}return i}const xce=wH({scrapeMotionValuesFromProps:SH,createRenderState:CH}),Ace=Symbol.for("motionComponentSymbol");function bp(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Ece(t,e,n){return D.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):bp(n)&&(n.current=i))},[e])}const m3=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Tce="framerAppearId",xH="data-"+m3(Tce),AH=D.createContext({});function Rce(t,e,n,i,r){const{visualElement:s}=D.useContext(F2),a=D.useContext(fH),o=D.useContext(z_),l=D.useContext(dH).reducedMotion,u=D.useRef(null);i=i||a.renderer,!u.current&&i&&(u.current=i(t,{visualState:e,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const h=u.current,g=D.useContext(AH);h&&!h.projection&&r&&(h.type==="html"||h.type==="svg")&&Dce(u.current,n,r,g);const v=D.useRef(!1);D.useInsertionEffect(()=>{h&&v.current&&h.update(n,o)});const y=n[xH],w=D.useRef(!!y&&!window.MotionHandoffIsComplete?.(y)&&window.MotionHasOptimisedAnimation?.(y));return noe(()=>{h&&(v.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),w.current&&h.animationState&&h.animationState.animateChanges())}),D.useEffect(()=>{h&&(!w.current&&h.animationState&&h.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(y)}),w.current=!1),h.enteringChildren=void 0)}),h}function Dce(t,e,n,i){const{layoutId:r,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:u,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:EH(t.parent)),t.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!a||o&&bp(o),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,crossfade:h,layoutScroll:l,layoutRoot:u})}function EH(t){if(t)return t.options.allowProjection!==!1?t.projection:EH(t.parent)}function UE(t,{forwardMotionProps:e=!1}={},n,i){n&&tce(n);const r=f3(t)?xce:Sce;function s(o,l){let u;const h={...D.useContext(dH),...o,layoutId:Mce(o)},{isStatic:g}=h,v=ace(o),y=r(o,g);if(!g&&G_){_ce();const w=Pce(h);u=w.MeasureLayout,v.visualElement=Rce(t,y,h,i,w.ProjectionNode)}return ke.jsxs(F2.Provider,{value:v,children:[u&&v.visualElement?ke.jsx(u,{visualElement:v.visualElement,...h}):null,Cce(t,o,Ece(y,v.visualElement,l),y,g,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const a=D.forwardRef(s);return a[Ace]=t,a}function Mce({layoutId:t}){const e=D.useContext(SI).id;return e&&t!==void 0?e+"-"+t:t}function _ce(t,e){D.useContext(fH).strict}function Pce(t){const{drag:e,layout:n}=Jp;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function Oce(t,e){if(typeof Proxy>"u")return UE;const n=new Map,i=(s,a)=>UE(s,a,t,e),r=(s,a)=>i(s,a);return new Proxy(r,{get:(s,a)=>a==="create"?i:(n.has(a)||n.set(a,UE(a,void 0,t,e)),n.get(a))})}function TH({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function Lce({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Fce(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function jE(t){return t===void 0||t===1}function $R({scale:t,scaleX:e,scaleY:n}){return!jE(t)||!jE(e)||!jE(n)}function Wd(t){return $R(t)||RH(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function RH(t){return M8(t.x)||M8(t.y)}function M8(t){return t&&t!=="0%"}function wS(t,e,n){const i=t-n,r=e*i;return n+r}function _8(t,e,n,i,r){return r!==void 0&&(t=wS(t,r,i)),wS(t,n,i)+e}function ZR(t,e=0,n=1,i,r){t.min=_8(t.min,e,n,i,r),t.max=_8(t.max,e,n,i,r)}function DH(t,{x:e,y:n}){ZR(t.x,e.translate,e.scale,e.originPoint),ZR(t.y,n.translate,n.scale,n.originPoint)}const P8=.999999999999,O8=1.0000000000001;function kce(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let s,a;for(let o=0;o<r;o++){s=n[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Sp(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,DH(t,a)),i&&Wd(s.latestValues)&&Sp(t,s.latestValues))}e.x<O8&&e.x>P8&&(e.x=1),e.y<O8&&e.y>P8&&(e.y=1)}function wp(t,e){t.min=t.min+e,t.max=t.max+e}function L8(t,e,n,i,r=.5){const s=ci(t.min,t.max,r);ZR(t,e,n,s,i)}function Sp(t,e){L8(t.x,e.x,e.scaleX,e.scale,e.originX),L8(t.y,e.y,e.scaleY,e.scale,e.originY)}function MH(t,e){return TH(Fce(t.getBoundingClientRect(),e))}function Nce(t,e,n){const i=MH(t,n),{scroll:r}=e;return r&&(wp(i.x,r.offset.x),wp(i.y,r.offset.y)),i}const F8=()=>({translate:0,scale:1,origin:0,originPoint:0}),xp=()=>({x:F8(),y:F8()}),k8=()=>({min:0,max:0}),Di=()=>({x:k8(),y:k8()}),QR={current:null},_H={current:!1};function Bce(){if(_H.current=!0,!!G_)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>QR.current=t.matches;t.addEventListener("change",e),e()}else QR.current=!1}const Ice=new WeakMap;function Hce(t,e,n){for(const i in e){const r=e[i],s=n[i];if($r(r))t.addValue(i,r);else if($r(s))t.addValue(i,Qp(r,{owner:t}));else if(s!==r)if(t.hasValue(i)){const a=t.getValue(i);a.liveStyle===!0?a.jump(r):a.hasAnimated||a.set(r)}else{const a=t.getStaticValue(i);t.addValue(i,Qp(a!==void 0?a:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const N8=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Gce{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=r3,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=Vs.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,ei.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=N2(n),this.isVariantNode=pH(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...g}=this.scrapeMotionValuesFromProps(n,{},this);for(const v in g){const y=g[v];l[v]!==void 0&&$r(y)&&y.set(l[v])}}mount(e){this.current=e,Ice.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),_H.current||Bce(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:QR.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),_h(this.notifyUpdate),_h(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=ym.has(e);i&&this.onBindTransform&&this.onBindTransform();const r=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&ei.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Jp){const n=Jp[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Di()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<N8.length;i++){const r=N8[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,a=e[s];a&&(this.propEventSubscriptions[r]=this.on(r,a))}this.prevMotionValues=Hce(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Qp(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(xI(i)||EI(i))?i=parseFloat(i):!Jle(i)&&Ph.test(n)&&(i=aH(e,n)),this.setBaseTarget(e,$r(i)?i.get():i)),$r(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const s=g3(this.props,n,this.presenceContext?.custom);s&&(i=s[e])}if(n&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!$r(r)?r:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new q_),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){o3.render(this.render)}}class PH extends Gce{constructor(){super(...arguments),this.KeyframeResolver=Gle}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;$r(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function OH(t,{style:e,vars:n},i,r){const s=t.style;let a;for(a in e)s[a]=e[a];r?.applyProjectionStyles(s,i);for(a in n)s.setProperty(a,n[a])}function zce(t){return window.getComputedStyle(t)}class Vce extends PH{constructor(){super(...arguments),this.type="html",this.renderInstance=OH}readValueFromInstance(e,n){if(ym.has(n))return this.projection?.isProjecting?UR(n):sle(e,n);{const i=zce(e),r=(X_(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return MH(e,n)}build(e,n,i){h3(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return p3(e,n,i)}}const LH=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Uce(t,e,n,i){OH(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(LH.has(r)?r:m3(r),e.attrs[r])}class jce extends PH{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Di}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ym.has(n)){const i=sH(n);return i&&i.default||0}return n=LH.has(n)?n:m3(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return SH(e,n,i)}build(e,n,i){yH(e,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,n,i,r){Uce(e,n,i,r)}mount(e){this.isSVGTag=bH(e.tagName),super.mount(e)}}const Wce=(t,e)=>f3(t)?new jce(e):new Vce(e,{allowProjection:t!==D.Fragment});function kp(t,e,n){const i=t.getProps();return g3(i,e,n!==void 0?n:i.custom,t)}const JR=t=>Array.isArray(t);function qce(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Qp(n))}function Kce(t){return JR(t)?t[t.length-1]||0:t}function Yce(t,e){const n=kp(t,e);let{transitionEnd:i={},transition:r={},...s}=n||{};s={...s,...i};for(const a in s){const o=Kce(s[a]);qce(t,a,o)}}function Xce(t){return!!($r(t)&&t.add)}function eD(t,e){const n=t.getValue("willChange");if(Xce(n))return n.add(e);if(!n&&nu.WillChange){const i=new nu.WillChange("auto");t.addValue("willChange",i),i.add(e)}}function FH(t){return t.props[xH]}const $ce=t=>t!==null;function Zce(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter($ce),s=e&&n!=="loop"&&e%2===1?0:r.length-1;return r[s]}const Qce={type:"spring",stiffness:500,damping:25,restSpeed:10},Jce=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),eue={type:"keyframes",duration:.8},tue={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},nue=(t,{keyframes:e})=>e.length>2?eue:ym.has(t)?t.startsWith("scale")?Jce(e[1]):Qce:tue;function iue({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:u,...h}){return!!Object.keys(h).length}const v3=(t,e,n,i={},r,s)=>a=>{const o=s3(i,t)||{},l=o.delay||i.delay||0;let{elapsed:u=0}=i;u=u-Wl(l);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:v=>{e.set(v),o.onUpdate&&o.onUpdate(v)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:s?void 0:r};iue(o)||Object.assign(h,nue(t,h)),h.duration&&(h.duration=Wl(h.duration)),h.repeatDelay&&(h.repeatDelay=Wl(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let g=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(YR(h),h.delay===0&&(g=!0)),(nu.instantAnimations||nu.skipAnimations)&&(g=!0,YR(h),h.delay=0),h.allowFlatten=!o.type&&!o.ease,g&&!s&&e.get()!==void 0){const v=Zce(h.keyframes,o);if(v!==void 0){ei.update(()=>{h.onUpdate(v),h.onComplete()});return}}return o.isSync?new i3(h):new Dle(h)};function rue({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function kH(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:a,...o}=e;i&&(s=i);const l=[],u=r&&t.animationState&&t.animationState.getState()[r];for(const h in o){const g=t.getValue(h,t.latestValues[h]??null),v=o[h];if(v===void 0||u&&rue(u,h))continue;const y={delay:n,...s3(s||{},h)},w=g.get();if(w!==void 0&&!g.isAnimating&&!Array.isArray(v)&&v===w&&!y.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const T=FH(t);if(T){const _=window.MotionHandoffAnimation(T,h,ei);_!==null&&(y.startTime=_,S=!0)}}eD(t,h),g.start(v3(h,g,v,t.shouldReduceMotion&&nH.has(h)?{type:!1}:y,t,S));const x=g.animation;x&&l.push(x)}return a&&Promise.all(l).then(()=>{ei.update(()=>{a&&Yce(t,a)})}),l}function NH(t,e,n,i=0,r=1){const s=Array.from(t).sort((u,h)=>u.sortNodePosition(h)).indexOf(e),a=t.size,o=(a-1)*i;return typeof n=="function"?n(s,a):r===1?s*i:o-s*i}function tD(t,e,n={}){const i=kp(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const s=i?()=>Promise.all(kH(t,i,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:g}=r;return sue(t,e,l,u,h,g,n)}:()=>Promise.resolve(),{when:o}=r;if(o){const[l,u]=o==="beforeChildren"?[s,a]:[a,s];return l().then(()=>u())}else return Promise.all([s(),a(n.delay)])}function sue(t,e,n=0,i=0,r=0,s=1,a){const o=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),o.push(tD(l,e,{...a,delay:n+(typeof i=="function"?0:i)+NH(t.variantChildren,l,i,r,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(o)}function aue(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>tD(t,s,n));i=Promise.all(r)}else if(typeof e=="string")i=tD(t,e,n);else{const r=typeof e=="function"?kp(t,e,n.custom):e;i=Promise.all(kH(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}function BH(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}const oue=u3.length;function IH(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?IH(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<oue;n++){const i=u3[n],r=t.props[i];(yy(r)||r===!1)&&(e[i]=r)}return e}const lue=[...c3].reverse(),cue=c3.length;function uue(t){return e=>Promise.all(e.map(({animation:n,options:i})=>aue(t,n,i)))}function hue(t){let e=uue(t),n=B8(),i=!0;const r=l=>(u,h)=>{const g=kp(t,h,l==="exit"?t.presenceContext?.custom:void 0);if(g){const{transition:v,transitionEnd:y,...w}=g;u={...u,...w,...y}}return u};function s(l){e=l(t)}function a(l){const{props:u}=t,h=IH(t.parent)||{},g=[],v=new Set;let y={},w=1/0;for(let x=0;x<cue;x++){const T=lue[x],_=n[T],M=u[T]!==void 0?u[T]:h[T],F=yy(M),L=T===l?_.isActive:null;L===!1&&(w=x);let k=M===h[T]&&M!==u[T]&&F;if(k&&i&&t.manuallyAnimateOnMount&&(k=!1),_.protectedKeys={...y},!_.isActive&&L===null||!M&&!_.prevProp||k2(M)||typeof M=="boolean")continue;const B=due(_.prevProp,M);let H=B||T===l&&_.isActive&&!k&&F||x>w&&F,U=!1;const W=Array.isArray(M)?M:[M];let j=W.reduce(r(T),{});L===!1&&(j={});const{prevResolvedValues:X={}}=_,ne={...X,...j},$=K=>{H=!0,v.has(K)&&(U=!0,v.delete(K)),_.needsAnimating[K]=!0;const Q=t.getValue(K);Q&&(Q.liveStyle=!1)};for(const K in ne){const Q=j[K],oe=X[K];if(y.hasOwnProperty(K))continue;let le=!1;JR(Q)&&JR(oe)?le=!BH(Q,oe):le=Q!==oe,le?Q!=null?$(K):v.add(K):Q!==void 0&&v.has(K)?$(K):_.protectedKeys[K]=!0}_.prevProp=M,_.prevResolvedValues=j,_.isActive&&(y={...y,...j}),i&&t.blockInitialAnimation&&(H=!1);const q=k&&B;H&&(!q||U)&&g.push(...W.map(K=>{const Q={type:T};if(typeof K=="string"&&i&&!q&&t.manuallyAnimateOnMount&&t.parent){const{parent:oe}=t,le=kp(oe,K);if(oe.enteringChildren&&le){const{delayChildren:V}=le.transition||{};Q.delay=NH(oe.enteringChildren,t,V)}}return{animation:K,options:Q}}))}if(v.size){const x={};if(typeof u.initial!="boolean"){const T=kp(t,Array.isArray(u.initial)?u.initial[0]:u.initial);T&&T.transition&&(x.transition=T.transition)}v.forEach(T=>{const _=t.getBaseTarget(T),M=t.getValue(T);M&&(M.liveStyle=!0),x[T]=_??null}),g.push({animation:x})}let S=!!g.length;return i&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(S=!1),i=!1,S?e(g):Promise.resolve()}function o(l,u){if(n[l].isActive===u)return Promise.resolve();t.variantChildren?.forEach(g=>g.animationState?.setActive(l,u)),n[l].isActive=u;const h=a(l);for(const g in n)n[g].protectedKeys={};return h}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>n,reset:()=>{n=B8()}}}function due(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!BH(e,t):!1}function Hd(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function B8(){return{animate:Hd(!0),whileInView:Hd(),whileHover:Hd(),whileTap:Hd(),whileDrag:Hd(),whileFocus:Hd(),exit:Hd()}}class Gh{constructor(e){this.isMounted=!1,this.node=e}update(){}}class fue extends Gh{constructor(e){super(e),e.animationState||(e.animationState=hue(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();k2(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let gue=0;class pue extends Gh{constructor(){super(...arguments),this.id=gue++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const mue={animation:{Feature:fue},exit:{Feature:pue}};function by(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function nC(t){return{point:{x:t.pageX,y:t.pageY}}}const vue=t=>e=>l3(e)&&t(e,nC(e));function U0(t,e,n,i){return by(t,e,vue(n),i)}const HH=1e-4,yue=1-HH,Cue=1+HH,GH=.01,bue=0-GH,wue=0+GH;function gs(t){return t.max-t.min}function Sue(t,e,n){return Math.abs(t-e)<=n}function I8(t,e,n,i=.5){t.origin=i,t.originPoint=ci(e.min,e.max,t.origin),t.scale=gs(n)/gs(e),t.translate=ci(n.min,n.max,t.origin)-t.originPoint,(t.scale>=yue&&t.scale<=Cue||isNaN(t.scale))&&(t.scale=1),(t.translate>=bue&&t.translate<=wue||isNaN(t.translate))&&(t.translate=0)}function j0(t,e,n,i){I8(t.x,e.x,n.x,i?i.originX:void 0),I8(t.y,e.y,n.y,i?i.originY:void 0)}function H8(t,e,n){t.min=n.min+e.min,t.max=t.min+gs(e)}function xue(t,e,n){H8(t.x,e.x,n.x),H8(t.y,e.y,n.y)}function G8(t,e,n){t.min=e.min-n.min,t.max=t.min+gs(e)}function W0(t,e,n){G8(t.x,e.x,n.x),G8(t.y,e.y,n.y)}function Ka(t){return[t("x"),t("y")]}const zH=({current:t})=>t?t.ownerDocument.defaultView:null,z8=(t,e)=>Math.abs(t-e);function Aue(t,e){const n=z8(t.x,e.x),i=z8(t.y,e.y);return Math.sqrt(n**2+i**2)}class VH{constructor(e,n,{transformPagePoint:i,contextWindow:r=window,dragSnapToOrigin:s=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=qE(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,w=Aue(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!w)return;const{point:S}=v,{timestamp:x}=_r;this.history.push({...S,timestamp:x});const{onStart:T,onMove:_}=this.handlers;y||(T&&T(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,v)},this.handlePointerMove=(v,y)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=WE(y,this.transformPagePoint),ei.update(this.updatePoint,!0)},this.handlePointerUp=(v,y)=>{this.end();const{onEnd:w,onSessionEnd:S,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=qE(v.type==="pointercancel"?this.lastMoveEventInfo:WE(y,this.transformPagePoint),this.history);this.startEvent&&w&&w(v,T),S&&S(v,T)},!l3(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=a,this.contextWindow=r||window;const o=nC(e),l=WE(o,this.transformPagePoint),{point:u}=l,{timestamp:h}=_r;this.history=[{...u,timestamp:h}];const{onSessionStart:g}=n;g&&g(e,qE(l,this.history)),this.removeListeners=Jy(U0(this.contextWindow,"pointermove",this.handlePointerMove),U0(this.contextWindow,"pointerup",this.handlePointerUp),U0(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),_h(this.updatePoint)}}function WE(t,e){return e?{point:e(t.point)}:t}function V8(t,e){return{x:t.x-e.x,y:t.y-e.y}}function qE({point:t},e){return{point:t,delta:V8(t,UH(e)),offset:V8(t,Eue(e)),velocity:Tue(e,.1)}}function Eue(t){return t[0]}function UH(t){return t[t.length-1]}function Tue(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=UH(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>Wl(e)));)n--;if(!i)return{x:0,y:0};const s=to(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const a={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Rue(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?ci(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?ci(n,t,i.max):Math.min(t,n)),t}function U8(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Due(t,{top:e,left:n,bottom:i,right:r}){return{x:U8(t.x,n,r),y:U8(t.y,e,i)}}function j8(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function Mue(t,e){return{x:j8(t.x,e.x),y:j8(t.y,e.y)}}function _ue(t,e){let n=.5;const i=gs(t),r=gs(e);return r>i?n=py(e.min,e.max-i,t.min):i>r&&(n=py(t.min,t.max-r,e.min)),tu(0,1,n)}function Pue(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const nD=.35;function Oue(t=nD){return t===!1?t=0:t===!0&&(t=nD),{x:W8(t,"left","right"),y:W8(t,"top","bottom")}}function W8(t,e,n){return{min:q8(t,e),max:q8(t,n)}}function q8(t,e){return typeof t=="number"?t:t[e]||0}const Lue=new WeakMap;class Fue{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Di(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=g=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(nC(g).point)},a=(g,v)=>{const{drag:y,dragPropagation:w,onDragStart:S}=this.getProps();if(y&&!w&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Wle(y),!this.openDragLock))return;this.latestPointerEvent=g,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ka(T=>{let _=this.getAxisMotionValue(T).get()||0;if(ql.test(_)){const{projection:M}=this.visualElement;if(M&&M.layout){const F=M.layout.layoutBox[T];F&&(_=gs(F)*(parseFloat(_)/100))}}this.originPoint[T]=_}),S&&ei.postRender(()=>S(g,v)),eD(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(g,v)=>{this.latestPointerEvent=g,this.latestPanInfo=v;const{dragPropagation:y,dragDirectionLock:w,onDirectionLock:S,onDrag:x}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:T}=v;if(w&&this.currentDirection===null){this.currentDirection=kue(T),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",v.point,T),this.updateAxis("y",v.point,T),this.visualElement.render(),x&&x(g,v)},l=(g,v)=>{this.latestPointerEvent=g,this.latestPanInfo=v,this.stop(g,v),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Ka(g=>this.getAnimationState(g)==="paused"&&this.getAxisMotionValue(g).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new VH(e,{onSessionStart:s,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:i,contextWindow:zH(this.visualElement)})}stop(e,n){const i=e||this.latestPointerEvent,r=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!r||!i)return;const{velocity:a}=r;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&ei.postRender(()=>o(i,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!R1(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=Rue(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&bp(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=Due(i.layoutBox,e):this.constraints=!1,this.elastic=Oue(n),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Ka(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=Pue(i.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!bp(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=Nce(i,r.root,this.visualElement.getTransformPagePoint());let a=Mue(r.layout.layoutBox,s);if(n){const o=n(Lce(a));this.hasMutatedConstraints=!!o,o&&(a=TH(o))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=Ka(h=>{if(!R1(h,n,this.currentDirection))return;let g=l&&l[h]||{};a&&(g={min:0,max:0});const v=r?200:1e6,y=r?40:1e7,w={type:"inertia",velocity:i?e[h]:0,bounceStiffness:v,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...s,...g};return this.startAxisValueAnimation(h,w)});return Promise.all(u).then(o)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return eD(this.visualElement,e),i.start(v3(e,i,0,n,this.visualElement,!1))}stopAnimation(){Ka(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ka(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Ka(n=>{const{drag:i}=this.getProps();if(!R1(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:o}=r.layout.layoutBox[n];s.set(e[n]-ci(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!bp(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Ka(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();r[a]=_ue({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Ka(a=>{if(!R1(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:u}=this.constraints[a];o.set(ci(l,u,r[a]))})}addListeners(){if(!this.visualElement.current)return;Lue.set(this.visualElement,this);const e=this.visualElement.current,n=U0(e,"pointerdown",l=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();bp(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),ei.read(i);const a=by(window,"resize",()=>this.scalePositionWithinConstraints()),o=r.addEventListener("didUpdate",(({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Ka(h=>{const g=this.getAxisMotionValue(h);g&&(this.originPoint[h]+=l[h].translate,g.set(g.get()+l[h].translate))}),this.visualElement.render())}));return()=>{a(),n(),s(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:a=nD,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function R1(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function kue(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Nue extends Gh{constructor(e){super(e),this.removeGroupControls=io,this.removeListeners=io,this.controls=new Fue(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||io}unmount(){this.removeGroupControls(),this.removeListeners()}}const K8=t=>(e,n)=>{t&&ei.postRender(()=>t(e,n))};class Bue extends Gh{constructor(){super(...arguments),this.removePointerDownListener=io}onPointerDown(e){this.session=new VH(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:zH(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:K8(e),onStart:K8(n),onMove:i,onEnd:(s,a)=>{delete this.session,r&&ei.postRender(()=>r(s,a))}}}mount(){this.removePointerDownListener=U0(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const fw={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Y8(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const h0={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(at.test(t))t=parseFloat(t);else return t;const n=Y8(t,e.target.x),i=Y8(t,e.target.y);return`${n}% ${i}%`}},Iue={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=Ph.parse(t);if(r.length>5)return i;const s=Ph.createTransformer(t),a=typeof r[0]!="number"?1:0,o=n.x.scale*e.x,l=n.y.scale*e.y;r[0+a]/=o,r[1+a]/=l;const u=ci(o,l,.5);return typeof r[2+a]=="number"&&(r[2+a]/=u),typeof r[3+a]=="number"&&(r[3+a]/=u),s(r)}};let KE=!1;class Hue extends D.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;oce(Gue),s&&(n.group&&n.group.add(s),i&&i.register&&r&&i.register(s),KE&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),fw.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:s}=this.props,{projection:a}=i;return a&&(a.isPresent=s,KE=!0,r||e.layoutDependency!==n||n===void 0||e.isPresent!==s?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||ei.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),o3.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;KE=!0,r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function jH(t){const[e,n]=ece(),i=D.useContext(SI);return ke.jsx(Hue,{...t,layoutGroup:i,switchLayoutGroup:D.useContext(AH),isPresent:e,safeToRemove:n})}const Gue={borderRadius:{...h0,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:h0,borderTopRightRadius:h0,borderBottomLeftRadius:h0,borderBottomRightRadius:h0,boxShadow:Iue};function zue(t,e,n){const i=$r(t)?t:Qp(t);return i.start(v3("",i,e,n)),i.animation}const Vue=(t,e)=>t.depth-e.depth;class Uue{constructor(){this.children=[],this.isDirty=!1}add(e){V_(this.children,e),this.isDirty=!0}remove(e){U_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Vue),this.isDirty=!1,this.children.forEach(e)}}function jue(t,e){const n=Vs.now(),i=({timestamp:r})=>{const s=r-n;s>=e&&(_h(i),t(s-e))};return ei.setup(i,!0),()=>_h(i)}const WH=["TopLeft","TopRight","BottomLeft","BottomRight"],Wue=WH.length,X8=t=>typeof t=="string"?parseFloat(t):t,$8=t=>typeof t=="number"||at.test(t);function que(t,e,n,i,r,s){r?(t.opacity=ci(0,n.opacity??1,Kue(i)),t.opacityExit=ci(e.opacity??1,0,Yue(i))):s&&(t.opacity=ci(e.opacity??1,n.opacity??1,i));for(let a=0;a<Wue;a++){const o=`border${WH[a]}Radius`;let l=Z8(e,o),u=Z8(n,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||$8(l)===$8(u)?(t[o]=Math.max(ci(X8(l),X8(u),i),0),(ql.test(u)||ql.test(l))&&(t[o]+="%")):t[o]=u}(e.rotate||n.rotate)&&(t.rotate=ci(e.rotate||0,n.rotate||0,i))}function Z8(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Kue=qH(0,.5,LI),Yue=qH(.5,.95,io);function qH(t,e,n){return i=>i<t?0:i>e?1:n(py(t,e,i))}function Q8(t,e){t.min=e.min,t.max=e.max}function Va(t,e){Q8(t.x,e.x),Q8(t.y,e.y)}function J8(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function eL(t,e,n,i,r){return t-=e,t=wS(t,1/n,i),r!==void 0&&(t=wS(t,1/r,i)),t}function Xue(t,e=0,n=1,i=.5,r,s=t,a=t){if(ql.test(e)&&(e=parseFloat(e),e=ci(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=ci(s.min,s.max,i);t===s&&(o-=e),t.min=eL(t.min,e,n,o,r),t.max=eL(t.max,e,n,o,r)}function tL(t,e,[n,i,r],s,a){Xue(t,e[n],e[i],e[r],e.scale,s,a)}const $ue=["x","scaleX","originX"],Zue=["y","scaleY","originY"];function nL(t,e,n,i){tL(t.x,e,$ue,n?n.x:void 0,i?i.x:void 0),tL(t.y,e,Zue,n?n.y:void 0,i?i.y:void 0)}function iL(t){return t.translate===0&&t.scale===1}function KH(t){return iL(t.x)&&iL(t.y)}function rL(t,e){return t.min===e.min&&t.max===e.max}function Que(t,e){return rL(t.x,e.x)&&rL(t.y,e.y)}function sL(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function YH(t,e){return sL(t.x,e.x)&&sL(t.y,e.y)}function aL(t){return gs(t.x)/gs(t.y)}function oL(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Jue{constructor(){this.members=[]}add(e){V_(this.members,e),e.scheduleRender()}remove(e){if(U_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ehe(t,e,n){let i="";const r=t.x.translate/e.x,s=t.y.translate/e.y,a=n?.z||0;if((r||s||a)&&(i=`translate3d(${r}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:h,rotateX:g,rotateY:v,skewX:y,skewY:w}=n;u&&(i=`perspective(${u}px) ${i}`),h&&(i+=`rotate(${h}deg) `),g&&(i+=`rotateX(${g}deg) `),v&&(i+=`rotateY(${v}deg) `),y&&(i+=`skewX(${y}deg) `),w&&(i+=`skewY(${w}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(i+=`scale(${o}, ${l})`),i||"none"}const YE=["","X","Y","Z"],the=1e3;let nhe=0;function XE(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function XH(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=FH(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ei,!(r||s))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&XH(i)}function $H({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},o=e?.()){this.id=nhe++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(she),this.nodes.forEach(che),this.nodes.forEach(uhe),this.nodes.forEach(ahe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Uue)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new q_),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=hH(a)&&!Zle(a),this.instance=a;const{layoutId:o,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),t){let h,g=0;const v=()=>this.root.updateBlockedByResize=!1;ei.read(()=>{g=window.innerWidth}),t(a,()=>{const y=window.innerWidth;y!==g&&(g=y,this.root.updateBlockedByResize=!0,h&&h(),h=jue(v,250),fw.hasAnimatedSinceResize&&(fw.hasAnimatedSinceResize=!1,this.nodes.forEach(uL)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||l)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:g,hasRelativeLayoutChanged:v,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||u.getDefaultTransition()||phe,{onLayoutAnimationStart:S,onLayoutAnimationComplete:x}=u.getProps(),T=!this.targetLayout||!YH(this.targetLayout,y),_=!g&&v;if(this.options.layoutRoot||this.resumeFrom||_||g&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const M={...s3(w,"layout"),onPlay:S,onComplete:x};(u.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M),this.setAnimationOrigin(h,_)}else g||uL(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),_h(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(hhe),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&XH(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const g=this.path[h];g.shouldResetTransform=!0,g.updateScroll("snapshot"),g.options.layoutRoot&&g.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(lL);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(cL);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(lhe),this.nodes.forEach(ihe),this.nodes.forEach(rhe)):this.nodes.forEach(cL),this.clearAllSnapshots();const o=Vs.now();_r.delta=tu(0,1e3/60,o-_r.timestamp),_r.timestamp=o,_r.isProcessing=!0,BE.update.process(_r),BE.preRender.process(_r),BE.render.process(_r),_r.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,o3.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(ohe),this.sharedNodes.forEach(dhe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ei.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ei.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!gs(this.snapshot.measuredBox.x)&&!gs(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Di(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o&&this.instance){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!KH(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;a&&this.instance&&(o||Wd(this.latestValues)||h)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),mhe(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:a}=this.options;if(!a)return Di();const o=a.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(vhe))){const{scroll:u}=this.root;u&&(wp(o.x,u.offset.x),wp(o.y,u.offset.y))}return o}removeElementScroll(a){const o=Di();if(Va(o,a),this.scroll?.wasRoot)return o;for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:h,options:g}=u;u!==this.root&&h&&g.layoutScroll&&(h.wasRoot&&Va(o,a),wp(o.x,h.offset.x),wp(o.y,h.offset.y))}return o}applyTransform(a,o=!1){const l=Di();Va(l,a);for(let u=0;u<this.path.length;u++){const h=this.path[u];!o&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Sp(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Wd(h.latestValues)&&Sp(l,h.latestValues)}return Wd(this.latestValues)&&Sp(l,this.latestValues),l}removeTransform(a){const o=Di();Va(o,a);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Wd(u.latestValues))continue;$R(u.latestValues)&&u.updateSnapshot();const h=Di(),g=u.measurePageBox();Va(h,g),nL(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return Wd(this.latestValues)&&nL(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==_r.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(a||l&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:g}=this.options;if(!(!this.layout||!(h||g))){if(this.resolvedRelativeTargetAt=_r.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Di(),this.relativeTargetOrigin=Di(),W0(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),Va(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Di(),this.targetWithTransforms=Di()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),xue(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Va(this.target,this.layout.layoutBox),DH(this.target,this.targetDelta)):Va(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Di(),this.relativeTargetOrigin=Di(),W0(this.relativeTargetOrigin,this.target,v.target),Va(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||$R(this.parent.latestValues)||RH(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const a=this.getLead(),o=!!this.resumingFrom||this!==a;let l=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===_r.timestamp&&(l=!1),l)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;Va(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,v=this.treeScale.y;kce(this.layoutCorrected,this.treeScale,this.path,o),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Di());const{target:y}=a;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(J8(this.prevProjectionDelta.x,this.projectionDelta.x),J8(this.prevProjectionDelta.y,this.projectionDelta.y)),j0(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==g||this.treeScale.y!==v||!oL(this.projectionDelta.x,this.prevProjectionDelta.x)||!oL(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){if(this.options.visualElement?.scheduleRender(),a){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=xp(),this.projectionDelta=xp(),this.projectionDeltaWithTransform=xp()}setAnimationOrigin(a,o=!1){const l=this.snapshot,u=l?l.latestValues:{},h={...this.latestValues},g=xp();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const v=Di(),y=l?l.source:void 0,w=this.layout?this.layout.source:void 0,S=y!==w,x=this.getStack(),T=!x||x.members.length<=1,_=!!(S&&!T&&this.options.crossfade===!0&&!this.path.some(ghe));this.animationProgress=0;let M;this.mixTargetDelta=F=>{const L=F/1e3;hL(g.x,a.x,L),hL(g.y,a.y,L),this.setTargetDelta(g),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(W0(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),fhe(this.relativeTarget,this.relativeTargetOrigin,v,L),M&&Que(this.relativeTarget,M)&&(this.isProjectionDirty=!1),M||(M=Di()),Va(M,this.relativeTarget)),S&&(this.animationValues=h,que(h,u,this.latestValues,L,_,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(_h(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ei.update(()=>{fw.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Qp(0)),this.currentAnimation=zue(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(the),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:h}=a;if(!(!o||!l||!u)){if(this!==a&&this.layout&&u&&ZH(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Di();const g=gs(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+g;const v=gs(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+v}Va(o,l),Sp(o,h),j0(this.projectionDeltaWithTransform,this.layoutCorrected,o,h)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Jue),this.sharedNodes.get(a).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){const{layoutId:a}=this.options;return a?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:a}=this.options;return a?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&XE("z",a,u,this.animationValues);for(let h=0;h<YE.length;h++)XE(`rotate${YE[h]}`,a,u,this.animationValues),XE(`skew${YE[h]}`,a,u,this.animationValues);a.render();for(const h in u)a.setStaticValue(h,u[h]),this.animationValues&&(this.animationValues[h]=u[h]);a.scheduleRender()}applyProjectionStyles(a,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=dw(o?.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=dw(o?.pointerEvents)||""),this.hasProjected&&!Wd(this.latestValues)&&(a.transform=l?l({},""):"none",this.hasProjected=!1);return}a.visibility="";const h=u.animationValues||u.latestValues;this.applyTransformsToTarget();let g=ehe(this.projectionDeltaWithTransform,this.treeScale,h);l&&(g=l(h,g)),a.transform=g;const{x:v,y}=this.projectionDelta;a.transformOrigin=`${v.origin*100}% ${y.origin*100}% 0`,u.animationValues?a.opacity=u===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:a.opacity=u===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const w in Cy){if(h[w]===void 0)continue;const{correct:S,applyTo:x,isCSSVariable:T}=Cy[w],_=g==="none"?h[w]:S(h[w],u);if(x){const M=x.length;for(let F=0;F<M;F++)a[x[F]]=_}else T?this.options.visualElement.renderState.vars[w]=_:a[w]=_}this.options.layoutId&&(a.pointerEvents=u===this?dw(o?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>a.currentAnimation?.stop()),this.root.nodes.forEach(lL),this.root.sharedNodes.clear()}}}function ihe(t){t.updateLayout()}function rhe(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=t.layout,{animationType:r}=t.options,s=e.source!==t.layout.source;r==="size"?Ka(h=>{const g=s?e.measuredBox[h]:e.layoutBox[h],v=gs(g);g.min=n[h].min,g.max=g.min+v}):ZH(r,e.layoutBox,n)&&Ka(h=>{const g=s?e.measuredBox[h]:e.layoutBox[h],v=gs(n[h]);g.max=g.min+v,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+v)});const a=xp();j0(a,n,e.layoutBox);const o=xp();s?j0(o,t.applyTransform(i,!0),e.measuredBox):j0(o,n,e.layoutBox);const l=!KH(a);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:g,layout:v}=h;if(g&&v){const y=Di();W0(y,e.layoutBox,g.layoutBox);const w=Di();W0(w,n,v.layoutBox),YH(y,w)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=y,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:o,layoutDelta:a,hasLayoutChanged:l,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function she(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function ahe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function ohe(t){t.clearSnapshot()}function lL(t){t.clearMeasurements()}function cL(t){t.isLayoutDirty=!1}function lhe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function uL(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function che(t){t.resolveTargetDelta()}function uhe(t){t.calcProjection()}function hhe(t){t.resetSkewAndRotation()}function dhe(t){t.removeLeadSnapshot()}function hL(t,e,n){t.translate=ci(e.translate,0,n),t.scale=ci(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function dL(t,e,n,i){t.min=ci(e.min,n.min,i),t.max=ci(e.max,n.max,i)}function fhe(t,e,n,i){dL(t.x,e.x,n.x,i),dL(t.y,e.y,n.y,i)}function ghe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const phe={duration:.45,ease:[.4,0,.1,1]},fL=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),gL=fL("applewebkit/")&&!fL("chrome/")?Math.round:io;function pL(t){t.min=gL(t.min),t.max=gL(t.max)}function mhe(t){pL(t.x),pL(t.y)}function ZH(t,e,n){return t==="position"||t==="preserve-aspect"&&!Sue(aL(e),aL(n),.2)}function vhe(t){return t!==t.root&&t.scroll?.wasRoot}const yhe=$H({attachResizeListener:(t,e)=>by(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),$E={current:void 0},QH=$H({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!$E.current){const t=new yhe({});t.mount(window),t.setOptions({layoutScroll:!0}),$E.current=t}return $E.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Che={pan:{Feature:Bue},drag:{Feature:Nue,ProjectionNode:QH,MeasureLayout:jH}};function mL(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,s=i[r];s&&ei.postRender(()=>s(e,nC(e)))}class bhe extends Gh{mount(){const{current:e}=this.node;e&&(this.unmount=qle(e,(n,i)=>(mL(this.node,i,"Start"),r=>mL(this.node,r,"End"))))}unmount(){}}class whe extends Gh{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Jy(by(this.node.current,"focus",()=>this.onFocus()),by(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function vL(t,e,n){const{props:i}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),s=i[r];s&&ei.postRender(()=>s(e,nC(e)))}class She extends Gh{mount(){const{current:e}=this.node;e&&(this.unmount=$le(e,(n,i)=>(vL(this.node,i,"Start"),(r,{success:s})=>vL(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const iD=new WeakMap,ZE=new WeakMap,xhe=t=>{const e=iD.get(t.target);e&&e(t)},Ahe=t=>{t.forEach(xhe)};function Ehe({root:t,...e}){const n=t||document;ZE.has(n)||ZE.set(n,{});const i=ZE.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(Ahe,{root:t,...e})),i[r]}function The(t,e,n){const i=Ehe(e);return iD.set(t,n),i.observe(t),()=>{iD.delete(t),i.unobserve(t)}}const Rhe={some:0,all:1};class Dhe extends Gh{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:s}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:Rhe[r]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:g}=this.node.getProps(),v=u?h:g;v&&v(l)};return The(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Mhe(e,n))&&this.startObserver()}unmount(){}}function Mhe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const _he={inView:{Feature:Dhe},tap:{Feature:She},focus:{Feature:whe},hover:{Feature:bhe}},Phe={layout:{ProjectionNode:QH,MeasureLayout:jH}},Ohe={...mue,..._he,...Che,...Phe},JH=Oce(Ohe,Wce);function Lhe({data:t}){const e=["#9CA3AF","#6B7280","#4B5563","#374151","#1F2937"];return ke.jsxs(JH.div,{className:"bg-white p-8 rounded-2xl shadow-md border border-gray-200",initial:{opacity:0,y:30},animate:{opacity:1,y:0},children:[ke.jsx("h2",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"Space Utilization Overview"}),t.length===0?ke.jsx("div",{className:"text-gray-500 text-center p-8 border border-dashed border-gray-300 rounded-xl",children:" No data yet. Please upload an Excel file to see visualization."}):ke.jsx("div",{className:"h-[350px]",children:ke.jsx(o$,{width:"100%",height:"100%",children:ke.jsxs(eoe,{children:[ke.jsx(oI,{data:t,dataKey:"value",nameKey:"name",outerRadius:120,label:!0,children:t.map((n,i)=>ke.jsx(P2,{fill:e[i%e.length]},i))}),ke.jsx(lie,{contentStyle:{backgroundColor:"#F9FAFB",border:"1px solid #D1D5DB",borderRadius:"0.5rem"}})]})})})]})}function eG(t,e){return function(){return t.apply(e,arguments)}}const{toString:Fhe}=Object.prototype,{getPrototypeOf:y3}=Object,{iterator:B2,toStringTag:tG}=Symbol,I2=(t=>e=>{const n=Fhe.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ko=t=>(t=t.toLowerCase(),e=>I2(e)===t),H2=t=>e=>typeof e===t,{isArray:Cm}=Array,em=H2("undefined");function iC(t){return t!==null&&!em(t)&&t.constructor!==null&&!em(t.constructor)&&Us(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const nG=Ko("ArrayBuffer");function khe(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&nG(t.buffer),e}const Nhe=H2("string"),Us=H2("function"),iG=H2("number"),rC=t=>t!==null&&typeof t=="object",Bhe=t=>t===!0||t===!1,gw=t=>{if(I2(t)!=="object")return!1;const e=y3(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(tG in t)&&!(B2 in t)},Ihe=t=>{if(!rC(t)||iC(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Hhe=Ko("Date"),Ghe=Ko("File"),zhe=Ko("Blob"),Vhe=Ko("FileList"),Uhe=t=>rC(t)&&Us(t.pipe),jhe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Us(t.append)&&((e=I2(t))==="formdata"||e==="object"&&Us(t.toString)&&t.toString()==="[object FormData]"))},Whe=Ko("URLSearchParams"),[qhe,Khe,Yhe,Xhe]=["ReadableStream","Request","Response","Headers"].map(Ko),$he=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function sC(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let i,r;if(typeof t!="object"&&(t=[t]),Cm(t))for(i=0,r=t.length;i<r;i++)e.call(null,t[i],i,t);else{if(iC(t))return;const s=n?Object.getOwnPropertyNames(t):Object.keys(t),a=s.length;let o;for(i=0;i<a;i++)o=s[i],e.call(null,t[o],o,t)}}function rG(t,e){if(iC(t))return null;e=e.toLowerCase();const n=Object.keys(t);let i=n.length,r;for(;i-- >0;)if(r=n[i],e===r.toLowerCase())return r;return null}const Qd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,sG=t=>!em(t)&&t!==Qd;function rD(){const{caseless:t,skipUndefined:e}=sG(this)&&this||{},n={},i=(r,s)=>{if(s==="__proto__"||s==="constructor"||s==="prototype")return;const a=t&&rG(n,s)||s;gw(n[a])&&gw(r)?n[a]=rD(n[a],r):gw(r)?n[a]=rD({},r):Cm(r)?n[a]=r.slice():(!e||!em(r))&&(n[a]=r)};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&sC(arguments[r],i);return n}const Zhe=(t,e,n,{allOwnKeys:i}={})=>(sC(e,(r,s)=>{n&&Us(r)?Object.defineProperty(t,s,{value:eG(r,n),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(t,s,{value:r,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:i}),t),Qhe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Jhe=(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),Object.defineProperty(t.prototype,"constructor",{value:t,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},ede=(t,e,n,i)=>{let r,s,a;const o={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),s=r.length;s-- >0;)a=r[s],(!i||i(a,t,e))&&!o[a]&&(e[a]=t[a],o[a]=!0);t=n!==!1&&y3(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},tde=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return i!==-1&&i===n},nde=t=>{if(!t)return null;if(Cm(t))return t;let e=t.length;if(!iG(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},ide=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&y3(Uint8Array)),rde=(t,e)=>{const i=(t&&t[B2]).call(t);let r;for(;(r=i.next())&&!r.done;){const s=r.value;e.call(t,s[0],s[1])}},sde=(t,e)=>{let n;const i=[];for(;(n=t.exec(e))!==null;)i.push(n);return i},ade=Ko("HTMLFormElement"),ode=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,r){return i.toUpperCase()+r}),yL=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),lde=Ko("RegExp"),aG=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};sC(n,(r,s)=>{let a;(a=e(r,s,t))!==!1&&(i[s]=a||r)}),Object.defineProperties(t,i)},cde=t=>{aG(t,(e,n)=>{if(Us(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(Us(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},ude=(t,e)=>{const n={},i=r=>{r.forEach(s=>{n[s]=!0})};return Cm(t)?i(t):i(String(t).split(e)),n},hde=()=>{},dde=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function fde(t){return!!(t&&Us(t.append)&&t[tG]==="FormData"&&t[B2])}const gde=t=>{const e=new Array(10),n=(i,r)=>{if(rC(i)){if(e.indexOf(i)>=0)return;if(iC(i))return i;if(!("toJSON"in i)){e[r]=i;const s=Cm(i)?[]:{};return sC(i,(a,o)=>{const l=n(a,r+1);!em(l)&&(s[o]=l)}),e[r]=void 0,s}}return i};return n(t,0)},pde=Ko("AsyncFunction"),mde=t=>t&&(rC(t)||Us(t))&&Us(t.then)&&Us(t.catch),oG=((t,e)=>t?setImmediate:e?((n,i)=>(Qd.addEventListener("message",({source:r,data:s})=>{r===Qd&&s===n&&i.length&&i.shift()()},!1),r=>{i.push(r),Qd.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Us(Qd.postMessage)),vde=typeof queueMicrotask<"u"?queueMicrotask.bind(Qd):typeof process<"u"&&process.nextTick||oG,yde=t=>t!=null&&Us(t[B2]),ve={isArray:Cm,isArrayBuffer:nG,isBuffer:iC,isFormData:jhe,isArrayBufferView:khe,isString:Nhe,isNumber:iG,isBoolean:Bhe,isObject:rC,isPlainObject:gw,isEmptyObject:Ihe,isReadableStream:qhe,isRequest:Khe,isResponse:Yhe,isHeaders:Xhe,isUndefined:em,isDate:Hhe,isFile:Ghe,isBlob:zhe,isRegExp:lde,isFunction:Us,isStream:Uhe,isURLSearchParams:Whe,isTypedArray:ide,isFileList:Vhe,forEach:sC,merge:rD,extend:Zhe,trim:$he,stripBOM:Qhe,inherits:Jhe,toFlatObject:ede,kindOf:I2,kindOfTest:Ko,endsWith:tde,toArray:nde,forEachEntry:rde,matchAll:sde,isHTMLForm:ade,hasOwnProperty:yL,hasOwnProp:yL,reduceDescriptors:aG,freezeMethods:cde,toObjectSet:ude,toCamelCase:ode,noop:hde,toFiniteNumber:dde,findKey:rG,global:Qd,isContextDefined:sG,isSpecCompliantForm:fde,toJSONObject:gde,isAsyncFn:pde,isThenable:mde,setImmediate:oG,asap:vde,isIterable:yde};let ot=class lG extends Error{static from(e,n,i,r,s,a){const o=new lG(e.message,n||e.code,i,r,s);return o.cause=e,o.name=e.name,a&&Object.assign(o,a),o}constructor(e,n,i,r,s){super(e),this.name="AxiosError",this.isAxiosError=!0,n&&(this.code=n),i&&(this.config=i),r&&(this.request=r),s&&(this.response=s,this.status=s.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ve.toJSONObject(this.config),code:this.code,status:this.status}}};ot.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";ot.ERR_BAD_OPTION="ERR_BAD_OPTION";ot.ECONNABORTED="ECONNABORTED";ot.ETIMEDOUT="ETIMEDOUT";ot.ERR_NETWORK="ERR_NETWORK";ot.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";ot.ERR_DEPRECATED="ERR_DEPRECATED";ot.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";ot.ERR_BAD_REQUEST="ERR_BAD_REQUEST";ot.ERR_CANCELED="ERR_CANCELED";ot.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";ot.ERR_INVALID_URL="ERR_INVALID_URL";const Cde=null;function sD(t){return ve.isPlainObject(t)||ve.isArray(t)}function cG(t){return ve.endsWith(t,"[]")?t.slice(0,-2):t}function CL(t,e,n){return t?t.concat(e).map(function(r,s){return r=cG(r),!n&&s?"["+r+"]":r}).join(n?".":""):e}function bde(t){return ve.isArray(t)&&!t.some(sD)}const wde=ve.toFlatObject(ve,{},null,function(e){return/^is[A-Z]/.test(e)});function G2(t,e,n){if(!ve.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=ve.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,x){return!ve.isUndefined(x[S])});const i=n.metaTokens,r=n.visitor||h,s=n.dots,a=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&ve.isSpecCompliantForm(e);if(!ve.isFunction(r))throw new TypeError("visitor must be a function");function u(w){if(w===null)return"";if(ve.isDate(w))return w.toISOString();if(ve.isBoolean(w))return w.toString();if(!l&&ve.isBlob(w))throw new ot("Blob is not supported. Use a Buffer instead.");return ve.isArrayBuffer(w)||ve.isTypedArray(w)?l&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function h(w,S,x){let T=w;if(w&&!x&&typeof w=="object"){if(ve.endsWith(S,"{}"))S=i?S:S.slice(0,-2),w=JSON.stringify(w);else if(ve.isArray(w)&&bde(w)||(ve.isFileList(w)||ve.endsWith(S,"[]"))&&(T=ve.toArray(w)))return S=cG(S),T.forEach(function(M,F){!(ve.isUndefined(M)||M===null)&&e.append(a===!0?CL([S],F,s):a===null?S:S+"[]",u(M))}),!1}return sD(w)?!0:(e.append(CL(x,S,s),u(w)),!1)}const g=[],v=Object.assign(wde,{defaultVisitor:h,convertValue:u,isVisitable:sD});function y(w,S){if(!ve.isUndefined(w)){if(g.indexOf(w)!==-1)throw Error("Circular reference detected in "+S.join("."));g.push(w),ve.forEach(w,function(T,_){(!(ve.isUndefined(T)||T===null)&&r.call(e,T,ve.isString(_)?_.trim():_,S,v))===!0&&y(T,S?S.concat(_):[_])}),g.pop()}}if(!ve.isObject(t))throw new TypeError("data must be an object");return y(t),e}function bL(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function C3(t,e){this._pairs=[],t&&G2(t,this,e)}const uG=C3.prototype;uG.append=function(e,n){this._pairs.push([e,n])};uG.toString=function(e){const n=e?function(i){return e.call(this,i,bL)}:bL;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function Sde(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function hG(t,e,n){if(!e)return t;const i=n&&n.encode||Sde,r=ve.isFunction(n)?{serialize:n}:n,s=r&&r.serialize;let a;if(s?a=s(e,r):a=ve.isURLSearchParams(e)?e.toString():new C3(e,r).toString(i),a){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class wL{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ve.forEach(this.handlers,function(i){i!==null&&e(i)})}}const b3={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},xde=typeof URLSearchParams<"u"?URLSearchParams:C3,Ade=typeof FormData<"u"?FormData:null,Ede=typeof Blob<"u"?Blob:null,Tde={isBrowser:!0,classes:{URLSearchParams:xde,FormData:Ade,Blob:Ede},protocols:["http","https","file","blob","url","data"]},w3=typeof window<"u"&&typeof document<"u",aD=typeof navigator=="object"&&navigator||void 0,Rde=w3&&(!aD||["ReactNative","NativeScript","NS"].indexOf(aD.product)<0),Dde=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Mde=w3&&window.location.href||"http://localhost",_de=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:w3,hasStandardBrowserEnv:Rde,hasStandardBrowserWebWorkerEnv:Dde,navigator:aD,origin:Mde},Symbol.toStringTag,{value:"Module"})),Xr={..._de,...Tde};function Pde(t,e){return G2(t,new Xr.classes.URLSearchParams,{visitor:function(n,i,r,s){return Xr.isNode&&ve.isBuffer(n)?(this.append(i,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)},...e})}function Ode(t){return ve.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Lde(t){const e={},n=Object.keys(t);let i;const r=n.length;let s;for(i=0;i<r;i++)s=n[i],e[s]=t[s];return e}function dG(t){function e(n,i,r,s){let a=n[s++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),l=s>=n.length;return a=!a&&ve.isArray(r)?r.length:a,l?(ve.hasOwnProp(r,a)?r[a]=[r[a],i]:r[a]=i,!o):((!r[a]||!ve.isObject(r[a]))&&(r[a]=[]),e(n,i,r[a],s)&&ve.isArray(r[a])&&(r[a]=Lde(r[a])),!o)}if(ve.isFormData(t)&&ve.isFunction(t.entries)){const n={};return ve.forEachEntry(t,(i,r)=>{e(Ode(i),r,n,0)}),n}return null}function Fde(t,e,n){if(ve.isString(t))try{return(e||JSON.parse)(t),ve.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}const aC={transitional:b3,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const i=n.getContentType()||"",r=i.indexOf("application/json")>-1,s=ve.isObject(e);if(s&&ve.isHTMLForm(e)&&(e=new FormData(e)),ve.isFormData(e))return r?JSON.stringify(dG(e)):e;if(ve.isArrayBuffer(e)||ve.isBuffer(e)||ve.isStream(e)||ve.isFile(e)||ve.isBlob(e)||ve.isReadableStream(e))return e;if(ve.isArrayBufferView(e))return e.buffer;if(ve.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(s){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Pde(e,this.formSerializer).toString();if((o=ve.isFileList(e))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return G2(o?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||r?(n.setContentType("application/json",!1),Fde(e)):e}],transformResponse:[function(e){const n=this.transitional||aC.transitional,i=n&&n.forcedJSONParsing,r=this.responseType==="json";if(ve.isResponse(e)||ve.isReadableStream(e))return e;if(e&&ve.isString(e)&&(i&&!this.responseType||r)){const a=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e,this.parseReviver)}catch(o){if(a)throw o.name==="SyntaxError"?ot.from(o,ot.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Xr.classes.FormData,Blob:Xr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ve.forEach(["delete","get","head","post","put","patch"],t=>{aC.headers[t]={}});const kde=ve.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Nde=t=>{const e={};let n,i,r;return t&&t.split(`
`).forEach(function(a){r=a.indexOf(":"),n=a.substring(0,r).trim().toLowerCase(),i=a.substring(r+1).trim(),!(!n||e[n]&&kde[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e},SL=Symbol("internals");function d0(t){return t&&String(t).trim().toLowerCase()}function pw(t){return t===!1||t==null?t:ve.isArray(t)?t.map(pw):String(t)}function Bde(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}const Ide=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function QE(t,e,n,i,r){if(ve.isFunction(i))return i.call(this,e,n);if(r&&(e=n),!!ve.isString(e)){if(ve.isString(i))return e.indexOf(i)!==-1;if(ve.isRegExp(i))return i.test(e)}}function Hde(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function Gde(t,e){const n=ve.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(r,s,a){return this[i].call(this,e,r,s,a)},configurable:!0})})}let js=class{constructor(e){e&&this.set(e)}set(e,n,i){const r=this;function s(o,l,u){const h=d0(l);if(!h)throw new Error("header name must be a non-empty string");const g=ve.findKey(r,h);(!g||r[g]===void 0||u===!0||u===void 0&&r[g]!==!1)&&(r[g||l]=pw(o))}const a=(o,l)=>ve.forEach(o,(u,h)=>s(u,h,l));if(ve.isPlainObject(e)||e instanceof this.constructor)a(e,n);else if(ve.isString(e)&&(e=e.trim())&&!Ide(e))a(Nde(e),n);else if(ve.isObject(e)&&ve.isIterable(e)){let o={},l,u;for(const h of e){if(!ve.isArray(h))throw TypeError("Object iterator must return a key-value pair");o[u=h[0]]=(l=o[u])?ve.isArray(l)?[...l,h[1]]:[l,h[1]]:h[1]}a(o,n)}else e!=null&&s(n,e,i);return this}get(e,n){if(e=d0(e),e){const i=ve.findKey(this,e);if(i){const r=this[i];if(!n)return r;if(n===!0)return Bde(r);if(ve.isFunction(n))return n.call(this,r,i);if(ve.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=d0(e),e){const i=ve.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||QE(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let r=!1;function s(a){if(a=d0(a),a){const o=ve.findKey(i,a);o&&(!n||QE(i,i[o],o,n))&&(delete i[o],r=!0)}}return ve.isArray(e)?e.forEach(s):s(e),r}clear(e){const n=Object.keys(this);let i=n.length,r=!1;for(;i--;){const s=n[i];(!e||QE(this,this[s],s,e,!0))&&(delete this[s],r=!0)}return r}normalize(e){const n=this,i={};return ve.forEach(this,(r,s)=>{const a=ve.findKey(i,s);if(a){n[a]=pw(r),delete n[s];return}const o=e?Hde(s):String(s).trim();o!==s&&delete n[s],n[o]=pw(r),i[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return ve.forEach(this,(i,r)=>{i!=null&&i!==!1&&(n[r]=e&&ve.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(r=>i.set(r)),i}static accessor(e){const i=(this[SL]=this[SL]={accessors:{}}).accessors,r=this.prototype;function s(a){const o=d0(a);i[o]||(Gde(r,a),i[o]=!0)}return ve.isArray(e)?e.forEach(s):s(e),this}};js.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ve.reduceDescriptors(js.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(i){this[n]=i}}});ve.freezeMethods(js);function JE(t,e){const n=this||aC,i=e||n,r=js.from(i.headers);let s=i.data;return ve.forEach(t,function(o){s=o.call(n,s,r.normalize(),e?e.status:void 0)}),r.normalize(),s}function fG(t){return!!(t&&t.__CANCEL__)}let oC=class extends ot{constructor(e,n,i){super(e??"canceled",ot.ERR_CANCELED,n,i),this.name="CanceledError",this.__CANCEL__=!0}};function gG(t,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(new ot("Request failed with status code "+n.status,[ot.ERR_BAD_REQUEST,ot.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function zde(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Vde(t,e){t=t||10;const n=new Array(t),i=new Array(t);let r=0,s=0,a;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),h=i[s];a||(a=u),n[r]=l,i[r]=u;let g=s,v=0;for(;g!==r;)v+=n[g++],g=g%t;if(r=(r+1)%t,r===s&&(s=(s+1)%t),u-a<e)return;const y=h&&u-h;return y?Math.round(v*1e3/y):void 0}}function Ude(t,e){let n=0,i=1e3/e,r,s;const a=(u,h=Date.now())=>{n=h,r=null,s&&(clearTimeout(s),s=null),t(...u)};return[(...u)=>{const h=Date.now(),g=h-n;g>=i?a(u,h):(r=u,s||(s=setTimeout(()=>{s=null,a(r)},i-g)))},()=>r&&a(r)]}const SS=(t,e,n=3)=>{let i=0;const r=Vde(50,250);return Ude(s=>{const a=s.loaded,o=s.lengthComputable?s.total:void 0,l=a-i,u=r(l),h=a<=o;i=a;const g={loaded:a,total:o,progress:o?a/o:void 0,bytes:l,rate:u||void 0,estimated:u&&o&&h?(o-a)/u:void 0,event:s,lengthComputable:o!=null,[e?"download":"upload"]:!0};t(g)},n)},xL=(t,e)=>{const n=t!=null;return[i=>e[0]({lengthComputable:n,total:t,loaded:i}),e[1]]},AL=t=>(...e)=>ve.asap(()=>t(...e)),jde=Xr.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Xr.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Xr.origin),Xr.navigator&&/(msie|trident)/i.test(Xr.navigator.userAgent)):()=>!0,Wde=Xr.hasStandardBrowserEnv?{write(t,e,n,i,r,s,a){if(typeof document>"u")return;const o=[`${t}=${encodeURIComponent(e)}`];ve.isNumber(n)&&o.push(`expires=${new Date(n).toUTCString()}`),ve.isString(i)&&o.push(`path=${i}`),ve.isString(r)&&o.push(`domain=${r}`),s===!0&&o.push("secure"),ve.isString(a)&&o.push(`SameSite=${a}`),document.cookie=o.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function qde(t){return typeof t!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Kde(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function pG(t,e,n){let i=!qde(e);return t&&(i||n==!1)?Kde(t,e):e}const EL=t=>t instanceof js?{...t}:t;function Sf(t,e){e=e||{};const n={};function i(u,h,g,v){return ve.isPlainObject(u)&&ve.isPlainObject(h)?ve.merge.call({caseless:v},u,h):ve.isPlainObject(h)?ve.merge({},h):ve.isArray(h)?h.slice():h}function r(u,h,g,v){if(ve.isUndefined(h)){if(!ve.isUndefined(u))return i(void 0,u,g,v)}else return i(u,h,g,v)}function s(u,h){if(!ve.isUndefined(h))return i(void 0,h)}function a(u,h){if(ve.isUndefined(h)){if(!ve.isUndefined(u))return i(void 0,u)}else return i(void 0,h)}function o(u,h,g){if(g in e)return i(u,h);if(g in t)return i(void 0,u)}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(u,h,g)=>r(EL(u),EL(h),g,!0)};return ve.forEach(Object.keys({...t,...e}),function(h){if(h==="__proto__"||h==="constructor"||h==="prototype")return;const g=ve.hasOwnProp(l,h)?l[h]:r,v=g(t[h],e[h],h);ve.isUndefined(v)&&g!==o||(n[h]=v)}),n}const mG=t=>{const e=Sf({},t);let{data:n,withXSRFToken:i,xsrfHeaderName:r,xsrfCookieName:s,headers:a,auth:o}=e;if(e.headers=a=js.from(a),e.url=hG(pG(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),ve.isFormData(n)){if(Xr.hasStandardBrowserEnv||Xr.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(ve.isFunction(n.getHeaders)){const l=n.getHeaders(),u=["content-type","content-length"];Object.entries(l).forEach(([h,g])=>{u.includes(h.toLowerCase())&&a.set(h,g)})}}if(Xr.hasStandardBrowserEnv&&(i&&ve.isFunction(i)&&(i=i(e)),i||i!==!1&&jde(e.url))){const l=r&&s&&Wde.read(s);l&&a.set(r,l)}return e},Yde=typeof XMLHttpRequest<"u",Xde=Yde&&function(t){return new Promise(function(n,i){const r=mG(t);let s=r.data;const a=js.from(r.headers).normalize();let{responseType:o,onUploadProgress:l,onDownloadProgress:u}=r,h,g,v,y,w;function S(){y&&y(),w&&w(),r.cancelToken&&r.cancelToken.unsubscribe(h),r.signal&&r.signal.removeEventListener("abort",h)}let x=new XMLHttpRequest;x.open(r.method.toUpperCase(),r.url,!0),x.timeout=r.timeout;function T(){if(!x)return;const M=js.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),L={data:!o||o==="text"||o==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:M,config:t,request:x};gG(function(B){n(B),S()},function(B){i(B),S()},L),x=null}"onloadend"in x?x.onloadend=T:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(T)},x.onabort=function(){x&&(i(new ot("Request aborted",ot.ECONNABORTED,t,x)),x=null)},x.onerror=function(F){const L=F&&F.message?F.message:"Network Error",k=new ot(L,ot.ERR_NETWORK,t,x);k.event=F||null,i(k),x=null},x.ontimeout=function(){let F=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const L=r.transitional||b3;r.timeoutErrorMessage&&(F=r.timeoutErrorMessage),i(new ot(F,L.clarifyTimeoutError?ot.ETIMEDOUT:ot.ECONNABORTED,t,x)),x=null},s===void 0&&a.setContentType(null),"setRequestHeader"in x&&ve.forEach(a.toJSON(),function(F,L){x.setRequestHeader(L,F)}),ve.isUndefined(r.withCredentials)||(x.withCredentials=!!r.withCredentials),o&&o!=="json"&&(x.responseType=r.responseType),u&&([v,w]=SS(u,!0),x.addEventListener("progress",v)),l&&x.upload&&([g,y]=SS(l),x.upload.addEventListener("progress",g),x.upload.addEventListener("loadend",y)),(r.cancelToken||r.signal)&&(h=M=>{x&&(i(!M||M.type?new oC(null,t,x):M),x.abort(),x=null)},r.cancelToken&&r.cancelToken.subscribe(h),r.signal&&(r.signal.aborted?h():r.signal.addEventListener("abort",h)));const _=zde(r.url);if(_&&Xr.protocols.indexOf(_)===-1){i(new ot("Unsupported protocol "+_+":",ot.ERR_BAD_REQUEST,t));return}x.send(s||null)})},$de=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let i=new AbortController,r;const s=function(u){if(!r){r=!0,o();const h=u instanceof Error?u:this.reason;i.abort(h instanceof ot?h:new oC(h instanceof Error?h.message:h))}};let a=e&&setTimeout(()=>{a=null,s(new ot(`timeout of ${e}ms exceeded`,ot.ETIMEDOUT))},e);const o=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(s):u.removeEventListener("abort",s)}),t=null)};t.forEach(u=>u.addEventListener("abort",s));const{signal:l}=i;return l.unsubscribe=()=>ve.asap(o),l}},Zde=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let i=0,r;for(;i<n;)r=i+e,yield t.slice(i,r),i=r},Qde=async function*(t,e){for await(const n of Jde(t))yield*Zde(n,e)},Jde=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:i}=await e.read();if(n)break;yield i}}finally{await e.cancel()}},TL=(t,e,n,i)=>{const r=Qde(t,e);let s=0,a,o=l=>{a||(a=!0,i&&i(l))};return new ReadableStream({async pull(l){try{const{done:u,value:h}=await r.next();if(u){o(),l.close();return}let g=h.byteLength;if(n){let v=s+=g;n(v)}l.enqueue(new Uint8Array(h))}catch(u){throw o(u),u}},cancel(l){return o(l),r.return()}},{highWaterMark:2})},RL=64*1024,{isFunction:D1}=ve,efe=(({Request:t,Response:e})=>({Request:t,Response:e}))(ve.global),{ReadableStream:DL,TextEncoder:ML}=ve.global,_L=(t,...e)=>{try{return!!t(...e)}catch{return!1}},tfe=t=>{t=ve.merge.call({skipUndefined:!0},efe,t);const{fetch:e,Request:n,Response:i}=t,r=e?D1(e):typeof fetch=="function",s=D1(n),a=D1(i);if(!r)return!1;const o=r&&D1(DL),l=r&&(typeof ML=="function"?(w=>S=>w.encode(S))(new ML):async w=>new Uint8Array(await new n(w).arrayBuffer())),u=s&&o&&_L(()=>{let w=!1;const S=new n(Xr.origin,{body:new DL,method:"POST",get duplex(){return w=!0,"half"}}).headers.has("Content-Type");return w&&!S}),h=a&&o&&_L(()=>ve.isReadableStream(new i("").body)),g={stream:h&&(w=>w.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(w=>{!g[w]&&(g[w]=(S,x)=>{let T=S&&S[w];if(T)return T.call(S);throw new ot(`Response type '${w}' is not supported`,ot.ERR_NOT_SUPPORT,x)})});const v=async w=>{if(w==null)return 0;if(ve.isBlob(w))return w.size;if(ve.isSpecCompliantForm(w))return(await new n(Xr.origin,{method:"POST",body:w}).arrayBuffer()).byteLength;if(ve.isArrayBufferView(w)||ve.isArrayBuffer(w))return w.byteLength;if(ve.isURLSearchParams(w)&&(w=w+""),ve.isString(w))return(await l(w)).byteLength},y=async(w,S)=>{const x=ve.toFiniteNumber(w.getContentLength());return x??v(S)};return async w=>{let{url:S,method:x,data:T,signal:_,cancelToken:M,timeout:F,onDownloadProgress:L,onUploadProgress:k,responseType:B,headers:H,withCredentials:U="same-origin",fetchOptions:W}=mG(w),j=e||fetch;B=B?(B+"").toLowerCase():"text";let X=$de([_,M&&M.toAbortSignal()],F),ne=null;const $=X&&X.unsubscribe&&(()=>{X.unsubscribe()});let q;try{if(k&&u&&x!=="get"&&x!=="head"&&(q=await y(H,T))!==0){let V=new n(S,{method:"POST",body:T,duplex:"half"}),Z;if(ve.isFormData(T)&&(Z=V.headers.get("content-type"))&&H.setContentType(Z),V.body){const[ae,Ee]=xL(q,SS(AL(k)));T=TL(V.body,RL,ae,Ee)}}ve.isString(U)||(U=U?"include":"omit");const z=s&&"credentials"in n.prototype,K={...W,signal:X,method:x.toUpperCase(),headers:H.normalize().toJSON(),body:T,duplex:"half",credentials:z?U:void 0};ne=s&&new n(S,K);let Q=await(s?j(ne,W):j(S,K));const oe=h&&(B==="stream"||B==="response");if(h&&(L||oe&&$)){const V={};["status","statusText","headers"].forEach(Pe=>{V[Pe]=Q[Pe]});const Z=ve.toFiniteNumber(Q.headers.get("content-length")),[ae,Ee]=L&&xL(Z,SS(AL(L),!0))||[];Q=new i(TL(Q.body,RL,ae,()=>{Ee&&Ee(),$&&$()}),V)}B=B||"text";let le=await g[ve.findKey(g,B)||"text"](Q,w);return!oe&&$&&$(),await new Promise((V,Z)=>{gG(V,Z,{data:le,headers:js.from(Q.headers),status:Q.status,statusText:Q.statusText,config:w,request:ne})})}catch(z){throw $&&$(),z&&z.name==="TypeError"&&/Load failed|fetch/i.test(z.message)?Object.assign(new ot("Network Error",ot.ERR_NETWORK,w,ne,z&&z.response),{cause:z.cause||z}):ot.from(z,z&&z.code,w,ne,z&&z.response)}}},nfe=new Map,vG=t=>{let e=t&&t.env||{};const{fetch:n,Request:i,Response:r}=e,s=[i,r,n];let a=s.length,o=a,l,u,h=nfe;for(;o--;)l=s[o],u=h.get(l),u===void 0&&h.set(l,u=o?new Map:tfe(e)),h=u;return u};vG();const S3={http:Cde,xhr:Xde,fetch:{get:vG}};ve.forEach(S3,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const PL=t=>`- ${t}`,ife=t=>ve.isFunction(t)||t===null||t===!1;function rfe(t,e){t=ve.isArray(t)?t:[t];const{length:n}=t;let i,r;const s={};for(let a=0;a<n;a++){i=t[a];let o;if(r=i,!ife(i)&&(r=S3[(o=String(i)).toLowerCase()],r===void 0))throw new ot(`Unknown adapter '${o}'`);if(r&&(ve.isFunction(r)||(r=r.get(e))))break;s[o||"#"+a]=r}if(!r){const a=Object.entries(s).map(([l,u])=>`adapter ${l} `+(u===!1?"is not supported by the environment":"is not available in the build"));let o=n?a.length>1?`since :
`+a.map(PL).join(`
`):" "+PL(a[0]):"as no adapter specified";throw new ot("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r}const yG={getAdapter:rfe,adapters:S3};function eT(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new oC(null,t)}function OL(t){return eT(t),t.headers=js.from(t.headers),t.data=JE.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),yG.getAdapter(t.adapter||aC.adapter,t)(t).then(function(i){return eT(t),i.data=JE.call(t,t.transformResponse,i),i.headers=js.from(i.headers),i},function(i){return fG(i)||(eT(t),i&&i.response&&(i.response.data=JE.call(t,t.transformResponse,i.response),i.response.headers=js.from(i.response.headers))),Promise.reject(i)})}const CG="1.13.5",z2={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{z2[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const LL={};z2.transitional=function(e,n,i){function r(s,a){return"[Axios v"+CG+"] Transitional option '"+s+"'"+a+(i?". "+i:"")}return(s,a,o)=>{if(e===!1)throw new ot(r(a," has been removed"+(n?" in "+n:"")),ot.ERR_DEPRECATED);return n&&!LL[a]&&(LL[a]=!0,console.warn(r(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,a,o):!0}};z2.spelling=function(e){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function sfe(t,e,n){if(typeof t!="object")throw new ot("options must be an object",ot.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let r=i.length;for(;r-- >0;){const s=i[r],a=e[s];if(a){const o=t[s],l=o===void 0||a(o,s,t);if(l!==!0)throw new ot("option "+s+" must be "+l,ot.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ot("Unknown option "+s,ot.ERR_BAD_OPTION)}}const mw={assertOptions:sfe,validators:z2},Ua=mw.validators;let df=class{constructor(e){this.defaults=e||{},this.interceptors={request:new wL,response:new wL}}async request(e,n){try{return await this._request(e,n)}catch(i){if(i instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const s=r.stack?r.stack.replace(/^.+\n/,""):"";try{i.stack?s&&!String(i.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+s):i.stack=s}catch{}}throw i}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Sf(this.defaults,n);const{transitional:i,paramsSerializer:r,headers:s}=n;i!==void 0&&mw.assertOptions(i,{silentJSONParsing:Ua.transitional(Ua.boolean),forcedJSONParsing:Ua.transitional(Ua.boolean),clarifyTimeoutError:Ua.transitional(Ua.boolean),legacyInterceptorReqResOrdering:Ua.transitional(Ua.boolean)},!1),r!=null&&(ve.isFunction(r)?n.paramsSerializer={serialize:r}:mw.assertOptions(r,{encode:Ua.function,serialize:Ua.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),mw.assertOptions(n,{baseUrl:Ua.spelling("baseURL"),withXsrfToken:Ua.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=s&&ve.merge(s.common,s[n.method]);s&&ve.forEach(["delete","get","head","post","put","patch","common"],w=>{delete s[w]}),n.headers=js.concat(a,s);const o=[];let l=!0;this.interceptors.request.forEach(function(S){if(typeof S.runWhen=="function"&&S.runWhen(n)===!1)return;l=l&&S.synchronous;const x=n.transitional||b3;x&&x.legacyInterceptorReqResOrdering?o.unshift(S.fulfilled,S.rejected):o.push(S.fulfilled,S.rejected)});const u=[];this.interceptors.response.forEach(function(S){u.push(S.fulfilled,S.rejected)});let h,g=0,v;if(!l){const w=[OL.bind(this),void 0];for(w.unshift(...o),w.push(...u),v=w.length,h=Promise.resolve(n);g<v;)h=h.then(w[g++],w[g++]);return h}v=o.length;let y=n;for(;g<v;){const w=o[g++],S=o[g++];try{y=w(y)}catch(x){S.call(this,x);break}}try{h=OL.call(this,y)}catch(w){return Promise.reject(w)}for(g=0,v=u.length;g<v;)h=h.then(u[g++],u[g++]);return h}getUri(e){e=Sf(this.defaults,e);const n=pG(e.baseURL,e.url,e.allowAbsoluteUrls);return hG(n,e.params,e.paramsSerializer)}};ve.forEach(["delete","get","head","options"],function(e){df.prototype[e]=function(n,i){return this.request(Sf(i||{},{method:e,url:n,data:(i||{}).data}))}});ve.forEach(["post","put","patch"],function(e){function n(i){return function(s,a,o){return this.request(Sf(o||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:s,data:a}))}}df.prototype[e]=n(),df.prototype[e+"Form"]=n(!0)});let afe=class bG{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const i=this;this.promise.then(r=>{if(!i._listeners)return;let s=i._listeners.length;for(;s-- >0;)i._listeners[s](r);i._listeners=null}),this.promise.then=r=>{let s;const a=new Promise(o=>{i.subscribe(o),s=o}).then(r);return a.cancel=function(){i.unsubscribe(s)},a},e(function(s,a,o){i.reason||(i.reason=new oC(s,a,o),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=i=>{e.abort(i)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new bG(function(r){e=r}),cancel:e}}};function ofe(t){return function(n){return t.apply(null,n)}}function lfe(t){return ve.isObject(t)&&t.isAxiosError===!0}const oD={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(oD).forEach(([t,e])=>{oD[e]=t});function wG(t){const e=new df(t),n=eG(df.prototype.request,e);return ve.extend(n,df.prototype,e,{allOwnKeys:!0}),ve.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return wG(Sf(t,r))},n}const Mi=wG(aC);Mi.Axios=df;Mi.CanceledError=oC;Mi.CancelToken=afe;Mi.isCancel=fG;Mi.VERSION=CG;Mi.toFormData=G2;Mi.AxiosError=ot;Mi.Cancel=Mi.CanceledError;Mi.all=function(e){return Promise.all(e)};Mi.spread=ofe;Mi.isAxiosError=lfe;Mi.mergeConfig=Sf;Mi.AxiosHeaders=js;Mi.formToJSON=t=>dG(ve.isHTMLForm(t)?new FormData(t):t);Mi.getAdapter=yG.getAdapter;Mi.HttpStatusCode=oD;Mi.default=Mi;const{Axios:hRe,AxiosError:dRe,CanceledError:fRe,isCancel:gRe,CancelToken:pRe,VERSION:mRe,all:vRe,Cancel:yRe,isAxiosError:CRe,spread:bRe,toFormData:wRe,AxiosHeaders:SRe,HttpStatusCode:xRe,formToJSON:ARe,getAdapter:ERe,mergeConfig:TRe}=Mi,cfe=Mi.create({baseURL:"https://space-management-api.onrender.com",timeout:45e3});function ufe({onUpload:t}){const[e,n]=D.useState(null),[i,r]=D.useState(""),[s,a]=D.useState(!1),o=async()=>{if(!e)return alert("Please select a file first");const l=new FormData;l.append("file",e);try{a(!0);const u=await cfe.post("/upload",l);t(u.data.summary),r(" "+u.data.message)}catch(u){console.error(u),r(" Upload failed. Check the console for details.")}finally{a(!1)}};return ke.jsxs(JH.div,{className:"bg-white p-8 rounded-2xl shadow-md border border-gray-200 text-center",initial:{opacity:0,y:30},animate:{opacity:1,y:0},children:[ke.jsx("h2",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"Upload Space Data (Excel)"}),ke.jsx("p",{className:"text-gray-500 mb-6",children:"Upload your Excel file exported from Bluebeam Revu or another source."}),ke.jsx("input",{type:"file",accept:".xlsx,.xls",className:"border border-gray-300 rounded-md px-3 py-2 w-full mb-4 bg-gray-50",onChange:l=>n(l.target.files[0])}),ke.jsx("button",{onClick:o,disabled:s,className:"px-6 py-2 bg-gray-800 text-white rounded-md hover:bg-gray-700 transition disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Uploading...":"Upload File"}),i&&ke.jsx("p",{className:"mt-4 text-gray-700 font-medium",children:i}),s&&ke.jsx("p",{className:"mt-2 text-gray-400 text-sm",children:"This may take a moment if the server is waking up..."})]})}const hfe=Math.PI/180;function dfe(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const Jd=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},Fe={_global:Jd,version:"10.2.0",isBrowser:dfe(),isUnminified:/param/.test((function(t){}).toString()),dblClickWindow:400,getAngle(t){return Fe.angleDeg?t*hfe:t},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return Fe.DD.isDragging},isTransforming(){var t,e;return(e=(t=Fe.Transformer)===null||t===void 0?void 0:t.isTransforming())!==null&&e!==void 0?e:!1},isDragReady(){return!!Fe.DD.node},releaseCanvasOnDestroy:!0,document:Jd.document,_injectGlobal(t){typeof Jd.Konva<"u"&&console.error("Several Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),Jd.Konva=t}},fi=t=>{Fe[t.prototype.getClassName()]=t};Fe._injectGlobal(Fe);const ffe=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,FL=()=>{if(typeof document>"u")throw new Error(ffe)};class ra{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new ra(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){const n=this.m;return{x:n[0]*e.x+n[2]*e.y+n[4],y:n[1]*e.x+n[3]*e.y+n[5]}}translate(e,n){return this.m[4]+=this.m[0]*e+this.m[2]*n,this.m[5]+=this.m[1]*e+this.m[3]*n,this}scale(e,n){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=n,this.m[3]*=n,this}rotate(e){const n=Math.cos(e),i=Math.sin(e),r=this.m[0]*n+this.m[2]*i,s=this.m[1]*n+this.m[3]*i,a=this.m[0]*-i+this.m[2]*n,o=this.m[1]*-i+this.m[3]*n;return this.m[0]=r,this.m[1]=s,this.m[2]=a,this.m[3]=o,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,n){const i=this.m[0]+this.m[2]*n,r=this.m[1]+this.m[3]*n,s=this.m[2]+this.m[0]*e,a=this.m[3]+this.m[1]*e;return this.m[0]=i,this.m[1]=r,this.m[2]=s,this.m[3]=a,this}multiply(e){const n=this.m[0]*e.m[0]+this.m[2]*e.m[1],i=this.m[1]*e.m[0]+this.m[3]*e.m[1],r=this.m[0]*e.m[2]+this.m[2]*e.m[3],s=this.m[1]*e.m[2]+this.m[3]*e.m[3],a=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],o=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=n,this.m[1]=i,this.m[2]=r,this.m[3]=s,this.m[4]=a,this.m[5]=o,this}invert(){const e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),n=this.m[3]*e,i=-this.m[1]*e,r=-this.m[2]*e,s=this.m[0]*e,a=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=n,this.m[1]=i,this.m[2]=r,this.m[3]=s,this.m[4]=a,this.m[5]=o,this}getMatrix(){return this.m}decompose(){const e=this.m[0],n=this.m[1],i=this.m[2],r=this.m[3],s=this.m[4],a=this.m[5],o=e*r-n*i,l={x:s,y:a,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(e!=0||n!=0){const u=Math.sqrt(e*e+n*n);l.rotation=n>0?Math.acos(e/u):-Math.acos(e/u),l.scaleX=u,l.scaleY=o/u,l.skewX=(e*i+n*r)/o,l.skewY=0}else if(i!=0||r!=0){const u=Math.sqrt(i*i+r*r);l.rotation=Math.PI/2-(r>0?Math.acos(-i/u):-Math.acos(i/u)),l.scaleX=o/u,l.scaleY=u,l.skewX=0,l.skewY=(e*i+n*r)/o}return l.rotation=re._getRotation(l.rotation),l}}const gfe="[object Array]",pfe="[object Number]",mfe="[object String]",vfe="[object Boolean]",yfe=Math.PI/180,Cfe=180/Math.PI,f0="#",bfe="",wfe="0",Sfe="Konva warning: ",kL="Konva error: ",xfe="rgb(",tT={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},Afe=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let M1=[],g0=null;const Efe=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(t){setTimeout(t,16)},re={_isElement(t){return!!(t&&t.nodeType==1)},_isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isPlainObject(t){return!!t&&t.constructor===Object},_isArray(t){return Object.prototype.toString.call(t)===gfe},_isNumber(t){return Object.prototype.toString.call(t)===pfe&&!isNaN(t)&&isFinite(t)},_isString(t){return Object.prototype.toString.call(t)===mfe},_isBoolean(t){return Object.prototype.toString.call(t)===vfe},isObject(t){return t instanceof Object},isValidSelector(t){if(typeof t!="string")return!1;const e=t[0];return e==="#"||e==="."||e===e.toUpperCase()},_sign(t){return t===0||t>0?1:-1},requestAnimFrame(t){M1.push(t),M1.length===1&&Efe(function(){const e=M1;M1=[],e.forEach(function(n){n()})})},createCanvasElement(){FL();const t=document.createElement("canvas");try{t.style=t.style||{}}catch{}return t},createImageElement(){return FL(),document.createElement("img")},_isInDocument(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_urlToImage(t,e){const n=re.createImageElement();n.onload=function(){e(n)},n.src=t},_rgbToHex(t,e,n){return((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1)},_hexToRgb(t){t=t.replace(f0,bfe);const e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:e&255}},getRandomColor(){let t=(Math.random()*16777215<<0).toString(16);for(;t.length<6;)t=wfe+t;return f0+t},isCanvasFarblingActive(){if(g0!==null)return g0;if(typeof document>"u")return g0=!1,!1;const t=this.createCanvasElement();t.width=10,t.height=10;const e=t.getContext("2d",{willReadFrequently:!0});e.clearRect(0,0,10,10),e.fillStyle="#282828",e.fillRect(0,0,10,10);const n=e.getImageData(0,0,10,10).data;let i=!1;for(let r=0;r<100;r++)if(n[r*4]!==40||n[r*4+1]!==40||n[r*4+2]!==40||n[r*4+3]!==255){i=!0;break}return g0=i,this.releaseCanvas(t),g0},getHitColor(){const t=this.getRandomColor();return this.isCanvasFarblingActive()?this.getSnappedHexColor(t):t},getHitColorKey(t,e,n){return this.isCanvasFarblingActive()&&(t=Math.round(t/5)*5,e=Math.round(e/5)*5,n=Math.round(n/5)*5),f0+this._rgbToHex(t,e,n)},getSnappedHexColor(t){const e=this._hexToRgb(t);return f0+this._rgbToHex(Math.round(e.r/5)*5,Math.round(e.g/5)*5,Math.round(e.b/5)*5)},getRGB(t){let e;return t in tT?(e=tT[t],{r:e[0],g:e[1],b:e[2]}):t[0]===f0?this._hexToRgb(t.substring(1)):t.substr(0,4)===xfe?(e=Afe.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA(t){return t=t||"black",re._namedColorToRBA(t)||re._hex3ColorToRGBA(t)||re._hex4ColorToRGBA(t)||re._hex6ColorToRGBA(t)||re._hex8ColorToRGBA(t)||re._rgbColorToRGBA(t)||re._rgbaColorToRGBA(t)||re._hslColorToRGBA(t)},_namedColorToRBA(t){const e=tT[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(t){if(t.indexOf("rgb(")===0){t=t.match(/rgb\(([^)]+)\)/)[1];const e=t.split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(t){if(t.indexOf("rgba(")===0){t=t.match(/rgba\(([^)]+)\)/)[1];const e=t.split(/ *, */).map((n,i)=>n.slice(-1)==="%"?i===3?parseInt(n)/100:parseInt(n)/100*255:Number(n));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex8ColorToRGBA(t){if(t[0]==="#"&&t.length===9)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:parseInt(t.slice(7,9),16)/255}},_hex6ColorToRGBA(t){if(t[0]==="#"&&t.length===7)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex4ColorToRGBA(t){if(t[0]==="#"&&t.length===5)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:parseInt(t[4]+t[4],16)/255}},_hex3ColorToRGBA(t){if(t[0]==="#"&&t.length===4)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){const[e,...n]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t),i=Number(n[0])/360,r=Number(n[1])/100,s=Number(n[2])/100;let a,o,l;if(r===0)return l=s*255,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};s<.5?a=s*(1+r):a=s+r-s*r;const u=2*s-a,h=[0,0,0];for(let g=0;g<3;g++)o=i+1/3*-(g-1),o<0&&o++,o>1&&o--,6*o<1?l=u+(a-u)*6*o:2*o<1?l=a:3*o<2?l=u+(a-u)*(2/3-o)*6:l=u,h[g]=l*255;return{r:Math.round(h[0]),g:Math.round(h[1]),b:Math.round(h[2]),a:1}}},haveIntersection(t,e){return!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y)},cloneObject(t){const e={};for(const n in t)this._isPlainObject(t[n])?e[n]=this.cloneObject(t[n]):this._isArray(t[n])?e[n]=this.cloneArray(t[n]):e[n]=t[n];return e},cloneArray(t){return t.slice(0)},degToRad(t){return t*yfe},radToDeg(t){return t*Cfe},_degToRad(t){return re.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),re.degToRad(t)},_radToDeg(t){return re.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),re.radToDeg(t)},_getRotation(t){return Fe.angleDeg?re.radToDeg(t):t},_capitalize(t){return t.charAt(0).toUpperCase()+t.slice(1)},throw(t){throw new Error(kL+t)},error(t){console.error(kL+t)},warn(t){Fe.showWarnings&&console.warn(Sfe+t)},each(t,e){for(const n in t)e(n,t[n])},_inRange(t,e,n){return e<=t&&t<n},_getProjectionToSegment(t,e,n,i,r,s){let a,o,l;const u=(t-n)*(t-n)+(e-i)*(e-i);if(u==0)a=t,o=e,l=(r-n)*(r-n)+(s-i)*(s-i);else{const h=((r-t)*(n-t)+(s-e)*(i-e))/u;h<0?(a=t,o=e,l=(t-r)*(t-r)+(e-s)*(e-s)):h>1?(a=n,o=i,l=(n-r)*(n-r)+(i-s)*(i-s)):(a=t+h*(n-t),o=e+h*(i-e),l=(a-r)*(a-r)+(o-s)*(o-s))}return[a,o,l]},_getProjectionToLine(t,e,n){const i=re.cloneObject(t);let r=Number.MAX_VALUE;return e.forEach(function(s,a){if(!n&&a===e.length-1)return;const o=e[(a+1)%e.length],l=re._getProjectionToSegment(s.x,s.y,o.x,o.y,t.x,t.y),u=l[0],h=l[1],g=l[2];g<r&&(i.x=u,i.y=h,r=g)}),i},_prepareArrayForTween(t,e,n){const i=[],r=[];if(t.length>e.length){const a=e;e=t,t=a}for(let a=0;a<t.length;a+=2)i.push({x:t[a],y:t[a+1]});for(let a=0;a<e.length;a+=2)r.push({x:e[a],y:e[a+1]});const s=[];return r.forEach(function(a){const o=re._getProjectionToLine(a,i,n);s.push(o.x),s.push(o.y)}),s},_prepareToStringify(t){let e;t.visitedByCircularReferenceRemoval=!0;for(const n in t)if(t.hasOwnProperty(n)&&t[n]&&typeof t[n]=="object"){if(e=Object.getOwnPropertyDescriptor(t,n),t[n].visitedByCircularReferenceRemoval||re._isElement(t[n]))if(e.configurable)delete t[n];else return null;else if(re._prepareToStringify(t[n])===null)if(e.configurable)delete t[n];else return null}return delete t.visitedByCircularReferenceRemoval,t},_assign(t,e){for(const n in e)t[n]=e[n];return t},_getFirstPointerId(t){return t.touches?t.changedTouches[0].identifier:t.pointerId||999},releaseCanvas(...t){Fe.releaseCanvasOnDestroy&&t.forEach(e=>{e.width=0,e.height=0})},drawRoundedRectPath(t,e,n,i){let r=e<0?e:0,s=n<0?n:0;e=Math.abs(e),n=Math.abs(n);let a=0,o=0,l=0,u=0;typeof i=="number"?a=o=l=u=Math.min(i,e/2,n/2):(a=Math.min(i[0]||0,e/2,n/2),o=Math.min(i[1]||0,e/2,n/2),u=Math.min(i[2]||0,e/2,n/2),l=Math.min(i[3]||0,e/2,n/2)),t.moveTo(r+a,s),t.lineTo(r+e-o,s),t.arc(r+e-o,s+o,o,Math.PI*3/2,0,!1),t.lineTo(r+e,s+n-u),t.arc(r+e-u,s+n-u,u,0,Math.PI/2,!1),t.lineTo(r+l,s+n),t.arc(r+l,s+n-l,l,Math.PI/2,Math.PI,!1),t.lineTo(r,s+a),t.arc(r+a,s+a,a,Math.PI,Math.PI*3/2,!1)},drawRoundedPolygonPath(t,e,n,i,r){i=Math.abs(i);for(let s=0;s<n;s++){const a=e[(s-1+n)%n],o=e[s],l=e[(s+1)%n],u={x:o.x-a.x,y:o.y-a.y},h={x:l.x-o.x,y:l.y-o.y},g=Math.hypot(u.x,u.y),v=Math.hypot(h.x,h.y);let y;typeof r=="number"?y=r:y=s<r.length?r[s]:0,y=i*Math.cos(Math.PI/n)*Math.min(1,y/i*2);const S={x:u.x/g,y:u.y/g},x={x:h.x/v,y:h.y/v},T={x:o.x-S.x*y,y:o.y-S.y*y},_={x:o.x+x.x*y,y:o.y+x.y*y};s===0?t.moveTo(T.x,T.y):t.lineTo(T.x,T.y),t.arcTo(o.x,o.y,_.x,_.y,y)}}};function Tfe(t){const e=[],n=t.length,i=re;for(let r=0;r<n;r++){let s=t[r];i._isNumber(s)?s=Math.round(s*1e3)/1e3:i._isString(s)||(s=s+""),e.push(s)}return e}const NL=",",Rfe="(",Dfe=")",Mfe="([",_fe="])",Pfe=";",Ofe="()",Lfe="=",BL=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],Ffe=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"],kfe=100;let _1=null;function IL(){if(_1!==null)return _1;try{const e=re.createCanvasElement().getContext("2d");return e?!!e&&"filter"in e:(_1=!1,!1)}catch{return _1=!1,!1}}class V2{constructor(e){this.canvas=e,Fe.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,n){let i=this.traceArr,r=i.length,s="",a,o,l,u;for(a=0;a<r;a++)o=i[a],l=o.method,l?(u=o.args,s+=l,e?s+=Ofe:re._isArray(u[0])?s+=Mfe+u.join(NL)+_fe:(n&&(u=u.map(h=>typeof h=="number"?Math.floor(h):h)),s+=Rfe+u.join(NL)+Dfe)):(s+=o.property,e||(s+=Lfe+o.val)),s+=Pfe;return s}clearTrace(){this.traceArr=[]}_trace(e){let n=this.traceArr,i;n.push(e),i=n.length,i>=kfe&&n.shift()}reset(){const e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){const n=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(e){const n=e.attrs.lineCap;n&&this.setAttr("lineCap",n)}_applyOpacity(e){const n=e.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(e){const n=e.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}_applyMiterLimit(e){const n=e.attrs.miterLimit;n!=null&&this.setAttr("miterLimit",n)}setAttr(e,n){this._context[e]=n}arc(e,n,i,r,s,a){this._context.arc(e,n,i,r,s,a)}arcTo(e,n,i,r,s){this._context.arcTo(e,n,i,r,s)}beginPath(){this._context.beginPath()}bezierCurveTo(e,n,i,r,s,a){this._context.bezierCurveTo(e,n,i,r,s,a)}clearRect(e,n,i,r){this._context.clearRect(e,n,i,r)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,n){const i=arguments;if(i.length===2)return this._context.createImageData(e,n);if(i.length===1)return this._context.createImageData(e)}createLinearGradient(e,n,i,r){return this._context.createLinearGradient(e,n,i,r)}createPattern(e,n){return this._context.createPattern(e,n)}createRadialGradient(e,n,i,r,s,a){return this._context.createRadialGradient(e,n,i,r,s,a)}drawImage(e,n,i,r,s,a,o,l,u){const h=arguments,g=this._context;h.length===3?g.drawImage(e,n,i):h.length===5?g.drawImage(e,n,i,r,s):h.length===9&&g.drawImage(e,n,i,r,s,a,o,l,u)}ellipse(e,n,i,r,s,a,o,l){this._context.ellipse(e,n,i,r,s,a,o,l)}isPointInPath(e,n,i,r){return i?this._context.isPointInPath(i,e,n,r):this._context.isPointInPath(e,n,r)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,n,i,r){this._context.fillRect(e,n,i,r)}strokeRect(e,n,i,r){this._context.strokeRect(e,n,i,r)}fillText(e,n,i,r){r?this._context.fillText(e,n,i,r):this._context.fillText(e,n,i)}measureText(e){return this._context.measureText(e)}getImageData(e,n,i,r){return this._context.getImageData(e,n,i,r)}lineTo(e,n){this._context.lineTo(e,n)}moveTo(e,n){this._context.moveTo(e,n)}rect(e,n,i,r){this._context.rect(e,n,i,r)}roundRect(e,n,i,r,s){this._context.roundRect(e,n,i,r,s)}putImageData(e,n,i){this._context.putImageData(e,n,i)}quadraticCurveTo(e,n,i,r){this._context.quadraticCurveTo(e,n,i,r)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,n){this._context.scale(e,n)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,n,i,r,s,a){this._context.setTransform(e,n,i,r,s,a)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,n,i,r){this._context.strokeText(e,n,i,r)}transform(e,n,i,r,s,a){this._context.transform(e,n,i,r,s,a)}translate(e,n){this._context.translate(e,n)}_enableTrace(){let e=this,n=BL.length,i=this.setAttr,r,s;const a=function(o){let l=e[o],u;e[o]=function(){return s=Tfe(Array.prototype.slice.call(arguments,0)),u=l.apply(e,arguments),e._trace({method:o,args:s}),u}};for(r=0;r<n;r++)a(BL[r]);e.setAttr=function(){i.apply(e,arguments);const o=arguments[0];let l=arguments[1];(o==="shadowOffsetX"||o==="shadowOffsetY"||o==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),e._trace({property:o,val:l})}}_applyGlobalCompositeOperation(e){const n=e.attrs.globalCompositeOperation;!n||n==="source-over"||this.setAttr("globalCompositeOperation",n)}}Ffe.forEach(function(t){Object.defineProperty(V2.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})});class Nfe extends V2{constructor(e,{willReadFrequently:n=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:n})}_fillColor(e){const n=e.fill();this.setAttr("fillStyle",n),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){const n=e._getLinearGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fillRadialGradient(e){const n=e._getRadialGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fill(e){const n=e.fill(),i=e.getFillPriority();if(n&&i==="color"){this._fillColor(e);return}const r=e.getFillPatternImage();if(r&&i==="pattern"){this._fillPattern(e);return}const s=e.getFillLinearGradientColorStops();if(s&&i==="linear-gradient"){this._fillLinearGradient(e);return}const a=e.getFillRadialGradientColorStops();if(a&&i==="radial-gradient"){this._fillRadialGradient(e);return}n?this._fillColor(e):r?this._fillPattern(e):s?this._fillLinearGradient(e):a&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const n=e.getStrokeLinearGradientStartPoint(),i=e.getStrokeLinearGradientEndPoint(),r=e.getStrokeLinearGradientColorStops(),s=this.createLinearGradient(n.x,n.y,i.x,i.y);if(r){for(let a=0;a<r.length;a+=2)s.addColorStop(r[a],r[a+1]);this.setAttr("strokeStyle",s)}}_stroke(e){const n=e.dash(),i=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!i){this.save();const s=this.getCanvas().getPixelRatio();this.setTransform(s,0,0,s,0,0)}this._applyLineCap(e),n&&e.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),e.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),i||this.restore()}}_applyShadow(e){var n,i,r;const s=(n=e.getShadowRGBA())!==null&&n!==void 0?n:"black",a=(i=e.getShadowBlur())!==null&&i!==void 0?i:5,o=(r=e.getShadowOffset())!==null&&r!==void 0?r:{x:0,y:0},l=e.getAbsoluteScale(),u=this.canvas.getPixelRatio(),h=l.x*u,g=l.y*u;this.setAttr("shadowColor",s),this.setAttr("shadowBlur",a*Math.min(Math.abs(h),Math.abs(g))),this.setAttr("shadowOffsetX",o.x*h),this.setAttr("shadowOffsetY",o.y*g)}}class Bfe extends V2{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const n=e.getStrokeScaleEnabled();if(!n){this.save();const s=this.getCanvas().getPixelRatio();this.setTransform(s,0,0,s,0,0)}this._applyLineCap(e);const i=e.hitStrokeWidth(),r=i==="auto"?e.strokeWidth():i;this.setAttr("lineWidth",r),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),n||this.restore()}}}let P1;function Ife(){if(P1)return P1;const t=re.createCanvasElement(),e=t.getContext("2d");return P1=(function(){const n=Fe._global.devicePixelRatio||1,i=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return n/i})(),re.releaseCanvas(t),P1}class x3{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const i=(e||{}).pixelRatio||Fe.pixelRatio||Ife();this.pixelRatio=i,this._canvas=re.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){const n=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";const n=this.pixelRatio;this.getContext()._context.scale(n,n)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";const n=this.pixelRatio;this.getContext()._context.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,n){this.setWidth(e||0),this.setHeight(n||0)}toDataURL(e,n){try{return this._canvas.toDataURL(e,n)}catch{try{return this._canvas.toDataURL()}catch(r){return re.error("Unable to get data URL. "+r.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}class wh extends x3{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new Nfe(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}class A3 extends x3{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new Bfe(this),this.setSize(e.width,e.height)}}const sn={get isDragging(){let t=!1;return sn._dragElements.forEach(e=>{e.dragStatus==="dragging"&&(t=!0)}),t},justDragged:!1,get node(){let t;return sn._dragElements.forEach(e=>{t=e.node}),t},_dragElements:new Map,_drag(t){const e=[];sn._dragElements.forEach((n,i)=>{const{node:r}=n,s=r.getStage();s.setPointersPositions(t),n.pointerId===void 0&&(n.pointerId=re._getFirstPointerId(t));const a=s._changedPointerPositions.find(o=>o.id===n.pointerId);if(a){if(n.dragStatus!=="dragging"){const o=r.dragDistance();if(Math.max(Math.abs(a.x-n.startPointerPos.x),Math.abs(a.y-n.startPointerPos.y))<o||(r.startDrag({evt:t}),!r.isDragging()))return}r._setDragPosition(t,n),e.push(r)}}),e.forEach(n=>{n.fire("dragmove",{type:"dragmove",target:n,evt:t},!0)})},_endDragBefore(t){const e=[];sn._dragElements.forEach(n=>{const{node:i}=n,r=i.getStage();if(t&&r.setPointersPositions(t),!r._changedPointerPositions.find(o=>o.id===n.pointerId))return;(n.dragStatus==="dragging"||n.dragStatus==="stopped")&&(sn.justDragged=!0,Fe._mouseListenClick=!1,Fe._touchListenClick=!1,Fe._pointerListenClick=!1,n.dragStatus="stopped");const a=n.node.getLayer()||n.node instanceof Fe.Stage&&n.node;a&&e.indexOf(a)===-1&&e.push(a)}),e.forEach(n=>{n.draw()})},_endDragAfter(t){sn._dragElements.forEach((e,n)=>{e.dragStatus==="stopped"&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:t},!0),e.dragStatus!=="dragging"&&sn._dragElements.delete(n)})}};Fe.isBrowser&&(window.addEventListener("mouseup",sn._endDragBefore,!0),window.addEventListener("touchend",sn._endDragBefore,!0),window.addEventListener("touchcancel",sn._endDragBefore,!0),window.addEventListener("mousemove",sn._drag),window.addEventListener("touchmove",sn._drag),window.addEventListener("mouseup",sn._endDragAfter,!1),window.addEventListener("touchend",sn._endDragAfter,!1),window.addEventListener("touchcancel",sn._endDragAfter,!1));function zh(t){return re._isString(t)?'"'+t+'"':Object.prototype.toString.call(t)==="[object Number]"||re._isBoolean(t)?t:Object.prototype.toString.call(t)}function SG(t){return t>255?255:t<0?0:Math.round(t)}function Me(){if(Fe.isUnminified)return function(t,e){return re._isNumber(t)||re.warn(zh(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}function U2(t){if(Fe.isUnminified)return function(e,n){let i=re._isNumber(e),r=re._isArray(e)&&e.length==t;return!i&&!r&&re.warn(zh(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+t+")"),e}}function E3(){if(Fe.isUnminified)return function(t,e){return re._isNumber(t)||t==="auto"||re.warn(zh(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}function Ff(){if(Fe.isUnminified)return function(t,e){return re._isString(t)||re.warn(zh(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}function xG(){if(Fe.isUnminified)return function(t,e){const n=re._isString(t),i=Object.prototype.toString.call(t)==="[object CanvasGradient]"||t&&t.addColorStop;return n||i||re.warn(zh(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}function Hfe(){if(Fe.isUnminified)return function(t,e){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&t instanceof n||(re._isArray(t)?t.forEach(function(i){re._isNumber(i)||re.warn('"'+e+'" attribute has non numeric element '+i+". Make sure that all elements are numbers.")}):re.warn(zh(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),t}}function Yo(){if(Fe.isUnminified)return function(t,e){return t===!0||t===!1||re.warn(zh(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}function Gfe(t){if(Fe.isUnminified)return function(e,n){return e==null||re.isObject(e)||re.warn(zh(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+t),e}}const p0="get",m0="set",Y={addGetterSetter(t,e,n,i,r){Y.addGetter(t,e,n),Y.addSetter(t,e,i,r),Y.addOverloadedGetterSetter(t,e)},addGetter(t,e,n){const i=p0+re._capitalize(e);t.prototype[i]=t.prototype[i]||function(){const r=this.attrs[e];return r===void 0?n:r}},addSetter(t,e,n,i){const r=m0+re._capitalize(e);t.prototype[r]||Y.overWriteSetter(t,e,n,i)},overWriteSetter(t,e,n,i){const r=m0+re._capitalize(e);t.prototype[r]=function(s){return n&&s!==void 0&&s!==null&&(s=n.call(this,s,e)),this._setAttr(e,s),i&&i.call(this),this}},addComponentsGetterSetter(t,e,n,i,r){const s=n.length,a=re._capitalize,o=p0+a(e),l=m0+a(e);t.prototype[o]=function(){const h={};for(let g=0;g<s;g++){const v=n[g];h[v]=this.getAttr(e+a(v))}return h};const u=Gfe(n);t.prototype[l]=function(h){const g=this.attrs[e];i&&(h=i.call(this,h,e)),u&&u.call(this,h,e);for(const v in h)h.hasOwnProperty(v)&&this._setAttr(e+a(v),h[v]);return h||n.forEach(v=>{this._setAttr(e+a(v),void 0)}),this._fireChangeEvent(e,g,h),r&&r.call(this),this},Y.addOverloadedGetterSetter(t,e)},addOverloadedGetterSetter(t,e){const n=re._capitalize(e),i=m0+n,r=p0+n;t.prototype[e]=function(){return arguments.length?(this[i](arguments[0]),this):this[r]()}},addDeprecatedGetterSetter(t,e,n,i){re.error("Adding deprecated "+e);const r=p0+re._capitalize(e),s=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";t.prototype[r]=function(){re.error(s);const a=this.attrs[e];return a===void 0?n:a},Y.addSetter(t,e,i,function(){re.error(s)}),Y.addOverloadedGetterSetter(t,e)},backCompat(t,e){re.each(e,function(n,i){const r=t.prototype[i],s=p0+re._capitalize(n),a=m0+re._capitalize(n);function o(){r.apply(this,arguments),re.error('"'+n+'" method is deprecated and will be removed soon. Use ""'+i+'" instead.')}t.prototype[n]=o,t.prototype[s]=o,t.prototype[a]=o})},afterSetFilter(){this._filterUpToDate=!1}};function zfe(t){const e=/(\w+)\(([^)]+)\)/g;let n;for(;(n=e.exec(t))!==null;){const[,i,r]=n;switch(i){case"blur":{const s=parseFloat(r.replace("px",""));return function(a){this.blurRadius(s*.5);const o=Fe.Filters;o&&o.Blur&&o.Blur.call(this,a)}}case"brightness":{const s=r.includes("%")?parseFloat(r)/100:parseFloat(r);return function(a){this.brightness(s);const o=Fe.Filters;o&&o.Brightness&&o.Brightness.call(this,a)}}case"contrast":{const s=parseFloat(r);return function(a){const o=100*(Math.sqrt(s)-1);this.contrast(o);const l=Fe.Filters;l&&l.Contrast&&l.Contrast.call(this,a)}}case"grayscale":return function(s){const a=Fe.Filters;a&&a.Grayscale&&a.Grayscale.call(this,s)};case"sepia":return function(s){const a=Fe.Filters;a&&a.Sepia&&a.Sepia.call(this,s)};case"invert":return function(s){const a=Fe.Filters;a&&a.Invert&&a.Invert.call(this,s)};default:re.warn(`CSS filter "${i}" is not supported in fallback mode. Consider using function filters for better compatibility.`);break}}return()=>{}}const vw="absoluteOpacity",HL="allEventListeners",kc="absoluteTransform",GL="absoluteScale",Gd="canvas",Vfe="Change",Ufe="children",jfe="konva",lD="listening",Wfe="mouseenter",qfe="mouseleave",Kfe="pointerenter",Yfe="pointerleave",Xfe="touchenter",$fe="touchleave",zL="set",VL="Shape",yw=" ",UL="stage",mh="transform",Zfe="Stage",cD="visible",Qfe=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(yw);let Jfe=1,Oe=class M0{constructor(e){this._id=Jfe++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===mh||e===kc)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,n){let i=this._cache.get(e);return(i===void 0||(e===mh||e===kc)&&i.dirty===!0)&&(i=n.call(this),this._cache.set(e,i)),i}_calculate(e,n,i){if(!this._attachedDepsListeners.get(e)){const r=n.map(s=>s+"Change.konva").join(yw);this.on(r,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,i)}_getCanvasCache(){return this._cache.get(Gd)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===kc&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(Gd)){const{scene:e,filter:n,hit:i}=this._cache.get(Gd);re.releaseCanvas(e._canvas,n._canvas,i._canvas),this._cache.delete(Gd)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){const n=e||{};let i={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(i=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let r=Math.ceil(n.width||i.width),s=Math.ceil(n.height||i.height),a=n.pixelRatio,o=n.x===void 0?Math.floor(i.x):n.x,l=n.y===void 0?Math.floor(i.y):n.y,u=n.offset||0,h=n.drawBorder||!1,g=n.hitCanvasPixelRatio||1;if(!r||!s){re.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const v=Math.abs(Math.round(i.x)-o)>.5?1:0,y=Math.abs(Math.round(i.y)-l)>.5?1:0;r+=u*2+v,s+=u*2+y,o-=u,l-=u;const w=new wh({pixelRatio:a,width:r,height:s}),S=new wh({pixelRatio:a,width:0,height:0,willReadFrequently:!0}),x=new A3({pixelRatio:g,width:r,height:s}),T=w.getContext(),_=x.getContext(),M=new wh({width:w.width/w.pixelRatio+Math.abs(o),height:w.height/w.pixelRatio+Math.abs(l),pixelRatio:w.pixelRatio}),F=M.getContext();return x.isCache=!0,w.isCache=!0,this._cache.delete(Gd),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(w.getContext()._context.imageSmoothingEnabled=!1,S.getContext()._context.imageSmoothingEnabled=!1),T.save(),_.save(),F.save(),T.translate(-o,-l),_.translate(-o,-l),F.translate(-o,-l),M.x=o,M.y=l,this._isUnderCache=!0,this._clearSelfAndDescendantCache(vw),this._clearSelfAndDescendantCache(GL),this.drawScene(w,this,M),this.drawHit(x,this),this._isUnderCache=!1,T.restore(),_.restore(),h&&(T.save(),T.beginPath(),T.rect(0,0,r,s),T.closePath(),T.setAttr("strokeStyle","red"),T.setAttr("lineWidth",5),T.stroke(),T.restore()),re.releaseCanvas(M._canvas),this._cache.set(Gd,{scene:w,filter:S,hit:x,x:o,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(Gd)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,n){const i=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}];let r=1/0,s=1/0,a=-1/0,o=-1/0;const l=this.getAbsoluteTransform(n);return i.forEach(function(u){const h=l.point(u);r===void 0&&(r=a=h.x,s=o=h.y),r=Math.min(r,h.x),s=Math.min(s,h.y),a=Math.max(a,h.x),o=Math.max(o,h.y)}),{x:r,y:s,width:a-r,height:o-s}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();e.translate(n.x,n.y);const i=this._getCachedSceneCanvas(),r=i.pixelRatio;e.drawImage(i._canvas,0,0,i.width/r,i.height/r),e.restore()}_drawCachedHitCanvas(e){const n=this._getCanvasCache(),i=n.hit;e.save(),e.translate(n.x,n.y),e.drawImage(i._canvas,0,0,i.width/i.pixelRatio,i.height/i.pixelRatio),e.restore()}_getCachedSceneCanvas(){let e=this.filters(),n=this._getCanvasCache(),i=n.scene,r=n.filter,s=r.getContext(),a,o,l,u;if(!e||e.length===0)return i;if(this._filterUpToDate)return r;let h=!0;for(let v=0;v<e.length;v++)if(typeof e[v]=="string"&&IL(),typeof e[v]!="string"||!IL()){h=!1;break}const g=i.pixelRatio;if(r.setSize(i.width/i.pixelRatio,i.height/i.pixelRatio),h){const v=e.join(" ");return s.save(),s.setAttr("filter",v),s.drawImage(i._canvas,0,0,i.getWidth()/g,i.getHeight()/g),s.restore(),this._filterUpToDate=!0,r}try{for(a=e.length,s.clear(),s.drawImage(i._canvas,0,0,i.getWidth()/g,i.getHeight()/g),o=s.getImageData(0,0,r.getWidth(),r.getHeight()),l=0;l<a;l++)u=e[l],typeof u=="string"&&(u=zfe(u)),u.call(this,o),s.putImageData(o,0,0)}catch(v){re.error("Unable to apply filter. "+v.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,r}on(e,n){if(this._cache&&this._cache.delete(HL),arguments.length===3)return this._delegate.apply(this,arguments);const i=e.split(yw);for(let r=0;r<i.length;r++){const a=i[r].split("."),o=a[0],l=a[1]||"";this.eventListeners[o]||(this.eventListeners[o]=[]),this.eventListeners[o].push({name:l,handler:n})}return this}off(e,n){let i=(e||"").split(yw),r=i.length,s,a,o,l,u,h;if(this._cache&&this._cache.delete(HL),!e)for(a in this.eventListeners)this._off(a);for(s=0;s<r;s++)if(o=i[s],l=o.split("."),u=l[0],h=l[1],u)this.eventListeners[u]&&this._off(u,h,n);else for(a in this.eventListeners)this._off(a,h,n);return this}dispatchEvent(e){const n={target:this,type:e.type,evt:e};return this.fire(e.type,n),this}addEventListener(e,n){return this.on(e,function(i){n.call(this,i.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,n,i){const r=this;this.on(e,function(s){const a=s.target.findAncestors(n,!0,r);for(let o=0;o<a.length;o++)s=re.cloneObject(s),s.currentTarget=a[o],i.call(a[o],s)})}remove(){return this.isDragging()&&this.stopDrag(),sn._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(kc),this._clearSelfAndDescendantCache(vw),this._clearSelfAndDescendantCache(GL),this._clearSelfAndDescendantCache(UL),this._clearSelfAndDescendantCache(cD),this._clearSelfAndDescendantCache(lD)}_remove(){this._clearCaches();const e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){const n="get"+re._capitalize(e);return re._isFunction(this[n])?this[n]():this.attrs[e]}getAncestors(){let e=this.getParent(),n=[];for(;e;)n.push(e),e=e.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{let n,i;if(!e)return this;for(n in e)n!==Ufe&&(i=zL+re._capitalize(n),re._isFunction(this[i])?this[i](e[n]):this._setAttr(n,e[n]))}),this}isListening(){return this._getCache(lD,this._isListening)}_isListening(e){if(!this.listening())return!1;const i=this.getParent();return i&&i!==e&&this!==e?i._isListening(e):!0}isVisible(){return this._getCache(cD,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const i=this.getParent();return i&&i!==e&&this!==e?i._isVisible(e):!0}shouldDrawHit(e,n=!1){if(e)return this._isVisible(e)&&this._isListening(e);const i=this.getLayer();let r=!1;sn._dragElements.forEach(a=>{a.dragStatus==="dragging"&&(a.node.nodeType==="Stage"||a.node.getLayer()===i)&&(r=!0)});const s=!n&&!Fe.hitOnDragEnabled&&(r||Fe.isTransforming());return this.isListening()&&this.isVisible()&&!s}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let e=this.getDepth(),n=this,i=0,r,s,a,o;function l(h){for(r=[],s=h.length,a=0;a<s;a++)o=h[a],i++,o.nodeType!==VL&&(r=r.concat(o.getChildren().slice())),o._id===n._id&&(a=s);r.length>0&&r[0].getDepth()<=e&&l(r)}const u=this.getStage();return n.nodeType!==Zfe&&u&&l(u.getChildren()),i}getDepth(){let e=0,n=this.parent;for(;n;)e++,n=n.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(mh),this._clearSelfAndDescendantCache(kc)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;const n=e.getPointerPosition();if(!n)return null;const i=this.getAbsoluteTransform().copy();return i.invert(),i.point(n)}getAbsolutePosition(e){let n=!1,i=this.parent;for(;i;){if(i.isCached()){n=!0;break}i=i.parent}n&&!e&&(e=!0);const r=this.getAbsoluteTransform(e).getMatrix(),s=new ra,a=this.offset();return s.m=r.slice(),s.translate(a.x,a.y),s.getTranslation()}setAbsolutePosition(e){const{x:n,y:i,...r}=this._clearTransform();this.attrs.x=n,this.attrs.y=i,this._clearCache(mh);const s=this._getAbsoluteTransform().copy();return s.invert(),s.translate(e.x,e.y),e={x:this.attrs.x+s.getTranslation().x,y:this.attrs.y+s.getTranslation().y},this._setTransform(r),this.setPosition({x:e.x,y:e.y}),this._clearCache(mh),this._clearSelfAndDescendantCache(kc),this}_setTransform(e){let n;for(n in e)this.attrs[n]=e[n]}_clearTransform(){const e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){let n=e.x,i=e.y,r=this.x(),s=this.y();return n!==void 0&&(r+=n),i!==void 0&&(s+=i),this.setPosition({x:r,y:s}),this}_eachAncestorReverse(e,n){let i=[],r=this.getParent(),s,a;if(!(n&&n._id===this._id)){for(i.unshift(this);r&&(!n||r._id!==n._id);)i.unshift(r),r=r.parent;for(s=i.length,a=0;a<s;a++)e(i[a])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return re.warn("Node has no parent. moveToTop function is ignored."),!1;const e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return re.warn("Node has no parent. moveUp function is ignored."),!1;const e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return re.warn("Node has no parent. moveDown function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return re.warn("Node has no parent. moveToBottom function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return re.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&re.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(vw,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let e=this.opacity();const n=this.getParent();return n&&!n._isUnderCache&&(e*=n.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){let e=this.getAttrs(),n,i,r,s,a;const o={attrs:{},className:this.getClassName()};for(n in e)i=e[n],a=re.isObject(i)&&!re._isPlainObject(i)&&!re._isArray(i),!a&&(r=typeof this[n]=="function"&&this[n],delete e[n],s=r?r.call(this):null,e[n]=i,s!==i&&(o.attrs[n]=i));return re._prepareToStringify(o)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,n,i){const r=[];n&&this._isMatch(e)&&r.push(this);let s=this.parent;for(;s;){if(s===i)return r;s._isMatch(e)&&r.push(s),s=s.parent}return r}isAncestorOf(e){return!1}findAncestor(e,n,i){return this.findAncestors(e,n,i)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);let n=e.replace(/ /g,"").split(","),i=n.length,r,s;for(r=0;r<i;r++)if(s=n[r],re.isValidSelector(s)||(re.warn('Selector "'+s+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),re.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),re.warn("Konva is awesome, right?")),s.charAt(0)==="#"){if(this.id()===s.slice(1))return!0}else if(s.charAt(0)==="."){if(this.hasName(s.slice(1)))return!0}else if(this.className===s||this.nodeType===s)return!0;return!1}getLayer(){const e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(UL,this._getStage)}_getStage(){const e=this.getParent();return e?e.getStage():null}fire(e,n={},i){return n.target=n.target||this,i?this._fireAndBubble(e,n):this._fire(e,n),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(kc,this._getAbsoluteTransform)}_getAbsoluteTransform(e){let n;if(e)return n=new ra,this._eachAncestorReverse(function(i){const r=i.transformsEnabled();r==="all"?n.multiply(i.getTransform()):r==="position"&&n.translate(i.x()-i.offsetX(),i.y()-i.offsetY())},e),n;{n=this._cache.get(kc)||new ra,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();const i=this.transformsEnabled();if(i==="all")n.multiply(this.getTransform());else if(i==="position"){const r=this.attrs.x||0,s=this.attrs.y||0,a=this.attrs.offsetX||0,o=this.attrs.offsetY||0;n.translate(r-a,s-o)}return n.dirty=!1,n}}getAbsoluteScale(e){let n=this;for(;n;)n._isUnderCache&&(e=n),n=n.getParent();const r=this.getAbsoluteTransform(e).decompose();return{x:r.scaleX,y:r.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(mh,this._getTransform)}_getTransform(){var e,n;const i=this._cache.get(mh)||new ra;i.reset();const r=this.x(),s=this.y(),a=Fe.getAngle(this.rotation()),o=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,l=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,u=this.attrs.skewX||0,h=this.attrs.skewY||0,g=this.attrs.offsetX||0,v=this.attrs.offsetY||0;return(r!==0||s!==0)&&i.translate(r,s),a!==0&&i.rotate(a),(u!==0||h!==0)&&i.skew(u,h),(o!==1||l!==1)&&i.scale(o,l),(g!==0||v!==0)&&i.translate(-1*g,-1*v),i.dirty=!1,i}clone(e){let n=re.cloneObject(this.attrs),i,r,s,a,o;for(i in e)n[i]=e[i];const l=new this.constructor(n);for(i in this.eventListeners)for(r=this.eventListeners[i],s=r.length,a=0;a<s;a++)o=r[a],o.name.indexOf(jfe)<0&&(l.eventListeners[i]||(l.eventListeners[i]=[]),l.eventListeners[i].push(o));return l}_toKonvaCanvas(e){e=e||{};const n=this.getClientRect(),i=this.getStage(),r=e.x!==void 0?e.x:Math.floor(n.x),s=e.y!==void 0?e.y:Math.floor(n.y),a=e.pixelRatio||1,o=new wh({width:e.width||Math.ceil(n.width)||(i?i.width():0),height:e.height||Math.ceil(n.height)||(i?i.height():0),pixelRatio:a}),l=o.getContext(),u=new wh({width:o.width/o.pixelRatio+Math.abs(r),height:o.height/o.pixelRatio+Math.abs(s),pixelRatio:o.pixelRatio});return e.imageSmoothingEnabled===!1&&(l._context.imageSmoothingEnabled=!1),l.save(),(r||s)&&l.translate(-1*r,-1*s),this.drawScene(o,void 0,u),l.restore(),o}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};const n=e.mimeType||null,i=e.quality||null,r=this._toKonvaCanvas(e).toDataURL(n,i);return e.callback&&e.callback(r),r}toImage(e){return new Promise((n,i)=>{try{const r=e?.callback;r&&delete e.callback,re._urlToImage(this.toDataURL(e),function(s){n(s),r?.(s)})}catch(r){i(r)}})}toBlob(e){return new Promise((n,i)=>{try{const r=e?.callback;r&&delete e.callback,this.toCanvas(e).toBlob(s=>{n(s),r?.(s)},e?.mimeType,e?.quality)}catch(r){i(r)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Fe.dragDistance}_off(e,n,i){let r=this.eventListeners[e],s,a,o;for(s=0;s<r.length;s++)if(a=r[s].name,o=r[s].handler,(a!=="konva"||n==="konva")&&(!n||a===n)&&(!i||i===o)){if(r.splice(s,1),r.length===0){delete this.eventListeners[e];break}s--}}_fireChangeEvent(e,n,i){this._fire(e+Vfe,{oldVal:n,newVal:i})}addName(e){if(!this.hasName(e)){const n=this.name(),i=n?n+" "+e:e;this.name(i)}return this}hasName(e){if(!e)return!1;const n=this.name();return n?(n||"").split(/\s/g).indexOf(e)!==-1:!1}removeName(e){const n=(this.name()||"").split(/\s/g),i=n.indexOf(e);return i!==-1&&(n.splice(i,1),this.name(n.join(" "))),this}setAttr(e,n){const i=this[zL+re._capitalize(e)];return re._isFunction(i)?i.call(this,n):this._setAttr(e,n),this}_requestDraw(){if(Fe.autoDrawEnabled){const e=this.getLayer()||this.getStage();e?.batchDraw()}}_setAttr(e,n){const i=this.attrs[e];i===n&&!re.isObject(n)||(n==null?delete this.attrs[e]:this.attrs[e]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(e,i,n),this._requestDraw())}_setComponentAttr(e,n,i){let r;i!==void 0&&(r=this.attrs[e],r||(this.attrs[e]=this.getAttr(e)),this.attrs[e][n]=i,this._fireChangeEvent(e,r,i))}_fireAndBubble(e,n,i){n&&this.nodeType===VL&&(n.target=this);const r=[Wfe,qfe,Kfe,Yfe,Xfe,$fe];if(!(r.indexOf(e)!==-1&&(i&&(this===i||this.isAncestorOf&&this.isAncestorOf(i))||this.nodeType==="Stage"&&!i))){this._fire(e,n);const a=r.indexOf(e)!==-1&&i&&i.isAncestorOf&&i.isAncestorOf(this)&&!i.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!a&&(i&&i.parent?this._fireAndBubble.call(this.parent,e,n,i):this._fireAndBubble.call(this.parent,e,n))}}_getProtoListeners(e){var n,i;const{nodeType:r}=this,s=M0.protoListenerMap.get(r)||{};let a=s?.[e];if(a===void 0){a=[];let o=Object.getPrototypeOf(this);for(;o;){const l=(i=(n=o.eventListeners)===null||n===void 0?void 0:n[e])!==null&&i!==void 0?i:[];a.push(...l),o=Object.getPrototypeOf(o)}s[e]=a,M0.protoListenerMap.set(r,s)}return a}_fire(e,n){n=n||{},n.currentTarget=this,n.type=e;const i=this._getProtoListeners(e);if(i)for(let s=0;s<i.length;s++)i[s].handler.call(this,n);const r=this.eventListeners[e];if(r)for(let s=0;s<r.length;s++)r[s].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){const n=e?e.pointerId:void 0,i=this.getStage(),r=this.getAbsolutePosition();if(!i)return;const s=i._getPointerById(n)||i._changedPointerPositions[0]||r;sn._dragElements.set(this._id,{node:this,startPointerPos:s,offset:{x:s.x-r.x,y:s.y-r.y},dragStatus:"ready",pointerId:n})}startDrag(e,n=!0){sn._dragElements.has(this._id)||this._createDragElement(e);const i=sn._dragElements.get(this._id);i.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},n)}_setDragPosition(e,n){const i=this.getStage()._getPointerById(n.pointerId);if(!i)return;let r={x:i.x-n.offset.x,y:i.y-n.offset.y};const s=this.dragBoundFunc();if(s!==void 0){const a=s.call(this,r,e);a?r=a:re.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==r.x||this._lastPos.y!==r.y)&&(this.setAbsolutePosition(r),this._requestDraw()),this._lastPos=r}stopDrag(e){const n=sn._dragElements.get(this._id);n&&(n.dragStatus="stopped"),sn._endDragBefore(e),sn._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=sn._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){if(!(!(e.evt.button!==void 0)||Fe.dragButtons.indexOf(e.evt.button)>=0)||this.isDragging())return;let r=!1;sn._dragElements.forEach(s=>{this.isAncestorOf(s.node)&&(r=!0)}),r||this._createDragElement(e)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const n=sn._dragElements.get(this._id),i=n&&n.dragStatus==="dragging",r=n&&n.dragStatus==="ready";i?this.stopDrag():r&&sn._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const n=this.getStage();if(!n)return!1;const i={x:-e.x,y:-e.y,width:n.width()+2*e.x,height:n.height()+2*e.y};return re.haveIntersection(i,this.getClientRect())}static create(e,n){return re._isString(e)&&(e=JSON.parse(e)),this._createNode(e,n)}static _createNode(e,n){let i=M0.prototype.getClassName.call(e),r=e.children,s,a,o;n&&(e.attrs.container=n),Fe[i]||(re.warn('Can not find a node with class name "'+i+'". Fallback to "Shape".'),i="Shape");const l=Fe[i];if(s=new l(e.attrs),r)for(a=r.length,o=0;o<a;o++)s.add(M0._createNode(r[o]));return s}};Oe.protoListenerMap=new Map;Oe.prototype.nodeType="Node";Oe.prototype._attrsAffectingSize=[];Oe.prototype.eventListeners={};Oe.prototype.on.call(Oe.prototype,Qfe,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(mh),this._clearSelfAndDescendantCache(kc)});Oe.prototype.on.call(Oe.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(cD)});Oe.prototype.on.call(Oe.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(lD)});Oe.prototype.on.call(Oe.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(vw)});const wn=Y.addGetterSetter;wn(Oe,"zIndex");wn(Oe,"absolutePosition");wn(Oe,"position");wn(Oe,"x",0,Me());wn(Oe,"y",0,Me());wn(Oe,"globalCompositeOperation","source-over",Ff());wn(Oe,"opacity",1,Me());wn(Oe,"name","",Ff());wn(Oe,"id","",Ff());wn(Oe,"rotation",0,Me());Y.addComponentsGetterSetter(Oe,"scale",["x","y"]);wn(Oe,"scaleX",1,Me());wn(Oe,"scaleY",1,Me());Y.addComponentsGetterSetter(Oe,"skew",["x","y"]);wn(Oe,"skewX",0,Me());wn(Oe,"skewY",0,Me());Y.addComponentsGetterSetter(Oe,"offset",["x","y"]);wn(Oe,"offsetX",0,Me());wn(Oe,"offsetY",0,Me());wn(Oe,"dragDistance",void 0,Me());wn(Oe,"width",0,Me());wn(Oe,"height",0,Me());wn(Oe,"listening",!0,Yo());wn(Oe,"preventDefault",!0,Yo());wn(Oe,"filters",void 0,function(t){return this._filterUpToDate=!1,t});wn(Oe,"visible",!0,Yo());wn(Oe,"transformsEnabled","all",Ff());wn(Oe,"size");wn(Oe,"dragBoundFunc");wn(Oe,"draggable",!1,Yo());Y.backCompat(Oe,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class la extends Oe{constructor(){super(...arguments),this.children=[]}getChildren(e){const n=this.children||[];return e?n.filter(e):n}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(let i=0;i<e.length;i++)this.add(e[i]);return this}const n=e[0];return n.getParent()?(n.moveTo(this),this):(this._validateAdd(n),n.index=this.getChildren().length,n.parent=this,n._clearCaches(),this.getChildren().push(n),this._fire("add",{child:n}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){const n=this._generalFind(e,!0);return n.length>0?n[0]:void 0}_generalFind(e,n){const i=[];return this._descendants(r=>{const s=r._isMatch(e);return s&&i.push(r),!!(s&&n)}),i}_descendants(e){let n=!1;const i=this.getChildren();for(const r of i){if(n=e(r),n)return!0;if(r.hasChildren()&&(n=r._descendants(e),n))return!0}return!1}toObject(){const e=Oe.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(n=>{e.children.push(n.toObject())}),e}isAncestorOf(e){let n=e.getParent();for(;n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(e){const n=Oe.prototype.clone.call(this,e);return this.getChildren().forEach(function(i){n.add(i.clone())}),n}getAllIntersections(e){const n=[];return this.find("Shape").forEach(i=>{i.isVisible()&&i.intersects(e)&&n.push(i)}),n}_clearSelfAndDescendantCache(e){var n;super._clearSelfAndDescendantCache(e),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(i){i._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(n,i){n.index=i}),this._requestDraw()}drawScene(e,n,i){const r=this.getLayer(),s=e||r&&r.getCanvas(),a=s&&s.getContext(),o=this._getCanvasCache(),l=o&&o.scene,u=s&&s.isCache;if(!this.isVisible()&&!u)return this;if(l){a.save();const h=this.getAbsoluteTransform(n).getMatrix();a.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedSceneCanvas(a),a.restore()}else this._drawChildren("drawScene",s,n,i);return this}drawHit(e,n){if(!this.shouldDrawHit(n))return this;const i=this.getLayer(),r=e||i&&i.hitCanvas,s=r&&r.getContext(),a=this._getCanvasCache();if(a&&a.hit){s.save();const l=this.getAbsoluteTransform(n).getMatrix();s.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(s),s.restore()}else this._drawChildren("drawHit",r,n);return this}_drawChildren(e,n,i,r){var s;const a=n&&n.getContext(),o=this.clipWidth(),l=this.clipHeight(),u=this.clipFunc(),h=typeof o=="number"&&typeof l=="number"||u,g=i===this;if(h){a.save();const y=this.getAbsoluteTransform(i);let w=y.getMatrix();a.transform(w[0],w[1],w[2],w[3],w[4],w[5]),a.beginPath();let S;if(u)S=u.call(this,a,this);else{const x=this.clipX(),T=this.clipY();a.rect(x||0,T||0,o,l)}a.clip.apply(a,S),w=y.copy().invert().getMatrix(),a.transform(w[0],w[1],w[2],w[3],w[4],w[5])}const v=!g&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";v&&(a.save(),a._applyGlobalCompositeOperation(this)),(s=this.children)===null||s===void 0||s.forEach(function(y){y[e](n,i,r)}),v&&a.restore(),h&&a.restore()}getClientRect(e={}){var n;const i=e.skipTransform,r=e.relativeTo;let s,a,o,l,u={x:1/0,y:1/0,width:0,height:0};const h=this;(n=this.children)===null||n===void 0||n.forEach(function(y){if(!y.visible())return;const w=y.getClientRect({relativeTo:h,skipShadow:e.skipShadow,skipStroke:e.skipStroke});w.width===0&&w.height===0||(s===void 0?(s=w.x,a=w.y,o=w.x+w.width,l=w.y+w.height):(s=Math.min(s,w.x),a=Math.min(a,w.y),o=Math.max(o,w.x+w.width),l=Math.max(l,w.y+w.height)))});const g=this.find("Shape");let v=!1;for(let y=0;y<g.length;y++)if(g[y]._isVisible(this)){v=!0;break}return v&&s!==void 0?u={x:s,y:a,width:o-s,height:l-a}:u={x:0,y:0,width:0,height:0},i?u:this._transformedRect(u,r)}}Y.addComponentsGetterSetter(la,"clip",["x","y","width","height"]);Y.addGetterSetter(la,"clipX",void 0,Me());Y.addGetterSetter(la,"clipY",void 0,Me());Y.addGetterSetter(la,"clipWidth",void 0,Me());Y.addGetterSetter(la,"clipHeight",void 0,Me());Y.addGetterSetter(la,"clipFunc");const wy=new Map,AG=Fe._global.PointerEvent!==void 0;function nT(t){return wy.get(t)}function T3(t){return{evt:t,pointerId:t.pointerId}}function EG(t,e){return wy.get(t)===e}function TG(t,e){q0(t),e.getStage()&&(wy.set(t,e),AG&&e._fire("gotpointercapture",T3(new PointerEvent("gotpointercapture"))))}function q0(t,e){const n=wy.get(t);if(!n)return;const i=n.getStage();i&&i.content,wy.delete(t),AG&&n._fire("lostpointercapture",T3(new PointerEvent("lostpointercapture")))}const ege="Stage",tge="string",jL="px",nge="mouseout",RG="mouseleave",DG="mouseover",MG="mouseenter",_G="mousemove",PG="mousedown",OG="mouseup",_0="pointermove",P0="pointerdown",Ap="pointerup",O0="pointercancel",ige="lostpointercapture",O1="pointerout",L0="pointerleave",L1="pointerover",F1="pointerenter",uD="contextmenu",LG="touchstart",FG="touchend",kG="touchmove",NG="touchcancel",hD="wheel",rge=5,sge=[[MG,"_pointerenter"],[PG,"_pointerdown"],[_G,"_pointermove"],[OG,"_pointerup"],[RG,"_pointerleave"],[LG,"_pointerdown"],[kG,"_pointermove"],[FG,"_pointerup"],[NG,"_pointercancel"],[DG,"_pointerover"],[hD,"_wheel"],[uD,"_contextmenu"],[P0,"_pointerdown"],[_0,"_pointermove"],[Ap,"_pointerup"],[O0,"_pointercancel"],[L0,"_pointerleave"],[ige,"_lostpointercapture"]],iT={mouse:{[O1]:nge,[L0]:RG,[L1]:DG,[F1]:MG,[_0]:_G,[P0]:PG,[Ap]:OG,[O0]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[O1]:"touchout",[L0]:"touchleave",[L1]:"touchover",[F1]:"touchenter",[_0]:kG,[P0]:LG,[Ap]:FG,[O0]:NG,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[O1]:O1,[L0]:L0,[L1]:L1,[F1]:F1,[_0]:_0,[P0]:P0,[Ap]:Ap,[O0]:O0,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},F0=t=>t.indexOf("pointer")>=0?"pointer":t.indexOf("touch")>=0?"touch":"mouse",cp=t=>{const e=F0(t);if(e==="pointer")return Fe.pointerEventsEnabled&&iT.pointer;if(e==="touch")return iT.touch;if(e==="mouse")return iT.mouse};function WL(t={}){return(t.clipFunc||t.clipWidth||t.clipHeight)&&re.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}const age="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",K0=[];let j2=class extends la{constructor(e){super(WL(e)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),K0.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{WL(this.attrs)}),this._checkVisibility()}_validateAdd(e){const n=e.getType()==="Layer",i=e.getType()==="FastLayer";n||i||re.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if(typeof e===tge){let n;if(e.charAt(0)==="."){const i=e.slice(1);e=document.getElementsByClassName(i)[0]}else e.charAt(0)!=="#"?n=e:n=e.slice(1),e=document.getElementById(n);if(!e)throw"Can not find container in document with id "+n}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const e=this.children,n=e.length;for(let i=0;i<n;i++)e[i].clear();return this}clone(e){return e||(e={}),e.container=typeof document<"u"&&document.createElement("div"),la.prototype.clone.call(this,e)}destroy(){super.destroy();const e=this.content;e&&re._isInDocument(e)&&this.container().removeChild(e);const n=K0.indexOf(this);return n>-1&&K0.splice(n,1),re.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(re.warn(age),null)}_getPointerById(e){return this._pointerPositions.find(n=>n.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){e={...e},e.x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();const n=new wh({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),i=n.getContext()._context,r=this.children;return(e.x||e.y)&&i.translate(-1*e.x,-1*e.y),r.forEach(function(s){if(!s.isVisible())return;const a=s._toKonvaCanvas(e);i.drawImage(a._canvas,e.x,e.y,a.getWidth()/a.getPixelRatio(),a.getHeight()/a.getPixelRatio())}),n}getIntersection(e){if(!e)return null;const n=this.children,i=n.length,r=i-1;for(let s=r;s>=0;s--){const a=n[s].getIntersection(e);if(a)return a}return null}_resizeDOM(){const e=this.width(),n=this.height();this.content&&(this.content.style.width=e+jL,this.content.style.height=n+jL),this.bufferCanvas.setSize(e,n),this.bufferHitCanvas.setSize(e,n),this.children.forEach(i=>{i.setSize({width:e,height:n}),i.draw()})}add(e,...n){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.add(arguments[r]);return this}super.add(e);const i=this.children.length;return i>rge&&re.warn("The stage has "+i+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),Fe.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return EG(e,this)}setPointerCapture(e){TG(e,this)}releaseCapture(e){q0(e)}getLayers(){return this.children}_bindContentEvents(){Fe.isBrowser&&sge.forEach(([e,n])=>{this.content.addEventListener(e,i=>{this[n](i)},{passive:!1})})}_pointerenter(e){this.setPointersPositions(e);const n=cp(e.type);n&&this._fire(n.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);const n=cp(e.type);n&&this._fire(n.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let n=this[e+"targetShape"];return n&&!n.getStage()&&(n=null),n}_pointerleave(e){const n=cp(e.type),i=F0(e.type);if(!n)return;this.setPointersPositions(e);const r=this._getTargetShape(i),s=!(Fe.isDragging()||Fe.isTransforming())||Fe.hitOnDragEnabled;r&&s?(r._fireAndBubble(n.pointerout,{evt:e}),r._fireAndBubble(n.pointerleave,{evt:e}),this._fire(n.pointerleave,{evt:e,target:this,currentTarget:this}),this[i+"targetShape"]=null):s&&(this._fire(n.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(n.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(e){const n=cp(e.type),i=F0(e.type);if(!n)return;this.setPointersPositions(e);let r=!1;this._changedPointerPositions.forEach(s=>{const a=this.getIntersection(s);if(sn.justDragged=!1,Fe["_"+i+"ListenClick"]=!0,!a||!a.isListening()){this[i+"ClickStartShape"]=void 0;return}Fe.capturePointerEventsEnabled&&a.setPointerCapture(s.id),this[i+"ClickStartShape"]=a,a._fireAndBubble(n.pointerdown,{evt:e,pointerId:s.id}),r=!0;const o=e.type.indexOf("touch")>=0;a.preventDefault()&&e.cancelable&&o&&e.preventDefault()}),r||this._fire(n.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(e){const n=cp(e.type),i=F0(e.type);if(!n)return;const r=e.type.indexOf("touch")>=0||e.pointerType==="touch";if(Fe.isDragging()&&sn.node.preventDefault()&&e.cancelable&&r&&e.preventDefault(),this.setPointersPositions(e),!(!(Fe.isDragging()||Fe.isTransforming())||Fe.hitOnDragEnabled))return;const a={};let o=!1;const l=this._getTargetShape(i);this._changedPointerPositions.forEach(u=>{const h=nT(u.id)||this.getIntersection(u),g=u.id,v={evt:e,pointerId:g},y=l!==h;if(y&&l&&(l._fireAndBubble(n.pointerout,{...v},h),l._fireAndBubble(n.pointerleave,{...v},h)),h){if(a[h._id])return;a[h._id]=!0}h&&h.isListening()?(o=!0,y&&(h._fireAndBubble(n.pointerover,{...v},l),h._fireAndBubble(n.pointerenter,{...v},l),this[i+"targetShape"]=h),h._fireAndBubble(n.pointermove,{...v})):l&&(this._fire(n.pointerover,{evt:e,target:this,currentTarget:this,pointerId:g}),this[i+"targetShape"]=null)}),o||this._fire(n.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){const n=cp(e.type),i=F0(e.type);if(!n)return;this.setPointersPositions(e);const r=this[i+"ClickStartShape"],s=this[i+"ClickEndShape"],a={};let o=!1;this._changedPointerPositions.forEach(l=>{const u=nT(l.id)||this.getIntersection(l);if(u){if(u.releaseCapture(l.id),a[u._id])return;a[u._id]=!0}const h=l.id,g={evt:e,pointerId:h};let v=!1;Fe["_"+i+"InDblClickWindow"]?(v=!0,clearTimeout(this[i+"DblTimeout"])):sn.justDragged||(Fe["_"+i+"InDblClickWindow"]=!0,clearTimeout(this[i+"DblTimeout"])),this[i+"DblTimeout"]=setTimeout(function(){Fe["_"+i+"InDblClickWindow"]=!1},Fe.dblClickWindow),u&&u.isListening()?(o=!0,this[i+"ClickEndShape"]=u,u._fireAndBubble(n.pointerup,{...g}),Fe["_"+i+"ListenClick"]&&r&&r===u&&(u._fireAndBubble(n.pointerclick,{...g}),v&&s&&s===u&&u._fireAndBubble(n.pointerdblclick,{...g}))):(this[i+"ClickEndShape"]=null,o||(this._fire(n.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),o=!0),Fe["_"+i+"ListenClick"]&&this._fire(n.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:h}),v&&this._fire(n.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:h}))}),o||this._fire(n.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),Fe["_"+i+"ListenClick"]=!1,e.cancelable&&i!=="touch"&&i!=="pointer"&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);const n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(uD,{evt:e}):this._fire(uD,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);const n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(hD,{evt:e}):this._fire(hD,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);const n=nT(e.pointerId)||this.getIntersection(this.getPointerPosition());n&&n._fireAndBubble(Ap,T3(e)),q0(e.pointerId)}_lostpointercapture(e){q0(e.pointerId)}setPointersPositions(e){const n=this._getContentPosition();let i=null,r=null;e=e||window.event,e.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,s=>{this._pointerPositions.push({id:s.identifier,x:(s.clientX-n.left)/n.scaleX,y:(s.clientY-n.top)/n.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,s=>{this._changedPointerPositions.push({id:s.identifier,x:(s.clientX-n.left)/n.scaleX,y:(s.clientY-n.top)/n.scaleY})})):(i=(e.clientX-n.left)/n.scaleX,r=(e.clientY-n.top)/n.scaleY,this.pointerPos={x:i,y:r},this._pointerPositions=[{x:i,y:r,id:re._getFirstPointerId(e)}],this._changedPointerPositions=[{x:i,y:r,id:re._getFirstPointerId(e)}])}_setPointerPosition(e){re.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new wh({width:this.width(),height:this.height()}),this.bufferHitCanvas=new A3({pixelRatio:1,width:this.width(),height:this.height()}),!Fe.isBrowser)return;const e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}cache(){return re.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}};j2.prototype.nodeType=ege;fi(j2);Y.addGetterSetter(j2,"container");Fe.isBrowser&&document.addEventListener("visibilitychange",()=>{K0.forEach(t=>{t.batchDraw()})});const BG="hasShadow",IG="shadowRGBA",HG="patternImage",GG="linearGradient",zG="radialGradient";let k1;function rT(){return k1||(k1=re.createCanvasElement().getContext("2d"),k1)}const Y0={};function oge(t){const e=this.attrs.fillRule;e?t.fill(e):t.fill()}function lge(t){t.stroke()}function cge(t){const e=this.attrs.fillRule;e?t.fill(e):t.fill()}function uge(t){t.stroke()}function hge(){this._clearCache(BG)}function dge(){this._clearCache(IG)}function fge(){this._clearCache(HG)}function gge(){this._clearCache(GG)}function pge(){this._clearCache(zG)}class Re extends Oe{constructor(e){super(e);let n,i=0;for(;n=re.getHitColor(),!(n&&!(n in Y0));)if(i++,i>=1e4){re.warn("Failed to find a unique color key for a shape. Konva may work incorrectly. Most likely your browser is using canvas farbling. Consider disabling it."),n=re.getRandomColor();break}this.colorKey=n,Y0[n]=this}getContext(){return re.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return re.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(BG,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(HG,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const n=rT().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(n&&n.setTransform){const i=new ra;i.translate(this.fillPatternX(),this.fillPatternY()),i.rotate(Fe.getAngle(this.fillPatternRotation())),i.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),i.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const r=i.getMatrix(),s=typeof DOMMatrix>"u"?{a:r[0],b:r[1],c:r[2],d:r[3],e:r[4],f:r[5]}:new DOMMatrix(r);n.setTransform(s)}return n}}_getLinearGradient(){return this._getCache(GG,this.__getLinearGradient)}__getLinearGradient(){const e=this.fillLinearGradientColorStops();if(e){const n=rT(),i=this.fillLinearGradientStartPoint(),r=this.fillLinearGradientEndPoint(),s=n.createLinearGradient(i.x,i.y,r.x,r.y);for(let a=0;a<e.length;a+=2)s.addColorStop(e[a],e[a+1]);return s}}_getRadialGradient(){return this._getCache(zG,this.__getRadialGradient)}__getRadialGradient(){const e=this.fillRadialGradientColorStops();if(e){const n=rT(),i=this.fillRadialGradientStartPoint(),r=this.fillRadialGradientEndPoint(),s=n.createRadialGradient(i.x,i.y,this.fillRadialGradientStartRadius(),r.x,r.y,this.fillRadialGradientEndRadius());for(let a=0;a<e.length;a+=2)s.addColorStop(e[a],e[a+1]);return s}}getShadowRGBA(){return this._getCache(IG,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const e=re.colorToRGBA(this.shadowColor());if(e)return"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const e=this.hitStrokeWidth();return e==="auto"?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){const n=this.getStage();if(!n)return!1;const i=n.bufferHitCanvas;return i.getContext().clear(),this.drawHit(i,void 0,!0),i.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data[3]>0}destroy(){return Oe.prototype.destroy.call(this),delete Y0[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var n;if(!((n=this.attrs.perfectDrawEnabled)!==null&&n!==void 0?n:!0))return!1;const r=e||this.hasFill(),s=this.hasStroke(),a=this.getAbsoluteOpacity()!==1;if(r&&s&&a)return!0;const o=this.hasShadow(),l=this.shadowForStrokeEnabled();return!!(r&&s&&o&&l)}setStrokeHitEnabled(e){re.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){let n=!1,i=this.getParent();for(;i;){if(i.isCached()){n=!0;break}i=i.getParent()}const r=e.skipTransform,s=e.relativeTo||n&&this.getStage()||void 0,a=this.getSelfRect(),l=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,u=a.width+l,h=a.height+l,g=!e.skipShadow&&this.hasShadow(),v=g?this.shadowOffsetX():0,y=g?this.shadowOffsetY():0,w=u+Math.abs(v),S=h+Math.abs(y),x=g&&this.shadowBlur()||0,T=w+x*2,_=S+x*2,M={width:T,height:_,x:-(l/2+x)+Math.min(v,0)+a.x,y:-(l/2+x)+Math.min(y,0)+a.y};return r?M:this._transformedRect(M,s)}drawScene(e,n,i){const r=this.getLayer(),s=e||r.getCanvas(),a=s.getContext(),o=this._getCanvasCache(),l=this.getSceneFunc(),u=this.hasShadow();let h;const g=n===this;if(!this.isVisible()&&!g)return this;if(o){a.save();const v=this.getAbsoluteTransform(n).getMatrix();return a.transform(v[0],v[1],v[2],v[3],v[4],v[5]),this._drawCachedSceneCanvas(a),a.restore(),this}if(!l)return this;if(a.save(),this._useBufferCanvas()){h=this.getStage();const v=i||h.bufferCanvas,y=v.getContext();i?(y.save(),y.setTransform(1,0,0,1,0,0),y.clearRect(0,0,v.width,v.height),y.restore()):y.clear(),y.save(),y._applyLineJoin(this),y._applyMiterLimit(this);const w=this.getAbsoluteTransform(n).getMatrix();y.transform(w[0],w[1],w[2],w[3],w[4],w[5]),l.call(this,y,this),y.restore();const S=v.pixelRatio;u&&a._applyShadow(this),g||(a._applyOpacity(this),a._applyGlobalCompositeOperation(this)),a.drawImage(v._canvas,v.x||0,v.y||0,v.width/S,v.height/S)}else{if(a._applyLineJoin(this),a._applyMiterLimit(this),!g){const v=this.getAbsoluteTransform(n).getMatrix();a.transform(v[0],v[1],v[2],v[3],v[4],v[5]),a._applyOpacity(this),a._applyGlobalCompositeOperation(this)}u&&a._applyShadow(this),l.call(this,a,this)}return a.restore(),this}drawHit(e,n,i=!1){if(!this.shouldDrawHit(n,i))return this;const r=this.getLayer(),s=e||r.hitCanvas,a=s&&s.getContext(),o=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),u=l&&l.hit;if(this.colorKey||re.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),u){a.save();const g=this.getAbsoluteTransform(n).getMatrix();return a.transform(g[0],g[1],g[2],g[3],g[4],g[5]),this._drawCachedHitCanvas(a),a.restore(),this}if(!o)return this;if(a.save(),a._applyLineJoin(this),a._applyMiterLimit(this),!(this===n)){const g=this.getAbsoluteTransform(n).getMatrix();a.transform(g[0],g[1],g[2],g[3],g[4],g[5])}return o.call(this,a,this),a.restore(),this}drawHitFromCache(e=0){const n=this._getCanvasCache(),i=this._getCachedSceneCanvas(),r=n.hit,s=r.getContext(),a=r.getWidth(),o=r.getHeight();s.clear(),s.drawImage(i._canvas,0,0,a,o);try{const l=s.getImageData(0,0,a,o),u=l.data,h=u.length,g=re._hexToRgb(this.colorKey);for(let v=0;v<h;v+=4)u[v+3]>e?(u[v]=g.r,u[v+1]=g.g,u[v+2]=g.b,u[v+3]=255):u[v+3]=0;s.putImageData(l,0,0)}catch(l){re.error("Unable to draw hit graph from cached scene canvas. "+l.message)}return this}hasPointerCapture(e){return EG(e,this)}setPointerCapture(e){TG(e,this)}releaseCapture(e){q0(e)}}Re.prototype._fillFunc=oge;Re.prototype._strokeFunc=lge;Re.prototype._fillFuncHit=cge;Re.prototype._strokeFuncHit=uge;Re.prototype._centroid=!1;Re.prototype.nodeType="Shape";fi(Re);Re.prototype.eventListeners={};Re.prototype.on.call(Re.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",hge);Re.prototype.on.call(Re.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",dge);Re.prototype.on.call(Re.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",fge);Re.prototype.on.call(Re.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",gge);Re.prototype.on.call(Re.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",pge);Y.addGetterSetter(Re,"stroke",void 0,xG());Y.addGetterSetter(Re,"strokeWidth",2,Me());Y.addGetterSetter(Re,"fillAfterStrokeEnabled",!1);Y.addGetterSetter(Re,"hitStrokeWidth","auto",E3());Y.addGetterSetter(Re,"strokeHitEnabled",!0,Yo());Y.addGetterSetter(Re,"perfectDrawEnabled",!0,Yo());Y.addGetterSetter(Re,"shadowForStrokeEnabled",!0,Yo());Y.addGetterSetter(Re,"lineJoin");Y.addGetterSetter(Re,"lineCap");Y.addGetterSetter(Re,"miterLimit");Y.addGetterSetter(Re,"sceneFunc");Y.addGetterSetter(Re,"hitFunc");Y.addGetterSetter(Re,"dash");Y.addGetterSetter(Re,"dashOffset",0,Me());Y.addGetterSetter(Re,"shadowColor",void 0,Ff());Y.addGetterSetter(Re,"shadowBlur",0,Me());Y.addGetterSetter(Re,"shadowOpacity",1,Me());Y.addComponentsGetterSetter(Re,"shadowOffset",["x","y"]);Y.addGetterSetter(Re,"shadowOffsetX",0,Me());Y.addGetterSetter(Re,"shadowOffsetY",0,Me());Y.addGetterSetter(Re,"fillPatternImage");Y.addGetterSetter(Re,"fill",void 0,xG());Y.addGetterSetter(Re,"fillPatternX",0,Me());Y.addGetterSetter(Re,"fillPatternY",0,Me());Y.addGetterSetter(Re,"fillLinearGradientColorStops");Y.addGetterSetter(Re,"strokeLinearGradientColorStops");Y.addGetterSetter(Re,"fillRadialGradientStartRadius",0);Y.addGetterSetter(Re,"fillRadialGradientEndRadius",0);Y.addGetterSetter(Re,"fillRadialGradientColorStops");Y.addGetterSetter(Re,"fillPatternRepeat","repeat");Y.addGetterSetter(Re,"fillEnabled",!0);Y.addGetterSetter(Re,"strokeEnabled",!0);Y.addGetterSetter(Re,"shadowEnabled",!0);Y.addGetterSetter(Re,"dashEnabled",!0);Y.addGetterSetter(Re,"strokeScaleEnabled",!0);Y.addGetterSetter(Re,"fillPriority","color");Y.addComponentsGetterSetter(Re,"fillPatternOffset",["x","y"]);Y.addGetterSetter(Re,"fillPatternOffsetX",0,Me());Y.addGetterSetter(Re,"fillPatternOffsetY",0,Me());Y.addComponentsGetterSetter(Re,"fillPatternScale",["x","y"]);Y.addGetterSetter(Re,"fillPatternScaleX",1,Me());Y.addGetterSetter(Re,"fillPatternScaleY",1,Me());Y.addComponentsGetterSetter(Re,"fillLinearGradientStartPoint",["x","y"]);Y.addComponentsGetterSetter(Re,"strokeLinearGradientStartPoint",["x","y"]);Y.addGetterSetter(Re,"fillLinearGradientStartPointX",0);Y.addGetterSetter(Re,"strokeLinearGradientStartPointX",0);Y.addGetterSetter(Re,"fillLinearGradientStartPointY",0);Y.addGetterSetter(Re,"strokeLinearGradientStartPointY",0);Y.addComponentsGetterSetter(Re,"fillLinearGradientEndPoint",["x","y"]);Y.addComponentsGetterSetter(Re,"strokeLinearGradientEndPoint",["x","y"]);Y.addGetterSetter(Re,"fillLinearGradientEndPointX",0);Y.addGetterSetter(Re,"strokeLinearGradientEndPointX",0);Y.addGetterSetter(Re,"fillLinearGradientEndPointY",0);Y.addGetterSetter(Re,"strokeLinearGradientEndPointY",0);Y.addComponentsGetterSetter(Re,"fillRadialGradientStartPoint",["x","y"]);Y.addGetterSetter(Re,"fillRadialGradientStartPointX",0);Y.addGetterSetter(Re,"fillRadialGradientStartPointY",0);Y.addComponentsGetterSetter(Re,"fillRadialGradientEndPoint",["x","y"]);Y.addGetterSetter(Re,"fillRadialGradientEndPointX",0);Y.addGetterSetter(Re,"fillRadialGradientEndPointY",0);Y.addGetterSetter(Re,"fillPatternRotation",0);Y.addGetterSetter(Re,"fillRule",void 0,Ff());Y.backCompat(Re,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const mge="beforeDraw",vge="draw",VG=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],yge=VG.length;let kf=class extends la{constructor(e){super(e),this.canvas=new wh,this.hitCanvas=new A3({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);const n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),e<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[e+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Oe.prototype.moveToTop.call(this);const e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!Oe.prototype.moveUp.call(this))return!1;const n=this.getStage();return!n||!n.content?!1:(n.content.removeChild(this.getNativeCanvasElement()),this.index<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Oe.prototype.moveDown.call(this)){const e=this.getStage();if(e){const n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Oe.prototype.moveToBottom.call(this)){const e=this.getStage();if(e){const n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const e=this.getNativeCanvasElement();return Oe.prototype.remove.call(this),e&&e.parentNode&&re._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:n}){return this.canvas.setSize(e,n),this.hitCanvas.setSize(e,n),this._setSmoothEnabled(),this}_validateAdd(e){const n=e.getType();n!=="Group"&&n!=="Shape"&&re.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e={...e},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),Oe.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){re.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){re.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,re.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;let n=1,i=!1;for(;;){for(let r=0;r<yge;r++){const s=VG[r],a=this._getIntersection({x:e.x+s.x*n,y:e.y+s.y*n}),o=a.shape;if(o)return o;if(i=!!a.antialiased,!a.antialiased)break}if(i)n+=1;else return null}}_getIntersection(e){const n=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(e.x*n),Math.round(e.y*n),1,1).data,r=i[3];if(r===255){const s=re.getHitColorKey(i[0],i[1],i[2]),a=Y0[s];return a?{shape:a}:{antialiased:!0}}else if(r>0)return{antialiased:!0};return{}}drawScene(e,n,i){const r=this.getLayer(),s=e||r&&r.getCanvas();return this._fire(mge,{node:this}),this.clearBeforeDraw()&&s.getContext().clear(),la.prototype.drawScene.call(this,s,n,i),this._fire(vge,{node:this}),this}drawHit(e,n){const i=this.getLayer(),r=e||i&&i.hitCanvas;return i&&i.clearBeforeDraw()&&i.getHitCanvas().getContext().clear(),la.prototype.drawHit.call(this,r,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){re.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return re.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const e=this.parent;!!this.hitCanvas._canvas.parentNode?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}destroy(){return re.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};kf.prototype.nodeType="Layer";fi(kf);Y.addGetterSetter(kf,"imageSmoothingEnabled",!0);Y.addGetterSetter(kf,"clearBeforeDraw",!0);Y.addGetterSetter(kf,"hitGraphEnabled",!0,Yo());class R3 extends kf{constructor(e){super(e),this.listening(!1),re.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}R3.prototype.nodeType="FastLayer";fi(R3);class tm extends la{_validateAdd(e){const n=e.getType();n!=="Group"&&n!=="Shape"&&re.throw("You may only add groups and shapes to groups.")}}tm.prototype.nodeType="Group";fi(tm);const sT=(function(){return Jd.performance&&Jd.performance.now?function(){return Jd.performance.now()}:function(){return new Date().getTime()}})();class Qa{constructor(e,n){this.id=Qa.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:sT(),frameRate:0},this.func=e,this.setLayers(n)}setLayers(e){let n=[];return e&&(n=Array.isArray(e)?e:[e]),this.layers=n,this}getLayers(){return this.layers}addLayer(e){const n=this.layers,i=n.length;for(let r=0;r<i;r++)if(n[r]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const n=Qa.animations,i=n.length;for(let r=0;r<i;r++)if(n[r].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=sT(),Qa._addAnimation(this),this}stop(){return Qa._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const n=e.id,i=this.animations,r=i.length;for(let s=0;s<r;s++)if(i[s].id===n){this.animations.splice(s,1);break}}static _runFrames(){const e={},n=this.animations;for(let i=0;i<n.length;i++){const r=n[i],s=r.layers,a=r.func;r._updateFrameObject(sT());const o=s.length;let l;if(a?l=a.call(r,r.frame)!==!1:l=!0,!!l)for(let u=0;u<o;u++){const h=s[u];h._id!==void 0&&(e[h._id]=h)}}for(const i in e)e.hasOwnProperty(i)&&e[i].batchDraw()}static _animationLoop(){const e=Qa;e.animations.length?(e._runFrames(),re.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,re.requestAnimFrame(this._animationLoop))}}Qa.animations=[];Qa.animIdCounter=0;Qa.animRunning=!1;const Cge={node:1,duration:1,easing:1,onFinish:1,yoyo:1},bge=1,qL=2,KL=3,YL=["fill","stroke","shadowColor"];let wge=0;class Sge{constructor(e,n,i,r,s,a,o){this.prop=e,this.propFunc=n,this.begin=r,this._pos=r,this.duration=a,this._change=0,this.prevPos=0,this.yoyo=o,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=i,this._change=s-this.begin,this.pause()}fire(e){const n=this[e];n&&n()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return e===void 0&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=qL,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=KL,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const e=this.getTimer()-this._startTime;this.state===qL?this.setTime(e):this.state===KL&&this.setTime(this.duration-e)}pause(){this.state=bge,this.fire("onPause")}getTimer(){return new Date().getTime()}}class Dn{constructor(e){const n=this,i=e.node,r=i._id,s=e.easing||X0.Linear,a=!!e.yoyo;let o,l;typeof e.duration>"u"?o=.3:e.duration===0?o=.001:o=e.duration,this.node=i,this._id=wge++;const u=i.getLayer()||(i instanceof Fe.Stage?i.getLayers():null);u||re.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new Qa(function(){n.tween.onEnterFrame()},u),this.tween=new Sge(l,function(h){n._tweenFunc(h)},s,0,1,o*1e3,a),this._addListeners(),Dn.attrs[r]||(Dn.attrs[r]={}),Dn.attrs[r][this._id]||(Dn.attrs[r][this._id]={}),Dn.tweens[r]||(Dn.tweens[r]={});for(l in e)Cge[l]===void 0&&this._addAttr(l,e[l]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}_addAttr(e,n){const i=this.node,r=i._id;let s,a,o,l,u;const h=Dn.tweens[r][e];h&&delete Dn.attrs[r][h][e];let g=i.getAttr(e);if(re._isArray(n))if(s=[],a=Math.max(n.length,g.length),e==="points"&&n.length!==g.length&&(n.length>g.length?(l=g,g=re._prepareArrayForTween(g,n,i.closed())):(o=n,n=re._prepareArrayForTween(n,g,i.closed()))),e.indexOf("fill")===0)for(let v=0;v<a;v++)if(v%2===0)s.push(n[v]-g[v]);else{const y=re.colorToRGBA(g[v]);u=re.colorToRGBA(n[v]),g[v]=y,s.push({r:u.r-y.r,g:u.g-y.g,b:u.b-y.b,a:u.a-y.a})}else for(let v=0;v<a;v++)s.push(n[v]-g[v]);else YL.indexOf(e)!==-1?(g=re.colorToRGBA(g),u=re.colorToRGBA(n),s={r:u.r-g.r,g:u.g-g.g,b:u.b-g.b,a:u.a-g.a}):s=n-g;Dn.attrs[r][this._id][e]={start:g,diff:s,end:n,trueEnd:o,trueStart:l},Dn.tweens[r][e]=this._id}_tweenFunc(e){const n=this.node,i=Dn.attrs[n._id][this._id];let r,s,a,o,l,u,h,g;for(r in i){if(s=i[r],a=s.start,o=s.diff,g=s.end,re._isArray(a))if(l=[],h=Math.max(a.length,g.length),r.indexOf("fill")===0)for(u=0;u<h;u++)u%2===0?l.push((a[u]||0)+o[u]*e):l.push("rgba("+Math.round(a[u].r+o[u].r*e)+","+Math.round(a[u].g+o[u].g*e)+","+Math.round(a[u].b+o[u].b*e)+","+(a[u].a+o[u].a*e)+")");else for(u=0;u<h;u++)l.push((a[u]||0)+o[u]*e);else YL.indexOf(r)!==-1?l="rgba("+Math.round(a.r+o.r*e)+","+Math.round(a.g+o.g*e)+","+Math.round(a.b+o.b*e)+","+(a.a+o.a*e)+")":l=a+o*e;n.setAttr(r,l)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const e=this.node,n=Dn.attrs[e._id][this._id];n.points&&n.points.trueEnd&&e.setAttr("points",n.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const e=this.node,n=Dn.attrs[e._id][this._id];n.points&&n.points.trueStart&&e.points(n.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(e*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const e=this.node._id,n=this._id,i=Dn.tweens[e];this.pause(),this.anim&&this.anim.stop();for(const r in i)delete Dn.tweens[e][r];delete Dn.attrs[e][n],Dn.tweens[e]&&(Object.keys(Dn.tweens[e]).length===0&&delete Dn.tweens[e],Object.keys(Dn.attrs[e]).length===0&&delete Dn.attrs[e])}}Dn.attrs={};Dn.tweens={};Oe.prototype.to=function(t){const e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()},new Dn(t).play()};const X0={BackEaseIn(t,e,n,i){return n*(t/=i)*t*((1.70158+1)*t-1.70158)+e},BackEaseOut(t,e,n,i){return n*((t=t/i-1)*t*((1.70158+1)*t+1.70158)+1)+e},BackEaseInOut(t,e,n,i){let r=1.70158;return(t/=i/2)<1?n/2*(t*t*(((r*=1.525)+1)*t-r))+e:n/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+e},ElasticEaseIn(t,e,n,i,r,s){let a=0;return t===0?e:(t/=i)===1?e+n:(s||(s=i*.3),!r||r<Math.abs(n)?(r=n,a=s/4):a=s/(2*Math.PI)*Math.asin(n/r),-(r*Math.pow(2,10*(t-=1))*Math.sin((t*i-a)*(2*Math.PI)/s))+e)},ElasticEaseOut(t,e,n,i,r,s){let a=0;return t===0?e:(t/=i)===1?e+n:(s||(s=i*.3),!r||r<Math.abs(n)?(r=n,a=s/4):a=s/(2*Math.PI)*Math.asin(n/r),r*Math.pow(2,-10*t)*Math.sin((t*i-a)*(2*Math.PI)/s)+n+e)},ElasticEaseInOut(t,e,n,i,r,s){let a=0;return t===0?e:(t/=i/2)===2?e+n:(s||(s=i*(.3*1.5)),!r||r<Math.abs(n)?(r=n,a=s/4):a=s/(2*Math.PI)*Math.asin(n/r),t<1?-.5*(r*Math.pow(2,10*(t-=1))*Math.sin((t*i-a)*(2*Math.PI)/s))+e:r*Math.pow(2,-10*(t-=1))*Math.sin((t*i-a)*(2*Math.PI)/s)*.5+n+e)},BounceEaseOut(t,e,n,i){return(t/=i)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn(t,e,n,i){return n-X0.BounceEaseOut(i-t,0,n,i)+e},BounceEaseInOut(t,e,n,i){return t<i/2?X0.BounceEaseIn(t*2,0,n,i)*.5+e:X0.BounceEaseOut(t*2-i,0,n,i)*.5+n*.5+e},EaseIn(t,e,n,i){return n*(t/=i)*t+e},EaseOut(t,e,n,i){return-n*(t/=i)*(t-2)+e},EaseInOut(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},StrongEaseIn(t,e,n,i){return n*(t/=i)*t*t*t*t+e},StrongEaseOut(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e},StrongEaseInOut(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},Linear(t,e,n,i){return n*t/i+e}},nm=re._assign(Fe,{Util:re,Transform:ra,Node:Oe,Container:la,Stage:j2,stages:K0,Layer:kf,FastLayer:R3,Group:tm,DD:sn,Shape:Re,shapes:Y0,Animation:Qa,Tween:Dn,Easings:X0,Context:V2,Canvas:x3});class uu extends Re{_sceneFunc(e){const n=Fe.getAngle(this.angle()),i=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,n,i),e.arc(0,0,this.innerRadius(),n,0,!i),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),n=this.outerRadius(),i=this.clockwise(),r=Fe.getAngle(i?360-this.angle():this.angle()),s=Math.cos(Math.min(r,Math.PI)),a=1,o=Math.sin(Math.min(Math.max(Math.PI,r),3*Math.PI/2)),l=Math.sin(Math.min(r,Math.PI/2)),u=s*(s>0?e:n),h=a*n,g=o*(o>0?e:n),v=l*(l>0?n:e);return{x:u,y:i?-1*v:g,width:h-u,height:v-g}}}uu.prototype._centroid=!0;uu.prototype.className="Arc";uu.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];fi(uu);Y.addGetterSetter(uu,"innerRadius",0,Me());Y.addGetterSetter(uu,"outerRadius",0,Me());Y.addGetterSetter(uu,"angle",0,Me());Y.addGetterSetter(uu,"clockwise",!1,Yo());function dD(t,e,n,i,r,s,a){const o=Math.sqrt(Math.pow(n-t,2)+Math.pow(i-e,2)),l=Math.sqrt(Math.pow(r-n,2)+Math.pow(s-i,2)),u=a*o/(o+l),h=a*l/(o+l),g=n-u*(r-t),v=i-u*(s-e),y=n+h*(r-t),w=i+h*(s-e);return[g,v,y,w]}function XL(t,e){const n=t.length,i=[];for(let r=2;r<n-2;r+=2){const s=dD(t[r-2],t[r-1],t[r],t[r+1],t[r+2],t[r+3],e);isNaN(s[0])||(i.push(s[0]),i.push(s[1]),i.push(t[r]),i.push(t[r+1]),i.push(s[2]),i.push(s[3]))}return i}function xge(t){const e=[[t[0],t[2],t[4],t[6]],[t[1],t[3],t[5],t[7]]],n=[];for(const i of e){const r=-3*i[0]+9*i[1]-9*i[2]+3*i[3];if(r!==0){const s=6*i[0]-12*i[1]+6*i[2],a=-3*i[0]+3*i[1],o=s*s-4*r*a;if(o>=0){const l=Math.sqrt(o);n.push((-s+l)/(2*r)),n.push((-s-l)/(2*r))}}}return n.filter(i=>i>0&&i<1).flatMap(i=>e.map(r=>{const s=1-i;return s*s*s*r[0]+3*s*s*i*r[1]+3*s*i*i*r[2]+i*i*i*r[3]}))}let hu=class extends Re{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){const n=this.points(),i=n.length,r=this.tension(),s=this.closed(),a=this.bezier();if(!i)return;let o=0;if(e.beginPath(),e.moveTo(n[0],n[1]),r!==0&&i>4){const l=this.getTensionPoints(),u=l.length;for(o=s?0:4,s||e.quadraticCurveTo(l[0],l[1],l[2],l[3]);o<u-2;)e.bezierCurveTo(l[o++],l[o++],l[o++],l[o++],l[o++],l[o++]);s||e.quadraticCurveTo(l[u-2],l[u-1],n[i-2],n[i-1])}else if(a)for(o=2;o<i;)e.bezierCurveTo(n[o++],n[o++],n[o++],n[o++],n[o++],n[o++]);else for(o=2;o<i;o+=2)e.lineTo(n[o],n[o+1]);s?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():XL(this.points(),this.tension())}_getTensionPointsClosed(){const e=this.points(),n=e.length,i=this.tension(),r=dD(e[n-2],e[n-1],e[0],e[1],e[2],e[3],i),s=dD(e[n-4],e[n-3],e[n-2],e[n-1],e[0],e[1],i),a=XL(e,i);return[r[2],r[3]].concat(a).concat([s[0],s[1],e[n-2],e[n-1],s[2],s[3],r[0],r[1],e[0],e[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:this.bezier()?e=[e[0],e[1],...xge(this.points()),e[e.length-2],e[e.length-1]]:e=this.points();let n=e[0],i=e[0],r=e[1],s=e[1],a,o;for(let l=0;l<e.length/2;l++)a=e[l*2],o=e[l*2+1],n=Math.min(n,a),i=Math.max(i,a),r=Math.min(r,o),s=Math.max(s,o);return{x:n,y:r,width:i-n,height:s-r}}};hu.prototype.className="Line";hu.prototype._attrsAffectingSize=["points","bezier","tension"];fi(hu);Y.addGetterSetter(hu,"closed",!1);Y.addGetterSetter(hu,"bezier",!1);Y.addGetterSetter(hu,"tension",0,Me());Y.addGetterSetter(hu,"points",[],Hfe());const Age=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],Ege=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],Tge=[[1],[1,1],[1,2,1],[1,3,3,1]],$L=(t,e,n)=>{let i,r;const a=n/2;i=0;for(let o=0;o<20;o++)r=a*Age[20][o]+a,i+=Ege[20][o]*Rge(t,e,r);return a*i},ZL=(t,e,n)=>{n===void 0&&(n=1);const i=t[0]-2*t[1]+t[2],r=e[0]-2*e[1]+e[2],s=2*t[1]-2*t[0],a=2*e[1]-2*e[0],o=4*(i*i+r*r),l=4*(i*s+r*a),u=s*s+a*a;if(o===0)return n*Math.sqrt(Math.pow(t[2]-t[0],2)+Math.pow(e[2]-e[0],2));const h=l/(2*o),g=u/o,v=n+h,y=g-h*h,w=v*v+y>0?Math.sqrt(v*v+y):0,S=h*h+y>0?Math.sqrt(h*h+y):0,x=h+Math.sqrt(h*h+y)!==0?y*Math.log(Math.abs((v+w)/(h+S))):0;return Math.sqrt(o)/2*(v*w-h*S+x)};function Rge(t,e,n){const i=fD(1,n,t),r=fD(1,n,e),s=i*i+r*r;return Math.sqrt(s)}const fD=(t,e,n)=>{const i=n.length-1;let r,s;if(i===0)return 0;if(t===0){s=0;for(let a=0;a<=i;a++)s+=Tge[i][a]*Math.pow(1-e,i-a)*Math.pow(e,a)*n[a];return s}else{r=new Array(i);for(let a=0;a<i;a++)r[a]=i*(n[a+1]-n[a]);return fD(t-1,e,r)}},QL=(t,e,n)=>{let i=1,r=t/e,s=(t-n(r))/e,a=0;for(;i>.001;){const o=n(r+s),l=Math.abs(t-o)/e;if(l<i)i=l,r+=s;else{const u=n(r-s),h=Math.abs(t-u)/e;h<i?(i=h,r-=s):s/=2}if(a++,a>500)break}return r};class Mn extends Re{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Mn.parsePathData(this.data()),this.pathLength=Mn.getPathLength(this.dataArray)}_sceneFunc(e){const n=this.dataArray;e.beginPath();let i=!1;for(let r=0;r<n.length;r++){const s=n[r].command,a=n[r].points;switch(s){case"L":e.lineTo(a[0],a[1]);break;case"M":e.moveTo(a[0],a[1]);break;case"C":e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5]);break;case"Q":e.quadraticCurveTo(a[0],a[1],a[2],a[3]);break;case"A":const o=a[0],l=a[1],u=a[2],h=a[3],g=a[4],v=a[5],y=a[6],w=a[7],S=u>h?u:h,x=u>h?1:u/h,T=u>h?h/u:1;e.translate(o,l),e.rotate(y),e.scale(x,T),e.arc(0,0,S,g,g+v,1-w),e.scale(1/x,1/T),e.rotate(-y),e.translate(-o,-l);break;case"z":i=!0,e.closePath();break}}!i&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){let e=[];this.dataArray.forEach(function(l){if(l.command==="A"){const u=l.points[4],h=l.points[5],g=l.points[4]+h;let v=Math.PI/180;if(Math.abs(u-g)<v&&(v=Math.abs(u-g)),h<0)for(let y=u-v;y>g;y-=v){const w=Mn.getPointOnEllipticalArc(l.points[0],l.points[1],l.points[2],l.points[3],y,0);e.push(w.x,w.y)}else for(let y=u+v;y<g;y+=v){const w=Mn.getPointOnEllipticalArc(l.points[0],l.points[1],l.points[2],l.points[3],y,0);e.push(w.x,w.y)}}else if(l.command==="C")for(let u=0;u<=1;u+=.01){const h=Mn.getPointOnCubicBezier(u,l.start.x,l.start.y,l.points[0],l.points[1],l.points[2],l.points[3],l.points[4],l.points[5]);e.push(h.x,h.y)}else e=e.concat(l.points)});let n=e[0],i=e[0],r=e[1],s=e[1],a,o;for(let l=0;l<e.length/2;l++)a=e[l*2],o=e[l*2+1],isNaN(a)||(n=Math.min(n,a),i=Math.max(i,a)),isNaN(o)||(r=Math.min(r,o),s=Math.max(s,o));return{x:n,y:r,width:i-n,height:s-r}}getLength(){return this.pathLength}getPointAtLength(e){return Mn.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,n,i,r){return Math.sqrt((i-e)*(i-e)+(r-n)*(r-n))}static getPathLength(e){let n=0;for(let i=0;i<e.length;++i)n+=e[i].pathLength;return n}static getPointAtLengthOfDataArray(e,n){let i,r=0,s=n.length;if(!s)return null;for(;r<s&&e>n[r].pathLength;)e-=n[r].pathLength,++r;if(r===s)return i=n[r-1].points.slice(-2),{x:i[0],y:i[1]};if(e<.01)return n[r].command==="M"?(i=n[r].points.slice(0,2),{x:i[0],y:i[1]}):{x:n[r].start.x,y:n[r].start.y};const a=n[r],o=a.points;switch(a.command){case"L":return Mn.getPointOnLine(e,a.start.x,a.start.y,o[0],o[1]);case"C":return Mn.getPointOnCubicBezier(QL(e,Mn.getPathLength(n),S=>$L([a.start.x,o[0],o[2],o[4]],[a.start.y,o[1],o[3],o[5]],S)),a.start.x,a.start.y,o[0],o[1],o[2],o[3],o[4],o[5]);case"Q":return Mn.getPointOnQuadraticBezier(QL(e,Mn.getPathLength(n),S=>ZL([a.start.x,o[0],o[2]],[a.start.y,o[1],o[3]],S)),a.start.x,a.start.y,o[0],o[1],o[2],o[3]);case"A":const l=o[0],u=o[1],h=o[2],g=o[3],v=o[5],y=o[6];let w=o[4];return w+=v*e/a.pathLength,Mn.getPointOnEllipticalArc(l,u,h,g,w,y)}return null}static getPointOnLine(e,n,i,r,s,a,o){a=a??n,o=o??i;const l=this.getLineLength(n,i,r,s);if(l<1e-10)return{x:n,y:i};if(r===n)return{x:a,y:o+(s>i?e:-e)};const u=(s-i)/(r-n),h=Math.sqrt(e*e/(1+u*u))*(r<n?-1:1),g=u*h;if(Math.abs(o-i-u*(a-n))<1e-10)return{x:a+h,y:o+g};const v=((a-n)*(r-n)+(o-i)*(s-i))/(l*l),y=n+v*(r-n),w=i+v*(s-i),S=this.getLineLength(a,o,y,w),x=Math.sqrt(e*e-S*S),T=Math.sqrt(x*x/(1+u*u))*(r<n?-1:1),_=u*T;return{x:y+T,y:w+_}}static getPointOnCubicBezier(e,n,i,r,s,a,o,l,u){function h(x){return x*x*x}function g(x){return 3*x*x*(1-x)}function v(x){return 3*x*(1-x)*(1-x)}function y(x){return(1-x)*(1-x)*(1-x)}const w=l*h(e)+a*g(e)+r*v(e)+n*y(e),S=u*h(e)+o*g(e)+s*v(e)+i*y(e);return{x:w,y:S}}static getPointOnQuadraticBezier(e,n,i,r,s,a,o){function l(y){return y*y}function u(y){return 2*y*(1-y)}function h(y){return(1-y)*(1-y)}const g=a*l(e)+r*u(e)+n*h(e),v=o*l(e)+s*u(e)+i*h(e);return{x:g,y:v}}static getPointOnEllipticalArc(e,n,i,r,s,a){const o=Math.cos(a),l=Math.sin(a),u={x:i*Math.cos(s),y:r*Math.sin(s)};return{x:e+(u.x*o-u.y*l),y:n+(u.x*l+u.y*o)}}static parsePathData(e){if(!e)return[];let n=e;const i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(let g=0;g<i.length;g++)n=n.replace(new RegExp(i[g],"g"),"|"+i[g]);const r=n.split("|"),s=[],a=[];let o=0,l=0;const u=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let h;for(let g=1;g<r.length;g++){let v=r[g],y=v.charAt(0);for(v=v.slice(1),a.length=0;h=u.exec(v);)a.push(h[0]);let w=[],S=y==="A"||y==="a"?0:-1;for(let x=0,T=a.length;x<T;x++){const _=a[x];if(_==="00"){w.push(0,0),S>=0&&(S+=2,S>=7&&(S-=7));continue}if(S>=0){if(S===3){if(/^[01]{2}\d+(?:\.\d+)?$/.test(_)){w.push(parseInt(_[0],10)),w.push(parseInt(_[1],10)),w.push(parseFloat(_.slice(2))),S+=3,S>=7&&(S-=7);continue}if(_==="11"||_==="10"||_==="01"){w.push(parseInt(_[0],10)),w.push(parseInt(_[1],10)),S+=2,S>=7&&(S-=7);continue}if(_==="0"||_==="1"){w.push(parseInt(_,10)),S+=1,S>=7&&(S-=7);continue}}else if(S===4){if(/^[01]\d+(?:\.\d+)?$/.test(_)){w.push(parseInt(_[0],10)),w.push(parseFloat(_.slice(1))),S+=2,S>=7&&(S-=7);continue}if(_==="0"||_==="1"){w.push(parseInt(_,10)),S+=1,S>=7&&(S-=7);continue}}const M=parseFloat(_);isNaN(M)?w.push(0):w.push(M),S+=1,S>=7&&(S-=7)}else{const M=parseFloat(_);isNaN(M)?w.push(0):w.push(M)}}for(;w.length>0&&!isNaN(w[0]);){let x="",T=[];const _=o,M=l;let F,L,k,B,H,U,W,j,X,ne;switch(y){case"l":o+=w.shift(),l+=w.shift(),x="L",T.push(o,l);break;case"L":o=w.shift(),l=w.shift(),T.push(o,l);break;case"m":const $=w.shift(),q=w.shift();if(o+=$,l+=q,x="M",s.length>2&&s[s.length-1].command==="z"){for(let z=s.length-2;z>=0;z--)if(s[z].command==="M"){o=s[z].points[0]+$,l=s[z].points[1]+q;break}}T.push(o,l),y="l";break;case"M":o=w.shift(),l=w.shift(),x="M",T.push(o,l),y="L";break;case"h":o+=w.shift(),x="L",T.push(o,l);break;case"H":o=w.shift(),x="L",T.push(o,l);break;case"v":l+=w.shift(),x="L",T.push(o,l);break;case"V":l=w.shift(),x="L",T.push(o,l);break;case"C":T.push(w.shift(),w.shift(),w.shift(),w.shift()),o=w.shift(),l=w.shift(),T.push(o,l);break;case"c":T.push(o+w.shift(),l+w.shift(),o+w.shift(),l+w.shift()),o+=w.shift(),l+=w.shift(),x="C",T.push(o,l);break;case"S":L=o,k=l,F=s[s.length-1],F.command==="C"&&(L=o+(o-F.points[2]),k=l+(l-F.points[3])),T.push(L,k,w.shift(),w.shift()),o=w.shift(),l=w.shift(),x="C",T.push(o,l);break;case"s":L=o,k=l,F=s[s.length-1],F.command==="C"&&(L=o+(o-F.points[2]),k=l+(l-F.points[3])),T.push(L,k,o+w.shift(),l+w.shift()),o+=w.shift(),l+=w.shift(),x="C",T.push(o,l);break;case"Q":T.push(w.shift(),w.shift()),o=w.shift(),l=w.shift(),T.push(o,l);break;case"q":T.push(o+w.shift(),l+w.shift()),o+=w.shift(),l+=w.shift(),x="Q",T.push(o,l);break;case"T":L=o,k=l,F=s[s.length-1],F.command==="Q"&&(L=o+(o-F.points[0]),k=l+(l-F.points[1])),o=w.shift(),l=w.shift(),x="Q",T.push(L,k,o,l);break;case"t":L=o,k=l,F=s[s.length-1],F.command==="Q"&&(L=o+(o-F.points[0]),k=l+(l-F.points[1])),o+=w.shift(),l+=w.shift(),x="Q",T.push(L,k,o,l);break;case"A":B=w.shift(),H=w.shift(),U=w.shift(),W=w.shift(),j=w.shift(),X=o,ne=l,o=w.shift(),l=w.shift(),x="A",T=this.convertEndpointToCenterParameterization(X,ne,o,l,W,j,B,H,U);break;case"a":B=w.shift(),H=w.shift(),U=w.shift(),W=w.shift(),j=w.shift(),X=o,ne=l,o+=w.shift(),l+=w.shift(),x="A",T=this.convertEndpointToCenterParameterization(X,ne,o,l,W,j,B,H,U);break}s.push({command:x||y,points:T,start:{x:_,y:M},pathLength:this.calcLength(_,M,x||y,T)})}(y==="z"||y==="Z")&&s.push({command:"z",points:[],start:void 0,pathLength:0})}return s}static calcLength(e,n,i,r){let s,a,o,l;const u=Mn;switch(i){case"L":return u.getLineLength(e,n,r[0],r[1]);case"C":return $L([e,r[0],r[2],r[4]],[n,r[1],r[3],r[5]],1);case"Q":return ZL([e,r[0],r[2]],[n,r[1],r[3]],1);case"A":s=0;const h=r[4],g=r[5],v=r[4]+g;let y=Math.PI/180;if(Math.abs(h-v)<y&&(y=Math.abs(h-v)),a=u.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],h,0),g<0)for(l=h-y;l>v;l-=y)o=u.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],l,0),s+=u.getLineLength(a.x,a.y,o.x,o.y),a=o;else for(l=h+y;l<v;l+=y)o=u.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],l,0),s+=u.getLineLength(a.x,a.y,o.x,o.y),a=o;return o=u.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],v,0),s+=u.getLineLength(a.x,a.y,o.x,o.y),s}return 0}static convertEndpointToCenterParameterization(e,n,i,r,s,a,o,l,u){const h=u*(Math.PI/180),g=Math.cos(h)*(e-i)/2+Math.sin(h)*(n-r)/2,v=-1*Math.sin(h)*(e-i)/2+Math.cos(h)*(n-r)/2,y=g*g/(o*o)+v*v/(l*l);y>1&&(o*=Math.sqrt(y),l*=Math.sqrt(y));let w=Math.sqrt((o*o*(l*l)-o*o*(v*v)-l*l*(g*g))/(o*o*(v*v)+l*l*(g*g)));s===a&&(w*=-1),isNaN(w)&&(w=0);const S=w*o*v/l,x=w*-l*g/o,T=(e+i)/2+Math.cos(h)*S-Math.sin(h)*x,_=(n+r)/2+Math.sin(h)*S+Math.cos(h)*x,M=function(W){return Math.sqrt(W[0]*W[0]+W[1]*W[1])},F=function(W,j){return(W[0]*j[0]+W[1]*j[1])/(M(W)*M(j))},L=function(W,j){return(W[0]*j[1]<W[1]*j[0]?-1:1)*Math.acos(F(W,j))},k=L([1,0],[(g-S)/o,(v-x)/l]),B=[(g-S)/o,(v-x)/l],H=[(-1*g-S)/o,(-1*v-x)/l];let U=L(B,H);return F(B,H)<=-1&&(U=Math.PI),F(B,H)>=1&&(U=0),a===0&&U>0&&(U=U-2*Math.PI),a===1&&U<0&&(U=U+2*Math.PI),[T,_,o,l,k,U,h,a]}}Mn.prototype.className="Path";Mn.prototype._attrsAffectingSize=["data"];fi(Mn);Y.addGetterSetter(Mn,"data");class Nf extends hu{_sceneFunc(e){super._sceneFunc(e);const n=Math.PI*2,i=this.points();let r=i;const s=this.tension()!==0&&i.length>4;s&&(r=this.getTensionPoints());const a=this.pointerLength(),o=i.length;let l,u;if(s){const v=[r[r.length-4],r[r.length-3],r[r.length-2],r[r.length-1],i[o-2],i[o-1]],y=Mn.calcLength(r[r.length-4],r[r.length-3],"C",v),w=Mn.getPointOnQuadraticBezier(Math.min(1,1-a/y),v[0],v[1],v[2],v[3],v[4],v[5]);l=i[o-2]-w.x,u=i[o-1]-w.y}else l=i[o-2]-i[o-4],u=i[o-1]-i[o-3];const h=(Math.atan2(u,l)+n)%n,g=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(i[o-2],i[o-1]),e.rotate(h),e.moveTo(0,0),e.lineTo(-a,g/2),e.lineTo(-a,-g/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(i[0],i[1]),s?(l=(r[0]+r[2])/2-i[0],u=(r[1]+r[3])/2-i[1]):(l=i[2]-i[0],u=i[3]-i[1]),e.rotate((Math.atan2(-u,-l)+n)%n),e.moveTo(0,0),e.lineTo(-a,g/2),e.lineTo(-a,-g/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){const n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),n=this.pointerWidth()/2;return{x:e.x,y:e.y-n,width:e.width,height:e.height+n*2}}}Nf.prototype.className="Arrow";fi(Nf);Y.addGetterSetter(Nf,"pointerLength",10,Me());Y.addGetterSetter(Nf,"pointerWidth",10,Me());Y.addGetterSetter(Nf,"pointerAtBeginning",!1);Y.addGetterSetter(Nf,"pointerAtEnding",!0);let bm=class extends Re{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}};bm.prototype._centroid=!0;bm.prototype.className="Circle";bm.prototype._attrsAffectingSize=["radius"];fi(bm);Y.addGetterSetter(bm,"radius",0,Me());class Vh extends Re{_sceneFunc(e){const n=this.radiusX(),i=this.radiusY();e.beginPath(),e.save(),n!==i&&e.scale(1,i/n),e.arc(0,0,n,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}Vh.prototype.className="Ellipse";Vh.prototype._centroid=!0;Vh.prototype._attrsAffectingSize=["radiusX","radiusY"];fi(Vh);Y.addComponentsGetterSetter(Vh,"radius",["x","y"]);Y.addGetterSetter(Vh,"radiusX",0,Me());Y.addGetterSetter(Vh,"radiusY",0,Me());let Xo=class UG extends Re{constructor(e){super(e),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",n=>{this._removeImageLoad(n.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",this._loadListener)}_removeImageLoad(e){e&&e.removeEventListener&&e.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const e=!!this.cornerRadius(),n=this.hasShadow();return e&&n?!0:super._useBufferCanvas(!0)}_sceneFunc(e){const n=this.getWidth(),i=this.getHeight(),r=this.cornerRadius(),s=this.attrs.image;let a;if(s){const o=this.attrs.cropWidth,l=this.attrs.cropHeight;o&&l?a=[s,this.cropX(),this.cropY(),o,l,0,0,n,i]:a=[s,0,0,n,i]}(this.hasFill()||this.hasStroke()||r)&&(e.beginPath(),r?re.drawRoundedRectPath(e,n,i,r):e.rect(0,0,n,i),e.closePath(),e.fillStrokeShape(this)),s&&(r&&e.clip(),e.drawImage.apply(e,a))}_hitFunc(e){const n=this.width(),i=this.height(),r=this.cornerRadius();e.beginPath(),r?re.drawRoundedRectPath(e,n,i,r):e.rect(0,0,n,i),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,n,i;return(i=(e=this.attrs.width)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.width)!==null&&i!==void 0?i:0}getHeight(){var e,n,i;return(i=(e=this.attrs.height)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.height)!==null&&i!==void 0?i:0}static fromURL(e,n,i=null){const r=re.createImageElement();r.onload=function(){const s=new UG({image:r});n(s)},r.onerror=i,r.crossOrigin="Anonymous",r.src=e}};Xo.prototype.className="Image";Xo.prototype._attrsAffectingSize=["image"];fi(Xo);Y.addGetterSetter(Xo,"cornerRadius",0,U2(4));Y.addGetterSetter(Xo,"image");Y.addComponentsGetterSetter(Xo,"crop",["x","y","width","height"]);Y.addGetterSetter(Xo,"cropX",0,Me());Y.addGetterSetter(Xo,"cropY",0,Me());Y.addGetterSetter(Xo,"cropWidth",0,Me());Y.addGetterSetter(Xo,"cropHeight",0,Me());const jG=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],Dge="Change.konva",Mge="none",gD="up",pD="right",mD="down",vD="left",_ge=jG.length;class D3 extends tm{constructor(e){super(e),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){let n=this,i;const r=function(){n._sync()};for(i=0;i<_ge;i++)e.on(jG[i]+Dge,r)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let e=this.getText(),n=this.getTag(),i,r,s,a,o,l,u;if(e&&n){switch(i=e.width(),r=e.height(),s=n.pointerDirection(),a=n.pointerWidth(),u=n.pointerHeight(),o=0,l=0,s){case gD:o=i/2,l=-1*u;break;case pD:o=i+a,l=r/2;break;case mD:o=i/2,l=r+u;break;case vD:o=-1*a,l=r/2;break}n.setAttrs({x:-1*o,y:-1*l,width:i,height:r}),e.setAttrs({x:-1*o,y:-1*l})}}}D3.prototype.className="Label";fi(D3);class Bf extends Re{_sceneFunc(e){const n=this.width(),i=this.height(),r=this.pointerDirection(),s=this.pointerWidth(),a=this.pointerHeight(),o=this.cornerRadius();let l=0,u=0,h=0,g=0;typeof o=="number"?l=u=h=g=Math.min(o,n/2,i/2):(l=Math.min(o[0]||0,n/2,i/2),u=Math.min(o[1]||0,n/2,i/2),g=Math.min(o[2]||0,n/2,i/2),h=Math.min(o[3]||0,n/2,i/2)),e.beginPath(),e.moveTo(l,0),r===gD&&(e.lineTo((n-s)/2,0),e.lineTo(n/2,-1*a),e.lineTo((n+s)/2,0)),e.lineTo(n-u,0),e.arc(n-u,u,u,Math.PI*3/2,0,!1),r===pD&&(e.lineTo(n,(i-a)/2),e.lineTo(n+s,i/2),e.lineTo(n,(i+a)/2)),e.lineTo(n,i-g),e.arc(n-g,i-g,g,0,Math.PI/2,!1),r===mD&&(e.lineTo((n+s)/2,i),e.lineTo(n/2,i+a),e.lineTo((n-s)/2,i)),e.lineTo(h,i),e.arc(h,i-h,h,Math.PI/2,Math.PI,!1),r===vD&&(e.lineTo(0,(i+a)/2),e.lineTo(-1*s,i/2),e.lineTo(0,(i-a)/2)),e.lineTo(0,l),e.arc(l,l,l,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){let e=0,n=0,i=this.pointerWidth(),r=this.pointerHeight(),s=this.pointerDirection(),a=this.width(),o=this.height();return s===gD?(n-=r,o+=r):s===mD?o+=r:s===vD?(e-=i*1.5,a+=i):s===pD&&(a+=i*1.5),{x:e,y:n,width:a,height:o}}}Bf.prototype.className="Tag";fi(Bf);Y.addGetterSetter(Bf,"pointerDirection",Mge);Y.addGetterSetter(Bf,"pointerWidth",0,Me());Y.addGetterSetter(Bf,"pointerHeight",0,Me());Y.addGetterSetter(Bf,"cornerRadius",0,U2(4));let lC=class extends Re{_sceneFunc(e){const n=this.cornerRadius(),i=this.width(),r=this.height();e.beginPath(),n?re.drawRoundedRectPath(e,i,r,n):e.rect(0,0,i,r),e.closePath(),e.fillStrokeShape(this)}};lC.prototype.className="Rect";fi(lC);Y.addGetterSetter(lC,"cornerRadius",0,U2(4));class Uh extends Re{_sceneFunc(e){const n=this._getPoints(),i=this.radius(),r=this.sides(),s=this.cornerRadius();if(e.beginPath(),s)re.drawRoundedPolygonPath(e,n,r,i,s);else{e.moveTo(n[0].x,n[0].y);for(let a=1;a<n.length;a++)e.lineTo(n[a].x,n[a].y)}e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,n=this.attrs.radius||0,i=[];for(let r=0;r<e;r++)i.push({x:n*Math.sin(r*2*Math.PI/e),y:-1*n*Math.cos(r*2*Math.PI/e)});return i}getSelfRect(){const e=this._getPoints();let n=e[0].x,i=e[0].x,r=e[0].y,s=e[0].y;return e.forEach(a=>{n=Math.min(n,a.x),i=Math.max(i,a.x),r=Math.min(r,a.y),s=Math.max(s,a.y)}),{x:n,y:r,width:i-n,height:s-r}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Uh.prototype.className="RegularPolygon";Uh.prototype._centroid=!0;Uh.prototype._attrsAffectingSize=["radius"];fi(Uh);Y.addGetterSetter(Uh,"radius",0,Me());Y.addGetterSetter(Uh,"sides",0,Me());Y.addGetterSetter(Uh,"cornerRadius",0,U2(4));const JL=Math.PI*2;class If extends Re{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,JL,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),JL,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}If.prototype.className="Ring";If.prototype._centroid=!0;If.prototype._attrsAffectingSize=["innerRadius","outerRadius"];fi(If);Y.addGetterSetter(If,"innerRadius",0,Me());Y.addGetterSetter(If,"outerRadius",0,Me());class Zl extends Re{constructor(e){super(e),this._updated=!0,this.anim=new Qa(()=>{const n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){const n=this.animation(),i=this.frameIndex(),r=i*4,s=this.animations()[n],a=this.frameOffsets(),o=s[r+0],l=s[r+1],u=s[r+2],h=s[r+3],g=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,u,h),e.closePath(),e.fillStrokeShape(this)),g)if(a){const v=a[n],y=i*2;e.drawImage(g,o,l,u,h,v[y+0],v[y+1],u,h)}else e.drawImage(g,o,l,u,h,0,0,u,h)}_hitFunc(e){const n=this.animation(),i=this.frameIndex(),r=i*4,s=this.animations()[n],a=this.frameOffsets(),o=s[r+2],l=s[r+3];if(e.beginPath(),a){const u=a[n],h=i*2;e.rect(u[h+0],u[h+1],o,l)}else e.rect(0,0,o,l);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const e=this.frameIndex(),n=this.animation(),i=this.animations(),r=i[n],s=r.length/4;e<s-1?this.frameIndex(e+1):this.frameIndex(0)}}Zl.prototype.className="Sprite";fi(Zl);Y.addGetterSetter(Zl,"animation");Y.addGetterSetter(Zl,"animations");Y.addGetterSetter(Zl,"frameOffsets");Y.addGetterSetter(Zl,"image");Y.addGetterSetter(Zl,"frameIndex",0,Me());Y.addGetterSetter(Zl,"frameRate",17,Me());Y.backCompat(Zl,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class jh extends Re{_sceneFunc(e){const n=this.innerRadius(),i=this.outerRadius(),r=this.numPoints();e.beginPath(),e.moveTo(0,0-i);for(let s=1;s<r*2;s++){const a=s%2===0?i:n,o=a*Math.sin(s*Math.PI/r),l=-1*a*Math.cos(s*Math.PI/r);e.lineTo(o,l)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}jh.prototype.className="Star";jh.prototype._centroid=!0;jh.prototype._attrsAffectingSize=["innerRadius","outerRadius"];fi(jh);Y.addGetterSetter(jh,"numPoints",5,Me());Y.addGetterSetter(jh,"innerRadius",0,Me());Y.addGetterSetter(jh,"outerRadius",0,Me());function vh(t){return[...t].reduce((e,n,i,r)=>{if(new RegExp("\\p{Emoji}","u").test(n)){const s=r[i+1];s&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(s)?(e.push(n+s),r[i+1]=""):e.push(n)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(n+(r[i+1]||""))?e.push(n+r[i+1]):i>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(n)?e[e.length-1]+=n:n&&e.push(n);return e},[])}const up="auto",Pge="center",WG="inherit",v0="justify",Oge="Change.konva",Lge="2d",eF="-",qG="left",Fge="text",kge="Text",Nge="top",Bge="bottom",tF="middle",KG="normal",Ige="px ",N1=" ",Hge="right",nF="rtl",Gge="word",zge="char",iF="none",aT="",YG=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],Vge=YG.length;function Uge(t){return t.split(",").map(e=>{e=e.trim();const n=e.indexOf(" ")>=0,i=e.indexOf('"')>=0||e.indexOf("'")>=0;return n&&!i&&(e=`"${e}"`),e}).join(", ")}let B1;function oT(){return B1||(B1=re.createCanvasElement().getContext(Lge),B1)}function jge(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)}function Wge(t){t.setAttr("miterLimit",2),t.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function qge(t){return t=t||{},!t.fillLinearGradientColorStops&&!t.fillRadialGradientColorStops&&!t.fillPatternImage&&(t.fill=t.fill||"black"),t}let Ln=class extends Re{constructor(e){super(qge(e)),this._partialTextX=0,this._partialTextY=0;for(let n=0;n<Vge;n++)this.on(YG[n]+Oge,this._setTextData);this._setTextData()}_sceneFunc(e){var n,i;const r=this.textArr,s=r.length;if(!this.text())return;let a=this.padding(),o=this.fontSize(),l=this.lineHeight()*o,u=this.verticalAlign(),h=this.direction(),g=0,v=this.align(),y=this.getWidth(),w=this.letterSpacing(),S=this.charRenderFunc(),x=this.fill(),T=this.textDecoration(),_=this.underlineOffset(),M=T.indexOf("underline")!==-1,F=T.indexOf("line-through")!==-1,L;h=h===WG?e.direction:h;let k=l/2,B=tF;if(!Fe.legacyTextRendering){const H=this.measureSize("M");B="alphabetic";const U=(n=H.fontBoundingBoxAscent)!==null&&n!==void 0?n:H.actualBoundingBoxAscent,W=(i=H.fontBoundingBoxDescent)!==null&&i!==void 0?i:H.actualBoundingBoxDescent;k=(U-W)/2+l/2}for(h===nF&&e.setAttr("direction",h),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",B),e.setAttr("textAlign",qG),u===tF?g=(this.getHeight()-s*l-a*2)/2:u===Bge&&(g=this.getHeight()-s*l-a*2),e.translate(a,g+a),L=0;L<s;L++){let H=0,U=0;const W=r[L],j=W.text,X=W.width,ne=W.lastInParagraph;if(e.save(),v===Hge?H+=y-X-a*2:v===Pge&&(H+=(y-X-a*2)/2),M){e.save(),e.beginPath();const q=_??(Fe.legacyTextRendering?Math.round(o/2):Math.round(o/4)),z=H,K=k+U+q;e.moveTo(z,K);const Q=v===v0&&!ne?y-a*2:X;e.lineTo(z+Math.round(Q),K),e.lineWidth=o/15;const oe=this._getLinearGradient();e.strokeStyle=oe||x,e.stroke(),e.restore()}const $=H;if(h!==nF&&(w!==0||v===v0||S)){const q=j.split(" ").length-1,z=vh(j);for(let K=0;K<z.length;K++){const Q=z[K];if(Q===" "&&!ne&&v===v0&&(H+=(y-a*2-X)/q),this._partialTextX=H,this._partialTextY=k+U,this._partialText=Q,S){e.save();const le=r.slice(0,L).reduce((Z,ae)=>Z+vh(ae.text).length,0),V=K+le;S({char:Q,index:V,x:H,y:k+U,lineIndex:L,column:K,isLastInLine:ne,width:this.measureSize(Q).width,context:e})}e.fillStrokeShape(this),S&&e.restore(),H+=this.measureSize(Q).width+w}}else w!==0&&e.setAttr("letterSpacing",`${w}px`),this._partialTextX=H,this._partialTextY=k+U,this._partialText=j,e.fillStrokeShape(this);if(F){e.save(),e.beginPath();const q=Fe.legacyTextRendering?0:-Math.round(o/4),z=$;e.moveTo(z,k+U+q);const K=v===v0&&!ne?y-a*2:X;e.lineTo(z+Math.round(K),k+U+q),e.lineWidth=o/15;const Q=this._getLinearGradient();e.strokeStyle=Q||x,e.stroke(),e.restore()}e.restore(),s>1&&(k+=l)}}_hitFunc(e){const n=this.getWidth(),i=this.getHeight();e.beginPath(),e.rect(0,0,n,i),e.closePath(),e.fillStrokeShape(this)}setText(e){const n=re._isString(e)?e:e==null?"":e+"";return this._setAttr(Fge,n),this}getWidth(){return this.attrs.width===up||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===up||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return re.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var n,i,r,s,a,o,l,u,h,g,v;let y=oT(),w=this.fontSize(),S;y.save(),y.font=this._getContextFont(),S=y.measureText(e),y.restore();const x=w/100;return{actualBoundingBoxAscent:(n=S.actualBoundingBoxAscent)!==null&&n!==void 0?n:71.58203125*x,actualBoundingBoxDescent:(i=S.actualBoundingBoxDescent)!==null&&i!==void 0?i:0,actualBoundingBoxLeft:(r=S.actualBoundingBoxLeft)!==null&&r!==void 0?r:-7.421875*x,actualBoundingBoxRight:(s=S.actualBoundingBoxRight)!==null&&s!==void 0?s:75.732421875*x,alphabeticBaseline:(a=S.alphabeticBaseline)!==null&&a!==void 0?a:0,emHeightAscent:(o=S.emHeightAscent)!==null&&o!==void 0?o:100*x,emHeightDescent:(l=S.emHeightDescent)!==null&&l!==void 0?l:-20*x,fontBoundingBoxAscent:(u=S.fontBoundingBoxAscent)!==null&&u!==void 0?u:91*x,fontBoundingBoxDescent:(h=S.fontBoundingBoxDescent)!==null&&h!==void 0?h:21*x,hangingBaseline:(g=S.hangingBaseline)!==null&&g!==void 0?g:72.80000305175781*x,ideographicBaseline:(v=S.ideographicBaseline)!==null&&v!==void 0?v:-21*x,width:S.width,height:w}}_getContextFont(){return this.fontStyle()+N1+this.fontVariant()+N1+(this.fontSize()+Ige)+Uge(this.fontFamily())}_addTextLine(e){this.align()===v0&&(e=e.trim());const i=this._getTextWidth(e);return this.textArr.push({text:e,width:i,lastInParagraph:!1})}_getTextWidth(e){const n=this.letterSpacing(),i=e.length;return oT().measureText(e).width+n*i}_setTextData(){let e=this.text().split(`
`),n=+this.fontSize(),i=0,r=this.lineHeight()*n,s=this.attrs.width,a=this.attrs.height,o=s!==up&&s!==void 0,l=a!==up&&a!==void 0,u=this.padding(),h=s-u*2,g=a-u*2,v=0,y=this.wrap(),w=y!==iF,S=y!==zge&&w,x=this.ellipsis();this.textArr=[],oT().font=this._getContextFont();const T=x?this._getTextWidth(aT):0;for(let _=0,M=e.length;_<M;++_){let F=e[_],L=this._getTextWidth(F);if(o&&L>h)for(;F.length>0;){let k=0,B=vh(F).length,H="",U=0;for(;k<B;){const W=k+B>>>1,j=vh(F),X=j.slice(0,W+1).join(""),ne=this._getTextWidth(X);(x&&l&&v+r>g?ne+T:ne)<=h?(k=W+1,H=X,U=ne):B=W}if(H){if(S){const X=vh(F),ne=vh(H),$=X[ne.length],q=$===N1||$===eF;let z;if(q&&U<=h)z=ne.length;else{const K=ne.lastIndexOf(N1),Q=ne.lastIndexOf(eF);z=Math.max(K,Q)+1}z>0&&(k=z,H=X.slice(0,k).join(""),U=this._getTextWidth(H))}if(H=H.trimRight(),this._addTextLine(H),i=Math.max(i,U),v+=r,this._shouldHandleEllipsis(v)){this._tryToAddEllipsisToLastLine();break}if(F=vh(F).slice(k).join("").trimLeft(),F.length>0&&(L=this._getTextWidth(F),L<=h)){this._addTextLine(F),v+=r,i=Math.max(i,L);break}}else break}else this._addTextLine(F),v+=r,i=Math.max(i,L),this._shouldHandleEllipsis(v)&&_<M-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),l&&v+r>g)break}this.textHeight=n,this.textWidth=i}_shouldHandleEllipsis(e){const n=+this.fontSize(),i=this.lineHeight()*n,r=this.attrs.height,s=r!==up&&r!==void 0,a=this.padding(),o=r-a*2;return!(this.wrap()!==iF)||s&&e+i>o}_tryToAddEllipsisToLastLine(){const e=this.attrs.width,n=e!==up&&e!==void 0,i=this.padding(),r=e-i*2,s=this.ellipsis(),a=this.textArr[this.textArr.length-1];!a||!s||(n&&(this._getTextWidth(a.text+aT)<r||(a.text=a.text.slice(0,a.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(a.text+aT))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,n=this.hasShadow();return e&&n?!0:super._useBufferCanvas()}};Ln.prototype._fillFunc=jge;Ln.prototype._strokeFunc=Wge;Ln.prototype.className=kge;Ln.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];fi(Ln);Y.overWriteSetter(Ln,"width",E3());Y.overWriteSetter(Ln,"height",E3());Y.addGetterSetter(Ln,"direction",WG);Y.addGetterSetter(Ln,"fontFamily","Arial");Y.addGetterSetter(Ln,"fontSize",12,Me());Y.addGetterSetter(Ln,"fontStyle",KG);Y.addGetterSetter(Ln,"fontVariant",KG);Y.addGetterSetter(Ln,"padding",0,Me());Y.addGetterSetter(Ln,"align",qG);Y.addGetterSetter(Ln,"verticalAlign",Nge);Y.addGetterSetter(Ln,"lineHeight",1,Me());Y.addGetterSetter(Ln,"wrap",Gge);Y.addGetterSetter(Ln,"ellipsis",!1,Yo());Y.addGetterSetter(Ln,"letterSpacing",0,Me());Y.addGetterSetter(Ln,"text","",Ff());Y.addGetterSetter(Ln,"textDecoration","");Y.addGetterSetter(Ln,"underlineOffset",void 0,Me());Y.addGetterSetter(Ln,"charRenderFunc",void 0);const Kge="",XG="normal";function $G(t){t.fillText(this.partialText,0,0)}function ZG(t){t.strokeText(this.partialText,0,0)}class ir extends Re{constructor(e){super(e),this.dummyCanvas=re.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return Mn.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;const n=this.pathLength;return e>n?null:Mn.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=Mn.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();const n=this.textDecoration(),i=this.fill(),r=this.fontSize(),s=this.glyphInfo,a=n.indexOf("underline")!==-1,o=n.indexOf("line-through")!==-1;a&&e.beginPath();for(let l=0;l<s.length;l++){e.save();const u=s[l].p0;e.translate(u.x,u.y),e.rotate(s[l].rotation),this.partialText=s[l].text,e.fillStrokeShape(this),a&&(l===0&&e.moveTo(0,r/2+1),e.lineTo(s[l].width,r/2+1)),e.restore()}if(a&&(e.strokeStyle=i,e.lineWidth=r/20,e.stroke()),o){e.beginPath();for(let l=0;l<s.length;l++){e.save();const u=s[l].p0;e.translate(u.x,u.y),e.rotate(s[l].rotation),l===0&&e.moveTo(0,0),e.lineTo(s[l].width,0),e.restore()}e.strokeStyle=i,e.lineWidth=r/20,e.stroke()}e.restore()}_hitFunc(e){e.beginPath();const n=this.glyphInfo;if(n.length>=1){const i=n[0].p0;e.moveTo(i.x,i.y)}for(let i=0;i<n.length;i++){const r=n[i].p1;e.lineTo(r.x,r.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return re.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return Ln.prototype.setText.call(this,e)}_getContextFont(){return Ln.prototype._getContextFont.call(this)}_getTextSize(e){const i=this.dummyCanvas.getContext("2d");i.save(),i.font=this._getContextFont();const r=i.measureText(e);return i.restore(),{width:r.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const e=vh(this.text()),n=[];let i=0;for(let g=0;g<e.length;g++)n.push({char:e[g],width:this._getTextSize(e[g]).width}),i+=n[g].width;const{height:r}=this._getTextSize(this.attrs.text);if(this.textWidth=i,this.textHeight=r,this.glyphInfo=[],!this.attrs.data)return null;const s=this.letterSpacing(),a=this.align(),o=this.kerningFunc(),l=Math.max(this.textWidth+((this.attrs.text||"").length-1)*s,0);let u=0;a==="center"&&(u=Math.max(0,this.pathLength/2-l/2)),a==="right"&&(u=Math.max(0,this.pathLength-l));let h=u;for(let g=0;g<n.length;g++){const v=this._getPointAtLength(h);if(!v)return;const y=n[g].char;let w=n[g].width+s;if(y===" "&&a==="justify"){const F=this.text().split(" ").length-1;w+=(this.pathLength-l)/F}const S=this._getPointAtLength(h+w);if(!S)return;const x=Mn.getLineLength(v.x,v.y,S.x,S.y);let T=0;if(o)try{T=o(n[g-1].char,y)*this.fontSize()}catch{T=0}v.x+=T,S.x+=T,this.textWidth+=T;const _=Mn.getPointOnLine(T+x/2,v.x,v.y,S.x,S.y),M=Math.atan2(S.y-v.y,S.x-v.x);this.glyphInfo.push({transposeX:_.x,transposeY:_.y,text:e[g],rotation:M,p0:v,p1:S,width:x}),h+=w}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const e=[];this.glyphInfo.forEach(function(u){e.push(u.p0.x),e.push(u.p0.y),e.push(u.p1.x),e.push(u.p1.y)});let n=e[0]||0,i=e[0]||0,r=e[1]||0,s=e[1]||0,a,o;for(let u=0;u<e.length/2;u++)a=e[u*2],o=e[u*2+1],n=Math.min(n,a),i=Math.max(i,a),r=Math.min(r,o),s=Math.max(s,o);const l=this.fontSize();return{x:n-l/2,y:r-l/2,width:i-n+l,height:s-r+l}}destroy(){return re.releaseCanvas(this.dummyCanvas),super.destroy()}}ir.prototype._fillFunc=$G;ir.prototype._strokeFunc=ZG;ir.prototype._fillFuncHit=$G;ir.prototype._strokeFuncHit=ZG;ir.prototype.className="TextPath";ir.prototype._attrsAffectingSize=["text","fontSize","data"];fi(ir);Y.addGetterSetter(ir,"data");Y.addGetterSetter(ir,"fontFamily","Arial");Y.addGetterSetter(ir,"fontSize",12,Me());Y.addGetterSetter(ir,"fontStyle",XG);Y.addGetterSetter(ir,"align","left");Y.addGetterSetter(ir,"letterSpacing",0,Me());Y.addGetterSetter(ir,"textBaseline","middle");Y.addGetterSetter(ir,"fontVariant",XG);Y.addGetterSetter(ir,"text",Kge);Y.addGetterSetter(ir,"textDecoration","");Y.addGetterSetter(ir,"kerningFunc",void 0);const QG="tr-konva",Yge=["resizeEnabledChange","rotateAnchorOffsetChange","rotateAnchorAngleChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(t=>t+`.${QG}`).join(" "),rF="nodesRect",Xge=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],$ge={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},Zge="ontouchstart"in Fe._global;function Qge(t,e,n){if(t==="rotater")return n;e+=re.degToRad($ge[t]||0);const i=(re.radToDeg(e)%360+360)%360;return re._inRange(i,315+22.5,360)||re._inRange(i,0,22.5)?"ns-resize":re._inRange(i,45-22.5,45+22.5)?"nesw-resize":re._inRange(i,90-22.5,90+22.5)?"ew-resize":re._inRange(i,135-22.5,135+22.5)?"nwse-resize":re._inRange(i,180-22.5,180+22.5)?"ns-resize":re._inRange(i,225-22.5,225+22.5)?"nesw-resize":re._inRange(i,270-22.5,270+22.5)?"ew-resize":re._inRange(i,315-22.5,315+22.5)?"nwse-resize":(re.error("Transformer has unknown angle for cursor detection: "+i),"pointer")}const xS=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function Jge(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}function JG(t,e,n){const i=n.x+(t.x-n.x)*Math.cos(e)-(t.y-n.y)*Math.sin(e),r=n.y+(t.x-n.x)*Math.sin(e)+(t.y-n.y)*Math.cos(e);return{...t,rotation:t.rotation+e,x:i,y:r}}function epe(t,e){const n=Jge(t);return JG(t,e,n)}function tpe(t,e,n){let i=e;for(let r=0;r<t.length;r++){const s=Fe.getAngle(t[r]),a=Math.abs(s-e)%(Math.PI*2);Math.min(a,Math.PI*2-a)<n&&(i=s)}return i}let yD=0;class Ht extends tm{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(Yge,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return re.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return QG+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();const n=e.filter(r=>r.isAncestorOf(this)?(re.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=e=n,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(r=>{const s=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(r._attrsAffectingSize.length){const a=r._attrsAffectingSize.map(o=>o+"Change."+this._getEventNamespace()).join(" ");r.on(a,s)}r.on(Xge.map(a=>a+`.${this._getEventNamespace()}`).join(" "),s),r.on(`absoluteTransformChange.${this._getEventNamespace()}`,s),this._proxyDrag(r)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(e){let n;e.on(`dragstart.${this._getEventNamespace()}`,i=>{n=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(i,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,i=>{if(!n)return;const r=e.getAbsolutePosition(),s=r.x-n.x,a=r.y-n.y;this.nodes().forEach(o=>{if(o===e||o.isDragging())return;const l=o.getAbsolutePosition();o.setAbsolutePosition({x:l.x+s,y:l.y+a}),o.startDrag(i)}),n=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(rF),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(rF,this.__getNodeRect)}__getNodeShape(e,n=this.rotation(),i){const r=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),s=e.getAbsoluteScale(i),a=e.getAbsolutePosition(i),o=r.x*s.x-e.offsetX()*s.x,l=r.y*s.y-e.offsetY()*s.y,u=(Fe.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),h={x:a.x+o*Math.cos(u)+l*Math.sin(-u),y:a.y+l*Math.cos(u)+o*Math.sin(u),width:r.width*s.x,height:r.height*s.y,rotation:u};return JG(h,-Fe.getAngle(n),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const n=[];this.nodes().map(u=>{const h=u.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),g=[{x:h.x,y:h.y},{x:h.x+h.width,y:h.y},{x:h.x+h.width,y:h.y+h.height},{x:h.x,y:h.y+h.height}],v=u.getAbsoluteTransform();g.forEach(function(y){const w=v.point(y);n.push(w)})});const i=new ra;i.rotate(-Fe.getAngle(this.rotation()));let r=1/0,s=1/0,a=-1/0,o=-1/0;n.forEach(function(u){const h=i.point(u);r===void 0&&(r=a=h.x,s=o=h.y),r=Math.min(r,h.x),s=Math.min(s,h.y),a=Math.max(a,h.x),o=Math.max(o,h.y)}),i.invert();const l=i.point({x:r,y:s});return{x:l.x,y:l.y,width:a-r,height:o-s,rotation:Fe.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),xS.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(e){const n=new lC({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:Zge?10:"auto"}),i=this;n.on("mousedown touchstart",function(r){i._handleMouseDown(r)}),n.on("dragstart",r=>{n.stopDrag(),r.cancelBubble=!0}),n.on("dragend",r=>{r.cancelBubble=!0}),n.on("mouseenter",()=>{const r=Fe.getAngle(this.rotation()),s=this.rotateAnchorCursor(),a=Qge(e,r,s);n.getStage().content&&(n.getStage().content.style.cursor=a),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){const e=new Re({name:"back",width:0,height:0,sceneFunc(n,i){const r=i.getParent(),s=r.padding(),a=i.width(),o=i.height();if(n.beginPath(),n.rect(-s,-s,a+s*2,o+s*2),r.rotateEnabled()&&r.rotateLineVisible()){const l=r.rotateAnchorAngle(),u=r.rotateAnchorOffset(),h=re.degToRad(l),g=Math.sin(h),v=-Math.cos(h),y=a/2,w=o/2;let S=1/0;v<0?S=Math.min(S,-w/v):v>0&&(S=Math.min(S,(o-w)/v)),g<0?S=Math.min(S,-y/g):g>0&&(S=Math.min(S,(a-y)/g));const x=y+g*S,T=w+v*S,_=re._sign(o),M=x+g*u*_,F=T+v*u*_;n.moveTo(x,T),n.lineTo(M,F)}n.fillStrokeShape(i)},hitFunc:(n,i)=>{if(!this.shouldOverdrawWholeArea())return;const r=this.padding();n.beginPath(),n.rect(-r,-r,i.width()+r*2,i.height()+r*2),n.fillStrokeShape(i)}});this.add(e),this._proxyDrag(e),e.on("dragstart",n=>{n.cancelBubble=!0}),e.on("dragmove",n=>{n.cancelBubble=!0}),e.on("dragend",n=>{n.cancelBubble=!0}),this.on("dragmove",n=>{this.update()})}_handleMouseDown(e){if(this._transforming)return;this._movingAnchorName=e.target.name().split(" ")[0];const n=this._getNodeRect(),i=n.width,r=n.height,s=Math.sqrt(Math.pow(i,2)+Math.pow(r,2));this.sin=Math.abs(r/s),this.cos=Math.abs(i/s),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const a=e.target.getAbsolutePosition(),o=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:o.x-a.x,y:o.y-a.y},yD++,this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(l=>{l._fire("transformstart",{evt:e.evt,target:l})})}_handleMouseMove(e){let n,i,r;const s=this.findOne("."+this._movingAnchorName),a=s.getStage();a.setPointersPositions(e);const o=a.getPointerPosition();let l={x:o.x-this._anchorDragOffset.x,y:o.y-this._anchorDragOffset.y};const u=s.getAbsolutePosition();this.anchorDragBoundFunc()&&(l=this.anchorDragBoundFunc()(u,l,e)),s.setAbsolutePosition(l);const h=s.getAbsolutePosition();if(u.x===h.x&&u.y===h.y)return;if(this._movingAnchorName==="rotater"){const _=this._getNodeRect();n=s.x()-_.width/2,i=-s.y()+_.height/2;const M=Fe.getAngle(this.rotateAnchorAngle());let F=Math.atan2(-i,n)+Math.PI/2-M;_.height<0&&(F-=Math.PI);const k=Fe.getAngle(this.rotation())+F,B=Fe.getAngle(this.rotationSnapTolerance()),U=tpe(this.rotationSnaps(),k,B)-_.rotation,W=epe(_,U);this._fitNodesInto(W,e);return}const g=this.shiftBehavior();let v;g==="inverted"?v=this.keepRatio()&&!e.shiftKey:g==="none"?v=this.keepRatio():v=this.keepRatio()||e.shiftKey;let y=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(v){const _=y?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};r=Math.sqrt(Math.pow(_.x-s.x(),2)+Math.pow(_.y-s.y(),2));const M=this.findOne(".top-left").x()>_.x?-1:1,F=this.findOne(".top-left").y()>_.y?-1:1;n=r*this.cos*M,i=r*this.sin*F,this.findOne(".top-left").x(_.x-n),this.findOne(".top-left").y(_.y-i)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(s.y());else if(this._movingAnchorName==="top-right"){if(v){const _=y?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};r=Math.sqrt(Math.pow(s.x()-_.x,2)+Math.pow(_.y-s.y(),2));const M=this.findOne(".top-right").x()<_.x?-1:1,F=this.findOne(".top-right").y()>_.y?-1:1;n=r*this.cos*M,i=r*this.sin*F,this.findOne(".top-right").x(_.x+n),this.findOne(".top-right").y(_.y-i)}var w=s.position();this.findOne(".top-left").y(w.y),this.findOne(".bottom-right").x(w.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(s.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(s.x());else if(this._movingAnchorName==="bottom-left"){if(v){const _=y?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};r=Math.sqrt(Math.pow(_.x-s.x(),2)+Math.pow(s.y()-_.y,2));const M=_.x<s.x()?-1:1,F=s.y()<_.y?-1:1;n=r*this.cos*M,i=r*this.sin*F,s.x(_.x-n),s.y(_.y+i)}w=s.position(),this.findOne(".top-left").x(w.x),this.findOne(".bottom-right").y(w.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(s.y());else if(this._movingAnchorName==="bottom-right"){if(v){const _=y?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};r=Math.sqrt(Math.pow(s.x()-_.x,2)+Math.pow(s.y()-_.y,2));const M=this.findOne(".bottom-right").x()<_.x?-1:1,F=this.findOne(".bottom-right").y()<_.y?-1:1;n=r*this.cos*M,i=r*this.sin*F,this.findOne(".bottom-right").x(_.x+n),this.findOne(".bottom-right").y(_.y+i)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(y=this.centeredScaling()||e.altKey,y){const _=this.findOne(".top-left"),M=this.findOne(".bottom-right"),F=_.x(),L=_.y(),k=this.getWidth()-M.x(),B=this.getHeight()-M.y();M.move({x:-F,y:-L}),_.move({x:k,y:B})}const S=this.findOne(".top-left").getAbsolutePosition();n=S.x,i=S.y;const x=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),T=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:i,width:x,height:T,rotation:Fe.getAngle(this.rotation())},e)}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){var n;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const i=this.getNode();yD--,this._fire("transformend",{evt:e,target:i}),(n=this.getLayer())===null||n===void 0||n.batchDraw(),i&&this._nodes.forEach(r=>{var s;r._fire("transformend",{evt:e,target:r}),(s=r.getLayer())===null||s===void 0||s.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(e,n){const i=this._getNodeRect(),r=1;if(re._inRange(e.width,-this.padding()*2-r,r)){this.update();return}if(re._inRange(e.height,-this.padding()*2-r,r)){this.update();return}const s=new ra;if(s.rotate(Fe.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const v=s.point({x:-this.padding()*2,y:0});e.x+=v.x,e.y+=v.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=v.x,this._anchorDragOffset.y-=v.y}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const v=s.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=v.x,this._anchorDragOffset.y-=v.y,e.width+=this.padding()*2}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const v=s.point({x:0,y:-this.padding()*2});e.x+=v.x,e.y+=v.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=v.x,this._anchorDragOffset.y-=v.y,e.height+=this.padding()*2}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const v=s.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=v.x,this._anchorDragOffset.y-=v.y,e.height+=this.padding()*2}if(this.boundBoxFunc()){const v=this.boundBoxFunc()(i,e);v?e=v:re.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const a=1e7,o=new ra;o.translate(i.x,i.y),o.rotate(i.rotation),o.scale(i.width/a,i.height/a);const l=new ra,u=e.width/a,h=e.height/a;this.flipEnabled()===!1?(l.translate(e.x,e.y),l.rotate(e.rotation),l.translate(e.width<0?e.width:0,e.height<0?e.height:0),l.scale(Math.abs(u),Math.abs(h))):(l.translate(e.x,e.y),l.rotate(e.rotation),l.scale(u,h));const g=l.multiply(o.invert());this._nodes.forEach(v=>{var y;if(!v.getStage())return;const w=v.getParent().getAbsoluteTransform(),S=v.getTransform().copy();S.translate(v.offsetX(),v.offsetY());const x=new ra;x.multiply(w.copy().invert()).multiply(g).multiply(w).multiply(S);const T=x.decompose();v.setAttrs(T),(y=v.getLayer())===null||y===void 0||y.batchDraw()}),this.rotation(re._getRotation(e.rotation)),this._nodes.forEach(v=>{this._fire("transform",{evt:n,target:v}),v._fire("transform",{evt:n,target:v})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,n){this.findOne(e).setAttrs(n)}update(){var e;const n=this._getNodeRect();this.rotation(re._getRotation(n.rotation));const i=n.width,r=n.height,s=this.enabledAnchors(),a=this.resizeEnabled(),o=this.padding(),l=this.anchorSize(),u=this.find("._anchor");u.forEach(k=>{k.setAttrs({width:l,height:l,offsetX:l/2,offsetY:l/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:l/2+o,offsetY:l/2+o,visible:a&&s.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:i/2,y:0,offsetY:l/2+o,visible:a&&s.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:i,y:0,offsetX:l/2-o,offsetY:l/2+o,visible:a&&s.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:r/2,offsetX:l/2+o,visible:a&&s.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:i,y:r/2,offsetX:l/2-o,visible:a&&s.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:r,offsetX:l/2+o,offsetY:l/2-o,visible:a&&s.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:i/2,y:r,offsetY:l/2-o,visible:a&&s.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:i,y:r,offsetX:l/2-o,offsetY:l/2-o,visible:a&&s.indexOf("bottom-right")>=0});const h=this.rotateAnchorAngle(),g=this.rotateAnchorOffset(),v=re.degToRad(h),y=Math.sin(v),w=-Math.cos(v),S=i/2,x=r/2;let T=1/0;w<0?T=Math.min(T,-x/w):w>0&&(T=Math.min(T,(r-x)/w)),y<0?T=Math.min(T,-S/y):y>0&&(T=Math.min(T,(i-S)/y));const _=S+y*T,M=x+w*T,F=re._sign(r);this._batchChangeChild(".rotater",{x:_+y*g*F,y:M+w*g*F-o*w,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:i,height:r,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(k=>k.draggable()),x:0,y:0});const L=this.anchorStyleFunc();L&&u.forEach(k=>{L(k)}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),tm.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return Oe.prototype.toObject.call(this)}clone(e){return Oe.prototype.clone.call(this,e)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}Ht.isTransforming=()=>yD>0;function npe(t){return t instanceof Array||re.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach(function(e){xS.indexOf(e)===-1&&re.warn("Unknown anchor name: "+e+". Available names are: "+xS.join(", "))}),t||[]}Ht.prototype.className="Transformer";fi(Ht);Y.addGetterSetter(Ht,"enabledAnchors",xS,npe);Y.addGetterSetter(Ht,"flipEnabled",!0,Yo());Y.addGetterSetter(Ht,"resizeEnabled",!0);Y.addGetterSetter(Ht,"anchorSize",10,Me());Y.addGetterSetter(Ht,"rotateEnabled",!0);Y.addGetterSetter(Ht,"rotateLineVisible",!0);Y.addGetterSetter(Ht,"rotationSnaps",[]);Y.addGetterSetter(Ht,"rotateAnchorOffset",50,Me());Y.addGetterSetter(Ht,"rotateAnchorAngle",0,Me());Y.addGetterSetter(Ht,"rotateAnchorCursor","crosshair");Y.addGetterSetter(Ht,"rotationSnapTolerance",5,Me());Y.addGetterSetter(Ht,"borderEnabled",!0);Y.addGetterSetter(Ht,"anchorStroke","rgb(0, 161, 255)");Y.addGetterSetter(Ht,"anchorStrokeWidth",1,Me());Y.addGetterSetter(Ht,"anchorFill","white");Y.addGetterSetter(Ht,"anchorCornerRadius",0,Me());Y.addGetterSetter(Ht,"borderStroke","rgb(0, 161, 255)");Y.addGetterSetter(Ht,"borderStrokeWidth",1,Me());Y.addGetterSetter(Ht,"borderDash");Y.addGetterSetter(Ht,"keepRatio",!0);Y.addGetterSetter(Ht,"shiftBehavior","default");Y.addGetterSetter(Ht,"centeredScaling",!1);Y.addGetterSetter(Ht,"ignoreStroke",!1);Y.addGetterSetter(Ht,"padding",0,Me());Y.addGetterSetter(Ht,"nodes");Y.addGetterSetter(Ht,"node");Y.addGetterSetter(Ht,"boundBoxFunc");Y.addGetterSetter(Ht,"anchorDragBoundFunc");Y.addGetterSetter(Ht,"anchorStyleFunc");Y.addGetterSetter(Ht,"shouldOverdrawWholeArea",!1);Y.addGetterSetter(Ht,"useSingleNodeRotation",!0);Y.backCompat(Ht,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class du extends Re{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,Fe.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}du.prototype.className="Wedge";du.prototype._centroid=!0;du.prototype._attrsAffectingSize=["radius"];fi(du);Y.addGetterSetter(du,"radius",0,Me());Y.addGetterSetter(du,"angle",0,Me());Y.addGetterSetter(du,"clockwise",!1);Y.backCompat(du,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function sF(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const ipe=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],rpe=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function spe(t,e){const n=t.data,i=t.width,r=t.height;let s,a,o,l,u,h,g,v,y,w,S,x,T,_,M,F,L,k,B,H;const U=e+e+1,W=i-1,j=r-1,X=e+1,ne=X*(X+1)/2,$=new sF,q=ipe[e],z=rpe[e];let K=null,Q=$,oe=null,le=null;for(let V=1;V<U;V++)Q=Q.next=new sF,V===X&&(K=Q);Q.next=$,o=a=0;for(let V=0;V<r;V++){x=T=_=M=l=u=h=g=0,v=X*(F=n[a]),y=X*(L=n[a+1]),w=X*(k=n[a+2]),S=X*(B=n[a+3]),l+=ne*F,u+=ne*L,h+=ne*k,g+=ne*B,Q=$;for(let Z=0;Z<X;Z++)Q.r=F,Q.g=L,Q.b=k,Q.a=B,Q=Q.next;for(let Z=1;Z<X;Z++)s=a+((W<Z?W:Z)<<2),l+=(Q.r=F=n[s])*(H=X-Z),u+=(Q.g=L=n[s+1])*H,h+=(Q.b=k=n[s+2])*H,g+=(Q.a=B=n[s+3])*H,x+=F,T+=L,_+=k,M+=B,Q=Q.next;oe=$,le=K;for(let Z=0;Z<i;Z++)n[a+3]=B=g*q>>z,B!==0?(B=255/B,n[a]=(l*q>>z)*B,n[a+1]=(u*q>>z)*B,n[a+2]=(h*q>>z)*B):n[a]=n[a+1]=n[a+2]=0,l-=v,u-=y,h-=w,g-=S,v-=oe.r,y-=oe.g,w-=oe.b,S-=oe.a,s=o+((s=Z+e+1)<W?s:W)<<2,x+=oe.r=n[s],T+=oe.g=n[s+1],_+=oe.b=n[s+2],M+=oe.a=n[s+3],l+=x,u+=T,h+=_,g+=M,oe=oe.next,v+=F=le.r,y+=L=le.g,w+=k=le.b,S+=B=le.a,x-=F,T-=L,_-=k,M-=B,le=le.next,a+=4;o+=i}for(let V=0;V<i;V++){T=_=M=x=u=h=g=l=0,a=V<<2,v=X*(F=n[a]),y=X*(L=n[a+1]),w=X*(k=n[a+2]),S=X*(B=n[a+3]),l+=ne*F,u+=ne*L,h+=ne*k,g+=ne*B,Q=$;for(let ae=0;ae<X;ae++)Q.r=F,Q.g=L,Q.b=k,Q.a=B,Q=Q.next;let Z=i;for(let ae=1;ae<=e;ae++)a=Z+V<<2,l+=(Q.r=F=n[a])*(H=X-ae),u+=(Q.g=L=n[a+1])*H,h+=(Q.b=k=n[a+2])*H,g+=(Q.a=B=n[a+3])*H,x+=F,T+=L,_+=k,M+=B,Q=Q.next,ae<j&&(Z+=i);a=V,oe=$,le=K;for(let ae=0;ae<r;ae++)s=a<<2,n[s+3]=B=g*q>>z,B>0?(B=255/B,n[s]=(l*q>>z)*B,n[s+1]=(u*q>>z)*B,n[s+2]=(h*q>>z)*B):n[s]=n[s+1]=n[s+2]=0,l-=v,u-=y,h-=w,g-=S,v-=oe.r,y-=oe.g,w-=oe.b,S-=oe.a,s=V+((s=ae+X)<j?s:j)*i<<2,l+=x+=oe.r=n[s],u+=T+=oe.g=n[s+1],h+=_+=oe.b=n[s+2],g+=M+=oe.a=n[s+3],oe=oe.next,v+=F=le.r,y+=L=le.g,w+=k=le.b,S+=B=le.a,x-=F,T-=L,_-=k,M-=B,le=le.next,a+=i}}const ape=function(e){const n=Math.round(this.blurRadius());n>0&&spe(e,n)};Y.addGetterSetter(Oe,"blurRadius",0,Me(),Y.afterSetFilter);const ope=function(t){const e=this.brightness()*255,n=t.data,i=n.length;for(let r=0;r<i;r+=4)n[r]+=e,n[r+1]+=e,n[r+2]+=e};Y.addGetterSetter(Oe,"brightness",0,Me(),Y.afterSetFilter);const lpe=function(t){const e=this.brightness(),n=t.data,i=n.length;for(let r=0;r<i;r+=4)n[r]=Math.min(255,n[r]*e),n[r+1]=Math.min(255,n[r+1]*e),n[r+2]=Math.min(255,n[r+2]*e)},cpe=function(t){const e=Math.pow((this.contrast()+100)/100,2),n=t.data,i=n.length;let r=150,s=150,a=150;for(let o=0;o<i;o+=4)r=n[o],s=n[o+1],a=n[o+2],r/=255,r-=.5,r*=e,r+=.5,r*=255,s/=255,s-=.5,s*=e,s+=.5,s*=255,a/=255,a-=.5,a*=e,a+=.5,a*=255,r=r<0?0:r>255?255:r,s=s<0?0:s>255?255:s,a=a<0?0:a>255?255:a,n[o]=r,n[o+1]=s,n[o+2]=a};Y.addGetterSetter(Oe,"contrast",0,Me(),Y.afterSetFilter);const upe=function(t){var e,n,i,r,s,a,o,l,u;const h=t.data,g=t.width,v=t.height,y=Math.min(1,Math.max(0,(n=(e=this.embossStrength)===null||e===void 0?void 0:e.call(this))!==null&&n!==void 0?n:.5)),w=Math.min(1,Math.max(0,(r=(i=this.embossWhiteLevel)===null||i===void 0?void 0:i.call(this))!==null&&r!==void 0?r:.5)),x=(o={"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0}[(a=(s=this.embossDirection)===null||s===void 0?void 0:s.call(this))!==null&&a!==void 0?a:"top-left"])!==null&&o!==void 0?o:315,T=!!((u=(l=this.embossBlend)===null||l===void 0?void 0:l.call(this))!==null&&u!==void 0&&u),_=y*10,M=w*255,F=x*Math.PI/180,L=Math.cos(F),k=Math.sin(F),B=128/1020*_,H=new Uint8ClampedArray(h),U=new Float32Array(g*v);for(let $=0,q=0;q<h.length;q+=4,$++)U[$]=.2126*H[q]+.7152*H[q+1]+.0722*H[q+2];const W=[-1,0,1,-2,0,2,-1,0,1],j=[-1,-2,-1,0,0,0,1,2,1],X=[-g-1,-g,-g+1,-1,0,1,g-1,g,g+1],ne=$=>$<0?0:$>255?255:$;for(let $=1;$<v-1;$++)for(let q=1;q<g-1;q++){const z=$*g+q;let K=0,Q=0;K+=U[z+X[0]]*W[0],Q+=U[z+X[0]]*j[0],K+=U[z+X[1]]*W[1],Q+=U[z+X[1]]*j[1],K+=U[z+X[2]]*W[2],Q+=U[z+X[2]]*j[2],K+=U[z+X[3]]*W[3],Q+=U[z+X[3]]*j[3],K+=U[z+X[5]]*W[5],Q+=U[z+X[5]]*j[5],K+=U[z+X[6]]*W[6],Q+=U[z+X[6]]*j[6],K+=U[z+X[7]]*W[7],Q+=U[z+X[7]]*j[7],K+=U[z+X[8]]*W[8],Q+=U[z+X[8]]*j[8];const oe=L*K+k*Q,le=ne(M+oe*B),V=z*4;if(T){const Z=le-M;h[V]=ne(H[V]+Z),h[V+1]=ne(H[V+1]+Z),h[V+2]=ne(H[V+2]+Z),h[V+3]=H[V+3]}else h[V]=h[V+1]=h[V+2]=le,h[V+3]=H[V+3]}for(let $=0;$<g;$++){let q=$*4,z=((v-1)*g+$)*4;h[q]=H[q],h[q+1]=H[q+1],h[q+2]=H[q+2],h[q+3]=H[q+3],h[z]=H[z],h[z+1]=H[z+1],h[z+2]=H[z+2],h[z+3]=H[z+3]}for(let $=1;$<v-1;$++){let q=$*g*4,z=($*g+(g-1))*4;h[q]=H[q],h[q+1]=H[q+1],h[q+2]=H[q+2],h[q+3]=H[q+3],h[z]=H[z],h[z+1]=H[z+1],h[z+2]=H[z+2],h[z+3]=H[z+3]}return t};Y.addGetterSetter(Oe,"embossStrength",.5,Me(),Y.afterSetFilter);Y.addGetterSetter(Oe,"embossWhiteLevel",.5,Me(),Y.afterSetFilter);Y.addGetterSetter(Oe,"embossDirection","top-left",void 0,Y.afterSetFilter);Y.addGetterSetter(Oe,"embossBlend",!1,void 0,Y.afterSetFilter);function lT(t,e,n,i,r){const s=n-e,a=r-i;if(s===0)return i+a/2;if(a===0)return i;let o=(t-e)/s;return o=a*o+i,o}const hpe=function(t){const e=t.data,n=e.length;let i=e[0],r=i,s,a=e[1],o=a,l,u=e[2],h=u,g;const v=this.enhance();if(v===0)return;for(let M=0;M<n;M+=4)s=e[M+0],s<i?i=s:s>r&&(r=s),l=e[M+1],l<a?a=l:l>o&&(o=l),g=e[M+2],g<u?u=g:g>h&&(h=g);r===i&&(r=255,i=0),o===a&&(o=255,a=0),h===u&&(h=255,u=0);let y,w,S,x,T,_;if(v>0)y=r+v*(255-r),w=i-v*(i-0),S=o+v*(255-o),x=a-v*(a-0),T=h+v*(255-h),_=u-v*(u-0);else{const M=(r+i)*.5;y=r+v*(r-M),w=i+v*(i-M);const F=(o+a)*.5;S=o+v*(o-F),x=a+v*(a-F);const L=(h+u)*.5;T=h+v*(h-L),_=u+v*(u-L)}for(let M=0;M<n;M+=4)e[M+0]=lT(e[M+0],i,r,w,y),e[M+1]=lT(e[M+1],a,o,x,S),e[M+2]=lT(e[M+2],u,h,_,T)};Y.addGetterSetter(Oe,"enhance",0,Me(),Y.afterSetFilter);const dpe=function(t){const e=t.data,n=e.length;for(let i=0;i<n;i+=4){const r=.34*e[i]+.5*e[i+1]+.16*e[i+2];e[i]=r,e[i+1]=r,e[i+2]=r}};Y.addGetterSetter(Oe,"hue",0,Me(),Y.afterSetFilter);Y.addGetterSetter(Oe,"saturation",0,Me(),Y.afterSetFilter);Y.addGetterSetter(Oe,"luminance",0,Me(),Y.afterSetFilter);const fpe=function(t){const e=t.data,n=e.length,i=1,r=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,a=this.luminance()*127,o=i*r*Math.cos(s*Math.PI/180),l=i*r*Math.sin(s*Math.PI/180),u=.299*i+.701*o+.167*l,h=.587*i-.587*o+.33*l,g=.114*i-.114*o-.497*l,v=.299*i-.299*o-.328*l,y=.587*i+.413*o+.035*l,w=.114*i-.114*o+.293*l,S=.299*i-.3*o+1.25*l,x=.587*i-.586*o-1.05*l,T=.114*i+.886*o-.2*l;let _,M,F,L;for(let k=0;k<n;k+=4)_=e[k+0],M=e[k+1],F=e[k+2],L=e[k+3],e[k+0]=u*_+h*M+g*F+a,e[k+1]=v*_+y*M+w*F+a,e[k+2]=S*_+x*M+T*F+a,e[k+3]=L},gpe=function(t){const e=t.data,n=e.length,i=Math.pow(2,this.value()),r=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,a=i*r*Math.cos(s*Math.PI/180),o=i*r*Math.sin(s*Math.PI/180),l=.299*i+.701*a+.167*o,u=.587*i-.587*a+.33*o,h=.114*i-.114*a-.497*o,g=.299*i-.299*a-.328*o,v=.587*i+.413*a+.035*o,y=.114*i-.114*a+.293*o,w=.299*i-.3*a+1.25*o,S=.587*i-.586*a-1.05*o,x=.114*i+.886*a-.2*o;for(let T=0;T<n;T+=4){const _=e[T+0],M=e[T+1],F=e[T+2],L=e[T+3];e[T+0]=l*_+u*M+h*F,e[T+1]=g*_+v*M+y*F,e[T+2]=w*_+S*M+x*F,e[T+3]=L}};Y.addGetterSetter(Oe,"hue",0,Me(),Y.afterSetFilter);Y.addGetterSetter(Oe,"saturation",0,Me(),Y.afterSetFilter);Y.addGetterSetter(Oe,"value",0,Me(),Y.afterSetFilter);const ppe=function(t){const e=t.data,n=e.length;for(let i=0;i<n;i+=4)e[i]=255-e[i],e[i+1]=255-e[i+1],e[i+2]=255-e[i+2]},mpe=function(t,e,n){const i=t.data,r=e.data,s=t.width,a=t.height,o=n.polarCenterX||s/2,l=n.polarCenterY||a/2;let u=Math.sqrt(o*o+l*l),h=s-o,g=a-l;const v=Math.sqrt(h*h+g*g);u=v>u?v:u;const y=a,w=s,S=360/w*Math.PI/180;for(let x=0;x<w;x+=1){const T=Math.sin(x*S),_=Math.cos(x*S);for(let M=0;M<y;M+=1){h=Math.floor(o+u*M/y*_),g=Math.floor(l+u*M/y*T);let F=(g*s+h)*4;const L=i[F+0],k=i[F+1],B=i[F+2],H=i[F+3];F=(x+M*s)*4,r[F+0]=L,r[F+1]=k,r[F+2]=B,r[F+3]=H}}},vpe=function(t,e,n){const i=t.data,r=e.data,s=t.width,a=t.height,o=n.polarCenterX||s/2,l=n.polarCenterY||a/2;let u=Math.sqrt(o*o+l*l),h=s-o,g=a-l;const v=Math.sqrt(h*h+g*g);u=v>u?v:u;const y=a,w=s,S=0;let x,T;for(h=0;h<s;h+=1)for(g=0;g<a;g+=1){const _=h-o,M=g-l,F=Math.sqrt(_*_+M*M)*y/u;let L=(Math.atan2(M,_)*180/Math.PI+360+S)%360;L=L*w/360,x=Math.floor(L),T=Math.floor(F);let k=(T*s+x)*4;const B=i[k+0],H=i[k+1],U=i[k+2],W=i[k+3];k=(g*s+h)*4,r[k+0]=B,r[k+1]=H,r[k+2]=U,r[k+3]=W}},ype=function(t){const e=t.width,n=t.height;let i,r,s,a,o,l,u,h,g,v,y=Math.round(this.kaleidoscopePower());const w=Math.round(this.kaleidoscopeAngle()),S=Math.floor(e*(w%360)/360);if(y<1)return;const x=re.createCanvasElement();x.width=e,x.height=n;const T=x.getContext("2d").getImageData(0,0,e,n);re.releaseCanvas(x),mpe(t,T,{polarCenterX:e/2,polarCenterY:n/2});let _=e/Math.pow(2,y);for(;_<=8;)_=_*2,y-=1;_=Math.ceil(_);let M=_,F=0,L=M,k=1;for(S+_>e&&(F=M,L=0,k=-1),r=0;r<n;r+=1)for(i=F;i!==L;i+=k)s=Math.round(i+S)%e,g=(e*r+s)*4,o=T.data[g+0],l=T.data[g+1],u=T.data[g+2],h=T.data[g+3],v=(e*r+i)*4,T.data[v+0]=o,T.data[v+1]=l,T.data[v+2]=u,T.data[v+3]=h;for(r=0;r<n;r+=1)for(M=Math.floor(_),a=0;a<y;a+=1){for(i=0;i<M+1;i+=1)g=(e*r+i)*4,o=T.data[g+0],l=T.data[g+1],u=T.data[g+2],h=T.data[g+3],v=(e*r+M*2-i-1)*4,T.data[v+0]=o,T.data[v+1]=l,T.data[v+2]=u,T.data[v+3]=h;M*=2}vpe(T,t,{})};Y.addGetterSetter(Oe,"kaleidoscopePower",2,Me(),Y.afterSetFilter);Y.addGetterSetter(Oe,"kaleidoscopeAngle",0,Me(),Y.afterSetFilter);function I1(t,e,n){let i=(n*t.width+e)*4;const r=[];return r.push(t.data[i++],t.data[i++],t.data[i++],t.data[i++]),r}function y0(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}function Cpe(t){const e=[0,0,0];for(let n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1],e[2]+=t[n][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}function bpe(t,e){const n=I1(t,0,0),i=I1(t,t.width-1,0),r=I1(t,0,t.height-1),s=I1(t,t.width-1,t.height-1),a=e||10;if(y0(n,i)<a&&y0(i,s)<a&&y0(s,r)<a&&y0(r,n)<a){const o=Cpe([i,n,s,r]),l=[];for(let u=0;u<t.width*t.height;u++){const h=y0(o,[t.data[u*4],t.data[u*4+1],t.data[u*4+2]]);l[u]=h<a?0:255}return l}}function wpe(t,e){for(let n=0;n<t.width*t.height;n++)t.data[4*n+3]=e[n]}function Spe(t,e,n){const i=[1,1,1,1,0,1,1,1,1],r=Math.round(Math.sqrt(i.length)),s=Math.floor(r/2),a=[];for(let o=0;o<n;o++)for(let l=0;l<e;l++){const u=o*e+l;let h=0;for(let g=0;g<r;g++)for(let v=0;v<r;v++){const y=o+g-s,w=l+v-s;if(y>=0&&y<n&&w>=0&&w<e){const S=y*e+w,x=i[g*r+v];h+=t[S]*x}}a[u]=h===2040?255:0}return a}function xpe(t,e,n){const i=[1,1,1,1,1,1,1,1,1],r=Math.round(Math.sqrt(i.length)),s=Math.floor(r/2),a=[];for(let o=0;o<n;o++)for(let l=0;l<e;l++){const u=o*e+l;let h=0;for(let g=0;g<r;g++)for(let v=0;v<r;v++){const y=o+g-s,w=l+v-s;if(y>=0&&y<n&&w>=0&&w<e){const S=y*e+w,x=i[g*r+v];h+=t[S]*x}}a[u]=h>=1020?255:0}return a}function Ape(t,e,n){const i=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],r=Math.round(Math.sqrt(i.length)),s=Math.floor(r/2),a=[];for(let o=0;o<n;o++)for(let l=0;l<e;l++){const u=o*e+l;let h=0;for(let g=0;g<r;g++)for(let v=0;v<r;v++){const y=o+g-s,w=l+v-s;if(y>=0&&y<n&&w>=0&&w<e){const S=y*e+w,x=i[g*r+v];h+=t[S]*x}}a[u]=h}return a}const Epe=function(t){const e=this.threshold();let n=bpe(t,e);return n&&(n=Spe(n,t.width,t.height),n=xpe(n,t.width,t.height),n=Ape(n,t.width,t.height),wpe(t,n)),t};Y.addGetterSetter(Oe,"threshold",0,Me(),Y.afterSetFilter);const Tpe=function(t){const e=this.noise()*255,n=t.data,i=n.length,r=e/2;for(let s=0;s<i;s+=4)n[s+0]+=r-2*r*Math.random(),n[s+1]+=r-2*r*Math.random(),n[s+2]+=r-2*r*Math.random()};Y.addGetterSetter(Oe,"noise",.2,Me(),Y.afterSetFilter);const Rpe=function(t){let e=Math.ceil(this.pixelSize()),n=t.width,i=t.height,r=Math.ceil(n/e),s=Math.ceil(i/e),a=t.data;if(e<=0){re.error("pixelSize value can not be <= 0");return}for(let o=0;o<r;o+=1)for(let l=0;l<s;l+=1){let u=0,h=0,g=0,v=0;const y=o*e,w=y+e,S=l*e,x=S+e;let T=0;for(let _=y;_<w;_+=1)if(!(_>=n))for(let M=S;M<x;M+=1){if(M>=i)continue;const F=(n*M+_)*4;u+=a[F+0],h+=a[F+1],g+=a[F+2],v+=a[F+3],T+=1}u=u/T,h=h/T,g=g/T,v=v/T;for(let _=y;_<w;_+=1)if(!(_>=n))for(let M=S;M<x;M+=1){if(M>=i)continue;const F=(n*M+_)*4;a[F+0]=u,a[F+1]=h,a[F+2]=g,a[F+3]=v}}};Y.addGetterSetter(Oe,"pixelSize",8,Me(),Y.afterSetFilter);const Dpe=function(t){const e=Math.round(this.levels()*254)+1,n=t.data,i=n.length,r=255/e;for(let s=0;s<i;s+=1)n[s]=Math.floor(n[s]/r)*r};Y.addGetterSetter(Oe,"levels",.5,Me(),Y.afterSetFilter);const Mpe=function(t){const e=t.data,n=e.length,i=this.red(),r=this.green(),s=this.blue();for(let a=0;a<n;a+=4){const o=(.34*e[a]+.5*e[a+1]+.16*e[a+2])/255;e[a]=o*i,e[a+1]=o*r,e[a+2]=o*s,e[a+3]=e[a+3]}};Y.addGetterSetter(Oe,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});Y.addGetterSetter(Oe,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});Y.addGetterSetter(Oe,"blue",0,SG,Y.afterSetFilter);const _pe=function(t){const e=t.data,n=e.length,i=this.red(),r=this.green(),s=this.blue(),a=this.alpha();for(let o=0;o<n;o+=4){const l=1-a;e[o]=i*a+e[o]*l,e[o+1]=r*a+e[o+1]*l,e[o+2]=s*a+e[o+2]*l}};Y.addGetterSetter(Oe,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});Y.addGetterSetter(Oe,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});Y.addGetterSetter(Oe,"blue",0,SG,Y.afterSetFilter);Y.addGetterSetter(Oe,"alpha",1,function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t});const Ppe=function(t){const e=t.data,n=e.length;for(let i=0;i<n;i+=4){const r=e[i+0],s=e[i+1],a=e[i+2];e[i+0]=Math.min(255,r*.393+s*.769+a*.189),e[i+1]=Math.min(255,r*.349+s*.686+a*.168),e[i+2]=Math.min(255,r*.272+s*.534+a*.131)}},Ope=function(t){const n=t.data;for(let i=0;i<n.length;i+=4){const r=n[i],s=n[i+1],a=n[i+2];.2126*r+.7152*s+.0722*a>=128&&(n[i]=255-r,n[i+1]=255-s,n[i+2]=255-a)}return t},Lpe=function(t){const e=this.threshold()*255,n=t.data,i=n.length;for(let r=0;r<i;r+=1)n[r]=n[r]<e?0:255};Y.addGetterSetter(Oe,"threshold",.5,Me(),Y.afterSetFilter);nm.Util._assign(nm,{Arc:uu,Arrow:Nf,Circle:bm,Ellipse:Vh,Image:Xo,Label:D3,Tag:Bf,Line:hu,Path:Mn,Rect:lC,RegularPolygon:Uh,Ring:If,Sprite:Zl,Star:jh,Text:Ln,TextPath:ir,Transformer:Ht,Wedge:du,Filters:{Blur:ape,Brightness:lpe,Brighten:ope,Contrast:cpe,Emboss:upe,Enhance:hpe,Grayscale:dpe,HSL:fpe,HSV:gpe,Invert:ppe,Kaleidoscope:ype,Mask:Epe,Noise:Tpe,Pixelate:Rpe,Posterize:Dpe,RGB:Mpe,RGBA:_pe,Sepia:Ppe,Solarize:Ope,Threshold:Lpe}});var cT={exports:{}},uT={exports:{}};var aF;function Fpe(){return aF||(aF=1,(function(t){t.exports=function(e){function n(f,p,b,A){return new tv(f,p,b,A)}function i(){}function r(f){var p="https://react.dev/errors/"+f;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(f){var p=f,b=f;if(f.alternate)for(;p.return;)p=p.return;else{f=p;do p=f,(p.flags&4098)!==0&&(b=p.return),f=p.return;while(f)}return p.tag===3?b:null}function a(f){if(s(f)!==f)throw Error(r(188))}function o(f){var p=f.alternate;if(!p){if(p=s(f),p===null)throw Error(r(188));return p!==f?null:f}for(var b=f,A=p;;){var P=b.return;if(P===null)break;var O=P.alternate;if(O===null){if(A=P.return,A!==null){b=A;continue}break}if(P.child===O.child){for(O=P.child;O;){if(O===b)return a(P),f;if(O===A)return a(P),p;O=O.sibling}throw Error(r(188))}if(b.return!==A.return)b=P,A=O;else{for(var I=!1,ee=P.child;ee;){if(ee===b){I=!0,b=P,A=O;break}if(ee===A){I=!0,A=P,b=O;break}ee=ee.sibling}if(!I){for(ee=O.child;ee;){if(ee===b){I=!0,b=O,A=P;break}if(ee===A){I=!0,A=O,b=P;break}ee=ee.sibling}if(!I)throw Error(r(189))}}if(b.alternate!==A)throw Error(r(190))}if(b.tag!==3)throw Error(r(188));return b.stateNode.current===b?f:p}function l(f){var p=f.tag;if(p===5||p===26||p===27||p===6)return f;for(f=f.child;f!==null;){if(p=l(f),p!==null)return p;f=f.sibling}return null}function u(f){var p=f.tag;if(p===5||p===26||p===27||p===6)return f;for(f=f.child;f!==null;){if(f.tag!==4&&(p=u(f),p!==null))return p;f=f.sibling}return null}function h(f){return f===null||typeof f!="object"?null:(f=Do&&f[Do]||f["@@iterator"],typeof f=="function"?f:null)}function g(f){if(f==null)return null;if(typeof f=="function")return f.$$typeof===pl?null:f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case mc:return"Fragment";case yc:return"Profiler";case vc:return"StrictMode";case Mg:return"Suspense";case Ro:return"SuspenseList";case bd:return"Activity"}if(typeof f=="object")switch(f.$$typeof){case pc:return"Portal";case As:return f.displayName||"Context";case Cd:return(f._context.displayName||"Context")+".Consumer";case ju:var p=f.render;return f=f.displayName,f||(f=p.displayName||p.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case _g:return p=f.displayName||null,p!==null?p:g(f.type)||"Memo";case br:p=f._payload,f=f._init;try{return g(f(p))}catch{}}return null}function v(f){return{current:f}}function y(f){0>xc||(f.current=Ug[xc],Ug[xc]=null,xc--)}function w(f,p){xc++,Ug[xc]=f.current,f.current=p}function S(f){return f>>>=0,f===0?32:31-(jg(f)/Vb|0)|0}function x(f){var p=f&42;if(p!==0)return p;switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return f&261888;case 262144:case 524288:case 1048576:case 2097152:return f&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return f&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return f}}function T(f,p,b){var A=f.pendingLanes;if(A===0)return 0;var P=0,O=f.suspendedLanes,I=f.pingedLanes;f=f.warmLanes;var ee=A&134217727;return ee!==0?(A=ee&~O,A!==0?P=x(A):(I&=ee,I!==0?P=x(I):b||(b=ee&~f,b!==0&&(P=x(b))))):(ee=A&~O,ee!==0?P=x(ee):I!==0?P=x(I):b||(b=A&~f,b!==0&&(P=x(b)))),P===0?0:p!==0&&p!==P&&(p&O)===0&&(O=P&-P,b=p&-p,O>=b||O===32&&(b&4194048)!==0)?p:P}function _(f,p){return(f.pendingLanes&~(f.suspendedLanes&~f.pingedLanes)&p)===0}function M(f,p){switch(f){case 1:case 2:case 4:case 8:case 64:return p+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function F(){var f=Zu;return Zu<<=1,(Zu&62914560)===0&&(Zu=4194304),f}function L(f){for(var p=[],b=0;31>b;b++)p.push(f);return p}function k(f,p){f.pendingLanes|=p,p!==268435456&&(f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0)}function B(f,p,b,A,P,O){var I=f.pendingLanes;f.pendingLanes=b,f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0,f.expiredLanes&=b,f.entangledLanes&=b,f.errorRecoveryDisabledLanes&=b,f.shellSuspendCounter=0;var ee=f.entanglements,ge=f.expirationTimes,Ae=f.hiddenUpdates;for(b=I&~b;0<b;){var _e=31-Ur(b),Te=1<<_e;ee[_e]=0,ge[_e]=-1;var Ne=Ae[_e];if(Ne!==null)for(Ae[_e]=null,_e=0;_e<Ne.length;_e++){var lt=Ne[_e];lt!==null&&(lt.lane&=-536870913)}b&=~Te}A!==0&&H(f,A,0),O!==0&&P===0&&f.tag!==0&&(f.suspendedLanes|=O&~(I&~p))}function H(f,p,b){f.pendingLanes|=p,f.suspendedLanes&=~p;var A=31-Ur(p);f.entangledLanes|=p,f.entanglements[A]=f.entanglements[A]|1073741824|b&261930}function U(f,p){var b=f.entangledLanes|=p;for(f=f.entanglements;b;){var A=31-Ur(b),P=1<<A;P&p|f[A]&p&&(f[A]|=p),b&=~P}}function W(f,p){var b=p&-p;return b=(b&42)!==0?1:j(b),(b&(f.suspendedLanes|p))!==0?0:b}function j(f){switch(f){case 2:f=1;break;case 8:f=4;break;case 32:f=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:f=128;break;case 268435456:f=134217728;break;default:f=0}return f}function X(f){return f&=-f,2<f?8<f?(f&134217727)!==0?32:268435456:8:2}function ne(f){if(typeof Gv=="function"&&Wb(f),jr&&typeof jr.setStrictMode=="function")try{jr.setStrictMode(Ec,f)}catch{}}function $(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}function q(f){if($g===void 0)try{throw Error()}catch(b){var p=b.stack.trim().match(/\n( *(at )?)/);$g=p&&p[1]||"",_a=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$g+f+_a}function z(f,p){if(!f||Md)return"";Md=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var A={DetermineComponentFrameRoot:function(){try{if(p){var Te=function(){throw Error()};if(Object.defineProperty(Te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Te,[])}catch(lt){var Ne=lt}Reflect.construct(f,[],Te)}else{try{Te.call()}catch(lt){Ne=lt}f.call(Te.prototype)}}else{try{throw Error()}catch(lt){Ne=lt}(Te=f())&&typeof Te.catch=="function"&&Te.catch(function(){})}}catch(lt){if(lt&&Ne&&typeof lt.stack=="string")return[lt.stack,Ne.stack]}return[null,null]}};A.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var P=Object.getOwnPropertyDescriptor(A.DetermineComponentFrameRoot,"name");P&&P.configurable&&Object.defineProperty(A.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=A.DetermineComponentFrameRoot(),I=O[0],ee=O[1];if(I&&ee){var ge=I.split(`
`),Ae=ee.split(`
`);for(P=A=0;A<ge.length&&!ge[A].includes("DetermineComponentFrameRoot");)A++;for(;P<Ae.length&&!Ae[P].includes("DetermineComponentFrameRoot");)P++;if(A===ge.length||P===Ae.length)for(A=ge.length-1,P=Ae.length-1;1<=A&&0<=P&&ge[A]!==Ae[P];)P--;for(;1<=A&&0<=P;A--,P--)if(ge[A]!==Ae[P]){if(A!==1||P!==1)do if(A--,P--,0>P||ge[A]!==Ae[P]){var _e=`
`+ge[A].replace(" at new "," at ");return f.displayName&&_e.includes("<anonymous>")&&(_e=_e.replace("<anonymous>",f.displayName)),_e}while(1<=A&&0<=P);break}}}finally{Md=!1,Error.prepareStackTrace=b}return(b=f?f.displayName||f.name:"")?q(b):""}function K(f,p){switch(f.tag){case 26:case 27:case 5:return q(f.type);case 16:return q("Lazy");case 13:return f.child!==p&&p!==null?q("Suspense Fallback"):q("Suspense");case 19:return q("SuspenseList");case 0:case 15:return z(f.type,!1);case 11:return z(f.type.render,!1);case 1:return z(f.type,!0);case 31:return q("Activity");default:return""}}function Q(f){try{var p="",b=null;do p+=K(f,b),b=f,f=f.return;while(f);return p}catch(A){return`
Error generating stack: `+A.message+`
`+A.stack}}function oe(f,p){if(typeof f=="object"&&f!==null){var b=zv.get(f);return b!==void 0?b:(p={value:f,source:p,stack:Q(p)},zv.set(f,p),p)}return{value:f,source:p,stack:Q(p)}}function le(f,p){Po[Pa++]=_d,Po[Pa++]=cn,cn=f,_d=p}function V(f,p,b){Rs[as++]=Yi,Rs[as++]=Xs,Rs[as++]=Ds,Ds=f;var A=Yi;f=Xs;var P=32-Ur(A)-1;A&=~(1<<P),b+=1;var O=32-Ur(p)+P;if(30<O){var I=P-P%5;O=(A&(1<<I)-1).toString(32),A>>=I,P-=I,Yi=1<<32-Ur(p)+P|b<<P|A,Xs=O+f}else Yi=1<<O|b<<P|A,Xs=f}function Z(f){f.return!==null&&(le(f,1),V(f,1,0))}function ae(f){for(;f===cn;)cn=Po[--Pa],Po[Pa]=null,_d=Po[--Pa],Po[Pa]=null;for(;f===Ds;)Ds=Rs[--as],Rs[as]=null,Xs=Rs[--as],Rs[as]=null,Yi=Rs[--as],Rs[as]=null}function Ee(f,p){Rs[as++]=Yi,Rs[as++]=Xs,Rs[as++]=Ds,Yi=p.id,Xs=p.overflow,Ds=f}function Pe(f,p){w(Xi,p),w(Oo,f),w(Li,null),f=rb(p),y(Li),w(Li,f)}function Ie(){y(Li),y(Oo),y(Xi)}function ze(f){f.memoizedState!==null&&w(Pd,f);var p=Li.current,b=Ku(p,f.type);p!==b&&(w(Oo,f),w(Li,b))}function Ot(f){Oo.current===f&&(y(Li),y(Oo)),Pd.current===f&&(y(Pd),ni?wc._currentValue=bc:wc._currentValue2=bc)}function me(f){var p=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw jt(oe(p,f)),Zg}function Be(f,p){if(!En)throw Error(r(175));_b(f.stateNode,f.type,f.memoizedProps,p,f)||me(f,!0)}function Je(f){for(Ai=f.return;Ai;)switch(Ai.tag){case 5:case 31:case 13:Sr=!1;return;case 27:case 3:Sr=!0;return;default:Ai=Ai.return}}function be(f){if(!En||f!==Ai)return!1;if(!Dt)return Je(f),Dt=!0,!1;var p=f.tag;if(xi?p!==3&&p!==27&&(p!==5||$u(f.type)&&!wr(f.type,f.memoizedProps))&&Tn&&me(f):p!==3&&(p!==5||$u(f.type)&&!wr(f.type,f.memoizedProps))&&Tn&&me(f),Je(f),p===13){if(!En)throw Error(r(316));if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));Tn=Mv(f)}else if(p===31){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));Tn=Ob(f)}else Tn=xi&&p===27?Sb(f.type,Tn):Ai?wb(f.stateNode):null;return!0}function wt(){En&&(Tn=Ai=null,Dt=!1)}function nt(){var f=Oa;return f!==null&&(qr===null?qr=f:qr.push.apply(qr,f),Oa=null),f}function jt(f){Oa===null?Oa=[f]:Oa.push(f)}function $t(f,p,b){ni?(w(Ms,p._currentValue),p._currentValue=b):(w(Ms,p._currentValue2),p._currentValue2=b)}function Ke(f){var p=Ms.current;ni?f._currentValue=p:f._currentValue2=p,y(Ms)}function Lt(f,p,b){for(;f!==null;){var A=f.alternate;if((f.childLanes&p)!==p?(f.childLanes|=p,A!==null&&(A.childLanes|=p)):A!==null&&(A.childLanes&p)!==p&&(A.childLanes|=p),f===b)break;f=f.return}}function Nn(f,p,b,A){var P=f.child;for(P!==null&&(P.return=f);P!==null;){var O=P.dependencies;if(O!==null){var I=P.child;O=O.firstContext;e:for(;O!==null;){var ee=O;O=P;for(var ge=0;ge<p.length;ge++)if(ee.context===p[ge]){O.lanes|=b,ee=O.alternate,ee!==null&&(ee.lanes|=b),Lt(O.return,b,f),A||(I=null);break e}O=ee.next}}else if(P.tag===18){if(I=P.return,I===null)throw Error(r(341));I.lanes|=b,O=I.alternate,O!==null&&(O.lanes|=b),Lt(I,b,f),I=null}else I=P.child;if(I!==null)I.return=P;else for(I=P;I!==null;){if(I===f){I=null;break}if(P=I.sibling,P!==null){P.return=I.return,I=P;break}I=I.return}P=I}}function Zt(f,p,b,A){f=null;for(var P=p,O=!1;P!==null;){if(!O){if((P.flags&524288)!==0)O=!0;else if((P.flags&262144)!==0)break}if(P.tag===10){var I=P.alternate;if(I===null)throw Error(r(387));if(I=I.memoizedProps,I!==null){var ee=P.type;ri(P.pendingProps.value,I.value)||(f!==null?f.push(ee):f=[ee])}}else if(P===Pd.current){if(I=P.alternate,I===null)throw Error(r(387));I.memoizedState.memoizedState!==P.memoizedState.memoizedState&&(f!==null?f.push(wc):f=[wc])}P=P.return}f!==null&&Nn(p,f,b,A),p.flags|=262144}function Ye(f){for(f=f.firstContext;f!==null;){var p=f.context;if(!ri(ni?p._currentValue:p._currentValue2,f.memoizedValue))return!0;f=f.next}return!1}function Wt(f){gn=f,$s=null,f=f.dependencies,f!==null&&(f.firstContext=null)}function Vt(f){return qi(gn,f)}function un(f,p){return gn===null&&Wt(f),qi(f,p)}function qi(f,p){var b=ni?p._currentValue:p._currentValue2;if(p={context:p,memoizedValue:b,next:null},$s===null){if(f===null)throw Error(r(308));$s=p,f.dependencies={lanes:0,firstContext:p},f.flags|=524288}else $s=$s.next=p;return b}function fa(){return{controller:new qb,data:new Map,refCount:0}}function fo(f){f.refCount--,f.refCount===0&&Fi(Mx,function(){f.controller.abort()})}function qt(){}function Sn(f){f!==Qt&&f.next===null&&(Qt===null?Od=Qt=f:Qt=Qt.next=f),_s=!0,cr||(cr=!0,Qr())}function go(f,p){if(!Qg&&_s){Qg=!0;do for(var b=!1,A=Od;A!==null;){if(f!==0){var P=A.pendingLanes;if(P===0)var O=0;else{var I=A.suspendedLanes,ee=A.pingedLanes;O=(1<<31-Ur(42|f)+1)-1,O&=P&~(I&~ee),O=O&201326741?O&201326741|1:O?O|2:0}O!==0&&(b=!0,po(A,O))}else O=Mt,O=T(A,A===yt?O:0,A.cancelPendingCommit!==null||A.timeoutHandle!==Vr),(O&3)===0||_(A,O)||(b=!0,po(A,O));A=A.next}while(b);Qg=!1}}function wC(){SC()}function SC(){_s=cr=!1;var f=0;bl!==0&&Cc()&&(f=bl);for(var p=lr(),b=null,A=Od;A!==null;){var P=A.next,O=gu(A,p);O===0?(A.next=null,b===null?Od=P:b.next=P,P===null&&(Qt=b)):(b=A,(f!==0||(O&3)!==0)&&(_s=!0)),A=P}Ci!==0&&Ci!==5||go(f),bl!==0&&(bl=0)}function gu(f,p){for(var b=f.suspendedLanes,A=f.pingedLanes,P=f.expirationTimes,O=f.pendingLanes&-62914561;0<O;){var I=31-Ur(O),ee=1<<I,ge=P[I];ge===-1?((ee&b)===0||(ee&A)!==0)&&(P[I]=M(ee,p)):ge<=p&&(f.expiredLanes|=ee),O&=~ee}if(p=yt,b=Mt,b=T(f,f===p?b:0,f.cancelPendingCommit!==null||f.timeoutHandle!==Vr),A=f.callbackNode,b===0||f===p&&(en===2||en===9)||f.cancelPendingCommit!==null)return A!==null&&A!==null&&qg(A),f.callbackNode=null,f.callbackPriority=0;if((b&3)===0||_(f,b)){if(p=b&-b,p===f.callbackPriority)return p;switch(A!==null&&qg(A),X(b)){case 2:case 8:b=jb;break;case 32:b=Dd;break;case 268435456:b=Yg;break;default:b=Dd}return A=Br.bind(null,f),b=Rd(b,A),f.callbackPriority=p,f.callbackNode=b,p}return A!==null&&A!==null&&qg(A),f.callbackPriority=2,f.callbackNode=null,2}function Br(f,p){if(Ci!==0&&Ci!==5)return f.callbackNode=null,f.callbackPriority=0,null;var b=f.callbackNode;if(Ra()&&f.callbackNode!==b)return null;var A=Mt;return A=T(f,f===yt?A:0,f.cancelPendingCommit!==null||f.timeoutHandle!==Vr),A===0?null:(Ys(f,A,p),gu(f,lr()),f.callbackNode!=null&&f.callbackNode===b?Br.bind(null,f):null)}function po(f,p){if(Ra())return null;Ys(f,p,!0)}function Qr(){fv?gv(function(){(St&6)!==0?Rd(Kg,wC):SC()}):Rd(Kg,wC)}function Em(){if(bl===0){var f=Lo;f===0&&(f=Wg,Wg<<=1,(Wg&261888)===0&&(Wg=256)),bl=f}return bl}function vx(f,p){if(Qu===null){var b=Qu=[];Vv=0,Lo=Em(),Ei={status:"pending",value:void 0,then:function(A){b.push(A)}}}return Vv++,p.then(xC,xC),p}function xC(){if(--Vv===0&&Qu!==null){Ei!==null&&(Ei.status="fulfilled");var f=Qu;Qu=null,Lo=0,Ei=null;for(var p=0;p<f.length;p++)(0,f[p])()}}function Uf(f,p){var b=[],A={status:"pending",value:null,reason:null,then:function(P){b.push(P)}};return f.then(function(){A.status="fulfilled",A.value=p;for(var P=0;P<b.length;P++)(0,b[P])(p)},function(P){for(A.status="rejected",A.reason=P,P=0;P<b.length;P++)(0,b[P])(void 0)}),A}function pu(){var f=wl.current;return f!==null?f:yt.pooledCache}function Jl(f,p){p===null?w(wl,wl.current):w(wl,p.pool)}function $o(){var f=pu();return f===null?null:{parent:ni?Rn._currentValue:Rn._currentValue2,pool:f}}function ec(f,p){if(ri(f,p))return!0;if(typeof f!="object"||f===null||typeof p!="object"||p===null)return!1;var b=Object.keys(f),A=Object.keys(p);if(b.length!==A.length)return!1;for(A=0;A<b.length;A++){var P=b[A];if(!Dx.call(p,P)||!ri(f[P],p[P]))return!1}return!0}function mu(f){return f=f.status,f==="fulfilled"||f==="rejected"}function AC(f,p,b){switch(b=f[b],b===void 0?f.push(p):b!==p&&(p.then(qt,qt),p=b),p.status){case"fulfilled":return p.value;case"rejected":throw f=p.reason,vu(f),f;default:if(typeof p.status=="string")p.then(qt,qt);else{if(f=yt,f!==null&&100<f.shellSuspendCounter)throw Error(r(482));f=p,f.status="pending",f.then(function(A){if(p.status==="pending"){var P=p;P.status="fulfilled",P.value=A}},function(A){if(p.status==="pending"){var P=p;P.status="rejected",P.reason=A}})}switch(p.status){case"fulfilled":return p.value;case"rejected":throw f=p.reason,vu(f),f}throw xr=p,Ti}}function Zo(f){try{var p=f._init;return p(f._payload)}catch(b){throw b!==null&&typeof b=="object"&&typeof b.then=="function"?(xr=b,Ti):b}}function jf(){if(xr===null)throw Error(r(459));var f=xr;return xr=null,f}function vu(f){if(f===Ti||f===Os)throw Error(r(483))}function Wf(f){var p=Tc;return Tc+=1,Sl===null&&(Sl=[]),AC(Sl,f,p)}function yu(f,p){p=p.props.ref,f.ref=p!==void 0?p:null}function Xh(f,p){throw p.$$typeof===gc?Error(r(525)):(f=Object.prototype.toString.call(p),Error(r(31,f==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":f)))}function Tm(f){function p(he,se){if(f){var fe=he.deletions;fe===null?(he.deletions=[se],he.flags|=16):fe.push(se)}}function b(he,se){if(!f)return null;for(;se!==null;)p(he,se),se=se.sibling;return null}function A(he){for(var se=new Map;he!==null;)he.key!==null?se.set(he.key,he):se.set(he.index,he),he=he.sibling;return se}function P(he,se){return he=rs(he,se),he.index=0,he.sibling=null,he}function O(he,se,fe){return he.index=fe,f?(fe=he.alternate,fe!==null?(fe=fe.index,fe<se?(he.flags|=67108866,se):fe):(he.flags|=67108866,se)):(he.flags|=1048576,se)}function I(he){return f&&he.alternate===null&&(he.flags|=67108866),he}function ee(he,se,fe,De){return se===null||se.tag!==6?(se=nv(fe,he.mode,De),se.return=he,se):(se=P(se,fe),se.return=he,se)}function ge(he,se,fe,De){var Qe=fe.type;return Qe===mc?_e(he,se,fe.props.children,De,fe.key):se!==null&&(se.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===br&&Zo(Qe)===se.type)?(se=P(se,fe.props),yu(se,fe),se.return=he,se):(se=To(fe.type,fe.key,fe.props,null,he.mode,De),yu(se,fe),se.return=he,se)}function Ae(he,se,fe,De){return se===null||se.tag!==4||se.stateNode.containerInfo!==fe.containerInfo||se.stateNode.implementation!==fe.implementation?(se=rv(fe,he.mode,De),se.return=he,se):(se=P(se,fe.children||[]),se.return=he,se)}function _e(he,se,fe,De,Qe){return se===null||se.tag!==7?(se=xs(fe,he.mode,De,Qe),se.return=he,se):(se=P(se,fe),se.return=he,se)}function Te(he,se,fe){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return se=nv(""+se,he.mode,fe),se.return=he,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case Da:return fe=To(se.type,se.key,se.props,null,he.mode,fe),yu(fe,se),fe.return=he,fe;case pc:return se=rv(se,he.mode,fe),se.return=he,se;case br:return se=Zo(se),Te(he,se,fe)}if(ml(se)||h(se))return se=xs(se,he.mode,fe,null),se.return=he,se;if(typeof se.then=="function")return Te(he,Wf(se),fe);if(se.$$typeof===As)return Te(he,un(he,se),fe);Xh(he,se)}return null}function Ne(he,se,fe,De){var Qe=se!==null?se.key:null;if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return Qe!==null?null:ee(he,se,""+fe,De);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case Da:return fe.key===Qe?ge(he,se,fe,De):null;case pc:return fe.key===Qe?Ae(he,se,fe,De):null;case br:return fe=Zo(fe),Ne(he,se,fe,De)}if(ml(fe)||h(fe))return Qe!==null?null:_e(he,se,fe,De,null);if(typeof fe.then=="function")return Ne(he,se,Wf(fe),De);if(fe.$$typeof===As)return Ne(he,se,un(he,fe),De);Xh(he,fe)}return null}function lt(he,se,fe,De,Qe){if(typeof De=="string"&&De!==""||typeof De=="number"||typeof De=="bigint")return he=he.get(fe)||null,ee(se,he,""+De,Qe);if(typeof De=="object"&&De!==null){switch(De.$$typeof){case Da:return he=he.get(De.key===null?fe:De.key)||null,ge(se,he,De,Qe);case pc:return he=he.get(De.key===null?fe:De.key)||null,Ae(se,he,De,Qe);case br:return De=Zo(De),lt(he,se,fe,De,Qe)}if(ml(De)||h(De))return he=he.get(fe)||null,_e(se,he,De,Qe,null);if(typeof De.then=="function")return lt(he,se,fe,Wf(De),Qe);if(De.$$typeof===As)return lt(he,se,fe,un(se,De),Qe);Xh(se,De)}return null}function ki(he,se,fe,De){for(var Qe=null,jn=null,et=se,Bt=se=0,Ni=null;et!==null&&Bt<fe.length;Bt++){et.index>Bt?(Ni=et,et=null):Ni=et.sibling;var Ut=Ne(he,et,fe[Bt],De);if(Ut===null){et===null&&(et=Ni);break}f&&et&&Ut.alternate===null&&p(he,et),se=O(Ut,se,Bt),jn===null?Qe=Ut:jn.sibling=Ut,jn=Ut,et=Ni}if(Bt===fe.length)return b(he,et),Dt&&le(he,Bt),Qe;if(et===null){for(;Bt<fe.length;Bt++)et=Te(he,fe[Bt],De),et!==null&&(se=O(et,se,Bt),jn===null?Qe=et:jn.sibling=et,jn=et);return Dt&&le(he,Bt),Qe}for(et=A(et);Bt<fe.length;Bt++)Ni=lt(et,he,Bt,fe[Bt],De),Ni!==null&&(f&&Ni.alternate!==null&&et.delete(Ni.key===null?Bt:Ni.key),se=O(Ni,se,Bt),jn===null?Qe=Ni:jn.sibling=Ni,jn=Ni);return f&&et.forEach(function(ks){return p(he,ks)}),Dt&&le(he,Bt),Qe}function ah(he,se,fe,De){if(fe==null)throw Error(r(151));for(var Qe=null,jn=null,et=se,Bt=se=0,Ni=null,Ut=fe.next();et!==null&&!Ut.done;Bt++,Ut=fe.next()){et.index>Bt?(Ni=et,et=null):Ni=et.sibling;var ks=Ne(he,et,Ut.value,De);if(ks===null){et===null&&(et=Ni);break}f&&et&&ks.alternate===null&&p(he,et),se=O(ks,se,Bt),jn===null?Qe=ks:jn.sibling=ks,jn=ks,et=Ni}if(Ut.done)return b(he,et),Dt&&le(he,Bt),Qe;if(et===null){for(;!Ut.done;Bt++,Ut=fe.next())Ut=Te(he,Ut.value,De),Ut!==null&&(se=O(Ut,se,Bt),jn===null?Qe=Ut:jn.sibling=Ut,jn=Ut);return Dt&&le(he,Bt),Qe}for(et=A(et);!Ut.done;Bt++,Ut=fe.next())Ut=lt(et,he,Bt,Ut.value,De),Ut!==null&&(f&&Ut.alternate!==null&&et.delete(Ut.key===null?Bt:Ut.key),se=O(Ut,se,Bt),jn===null?Qe=Ut:jn.sibling=Ut,jn=Ut);return f&&et.forEach(function(_x){return p(he,_x)}),Dt&&le(he,Bt),Qe}function _l(he,se,fe,De){if(typeof fe=="object"&&fe!==null&&fe.type===mc&&fe.key===null&&(fe=fe.props.children),typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case Da:e:{for(var Qe=fe.key;se!==null;){if(se.key===Qe){if(Qe=fe.type,Qe===mc){if(se.tag===7){b(he,se.sibling),De=P(se,fe.props.children),De.return=he,he=De;break e}}else if(se.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===br&&Zo(Qe)===se.type){b(he,se.sibling),De=P(se,fe.props),yu(De,fe),De.return=he,he=De;break e}b(he,se);break}else p(he,se);se=se.sibling}fe.type===mc?(De=xs(fe.props.children,he.mode,De,fe.key),De.return=he,he=De):(De=To(fe.type,fe.key,fe.props,null,he.mode,De),yu(De,fe),De.return=he,he=De)}return I(he);case pc:e:{for(Qe=fe.key;se!==null;){if(se.key===Qe)if(se.tag===4&&se.stateNode.containerInfo===fe.containerInfo&&se.stateNode.implementation===fe.implementation){b(he,se.sibling),De=P(se,fe.children||[]),De.return=he,he=De;break e}else{b(he,se);break}else p(he,se);se=se.sibling}De=rv(fe,he.mode,De),De.return=he,he=De}return I(he);case br:return fe=Zo(fe),_l(he,se,fe,De)}if(ml(fe))return ki(he,se,fe,De);if(h(fe)){if(Qe=h(fe),typeof Qe!="function")throw Error(r(150));return fe=Qe.call(fe),ah(he,se,fe,De)}if(typeof fe.then=="function")return _l(he,se,Wf(fe),De);if(fe.$$typeof===As)return _l(he,se,un(he,fe),De);Xh(he,fe)}return typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint"?(fe=""+fe,se!==null&&se.tag===6?(b(he,se.sibling),De=P(se,fe),De.return=he,he=De):(b(he,se),De=nv(fe,he.mode,De),De.return=he,he=De),I(he)):b(he,se)}return function(he,se,fe,De){try{Tc=0;var Qe=_l(he,se,fe,De);return Sl=null,Qe}catch(et){if(et===Ti||et===Os)throw et;var jn=n(29,et,null,he.mode);return jn.lanes=De,jn.return=he,jn}finally{}}}function Cu(){for(var f=Fa,p=Rc=Fa=0;p<f;){var b=Zi[p];Zi[p++]=null;var A=Zi[p];Zi[p++]=null;var P=Zi[p];Zi[p++]=null;var O=Zi[p];if(Zi[p++]=null,A!==null&&P!==null){var I=A.pending;I===null?P.next=P:(P.next=I.next,I.next=P),A.pending=P}O!==0&&mo(b,P,O)}}function bu(f,p,b,A){Zi[Fa++]=f,Zi[Fa++]=p,Zi[Fa++]=b,Zi[Fa++]=A,Rc|=A,f.lanes|=A,f=f.alternate,f!==null&&(f.lanes|=A)}function qf(f,p,b,A){return bu(f,p,b,A),gi(f)}function Qo(f,p){return bu(f,null,null,p),gi(f)}function mo(f,p,b){f.lanes|=b;var A=f.alternate;A!==null&&(A.lanes|=b);for(var P=!1,O=f.return;O!==null;)O.childLanes|=b,A=O.alternate,A!==null&&(A.childLanes|=b),O.tag===22&&(f=O.stateNode,f===null||f._visibility&1||(P=!0)),f=O,O=O.return;return f.tag===3?(O=f.stateNode,P&&p!==null&&(P=31-Ur(b),f=O.hiddenUpdates,A=f[P],A===null?f[P]=[p]:A.push(p),p.lane=b|536870912),O):null}function gi(f){if(50<Gt)throw Gt=0,Id=null,Error(r(185));for(var p=f.return;p!==null;)f=p,p=f.return;return f.tag===3?f.stateNode:null}function rr(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jo(f,p){f=f.updateQueue,p.updateQueue===f&&(p.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,callbacks:null})}function ga(f){return{lane:f,tag:0,payload:null,callback:null,next:null}}function el(f,p,b){var A=f.updateQueue;if(A===null)return null;if(A=A.shared,(St&2)!==0){var P=A.pending;return P===null?p.next=p:(p.next=P.next,P.next=p),A.pending=p,p=gi(f),mo(f,null,b),p}return bu(f,A,p,b),gi(f)}function $h(f,p,b){if(p=p.updateQueue,p!==null&&(p=p.shared,(b&4194048)!==0)){var A=p.lanes;A&=f.pendingLanes,b|=A,p.lanes=b,U(f,b)}}function Kf(f,p){var b=f.updateQueue,A=f.alternate;if(A!==null&&(A=A.updateQueue,b===A)){var P=null,O=null;if(b=b.firstBaseUpdate,b!==null){do{var I={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};O===null?P=O=I:O=O.next=I,b=b.next}while(b!==null);O===null?P=O=p:O=O.next=p}else P=O=p;b={baseState:A.baseState,firstBaseUpdate:P,lastBaseUpdate:O,shared:A.shared,callbacks:A.callbacks},f.updateQueue=b;return}f=b.lastBaseUpdate,f===null?b.firstBaseUpdate=p:f.next=p,b.lastBaseUpdate=p}function vo(){if(ep){var f=Ei;if(f!==null)throw f}}function tc(f,p,b,A){ep=!1;var P=f.updateQueue;os=!1;var O=P.firstBaseUpdate,I=P.lastBaseUpdate,ee=P.shared.pending;if(ee!==null){P.shared.pending=null;var ge=ee,Ae=ge.next;ge.next=null,I===null?O=Ae:I.next=Ae,I=ge;var _e=f.alternate;_e!==null&&(_e=_e.updateQueue,ee=_e.lastBaseUpdate,ee!==I&&(ee===null?_e.firstBaseUpdate=Ae:ee.next=Ae,_e.lastBaseUpdate=ge))}if(O!==null){var Te=P.baseState;I=0,_e=Ae=ge=null,ee=O;do{var Ne=ee.lane&-536870913,lt=Ne!==ee.lane;if(lt?(Mt&Ne)===Ne:(A&Ne)===Ne){Ne!==0&&Ne===Lo&&(ep=!0),_e!==null&&(_e=_e.next={lane:0,tag:ee.tag,payload:ee.payload,callback:null,next:null});e:{var ki=f,ah=ee;Ne=p;var _l=b;switch(ah.tag){case 1:if(ki=ah.payload,typeof ki=="function"){Te=ki.call(_l,Te,Ne);break e}Te=ki;break e;case 3:ki.flags=ki.flags&-65537|128;case 0:if(ki=ah.payload,Ne=typeof ki=="function"?ki.call(_l,Te,Ne):ki,Ne==null)break e;Te=Dg({},Te,Ne);break e;case 2:os=!0}}Ne=ee.callback,Ne!==null&&(f.flags|=64,lt&&(f.flags|=8192),lt=P.callbacks,lt===null?P.callbacks=[Ne]:lt.push(Ne))}else lt={lane:Ne,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null},_e===null?(Ae=_e=lt,ge=Te):_e=_e.next=lt,I|=Ne;if(ee=ee.next,ee===null){if(ee=P.shared.pending,ee===null)break;lt=ee,ee=lt.next,lt.next=null,P.lastBaseUpdate=lt,P.shared.pending=null}}while(!0);_e===null&&(ge=Te),P.baseState=ge,P.firstBaseUpdate=Ae,P.lastBaseUpdate=_e,O===null&&(P.shared.lanes=0),ko|=I,f.lanes=I,f.memoizedState=Te}}function nc(f,p){if(typeof f!="function")throw Error(r(191,f));f.call(p)}function ic(f,p){var b=f.callbacks;if(b!==null)for(f.callbacks=null,f=0;f<b.length;f++)nc(b[f],p)}function wu(f,p){f=Na,w(xl,f),w(Dc,p),Na=f|p.baseLanes}function tl(){w(xl,Na),w(Dc,Dc.current)}function pi(){Na=xl.current,y(Dc),y(xl)}function yo(f){var p=f.alternate;w(Kn,Kn.current&1),w(Wr,f),Ar===null&&(p===null||Dc.current!==null||p.memoizedState!==null)&&(Ar=f)}function Yf(f){w(Kn,Kn.current),w(Wr,f),Ar===null&&(Ar=f)}function nl(f){f.tag===22?(w(Kn,Kn.current),w(Wr,f),Ar===null&&(Ar=f)):Jr()}function Jr(){w(Kn,Kn.current),w(Wr,Wr.current)}function es(f){y(Wr),Ar===f&&(Ar=null),y(Kn)}function Zh(f){for(var p=f;p!==null;){if(p.tag===13){var b=p.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||yl(b)||Ng(b)))return p}else if(p.tag===19&&(p.memoizedProps.revealOrder==="forwards"||p.memoizedProps.revealOrder==="backwards"||p.memoizedProps.revealOrder==="unstable_legacy-backwards"||p.memoizedProps.revealOrder==="together")){if((p.flags&128)!==0)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}function Bn(){throw Error(r(321))}function Rm(f,p){if(p===null)return!1;for(var b=0;b<p.length&&b<f.length;b++)if(!ri(f[b],p[b]))return!1;return!0}function Su(f,p,b,A,P,O){return Fo=O,dt=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,Xe.H=f===null||f.memoizedState===null?zn:ka,Ft=!1,O=b(A,P),Ft=!1,gt&&(O=pa(p,b,A,P)),Qh(f),O}function Qh(f){Xe.H=ls;var p=qe!==null&&qe.next!==null;if(Fo=0,st=qe=dt=null,vt=!1,Ls=0,Zs=null,p)throw Error(r(300));f===null||Cn||(f=f.dependencies,f!==null&&Ye(f)&&(Cn=!0))}function pa(f,p,b,A){dt=f;var P=0;do{if(gt&&(Zs=null),Ls=0,gt=!1,25<=P)throw Error(r(301));if(P+=1,st=qe=null,f.updateQueue!=null){var O=f.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}Xe.H=Al,O=p(b,A)}while(gt);return O}function vs(){var f=Xe.H,p=f.useState()[0];return p=typeof p.then=="function"?ar(p):p,f=f.useState()[0],(qe!==null?qe.memoizedState:null)!==f&&(dt.flags|=1024),p}function Xf(){var f=ur!==0;return ur=0,f}function Dm(f,p,b){p.updateQueue=f.updateQueue,p.flags&=-2053,f.lanes&=~b}function Jh(f){if(vt){for(f=f.memoizedState;f!==null;){var p=f.queue;p!==null&&(p.pending=null),f=f.next}vt=!1}Fo=0,st=qe=dt=null,gt=!1,Ls=ur=0,Zs=null}function sr(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?dt.memoizedState=st=f:st=st.next=f,st}function xn(){if(qe===null){var f=dt.alternate;f=f!==null?f.memoizedState:null}else f=qe.next;var p=st===null?dt.memoizedState:st.next;if(p!==null)st=p,qe=f;else{if(f===null)throw dt.alternate===null?Error(r(467)):Error(r(310));qe=f,f={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},st===null?dt.memoizedState=st=f:st=st.next=f}return st}function $f(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ar(f){var p=Ls;return Ls+=1,Zs===null&&(Zs=[]),f=AC(Zs,f,p),p=dt,(st===null?p.memoizedState:st.next)===null&&(p=p.alternate,Xe.H=p===null||p.memoizedState===null?zn:ka),f}function xu(f){if(f!==null&&typeof f=="object"){if(typeof f.then=="function")return ar(f);if(f.$$typeof===As)return Vt(f)}throw Error(r(438,String(f)))}function Zf(f){var p=null,b=dt.updateQueue;if(b!==null&&(p=b.memoCache),p==null){var A=dt.alternate;A!==null&&(A=A.updateQueue,A!==null&&(A=A.memoCache,A!=null&&(p={data:A.data.map(function(P){return P.slice()}),index:0})))}if(p==null&&(p={data:[],index:0}),b===null&&(b=$f(),dt.updateQueue=b),b.memoCache=p,b=p.data[p.index],b===void 0)for(b=p.data[p.index]=Array(f),A=0;A<f;A++)b[A]=av;return p.index++,b}function Ks(f,p){return typeof p=="function"?p(f):p}function Co(f){var p=xn();return Qf(p,qe,f)}function Qf(f,p,b){var A=f.queue;if(A===null)throw Error(r(311));A.lastRenderedReducer=b;var P=f.baseQueue,O=A.pending;if(O!==null){if(P!==null){var I=P.next;P.next=O.next,O.next=I}p.baseQueue=P=O,A.pending=null}if(O=f.baseState,P===null)f.memoizedState=O;else{p=P.next;var ee=I=null,ge=null,Ae=p,_e=!1;do{var Te=Ae.lane&-536870913;if(Te!==Ae.lane?(Mt&Te)===Te:(Fo&Te)===Te){var Ne=Ae.revertLane;if(Ne===0)ge!==null&&(ge=ge.next={lane:0,revertLane:0,gesture:null,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null}),Te===Lo&&(_e=!0);else if((Fo&Ne)===Ne){Ae=Ae.next,Ne===Lo&&(_e=!0);continue}else Te={lane:0,revertLane:Ae.revertLane,gesture:null,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null},ge===null?(ee=ge=Te,I=O):ge=ge.next=Te,dt.lanes|=Ne,ko|=Ne;Te=Ae.action,Ft&&b(O,Te),O=Ae.hasEagerState?Ae.eagerState:b(O,Te)}else Ne={lane:Te,revertLane:Ae.revertLane,gesture:Ae.gesture,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null},ge===null?(ee=ge=Ne,I=O):ge=ge.next=Ne,dt.lanes|=Te,ko|=Te;Ae=Ae.next}while(Ae!==null&&Ae!==p);if(ge===null?I=O:ge.next=ee,!ri(O,f.memoizedState)&&(Cn=!0,_e&&(b=Ei,b!==null)))throw b;f.memoizedState=O,f.baseState=I,f.baseQueue=ge,A.lastRenderedState=O}return P===null&&(A.lanes=0),[f.memoizedState,A.dispatch]}function Jf(f){var p=xn(),b=p.queue;if(b===null)throw Error(r(311));b.lastRenderedReducer=f;var A=b.dispatch,P=b.pending,O=p.memoizedState;if(P!==null){b.pending=null;var I=P=P.next;do O=f(O,I.action),I=I.next;while(I!==P);ri(O,p.memoizedState)||(Cn=!0),p.memoizedState=O,p.baseQueue===null&&(p.baseState=O),b.lastRenderedState=O}return[O,A]}function rc(f,p,b){var A=dt,P=xn(),O=Dt;if(O){if(b===void 0)throw Error(r(407));b=b()}else b=p();var I=!ri((qe||P).memoizedState,b);if(I&&(P.memoizedState=b,Cn=!0),P=P.queue,Tu(_m.bind(null,A,P,f),[f]),P.getSnapshot!==p||I||st!==null&&st.memoizedState.tag&1){if(A.flags|=2048,ts(9,{destroy:void 0},Mm.bind(null,A,P,b,p),null),yt===null)throw Error(r(349));O||(Fo&127)!==0||EC(A,p,b)}return b}function EC(f,p,b){f.flags|=16384,f={getSnapshot:p,value:b},p=dt.updateQueue,p===null?(p=$f(),dt.updateQueue=p,p.stores=[f]):(b=p.stores,b===null?p.stores=[f]:b.push(f))}function Mm(f,p,b,A){p.value=b,p.getSnapshot=A,eg(p)&&TC(f)}function _m(f,p,b){return b(function(){eg(p)&&TC(f)})}function eg(f){var p=f.getSnapshot;f=f.value;try{var b=p();return!ri(f,b)}catch{return!0}}function TC(f){var p=Qo(f,2);p!==null&&Hn(p,f,2)}function Pm(f){var p=sr();if(typeof f=="function"){var b=f;if(f=b(),Ft){ne(!0);try{b()}finally{ne(!1)}}}return p.memoizedState=p.baseState=f,p.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:f},p}function ed(f,p,b,A){return f.baseState=b,Qf(f,qe,typeof A=="function"?A:Ks)}function bo(f,p,b,A,P){if(lg(f))throw Error(r(485));if(f=p.action,f!==null){var O={payload:P,action:f,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(I){O.listeners.push(I)}};Xe.T!==null?b(!0):O.isTransition=!1,A(O),b=p.pending,b===null?(O.next=p.pending=O,tg(p,O)):(O.next=b.next,p.pending=b.next=O)}}function tg(f,p){var b=p.action,A=p.payload,P=f.state;if(p.isTransition){var O=Xe.T,I={};Xe.T=I;try{var ee=b(P,A),ge=Xe.S;ge!==null&&ge(I,ee),ng(f,p,ee)}catch(Ae){il(f,p,Ae)}finally{O!==null&&I.types!==null&&(O.types=I.types),Xe.T=O}}else try{O=b(P,A),ng(f,p,O)}catch(Ae){il(f,p,Ae)}}function ng(f,p,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(A){sc(f,p,A)},function(A){return il(f,p,A)}):sc(f,p,b)}function sc(f,p,b){p.status="fulfilled",p.value=b,Om(p),f.state=b,p=f.pending,p!==null&&(b=p.next,b===p?f.pending=null:(b=b.next,p.next=b,tg(f,b)))}function il(f,p,b){var A=f.pending;if(f.pending=null,A!==null){A=A.next;do p.status="rejected",p.reason=b,Om(p),p=p.next;while(p!==A)}f.action=null}function Om(f){f=f.listeners;for(var p=0;p<f.length;p++)(0,f[p])()}function ig(f,p){return p}function Lm(f,p){if(Dt){var b=yt.formState;if(b!==null){e:{var A=dt;if(Dt){if(Tn){var P=bb(Tn,Sr);if(P){Tn=wb(P),A=Ev(P);break e}}me(A)}A=!1}A&&(p=b[0])}}b=sr(),b.memoizedState=b.baseState=p,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ig,lastRenderedState:p},b.queue=A,b=OC.bind(null,dt,A),A.dispatch=b,A=Pm(!1);var O=og.bind(null,dt,!1,A.queue);return A=sr(),P={state:p,dispatch:null,action:f,pending:null},A.queue=P,b=bo.bind(null,dt,P,O,b),P.dispatch=b,A.memoizedState=f,[p,b,!1]}function Au(f){var p=xn();return ma(p,qe,f)}function ma(f,p,b){if(p=Qf(f,p,ig)[0],f=Co(Ks)[0],typeof p=="object"&&p!==null&&typeof p.then=="function")try{var A=ar(p)}catch(I){throw I===Ti?Os:I}else A=p;p=xn();var P=p.queue,O=P.dispatch;return b!==p.memoizedState&&(dt.flags|=2048,ts(9,{destroy:void 0},Fm.bind(null,P,b),null)),[A,O,f]}function Fm(f,p){f.action=p}function Eu(f){var p=xn(),b=qe;if(b!==null)return ma(p,b,f);xn(),p=p.memoizedState,b=xn();var A=b.queue.dispatch;return b.memoizedState=f,[p,A,!1]}function ts(f,p,b,A){return f={tag:f,create:b,deps:A,inst:p,next:null},p=dt.updateQueue,p===null&&(p=$f(),dt.updateQueue=p),b=p.lastEffect,b===null?p.lastEffect=f.next=f:(A=b.next,b.next=f,f.next=A,p.lastEffect=f),f}function rg(){return xn().memoizedState}function ac(f,p,b,A){var P=sr();dt.flags|=f,P.memoizedState=ts(1|p,{destroy:void 0},b,A===void 0?null:A)}function td(f,p,b,A){var P=xn();A=A===void 0?null:A;var O=P.memoizedState.inst;qe!==null&&A!==null&&Rm(A,qe.memoizedState.deps)?P.memoizedState=ts(p,O,b,A):(dt.flags|=f,P.memoizedState=ts(1|p,O,b,A))}function nd(f,p){ac(8390656,8,f,p)}function Tu(f,p){td(2048,8,f,p)}function RC(f){dt.flags|=4;var p=dt.updateQueue;if(p===null)p=$f(),dt.updateQueue=p,p.events=[f];else{var b=p.events;b===null?p.events=[f]:b.push(f)}}function vr(f){var p=xn().memoizedState;return RC({ref:p,nextImpl:f}),function(){if((St&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}function rl(f,p){return td(4,2,f,p)}function id(f,p){return td(4,4,f,p)}function Ru(f,p){if(typeof p=="function"){f=f();var b=p(f);return function(){typeof b=="function"?b():p(null)}}if(p!=null)return f=f(),p.current=f,function(){p.current=null}}function DC(f,p,b){b=b!=null?b.concat([f]):null,td(4,4,Ru.bind(null,p,f),b)}function rd(){}function sg(f,p){var b=xn();p=p===void 0?null:p;var A=b.memoizedState;return p!==null&&Rm(p,A[1])?A[0]:(b.memoizedState=[f,p],f)}function Du(f,p){var b=xn();p=p===void 0?null:p;var A=b.memoizedState;if(p!==null&&Rm(p,A[1]))return A[0];if(A=f(),Ft){ne(!0);try{f()}finally{ne(!1)}}return b.memoizedState=[A,p],A}function Mu(f,p,b){return b===void 0||(Fo&1073741824)!==0&&(Mt&261930)===0?f.memoizedState=p:(f.memoizedState=b,f=xo(),dt.lanes|=f,ko|=f,b)}function km(f,p,b,A){return ri(b,p)?b:Dc.current!==null?(f=Mu(f,b,A),ri(f,p)||(Cn=!0),f):(Fo&42)===0||(Fo&1073741824)!==0&&(Mt&261930)===0?(Cn=!0,f.memoizedState=b):(f=xo(),dt.lanes|=f,ko|=f,p)}function MC(f,p,b,A,P){var O=Es();Rt(O!==0&&8>O?O:8);var I=Xe.T,ee={};Xe.T=ee,og(f,!1,p,b);try{var ge=P(),Ae=Xe.S;if(Ae!==null&&Ae(ee,ge),ge!==null&&typeof ge=="object"&&typeof ge.then=="function"){var _e=Uf(ge,A);sd(f,p,_e,An(f))}else sd(f,p,A,An(f))}catch(Te){sd(f,p,{then:function(){},status:"rejected",reason:Te},An())}finally{Rt(O),I!==null&&ee.types!==null&&(I.types=ee.types),Xe.T=I}}function _C(f){var p=f.memoizedState;if(p!==null)return p;p={memoizedState:bc,baseState:bc,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:bc},next:null};var b={};return p.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ks,lastRenderedState:b},next:null},f.memoizedState=p,f=f.alternate,f!==null&&(f.memoizedState=p),p}function Nm(){return Vt(wc)}function ag(){return xn().memoizedState}function PC(){return xn().memoizedState}function yx(f){for(var p=f.return;p!==null;){switch(p.tag){case 24:case 3:var b=An();f=ga(b);var A=el(p,f,b);A!==null&&(Hn(A,p,b),$h(A,p,b)),p={cache:fa()},f.payload=p;return}p=p.return}}function Cx(f,p,b){var A=An();b={lane:A,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null},lg(f)?LC(p,b):(b=qf(f,p,b,A),b!==null&&(Hn(b,f,A),FC(b,p,A)))}function OC(f,p,b){var A=An();sd(f,p,b,A)}function sd(f,p,b,A){var P={lane:A,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null};if(lg(f))LC(p,P);else{var O=f.alternate;if(f.lanes===0&&(O===null||O.lanes===0)&&(O=p.lastRenderedReducer,O!==null))try{var I=p.lastRenderedState,ee=O(I,b);if(P.hasEagerState=!0,P.eagerState=ee,ri(ee,I))return bu(f,p,P,0),yt===null&&Cu(),!1}catch{}finally{}if(b=qf(f,p,P,A),b!==null)return Hn(b,f,A),FC(b,p,A),!0}return!1}function og(f,p,b,A){if(A={lane:2,revertLane:Em(),gesture:null,action:A,hasEagerState:!1,eagerState:null,next:null},lg(f)){if(p)throw Error(r(479))}else p=qf(f,b,A,2),p!==null&&Hn(p,f,2)}function lg(f){var p=f.alternate;return f===dt||p!==null&&p===dt}function LC(f,p){gt=vt=!0;var b=f.pending;b===null?p.next=p:(p.next=b.next,b.next=p),f.pending=p}function FC(f,p,b){if((b&4194048)!==0){var A=p.lanes;A&=f.pendingLanes,b|=A,p.lanes=b,U(f,b)}}function Bm(f,p,b,A){p=f.memoizedState,b=b(A,p),b=b==null?p:Dg({},p,b),f.memoizedState=b,f.lanes===0&&(f.updateQueue.baseState=b)}function cg(f,p,b,A,P,O,I){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(A,O,I):p.prototype&&p.prototype.isPureReactComponent?!ec(b,A)||!ec(P,O):!0}function kC(f,p,b,A){f=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(b,A),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(b,A),p.state!==f&&Ld.enqueueReplaceState(p,p.state,null)}function oc(f,p){var b=p;if("ref"in p){b={};for(var A in p)A!=="ref"&&(b[A]=p[A])}if(f=f.defaultProps){b===p&&(b=Dg({},b));for(var P in f)b[P]===void 0&&(b[P]=f[P])}return b}function ug(f,p){try{var b=f.onUncaughtError;b(p.value,{componentStack:p.stack})}catch(A){setTimeout(function(){throw A})}}function Im(f,p,b){try{var A=f.onCaughtError;A(b.value,{componentStack:b.stack,errorBoundary:p.tag===1?p.stateNode:null})}catch(P){setTimeout(function(){throw P})}}function Hm(f,p,b){return b=ga(b),b.tag=3,b.payload={element:null},b.callback=function(){ug(f,p)},b}function NC(f){return f=ga(f),f.tag=3,f}function BC(f,p,b,A){var P=b.type.getDerivedStateFromError;if(typeof P=="function"){var O=A.value;f.payload=function(){return P(O)},f.callback=function(){Im(p,b,A)}}var I=b.stateNode;I!==null&&typeof I.componentDidCatch=="function"&&(f.callback=function(){Im(p,b,A),typeof P!="function"&&(No===null?No=new Set([this]):No.add(this));var ee=A.stack;this.componentDidCatch(A.value,{componentStack:ee!==null?ee:""})})}function bx(f,p,b,A,P){if(b.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){if(p=b.alternate,p!==null&&Zt(p,b,P,!0),b=Wr.current,b!==null){switch(b.tag){case 31:case 13:return Ar===null?Gu():b.alternate===null&&Un===0&&(Un=3),b.flags&=-257,b.flags|=65536,b.lanes=P,A===La?b.flags|=16384:(p=b.updateQueue,p===null?b.updateQueue=new Set([A]):p.add(A),Uu(f,A,P)),!1;case 22:return b.flags|=65536,A===La?b.flags|=16384:(p=b.updateQueue,p===null?(p={transitions:null,markerInstances:null,retryQueue:new Set([A])},b.updateQueue=p):(b=p.retryQueue,b===null?p.retryQueue=new Set([A]):b.add(A)),Uu(f,A,P)),!1}throw Error(r(435,b.tag))}return Uu(f,A,P),Gu(),!1}if(Dt)return p=Wr.current,p!==null?((p.flags&65536)===0&&(p.flags|=256),p.flags|=65536,p.lanes=P,A!==Zg&&(f=Error(r(422),{cause:A}),jt(oe(f,b)))):(A!==Zg&&(p=Error(r(423),{cause:A}),jt(oe(p,b))),f=f.current.alternate,f.flags|=65536,P&=-P,f.lanes|=P,A=oe(A,b),P=Hm(f.stateNode,A,P),Kf(f,P),Un!==4&&(Un=2)),!1;var O=Error(r(520),{cause:A});if(O=oe(O,b),kd===null?kd=[O]:kd.push(O),Un!==4&&(Un=2),p===null)return!0;A=oe(A,b),b=p;do{switch(b.tag){case 3:return b.flags|=65536,f=P&-P,b.lanes|=f,f=Hm(b.stateNode,A,f),Kf(b,f),!1;case 1:if(p=b.type,O=b.stateNode,(b.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(No===null||!No.has(O))))return b.flags|=65536,P&=-P,b.lanes|=P,P=NC(P),BC(P,f,b,A),Kf(b,P),!1}b=b.return}while(b!==null);return!1}function Ki(f,p,b,A){p.child=f===null?Uv(p,null,b,A):$i(p,f.child,b,A)}function IC(f,p,b,A,P){b=b.render;var O=p.ref;if("ref"in A){var I={};for(var ee in A)ee!=="ref"&&(I[ee]=A[ee])}else I=A;return Wt(p),A=Su(f,p,b,I,O,P),ee=Xf(),f!==null&&!Cn?(Dm(f,p,P),va(f,p,P)):(Dt&&ee&&Z(p),p.flags|=1,Ki(f,p,A,P),p.child)}function HC(f,p,b,A,P){if(f===null){var O=b.type;return typeof O=="function"&&!dc(O)&&O.defaultProps===void 0&&b.compare===null?(p.tag=15,p.type=O,GC(f,p,O,A,P)):(f=To(b.type,null,A,p,p.mode,P),f.ref=p.ref,f.return=p,p.child=f)}if(O=f.child,!od(f,P)){var I=O.memoizedProps;if(b=b.compare,b=b!==null?b:ec,b(I,A)&&f.ref===p.ref)return va(f,p,P)}return p.flags|=1,f=rs(O,A),f.ref=p.ref,f.return=p,p.child=f}function GC(f,p,b,A,P){if(f!==null){var O=f.memoizedProps;if(ec(O,A)&&f.ref===p.ref)if(Cn=!1,p.pendingProps=A=O,od(f,P))(f.flags&131072)!==0&&(Cn=!0);else return p.lanes=f.lanes,va(f,p,P)}return dg(f,p,b,A,P)}function zC(f,p,b,A){var P=A.children,O=f!==null?f.memoizedState:null;if(f===null&&p.stateNode===null&&(p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),A.mode==="hidden"){if((p.flags&128)!==0){if(O=O!==null?O.baseLanes|b:b,f!==null){for(A=p.child=f.child,P=0;A!==null;)P=P|A.lanes|A.childLanes,A=A.sibling;A=P&~O}else A=0,p.child=null;return _u(f,p,O,b,A)}if((b&536870912)!==0)p.memoizedState={baseLanes:0,cachePool:null},f!==null&&Jl(p,O!==null?O.cachePool:null),O!==null?wu(p,O):tl(),nl(p);else return A=p.lanes=536870912,_u(f,p,O!==null?O.baseLanes|b:b,b,A)}else O!==null?(Jl(p,O.cachePool),wu(p,O),Jr(),p.memoizedState=null):(f!==null&&Jl(p,null),tl(),Jr());return Ki(f,p,P,b),p.child}function lc(f,p){return f!==null&&f.tag===22||p.stateNode!==null||(p.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.sibling}function _u(f,p,b,A,P){var O=pu();return O=O===null?null:{parent:ni?Rn._currentValue:Rn._currentValue2,pool:O},p.memoizedState={baseLanes:b,cachePool:O},f!==null&&Jl(p,null),tl(),nl(p),f!==null&&Zt(f,p,A,!0),p.childLanes=P,null}function hg(f,p){return p=sl({mode:p.mode,children:p.children},f.mode),p.ref=f.ref,f.child=p,p.return=f,p}function Gm(f,p,b){return $i(p,f.child,null,b),f=hg(p,p.pendingProps),f.flags|=2,es(p),p.memoizedState=null,f}function VC(f,p,b){var A=p.pendingProps,P=(p.flags&128)!==0;if(p.flags&=-129,f===null){if(Dt){if(A.mode==="hidden")return f=hg(p,A),p.lanes=536870912,lc(null,f);if(Yf(p),(f=Tn)?(f=Rv(f,Sr),f!==null&&(p.memoizedState={dehydrated:f,treeContext:Ds!==null?{id:Yi,overflow:Xs}:null,retryLane:536870912,hydrationErrors:null},b=iv(f),b.return=p,p.child=b,Ai=p,Tn=null)):f=null,f===null)throw me(p);return p.lanes=536870912,null}return hg(p,A)}var O=f.memoizedState;if(O!==null){var I=O.dehydrated;if(Yf(p),P)if(p.flags&256)p.flags&=-257,p=Gm(f,p,b);else if(p.memoizedState!==null)p.child=f.child,p.flags|=128,p=null;else throw Error(r(558));else if(Cn||Zt(f,p,b,!1),P=(b&f.childLanes)!==0,Cn||P){if(A=yt,A!==null&&(I=W(A,b),I!==0&&I!==O.retryLane))throw O.retryLane=I,Qo(f,I),Hn(A,f,I),Er;Gu(),p=Gm(f,p,b)}else f=O.treeContext,En&&(Tn=Eb(I),Ai=p,Dt=!0,Oa=null,Sr=!1,f!==null&&Ee(p,f)),p=hg(p,A),p.flags|=4096;return p}return f=rs(f.child,{mode:A.mode,children:A.children}),f.ref=p.ref,p.child=f,f.return=p,f}function ad(f,p){var b=p.ref;if(b===null)f!==null&&f.ref!==null&&(p.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(r(284));(f===null||f.ref!==b)&&(p.flags|=4194816)}}function dg(f,p,b,A,P){return Wt(p),b=Su(f,p,b,A,void 0,P),A=Xf(),f!==null&&!Cn?(Dm(f,p,P),va(f,p,P)):(Dt&&A&&Z(p),p.flags|=1,Ki(f,p,b,P),p.child)}function zm(f,p,b,A,P,O){return Wt(p),p.updateQueue=null,b=pa(p,A,b,P),Qh(f),A=Xf(),f!==null&&!Cn?(Dm(f,p,O),va(f,p,O)):(Dt&&A&&Z(p),p.flags|=1,Ki(f,p,b,O),p.child)}function cc(f,p,b,A,P){if(Wt(p),p.stateNode===null){var O=Ma,I=b.contextType;typeof I=="object"&&I!==null&&(O=Vt(I)),O=new b(A,O),p.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=Ld,p.stateNode=O,O._reactInternals=p,O=p.stateNode,O.props=A,O.state=p.memoizedState,O.refs={},rr(p),I=b.contextType,O.context=typeof I=="object"&&I!==null?Vt(I):Ma,O.state=p.memoizedState,I=b.getDerivedStateFromProps,typeof I=="function"&&(Bm(p,b,I,A),O.state=p.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(I=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),I!==O.state&&Ld.enqueueReplaceState(O,O.state,null),tc(p,A,O,P),vo(),O.state=p.memoizedState),typeof O.componentDidMount=="function"&&(p.flags|=4194308),A=!0}else if(f===null){O=p.stateNode;var ee=p.memoizedProps,ge=oc(b,ee);O.props=ge;var Ae=O.context,_e=b.contextType;I=Ma,typeof _e=="object"&&_e!==null&&(I=Vt(_e));var Te=b.getDerivedStateFromProps;_e=typeof Te=="function"||typeof O.getSnapshotBeforeUpdate=="function",ee=p.pendingProps!==ee,_e||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(ee||Ae!==I)&&kC(p,O,A,I),os=!1;var Ne=p.memoizedState;O.state=Ne,tc(p,A,O,P),vo(),Ae=p.memoizedState,ee||Ne!==Ae||os?(typeof Te=="function"&&(Bm(p,b,Te,A),Ae=p.memoizedState),(ge=os||cg(p,b,ge,A,Ne,Ae,I))?(_e||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(p.flags|=4194308)):(typeof O.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=A,p.memoizedState=Ae),O.props=A,O.state=Ae,O.context=I,A=ge):(typeof O.componentDidMount=="function"&&(p.flags|=4194308),A=!1)}else{O=p.stateNode,Jo(f,p),I=p.memoizedProps,_e=oc(b,I),O.props=_e,Te=p.pendingProps,Ne=O.context,Ae=b.contextType,ge=Ma,typeof Ae=="object"&&Ae!==null&&(ge=Vt(Ae)),ee=b.getDerivedStateFromProps,(Ae=typeof ee=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(I!==Te||Ne!==ge)&&kC(p,O,A,ge),os=!1,Ne=p.memoizedState,O.state=Ne,tc(p,A,O,P),vo();var lt=p.memoizedState;I!==Te||Ne!==lt||os||f!==null&&f.dependencies!==null&&Ye(f.dependencies)?(typeof ee=="function"&&(Bm(p,b,ee,A),lt=p.memoizedState),(_e=os||cg(p,b,_e,A,Ne,lt,ge)||f!==null&&f.dependencies!==null&&Ye(f.dependencies))?(Ae||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(A,lt,ge),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(A,lt,ge)),typeof O.componentDidUpdate=="function"&&(p.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof O.componentDidUpdate!="function"||I===f.memoizedProps&&Ne===f.memoizedState||(p.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||I===f.memoizedProps&&Ne===f.memoizedState||(p.flags|=1024),p.memoizedProps=A,p.memoizedState=lt),O.props=A,O.state=lt,O.context=ge,A=_e):(typeof O.componentDidUpdate!="function"||I===f.memoizedProps&&Ne===f.memoizedState||(p.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||I===f.memoizedProps&&Ne===f.memoizedState||(p.flags|=1024),A=!1)}return O=A,ad(f,p),A=(p.flags&128)!==0,O||A?(O=p.stateNode,b=A&&typeof b.getDerivedStateFromError!="function"?null:O.render(),p.flags|=1,f!==null&&A?(p.child=$i(p,f.child,null,P),p.child=$i(p,null,b,P)):Ki(f,p,b,P),p.memoizedState=O.state,f=p.child):f=va(f,p,P),f}function UC(f,p,b,A){return wt(),p.flags|=256,Ki(f,p,b,A),p.child}function Vm(f){return{baseLanes:f,cachePool:$o()}}function Um(f,p,b){return f=f!==null?f.childLanes&~b:0,p&&(f|=Tr),f}function jm(f,p,b){var A=p.pendingProps,P=!1,O=(p.flags&128)!==0,I;if((I=O)||(I=f!==null&&f.memoizedState===null?!1:(Kn.current&2)!==0),I&&(P=!0,p.flags&=-129),I=(p.flags&32)!==0,p.flags&=-33,f===null){if(Dt){if(P?yo(p):Jr(),(f=Tn)?(f=Mb(f,Sr),f!==null&&(p.memoizedState={dehydrated:f,treeContext:Ds!==null?{id:Yi,overflow:Xs}:null,retryLane:536870912,hydrationErrors:null},b=iv(f),b.return=p,p.child=b,Ai=p,Tn=null)):f=null,f===null)throw me(p);return Ng(f)?p.lanes=32:p.lanes=536870912,null}var ee=A.children;return A=A.fallback,P?(Jr(),P=p.mode,ee=sl({mode:"hidden",children:ee},P),A=xs(A,P,b,null),ee.return=p,A.return=p,ee.sibling=A,p.child=ee,A=p.child,A.memoizedState=Vm(b),A.childLanes=Um(f,I,b),p.memoizedState=Mc,lc(null,A)):(yo(p),fg(p,ee))}var ge=f.memoizedState;if(ge!==null&&(ee=ge.dehydrated,ee!==null)){if(O)p.flags&256?(yo(p),p.flags&=-257,p=uc(f,p,b)):p.memoizedState!==null?(Jr(),p.child=f.child,p.flags|=128,p=null):(Jr(),ee=A.fallback,P=p.mode,A=sl({mode:"visible",children:A.children},P),ee=xs(ee,P,b,null),ee.flags|=2,A.return=p,ee.return=p,A.sibling=ee,p.child=A,$i(p,f.child,null,b),A=p.child,A.memoizedState=Vm(b),A.childLanes=Um(f,I,b),p.memoizedState=Mc,p=lc(null,A));else if(yo(p),Ng(ee))I=Bg(ee).digest,A=Error(r(419)),A.stack="",A.digest=I,jt({value:A,source:null,stack:null}),p=uc(f,p,b);else if(Cn||Zt(f,p,b,!1),I=(b&f.childLanes)!==0,Cn||I){if(I=yt,I!==null&&(A=W(I,b),A!==0&&A!==ge.retryLane))throw ge.retryLane=A,Qo(f,A),Hn(I,f,A),Er;yl(ee)||Gu(),p=uc(f,p,b)}else yl(ee)?(p.flags|=192,p.child=f.child,p=null):(f=ge.treeContext,En&&(Tn=Tb(ee),Ai=p,Dt=!0,Oa=null,Sr=!1,f!==null&&Ee(p,f)),p=fg(p,A.children),p.flags|=4096);return p}return P?(Jr(),ee=A.fallback,P=p.mode,ge=f.child,O=ge.sibling,A=rs(ge,{mode:"hidden",children:A.children}),A.subtreeFlags=ge.subtreeFlags&65011712,O!==null?ee=rs(O,ee):(ee=xs(ee,P,b,null),ee.flags|=2),ee.return=p,A.return=p,A.sibling=ee,p.child=A,lc(null,A),A=p.child,ee=f.child.memoizedState,ee===null?ee=Vm(b):(P=ee.cachePool,P!==null?(ge=ni?Rn._currentValue:Rn._currentValue2,P=P.parent!==ge?{parent:ge,pool:ge}:P):P=$o(),ee={baseLanes:ee.baseLanes|b,cachePool:P}),A.memoizedState=ee,A.childLanes=Um(f,I,b),p.memoizedState=Mc,lc(f.child,A)):(yo(p),b=f.child,f=b.sibling,b=rs(b,{mode:"visible",children:A.children}),b.return=p,b.sibling=null,f!==null&&(I=p.deletions,I===null?(p.deletions=[f],p.flags|=16):I.push(f)),p.child=b,p.memoizedState=null,b)}function fg(f,p){return p=sl({mode:"visible",children:p},f.mode),p.return=f,f.child=p}function sl(f,p){return f=n(22,f,null,p),f.lanes=0,f}function uc(f,p,b){return $i(p,f.child,null,b),f=fg(p,p.pendingProps.children),f.flags|=2,p.memoizedState=null,f}function jC(f,p,b){f.lanes|=p;var A=f.alternate;A!==null&&(A.lanes|=p),Lt(f.return,p,b)}function Pu(f,p,b,A,P,O){var I=f.memoizedState;I===null?f.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:A,tail:b,tailMode:P,treeForkCount:O}:(I.isBackwards=p,I.rendering=null,I.renderingStartTime=0,I.last=A,I.tail=b,I.tailMode=P,I.treeForkCount=O)}function Wm(f,p,b){var A=p.pendingProps,P=A.revealOrder,O=A.tail;A=A.children;var I=Kn.current,ee=(I&2)!==0;if(ee?(I=I&1|2,p.flags|=128):I&=1,w(Kn,I),Ki(f,p,A,b),A=Dt?_d:0,!ee&&f!==null&&(f.flags&128)!==0)e:for(f=p.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&jC(f,b,p);else if(f.tag===19)jC(f,b,p);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===p)break e;for(;f.sibling===null;){if(f.return===null||f.return===p)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}switch(P){case"forwards":for(b=p.child,P=null;b!==null;)f=b.alternate,f!==null&&Zh(f)===null&&(P=b),b=b.sibling;b=P,b===null?(P=p.child,p.child=null):(P=b.sibling,b.sibling=null),Pu(p,!1,P,b,O,A);break;case"backwards":case"unstable_legacy-backwards":for(b=null,P=p.child,p.child=null;P!==null;){if(f=P.alternate,f!==null&&Zh(f)===null){p.child=P;break}f=P.sibling,P.sibling=b,b=P,P=f}Pu(p,!0,b,null,O,A);break;case"together":Pu(p,!1,null,null,void 0,A);break;default:p.memoizedState=null}return p.child}function va(f,p,b){if(f!==null&&(p.dependencies=f.dependencies),ko|=p.lanes,(b&p.childLanes)===0)if(f!==null){if(Zt(f,p,b,!1),(b&p.childLanes)===0)return null}else return null;if(f!==null&&p.child!==f.child)throw Error(r(153));if(p.child!==null){for(f=p.child,b=rs(f,f.pendingProps),p.child=b,b.return=p;f.sibling!==null;)f=f.sibling,b=b.sibling=rs(f,f.pendingProps),b.return=p;b.sibling=null}return p.child}function od(f,p){return(f.lanes&p)!==0?!0:(f=f.dependencies,!!(f!==null&&Ye(f)))}function qm(f,p,b){switch(p.tag){case 3:Pe(p,p.stateNode.containerInfo),$t(p,Rn,f.memoizedState.cache),wt();break;case 27:case 5:ze(p);break;case 4:Pe(p,p.stateNode.containerInfo);break;case 10:$t(p,p.type,p.memoizedProps.value);break;case 31:if(p.memoizedState!==null)return p.flags|=128,Yf(p),null;break;case 13:var A=p.memoizedState;if(A!==null)return A.dehydrated!==null?(yo(p),p.flags|=128,null):(b&p.child.childLanes)!==0?jm(f,p,b):(yo(p),f=va(f,p,b),f!==null?f.sibling:null);yo(p);break;case 19:var P=(f.flags&128)!==0;if(A=(b&p.childLanes)!==0,A||(Zt(f,p,b,!1),A=(b&p.childLanes)!==0),P){if(A)return Wm(f,p,b);p.flags|=128}if(P=p.memoizedState,P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),w(Kn,Kn.current),A)break;return null;case 22:return p.lanes=0,zC(f,p,b,p.pendingProps);case 24:$t(p,Rn,f.memoizedState.cache)}return va(f,p,b)}function Km(f,p,b){if(f!==null)if(f.memoizedProps!==p.pendingProps)Cn=!0;else{if(!od(f,b)&&(p.flags&128)===0)return Cn=!1,qm(f,p,b);Cn=(f.flags&131072)!==0}else Cn=!1,Dt&&(p.flags&1048576)!==0&&V(p,_d,p.index);switch(p.lanes=0,p.tag){case 16:e:{var A=p.pendingProps;if(f=Zo(p.elementType),p.type=f,typeof f=="function")dc(f)?(A=oc(f,A),p.tag=1,p=cc(null,p,f,A,b)):(p.tag=0,p=dg(null,p,f,A,b));else{if(f!=null){var P=f.$$typeof;if(P===ju){p.tag=11,p=IC(null,p,f,A,b);break e}else if(P===_g){p.tag=14,p=HC(null,p,f,A,b);break e}}throw p=g(f)||f,Error(r(306,p,""))}}return p;case 0:return dg(f,p,p.type,p.pendingProps,b);case 1:return A=p.type,P=oc(A,p.pendingProps),cc(f,p,A,P,b);case 3:e:{if(Pe(p,p.stateNode.containerInfo),f===null)throw Error(r(387));var O=p.pendingProps;P=p.memoizedState,A=P.element,Jo(f,p),tc(p,O,null,b);var I=p.memoizedState;if(O=I.cache,$t(p,Rn,O),O!==P.cache&&Nn(p,[Rn],b,!0),vo(),O=I.element,En&&P.isDehydrated)if(P={element:O,isDehydrated:!1,cache:I.cache},p.updateQueue.baseState=P,p.memoizedState=P,p.flags&256){p=UC(f,p,O,b);break e}else if(O!==A){A=oe(Error(r(424)),p),jt(A),p=UC(f,p,O,b);break e}else for(En&&(Tn=Ab(p.stateNode.containerInfo),Ai=p,Dt=!0,Oa=null,Sr=!0),b=Uv(p,null,O,b),p.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(wt(),O===A){p=va(f,p,b);break e}Ki(f,p,O,b)}p=p.child}return p;case 26:if(Ts)return ad(f,p),f===null?(b=Ov(p.type,null,p.pendingProps,null))?p.memoizedState=b:Dt||(p.stateNode=zg(p.type,p.pendingProps,Xi.current,p)):p.memoizedState=Ov(p.type,f.memoizedProps,p.pendingProps,f.memoizedState),null;case 27:if(xi)return ze(p),f===null&&xi&&Dt&&(A=p.stateNode=Vg(p.type,p.pendingProps,Xi.current,Li.current,!1),Ai=p,Sr=!0,Tn=Tv(p.type,A,Tn)),Ki(f,p,p.pendingProps.children,b),ad(f,p),f===null&&(p.flags|=4194304),p.child;case 5:return f===null&&Dt&&(Ib(p.type,p.pendingProps,Li.current),(P=A=Tn)&&(A=Rb(A,p.type,p.pendingProps,Sr),A!==null?(p.stateNode=A,Ai=p,Tn=xb(A),Sr=!1,P=!0):P=!1),P||me(p)),ze(p),P=p.type,O=p.pendingProps,I=f!==null?f.memoizedProps:null,A=O.children,wr(P,O)?A=null:I!==null&&wr(P,I)&&(p.flags|=32),p.memoizedState!==null&&(P=Su(f,p,vs,null,null,b),ni?wc._currentValue=P:wc._currentValue2=P),ad(f,p),Ki(f,p,A,b),p.child;case 6:return f===null&&Dt&&(Pv(p.pendingProps,Li.current),(f=b=Tn)&&(b=Db(b,p.pendingProps,Sr),b!==null?(p.stateNode=b,Ai=p,Tn=null,f=!0):f=!1),f||me(p)),null;case 13:return jm(f,p,b);case 4:return Pe(p,p.stateNode.containerInfo),A=p.pendingProps,f===null?p.child=$i(p,null,A,b):Ki(f,p,A,b),p.child;case 11:return IC(f,p,p.type,p.pendingProps,b);case 7:return Ki(f,p,p.pendingProps,b),p.child;case 8:return Ki(f,p,p.pendingProps.children,b),p.child;case 12:return Ki(f,p,p.pendingProps.children,b),p.child;case 10:return A=p.pendingProps,$t(p,p.type,A.value),Ki(f,p,A.children,b),p.child;case 9:return P=p.type._context,A=p.pendingProps.children,Wt(p),P=Vt(P),A=A(P),p.flags|=1,Ki(f,p,A,b),p.child;case 14:return HC(f,p,p.type,p.pendingProps,b);case 15:return GC(f,p,p.type,p.pendingProps,b);case 19:return Wm(f,p,b);case 31:return VC(f,p,b);case 22:return zC(f,p,b,p.pendingProps);case 24:return Wt(p),A=Vt(Rn),f===null?(P=pu(),P===null&&(P=yt,O=fa(),P.pooledCache=O,O.refCount++,O!==null&&(P.pooledCacheLanes|=b),P=O),p.memoizedState={parent:A,cache:P},rr(p),$t(p,Rn,P)):((f.lanes&b)!==0&&(Jo(f,p),tc(p,null,null,b),vo()),P=f.memoizedState,O=p.memoizedState,P.parent!==A?(P={parent:A,cache:A},p.memoizedState=P,p.lanes===0&&(p.memoizedState=p.updateQueue.baseState=P),$t(p,Rn,A)):(A=O.cache,$t(p,Rn,A),A!==P.cache&&Nn(p,[Rn],b,!0))),Ki(f,p,p.pendingProps.children,b),p.child;case 29:throw p.pendingProps}throw Error(r(156,p.tag))}function ys(f){f.flags|=4}function ld(f){ss&&(f.flags|=8)}function WC(f,p){if(f!==null&&f.child===p.child)return!1;if((p.flags&16)!==0)return!0;for(f=p.child;f!==null;){if((f.flags&8218)!==0||(f.subtreeFlags&8218)!==0)return!0;f=f.sibling}return!1}function Ym(f,p,b,A){if(Pt)for(b=p.child;b!==null;){if(b.tag===5||b.tag===6)Sd(f,b.stateNode);else if(!(b.tag===4||xi&&b.tag===27)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===p)break;for(;b.sibling===null;){if(b.return===null||b.return===p)return;b=b.return}b.sibling.return=b.return,b=b.sibling}else if(ss)for(var P=p.child;P!==null;){if(P.tag===5){var O=P.stateNode;b&&A&&(O=Cb(O,P.type,P.memoizedProps)),Sd(f,O)}else if(P.tag===6)O=P.stateNode,b&&A&&(O=Av(O,P.memoizedProps)),Sd(f,O);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)O=P.child,O!==null&&(O.return=P),Ym(f,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===p)break;for(;P.sibling===null;){if(P.return===null||P.return===p)return;P=P.return}P.sibling.return=P.return,P=P.sibling}}function qC(f,p,b,A){var P=!1;if(ss)for(var O=p.child;O!==null;){if(O.tag===5){var I=O.stateNode;b&&A&&(I=Cb(I,O.type,O.memoizedProps)),Sv(f,I)}else if(O.tag===6)I=O.stateNode,b&&A&&(I=Av(I,O.memoizedProps)),Sv(f,I);else if(O.tag!==4){if(O.tag===22&&O.memoizedState!==null)P=O.child,P!==null&&(P.return=O),qC(f,O,!0,!0),P=!0;else if(O.child!==null){O.child.return=O,O=O.child;continue}}if(O===p)break;for(;O.sibling===null;){if(O.return===null||O.return===p)return P;O=O.return}O.sibling.return=O.return,O=O.sibling}return P}function KC(f,p){if(ss&&WC(f,p)){f=p.stateNode;var b=f.containerInfo,A=wv();qC(A,p,!1,!1),f.pendingChildren=A,ys(p),yb(b,A)}}function Xm(f,p,b,A){if(Pt)f.memoizedProps!==A&&ys(p);else if(ss){var P=f.stateNode,O=f.memoizedProps;if((f=WC(f,p))||O!==A){var I=Li.current;O=vb(P,b,O,A,!f,null),O===P?p.stateNode=P:(ld(p),zr(O,b,A,I)&&ys(p),p.stateNode=O,f&&Ym(O,p,!1,!1))}else p.stateNode=P}}function yr(f,p,b,A,P){if((f.mode&32)!==0&&(b===null?xd(p,A):Xu(p,b,A))){if(f.flags|=16777216,(P&335544128)===P||uv(p,A))if(Gn(f.stateNode,p,A))f.flags|=8192;else if(_t())f.flags|=8192;else throw xr=La,Jg}else f.flags&=-16777217}function Ou(f,p){if(Nv(p)){if(f.flags|=16777216,!Bv(p))if(_t())f.flags|=8192;else throw xr=La,Jg}else f.flags&=-16777217}function cd(f,p){p!==null&&(f.flags|=4),f.flags&16384&&(p=f.tag!==22?F():536870912,f.lanes|=p,rh|=p)}function Lu(f,p){if(!Dt)switch(f.tailMode){case"hidden":p=f.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?f.tail=null:b.sibling=null;break;case"collapsed":b=f.tail;for(var A=null;b!==null;)b.alternate!==null&&(A=b),b=b.sibling;A===null?p||f.tail===null?f.tail=null:f.tail.sibling=null:A.sibling=null}}function dn(f){var p=f.alternate!==null&&f.alternate.child===f.child,b=0,A=0;if(p)for(var P=f.child;P!==null;)b|=P.lanes|P.childLanes,A|=P.subtreeFlags&65011712,A|=P.flags&65011712,P.return=f,P=P.sibling;else for(P=f.child;P!==null;)b|=P.lanes|P.childLanes,A|=P.subtreeFlags,A|=P.flags,P.return=f,P=P.sibling;return f.subtreeFlags|=A,f.childLanes=b,p}function YC(f,p,b){var A=p.pendingProps;switch(ae(p),p.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dn(p),null;case 1:return dn(p),null;case 3:return b=p.stateNode,A=null,f!==null&&(A=f.memoizedState.cache),p.memoizedState.cache!==A&&(p.flags|=2048),Ke(Rn),Ie(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(f===null||f.child===null)&&(be(p)?ys(p):f===null||f.memoizedState.isDehydrated&&(p.flags&256)===0||(p.flags|=1024,nt())),KC(f,p),dn(p),null;case 26:if(Ts){var P=p.type,O=p.memoizedState;return f===null?(ys(p),O!==null?(dn(p),Ou(p,O)):(dn(p),yr(p,P,null,A,b))):O?O!==f.memoizedState?(ys(p),dn(p),Ou(p,O)):(dn(p),p.flags&=-16777217):(O=f.memoizedProps,Pt?O!==A&&ys(p):Xm(f,p,P,A),dn(p),yr(p,P,O,A,b)),null}case 27:if(xi){if(Ot(p),b=Xi.current,P=p.type,f!==null&&p.stateNode!=null)Pt?f.memoizedProps!==A&&ys(p):Xm(f,p,P,A);else{if(!A){if(p.stateNode===null)throw Error(r(166));return dn(p),null}f=Li.current,be(p)?Be(p,f):(f=Vg(P,A,b,f,!0),p.stateNode=f,ys(p))}return dn(p),null}case 5:if(Ot(p),P=p.type,f!==null&&p.stateNode!=null)Xm(f,p,P,A);else{if(!A){if(p.stateNode===null)throw Error(r(166));return dn(p),null}if(O=Li.current,be(p))Be(p,O),kb(p.stateNode,P,A,O)&&(p.flags|=64);else{var I=lv(P,A,Xi.current,O,p);ld(p),Ym(I,p,!1,!1),p.stateNode=I,zr(I,P,A,O)&&ys(p)}}return dn(p),yr(p,p.type,f===null?null:f.memoizedProps,p.pendingProps,b),null;case 6:if(f&&p.stateNode!=null)b=f.memoizedProps,Pt?b!==A&&ys(p):ss&&(b!==A?(f=Xi.current,b=Li.current,ld(p),p.stateNode=Mo(A,f,b,p)):p.stateNode=f.stateNode);else{if(typeof A!="string"&&p.stateNode===null)throw Error(r(166));if(f=Xi.current,b=Li.current,be(p)){if(!En)throw Error(r(176));if(f=p.stateNode,b=p.memoizedProps,A=null,P=Ai,P!==null)switch(P.tag){case 27:case 5:A=P.memoizedProps}Ex(f,b,p,A)||me(p,!0)}else ld(p),p.stateNode=Mo(A,f,b,p)}return dn(p),null;case 31:if(b=p.memoizedState,f===null||f.memoizedState!==null){if(A=be(p),b!==null){if(f===null){if(!A)throw Error(r(318));if(!En)throw Error(r(556));if(f=p.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(557));Dv(f,p)}else wt(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;dn(p),f=!1}else b=nt(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=b),f=!0;if(!f)return p.flags&256?(es(p),p):(es(p),null);if((p.flags&128)!==0)throw Error(r(558))}return dn(p),null;case 13:if(A=p.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(P=be(p),A!==null&&A.dehydrated!==null){if(f===null){if(!P)throw Error(r(318));if(!En)throw Error(r(344));if(P=p.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(r(317));Pb(P,p)}else wt(),(p.flags&128)===0&&(p.memoizedState=null),p.flags|=4;dn(p),P=!1}else P=nt(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=P),P=!0;if(!P)return p.flags&256?(es(p),p):(es(p),null)}return es(p),(p.flags&128)!==0?(p.lanes=b,p):(b=A!==null,f=f!==null&&f.memoizedState!==null,b&&(A=p.child,P=null,A.alternate!==null&&A.alternate.memoizedState!==null&&A.alternate.memoizedState.cachePool!==null&&(P=A.alternate.memoizedState.cachePool.pool),O=null,A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(O=A.memoizedState.cachePool.pool),O!==P&&(A.flags|=2048)),b!==f&&b&&(p.child.flags|=8192),cd(p,p.updateQueue),dn(p),null);case 4:return Ie(),KC(f,p),f===null&&ln(p.stateNode.containerInfo),dn(p),null;case 10:return Ke(p.type),dn(p),null;case 19:if(y(Kn),A=p.memoizedState,A===null)return dn(p),null;if(P=(p.flags&128)!==0,O=A.rendering,O===null)if(P)Lu(A,!1);else{if(Un!==0||f!==null&&(f.flags&128)!==0)for(f=p.child;f!==null;){if(O=Zh(f),O!==null){for(p.flags|=128,Lu(A,!1),f=O.updateQueue,p.updateQueue=f,cd(p,f),p.subtreeFlags=0,f=b,b=p.child;b!==null;)Eg(b,f),b=b.sibling;return w(Kn,Kn.current&1|2),Dt&&le(p,A.treeForkCount),p.child}f=f.sibling}A.tail!==null&&lr()>Ml&&(p.flags|=128,P=!0,Lu(A,!1),p.lanes=4194304)}else{if(!P)if(f=Zh(O),f!==null){if(p.flags|=128,P=!0,f=f.updateQueue,p.updateQueue=f,cd(p,f),Lu(A,!0),A.tail===null&&A.tailMode==="hidden"&&!O.alternate&&!Dt)return dn(p),null}else 2*lr()-A.renderingStartTime>Ml&&b!==536870912&&(p.flags|=128,P=!0,Lu(A,!1),p.lanes=4194304);A.isBackwards?(O.sibling=p.child,p.child=O):(f=A.last,f!==null?f.sibling=O:p.child=O,A.last=O)}return A.tail!==null?(f=A.tail,A.rendering=f,A.tail=f.sibling,A.renderingStartTime=lr(),f.sibling=null,b=Kn.current,w(Kn,P?b&1|2:b&1),Dt&&le(p,A.treeForkCount),f):(dn(p),null);case 22:case 23:return es(p),pi(),A=p.memoizedState!==null,f!==null?f.memoizedState!==null!==A&&(p.flags|=8192):A&&(p.flags|=8192),A?(b&536870912)!==0&&(p.flags&128)===0&&(dn(p),p.subtreeFlags&6&&(p.flags|=8192)):dn(p),b=p.updateQueue,b!==null&&cd(p,b.retryQueue),b=null,f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),A=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(A=p.memoizedState.cachePool.pool),A!==b&&(p.flags|=2048),f!==null&&y(wl),null;case 24:return b=null,f!==null&&(b=f.memoizedState.cache),p.memoizedState.cache!==b&&(p.flags|=2048),Ke(Rn),dn(p),null;case 25:return null;case 30:return null}throw Error(r(156,p.tag))}function $m(f,p){switch(ae(p),p.tag){case 1:return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 3:return Ke(Rn),Ie(),f=p.flags,(f&65536)!==0&&(f&128)===0?(p.flags=f&-65537|128,p):null;case 26:case 27:case 5:return Ot(p),null;case 31:if(p.memoizedState!==null){if(es(p),p.alternate===null)throw Error(r(340));wt()}return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 13:if(es(p),f=p.memoizedState,f!==null&&f.dehydrated!==null){if(p.alternate===null)throw Error(r(340));wt()}return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 19:return y(Kn),null;case 4:return Ie(),null;case 10:return Ke(p.type),null;case 22:case 23:return es(p),pi(),f!==null&&y(wl),f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 24:return Ke(Rn),null;case 25:return null;default:return null}}function XC(f,p){switch(ae(p),p.tag){case 3:Ke(Rn),Ie();break;case 26:case 27:case 5:Ot(p);break;case 4:Ie();break;case 31:p.memoizedState!==null&&es(p);break;case 13:es(p);break;case 19:y(Kn);break;case 10:Ke(p.type);break;case 22:case 23:es(p),pi(),f!==null&&y(wl);break;case 24:Ke(Rn)}}function ya(f,p){try{var b=p.updateQueue,A=b!==null?b.lastEffect:null;if(A!==null){var P=A.next;b=P;do{if((b.tag&f)===f){A=void 0;var O=b.create,I=b.inst;A=O(),I.destroy=A}b=b.next}while(b!==P)}}catch(ee){it(p,p.return,ee)}}function Ca(f,p,b){try{var A=p.updateQueue,P=A!==null?A.lastEffect:null;if(P!==null){var O=P.next;A=O;do{if((A.tag&f)===f){var I=A.inst,ee=I.destroy;if(ee!==void 0){I.destroy=void 0,P=p;var ge=b,Ae=ee;try{Ae()}catch(_e){it(P,ge,_e)}}}A=A.next}while(A!==O)}}catch(_e){it(p,p.return,_e)}}function Fu(f){var p=f.updateQueue;if(p!==null){var b=f.stateNode;try{ic(p,b)}catch(A){it(f,f.return,A)}}}function gg(f,p,b){b.props=oc(f.type,f.memoizedProps),b.state=f.memoizedState;try{b.componentWillUnmount()}catch(A){it(f,p,A)}}function ku(f,p){try{var b=f.ref;if(b!==null){switch(f.tag){case 26:case 27:case 5:var A=qu(f.stateNode);break;case 30:A=f.stateNode;break;default:A=f.stateNode}typeof b=="function"?f.refCleanup=b(A):b.current=A}}catch(P){it(f,p,P)}}function or(f,p){var b=f.ref,A=f.refCleanup;if(b!==null)if(typeof A=="function")try{A()}catch(P){it(f,p,P)}finally{f.refCleanup=null,f=f.alternate,f!=null&&(f.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(P){it(f,p,P)}else b.current=null}function hc(f){var p=f.type,b=f.memoizedProps,A=f.stateNode;try{cb(A,p,b,f)}catch(P){it(f,f.return,P)}}function ud(f,p,b){try{ub(f.stateNode,f.type,b,p,f)}catch(A){it(f,f.return,A)}}function Zm(f){return f.tag===5||f.tag===3||(Ts?f.tag===26:!1)||(xi?f.tag===27&&Sc(f.type):!1)||f.tag===4}function wo(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||Zm(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(xi&&f.tag===27&&Sc(f.type)||f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function pg(f,p,b){var A=f.tag;if(A===5||A===6)f=f.stateNode,p?db(b,f,p):vv(b,f);else if(A!==4&&(xi&&A===27&&Sc(f.type)&&(b=f.stateNode,p=null),f=f.child,f!==null))for(pg(f,p,b),f=f.sibling;f!==null;)pg(f,p,b),f=f.sibling}function hd(f,p,b){var A=f.tag;if(A===5||A===6)f=f.stateNode,p?hb(b,f,p):mv(b,f);else if(A!==4&&(xi&&A===27&&Sc(f.type)&&(b=f.stateNode),f=f.child,f!==null))for(hd(f,p,b),f=f.sibling;f!==null;)hd(f,p,b),f=f.sibling}function Qm(f,p,b){f=f.containerInfo;try{xv(f,b)}catch(A){it(p,p.return,A)}}function $C(f){var p=f.stateNode,b=f.memoizedProps;try{vi(f.type,b,p,f)}catch(A){it(f,f.return,A)}}function wx(f,p){for(Pg(f.containerInfo),si=p;si!==null;)if(f=si,p=f.child,(f.subtreeFlags&1028)!==0&&p!==null)p.return=f,si=p;else for(;si!==null;){f=si;var b=f.alternate;switch(p=f.flags,f.tag){case 0:if((p&4)!==0&&(p=f.updateQueue,p=p!==null?p.events:null,p!==null))for(var A=0;A<p.length;A++){var P=p[A];P.ref.impl=P.nextImpl}break;case 11:case 15:break;case 1:if((p&1024)!==0&&b!==null){p=void 0,A=f,P=b.memoizedProps,b=b.memoizedState;var O=A.stateNode;try{var I=oc(A.type,P);p=O.getSnapshotBeforeUpdate(I,b),O.__reactInternalSnapshotBeforeUpdate=p}catch(ee){it(A,A.return,ee)}}break;case 3:(p&1024)!==0&&Pt&&bv(f.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((p&1024)!==0)throw Error(r(163))}if(p=f.sibling,p!==null){p.return=f.return,si=p;break}si=f.return}}function ZC(f,p,b){var A=b.flags;switch(b.tag){case 0:case 11:case 15:Cr(f,b),A&4&&ya(5,b);break;case 1:if(Cr(f,b),A&4)if(f=b.stateNode,p===null)try{f.componentDidMount()}catch(I){it(b,b.return,I)}else{var P=oc(b.type,p.memoizedProps);p=p.memoizedState;try{f.componentDidUpdate(P,p,f.__reactInternalSnapshotBeforeUpdate)}catch(I){it(b,b.return,I)}}A&64&&Fu(b),A&512&&ku(b,b.return);break;case 3:if(Cr(f,b),A&64&&(A=b.updateQueue,A!==null)){if(f=null,b.child!==null)switch(b.child.tag){case 27:case 5:f=qu(b.child.stateNode);break;case 1:f=b.child.stateNode}try{ic(A,f)}catch(I){it(b,b.return,I)}}break;case 27:xi&&p===null&&A&4&&$C(b);case 26:case 5:if(Cr(f,b),p===null){if(A&4)hc(b);else if(A&64){f=b.type,p=b.memoizedProps,P=b.stateNode;try{Lb(P,f,p,b)}catch(I){it(b,b.return,I)}}}A&512&&ku(b,b.return);break;case 12:Cr(f,b);break;case 31:Cr(f,b),A&4&&bs(f,b);break;case 13:Cr(f,b),A&4&&fd(f,b),A&64&&(A=b.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(b=Sx.bind(null,b),Ig(A,b))));break;case 22:if(A=b.memoizedState!==null||Yn,!A){p=p!==null&&p.memoizedState!==null||Xn,P=Yn;var O=Xn;Yn=A,(Xn=p)&&!O?Ss(f,b,(b.subtreeFlags&8772)!==0):Cr(f,b),Yn=P,Xn=O}break;case 30:break;default:Cr(f,b)}}function Jm(f){var p=f.alternate;p!==null&&(f.alternate=null,Jm(p)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(p=f.stateNode,p!==null&&Og(p)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function Cs(f,p,b){for(b=b.child;b!==null;)dd(f,p,b),b=b.sibling}function dd(f,p,b){if(jr&&typeof jr.onCommitFiberUnmount=="function")try{jr.onCommitFiberUnmount(Ec,b)}catch{}switch(b.tag){case 26:if(Ts){Xn||or(b,p),Cs(f,p,b),b.memoizedState?Cl(b.memoizedState):b.stateNode&&kv(b.stateNode);break}case 27:if(xi){Xn||or(b,p);var A=Vn,P=ai;Sc(b.type)&&(Vn=b.stateNode,ai=!1),Cs(f,p,b),Oi(b.stateNode),Vn=A,ai=P;break}case 5:Xn||or(b,p);case 6:if(Pt){if(A=Vn,P=ai,Vn=null,Cs(f,p,b),Vn=A,ai=P,Vn!==null)if(ai)try{yv(Vn,b.stateNode)}catch(O){it(b,p,O)}else try{fb(Vn,b.stateNode)}catch(O){it(b,p,O)}}else Cs(f,p,b);break;case 18:Pt&&Vn!==null&&(ai?Hg(Vn,b.stateNode):_v(Vn,b.stateNode));break;case 4:Pt?(A=Vn,P=ai,Vn=b.stateNode.containerInfo,ai=!0,Cs(f,p,b),Vn=A,ai=P):(ss&&Qm(b.stateNode,b,wv()),Cs(f,p,b));break;case 0:case 11:case 14:case 15:Ca(2,b,p),Xn||Ca(4,b,p),Cs(f,p,b);break;case 1:Xn||(or(b,p),A=b.stateNode,typeof A.componentWillUnmount=="function"&&gg(b,p,A)),Cs(f,p,b);break;case 21:Cs(f,p,b);break;case 22:Xn=(A=Xn)||b.memoizedState!==null,Cs(f,p,b),Xn=A;break;default:Cs(f,p,b)}}function bs(f,p){if(En&&p.memoizedState===null&&(f=p.alternate,f!==null&&(f=f.memoizedState,f!==null))){f=f.dehydrated;try{Tx(f)}catch(b){it(p,p.return,b)}}}function fd(f,p){if(En&&p.memoizedState===null&&(f=p.alternate,f!==null&&(f=f.memoizedState,f!==null&&(f=f.dehydrated,f!==null))))try{Rx(f)}catch(b){it(p,p.return,b)}}function ws(f){switch(f.tag){case 31:case 13:case 19:var p=f.stateNode;return p===null&&(p=f.stateNode=new Wv),p;case 22:return f=f.stateNode,p=f._retryCache,p===null&&(p=f._retryCache=new Wv),p;default:throw Error(r(435,f.tag))}}function So(f,p){var b=ws(f);p.forEach(function(A){if(!b.has(A)){b.add(A);var P=xx.bind(null,f,A);A.then(P,P)}})}function _i(f,p){var b=p.deletions;if(b!==null)for(var A=0;A<b.length;A++){var P=b[A],O=f,I=p;if(Pt){var ee=I;e:for(;ee!==null;){switch(ee.tag){case 27:if(xi){if(Sc(ee.type)){Vn=ee.stateNode,ai=!1;break e}break}case 5:Vn=ee.stateNode,ai=!1;break e;case 3:case 4:Vn=ee.stateNode.containerInfo,ai=!0;break e}ee=ee.return}if(Vn===null)throw Error(r(160));dd(O,I,P),Vn=null,ai=!1}else dd(O,I,P);O=P.alternate,O!==null&&(O.return=null),P.return=null}if(p.subtreeFlags&13886)for(p=p.child;p!==null;)gd(p,f),p=p.sibling}function gd(f,p){var b=f.alternate,A=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:_i(p,f),Pi(f),A&4&&(Ca(3,f,f.return),ya(3,f),Ca(5,f,f.return));break;case 1:_i(p,f),Pi(f),A&512&&(Xn||b===null||or(b,b.return)),A&64&&Yn&&(f=f.updateQueue,f!==null&&(A=f.callbacks,A!==null&&(b=f.shared.hiddenCallbacks,f.shared.hiddenCallbacks=b===null?A:b.concat(A))));break;case 26:if(Ts){var P=Jt;if(_i(p,f),Pi(f),A&512&&(Xn||b===null||or(b,b.return)),A&4){A=b!==null?b.memoizedState:null;var O=f.memoizedState;b===null?O===null?f.stateNode===null?f.stateNode=Hb(P,f.type,f.memoizedProps,f):Fv(P,f.type,f.stateNode):f.stateNode=Lv(P,O,f.memoizedProps):A!==O?(A===null?b.stateNode!==null&&kv(b.stateNode):Cl(A),O===null?Fv(P,f.type,f.stateNode):Lv(P,O,f.memoizedProps)):O===null&&f.stateNode!==null&&ud(f,f.memoizedProps,b.memoizedProps)}break}case 27:if(xi){_i(p,f),Pi(f),A&512&&(Xn||b===null||or(b,b.return)),b!==null&&A&4&&ud(f,f.memoizedProps,b.memoizedProps);break}case 5:if(_i(p,f),Pi(f),A&512&&(Xn||b===null||or(b,b.return)),Pt){if(f.flags&32){P=f.stateNode;try{Cv(P)}catch(Te){it(f,f.return,Te)}}A&4&&f.stateNode!=null&&(P=f.memoizedProps,ud(f,P,b!==null?b.memoizedProps:P)),A&1024&&(Ju=!0)}else ss&&f.alternate!==null&&(f.alternate.stateNode=f.stateNode);break;case 6:if(_i(p,f),Pi(f),A&4&&Pt){if(f.stateNode===null)throw Error(r(162));A=f.memoizedProps,b=b!==null?b.memoizedProps:A,P=f.stateNode;try{lb(P,b,A)}catch(Te){it(f,f.return,Te)}}break;case 3:if(Ts?(Gb(),P=Jt,Jt=Td(p.containerInfo),_i(p,f),Jt=P):_i(p,f),Pi(f),A&4){if(Pt&&En&&b!==null&&b.memoizedState.isDehydrated)try{Fb(p.containerInfo)}catch(Te){it(f,f.return,Te)}if(ss){A=p.containerInfo,b=p.pendingChildren;try{xv(A,b)}catch(Te){it(f,f.return,Te)}}}Ju&&(Ju=!1,mg(f));break;case 4:Ts?(b=Jt,Jt=Td(f.stateNode.containerInfo),_i(p,f),Pi(f),Jt=b):(_i(p,f),Pi(f)),A&4&&ss&&Qm(f.stateNode,f,f.stateNode.pendingChildren);break;case 12:_i(p,f),Pi(f);break;case 31:_i(p,f),Pi(f),A&4&&(A=f.updateQueue,A!==null&&(f.updateQueue=null,So(f,A)));break;case 13:_i(p,f),Pi(f),f.child.flags&8192&&f.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&(Nd=lr()),A&4&&(A=f.updateQueue,A!==null&&(f.updateQueue=null,So(f,A)));break;case 22:P=f.memoizedState!==null;var I=b!==null&&b.memoizedState!==null,ee=Yn,ge=Xn;if(Yn=ee||P,Xn=ge||I,_i(p,f),Xn=ge,Yn=ee,Pi(f),A&8192&&(p=f.stateNode,p._visibility=P?p._visibility&-2:p._visibility|1,P&&(b===null||I||Yn||Xn||al(f)),Pt)){e:if(b=null,Pt)for(p=f;;){if(p.tag===5||Ts&&p.tag===26){if(b===null){I=b=p;try{O=I.stateNode,P?Ax(O):pb(I.stateNode,I.memoizedProps)}catch(Te){it(I,I.return,Te)}}}else if(p.tag===6){if(b===null){I=p;try{var Ae=I.stateNode;P?gb(Ae):mb(Ae,I.memoizedProps)}catch(Te){it(I,I.return,Te)}}}else if(p.tag===18){if(b===null){I=p;try{var _e=I.stateNode;P?Nb(_e):Bb(I.stateNode)}catch(Te){it(I,I.return,Te)}}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===f)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break e;for(;p.sibling===null;){if(p.return===null||p.return===f)break e;b===p&&(b=null),p=p.return}b===p&&(b=null),p.sibling.return=p.return,p=p.sibling}}A&4&&(A=f.updateQueue,A!==null&&(b=A.retryQueue,b!==null&&(A.retryQueue=null,So(f,b))));break;case 19:_i(p,f),Pi(f),A&4&&(A=f.updateQueue,A!==null&&(f.updateQueue=null,So(f,A)));break;case 30:break;case 21:break;default:_i(p,f),Pi(f)}}function Pi(f){var p=f.flags;if(p&2){try{for(var b,A=f.return;A!==null;){if(Zm(A)){b=A;break}A=A.return}if(Pt){if(b==null)throw Error(r(160));switch(b.tag){case 27:if(xi){var P=b.stateNode,O=wo(f);hd(f,O,P);break}case 5:var I=b.stateNode;b.flags&32&&(Cv(I),b.flags&=-33);var ee=wo(f);hd(f,ee,I);break;case 3:case 4:var ge=b.stateNode.containerInfo,Ae=wo(f);pg(f,Ae,ge);break;default:throw Error(r(161))}}}catch(_e){it(f,f.return,_e)}f.flags&=-3}p&4096&&(f.flags&=-4097)}function mg(f){if(f.subtreeFlags&1024)for(f=f.child;f!==null;){var p=f;mg(p),p.tag===5&&p.flags&1024&&dv(p.stateNode),f=f.sibling}}function Cr(f,p){if(p.subtreeFlags&8772)for(p=p.child;p!==null;)ZC(f,p.alternate,p),p=p.sibling}function al(f){for(f=f.child;f!==null;){var p=f;switch(p.tag){case 0:case 11:case 14:case 15:Ca(4,p,p.return),al(p);break;case 1:or(p,p.return);var b=p.stateNode;typeof b.componentWillUnmount=="function"&&gg(p,p.return,b),al(p);break;case 27:xi&&Oi(p.stateNode);case 26:case 5:or(p,p.return),al(p);break;case 22:p.memoizedState===null&&al(p);break;case 30:al(p);break;default:al(p)}f=f.sibling}}function Ss(f,p,b){for(b=b&&(p.subtreeFlags&8772)!==0,p=p.child;p!==null;){var A=p.alternate,P=f,O=p,I=O.flags;switch(O.tag){case 0:case 11:case 15:Ss(P,O,b),ya(4,O);break;case 1:if(Ss(P,O,b),A=O,P=A.stateNode,typeof P.componentDidMount=="function")try{P.componentDidMount()}catch(Ae){it(A,A.return,Ae)}if(A=O,P=A.updateQueue,P!==null){var ee=A.stateNode;try{var ge=P.shared.hiddenCallbacks;if(ge!==null)for(P.shared.hiddenCallbacks=null,P=0;P<ge.length;P++)nc(ge[P],ee)}catch(Ae){it(A,A.return,Ae)}}b&&I&64&&Fu(O),ku(O,O.return);break;case 27:xi&&$C(O);case 26:case 5:Ss(P,O,b),b&&A===null&&I&4&&hc(O),ku(O,O.return);break;case 12:Ss(P,O,b);break;case 31:Ss(P,O,b),b&&I&4&&bs(P,O);break;case 13:Ss(P,O,b),b&&I&4&&fd(P,O);break;case 22:O.memoizedState===null&&Ss(P,O,b),ku(O,O.return);break;case 30:break;default:Ss(P,O,b)}p=p.sibling}}function ol(f,p){var b=null;f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),f=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(f=p.memoizedState.cachePool.pool),f!==b&&(f!=null&&f.refCount++,b!=null&&fo(b))}function ev(f,p){f=null,p.alternate!==null&&(f=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==f&&(p.refCount++,f!=null&&fo(f))}function In(f,p,b,A){if(p.subtreeFlags&10256)for(p=p.child;p!==null;)vg(f,p,b,A),p=p.sibling}function vg(f,p,b,A){var P=p.flags;switch(p.tag){case 0:case 11:case 15:In(f,p,b,A),P&2048&&ya(9,p);break;case 1:In(f,p,b,A);break;case 3:In(f,p,b,A),P&2048&&(f=null,p.alternate!==null&&(f=p.alternate.memoizedState.cache),p=p.memoizedState.cache,p!==f&&(p.refCount++,f!=null&&fo(f)));break;case 12:if(P&2048){In(f,p,b,A),f=p.stateNode;try{var O=p.memoizedProps,I=O.id,ee=O.onPostCommit;typeof ee=="function"&&ee(I,p.alternate===null?"mount":"update",f.passiveEffectDuration,-0)}catch(ge){it(p,p.return,ge)}}else In(f,p,b,A);break;case 31:In(f,p,b,A);break;case 13:In(f,p,b,A);break;case 23:break;case 22:O=p.stateNode,I=p.alternate,p.memoizedState!==null?O._visibility&2?In(f,p,b,A):Nu(f,p):O._visibility&2?In(f,p,b,A):(O._visibility|=2,Ir(f,p,b,A,(p.subtreeFlags&10256)!==0||!1)),P&2048&&ol(I,p);break;case 24:In(f,p,b,A),P&2048&&ev(p.alternate,p);break;default:In(f,p,b,A)}}function Ir(f,p,b,A,P){for(P=P&&((p.subtreeFlags&10256)!==0||!1),p=p.child;p!==null;){var O=f,I=p,ee=b,ge=A,Ae=I.flags;switch(I.tag){case 0:case 11:case 15:Ir(O,I,ee,ge,P),ya(8,I);break;case 23:break;case 22:var _e=I.stateNode;I.memoizedState!==null?_e._visibility&2?Ir(O,I,ee,ge,P):Nu(O,I):(_e._visibility|=2,Ir(O,I,ee,ge,P)),P&&Ae&2048&&ol(I.alternate,I);break;case 24:Ir(O,I,ee,ge,P),P&&Ae&2048&&ev(I.alternate,I);break;default:Ir(O,I,ee,ge,P)}p=p.sibling}}function Nu(f,p){if(p.subtreeFlags&10256)for(p=p.child;p!==null;){var b=f,A=p,P=A.flags;switch(A.tag){case 22:Nu(b,A),P&2048&&ol(A.alternate,A);break;case 24:Nu(b,A),P&2048&&ev(A.alternate,A);break;default:Nu(b,A)}p=p.sibling}}function ba(f,p,b){if(f.subtreeFlags&cs)for(f=f.child;f!==null;)ll(f,p,b),f=f.sibling}function ll(f,p,b){switch(f.tag){case 26:if(ba(f,p,b),f.flags&cs)if(f.memoizedState!==null)zb(b,Jt,f.memoizedState,f.memoizedProps);else{var A=f.stateNode,P=f.type;f=f.memoizedProps,((p&335544128)===p||uv(P,f))&&Lg(b,A,P,f)}break;case 5:ba(f,p,b),f.flags&cs&&(A=f.stateNode,P=f.type,f=f.memoizedProps,((p&335544128)===p||uv(P,f))&&Lg(b,A,P,f));break;case 3:case 4:Ts?(A=Jt,Jt=Td(f.stateNode.containerInfo),ba(f,p,b),Jt=A):ba(f,p,b);break;case 22:f.memoizedState===null&&(A=f.alternate,A!==null&&A.memoizedState!==null?(A=cs,cs=16777216,ba(f,p,b),cs=A):ba(f,p,b));break;default:ba(f,p,b)}}function yg(f){var p=f.alternate;if(p!==null&&(f=p.child,f!==null)){p.child=null;do p=f.sibling,f.sibling=null,f=p;while(f!==null)}}function Bu(f){var p=f.deletions;if((f.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var A=p[b];si=A,ns(A,f)}yg(f)}if(f.subtreeFlags&10256)for(f=f.child;f!==null;)Cg(f),f=f.sibling}function Cg(f){switch(f.tag){case 0:case 11:case 15:Bu(f),f.flags&2048&&Ca(9,f,f.return);break;case 3:Bu(f);break;case 12:Bu(f);break;case 22:var p=f.stateNode;f.memoizedState!==null&&p._visibility&2&&(f.return===null||f.return.tag!==13)?(p._visibility&=-3,pd(f)):Bu(f);break;default:Bu(f)}}function pd(f){var p=f.deletions;if((f.flags&16)!==0){if(p!==null)for(var b=0;b<p.length;b++){var A=p[b];si=A,ns(A,f)}yg(f)}for(f=f.child;f!==null;){switch(p=f,p.tag){case 0:case 11:case 15:Ca(8,p,p.return),pd(p);break;case 22:b=p.stateNode,b._visibility&2&&(b._visibility&=-3,pd(p));break;default:pd(p)}f=f.sibling}}function ns(f,p){for(;si!==null;){var b=si;switch(b.tag){case 0:case 11:case 15:Ca(8,b,p);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var A=b.memoizedState.cachePool.pool;A!=null&&A.refCount++}break;case 24:fo(b.memoizedState.cache)}if(A=b.child,A!==null)A.return=b,si=A;else e:for(b=f;si!==null;){A=si;var P=A.sibling,O=A.return;if(Jm(A),A===b){si=null;break e}if(P!==null){P.return=O,si=P;break e}si=O}}}function cl(f){var p=ht(f);if(p!=null){if(typeof p.memoizedProps["data-testname"]!="string")throw Error(r(364));return p}if(f=ii(f),f===null)throw Error(r(362));return f.stateNode.current}function ul(f,p){var b=f.tag;switch(p.$$typeof){case Fs:if(f.type===p.value)return!0;break;case th:e:{for(p=p.value,f=[f,0],b=0;b<f.length;){var A=f[b++],P=A.tag,O=f[b++],I=p[O];if(P!==5&&P!==26&&P!==27||!vl(A)){for(;I!=null&&ul(A,I);)O++,I=p[O];if(O===p.length){p=!0;break e}else for(A=A.child;A!==null;)f.push(A,O),A=A.sibling}}p=!1}return p;case nh:if((b===5||b===26||b===27)&&pv(f.stateNode,p.value))return!0;break;case El:if((b===5||b===6||b===26||b===27)&&(f=Ad(f),f!==null&&0<=f.indexOf(p.value)))return!0;break;case Fd:if((b===5||b===26||b===27)&&(f=f.memoizedProps["data-testname"],typeof f=="string"&&f.toLowerCase()===p.value.toLowerCase()))return!0;break;default:throw Error(r(365))}return!1}function Iu(f){switch(f.$$typeof){case Fs:return"<"+(g(f.value)||"Unknown")+">";case th:return":has("+(Iu(f)||"")+")";case nh:return'[role="'+f.value+'"]';case El:return'"'+f.value+'"';case Fd:return'[data-testname="'+f.value+'"]';default:throw Error(r(365))}}function Hu(f,p){var b=[];f=[f,0];for(var A=0;A<f.length;){var P=f[A++],O=P.tag,I=f[A++],ee=p[I];if(O!==5&&O!==26&&O!==27||!vl(P)){for(;ee!=null&&ul(P,ee);)I++,ee=p[I];if(I===p.length)b.push(P);else for(P=P.child;P!==null;)f.push(P,I),P=P.sibling}}return b}function Hr(f,p){if(!Si)throw Error(r(363));f=cl(f),f=Hu(f,p),p=[],f=Array.from(f);for(var b=0;b<f.length;){var A=f[b++],P=A.tag;if(P===5||P===26||P===27)vl(A)||p.push(A.stateNode);else for(A=A.child;A!==null;)f.push(A),A=A.sibling}return p}function An(){return(St&2)!==0&&Mt!==0?Mt&-Mt:Xe.T!==null?Em():Yu()}function xo(){if(Tr===0)if((Mt&536870912)===0||Dt){var f=Ac;Ac<<=1,(Ac&3932160)===0&&(Ac=262144),Tr=f}else Tr=536870912;return f=Wr.current,f!==null&&(f.flags|=32),Tr}function Hn(f,p,b){(f===yt&&(en===2||en===9)||f.cancelPendingCommit!==null)&&(qn(f,0),Sa(f,Mt,Tr,!1)),k(f,b),((St&2)===0||f!==yt)&&(f===yt&&((St&2)===0&&(Dl|=b),Un===4&&Sa(f,Mt,Tr,!1)),Sn(f))}function Ys(f,p,b){if((St&6)!==0)throw Error(r(327));var A=!b&&(p&127)===0&&(p&f.expiredLanes)===0||_(f,p),P=A?eb(f,p):xa(f,p,!0),O=A;do{if(P===0){Tl&&!A&&Sa(f,p,0,!1);break}else{if(b=f.current.alternate,O&&!QC(b)){P=xa(f,p,!1),O=!1;continue}if(P===2){if(O=p,f.errorRecoveryDisabledLanes&O)var I=0;else I=f.pendingLanes&-536870913,I=I!==0?I:I&536870912?536870912:0;if(I!==0){p=I;e:{var ee=f;P=kd;var ge=En&&ee.current.memoizedState.isDehydrated;if(ge&&(qn(ee,I).flags|=256),I=xa(ee,I,!1),I!==2){if(Rl&&!ge){ee.errorRecoveryDisabledLanes|=O,Dl|=O,P=4;break e}O=qr,qr=P,O!==null&&(qr===null?qr=O:qr.push.apply(qr,O))}P=I}if(O=!1,P!==2)continue}}if(P===1){qn(f,0),Sa(f,p,0,!0);break}e:{switch(A=f,O=P,O){case 0:case 1:throw Error(r(345));case 4:if((p&4194048)!==p)break;case 6:Sa(A,p,Tr,!Qs);break e;case 2:qr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((p&62914560)===p&&(P=Nd+300-lr(),10<P)){if(Sa(A,p,Tr,!Qs),T(A,0,!0)!==0)break e;Ba=p,A.timeoutHandle=cv(wa.bind(null,A,b,qr,Bd,tp,p,Tr,Dl,rh,Qs,O,"Throttled",-0,0),P);break e}wa(A,b,qr,Bd,tp,p,Tr,Dl,rh,Qs,O,null,-0,0)}}break}while(!0);Sn(f)}function wa(f,p,b,A,P,O,I,ee,ge,Ae,_e,Te,Ne,lt){if(f.timeoutHandle=Vr,Te=p.subtreeFlags,Te&8192||(Te&16785408)===16785408){Te=hv(),ll(p,O,Te);var ki=(O&62914560)===O?Nd-lr():(O&4194048)===O?Pc-lr():0;if(ki=ob(Te,ki),ki!==null){Ba=O,f.cancelPendingCommit=ki(Ea.bind(null,f,p,O,b,A,P,I,ee,ge,_e,Te,null,Ne,lt)),Sa(f,O,I,!Ae);return}}Ea(f,p,O,b,A,P,I,ee,ge)}function QC(f){for(var p=f;;){var b=p.tag;if((b===0||b===11||b===15)&&p.flags&16384&&(b=p.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var A=0;A<b.length;A++){var P=b[A],O=P.getSnapshot;P=P.value;try{if(!ri(O(),P))return!1}catch{return!1}}if(b=p.child,p.subtreeFlags&16384&&b!==null)b.return=p,p=b;else{if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function Sa(f,p,b,A){p&=~ih,p&=~Dl,f.suspendedLanes|=p,f.pingedLanes&=~p,A&&(f.warmLanes|=p),A=f.expirationTimes;for(var P=p;0<P;){var O=31-Ur(P),I=1<<O;A[O]=-1,P&=~I}b!==0&&H(f,b,p)}function bg(){return(St&6)===0?(go(0),!1):!0}function wg(){if(xt!==null){if(en===0)var f=xt.return;else f=xt,$s=gn=null,Jh(f),Sl=null,Tc=0,f=xt;for(;f!==null;)XC(f.alternate,f),f=f.return;xt=null}}function qn(f,p){var b=f.timeoutHandle;b!==Vr&&(f.timeoutHandle=Vr,ab(b)),b=f.cancelPendingCommit,b!==null&&(f.cancelPendingCommit=null,b()),Ba=0,wg(),yt=f,xt=b=rs(f.current,null),Mt=p,en=0,yi=null,Qs=!1,Tl=_(f,p),Rl=!1,rh=Tr=ih=Dl=ko=Un=0,qr=kd=null,tp=!1,(p&8)!==0&&(p|=p&32);var A=f.entangledLanes;if(A!==0)for(f=f.entanglements,A&=p;0<A;){var P=31-Ur(A),O=1<<P;p|=f[P],A&=~O}return Na=p,Cu(),b}function fn(f,p){dt=null,Xe.H=ls,p===Ti||p===Os?(p=jf(),en=3):p===Jg?(p=jf(),en=4):en=p===Er?8:p!==null&&typeof p=="object"&&typeof p.then=="function"?6:1,yi=p,xt===null&&(Un=1,ug(f,oe(p,f.current)))}function _t(){var f=Wr.current;return f===null?!0:(Mt&4194048)===Mt?Ar===null:(Mt&62914560)===Mt||(Mt&536870912)!==0?f===Ar:!1}function Ao(){var f=Xe.H;return Xe.H=ls,f===null?ls:f}function is(){var f=Xe.A;return Xe.A=eh,f}function Gu(){Un=4,Qs||(Mt&4194048)!==Mt&&Wr.current!==null||(Tl=!0),(ko&134217727)===0&&(Dl&134217727)===0||yt===null||Sa(yt,Mt,Tr,!1)}function xa(f,p,b){var A=St;St|=2;var P=Ao(),O=is();(yt!==f||Mt!==p)&&(Bd=null,qn(f,p)),p=!1;var I=Un;e:do try{if(en!==0&&xt!==null){var ee=xt,ge=yi;switch(en){case 8:wg(),I=6;break e;case 3:case 2:case 9:case 6:Wr.current===null&&(p=!0);var Ae=en;if(en=0,yi=null,Aa(f,ee,ge,Ae),b&&Tl){I=0;break e}break;default:Ae=en,en=0,yi=null,Aa(f,ee,ge,Ae)}}JC(),I=Un;break}catch(_e){fn(f,_e)}while(!0);return p&&f.shellSuspendCounter++,$s=gn=null,St=A,Xe.H=P,Xe.A=O,xt===null&&(yt=null,Mt=0,Cu()),I}function JC(){for(;xt!==null;)hl(xt)}function eb(f,p){var b=St;St|=2;var A=Ao(),P=is();yt!==f||Mt!==p?(Bd=null,Ml=lr()+500,qn(f,p)):Tl=_(f,p);e:do try{if(en!==0&&xt!==null){p=xt;var O=yi;t:switch(en){case 1:en=0,yi=null,Aa(f,p,O,1);break;case 2:case 9:if(mu(O)){en=0,yi=null,Sg(p);break}p=function(){en!==2&&en!==9||yt!==f||(en=7),Sn(f)},O.then(p,p);break e;case 3:en=7;break e;case 4:en=5;break e;case 7:mu(O)?(en=0,yi=null,Sg(p)):(en=0,yi=null,Aa(f,p,O,7));break;case 5:var I=null;switch(xt.tag){case 26:I=xt.memoizedState;case 5:case 27:var ee=xt,ge=ee.type,Ae=ee.pendingProps;if(I?Bv(I):Gn(ee.stateNode,ge,Ae)){en=0,yi=null;var _e=ee.sibling;if(_e!==null)xt=_e;else{var Te=ee.return;Te!==null?(xt=Te,Vu(Te)):xt=null}break t}}en=0,yi=null,Aa(f,p,O,5);break;case 6:en=0,yi=null,Aa(f,p,O,6);break;case 8:wg(),Un=6;break e;default:throw Error(r(462))}}zu();break}catch(Ne){fn(f,Ne)}while(!0);return $s=gn=null,Xe.H=A,Xe.A=P,St=b,xt!==null?0:(yt=null,Mt=0,Cu(),Un)}function zu(){for(;xt!==null&&!Ub();)hl(xt)}function hl(f){var p=Km(f.alternate,f,Na);f.memoizedProps=f.pendingProps,p===null?Vu(f):xt=p}function Sg(f){var p=f,b=p.alternate;switch(p.tag){case 15:case 0:p=zm(b,p,p.pendingProps,p.type,void 0,Mt);break;case 11:p=zm(b,p,p.pendingProps,p.type.render,p.ref,Mt);break;case 5:Jh(p);default:XC(b,p),p=xt=Eg(p,Na),p=Km(b,p,Na)}f.memoizedProps=f.pendingProps,p===null?Vu(f):xt=p}function Aa(f,p,b,A){$s=gn=null,Jh(p),Sl=null,Tc=0;var P=p.return;try{if(bx(f,P,p,b,Mt)){Un=1,ug(f,oe(b,f.current)),xt=null;return}}catch(O){if(P!==null)throw xt=P,O;Un=1,ug(f,oe(b,f.current)),xt=null;return}p.flags&32768?(Dt||A===1?f=!0:Tl||(Mt&536870912)!==0?f=!1:(Qs=f=!0,(A===2||A===9||A===3||A===6)&&(A=Wr.current,A!==null&&A.tag===13&&(A.flags|=16384))),dl(p,f)):Vu(p)}function Vu(f){var p=f;do{if((p.flags&32768)!==0){dl(p,Qs);return}f=p.return;var b=YC(p.alternate,p,Na);if(b!==null){xt=b;return}if(p=p.sibling,p!==null){xt=p;return}xt=p=f}while(p!==null);Un===0&&(Un=5)}function dl(f,p){do{var b=$m(f.alternate,f);if(b!==null){b.flags&=32767,xt=b;return}if(b=f.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!p&&(f=f.sibling,f!==null)){xt=f;return}xt=f=b}while(f!==null);Un=6,xt=null}function Ea(f,p,b,A,P,O,I,ee,ge){f.cancelPendingCommit=null;do Ra();while(Ci!==0);if((St&6)!==0)throw Error(r(327));if(p!==null){if(p===f.current)throw Error(r(177));if(O=p.lanes|p.childLanes,O|=Rc,B(f,b,O,I,ee,ge),f===yt&&(xt=yt=null,Mt=0),Oc=p,Bo=f,Ba=b,sh=O,np=P,qv=A,(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?(f.callbackNode=null,f.callbackPriority=0,mi(Dd,function(){return md(),null})):(f.callbackNode=null,f.callbackPriority=0),A=(p.flags&13878)!==0,(p.subtreeFlags&13878)!==0||A){A=Xe.T,Xe.T=null,P=Es(),Rt(2),I=St,St|=4;try{wx(f,p,b)}finally{St=I,Rt(P),Xe.T=A}}Ci=1,Eo(),Ta(),xg()}}function Eo(){if(Ci===1){Ci=0;var f=Bo,p=Oc,b=(p.flags&13878)!==0;if((p.subtreeFlags&13878)!==0||b){b=Xe.T,Xe.T=null;var A=Es();Rt(2);var P=St;St|=4;try{gd(p,f),sb(f.containerInfo)}finally{St=P,Rt(A),Xe.T=b}}f.current=p,Ci=2}}function Ta(){if(Ci===2){Ci=0;var f=Bo,p=Oc,b=(p.flags&8772)!==0;if((p.subtreeFlags&8772)!==0||b){b=Xe.T,Xe.T=null;var A=Es();Rt(2);var P=St;St|=4;try{ZC(f,p.alternate,p)}finally{St=P,Rt(A),Xe.T=b}}Ci=3}}function xg(){if(Ci===4||Ci===3){Ci=0,Hv();var f=Bo,p=Oc,b=Ba,A=qv;(p.subtreeFlags&10256)!==0||(p.flags&10256)!==0?Ci=5:(Ci=0,Oc=Bo=null,Ag(f,f.pendingLanes));var P=f.pendingLanes;if(P===0&&(No=null),X(b),p=p.stateNode,jr&&typeof jr.onCommitFiberRoot=="function")try{jr.onCommitFiberRoot(Ec,p,void 0,(p.current.flags&128)===128)}catch{}if(A!==null){p=Xe.T,P=Es(),Rt(2),Xe.T=null;try{for(var O=f.onRecoverableError,I=0;I<A.length;I++){var ee=A[I];O(ee.value,{componentStack:ee.stack})}}finally{Xe.T=p,Rt(P)}}(Ba&3)!==0&&Ra(),Sn(f),P=f.pendingLanes,(b&261930)!==0&&(P&42)!==0?f===Id?Gt++:(Gt=0,Id=f):Gt=0,En&&Ed(),go(0)}}function Ag(f,p){(f.pooledCacheLanes&=p)===0&&(p=f.pooledCache,p!=null&&(f.pooledCache=null,fo(p)))}function Ra(){return Eo(),Ta(),xg(),md()}function md(){if(Ci!==5)return!1;var f=Bo,p=sh;sh=0;var b=X(Ba),A=32>b?32:b;b=Xe.T;var P=Es();try{Rt(A),Xe.T=null,A=np,np=null;var O=Bo,I=Ba;if(Ci=0,Oc=Bo=null,Ba=0,(St&6)!==0)throw Error(r(331));var ee=St;if(St|=4,Cg(O.current),vg(O,O.current,I,A),St=ee,go(0,!1),jr&&typeof jr.onPostCommitFiberRoot=="function")try{jr.onPostCommitFiberRoot(Ec,O)}catch{}return!0}finally{Rt(P),Xe.T=b,Ag(f,p)}}function fl(f,p,b){p=oe(b,p),p=Hm(f.stateNode,p,2),f=el(f,p,2),f!==null&&(k(f,2),Sn(f))}function it(f,p,b){if(f.tag===3)fl(f,f,b);else for(;p!==null;){if(p.tag===3){fl(p,f,b);break}else if(p.tag===1){var A=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(No===null||!No.has(A))){f=oe(b,f),b=NC(2),A=el(p,b,2),A!==null&&(BC(b,A,p,f),k(A,2),Sn(A));break}}p=p.return}}function Uu(f,p,b){var A=f.pingCache;if(A===null){A=f.pingCache=new us;var P=new Set;A.set(p,P)}else P=A.get(p),P===void 0&&(P=new Set,A.set(p,P));P.has(b)||(Rl=!0,P.add(b),f=tb.bind(null,f,p,b),p.then(f,f))}function tb(f,p,b){var A=f.pingCache;A!==null&&A.delete(p),f.pingedLanes|=f.suspendedLanes&b,f.warmLanes&=~b,yt===f&&(Mt&b)===b&&(Un===4||Un===3&&(Mt&62914560)===Mt&&300>lr()-Nd?(St&2)===0&&qn(f,0):ih|=b,rh===Mt&&(rh=0)),Sn(f)}function nb(f,p){p===0&&(p=F()),f=Qo(f,p),f!==null&&(k(f,p),Sn(f))}function Sx(f){var p=f.memoizedState,b=0;p!==null&&(b=p.retryLane),nb(f,b)}function xx(f,p){var b=0;switch(f.tag){case 31:case 13:var A=f.stateNode,P=f.memoizedState;P!==null&&(b=P.retryLane);break;case 19:A=f.stateNode;break;case 22:A=f.stateNode._retryCache;break;default:throw Error(r(314))}A!==null&&A.delete(p),nb(f,b)}function mi(f,p){return Rd(f,p)}function tv(f,p,b,A){this.tag=f,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dc(f){return f=f.prototype,!(!f||!f.isReactComponent)}function rs(f,p){var b=f.alternate;return b===null?(b=n(f.tag,p,f.key,f.mode),b.elementType=f.elementType,b.type=f.type,b.stateNode=f.stateNode,b.alternate=f,f.alternate=b):(b.pendingProps=p,b.type=f.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=f.flags&65011712,b.childLanes=f.childLanes,b.lanes=f.lanes,b.child=f.child,b.memoizedProps=f.memoizedProps,b.memoizedState=f.memoizedState,b.updateQueue=f.updateQueue,p=f.dependencies,b.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},b.sibling=f.sibling,b.index=f.index,b.ref=f.ref,b.refCleanup=f.refCleanup,b}function Eg(f,p){f.flags&=65011714;var b=f.alternate;return b===null?(f.childLanes=0,f.lanes=p,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=b.childLanes,f.lanes=b.lanes,f.child=b.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=b.memoizedProps,f.memoizedState=b.memoizedState,f.updateQueue=b.updateQueue,f.type=b.type,p=b.dependencies,f.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext}),f}function To(f,p,b,A,P,O){var I=0;if(A=f,typeof f=="function")dc(f)&&(I=1);else if(typeof f=="string")I=Ts&&xi?Gg(f,b,Li.current)?26:Iv(f)?27:5:Ts?Gg(f,b,Li.current)?26:5:xi&&Iv(f)?27:5;else e:switch(f){case bd:return f=n(31,b,p,P),f.elementType=bd,f.lanes=O,f;case mc:return xs(b.children,P,O,p);case vc:I=8,P|=24;break;case yc:return f=n(12,b,p,P|2),f.elementType=yc,f.lanes=O,f;case Mg:return f=n(13,b,p,P),f.elementType=Mg,f.lanes=O,f;case Ro:return f=n(19,b,p,P),f.elementType=Ro,f.lanes=O,f;default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case As:I=10;break e;case Cd:I=9;break e;case ju:I=11;break e;case _g:I=14;break e;case br:I=16,A=null;break e}I=29,b=Error(r(130,f===null?"null":typeof f,"")),A=null}return p=n(I,b,p,P),p.elementType=f,p.type=A,p.lanes=O,p}function xs(f,p,b,A){return f=n(7,f,A,p),f.lanes=b,f}function nv(f,p,b){return f=n(6,f,null,p),f.lanes=b,f}function iv(f){var p=n(18,null,null,0);return p.stateNode=f,p}function rv(f,p,b){return p=n(4,f.children!==null?f.children:[],f.key,p),p.lanes=b,p.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},p}function ib(f,p,b,A,P,O,I,ee,ge){this.tag=1,this.containerInfo=f,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Vr,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=L(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=L(0),this.hiddenUpdates=L(null),this.identifierPrefix=A,this.onUncaughtError=P,this.onCaughtError=O,this.onRecoverableError=I,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ge,this.incompleteTransitions=new Map}function gl(f,p,b,A,P,O,I,ee,ge,Ae,_e,Te){return f=new ib(f,p,b,I,ge,Ae,_e,Te,ee),p=1,O===!0&&(p|=24),O=n(3,null,null,p),f.current=O,O.stateNode=f,p=fa(),p.refCount++,f.pooledCache=p,p.refCount++,O.memoizedState={element:A,isDehydrated:b,cache:p},rr(O),f}function Tg(f){return f?(f=Ma,f):Ma}function vd(f){var p=f._reactInternals;if(p===void 0)throw typeof f.render=="function"?Error(r(188)):(f=Object.keys(f).join(","),Error(r(268,f)));return f=o(p),f=f!==null?l(f):null,f===null?null:qu(f.stateNode)}function sv(f,p,b,A,P,O){P=Tg(P),A.context===null?A.context=P:A.pendingContext=P,A=ga(p),A.payload={element:b},O=O===void 0?null:O,O!==null&&(A.callback=O),b=el(f,A,p),b!==null&&(Hn(b,f,p),$h(b,f,p))}function fc(f,p){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var b=f.retryLane;f.retryLane=b!==0&&b<p?b:p}}function yd(f,p){fc(f,p),(f=f.alternate)&&fc(f,p)}var mt={},Rg=Rf(),Gr=nM(),Dg=Object.assign,gc=Symbol.for("react.element"),Da=Symbol.for("react.transitional.element"),pc=Symbol.for("react.portal"),mc=Symbol.for("react.fragment"),vc=Symbol.for("react.strict_mode"),yc=Symbol.for("react.profiler"),Cd=Symbol.for("react.consumer"),As=Symbol.for("react.context"),ju=Symbol.for("react.forward_ref"),Mg=Symbol.for("react.suspense"),Ro=Symbol.for("react.suspense_list"),_g=Symbol.for("react.memo"),br=Symbol.for("react.lazy"),bd=Symbol.for("react.activity"),av=Symbol.for("react.memo_cache_sentinel"),Do=Symbol.iterator,pl=Symbol.for("react.client.reference"),ml=Array.isArray,Xe=Rg.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ov=e.rendererVersion,wd=e.rendererPackageName,Wu=e.extraDevToolsConfig,qu=e.getPublicInstance,rb=e.getRootHostContext,Ku=e.getChildHostContext,Pg=e.prepareForCommit,sb=e.resetAfterCommit,lv=e.createInstance;e.cloneMutableInstance;var Sd=e.appendInitialChild,zr=e.finalizeInitialChildren,wr=e.shouldSetTextContent,Mo=e.createTextInstance;e.cloneMutableTextInstance;var cv=e.scheduleTimeout,ab=e.cancelTimeout,Vr=e.noTimeout,ni=e.isPrimaryRenderer;e.warnsIfNotActing;var Pt=e.supportsMutation,ss=e.supportsPersistence,En=e.supportsHydration,ht=e.getInstanceFromNode;e.beforeActiveInstanceBlur;var ln=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Rt=e.setCurrentUpdatePriority,Es=e.getCurrentUpdatePriority,Yu=e.resolveUpdatePriority;e.trackSchedulerEvent,e.resolveEventType,e.resolveEventTimeStamp;var Cc=e.shouldAttemptEagerTransition,Og=e.detachDeletedInstance;e.requestPostPaintCallback;var xd=e.maySuspendCommit,Xu=e.maySuspendCommitOnUpdate,uv=e.maySuspendCommitInSyncRender,Gn=e.preloadInstance,hv=e.startSuspendingCommit,Lg=e.suspendInstance;e.suspendOnActiveViewTransition;var ob=e.waitForCommitToBeReady;e.getSuspendedCommitReason;var bc=e.NotPendingTransition,wc=e.HostTransitionContext,dv=e.resetFormInstance;e.bindToConsole;var fv=e.supportsMicrotasks,gv=e.scheduleMicrotask,Si=e.supportsTestSelectors,ii=e.findFiberRoot,Fg=e.getBoundingRect,Ad=e.getTextContent,vl=e.isHiddenSubtree,pv=e.matchAccessibilityRole,_o=e.setFocusIfFocusable,kg=e.setupIntersectionObserver,mv=e.appendChild,vv=e.appendChildToContainer,lb=e.commitTextUpdate,cb=e.commitMount,ub=e.commitUpdate,hb=e.insertBefore,db=e.insertInContainerBefore,fb=e.removeChild,yv=e.removeChildFromContainer,Cv=e.resetTextContent,Ax=e.hideInstance,gb=e.hideTextInstance,pb=e.unhideInstance,mb=e.unhideTextInstance;e.cancelViewTransitionName,e.cancelRootViewTransitionName,e.restoreRootViewTransitionName,e.cloneRootViewTransitionContainer,e.removeRootViewTransitionClone,e.measureClonedInstance,e.hasInstanceChanged,e.hasInstanceAffectedParent,e.startViewTransition,e.startGestureTransition,e.stopViewTransition,e.getCurrentGestureOffset,e.createViewTransitionInstance;var bv=e.clearContainer;e.createFragmentInstance,e.updateFragmentInstanceFiber,e.commitNewChildToFragmentInstance,e.deleteChildFromFragmentInstance;var vb=e.cloneInstance,wv=e.createContainerChildSet,Sv=e.appendChildToContainerChildSet,yb=e.finalizeContainerChildren,xv=e.replaceContainerChildren,Cb=e.cloneHiddenInstance,Av=e.cloneHiddenTextInstance,yl=e.isSuspenseInstancePending,Ng=e.isSuspenseInstanceFallback,Bg=e.getSuspenseInstanceFallbackErrorDetails,Ig=e.registerSuspenseInstanceRetry,bb=e.canHydrateFormStateMarker,Ev=e.isFormStateMarkerMatching,wb=e.getNextHydratableSibling,Sb=e.getNextHydratableSiblingAfterSingleton,xb=e.getFirstHydratableChild,Ab=e.getFirstHydratableChildWithinContainer,Eb=e.getFirstHydratableChildWithinActivityInstance,Tb=e.getFirstHydratableChildWithinSuspenseInstance,Tv=e.getFirstHydratableChildWithinSingleton,Rb=e.canHydrateInstance,Db=e.canHydrateTextInstance,Rv=e.canHydrateActivityInstance,Mb=e.canHydrateSuspenseInstance,_b=e.hydrateInstance,Ex=e.hydrateTextInstance,Dv=e.hydrateActivityInstance,Pb=e.hydrateSuspenseInstance,Ob=e.getNextHydratableInstanceAfterActivityInstance,Mv=e.getNextHydratableInstanceAfterSuspenseInstance,Lb=e.commitHydratedInstance,Fb=e.commitHydratedContainer,Tx=e.commitHydratedActivityInstance,Rx=e.commitHydratedSuspenseInstance,kb=e.finalizeHydratedChildren,Ed=e.flushHydrationEvents;e.clearActivityBoundary;var _v=e.clearSuspenseBoundary;e.clearActivityBoundaryFromContainer;var Hg=e.clearSuspenseBoundaryFromContainer,Nb=e.hideDehydratedBoundary,Bb=e.unhideDehydratedBoundary,$u=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var Ib=e.validateHydratableInstance,Pv=e.validateHydratableTextInstance,Ts=e.supportsResources,Gg=e.isHostHoistableType,Td=e.getHoistableRoot,Ov=e.getResource,Lv=e.acquireResource,Cl=e.releaseResource,Hb=e.hydrateHoistable,Fv=e.mountHoistable,kv=e.unmountHoistable,zg=e.createHoistableInstance,Gb=e.prepareToCommitHoistables,Nv=e.mayResourceSuspendCommit,Bv=e.preloadResource,zb=e.suspendResource,xi=e.supportsSingletons,Vg=e.resolveSingletonInstance,vi=e.acquireSingletonInstance,Oi=e.releaseSingletonInstance,Iv=e.isHostSingletonType,Sc=e.isSingletonScope,Ug=[],xc=-1,Ma={},Ur=Math.clz32?Math.clz32:S,jg=Math.log,Vb=Math.LN2,Wg=256,Ac=262144,Zu=4194304,Rd=Gr.unstable_scheduleCallback,qg=Gr.unstable_cancelCallback,Ub=Gr.unstable_shouldYield,Hv=Gr.unstable_requestPaint,lr=Gr.unstable_now,Kg=Gr.unstable_ImmediatePriority,jb=Gr.unstable_UserBlockingPriority,Dd=Gr.unstable_NormalPriority,Yg=Gr.unstable_IdlePriority,Gv=Gr.log,Wb=Gr.unstable_setDisableYieldValue,Ec=null,jr=null,ri=typeof Object.is=="function"?Object.is:$,Xg=typeof reportError=="function"?reportError:function(f){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var p=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof f=="object"&&f!==null&&typeof f.message=="string"?String(f.message):String(f),error:f});if(!window.dispatchEvent(p))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",f);return}console.error(f)},Dx=Object.prototype.hasOwnProperty,$g,_a,Md=!1,zv=new WeakMap,Po=[],Pa=0,cn=null,_d=0,Rs=[],as=0,Ds=null,Yi=1,Xs="",Li=v(null),Oo=v(null),Xi=v(null),Pd=v(null),Ai=null,Tn=null,Dt=!1,Oa=null,Sr=!1,Zg=Error(r(519)),Ms=v(null),gn=null,$s=null,qb=typeof AbortController<"u"?AbortController:function(){var f=[],p=this.signal={aborted:!1,addEventListener:function(b,A){f.push(A)}};this.abort=function(){p.aborted=!0,f.forEach(function(b){return b()})}},Fi=Gr.unstable_scheduleCallback,Mx=Gr.unstable_NormalPriority,Rn={$$typeof:As,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Od=null,Qt=null,cr=!1,_s=!1,Qg=!1,bl=0,Qu=null,Vv=0,Lo=0,Ei=null,Ps=Xe.S;Xe.S=function(f,p){Pc=lr(),typeof p=="object"&&p!==null&&typeof p.then=="function"&&vx(f,p),Ps!==null&&Ps(f,p)};var wl=v(null),Ti=Error(r(460)),Jg=Error(r(474)),Os=Error(r(542)),La={then:function(){}},xr=null,Sl=null,Tc=0,$i=Tm(!0),Uv=Tm(!1),Zi=[],Fa=0,Rc=0,os=!1,ep=!1,Dc=v(null),xl=v(0),Wr=v(null),Ar=null,Kn=v(0),Fo=0,dt=null,qe=null,st=null,vt=!1,gt=!1,Ft=!1,ur=0,Ls=0,Zs=null,jv=0,ls={readContext:Vt,use:xu,useCallback:Bn,useContext:Bn,useEffect:Bn,useImperativeHandle:Bn,useLayoutEffect:Bn,useInsertionEffect:Bn,useMemo:Bn,useReducer:Bn,useRef:Bn,useState:Bn,useDebugValue:Bn,useDeferredValue:Bn,useTransition:Bn,useSyncExternalStore:Bn,useId:Bn,useHostTransitionStatus:Bn,useFormState:Bn,useActionState:Bn,useOptimistic:Bn,useMemoCache:Bn,useCacheRefresh:Bn};ls.useEffectEvent=Bn;var zn={readContext:Vt,use:xu,useCallback:function(f,p){return sr().memoizedState=[f,p===void 0?null:p],f},useContext:Vt,useEffect:nd,useImperativeHandle:function(f,p,b){b=b!=null?b.concat([f]):null,ac(4194308,4,Ru.bind(null,p,f),b)},useLayoutEffect:function(f,p){return ac(4194308,4,f,p)},useInsertionEffect:function(f,p){ac(4,2,f,p)},useMemo:function(f,p){var b=sr();p=p===void 0?null:p;var A=f();if(Ft){ne(!0);try{f()}finally{ne(!1)}}return b.memoizedState=[A,p],A},useReducer:function(f,p,b){var A=sr();if(b!==void 0){var P=b(p);if(Ft){ne(!0);try{b(p)}finally{ne(!1)}}}else P=p;return A.memoizedState=A.baseState=P,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:P},A.queue=f,f=f.dispatch=Cx.bind(null,dt,f),[A.memoizedState,f]},useRef:function(f){var p=sr();return f={current:f},p.memoizedState=f},useState:function(f){f=Pm(f);var p=f.queue,b=OC.bind(null,dt,p);return p.dispatch=b,[f.memoizedState,b]},useDebugValue:rd,useDeferredValue:function(f,p){var b=sr();return Mu(b,f,p)},useTransition:function(){var f=Pm(!1);return f=MC.bind(null,dt,f.queue,!0,!1),sr().memoizedState=f,[!1,f]},useSyncExternalStore:function(f,p,b){var A=dt,P=sr();if(Dt){if(b===void 0)throw Error(r(407));b=b()}else{if(b=p(),yt===null)throw Error(r(349));(Mt&127)!==0||EC(A,p,b)}P.memoizedState=b;var O={value:b,getSnapshot:p};return P.queue=O,nd(_m.bind(null,A,O,f),[f]),A.flags|=2048,ts(9,{destroy:void 0},Mm.bind(null,A,O,b,p),null),b},useId:function(){var f=sr(),p=yt.identifierPrefix;if(Dt){var b=Xs,A=Yi;b=(A&~(1<<32-Ur(A)-1)).toString(32)+b,p="_"+p+"R_"+b,b=ur++,0<b&&(p+="H"+b.toString(32)),p+="_"}else b=jv++,p="_"+p+"r_"+b.toString(32)+"_";return f.memoizedState=p},useHostTransitionStatus:Nm,useFormState:Lm,useActionState:Lm,useOptimistic:function(f){var p=sr();p.memoizedState=p.baseState=f;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return p.queue=b,p=og.bind(null,dt,!0,b),b.dispatch=p,[f,p]},useMemoCache:Zf,useCacheRefresh:function(){return sr().memoizedState=yx.bind(null,dt)},useEffectEvent:function(f){var p=sr(),b={impl:f};return p.memoizedState=b,function(){if((St&2)!==0)throw Error(r(440));return b.impl.apply(void 0,arguments)}}},ka={readContext:Vt,use:xu,useCallback:sg,useContext:Vt,useEffect:Tu,useImperativeHandle:DC,useInsertionEffect:rl,useLayoutEffect:id,useMemo:Du,useReducer:Co,useRef:rg,useState:function(){return Co(Ks)},useDebugValue:rd,useDeferredValue:function(f,p){var b=xn();return km(b,qe.memoizedState,f,p)},useTransition:function(){var f=Co(Ks)[0],p=xn().memoizedState;return[typeof f=="boolean"?f:ar(f),p]},useSyncExternalStore:rc,useId:ag,useHostTransitionStatus:Nm,useFormState:Au,useActionState:Au,useOptimistic:function(f,p){var b=xn();return ed(b,qe,f,p)},useMemoCache:Zf,useCacheRefresh:PC};ka.useEffectEvent=vr;var Al={readContext:Vt,use:xu,useCallback:sg,useContext:Vt,useEffect:Tu,useImperativeHandle:DC,useInsertionEffect:rl,useLayoutEffect:id,useMemo:Du,useReducer:Jf,useRef:rg,useState:function(){return Jf(Ks)},useDebugValue:rd,useDeferredValue:function(f,p){var b=xn();return qe===null?Mu(b,f,p):km(b,qe.memoizedState,f,p)},useTransition:function(){var f=Jf(Ks)[0],p=xn().memoizedState;return[typeof f=="boolean"?f:ar(f),p]},useSyncExternalStore:rc,useId:ag,useHostTransitionStatus:Nm,useFormState:Eu,useActionState:Eu,useOptimistic:function(f,p){var b=xn();return qe!==null?ed(b,qe,f,p):(b.baseState=f,[f,b.queue.dispatch])},useMemoCache:Zf,useCacheRefresh:PC};Al.useEffectEvent=vr;var Ld={enqueueSetState:function(f,p,b){f=f._reactInternals;var A=An(),P=ga(A);P.payload=p,b!=null&&(P.callback=b),p=el(f,P,A),p!==null&&(Hn(p,f,A),$h(p,f,A))},enqueueReplaceState:function(f,p,b){f=f._reactInternals;var A=An(),P=ga(A);P.tag=1,P.payload=p,b!=null&&(P.callback=b),p=el(f,P,A),p!==null&&(Hn(p,f,A),$h(p,f,A))},enqueueForceUpdate:function(f,p){f=f._reactInternals;var b=An(),A=ga(b);A.tag=2,p!=null&&(A.callback=p),p=el(f,A,b),p!==null&&(Hn(p,f,b),$h(p,f,b))}},Er=Error(r(461)),Cn=!1,Mc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},Yn=!1,Xn=!1,Ju=!1,Wv=typeof WeakSet=="function"?WeakSet:Set,si=null,Vn=null,ai=!1,Jt=null,cs=8192,eh={getCacheForType:function(f){var p=Vt(Rn),b=p.data.get(f);return b===void 0&&(b=f(),p.data.set(f,b)),b},cacheSignal:function(){return Vt(Rn).controller.signal}},Fs=0,th=1,nh=2,Fd=3,El=4;if(typeof Symbol=="function"&&Symbol.for){var _c=Symbol.for;Fs=_c("selector.component"),th=_c("selector.has_pseudo_class"),nh=_c("selector.role"),Fd=_c("selector.test_id"),El=_c("selector.text")}var us=typeof WeakMap=="function"?WeakMap:Map,St=0,yt=null,xt=null,Mt=0,en=0,yi=null,Qs=!1,Tl=!1,Rl=!1,Na=0,Un=0,ko=0,Dl=0,ih=0,Tr=0,rh=0,kd=null,qr=null,tp=!1,Nd=0,Pc=0,Ml=1/0,Bd=null,No=null,Ci=0,Bo=null,Oc=null,Ba=0,sh=0,np=null,qv=null,Gt=0,Id=null;return mt.attemptContinuousHydration=function(f){if(f.tag===13||f.tag===31){var p=Qo(f,67108864);p!==null&&Hn(p,f,67108864),yd(f,67108864)}},mt.attemptHydrationAtCurrentPriority=function(f){if(f.tag===13||f.tag===31){var p=An();p=j(p);var b=Qo(f,p);b!==null&&Hn(b,f,p),yd(f,p)}},mt.attemptSynchronousHydration=function(f){switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var p=x(f.pendingLanes);if(p!==0){for(f.pendingLanes|=2,f.entangledLanes|=2;p;){var b=1<<31-Ur(p);f.entanglements[1]|=b,p&=~b}Sn(f),(St&6)===0&&(Ml=lr()+500,go(0))}}break;case 31:case 13:p=Qo(f,2),p!==null&&Hn(p,f,2),bg(),yd(f,2)}},mt.batchedUpdates=function(f,p){return f(p)},mt.createComponentSelector=function(f){return{$$typeof:Fs,value:f}},mt.createContainer=function(f,p,b,A,P,O,I,ee,ge,Ae){return gl(f,p,!1,null,b,A,O,null,I,ee,ge,Ae)},mt.createHasPseudoClassSelector=function(f){return{$$typeof:th,value:f}},mt.createHydrationContainer=function(f,p,b,A,P,O,I,ee,ge,Ae,_e,Te,Ne,lt){return f=gl(b,A,!0,f,P,O,ee,lt,ge,Ae,_e,Te),f.context=Tg(null),b=f.current,A=An(),A=j(A),P=ga(A),P.callback=p??null,el(b,P,A),p=A,f.current.lanes=p,k(f,p),Sn(f),f},mt.createPortal=function(f,p,b){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pc,key:A==null?null:""+A,children:f,containerInfo:p,implementation:b}},mt.createRoleSelector=function(f){return{$$typeof:nh,value:f}},mt.createTestNameSelector=function(f){return{$$typeof:Fd,value:f}},mt.createTextSelector=function(f){return{$$typeof:El,value:f}},mt.defaultOnCaughtError=function(f){console.error(f)},mt.defaultOnRecoverableError=function(f){Xg(f)},mt.defaultOnUncaughtError=function(f){Xg(f)},mt.deferredUpdates=function(f){var p=Xe.T,b=Es();try{return Rt(32),Xe.T=null,f()}finally{Rt(b),Xe.T=p}},mt.discreteUpdates=function(f,p,b,A,P){var O=Xe.T,I=Es();try{return Rt(2),Xe.T=null,f(p,b,A,P)}finally{Rt(I),Xe.T=O,St===0&&(Ml=lr()+500)}},mt.findAllNodes=Hr,mt.findBoundingRects=function(f,p){if(!Si)throw Error(r(363));p=Hr(f,p),f=[];for(var b=0;b<p.length;b++)f.push(Fg(p[b]));for(p=f.length-1;0<p;p--){b=f[p];for(var A=b.x,P=A+b.width,O=b.y,I=O+b.height,ee=p-1;0<=ee;ee--)if(p!==ee){var ge=f[ee],Ae=ge.x,_e=Ae+ge.width,Te=ge.y,Ne=Te+ge.height;if(A>=Ae&&O>=Te&&P<=_e&&I<=Ne){f.splice(p,1);break}else if(A!==Ae||b.width!==ge.width||Ne<O||Te>I){if(!(O!==Te||b.height!==ge.height||_e<A||Ae>P)){Ae>A&&(ge.width+=Ae-A,ge.x=A),_e<P&&(ge.width=P-Ae),f.splice(p,1);break}}else{Te>O&&(ge.height+=Te-O,ge.y=O),Ne<I&&(ge.height=I-Te),f.splice(p,1);break}}}return f},mt.findHostInstance=vd,mt.findHostInstanceWithNoPortals=function(f){return f=o(f),f=f!==null?u(f):null,f===null?null:qu(f.stateNode)},mt.findHostInstanceWithWarning=function(f){return vd(f)},mt.flushPassiveEffects=Ra,mt.flushSyncFromReconciler=function(f){var p=St;St|=1;var b=Xe.T,A=Es();try{if(Rt(2),Xe.T=null,f)return f()}finally{Rt(A),Xe.T=b,St=p,(St&6)===0&&go(0)}},mt.flushSyncWork=bg,mt.focusWithin=function(f,p){if(!Si)throw Error(r(363));for(f=cl(f),p=Hu(f,p),p=Array.from(p),f=0;f<p.length;){var b=p[f++],A=b.tag;if(!vl(b)){if((A===5||A===26||A===27)&&_o(b.stateNode))return!0;for(b=b.child;b!==null;)p.push(b),b=b.sibling}}return!1},mt.getFindAllNodesFailureDescription=function(f,p){if(!Si)throw Error(r(363));var b=0,A=[];f=[cl(f),0];for(var P=0;P<f.length;){var O=f[P++],I=O.tag,ee=f[P++],ge=p[ee];if((I!==5&&I!==26&&I!==27||!vl(O))&&(ul(O,ge)&&(A.push(Iu(ge)),ee++,ee>b&&(b=ee)),ee<p.length))for(O=O.child;O!==null;)f.push(O,ee),O=O.sibling}if(b<p.length){for(f=[];b<p.length;b++)f.push(Iu(p[b]));return`findAllNodes was able to match part of the selector:
  `+(A.join(" > ")+`

No matching component was found for:
  `)+f.join(" > ")}return null},mt.getPublicRootInstance=function(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 27:case 5:return qu(f.child.stateNode);default:return f.child.stateNode}},mt.injectIntoDevTools=function(){var f={bundleType:0,version:ov,rendererPackageName:wd,currentDispatcherRef:Xe,reconcilerVersion:"19.2.0"};if(Wu!==null&&(f.rendererConfig=Wu),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")f=!1;else{var p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(p.isDisabled||!p.supportsFiber)f=!0;else{try{Ec=p.inject(f),jr=p}catch{}f=!!p.checkDCE}}return f},mt.isAlreadyRendering=function(){return(St&6)!==0},mt.observeVisibleRects=function(f,p,b,A){if(!Si)throw Error(r(363));f=Hr(f,p);var P=kg(f,b,A).disconnect;return{disconnect:function(){P()}}},mt.shouldError=function(){return null},mt.shouldSuspend=function(){return!1},mt.startHostTransition=function(f,p,b,A){if(f.tag!==5)throw Error(r(476));var P=_C(f).queue;MC(f,P,p,bc,b===null?i:function(){var O=_C(f);return O.next===null&&(O=f.alternate.memoizedState),sd(f,O.next.queue,{},An()),b(A)})},mt.updateContainer=function(f,p,b,A){var P=p.current,O=An();return sv(P,O,f,p,b,A),O},mt.updateContainerSync=function(f,p,b,A){return sv(p.current,2,f,p,b,A),2},mt},t.exports.default=t.exports,Object.defineProperty(t.exports,"__esModule",{value:!0})})(uT)),uT.exports}var oF;function kpe(){return oF||(oF=1,cT.exports=Fpe()),cT.exports}var Npe=kpe();const Bpe=Wo(Npe);var hT={exports:{}},Fc={};var lF;function Ipe(){return lF||(lF=1,Fc.ConcurrentRoot=1,Fc.ContinuousEventPriority=8,Fc.DefaultEventPriority=32,Fc.DiscreteEventPriority=2,Fc.IdleEventPriority=268435456,Fc.LegacyRoot=0,Fc.NoEventPriority=0),Fc}var cF;function Hpe(){return cF||(cF=1,hT.exports=Ipe()),hT.exports}var W2=Hpe();const uF={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let hF=!1,dF=!1;const AS=".react-konva-event",Gpe=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,zpe=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,Vpe={};function q2(t,e,n=Vpe){if(!hF&&"zIndex"in e&&(console.warn(zpe),hF=!0),!dF&&e.draggable){var i=e.x!==void 0||e.y!==void 0,r=e.onDragEnd||e.onDragMove;i&&!r&&(console.warn(Gpe),dF=!0)}for(var s in n)if(!uF[s]){var a=s.slice(0,2)==="on",o=n[s]!==e[s];if(a&&o){var l=s.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),t.off(l,n[s])}var u=!e.hasOwnProperty(s);u&&t.setAttr(s,void 0)}var h=e._useStrictMode,g={},v=!1;const y={};for(var s in e)if(!uF[s]){var a=s.slice(0,2)==="on",w=n[s]!==e[s];if(a&&w){var l=s.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),e[s]&&(y[l]=e[s])}!a&&(e[s]!==n[s]||h&&e[s]!==t.getAttr(s))&&(v=!0,g[s]=e[s])}v&&(t.setAttrs(g),Wh(t));for(var l in y)t.off(l+AS),t.on(l+AS,y[l])}function Wh(t){if(!Fe.autoDrawEnabled){var e=t.getLayer()||t.getStage();e&&e.batchDraw()}}var dT=nM();const ez={},Upe={};nm.Node.prototype._applyProps=q2;let tz=W2.DefaultEventPriority;function jpe(t,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}t.add(e),Wh(t)}function Wpe(t,e,n){let i=nm[t];i||(console.error(`Konva has no node with the type ${t}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${t}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),i=nm.Group);const r={},s={};for(var a in e)if(a!=="ref"){var o=a.slice(0,2)==="on";o?s[a]=e[a]:r[a]=e[a]}const l=new i(r);return q2(l,s),l}function qpe(t,e,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${t}"`)}function Kpe(t,e,n){return!1}function Ype(t){return t}function Xpe(){return null}function $pe(){return null}function Zpe(t,e,n,i){return Upe}function Qpe(){}function Jpe(t){}function eme(t,e){return!1}function tme(){return ez}function nme(){return ez}const ime=setTimeout,rme=clearTimeout,sme=!0,ame=t=>{t()},ome=-1;function lme(t,e){return!1}const cme=!1,ume=!1,hme=!0,dme=!1,fme=!1;function gme(t,e){e.parent===t?e.moveToTop():t.add(e),Wh(t)}function pme(t,e){e.parent===t?e.moveToTop():t.add(e),Wh(t)}function nz(t,e,n){e._remove(),t.add(e),e.setZIndex(n.getZIndex()),Wh(t)}function mme(t,e,n){nz(t,e,n)}function vme(t,e){e.destroy(),e.off(AS),Wh(t)}function yme(t,e){e.destroy(),e.off(AS),Wh(t)}function Cme(t,e,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function bme(t,e,n){}function wme(t,e,n,i){q2(t,i,n)}function Sme(t){t.hide(),Wh(t)}function xme(t){}function Ame(t,e){(e.visible==null||e.visible)&&t.show()}function Eme(t,e){}function Tme(t){}function Rme(){}function Dme(){return null}function Mme(){}function _me(){}function Pme(){return W2.DefaultEventPriority}function Ome(){}function Lme(){return null}function Fme(t){tz=t}function kme(){return tz}function Nme(){return W2.DiscreteEventPriority}function Bme(){return!1}function Ime(){}function Hme(){return null}function Gme(){return-1.1}function zme(){}function Vme(){return!1}function Ume(){return!0}function jme(){}function Wme(){}function qme(){return null}const Kme=null,Yme=Se.createContext(null);function Xme(){}const $me=Object.freeze(Object.defineProperty({__proto__:null,HostTransitionContext:Yme,NotPendingTransition:Kme,afterActiveInstanceBlur:_me,appendChild:gme,appendChildToContainer:pme,appendInitialChild:jpe,beforeActiveInstanceBlur:Mme,cancelTimeout:rme,clearContainer:Tme,commitMount:bme,commitTextUpdate:Cme,commitUpdate:wme,createInstance:Wpe,createTextInstance:qpe,detachDeletedInstance:Rme,finalizeInitialChildren:Kpe,getChildHostContext:nme,getCurrentEventPriority:Pme,getCurrentUpdatePriority:kme,getInstanceFromNode:Dme,getInstanceFromScope:Lme,getPublicInstance:Ype,getRootHostContext:tme,hideInstance:Sme,hideTextInstance:xme,idlePriority:dT.unstable_IdlePriority,insertBefore:nz,insertInContainerBefore:mme,isPrimaryRenderer:cme,maySuspendCommit:Vme,noTimeout:ome,now:dT.unstable_now,preloadInstance:Ume,prepareForCommit:Xpe,preparePortalMount:$pe,prepareScopeUpdate:Ome,prepareUpdate:Zpe,removeChild:vme,removeChildFromContainer:yme,requestPostPaintCallback:zme,resetAfterCommit:Qpe,resetFormInstance:Xme,resetTextContent:Jpe,resolveEventTimeStamp:Gme,resolveEventType:Hme,resolveUpdatePriority:Nme,run:dT.unstable_runWithPriority,scheduleMicrotask:ame,scheduleTimeout:ime,setCurrentUpdatePriority:Fme,shouldAttemptEagerTransition:Bme,shouldDeprioritizeSubtree:eme,shouldSetTextContent:lme,startSuspendingCommit:jme,supportsHydration:fme,supportsMicrotasks:sme,supportsMutation:hme,supportsPersistence:dme,suspendInstance:Wme,trackSchedulerEvent:Ime,unhideInstance:Ame,unhideTextInstance:Eme,waitForCommitToBeReady:qme,warnsIfNotActing:ume},Symbol.toStringTag,{value:"Module"}));function iz(t,e,n){if(!t)return;if(n(t)===!0)return t;let i=t.child;for(;i;){const r=iz(i,e,n);if(r)return r;i=i.sibling}}function rz(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const M3=rz(D.createContext(null));class sz extends D.Component{render(){return D.createElement(M3.Provider,{value:this._reactInternals},this.props.children)}}function Zme(){const t=D.useContext(M3);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=D.useId();return D.useMemo(()=>{for(const n of[t,t?.alternate]){if(!n)continue;const i=iz(n,!1,r=>{let s=r.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(i)return i}},[t,e])}const Qme=Symbol.for("react.context"),Jme=t=>t!==null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===Qme;function eve(){const t=Zme(),[e]=D.useState(()=>new Map);e.clear();let n=t;for(;n;){const i=n.type;Jme(i)&&i!==M3&&!e.has(i)&&e.set(i,D.use(rz(i))),n=n.return}return e}function tve(){const t=eve();return D.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>i=>D.createElement(e,null,D.createElement(n.Provider,{...i,value:t.get(n)})),e=>D.createElement(sz,{...e})),[t])}if(Se.version.indexOf("19")===-1)throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");function nve(t){const e=Se.useRef({});return Se.useLayoutEffect(()=>{e.current=t}),Se.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const ive=()=>{const t=Se.useRef(0);return Se.useMemo(()=>{t.current++},[]),t.current>1},rve=t=>{const e=Se.useRef(null),n=Se.useRef(null),i=Se.useRef(null),r=nve(t),s=tve(),a=Se.useRef(null),o=h=>{const{forwardedRef:g}=t;g&&(typeof g=="function"?g(h):g.current=h)},l=ive(),u=()=>{o(null),C0.updateContainer(null,i.current,null),n.current?.destroy(),n.current=null};return Se.useLayoutEffect(()=>(a.current&&(clearTimeout(a.current),a.current=null),n.current?o(n.current):(n.current=new nm.Stage({width:t.width,height:t.height,container:e.current}),o(n.current),i.current=C0.createContainer(n.current,W2.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),C0.updateContainer(Se.createElement(s,{},t.children),i.current,null,()=>{})),()=>{l?a.current=setTimeout(u,0):u()}),[]),Se.useLayoutEffect(()=>{o(n.current),q2(n.current,t,r),C0.flushSyncFromReconciler(()=>{C0.updateContainer(Se.createElement(s,{},t.children),i.current,null)})}),Se.createElement("div",{ref:e,id:t.id,accessKey:t.accessKey,className:t.className,role:t.role,style:t.style,tabIndex:t.tabIndex,title:t.title})},sve="Layer",fF="Rect",ave="Circle",gF="Line",ove="Image",pF="Text",C0=Bpe($me),lve=Se.forwardRef((t,e)=>Se.createElement(sz,{},Se.createElement(rve,{...t,forwardedRef:e}))),hs=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),CD=[.001,0,0,.001,0,0],fT=1.35,Js={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Sh={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},Sy="pdfjs_internal_editor_",pt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},zt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},cve={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},bD={TRIANGLES:1,LATTICE:2},Qi={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Cw={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Hi={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},pp={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},K2={ERRORS:0,WARNINGS:1,INFOS:5},xy={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},b0={moveTo:0,lineTo:1,curveTo:2,quadraticCurveTo:3,closePath:4},uve={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Y2=K2.WARNINGS;function hve(t){Number.isInteger(t)&&(Y2=t)}function dve(){return Y2}function X2(t){Y2>=K2.INFOS&&console.info(`Info: ${t}`)}function ct(t){Y2>=K2.WARNINGS&&console.warn(`Warning: ${t}`)}function on(t){throw new Error(t)}function an(t,e){t||on(e)}function fve(t){switch(t?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function az(t,e=null,n=null){if(!t)return null;if(n&&typeof t=="string"&&(n.addDefaultProtocol&&t.startsWith("www.")&&t.match(/\./g)?.length>=2&&(t=`http://${t}`),n.tryConvertEncoding))try{t=Cve(t)}catch{}const i=e?URL.parse(t,e):URL.parse(t);return fve(i)?i:null}function oz(t,e,n=!1){const i=URL.parse(t);return i?(i.hash=e,i.href):n&&az(t,"http://example.com")?t.split("#",1)[0]+`${e?`#${e}`:""}`:""}function ut(t,e,n,i=!1){return Object.defineProperty(t,e,{value:n,enumerable:!i,configurable:!0,writable:!1}),n}const Hf=(function(){function e(n,i){this.message=n,this.name=i}return e.prototype=new Error,e.constructor=e,e})();class mF extends Hf{constructor(e,n){super(e,"PasswordException"),this.code=n}}class gT extends Hf{constructor(e,n){super(e,"UnknownErrorException"),this.details=n}}class wD extends Hf{constructor(e){super(e,"InvalidPDFException")}}class ES extends Hf{constructor(e,n,i){super(e,"ResponseException"),this.status=n,this.missing=i}}class gve extends Hf{constructor(e){super(e,"FormatError")}}class Oh extends Hf{constructor(e){super(e,"AbortException")}}function pve(t){(typeof t!="object"||t?.length===void 0)&&on("Invalid argument for bytesToString");const e=t.length,n=8192;if(e<n)return String.fromCharCode.apply(null,t);const i=[];for(let r=0;r<e;r+=n){const s=Math.min(r+n,e),a=t.subarray(r,s);i.push(String.fromCharCode.apply(null,a))}return i.join("")}function $2(t){typeof t!="string"&&on("Invalid argument for stringToBytes");const e=t.length,n=new Uint8Array(e);for(let i=0;i<e;++i)n[i]=t.charCodeAt(i)&255;return n}function mve(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,t&255)}function vve(){const t=new Uint8Array(4);return t[0]=1,new Uint32Array(t.buffer,0,1)[0]===1}function yve(){try{return new Function(""),!0}catch{return!1}}class Ji{static get isLittleEndian(){return ut(this,"isLittleEndian",vve())}static get isEvalSupported(){return ut(this,"isEvalSupported",yve())}static get isOffscreenCanvasSupported(){return ut(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return ut(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get isFloat16ArraySupported(){return ut(this,"isFloat16ArraySupported",typeof Float16Array<"u")}static get isSanitizerSupported(){return ut(this,"isSanitizerSupported",typeof Sanitizer<"u")}static get platform(){const{platform:e,userAgent:n}=navigator;return ut(this,"platform",{isAndroid:n.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:n.includes("Firefox")})}static get isCSSRoundSupported(){return ut(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const pT=Array.from(Array(256).keys(),t=>t.toString(16).padStart(2,"0"));class Ge{static makeHexColor(e,n,i){return`#${pT[e]}${pT[n]}${pT[i]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,n){let i;e[0]?(e[0]<0&&(i=n[0],n[0]=n[2],n[2]=i),n[0]*=e[0],n[2]*=e[0],e[3]<0&&(i=n[1],n[1]=n[3],n[3]=i),n[1]*=e[3],n[3]*=e[3]):(i=n[0],n[0]=n[1],n[1]=i,i=n[2],n[2]=n[3],n[3]=i,e[1]<0&&(i=n[1],n[1]=n[3],n[3]=i),n[1]*=e[1],n[3]*=e[1],e[2]<0&&(i=n[0],n[0]=n[2],n[2]=i),n[0]*=e[2],n[2]*=e[2]),n[0]+=e[4],n[1]+=e[5],n[2]+=e[4],n[3]+=e[5]}static transform(e,n){return[e[0]*n[0]+e[2]*n[1],e[1]*n[0]+e[3]*n[1],e[0]*n[2]+e[2]*n[3],e[1]*n[2]+e[3]*n[3],e[0]*n[4]+e[2]*n[5]+e[4],e[1]*n[4]+e[3]*n[5]+e[5]]}static multiplyByDOMMatrix(e,n){return[e[0]*n.a+e[2]*n.b,e[1]*n.a+e[3]*n.b,e[0]*n.c+e[2]*n.d,e[1]*n.c+e[3]*n.d,e[0]*n.e+e[2]*n.f+e[4],e[1]*n.e+e[3]*n.f+e[5]]}static applyTransform(e,n,i=0){const r=e[i],s=e[i+1];e[i]=r*n[0]+s*n[2]+n[4],e[i+1]=r*n[1]+s*n[3]+n[5]}static applyTransformToBezier(e,n,i=0){const r=n[0],s=n[1],a=n[2],o=n[3],l=n[4],u=n[5];for(let h=0;h<6;h+=2){const g=e[i+h],v=e[i+h+1];e[i+h]=g*r+v*a+l,e[i+h+1]=g*s+v*o+u}}static applyInverseTransform(e,n){const i=e[0],r=e[1],s=n[0]*n[3]-n[1]*n[2];e[0]=(i*n[3]-r*n[2]+n[2]*n[5]-n[4]*n[3])/s,e[1]=(-i*n[1]+r*n[0]+n[4]*n[1]-n[5]*n[0])/s}static axialAlignedBoundingBox(e,n,i){const r=n[0],s=n[1],a=n[2],o=n[3],l=n[4],u=n[5],h=e[0],g=e[1],v=e[2],y=e[3];let w=r*h+l,S=w,x=r*v+l,T=x,_=o*g+u,M=_,F=o*y+u,L=F;if(s!==0||a!==0){const k=s*h,B=s*v,H=a*g,U=a*y;w+=H,T+=H,x+=U,S+=U,_+=k,L+=k,F+=B,M+=B}i[0]=Math.min(i[0],w,x,S,T),i[1]=Math.min(i[1],_,F,M,L),i[2]=Math.max(i[2],w,x,S,T),i[3]=Math.max(i[3],_,F,M,L)}static inverseTransform(e){const n=e[0]*e[3]-e[1]*e[2];return[e[3]/n,-e[1]/n,-e[2]/n,e[0]/n,(e[2]*e[5]-e[4]*e[3])/n,(e[4]*e[1]-e[5]*e[0])/n]}static singularValueDecompose2dScale(e,n){const i=e[0],r=e[1],s=e[2],a=e[3],o=i**2+r**2,l=i*s+r*a,u=s**2+a**2,h=(o+u)/2,g=Math.sqrt(h**2-(o*u-l**2));n[0]=Math.sqrt(h+g||1),n[1]=Math.sqrt(h-g||1)}static normalizeRect(e){const n=e.slice(0);return e[0]>e[2]&&(n[0]=e[2],n[2]=e[0]),e[1]>e[3]&&(n[1]=e[3],n[3]=e[1]),n}static intersect(e,n){const i=Math.max(Math.min(e[0],e[2]),Math.min(n[0],n[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(n[0],n[2]));if(i>r)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(n[1],n[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(n[1],n[3]));return s>a?null:[i,s,r,a]}static pointBoundingBox(e,n,i){i[0]=Math.min(i[0],e),i[1]=Math.min(i[1],n),i[2]=Math.max(i[2],e),i[3]=Math.max(i[3],n)}static rectBoundingBox(e,n,i,r,s){s[0]=Math.min(s[0],e,i),s[1]=Math.min(s[1],n,r),s[2]=Math.max(s[2],e,i),s[3]=Math.max(s[3],n,r)}static#e(e,n,i,r,s,a,o,l,u,h){if(u<=0||u>=1)return;const g=1-u,v=u*u,y=v*u,w=g*(g*(g*e+3*u*n)+3*v*i)+y*r,S=g*(g*(g*s+3*u*a)+3*v*o)+y*l;h[0]=Math.min(h[0],w),h[1]=Math.min(h[1],S),h[2]=Math.max(h[2],w),h[3]=Math.max(h[3],S)}static#t(e,n,i,r,s,a,o,l,u,h,g,v){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&this.#e(e,n,i,r,s,a,o,l,-g/h,v);return}const y=h**2-4*g*u;if(y<0)return;const w=Math.sqrt(y),S=2*u;this.#e(e,n,i,r,s,a,o,l,(-h+w)/S,v),this.#e(e,n,i,r,s,a,o,l,(-h-w)/S,v)}static bezierBoundingBox(e,n,i,r,s,a,o,l,u){u[0]=Math.min(u[0],e,o),u[1]=Math.min(u[1],n,l),u[2]=Math.max(u[2],e,o),u[3]=Math.max(u[3],n,l),this.#t(e,i,s,o,n,r,a,l,3*(-e+3*(i-s)+o),6*(e-2*i+s),3*(i-e),u),this.#t(e,i,s,o,n,r,a,l,3*(-n+3*(r-a)+l),6*(n-2*r+a),3*(r-n),u)}}function Cve(t){return decodeURIComponent(escape(t))}let mT=null,vF=null;function bve(t){return mT||(mT=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,vF=new Map([["","t"]])),t.replaceAll(mT,(e,n,i)=>n?n.normalize("NFKC"):vF.get(i))}function lz(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const t=new Uint8Array(32);return crypto.getRandomValues(t),pve(t)}const Ep="pdfjs_internal_id_";function wve(t,e,n){if(!Array.isArray(n)||n.length<2)return!1;const[i,r,...s]=n;if(!t(i)&&!Number.isInteger(i)||!e(r))return!1;const a=s.length;let o=!0;switch(r.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return a===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(a!==4)return!1;o=!1;break;default:return!1}for(const l of s)if(!(typeof l=="number"||o&&l===null))return!1;return!0}function Pr(t,e,n){return Math.min(Math.max(t,e),n)}typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(t){return t.reduce((e,n)=>e+n,0)});class Ay{static textContent(e){const n=[],i={items:n,styles:Object.create(null)};function r(s){if(!s)return;let a=null;const o=s.name;if(o==="#text")a=s.value;else if(Ay.shouldBuildText(o))s?.attributes?.textContent?a=s.attributes.textContent:s.value&&(a=s.value);else return;if(a!==null&&n.push({str:a}),!!s.children)for(const l of s.children)r(l)}return r(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class cz{static setupStorage(e,n,i,r,s){const a=r.getValue(n,{value:null});switch(i.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),s==="print")break;e.addEventListener("input",o=>{r.setValue(n,{value:o.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(a.value===i.attributes.xfaOn?e.setAttribute("checked",!0):a.value===i.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",o=>{r.setValue(n,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),s==="print")break;e.addEventListener("input",o=>{r.setValue(n,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const o of i.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const l=o.target.options,u=l.selectedIndex===-1?"":l[l.selectedIndex].value;r.setValue(n,{value:u})});break}}static setAttributes({html:e,element:n,storage:i=null,intent:r,linkService:s}){const{attributes:a}=n,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${r}`);for(const[l,u]of Object.entries(a))if(u!=null)switch(l){case"class":u.length&&e.setAttribute(l,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!o||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,u)}o&&s.addLinkAttributes(e,a.href,a.newWindow),i&&a.dataId&&this.setupStorage(e,a.dataId,n,i)}static render(e){const n=e.annotationStorage,i=e.linkService,r=e.xfaHtml,s=e.intent||"display",a=document.createElement(r.name);r.attributes&&this.setAttributes({html:a,element:r,intent:s,linkService:i});const o=s!=="richText",l=e.div;if(l.append(a),e.viewport){const g=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=g}o&&l.setAttribute("class","xfaLayer xfaFont");const u=[];if(r.children.length===0){if(r.value){const g=document.createTextNode(r.value);a.append(g),o&&Ay.shouldBuildText(r.name)&&u.push(g)}return{textDivs:u}}const h=[[r,-1,a]];for(;h.length>0;){const[g,v,y]=h.at(-1);if(v+1===g.children.length){h.pop();continue}const w=g.children[++h.at(-1)[1]];if(w===null)continue;const{name:S}=w;if(S==="#text"){const T=document.createTextNode(w.value);u.push(T),y.append(T);continue}const x=w?.attributes?.xmlns?document.createElementNS(w.attributes.xmlns,S):document.createElement(S);if(y.append(x),w.attributes&&this.setAttributes({html:x,element:w,storage:n,intent:s,linkService:i}),w.children?.length>0)h.push([w,-1,x]);else if(w.value){const T=document.createTextNode(w.value);o&&Ay.shouldBuildText(S)&&u.push(T),x.append(T)}}for(const g of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const n=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=n,e.div.hidden=!1}}const Nc="http://www.w3.org/2000/svg";class im{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function cC(t,e="text"){if(k0(t,document.baseURI)){const n=await fetch(t);if(!n.ok)throw new Error(n.statusText);switch(e){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,i)=>{const r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":n(r.response);return}n(r.responseText);return}i(new Error(r.statusText))}},r.send(null)})}class uC{constructor({viewBox:e,userUnit:n,scale:i,rotation:r,offsetX:s=0,offsetY:a=0,dontFlip:o=!1}){this.viewBox=e,this.userUnit=n,this.scale=i,this.rotation=r,this.offsetX=s,this.offsetY=a,i*=n;const l=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let h,g,v,y;switch(r%=360,r<0&&(r+=360),r){case 180:h=-1,g=0,v=0,y=1;break;case 90:h=0,g=1,v=1,y=0;break;case 270:h=0,g=-1,v=-1,y=0;break;case 0:h=1,g=0,v=0,y=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(v=-v,y=-y);let w,S,x,T;h===0?(w=Math.abs(u-e[1])*i+s,S=Math.abs(l-e[0])*i+a,x=(e[3]-e[1])*i,T=(e[2]-e[0])*i):(w=Math.abs(l-e[0])*i+s,S=Math.abs(u-e[1])*i+a,x=(e[2]-e[0])*i,T=(e[3]-e[1])*i),this.transform=[h*i,g*i,v*i,y*i,w-h*i*l-v*i*u,S-g*i*l-y*i*u],this.width=x,this.height=T}get rawDims(){const e=this.viewBox;return ut(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:n=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:s=!1}={}){return new uC({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:n,offsetX:i,offsetY:r,dontFlip:s})}convertToViewportPoint(e,n){const i=[e,n];return Ge.applyTransform(i,this.transform),i}convertToViewportRectangle(e){const n=[e[0],e[1]];Ge.applyTransform(n,this.transform);const i=[e[2],e[3]];return Ge.applyTransform(i,this.transform),[n[0],n[1],i[0],i[1]]}convertToPdfPoint(e,n){const i=[e,n];return Ge.applyInverseTransform(i,this.transform),i}}class _3 extends Hf{constructor(e,n=0){super(e,"RenderingCancelledException"),this.extraDelay=n}}function Z2(t){const e=t.length;let n=0;for(;n<e&&t[n].trim()==="";)n++;return t.substring(n,n+5).toLowerCase()==="data:"}function P3(t){return typeof t=="string"&&/\.pdf$/i.test(t)}function Sve(t){return[t]=t.split(/[#?]/,1),t.substring(t.lastIndexOf("/")+1)}function xve(t,e="document.pdf"){if(typeof t!="string")return e;if(Z2(t))return ct('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const i=(o=>{try{return new URL(o)}catch{try{return new URL(decodeURIComponent(o))}catch{try{return new URL(o,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(o),"https://foo.bar")}catch{return null}}}}})(t);if(!i)return e;const r=o=>{try{let l=decodeURIComponent(o);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:o):l}catch{return o}},s=/\.pdf$/i,a=i.pathname.split("/").at(-1);if(s.test(a))return r(a);if(i.searchParams.size>0){const o=Array.from(i.searchParams.values()).reverse();for(const u of o)if(s.test(u))return r(u);const l=Array.from(i.searchParams.keys()).reverse();for(const u of l)if(s.test(u))return r(u)}if(i.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(l)return r(l[0])}return e}class yF{started=Object.create(null);times=[];time(e){e in this.started&&ct(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||ct(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let n=0;for(const{name:i}of this.times)n=Math.max(i.length,n);for(const{name:i,start:r,end:s}of this.times)e.push(`${i.padEnd(n)} ${s-r}ms
`);return e.join("")}}function k0(t,e){const n=e?URL.parse(t,e):URL.parse(t);return n?.protocol==="http:"||n?.protocol==="https:"}function oo(t){t.preventDefault()}function wi(t){t.preventDefault(),t.stopPropagation()}function Ave(t){console.log("Deprecated API usage: "+t)}class SD{static#e;static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const n=this.#e.exec(e);if(!n)return null;const i=parseInt(n[1],10);let r=parseInt(n[2],10);r=r>=1&&r<=12?r-1:0;let s=parseInt(n[3],10);s=s>=1&&s<=31?s:1;let a=parseInt(n[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(n[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(n[6],10);l=l>=0&&l<=59?l:0;const u=n[7]||"Z";let h=parseInt(n[8],10);h=h>=0&&h<=23?h:0;let g=parseInt(n[9],10)||0;return g=g>=0&&g<=59?g:0,u==="-"?(a+=h,o+=g):u==="+"&&(a-=h,o-=g),new Date(Date.UTC(i,r,s,a,o,l))}}function Eve(t,{scale:e=1,rotation:n=0}){const{width:i,height:r}=t.attributes.style,s=[0,0,parseInt(i),parseInt(r)];return new uC({viewBox:s,userUnit:1,scale:e,rotation:n})}function hC(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map(e=>parseInt(e)):t.startsWith("rgba(")?t.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(ct(`Not a valid color format: "${t}"`),[0,0,0])}function Tve(t){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const n of t.keys()){e.style.color=n;const i=window.getComputedStyle(e).color;t.set(n,hC(i))}e.remove()}function oi(t){const{a:e,b:n,c:i,d:r,e:s,f:a}=t.getTransform();return[e,n,i,r,s,a]}function Ll(t){const{a:e,b:n,c:i,d:r,e:s,f:a}=t.getTransform().invertSelf();return[e,n,i,r,s,a]}function xf(t,e,n=!1,i=!0){if(e instanceof uC){const{pageWidth:r,pageHeight:s}=e.rawDims,{style:a}=t,o=Ji.isCSSRoundSupported,l=`var(--total-scale-factor) * ${r}px`,u=`var(--total-scale-factor) * ${s}px`,h=o?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,g=o?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!n||e.rotation%180===0?(a.width=h,a.height=g):(a.width=g,a.height=h)}i&&t.setAttribute("data-main-rotation",e.rotation)}class Xl{constructor(){const{pixelRatio:e}=Xl;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,n,i,r,s=-1){let a=1/0,o=1/0,l=1/0;i=Xl.capPixels(i,s),i>0&&(a=Math.sqrt(i/(e*n))),r!==-1&&(o=r/e,l=r/n);const u=Math.min(a,o,l);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,n){if(n>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+n/100));return e>0?Math.min(e,i):i}return e}}const xD=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class Rve{static get isDarkMode(){return ut(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class Dve{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:n}=e;n.width=n.height="0",n.display="none",n.color="var(--comment-fg-color)",document.body.append(e);const{color:i}=window.getComputedStyle(e);return e.remove(),ut(this,"commentForegroundColor",hC(i))}}function Mve(t,e,n,i){i=Math.min(Math.max(i??1,0),1);const r=255*(1-i);return t=Math.round(t*i+r),e=Math.round(e*i+r),n=Math.round(n*i+r),[t,e,n]}function CF(t,e){const n=t[0]/255,i=t[1]/255,r=t[2]/255,s=Math.max(n,i,r),a=Math.min(n,i,r),o=(s+a)/2;if(s===a)e[0]=e[1]=0;else{const l=s-a;switch(e[1]=o<.5?l/(s+a):l/(2-s-a),s){case n:e[0]=((i-r)/l+(i<r?6:0))*60;break;case i:e[0]=((r-n)/l+2)*60;break;case r:e[0]=((n-i)/l+4)*60;break}}e[2]=o}function AD(t,e){const n=t[0],i=t[1],r=t[2],s=(1-Math.abs(2*r-1))*i,a=s*(1-Math.abs(n/60%2-1)),o=r-s/2;switch(Math.floor(n/60)){case 0:e[0]=s+o,e[1]=a+o,e[2]=o;break;case 1:e[0]=a+o,e[1]=s+o,e[2]=o;break;case 2:e[0]=o,e[1]=s+o,e[2]=a+o;break;case 3:e[0]=o,e[1]=a+o,e[2]=s+o;break;case 4:e[0]=a+o,e[1]=o,e[2]=s+o;break;case 5:case 6:e[0]=s+o,e[1]=o,e[2]=a+o;break}}function bF(t){return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}function wF(t,e,n){AD(t,n),n.map(bF);const i=.2126*n[0]+.7152*n[1]+.0722*n[2];AD(e,n),n.map(bF);const r=.2126*n[0]+.7152*n[1]+.0722*n[2];return i>r?(i+.05)/(r+.05):(r+.05)/(i+.05)}const SF=new Map;function _ve(t,e){const n=t[0]+t[1]*256+t[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let i=SF.get(n);if(i)return i;const r=new Float32Array(9),s=r.subarray(0,3),a=r.subarray(3,6);CF(t,a);const o=r.subarray(6,9);CF(e,o);const l=o[2]<.5,u=l?12:4.5;if(a[2]=l?Math.sqrt(a[2]):1-Math.sqrt(1-a[2]),wF(a,o,s)<u){let h,g;l?(h=a[2],g=1):(h=0,g=a[2]);const v=.005;for(;g-h>v;){const y=a[2]=(h+g)/2;l===wF(a,o,s)<u?h=y:g=y}a[2]=l?g:h}return AD(a,s),i=Ge.makeHexColor(Math.round(s[0]*255),Math.round(s[1]*255),Math.round(s[2]*255)),SF.set(n,i),i}function uz({html:t,dir:e,className:n},i){const r=document.createDocumentFragment();if(typeof t=="string"){const s=document.createElement("p");s.dir=e||"auto";const a=t.split(/(?:\r\n?|\n)/);for(let o=0,l=a.length;o<l;++o){const u=a[o];s.append(document.createTextNode(u)),o<l-1&&s.append(document.createElement("br"))}r.append(s)}else cz.render({xfaHtml:t,div:r,intent:"richText"});r.firstElementChild.classList.add("richText",n),i.append(r)}function hz(t){const e=new Path2D;if(!t)return e;for(let n=0,i=t.length;n<i;)switch(t[n++]){case b0.moveTo:e.moveTo(t[n++],t[n++]);break;case b0.lineTo:e.lineTo(t[n++],t[n++]);break;case b0.curveTo:e.bezierCurveTo(t[n++],t[n++],t[n++],t[n++],t[n++],t[n++]);break;case b0.quadraticCurveTo:e.quadraticCurveTo(t[n++],t[n++],t[n++],t[n++]);break;case b0.closePath:e.closePath();break;default:ct(`Unrecognized drawing path operator: ${t[n-1]}`);break}return e}class nn{static#e=null;static#t=null;static#i=null;static#n=0;static#s=[];get pagesNumber(){return nn.#n}set pagesNumber(e){nn.#n!==e&&(nn.#n=e,e===0&&(nn.#t=null,nn.#e=null))}addListener(e){nn.#s.push(e)}removeListener(e){const n=nn.#s.indexOf(e);n>=0&&nn.#s.splice(n,1)}#a(){for(const e of nn.#s)e()}#r(e){if(nn.#t)return;const n=nn.#n,i=new Uint32Array(3*n),r=nn.#t=i.subarray(0,n),s=nn.#e=i.subarray(n,2*n);if(e)for(let a=0;a<n;a++)r[a]=s[a]=a+1;nn.#i=i.subarray(2*n)}movePages(e,n,i){this.#r(!0);const r=nn.#t,s=nn.#e;nn.#i.set(s);const a=n.length,o=new Uint32Array(a);let l=0;for(let y=0;y<a;y++){const w=n[y]-1;o[y]=r[w],w<i&&(l+=1)}const u=nn.#n;let h=i-l;const g=u-a;h=Pr(h,0,g);for(let y=0,w=0;y<u;y++)e.has(y+1)||(r[w++]=r[y]);r.copyWithin(h+a,h,g),r.set(o,h);let v=!1;for(let y=0,w=u;y<w;y++){const S=r[y];v||=S!==y+1,s[S-1]=y+1}this.#a(),v||(this.pagesNumber=0)}hasBeenAltered(){return nn.#t!==null}getPageMappingForSaving(){return{pageIndices:nn.#e?nn.#e.map(e=>e-1):null}}getPrevPageNumber(e){return nn.#i[nn.#t[e-1]-1]}getPageNumber(e){return nn.#e?.[e-1]??e}getPageId(e){return nn.#t?.[e-1]??e}static get instance(){return ut(this,"instance",new nn)}getMapping(){return nn.#t.subarray(0,this.pagesNumber)}}class $0{#e=null;#t=null;#i;#n=null;#s=null;#a=null;#r=null;#o=null;static#c=null;constructor(e){this.#i=e,$0.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const n=this.#i._uiManager._signal;n instanceof AbortSignal&&!n.aborted&&(e.addEventListener("contextmenu",oo,{signal:n}),e.addEventListener("pointerdown",$0.#l,{signal:n}));const i=this.#n=document.createElement("div");i.className="buttons",e.append(i);const r=this.#i.toolbarPosition;if(r){const{style:s}=e,a=this.#i._uiManager.direction==="ltr"?1-r[0]:r[0];s.insetInlineEnd=`${100*a}%`,s.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return this.#e}static#l(e){e.stopPropagation()}#d(e){this.#i._focusEventsAllowed=!1,wi(e)}#h(e){this.#i._focusEventsAllowed=!0,wi(e)}#f(e){const n=this.#i._uiManager._signal;return!(n instanceof AbortSignal)||n.aborted?!1:(e.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:n}),e.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:n}),e.addEventListener("contextmenu",oo,{signal:n}),!0)}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#s?.shown(),this.#a?.shown()}addDeleteButton(){const{editorType:e,_uiManager:n}=this.#i,i=document.createElement("button");i.classList.add("basic","deleteButton"),i.tabIndex=0,i.setAttribute("data-l10n-id",$0.#c[e]),this.#f(i)&&i.addEventListener("click",r=>{n.delete()},{signal:n._signal}),this.#n.append(i)}get#m(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const n=await e.render();this.#f(n),this.#n.append(n,this.#m),this.#s=e}addComment(e,n=null){if(this.#a)return;const i=e.renderForToolbar();if(!i)return;this.#f(i);const r=this.#r=this.#m;n?(this.#n.insertBefore(i,n),this.#n.insertBefore(r,n)):this.#n.append(i,r),this.#a=e,e.toolbar=this}addColorPicker(e){if(this.#t)return;this.#t=e;const n=e.renderButton();this.#f(n),this.#n.append(n,this.#m)}async addEditSignatureButton(e){const n=this.#o=await e.renderEditButton(this.#i);this.#f(n),this.#n.append(n,this.#m)}removeButton(e){switch(e){case"comment":this.#a?.removeToolbarCommentButton(),this.#a=null,this.#r?.remove(),this.#r=null;break}}async addButton(e,n){switch(e){case"colorPicker":n&&this.addColorPicker(n);break;case"altText":n&&await this.addAltText(n);break;case"editSignature":n&&await this.addEditSignatureButton(n);break;case"delete":this.addDeleteButton();break;case"comment":n&&this.addComment(n);break}}async addButtonBefore(e,n,i){if(!n&&e==="comment")return;const r=this.#n.querySelector(i);r&&e==="comment"&&this.addComment(n,r)}updateEditSignatureButton(e){this.#o&&(this.#o.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class Pve{#e=null;#t=null;#i;constructor(e){this.#i=e}#n(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar");const n=this.#i._signal;n instanceof AbortSignal&&!n.aborted&&e.addEventListener("contextmenu",oo,{signal:n});const i=this.#e=document.createElement("div");return i.className="buttons",e.append(i),this.#i.hasCommentManager()&&this.#a("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#i.commentSelection("floating_button")}),this.#a("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#i.highlightSelection("floating_button")}),e}#s(e,n){let i=0,r=0;for(const s of e){const a=s.y+s.height;if(a<i)continue;const o=s.x+(n?s.width:0);if(a>i){r=o,i=a;continue}n?o>r&&(r=o):o<r&&(r=o)}return[n?1-r:r,i]}show(e,n,i){const[r,s]=this.#s(n,i),{style:a}=this.#t||=this.#n();e.append(this.#t),a.insetInlineEnd=`${100*r}%`,a.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#a(e,n,i,r){const s=document.createElement("button");s.classList.add("basic",e),s.tabIndex=0,s.setAttribute("data-l10n-id",n);const a=document.createElement("span");s.append(a),a.className="visuallyHidden",a.setAttribute("data-l10n-id",i);const o=this.#i._signal;o instanceof AbortSignal&&!o.aborted&&(s.addEventListener("contextmenu",oo,{signal:o}),s.addEventListener("click",r,{signal:o})),this.#e.append(s)}}function dz(t,e,n){for(const i of n)e.addEventListener(i,t[i].bind(t))}class rn{static#e=NaN;static#t=null;static#i=NaN;static#n=null;static initializeAndAddPointerId(e){(rn.#t||=new Set).add(e)}static setPointer(e,n){rn.#e||=n,rn.#n??=e}static setTimeStamp(e){rn.#i=e}static isSamePointerId(e){return rn.#e===e}static isSamePointerIdOrRemove(e){return rn.#e===e?!0:(rn.#t?.delete(e),!1)}static isSamePointerType(e){return rn.#n===e}static isInitializedAndDifferentPointerType(e){return rn.#n!==null&&!rn.isSamePointerType(e)}static isSameTimeStamp(e){return rn.#i===e}static isUsingMultiplePointers(){return rn.#t?.size>=1}static clearPointerType(){rn.#n=null}static clearPointerIds(){rn.#e=NaN,rn.#t=null}static clearTimeStamp(){rn.#i=NaN}}class Ove{#e=0;get id(){return`${Sy}${this.#e++}`}}class O3{#e=lz();#t=0;#i=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const s=r.decode().then(()=>(i.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return ut(this,"_isSVGFittingCanvas",s)}async#n(e,n){this.#i||=new Map;let i=this.#i.get(e);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let r;if(typeof n=="string"?(i.url=n,r=await cC(n,"blob")):n instanceof File?r=i.file=n:n instanceof Blob&&(r=n),r.type==="image/svg+xml"){const s=O3._isSVGFittingCanvas,a=new FileReader,o=new Image,l=new Promise((u,h)=>{o.onload=()=>{i.bitmap=o,i.isSvg=!0,u()},a.onload=async()=>{const g=i.svgUrl=a.result;o.src=await s?`${g}#svgView(preserveAspectRatio(none))`:g},o.onerror=a.onerror=h});a.readAsDataURL(r),await l}else i.bitmap=await createImageBitmap(r);i.refCounter=1}catch(r){ct(r),i=null}return this.#i.set(e,i),i&&this.#i.set(i.id,i),i}async getFromFile(e){const{lastModified:n,name:i,size:r,type:s}=e;return this.#n(`${n}_${i}_${r}_${s}`,e)}async getFromUrl(e){return this.#n(e,e)}async getFromBlob(e,n){const i=await n;return this.#n(e,i)}async getFromId(e){this.#i||=new Map;const n=this.#i.get(e);if(!n)return null;if(n.bitmap)return n.refCounter+=1,n;if(n.file)return this.getFromFile(n.file);if(n.blobPromise){const{blobPromise:i}=n;return delete n.blobPromise,this.getFromBlob(n.id,i)}return this.getFromUrl(n.url)}getFromCanvas(e,n){this.#i||=new Map;let i=this.#i.get(e);if(i?.bitmap)return i.refCounter+=1,i;const r=new OffscreenCanvas(n.width,n.height);return r.getContext("2d").drawImage(n,0,0),i={bitmap:r.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#i.set(e,i),this.#i.set(i.id,i),i}getSvgUrl(e){const n=this.#i.get(e);return n?.isSvg?n.svgUrl:null}deleteId(e){this.#i||=new Map;const n=this.#i.get(e);if(!n||(n.refCounter-=1,n.refCounter!==0))return;const{bitmap:i}=n;if(!n.url&&!n.file){const r=new OffscreenCanvas(i.width,i.height);r.getContext("bitmaprenderer").transferFromImageBitmap(i),n.blobPromise=r.convertToBlob()}i.close?.(),n.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class Lve{#e=[];#t=!1;#i;#n=-1;constructor(e=128){this.#i=e}add({cmd:e,undo:n,post:i,mustExec:r,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(r&&e(),this.#t)return;const l={cmd:e,undo:n,post:i,type:s};if(this.#n===-1){this.#e.length>0&&(this.#e.length=0),this.#n=0,this.#e.push(l);return}if(a&&this.#e[this.#n].type===s){o&&(l.undo=this.#e[this.#n].undo),this.#e[this.#n]=l;return}const u=this.#n+1;u===this.#i?this.#e.splice(0,1):(this.#n=u,u<this.#e.length&&this.#e.splice(u)),this.#e.push(l)}undo(){if(this.#n===-1)return;this.#t=!0;const{undo:e,post:n}=this.#e[this.#n];e(),n?.(),this.#t=!1,this.#n-=1}redo(){if(this.#n<this.#e.length-1){this.#n+=1,this.#t=!0;const{cmd:e,post:n}=this.#e[this.#n];e(),n?.(),this.#t=!1}}hasSomethingToUndo(){return this.#n!==-1}hasSomethingToRedo(){return this.#n<this.#e.length-1}cleanType(e){if(this.#n!==-1){for(let n=this.#n;n>=0;n--)if(this.#e[n].type!==e){this.#e.splice(n+1,this.#n-n),this.#n=n;return}this.#e.length=0,this.#n=-1}}destroy(){this.#e=null}}class dC{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:n}=Ji.platform;for(const[i,r,s={}]of e)for(const a of i){const o=a.startsWith("mac+");n&&o?(this.callbacks.set(a.slice(4),{callback:r,options:s}),this.allKeys.add(a.split("+").at(-1))):!n&&!o&&(this.callbacks.set(a,{callback:r,options:s}),this.allKeys.add(a.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const n=this.buffer.join("+");return this.buffer.length=0,n}exec(e,n){if(!this.allKeys.has(n.key))return;const i=this.callbacks.get(this.#e(n));if(!i)return;const{callback:r,options:{bubbles:s=!1,args:a=[],checker:o=null}}=i;o&&!o(e,n)||(r.bind(e,...a,n)(),s||wi(n))}}class L3{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return Tve(e),ut(this,"_colors",e)}convert(e){const n=hC(e);if(!window.matchMedia("(forced-colors: active)").matches)return n;for(const[i,r]of this._colors)if(r.every((s,a)=>s===n[a]))return L3._colorsMapping.get(i);return n}getHexCode(e){const n=this._colors.get(e);return n?Ge.makeHexColor(...n):e}}class Lh{#e=new AbortController;#t=null;#i=null;#n=new Map;#s=new Map;#a=null;#r=null;#o=null;#c=new Lve;#l=null;#d=null;#h=null;#f=0;#m=new Set;#p=null;#u=null;#g=new Set;_editorUndoBar=null;#v=!1;#C=!1;#y=!1;#E=null;#x=null;#w=null;#R=null;#b=!1;#A=null;#_=new Ove;#D=!1;#M=!1;#B=!1;#O=null;#F=null;#I=null;#k=null;#j=null;#T=pt.NONE;#S=new Set;#L=null;#H=null;#z=null;#K=null;#q=null;#Y={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#V=[0,0];#N=null;#W=null;#Q=null;#J=null;#G=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=Lh.prototype,n=a=>a.#W.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),i=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:l}=o;return l!=="text"&&l!=="number"}return!0},r=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return ut(this,"_keyboardManager",new dC([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&a.#W.contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&a.#W.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:n}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:n}]]))}constructor(e,n,i,r,s,a,o,l,u,h,g,v,y,w,S,x){const T=this._signal=this.#e.signal;this.#W=e,this.#Q=n,this.#J=i,this.#a=r,this.#l=s,this.#H=a,this.#q=l,this._eventBus=o,o._on("editingaction",this.onEditingAction.bind(this),{signal:T}),o._on("pagechanging",this.onPageChanging.bind(this),{signal:T}),o._on("scalechanging",this.onScaleChanging.bind(this),{signal:T}),o._on("rotationchanging",this.onRotationChanging.bind(this),{signal:T}),o._on("setpreference",this.onSetPreference.bind(this),{signal:T}),o._on("switchannotationeditorparams",_=>this.updateParams(_.type,_.value),{signal:T}),o._on("pagesedited",this.onPagesEdited.bind(this),{signal:T}),window.addEventListener("pointerdown",()=>{this.#M=!0},{capture:!0,signal:T}),window.addEventListener("pointerup",()=>{this.#M=!1},{capture:!0,signal:T}),this.#ae(),this.#de(),this.#te(),this.#r=l.annotationStorage,this.#E=l.filterFactory,this.#z=u,this.#R=h||null,this.#v=g,this.#C=v,this.#y=y,this.#j=w||null,this.viewParameters={realScale:im.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=x!==!1,s?.setSidebarUiManager(this)}destroy(){this.#G?.resolve(),this.#G=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#s.values())e.destroy();this.#s.clear(),this.#n.clear(),this.#g.clear(),this.#k?.clear(),this.#t=null,this.#S.clear(),this.#c.destroy(),this.#a?.destroy(),this.#l?.destroy(),this.#H?.destroy(),this.#A?.hide(),this.#A=null,this.#I?.destroy(),this.#I=null,this.#i=null,this.#x&&(clearTimeout(this.#x),this.#x=null),this.#N&&(clearTimeout(this.#N),this.#N=null),this._editorUndoBar?.destroy(),this.#q=null}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#j}get useNewAltTextFlow(){return this.#C}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return ut(this,"hcmFilter",this.#z?this.#E.addHCMFilter(this.#z.foreground,this.#z.background):"none")}get direction(){return ut(this,"direction",getComputedStyle(this.#W).direction)}get _highlightColors(){return ut(this,"_highlightColors",this.#R?new Map(this.#R.split(",").map(e=>(e=e.split("=").map(n=>n.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return ut(this,"highlightColors",null);const n=new Map,i=!!this.#z;for(const[r,s]of e){const a=r.endsWith("_HCM");if(i&&a){n.set(r.replace("_HCM",""),s);continue}!i&&!a&&n.set(r,s)}return ut(this,"highlightColors",n)}get highlightColorNames(){return ut(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const n=this.highlightColorNames.get(e);return this._highlightColors.get(n)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=e}setMainHighlightColorPicker(e){this.#I=e}editAltText(e,n=!1){this.#a?.editAltText(this,e,n)}hasCommentManager(){return!!this.#l}editComment(e,n,i,r){this.#l?.showDialog(this,e,n,i,r)}selectComment(e,n){this.#s.get(e)?.getEditorByUID(n)?.toggleComment(!0,!0)}updateComment(e){this.#l?.updateComment(e.getData())}updatePopupColor(e){this.#l?.updatePopupColor(e)}removeComment(e){this.#l?.removeComments([e.uid])}deleteComment(e,n){const i=()=>{e.comment=n},r=()=>{this._editorUndoBar?.show(i,"comment"),this.toggleComment(null),e.comment=null};this.addCommands({cmd:r,undo:i,mustExec:!0})}toggleComment(e,n,i=void 0){this.#l?.toggleCommentPopup(e,n,i)}makeCommentColor(e,n){return e&&this.#l?.makeCommentColor(e,n)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(e){if(this.#s.has(e-1))return;const{resolve:n,promise:i}=Promise.withResolvers(),r=s=>{s.pageNumber===e&&(this._eventBus._off("editorsrendered",r),n())};this._eventBus.on("editorsrendered",r),await i}getSignature(e){this.#H?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#H}switchToMode(e,n){this._eventBus.on("annotationeditormodechanged",n,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,n){this._eventBus.dispatch("setpreference",{source:this,name:e,value:n})}onSetPreference({name:e,value:n}){switch(e){case"enableNewAltTextWhenAddingImage":this.#y=n;break}}onPagesEdited({pagesMapper:e}){for(const r of this.#n.values())r.updatePageIndex(e.getPrevPageNumber(r.pageIndex+1)-1);const n=this.#s,i=this.#s=new Map;for(const[r,s]of n){const a=e.getPrevPageNumber(r+1)-1;if(a===-1){s.destroy();continue}i.set(a,s),s.updatePageIndex(a)}}onPageChanging({pageNumber:e}){this.#f=e-1}focusMainContainer(){this.#W.focus()}findParent(e,n){for(const i of this.#s.values()){const{x:r,y:s,width:a,height:o}=i.div.getBoundingClientRect();if(e>=r&&e<=r+a&&n>=s&&n<=s+o)return i}return null}disableUserSelect(e=!1){this.#Q.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#g.add(e)}removeShouldRescale(e){this.#g.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*im.PDF_TO_CSS_UNITS;for(const n of this.#g)n.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#Z({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#ee(e){const{currentLayer:n}=this;if(n.hasTextLayer(e))return n;for(const i of this.#s.values())if(i.hasTextLayer(e))return i;return null}highlightSelection(e="",n=!1){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:r,anchorOffset:s,focusNode:a,focusOffset:o}=i,l=i.toString(),h=this.#Z(i).closest(".textLayer"),g=this.getSelectionBoxes(h);if(!g)return;i.empty();const v=this.#ee(h),y=this.#T===pt.NONE,w=()=>{const S=v?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:g,anchorNode:r,anchorOffset:s,focusNode:a,focusOffset:o,text:l});y&&this.showAllEditors("highlight",!0,!0),n&&S?.editComment()};if(y){this.switchToMode(pt.HIGHLIGHT,w);return}w()}commentSelection(e=""){this.highlightSelection(e,!0)}#re(){const e=document.getSelection();if(!e||e.isCollapsed)return;const i=this.#Z(e).closest(".textLayer"),r=this.getSelectionBoxes(i);r&&(this.#A||=new Pve(this),this.#A.show(i,r,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(e){if(!this.#r)return null;const n=`${Sy}${e}`,i=this.#r.getRawValue(n);return i&&this.#r.remove(n),i}addToAnnotationStorage(e){!e.isEmpty()&&this.#r&&!this.#r.has(e.id)&&this.#r.setValue(e.id,e)}a11yAlert(e,n=null){const i=this.#J;i&&(i.setAttribute("data-l10n-id",e),n?i.setAttribute("data-l10n-args",JSON.stringify(n)):i.removeAttribute("data-l10n-args"))}#se(){const e=document.getSelection();if(!e||e.isCollapsed){this.#L&&(this.#A?.hide(),this.#L=null,this.#P({hasSelectedText:!1}));return}const{anchorNode:n}=e;if(n===this.#L)return;const r=this.#Z(e).closest(".textLayer");if(!r){this.#L&&(this.#A?.hide(),this.#L=null,this.#P({hasSelectedText:!1}));return}if(this.#A?.hide(),this.#L=n,this.#P({hasSelectedText:!0}),!(this.#T!==pt.HIGHLIGHT&&this.#T!==pt.NONE)&&(this.#T===pt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#b=this.isShiftKeyDown,!this.isShiftKeyDown)){const s=this.#T===pt.HIGHLIGHT?this.#ee(r):null;if(s?.toggleDrawing(),this.#M){const a=new AbortController,o=this.combinedSignal(a),l=u=>{u.type==="pointerup"&&u.button!==0||(a.abort(),s?.toggleDrawing(!0),u.type==="pointerup"&&this.#X("main_toolbar"))};window.addEventListener("pointerup",l,{signal:o}),window.addEventListener("blur",l,{signal:o})}else s?.toggleDrawing(!0),this.#X("main_toolbar")}}#X(e=""){this.#T===pt.HIGHLIGHT?this.highlightSelection(e):this.#v&&this.#re()}#ae(){document.addEventListener("selectionchange",this.#se.bind(this),{signal:this._signal})}#oe(){if(this.#w)return;this.#w=new AbortController;const e=this.combinedSignal(this.#w);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#le(){this.#w?.abort(),this.#w=null}blur(){if(this.isShiftKeyDown=!1,this.#b&&(this.#b=!1,this.#X("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const n of this.#S)if(n.div.contains(e)){this.#F=[n,e],n._focusEventsAllowed=!1;break}}focus(){if(!this.#F)return;const[e,n]=this.#F;this.#F=null,n.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),n.focus()}#te(){if(this.#O)return;this.#O=new AbortController;const e=this.combinedSignal(this.#O);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#ce(){this.#O?.abort(),this.#O=null}#ue(){if(this.#d)return;this.#d=new AbortController;const e=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#he(){this.#d?.abort(),this.#d=null}#de(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#te(),this.setEditingState(!0)}removeEditListeners(){this.#ce(),this.setEditingState(!1)}dragOver(e){for(const{type:n}of e.dataTransfer.items)for(const i of this.#u)if(i.isHandlingMimeForPasting(n)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const n of e.dataTransfer.items)for(const i of this.#u)if(i.isHandlingMimeForPasting(n.type)){i.paste(n,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const n=[];for(const i of this.#S){const r=i.serialize(!0);r&&n.push(r)}n.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:n}=e;for(const s of n.items)for(const a of this.#u)if(a.isHandlingMimeForPasting(s.type)){a.paste(s,this.currentLayer);return}let i=n.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(s){ct(`paste: "${s.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const r=this.currentLayer;try{const s=[];for(const l of i){const u=await r.deserialize(l);if(!u)return;s.push(u)}const a=()=>{for(const l of s)this.#ne(l);this.#ie(s)},o=()=>{for(const l of s)l.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(s){ct(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#T!==pt.NONE&&!this.isEditorHandlingKeyboard&&Lh._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#b&&(this.#b=!1,this.#X("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#P(e){Object.entries(e).some(([i,r])=>this.#Y[i]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#Y,e)}),this.#T===pt.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#U([[zt.HIGHLIGHT_FREE,!0]]))}#U(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#oe(),this.#ue(),this.#P({isEditing:this.#T!==pt.NONE,isEmpty:this.#$(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#le(),this.#he(),this.#P({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#u){this.#u=e;for(const n of this.#u)this.#U(n.defaultPropertiesToUpdate)}}getId(){return this.#_.id}get currentLayer(){return this.#s.get(this.#f)}getLayer(e){return this.#s.get(e)}get currentPageIndex(){return this.#f}addLayer(e){this.#s.set(e.pageIndex,e),this.#D?e.enable():e.disable()}removeLayer(e){this.#s.delete(e.pageIndex)}async updateMode(e,n=null,i=!1,r=!1,s=!1,a=!1){if(this.#T!==e&&!(this.#G&&(await this.#G.promise,!this.#G))){if(this.#G=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#T===pt.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#T=e,e===pt.NONE){this.setEditingState(!1),this.#ge();for(const o of this.#n.values())o.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#G.resolve();return}for(const o of this.#n.values())o.addStandaloneCommentButton();e===pt.SIGNATURE&&await this.#H?.loadSignatures(),i&&rn.clearPointerType(),this.setEditingState(!0),await this.#fe(),this.unselectAll();for(const o of this.#s.values())o.updateMode(e);if(e===pt.POPUP){this.#i||=await this.#q.getAnnotationsByType(new Set(this.#u.map(u=>u._editorType)));const o=new Set,l=[];for(const u of this.#n.values()){const{annotationElementId:h,hasComment:g,deleted:v}=u;h&&o.add(h),g&&!v&&l.push(u.getData())}for(const u of this.#i){const{id:h,popupRef:g,contentsObj:v}=u;g&&v?.str&&!o.has(h)&&!this.#m.has(h)&&l.push(u)}this.#l?.showSidebar(l)}if(!n){r&&this.addNewEditorFromKeyboard(),this.#G.resolve();return}for(const o of this.#n.values())o.uid===n?(this.setSelected(o),a?o.editComment():s?o.enterInEditMode():o.focus()):o.unselect();this.#G.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#T&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,n){if(this.#u){switch(e){case zt.CREATE:this.currentLayer.addNewEditor(n);return;case zt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#K||=new Map).set(e,n),this.showAllEditors("highlight",n);break}if(this.hasSelection)for(const i of this.#S)i.updateParams(e,n);else for(const i of this.#u)i.updateDefaultParams(e,n)}}showAllEditors(e,n,i=!1){for(const s of this.#n.values())s.editorType===e&&s.show(n);(this.#K?.get(zt.HIGHLIGHT_SHOW_ALL)??!0)!==n&&this.#U([[zt.HIGHLIGHT_SHOW_ALL,n]])}enableWaiting(e=!1){if(this.#B!==e){this.#B=e;for(const n of this.#s.values())e?n.disableClick():n.enableClick(),n.div.classList.toggle("waiting",e)}}async#fe(){if(!this.#D){this.#D=!0;const e=[];for(const n of this.#s.values())e.push(n.enable());await Promise.all(e);for(const n of this.#n.values())n.enable()}}#ge(){if(this.unselectAll(),this.#D){this.#D=!1;for(const e of this.#s.values())e.disable();for(const e of this.#n.values())e.disable()}}*getEditors(e){for(const n of this.#n.values())n.pageIndex===e&&(yield n)}getEditor(e){return this.#n.get(e)}addEditor(e){this.#n.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#x&&clearTimeout(this.#x),this.#x=setTimeout(()=>{this.focusMainContainer(),this.#x=null},0)),this.#n.delete(e.id),e.annotationElementId&&this.#k?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#m.has(e.annotationElementId))&&this.#r?.remove(e.id)}addDeletedAnnotationElement(e){this.#m.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#m.has(e)}removeDeletedAnnotationElement(e){this.#m.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#ne(e){const n=this.#s.get(e.pageIndex);n?n.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#U(e.propertiesToUpdate))}get#pe(){let e=null;for(e of this.#S);return e}updateUI(e){this.#pe===e&&this.#U(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#U(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#S.has(e)){this.#S.delete(e),e.unselect(),this.#P({hasSelectedEditor:this.hasSelection});return}this.#S.add(e),e.select(),this.#U(e.propertiesToUpdate),this.#P({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.uid}),this.#h?.commitOrRemove();for(const n of this.#S)n!==e&&n.unselect();this.#S.clear(),this.#S.add(e),e.select(),this.#U(e.propertiesToUpdate),this.#P({hasSelectedEditor:!0})}isSelected(e){return this.#S.has(e)}get firstSelectedEditor(){return this.#S.values().next().value}unselect(e){e.unselect(),this.#S.delete(e),this.#P({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#S.size!==0}get isEnterHandled(){return this.#S.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#P({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#$()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#P({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#$()})}addCommands(e){this.#c.add(e),this.#P({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#$()})}cleanUndoStack(e){this.#c.cleanType(e)}#$(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const e of this.#n.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const n=e?[e]:[...this.#S],i=()=>{this._editorUndoBar?.show(r,n.length===1?n[0].editorType:n.length);for(const s of n)s.remove()},r=()=>{for(const s of n)this.#ne(s)};this.addCommands({cmd:i,undo:r,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#ie(e){for(const n of this.#S)n.unselect();this.#S.clear();for(const n of e)n.isEmpty()||(this.#S.add(n),n.select());this.#P({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#S)e.commit();this.#ie(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#T!==pt.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const e of this.#S)e.unselect();this.#S.clear(),this.#P({hasSelectedEditor:!1})}}translateSelectedEditors(e,n,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#V[0]+=e,this.#V[1]+=n;const[r,s]=this.#V,a=[...this.#S],o=1e3;this.#N&&clearTimeout(this.#N),this.#N=setTimeout(()=>{this.#N=null,this.#V[0]=this.#V[1]=0,this.addCommands({cmd:()=>{for(const l of a)this.#n.has(l.id)&&(l.translateInPage(r,s),l.translationDone())},undo:()=>{for(const l of a)this.#n.has(l.id)&&(l.translateInPage(-r,-s),l.translationDone())},mustExec:!1})},o);for(const l of a)l.translateInPage(e,n),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#p=new Map;for(const e of this.#S)this.#p.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#p)return!1;this.disableUserSelect(!1);const e=this.#p;this.#p=null;let n=!1;for(const[{x:r,y:s,pageIndex:a},o]of e)o.newX=r,o.newY=s,o.newPageIndex=a,n||=r!==o.savedX||s!==o.savedY||a!==o.savedPageIndex;if(!n)return!1;const i=(r,s,a,o)=>{if(this.#n.has(r.id)){const l=this.#s.get(o);l?r._setParentAndPosition(l,s,a):(r.pageIndex=o,r.x=s,r.y=a)}};return this.addCommands({cmd:()=>{for(const[r,{newX:s,newY:a,newPageIndex:o}]of e)i(r,s,a,o)},undo:()=>{for(const[r,{savedX:s,savedY:a,savedPageIndex:o}]of e)i(r,s,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,n){if(this.#p)for(const i of this.#p.keys())i.drag(e,n)}rebuild(e){if(e.parent===null){const n=this.getLayer(e.pageIndex);n?(n.changeParent(e),n.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#S.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#T}isEditingMode(){return this.#T!==pt.NONE}get imageManager(){return ut(this,"imageManager",new O3)}getSelectionBoxes(e){if(!e)return null;const n=document.getSelection();for(let u=0,h=n.rangeCount;u<h;u++)if(!e.contains(n.getRangeAt(u).commonAncestorContainer))return null;const{x:i,y:r,width:s,height:a}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(u,h,g,v)=>({x:(h-r)/a,y:1-(u+g-i)/s,width:v/a,height:g/s});break;case"180":o=(u,h,g,v)=>({x:1-(u+g-i)/s,y:1-(h+v-r)/a,width:g/s,height:v/a});break;case"270":o=(u,h,g,v)=>({x:1-(h+v-r)/a,y:(u-i)/s,width:v/a,height:g/s});break;default:o=(u,h,g,v)=>({x:(u-i)/s,y:(h-r)/a,width:g/s,height:v/a});break}const l=[];for(let u=0,h=n.rangeCount;u<h;u++){const g=n.getRangeAt(u);if(!g.collapsed)for(const{x:v,y,width:w,height:S}of g.getClientRects())w===0||S===0||l.push(o(v,y,w,S))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:n}){(this.#o||=new Map).set(e,n)}removeChangedExistingAnnotation({annotationElementId:e}){this.#o?.delete(e)}renderAnnotationElement(e){const n=this.#o?.get(e.data.id);if(!n)return;const i=this.#r.getRawValue(n);i&&(this.#T===pt.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}setMissingCanvas(e,n,i){const r=this.#k?.get(e);r&&(r.setCanvas(n,i),this.#k.delete(e))}addMissingCanvas(e,n){(this.#k||=new Map).set(e,n)}}class Bl{#e=null;#t=!1;#i=null;#n=null;#s=null;#a=null;#r=!1;#o=null;#c=null;#l=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(e){this.#c=e,this.#h=e._uiManager.useNewAltTextFlow,Bl.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){Bl._l10n??=e}async render(){const e=this.#i=document.createElement("button");e.className="altText",e.tabIndex="0";const n=this.#n=document.createElement("span");e.append(n),this.#h?(e.classList.add("new"),e.setAttribute("data-l10n-id",Bl.#f.missing),n.setAttribute("data-l10n-id",Bl.#f["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=this.#c._uiManager._signal;e.addEventListener("contextmenu",oo,{signal:i}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:i});const r=s=>{s.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return e.addEventListener("click",r,{capture:!0,signal:i}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(this.#r=!0,r(s))},{signal:i}),await this.#p(),e}get#m(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#i&&(this.#i.focus({focusVisible:this.#r}),this.#r=!1)}isEmpty(){return this.#h?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#h?this.#e!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(e){this.#e===null&&(this.#l=e,this.#d=await Bl._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#p())}toggleAltTextBadge(e=!1){if(!this.#h||this.#e){this.#o?.remove(),this.#o=null;return}if(!this.#o){const n=this.#o=document.createElement("div");n.className="noAltTextBadge",this.#c.div.append(n)}this.#o.classList.toggle("hidden",!e)}serialize(e){let n=this.#e;return!e&&this.#l===n&&(n=this.#d),{altText:n,decorative:this.#t,guessedText:this.#l,textWithDisclaimer:this.#d}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:n,guessedText:i,textWithDisclaimer:r,cancel:s=!1}){i&&(this.#l=i,this.#d=r),!(this.#e===e&&this.#t===n)&&(s||(this.#e=e,this.#t=n),this.#p())}toggle(e=!1){this.#i&&(!e&&this.#a&&(clearTimeout(this.#a),this.#a=null),this.#i.disabled=!e)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#i?.remove(),this.#i=null,this.#n=null,this.#s=null,this.#o?.remove(),this.#o=null}async#p(){const e=this.#i;if(!e)return;if(this.#h){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",Bl.#f[this.#m]),this.#n?.setAttribute("data-l10n-id",Bl.#f[`${this.#m}-label`]),!this.#e){this.#s?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#s?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let n=this.#s;if(!n){this.#s=n=document.createElement("span"),n.className="tooltip",n.setAttribute("role","tooltip"),n.id=`alt-text-tooltip-${this.#c.id}`;const r=100,s=this.#c._uiManager._signal;s.addEventListener("abort",()=>{clearTimeout(this.#a),this.#a=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#a=setTimeout(()=>{this.#a=null,this.#s.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:s}),e.addEventListener("mouseleave",()=>{this.#a&&(clearTimeout(this.#a),this.#a=null),this.#s?.classList.remove("show")},{signal:s})}this.#t?n.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(n.removeAttribute("data-l10n-id"),n.textContent=this.#e),n.parentNode||e.append(n),this.#c.getElementForAltText()?.setAttribute("aria-describedby",n.id)}}class H1{#e=null;#t=null;#i=!1;#n=null;#s=null;#a=null;#r=null;#o=null;#c=!1;#l=null;constructor(e){this.#n=e}renderForToolbar(){const e=this.#t=document.createElement("button");return e.className="comment",this.#d(e,!1)}renderForStandalone(){const e=this.#e=document.createElement("button");e.className="annotationCommentButton";const n=this.#n.commentButtonPosition;if(n){const{style:i}=e;i.insetInlineEnd=`calc(${100*(this.#n._uiManager.direction==="ltr"?1-n[0]:n[0])}% - var(--comment-button-dim))`,i.top=`calc(${100*n[1]}% - var(--comment-button-dim))`;const r=this.#n.commentButtonColor;r&&(i.backgroundColor=r)}return this.#d(e,!0)}focusButton(){setTimeout(()=>{(this.#e??this.#t)?.focus()},0)}onUpdatedColor(){if(!this.#e)return;const e=this.#n.commentButtonColor;e&&(this.#e.style.backgroundColor=e),this.#n._uiManager.updatePopupColor(this.#n)}get commentButtonWidth(){return(this.#e?.getBoundingClientRect().width??0)/this.#n.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#e)return null;const{x:e,y:n,height:i}=this.#e.getBoundingClientRect(),{x:r,y:s,width:a,height:o}=this.#n.parent.boundingClientRect;return[(e-r)/a,(n+i-s)/o]}set commentPopupPositionInLayer(e){this.#l=e}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#e?.remove(),this.#e=null}removeToolbarCommentButton(){this.#t?.remove(),this.#t=null}setCommentButtonStates({selected:e,hasPopup:n}){this.#e&&(this.#e.classList.toggle("selected",e),this.#e.ariaExpanded=n)}#d(e,n){if(!this.#n._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",n?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[this.#n._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-add-comment-button"));const i=this.#n._uiManager._signal;if(!(i instanceof AbortSignal)||i.aborted)return e;e.addEventListener("contextmenu",oo,{signal:i}),n&&(e.addEventListener("focusin",s=>{this.#n._focusEventsAllowed=!1,wi(s)},{capture:!0,signal:i}),e.addEventListener("focusout",s=>{this.#n._focusEventsAllowed=!0,wi(s)},{capture:!0,signal:i})),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:i});const r=s=>{s.preventDefault(),e===this.#t?this.edit():this.#n.toggleComment(!0)};return e.addEventListener("click",r,{capture:!0,signal:i}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(this.#i=!0,r(s))},{signal:i}),e.addEventListener("pointerenter",()=>{this.#n.toggleComment(!1,!0)},{signal:i}),e.addEventListener("pointerleave",()=>{this.#n.toggleComment(!1,!1)},{signal:i}),e}edit(e){const n=this.commentPopupPositionInLayer;let i,r;if(n)[i,r]=n;else{[i,r]=this.#n.commentButtonPosition;const{width:h,height:g,x:v,y}=this.#n;i=v+i*h,r=y+r*g}const s=this.#n.parent.boundingClientRect,{x:a,y:o,width:l,height:u}=s;this.#n._uiManager.editComment(this.#n,a+i*l,o+r*u,{...e,parentDimensions:s})}finish(){this.#t&&(this.#t.focus({focusVisible:this.#i}),this.#i=!1)}isDeleted(){return this.#c||this.#r===""}isEmpty(){return this.#r===null}hasBeenEdited(){return this.isDeleted()||this.#r!==this.#s}serialize(){return this.data}get data(){return{text:this.#r,richText:this.#a,date:this.#o,deleted:this.isDeleted()}}set data(e){if(e!==this.#r&&(this.#a=null),e===null){this.#r="",this.#c=!0;return}this.#r=e,this.#o=new Date,this.#c=!1}restoreData({text:e,richText:n,date:i}){this.#r=e,this.#a=n,this.#o=i,this.#c=!1}setInitialText(e,n=null){this.#s=e,this.data=e,this.#o=null,this.#a=n}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#e?.remove(),this.#e=null,this.#r="",this.#a=null,this.#o=null,this.#n=null,this.#i=!1,this.#c=!1}}class Q2{#e;#t=!1;#i=null;#n;#s;#a;#r;#o=null;#c;#l=null;#d;#h=null;constructor({container:e,isPinchingDisabled:n=null,isPinchingStopped:i=null,onPinchStart:r=null,onPinching:s=null,onPinchEnd:a=null,signal:o}){this.#e=e,this.#i=i,this.#n=n,this.#s=r,this.#a=s,this.#r=a,this.#d=new AbortController,this.#c=AbortSignal.any([o,this.#d.signal]),e.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Xl.pixelRatio}#f(e){if(this.#n?.())return;if(e.touches.length===1){if(this.#o)return;const r=this.#o=new AbortController,s=AbortSignal.any([this.#c,r.signal]),a=this.#e,o={capture:!0,signal:s,passive:!1},l=u=>{u.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};a.addEventListener("pointerdown",u=>{u.pointerType==="touch"&&(wi(u),l(u))},o),a.addEventListener("pointerup",l,o),a.addEventListener("pointercancel",l,o);return}if(!this.#h){this.#h=new AbortController;const r=AbortSignal.any([this.#c,this.#h.signal]),s=this.#e,a={signal:r,capture:!1,passive:!1};s.addEventListener("touchmove",this.#m.bind(this),a);const o=this.#p.bind(this);s.addEventListener("touchend",o,a),s.addEventListener("touchcancel",o,a),a.capture=!0,s.addEventListener("pointerdown",wi,a),s.addEventListener("pointermove",wi,a),s.addEventListener("pointercancel",wi,a),s.addEventListener("pointerup",wi,a),this.#s?.()}if(wi(e),e.touches.length!==2||this.#i?.()){this.#l=null;return}let[n,i]=e.touches;n.identifier>i.identifier&&([n,i]=[i,n]),this.#l={touch0X:n.screenX,touch0Y:n.screenY,touch1X:i.screenX,touch1Y:i.screenY}}#m(e){if(!this.#l||e.touches.length!==2)return;wi(e);let[n,i]=e.touches;n.identifier>i.identifier&&([n,i]=[i,n]);const{screenX:r,screenY:s}=n,{screenX:a,screenY:o}=i,l=this.#l,{touch0X:u,touch0Y:h,touch1X:g,touch1Y:v}=l,y=g-u,w=v-h,S=a-r,x=o-s,T=Math.hypot(S,x)||1,_=Math.hypot(y,w)||1;if(!this.#t&&Math.abs(_-T)<=Q2.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=r,l.touch0Y=s,l.touch1X=a,l.touch1Y=o,!this.#t){this.#t=!0;return}const M=[(r+a)/2,(s+o)/2];this.#a?.(M,_,T)}#p(e){e.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#r?.()),this.#l&&(wi(e),this.#l=null,this.#t=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#o?.abort(),this.#o=null}}class Ze{#e=null;#t=null;#i=null;#n=null;#s=null;#a=!1;#r=null;#o="";#c=null;#l=null;#d=null;#h=null;#f=null;#m="";#p=!1;#u=null;#g=!1;#v=!1;#C=!1;#y=null;#E=0;#x=0;#w=null;#R=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#b=!1;#A=Ze._zIndex++;static _borderLineWidth=-1;static _colorManager=new L3;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=Ze.prototype._resizeWithKeyboard,n=Lh.TRANSLATE_SMALL,i=Lh.TRANSLATE_BIG;return ut(this,"_resizerKeyboardManager",new dC([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-n,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[n,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-n]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,n]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],Ze.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null,this.canAddComment=!0;const{rotation:n,rawDims:{pageWidth:i,pageHeight:r,pageX:s,pageY:a}}=this.parent.viewport;this.rotation=n,this.pageRotation=(360+n-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,r],this.pageTranslation=[s,a];const[o,l]=this.parentDimensions;this.x=e.x/o,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}updatePageIndex(e){this.pageIndex=e}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return ut(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const n=new Fve({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});n.annotationElementId=e.annotationElementId,n.deleted=!0,n._uiManager.addToAnnotationStorage(n)}static initialize(e,n){if(Ze._l10n??=e,Ze._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),Ze._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);Ze._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,n){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,n){on("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#b}set _isDraggable(e){this.#b=e,this.div?.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,n]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*n/(e*2),this.y+=this.width*e/(n*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*n/(e*2),this.y-=this.width*e/(n*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#A}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(this.#N(),this.#h?.remove(),this.#h=null),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#p?this.#p=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,n,i,r){const[s,a]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(e+i)/s,this.y=(n+r)/a,this.fixAndSetPosition()}_moveAfterPaste(e,n){const[i,r]=this.parentDimensions;this.setAt(e*i,n*r,this.width*i,this.height*r),this._onTranslated()}#_([e,n],i,r){[i,r]=this.screenToPageTranslation(i,r),this.x+=i/e,this.y+=r/n,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,n){this.#_(this.parentDimensions,e,n)}translateInPage(e,n){this.#u||=[this.x,this.y,this.width,this.height],this.#_(this.pageDimensions,e,n),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,n){this.#u||=[this.x,this.y,this.width,this.height];const{div:i,parentDimensions:[r,s]}=this;if(this.x+=e/r,this.y+=n/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:g,y:v}=this.div.getBoundingClientRect();this.parent.findNewParent(this,g,v)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:o}=this;const[l,u]=this.getBaseTranslation();a+=l,o+=u;const{style:h}=i;h.left=`${(100*a).toFixed(2)}%`,h.top=`${(100*o).toFixed(2)}%`,this._onTranslating(a,o),i.scrollIntoView({block:"nearest"})}_onTranslating(e,n){}_onTranslated(e,n){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[e,n]=this.parentDimensions,{_borderLineWidth:i}=Ze,r=i/e,s=i/n;switch(this.rotation){case 90:return[-r,s];case 180:return[r,s];case 270:return[r,-s];default:return[-r,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:n},pageDimensions:[i,r]}=this;let{x:s,y:a,width:o,height:l}=this;if(o*=i,l*=r,s*=i,a*=r,this._mustFixPosition)switch(e){case 0:s=Pr(s,0,i-o),a=Pr(a,0,r-l);break;case 90:s=Pr(s,0,i-l),a=Pr(a,o,r);break;case 180:s=Pr(s,o,i),a=Pr(a,l,r);break;case 270:s=Pr(s,l,i),a=Pr(a,0,r-o);break}this.x=s/=i,this.y=a/=r;const[u,h]=this.getBaseTranslation();s+=u,a+=h,n.left=`${(100*s).toFixed(2)}%`,n.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}static#D(e,n,i){switch(i){case 90:return[n,-e];case 180:return[-e,-n];case 270:return[-n,e];default:return[e,n]}}screenToPageTranslation(e,n){return Ze.#D(e,n,this.parentRotation)}pageTranslationToScreen(e,n){return Ze.#D(e,n,360-this.parentRotation)}#M(e){switch(e){case 90:{const[n,i]=this.pageDimensions;return[0,-n/i,i/n,0]}case 180:return[-1,0,0,-1];case 270:{const[n,i]=this.pageDimensions;return[0,n/i,-i/n,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[n,i]}=this;return[n*e,i*e]}setDims(){const{div:{style:e},width:n,height:i}=this;e.width=`${(100*n).toFixed(2)}%`,e.height=`${(100*i).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#B(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],n=this._uiManager._signal;for(const i of e){const r=document.createElement("div");this.#c.append(r),r.classList.add("resizer",i),r.setAttribute("data-resizer-name",i),r.addEventListener("pointerdown",this.#O.bind(this,i),{signal:n}),r.addEventListener("contextmenu",oo,{signal:n}),r.tabIndex=-1}this.div.prepend(this.#c)}#O(e,n){n.preventDefault();const{isMac:i}=Ji.platform;if(n.button!==0||n.ctrlKey&&i)return;this.#i?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#l=[n.screenX,n.screenY];const s=new AbortController,a=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#k.bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",wi,{passive:!1,signal:a}),window.addEventListener("contextmenu",oo,{signal:a}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(n.target).cursor;const u=()=>{s.abort(),this.parent.togglePointerEvents(!0),this.#i?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=o,this.div.style.cursor=l,this.#I()};window.addEventListener("pointerup",u,{signal:a}),window.addEventListener("blur",u,{signal:a})}#F(e,n,i,r){this.width=i,this.height=r,this.x=e,this.y=n,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#I(){if(!this.#d)return;const{savedX:e,savedY:n,savedWidth:i,savedHeight:r}=this.#d;this.#d=null;const s=this.x,a=this.y,o=this.width,l=this.height;s===e&&a===n&&o===i&&l===r||this.addCommands({cmd:this.#F.bind(this,s,a,o,l),undo:this.#F.bind(this,e,n,i,r),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#k(e,n){const[i,r]=this.parentDimensions,s=this.x,a=this.y,o=this.width,l=this.height,u=Ze.MIN_SIZE/i,h=Ze.MIN_SIZE/r,g=this.#M(this.rotation),v=(z,K)=>[g[0]*z+g[2]*K,g[1]*z+g[3]*K],y=this.#M(360-this.rotation),w=(z,K)=>[y[0]*z+y[2]*K,y[1]*z+y[3]*K];let S,x,T=!1,_=!1;switch(e){case"topLeft":T=!0,S=(z,K)=>[0,0],x=(z,K)=>[z,K];break;case"topMiddle":S=(z,K)=>[z/2,0],x=(z,K)=>[z/2,K];break;case"topRight":T=!0,S=(z,K)=>[z,0],x=(z,K)=>[0,K];break;case"middleRight":_=!0,S=(z,K)=>[z,K/2],x=(z,K)=>[0,K/2];break;case"bottomRight":T=!0,S=(z,K)=>[z,K],x=(z,K)=>[0,0];break;case"bottomMiddle":S=(z,K)=>[z/2,K],x=(z,K)=>[z/2,0];break;case"bottomLeft":T=!0,S=(z,K)=>[0,K],x=(z,K)=>[z,0];break;case"middleLeft":_=!0,S=(z,K)=>[0,K/2],x=(z,K)=>[z,K/2];break}const M=S(o,l),F=x(o,l);let L=v(...F);const k=Ze._round(s+L[0]),B=Ze._round(a+L[1]);let H=1,U=1,W,j;if(n.fromKeyboard)({deltaX:W,deltaY:j}=n);else{const{screenX:z,screenY:K}=n,[Q,oe]=this.#l;[W,j]=this.screenToPageTranslation(z-Q,K-oe),this.#l[0]=z,this.#l[1]=K}if([W,j]=w(W/i,j/r),T){const z=Math.hypot(o,l);H=U=Math.max(Math.min(Math.hypot(F[0]-M[0]-W,F[1]-M[1]-j)/z,1/o,1/l),u/o,h/l)}else _?H=Pr(Math.abs(F[0]-M[0]-W),u,1)/o:U=Pr(Math.abs(F[1]-M[1]-j),h,1)/l;const X=Ze._round(o*H),ne=Ze._round(l*U);L=v(...x(X,ne));const $=k-L[0],q=B-L[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=X,this.height=ne,this.x=$,this.y=q,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#i?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#v)return this._editToolbar;this._editToolbar=new $0(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[n,i]of e)await this._editToolbar.addButton(n,i);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#i?.destroy()}addContainer(e){const n=this._editToolbar?.div;n?n.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#i||(Bl.initialize(Ze._l10n),this.#i=new Bl(this),this.#e&&(this.#i.data=this.#e,this.#e=null)),this.#i}get altTextData(){return this.#i?.data}set altTextData(e){this.#i&&(this.#i.data=e)}get guessedAltText(){return this.#i?.guessedText}async setGuessedAltText(e){await this.#i?.setGuessedText(e)}serializeAltText(e){return this.#i?.serialize(e)}hasAltText(){return!!this.#i&&!this.#i.isEmpty()}hasAltTextData(){return this.#i?.hasData()??!1}focusCommentButton(){this.#n?.focusButton()}addCommentButton(){return this.canAddComment?this.#n||=new H1(this):null}addStandaloneCommentButton(){if(this._uiManager.hasCommentManager()){if(this.#s){this._uiManager.isEditingMode()&&this.#s.classList.remove("hidden");return}this.hasComment&&(this.#s=this.#n.renderForStandalone(),this.div.append(this.#s))}}removeStandaloneCommentButton(){this.#n.removeStandaloneCommentButton(),this.#s=null}hideStandaloneCommentButton(){this.#s?.classList.add("hidden")}get comment(){if(!this.#n)return null;const{data:{richText:e,text:n,date:i,deleted:r}}=this.#n;return{text:n,richText:e,date:i,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){this.#n||=new H1(this),typeof e=="object"&&e!==null?this.#n.restoreData(e):this.#n.data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:n,richText:i}){if(!n||(this.#n||=new H1(this),this.#n.setInitialText(e,i),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){return this.#n?.hasBeenEdited()}get hasDeletedComment(){return this.#n?.isDeleted()}get hasComment(){return!!this.#n&&!this.#n.isEmpty()&&!this.#n.isDeleted()}async editComment(e){this.#n||=new H1(this),this.#n.edit(e)}toggleComment(e,n=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,n)}setSelectedCommentButton(e){this.#n.setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,r]=e.rect,[s]=this.pageDimensions,[a]=this.pageTranslation,o=a+s+1,l=r-100,u=o+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[o,l,u,r]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:n}}){this.#n.data=n?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#a?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#z();const[n,i]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*i/n).toFixed(2)}%`,e.style.maxHeight=`${(100*n/i).toFixed(2)}%`);const[r,s]=this.getInitialTranslation();return this.translate(r,s),dz(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#R||=new Q2({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#j.bind(this),onPinching:this.#T.bind(this),onPinchEnd:this.#S.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),e}#j(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#i?.toggle(!1),this.parent.togglePointerEvents(!1)}#T(e,n,i){let s=.7*(i/n)+1-.7;if(s===1)return;const a=this.#M(this.rotation),o=(k,B)=>[a[0]*k+a[2]*B,a[1]*k+a[3]*B],[l,u]=this.parentDimensions,h=this.x,g=this.y,v=this.width,y=this.height,w=Ze.MIN_SIZE/l,S=Ze.MIN_SIZE/u;s=Math.max(Math.min(s,1/v,1/y),w/v,S/y);const x=Ze._round(v*s),T=Ze._round(y*s);if(x===v&&T===y)return;this.#u||=[h,g,v,y];const _=o(v/2,y/2),M=Ze._round(h+_[0]),F=Ze._round(g+_[1]),L=o(x/2,T/2);this.x=M-L[0],this.y=F-L[1],this.width=x,this.height=T,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#S(){this.#i?.toggle(!0),this.parent.togglePointerEvents(!0),this.#I()}pointerdown(e){const{isMac:n}=Ji.platform;if(e.button!==0||e.ctrlKey&&n){e.preventDefault();return}if(this.#p=!0,this._isDraggable){this.#H(e);return}this.#L(e)}#L(e){const{isMac:n}=Ji.platform;e.ctrlKey&&!n||e.shiftKey||e.metaKey&&n?this.parent.toggleSelected(this):this.parent.setSelected(this)}#H(e){const{isSelected:n}=this;this._uiManager.setUpDragSession();let i=!1;const r=new AbortController,s=this._uiManager.combinedSignal(r),a={capture:!0,passive:!1,signal:s},o=u=>{r.abort(),this.#r=null,this.#p=!1,this._uiManager.endDragSession()||this.#L(u),i&&this._onStopDragging()};n&&(this.#E=e.clientX,this.#x=e.clientY,this.#r=e.pointerId,this.#o=e.pointerType,window.addEventListener("pointermove",u=>{i||(i=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:h,clientY:g,pointerId:v}=u;if(v!==this.#r){wi(u);return}const[y,w]=this.screenToPageTranslation(h-this.#E,g-this.#x);this.#E=h,this.#x=g,this._uiManager.dragSelectedEditors(y,w)},a),window.addEventListener("touchmove",wi,a),window.addEventListener("pointerdown",u=>{u.pointerType===this.#o&&(this.#R||u.isPrimary)&&o(u),wi(u)},a));const l=u=>{if(!this.#r||this.#r===u.pointerId){o(u);return}wi(u)};window.addEventListener("pointerup",l,{signal:s}),window.addEventListener("blur",l,{signal:s})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,n,i){e.changeParent(this),this.x=n,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(e,n,i=this.rotation){const r=this.parentScale,[s,a]=this.pageDimensions,[o,l]=this.pageTranslation,u=e/r,h=n/r,g=this.x*s,v=this.y*a,y=this.width*s,w=this.height*a;switch(i){case 0:return[g+u+o,a-v-h-w+l,g+u+y+o,a-v-h+l];case 90:return[g+h+o,a-v+u+l,g+h+w+o,a-v+u+y+l];case 180:return[g-u-y+o,a-v+h+l,g-u+o,a-v+h+w+l];case 270:return[g-h-w+o,a-v-u-y+l,g-h+o,a-v-u+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,n){const[i,r,s,a]=e,o=s-i,l=a-r;switch(this.rotation){case 0:return[i,n-a,o,l];case 90:return[i,n-r,l,o];case 180:return[s,n-r,o,l];case 270:return[s,n-a,l,o];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Ze._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#n?.onUpdatedColor()}getData(){const{comment:{text:e,color:n,date:i,opacity:r,deleted:s,richText:a},uid:o,pageIndex:l,creationDate:u,modificationDate:h}=this;return{id:o,pageIndex:l,rect:this.getPDFRect(),richText:a,contentsObj:{str:e},creationDate:u,modificationDate:i||h,popupRef:!s,color:n,opacity:r}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#v=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#v=!1,!0):!1}isInEditMode(){return this.#v}shouldGetKeyboardEvents(){return this.#C}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:n,bottom:i,right:r}=this.getClientDimensions(),{innerHeight:s,innerWidth:a}=window;return n<a&&r>0&&e<s&&i>0}#z(){if(this.#f||!this.div)return;this.#f=new AbortController;const e=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#z()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,n=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(e,n,i){const r=new this.prototype.constructor({parent:n,id:n.getNextId(),uiManager:i,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});r.rotation=e.rotation,r.#e=e.accessibilityData,r._isCopy=e.isCopy||!1;const[s,a]=r.pageDimensions,[o,l,u,h]=r.getRectInCurrentCoords(e.rect,a);return r.x=o/s,r.y=l/a,r.width=u/s,r.height=h/a,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.hideCommentPopup(),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#N(),this.removeEditToolbar(),this.#w){for(const e of this.#w.values())clearTimeout(e);this.#w=null}this.parent=null,this.#R?.destroy(),this.#R=null,this.#h?.remove(),this.#h=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#B(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,n]}=this,[i,r,s,a]=this.getPDFRect();return[Ze._round(i+(s-i)*e),Ze._round(r+(a-r)*(1-n))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#n.commentPopupPositionInLayer}set commentPopupPosition(e){this.#n.commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return this.#n.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#n.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){this.#n?.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const n=this.#c.children;if(!this.#t){this.#t=Array.from(n);const a=this.#K.bind(this),o=this.#q.bind(this),l=this._uiManager._signal;for(const u of this.#t){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",a,{signal:l}),u.addEventListener("blur",o,{signal:l}),u.addEventListener("focus",this.#Y.bind(this,h),{signal:l}),u.setAttribute("data-l10n-id",Ze._l10nResizer[h])}}const i=this.#t[0];let r=0;for(const a of n){if(a===i)break;r++}const s=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(s!==r){if(s<r)for(let o=0;o<r-s;o++)this.#c.append(this.#c.firstElementChild);else if(s>r)for(let o=0;o<s-r;o++)this.#c.firstElementChild.before(this.#c.lastElementChild);let a=0;for(const o of n){const u=this.#t[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",Ze._l10nResizer[u])}}this.#V(0),this.#C=!0,this.#c.firstElementChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#K(e){Ze._resizerKeyboardManager.exec(this,e)}#q(e){this.#C&&e.relatedTarget?.parentNode!==this.#c&&this.#N()}#Y(e){this.#m=this.#C?e:""}#V(e){if(this.#t)for(const n of this.#t)n.tabIndex=e}_resizeWithKeyboard(e,n){this.#C&&this.#k(this.#m,{deltaX:e,deltaY:n,fromKeyboard:!0})}#N(){this.#C=!1,this.#V(-1),this.#I()}_stopResizingWithKeyboard(){this.#N(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#i?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#i?.toggleAltTextBadge(!0),this.hideCommentPopup())}hideCommentPopup(){this.hasComment&&this._uiManager.toggleComment(null)}updateParams(e,n){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.uid}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#g}set isEditing(e){this.#g=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,n=!1){if(n){this.#w||=new Map;const{action:i}=e;let r=this.#w.get(i);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),this.#w.delete(i),this.#w.size===0&&(this.#w=null)},Ze._telemetryTimeout),this.#w.set(i,r);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#a=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#a=!0}updateFakeAnnotationElement(e){if(!this.#h&&!this.deleted){this.#h=e.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let n=e.container.querySelector(".annotationContent");if(!n)n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),e.container.prepend(n);else if(n.nodeName==="CANVAS"){const i=n;n=document.createElement("div"),n.classList.add("annotationContent",this.editorType),i.before(n)}return n}resetAnnotationElement(e){const{firstElementChild:n}=e.container;n?.nodeName==="DIV"&&n.classList.contains("annotationContent")&&n.remove()}}class Fve extends Ze{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const xF=3285377520,ja=4294901760,Fl=65535;class fz{constructor(e){this.h1=e?e&4294967295:xF,this.h2=e?e&4294967295:xF}update(e){let n,i;if(typeof e=="string"){n=new Uint8Array(e.length*2),i=0;for(let S=0,x=e.length;S<x;S++){const T=e.charCodeAt(S);T<=255?n[i++]=T:(n[i++]=T>>>8,n[i++]=T&255)}}else if(ArrayBuffer.isView(e))n=e.slice(),i=n.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=i>>2,s=i-r*4,a=new Uint32Array(n.buffer,0,r);let o=0,l=0,u=this.h1,h=this.h2;const g=3432918353,v=461845907,y=g&Fl,w=v&Fl;for(let S=0;S<r;S++)S&1?(o=a[S],o=o*g&ja|o*y&Fl,o=o<<15|o>>>17,o=o*v&ja|o*w&Fl,u^=o,u=u<<13|u>>>19,u=u*5+3864292196):(l=a[S],l=l*g&ja|l*y&Fl,l=l<<15|l>>>17,l=l*v&ja|l*w&Fl,h^=l,h=h<<13|h>>>19,h=h*5+3864292196);switch(o=0,s){case 3:o^=n[r*4+2]<<16;case 2:o^=n[r*4+1]<<8;case 1:o^=n[r*4],o=o*g&ja|o*y&Fl,o=o<<15|o>>>17,o=o*v&ja|o*w&Fl,r&1?u^=o:h^=o}this.h1=u,this.h2=h}hexdigest(){let e=this.h1,n=this.h2;return e^=n>>>1,e=e*3981806797&ja|e*36045&Fl,n=n*4283543511&ja|((n<<16|e>>>16)*2950163797&ja)>>>16,e^=n>>>1,e=e*444984403&ja|e*60499&Fl,n=n*3301882366&ja|((n<<16|e>>>16)*3120437893&ja)>>>16,e^=n>>>1,(e>>>0).toString(16).padStart(8,"0")+(n>>>0).toString(16).padStart(8,"0")}}const ED=Object.freeze({map:null,hash:"",transfer:void 0});class F3{#e=!1;#t=null;#i=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,n){const i=this.#n.get(e);return i===void 0?n:Object.assign(n,i)}getRawValue(e){return this.#n.get(e)}remove(e){const n=this.#n.get(e);if(n!==void 0&&(n instanceof Ze&&this.#i.delete(n.annotationElementId),this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const i of this.#n.values())if(i instanceof Ze)return;this.onAnnotationEditor(null)}}setValue(e,n){const i=this.#n.get(e);let r=!1;if(i!==void 0)for(const[s,a]of Object.entries(n))i[s]!==a&&(r=!0,i[s]=a);else r=!0,this.#n.set(e,n);r&&this.#s(),n instanceof Ze&&((this.#i||=new Map).set(n.annotationElementId,n),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(n.constructor._type))}has(e){return this.#n.has(e)}get size(){return this.#n.size}#s(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new gz(this)}get serializable(){if(this.#n.size===0)return ED;const e=new Map,n=new fz,i=[],r=Object.create(null);let s=!1;for(const[a,o]of this.#n){const l=o instanceof Ze?o.serialize(!1,r):o;o.page&&(o.pageIndex=o.page._pageIndex,delete o.page),l&&(e.set(a,l),n.update(`${a}:${JSON.stringify(l)}`),s||=!!l.bitmap)}if(s)for(const a of e.values())a.bitmap&&i.push(a.bitmap);return e.size>0?{map:e,hash:n.hexdigest(),transfer:i}:ED}get editorStats(){let e=null;const n=new Map;let i=0,r=0;for(const s of this.#n.values()){if(!(s instanceof Ze)){s.popup&&(s.popup.deleted?r+=1:i+=1);continue}s.isCommentDeleted?r+=1:s.hasEditedComment&&(i+=1);const a=s.telemetryFinalData;if(!a)continue;const{type:o}=a;n.has(o)||n.set(o,Object.getPrototypeOf(s).constructor),e||=Object.create(null);const l=e[o]||=new Map;for(const[u,h]of Object.entries(a)){if(u==="type")continue;let g=l.get(u);g||(g=new Map,l.set(u,g));const v=g.get(h)??0;g.set(h,v+1)}}if((r>0||i>0)&&(e||=Object.create(null),e.comments={deleted:r,edited:i}),!e)return null;for(const[s,a]of n)e[s]=a.computeTelemetryFinalData(e[s]);return e}resetModifiedIds(){this.#t=null}updateEditor(e,n){const i=this.#i?.get(e);return i?(i.updateFromAnnotationLayer(n),!0):!1}getEditor(e){return this.#i?.get(e)||null}get modifiedIds(){if(this.#t)return this.#t;const e=[];if(this.#i)for(const n of this.#i.values())n.serialize()&&e.push(n.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#n.entries()}}class gz extends F3{#e;constructor(e){super();const{map:n,hash:i,transfer:r}=e.serializable,s=structuredClone(n,r?{transfer:r}:null);this.#e={map:s,hash:i,transfer:r}}get print(){on("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return ut(this,"modifiedIds",{ids:new Set,hash:""})}}class kve{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:n=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const n=this.styleElement.sheet;n.insertRule(e,n.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:n,_inspectFont:i}){if(!(!e||this.#e.has(e.loadedName))){if(an(!n,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:s,style:a}=e,o=new FontFace(r,s,a);this.addNativeFontFace(o);try{await o.load(),this.#e.add(r),i?.(e)}catch{ct(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}on("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(r){throw ct(`Failed to load font '${i.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const n=e.createFontFaceRule();if(n){if(this.insertRule(n),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const r=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return ut(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return ut(this,"isSyncFontLoadingSupported",hs||Ji.platform.isFirefox)}_queueLoadingCallback(e){function n(){for(an(!r.done,"completeRequest() cannot be called twice."),r.done=!0;i.length>0&&i[0].done;){const s=i.shift();setTimeout(s.callback,0)}}const{loadingRequests:i}=this,r={done:!1,complete:n,callback:e};return i.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ut(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,n){function i(F,L){return F.charCodeAt(L)<<24|F.charCodeAt(L+1)<<16|F.charCodeAt(L+2)<<8|F.charCodeAt(L+3)&255}function r(F,L,k,B){const H=F.substring(0,L),U=F.substring(L+k);return H+B+U}let s,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let u=0;function h(F,L){if(++u>30){ct("Load test font never loaded."),L();return}if(l.font="30px "+F,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){L();return}setTimeout(h.bind(null,F,L))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=r(v,976,g.length,g);const w=16,S=1482184792;let x=i(v,w);for(s=0,a=g.length-3;s<a;s+=4)x=x-S+i(g,s)|0;s<g.length&&(x=x-S+i(g+"XXX",s)|0),v=r(v,w,4,mve(x));const T=`url(data:font/opentype;base64,${btoa(v)});`,_=`@font-face {font-family:"${g}";src:${T}}`;this.insertRule(_);const M=this._document.createElement("div");M.style.visibility="hidden",M.style.width=M.style.height="10px",M.style.position="absolute",M.style.top=M.style.left="0px";for(const F of[e.loadedName,g]){const L=this._document.createElement("span");L.textContent="Hi",L.style.fontFamily=F,M.append(L)}this._document.body.append(M),h(g,()=>{M.remove(),n.complete()})}}class Nve{#e;constructor(e,n=null,i,r){this.compiledGlyphs=Object.create(null),this.#e=e,this._inspectFont=n,i&&Object.assign(this,i),r&&(this.charProcOperatorList=r)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${this.data.toBase64()});`;let n;if(!this.cssFontInfo)n=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return this._inspectFont?.(this,e),n}getPathGenerator(e,n){if(this.compiledGlyphs[n]!==void 0)return this.compiledGlyphs[n];const i=this.loadedName+"_path_"+n;let r;try{r=e.get(i)}catch(a){ct(`getPathGenerator - ignoring character: "${a}".`)}const s=hz(r?.path);return this.fontExtraProperties||e.delete(i),this.compiledGlyphs[n]=s}get black(){return this.#e.black}get bold(){return this.#e.bold}get disableFontFace(){return this.#e.disableFontFace??!1}set disableFontFace(e){ut(this,"disableFontFace",!!e)}get fontExtraProperties(){return this.#e.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#e.isInvalidPDFjsFont}get isType3Font(){return this.#e.isType3Font}get italic(){return this.#e.italic}get missingFile(){return this.#e.missingFile}get remeasure(){return this.#e.remeasure}get vertical(){return this.#e.vertical}get ascent(){return this.#e.ascent}get defaultWidth(){return this.#e.defaultWidth}get descent(){return this.#e.descent}get bbox(){return this.#e.bbox}set bbox(e){ut(this,"bbox",e)}get fontMatrix(){return this.#e.fontMatrix}get fallbackName(){return this.#e.fallbackName}get loadedName(){return this.#e.loadedName}get mimetype(){return this.#e.mimetype}get name(){return this.#e.name}get data(){return this.#e.data}clearData(){this.#e.clearData()}get cssFontInfo(){return this.#e.cssFontInfo}get systemFontInfo(){return this.#e.systemFontInfo}get defaultVMetrics(){return this.#e.defaultVMetrics}}class Np{#e;#t;#i;static strings=["fontFamily","fontWeight","italicAngle"];static write(e){const n=new TextEncoder,i={};let r=0;for(const u of Np.strings){const h=n.encode(e[u]);i[u]=h,r+=4+h.length}const s=new ArrayBuffer(r),a=new Uint8Array(s),o=new DataView(s);let l=0;for(const u of Np.strings){const h=i[u],g=h.length;o.setUint32(l,g),a.set(h,l+4),l+=4+g}return an(l===s.byteLength,"CssFontInfo.write: Buffer overflow"),s}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#i=new TextDecoder}#n(e){an(e<Np.strings.length,"Invalid string index");let n=0;for(let r=0;r<e;r++)n+=this.#t.getUint32(n)+4;const i=this.#t.getUint32(n);return this.#i.decode(new Uint8Array(this.#e,n+4,i))}get fontFamily(){return this.#n(0)}get fontWeight(){return this.#n(1)}get italicAngle(){return this.#n(2)}}class Bp{#e;#t;#i;static strings=["css","loadedName","baseFontName","src"];static write(e){const n=new TextEncoder,i={};let r=0;for(const v of Bp.strings){const y=n.encode(e[v]);i[v]=y,r+=4+y.length}r+=4;let s,a,o=1+r;e.style&&(s=n.encode(e.style.style),a=n.encode(e.style.weight),o+=4+s.length+4+a.length);const l=new ArrayBuffer(o),u=new Uint8Array(l),h=new DataView(l);let g=0;h.setUint8(g++,e.guessFallback?1:0),h.setUint32(g,0),g+=4,r=0;for(const v of Bp.strings){const y=i[v],w=y.length;r+=4+w,h.setUint32(g,w),u.set(y,g+4),g+=4+w}return h.setUint32(g-r-4,r),e.style&&(h.setUint32(g,s.length),u.set(s,g+4),g+=4+s.length,h.setUint32(g,a.length),u.set(a,g+4),g+=4+a.length),an(g<=l.byteLength,"SubstitionInfo.write: Buffer overflow"),l.transferToFixedLength(g)}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#i=new TextDecoder}get guessFallback(){return this.#t.getUint8(0)!==0}#n(e){an(e<Bp.strings.length,"Invalid string index");let n=5;for(let r=0;r<e;r++)n+=this.#t.getUint32(n)+4;const i=this.#t.getUint32(n);return this.#i.decode(new Uint8Array(this.#e,n+4,i))}get css(){return this.#n(0)}get loadedName(){return this.#n(1)}get baseFontName(){return this.#n(2)}get src(){return this.#n(3)}get style(){let e=1;e+=4+this.#t.getUint32(e);const n=this.#t.getUint32(e),i=this.#i.decode(new Uint8Array(this.#e,e+4,n));e+=4+n;const r=this.#t.getUint32(e),s=this.#i.decode(new Uint8Array(this.#e,e+4,r));return{style:i,weight:s}}}class yn{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#e=Math.ceil(this.bools.length*2/8);static#t=this.#e+this.numbers.length*8;static#i=this.#t+1+8;static#n=this.#i+1+48;static#s=this.#n+1+6;#a;#r;#o;constructor({data:e,extra:n}){this.#a=e,this.#r=new TextDecoder,this.#o=new DataView(this.#a),n&&Object.assign(this,n)}#c(e){an(e<yn.bools.length,"Invalid boolean index");const n=Math.floor(e/4),i=e*2%8,r=this.#o.getUint8(n)>>i&3;return r===0?void 0:r===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(e){return an(e<yn.numbers.length,"Invalid number index"),this.#o.getFloat64(yn.#e+e*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let e=yn.#t;if(this.#o.getUint8(e)===0)return;e+=1;const i=[];for(let r=0;r<4;r++)i.push(this.#o.getInt16(e,!0)),e+=2;return i}get fontMatrix(){let e=yn.#i;if(this.#o.getUint8(e)===0)return;e+=1;const i=[];for(let r=0;r<6;r++)i.push(this.#o.getFloat64(e,!0)),e+=8;return i}get defaultVMetrics(){let e=yn.#n;if(this.#o.getUint8(e)===0)return;e+=1;const i=[];for(let r=0;r<3;r++)i.push(this.#o.getInt16(e,!0)),e+=2;return i}#d(e){an(e<yn.strings.length,"Invalid string index");let n=yn.#s+4;for(let s=0;s<e;s++)n+=this.#o.getUint32(n)+4;const i=this.#o.getUint32(n),r=new Uint8Array(i);return r.set(new Uint8Array(this.#a,n+4,i)),this.#r.decode(r)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let e=yn.#s;const n=this.#o.getUint32(e);e+=4+n;const i=this.#o.getUint32(e);e+=4+i;const r=this.#o.getUint32(e);e+=4+r;const s=this.#o.getUint32(e);if(s!==0)return new Uint8Array(this.#a,e+4,s)}clearData(){let e=yn.#s;const n=this.#o.getUint32(e);e+=4+n;const i=this.#o.getUint32(e);e+=4+i;const r=this.#o.getUint32(e);e+=4+r;const s=this.#o.getUint32(e);new Uint8Array(this.#a,e+4,s).fill(0),this.#o.setUint32(e,0)}get cssFontInfo(){let e=yn.#s;const n=this.#o.getUint32(e);e+=4+n;const i=this.#o.getUint32(e);e+=4+i;const r=this.#o.getUint32(e);if(r===0)return null;const s=new Uint8Array(r);return s.set(new Uint8Array(this.#a,e+4,r)),new Np(s.buffer)}get systemFontInfo(){let e=yn.#s;const n=this.#o.getUint32(e);e+=4+n;const i=this.#o.getUint32(e);if(i===0)return null;const r=new Uint8Array(i);return r.set(new Uint8Array(this.#a,e+4,i)),new Bp(r.buffer)}static write(e){const n=e.systemFontInfo?Bp.write(e.systemFontInfo):null,i=e.cssFontInfo?Np.write(e.cssFontInfo):null,r=new TextEncoder,s={};let a=0;for(const S of yn.strings)s[S]=r.encode(e[S]),a+=4+s[S].length;const o=yn.#s+4+a+4+(n?n.byteLength:0)+4+(i?i.byteLength:0)+4+(e.data?e.data.length:0),l=new ArrayBuffer(o),u=new Uint8Array(l),h=new DataView(l);let g=0;const v=yn.bools.length;let y=0,w=0;for(let S=0;S<v;S++){const x=e[yn.bools[S]];y|=(x===void 0?0:x?2:1)<<w,w+=2,(w===8||S===v-1)&&(h.setUint8(g++,y),y=0,w=0)}an(g===yn.#e,"FontInfo.write: Boolean properties offset mismatch");for(const S of yn.numbers)h.setFloat64(g,e[S]),g+=8;if(an(g===yn.#t,"FontInfo.write: Number properties offset mismatch"),e.bbox){h.setUint8(g++,4);for(const S of e.bbox)h.setInt16(g,S,!0),g+=2}else h.setUint8(g++,0),g+=8;if(an(g===yn.#i,"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){h.setUint8(g++,6);for(const S of e.fontMatrix)h.setFloat64(g,S,!0),g+=8}else h.setUint8(g++,0),g+=48;if(an(g===yn.#n,"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){h.setUint8(g++,1);for(const S of e.defaultVMetrics)h.setInt16(g,S,!0),g+=2}else h.setUint8(g++,0),g+=6;an(g===yn.#s,"FontInfo.write: DefaultVMetrics properties offset mismatch"),h.setUint32(yn.#s,0),g+=4;for(const S of yn.strings){const x=s[S],T=x.length;h.setUint32(g,T),u.set(x,g+4),g+=4+T}if(h.setUint32(yn.#s,g-yn.#s-4),!n)h.setUint32(g,0),g+=4;else{const S=n.byteLength;h.setUint32(g,S),an(g+4+S<=l.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(n),g+4),g+=4+S}if(!i)h.setUint32(g,0),g+=4;else{const S=i.byteLength;h.setUint32(g,S),an(g+4+S<=l.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(i),g+4),g+=4+S}return e.data===void 0?(h.setUint32(g,0),g+=4):(h.setUint32(g,e.data.length),u.set(e.data,g+4),g+=4+e.data.length),an(g<=l.byteLength,"FontInfo.write: Buffer overflow"),l.transferToFixedLength(g)}}class hr{static#e=0;static#t=1;static#i=2;static#n=3;static#s=4;static#a=8;static#r=12;static#o=16;constructor(e){this.buffer=e,this.view=new DataView(e),this.data=new Uint8Array(e)}static write(e){let n,i=null,r=[],s=[],a=[],o=[],l=null,u=null;switch(e[0]){case"RadialAxial":n=e[1]==="axial"?1:2,i=e[2],a=e[3],n===1?r.push(...e[4],...e[5]):r.push(e[4][0],e[4][1],e[6],e[5][0],e[5][1],e[7]);break;case"Mesh":n=3,l=e[1],r=e[2],s=e[3],o=e[4]||[],i=e[6],u=e[7];break;default:throw new Error(`Unsupported pattern type: ${e[0]}`)}const h=Math.floor(r.length/2),g=Math.floor(s.length/3),v=a.length,y=o.length;let w=0;for(const L of o)w+=1,w=Math.ceil(w/4)*4,w+=4+L.coords.length*4,w+=4+L.colors.length*4,L.verticesPerRow!==void 0&&(w+=4);const S=20+h*8+g*3+v*8+(i?16:0)+(u?3:0)+w,x=new ArrayBuffer(S),T=new DataView(x),_=new Uint8Array(x);T.setUint8(hr.#e,n),T.setUint8(hr.#t,i?1:0),T.setUint8(hr.#i,u?1:0),T.setUint8(hr.#n,l),T.setUint32(hr.#s,h,!0),T.setUint32(hr.#a,g,!0),T.setUint32(hr.#r,v,!0),T.setUint32(hr.#o,y,!0);let M=20;new Float32Array(x,M,h*2).set(r),M+=h*8,_.set(s,M),M+=g*3;for(const[L,k]of a)T.setFloat32(M,L,!0),M+=4,T.setUint32(M,parseInt(k.slice(1),16),!0),M+=4;if(i)for(const L of i)T.setFloat32(M,L,!0),M+=4;u&&(_.set(u,M),M+=3);for(let L=0;L<o.length;L++){const k=o[L];T.setUint8(M,k.type),M+=1,M=Math.ceil(M/4)*4,T.setUint32(M,k.coords.length,!0),M+=4,new Int32Array(x,M,k.coords.length).set(k.coords),M+=k.coords.length*4,T.setUint32(M,k.colors.length,!0),M+=4,new Int32Array(x,M,k.colors.length).set(k.colors),M+=k.colors.length*4,k.verticesPerRow!==void 0&&(T.setUint32(M,k.verticesPerRow,!0),M+=4)}return x}getIR(){const e=this.view,n=this.data[hr.#e],i=!!this.data[hr.#t],r=!!this.data[hr.#i],s=e.getUint32(hr.#s,!0),a=e.getUint32(hr.#a,!0),o=e.getUint32(hr.#r,!0),l=e.getUint32(hr.#o,!0);let u=20;const h=new Float32Array(this.buffer,u,s*2);u+=s*8;const g=new Uint8Array(this.buffer,u,a*3);u+=a*3;const v=[];for(let x=0;x<o;++x){const T=e.getFloat32(u,!0);u+=4;const _=e.getUint32(u,!0);u+=4,v.push([T,`#${_.toString(16).padStart(6,"0")}`])}let y=null;if(i){y=[];for(let x=0;x<4;++x)y.push(e.getFloat32(u,!0)),u+=4}let w=null;r&&(w=new Uint8Array(this.buffer,u,3),u+=3);const S=[];for(let x=0;x<l;++x){const T=e.getUint8(u);u+=1,u=Math.ceil(u/4)*4;const _=e.getUint32(u,!0);u+=4;const M=new Int32Array(this.buffer,u,_);u+=_*4;const F=e.getUint32(u,!0);u+=4;const L=new Int32Array(this.buffer,u,F);u+=F*4;const k={type:T,coords:M,colors:L};T===bD.LATTICE&&(k.verticesPerRow=e.getUint32(u,!0),u+=4),S.push(k)}if(n===1)return["RadialAxial","axial",y,v,Array.from(h.slice(0,2)),Array.from(h.slice(2,4)),null,null];if(n===2)return["RadialAxial","radial",y,v,[h[0],h[1]],[h[3],h[4]],h[2],h[5]];if(n===3){const x=this.data[hr.#n];let T=null;if(h.length>0){let _=h[0],M=h[0],F=h[1],L=h[1];for(let k=0;k<h.length;k+=2){const B=h[k],H=h[k+1];_=_>B?B:_,F=F>H?H:F,M=M<B?B:M,L=L<H?H:L}T=[_,F,M,L]}return["Mesh",x,h,g,S,T,y,w]}throw new Error(`Unsupported pattern kind: ${n}`)}}class Bve{static write(e){let n,i;return Ji.isFloat16ArraySupported?(i=new ArrayBuffer(e.length*2),n=new Float16Array(i)):(i=new ArrayBuffer(e.length*4),n=new Float32Array(i)),n.set(e),i}#e;constructor(e){this.#e=e}get path(){return Ji.isFloat16ArraySupported?new Float16Array(this.#e):new Float32Array(this.#e)}}function Ive(t){if(t instanceof URL)return t.href;if(typeof t=="string"){if(hs)return t;const e=URL.parse(t,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Hve(t){if(hs&&typeof Buffer<"u"&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if(typeof t=="string")return $2(t);if(t instanceof ArrayBuffer||ArrayBuffer.isView(t)||typeof t=="object"&&!isNaN(t?.length))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function G1(t){if(typeof t!="string")return null;if(t.endsWith("/"))return t;throw new Error(`Invalid factory url: "${t}" must include trailing slash.`)}const TD=t=>typeof t=="object"&&Number.isInteger(t?.num)&&t.num>=0&&Number.isInteger(t?.gen)&&t.gen>=0,Gve=t=>typeof t=="object"&&typeof t?.name=="string",zve=wve.bind(null,TD,Gve);class Vve{#e=new Map;#t=Promise.resolve();postMessage(e,n){const i={data:structuredClone(e,n?{transfer:n}:null)};this.#t.then(()=>{for(const[r]of this.#e)r.call(this,i)})}addEventListener(e,n,i=null){let r=null;if(i?.signal instanceof AbortSignal){const{signal:s}=i;if(s.aborted){ct("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,n);r=()=>s.removeEventListener("abort",a),s.addEventListener("abort",a)}this.#e.set(n,r)}removeEventListener(e,n){this.#e.get(n)?.(),this.#e.delete(n)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}const z1={DATA:1,ERROR:2},Bi={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function AF(){}function Bs(t){if(t instanceof Oh||t instanceof wD||t instanceof mF||t instanceof ES||t instanceof gT)return t;switch(t instanceof Error||typeof t=="object"&&t!==null||on('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new Oh(t.message);case"InvalidPDFException":return new wD(t.message);case"PasswordException":return new mF(t.message,t.code);case"ResponseException":return new ES(t.message,t.status,t.missing);case"UnknownErrorException":return new gT(t.message,t.details)}return new gT(t.message,t.toString())}class N0{#e=new AbortController;constructor(e,n,i){this.sourceName=e,this.targetName=n,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#n(e);return}if(e.callback){const i=e.callbackId,r=this.callbackCapabilities[i];if(!r)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],e.callback===z1.DATA)r.resolve(e.data);else if(e.callback===z1.ERROR)r.reject(Bs(e.reason));else throw new Error("Unexpected callback case");return}const n=this.actionHandler[e.action];if(!n)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const i=this.sourceName,r=e.sourceName,s=this.comObj;Promise.try(n,e.data).then(function(a){s.postMessage({sourceName:i,targetName:r,callback:z1.DATA,callbackId:e.callbackId,data:a})},function(a){s.postMessage({sourceName:i,targetName:r,callback:z1.ERROR,callbackId:e.callbackId,reason:Bs(a)})});return}if(e.streamId){this.#i(e);return}n(e.data)}on(e,n){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=n}send(e,n,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:n},i)}sendWithPromise(e,n,i){const r=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[r]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:n},i)}catch(a){s.reject(a)}return s.promise}sendWithStream(e,n,i,r){const s=this.streamId++,a=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[s]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:o,action:e,streamId:s,data:n,desiredSize:u.desiredSize},r),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[s].pullCall=h,l.postMessage({sourceName:a,targetName:o,stream:Bi.PULL,streamId:s,desiredSize:u.desiredSize}),h.promise},cancel:u=>{an(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[s].cancelCall=h,this.streamControllers[s].isClosed=!0,l.postMessage({sourceName:a,targetName:o,stream:Bi.CANCEL,streamId:s,reason:Bs(u)}),h.promise}},i)}#i(e){const n=e.streamId,i=this.sourceName,r=e.sourceName,s=this.comObj,a=this,o=this.actionHandler[e.action],l={enqueue(u,h=1,g){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=h,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:i,targetName:r,stream:Bi.ENQUEUE,streamId:n,chunk:u},g)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:r,stream:Bi.CLOSE,streamId:n}),delete a.streamSinks[n])},error(u){an(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:i,targetName:r,stream:Bi.ERROR,streamId:n,reason:Bs(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[n]=l,Promise.try(o,e.data,l).then(function(){s.postMessage({sourceName:i,targetName:r,stream:Bi.START_COMPLETE,streamId:n,success:!0})},function(u){s.postMessage({sourceName:i,targetName:r,stream:Bi.START_COMPLETE,streamId:n,reason:Bs(u)})})}#n(e){const n=e.streamId,i=this.sourceName,r=e.sourceName,s=this.comObj,a=this.streamControllers[n],o=this.streamSinks[n];switch(e.stream){case Bi.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(Bs(e.reason));break;case Bi.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(Bs(e.reason));break;case Bi.PULL:if(!o){s.postMessage({sourceName:i,targetName:r,stream:Bi.PULL_COMPLETE,streamId:n,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||AF).then(function(){s.postMessage({sourceName:i,targetName:r,stream:Bi.PULL_COMPLETE,streamId:n,success:!0})},function(u){s.postMessage({sourceName:i,targetName:r,stream:Bi.PULL_COMPLETE,streamId:n,reason:Bs(u)})});break;case Bi.ENQUEUE:if(an(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case Bi.CLOSE:if(an(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),this.#s(a,n);break;case Bi.ERROR:an(a,"error should have stream controller"),a.controller.error(Bs(e.reason)),this.#s(a,n);break;case Bi.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(Bs(e.reason)),this.#s(a,n);break;case Bi.CANCEL:if(!o)break;const l=Bs(e.reason);Promise.try(o.onCancel||AF,l).then(function(){s.postMessage({sourceName:i,targetName:r,stream:Bi.CANCEL_COMPLETE,streamId:n,success:!0})},function(u){s.postMessage({sourceName:i,targetName:r,stream:Bi.CANCEL_COMPLETE,streamId:n,reason:Bs(u)})}),o.sinkCapability.reject(l),o.isCancelled=!0,delete this.streamSinks[n];break;default:throw new Error("Unexpected stream case")}}async#s(e,n){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[n]}destroy(){this.#e?.abort(),this.#e=null}}class pz{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,n){if(e<=0||n<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,n);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,n,i){if(!e.canvas)throw new Error("Canvas is not specified");if(n<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=n,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,n){on("Abstract method `_createCanvas` called.")}}class Uve extends pz{constructor({ownerDocument:e=globalThis.document,enableHWA:n=!1}){super({enableHWA:n}),this._document=e}_createCanvas(e,n){const i=this._document.createElement("canvas");return i.width=e,i.height=n,i}}class mz{constructor({baseUrl:e=null,isCompressed:n=!0}){this.baseUrl=e,this.isCompressed=n}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const n=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(n).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${n}`)})}async _fetch(e){on("Abstract method `_fetch` called.")}}class EF extends mz{async _fetch(e){const n=await cC(e,this.isCompressed?"arraybuffer":"text");return n instanceof ArrayBuffer?new Uint8Array(n):$2(n)}}class vz{addFilter(e){return"none"}addHCMFilter(e,n){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,n,i,r,s){return"none"}destroy(e=!1){}}class jve extends vz{#e;#t;#i;#n;#s;#a;#r=0;constructor({docId:e,ownerDocument:n=globalThis.document}){super(),this.#n=e,this.#s=n}get#o(){return this.#t||=new Map}get#c(){return this.#a||=new Map}get#l(){if(!this.#i){const e=this.#s.createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const i=this.#s.createElementNS(Nc,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#i=this.#s.createElementNS(Nc,"defs"),e.append(i),i.append(this.#i),this.#s.body.append(e)}return this.#i}#d(e){if(e.length===1){const l=e[0],u=new Array(256);for(let g=0;g<256;g++)u[g]=l[g]/255;const h=u.join(",");return[h,h,h]}const[n,i,r]=e,s=new Array(256),a=new Array(256),o=new Array(256);for(let l=0;l<256;l++)s[l]=n[l]/255,a[l]=i[l]/255,o[l]=r[l]/255;return[s.join(","),a.join(","),o.join(",")]}#h(e){if(this.#e===void 0){this.#e="";const n=this.#s.URL;n!==this.#s.baseURI&&(Z2(n)?ct('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=oz(n,""))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let n=this.#o.get(e);if(n)return n;const[i,r,s]=this.#d(e),a=e.length===1?i:`${i}${r}${s}`;if(n=this.#o.get(a),n)return this.#o.set(e,n),n;const o=`g_${this.#n}_transfer_map_${this.#r++}`,l=this.#h(o);this.#o.set(e,l),this.#o.set(a,l);const u=this.#p(o);return this.#g(i,r,s,u),l}addHCMFilter(e,n){const i=`${e}-${n}`,r="base";let s=this.#c.get(r);if(s?.key===i||(s?(s.filter?.remove(),s.key=i,s.url="none",s.filter=null):(s={key:i,url:"none",filter:null},this.#c.set(r,s)),!e||!n))return s.url;const a=this.#C(e);e=Ge.makeHexColor(...a);const o=this.#C(n);if(n=Ge.makeHexColor(...o),this.#l.style.color="",e==="#000000"&&n==="#ffffff"||e===n)return s.url;const l=new Array(256);for(let y=0;y<=255;y++){const w=y/255;l[y]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const u=l.join(","),h=`g_${this.#n}_hcm_filter`,g=s.filter=this.#p(h);this.#g(u,u,u,g),this.#m(g);const v=(y,w)=>{const S=a[y]/255,x=o[y]/255,T=new Array(w+1);for(let _=0;_<=w;_++)T[_]=S+_/w*(x-S);return T.join(",")};return this.#g(v(0,5),v(1,5),v(2,5),g),s.url=this.#h(h),s.url}addAlphaFilter(e){let n=this.#o.get(e);if(n)return n;const[i]=this.#d([e]),r=`alpha_${i}`;if(n=this.#o.get(r),n)return this.#o.set(e,n),n;const s=`g_${this.#n}_alpha_map_${this.#r++}`,a=this.#h(s);this.#o.set(e,a),this.#o.set(r,a);const o=this.#p(s);return this.#v(i,o),a}addLuminosityFilter(e){let n=this.#o.get(e||"luminosity");if(n)return n;let i,r;if(e?([i]=this.#d([e]),r=`luminosity_${i}`):r="luminosity",n=this.#o.get(r),n)return this.#o.set(e,n),n;const s=`g_${this.#n}_luminosity_map_${this.#r++}`,a=this.#h(s);this.#o.set(e,a),this.#o.set(r,a);const o=this.#p(s);return this.#f(o),e&&this.#v(i,o),a}addHighlightHCMFilter(e,n,i,r,s){const a=`${n}-${i}-${r}-${s}`;let o=this.#c.get(e);if(o?.key===a||(o?(o.filter?.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},this.#c.set(e,o)),!n||!i))return o.url;const[l,u]=[n,i].map(this.#C.bind(this));let h=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),g=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[v,y]=[r,s].map(this.#C.bind(this));g<h&&([h,g,v,y]=[g,h,y,v]),this.#l.style.color="";const w=(T,_,M)=>{const F=new Array(256),L=(g-h)/M,k=T/255,B=(_-T)/(255*M);let H=0;for(let U=0;U<=M;U++){const W=Math.round(h+U*L),j=k+U*B;for(let X=H;X<=W;X++)F[X]=j;H=W+1}for(let U=H;U<256;U++)F[U]=F[H-1];return F.join(",")},S=`g_${this.#n}_hcm_${e}_filter`,x=o.filter=this.#p(S);return this.#m(x),this.#g(w(v[0],y[0],5),w(v[1],y[1],5),w(v[2],y[2],5),x),o.url=this.#h(S),o.url}destroy(e=!1){e&&this.#a?.size||(this.#i?.parentNode.parentNode.remove(),this.#i=null,this.#t?.clear(),this.#t=null,this.#a?.clear(),this.#a=null,this.#r=0)}#f(e){const n=this.#s.createElementNS(Nc,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)}#m(e){const n=this.#s.createElementNS(Nc,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)}#p(e){const n=this.#s.createElementNS(Nc,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),this.#l.append(n),n}#u(e,n,i){const r=this.#s.createElementNS(Nc,n);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),e.append(r)}#g(e,n,i,r){const s=this.#s.createElementNS(Nc,"feComponentTransfer");r.append(s),this.#u(s,"feFuncR",e),this.#u(s,"feFuncG",n),this.#u(s,"feFuncB",i)}#v(e,n){const i=this.#s.createElementNS(Nc,"feComponentTransfer");n.append(i),this.#u(i,"feFuncA",e)}#C(e){return this.#l.style.color=e,hC(getComputedStyle(this.#l).getPropertyValue("color"))}}class yz{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const n=`${this.baseUrl}${e}`;return this._fetch(n).catch(i=>{throw new Error(`Unable to load font data at: ${n}`)})}async _fetch(e){on("Abstract method `_fetch` called.")}}class TF extends yz{async _fetch(e){const n=await cC(e,"arraybuffer");return new Uint8Array(n)}}class Cz{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const n=`${this.baseUrl}${e}`;return this._fetch(n).catch(i=>{throw new Error(`Unable to load wasm data at: ${n}`)})}async _fetch(e){on("Abstract method `_fetch` called.")}}class RF extends Cz{async _fetch(e){const n=await cC(e,"arraybuffer");return new Uint8Array(n)}}hs&&ct("Please use the `legacy` build in Node.js environments.");async function k3(t){const n=await process.getBuiltinModule("fs").promises.readFile(t);return new Uint8Array(n)}class Wve extends vz{}class qve extends pz{_createCanvas(e,n){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,n)}}class Kve extends mz{async _fetch(e){return k3(e)}}class Yve extends yz{async _fetch(e){return k3(e)}}class Xve extends Cz{async _fetch(e){return k3(e)}}const hp="__forcedDependency",{floor:DF,ceil:MF}=Math;function V1(t,e,n,i,r,s){t[e*4+0]=Math.min(t[e*4+0],n),t[e*4+1]=Math.min(t[e*4+1],i),t[e*4+2]=Math.max(t[e*4+2],r),t[e*4+3]=Math.max(t[e*4+3],s)}const RD=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class $ve{#e;#t;constructor(e,n){this.#e=e,this.#t=n}get length(){return this.#e.length}isEmpty(e){return this.#e[e]===RD}minX(e){return this.#t[e*4+0]/256}minY(e){return this.#t[e*4+1]/256}maxX(e){return(this.#t[e*4+2]+1)/256}maxY(e){return(this.#t[e*4+3]+1)/256}}const U1=(t,e)=>{if(!t)return;let n=t.get(e);return n||(n={dependencies:new Set,isRenderingOperation:!1},t.set(e,n)),n};class Zve{#e={__proto__:null};#t={__proto__:null,transform:[],moveText:[],sameLineText:[],[hp]:[]};#i=new Map;#n=[];#s=[];#a=[[1,0,0,1,0,0]];#r=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#d=new Map;#h=new Map;#f;#m;#p;#u;#g;constructor(e,n,i=!1){this.#f=e.width,this.#m=e.height,this.#v(n),i&&(this.#g=new Map)}growOperationsCount(e){e>=this.#u.length&&this.#v(e,this.#u)}#v(e,n){const i=new ArrayBuffer(e*4);this.#p=new Uint8ClampedArray(i),this.#u=new Uint32Array(i),n&&n.length>0?(this.#u.set(n),this.#u.fill(RD,n.length)):this.#u.fill(RD)}save(e){return this.#e={__proto__:this.#e},this.#t={__proto__:this.#t,transform:{__proto__:this.#t.transform},moveText:{__proto__:this.#t.moveText},sameLineText:{__proto__:this.#t.sameLineText},[hp]:{__proto__:this.#t[hp]}},this.#r={__proto__:this.#r},this.#n.push(e),this}restore(e){const n=Object.getPrototypeOf(this.#e);if(n===null)return this;this.#e=n,this.#t=Object.getPrototypeOf(this.#t),this.#r=Object.getPrototypeOf(this.#r);const i=this.#n.pop();return i!==void 0&&(U1(this.#g,e)?.dependencies.add(i),this.#u[e]=this.#u[i]),this}recordOpenMarker(e){return this.#n.push(e),this}getOpenMarker(){return this.#n.length===0?null:this.#n.at(-1)}recordCloseMarker(e){const n=this.#n.pop();return n!==void 0&&(U1(this.#g,e)?.dependencies.add(n),this.#u[e]=this.#u[n]),this}beginMarkedContent(e){return this.#s.push(e),this}endMarkedContent(e){const n=this.#s.pop();return n!==void 0&&(U1(this.#g,e)?.dependencies.add(n),this.#u[e]=this.#u[n]),this}pushBaseTransform(e){return this.#a.push(Ge.multiplyByDOMMatrix(this.#a.at(-1),e.getTransform())),this}popBaseTransform(){return this.#a.length>1&&this.#a.pop(),this}recordSimpleData(e,n){return this.#e[e]=n,this}recordIncrementalData(e,n){return this.#t[e].push(n),this}resetIncrementalData(e,n){return this.#t[e].length=0,this}recordNamedData(e,n){return this.#i.set(e,n),this}recordSimpleDataFromNamed(e,n,i){this.#e[e]=this.#i.get(n)??i}recordFutureForcedDependency(e,n){return this.recordIncrementalData(hp,n),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const n of e)n in this.#e&&this.recordFutureForcedDependency(n,this.#e[n]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of this.#l)this.recordFutureForcedDependency(hp,e);return this}resetBBox(e){return this.#c!==e&&(this.#c=e,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(e,n,i,r,s,a){const o=Ge.multiplyByDOMMatrix(this.#a.at(-1),n.getTransform()),l=[1/0,1/0,-1/0,-1/0];Ge.axialAlignedBoundingBox([i,s,r,a],o,l);const u=Ge.intersect(this.#r,l);return u?(this.#r[0]=u[0],this.#r[1]=u[1],this.#r[2]=u[2],this.#r[3]=u[3]):(this.#r[0]=this.#r[1]=1/0,this.#r[2]=this.#r[3]=-1/0),this}recordBBox(e,n,i,r,s,a){const o=this.#r;if(o[0]===1/0)return this;const l=Ge.multiplyByDOMMatrix(this.#a.at(-1),n.getTransform());if(o[0]===-1/0)return Ge.axialAlignedBoundingBox([i,s,r,a],l,this.#o),this;const u=[1/0,1/0,-1/0,-1/0];return Ge.axialAlignedBoundingBox([i,s,r,a],l,u),this.#o[0]=Math.min(this.#o[0],Math.max(u[0],o[0])),this.#o[1]=Math.min(this.#o[1],Math.max(u[1],o[1])),this.#o[2]=Math.max(this.#o[2],Math.min(u[2],o[2])),this.#o[3]=Math.max(this.#o[3],Math.min(u[3],o[3])),this}recordCharacterBBox(e,n,i,r=1,s=0,a=0,o){const l=i.bbox;let u,h;if(l&&(u=l[2]!==l[0]&&l[3]!==l[1]&&this.#h.get(i),u!==!1&&(h=[0,0,0,0],Ge.axialAlignedBoundingBox(l,i.fontMatrix,h),(r!==1||s!==0||a!==0)&&Ge.scaleMinMax([r,0,0,-r,s,a],h),u)))return this.recordBBox(e,n,h[0],h[2],h[1],h[3]);if(!o)return this.recordFullPageBBox(e);const g=o();return l&&h&&u===void 0&&(u=h[0]<=s-g.actualBoundingBoxLeft&&h[2]>=s+g.actualBoundingBoxRight&&h[1]<=a-g.actualBoundingBoxAscent&&h[3]>=a+g.actualBoundingBoxDescent,this.#h.set(i,u),u)?this.recordBBox(e,n,h[0],h[2],h[1],h[3]):this.recordBBox(e,n,s-g.actualBoundingBoxLeft,s+g.actualBoundingBoxRight,a-g.actualBoundingBoxAscent,a+g.actualBoundingBoxDescent)}recordFullPageBBox(e){return this.#o[0]=Math.max(0,this.#r[0]),this.#o[1]=Math.max(0,this.#r[1]),this.#o[2]=Math.min(this.#f,this.#r[2]),this.#o[3]=Math.min(this.#m,this.#r[3]),this}getSimpleIndex(e){return this.#e[e]}recordDependencies(e,n){const i=this.#l,r=this.#e,s=this.#t;for(const a of n)a in this.#e?i.add(r[a]):a in s&&s[a].forEach(i.add,i);return this}recordNamedDependency(e,n){return this.#i.has(n)&&this.#l.add(this.#i.get(n)),this}recordOperation(e,n=!1){if(this.recordDependencies(e,[hp]),this.#g){const i=U1(this.#g,e),{dependencies:r}=i;this.#l.forEach(r.add,r),this.#n.forEach(r.add,r),this.#s.forEach(r.add,r),r.delete(e),i.isRenderingOperation=!0}if(this.#c===e){const i=DF(this.#o[0]*256/this.#f),r=DF(this.#o[1]*256/this.#m),s=MF(this.#o[2]*256/this.#f),a=MF(this.#o[3]*256/this.#m);V1(this.#p,e,i,r,s,a);for(const o of this.#l)o!==e&&V1(this.#p,o,i,r,s,a);for(const o of this.#n)o!==e&&V1(this.#p,o,i,r,s,a);for(const o of this.#s)o!==e&&V1(this.#p,o,i,r,s,a);n||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(e,n=!1){const i=Array.from(this.#l);this.recordOperation(e,n),this.recordIncrementalData("sameLineText",e);for(const r of i)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(e,n=!1){return this.#c===e&&(this.#c=-1,this.#r[0]=Math.max(this.#r[0],this.#o[0]),this.#r[1]=Math.max(this.#r[1],this.#o[1]),this.#r[2]=Math.min(this.#r[2],this.#o[2]),this.#r[3]=Math.min(this.#r[3],this.#o[3]),n||this.#l.clear()),this}_takePendingDependencies(){const e=this.#l;return this.#l=new Set,e}_extractOperation(e){const n=this.#d.get(e);return this.#d.delete(e),n}_pushPendingDependencies(e){for(const n of e)this.#l.add(n)}take(){return this.#h.clear(),new $ve(this.#u,this.#p)}takeDebugMetadata(){return this.#g}}class TS{#e;#t;#i;#n=0;#s=0;constructor(e,n,i){if(e instanceof TS&&e.#i===!!i)return e;this.#e=e,this.#t=n,this.#i=!!i}growOperationsCount(){throw new Error("Unreachable")}save(e){return this.#s++,this.#e.save(this.#t),this}restore(e){return this.#s>0&&(this.#e.restore(this.#t),this.#s--),this}recordOpenMarker(e){return this.#n++,this}getOpenMarker(){return this.#n>0?this.#t:this.#e.getOpenMarker()}recordCloseMarker(e){return this.#n--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return this.#e.pushBaseTransform(e),this}popBaseTransform(){return this.#e.popBaseTransform(),this}recordSimpleData(e,n){return this.#e.recordSimpleData(e,this.#t),this}recordIncrementalData(e,n){return this.#e.recordIncrementalData(e,this.#t),this}resetIncrementalData(e,n){return this.#e.resetIncrementalData(e,this.#t),this}recordNamedData(e,n){return this}recordSimpleDataFromNamed(e,n,i){return this.#e.recordSimpleDataFromNamed(e,n,this.#t),this}recordFutureForcedDependency(e,n){return this.#e.recordFutureForcedDependency(e,this.#t),this}inheritSimpleDataAsFutureForcedDependencies(e){return this.#e.inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#e.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return this.#i||this.#e.resetBBox(this.#t),this}recordClipBox(e,n,i,r,s,a){return this.#i||this.#e.recordClipBox(this.#t,n,i,r,s,a),this}recordBBox(e,n,i,r,s,a){return this.#i||this.#e.recordBBox(this.#t,n,i,r,s,a),this}recordCharacterBBox(e,n,i,r,s,a,o){return this.#i||this.#e.recordCharacterBBox(this.#t,n,i,r,s,a,o),this}recordFullPageBBox(e){return this.#i||this.#e.recordFullPageBBox(this.#t),this}getSimpleIndex(e){return this.#e.getSimpleIndex(e)}recordDependencies(e,n){return this.#e.recordDependencies(this.#t,n),this}recordNamedDependency(e,n){return this.#e.recordNamedDependency(this.#t,n),this}recordOperation(e){return this.#e.recordOperation(this.#t,!0),this}recordShowTextOperation(e){return this.#e.recordShowTextOperation(this.#t,!0),this}bboxToClipBoxDropOperation(e){return this.#i||this.#e.bboxToClipBoxDropOperation(this.#t,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const Wa={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Lr={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function DD(t,e){if(!e)return;const n=e[2]-e[0],i=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],n,i),t.clip(r)}class N3{isModifyingCurrentTransform(){return!1}getPattern(){on("Abstract method `getPattern` called.")}}class Qve extends N3{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}isOriginBased(){return this._p0[0]===0&&this._p0[1]===0&&(!this.isRadial()||this._p1[0]===0&&this._p1[1]===0)}isRadial(){return this._type==="radial"}_createGradient(e,n=null){let i,r=this._p0,s=this._p1;if(n&&(r=r.slice(),s=s.slice(),Ge.applyTransform(r,n),Ge.applyTransform(s,n)),this._type==="axial")i=e.createLinearGradient(r[0],r[1],s[0],s[1]);else if(this._type==="radial"){let a=this._r0,o=this._r1;if(n){const l=new Float32Array(2);Ge.singularValueDecompose2dScale(n,l),a*=l[0],o*=l[0]}i=e.createRadialGradient(r[0],r[1],a,s[0],s[1],o)}for(const a of this._colorStops)i.addColorStop(a[0],a[1]);return i}getPattern(e,n,i,r){let s;if(r===Lr.STROKE||r===Lr.FILL){if(this.isOriginBased()){let v=Ge.transform(i,n.baseTransform);this.matrix&&(v=Ge.transform(v,this.matrix));const y=.001,w=Math.hypot(v[0],v[1]),S=Math.hypot(v[2],v[3]),x=(v[0]*v[2]+v[1]*v[3])/(w*S);if(Math.abs(x)<y)if(this.isRadial()){if(Math.abs(w-S)<y)return this._createGradient(e,v)}else return this._createGradient(e,v)}const a=n.current.getClippedPathBoundingBox(r,oi(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,l=Math.ceil(a[3]-a[1])||1,u=n.cachedCanvases.getCanvas("pattern",o,l),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-a[0],-a[1]),i=Ge.transform(i,[1,0,0,1,a[0],a[1]]),h.transform(...n.baseTransform),this.matrix&&h.transform(...this.matrix),DD(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),s=e.createPattern(u.canvas,"no-repeat");const g=new DOMMatrix(i);s.setTransform(g)}else DD(e,this._bbox),s=this._createGradient(e);return s}}function vT(t,e,n,i,r,s,a,o){const l=e.coords,u=e.colors,h=t.data,g=t.width*4;let v;l[n+1]>l[i+1]&&(v=n,n=i,i=v,v=s,s=a,a=v),l[i+1]>l[r+1]&&(v=i,i=r,r=v,v=a,a=o,o=v),l[n+1]>l[i+1]&&(v=n,n=i,i=v,v=s,s=a,a=v);const y=(l[n]+e.offsetX)*e.scaleX,w=(l[n+1]+e.offsetY)*e.scaleY,S=(l[i]+e.offsetX)*e.scaleX,x=(l[i+1]+e.offsetY)*e.scaleY,T=(l[r]+e.offsetX)*e.scaleX,_=(l[r+1]+e.offsetY)*e.scaleY;if(w>=_)return;const M=u[s],F=u[s+1],L=u[s+2],k=u[a],B=u[a+1],H=u[a+2],U=u[o],W=u[o+1],j=u[o+2],X=Math.round(w),ne=Math.round(_);let $,q,z,K,Q,oe,le,V;for(let Z=X;Z<=ne;Z++){if(Z<x){const ze=Z<w?0:(w-Z)/(w-x);$=y-(y-S)*ze,q=M-(M-k)*ze,z=F-(F-B)*ze,K=L-(L-H)*ze}else{let ze;Z>_?ze=1:x===_?ze=0:ze=(x-Z)/(x-_),$=S-(S-T)*ze,q=k-(k-U)*ze,z=B-(B-W)*ze,K=H-(H-j)*ze}let ae;Z<w?ae=0:Z>_?ae=1:ae=(w-Z)/(w-_),Q=y-(y-T)*ae,oe=M-(M-U)*ae,le=F-(F-W)*ae,V=L-(L-j)*ae;const Ee=Math.round(Math.min($,Q)),Pe=Math.round(Math.max($,Q));let Ie=g*Z+Ee*4;for(let ze=Ee;ze<=Pe;ze++)ae=($-ze)/($-Q),ae<0?ae=0:ae>1&&(ae=1),h[Ie++]=q-(q-oe)*ae|0,h[Ie++]=z-(z-le)*ae|0,h[Ie++]=K-(K-V)*ae|0,h[Ie++]=255}}function Jve(t,e,n){const i=e.coords,r=e.colors;let s,a;switch(e.type){case bD.LATTICE:const o=e.verticesPerRow,l=Math.floor(i.length/o)-1,u=o-1;for(s=0;s<l;s++){let h=s*o;for(let g=0;g<u;g++,h++)vT(t,n,i[h],i[h+1],i[h+o],r[h],r[h+1],r[h+o]),vT(t,n,i[h+o+1],i[h+1],i[h+o],r[h+o+1],r[h+1],r[h+o])}break;case bD.TRIANGLES:for(s=0,a=i.length;s<a;s+=3)vT(t,n,i[s],i[s+1],i[s+2],r[s],r[s+1],r[s+2]);break;default:throw new Error("illegal figure")}}class e0e extends N3{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,n,i){const o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-o,h=Math.ceil(this._bounds[3])-l,g=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),y=u/g,w=h/v,S={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/y,scaleY:1/w},x=g+4,T=v+4,_=i.getCanvas("mesh",x,T),M=_.context,F=M.createImageData(g,v);if(n){const k=F.data;for(let B=0,H=k.length;B<H;B+=4)k[B]=n[0],k[B+1]=n[1],k[B+2]=n[2],k[B+3]=255}for(const k of this._figures)Jve(F,k,S);return M.putImageData(F,2,2),{canvas:_.canvas,offsetX:o-2*y,offsetY:l-2*w,scaleX:y,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(e,n,i,r){DD(e,this._bbox);const s=new Float32Array(2);if(r===Lr.SHADING)Ge.singularValueDecompose2dScale(oi(e),s);else if(this.matrix){Ge.singularValueDecompose2dScale(this.matrix,s);const[o,l]=s;Ge.singularValueDecompose2dScale(n.baseTransform,s),s[0]*=o,s[1]*=l}else Ge.singularValueDecompose2dScale(n.baseTransform,s);const a=this._createMeshCanvas(s,r===Lr.SHADING?null:this._background,n.cachedCanvases);return r!==Lr.SHADING&&(e.setTransform(...n.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class t0e extends N3{getPattern(){return"hotpink"}}function n0e(t){switch(t[0]){case"RadialAxial":return new Qve(t);case"Mesh":return new e0e(t);case"Dummy":return new t0e}throw new Error(`Unknown IR type: ${t[0]}`)}const _F={COLORED:1,UNCOLORED:2};class B3{static MAX_PATTERN_SIZE=3e3;constructor(e,n,i,r){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=n,this.canvasGraphicsFactory=i,this.baseTransform=r}createPatternCanvas(e,n){const{bbox:i,operatorList:r,paintType:s,tilingType:a,color:o,canvasGraphicsFactory:l}=this;let{xstep:u,ystep:h}=this;u=Math.abs(u),h=Math.abs(h),X2("TilingType: "+a);const g=i[0],v=i[1],y=i[2],w=i[3],S=y-g,x=w-v,T=new Float32Array(2);Ge.singularValueDecompose2dScale(this.matrix,T);const[_,M]=T;Ge.singularValueDecompose2dScale(this.baseTransform,T);const F=_*T[0],L=M*T[1];let k=S,B=x,H=!1,U=!1;const W=Math.ceil(u*F),j=Math.ceil(h*L),X=Math.ceil(S*F),ne=Math.ceil(x*L);W>=X?k=u:H=!0,j>=ne?B=h:U=!0;const $=this.getSizeAndScale(k,this.ctx.canvas.width,F),q=this.getSizeAndScale(B,this.ctx.canvas.height,L),z=e.cachedCanvases.getCanvas("pattern",$.size,q.size),K=z.context,Q=l.createCanvasGraphics(K,n);if(Q.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(Q,s,o),K.translate(-$.scale*g,-q.scale*v),Q.transform(0,$.scale,0,0,q.scale,0,0),K.save(),Q.dependencyTracker?.save(),this.clipBbox(Q,g,v,y,w),Q.baseTransform=oi(Q.ctx),Q.executeOperatorList(r),Q.endDrawing(),Q.dependencyTracker?.restore(),K.restore(),H||U){const oe=z.canvas;H&&(k=u),U&&(B=h);const le=this.getSizeAndScale(k,this.ctx.canvas.width,F),V=this.getSizeAndScale(B,this.ctx.canvas.height,L),Z=le.size,ae=V.size,Ee=e.cachedCanvases.getCanvas("pattern-workaround",Z,ae),Pe=Ee.context,Ie=H?Math.floor(S/u):0,ze=U?Math.floor(x/h):0;for(let Ot=0;Ot<=Ie;Ot++)for(let me=0;me<=ze;me++)Pe.drawImage(oe,Z*Ot,ae*me,Z,ae,0,0,Z,ae);return{canvas:Ee.canvas,scaleX:le.scale,scaleY:V.scale,offsetX:g,offsetY:v}}return{canvas:z.canvas,scaleX:$.scale,scaleY:q.scale,offsetX:g,offsetY:v}}getSizeAndScale(e,n,i){const r=Math.max(B3.MAX_PATTERN_SIZE,n);let s=Math.ceil(e*i);return s>=r?s=r:i=s/e,{scale:i,size:s}}clipBbox(e,n,i,r,s){const a=r-n,o=s-i;e.ctx.rect(n,i,a,o),Ge.axialAlignedBoundingBox([n,i,r,s],oi(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,n,i){const r=e.ctx,s=e.current;switch(n){case _F.COLORED:const{fillStyle:a,strokeStyle:o}=this.ctx;r.fillStyle=s.fillColor=a,r.strokeStyle=s.strokeColor=o;break;case _F.UNCOLORED:r.fillStyle=r.strokeStyle=i,s.fillColor=s.strokeColor=i;break;default:throw new gve(`Unsupported paint type: ${n}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,n,i,r,s){let a=i;r!==Lr.SHADING&&(a=Ge.transform(a,n.baseTransform),this.matrix&&(a=Ge.transform(a,this.matrix)));const o=this.createPatternCanvas(n,s);let l=new DOMMatrix(a);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);const u=e.createPattern(o.canvas,"repeat");return u.setTransform(l),u}}function i0e({src:t,srcPos:e=0,dest:n,width:i,height:r,nonBlackColor:s=4294967295,inverseDecode:a=!1}){const o=Ji.isLittleEndian?4278190080:255,[l,u]=a?[s,o]:[o,s],h=i>>3,g=i&7,v=t.length;n=new Uint32Array(n.buffer);let y=0;for(let w=0;w<r;w++){for(const x=e+h;e<x;e++){const T=e<v?t[e]:255;n[y++]=T&128?u:l,n[y++]=T&64?u:l,n[y++]=T&32?u:l,n[y++]=T&16?u:l,n[y++]=T&8?u:l,n[y++]=T&4?u:l,n[y++]=T&2?u:l,n[y++]=T&1?u:l}if(g===0)continue;const S=e<v?t[e++]:255;for(let x=0;x<g;x++)n[y++]=S&1<<7-x?u:l}return{srcPos:e,destPos:y}}const PF=16,OF=100,r0e=15,LF=10,Hs=16,yT=new DOMMatrix,na=new Float32Array(2),Tp=new Float32Array([1/0,1/0,-1/0,-1/0]);function s0e(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(n,i){e.translate(n,i),this.__originalTranslate(n,i)},t.scale=function(n,i){e.scale(n,i),this.__originalScale(n,i)},t.transform=function(n,i,r,s,a,o){e.transform(n,i,r,s,a,o),this.__originalTransform(n,i,r,s,a,o)},t.setTransform=function(n,i,r,s,a,o){e.setTransform(n,i,r,s,a,o),this.__originalSetTransform(n,i,r,s,a,o)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(n){e.rotate(n),this.__originalRotate(n)},t.clip=function(n){e.clip(n),this.__originalClip(n)},t.moveTo=function(n,i){e.moveTo(n,i),this.__originalMoveTo(n,i)},t.lineTo=function(n,i){e.lineTo(n,i),this.__originalLineTo(n,i)},t.bezierCurveTo=function(n,i,r,s,a,o){e.bezierCurveTo(n,i,r,s,a,o),this.__originalBezierCurveTo(n,i,r,s,a,o)},t.rect=function(n,i,r,s){e.rect(n,i,r,s),this.__originalRect(n,i,r,s)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class a0e{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,n,i){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,n,i)):(r=this.canvasFactory.create(n,i),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const n=this.cache[e];this.canvasFactory.destroy(n),delete this.cache[e]}}}function j1(t,e,n,i,r,s,a,o,l,u){const[h,g,v,y,w,S]=oi(t);if(g===0&&v===0){const _=a*h+w,M=Math.round(_),F=o*y+S,L=Math.round(F),k=(a+l)*h+w,B=Math.abs(Math.round(k)-M)||1,H=(o+u)*y+S,U=Math.abs(Math.round(H)-L)||1;return t.setTransform(Math.sign(h),0,0,Math.sign(y),M,L),t.drawImage(e,n,i,r,s,0,0,B,U),t.setTransform(h,g,v,y,w,S),[B,U]}if(h===0&&y===0){const _=o*v+w,M=Math.round(_),F=a*g+S,L=Math.round(F),k=(o+u)*v+w,B=Math.abs(Math.round(k)-M)||1,H=(a+l)*g+S,U=Math.abs(Math.round(H)-L)||1;return t.setTransform(0,Math.sign(g),Math.sign(v),0,M,L),t.drawImage(e,n,i,r,s,0,0,U,B),t.setTransform(h,g,v,y,w,S),[U,B]}t.drawImage(e,n,i,r,s,a,o,l,u);const x=Math.hypot(h,g),T=Math.hypot(v,y);return[x*l,T*u]}class FF{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=CD;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Qi.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,n,i){i?.(this),this.clipBox=new Float32Array([0,0,e,n]),this.minMax=Tp.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Lr.FILL,n=null){const i=this.minMax.slice();if(e===Lr.STROKE){n||on("Stroke bounding box must include transform."),Ge.singularValueDecompose2dScale(n,na);const r=na[0]*this.lineWidth/2,s=na[1]*this.lineWidth/2;i[0]-=r,i[1]-=s,i[2]+=r,i[3]+=s}return i}updateClipFromPath(){const e=Ge.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Tp,0)}getClippedPathBoundingBox(e=Lr.FILL,n=null){return Ge.intersect(this.clipBox,this.getPathBoundingBox(e,n))}}function kF(t,e){if(e instanceof ImageData){t.putImageData(e,0,0);return}const n=e.height,i=e.width,r=n%Hs,s=(n-r)/Hs,a=r===0?s:s+1,o=t.createImageData(i,Hs);let l=0,u;const h=e.data,g=o.data;let v,y,w,S;if(e.kind===Cw.GRAYSCALE_1BPP){const x=h.byteLength,T=new Uint32Array(g.buffer,0,g.byteLength>>2),_=T.length,M=i+7>>3,F=4294967295,L=Ji.isLittleEndian?4278190080:255;for(v=0;v<a;v++){for(w=v<s?Hs:r,u=0,y=0;y<w;y++){const k=x-l;let B=0;const H=k>M?i:k*8-7,U=H&-8;let W=0,j=0;for(;B<U;B+=8)j=h[l++],T[u++]=j&128?F:L,T[u++]=j&64?F:L,T[u++]=j&32?F:L,T[u++]=j&16?F:L,T[u++]=j&8?F:L,T[u++]=j&4?F:L,T[u++]=j&2?F:L,T[u++]=j&1?F:L;for(;B<H;B++)W===0&&(j=h[l++],W=128),T[u++]=j&W?F:L,W>>=1}for(;u<_;)T[u++]=0;t.putImageData(o,0,v*Hs)}}else if(e.kind===Cw.RGBA_32BPP){for(y=0,S=i*Hs*4,v=0;v<s;v++)g.set(h.subarray(l,l+S)),l+=S,t.putImageData(o,0,y),y+=Hs;v<a&&(S=i*r*4,g.set(h.subarray(l,l+S)),t.putImageData(o,0,y))}else if(e.kind===Cw.RGB_24BPP)for(w=Hs,S=i*w,v=0;v<a;v++){for(v>=s&&(w=r,S=i*w),u=0,y=S;y--;)g[u++]=h[l++],g[u++]=h[l++],g[u++]=h[l++],g[u++]=255;t.putImageData(o,0,v*Hs)}else throw new Error(`bad image kind: ${e.kind}`)}function NF(t,e){if(e.bitmap){t.drawImage(e.bitmap,0,0);return}const n=e.height,i=e.width,r=n%Hs,s=(n-r)/Hs,a=r===0?s:s+1,o=t.createImageData(i,Hs);let l=0;const u=e.data,h=o.data;for(let g=0;g<a;g++){const v=g<s?Hs:r;({srcPos:l}=i0e({src:u,srcPos:l,dest:h,width:i,height:v,nonBlackColor:0})),t.putImageData(o,0,g*Hs)}}function w0(t,e){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of n)t[i]!==void 0&&(e[i]=t[i]);t.setLineDash!==void 0&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function W1(t){t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",t.setLineDash!==void 0&&(t.setLineDash([]),t.lineDashOffset=0);const{filter:e}=t;e!=="none"&&e!==""&&(t.filter="none")}function BF(t,e){if(e)return!0;Ge.singularValueDecompose2dScale(t,na);const n=Math.fround(Xl.pixelRatio*im.PDF_TO_CSS_UNITS);return na[0]<=n&&na[1]<=n}const o0e=["butt","round","square"],l0e=["miter","round","bevel"],c0e={},IF={};class Ip{constructor(e,n,i,r,s,{optionalContentConfig:a,markedContentStack:o=null},l,u,h){this.ctx=e,this.current=new FF(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=i,this.canvasFactory=r,this.filterFactory=s,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new a0e(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=h??null}getObject(e,n,i=null){return typeof n=="string"?(this.dependencyTracker?.recordNamedDependency(e,n),n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n)):i}beginDrawing({transform:e,viewport:n,transparency:i=!1,background:r=null}){const s=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=o,i){const l=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...oi(this.compositeCtx))}this.ctx.save(),W1(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=oi(this.ctx)}executeOperatorList(e,n,i,r,s){const a=e.argsArray,o=e.fnArray;let l=n||0;const u=a.length;if(u===l)return l;const h=u-l>LF&&typeof i=="function",g=h?Date.now()+r0e:0;let v=0;const y=this.commonObjs,w=this.objs;let S,x;for(;;){if(r!==void 0&&l===r.nextBreakPoint)return r.breakIt(l,i),l;if(!s||s(l))if(S=o[l],x=a[l]??null,S!==xy.dependency)x===null?this[S](l):this[S](l,...x);else for(const T of x){this.dependencyTracker?.recordNamedData(T,l);const _=T.startsWith("g_")?y:w;if(!_.has(T))return _.get(T,i),l}if(l++,l===u)return l;if(h&&++v>LF){if(Date.now()>g)return i(),l;v=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const n of e.values())typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&(n.width=n.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const n=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=n}}}_scaleImage(e,n){const i=e.width??e.displayWidth,r=e.height??e.displayHeight;let s=Math.max(Math.hypot(n[0],n[1]),1),a=Math.max(Math.hypot(n[2],n[3]),1),o=i,l=r,u="prescale1",h,g;for(;s>2&&o>1||a>2&&l>1;){let v=o,y=l;s>2&&o>1&&(v=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),s/=o/v),a>2&&l>1&&(y=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,a/=l/y),h=this.cachedCanvases.getCanvas(u,v,y),g=h.context,g.clearRect(0,0,v,y),g.drawImage(e,0,0,o,l,0,0,v,y),e=h.canvas,o=v,l=y,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:l}}_createMaskCanvas(e,n){const i=this.ctx,{width:r,height:s}=n,a=this.current.fillColor,o=this.current.patternFill,l=oi(i);let u,h,g,v;if((n.bitmap||n.data)&&n.count>1){const W=n.bitmap||n.data.buffer;h=JSON.stringify(o?l:[l.slice(0,4),a]),u=this._cachedBitmapsMap.get(W),u||(u=new Map,this._cachedBitmapsMap.set(W,u));const j=u.get(h);if(j&&!o){const X=Math.round(Math.min(l[0],l[2])+l[4]),ne=Math.round(Math.min(l[1],l[3])+l[5]);return this.dependencyTracker?.recordDependencies(e,Wa.transformAndFill),{canvas:j,offsetX:X,offsetY:ne}}g=j}g||(v=this.cachedCanvases.getCanvas("maskCanvas",r,s),NF(v.context,n));let y=Ge.transform(l,[1/r,0,0,-1/s,0,0]);y=Ge.transform(y,[1,0,0,1,0,-s]);const w=Tp.slice();Ge.axialAlignedBoundingBox([0,0,r,s],y,w);const[S,x,T,_]=w,M=Math.round(T-S)||1,F=Math.round(_-x)||1,L=this.cachedCanvases.getCanvas("fillCanvas",M,F),k=L.context,B=S,H=x;k.translate(-B,-H),k.transform(...y),g||(g=this._scaleImage(v.canvas,Ll(k)),g=g.img,u&&o&&u.set(h,g)),k.imageSmoothingEnabled=BF(oi(k),n.interpolate),j1(k,g,0,0,g.width,g.height,0,0,r,s),k.globalCompositeOperation="source-in";const U=Ge.transform(Ll(k),[1,0,0,1,-B,-H]);return k.fillStyle=o?a.getPattern(i,this,U,Lr.FILL,e):a,k.fillRect(0,0,r,s),u&&!o&&(this.cachedCanvases.delete("fillCanvas"),u.set(h,L.canvas)),this.dependencyTracker?.recordDependencies(e,Wa.transformAndFill),{canvas:L.canvas,offsetX:Math.round(B),offsetY:Math.round(H)}}setLineWidth(e,n){this.dependencyTracker?.recordSimpleData("lineWidth",e),n!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=n,this.ctx.lineWidth=n}setLineCap(e,n){this.dependencyTracker?.recordSimpleData("lineCap",e),this.ctx.lineCap=o0e[n]}setLineJoin(e,n){this.dependencyTracker?.recordSimpleData("lineJoin",e),this.ctx.lineJoin=l0e[n]}setMiterLimit(e,n){this.dependencyTracker?.recordSimpleData("miterLimit",e),this.ctx.miterLimit=n}setDash(e,n,i){this.dependencyTracker?.recordSimpleData("dash",e);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(n),r.lineDashOffset=i)}setRenderingIntent(e,n){}setFlatness(e,n){}setGState(e,n){for(const[i,r]of n)switch(i){case"LW":this.setLineWidth(e,r);break;case"LC":this.setLineCap(e,r);break;case"LJ":this.setLineJoin(e,r);break;case"ML":this.setMiterLimit(e,r);break;case"D":this.setDash(e,r[0],r[1]);break;case"RI":this.setRenderingIntent(e,r);break;case"FL":this.setFlatness(e,r);break;case"Font":this.setFont(e,r[0],r[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=r;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=r;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",e),this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const n=this.ctx.canvas.width,i=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(r,n,i);this.suspendedCtx=this.ctx;const a=this.ctx=s.context;a.setTransform(this.suspendedCtx.getTransform()),w0(this.suspendedCtx,a),s0e(a,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),w0(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const n=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,n,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,n,i,r){const s=r[0],a=r[1],o=r[2]-s,l=r[3]-a;o===0||l===0||(this.genericComposeSMask(n.context,i,o,l,n.subtype,n.backdrop,n.transferMap,s,a,n.offsetX,n.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,n,i,r,s,a,o,l,u,h,g){let v=e.canvas,y=l-h,w=u-g;if(a)if(y<0||w<0||y+i>v.width||w+r>v.height){const x=this.cachedCanvases.getCanvas("maskExtension",i,r),T=x.context;T.drawImage(v,-y,-w),T.globalCompositeOperation="destination-atop",T.fillStyle=a,T.fillRect(0,0,i,r),T.globalCompositeOperation="source-over",v=x.canvas,y=w=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const x=new Path2D;x.rect(y,w,i,r),e.clip(x),e.globalCompositeOperation="destination-atop",e.fillStyle=a,e.fillRect(y,w,i,r),e.restore()}n.save(),n.globalAlpha=1,n.setTransform(1,0,0,1,0,0),s==="Alpha"&&o?n.filter=this.filterFactory.addAlphaFilter(o):s==="Luminosity"&&(n.filter=this.filterFactory.addLuminosityFilter(o));const S=new Path2D;S.rect(l,u,i,r),n.clip(S),n.globalCompositeOperation="destination-in",n.drawImage(v,y,w,i,r,l,u,i,r),n.restore()}save(e){this.inSMaskMode&&w0(this.ctx,this.suspendedCtx),this.ctx.save();const n=this.current;this.stateStack.push(n),this.current=n.clone(),this.dependencyTracker?.save(e)}restore(e){if(this.dependencyTracker?.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&w0(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,n,i,r,s,a,o){this.dependencyTracker?.recordIncrementalData("transform",e),this.ctx.transform(n,i,r,s,a,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,n,i,r){let[s]=i;if(!r){s||=i[0]=new Path2D,this[n](e,s);return}if(this.dependencyTracker!==null){const a=n===xy.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,r[0]-a,r[2]+a,r[1]-a,r[3]+a).recordDependencies(e,["transform"])}s instanceof Path2D||(s=i[0]=hz(s)),Ge.axialAlignedBoundingBox(r,oi(this.ctx),this.current.minMax),this[n](e,s),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,n,i=!0){const r=this.ctx,s=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&s?.getPattern){const a=s.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=s.getPattern(r,this,Ll(r),Lr.STROKE,e),a){const o=new Path2D;o.addPath(n,r.getTransform().invertSelf().multiplySelf(a)),n=o}this.rescaleAndStroke(n,!1),r.restore()}else this.rescaleAndStroke(n,!0);this.dependencyTracker?.recordDependencies(e,Wa.stroke),i&&this.consumePath(e,n,this.current.getClippedPathBoundingBox(Lr.STROKE,oi(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(e,n){this.stroke(e,n)}fill(e,n,i=!0){const r=this.ctx,s=this.current.fillColor,a=this.current.patternFill;let o=!1;if(a){const u=s.isModifyingCurrentTransform()?r.getTransform():null;if(this.dependencyTracker?.save(e),r.save(),r.fillStyle=s.getPattern(r,this,Ll(r),Lr.FILL,e),u){const h=new Path2D;h.addPath(n,r.getTransform().invertSelf().multiplySelf(u)),n=h}o=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(r.fill(n,"evenodd"),this.pendingEOFill=!1):r.fill(n)),this.dependencyTracker?.recordDependencies(e,Wa.fill),o&&(r.restore(),this.dependencyTracker?.restore(e)),i&&this.consumePath(e,n,l)}eoFill(e,n){this.pendingEOFill=!0,this.fill(e,n)}fillStroke(e,n){this.fill(e,n,!1),this.stroke(e,n,!1),this.consumePath(e,n)}eoFillStroke(e,n){this.pendingEOFill=!0,this.fillStroke(e,n)}closeFillStroke(e,n){this.fillStroke(e,n)}closeEOFillStroke(e,n){this.pendingEOFill=!0,this.fillStroke(e,n)}endPath(e,n){this.consumePath(e,n)}rawFillPath(e,n){this.ctx.fill(n),this.dependencyTracker?.recordDependencies(e,Wa.rawFillPath).recordOperation(e)}clip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=c0e}eoClip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=IF}beginText(e){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const n=this.pendingTextPaths,i=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;n!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",e),r.recordCloseMarker(e)}if(n!==void 0){const r=new Path2D,s=i.getTransform().invertSelf();for(const{transform:a,x:o,y:l,fontSize:u,path:h}of n)h&&r.addPath(h,new DOMMatrix(a).preMultiplySelf(s).translate(o,l).scale(u,-u));i.clip(r)}delete this.pendingTextPaths}setCharSpacing(e,n){this.dependencyTracker?.recordSimpleData("charSpacing",e),this.current.charSpacing=n}setWordSpacing(e,n){this.dependencyTracker?.recordSimpleData("wordSpacing",e),this.current.wordSpacing=n}setHScale(e,n){this.dependencyTracker?.recordSimpleData("hScale",e),this.current.textHScale=n/100}setLeading(e,n){this.dependencyTracker?.recordSimpleData("leading",e),this.current.leading=-n}setFont(e,n,i){this.dependencyTracker?.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",n,e);const r=this.commonObjs.get(n),s=this.current;if(!r)throw new Error(`Can't find font for ${n}`);if(s.fontMatrix=r.fontMatrix||CD,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&ct("Invalid font matrix for font "+n),i<0?(i=-i,s.fontDirection=-1):s.fontDirection=1,this.current.font=r,this.current.fontSize=i,r.isType3Font)return;const a=r.loadedName||"sans-serif",o=r.systemFontInfo?.css||`"${a}", ${r.fallbackName}`;let l="normal";r.black?l="900":r.bold&&(l="bold");const u=r.italic?"italic":"normal";let h=i;i<PF?h=PF:i>OF&&(h=OF),this.current.fontSizeScale=i/h,this.ctx.font=`${u} ${l} ${h}px ${o}`}setTextRenderingMode(e,n){this.dependencyTracker?.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=n}setTextRise(e,n){this.dependencyTracker?.recordSimpleData("textRise",e),this.current.textRise=n}moveText(e,n,i){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=n,this.current.y=this.current.lineY+=i}setLeadingMoveText(e,n,i){this.setLeading(e,-i),this.moveText(e,n,i)}setTextMatrix(e,n){this.dependencyTracker?.resetIncrementalData("sameLineText").recordSimpleData("textMatrix",e);const{current:i}=this;i.textMatrix=n,i.textMatrixScale=Math.hypot(n[0],n[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(e){this.moveText(e,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}#i(e,n,i){const r=new Path2D;return r.addPath(e,new DOMMatrix(i).invertSelf().multiplySelf(n)),r}paintChar(e,n,i,r,s,a){const o=this.ctx,l=this.current,u=l.font,h=l.textRenderingMode,g=l.fontSize/l.fontSizeScale,v=h&Qi.FILL_STROKE_MASK,y=!!(h&Qi.ADD_TO_PATH_FLAG),w=l.patternFill&&!u.missingFile,S=l.patternStroke&&!u.missingFile;let x;if((u.disableFontFace||y||w||S)&&!u.missingFile&&(x=u.getPathGenerator(this.commonObjs,n)),x&&(u.disableFontFace||w||S)){o.save(),o.translate(i,r),o.scale(g,-g),this.dependencyTracker?.recordCharacterBBox(e,o,u);let T;if(v===Qi.FILL||v===Qi.FILL_STROKE)if(s){T=o.getTransform(),o.setTransform(...s);const _=this.#i(x,T,s);o.fill(_)}else o.fill(x);if(v===Qi.STROKE||v===Qi.FILL_STROKE)if(a){T||=o.getTransform(),o.setTransform(...a);const{a:_,b:M,c:F,d:L}=T,k=Ge.inverseTransform(a),B=Ge.transform([_,M,F,L,0,0],k);Ge.singularValueDecompose2dScale(B,na),o.lineWidth*=Math.max(na[0],na[1])/g,o.stroke(this.#i(x,T,a))}else o.lineWidth/=g,o.stroke(x);o.restore()}else(v===Qi.FILL||v===Qi.FILL_STROKE)&&(o.fillText(n,i,r),this.dependencyTracker?.recordCharacterBBox(e,o,u,g,i,r,()=>o.measureText(n))),(v===Qi.STROKE||v===Qi.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(e,o,u,g,i,r,()=>o.measureText(n)).recordDependencies(e,Wa.stroke),o.strokeText(n,i,r));y&&((this.pendingTextPaths||=[]).push({transform:oi(o),x:i,y:r,fontSize:g,path:x}),this.dependencyTracker?.recordCharacterBBox(e,o,u,g,i,r))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const n=e.getImageData(0,0,10,10).data;let i=!1;for(let r=3;r<n.length;r+=4)if(n[r]>0&&n[r]<255){i=!0;break}return ut(this,"isFontSubpixelAAEnabled",i)}showText(e,n){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,Wa.showText).resetBBox(e),this.current.textRenderingMode&Qi.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,r=i.font;if(r.isType3Font){this.showType3Text(e,n),this.dependencyTracker?.recordShowTextOperation(e);return}const s=i.fontSize;if(s===0){this.dependencyTracker?.recordOperation(e);return}const a=this.ctx,o=i.fontSizeScale,l=i.charSpacing,u=i.wordSpacing,h=i.fontDirection,g=i.textHScale*h,v=n.length,y=r.vertical,w=y?1:-1,S=r.defaultVMetrics,x=s*i.fontMatrix[0],T=i.textRenderingMode===Qi.FILL&&!r.disableFontFace&&!i.patternFill;a.save(),i.textMatrix&&a.transform(...i.textMatrix),a.translate(i.x,i.y+i.textRise),h>0?a.scale(g,-1):a.scale(g,1);let _,M;const F=i.textRenderingMode&Qi.FILL_STROKE_MASK,L=F===Qi.FILL||F===Qi.FILL_STROKE,k=F===Qi.STROKE||F===Qi.FILL_STROKE;if(L&&i.patternFill){a.save();const j=i.fillColor.getPattern(a,this,Ll(a),Lr.FILL,e);_=oi(a),a.restore(),a.fillStyle=j}if(k&&i.patternStroke){a.save();const j=i.strokeColor.getPattern(a,this,Ll(a),Lr.STROKE,e);M=oi(a),a.restore(),a.strokeStyle=j}let B=i.lineWidth;const H=i.textMatrixScale;if(H===0||B===0?k&&(B=this.getSinglePixelWidth()):B/=H,o!==1&&(a.scale(o,o),B/=o),a.lineWidth=B,r.isInvalidPDFjsFont){const j=[];let X=0;for(const $ of n)j.push($.unicode),X+=$.width;const ne=j.join("");if(a.fillText(ne,0,0),this.dependencyTracker!==null){const $=a.measureText(ne);this.dependencyTracker.recordBBox(e,this.ctx,-$.actualBoundingBoxLeft,$.actualBoundingBoxRight,-$.actualBoundingBoxAscent,$.actualBoundingBoxDescent).recordShowTextOperation(e)}i.x+=X*x*g,a.restore(),this.compose();return}let U=0,W;for(W=0;W<v;++W){const j=n[W];if(typeof j=="number"){U+=w*j*s/1e3;continue}let X=!1;const ne=(j.isSpace?u:0)+l,$=j.fontChar,q=j.accent;let z,K,Q=j.width;if(y){const V=j.vmetric||S,Z=-(j.vmetric?V[1]:Q*.5)*x,ae=V[2]*x;Q=V?-V[0]:Q,z=Z/o,K=(U+ae)/o}else z=U/o,K=0;let oe;if(r.remeasure&&Q>0){oe=a.measureText($);const V=oe.width*1e3/s*o;if(Q<V&&this.isFontSubpixelAAEnabled){const Z=Q/V;X=!0,a.save(),a.scale(Z,1),z/=Z}else Q!==V&&(z+=(Q-V)/2e3*s/o)}if(this.contentVisible&&(j.isInFont||r.missingFile)){if(T&&!q)a.fillText($,z,K),this.dependencyTracker?.recordCharacterBBox(e,a,oe?{bbox:null}:r,s/o,z,K,()=>oe??a.measureText($));else if(this.paintChar(e,$,z,K,_,M),q){const V=z+s*q.offset.x/o,Z=K-s*q.offset.y/o;this.paintChar(e,q.fontChar,V,Z,_,M)}}const le=y?Q*x-ne*h:Q*x+ne*h;U+=le,X&&a.restore()}y?i.y-=U:i.x+=U*g,a.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(e)}showType3Text(e,n){const i=this.ctx,r=this.current,s=r.font,a=r.fontSize,o=r.fontDirection,l=s.vertical?1:-1,u=r.charSpacing,h=r.wordSpacing,g=r.textHScale*o,v=r.fontMatrix||CD,y=n.length,w=r.textRenderingMode===Qi.INVISIBLE;let S,x,T,_;if(w||a===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),r.textMatrix&&i.transform(...r.textMatrix),i.translate(r.x,r.y+r.textRise),i.scale(g,o);const M=this.dependencyTracker;for(this.dependencyTracker=M?new TS(M,e):null,S=0;S<y;++S){if(x=n[S],typeof x=="number"){_=l*x*a/1e3,this.ctx.translate(_,0),r.x+=_*g;continue}const F=(x.isSpace?h:0)+u,L=s.charProcOperatorList[x.operatorListId];L?this.contentVisible&&(this.save(),i.scale(a,a),i.transform(...v),this.executeOperatorList(L),this.restore()):ct(`Type3 character "${x.operatorListId}" is not available.`);const k=[x.width,0];Ge.applyTransform(k,v),T=k[0]*a+F,i.translate(T,0),r.x+=T*g}i.restore(),M&&(this.dependencyTracker=M)}setCharWidth(e,n,i){}setCharWidthAndBounds(e,n,i,r,s,a,o){const l=new Path2D;l.rect(r,s,a-r,o-s),this.ctx.clip(l),this.dependencyTracker?.recordBBox(e,this.ctx,r,a,s,o).recordClipBox(e,this.ctx,r,a,s,o),this.endPath(e)}getColorN_Pattern(e,n){let i;if(n[0]==="TilingPattern"){const r=this.baseTransform||oi(this.ctx),s={createCanvasGraphics:(a,o)=>new Ip(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new TS(this.dependencyTracker,o,!0):null)};i=new B3(n,this.ctx,s,r)}else i=this._getPattern(e,n[1],n[2]);return i}setStrokeColorN(e,...n){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,n),this.current.patternStroke=!0}setFillColorN(e,...n){this.dependencyTracker?.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,n),this.current.patternFill=!0}setStrokeRGBColor(e,n){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=n,this.current.patternStroke=!1}setStrokeTransparent(e){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,n){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=n,this.current.patternFill=!1}setFillTransparent(e){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,n,i=null){let r;return this.cachedPatterns.has(n)?r=this.cachedPatterns.get(n):(r=n0e(this.getObject(e,n)),this.cachedPatterns.set(n,r)),i&&(r.matrix=i),r}shadingFill(e,n){if(!this.contentVisible)return;const i=this.ctx;this.save(e);const r=this._getPattern(e,n);i.fillStyle=r.getPattern(i,this,Ll(i),Lr.SHADING,e);const s=Ll(i);if(s){const{width:a,height:o}=i.canvas,l=Tp.slice();Ge.axialAlignedBoundingBox([0,0,a,o],s,l);const[u,h,g,v]=l;this.ctx.fillRect(u,h,g-u,v-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,Wa.transform).recordDependencies(e,Wa.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){on("Should not call beginInlineImage")}beginImageData(){on("Should not call beginImageData")}paintFormXObjectBegin(e,n,i){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),n&&this.transform(e,...n),this.baseTransform=oi(this.ctx),i)){Ge.axialAlignedBoundingBox(i,this.baseTransform,this.current.minMax);const[r,s,a,o]=i,l=new Path2D;l.rect(r,s,a-r,o-s),this.ctx.clip(l),this.dependencyTracker?.recordClipBox(e,this.ctx,r,a,s,o),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,n){if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;n.isolated||X2("TODO: Support non-isolated groups."),n.knockout&&ct("Knockout groups not supported.");const r=oi(i);if(n.matrix&&i.transform(...n.matrix),!n.bbox)throw new Error("Bounding box is required.");let s=Tp.slice();Ge.axialAlignedBoundingBox(n.bbox,oi(i),s);const a=[0,0,i.canvas.width,i.canvas.height];s=Ge.intersect(s,a)||[0,0,0,0];const o=Math.floor(s[0]),l=Math.floor(s[1]),u=Math.max(Math.ceil(s[2])-o,1),h=Math.max(Math.ceil(s[3])-l,1);this.current.startNewPathAndClipBox([0,0,u,h]);let g="groupAt"+this.groupLevel;n.smask&&(g+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(g,u,h),y=v.context;y.translate(-o,-l),y.transform(...r);let w=new Path2D;const[S,x,T,_]=n.bbox;if(w.rect(S,x,T-S,_-x),n.matrix){const M=new Path2D;M.addPath(w,new DOMMatrix(n.matrix)),w=M}y.clip(w),n.smask&&this.smaskStack.push({canvas:v.canvas,context:y,offsetX:o,offsetY:l,subtype:n.smask.subtype,backdrop:n.smask.backdrop,transferMap:n.smask.transferMap||null,startTransformInverse:null}),(!n.smask||this.dependencyTracker)&&(i.setTransform(1,0,0,1,0,0),i.translate(o,l),i.save()),w0(i,y),this.ctx=y,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(e,n){if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),n.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const s=oi(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...s);const a=Tp.slice();Ge.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],s,a),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(a)}}beginAnnotation(e,n,i,r,s,a){if(this.#e(),W1(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const o=i[2]-i[0],l=i[3]-i[1];if(a&&this.annotationCanvasMap){r=r.slice(),r[4]-=i[0],r[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=o,i[3]=l,Ge.singularValueDecompose2dScale(oi(this.ctx),na);const{viewportScale:u}=this,h=Math.ceil(o*this.outputScaleX*u),g=Math.ceil(l*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(h,g);const{canvas:v,context:y}=this.annotationCanvas;this.annotationCanvasMap.set(n,v),this.annotationCanvas.savedCtx=this.ctx,this.ctx=y,this.ctx.save(),this.ctx.setTransform(na[0],0,0,-na[1],0,l*na[1]),W1(this.ctx)}else{W1(this.ctx),this.endPath(e);const u=new Path2D;u.rect(i[0],i[1],o,l),this.ctx.clip(u)}}this.current=new FF(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...r),this.transform(e,...s)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,n){if(!this.contentVisible)return;const i=n.count;n=this.getObject(e,n.data,n),n.count=i;const r=this.ctx,s=this._createMaskCanvas(e,n),a=s.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(a,s.offsetX,s.offsetY),this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,s.offsetX,s.offsetX+a.width,s.offsetY,s.offsetY+a.height).recordOperation(e),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,n,i,r=0,s=0,a,o){if(!this.contentVisible)return;n=this.getObject(e,n.data,n);const l=this.ctx;l.save();const u=oi(l);l.transform(i,r,s,a,0,0);const h=this._createMaskCanvas(e,n);l.setTransform(1,0,0,1,h.offsetX-u[4],h.offsetY-u[5]),this.dependencyTracker?.resetBBox(e);for(let g=0,v=o.length;g<v;g+=2){const y=Ge.transform(u,[i,r,s,a,o[g],o[g+1]]);l.drawImage(h.canvas,y[4],y[5]),this.dependencyTracker?.recordBBox(e,this.ctx,y[4],y[4]+h.canvas.width,y[5],y[5]+h.canvas.height)}l.restore(),this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageMaskXObjectGroup(e,n){if(!this.contentVisible)return;const i=this.ctx,r=this.current.fillColor,s=this.current.patternFill;this.dependencyTracker?.resetBBox(e).recordDependencies(e,Wa.transformAndFill);for(const a of n){const{data:o,width:l,height:u,transform:h}=a,g=this.cachedCanvases.getCanvas("maskCanvas",l,u),v=g.context;v.save();const y=this.getObject(e,o,a);NF(v,y),v.globalCompositeOperation="source-in",v.fillStyle=s?r.getPattern(v,this,Ll(i),Lr.FILL,e):r,v.fillRect(0,0,l,u),v.restore(),i.save(),i.transform(...h),i.scale(1,-1),j1(i,g.canvas,0,0,l,u,0,-1,1,1),this.dependencyTracker?.recordBBox(e,i,0,l,0,u),i.restore()}this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageXObject(e,n){if(!this.contentVisible)return;const i=this.getObject(e,n);if(!i){ct("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,i)}paintImageXObjectRepeat(e,n,i,r,s){if(!this.contentVisible)return;const a=this.getObject(e,n);if(!a){ct("Dependent image isn't ready yet");return}const o=a.width,l=a.height,u=[];for(let h=0,g=s.length;h<g;h+=2)u.push({transform:[i,0,0,r,s[h],s[h+1]],x:0,y:0,w:o,h:l});this.paintInlineImageXObjectGroup(e,a,u)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:n,width:i,height:r}=e,s=this.cachedCanvases.getCanvas("inlineImage",i,r),a=s.context;return a.filter=this.current.transferMaps,a.drawImage(n,0,0),a.filter="none",s.canvas}paintInlineImageXObject(e,n){if(!this.contentVisible)return;const i=n.width,r=n.height,s=this.ctx;this.save(e);const{filter:a}=s;a!=="none"&&a!==""&&(s.filter="none"),s.scale(1/i,-1/r);let o;if(n.bitmap)o=this.applyTransferMapsToBitmap(n);else if(typeof HTMLElement=="function"&&n instanceof HTMLElement||!n.data)o=n;else{const h=this.cachedCanvases.getCanvas("inlineImage",i,r).context;kF(h,n),o=this.applyTransferMapsToCanvas(h)}const l=this._scaleImage(o,Ll(s));s.imageSmoothingEnabled=BF(oi(s),n.interpolate),this.dependencyTracker?.resetBBox(e).recordBBox(e,s,0,i,-r,0).recordDependencies(e,Wa.imageXObject).recordOperation(e),j1(s,l.img,0,0,l.paintWidth,l.paintHeight,0,-r,i,r),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,n,i){if(!this.contentVisible)return;const r=this.ctx;let s;if(n.bitmap)s=n.bitmap;else{const a=n.width,o=n.height,u=this.cachedCanvases.getCanvas("inlineImage",a,o).context;kF(u,n),s=this.applyTransferMapsToCanvas(u)}this.dependencyTracker?.resetBBox(e);for(const a of i)r.save(),r.transform(...a.transform),r.scale(1,-1),j1(r,s,a.x,a.y,a.w,a.h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,r,0,1,-1,0),r.restore();this.dependencyTracker?.recordOperation(e),this.compose()}paintSolidColorImageMask(e){this.contentVisible&&(this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,Wa.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,n){}markPointProps(e,n,i){}beginMarkedContent(e,n){this.dependencyTracker?.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,n,i){this.dependencyTracker?.beginMarkedContent(e),n==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){this.dependencyTracker?.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,n,i){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const s=this.ctx;this.pendingClip?(r||(this.pendingClip===IF?s.clip(n,"evenodd"):s.clip(n)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):this.dependencyTracker?.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=oi(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const n=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/n}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:n,b:i,c:r,d:s}=this.ctx.getTransform();let a,o;if(i===0&&r===0){const l=Math.abs(n),u=Math.abs(s);if(l===u)if(e===0)a=o=1/l;else{const h=l*e;a=o=h<1?1/h:1}else if(e===0)a=1/l,o=1/u;else{const h=l*e,g=u*e;a=h<1?1/h:1,o=g<1?1/g:1}}else{const l=Math.abs(n*s-i*r),u=Math.hypot(n,i),h=Math.hypot(r,s);if(e===0)a=h/l,o=u/l;else{const g=e*l;a=h>g?h/g:1,o=u>g?u/g:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e,n){const{ctx:i,current:{lineWidth:r}}=this,[s,a]=this.getScaleForStroking();if(s===a){i.lineWidth=(r||1)*s,i.stroke(e);return}const o=i.getLineDash();n&&i.save(),i.scale(s,a),yT.a=1/s,yT.d=1/a;const l=new Path2D;if(l.addPath(e,yT),o.length>0){const u=Math.max(s,a);i.setLineDash(o.map(h=>h/u)),i.lineDashOffset/=u}i.lineWidth=r||1,i.stroke(l),n&&i.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const t in xy)Ip.prototype[t]!==void 0&&(Ip.prototype[xy[t]]=Ip.prototype[t]);class Hp{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class u0e{#e;#t;constructor({parsedData:e,rawData:n}){this.#e=e,this.#t=n}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}}const mp=Symbol("INTERNAL");class h0e{#e=!1;#t=!1;#i=!1;#n=!0;constructor(e,{name:n,intent:i,usage:r,rbGroups:s}){this.#e=!!(e&Js.DISPLAY),this.#t=!!(e&Js.PRINT),this.name=n,this.intent=i,this.usage=r,this.rbGroups=s}get visible(){if(this.#i)return this.#n;if(!this.#n)return!1;const{print:e,view:n}=this.usage;return this.#e?n?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,n,i=!1){e!==mp&&on("Internal method `_setVisible` called."),this.#i=i,this.#n=n}}class d0e{#e=null;#t=new Map;#i=null;#n=null;constructor(e,n=Js.DISPLAY){if(this.renderingIntent=n,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#n=e.order;for(const i of e.groups)this.#t.set(i.id,new h0e(n,i));if(e.baseState==="OFF")for(const i of this.#t.values())i._setVisible(mp,!1);for(const i of e.on)this.#t.get(i)._setVisible(mp,!0);for(const i of e.off)this.#t.get(i)._setVisible(mp,!1);this.#i=this.getHash()}}#s(e){const n=e.length;if(n<2)return!0;const i=e[0];for(let r=1;r<n;r++){const s=e[r];let a;if(Array.isArray(s))a=this.#s(s);else if(this.#t.has(s))a=this.#t.get(s).visible;else return ct(`Optional content group not found: ${s}`),!0;switch(i){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return i==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return X2("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(ct(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#s(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const n of e.ids){if(!this.#t.has(n))return ct(`Optional content group not found: ${n}`),!0;if(this.#t.get(n).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const n of e.ids){if(!this.#t.has(n))return ct(`Optional content group not found: ${n}`),!0;if(!this.#t.get(n).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const n of e.ids){if(!this.#t.has(n))return ct(`Optional content group not found: ${n}`),!0;if(!this.#t.get(n).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const n of e.ids){if(!this.#t.has(n))return ct(`Optional content group not found: ${n}`),!0;if(this.#t.get(n).visible)return!1}return!0}return ct(`Unknown optional content policy ${e.policy}.`),!0}return ct(`Unknown group type ${e.type}.`),!0}setVisibility(e,n=!0,i=!0){const r=this.#t.get(e);if(!r){ct(`Optional content group not found: ${e}`);return}if(i&&n&&r.rbGroups.length)for(const s of r.rbGroups)for(const a of s)a!==e&&this.#t.get(a)?._setVisible(mp,!1,!0);r._setVisible(mp,!!n,!0),this.#e=null}setOCGState({state:e,preserveRB:n}){let i;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":i=r;continue}const s=this.#t.get(r);if(s)switch(i){case"ON":this.setVisibility(r,!0,n);break;case"OFF":this.setVisibility(r,!1,n);break;case"Toggle":this.setVisibility(r,!s.visible,n);break}}this.#e=null}get hasInitialVisibility(){return this.#i===null||this.getHash()===this.#i}getOrder(){return this.#t.size?this.#n?this.#n.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new fz;for(const[n,i]of this.#t)e.update(`${n}:${i.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}}class J2{#e=null;#t=null;_fullReader=null;_rangeReaders=new Set;_source=null;constructor(e,n,i){this._source=e,this.#e=n,this.#t=i}get _progressiveDataLength(){return this._fullReader?._loaded??0}getFullReader(){return an(!this._fullReader,"BasePDFStream.getFullReader can only be called once."),this._fullReader=new this.#e(this)}getRangeReader(e,n){if(n<=this._progressiveDataLength)return null;const i=new this.#t(this,e,n);return this._rangeReaders.add(i),i}cancelAllRequests(e){this._fullReader?.cancel(e);for(const n of new Set(this._rangeReaders))n.cancel(e)}}class ex{onProgress=null;_contentLength=0;_filename=null;_headersCapability=Promise.withResolvers();_isRangeSupported=!1;_isStreamingSupported=!1;_loaded=0;_stream=null;constructor(e){this._stream=e}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){on("Abstract method `read` called")}cancel(e){on("Abstract method `cancel` called")}}class tx{_stream=null;constructor(e,n,i){this._stream=e}async read(){on("Abstract method `read` called")}cancel(e){on("Abstract method `cancel` called")}}function HF(t){return t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer}class f0e extends J2{_progressiveDone=!1;_queuedChunks=[];constructor(e){super(e,g0e,p0e);const{pdfDataRangeTransport:n}=e,{initialData:i,progressiveDone:r}=n;if(i?.length>0){const s=HF(i);this._queuedChunks.push(s)}this._progressiveDone=r,n.addRangeListener((s,a)=>{this.#e(s,a)}),n.addProgressListener((s,a)=>{a!==void 0&&this._fullReader?.onProgress?.({loaded:s,total:a})}),n.addProgressiveReadListener(s=>{this.#e(void 0,s)}),n.addProgressiveDoneListener(()=>{this._fullReader?.progressiveDone(),this._progressiveDone=!0}),n.transportReady()}#e(e,n){const i=HF(n);if(e===void 0)this._fullReader?this._fullReader._enqueue(i):this._queuedChunks.push(i);else{const r=this._rangeReaders.keys().find(s=>s._begin===e);an(r,"#onReceiveData - no `PDFDataTransportStreamRangeReader` instance found."),r._enqueue(i)}}getFullReader(){const e=super.getFullReader();return this._queuedChunks=null,e}getRangeReader(e,n){const i=super.getRangeReader(e,n);return i&&(i.onDone=()=>this._rangeReaders.delete(i),this._source.pdfDataRangeTransport.requestDataRange(e,n)),i}cancelAllRequests(e){super.cancelAllRequests(e),this._source.pdfDataRangeTransport.abort()}}class g0e extends ex{_done=!1;_queuedChunks=null;_requests=[];constructor(e){super(e);const{pdfDataRangeTransport:n,disableRange:i,disableStream:r}=e._source,{length:s,contentDispositionFilename:a}=n;this._queuedChunks=e._queuedChunks||[];for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._done=e._progressiveDone,this._contentLength=s,this._isStreamingSupported=!r,this._isRangeSupported=!i,P3(a)&&(this._filename=a),this._headersCapability.resolve()}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||=!0}}class p0e extends tx{onDone=null;_begin=-1;_done=!1;_queuedChunk=null;_requests=[];constructor(e,n,i){super(e,n,i),this._begin=n}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this.onDone?.()}}async read(){if(this._queuedChunk){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this.onDone?.()}}function m0e(t){let e=!0,n=i("filename\\*","i").exec(t);if(n){n=n[1];let h=o(n);return h=unescape(h),h=l(h),h=u(h),s(h)}if(n=a(t),n){const h=u(n);return s(h)}if(n=i("filename","i").exec(t),n){n=n[1];let h=o(n);return h=u(h),s(h)}function i(h,g){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function r(h,g){if(h){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const v=new TextDecoder(h,{fatal:!0}),y=$2(g);g=v.decode(y),e=!1}catch{}}return g}function s(h){return e&&/[\x80-\xff]/.test(h)&&(h=r("utf-8",h),e&&(h=r("iso-8859-1",h))),h}function a(h){const g=[];let v;const y=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=y.exec(h))!==null;){let[,S,x,T]=v;if(S=parseInt(S,10),S in g){if(S===0)break;continue}g[S]=[x,T]}const w=[];for(let S=0;S<g.length&&S in g;++S){let[x,T]=g[S];T=o(T),x&&(T=unescape(T),S===0&&(T=l(T))),w.push(T)}return w.join("")}function o(h){if(h.startsWith('"')){const g=h.slice(1).split('\\"');for(let v=0;v<g.length;++v){const y=g[v].indexOf('"');y!==-1&&(g[v]=g[v].slice(0,y),g.length=v+1),g[v]=g[v].replaceAll(/\\(.)/g,"$1")}h=g.join('"')}return h}function l(h){const g=h.indexOf("'");if(g===-1)return h;const v=h.slice(0,g),w=h.slice(g+1).replace(/^[^']*'/,"");return r(v,w)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,v,y,w){if(y==="q"||y==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,x){return String.fromCharCode(parseInt(x,16))}),r(v,w);try{w=atob(w)}catch{}return r(v,w)})}return""}function bz(t,e){const n=new Headers;if(!t||!e||typeof e!="object")return n;for(const i in e){const r=e[i];r!==void 0&&n.append(i,r)}return n}function nx(t){return URL.parse(t)?.origin??null}function wz({responseHeaders:t,isHttp:e,rangeChunkSize:n,disableRange:i}){const r={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(t.get("Content-Length"),10);return!Number.isInteger(s)||(r.suggestedLength=s,s<=2*n)||i||!e||t.get("Accept-Ranges")!=="bytes"||(t.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function Sz(t){const e=t.get("Content-Disposition");if(e){let n=m0e(e);if(n.includes("%"))try{n=decodeURIComponent(n)}catch{}if(P3(n))return n}return null}function ix(t,e){return new ES(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t,t===404||t===0&&e.startsWith("file:"))}function xz(t,e){if(t!==e)throw new Error(`Expected range response-origin "${t}" to match "${e}".`)}function Az(t,e,n,i){return fetch(t,{method:"GET",headers:e,signal:i.signal,mode:"cors",credentials:n?"include":"same-origin",redirect:"follow"})}function Ez(t,e){if(t!==200&&t!==206)throw ix(t,e)}function Tz(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:(ct(`getArrayBuffer - unexpected data format: ${t}`),new Uint8Array(t).buffer)}class v0e extends J2{_responseOrigin=null;constructor(e){super(e,y0e,C0e),this.isHttp=/^https?:/i.test(e.url),this.headers=bz(this.isHttp,e.httpHeaders)}}class y0e extends ex{_abortController=new AbortController;_reader=null;constructor(e){super(e);const{disableRange:n,disableStream:i,length:r,rangeChunkSize:s,url:a,withCredentials:o}=e._source;this._contentLength=r,this._isStreamingSupported=!i,this._isRangeSupported=!n;const l=new Headers(e.headers);Az(a,l,o,this._abortController).then(u=>{e._responseOrigin=nx(u.url),Ez(u.status,a),this._reader=u.body.getReader();const h=u.headers,{allowRangeRequests:g,suggestedLength:v}=wz({responseHeaders:h,isHttp:e.isHttp,rangeChunkSize:s,disableRange:n});this._isRangeSupported=g,this._contentLength=v||this._contentLength,this._filename=Sz(h),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Oh("Streaming is disabled.")),this._headersCapability.resolve()}).catch(this._headersCapability.reject)}async read(){await this._headersCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Tz(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class C0e extends tx{_abortController=new AbortController;_readCapability=Promise.withResolvers();_reader=null;constructor(e,n,i){super(e,n,i);const{url:r,withCredentials:s}=e._source,a=new Headers(e.headers);a.append("Range",`bytes=${n}-${i-1}`),Az(r,a,s,this._abortController).then(o=>{const l=nx(o.url);xz(l,e._responseOrigin),Ez(o.status,r),this._reader=o.body.getReader(),this._readCapability.resolve()}).catch(this._readCapability.reject)}async read(){await this._readCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:{value:Tz(e),done:!1}}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const CT=200,GF=206;function b0e(t){return typeof t!="string"?t:$2(t).buffer}class w0e extends J2{#e=new WeakMap;_responseOrigin=null;constructor(e){super(e,S0e,x0e),this.url=e.url,this.isHttp=/^https?:/i.test(this.url),this.headers=bz(this.isHttp,e.httpHeaders)}_request(e){const n=new XMLHttpRequest,i={validateStatus:null,onHeadersReceived:e.onHeadersReceived,onDone:e.onDone,onError:e.onError,onProgress:e.onProgress};this.#e.set(n,i),n.open("GET",this.url),n.withCredentials=this._source.withCredentials;for(const[r,s]of this.headers)n.setRequestHeader(r,s);return this.isHttp&&"begin"in e&&"end"in e?(n.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.validateStatus=r=>r===GF||r===CT):i.validateStatus=r=>r===CT,n.responseType="arraybuffer",an(e.onError,"Expected `onError` callback to be provided."),n.onerror=()=>e.onError(n.status),n.onreadystatechange=this.#i.bind(this,n),n.onprogress=this.#t.bind(this,n),n.send(null),n}#t(e,n){this.#e.get(e)?.onProgress?.(n)}#i(e,n){const i=this.#e.get(e);if(!i||(e.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),e.readyState!==4)||!this.#e.has(e))return;if(this.#e.delete(e),e.status===0&&this.isHttp){i.onError(e.status);return}const r=e.status||CT;if(!i.validateStatus(r)){i.onError(e.status);return}const s=b0e(e.response);if(r===GF){const a=e.getResponseHeader("Content-Range");/bytes (\d+)-(\d+)\/(\d+)/.test(a)?i.onDone(s):(ct('Missing or invalid "Content-Range" header.'),i.onError(0))}else s?i.onDone(s):i.onError(e.status)}_abortRequest(e){this.#e.has(e)&&(this.#e.delete(e),e.abort())}getRangeReader(e,n){const i=super.getRangeReader(e,n);return i&&(i.onClosed=()=>this._rangeReaders.delete(i)),i}}class S0e extends ex{_cachedChunks=[];_done=!1;_requests=[];_storedError=null;constructor(e){super(e);const{length:n}=e._source;this._contentLength=n,this._fullRequestXhr=e._request({onHeadersReceived:this.#e.bind(this),onDone:this.#t.bind(this),onError:this.#i.bind(this),onProgress:this.#n.bind(this)})}#e(){const e=this._stream,{disableRange:n,rangeChunkSize:i}=e._source,r=this._fullRequestXhr;e._responseOrigin=nx(r.responseURL);const s=r.getAllResponseHeaders(),a=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[h,...g]=u.split(": ");return[h,g.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:l}=wz({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:i,disableRange:n});o&&(this._isRangeSupported=!0),this._contentLength=l||this._contentLength,this._filename=Sz(a),this._isRangeSupported&&e._abortRequest(r),this._headersCapability.resolve()}#t(e){if(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._cachedChunks.push(e),this._done=!0,!(this._cachedChunks.length>0)){for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}}#i(e){this._storedError=ix(e,this._stream.url),this._headersCapability.reject(this._storedError);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}#n(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._fullRequestXhr),this._fullRequestXhr=null}}class x0e extends tx{onClosed=null;_done=!1;_queuedChunk=null;_requests=[];_storedError=null;constructor(e,n,i){super(e,n,i),this._requestXhr=e._request({begin:n,end:i,onHeadersReceived:this.#e.bind(this),onDone:this.#t.bind(this),onError:this.#i.bind(this),onProgress:null})}#e(){const e=nx(this._requestXhr?.responseURL);try{xz(e,this._stream._responseOrigin)}catch(n){this._storedError=n,this.#i(0)}}#t(e){this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this.onClosed?.()}#i(e){this._storedError??=ix(e,this._stream.url);for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const n=this._queuedChunk;return this._queuedChunk=null,{value:n,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._abortRequest(this._requestXhr),this.onClosed?.()}}const A0e=/^[a-z][a-z0-9\-+.]+:/i;function E0e(t){if(A0e.test(t))return new URL(t);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(t))}function Rz(t){const{Readable:e}=process.getBuiltinModule("stream");return typeof e.toWeb=="function"?e.toWeb(t):process.getBuiltinModule("module").createRequire(import.meta.url)("node-readable-to-web-readable-stream").makeDefaultReadableStreamFromNodeReadable(t)}function Dz(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:(ct(`getArrayBuffer - unexpected data format: ${t}`),new Uint8Array(t).buffer)}class T0e extends J2{constructor(e){super(e,R0e,D0e),this.url=E0e(e.url),an(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs.")}}class R0e extends ex{_reader=null;constructor(e){super(e);const{disableRange:n,disableStream:i,length:r,rangeChunkSize:s}=e._source;this._contentLength=r,this._isStreamingSupported=!i,this._isRangeSupported=!n;const a=e.url,o=process.getBuiltinModule("fs");o.promises.lstat(a).then(l=>{const u=o.createReadStream(a),h=Rz(u);this._reader=h.getReader();const{size:g}=l;g<=2*s&&(this._isRangeSupported=!1),this._contentLength=g,!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Oh("Streaming is disabled.")),this._headersCapability.resolve()}).catch(l=>{l.code==="ENOENT"&&(l=ix(0,a.href)),this._headersCapability.reject(l)})}async read(){await this._headersCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Dz(e),done:!1})}cancel(e){this._reader?.cancel(e)}}class D0e extends tx{_readCapability=Promise.withResolvers();_reader=null;constructor(e,n,i){super(e,n,i);const r=e.url,s=process.getBuiltinModule("fs");try{const a=s.createReadStream(r,{start:n,end:i-1}),o=Rz(a);this._reader=o.getReader(),this._readCapability.resolve()}catch(a){this._readCapability.reject(a)}}async read(){await this._readCapability.promise;const{value:e,done:n}=await this._reader.read();return n?{value:e,done:n}:{value:Dz(e),done:!1}}cancel(e){this._reader?.cancel(e)}}const S0=Symbol("INITIAL_DATA");class Mz{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:S0}}get(e,n=null){if(n){const r=this.#t(e);return r.promise.then(()=>n(r.data)),null}const i=this.#e[e];if(!i||i.data===S0)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const n=this.#e[e];return!!n&&n.data!==S0}delete(e){const n=this.#e[e];return!n||n.data===S0?!1:(delete this.#e[e],!0)}resolve(e,n=null){const i=this.#t(e);i.data=n,i.resolve()}clear(){for(const e in this.#e){const{data:n}=this.#e[e];n?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:n}=this.#e[e];n!==S0&&(yield[e,n])}}}const M0e=1e5,zF=30;class ea{#e=Promise.withResolvers();#t=null;#i=!1;#n=!!globalThis.FontInspector?.enabled;#s=null;#a=null;#r=0;#o=0;#c=null;#l=null;#d=0;#h=0;#f=Object.create(null);#m=[];#p=null;#u=[];#g=new WeakMap;#v=null;static#C=new Map;static#y=new Map;static#E=new WeakMap;static#x=null;static#w=new Set;constructor({textContentSource:e,container:n,viewport:i}){if(e instanceof ReadableStream)this.#p=e;else if(typeof e=="object")this.#p=new ReadableStream({start(l){l.enqueue(e),l.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#l=n,this.#h=i.scale*Xl.pixelRatio,this.#d=i.rotation,this.#a={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:s,pageX:a,pageY:o}=i.rawDims;this.#v=[1,0,0,-1,-a,o+s],this.#o=r,this.#r=s,ea.#M(),n.style.setProperty("--min-font-size",ea.#x),xf(n,i),this.#e.promise.finally(()=>{ea.#w.delete(this),this.#a=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:n}=Ji.platform;return ut(this,"fontFamilyMap",new Map([["sans-serif",`${e&&n?"Calibri, ":""}sans-serif`],["monospace",`${e&&n?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#c.read().then(({value:n,done:i})=>{if(i){this.#e.resolve();return}this.#s??=n.lang,Object.assign(this.#f,n.styles),this.#R(n.items),e()},this.#e.reject)};return this.#c=this.#p.getReader(),ea.#w.add(this),e(),this.#e.promise}update({viewport:e,onBefore:n=null}){const i=e.scale*Xl.pixelRatio,r=e.rotation;if(r!==this.#d&&(n?.(),this.#d=r,xf(this.#l,{rotation:r})),i!==this.#h){n?.(),this.#h=i;const s={div:null,properties:null,ctx:ea.#_(this.#s)};for(const a of this.#u)s.properties=this.#g.get(a),s.div=a,this.#A(s)}}cancel(){const e=new Oh("TextLayer task cancelled.");this.#c?.cancel(e).catch(()=>{}),this.#c=null,this.#e.reject(e)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#m}#R(e){if(this.#i)return;this.#a.ctx??=ea.#_(this.#s);const n=this.#u,i=this.#m;for(const r of e){if(n.length>M0e){ct("Ignoring additional textDivs for performance reasons."),this.#i=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const s=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),r.id&&this.#t.setAttribute("id",`${r.id}`),r.tag==="Artifact"&&(this.#t.ariaHidden=!0),s.append(this.#t)}else r.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}i.push(r.str),this.#b(r)}}#b(e){const n=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#u.push(n);const r=Ge.transform(this.#v,e.transform);let s=Math.atan2(r[1],r[0]);const a=this.#f[e.fontName];a.vertical&&(s+=Math.PI/2);let o=this.#n&&a.fontSubstitution||a.fontFamily;o=ea.fontFamilyMap.get(o)||o;const l=Math.hypot(r[2],r[3]),u=l*ea.#B(o,a,this.#s);let h,g;s===0?(h=r[4],g=r[5]-u):(h=r[4]+u*Math.sin(s),g=r[5]-u*Math.cos(s));const v=n.style;v.left=`${(100*h/this.#o).toFixed(2)}%`,v.top=`${(100*g/this.#r).toFixed(2)}%`,v.setProperty("--font-height",`${l.toFixed(2)}px`),v.fontFamily=o,i.fontSize=l,n.setAttribute("role","presentation"),n.textContent=e.str,n.dir=e.dir,this.#n&&(n.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),s!==0&&(i.angle=s*(180/Math.PI));let y=!1;if(e.str.length>1)y=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const w=Math.abs(e.transform[0]),S=Math.abs(e.transform[3]);w!==S&&Math.max(w,S)/Math.min(w,S)>1.5&&(y=!0)}if(y&&(i.canvasWidth=a.vertical?e.height:e.width),this.#g.set(n,i),this.#a.div=n,this.#a.properties=i,this.#A(this.#a),i.hasText&&this.#t.append(n),i.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),this.#t.append(w)}}#A(e){const{div:n,properties:i,ctx:r}=e,{style:s}=n;if(i.canvasWidth!==0&&i.hasText){const{fontFamily:a}=s,{canvasWidth:o,fontSize:l}=i;ea.#D(r,l*this.#h,a);const{width:u}=r.measureText(n.textContent);u>0&&s.setProperty("--scale-x",o*this.#h/u)}i.angle!==0&&s.setProperty("--rotate",`${i.angle}deg`)}static cleanup(){if(!(this.#w.size>0)){this.#C.clear();for(const{canvas:e}of this.#y.values())e.remove();this.#y.clear()}}static#_(e=null){let n=this.#y.get(e||="");if(!n){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),n=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#y.set(e,n),this.#E.set(n,{size:0,family:""})}return n}static#D(e,n,i){const r=this.#E.get(e);n===r.size&&i===r.family||(e.font=`${n}px ${i}`,r.size=n,r.family=i)}static#M(){if(this.#x!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#x=e.getBoundingClientRect().height,e.remove()}static#B(e,n,i){const r=this.#C.get(e);if(r)return r;const s=this.#_(i);s.canvas.width=s.canvas.height=zF,this.#D(s,zF,e);const a=s.measureText(""),o=a.fontBoundingBoxAscent,l=Math.abs(a.fontBoundingBoxDescent);s.canvas.width=s.canvas.height=0;let u=.8;return o?u=o/(o+l):(Ji.platform.isFirefox&&ct("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),n.ascent?u=n.ascent:n.descent&&(u=1+n.descent)),this.#C.set(e,u),u}}const _0e=100;function _z(t={}){typeof t=="string"||t instanceof URL?t={url:t}:(t instanceof ArrayBuffer||ArrayBuffer.isView(t))&&(t={data:t});const e=new I3,{docId:n}=e,i=t.url?Ive(t.url):null,r=t.data?Hve(t.data):null,s=t.httpHeaders||null,a=t.withCredentials===!0,o=t.password??null,l=t.range instanceof Pz?t.range:null,u=Number.isInteger(t.rangeChunkSize)&&t.rangeChunkSize>0?t.rangeChunkSize:2**16;let h=t.worker instanceof Ey?t.worker:null;const g=t.verbosity,v=typeof t.docBaseUrl=="string"&&!Z2(t.docBaseUrl)?t.docBaseUrl:null,y=G1(t.cMapUrl),w=t.cMapPacked!==!1,S=t.CMapReaderFactory||(hs?Kve:EF),x=G1(t.iccUrl),T=G1(t.standardFontDataUrl),_=t.StandardFontDataFactory||(hs?Yve:TF),M=G1(t.wasmUrl),F=t.WasmFactory||(hs?Xve:RF),L=t.stopAtErrors!==!0,k=Number.isInteger(t.maxImageSize)&&t.maxImageSize>-1?t.maxImageSize:-1,B=t.isEvalSupported!==!1,H=typeof t.isOffscreenCanvasSupported=="boolean"?t.isOffscreenCanvasSupported:!hs,U=typeof t.isImageDecoderSupported=="boolean"?t.isImageDecoderSupported:!hs&&(Ji.platform.isFirefox||!globalThis.chrome),W=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,j=typeof t.disableFontFace=="boolean"?t.disableFontFace:hs,X=t.fontExtraProperties===!0,ne=t.enableXfa===!0,$=t.ownerDocument||globalThis.document,q=t.disableRange===!0,z=t.disableStream===!0,K=t.disableAutoFetch===!0,Q=t.pdfBug===!0,oe=t.CanvasFactory||(hs?qve:Uve),le=t.FilterFactory||(hs?Wve:jve),V=t.enableHWA===!0,Z=t.useWasm!==!1,ae=l?l.length:t.length??NaN,Ee=typeof t.useSystemFonts=="boolean"?t.useSystemFonts:!hs&&!j,Pe=typeof t.useWorkerFetch=="boolean"?t.useWorkerFetch:!!(S===EF&&_===TF&&F===RF&&y&&T&&M&&k0(y,document.baseURI)&&k0(T,document.baseURI)&&k0(M,document.baseURI)),Ie=null;hve(g);const ze={canvasFactory:new oe({ownerDocument:$,enableHWA:V}),filterFactory:new le({docId:n,ownerDocument:$}),cMapReaderFactory:Pe?null:new S({baseUrl:y,isCompressed:w}),standardFontDataFactory:Pe?null:new _({baseUrl:T}),wasmFactory:Pe?null:new F({baseUrl:M})};h||(h=Ey.create({verbosity:g,port:Hp.workerPort}),e._worker=h);const Ot={docId:n,apiVersion:"5.4.624",data:r,password:o,disableAutoFetch:K,rangeChunkSize:u,length:ae,docBaseUrl:v,enableXfa:ne,evaluatorOptions:{maxImageSize:k,disableFontFace:j,ignoreErrors:L,isEvalSupported:B,isOffscreenCanvasSupported:H,isImageDecoderSupported:U,canvasMaxAreaInBytes:W,fontExtraProperties:X,useSystemFonts:Ee,useWasm:Z,useWorkerFetch:Pe,cMapUrl:y,iccUrl:x,standardFontDataUrl:T,wasmUrl:M}},me={ownerDocument:$,pdfBug:Q,styleElement:Ie,enableHWA:V,loadingParams:{disableAutoFetch:K,enableXfa:ne}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const Be=h.messageHandler.sendWithPromise("GetDocRequest",Ot,r?[r.buffer]:null);let Je;if(l)Je=new f0e({pdfDataRangeTransport:l,disableRange:q,disableStream:z});else if(!r){if(!i)throw new Error("getDocument - no `url` parameter provided.");const be=k0(i)?v0e:hs?T0e:w0e;Je=new be({url:i,length:ae,httpHeaders:s,withCredentials:a,rangeChunkSize:u,disableRange:q,disableStream:z})}return Be.then(be=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const wt=new N0(n,be,h.port),nt=new L0e(wt,e,Je,me,ze);e._transport=nt,wt.send("Ready",null)})}).catch(e._capability.reject),e}class I3{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${I3.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class Pz{#e=Promise.withResolvers();#t=[];#i=[];#n=[];#s=[];constructor(e,n,i=!1,r=null){this.length=e,this.initialData=n,this.progressiveDone=i,this.contentDispositionFilename=r}addRangeListener(e){this.#s.push(e)}addProgressListener(e){this.#n.push(e)}addProgressiveReadListener(e){this.#i.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,n){for(const i of this.#s)i(e,n)}onDataProgress(e,n){this.#e.promise.then(()=>{for(const i of this.#n)i(e,n)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(const n of this.#i)n(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(const e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,n){on("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class P0e{constructor(e,n){this._pdfInfo=e,this._transport=n}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ut(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,n){return this._transport.getAnnotationsByType(e,n)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(n)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}extractPages(e){return this._transport.extractPages(e)}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class O0e{#e=!1;#t=nn.instance;constructor(e,n,i,r=!1){this._pageIndex=e,this._pageInfo=n,this._transport=i,this._stats=r?new yF:null,this._pdfBug=r,this.commonObjs=i.commonObjs,this.objs=new Mz,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}set pageNumber(e){this._pageIndex=e-1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:n=this.rotate,offsetX:i=0,offsetY:r=0,dontFlip:s=!1}={}){return new uC({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:n,offsetX:i,offsetY:r,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:n}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,n)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ut(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,canvas:n=e.canvas,viewport:i,intent:r="display",annotationMode:s=Sh.ENABLE,transform:a=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:u=null,pageColors:h=null,printAnnotationStorage:g=null,isEditing:v=!1,recordOperations:y=!1,operationsFilter:w=null}){this._stats?.time("Overall");const S=this._transport.getRenderingIntent(r,s,g,v),{renderingIntent:x,cacheKey:T}=S;this.#e=!1,l||=this._transport.getOptionalContentConfig(x);let _=this._intentStates.get(T);_||(_=Object.create(null),this._intentStates.set(T,_)),_.streamReaderCancelTimeout&&(clearTimeout(_.streamReaderCancelTimeout),_.streamReaderCancelTimeout=null);const M=!!(x&Js.PRINT);_.displayReadyCapability||(_.displayReadyCapability=Promise.withResolvers(),_.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(S));const F=!!(this._pdfBug&&globalThis.StepperManager?.enabled),L=!this.recordedBBoxes&&(y||F),k=U=>{if(_.renderTasks.delete(B),L){const W=B.gfx?.dependencyTracker.take();W&&(B.stepper&&B.stepper.setOperatorBBoxes(W,B.gfx.dependencyTracker.takeDebugMetadata()),y&&(this.recordedBBoxes=W))}M&&(this.#e=!0),this.#i(),U?(B.capability.reject(U),this._abortOperatorList({intentState:_,reason:U instanceof Error?U:new Error(U)})):B.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},B=new Rp({callback:k,params:{canvas:n,canvasContext:e,dependencyTracker:L?new Zve(n,_.operatorList.length,F):null,viewport:i,transform:a,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:_.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!M,pdfBug:this._pdfBug,pageColors:h,enableHWA:this._transport.enableHWA,operationsFilter:w});(_.renderTasks||=new Set).add(B);const H=B.task;return Promise.all([_.displayReadyCapability.promise,l]).then(([U,W])=>{if(this.destroyed){k();return}if(this._stats?.time("Rendering"),!(W.renderingIntent&x))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");B.initializeGraphics({transparency:U,optionalContentConfig:W}),B.operatorListChanged()}).catch(k),H}getOperatorList({intent:e="display",annotationMode:n=Sh.ENABLE,printAnnotationStorage:i=null,isEditing:r=!1}={}){function s(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}const a=this._transport.getRenderingIntent(e,n,i,r,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=s,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||=new Set).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:n=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageId:this.#t.getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:n===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Ay.textContent(i));const n=this.streamTextContent(e);return new Promise(function(i,r){function s(){a.read().then(function({value:l,done:u}){if(u){i(o);return}o.lang??=l.lang,Object.assign(o.styles,l.styles),o.items.push(...l.items),s()},r)}const a=n.getReader(),o={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const n of this._intentStates.values())if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability)for(const i of n.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;const n=this.#i();return e&&n&&(this._stats&&=new yF),n}#i(){if(!this.#e||this.destroyed)return!1;for(const{renderTasks:e,operatorList:n}of this._intentStates.values())if(e.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,n){const i=this._intentStates.get(n);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(e))}_renderPageChunk(e,n){for(let i=0,r=e.length;i<r;i++)n.operatorList.fnArray.push(e.fnArray[i]),n.operatorList.argsArray.push(e.argsArray[i]);n.operatorList.lastChunk=e.lastChunk,n.operatorList.separateAnnots=e.separateAnnots;for(const i of n.renderTasks)i.operatorListChanged();e.lastChunk&&this.#i()}_pumpOperatorList({renderingIntent:e,cacheKey:n,annotationStorageSerializable:i,modifiedIds:r}){const{map:s,transfer:a}=i,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageId:this.#t.getPageId(this._pageIndex+1)-1,pageIndex:this._pageIndex,intent:e,cacheKey:n,annotationStorage:s,modifiedIds:r},a).getReader(),u=this._intentStates.get(n);u.streamReader=l;const h=()=>{l.read().then(({value:g,done:v})=>{if(v){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,u),h())},g=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const v of u.renderTasks)v.operatorListChanged();this.#i()}if(u.displayReadyCapability)u.displayReadyCapability.reject(g);else if(u.opListReadCapability)u.opListReadCapability.reject(g);else throw g}})};h()}_abortOperatorList({intentState:e,reason:n,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(n instanceof _3){let r=_0e;n.extraDelay>0&&n.extraDelay<1e3&&(r+=n.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:n,force:!0})},r);return}}if(e.streamReader.cancel(new Oh(n.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,s]of this._intentStates)if(s===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}var Ah,Ho,Hc,nf,XS,rf,sf,ps,bw,Oz,Lz,B0,Wp,ww;const Zn=class Zn{constructor({name:e=null,port:n=null,verbosity:i=dve()}={}){Pl(this,ps);Pl(this,Ah,Promise.withResolvers());Pl(this,Ho,null);Pl(this,Hc,null);Pl(this,nf,null);if(this.name=e,this.destroyed=!1,this.verbosity=i,n){if($n(Zn,sf).has(n))throw new Error("Cannot use more than one PDFWorker per port.");$n(Zn,sf).set(n,this),Ol(this,ps,Oz).call(this,n)}else Ol(this,ps,Lz).call(this)}get promise(){return $n(this,Ah).promise}get port(){return $n(this,Hc)}get messageHandler(){return $n(this,Ho)}destroy(){this.destroyed=!0,$n(this,nf)?.terminate(),Ns(this,nf,null),$n(Zn,sf).delete($n(this,Hc)),Ns(this,Hc,null),$n(this,Ho)?.destroy(),Ns(this,Ho,null)}static create(e){const n=$n(this,sf).get(e?.port);if(n){if(n._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return n}return new Zn(e)}static get workerSrc(){if(Hp.workerSrc)return Hp.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ut(this,"_setupFakeWorkerGlobal",(async()=>$n(this,Wp,ww)?$n(this,Wp,ww):(await import(this.workerSrc)).WorkerMessageHandler)())}};Ah=new WeakMap,Ho=new WeakMap,Hc=new WeakMap,nf=new WeakMap,XS=new WeakMap,rf=new WeakMap,sf=new WeakMap,ps=new WeakSet,bw=function(){$n(this,Ah).resolve(),$n(this,Ho).send("configure",{verbosity:this.verbosity})},Oz=function(e){Ns(this,Hc,e),Ns(this,Ho,new N0("main","worker",e)),$n(this,Ho).on("ready",()=>{}),Ol(this,ps,bw).call(this)},Lz=function(){if($n(Zn,rf)||$n(Zn,Wp,ww)){Ol(this,ps,B0).call(this);return}let{workerSrc:e}=Zn;try{Zn._isSameOrigin(window.location,e)||(e=Zn._createCDNWrapper(new URL(e,window.location).href));const n=new Worker(e,{type:"module"}),i=new N0("main","worker",n),r=()=>{s.abort(),i.destroy(),n.terminate(),this.destroyed?$n(this,Ah).reject(new Error("Worker was destroyed")):Ol(this,ps,B0).call(this)},s=new AbortController;n.addEventListener("error",()=>{$n(this,nf)||r()},{signal:s.signal}),i.on("test",o=>{if(s.abort(),this.destroyed||!o){r();return}Ns(this,Ho,i),Ns(this,Hc,n),Ns(this,nf,n),Ol(this,ps,bw).call(this)}),i.on("ready",o=>{if(s.abort(),this.destroyed){r();return}try{a()}catch{Ol(this,ps,B0).call(this)}});const a=()=>{const o=new Uint8Array;i.send("test",o,[o.buffer])};a();return}catch{X2("The worker has been disabled.")}Ol(this,ps,B0).call(this)},B0=function(){$n(Zn,rf)||(ct("Setting up fake worker."),Ns(Zn,rf,!0)),Zn._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){$n(this,Ah).reject(new Error("Worker was destroyed"));return}const n=new Vve;Ns(this,Hc,n);const i=`fake${r4(Zn,XS)._++}`,r=new N0(i+"_worker",i,n);e.setup(r,n),Ns(this,Ho,new N0(i,i+"_worker",n)),Ol(this,ps,bw).call(this)}).catch(e=>{$n(this,Ah).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Wp=new WeakSet,ww=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Pl(Zn,Wp),Pl(Zn,XS,0),Pl(Zn,rf,!1),Pl(Zn,sf,new WeakMap),hs&&(Ns(Zn,rf,!0),Hp.workerSrc||="./pdf.worker.mjs"),Zn._isSameOrigin=(e,n)=>{const i=URL.parse(e);if(!i?.origin||i.origin==="null")return!1;const r=new URL(n,i);return i.origin===r.origin},Zn._createCDNWrapper=e=>{const n=`await import("${e}");`;return URL.createObjectURL(new Blob([n],{type:"text/javascript"}))},Zn.fromPort=e=>{if(Ave("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return Zn.create(e)};let Ey=Zn;class L0e{downloadInfoCapability=Promise.withResolvers();#e=null;#t=new Map;#i=null;#n=new Map;#s=new Map;#a=new Map;#r=null;#o=nn.instance;constructor(e,n,i,r,s){this.messageHandler=e,this.loadingTask=n,this.#i=i,this.commonObjs=new Mz,this.fontLoader=new kve({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.enableHWA=r.enableHWA,this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.wasmFactory=s.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this.setupMessageHandler(),this.#o.addListener(this.#c.bind(this))}#c(){const e=new Map,n=new Map;for(let i=0,r=this.#o.pagesNumber;i<r;i++){const s=this.#o.getPrevPageNumber(i+1)-1,a=this.#n.get(s);a&&e.set(i,a);const o=this.#s.get(s);o&&n.set(i,o)}this.#n=e,this.#s=n}#l(e,n=null){const i=this.#t.get(e);if(i)return i;const r=this.messageHandler.sendWithPromise(e,n);return this.#t.set(e,r),r}#d({loaded:e,total:n}){this.loadingTask.onProgress?.({loaded:e,total:n,percent:Pr(Math.round(e/n*100),0,100)})}get annotationStorage(){return ut(this,"annotationStorage",new F3)}getRenderingIntent(e,n=Sh.ENABLE,i=null,r=!1,s=!1){let a=Js.DISPLAY,o=ED;switch(e){case"any":a=Js.ANY;break;case"display":break;case"print":a=Js.PRINT;break;default:ct(`getRenderingIntent - invalid intent: ${e}`)}const l=a&Js.PRINT&&i instanceof gz?i:this.annotationStorage;switch(n){case Sh.DISABLE:a+=Js.ANNOTATIONS_DISABLE;break;case Sh.ENABLE:break;case Sh.ENABLE_FORMS:a+=Js.ANNOTATIONS_FORMS;break;case Sh.ENABLE_STORAGE:a+=Js.ANNOTATIONS_STORAGE,o=l.serializable;break;default:ct(`getRenderingIntent - invalid annotationMode: ${n}`)}r&&(a+=Js.IS_EDITING),s&&(a+=Js.OPLIST);const{ids:u,hash:h}=l.modifiedIds,g=[a,o.hash,h];return{renderingIntent:a,cacheKey:g.join("_"),annotationStorageSerializable:o,modifiedIds:u}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of this.#n.values())e.push(i._destroy());this.#n.clear(),this.#s.clear(),this.#a.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return e.push(n),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),ea.cleanup(),this.#i?.cancelAllRequests(new Oh("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:n}=this;e.on("GetReader",(i,r)=>{an(this.#i,"GetReader - no `BasePDFStream` instance available."),this.#e=this.#i.getFullReader(),this.#e.onProgress=s=>this.#d(s),r.onPull=()=>{this.#e.read().then(function({value:s,done:a}){if(a){r.close();return}an(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{r.error(s)})},r.onCancel=s=>{this.#e.cancel(s),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async i=>{await this.#e.headersReady;const{isStreamingSupported:r,isRangeSupported:s,contentLength:a}=this.#e;return r&&s&&(this.#e.onProgress=null),{isStreamingSupported:r,isRangeSupported:s,contentLength:a}}),e.on("GetRangeReader",(i,r)=>{an(this.#i,"GetRangeReader - no `BasePDFStream` instance available.");const s=this.#i.getRangeReader(i.begin,i.end);if(!s){r.close();return}r.onPull=()=>{s.read().then(function({value:a,done:o}){if(o){r.close();return}an(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{r.error(a)})},r.onCancel=a=>{s.cancel(a),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:i})=>{this.#o.pagesNumber=i.numPages,this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,n._capability.resolve(new P0e(i,this))}),e.on("DocException",i=>{n._capability.reject(Bs(i))}),e.on("PasswordRequest",i=>{this.#r=Promise.withResolvers();try{if(!n.onPassword)throw Bs(i);const r=s=>{s instanceof Error?this.#r.reject(s):this.#r.resolve({password:s})};n.onPassword(r,i.code)}catch(r){this.#r.reject(r)}return this.#r.promise}),e.on("DataLoaded",i=>{this.#d({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;this.#n.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,r,s])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(r){case"Font":if("error"in s){const g=s.error;ct(`Error during font loading: ${g}`),this.commonObjs.resolve(i,g);break}const a=new yn(s),o=this._params.pdfBug&&globalThis.FontInspector?.enabled?(g,v)=>globalThis.FontInspector.fontAdded(g,v):null,l=new Nve(a,o,s.extra,s.charProcOperatorList);this.fontLoader.bind(l).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!l.fontExtraProperties&&l.data&&l.clearData(),this.commonObjs.resolve(i,l)});break;case"CopyLocalImage":const{imageRef:u}=s;an(u,"The imageRef must be defined.");for(const g of this.#n.values())for(const[,v]of g.objs)if(v?.ref===u)return v.dataLen?(this.commonObjs.resolve(i,structuredClone(v)),v.dataLen):null;break;case"FontPath":this.commonObjs.resolve(i,new Bve(s));break;case"Image":this.commonObjs.resolve(i,s);break;case"Pattern":const h=new hr(s);this.commonObjs.resolve(i,h.getIR());break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([i,r,s,a])=>{if(this.destroyed)return;const o=this.#n.get(r);if(!o.objs.has(i)){if(o._intentStates.size===0){a?.bitmap?.close();return}switch(s){case"Image":case"Pattern":o.objs.resolve(i,a);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",i=>{this.destroyed||this.#d(i)}),e.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[i.type];if(!r)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&ct("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this.#e?.filename??null},n).finally(()=>{this.annotationStorage.resetModified()})}extractPages(e){return this.messageHandler.sendWithPromise("ExtractPages",{pageInfos:e})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this.#o.pagesNumber)return Promise.reject(new Error("Invalid page request."));const n=e-1,i=this.#o.getPageId(e)-1,r=this.#s.get(n);if(r)return r;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:i}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&this.#a.set(a.refStr,i);const o=new O0e(n,a,this,this._params.pdfBug);return this.#n.set(n,o),o});return this.#s.set(n,s),s}async getPageIndex(e){if(!TD(e))throw new Error("Invalid pageIndex request.");const n=await this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen});return this.#o.getPageNumber(n+1)-1}getAnnotations(e,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:this.#o.getPageId(e+1)-1,intent:n})}getFieldObjects(){return this.#l("GetFieldObjects")}hasJSActions(){return this.#l("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,n){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:n})}getDocJSActions(){return this.#l("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:this.#o.getPageId(e+1)-1})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:this.#o.getPageId(e+1)-1})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#l("GetOptionalContentConfig").then(n=>new d0e(n,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",n=this.#t.get(e);if(n)return n;const i=this.messageHandler.sendWithPromise(e,null).then(r=>({info:r[0],metadata:r[1]?new u0e(r[1]):null,contentDispositionFilename:this.#e?.filename??null,contentLength:this.#e?.contentLength??null,hasStructTree:r[2]}));return this.#t.set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const n of this.#n.values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),ea.cleanup()}}cachedPageNumber(e){if(!TD(e))return null;const n=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`,i=this.#a.get(n);return i>=0?this.#o.getPageNumber(i+1):null}}class F0e{_internalRenderTask=null;onContinue=null;onError=null;constructor(e){this._internalRenderTask=e}get promise(){return this._internalRenderTask.capability.promise}cancel(e=0){this._internalRenderTask.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this._internalRenderTask.operatorList;if(!e)return!1;const{annotationCanvasMap:n}=this._internalRenderTask;return e.form||e.canvas&&n?.size>0}}class Rp{#e=null;static#t=new WeakSet;constructor({callback:e,params:n,objs:i,commonObjs:r,annotationCanvasMap:s,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:g=!1,pageColors:v=null,enableHWA:y=!1,operationsFilter:w=null}){this.callback=e,this.params=n,this.objs=i,this.commonObjs=r,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=u,this._pdfBug=g,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new F0e(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvas,this._canvasContext=n.canvas?null:n.canvasContext,this._enableHWA=y,this._dependencyTracker=n.dependencyTracker,this._operationsFilter=w}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:n}){if(this.cancelled)return;if(this._canvas){if(Rp.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Rp.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:i,transform:r,background:s,dependencyTracker:a}=this.params,o=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Ip(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors,a),this.gfx.beginDrawing({transform:r,viewport:i,transparency:e,background:s}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,n=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),Rp.#t.delete(this._canvas),e||=new _3(`Rendering cancelled, page ${this._pageIndex+1}`,n),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Rp.#t.delete(this._canvas),this.callback())))}}const k0e="5.4.624",N0e="384c6208b";class Ya{#e=null;#t=null;#i;#n=null;#s=!1;#a=!1;#r=null;#o;#c=null;#l=null;static#d=null;static get _keyboardManager(){return ut(this,"_keyboardManager",new dC([[["Escape","mac+Escape"],Ya.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Ya.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Ya.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Ya.prototype._moveToPrevious],[["Home","mac+Home"],Ya.prototype._moveToBeginning],[["End","mac+End"],Ya.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:n=null}){e?(this.#a=!1,this.#r=e):this.#a=!0,this.#l=e?._uiManager||n,this.#o=this.#l._eventBus,this.#i=e?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",Ya.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",this.#r&&(e.ariaControls=`${this.#r.id}_colorpicker_dropdown`);const n=this.#l._signal;e.addEventListener("click",this.#p.bind(this),{signal:n}),e.addEventListener("keydown",this.#m.bind(this),{signal:n});const i=this.#t=document.createElement("span");return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=this.#i,e.append(i),e}renderMainDropdown(){const e=this.#n=this.#h();return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}#h(){const e=document.createElement("div"),n=this.#l._signal;e.addEventListener("contextmenu",oo,{signal:n}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#r&&(e.id=`${this.#r.id}_colorpicker_dropdown`);for(const[i,r]of this.#l.highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",r),s.title=i,s.setAttribute("data-l10n-id",Ya.#d[i]);const a=document.createElement("span");s.append(a),a.className="swatch",a.style.backgroundColor=r,s.ariaSelected=r===this.#i,s.addEventListener("click",this.#f.bind(this,r),{signal:n}),e.append(s)}return e.addEventListener("keydown",this.#m.bind(this),{signal:n}),e}#f(e,n){n.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:zt.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#p(e);return}const n=e.target.getAttribute("data-color");n&&this.#f(n,e)}_moveToNext(e){if(!this.#g){this.#p(e);return}if(e.target===this.#e){this.#n.firstElementChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#n?.firstElementChild||e.target===this.#e){this.#g&&this._hideDropdownFromKeyboard();return}this.#g||this.#p(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#g){this.#p(e);return}this.#n.firstElementChild?.focus()}_moveToEnd(e){if(!this.#g){this.#p(e);return}this.#n.lastElementChild?.focus()}#m(e){Ya._keyboardManager.exec(this,e)}#p(e){if(this.#g){this.hideDropdown();return}if(this.#s=e.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#e.ariaExpanded="true",this.#n){this.#n.classList.remove("hidden");return}const n=this.#n=this.#h();this.#e.append(n)}#u(e){this.#n?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#n?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#g(){return this.#n&&!this.#n.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#a){if(!this.#g){this.#r?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#s})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#n)return;const n=this.#l.highlightColors.values();for(const i of this.#n.children)i.ariaSelected=n.next().value===e.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#n?.remove(),this.#n=null}}class Ty{#e=null;#t=null;#i=null;static#n=null;constructor(e){this.#t=e,this.#i=e._uiManager,Ty.#n||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#e)return this.#e;const{editorType:e,colorType:n,color:i}=this.#t,r=this.#e=document.createElement("input");return r.type="color",r.value=i||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",Ty.#n[e]),r.addEventListener("input",()=>{this.#i.updateParams(n,r.value)},{signal:this.#i._signal}),r}update(e){this.#e&&(this.#e.value=e)}destroy(){this.#e?.remove(),this.#e=null}hideDropdown(){}}function VF(t){return Math.floor(Math.max(0,Math.min(1,t))*255).toString(16).padStart(2,"0")}function x0(t){return Math.max(0,Math.min(255,255*t))}class UF{static CMYK_G([e,n,i,r]){return["G",1-Math.min(1,.3*e+.59*i+.11*n+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=x0(e),[e,e,e]}static G_HTML([e]){const n=VF(e);return`#${n}${n}${n}`}static RGB_G([e,n,i]){return["G",.3*e+.59*n+.11*i]}static RGB_rgb(e){return e.map(x0)}static RGB_HTML(e){return`#${e.map(VF).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,n,i,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,i+r),1-Math.min(1,n+r)]}static CMYK_rgb([e,n,i,r]){return[x0(1-Math.min(1,e+r)),x0(1-Math.min(1,i+r)),x0(1-Math.min(1,n+r))]}static CMYK_HTML(e){const n=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(n)}static RGB_CMYK([e,n,i]){const r=1-e,s=1-n,a=1-i,o=Math.min(r,s,a);return["CMYK",r,s,a,o]}}class B0e{create(e,n,i=!1){if(e<=0||n<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${n}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${n}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){on("Abstract method `_createSVG` called.")}}class RS extends B0e{_createSVG(e){return document.createElementNS(Nc,e)}}const I0e=9,Af=new WeakSet,H0e=new Date().getTimezoneOffset()*60*1e3;class bT{static create(e){switch(e.data.annotationType){case Hi.LINK:return new H3(e);case Hi.TEXT:return new z0e(e);case Hi.WIDGET:switch(e.data.fieldType){case"Tx":return new V0e(e);case"Btn":return e.data.radioButton?new Fz(e):e.data.checkBox?new j0e(e):new W0e(e);case"Ch":return new q0e(e);case"Sig":return new U0e(e)}return new Gf(e);case Hi.POPUP:return new MD(e);case Hi.FREETEXT:return new kz(e);case Hi.LINE:return new Y0e(e);case Hi.SQUARE:return new X0e(e);case Hi.CIRCLE:return new $0e(e);case Hi.POLYLINE:return new Nz(e);case Hi.CARET:return new Q0e(e);case Hi.INK:return new G3(e);case Hi.POLYGON:return new Z0e(e);case Hi.HIGHLIGHT:return new Bz(e);case Hi.UNDERLINE:return new J0e(e);case Hi.SQUIGGLY:return new eye(e);case Hi.STRIKEOUT:return new tye(e);case Hi.STAMP:return new Iz(e);case Hi.FILEATTACHMENT:return new nye(e);default:return new hi(e)}}}class hi{#e=null;#t=!1;#i=null;constructor(e,{isRenderable:n=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=n,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,this.hasOwnCommentButton=!1,n&&(this.contentElement=this.container=this._createContainer(i)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:n}){return!!(e?.str||n?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return hi._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:e}=this,n=this.annotationStorage?.getEditor(e.id);return n?n.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const e=this.annotationStorage?.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:n,inkLists:i,rect:r}=this.data;let s=-1/0,a=-1/0;if(n?.length>=8){for(let o=0;o<n.length;o+=8)n[o+1]>a?(a=n[o+1],s=n[o+2]):n[o+1]===a&&(s=Math.max(s,n[o+2]));return[s,a]}if(i?.length>=1){for(const o of i)for(let l=0,u=o.length;l<u;l+=2)o[l+1]>a?(a=o[l+1],s=o[l]):o[l+1]===a&&(s=Math.max(s,o[l]));if(s!==1/0)return[s,a]}return r?[r[2],r[3]]:null}_normalizePoint(e){const{page:{view:n},viewport:{rawDims:{pageWidth:i,pageHeight:r,pageX:s,pageY:a}}}=this.parent;return e[1]=n[3]-e[1]+n[1],e[0]=100*(e[0]-s)/i,e[1]=100*(e[1]-a)/r,e}get commentText(){const{data:e}=this;return this.annotationStorage.getRawValue(`${Sy}${e.id}`)?.popup?.contents||e.contentsObj?.str||""}set commentText(e){const{data:n}=this,i={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(n.id,{popup:i})||this.annotationStorage.setValue(`${Sy}${n.id}`,{id:n.id,annotationType:n.annotationType,page:this.parent.page,popup:i,popupRef:n.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){(this.#i?.popup||this.popup)?.remove(),this.#i=this.popup=null}updateEdited(e){if(!this.container)return;e.rect&&(this.#e||={rect:this.data.rect.slice(0)});const{rect:n,popup:i}=e;n&&this.#n(n);let r=this.#i?.popup||this.popup;!r&&i?.text&&(this._createPopup(i),r=this.#i.popup),r&&(r.updateEdited(e),i?.deleted&&(r.remove(),this.#i=null,this.popup=null))}resetEdited(){this.#e&&(this.#n(this.#e.rect),this.#i?.popup.resetEdited(),this.#e=null)}#n(e){const{container:{style:n},data:{rect:i,rotation:r},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}}}=this;i?.splice(0,4,...e),n.left=`${100*(e[0]-o)/s}%`,n.top=`${100*(a-e[3]+l)/a}%`,r===0?(n.width=`${100*(e[2]-e[0])/s}%`,n.height=`${100*(e[3]-e[1])/a}%`):this.setRotation(r)}_createContainer(e){const{data:n,parent:{page:i,viewport:r}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",n.id),!(this instanceof Gf)&&!(this instanceof H3)&&(s.tabIndex=0);const{style:a}=s;if(a.zIndex=this.parent.zIndex,this.parent.zIndex+=2,n.alternativeText&&(s.title=n.alternativeText),n.noRotate&&s.classList.add("norotate"),!n.rect||this instanceof MD){const{rotation:S}=n;return!n.hasOwnCanvas&&S!==0&&this.setRotation(S,s),s}const{width:o,height:l}=this;if(!e&&n.borderStyle.width>0){a.borderWidth=`${n.borderStyle.width}px`;const S=n.borderStyle.horizontalCornerRadius,x=n.borderStyle.verticalCornerRadius;if(S>0||x>0){const _=`calc(${S}px * var(--total-scale-factor)) / calc(${x}px * var(--total-scale-factor))`;a.borderRadius=_}else if(this instanceof Fz){const _=`calc(${o}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;a.borderRadius=_}switch(n.borderStyle.style){case pp.SOLID:a.borderStyle="solid";break;case pp.DASHED:a.borderStyle="dashed";break;case pp.BEVELED:ct("Unimplemented border style: beveled");break;case pp.INSET:ct("Unimplemented border style: inset");break;case pp.UNDERLINE:a.borderBottomStyle="solid";break}const T=n.borderColor||null;T?(this.#t=!0,a.borderColor=Ge.makeHexColor(T[0]|0,T[1]|0,T[2]|0)):a.borderWidth=0}const u=Ge.normalizeRect([n.rect[0],i.view[3]-n.rect[1]+i.view[1],n.rect[2],i.view[3]-n.rect[3]+i.view[1]]),{pageWidth:h,pageHeight:g,pageX:v,pageY:y}=r.rawDims;a.left=`${100*(u[0]-v)/h}%`,a.top=`${100*(u[1]-y)/g}%`;const{rotation:w}=n;return n.hasOwnCanvas||w===0?(a.width=`${100*o/h}%`,a.height=`${100*l/g}%`):this.setRotation(w,s),s}setRotation(e,n=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:r}=this.parent.viewport.rawDims;let{width:s,height:a}=this;e%180!==0&&([s,a]=[a,s]),n.style.width=`${100*s/i}%`,n.style.height=`${100*a/r}%`,n.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(n,i,r)=>{const s=r.detail[n],a=s[0],o=s.slice(1);r.target.style[i]=UF[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[i]:UF[`${a}_rgb`](o)})};return ut(this,"_commonActions",{display:n=>{const{display:i}=n.detail,r=i%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:i===1||i===2})},print:n=>{this.annotationStorage.setValue(this.data.id,{noPrint:!n.detail.print})},hidden:n=>{const{hidden:i}=n.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:n=>{setTimeout(()=>n.target.focus({preventScroll:!1}),0)},userName:n=>{n.target.title=n.detail.userName},readonly:n=>{n.target.disabled=n.detail.readonly},required:n=>{this._setRequired(n.target,n.detail.required)},bgColor:n=>{e("bgColor","backgroundColor",n)},fillColor:n=>{e("fillColor","backgroundColor",n)},fgColor:n=>{e("fgColor","color",n)},textColor:n=>{e("textColor","color",n)},borderColor:n=>{e("borderColor","borderColor",n)},strokeColor:n=>{e("strokeColor","borderColor",n)},rotation:n=>{const i=n.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,n){const i=this._commonActions;for(const r of Object.keys(n.detail))(e[r]||i[r])?.(n)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const n=this.annotationStorage.getRawValue(this.data.id);if(!n)return;const i=this._commonActions;for(const[r,s]of Object.entries(n)){const a=i[r];if(a){const o={detail:{[r]:s},target:e};a(o),delete n[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[n,i,r,s]=this.data.rect.map(S=>Math.fround(S));if(e.length===8){const[S,x,T,_]=e.subarray(2,6);if(r===S&&s===x&&n===T&&i===_)return}const{style:a}=this.container;let o;if(this.#t){const{borderColor:S,borderWidth:x}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${x}">`],this.container.classList.add("hasBorder")}const l=r-n,u=s-i,{svgFactory:h}=this,g=h.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0),g.role="none";const v=h.createElement("defs");g.append(v);const y=h.createElement("clipPath"),w=`clippath_${this.data.id}`;y.setAttribute("id",w),y.setAttribute("clipPathUnits","objectBoundingBox"),v.append(y);for(let S=2,x=e.length;S<x;S+=8){const T=e[S],_=e[S+1],M=e[S+2],F=e[S+3],L=h.createElement("rect"),k=(M-n)/l,B=(s-_)/u,H=(T-M)/l,U=(_-F)/u;L.setAttribute("x",k),L.setAttribute("y",B),L.setAttribute("width",H),L.setAttribute("height",U),y.append(L),o?.push(`<rect vector-effect="non-scaling-stroke" x="${k}" y="${B}" width="${H}" height="${U}"/>`)}this.#t&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(g),this.container.style.clipPath=`url(#${w})`}_createPopup(e=null){const{data:n}=this;let i,r;e?(i={str:e.text},r=e.date):(i=n.contentsObj,r=n.modificationDate),this.#i=new MD({data:{color:n.color,titleObj:n.titleObj,modificationDate:r,contentsObj:i,richText:n.richText,parentRect:n.rect,borderStyle:0,id:`popup_${n.id}`,rotation:n.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]})}get hasPopupElement(){return!!(this.#i||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#i}render(){on("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,n=null){const i=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:s,id:a,exportValues:o}of r){if(s===-1||a===n)continue;const l=typeof o=="string"?o:null,u=document.querySelector(`[data-element-id="${a}"]`);if(u&&!Af.has(u)){ct(`_getElementsByName - element not allowed: ${a}`);continue}i.push({id:a,exportValue:l,domElement:u})}return i}for(const r of document.getElementsByName(e)){const{exportValue:s}=r,a=r.getAttribute("data-element-id");a!==n&&Af.has(r)&&i.push({id:a,exportValue:s,domElement:r})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const n of e)n.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:n}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:n,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class G0e extends hi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&this._createPopup(e.comment)}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.parent.removeAnnotation(this.data.id),this.container.remove(),this.container=null,this.removePopup()}}class H3 extends hi{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!n?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let r=!1;return e.url?(n.addLinkAttributes(i,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(i,e.action,e.overlaidText),r=!0):e.attachment?(this.#t(i,e.attachment,e.overlaidText,e.attachmentDest),r=!0):e.setOCGState?(this.#i(i,e.setOCGState,e.overlaidText),r=!0):e.dest?(this._bindLink(i,e.dest,e.overlaidText),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),r=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&(this.contentElement=i,this.container.append(i)),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,n,i=""){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&this.#e(),i&&(e.title=i)}_bindNamedAction(e,n,i=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),i&&(e.title=i),this.#e()}#t(e,n,i="",r=null){e.href=this.linkService.getAnchorUrl(""),n.description?e.title=n.description:i&&(e.title=i),e.onclick=()=>(this.downloadManager?.openOrDownloadData(n.content,n.filename,r),!1),this.#e()}#i(e,n,i=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),i&&(e.title=i),this.#e()}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(n.actions)){const s=i.get(r);s&&(e[s]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:r}}),!1))}n.overlaidText&&(e.title=n.overlaidText),e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,n){const i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){ct('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(e.onclick=()=>!1);return}e.onclick=()=>{i?.();const{fields:r,refs:s,include:a}=n,o=[];if(r.length!==0||s.length!==0){const h=new Set(s);for(const g of r){const v=this._fieldObjects[g]||[];for(const{id:y}of v)h.add(y)}for(const g of Object.values(this._fieldObjects))for(const v of g)h.has(v.id)===a&&o.push(v)}else for(const h of Object.values(this._fieldObjects))o.push(...h);const l=this.annotationStorage,u=[];for(const h of o){const{id:g}=h;switch(u.push(g),h.type){case"text":{const y=h.defaultValue||"";l.setValue(g,{value:y});break}case"checkbox":case"radiobutton":{const y=h.defaultValue===h.exportValues;l.setValue(g,{value:y});break}case"combobox":case"listbox":{const y=h.defaultValue||"";l.setValue(g,{value:y});break}default:continue}const v=document.querySelector(`[data-element-id="${g}"]`);if(v){if(!Af.has(v)){ct(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}}),!1}}}class z0e extends hi{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(e),this.container}}class Gf extends hi{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Ji.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,n,i,r,s){i.includes("mouse")?e.addEventListener(i,a=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(i,a=>{if(i==="blur"){if(!n.focused||!a.relatedTarget)return;n.focused=!1}else if(i==="focus"){if(n.focused)return;n.focused=!0}s&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(a)}})})}_setEventListeners(e,n,i,r){for(const[s,a]of i)(a==="Action"||this.data.actions?.[a])&&((a==="Focus"||a==="Blur")&&(n||={focused:!1}),this._setEventListener(e,n,s,a,r),a==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,n,"blur","Blur",null):a==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,n,"focus","Focus",null))}_setBackgroundColor(e){const n=this.data.backgroundColor||null;e.style.backgroundColor=n===null?"transparent":Ge.makeHexColor(n[0],n[1],n[2])}_setTextStyle(e){const n=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||I0e,s=e.style;let a;const o=2,l=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o),h=Math.round(u/(fT*r))||1,g=u/h;a=Math.min(r,l(g/fT))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(r,l(u/fT))}s.fontSize=`calc(${a}px * var(--total-scale-factor))`,s.color=Ge.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(s.textAlign=n[this.data.textAlignment])}_setRequired(e,n){n?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",n)}}class V0e extends Gf{constructor(e){const n=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:n})}setPropertyOnSiblings(e,n,i,r){const s=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[n]=i),s.setValue(a.id,{[r]:i})}render(){const e=this.annotationStorage,n=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const r=e.getValue(n,{value:this.data.fieldValue});let s=r.value||"";const a=e.getValue(n,{charLimit:this.data.maxLen}).charLimit;a&&s.length>a&&(s=s.slice(0,a));let o=r.formattedValue||this.data.textContent?.join(`
`)||null;o&&this.data.comb&&(o=o.replaceAll(/\s+/g,""));const l={userValue:s,formattedValue:o,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=o??s,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",o??s),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Af.add(i),this.contentElement=i,i.setAttribute("data-element-id",n),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;const{datetimeFormat:u,datetimeType:h,timeStep:g}=this.data,v=!!h&&this.enableScripting;u&&(i.title=u),this._setRequired(i,this.data.required),a&&(i.maxLength=a),i.addEventListener("input",w=>{e.setValue(n,{value:w.target.value}),this.setPropertyOnSiblings(i,"value",w.target.value,"value"),l.formattedValue=null}),i.addEventListener("resetform",w=>{const S=this.data.defaultFieldValue??"";i.value=l.userValue=S,l.formattedValue=null});let y=w=>{const{formattedValue:S}=l;S!=null&&(w.target.value=S),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",S=>{if(l.focused)return;const{target:x}=S;if(v&&(x.type=h,g&&(x.step=g)),l.userValue){const T=l.userValue;if(v)if(h==="time"){const _=new Date(T),M=[_.getHours(),_.getMinutes(),_.getSeconds()];x.value=M.map(F=>F.toString().padStart(2,"0")).join(":")}else x.value=new Date(T-H0e).toISOString().split(h==="date"?"T":".",1)[0];else x.value=T}l.lastCommittedValue=x.value,l.commitKey=1,this.data.actions?.Focus||(l.focused=!0)}),i.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const x={value(T){l.userValue=T.detail.value??"",v||e.setValue(n,{value:l.userValue.toString()}),T.target.value=l.userValue},formattedValue(T){const{formattedValue:_}=T.detail;l.formattedValue=_,_!=null&&T.target!==document.activeElement&&(T.target.value=_);const M={formattedValue:_};v&&(M.value=_),e.setValue(n,M)},selRange(T){T.target.setSelectionRange(...T.detail.selRange)},charLimit:T=>{const{charLimit:_}=T.detail,{target:M}=T;if(_===0){M.removeAttribute("maxLength");return}M.setAttribute("maxLength",_);let F=l.userValue;!F||F.length<=_||(F=F.slice(0,_),M.value=l.userValue=F,e.setValue(n,{value:F}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:F,willCommit:!0,commitKey:1,selStart:M.selectionStart,selEnd:M.selectionEnd}}))}};this._dispatchEventFromSandbox(x,S)}),i.addEventListener("keydown",S=>{l.commitKey=1;let x=-1;if(S.key==="Escape"?x=0:S.key==="Enter"&&!this.data.multiLine?x=2:S.key==="Tab"&&(l.commitKey=3),x===-1)return;const{value:T}=S.target;l.lastCommittedValue!==T&&(l.lastCommittedValue=T,l.userValue=T,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:T,willCommit:!0,commitKey:x,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const w=y;y=null,i.addEventListener("blur",S=>{if(!l.focused||!S.relatedTarget)return;this.data.actions?.Blur||(l.focused=!1);const{target:x}=S;let{value:T}=x;if(v){if(T&&h==="time"){const _=T.split(":").map(M=>parseInt(M,10));T=new Date(2e3,0,1,_[0],_[1],_[2]||0).valueOf(),x.step=""}else T.includes("T")||(T=`${T}T00:00`),T=new Date(T).valueOf();x.type="text"}l.userValue=T,l.lastCommittedValue!==T&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:T,willCommit:!0,commitKey:l.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}),w(S)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",S=>{l.lastCommittedValue=null;const{data:x,target:T}=S,{value:_,selectionStart:M,selectionEnd:F}=T;let L=M,k=F;switch(S.inputType){case"deleteWordBackward":{const B=_.substring(0,M).match(/\w*[^\w]*$/);B&&(L-=B[0].length);break}case"deleteWordForward":{const B=_.substring(M).match(/^[^\w]*\w*/);B&&(k+=B[0].length);break}case"deleteContentBackward":M===F&&(L-=1);break;case"deleteContentForward":M===F&&(k+=1);break}S.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:_,change:x||"",willCommit:!1,selStart:L,selEnd:k}})}),this._setEventListeners(i,l,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(y&&i.addEventListener("blur",y),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/a;i.classList.add("comb"),i.style.letterSpacing=`calc(${S}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class U0e extends Gf{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class j0e extends Gf{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,n=this.data,i=n.id;let r=e.getValue(i,{value:n.exportValue===n.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return Af.add(s),s.setAttribute("data-element-id",i),s.disabled=n.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=n.fieldName,r&&s.setAttribute("checked",!0),s.setAttribute("exportValue",n.exportValue),s.tabIndex=0,s.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const u of this._getElementsByName(o,i)){const h=l&&u.exportValue===n.exportValue;u.domElement&&(u.domElement.checked=h),e.setValue(u.id,{value:h})}e.setValue(i,{value:l})}),s.addEventListener("resetform",a=>{const o=n.defaultFieldValue||"Off";a.target.checked=o===n.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",a=>{const o={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(i,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Fz extends Gf{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,n=this.data,i=n.id;let r=e.getValue(i,{value:n.fieldValue===n.buttonValue}).value;if(typeof r=="string"&&(r=r!==n.buttonValue,e.setValue(i,{value:r})),r)for(const a of this._getElementsByName(n.fieldName,i))e.setValue(a.id,{value:!1});const s=document.createElement("input");if(Af.add(s),s.setAttribute("data-element-id",i),s.disabled=n.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=n.fieldName,r&&s.setAttribute("checked",!0),s.tabIndex=0,s.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const u of this._getElementsByName(o,i))e.setValue(u.id,{value:!1});e.setValue(i,{value:l})}),s.addEventListener("resetform",a=>{const o=n.defaultFieldValue;a.target.checked=o!=null&&o===n.buttonValue}),this.enableScripting&&this.hasJSActions){const a=n.buttonValue;s.addEventListener("updatefromsandbox",o=>{const l={value:u=>{const h=a===u.detail.value;for(const g of this._getElementsByName(u.target.name)){const v=h&&g.id===i;g.domElement&&(g.domElement.checked=v),e.setValue(g.id,{value:v})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class W0e extends H3{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const n=e.lastChild;return this.enableScripting&&this.hasJSActions&&n&&(this._setDefaultPropertiesFromJS(n),n.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class q0e extends Gf{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,n=this.data.id,i=e.getValue(n,{value:this.data.fieldValue}),r=document.createElement("select");Af.add(r),r.setAttribute("data-element-id",n),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",h=>{const g=this.data.defaultFieldValue;for(const v of r.options)v.selected=v.value===g});for(const h of this.data.options){const g=document.createElement("option");g.textContent=h.displayValue,g.value=h.exportValue,i.value.includes(h.exportValue)&&(g.setAttribute("selected",!0),s=!1),r.append(g)}let a=null;if(s){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),r.prepend(h),a=()=>{h.remove(),r.removeEventListener("input",a),a=null},r.addEventListener("input",a)}const o=h=>{const g=h?"value":"textContent",{options:v,multiple:y}=r;return y?Array.prototype.filter.call(v,w=>w.selected).map(w=>w[g]):v.selectedIndex===-1?null:v[v.selectedIndex][g]};let l=o(!1);const u=h=>{const g=h.target.options;return Array.prototype.map.call(g,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",h=>{const g={value(v){a?.();const y=v.detail.value,w=new Set(Array.isArray(y)?y:[y]);for(const S of r.options)S.selected=w.has(S.value);e.setValue(n,{value:o(!0)}),l=o(!1)},multipleSelection(v){r.multiple=!0},remove(v){const y=r.options,w=v.detail.remove;y[w].selected=!1,r.remove(w),y.length>0&&Array.prototype.findIndex.call(y,x=>x.selected)===-1&&(y[0].selected=!0),e.setValue(n,{value:o(!0),items:u(v)}),l=o(!1)},clear(v){for(;r.length!==0;)r.remove(0);e.setValue(n,{value:null,items:[]}),l=o(!1)},insert(v){const{index:y,displayValue:w,exportValue:S}=v.detail.insert,x=r.children[y],T=document.createElement("option");T.textContent=w,T.value=S,x?x.before(T):r.append(T),e.setValue(n,{value:o(!0),items:u(v)}),l=o(!1)},items(v){const{items:y}=v.detail;for(;r.length!==0;)r.remove(0);for(const w of y){const{displayValue:S,exportValue:x}=w,T=document.createElement("option");T.textContent=S,T.value=x,r.append(T)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(n,{value:o(!0),items:u(v)}),l=o(!1)},indices(v){const y=new Set(v.detail.indices);for(const w of v.target.options)w.selected=y.has(w.index);e.setValue(n,{value:o(!0)}),l=o(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(g,h)}),r.addEventListener("input",h=>{const g=o(!0),v=o(!1);e.setValue(n,{value:g}),h.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n,name:"Keystroke",value:l,change:v,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):r.addEventListener("input",function(h){e.setValue(n,{value:o(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class MD extends hi{constructor(e){const{data:n,elements:i,parent:r}=e,s=!!r._commentManager;if(super(e,{isRenderable:!s&&hi._hasPopupData(n)}),this.elements=i,s&&hi._hasPopupData(n)){const a=this.popup=this.#e();for(const o of i)o.popup=a}else this.popup=null}#e(){return new K0e({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const n=this.popup=this.#e(),i=[];for(const r of this.elements)r.popup=n,r.container.ariaHasPopup="dialog",i.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(r=>`${Ep}${r}`).join(",")),this.container}}class K0e{#e=null;#t=this.#j.bind(this);#i=this.#H.bind(this);#n=this.#L.bind(this);#s=this.#S.bind(this);#a=null;#r=null;#o=null;#c=null;#l=null;#d=null;#h=null;#f=!1;#m=null;#p=null;#u=null;#g=null;#v=null;#C=null;#y=null;#E=null;#x=null;#w=null;#R=!1;#b=null;#A=null;constructor({container:e,color:n,elements:i,titleObj:r,modificationDate:s,contentsObj:a,richText:o,parent:l,rect:u,parentRect:h,open:g,commentManager:v=null}){this.#r=e,this.#x=r,this.#o=a,this.#E=o,this.#d=l,this.#a=n,this.#y=u,this.#h=h,this.#l=i,this.#e=v,this.#b=i[0],this.#c=SD.toDateObject(s),this.trigger=i.flatMap(y=>y.getElementsToTriggerPopup()),v||(this.#_(),this.#r.hidden=!0,g&&this.#S())}#_(){if(this.#p)return;this.#p=new AbortController;const{signal:e}=this.#p;for(const n of this.trigger)n.addEventListener("click",this.#s,{signal:e}),n.addEventListener("pointerenter",this.#n,{signal:e}),n.addEventListener("pointerleave",this.#i,{signal:e}),n.classList.add("popupTriggerArea");for(const n of this.#l)n.container?.addEventListener("keydown",this.#t,{signal:e})}#D(){const e=this.#l.find(n=>n.hasCommentButton);e&&(this.#v=e._normalizePoint(e.commentButtonPosition))}renderCommentButton(){if(this.#g){this.#g.parentNode||this.#b.container.after(this.#g);return}if(this.#v||this.#D(),!this.#v)return;const{signal:e}=this.#p=new AbortController,n=this.#b.hasOwnCommentButton,i=()=>{this.#e.toggleCommentPopup(this,!0,void 0,!n)},r=()=>{this.#e.toggleCommentPopup(this,!1,!0,!n)},s=()=>{this.#e.toggleCommentPopup(this,!1,!1)};if(n){this.#g=this.#b.container;for(const a of this.trigger)a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.addEventListener("keydown",this.#t,{signal:e}),a.addEventListener("click",i,{signal:e}),a.addEventListener("pointerenter",r,{signal:e}),a.addEventListener("pointerleave",s,{signal:e}),a.classList.add("popupTriggerArea")}else{const a=this.#g=document.createElement("button");a.className="annotationCommentButton";const o=this.#b.container;a.style.zIndex=o.style.zIndex+1,a.tabIndex=0,a.ariaHasPopup="dialog",a.ariaControls="commentPopup",a.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#B(),this.#M(),a.addEventListener("keydown",this.#t,{signal:e}),a.addEventListener("click",i,{signal:e}),a.addEventListener("pointerenter",r,{signal:e}),a.addEventListener("pointerleave",s,{signal:e}),o.after(a)}}#M(){if(this.#b.extraPopupElement&&!this.#b.editor)return;this.#g||this.renderCommentButton();const[e,n]=this.#v,{style:i}=this.#g;i.left=`calc(${e}%)`,i.top=`calc(${n}% - var(--comment-button-dim))`}#B(){this.#b.extraPopupElement||(this.#g||this.renderCommentButton(),this.#g.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:e,opacity:n}=this.#b.commentData;return e?this.#d._commentManager.makeCommentColor(e,n):null}focusCommentButton(){setTimeout(()=>{this.#g?.focus()},0)}getData(){const{richText:e,color:n,opacity:i,creationDate:r,modificationDate:s}=this.#b.commentData;return{contentsObj:{str:this.comment},richText:e,color:n,opacity:i,creationDate:r,modificationDate:s}}get elementBeforePopup(){return this.#g}get comment(){return this.#A||=this.#b.commentText,this.#A}set comment(e){e!==this.comment&&(this.#b.commentText=this.#A=e)}focus(){this.#b.container?.focus()}get parentBoundingClientRect(){return this.#b.layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:n}){this.#g&&(this.#g.classList.toggle("selected",e),this.#g.ariaExpanded=n)}setSelectedCommentButton(e){this.#g.classList.toggle("selected",e)}get commentPopupPosition(){if(this.#C)return this.#C;const{x:e,y:n,height:i}=this.#g.getBoundingClientRect(),{x:r,y:s,width:a,height:o}=this.#b.layer.getBoundingClientRect();return[(e-r)/a,(n+i-s)/o]}set commentPopupPosition(e){this.#C=e}hasDefaultPopupPosition(){return this.#C===null}get commentButtonPosition(){return this.#v}get commentButtonWidth(){return this.#g.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[n,i]=this.#C||this.commentButtonPosition.map(u=>u/100),r=this.parentBoundingClientRect,{x:s,y:a,width:o,height:l}=r;this.#e.showDialog(null,this,s+n*o,a+i*l,{...e,parentDimensions:r})}render(){if(this.#m)return;const e=this.#m=document.createElement("div");if(e.className="popup",this.#a){const i=e.style.outlineColor=Ge.makeHexColor(...this.#a);e.style.backgroundColor=`color-mix(in srgb, ${i} 30%, white)`}const n=document.createElement("span");if(n.className="header",this.#x?.str){const i=document.createElement("span");i.className="title",n.append(i),{dir:i.dir,str:i.textContent}=this.#x}if(e.append(n),this.#c){const i=document.createElement("time");i.className="popupDate",i.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),i.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),i.dateTime=this.#c.toISOString(),n.append(i)}uz({html:this.#O||this.#o.str,dir:this.#o?.dir,className:"popupContent"},e),this.#r.append(e)}get#O(){const e=this.#E,n=this.#o;return e?.str&&(!n?.str||n.str===e.str)&&this.#E.html||null}get#F(){return this.#O?.attributes?.style?.fontSize||0}get#I(){return this.#O?.attributes?.style?.color||null}#k(e){const n=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:n}]}},r={style:{color:this.#I,fontSize:this.#F?`calc(${this.#F}px * var(--total-scale-factor))`:""}};for(const s of e.split(`
`))n.push({name:"span",value:s,attributes:r});return i}#j(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#f)&&this.#S()}updateEdited({rect:e,popup:n,deleted:i}){if(this.#e){i?(this.remove(),this.#A=null):n&&(n.deleted?this.remove():(this.#B(),this.#A=n.text)),e&&(this.#v=null,this.#D(),this.#M());return}if(i||n?.deleted){this.remove();return}this.#_(),this.#w||={contentsObj:this.#o,richText:this.#E},e&&(this.#u=null),n&&n.text&&(this.#E=this.#k(n.text),this.#c=SD.toDateObject(n.date),this.#o=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#w&&({contentsObj:this.#o,richText:this.#E}=this.#w,this.#w=null,this.#m?.remove(),this.#m=null,this.#u=null)}remove(){if(this.#p?.abort(),this.#p=null,this.#m?.remove(),this.#m=null,this.#R=!1,this.#f=!1,this.#g?.remove(),this.#g=null,this.trigger)for(const e of this.trigger)e.classList.remove("popupTriggerArea")}#T(){if(this.#u!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:i,pageX:r,pageY:s}}}=this.#d;let a=!!this.#h,o=a?this.#h:this.#y;for(const w of this.#l)if(!o||Ge.intersect(w.data.rect,o)!==null){o=w.data.rect,a=!0;break}const l=Ge.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),h=a?o[2]-o[0]+5:0,g=l[0]+h,v=l[1];this.#u=[100*(g-r)/n,100*(v-s)/i];const{style:y}=this.#r;y.left=`${this.#u[0]}%`,y.top=`${this.#u[1]}%`}#S(){if(this.#e){this.#e.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#L(),this.#r.addEventListener("click",this.#s),this.#r.addEventListener("keydown",this.#t)):(this.#H(),this.#r.removeEventListener("click",this.#s),this.#r.removeEventListener("keydown",this.#t))}#L(){this.#m||this.render(),this.isVisible?this.#f&&this.#r.classList.add("focused"):(this.#T(),this.#r.hidden=!1,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)+1e3)}#H(){this.#r.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#r.hidden=!0,this.#r.style.zIndex=parseInt(this.#r.style.zIndex)-1e3)}forceHide(){this.#R=this.isVisible,this.#R&&(this.#r.hidden=!0)}maybeShow(){this.#e||(this.#_(),this.#R&&(this.#m||this.#L(),this.#R=!1,this.#r.hidden=!1))}get isVisible(){return this.#e?!1:this.#r.hidden===!1}}class kz extends hi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=pt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=this.contentElement=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const n of this.textContent){const i=document.createElement("span");i.textContent=n,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class Y0e extends hi{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:e,width:n,height:i}=this,r=this.svgFactory.create(n,i,!0),s=this.#e=this.svgFactory.createElement("svg:line");return s.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),s.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),s.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),s.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),s.setAttribute("stroke-width",e.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),r.append(s),this.container.append(r),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class X0e extends hi{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:e,width:n,height:i}=this,r=this.svgFactory.create(n,i,!0),s=e.borderStyle.width,a=this.#e=this.svgFactory.createElement("svg:rect");return a.setAttribute("x",s/2),a.setAttribute("y",s/2),a.setAttribute("width",n-s),a.setAttribute("height",i-s),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class $0e extends hi{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:e,width:n,height:i}=this,r=this.svgFactory.create(n,i,!0),s=e.borderStyle.width,a=this.#e=this.svgFactory.createElement("svg:ellipse");return a.setAttribute("cx",n/2),a.setAttribute("cy",i/2),a.setAttribute("rx",n/2-s/2),a.setAttribute("ry",i/2-s/2),a.setAttribute("stroke-width",s||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Nz extends hi{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:i,popupRef:r},width:s,height:a}=this;if(!n)return this.container;const o=this.svgFactory.create(s,a,!0);let l=[];for(let h=0,g=n.length;h<g;h+=2){const v=n[h]-e[0],y=e[3]-n[h+1];l.push(`${v},${y}`)}l=l.join(" ");const u=this.#e=this.svgFactory.createElement(this.svgElementName);return u.setAttribute("points",l),u.setAttribute("stroke-width",i.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),o.append(u),this.container.append(o),!r&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Z0e extends Nz{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Q0e extends hi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container}}class G3 extends hi{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?pt.HIGHLIGHT:pt.INK}#i(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:i,borderStyle:r,popupRef:s}}=this,{transform:a,width:o,height:l}=this.#i(n,e),u=this.svgFactory.create(o,l,!0),h=this.#e=this.svgFactory.createElement("svg:g");u.append(h),h.setAttribute("stroke-width",r.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",a);for(let g=0,v=i.length;g<v;g++){const y=this.svgFactory.createElement(this.svgElementName);this.#t.push(y),y.setAttribute("points",i[g].join(",")),h.append(y)}return!s&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.append(u),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:i,rect:r}=e,s=this.#e;if(n>=0&&s.setAttribute("stroke-width",n||1),i)for(let a=0,o=this.#t.length;a<o;a++)this.#t[a].setAttribute("points",i[a].join(","));if(r){const{transform:a,width:o,height:l}=this.#i(this.data.rotation,r);s.parentElement.setAttribute("viewBox",`0 0 ${o} ${l}`),s.setAttribute("transform",a)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Bz extends hi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=pt.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class J0e extends hi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("underlineAnnotation"),e){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class eye extends hi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("squigglyAnnotation"),e){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class tye extends hi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:n}}=this;if(!n&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this.container.classList.add("strikeoutAnnotation"),e){const i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class Iz extends hi{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=pt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&(this.hasOwnCommentButton=!0,this._createPopup()),this._editOnDoubleClick(),this.container}}class nye extends hi{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:n}=this.data;this.filename=n.filename,this.content=n.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let i;n.hasAppearance||n.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#t.bind(this)),this.#e=i;const{isMac:r}=Ji.platform;return e.addEventListener("keydown",s=>{s.key==="Enter"&&(r?s.metaKey:s.ctrlKey)&&this.#t()}),!n.popupRef&&this.hasPopupData?(this.hasOwnCommentButton=!0,this._createPopup()):i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class z3{#e=null;#t=null;#i=null;#n=new Map;#s=null;#a=null;#r=[];#o=!1;constructor({div:e,accessibilityManager:n,annotationCanvasMap:i,annotationEditorUIManager:r,page:s,viewport:a,structTreeLayer:o,commentManager:l,linkService:u,annotationStorage:h}){this.div=e,this.#e=n,this.#t=i,this.#s=o||null,this.#a=u||null,this.#i=h||new F3,this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=l||null}hasEditableAnnotations(){return this.#n.size>0}async render(e){const{annotations:n}=e,i=this.div;xf(i,this.viewport);const r=new Map,s=[],a={data:null,layer:i,linkService:this.#a,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new RS,annotationStorage:this.#i,enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of n){if(o.noHTML)continue;const l=o.annotationType===Hi.POPUP;if(l){const g=r.get(o.id);if(!g)continue;if(!this._commentManager){s.push(o);continue}a.elements=g}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;a.data=o;const u=bT.create(a);if(!u.isRenderable)continue;if(!l&&(this.#r.push(u),o.popupRef)){const g=r.get(o.popupRef);g?g.push(u):r.set(o.popupRef,[u])}const h=u.render();o.hidden&&(h.style.visibility="hidden"),u._isEditable&&(this.#n.set(u.data.id,u),this._annotationEditorUIManager?.renderAnnotationElement(u))}await this.#c();for(const o of s){const l=a.elements=r.get(o.id);a.data=o;const u=bT.create(a);if(!u.isRenderable)continue;const h=u.render();u.contentElement.id=`${Ep}${o.id}`,o.hidden&&(h.style.visibility="hidden"),l.at(-1).container.after(h)}this.#l()}async#c(){if(this.#r.length===0)return;this.div.replaceChildren();const e=[];if(!this.#o){this.#o=!0;for(const{contentElement:i,data:{id:r}}of this.#r){const s=i.id=`${Ep}${r}`;e.push(this.#s?.getAriaAttributes(s).then(a=>{if(a)for(const[o,l]of a)i.setAttribute(o,l)}))}}this.#r.sort(({data:{rect:[i,r,s,a]}},{data:{rect:[o,l,u,h]}})=>{if(i===s&&r===a)return 1;if(o===u&&l===h)return-1;const g=a,v=r,y=(r+a)/2,w=h,S=l,x=(l+h)/2;if(y>=w&&x<=v)return-1;if(x>=g&&y<=S)return 1;const T=(i+s)/2,_=(o+u)/2;return T-_});const n=document.createDocumentFragment();for(const i of this.#r)n.append(i.container),this._commentManager?(i.extraPopupElement?.popup||i.popup)?.renderCommentButton():i.extraPopupElement&&n.append(i.extraPopupElement.render());if(this.div.append(n),await Promise.all(e),this.#e)for(const i of this.#r)this.#e.addPointerInTextLayer(i.contentElement,!1)}async addLinkAnnotations(e){const n={data:null,layer:this.div,linkService:this.#a,svgFactory:new RS,parent:this};for(const i of e){i.borderStyle||=z3._defaultBorderStyle,n.data=i;const r=bT.create(n);r.isRenderable&&(r.render(),r.contentElement.id=`${Ep}${i.id}`,this.#r.push(r))}await this.#c()}update({viewport:e}){const n=this.div;this.viewport=e,xf(n,{rotation:e.rotation}),this.#l(),n.hidden=!1}#l(){if(!this.#t)return;const e=this.div;for(const[n,i]of this.#t){const r=e.querySelector(`[data-annotation-id="${n}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:s}=r;s?s.nodeName==="CANVAS"?s.replaceWith(i):s.classList.contains("annotationContent")?s.after(i):s.before(i):r.append(i);const a=this.#n.get(n);a&&(a._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(n,r.id,i),a._hasNoCanvas=!1):a.canvas=i)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}addFakeAnnotation(e){const{div:n}=this,{id:i,rotation:r}=e,s=new G0e({data:{id:i,rect:e.getPDFRect(),rotation:r},editor:e,layer:n,parent:this,enableComment:!!this._commentManager,linkService:this.#a,annotationStorage:this.#i});return s.render(),s.contentElement.id=`${Ep}${i}`,s.createOrUpdatePopup(),this.#r.push(s),s}removeAnnotation(e){const n=this.#r.findIndex(r=>r.data.id===e);if(n<0)return;const[i]=this.#r.splice(n,1);this.#e?.removePointerInTextLayer(i.contentElement)}updateFakeAnnotations(e){if(e.length!==0){for(const n of e)n.updateFakeAnnotationElement(this);this.#c()}}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}static get _defaultBorderStyle(){return ut(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:pp.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const q1=/\r\n?|\n/g;class dr extends Ze{#e="";#t=`${this.id}-editor`;#i=null;#n;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=dr.prototype,n=s=>s.isEmpty(),i=Lh.TRANSLATE_SMALL,r=Lh.TRANSLATE_BIG;return ut(this,"_keyboardManager",new dC([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:n}]]))}static _type="freetext";static _editorType=pt.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.color=e.color||dr._defaultColor||Ze._defaultLineColor,this.#n=e.fontSize||dr._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert"),this.canAddComment=!1}static initialize(e,n){Ze.initialize(e,n);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case zt.FREETEXT_SIZE:dr._defaultFontSize=n;break;case zt.FREETEXT_COLOR:dr._defaultColor=n;break}}updateParams(e,n){switch(e){case zt.FREETEXT_SIZE:this.#s(n);break;case zt.FREETEXT_COLOR:this.#a(n);break}}static get defaultPropertiesToUpdate(){return[[zt.FREETEXT_SIZE,dr._defaultFontSize],[zt.FREETEXT_COLOR,dr._defaultColor||Ze._defaultLineColor]]}get propertiesToUpdate(){return[[zt.FREETEXT_SIZE,this.#n],[zt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new Ty(this),[["colorPicker",this._colorPicker]]}get colorType(){return zt.FREETEXT_COLOR}#s(e){const n=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-this.#n)*this.parentScale),this.#n=r,this.#o()},i=this.#n;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:zt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#a(e){const n=r=>{this.color=r,this.onUpdatedColor()},i=this.color;this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:zt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-dr._internalPadding*e,-(dr._internalPadding+this.#n)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const e=this._uiManager.combinedSignal(this.#i);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#t),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#r(){const e=[];this.editorDiv.normalize();let n=null;for(const i of this.editorDiv.childNodes)n?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(e.push(dr.#c(i)),n=i);return e.join(`
`)}#o(){const[e,n]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:s}=this,a=s.style.display,o=s.classList.contains("hidden");s.classList.remove("hidden"),s.style.display="hidden",r.div.append(this.div),i=s.getBoundingClientRect(),s.remove(),s.style.display=a,s.classList.toggle("hidden",o)}this.rotation%180===this.parentRotation%180?(this.width=i.width/e,this.height=i.height/n):(this.width=i.height/e,this.height=i.width/n),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#e,n=this.#e=this.#r().trimEnd();if(e===n)return;const i=r=>{if(this.#e=r,!r){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{i(n)},undo:()=>{i(e)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){dr._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,n;(this._isCopy||this.annotationElementId)&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#t),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,i.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,s]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[o,l]=this.getInitialTranslation();[o,l]=this.pageTranslationToScreen(o,l);const[u,h]=this.pageDimensions,[g,v]=this.pageTranslation;let y,w;switch(this.rotation){case 0:y=e+(a[0]-g)/u,w=n+this.height-(a[1]-v)/h;break;case 90:y=e+(a[0]-g)/u,w=n-(a[1]-v)/h,[o,l]=[l,-o];break;case 180:y=e-this.width+(a[0]-g)/u,w=n-(a[1]-v)/h,[o,l]=[-o,-l];break;case 270:y=e+(a[0]-g-this.height*h)/u,w=n+(a[1]-v-this.width*u)/h,[o,l]=[-l,o];break}this.setAt(y*r,w*s,o,l)}else this._moveAfterPaste(e,n);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(q1,"")}editorDivPaste(e){const n=e.clipboardData||window.clipboardData,{types:i}=n;if(i.length===1&&i[0]==="text/plain")return;e.preventDefault();const r=dr.#h(n.getData("text")||"").replaceAll(q1,`
`);if(!r)return;const s=window.getSelection();if(!s.rangeCount)return;this.editorDiv.normalize(),s.deleteFromDocument();const a=s.getRangeAt(0);if(!r.includes(`
`)){a.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),s.collapseToStart();return}const{startContainer:o,startOffset:l}=a,u=[],h=[];if(o.nodeType===Node.TEXT_NODE){const y=o.parentElement;if(h.push(o.nodeValue.slice(l).replaceAll(q1,"")),y!==this.editorDiv){let w=u;for(const S of this.editorDiv.childNodes){if(S===y){w=h;continue}w.push(dr.#c(S))}}u.push(o.nodeValue.slice(0,l).replaceAll(q1,""))}else if(o===this.editorDiv){let y=u,w=0;for(const S of this.editorDiv.childNodes)w++===l&&(y=h),y.push(dr.#c(S))}this.#e=`${u.join(`
`)}${r}${h.join(`
`)}`,this.#l();const g=new Range;let v=Math.sumPrecise(u.map(y=>y.length));for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const w=y.nodeValue.length;if(v<=w){g.setStart(y,v),g.setEnd(y,v);break}v-=w}s.removeAllRanges(),s.addRange(g)}#l(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const e of this.#e.split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}}#d(){return this.#e.replaceAll(""," ")}static#h(e){return e.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const e=dr._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,n,i){let r=null;if(e instanceof kz){const{data:{defaultAppearanceData:{fontSize:a,fontColor:o},rect:l,rotation:u,id:h,popupRef:g,richText:v,contentsObj:y,creationDate:w,modificationDate:S},textContent:x,textPosition:T,parent:{page:{pageNumber:_}}}=e;if(!x||x.length===0)return null;r=e={annotationType:pt.FREETEXT,color:Array.from(o),fontSize:a,value:x.join(`
`),position:T,pageIndex:_-1,rect:l.slice(0),rotation:u,annotationElementId:h,id:h,deleted:!1,popupRef:g,comment:y?.str||null,richText:v,creationDate:w,modificationDate:S}}const s=await super.deserialize(e,n,i);return s.#n=e.fontSize,s.color=Ge.makeHexColor(...e.color),s.#e=dr.#h(e.value),s._initialData=r,e.comment&&s.setCommentData(e),s}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Ze._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),i=Object.assign(super.serialize(e),{color:n,fontSize:this.#n,value:this.#d()});return this.addComment(i),e?(i.isCopy=!0,i):this.annotationElementId&&!this.#f(i)?null:(i.id=this.annotationElementId,i)}#f(e){const{value:n,fontSize:i,color:r,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==n||e.fontSize!==i||e.color.some((a,o)=>a!==r[o])||e.pageIndex!==s}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(!n)return null;const{style:i}=n;i.fontSize=`calc(${this.#n}px * var(--total-scale-factor))`,i.color=this.color,n.replaceChildren();for(const r of this.#e.split(`
`)){const s=document.createElement("div");s.append(r?document.createTextNode(r):document.createElement("br")),n.append(s)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#e}}),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class Ve{static PRECISION=1e-4;toSVGPath(){on("Abstract method `toSVGPath` must be implemented.")}get box(){on("Abstract getter `box` must be implemented.")}serialize(e,n){on("Abstract method `serialize` must be implemented.")}static _rescale(e,n,i,r,s,a){a||=new Float32Array(e.length);for(let o=0,l=e.length;o<l;o+=2)a[o]=n+e[o]*r,a[o+1]=i+e[o+1]*s;return a}static _rescaleAndSwap(e,n,i,r,s,a){a||=new Float32Array(e.length);for(let o=0,l=e.length;o<l;o+=2)a[o]=n+e[o+1]*r,a[o+1]=i+e[o]*s;return a}static _translate(e,n,i,r){r||=new Float32Array(e.length);for(let s=0,a=e.length;s<a;s+=2)r[s]=n+e[s],r[s+1]=i+e[s+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,n,i,r,s){switch(s){case 90:return[1-n/i,e/r];case 180:return[1-e/i,1-n/r];case 270:return[n/i,1-e/r];default:return[e/i,n/r]}}static _normalizePagePoint(e,n,i){switch(i){case 90:return[1-n,e];case 180:return[1-e,1-n];case 270:return[n,1-e];default:return[e,n]}}static createBezierPoints(e,n,i,r,s,a){return[(e+5*i)/6,(n+5*r)/6,(5*i+s)/6,(5*r+a)/6,(i+s)/2,(r+a)/2]}}class ef{#e;#t=[];#i;#n;#s=[];#a=new Float32Array(18);#r;#o;#c;#l;#d;#h;#f=[];static#m=8;static#p=2;static#u=ef.#m+ef.#p;constructor({x:e,y:n},i,r,s,a,o=0){this.#e=i,this.#h=s*r,this.#n=a,this.#a.set([NaN,NaN,NaN,NaN,e,n],6),this.#i=o,this.#l=ef.#m*r,this.#c=ef.#u*r,this.#d=r,this.#f.push(e,n)}isEmpty(){return isNaN(this.#a[8])}#g(){const e=this.#a.subarray(4,6),n=this.#a.subarray(16,18),[i,r,s,a]=this.#e;return[(this.#r+(e[0]-n[0])/2-i)/s,(this.#o+(e[1]-n[1])/2-r)/a,(this.#r+(n[0]-e[0])/2-i)/s,(this.#o+(n[1]-e[1])/2-r)/a]}add({x:e,y:n}){this.#r=e,this.#o=n;const[i,r,s,a]=this.#e;let[o,l,u,h]=this.#a.subarray(8,12);const g=e-u,v=n-h,y=Math.hypot(g,v);if(y<this.#c)return!1;const w=y-this.#l,S=w/y,x=S*g,T=S*v;let _=o,M=l;o=u,l=h,u+=x,h+=T,this.#f?.push(e,n);const F=-T/w,L=x/w,k=F*this.#h,B=L*this.#h;return this.#a.set(this.#a.subarray(2,8),0),this.#a.set([u+k,h+B],4),this.#a.set(this.#a.subarray(14,18),12),this.#a.set([u-k,h-B],16),isNaN(this.#a[6])?(this.#s.length===0&&(this.#a.set([o+k,l+B],2),this.#s.push(NaN,NaN,NaN,NaN,(o+k-i)/s,(l+B-r)/a),this.#a.set([o-k,l-B],14),this.#t.push(NaN,NaN,NaN,NaN,(o-k-i)/s,(l-B-r)/a)),this.#a.set([_,M,o,l,u,h],6),!this.isEmpty()):(this.#a.set([_,M,o,l,u,h],6),Math.abs(Math.atan2(M-l,_-o)-Math.atan2(T,x))<Math.PI/2?([o,l,u,h]=this.#a.subarray(2,6),this.#s.push(NaN,NaN,NaN,NaN,((o+u)/2-i)/s,((l+h)/2-r)/a),[o,l,_,M]=this.#a.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((_+o)/2-i)/s,((M+l)/2-r)/a),!0):([_,M,o,l,u,h]=this.#a.subarray(0,6),this.#s.push(((_+5*o)/6-i)/s,((M+5*l)/6-r)/a,((5*o+u)/6-i)/s,((5*l+h)/6-r)/a,((o+u)/2-i)/s,((l+h)/2-r)/a),[u,h,o,l,_,M]=this.#a.subarray(12,18),this.#t.push(((_+5*o)/6-i)/s,((M+5*l)/6-r)/a,((5*o+u)/6-i)/s,((5*l+h)/6-r)/a,((o+u)/2-i)/s,((l+h)/2-r)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#s,n=this.#t;if(isNaN(this.#a[6])&&!this.isEmpty())return this.#v();const i=[];i.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?i.push(`L${e[r+4]} ${e[r+5]}`):i.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);this.#y(i);for(let r=n.length-6;r>=6;r-=6)isNaN(n[r])?i.push(`L${n[r+4]} ${n[r+5]}`):i.push(`C${n[r]} ${n[r+1]} ${n[r+2]} ${n[r+3]} ${n[r+4]} ${n[r+5]}`);return this.#C(i),i.join(" ")}#v(){const[e,n,i,r]=this.#e,[s,a,o,l]=this.#g();return`M${(this.#a[2]-e)/i} ${(this.#a[3]-n)/r} L${(this.#a[4]-e)/i} ${(this.#a[5]-n)/r} L${s} ${a} L${o} ${l} L${(this.#a[16]-e)/i} ${(this.#a[17]-n)/r} L${(this.#a[14]-e)/i} ${(this.#a[15]-n)/r} Z`}#C(e){const n=this.#t;e.push(`L${n[4]} ${n[5]} Z`)}#y(e){const[n,i,r,s]=this.#e,a=this.#a.subarray(4,6),o=this.#a.subarray(16,18),[l,u,h,g]=this.#g();e.push(`L${(a[0]-n)/r} ${(a[1]-i)/s} L${l} ${u} L${h} ${g} L${(o[0]-n)/r} ${(o[1]-i)/s}`)}newFreeDrawOutline(e,n,i,r,s,a){return new Hz(e,n,i,r,s,a)}getOutlines(){const e=this.#s,n=this.#t,i=this.#a,[r,s,a,o]=this.#e,l=new Float32Array((this.#f?.length??0)+2);for(let g=0,v=l.length-2;g<v;g+=2)l[g]=(this.#f[g]-r)/a,l[g+1]=(this.#f[g+1]-s)/o;if(l[l.length-2]=(this.#r-r)/a,l[l.length-1]=(this.#o-s)/o,isNaN(i[6])&&!this.isEmpty())return this.#E(l);const u=new Float32Array(this.#s.length+24+this.#t.length);let h=e.length;for(let g=0;g<h;g+=2){if(isNaN(e[g])){u[g]=u[g+1]=NaN;continue}u[g]=e[g],u[g+1]=e[g+1]}h=this.#w(u,h);for(let g=n.length-6;g>=6;g-=6)for(let v=0;v<6;v+=2){if(isNaN(n[g+v])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=n[g+v],u[h+1]=n[g+v+1],h+=2}return this.#x(u,h),this.newFreeDrawOutline(u,l,this.#e,this.#d,this.#i,this.#n)}#E(e){const n=this.#a,[i,r,s,a]=this.#e,[o,l,u,h]=this.#g(),g=new Float32Array(36);return g.set([NaN,NaN,NaN,NaN,(n[2]-i)/s,(n[3]-r)/a,NaN,NaN,NaN,NaN,(n[4]-i)/s,(n[5]-r)/a,NaN,NaN,NaN,NaN,o,l,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(n[16]-i)/s,(n[17]-r)/a,NaN,NaN,NaN,NaN,(n[14]-i)/s,(n[15]-r)/a],0),this.newFreeDrawOutline(g,e,this.#e,this.#d,this.#i,this.#n)}#x(e,n){const i=this.#t;return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],n),n+=6}#w(e,n){const i=this.#a.subarray(4,6),r=this.#a.subarray(16,18),[s,a,o,l]=this.#e,[u,h,g,v]=this.#g();return e.set([NaN,NaN,NaN,NaN,(i[0]-s)/o,(i[1]-a)/l,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,g,v,NaN,NaN,NaN,NaN,(r[0]-s)/o,(r[1]-a)/l],n),n+=24}}class Hz extends Ve{#e;#t=new Float32Array(4);#i;#n;#s;#a;#r;constructor(e,n,i,r,s,a){super(),this.#r=e,this.#s=n,this.#e=i,this.#a=r,this.#i=s,this.#n=a,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(a);const[o,l,u,h]=this.#t;for(let g=0,v=e.length;g<v;g+=2)e[g]=(e[g]-o)/u,e[g+1]=(e[g+1]-l)/h;for(let g=0,v=n.length;g<v;g+=2)n[g]=(n[g]-o)/u,n[g+1]=(n[g+1]-l)/h}toSVGPath(){const e=[`M${this.#r[4]} ${this.#r[5]}`];for(let n=6,i=this.#r.length;n<i;n+=6){if(isNaN(this.#r[n])){e.push(`L${this.#r[n+4]} ${this.#r[n+5]}`);continue}e.push(`C${this.#r[n]} ${this.#r[n+1]} ${this.#r[n+2]} ${this.#r[n+3]} ${this.#r[n+4]} ${this.#r[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,i,r],s){const a=i-e,o=r-n;let l,u;switch(s){case 0:l=Ve._rescale(this.#r,e,r,a,-o),u=Ve._rescale(this.#s,e,r,a,-o);break;case 90:l=Ve._rescaleAndSwap(this.#r,e,n,a,o),u=Ve._rescaleAndSwap(this.#s,e,n,a,o);break;case 180:l=Ve._rescale(this.#r,i,n,-a,o),u=Ve._rescale(this.#s,i,n,-a,o);break;case 270:l=Ve._rescaleAndSwap(this.#r,i,r,-a,-o),u=Ve._rescaleAndSwap(this.#s,i,r,-a,-o);break}return{outline:Array.from(l),points:[Array.from(u)]}}#o(e){const n=this.#r;let i=n[4],r=n[5];const s=[i,r,i,r];let a=i,o=r,l=i,u=r;const h=e?Math.max:Math.min,g=new Float32Array(4);for(let y=6,w=n.length;y<w;y+=6){const S=n[y+4],x=n[y+5];isNaN(n[y])?(Ge.pointBoundingBox(S,x,s),o>x?(a=S,o=x):o===x&&(a=h(a,S)),u<x?(l=S,u=x):u===x&&(l=h(l,S))):(g[0]=g[1]=1/0,g[2]=g[3]=-1/0,Ge.bezierBoundingBox(i,r,...n.slice(y,y+6),g),Ge.rectBoundingBox(g[0],g[1],g[2],g[3],s),o>g[1]?(a=g[0],o=g[1]):o===g[1]&&(a=h(a,g[0])),u<g[3]?(l=g[2],u=g[3]):u===g[3]&&(l=h(l,g[2]))),i=S,r=x}const v=this.#t;v[0]=s[0]-this.#i,v[1]=s[1]-this.#i,v[2]=s[2]-s[0]+2*this.#i,v[3]=s[3]-s[1]+2*this.#i,this.firstPoint=[a,o],this.lastPoint=[l,u]}get box(){return this.#t}newOutliner(e,n,i,r,s,a=0){return new ef(e,n,i,r,s,a)}getNewOutline(e,n){const[i,r,s,a]=this.#t,[o,l,u,h]=this.#e,g=s*u,v=a*h,y=i*u+o,w=r*h+l,S=this.newOutliner({x:this.#s[0]*g+y,y:this.#s[1]*v+w},this.#e,this.#a,e,this.#n,n??this.#i);for(let x=2;x<this.#s.length;x+=2)S.add({x:this.#s[x]*g+y,y:this.#s[x+1]*v+w});return S.getOutlines()}}class _D{#e;#t;#i;#n=[];#s=[];constructor(e,n=0,i=0,r=!0){const s=[1/0,1/0,-1/0,-1/0],a=10**-4;for(const{x:S,y:x,width:T,height:_}of e){const M=Math.floor((S-n)/a)*a,F=Math.ceil((S+T+n)/a)*a,L=Math.floor((x-n)/a)*a,k=Math.ceil((x+_+n)/a)*a,B=[M,L,k,!0],H=[F,L,k,!1];this.#n.push(B,H),Ge.rectBoundingBox(M,L,F,k,s)}const o=s[2]-s[0]+2*i,l=s[3]-s[1]+2*i,u=s[0]-i,h=s[1]-i;let g=r?-1/0:1/0,v=1/0;const y=this.#n.at(r?-1:-2),w=[y[0],y[2]];for(const S of this.#n){const[x,T,_,M]=S;!M&&r?T<v?(v=T,g=x):T===v&&(g=Math.max(g,x)):M&&!r&&(T<v?(v=T,g=x):T===v&&(g=Math.min(g,x))),S[0]=(x-u)/o,S[1]=(T-h)/l,S[2]=(_-h)/l}this.#e=new Float32Array([u,h,o,l]),this.#t=[g,v],this.#i=w}getOutlines(){this.#n.sort((n,i)=>n[0]-i[0]||n[1]-i[1]||n[2]-i[2]);const e=[];for(const n of this.#n)n[3]?(e.push(...this.#l(n)),this.#o(n)):(this.#c(n),e.push(...this.#l(n)));return this.#a(e)}#a(e){const n=[],i=new Set;for(const a of e){const[o,l,u]=a;n.push([o,l,a],[o,u,a])}n.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=n.length;a<o;a+=2){const l=n[a][2],u=n[a+1][2];l.push(u),u.push(l),i.add(l),i.add(u)}const r=[];let s;for(;i.size>0;){const a=i.values().next().value;let[o,l,u,h,g]=a;i.delete(a);let v=o,y=l;for(s=[o,u],r.push(s);;){let w;if(i.has(h))w=h;else if(i.has(g))w=g;else break;i.delete(w),[o,l,u,h,g]=w,v!==o&&(s.push(v,y,o,y===l?l:u),v=o),y=y===l?u:l}s.push(v,y)}return new iye(r,this.#e,this.#t,this.#i)}#r(e){const n=this.#s;let i=0,r=n.length-1;for(;i<=r;){const s=i+r>>1,a=n[s][0];if(a===e)return s;a<e?i=s+1:r=s-1}return r+1}#o([,e,n]){const i=this.#r(e);this.#s.splice(i,0,[e,n])}#c([,e,n]){const i=this.#r(e);for(let r=i;r<this.#s.length;r++){const[s,a]=this.#s[r];if(s!==e)break;if(s===e&&a===n){this.#s.splice(r,1);return}}for(let r=i-1;r>=0;r--){const[s,a]=this.#s[r];if(s!==e)break;if(s===e&&a===n){this.#s.splice(r,1);return}}}#l(e){const[n,i,r]=e,s=[[n,i,r]],a=this.#r(r);for(let o=0;o<a;o++){const[l,u]=this.#s[o];for(let h=0,g=s.length;h<g;h++){const[,v,y]=s[h];if(!(u<=v||y<=l)){if(v>=l){if(y>u)s[h][1]=u;else{if(g===1)return[];s.splice(h,1),h--,g--}continue}s[h][2]=l,y>u&&s.push([n,u,y])}}}return s}}class iye extends Ve{#e;#t;constructor(e,n,i,r){super(),this.#t=e,this.#e=n,this.firstPoint=i,this.lastPoint=r}toSVGPath(){const e=[];for(const n of this.#t){let[i,r]=n;e.push(`M${i} ${r}`);for(let s=2;s<n.length;s+=2){const a=n[s],o=n[s+1];a===i?(e.push(`V${o}`),r=o):o===r&&(e.push(`H${a}`),i=a)}e.push("Z")}return e.join(" ")}serialize([e,n,i,r],s){const a=[],o=i-e,l=r-n;for(const u of this.#t){const h=new Array(u.length);for(let g=0;g<u.length;g+=2)h[g]=e+u[g]*o,h[g+1]=r-u[g+1]*l;a.push(h)}return a}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class PD extends ef{newFreeDrawOutline(e,n,i,r,s,a){return new rye(e,n,i,r,s,a)}}class rye extends Hz{newOutliner(e,n,i,r,s,a=0){return new PD(e,n,i,r,s,a)}}class Ri extends Ze{#e=null;#t=0;#i;#n=null;#s=null;#a=null;#r=null;#o=0;#c=null;#l=null;#d=null;#h=!1;#f=null;#m=null;#p=null;#u="";#g;#v="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=pt.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=Ri.prototype;return ut(this,"_keyboardManager",new dC([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||Ri._defaultColor,this.#g=e.thickness||Ri._defaultThickness,this.opacity=e.opacity||Ri._defaultOpacity,this.#i=e.boxes||null,this.#v=e.methodOfCreation||"",this.#u=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#h=!0,this.#y(e),this.#b()):this.#i&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#r=e.focusNode,this.#o=e.focusOffset,this.#C(),this.#b(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#g,methodOfCreation:this.#v}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#C(){const e=new _D(this.#i,.001);this.#l=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const n=new _D(this.#i,.0025,.001,this._uiManager.direction==="ltr");this.#a=n.getOutlines();const{firstPoint:i}=this.#l;this.#f=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height];const{lastPoint:r}=this.#a;this.#m=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#y({highlightOutlines:e,highlightId:n,clipPathId:i}){this.#l=e;const r=1.5;if(this.#a=e.getNewOutline(this.#g/2+r,.0025),n>=0)this.#d=n,this.#n=i,this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},!0);else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:Ri.#A(this.#l.box,(g-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:Ri.#A(this.#a.box,g),path:{d:this.#a.toSVGPath()}})}const[s,a,o,l]=e.box;switch(this.rotation){case 0:this.x=s,this.y=a,this.width=o,this.height=l;break;case 90:{const[g,v]=this.parentDimensions;this.x=a,this.y=1-s,this.width=o*v/g,this.height=l*g/v;break}case 180:this.x=1-s,this.y=1-a,this.width=o,this.height=l;break;case 270:{const[g,v]=this.parentDimensions;this.x=1-a,this.y=s,this.width=o*v/g,this.height=l*g/v;break}}const{firstPoint:u}=e;this.#f=[(u[0]-s)/o,(u[1]-a)/l];const{lastPoint:h}=this.#a;this.#m=[(h[0]-s)/o,(h[1]-a)/l]}static initialize(e,n){Ze.initialize(e,n),Ri._defaultColor||=n.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,n){switch(e){case zt.HIGHLIGHT_COLOR:Ri._defaultColor=n;break;case zt.HIGHLIGHT_THICKNESS:Ri._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return this.#m}get commentButtonPosition(){return this.#f}updateParams(e,n){switch(e){case zt.HIGHLIGHT_COLOR:this.#E(n);break;case zt.HIGHLIGHT_THICKNESS:this.#x(n);break}}static get defaultPropertiesToUpdate(){return[[zt.HIGHLIGHT_COLOR,Ri._defaultColor],[zt.HIGHLIGHT_THICKNESS,Ri._defaultThickness]]}get propertiesToUpdate(){return[[zt.HIGHLIGHT_COLOR,this.color||Ri._defaultColor],[zt.HIGHLIGHT_THICKNESS,this.#g||Ri._defaultThickness],[zt.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#s?.updateColor(this.color),super.onUpdatedColor()}#E(e){const n=(s,a)=>{this.color=s,this.opacity=a,this.onUpdatedColor()},i=this.color,r=this.opacity;this.addCommands({cmd:n.bind(this,e,Ri._defaultOpacity),undo:n.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:zt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}#x(e){const n=this.#g,i=r=>{this.#g=r,this.#w(r)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:zt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#s=new Ya({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#M())}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,this.#M())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#R(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#b(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let n=!1;this.parent&&!e?this.#R():e&&(this.#b(e),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),n&&this.select()}#w(e){this.#h&&(this.#y({highlightOutlines:this.#l.getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims())}#R(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#b(e=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#n}=e.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#l.toSVGPath()}},!1,!0),this.#p=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#a.box,path:{d:this.#a.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#n))}static#A([e,n,i,r],s){switch(s){case 90:return[1-n-r,e,r,i];case 180:return[1-e-i,1-n-r,i,r];case 270:return[n,1-e-i,r,i]}return[e,n,i,r]}rotate(e){const{drawLayer:n}=this.parent;let i;this.#h?(e=(e-this.rotation+360)%360,i=Ri.#A(this.#l.box,e)):i=Ri.#A([this.x,this.y,this.width,this.height],e),n.updateProperties(this.#d,{bbox:i,root:{"data-main-rotation":e}}),n.updateProperties(this.#p,{bbox:Ri.#A(this.#a.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#u&&(e.setAttribute("aria-label",this.#u),e.setAttribute("role","mark")),this.#h?e.classList.add("free"):this.div.addEventListener("keydown",this.#_.bind(this),{signal:this._uiManager._signal});const n=this.#c=document.createElement("div");return e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=this.#n,this.setDims(),dz(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#_(e){Ri._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#D(!0);break;case 1:case 3:this.#D(!1);break}}#D(e){if(!this.#e)return;const n=window.getSelection();e?n.setPosition(this.#e,this.#t):n.setPosition(this.#r,this.#o)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#h||this.#D(!1))}get _mustFixPosition(){return!this.#h}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!e}}))}#M(){return this.#h?this.rotation:0}#B(){if(this.#h)return null;const[e,n]=this.pageDimensions,[i,r]=this.pageTranslation,s=this.#i,a=new Float32Array(s.length*8);let o=0;for(const{x:l,y:u,width:h,height:g}of s){const v=l*e+i,y=(1-u)*n+r;a[o]=a[o+4]=v,a[o+1]=a[o+3]=y,a[o+2]=a[o+6]=v+h*e,a[o+5]=a[o+7]=y-g*n,o+=8}return a}#O(e){return this.#l.serialize(e,this.#M())}static startHighlighting(e,n,{target:i,x:r,y:s}){const{x:a,y:o,width:l,height:u}=i.getBoundingClientRect(),h=new AbortController,g=e.combinedSignal(h),v=y=>{h.abort(),this.#I(e,y)};window.addEventListener("blur",v,{signal:g}),window.addEventListener("pointerup",v,{signal:g}),window.addEventListener("pointerdown",wi,{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",oo,{signal:g}),i.addEventListener("pointermove",this.#F.bind(this,e),{signal:g}),this._freeHighlight=new PD({x:r,y:s},[a,o,l,u],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#F(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#I(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,n,i){let r=null;if(e instanceof Bz){const{data:{quadPoints:w,rect:S,rotation:x,id:T,color:_,opacity:M,popupRef:F,richText:L,contentsObj:k,creationDate:B,modificationDate:H},parent:{page:{pageNumber:U}}}=e;r=e={annotationType:pt.HIGHLIGHT,color:Array.from(_),opacity:M,quadPoints:w,boxes:null,pageIndex:U-1,rect:S.slice(0),rotation:x,annotationElementId:T,id:T,deleted:!1,popupRef:F,richText:L,comment:k?.str||null,creationDate:B,modificationDate:H}}else if(e instanceof G3){const{data:{inkLists:w,rect:S,rotation:x,id:T,color:_,borderStyle:{rawWidth:M},popupRef:F,richText:L,contentsObj:k,creationDate:B,modificationDate:H},parent:{page:{pageNumber:U}}}=e;r=e={annotationType:pt.HIGHLIGHT,color:Array.from(_),thickness:M,inkLists:w,boxes:null,pageIndex:U-1,rect:S.slice(0),rotation:x,annotationElementId:T,id:T,deleted:!1,popupRef:F,richText:L,comment:k?.str||null,creationDate:B,modificationDate:H}}const{color:s,quadPoints:a,inkLists:o,opacity:l}=e,u=await super.deserialize(e,n,i);u.color=Ge.makeHexColor(...s),u.opacity=l||1,o&&(u.#g=e.thickness),u._initialData=r,e.comment&&u.setCommentData(e);const[h,g]=u.pageDimensions,[v,y]=u.pageTranslation;if(a){const w=u.#i=[];for(let S=0;S<a.length;S+=8)w.push({x:(a[S]-v)/h,y:1-(a[S+1]-y)/g,width:(a[S+2]-a[S])/h,height:(a[S+1]-a[S+5])/g});u.#C(),u.#b(),u.rotate(u.rotation)}else if(o){u.#h=!0;const w=o[0],S={x:w[0]-v,y:g-(w[1]-y)},x=new PD(S,[0,0,h,g],1,u.#g/2,!0,.001);for(let M=0,F=w.length;M<F;M+=2)S.x=w[M]-v,S.y=g-(w[M+1]-y),x.add(S);const{id:T,clipPathId:_}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:u.color,"fill-opacity":u._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:x.toSVGPath()}},!0,!0);u.#y({highlightOutlines:x.getOutlines(),highlightId:T,clipPathId:_}),u.#b(),u.rotate(u.parentRotation)}return u}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=Ze._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),i=super.serialize(e);return Object.assign(i,{color:n,opacity:this.opacity,thickness:this.#g,quadPoints:this.#B(),outlines:this.#O(i.rect)}),this.addComment(i),this.annotationElementId&&!this.#k(i)?null:(i.id=this.annotationElementId,i)}#k(e){const{color:n}=this._initialData;return this.hasEditedComment||e.color.some((i,r)=>i!==n[r])}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class Gz{#e=Object.create(null);updateProperty(e,n){this[e]=n,this.updateSVGProperty(e,n)}updateProperties(e){if(e)for(const[n,i]of Object.entries(e))n.startsWith("_")||this.updateProperty(n,i)}updateSVGProperty(e,n){this.#e[e]=n}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){on("Not implemented")}}class tn extends Ze{#e=null;#t;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#i=null;static#n=null;static#s=null;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(this.#a(e),this.#c())}#a({drawOutlines:e,drawId:n,drawingOptions:i}){this.#e=e,this._drawingOptions||=i,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=this.#r(e,this.parent),this.#h(e.box)}#r(e,n){const{id:i}=n.drawLayer.draw(tn._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return i}static _mergeSVGProperties(e,n){const i=new Set(Object.keys(e));for(const[r,s]of Object.entries(n))i.has(r)?Object.assign(e[r],s):e[r]=s;return e}static getDefaultDrawingOptions(e){on("Not implemented")}static get typesMap(){on("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const i=this.typesMap.get(e);i&&this._defaultDrawingOptions.updateProperty(i,n),this._currentParent&&(tn.#i.updateProperty(i,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const i=this.constructor.typesMap.get(e);i&&this._updateProperty(e,i,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[i,r]of this.typesMap)e.push([i,n[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[i,r]of this.constructor.typesMap)e.push([i,n[r]]);return e}_updateProperty(e,n,i){const r=this._drawingOptions,s=r[n],a=o=>{r.updateProperty(n,o);const l=this.#e.updateProperty(n,o);l&&this.#h(l),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:a.bind(this,i),undo:a.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,tn._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#d()),{bbox:this.#f()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,tn._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#d()),{bbox:this.#f()}))}_onTranslating(e,n){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#f()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,tn._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#d(),this.parentDimensions),{bbox:this.#f()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#o(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#c(),this.#h(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#o()):e&&(this._uiManager.addShouldRescale(this),this.#c(e),n=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),n&&this.select()}#o(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#c(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#r(this.#e,e)}}#l([e,n,i,r]){const{parentDimensions:[s,a],rotation:o}=this;switch(o){case 90:return[n,1-e,i*(a/s),r*(s/a)];case 180:return[1-e,1-n,i,r];case 270:return[1-n,e,i*(a/s),r*(s/a)];default:return[e,n,i,r]}}#d(){const{x:e,y:n,width:i,height:r,parentDimensions:[s,a],rotation:o}=this;switch(o){case 90:return[1-n,e,i*(s/a),r*(a/s)];case 180:return[1-e,1-n,i,r];case 270:return[n,1-e,i*(s/a),r*(a/s)];default:return[e,n,i,r]}}#h(e){[this.x,this.y,this.width,this.height]=this.#l(e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#f(){const{x:e,y:n,width:i,height:r,rotation:s,parentRotation:a,parentDimensions:[o,l]}=this;switch((s*4+a)/90){case 1:return[1-n-r,e,r,i];case 2:return[1-e-i,1-n-r,i,r];case 3:return[n,1-e-i,r,i];case 4:return[e,n-i*(o/l),r*(l/o),i*(o/l)];case 5:return[1-n,e,i*(o/l),r*(l/o)];case 6:return[1-e-r*(l/o),1-n,r*(l/o),i*(o/l)];case 7:return[n-i*(o/l),1-e-r*(l/o),i*(o/l),r*(l/o)];case 8:return[e-i,n-r,i,r];case 9:return[1-n,e-i,r,i];case 10:return[1-e,1-n,i,r];case 11:return[n-r,1-e,r,i];case 12:return[e-r*(l/o),n,r*(l/o),i*(o/l)];case 13:return[1-n-i*(o/l),e-r*(l/o),i*(o/l),r*(l/o)];case 14:return[1-e,1-n-i*(o/l),r*(l/o),i*(o/l)];case 15:return[n,1-e,i*(o/l),r*(l/o)];default:return[e,n,i,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,tn._mergeSVGProperties({bbox:this.#f()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#h(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,n;this._isCopy&&(e=this.x,n=this.y);const i=super.render();i.classList.add("draw");const r=document.createElement("div");return i.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,n),i}static createDrawerInstance(e,n,i,r,s){on("Not implemented")}static startDrawing(e,n,i,r){const{target:s,offsetX:a,offsetY:o,pointerId:l,pointerType:u}=r;if(rn.isInitializedAndDifferentPointerType(u))return;const{viewport:{rotation:h}}=e,{width:g,height:v}=s.getBoundingClientRect(),y=tn.#n=new AbortController,w=e.combinedSignal(y);if(rn.setPointer(u,l),window.addEventListener("pointerup",S=>{rn.isSamePointerIdOrRemove(S.pointerId)&&this._endDraw(S)},{signal:w}),window.addEventListener("pointercancel",S=>{rn.isSamePointerIdOrRemove(S.pointerId)&&this._currentParent.endDrawingSession()},{signal:w}),window.addEventListener("pointerdown",S=>{rn.isSamePointerType(S.pointerType)&&(rn.initializeAndAddPointerId(S.pointerId),tn.#i.isCancellable()&&(tn.#i.removeLastElement(),tn.#i.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",oo,{signal:w}),s.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),s.addEventListener("touchmove",S=>{rn.isSameTimeStamp(S.timeStamp)&&wi(S)},{signal:w}),e.toggleDrawing(),n._editorUndoBar?.hide(),tn.#i){e.drawLayer.updateProperties(this._currentDrawId,tn.#i.startNew(a,o,g,v,h));return}n.updateUIForDefaultProperties(this),tn.#i=this.createDrawerInstance(a,o,g,v,h),tn.#s=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(tn.#s.toSVGProperties(),tn.#i.defaultSVGProperties),!0,!1)}static _drawMove(e){if(rn.isSameTimeStamp(e.timeStamp),!tn.#i)return;const{offsetX:n,offsetY:i,pointerId:r}=e;if(rn.isSamePointerId(r)){if(rn.isUsingMultiplePointers()){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,tn.#i.add(n,i)),rn.setTimeStamp(e.timeStamp),wi(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,tn.#i=null,tn.#s=null,rn.clearTimeStamp()),tn.#n&&(tn.#n.abort(),tn.#n=null,rn.clearPointerIds())}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),e?.target===n.div&&n.drawLayer.updateProperties(this._currentDrawId,tn.#i.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const i=tn.#i,r=this._currentDrawId,s=i.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(r,i.setLastElement(s))},undo:()=>{n.drawLayer.updateProperties(r,i.removeLastElement())},mustExec:!1,type:zt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(zt.DRAW_STEP),!tn.#i.isEmpty()){const{pageDimensions:[i,r],scale:s}=n,a=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:tn.#i.getOutlines(i*s,r*s,s,this._INNER_MARGIN),drawingOptions:tn.#s,mustBeCommitted:!e});return this._cleanup(!0),a}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,i,r,s,a){on("Not implemented")}static async deserialize(e,n,i){const{rawDims:{pageWidth:r,pageHeight:s,pageX:a,pageY:o}}=n.viewport,l=this.deserializeDraw(a,o,r,s,this._INNER_MARGIN,e),u=await super.deserialize(e,n,i);return u.createDrawingOptions(e),u.#a({drawOutlines:l}),u.#c(),u.onScaleChanging(),u.rotate(),u}serializeDraw(e){const[n,i]=this.pageTranslation,[r,s]=this.pageDimensions;return this.#e.serialize([n,i,r,s],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class sye{#e=new Float64Array(6);#t;#i;#n;#s;#a;#r="";#o=0;#c=new fC;#l;#d;constructor(e,n,i,r,s,a){this.#l=i,this.#d=r,this.#n=s,this.#s=a,[e,n]=this.#h(e,n);const o=this.#t=[NaN,NaN,NaN,NaN,e,n];this.#a=[e,n],this.#i=[{line:o,points:this.#a}],this.#e.set(o,0)}updateProperty(e,n){e==="stroke-width"&&(this.#s=n)}#h(e,n){return Ve._normalizePoint(e,n,this.#l,this.#d,this.#n)}isEmpty(){return!this.#i||this.#i.length===0}isCancellable(){return this.#a.length<=10}add(e,n){[e,n]=this.#h(e,n);const[i,r,s,a]=this.#e.subarray(2,6),o=e-s,l=n-a;return Math.hypot(this.#l*o,this.#d*l)<=2?null:(this.#a.push(e,n),isNaN(i)?(this.#e.set([s,a,e,n],2),this.#t.push(NaN,NaN,NaN,NaN,e,n),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([i,r,s,a,e,n],0),this.#t.push(...Ve.createBezierPoints(i,r,s,a,e,n)),{path:{d:this.toSVGPath()}}))}end(e,n){const i=this.add(e,n);return i||(this.#a.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,n,i,r,s){this.#l=i,this.#d=r,this.#n=s,[e,n]=this.#h(e,n);const a=this.#t=[NaN,NaN,NaN,NaN,e,n];this.#a=[e,n];const o=this.#i.at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),this.#i.push({line:a,points:this.#a}),this.#e.set(a,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#i.at(-1)}setLastElement(e){return this.#i?(this.#i.push(e),this.#t=e.line,this.#a=e.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(e)}removeLastElement(){if(!this.#i)return this.#c.removeLastElement();this.#i.pop(),this.#r="";for(let e=0,n=this.#i.length;e<n;e++){const{line:i,points:r}=this.#i[e];this.#t=i,this.#a=r,this.#o=0,this.toSVGPath()}return{path:{d:this.#r}}}toSVGPath(){const e=Ve.svgRound(this.#t[4]),n=Ve.svgRound(this.#t[5]);if(this.#a.length===2)return this.#r=`${this.#r} M ${e} ${n} Z`,this.#r;if(this.#a.length<=6){const r=this.#r.lastIndexOf("M");this.#r=`${this.#r.slice(0,r)} M ${e} ${n}`,this.#o=6}if(this.#a.length===4){const r=Ve.svgRound(this.#t[10]),s=Ve.svgRound(this.#t[11]);return this.#r=`${this.#r} L ${r} ${s}`,this.#o=12,this.#r}const i=[];this.#o===0&&(i.push(`M ${e} ${n}`),this.#o=6);for(let r=this.#o,s=this.#t.length;r<s;r+=6){const[a,o,l,u,h,g]=this.#t.slice(r,r+6).map(Ve.svgRound);i.push(`C${a} ${o} ${l} ${u} ${h} ${g}`)}return this.#r+=i.join(" "),this.#o=this.#t.length,this.#r}getOutlines(e,n,i,r){const s=this.#i.at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),this.#c.build(this.#i,e,n,i,this.#n,this.#s,r),this.#e=null,this.#t=null,this.#i=null,this.#r=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class fC extends Ve{#e;#t=0;#i;#n;#s;#a;#r;#o;#c;build(e,n,i,r,s,a,o){this.#s=n,this.#a=i,this.#r=r,this.#o=s,this.#c=a,this.#i=o??0,this.#n=e,this.#h()}get thickness(){return this.#c}setLastElement(e){return this.#n.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#n.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of this.#n){if(e.push(`M${Ve.svgRound(n[4])} ${Ve.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12&&isNaN(n[6])){e.push(`L${Ve.svgRound(n[10])} ${Ve.svgRound(n[11])}`);continue}for(let i=6,r=n.length;i<r;i+=6){const[s,a,o,l,u,h]=n.subarray(i,i+6).map(Ve.svgRound);e.push(`C${s} ${a} ${o} ${l} ${u} ${h}`)}}return e.join("")}serialize([e,n,i,r],s){const a=[],o=[],[l,u,h,g]=this.#d();let v,y,w,S,x,T,_,M,F;switch(this.#o){case 0:F=Ve._rescale,v=e,y=n+r,w=i,S=-r,x=e+l*i,T=n+(1-u-g)*r,_=e+(l+h)*i,M=n+(1-u)*r;break;case 90:F=Ve._rescaleAndSwap,v=e,y=n,w=i,S=r,x=e+u*i,T=n+l*r,_=e+(u+g)*i,M=n+(l+h)*r;break;case 180:F=Ve._rescale,v=e+i,y=n,w=-i,S=r,x=e+(1-l-h)*i,T=n+u*r,_=e+(1-l)*i,M=n+(u+g)*r;break;case 270:F=Ve._rescaleAndSwap,v=e+i,y=n+r,w=-i,S=-r,x=e+(1-u-g)*i,T=n+(1-l-h)*r,_=e+(1-u)*i,M=n+(1-l)*r;break}for(const{line:L,points:k}of this.#n)a.push(F(L,v,y,w,S,s?new Array(L.length):null)),o.push(F(k,v,y,w,S,s?new Array(k.length):null));return{lines:a,points:o,rect:[x,T,_,M]}}static deserialize(e,n,i,r,s,{paths:{lines:a,points:o},rotation:l,thickness:u}){const h=[];let g,v,y,w,S;switch(l){case 0:S=Ve._rescale,g=-e/i,v=n/r+1,y=1/i,w=-1/r;break;case 90:S=Ve._rescaleAndSwap,g=-n/r,v=-e/i,y=1/r,w=1/i;break;case 180:S=Ve._rescale,g=e/i+1,v=-n/r,y=-1/i,w=1/r;break;case 270:S=Ve._rescaleAndSwap,g=n/r+1,v=e/i+1,y=-1/r,w=-1/i;break}if(!a){a=[];for(const T of o){const _=T.length;if(_===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,T[0],T[1]]));continue}if(_===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,T[0],T[1],NaN,NaN,NaN,NaN,T[2],T[3]]));continue}const M=new Float32Array(3*(_-2));a.push(M);let[F,L,k,B]=T.subarray(0,4);M.set([NaN,NaN,NaN,NaN,F,L],0);for(let H=4;H<_;H+=2){const U=T[H],W=T[H+1];M.set(Ve.createBezierPoints(F,L,k,B,U,W),(H-2)*3),[F,L,k,B]=[k,B,U,W]}}}for(let T=0,_=a.length;T<_;T++)h.push({line:S(a[T].map(M=>M??NaN),g,v,y,w),points:S(o[T].map(M=>M??NaN),g,v,y,w)});const x=new this.prototype.constructor;return x.build(h,i,r,1,l,u,s),x}#l(e=this.#c){const n=this.#i+e/2*this.#r;return this.#o%180===0?[n/this.#s,n/this.#a]:[n/this.#a,n/this.#s]}#d(){const[e,n,i,r]=this.#e,[s,a]=this.#l(0);return[e+s,n+a,i-2*s,r-2*a]}#h(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#n){if(r.length<=12){for(let o=4,l=r.length;o<l;o+=6)Ge.pointBoundingBox(r[o],r[o+1],e);continue}let s=r[4],a=r[5];for(let o=6,l=r.length;o<l;o+=6){const[u,h,g,v,y,w]=r.subarray(o,o+6);Ge.bezierBoundingBox(s,a,u,h,g,v,y,w,e),s=y,a=w}}const[n,i]=this.#l();e[0]=Pr(e[0]-n,0,1),e[1]=Pr(e[1]-i,0,1),e[2]=Pr(e[2]+n,0,1),e[3]=Pr(e[3]+i,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,n){return e==="stroke-width"?this.#f(n):null}#f(e){const[n,i]=this.#l();this.#c=e;const[r,s]=this.#l(),[a,o]=[r-n,s-i],l=this.#e;return l[0]-=a,l[1]-=o,l[2]+=2*a,l[3]+=2*o,l}updateParentDimensions([e,n],i){const[r,s]=this.#l();this.#s=e,this.#a=n,this.#r=i;const[a,o]=this.#l(),l=a-r,u=o-s,h=this.#e;return h[0]-=l,h[1]-=u,h[2]+=2*l,h[3]+=2*u,h}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(Ve.svgRound).join(" ")}get defaultProperties(){const[e,n]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ve.svgRound(e)} ${Ve.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=this.#e;let i=0,r=0,s=0,a=0,o=0,l=0;switch(this.#t){case 90:r=n/e,s=-e/n,o=e;break;case 180:i=-1,a=-1,o=e,l=n;break;case 270:r=-n/e,s=e/n,l=n;break;default:return""}return`matrix(${i} ${r} ${s} ${a} ${Ve.svgRound(o)} ${Ve.svgRound(l)})`}getPathResizingSVGProperties([e,n,i,r]){const[s,a]=this.#l(),[o,l,u,h]=this.#e;if(Math.abs(u-s)<=Ve.PRECISION||Math.abs(h-a)<=Ve.PRECISION){const S=e+i/2-(o+u/2),x=n+r/2-(l+h/2);return{path:{"transform-origin":`${Ve.svgRound(e)} ${Ve.svgRound(n)}`,transform:`${this.rotationTransform} translate(${S} ${x})`}}}const g=(i-2*s)/(u-2*s),v=(r-2*a)/(h-2*a),y=u/i,w=h/r;return{path:{"transform-origin":`${Ve.svgRound(o)} ${Ve.svgRound(l)}`,transform:`${this.rotationTransform} scale(${y} ${w}) translate(${Ve.svgRound(s)} ${Ve.svgRound(a)}) scale(${g} ${v}) translate(${Ve.svgRound(-s)} ${Ve.svgRound(-a)})`}}}getPathResizedSVGProperties([e,n,i,r]){const[s,a]=this.#l(),o=this.#e,[l,u,h,g]=o;if(o[0]=e,o[1]=n,o[2]=i,o[3]=r,Math.abs(h-s)<=Ve.PRECISION||Math.abs(g-a)<=Ve.PRECISION){const x=e+i/2-(l+h/2),T=n+r/2-(u+g/2);for(const{line:_,points:M}of this.#n)Ve._translate(_,x,T,_),Ve._translate(M,x,T,M);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ve.svgRound(e)} ${Ve.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const v=(i-2*s)/(h-2*s),y=(r-2*a)/(g-2*a),w=-v*(l+s)+e+s,S=-y*(u+a)+n+a;if(v!==1||y!==1||w!==0||S!==0)for(const{line:x,points:T}of this.#n)Ve._rescale(x,w,S,v,y,x),Ve._rescale(T,w,S,v,y,T);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Ve.svgRound(e)} ${Ve.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],i){const[r,s]=i,a=this.#e,o=e-a[0],l=n-a[1];if(this.#s===r&&this.#a===s)for(const{line:u,points:h}of this.#n)Ve._translate(u,o,l,u),Ve._translate(h,o,l,h);else{const u=this.#s/r,h=this.#a/s;this.#s=r,this.#a=s;for(const{line:g,points:v}of this.#n)Ve._rescale(g,o,l,u,h,g),Ve._rescale(v,o,l,u,h,v);a[2]*=u,a[3]*=h}return a[0]=e,a[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Ve.svgRound(e)} ${Ve.svgRound(n)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Ve.svgRound(e[0])} ${Ve.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class rx extends Gz{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:Ze._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,n){e==="stroke-width"&&(n??=this["stroke-width"],n*=this._viewParameters.realScale),super.updateSVGProperty(e,n)}clone(){const e=new rx(this._viewParameters);return e.updateAll(this),e}}class V3 extends tn{static _type="ink";static _editorType=pt.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,n){Ze.initialize(e,n),this._defaultDrawingOptions=new rx(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return ut(this,"typesMap",new Map([[zt.INK_THICKNESS,"stroke-width"],[zt.INK_COLOR,"stroke"],[zt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,i,r,s){return new sye(e,n,i,r,s,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,i,r,s,a){return fC.deserialize(e,n,i,r,s,a)}static async deserialize(e,n,i){let r=null;if(e instanceof G3){const{data:{inkLists:a,rect:o,rotation:l,id:u,color:h,opacity:g,borderStyle:{rawWidth:v},popupRef:y,richText:w,contentsObj:S,creationDate:x,modificationDate:T},parent:{page:{pageNumber:_}}}=e;r=e={annotationType:pt.INK,color:Array.from(h),thickness:v,opacity:g,paths:{points:a},boxes:null,pageIndex:_-1,rect:o.slice(0),rotation:l,annotationElementId:u,id:u,deleted:!1,popupRef:y,richText:w,comment:S?.str||null,creationDate:x,modificationDate:T}}const s=await super.deserialize(e,n,i);return s._initialData=r,e.comment&&s.setCommentData(e),s}get toolbarButtons(){return this._colorPicker||=new Ty(this),[["colorPicker",this._colorPicker]]}get colorType(){return zt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:i}=this;n.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:i}){this._drawingOptions=V3.getDefaultDrawingOptions({stroke:Ge.makeHexColor(...e),"stroke-width":n,"stroke-opacity":i})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:i}=this.serializeDraw(e),{_drawingOptions:{stroke:r,"stroke-opacity":s,"stroke-width":a}}=this,o=Object.assign(super.serialize(e),{color:Ze._colorManager.convert(r),opacity:s,thickness:a,paths:{lines:n,points:i}});return this.addComment(o),e?(o.isCopy=!0,o):this.annotationElementId&&!this.#e(o)?null:(o.id=this.annotationElementId,o)}#e(e){const{color:n,thickness:i,opacity:r,pageIndex:s}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((a,o)=>a!==n[o])||e.thickness!==i||e.opacity!==r||e.pageIndex!==s}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:n,rect:i}=this.serializeDraw(!1);return e.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}}class OD extends fC{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const K1=8,A0=3;class vp{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,n,i,r){return i-=e,r-=n,i===0?r>0?0:4:i===1?r+6:2-r}static#i=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#n(e,n,i,r,s,a,o){const l=this.#t(i,r,s,a);for(let u=0;u<8;u++){const h=(-u+l-o+16)%8,g=this.#i[2*h],v=this.#i[2*h+1];if(e[(i+g)*n+(r+v)]!==0)return h}return-1}static#s(e,n,i,r,s,a,o){const l=this.#t(i,r,s,a);for(let u=0;u<8;u++){const h=(u+l+o+16)%8,g=this.#i[2*h],v=this.#i[2*h+1];if(e[(i+g)*n+(r+v)]!==0)return h}return-1}static#a(e,n,i,r){const s=e.length,a=new Int32Array(s);for(let h=0;h<s;h++)a[h]=e[h]<=r?1:0;for(let h=1;h<i-1;h++)a[h*n]=a[h*n+n-1]=0;for(let h=0;h<n;h++)a[h]=a[n*i-1-h]=0;let o=1,l;const u=[];for(let h=1;h<i-1;h++){l=1;for(let g=1;g<n-1;g++){const v=h*n+g,y=a[v];if(y===0)continue;let w=h,S=g;if(y===1&&a[v-1]===0)o+=1,S-=1;else if(y>=1&&a[v+1]===0)o+=1,S+=1,y>1&&(l=y);else{y!==1&&(l=Math.abs(y));continue}const x=[g,h],T=S===g+1,_={isHole:T,points:x,id:o,parent:0};u.push(_);let M;for(const j of u)if(j.id===l){M=j;break}M?M.isHole?_.parent=T?M.parent:l:_.parent=T?l:M.parent:_.parent=T?l:0;const F=this.#n(a,n,h,g,w,S,0);if(F===-1){a[v]=-o,a[v]!==1&&(l=Math.abs(a[v]));continue}let L=this.#i[2*F],k=this.#i[2*F+1];const B=h+L,H=g+k;w=B,S=H;let U=h,W=g;for(;;){const j=this.#s(a,n,U,W,w,S,1);L=this.#i[2*j],k=this.#i[2*j+1];const X=U+L,ne=W+k;x.push(ne,X);const $=U*n+W;if(a[$+1]===0?a[$]=-o:a[$]===1&&(a[$]=o),X===h&&ne===g&&U===B&&W===H){a[v]!==1&&(l=Math.abs(a[v]));break}else w=U,S=W,U=X,W=ne}}}return u}static#r(e,n,i,r){if(i-n<=4){for(let B=n;B<i-2;B+=2)r.push(e[B],e[B+1]);return}const s=e[n],a=e[n+1],o=e[i-4]-s,l=e[i-3]-a,u=Math.hypot(o,l),h=o/u,g=l/u,v=h*a-g*s,y=l/o,w=1/u,S=Math.atan(y),x=Math.cos(S),T=Math.sin(S),_=w*(Math.abs(x)+Math.abs(T)),M=w*(1-_+_**2),F=Math.max(Math.atan(Math.abs(T+x)*M),Math.atan(Math.abs(T-x)*M));let L=0,k=n;for(let B=n+2;B<i-2;B+=2){const H=Math.abs(v-h*e[B+1]+g*e[B]);H>L&&(k=B,L=H)}L>(u*F)**2?(this.#r(e,n,k+2,r),this.#r(e,k,i,r)):r.push(s,a)}static#o(e){const n=[],i=e.length;return this.#r(e,0,i,n),n.push(e[i-2],e[i-1]),n.length<=4?null:n}static#c(e,n,i,r,s,a){const o=new Float32Array(a**2),l=-2*r**2,u=a>>1;for(let S=0;S<a;S++){const x=(S-u)**2;for(let T=0;T<a;T++)o[S*a+T]=Math.exp((x+(T-u)**2)/l)}const h=new Float32Array(256),g=-2*s**2;for(let S=0;S<256;S++)h[S]=Math.exp(S**2/g);const v=e.length,y=new Uint8Array(v),w=new Uint32Array(256);for(let S=0;S<i;S++)for(let x=0;x<n;x++){const T=S*n+x,_=e[T];let M=0,F=0;for(let k=0;k<a;k++){const B=S+k-u;if(!(B<0||B>=i))for(let H=0;H<a;H++){const U=x+H-u;if(U<0||U>=n)continue;const W=e[B*n+U],j=o[k*a+H]*h[Math.abs(W-_)];M+=W*j,F+=j}}const L=y[T]=Math.round(M/F);w[L]++}return[y,w]}static#l(e){const n=new Uint32Array(256);for(const i of e)n[i]++;return n}static#d(e){const n=e.length,i=new Uint8ClampedArray(n>>2);let r=-1/0,s=1/0;for(let o=0,l=i.length;o<l;o++){const u=i[o]=e[o<<2];r=Math.max(r,u),s=Math.min(s,u)}const a=255/(r-s);for(let o=0,l=i.length;o<l;o++)i[o]=(i[o]-s)*a;return i}static#h(e){let n,i=-1/0,r=-1/0;const s=e.findIndex(l=>l!==0);let a=s,o=s;for(n=s;n<256;n++){const l=e[n];l>i&&(n-a>r&&(r=n-a,o=n-1),i=l,a=n)}for(n=o-1;n>=0&&!(e[n]>e[n+1]);n--);return n}static#f(e){const n=e,{width:i,height:r}=e,{maxDim:s}=this.#e;let a=i,o=r;if(i>s||r>s){let v=i,y=r,w=Math.log2(Math.max(i,r)/s);const S=Math.floor(w);w=w===S?S-1:S;for(let T=0;T<w;T++){a=Math.ceil(v/2),o=Math.ceil(y/2);const _=new OffscreenCanvas(a,o);_.getContext("2d").drawImage(e,0,0,v,y,0,0,a,o),v=a,y=o,e!==n&&e.close(),e=_.transferToImageBitmap()}const x=Math.min(s/a,s/o);a=Math.round(a*x),o=Math.round(o*x)}const u=new OffscreenCanvas(a,o).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,a,o),u.filter="grayscale(1)",u.drawImage(e,0,0,e.width,e.height,0,0,a,o);const h=u.getImageData(0,0,a,o).data;return[this.#d(h),a,o]}static extractContoursFromText(e,{fontFamily:n,fontStyle:i,fontWeight:r},s,a,o,l){let u=new OffscreenCanvas(1,1),h=u.getContext("2d",{alpha:!1});const g=200,v=h.font=`${i} ${r} ${g}px ${n}`,{actualBoundingBoxLeft:y,actualBoundingBoxRight:w,actualBoundingBoxAscent:S,actualBoundingBoxDescent:x,fontBoundingBoxAscent:T,fontBoundingBoxDescent:_,width:M}=h.measureText(e),F=1.5,L=Math.ceil(Math.max(Math.abs(y)+Math.abs(w)||0,M)*F),k=Math.ceil(Math.max(Math.abs(S)+Math.abs(x)||g,Math.abs(T)+Math.abs(_)||g)*F);u=new OffscreenCanvas(L,k),h=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=v,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,L,k),h.fillStyle="black",h.fillText(e,L*(F-1)/2,k*(3-F)/2);const B=this.#d(h.getImageData(0,0,L,k).data),H=this.#l(B),U=this.#h(H),W=this.#a(B,L,k,U);return this.processDrawnLines({lines:{curves:W,width:L,height:k},pageWidth:s,pageHeight:a,rotation:o,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(e,n,i,r,s){const[a,o,l]=this.#f(e),[u,h]=this.#c(a,o,l,Math.hypot(o,l)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),g=this.#h(h),v=this.#a(u,o,l,g);return this.processDrawnLines({lines:{curves:v,width:o,height:l},pageWidth:n,pageHeight:i,rotation:r,innerMargin:s,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:n,pageHeight:i,rotation:r,innerMargin:s,mustSmooth:a,areContours:o}){r%180!==0&&([n,i]=[i,n]);const{curves:l,width:u,height:h}=e,g=e.thickness??0,v=[],y=Math.min(n/u,i/h),w=y/n,S=y/i,x=[];for(const{points:_}of l){const M=a?this.#o(_):_;if(!M)continue;x.push(M);const F=M.length,L=new Float32Array(F),k=new Float32Array(3*(F===2?2:F-2));if(v.push({line:k,points:L}),F===2){L[0]=M[0]*w,L[1]=M[1]*S,k.set([NaN,NaN,NaN,NaN,L[0],L[1]],0);continue}let[B,H,U,W]=M;B*=w,H*=S,U*=w,W*=S,L.set([B,H,U,W],0),k.set([NaN,NaN,NaN,NaN,B,H],0);for(let j=4;j<F;j+=2){const X=L[j]=M[j]*w,ne=L[j+1]=M[j+1]*S;k.set(Ve.createBezierPoints(B,H,U,W,X,ne),(j-2)*3),[B,H,U,W]=[U,W,X,ne]}}if(v.length===0)return null;const T=o?new OD:new fC;return T.build(v,n,i,1,r,o?0:g,s),{outline:T,newCurves:x,areContours:o,thickness:g,width:u,height:h}}static async compressSignature({outlines:e,areContours:n,thickness:i,width:r,height:s}){let a=1/0,o=-1/0,l=0;for(const M of e){l+=M.length;for(let F=2,L=M.length;F<L;F++){const k=M[F]-M[F-2];a=Math.min(a,k),o=Math.max(o,k)}}let u;a>=-128&&o<=127?u=Int8Array:a>=-32768&&o<=32767?u=Int16Array:u=Int32Array;const h=e.length,g=K1+A0*h,v=new Uint32Array(g);let y=0;v[y++]=g*Uint32Array.BYTES_PER_ELEMENT+(l-2*h)*u.BYTES_PER_ELEMENT,v[y++]=0,v[y++]=r,v[y++]=s,v[y++]=n?0:1,v[y++]=Math.max(0,Math.floor(i??0)),v[y++]=h,v[y++]=u.BYTES_PER_ELEMENT;for(const M of e)v[y++]=M.length-2,v[y++]=M[0],v[y++]=M[1];const w=new CompressionStream("deflate-raw"),S=w.writable.getWriter();await S.ready,S.write(v);const x=u.prototype.constructor;for(const M of e){const F=new x(M.length-2);for(let L=2,k=M.length;L<k;L++)F[L-2]=M[L]-M[L-2];S.write(F)}S.close();const T=await new Response(w.readable).arrayBuffer();return new Uint8Array(T).toBase64()}static async decompressSignature(e){try{const n=Uint8Array.fromBase64(e),{readable:i,writable:r}=new DecompressionStream("deflate-raw"),s=r.getWriter();await s.ready,s.write(n).then(async()=>{await s.ready,await s.close()}).catch(()=>{});let a=null,o=0;for await(const M of i)a||=new Uint8Array(new Uint32Array(M.buffer,0,4)[0]),a.set(M,o),o+=M.length;const l=new Uint32Array(a.buffer,0,a.length>>2),u=l[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const h=l[2],g=l[3],v=l[4]===0,y=l[5],w=l[6],S=l[7],x=[],T=(K1+A0*w)*Uint32Array.BYTES_PER_ELEMENT;let _;switch(S){case Int8Array.BYTES_PER_ELEMENT:_=new Int8Array(a.buffer,T);break;case Int16Array.BYTES_PER_ELEMENT:_=new Int16Array(a.buffer,T);break;case Int32Array.BYTES_PER_ELEMENT:_=new Int32Array(a.buffer,T);break}o=0;for(let M=0;M<w;M++){const F=l[A0*M+K1],L=new Float32Array(F+2);x.push(L);for(let k=0;k<A0-1;k++)L[k]=l[A0*M+K1+k+1];for(let k=0;k<F;k++)L[k+2]=L[k]+_[o++]}return{areContours:v,thickness:y,outlines:x,width:h,height:g}}catch(n){return ct(`decompressSignature: ${n}`),null}}}class U3 extends Gz{constructor(){super(),super.updateProperties({fill:Ze._defaultLineColor,"stroke-width":0})}clone(){const e=new U3;return e.updateAll(this),e}}class j3 extends rx{constructor(e){super(e),super.updateProperties({stroke:Ze._defaultLineColor,"stroke-width":1})}clone(){const e=new j3(this._viewParameters);return e.updateAll(this),e}}class Nl extends tn{#e=!1;#t=null;#i=null;#n=null;static _type="signature";static _editorType=pt.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#i=e.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,n){Ze.initialize(e,n),this._defaultDrawingOptions=new U3,this._defaultDrawnSignatureOptions=new j3(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return ut(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(e){const n=e.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,n;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,e=this.x,n=this.y),super.render(),this._drawId===null)if(this.#i){const{lines:r,mustSmooth:s,areContours:a,description:o,uuid:l,heightInPage:u}=this.#i,{rawDims:{pageWidth:h,pageHeight:g},rotation:v}=this.parent.viewport,y=vp.processDrawnLines({lines:r,pageWidth:h,pageHeight:g,rotation:v,innerMargin:Nl._INNER_MARGIN,mustSmooth:s,areContours:a});this.addSignature(y,u,o,l)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#t||""}));return i&&(this._isCopy=!0,this._moveAfterPaste(e,n)),this.div}setUuid(e){this.#n=e,this.addEditToolbar()}getUuid(){return this.#n}get description(){return this.#t}set description(e){this.#t=e,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(n=>{n?.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:n,thickness:i,width:r,height:s}=this.#i,a=Math.max(r,s),o=vp.processDrawnLines({lines:{curves:e.map(l=>({points:l})),thickness:i,width:r,height:s},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:o.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,n,i,r){const{x:s,y:a}=this,{outline:o}=this.#i=e;this.#e=o instanceof OD,this.description=i;let l;this.#e?l=Nl.getDefaultDrawingOptions():(l=Nl._defaultDrawnSignatureOptions.clone(),l.updateProperties({"stroke-width":o.thickness})),this._addOutlines({drawOutlines:o,drawingOptions:l});const[,u]=this.pageDimensions;let h=n/u;h=h>=1?.5:h,this.width*=h/this.height,this.width>=1&&(h*=.9/this.width,this.width=.9),this.height=h,this.setDims(),this.x=s,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:n,pageHeight:i},rotation:r}=this.parent.viewport;return vp.process(e,n,i,r,Nl._INNER_MARGIN)}getFromText(e,n){const{rawDims:{pageWidth:i,pageHeight:r},rotation:s}=this.parent.viewport;return vp.extractContoursFromText(e,n,i,r,s,Nl._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:n,pageHeight:i},rotation:r}=this.parent.viewport;return vp.processDrawnLines({lines:e,pageWidth:n,pageHeight:i,rotation:r,innerMargin:Nl._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:n}){e?this._drawingOptions=Nl.getDefaultDrawingOptions():(this._drawingOptions=Nl._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:n,points:i}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":r}}=this,s=Object.assign(super.serialize(e),{isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:r});return this.addComment(s),e?(s.paths={lines:n,points:i},s.uuid=this.#n,s.isCopy=!0):s.lines=n,this.#t&&(s.accessibilityData={type:"Figure",alt:this.#t}),s}static deserializeDraw(e,n,i,r,s,a){return a.areContours?OD.deserialize(e,n,i,r,s,a):fC.deserialize(e,n,i,r,s,a)}static async deserialize(e,n,i){const r=await super.deserialize(e,n,i);return r.#e=e.areContours,r.description=e.accessibilityData?.alt||"",r.#n=e.uuid,r}}class aye extends Ze{#e=null;#t=null;#i=null;#n=null;#s=null;#a="";#r=null;#o=!1;#c=null;#l=!1;#d=!1;static _type="stamp";static _editorType=pt.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#n=e.bitmapUrl,this.#s=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,n){Ze.initialize(e,n)}static isHandlingMimeForPasting(e){return xD.includes(e)}static paste(e,n){n.pasteEditor({mode:pt.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}#h(e,n=!1){if(!e){this.remove();return}this.#e=e.bitmap,n||(this.#t=e.id,this.#l=e.isSvg),e.file&&(this.#a=e.file.name),this.#p()}#f(){if(this.#i=null,this._uiManager.enableWaiting(!1),!!this.#r){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:s,height:a}=e||this.copyCanvas(null,null,!0).imageData,o=await i.guess({name:"altText",request:{data:r,width:s,height:a,channels:r.length/(s*a)}});if(!o)throw new Error("No response from the AI service.");if(o.error)throw new Error("Error from the AI service.");if(o.cancel)return null;if(!o.output)throw new Error("No valid response from the AI service.");const l=o.output;return await this.setGuessedAltText(l),n&&!this.hasAltTextData()&&(this.altTextData={alt:l,decorative:!1}),l}#m(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(i=>this.#h(i,!0)).finally(()=>this.#f());return}if(this.#n){const i=this.#n;this.#n=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromUrl(i).then(r=>this.#h(r)).finally(()=>this.#f());return}if(this.#s){const i=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#i=this._uiManager.imageManager.getFromFile(i).then(r=>this.#h(r)).finally(()=>this.#f());return}const e=document.createElement("input");e.type="file",e.accept=xD.join(",");const n=this._uiManager._signal;this.#i=new Promise(i=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(r)}i()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),i()},{signal:n})}).finally(()=>this.#f()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#r?.remove(),this.#r=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#m();return}super.rebuild(),this.div!==null&&(this.#t&&this.#r===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#i||this.#e||this.#n||this.#s||this.#t||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;return this._isCopy&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#e?this.#p():this.#m()),this._isCopy&&this._moveAfterPaste(e,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,n){const{id:i,bitmap:r}=this._uiManager.imageManager.getFromCanvas(e,n);n.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(this.#t=i,r&&(this.#e=r),this.#o=!1,this.#p())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const e=200;this.#c=setTimeout(()=>{this.#c=null,this.#g()},e)}#p(){const{div:e}=this;let{width:n,height:i}=this.#e;const[r,s]=this.pageDimensions,a=.75;if(this.width)n=this.width*r,i=this.height*s;else if(n>a*r||i>a*s){const l=Math.min(a*r/n,a*s/i);n*=l,i*=l}this._uiManager.enableWaiting(!1);const o=this.#r=document.createElement("canvas");o.setAttribute("role","img"),this.addContainer(o),this.width=n/r,this.height=i/s,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#g(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#a&&this.div.setAttribute("aria-description",this.#a),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(e,n,i=!1){e||(e=224);const{width:r,height:s}=this.#e,a=new Xl;let o=this.#e,l=r,u=s,h=null;if(n){if(r>n||s>n){const k=Math.min(n/r,n/s);l=Math.floor(r*k),u=Math.floor(s*k)}h=document.createElement("canvas");const v=h.width=Math.ceil(l*a.sx),y=h.height=Math.ceil(u*a.sy);this.#l||(o=this.#u(v,y));const w=h.getContext("2d");w.filter=this._uiManager.hcmFilter;let S="white",x="#cfcfd8";this._uiManager.hcmFilter!=="none"?x="black":Rve.isDarkMode&&(S="#8f8f9d",x="#42414d");const T=15,_=T*a.sx,M=T*a.sy,F=new OffscreenCanvas(_*2,M*2),L=F.getContext("2d");L.fillStyle=S,L.fillRect(0,0,_*2,M*2),L.fillStyle=x,L.fillRect(0,0,_,M),L.fillRect(_,M,_,M),w.fillStyle=w.createPattern(F,"repeat"),w.fillRect(0,0,v,y),w.drawImage(o,0,0,o.width,o.height,0,0,v,y)}let g=null;if(i){let v,y;if(a.symmetric&&o.width<e&&o.height<e)v=o.width,y=o.height;else if(o=this.#e,r>e||s>e){const x=Math.min(e/r,e/s);v=Math.floor(r*x),y=Math.floor(s*x),this.#l||(o=this.#u(v,y))}const S=new OffscreenCanvas(v,y).getContext("2d",{willReadFrequently:!0});S.drawImage(o,0,0,o.width,o.height,0,0,v,y),g={width:v,height:y,data:S.getImageData(0,0,v,y).data}}return{canvas:h,width:l,height:u,imageData:g}}#u(e,n){const{width:i,height:r}=this.#e;let s=i,a=r,o=this.#e;for(;s>2*e||a>2*n;){const l=s,u=a;s>2*e&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2)),a>2*n&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const h=new OffscreenCanvas(s,a);h.getContext("2d").drawImage(o,0,0,l,u,0,0,s,a),o=h.transferToImageBitmap()}return o}#g(){const[e,n]=this.parentDimensions,{width:i,height:r}=this,s=new Xl,a=Math.ceil(i*e*s.sx),o=Math.ceil(r*n*s.sy),l=this.#r;if(!l||l.width===a&&l.height===o)return;l.width=a,l.height=o;const u=this.#l?this.#e:this.#u(a,o),h=l.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(u,0,0,u.width,u.height,0,0,a,o)}#v(e){if(e){if(this.#l){const r=this._uiManager.imageManager.getSvgUrl(this.#t);if(r)return r}const n=document.createElement("canvas");return{width:n.width,height:n.height}=this.#e,n.getContext("2d").drawImage(this.#e,0,0),n.toDataURL()}if(this.#l){const[n,i]=this.pageDimensions,r=Math.round(this.width*n*im.PDF_TO_CSS_UNITS),s=Math.round(this.height*i*im.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(r,s);return a.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,r,s),a.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,n,i){let r=null,s=!1;if(e instanceof Iz){const{data:{rect:S,rotation:x,id:T,structParent:_,popupRef:M,richText:F,contentsObj:L,creationDate:k,modificationDate:B},container:H,parent:{page:{pageNumber:U}},canvas:W}=e;let j,X;W?(delete e.canvas,{id:j,bitmap:X}=i.imageManager.getFromCanvas(H.id,W),W.remove()):(s=!0,e._hasNoCanvas=!0);const ne=(await n._structTree.getAriaAttributes(`${Ep}${T}`))?.get("aria-label")||"";r=e={annotationType:pt.STAMP,bitmapId:j,bitmap:X,pageIndex:U-1,rect:S.slice(0),rotation:x,annotationElementId:T,id:T,deleted:!1,accessibilityData:{decorative:!1,altText:ne},isSvg:!1,structParent:_,popupRef:M,richText:F,comment:L?.str||null,creationDate:k,modificationDate:B}}const a=await super.deserialize(e,n,i),{rect:o,bitmap:l,bitmapUrl:u,bitmapId:h,isSvg:g,accessibilityData:v}=e;s?(i.addMissingCanvas(e.id,a),a.#o=!0):h&&i.imageManager.isValidId(h)?(a.#t=h,l&&(a.#e=l)):a.#n=u,a.#l=g;const[y,w]=a.pageDimensions;return a.width=(o[2]-o[0])/y,a.height=(o[3]-o[1])/w,v&&(a.altTextData=v),a._initialData=r,e.comment&&a.setCommentData(e),a.#d=!!r,a}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=Object.assign(super.serialize(e),{bitmapId:this.#t,isSvg:this.#l});if(this.addComment(i),e)return i.bitmapUrl=this.#v(!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:r,altText:s}=this.serializeAltText(!1);if(!r&&s&&(i.accessibilityData={type:"Figure",alt:s}),this.annotationElementId){const o=this.#C(i);return o.isSame?null:(o.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1,i.id=this.annotationElementId,delete i.bitmapId,i)}if(n===null)return i;n.stamps||=new Map;const a=this.#l?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!n.stamps.has(this.#t))n.stamps.set(this.#t,{area:a,serialized:i}),i.bitmap=this.#v(!1);else if(this.#l){const o=n.stamps.get(this.#t);a>o.area&&(o.area=a,o.serialized.bitmap.close(),o.serialized.bitmap=this.#v(!1))}return i}#C(e){const{pageIndex:n,accessibilityData:{altText:i}}=this._initialData,r=e.pageIndex===n,s=(e.accessibilityData?.alt||"")===i;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&s,isSameAltText:s}}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Ic{#e;#t=!1;#i=null;#n=null;#s=null;#a=new Map;#r=!1;#o=!1;#c=!1;#l=null;#d=null;#h=null;#f=null;#m=null;#p=-1;#u;static _initialized=!1;static#g=new Map([dr,V3,aye,Ri,Nl].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:n,div:i,structTreeLayer:r,accessibilityManager:s,annotationLayer:a,drawLayer:o,textLayer:l,viewport:u,l10n:h}){const g=[...Ic.#g.values()];if(!Ic._initialized){Ic._initialized=!0;for(const v of g)v.initialize(h,e)}e.registerEditorTypes(g),this.#u=e,this.pageIndex=n,this.div=i,this.#e=s,this.#i=a,this.viewport=u,this.#h=l,this.drawLayer=o,this._structTree=r,this.#u.addLayer(this)}updatePageIndex(e){this.pageIndex=e}get isEmpty(){return this.#a.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===pt.NONE}updateToolbar(e){this.#u.updateToolbar(e)}updateMode(e=this.#u.getMode()){switch(this.#w(),e){case pt.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case pt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case pt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:n}=this.div;if(n.toggle("nonEditing",!1),e===pt.POPUP)n.toggle("commentEditing",!0);else{n.toggle("commentEditing",!1);for(const i of Ic.#g.values())n.toggle(`${i._type}Editing`,e===i._editorType)}this.div.hidden=!1}hasTextLayer(e){return e===this.#h?.div}setEditingState(e){this.#u.setEditingState(e)}addCommands(e){this.#u.addCommands(e)}cleanUndoStack(e){this.#u.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#i?.togglePointerEvents(e)}get#v(){return this.#a.size!==0?this.#a.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#m?.abort(),this.#m=null;const e=new Set;for(const i of this.#v)i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#u.removeChangedExistingAnnotation(i),e.add(i.annotationElementId));const n=this.#i;if(n)for(const i of n.getEditableAnnotations()){if(i.hide(),this.#u.isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const r=await this.deserialize(i);r&&(this.addOrRebuild(r),r.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#m){this.#m=new AbortController;const r=this.#u.combinedSignal(this.#m);this.#h.div.addEventListener("pointerdown",s=>{const{clientX:o,clientY:l,timeStamp:u}=s,h=this.#p;if(u-h>500){this.#p=u;return}this.#p=-1;const{classList:g}=this.div;g.toggle("getElements",!0);const v=document.elementsFromPoint(o,l);if(g.toggle("getElements",!1),!this.div.contains(v[0]))return;let y;const w=new RegExp(`^${Sy}[0-9]+$`);for(const x of v)if(w.test(x.id)){y=x.id;break}if(!y)return;const S=this.#a.get(y);S?.annotationElementId===null&&(s.stopPropagation(),s.preventDefault(),S.dblclick(s))},{signal:r,capture:!0})}const e=this.#i,n=[];if(e){const r=new Map,s=new Map;for(const o of this.#v){if(o.disableEditing(),!o.annotationElementId){n.push(o);continue}if(o.serialize()!==null){r.set(o.annotationElementId,o);continue}else s.set(o.annotationElementId,o);this.getEditableAnnotation(o.annotationElementId)?.show(),o.remove()}const a=e.getEditableAnnotations();for(const o of a){const{id:l}=o.data;if(this.#u.isDeletedAnnotationElement(l)){o.updateEdited({deleted:!0});continue}let u=s.get(l);if(u){u.resetAnnotationElement(o),u.show(!1),o.show();continue}u=r.get(l),u&&(this.#u.addChangedExistingAnnotation(u),u.renderAnnotationElement(o)&&u.show(!1)),o.show()}}this.#w(),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const r of Ic.#g.values())i.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),e?.updateFakeAnnotations(n),this.#o=!1}getEditableAnnotation(e){return this.#i?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#u.getActive()!==e&&this.#u.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const e=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#C.bind(this),{signal:e}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#C(e){this.#u.unselectAll();const{target:n}=e;if(n===this.#h.div||(n.getAttribute("role")==="img"||n.classList.contains("endOfContent"))&&this.#h.div.contains(n)){const{isMac:i}=Ji.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),Ri.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:e.x,y:e.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),e.preventDefault()}}enableClick(){if(this.#n)return;this.#n=new AbortController;const e=this.#u.combinedSignal(this.#n);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const n=this.pointerup.bind(this);this.div.addEventListener("pointerup",n,{signal:e}),this.div.addEventListener("pointercancel",n,{signal:e})}disableClick(){this.#n?.abort(),this.#n=null}attach(e){this.#a.set(e.id,e);const{annotationElementId:n}=e;n&&this.#u.isDeletedAnnotationElement(n)&&this.#u.removeDeletedAnnotationElement(e)}detach(e){this.#a.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#o&&e.annotationElementId&&this.#u.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#u.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#u.addDeletedAnnotationElement(e),Ze.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#u.addEditor(e),this.attach(e),!e.isAttachedToDOM){const n=e.render();this.div.append(n),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#c),this.#u.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:n}=document;e.div.contains(n)&&!this.#s&&(e._focusEventsAllowed=!1,this.#s=setTimeout(()=>{this.#s=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),n.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const n=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:n,undo:i,mustExec:!1})}getEditorByUID(e){for(const n of this.#a.values())if(n.uid===e)return n;return null}getNextId(){return this.#u.getId()}get#y(){return Ic.#g.get(this.#u.getMode())}combinedSignal(e){return this.#u.combinedSignal(e)}#E(e){const n=this.#y;return n?new n.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#y?.canCreateNewEmptyEditor()}async pasteEditor(e,n){this.updateToolbar(e),await this.#u.updateMode(e.mode);const{offsetX:i,offsetY:r}=this.#x(),s=this.getNextId(),a=this.#E({parent:this,id:s,x:i,y:r,uiManager:this.#u,isCentered:!0,...n});a&&this.add(a)}async deserialize(e){return await Ic.#g.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#u)||null}createAndAddNewEditor(e,n,i={}){const r=this.getNextId(),s=this.#E({parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:this.#u,isCentered:n,...i});return s&&this.add(s),s}get boundingClientRect(){return this.div.getBoundingClientRect()}#x(){const{x:e,y:n,width:i,height:r}=this.boundingClientRect,s=Math.max(0,e),a=Math.max(0,n),o=Math.min(window.innerWidth,e+i),l=Math.min(window.innerHeight,n+r),u=(s+o)/2-e,h=(a+l)/2-n,[g,v]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:g,offsetY:v}}addNewEditor(e={}){this.createAndAddNewEditor(this.#x(),!0,e)}setSelected(e){this.#u.setSelected(e)}toggleSelected(e){this.#u.toggleSelected(e)}unselect(e){this.#u.unselect(e)}pointerup(e){const{isMac:n}=Ji.platform;if(e.button!==0||e.ctrlKey&&n||e.target!==this.div||!this.#r||(this.#r=!1,this.#y?.isDrawer&&this.#y.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}const i=this.#u.getMode();if(i===pt.STAMP||i===pt.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#u.getMode()===pt.HIGHLIGHT&&this.enableTextSelection(),this.#r){this.#r=!1;return}const{isMac:n}=Ji.platform;if(e.button!==0||e.ctrlKey&&n||e.target!==this.div)return;if(this.#r=!0,this.#y?.isDrawer){this.startDrawingSession(e);return}const i=this.#u.getActive();this.#t=!i||i.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#l){this.#y.startDrawing(this,this.#u,!1,e);return}this.#u.setCurrentDrawingSession(this),this.#l=new AbortController;const n=this.#u.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(this.#d=null,this.commitOrRemove())},{signal:n}),this.#y.startDrawing(this,this.#u,!1,e)}pause(e){if(e){const{activeElement:n}=document;this.div.contains(n)&&(this.#d=n);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(e=!1){return this.#l?(this.#u.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#d=null,this.#y.endDrawing(e)):null}findNewParent(e,n,i){const r=this.#u.findParent(n,i);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#y.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#s&&(clearTimeout(this.#s),this.#s=null);for(const e of this.#a.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#a.clear(),this.#u.removeLayer(this)}#w(){for(const e of this.#a.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,xf(this.div,e);for(const n of this.#u.getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update({viewport:e}){this.#u.commitOrRemove(),this.#w();const n=this.viewport.rotation,i=e.rotation;if(this.viewport=e,xf(this.div,{rotation:i}),n!==i)for(const r of this.#a.values())r.rotate(i)}get pageDimensions(){const{pageWidth:e,pageHeight:n}=this.viewport.rawDims;return[e,n]}get scale(){return this.#u.viewParameters.realScale}}class Dr{#e=null;#t=new Map;#i=new Map;static#n=0;setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#t.size>0)for(const n of this.#t.values())n.remove(),e.append(n);this.#e=e}}static get _svgFactory(){return ut(this,"_svgFactory",new RS)}static#s(e,[n,i,r,s]){const{style:a}=e;a.top=`${100*i}%`,a.left=`${100*n}%`,a.width=`${100*r}%`,a.height=`${100*s}%`}#a(){const e=Dr._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#r(e,n){const i=Dr._svgFactory.createElement("clipPath");e.append(i);const r=`clip_${n}`;i.setAttribute("id",r),i.setAttribute("clipPathUnits","objectBoundingBox");const s=Dr._svgFactory.createElement("use");return i.append(s),s.setAttribute("href",`#${n}`),s.classList.add("clip"),r}#o(e,n){for(const[i,r]of Object.entries(n))r===null?e.removeAttribute(i):e.setAttribute(i,r)}draw(e,n=!1,i=!1){const r=Dr.#n++,s=this.#a(),a=Dr._svgFactory.createElement("defs");s.append(a);const o=Dr._svgFactory.createElement("path");a.append(o);const l=`path_${r}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),n&&this.#i.set(r,o);const u=i?this.#r(a,l):null,h=Dr._svgFactory.createElement("use");return s.append(h),h.setAttribute("href",`#${l}`),this.updateProperties(s,e),this.#t.set(r,s),{id:r,clipPathId:`url(#${u})`}}drawOutline(e,n){const i=Dr.#n++,r=this.#a(),s=Dr._svgFactory.createElement("defs");r.append(s);const a=Dr._svgFactory.createElement("path");s.append(a);const o=`path_${i}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke");let l;if(n){const g=Dr._svgFactory.createElement("mask");s.append(g),l=`mask_${i}`,g.setAttribute("id",l),g.setAttribute("maskUnits","objectBoundingBox");const v=Dr._svgFactory.createElement("rect");g.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const y=Dr._svgFactory.createElement("use");g.append(y),y.setAttribute("href",`#${o}`),y.setAttribute("stroke","none"),y.setAttribute("fill","black"),y.setAttribute("fill-rule","nonzero"),y.classList.add("mask")}const u=Dr._svgFactory.createElement("use");r.append(u),u.setAttribute("href",`#${o}`),l&&u.setAttribute("mask",`url(#${l})`);const h=u.cloneNode();return r.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(r,e),this.#t.set(i,r),i}finalizeDraw(e,n){this.#i.delete(e),this.updateProperties(e,n)}updateProperties(e,n){if(!n)return;const{root:i,bbox:r,rootClass:s,path:a}=n,o=typeof e=="number"?this.#t.get(e):e;if(o){if(i&&this.#o(o,i),r&&Dr.#s(o,r),s){const{classList:l}=o;for(const[u,h]of Object.entries(s))l.toggle(u,h)}if(a){const u=o.firstElementChild.firstElementChild;this.#o(u,a)}}}updateParent(e,n){if(n===this)return;const i=this.#t.get(e);i&&(n.#e.append(i),this.#t.delete(e),n.#t.set(e,i))}remove(e){this.#i.delete(e),this.#e!==null&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(const e of this.#t.values())e.remove();this.#t.clear(),this.#i.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:_D};globalThis.pdfjsLib={AbortException:Oh,AnnotationEditorLayer:Ic,AnnotationEditorParamsType:zt,AnnotationEditorType:pt,AnnotationEditorUIManager:Lh,AnnotationLayer:z3,AnnotationMode:Sh,AnnotationType:Hi,applyOpacity:Mve,build:N0e,ColorPicker:Ya,createValidAbsoluteUrl:az,CSSConstants:Dve,DOMSVGFactory:RS,DrawLayer:Dr,FeatureTest:Ji,fetchData:cC,findContrastColor:_ve,getDocument:_z,getFilenameFromUrl:Sve,getPdfFilenameFromUrl:xve,getRGB:hC,getUuid:lz,getXfaPageViewport:Eve,GlobalWorkerOptions:Hp,ImageKind:Cw,InvalidPDFException:wD,isDataScheme:Z2,isPdfFile:P3,isValidExplicitDest:zve,MathClamp:Pr,noContextMenu:oo,normalizeUnicode:bve,OPS:xy,OutputScale:Xl,PagesMapper:nn,PasswordResponses:uve,PDFDataRangeTransport:Pz,PDFDateString:SD,PDFWorker:Ey,PermissionFlag:cve,PixelsPerInch:im,RenderingCancelledException:_3,renderRichText:uz,ResponseException:ES,setLayerDimensions:xf,shadow:ut,SignatureExtractor:vp,stopEvent:wi,SupportedImageMimeTypes:xD,TextLayer:ea,TouchManager:Q2,updateUrlHash:oz,Util:Ge,VerbosityLevel:K2,version:k0e,XfaLayer:cz};function On(t){if(t?.length)return t[t.length-1]}function sx(t,e,n){if(t===e)return!0;if(!t||!e)return t==null&&e==null;const i=t.length;if(i!==e.length)return!1;for(let r=0;r<i;r++)if(t[r]!==e[r])return!1;return!0}function E0(t,e){if(t){for(const n of t)if(e(n))return!0}}function rm(t,e){const n=t.indexOf(e);n>=0&&t.splice(n,1)}function jF(t,e,n){for(let i=0;i<e.length;i++)rm(t,e[i]);for(let i=e.length-1;i>=0;i--)t.splice(n,0,e[i])}var ff=t=>t==null||t===""?null:t;function Et(t){return t!=null&&t!==""}function gr(t){return!Et(t)}var LD=t=>t!=null&&typeof t.toString=="function"?t.toString():null,oye=(t,e,n=!1)=>t==null?e==null?0:-1:e==null?1:(typeof t=="object"&&t.toNumber&&(t=t.toNumber()),typeof e=="object"&&e.toNumber&&(e=e.toNumber()),!n||typeof t!="string"?t>e?1:t<e?-1:0:t.localeCompare(e)),gC=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(t){this.frameworkOverrides=t}getListeners(t,e,n){const i=e?this.allAsyncListeners:this.allSyncListeners;let r=i.get(t);return!r&&n&&(r=new Set,i.set(t,r)),r}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(t,e,n=!1){this.getListeners(t,n,!0).add(e)}removeEventListener(t,e,n=!1){const i=this.getListeners(t,n,!1);i&&(i.delete(e),i.size===0&&(n?this.allAsyncListeners:this.allSyncListeners).delete(t))}addGlobalListener(t,e=!1){this.getGlobalListeners(e).add(t)}removeGlobalListener(t,e=!1){this.getGlobalListeners(e).delete(t)}dispatchEvent(t){this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(t){this.firedEvents[t.type]||this.dispatchEvent(t)}dispatchToListeners(t,e){const n=t.type;if(e&&"event"in t){const o=t.event;o instanceof Event&&(t.eventPath=o.composedPath())}const{frameworkOverrides:i}=this,r=o=>{const l=i?()=>i.wrapIncoming(o):o;e?this.dispatchAsync(l):l()},s=this.getListeners(n,e,!1);if((s?.size??0)>0){const o=new Set(s);for(const l of o)s?.has(l)&&r(()=>l(t))}const a=this.getGlobalListeners(e);if(a.size>0){const o=new Set(a);for(const l of o)r(()=>l(n,t))}}getGlobalListeners(t){return t?this.globalAsyncListeners:this.globalSyncListeners}dispatchAsync(t){if(this.asyncFunctionsQueue.push(t),!this.scheduled){const e=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)},n=this.frameworkOverrides;n?n.wrapIncoming(e):e(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const t=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[];for(const e of t)e()}},lye=/[&<>"']/g,cye={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function ax(t){return t?.toString().toString()??null}function Z0(t){return ax(t)?.replace(lye,e=>cye[e])??null}function WF(t){return typeof t=="string"&&t.startsWith("=")&&t.length>1}function uye(t){if(!t||t==null)return null;const e=/([a-z])([A-Z])/g,n=/([A-Z]+)([A-Z])([a-z])/g;return t.replace(e,"$1 $2").replace(n,"$1 $2$3").replace(/\./g," ").split(" ").map(r=>r.substring(0,1).toUpperCase()+(r.length>1?r.substring(1,r.length):"")).join(" ")}function Il(t){return t.eRootDiv.getRootNode()}function kr(t){return Il(t).activeElement}function lo(t){const{gos:e,eRootDiv:n}=t;let i=null;const r=e.get("getDocument");return r&&Et(r)?i=r():n&&(i=n.ownerDocument),i&&Et(i)?i:document}function zz(t){const e=kr(t);return e===null||e===lo(t).body}function W3(t){return lo(t).defaultView||window}function q3(t){let e=null,n=null;try{e=lo(t).fullscreenElement}catch{}finally{e||(e=Il(t));const i=e.querySelector("body");i?n=i:e instanceof ShadowRoot?n=e:e instanceof Document?n=e?.documentElement:n=e}return n}function hye(t){return q3(t)?.clientWidth??(window.innerWidth||-1)}function dye(t){return q3(t)?.clientHeight??(window.innerHeight||-1)}function zf(t,e,n){n==null||typeof n=="string"&&n==""?Vz(t,e):qh(t,e,n)}function qh(t,e,n){t.setAttribute(Uz(e),n.toString())}function Vz(t,e){t.removeAttribute(Uz(e))}function Uz(t){return`aria-${t}`}function qF(t,e){e?t.setAttribute("role",e):t.removeAttribute("role")}function fye(t){const e=t?.direction;return e==="asc"?"ascending":e==="desc"?"descending":e==="mixed"?"other":"none"}function gye(t){return t.getAttribute("aria-label")}function DS(t,e){zf(t,"label",e)}function MS(t,e){zf(t,"labelledby",e)}function jz(t,e){zf(t,"live",e)}function pye(t,e){zf(t,"atomic",e)}function mye(t,e){zf(t,"relevant",e)}function vye(t,e){zf(t,"invalid",e)}function Wz(t,e){zf(t,"hidden",e)}function yye(t,e){qh(t,"expanded",e)}function Cye(t,e){qh(t,"rowcount",e)}function bye(t,e){qh(t,"rowindex",e)}function wye(t,e){qh(t,"colcount",e)}function qz(t,e){qh(t,"colindex",e)}function Sye(t,e){qh(t,"colspan",e)}function xye(t,e){qh(t,"sort",e)}function Aye(t){Vz(t,"sort")}function Eye(t,e){return e===void 0?t("ariaIndeterminate","indeterminate"):e===!0?t("ariaChecked","checked"):t("ariaUnchecked","unchecked")}var Tye="[tabindex], input, select, button, textarea, [href]",Kz="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function Q0(t){return!t||!t.matches("input, select, button, textarea")||!t.matches(Kz)?!1:Fh(t)}function li(t,e,n={}){const{skipAriaHidden:i}=n;t.classList.toggle("ag-hidden",!e),i||Wz(t,!e)}function Rye(t,e,n={}){const{skipAriaHidden:i}=n;t.classList.toggle("ag-invisible",!e),i||Wz(t,!e)}function Yz(t,e){const n="disabled",i=e?s=>s.setAttribute(n,""):s=>s.removeAttribute(n);i(t);const r=t.querySelectorAll("input")??[];for(const s of r)i(s)}function Gp(t,e,n){let i=0;for(;t;){if(t.classList.contains(e))return!0;if(t=t.parentElement,typeof n=="number"){if(++i>n)break}else if(t===n)break}return!1}function ox(t){const{height:e,width:n,borderTopWidth:i,borderRightWidth:r,borderBottomWidth:s,borderLeftWidth:a,paddingTop:o,paddingRight:l,paddingBottom:u,paddingLeft:h,marginTop:g,marginRight:v,marginBottom:y,marginLeft:w,boxSizing:S}=window.getComputedStyle(t),x=Number.parseFloat;return{height:x(e||"0"),width:x(n||"0"),borderTopWidth:x(i||"0"),borderRightWidth:x(r||"0"),borderBottomWidth:x(s||"0"),borderLeftWidth:x(a||"0"),paddingTop:x(o||"0"),paddingRight:x(l||"0"),paddingBottom:x(u||"0"),paddingLeft:x(h||"0"),marginTop:x(g||"0"),marginRight:x(v||"0"),marginBottom:x(y||"0"),marginLeft:x(w||"0"),boxSizing:S}}function Xz(t){const e=ox(t);return e.boxSizing==="border-box"?e.height-e.paddingTop-e.paddingBottom-e.borderTopWidth-e.borderBottomWidth:e.height}function _S(t){const e=ox(t);return e.boxSizing==="border-box"?e.width-e.paddingLeft-e.paddingRight-e.borderLeftWidth-e.borderRightWidth:e.width}function Dye(t){const e=t.getBoundingClientRect(),{borderTopWidth:n,borderLeftWidth:i,borderRightWidth:r,borderBottomWidth:s}=ox(t);return{top:e.top+(n||0),left:e.left+(i||0),right:e.right+(r||0),bottom:e.bottom+(s||0)}}function PS(t,e){let n=t.scrollLeft;return e&&(n=Math.abs(n)),n}function OS(t,e,n){n&&(e*=-1),t.scrollLeft=e}function pC(t){for(;t?.firstChild;)t.firstChild.remove()}function FD(t){t?.parentNode&&t.remove()}function K3(t){return!!t.offsetParent}function Fh(t){return t.checkVisibility?t.checkVisibility({checkVisibilityCSS:!0}):!(!K3(t)||window.getComputedStyle(t).visibility!=="visible")}function Y3(t){const e=document.createElement("div");return e.innerHTML=(t||"").trim(),e.firstChild}function $z(t,e){e==="flex"?(t.style.removeProperty("width"),t.style.removeProperty("minWidth"),t.style.removeProperty("maxWidth"),t.style.flex="1 1 auto"):Th(t,e)}function Th(t,e){e=Zz(e),t.style.width=e,t.style.maxWidth=e,t.style.minWidth=e}function wT(t,e){e=Zz(e),t.style.height=e,t.style.maxHeight=e,t.style.minHeight=e}function Zz(t){return typeof t=="number"?`${t}px`:t}function Qz(t){return t instanceof Node||t instanceof HTMLElement}function tf(t,e,n){n==null||n===""?t.removeAttribute(e):t.setAttribute(e,n.toString())}function Mye(t,e){if(!e.isContentEditable)return;const n=W3(t).getSelection();if(!n)return;const i=lo(t).createRange();i.selectNodeContents(e),i.collapse(!1),n.removeAllRanges(),n.addRange(i)}function wm(t,e,n){const r=W3(t).ResizeObserver,s=r?new r(n):null;return s?.observe(e),()=>s?.disconnect()}function Kh(t,e){const n=W3(t);n.requestAnimationFrame?n.requestAnimationFrame(e):n.webkitRequestAnimationFrame?n.webkitRequestAnimationFrame(e):n.setTimeout(e,0)}var Jz="data-ref",ST;function KF(){return ST??(ST=document.createTextNode(" ")),ST.cloneNode()}function Ry(t){const{attrs:e,children:n,cls:i,ref:r,role:s,tag:a}=t,o=document.createElement(a);if(i&&(o.className=i),r&&o.setAttribute(Jz,r),s&&o.setAttribute("role",s),e)for(const l of Object.keys(e))o.setAttribute(l,e[l]);if(n)if(typeof n=="string")o.textContent=n;else{let l=!0;for(const u of n)u&&(typeof u=="string"?(o.appendChild(document.createTextNode(u)),l=!1):typeof u=="function"?o.appendChild(u()):(l&&(o.appendChild(KF()),l=!1),o.append(Ry(u)),o.appendChild(KF())))}return o}var _ye=["touchstart","touchend","touchmove","touchcancel","scroll"],Pye=["wheel"],xT={},kD=(()=>{const t={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return n=>{if(typeof xT[n]=="boolean")return xT[n];const i=document.createElement(t[n]||"div");return n="on"+n,xT[n]=n in i}})();function Oye(t,e,n){const i=Lye(e);let r;i!=null&&(r={passive:i}),t.addEventListener(e,n,r)}var Lye=t=>{const e=_ye.includes(t),n=Pye.includes(t);if(e)return!0;if(n)return!1};function eV(t,e,n){if(n===0)return!1;const i=Math.abs(t.clientX-e.clientX),r=Math.abs(t.clientY-e.clientY);return Math.max(i,r)<=n}var zp=(t,e)=>{const n=t.identifier;for(let i=0,r=e.length;i<r;++i){const s=e[i];if(s.identifier===n)return s}return null};function Dy(t,e){return t.gos.isElementInThisInstance(e.target)}function Fye(t,e,n){const r=t.getBoundingClientRect().height,s=hye(n)-2,a=dye(n)-2;if(!t.offsetParent)return;const l=Dye(t.offsetParent),{clientY:u,clientX:h}=e;let g=u-l.top-r/2,v=h-l.left-10;const y=lo(n),w=y.defaultView||window,S=w.pageYOffset||y.documentElement.scrollTop,x=w.pageXOffset||y.documentElement.scrollLeft;s>0&&v+t.clientWidth>s+x&&(v=s+x-t.clientWidth),v<0&&(v=0),a>0&&g+t.clientHeight>a+S&&(g=a+S-t.clientHeight),g<0&&(g=0),t.style.left=`${v}px`,t.style.top=`${g}px`}var Sw=(t,...e)=>{for(const n of e){const[i,r,s,a]=n;i.addEventListener(r,s,a),t.push(n)}},X3=t=>{if(t){for(const[e,n,i,r]of t)e.removeEventListener(n,i,r);t.length=0}},Dp=t=>{t.cancelable&&t.preventDefault()};function kye(t,e){return e}function tV(t){return t?.getLocaleTextFunc()??kye}var Ql=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(t){this.beans=t,this.stubContext=t.context,this.eventSvc=t.eventSvc,this.gos=t.gos}destroy(){const{destroyFunctions:t}=this;for(let e=0;e<t.length;e++)t[e]();t.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(t,e,n){this.localEventService||(this.localEventService=new gC),this.localEventService.addEventListener(t,e,n)}removeEventListener(t,e,n){this.localEventService?.removeEventListener(t,e,n)}dispatchLocalEvent(t){this.localEventService?.dispatchEvent(t)}addManagedElementListeners(t,e){return this._setupListeners(t,e)}addManagedEventListeners(t){return this._setupListeners(this.eventSvc,t)}addManagedListeners(t,e){return this._setupListeners(t,e)}_setupListeners(t,e){const n=[];for(const i of Object.keys(e)){const r=e[i];r&&n.push(this._setupListener(t,i,r))}return n}_setupListener(t,e,n){if(this.destroyed)return()=>null;let i;if(Nye(t))t.__addEventListener(e,n),i=()=>(t.__removeEventListener(e,n),null);else{const r=Bye(t);t instanceof HTMLElement?Oye(t,e,n):r?t.addListener(e,n):t.addEventListener(e,n),i=r?()=>(t.removeListener(e,n),null):()=>(t.removeEventListener(e,n),null)}return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(r=>r!==i),null)}setupPropertyListener(t,e){const{gos:n}=this;n.addPropertyEventListener(t,e);const i=()=>(n.removePropertyEventListener(t,e),null);return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(r=>r!==i),null)}addManagedPropertyListener(t,e){return this.destroyed?()=>null:this.setupPropertyListener(t,e)}addManagedPropertyListeners(t,e){if(this.destroyed)return;const n=t.join("-")+this.propertyListenerId++,i=r=>{if(r.changeSet){if(r.changeSet&&r.changeSet.id===this.lastChangeSetIdLookup[n])return;this.lastChangeSetIdLookup[n]=r.changeSet.id}const s={type:"propertyChanged",changeSet:r.changeSet,source:r.source};e(s)};for(const r of t)this.setupPropertyListener(r,i)}getLocaleTextFunc(){return tV(this.beans.localeSvc)}addDestroyFunc(t){this.isAlive()?this.destroyFunctions.push(t):t()}createOptionalManagedBean(t,e){return t?this.createManagedBean(t,e):void 0}createManagedBean(t,e){const n=this.createBean(t,e);return this.addDestroyFunc(this.destroyBean.bind(this,t,e)),n}createBean(t,e,n){return(e||this.stubContext).createBean(t,n)}destroyBean(t,e){return(e||this.stubContext).destroyBean(t)}destroyBeans(t,e){return(e||this.stubContext).destroyBeans(t)}};function Nye(t){return t.__addEventListener!==void 0}function Bye(t){return t.eventServiceType==="global"}var He=class extends Ql{},ND=new Set,$3=(t,e)=>{ND.has(e)||(ND.add(e),t())};$3._set=ND;var Iye={pending:!1,funcs:[]},Hye={pending:!1,funcs:[]};function BD(t,e="setTimeout",n){const i=e==="raf"?Hye:Iye;if(i.funcs.push(t),i.pending)return;i.pending=!0;const r=()=>{const s=i.funcs.slice();i.funcs.length=0,i.pending=!1;for(const a of s)a()};e==="raf"?Kh(n,r):window.setTimeout(r,0)}function I0(t,e,n){let i;return function(...r){const s=this;return window.clearTimeout(i),i=window.setTimeout(function(){t.isAlive()&&e.apply(s,r)},n),i}}function YF(t,e){let n=0;return function(...i){const r=this,s=Date.now();s-n<e||(n=s,t.apply(r,i))}}function Gye(t,e,n,i=100){const r=Date.now();let s=null,a=!1;const o=()=>{s!=null&&(window.clearInterval(s),s=null)};t.addDestroyFunc(o);const l=()=>{const u=Date.now()-r>i;(e()||u)&&(n(),a=!0,o())};l(),a||(s=window.setInterval(l,10))}var zye=new Set(["__proto__","constructor","prototype"]);function Vye(t,e){if(t!=null){if(Array.isArray(t)){for(let n=0;n<t.length;n++)e(n.toString(),t[n]);return}for(const n of Object.keys(t).filter(i=>!zye.has(i)))e(n,t[n])}}function ca(t,e,n=!0,i=!1){Et(e)&&Vye(e,(r,s)=>{let a=t[r];a!==s&&(i&&a==null&&s!=null&&typeof s=="object"&&s.constructor===Object&&(a={},t[r]=a),XF(s)&&XF(a)&&!Array.isArray(a)?ca(a,s,n,i):(n||s!==void 0)&&(t[r]=s))})}function XF(t){return typeof t=="object"&&t!==null}var Z3=class Bc{static applyGlobalGridOptions(e){if(!Bc.gridOptions)return{...e};let n={};return ca(n,Bc.gridOptions,!0,!0),Bc.mergeStrategy==="deep"?ca(n,e,!0,!0):n={...n,...e},Bc.gridOptions.context&&(n.context=Bc.gridOptions.context),e.context&&(Bc.mergeStrategy==="deep"&&n.context&&ca(e.context,n.context,!0,!0),n.context=e.context),n}static applyGlobalGridOption(e,n){if(Bc.mergeStrategy==="deep"){const i=nV(e);if(i&&typeof i=="object"&&typeof n=="object")return Bc.applyGlobalGridOptions({[e]:n})[e]}return n}};Z3.gridOptions=void 0;Z3.mergeStrategy="shallow";var Q3=Z3;function nV(t){return Q3.gridOptions?.[t]}var iV={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipSwitchShowDelay:200,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,cellFlashDuration:500,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,refreshAfterGroupEdit:!1,rowDragInsertDelay:500,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1,enableFilterHandlers:!1},rV="https://www.ag-grid.com";function LS(t,e,...n){t.get("debug")&&console.log("AG Grid: "+e,...n)}function Uye(t,...e){$3(()=>console.warn("AG Grid: "+t,...e),t+e?.join(""))}function J0(t,...e){$3(()=>console.error("AG Grid: "+t,...e),t+e?.join(""))}var sV=new Set,FS={},gf={},xw,aV=!1,oV=!1,jye=!1;function Wye(t){const[e,n]=t.version.split(".")||[],[i,r]=xw.split(".")||[];return e===i&&n===r}function qye(t){xw||(xw=t.version);const e=i=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${i} Please update all modules to the same version.`;t.version?Wye(t)||J0(e(`'${t.moduleName}' is version ${t.version} but the other modules are version ${xw}.`)):J0(e(`'${t.moduleName}' is incompatible.`));const n=t.validate?.();n&&!n.isValid&&J0(`${n.message}`)}function ID(t,e,n=!1){n||(aV=!0),qye(t);const i=t.rowModels??["all"];sV.add(t);let r;e!==void 0?(oV=!0,gf[e]===void 0&&(gf[e]={}),r=gf[e]):r=FS;for(const s of i)r[s]===void 0&&(r[s]={}),r[s][t.moduleName]=t;if(t.dependsOn)for(const s of t.dependsOn)ID(s,e,n)}function Kye(t){delete gf[t]}function HD(t,e,n){const i=r=>!!FS[r]?.[t]||!!gf[e]?.[r]?.[t];return i(n)||i("all")}function lV(){return oV}function Yye(t,e){const n=gf[t]??{};return[...Object.values(FS.all??{}),...Object.values(n.all??{}),...Object.values(FS[e]??{}),...Object.values(n[e]??{})]}function Xye(){return new Set(sV)}function $ye(t,e){const n=gf[t]??{};return[...Object.values(n.all??{}),...Object.values(n[e]??{})]}function Zye(){return aV}function cV(){return jye}function uV(t){for(const e of t){if("setLicenseKey"in e)return e;if(e.dependsOn){const n=uV(e.dependsOn);if(n)return n}}}var kn="35.1.0",$F=2e3,ZF=100,hV="_version_",dV=`${rV}/javascript-data-grid`;function Qye(t){dV=t}function fV(t,e,n){return[iCe(t,e,n)]}function J3(t,e,n,i,r){t(`${i?"warning":"error"} #${e}`,...fV(e,n,r))}function Jye(t){if(!t)return String(t);const e={};for(const n of Object.keys(t))typeof t[n]!="object"&&typeof t[n]!="function"&&(e[n]=t[n]);return JSON.stringify(e)}function eCe(t){let e=t;return t instanceof Error?e=t.toString():typeof t=="object"&&(e=Jye(t)),e}function GD(t,e){return`${t}?${e.toString()}`}function tCe(t,e,n){const i=Array.from(e.entries()).sort((s,a)=>a[1].length-s[1].length);let r=GD(t,e);for(const[s,a]of i){if(s===hV)continue;const o=r.length-n;if(o<=0)break;const l="...",u=o+l.length,h=a.length-u>ZF?a.slice(0,a.length-u)+l:a.slice(0,ZF)+l;e.set(s,h),r=GD(t,e)}return r}function nCe(t,e){const n=new URLSearchParams;if(n.append(hV,kn),e)for(const s of Object.keys(e))n.append(s,eCe(e[s]));const i=`${dV}/errors/${t}`,r=GD(i,n);return r.length<=$F?r:tCe(i,n,$F)}var iCe=(t,e,n)=>{const i=nCe(t,e);return`${`${n?n+` 
`:""}Visit ${i}`}${n?"":` 
  Alternatively register the ValidationModule to see the full message in the console.`}`};function Tt(...t){J3(Uye,t[0],t[1],!0)}function sa(...t){J3(J0,t[0],t[1],!1)}function H0(t,e,n){J3(J0,t,e,!1,n)}function rCe(t,e){const n=e[0];return`error #${n} `+fV(n,e[1],t).join(" ")}function zD(...t){return rCe(void 0,t)}function gV(t,e){return t.get("rowModelType")===e}function mC(t,e){return gV(t,"clientSide")}function pV(t,e){return gV(t,"serverSide")}function ms(t,e){return t.get("domLayout")===e}function mV(t){return dCe(t)!==void 0}function vV(t){return typeof t.get("getRowHeight")=="function"}function sCe(t,e){return e?!t.get("enableStrictPivotColumnOrder"):t.get("maintainColumnOrder")}function aCe({gos:t,formula:e}){const n=t.get("rowNumbers");return n||!!e?.active&&n!==!1}function oCe(t,e,n=!1,i){const{gos:r,environment:s}=t;if(i==null&&(i=s.getDefaultRowHeight()),vV(r)){if(n)return{height:i,estimated:!0};const l={node:e,data:e.data},u=r.getCallback("getRowHeight")(l);if(VD(u))return u===0&&Tt(23),{height:Math.max(1,u),estimated:!1}}if(e.detail&&r.get("masterDetail"))return lCe(r);const a=r.get("rowHeight");return{height:a&&VD(a)?a:i,estimated:!1}}function lCe(t){if(t.get("detailRowAutoHeight"))return{height:1,estimated:!1};const e=t.get("detailRowHeight");return VD(e)?{height:e,estimated:!1}:{height:300,estimated:!1}}function yV(t){const{environment:e,gos:n}=t,i=n.get("rowHeight");if(!i||gr(i))return e.getDefaultRowHeight();const r=e.refreshRowHeightVariable();return r!==-1?r:(Tt(24),e.getDefaultRowHeight())}function VD(t){return!isNaN(t)&&typeof t=="number"&&isFinite(t)}function CV(t,e,n){const i=e[t.getDomDataKey()];return i?i[n]:void 0}function sm(t,e,n,i){const r=t.getDomDataKey();let s=e[r];gr(s)&&(s={},e[r]=s),s[n]=i}function e5(t){return t.get("ensureDomOrder")?!1:t.get("animateRows")}function bV(t){return!(t.get("paginateChildRows")||t.get("groupHideOpenParents")||ms(t,"print"))}function xh(t){return!t.get("autoGroupColumnDef")?.comparator&&!t.get("treeData")}function wV(t,e){return e?!1:t.get("groupDisplayType")==="groupRows"}function cCe(t,e,n){return!!e.group&&!e.footer&&wV(t,n)}function uCe(t){return t?.checkboxes??!0}function hCe(t){if(typeof t=="object")return t.checkboxLocation??"selectionColumn"}function My(t){const e=t.get("cellSelection");return e!==void 0?!!e:t.get("enableRangeSelection")}function Vp(t){const e=t.get("cellSelection")??!1;return(typeof e=="object"&&e.enableColumnSelection)??!1}function dCe(t){const e="beanName"in t&&t.beanName==="gos"?t.get("rowSelection"):t.rowSelection;if(typeof e=="string")switch(e){case"multiple":return"multiRow";case"single":return"singleRow";default:return}switch(e?.mode){case"multiRow":case"singleRow":return e.mode;default:return}}function fCe(t,e=!0){const n=t.get("rowSelection");return typeof n!="object"?e?"all":void 0:n.mode==="multiRow"?n.selectAll:"all"}function gCe(t){const e=t.get("rowSelection");return typeof e=="string"?!1:e?.mode==="multiRow"?e.ctrlASelectsRows??!1:!1}function kS(t){return t.get("columnMenu")==="legacy"}function pCe(t){return!t||t.length<2?t:"on"+t[0].toUpperCase()+t.substring(1)}function mCe(t,e,n){typeof t!="object"&&(t={});const i={...t};for(const r of n){const s=e[r];typeof s<"u"&&(i[r]=s)}return i}function vCe(t,e){if(!t)return;const n={};let i=!1;for(const a of Object.keys(t))n[a]=t[a],i=!0;if(!i)return;const r={type:"gridOptionsChanged",options:n};e.dispatchEvent(r);const s={type:"componentStateChanged",...n};e.dispatchEvent(s)}function Pn(t,e){return t.addCommon(e)}function Aw(t,e){return t[e]??t.gridOptions?.[e]??nV(e)??iV[e]}function yCe({gos:t},e){return e.button===2||e.ctrlKey&&t.get("allowContextMenuWithControlKey")}var CCe={resizable:!0,sortable:!0},bCe=0;function SV(){return bCe++}function Ef(t){return t instanceof Sm}var wCe=["asc","desc",null],SCe=[{type:"absolute",direction:"asc"},{type:"absolute",direction:"desc"},null],Sm=class extends He{constructor(t,e,n,i){super(),this.colDef=t,this.userProvidedColDef=e,this.colId=n,this.primary=i,this.isColumn=!0,this.instanceId=SV(),this.autoHeaderHeight=null,this.sortDef=zl(),this._wasSortExplicitlyRemoved=!1,this.moving=!1,this.resizing=!1,this.menuVisible=!1,this.formulaRef=null,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.colEventSvc=new gC,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.flex=null,this.colIdSanitised=Z0(n)}destroy(){super.destroy(),this.beans.rowSpanSvc?.deregister(this)}getInstanceId(){return this.instanceId}initState(){const{colDef:t,beans:{sortSvc:e,pinnedCols:n,colFlex:i}}=this;e?.initCol(this);const r=t.hide;r!==void 0?this.visible=!r:this.visible=!t.initialHide,n?.initCol(this),i?.initCol(this)}setColDef(t,e,n){const i=t.spanRows!==this.colDef.spanRows;this.colDef=t,this.userProvidedColDef=e,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),i&&(this.beans.rowSpanSvc?.deregister(this),this.initRowSpan()),this.dispatchColEvent("colDefChanged",n)}getUserProvidedColDef(){return this.userProvidedColDef}getParent(){return this.parent}getOriginalParent(){return this.originalParent}postConstruct(){this.initState(),this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip(),this.initRowSpan(),this.addPivotListener()}initDotNotation(){const{gos:t,colDef:{field:e,tooltipField:n}}=this,i=t.get("suppressFieldDotNotation");this.fieldContainsDots=Et(e)&&e.includes(".")&&!i,this.tooltipFieldContainsDots=Et(n)&&n.includes(".")&&!i}initMinAndMaxWidths(){const t=this.colDef;this.minWidth=t.minWidth??this.beans.environment.getDefaultColumnMinWidth(),this.maxWidth=t.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.beans.tooltipSvc?.initCol(this)}initRowSpan(){this.colDef.spanRows&&this.beans.rowSpanSvc?.register(this)}addPivotListener(){const t=this.beans.pivotColDefSvc,e=this.colDef.pivotValueColumn;!t||!e||this.addManagedListeners(e,{colDefChanged:n=>{const i=t.recreateColDef(this.colDef);this.setColDef(i,i,n.source)}})}resetActualWidth(t){const e=this.calculateColInitialWidth(this.colDef);this.setActualWidth(e,t,!0)}calculateColInitialWidth(t){const e=t.width??t.initialWidth??200;return Math.max(Math.min(e,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(t){return this.beans.showRowGroupCols?.isRowGroupDisplayed(this,t)??!1}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}__addEventListener(t,e){this.colEventSvc.addEventListener(t,e)}__removeEventListener(t,e){this.colEventSvc.removeEventListener(t,e)}addEventListener(t,e){this.frameworkEventListenerService=this.beans.frameworkOverrides.createLocalEventListenerWrapper?.(this.frameworkEventListenerService,this.colEventSvc);const n=this.frameworkEventListenerService?.wrap(t,e)??e;this.colEventSvc.addEventListener(t,n)}removeEventListener(t,e){const n=this.frameworkEventListenerService?.unwrap(t,e)??e;this.colEventSvc.removeEventListener(t,n)}createColumnFunctionCallbackParams(t){return Pn(this.gos,{node:t,data:t.data,column:this,colDef:this.colDef})}isSuppressNavigable(t){return this.beans.cellNavigation?.isSuppressNavigable(this,t)??!1}isCellEditable(t){return this.beans.editSvc?.isCellEditable({rowNode:t,column:this})??!1}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(t){return this.isColumnFunc(t,this.colDef.rowDrag)}isDndSource(t){return this.isColumnFunc(t,this.colDef.dndSource)}isCellCheckboxSelection(t){return this.beans.selectionSvc?.isCellCheckboxSelection(this,t)??!1}isSuppressPaste(t){return this.isColumnFunc(t,this.colDef?.suppressPaste??null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(t){return this.colDef[t]??CCe[t]}isColumnFunc(t,e){if(typeof e=="boolean")return e;if(typeof e=="function"){const n=this.createColumnFunctionCallbackParams(t);return e(n)}return!1}createColumnEvent(t,e){return Pn(this.gos,{type:t,column:this,columns:[this],source:e})}isMoving(){return this.moving}getSort(){return this.sortDef.direction}getSortDef(){return this.sortDef.direction?this.sortDef:null}getColDefAllowedSortTypes(){const t=[],{sort:e,initialSort:n}=this.colDef,i=e===null?e:iu(e?.type),r=n===null?n:iu(n?.type);return i&&t.push(i),r&&t.push(r),t}getSortingOrder(){const t=this.getColDefAllowedSortTypes().includes("absolute")?SCe:wCe;return(this.colDef.sortingOrder??this.gos.get("sortingOrder")??t).map(e=>zl(e))}getAvailableSortTypes(){const t=this.getSortingOrder().reduce((e,n)=>(n.direction&&e.push(n.type),e),this.getColDefAllowedSortTypes());return new Set(t)}get wasSortExplicitlyRemoved(){return this._wasSortExplicitlyRemoved}setSortDef(t,e=!1){e||(this._wasSortExplicitlyRemoved=!t.direction),this.sortDef=t}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.getSort()==="asc"}isSortDescending(){return this.getSort()==="desc"}isSortNone(){return gr(this.getSort())}isSorting(){return Et(this.getSort())}getSortIndex(){return this.sortIndex}isMenuVisible(){return this.menuVisible}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(t,e){this.oldLeft=this.left,this.left!==t&&(this.left=t,this.dispatchColEvent("leftChanged",e))}isFilterActive(){return this.filterActive}isHovered(){return Tt(261),!!this.beans.colHover?.isHovered(this)}setFirstRightPinned(t,e){this.firstRightPinned!==t&&(this.firstRightPinned=t,this.dispatchColEvent("firstRightPinnedChanged",e))}setLastLeftPinned(t,e){this.lastLeftPinned!==t&&(this.lastLeftPinned=t,this.dispatchColEvent("lastLeftPinnedChanged",e))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(t,e){const n=t===!0;this.visible!==n&&(this.visible=n,this.dispatchColEvent("visibleChanged",e)),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getFirstRealParent(){let t=this.getOriginalParent();for(;t?.isPadding();)t=t.getOriginalParent();return t}getColumnGroupPaddingInfo(){let t=this.getParent();if(!t?.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const e=t.getPaddingLevel()+1;let n=!0;for(;t;){if(!t.isPadding()){n=!1;break}t=t.getParent()}return{numberOfParents:e,isSpanningTotal:n}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(t){const e=t!==this.autoHeaderHeight;return this.autoHeaderHeight=t,e}createBaseColDefParams(t){return Pn(this.gos,{node:t,data:t.data,colDef:this.colDef,column:this})}getColSpan(t){if(gr(this.colDef.colSpan))return 1;const e=this.createBaseColDefParams(t),n=this.colDef.colSpan(e);return Math.max(n,1)}getRowSpan(t){if(gr(this.colDef.rowSpan))return 1;const e=this.createBaseColDefParams(t),n=this.colDef.rowSpan(e);return Math.max(n,1)}setActualWidth(t,e,n=!1){t=Math.max(t,this.minWidth),t=Math.min(t,this.maxWidth),this.actualWidth!==t&&(this.actualWidth=t,this.flex!=null&&e!=="flex"&&e!=="gridInitializing"&&(this.flex=null),n||this.fireColumnWidthChangedEvent(e)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(t){this.dispatchColEvent("widthChanged",t)}isGreaterThanMax(t){return t>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex}isRowGroupActive(){return this.rowGroupActive}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}isAllowFormula(){return this.colDef.allowFormula===!0}dispatchColEvent(t,e,n){const i=this.createColumnEvent(t,e);n&&ca(i,n),this.colEventSvc.dispatchEvent(i)}dispatchStateUpdatedEvent(t){this.colEventSvc.dispatchEvent({type:"columnStateUpdated",key:t})}};function zl(t){return UD(t)?{direction:t.direction,type:t.type}:{direction:lx(t),type:iu(t)}}function _y(t){return t==="asc"||t==="desc"||t===null}function t5(t){return t==="default"||t==="absolute"}function UD(t){if(!t||typeof t!="object")return!1;const e=t;return t5(e.type)&&_y(e.direction)}function Ew(t,e){return t?e?t.type===e.type&&t.direction===e.direction:t?t.direction===null:!0:e?e.direction===null:!0}function lx(t){return _y(t)?t:null}function iu(t){return t5(t)?t:"default"}function xCe(t,e){const n=e.sortSvc.getDisplaySortForColumn(t),i=iu(n?.type),r=lx(n?.direction),s=t.getAvailableSortTypes(),a=s.has("default"),o=s.has("absolute");return{isDefaultSortAllowed:a,isAbsoluteSortAllowed:o,isAbsoluteSort:i==="absolute",isDefaultSort:i==="default",isAscending:r==="asc",isDescending:r==="desc",direction:r}}function Yr(t){return t instanceof Tw}var Tw=class extends He{constructor(t,e,n,i){super(),this.colGroupDef=t,this.groupId=e,this.padding=n,this.level=i,this.isColumn=!1,this.expandable=!1,this.instanceId=SV(),this.expandableListenerRemoveCallback=null,this.expanded=!!t?.openByDefault}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(t,e){this.colGroupDef=t,this.level=e,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(t=>t.isVisible()):!1}isPadding(){return this.padding}setExpanded(t){this.expanded=t===void 0?!1:t,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(t){this.children=t}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const t=[];return this.addLeafColumns(t),t}forEachLeafColumn(t){if(this.children)for(const e of this.children)Ef(e)?t(e):Yr(e)&&e.forEachLeafColumn(t)}addLeafColumns(t){if(this.children)for(const e of this.children)Ef(e)?t.push(e):Yr(e)&&e.addLeafColumns(t)}getColumnGroupShow(){const t=this.colGroupDef;if(t)return t.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const t=this.onColumnVisibilityChanged.bind(this);for(const e of this.getLeafColumns())e.__addEventListener("visibleChanged",t);this.expandableListenerRemoveCallback=()=>{for(const e of this.getLeafColumns())e.__removeEventListener("visibleChanged",t);this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let t=!1,e=!1,n=!1;const i=this.findChildrenRemovingPadding();for(let s=0,a=i.length;s<a;s++){const o=i[s];if(!o.isVisible())continue;const l=o.getColumnGroupShow();l==="open"?(t=!0,n=!0):l==="closed"?(e=!0,n=!0):(t=!0,e=!0)}const r=t&&e&&n;this.expandable!==r&&(this.expandable=r,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const t=[],e=n=>{for(const i of n)Yr(i)&&i.isPadding()?e(i.children):t.push(i)};return e(this.children),t}onColumnVisibilityChanged(){this.setExpandable()}},ACe={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};function QF(t,e,n){const i={},r=t.gos;return Object.assign(i,r.get("defaultColGroupDef")),Object.assign(i,e),r.validateColDef(i,n),i}var ECe=class{constructor(){this.existingKeys={}}addExistingKeys(t){for(let e=0;e<t.length;e++)this.existingKeys[t[e]]=!0}getUniqueKey(t,e){t=LD(t);let n=0;for(;;){let i=t??e;if(i?n!==0&&(i+="_"+n):i=n,!this.existingKeys[i]){const r=String(i);return t&&n>0&&Tt(273,{providedId:t,usedId:r}),this.existingKeys[r]=!0,r}n++}}},cx="ag-Grid-AutoColumn",TCe="ag-Grid-SelectionColumn",RCe="ag-Grid-RowNumbersColumn";function DCe(t){const e=[],n=i=>{for(let r=0;r<i.length;r++){const s=i[r];Ef(s)?e.push(s):Yr(s)&&n(s.getChildren())}};return n(t),e}function dp(t){return t.reduce((e,n)=>e+n.getActualWidth(),0)}function JF(t,e,n){const i={};if(!e)return;Kc(null,e,s=>{i[s.getInstanceId()]=s}),n&&Kc(null,n,s=>{i[s.getInstanceId()]=null});const r=Object.values(i).filter(s=>s!=null);t.context.destroyBeans(r)}function MCe(t){return t.getId().startsWith(cx)}function n5(t){return(typeof t=="string"?t:"getColId"in t?t.getColId():t.colId)?.startsWith(TCe)??!1}function Up(t){return(typeof t=="string"?t:"getColId"in t?t.getColId():t.colId)?.startsWith(RCe)??!1}function NS(t){let e=[];return t instanceof Array?e=t:typeof t=="string"&&(e=t.split(",")),e}function Rw(t){return t==="optionsUpdated"?"gridOptionsChanged":t}function _Ce(t,e){return t===e||t.colId==e||t.getColDef()===e}var PCe=(t,e)=>(n,i)=>{const r={value1:void 0,value2:void 0};let s=!1;return t&&(t[n]!==void 0&&(r.value1=t[n],s=!0),Et(i)&&t[i]!==void 0&&(r.value2=t[i],s=!0)),!s&&e&&(e[n]!==void 0&&(r.value1=e[n]),Et(i)&&e[i]!==void 0&&(r.value2=e[i])),r};function OCe(t){const{sort:e,initialSort:n}=t,i=UD(e)||_y(e),r=UD(n)||_y(n);return i?zl(e):r?zl(n):null}var LCe=(t,e)=>{Yr(t)&&t.setupExpandable(),t.originalParent=e};function FCe(t,e=null,n,i,r){const s=new ECe,{existingCols:a,existingGroups:o,existingColKeys:l}=kCe(i);s.addExistingKeys(l);const u=xV(t,e,0,n,a,s,o,r),{colGroupSvc:h}=t,g=h?.findMaxDepth(u,0)??0,v=h?h.balanceColumnTree(u,0,g,s):u;return Kc(null,v,LCe),{columnTree:v,treeDepth:g}}function kCe(t){const e=[],n=[],i=[];return t&&Kc(null,t,r=>{if(Yr(r)){const s=r;n.push(s)}else{const s=r;i.push(s.getId()),e.push(s)}}),{existingCols:e,existingGroups:n,existingColKeys:i}}function xV(t,e,n,i,r,s,a,o){if(!e)return[];const{colGroupSvc:l}=t,u=new Array(e.length);for(let h=0;h<u.length;h++){const g=e[h];l&&zCe(g)?u[h]=l.createProvidedColumnGroup(i,g,n,r,s,a,o):u[h]=NCe(t,i,g,r,s,o)}return u}function NCe(t,e,n,i,r,s){const a=ICe(n,i);a&&i?.splice(a.idx,1);let o=a?.column;if(o){const l=jD(t,n,o.getColId());o.setColDef(l,n,s),BCe(t,o,l,s)}else{const l=r.getUniqueKey(n.colId,n.field),u=jD(t,n,l);o=new Sm(u,n,l,e),t.context.createBean(o)}return t.dataTypeSvc?.addColumnListeners(o),o}function AV(t,e,n,i,r,s,a,o){const{sortSvc:l,pinnedCols:u,colFlex:h}=t;n!==void 0&&e.setVisible(!n,o),l&&(l.updateColSort(e,i,o),r!==void 0&&l.setColSortIndex(e,r)),s!==void 0&&u?.setColPinned(e,s),a!==void 0&&h?.setColFlex(e,a)}function BCe(t,e,n,i){AV(t,e,n.hide,n.sort,n.sortIndex,n.pinned,n.flex,i);const r=e.getFlex();if(!(r!=null&&r>0))if(n.width!=null)e.setActualWidth(n.width,i);else{const s=e.getActualWidth();e.setActualWidth(s,i)}}function ICe(t,e){if(e)for(let n=0;n<e.length;n++){const i=e[n].getUserProvidedColDef();if(!i)continue;if(t.colId!=null){if(e[n].getId()===t.colId)return{idx:n,column:e[n]};continue}if(t.field!=null){if(i.field===t.field)return{idx:n,column:e[n]};continue}if(i===t)return{idx:n,column:e[n]}}}function jD(t,e,n,i){const{gos:r,dataTypeSvc:s}=t,a={},o=r.get("defaultColDef");ca(a,o,!1,!0);const l=HCe(t,a,e,n);l&&GCe(t,l,a);const u=a.cellDataType;ca(a,e,!1,!0),u!==void 0&&(a.cellDataType=u);const h=r.get("autoGroupColumnDef"),g=xh(r);return e.rowGroup&&h&&g&&ca(a,{sort:h.sort,initialSort:h.initialSort},!1,!0),s?.postProcess(a),s?.validateColDef(a),r.validateColDef(a,n,i),a}function HCe(t,e,n,i){const r=t.dataTypeSvc?.updateColDefAndGetColumnType(e,n,i),s=n.type??r??e.type;return e.type=s,s?NS(s):void 0}function GCe(t,e,n){if(!e.length)return;const i=Object.assign({},ACe),r=t.gos.get("columnTypes")||{};for(const s of Object.keys(r)){const a=r[s];s in i?Tt(34,{key:s}):(a.type&&Tt(35),i[s]=a)}for(const s of e){const a=i[s.trim()];a?ca(n,a,!1,!0):Tt(36,{t:s})}}function zCe(t){return t.children!==void 0}function Kc(t,e,n){if(e)for(let i=0;i<e.length;i++){const r=e[i];Yr(r)&&Kc(r,r.getChildren(),n),n(r,t)}}function EV(t,e){const n=[],i=[],r=[];return t.forEach(a=>{const o=a.getColDef().lockPosition;o==="right"?r.push(a):o==="left"||o===!0?n.push(a):i.push(a)}),e.get("enableRtl")?[...r,...i,...n]:[...n,...i,...r]}function TV(t,e){let n=!0;return Kc(null,e,i=>{if(!Yr(i))return;const r=i;if(!r.getColGroupDef()?.marryChildren)return;const o=[];for(const v of r.getLeafColumns()){const y=t.indexOf(v);o.push(y)}const l=Math.max.apply(Math,o),u=Math.min.apply(Math,o),h=l-u,g=r.getLeafColumns().length-1;h>g&&(n=!1)}),n}function RV(t,e){if(!t||t.length==0)return;const n=e(t[0]);for(let i=1;i<t.length;i++)if(n!==e(t[i]))return;return n}function DV(t,e,n){if(!e.length)return;const i=e.length===1?e[0]:null,r=RV(e,s=>s.getPinned());t.dispatchEvent({type:"columnPinned",pinned:r??null,columns:e,column:i,source:n})}function VCe(t,e,n){if(!e.length)return;const i=e.length===1?e[0]:null,r=RV(e,s=>s.isVisible());t.dispatchEvent({type:"columnVisible",visible:r,columns:e,column:i,source:n})}function UCe(t,e,n,i){t.dispatchEvent({type:e,columns:n,column:n&&n.length==1?n[0]:null,source:i})}function BS(t,e,n,i,r=null){e?.length&&t.dispatchEvent({type:"columnResized",columns:e,column:e.length===1?e[0]:null,flexColumns:r,finished:n,source:i})}function MV(t,e,n){const{colModel:i,rowGroupColsSvc:r,pivotColsSvc:s,autoColSvc:a,selectionColSvc:o,colAnimation:l,visibleCols:u,pivotResultCols:h,environment:g,valueColsSvc:v,eventSvc:y,gos:w}=t,S=i.getColDefCols()??[],x=o?.getColumns();if(!S.length&&!x?.length)return!1;if(e?.state&&!e.state.forEach)return Tt(32),!1;const T=(L,k,B,H,U)=>{if(!L)return;const W=PCe(k,e.defaultState),j=W("flex").value1,X=W("sort").value1,ne=W("sortType").value1,$=_y(X)||t5(ne),q=iu(ne),z=lx(X),K=$?{type:q,direction:z}:void 0;if(AV(t,L,W("hide").value1,K,W("sortIndex").value1,W("pinned").value1,j,n),j==null){const Q=W("width").value1;if(Q!=null){const oe=L.getColDef().minWidth??g.getDefaultColumnMinWidth();oe!=null&&Q>=oe&&L.setActualWidth(Q,n)}}U||!L.isPrimary()||(v?.syncColumnWithState(L,n,W),r?.syncColumnWithState(L,n,W,B),s?.syncColumnWithState(L,n,W,H))},_=(L,k,B)=>{const H=_V(t,n),U=k.slice(),W={},j={},X=[],ne=[],$=[];let q=0;const z=r?.columns.slice()??[],K=s?.columns.slice()??[];for(const le of L){const V=le.colId;if(V.startsWith(cx)){X.push(le),$.push(le);continue}if(n5(V)){ne.push(le),$.push(le);continue}const ae=B(V);ae?(T(ae,le,W,j,!1),rm(U,ae)):($.push(le),q+=1)}const Q=le=>T(le,null,W,j,!1);U.forEach(Q),r?.sortColumns(t7.bind(r,W,z)),s?.sortColumns(t7.bind(s,j,K)),i.refreshCols(!1,n);const oe=(le,V,Z=[])=>{for(const ae of V){const Ee=le(ae.colId);rm(Z,Ee),T(Ee,ae,null,null,!0)}Z.forEach(Q)};return oe(le=>a?.getColumn(le)??null,X,a?.getColumns()?.slice()),oe(le=>o?.getColumn(le)??null,ne,o?.getColumns()?.slice()),WCe(e,i,w),u.refresh(n),y.dispatchEvent({type:"columnEverythingChanged",source:n}),H(),{unmatchedAndAutoStates:$,unmatchedCount:q}};l?.start();let{unmatchedAndAutoStates:M,unmatchedCount:F}=_(e.state||[],S,L=>i.getColDefCol(L));if(M.length>0||Et(e.defaultState)){const L=h?.getPivotResultCols()?.list??[];F=_(M,L,k=>h?.getPivotResultCol(k)??null).unmatchedCount}return l?.finish(),F===0}function _V(t,e){const{rowGroupColsSvc:n,pivotColsSvc:i,valueColsSvc:r,colModel:s,sortSvc:a,eventSvc:o}=t,l={rowGroupColumns:n?.columns.slice()??[],pivotColumns:i?.columns.slice()??[],valueColumns:r?.columns.slice()??[]},u=e7(t),h={};for(const g of u)h[g.colId]=g;return()=>{const g=(k,B,H,U)=>{const W=B.map(U),j=H.map(U);if(sx(W,j))return;const ne=new Set(B);for(const q of H)ne.delete(q)||ne.add(q);const $=[...ne];o.dispatchEvent({type:k,columns:$,column:$.length===1?$[0]:null,source:e})},v=k=>{const B=[];return s.forAllCols(H=>{const U=h[H.getColId()];U&&k(U,H)&&B.push(H)}),B},y=k=>k.getColId();g("columnRowGroupChanged",l.rowGroupColumns,n?.columns??[],y),g("columnPivotChanged",l.pivotColumns,i?.columns??[],y);const S=v((k,B)=>{const H=k.aggFunc!=null,U=H!=B.isValueActive(),W=H&&k.aggFunc!=B.getAggFunc();return U||W});S.length>0&&UCe(o,"columnValueChanged",S,e),BS(o,v((k,B)=>k.width!=B.getActualWidth()),!0,e),DV(o,v((k,B)=>k.pinned!=B.getPinned()),e),VCe(o,v((k,B)=>k.hide==B.isVisible()),e);const F=v((k,B)=>!Ew(B.getSortDef(),{type:iu(k.sortType),direction:lx(k.sort)})||k.sortIndex!=B.getSortIndex());F.length>0&&a?.dispatchSortChangedEvents(e,F);const L=e7(t);KCe(u,L,e,s,o)}}function e7(t){const{colModel:e,rowGroupColsSvc:n,pivotColsSvc:i}=t,r=e.getColDefCols();if(gr(r)||!e.isAlive())return[];const s=n?.columns,a=i?.columns,o=[],l=h=>{const g=h.isRowGroupActive()&&s?s.indexOf(h):null,v=h.isPivotActive()&&a?a.indexOf(h):null,y=h.isValueActive()?h.getAggFunc():null,w=h.getSortIndex()!=null?h.getSortIndex():null;o.push({colId:h.getColId(),width:h.getActualWidth(),hide:!h.isVisible(),pinned:h.getPinned(),sort:h.getSort(),sortType:h.getSortDef()?.type,sortIndex:w,aggFunc:y,rowGroup:h.isRowGroupActive(),rowGroupIndex:g,pivot:h.isPivotActive(),pivotIndex:v,flex:h.getFlex()??null})};e.forAllCols(h=>l(h));const u=new Map(e.getCols().map((h,g)=>[h.getColId(),g]));return o.sort((h,g)=>{const v=u.has(h.colId)?u.get(h.colId):-1,y=u.has(g.colId)?u.get(g.colId):-1;return v-y}),o}function jCe(t){const e=(x,T)=>x??T??null,n=t.getColDef(),i=zl(e(n.sort,n.initialSort)),r=i.direction,s=i.type,a=e(n.sortIndex,n.initialSortIndex),o=e(n.hide,n.initialHide),l=e(n.pinned,n.initialPinned),u=e(n.width,n.initialWidth),h=e(n.flex,n.initialFlex);let g=e(n.rowGroupIndex,n.initialRowGroupIndex),v=e(n.rowGroup,n.initialRowGroup);g==null&&!v&&(g=null,v=null);let y=e(n.pivotIndex,n.initialPivotIndex),w=e(n.pivot,n.initialPivot);y==null&&!w&&(y=null,w=null);const S=e(n.aggFunc,n.initialAggFunc);return{colId:t.getColId(),sort:r,sortType:s,sortIndex:a,hide:o,pinned:l,width:u,flex:h,rowGroup:v,rowGroupIndex:g,pivot:w,pivotIndex:y,aggFunc:S}}function WCe(t,e,n){if(!t.applyOrder||!t.state)return;const i=[];for(const r of t.state)r.colId!=null&&i.push(r.colId);qCe(e.cols,i,e,n)}function qCe(t,e,n,i){if(t==null)return;let r=[];const s={};for(const o of e){if(s[o])continue;const l=t.map[o];l&&(r.push(l),s[o]=!0)}let a=0;for(const o of t.list){const l=o.getColId();if(s[l]!=null)continue;l.startsWith(cx)?r.splice(a++,0,o):r.push(o)}if(r=EV(r,i),!TV(r,n.getColTree())){Tt(39);return}t.list=r}function KCe(t,e,n,i,r){const s={};for(const h of e)s[h.colId]=h;const a={};for(const h of t)s[h.colId]&&(a[h.colId]=!0);const o=t.filter(h=>a[h.colId]),l=e.filter(h=>a[h.colId]),u=[];l.forEach((h,g)=>{const v=o?.[g];if(v&&v.colId!==h.colId){const y=i.getCol(v.colId);y&&u.push(y)}}),u.length&&r.dispatchEvent({type:"columnMoved",columns:u,column:u.length===1?u[0]:null,finished:!0,source:n})}var t7=(t,e,n,i)=>{const r=t[n.getId()],s=t[i.getId()],a=r!=null,o=s!=null;if(a&&o)return r-s;if(a)return-1;if(o)return 1;const l=e.indexOf(n),u=e.indexOf(i),h=l>=0,g=u>=0;return h&&g?l-u:h?-1:1};function PV(t,e){return t+"_"+e}function zi(t){return t instanceof Py}var Py=class extends He{constructor(t,e,n,i){super(),this.providedColumnGroup=t,this.groupId=e,this.partId=n,this.pinned=i,this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null,this.colIdSanitised=Z0(this.getUniqueId())}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}getUniqueId(){return PV(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){const t=this.getProvidedColumnGroup().getLeafColumns();return!t||t.length===0?!1:t.every(e=>e.isMoving())}checkLeft(){for(const t of this.displayedChildren)zi(t)&&t.checkLeft();if(this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const e=On(this.displayedChildren).getLeft();this.setLeft(e)}else{const t=this.displayedChildren[0].getLeft();this.setLeft(t)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(t){this.oldLeft=this.left,this.left!==t&&(this.left=t,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let t=0;for(const e of this.displayedChildren??[])t+=e.getActualWidth();return t}isResizable(){if(!this.displayedChildren)return!1;let t=!1;for(const e of this.displayedChildren)e.isResizable()&&(t=!0);return t}getMinWidth(){let t=0;for(const e of this.displayedChildren)t+=e.getMinWidth();return t}addChild(t){this.children||(this.children=[]),this.children.push(t)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const t=[];return this.addLeafColumns(t),t}getDisplayedLeafColumns(){const t=[];return this.addDisplayedLeafColumns(t),t}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(t){this.providedColumnGroup.setExpanded(t)}isAutoHeaderHeight(){return!!this.getColGroupDef()?.autoHeaderHeight}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(t){const e=t!==this.autoHeaderHeight;return this.autoHeaderHeight=t,e}addDisplayedLeafColumns(t){for(const e of this.displayedChildren??[])Ef(e)?t.push(e):zi(e)&&e.addDisplayedLeafColumns(t)}addLeafColumns(t){for(const e of this.children??[])Ef(e)?t.push(e):zi(e)&&e.addLeafColumns(t)}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const t=this.getParent();return!this.isPadding()||!t?.isPadding()?0:1+t.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let t=this;for(;t?.isPadding();)t=t.getParent();if(!(t?t.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}for(const n of this.children??[]){if(zi(n)&&!n.displayedChildren?.length)continue;switch(n.getColumnGroupShow()){case"open":t.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(n);break;case"closed":t.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(n);break;default:this.displayedChildren.push(n);break}}this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},Le={BACKSPACE:"Backspace",TAB:"Tab",ENTER:"Enter",ESCAPE:"Escape",SPACE:" ",LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown",DELETE:"Delete",F2:"F2",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",PAGE_HOME:"Home",PAGE_END:"End",A:"KeyA",C:"KeyC",D:"KeyD",V:"KeyV",X:"KeyX",Y:"KeyY",Z:"KeyZ"},YCe=65,XCe=67,$Ce=86,ZCe=68,QCe=90,JCe=89;function OV(t){const{keyCode:e}=t;let n;switch(e){case YCe:n=Le.A;break;case XCe:n=Le.C;break;case $Ce:n=Le.V;break;case ZCe:n=Le.D;break;case QCe:n=Le.Z;break;case JCe:n=Le.Y;break;default:n=t.code}return n}var Fr=class G0{constructor(e){this.status=0,this.resolution=null,this.waiters=[],e(n=>this.onDone(n),n=>this.onReject(n))}static all(e){return e.length?new G0(n=>{let i=e.length;const r=new Array(i);e.forEach((s,a)=>{s.then(o=>{r[a]=o,i--,i===0&&n(r)})})}):G0.resolve()}static resolve(e=null){return new G0(n=>n(e))}then(e){return new G0(n=>{this.status===1?n(e(this.resolution)):this.waiters.push(i=>n(e(i)))})}onDone(e){this.status=1,this.resolution=e;for(const n of this.waiters)n(e)}onReject(e){}},bt=null;function ux(t){return Ry(t)}function ebe(t,e,n){const i=Vf(t,e,n);if(i){const{className:s}=i;if(typeof s=="string"&&s.includes("ag-icon")||typeof s=="object"&&s["ag-icon"])return i}const r=ux({tag:"span"});return r.appendChild(i),r}function Vf(t,e,n){let i=null;t==="smallDown"?Tt(262):t==="smallLeft"?Tt(263):t==="smallRight"&&Tt(264);const r=n?.getColDef().icons;if(r&&(i=r[t]),e.gos&&!i){const s=e.gos.get("icons");s&&(i=s[t])}if(i){let s;if(typeof i=="function")s=i();else if(typeof i=="string")s=i;else{Tt(38,{iconName:t});return}if(typeof s=="string")return Y3(s);if(Qz(s))return s;Tt(133,{iconName:t});return}else{const s=e.registry.getIcon(t);return s||e.validation?.validateIcon(t),ux({tag:"span",cls:`ag-icon ag-icon-${s??t}`,role:"presentation",attrs:{unselectable:"on"}})}}var vC=class{constructor(t){this.cssClassStates={},this.getGui=t}toggleCss(t,e){if(!t)return;if(t.includes(" ")){const i=(t||"").split(" ");if(i.length>1){for(const r of i)this.toggleCss(r,e);return}}this.cssClassStates[t]!==e&&t.length&&(this.getGui()?.classList.toggle(t,e),this.cssClassStates[t]=e)}},tbe=0,LV=class extends Ql{constructor(t,e){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=tbe++,this.cssManager=new vC(()=>this.eGui),this.componentSelectors=new Map((e??[]).map(n=>[n.selector,n])),t&&this.setTemplate(t)}preConstruct(){this.wireTemplate(this.getGui()),this.addGlobalCss()}wireTemplate(t,e){t&&this.gos&&(this.applyElementsToComponent(t),this.createChildComponentsFromTags(t,e))}getCompId(){return this.compId}getDataRefAttribute(t){return t.getAttribute?t.getAttribute(Jz):null}applyElementsToComponent(t,e,n,i=null){if(e===void 0&&(e=this.getDataRefAttribute(t)),e){const r=this[e];if(r===bt)this[e]=i??t;else{const s=n?.[e];if(!this.suppressDataRefValidation&&!s)throw new Error(`data-ref: ${e} on ${this.constructor.name} with ${r}`)}}}createChildComponentsFromTags(t,e){const n=[];for(const i of t.childNodes??[])n.push(i);for(const i of n){if(!(i instanceof HTMLElement))continue;const r=this.createComponentFromElement(i,s=>{const a=s.getGui();if(a)for(const o of i.attributes??[])a.setAttribute(o.name,o.value)},e);if(r){if(r.addItems&&i.children.length){this.createChildComponentsFromTags(i,e);const s=Array.prototype.slice.call(i.children);r.addItems(s)}this.swapComponentForNode(r,t,i)}else i.childNodes&&this.createChildComponentsFromTags(i,e)}}createComponentFromElement(t,e,n){const i=t.nodeName,r=this.getDataRefAttribute(t),s=i.indexOf("AG-")===0,a=s?this.componentSelectors.get(i):null;let o=null;if(a){const l=n&&r?n[r]:void 0;o=new a.component(l),o.setParentComponent(this),this.createBean(o,null,e)}else if(s)throw new Error(`selector: ${i}`);return this.applyElementsToComponent(t,r,n,o),o}swapComponentForNode(t,e,n){const i=t.getGui();e.replaceChild(i,n),e.insertBefore(document.createComment(n.nodeName),i),this.addDestroyFunc(this.destroyBean.bind(this,t))}activateTabIndex(t,e){const n=e??this.gos.get("tabIndex");t||(t=[]),t.length||t.push(this.getGui());for(const i of t)i.setAttribute("tabindex",n.toString())}setTemplate(t,e,n){let i;typeof t=="string"||t==null?i=Y3(t):i=Ry(t),this.setTemplateFromElement(i,e,n)}setTemplateFromElement(t,e,n,i=!1){if(this.eGui=t,this.suppressDataRefValidation=i,e)for(let r=0;r<e.length;r++){const s=e[r];this.componentSelectors.set(s.selector,s)}this.wireTemplate(t,n)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(t){this.parentComponent=t}getParentComponent(){return this.parentComponent}setGui(t){this.eGui=t}queryForHtmlElement(t){return this.eGui.querySelector(t)}getContainerAndElement(t,e){let n=e;return t==null?null:(n||(n=this.eGui),Qz(t)?{element:t,parent:n}:{element:t.getGui(),parent:n})}prependChild(t,e){const{element:n,parent:i}=this.getContainerAndElement(t,e)||{};!n||!i||i.prepend(n)}appendChild(t,e){const{element:n,parent:i}=this.getContainerAndElement(t,e)||{};!n||!i||i.appendChild(n)}isDisplayed(){return this.displayed}setVisible(t,e={}){if(t!==this.visible){this.visible=t;const{skipAriaHidden:n}=e;Rye(this.eGui,t,{skipAriaHidden:n})}}setDisplayed(t,e={}){if(t!==this.displayed){this.displayed=t;const{skipAriaHidden:n}=e;li(this.eGui,t,{skipAriaHidden:n});const i={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(i)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),super.destroy()}addGuiEventListener(t,e,n){this.eGui.addEventListener(t,e,n),this.addDestroyFunc(()=>this.eGui.removeEventListener(t,e))}addCss(t){this.cssManager.toggleCss(t,!0)}removeCss(t){this.cssManager.toggleCss(t,!1)}toggleCss(t,e){this.cssManager.toggleCss(t,e)}registerCSS(t){this.css===n7?(this.css=[t],this.addGlobalCss()):(this.css||(this.css=[]),this.css.push(t))}addGlobalCss(){if(Array.isArray(this.css)){const t="component-"+Object.getPrototypeOf(this)?.constructor?.name;for(const e of this.css??[])this.beans.environment.addGlobalCSS(e,t)}this.css=n7}},n7=Symbol(),fu=class extends LV{},nbe=".ag-dnd-ghost{align-items:center;background-color:var(--ag-drag-and-drop-image-background-color);border:var(--ag-drag-and-drop-image-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-drag-and-drop-image-shadow);color:var(--ag-text-color);cursor:move;display:flex;font-weight:500;gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);overflow:hidden;padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding);text-overflow:ellipsis;transform:translateY(calc(var(--ag-spacing)*2));white-space:nowrap}.ag-dnd-ghost-not-allowed{border:var(--ag-drag-and-drop-image-not-allowed-border)}",ibe={tag:"div",children:[{tag:"div",ref:"eGhost",cls:"ag-dnd-ghost ag-unselectable",children:[{tag:"span",ref:"eIcon",cls:"ag-dnd-ghost-icon ag-shake-left-to-right"},{tag:"div",ref:"eLabel",cls:"ag-dnd-ghost-label"}]}]},rbe=class extends fu{constructor(){super(),this.dragSource=null,this.eIcon=bt,this.eLabel=bt,this.eGhost=bt,this.registerCSS(nbe)}postConstruct(){const t=e=>ebe(e,this.beans,null);this.dropIconMap={pinned:t("columnMovePin"),hide:t("columnMoveHide"),move:t("columnMoveMove"),left:t("columnMoveLeft"),right:t("columnMoveRight"),group:t("columnMoveGroup"),aggregate:t("columnMoveValue"),pivot:t("columnMovePivot"),notAllowed:t("dropNotAllowed")}}init(t){this.dragSource=t.dragSource,this.setTemplate(ibe),this.beans.environment.applyThemeClasses(this.eGhost)}destroy(){this.dragSource=null,super.destroy()}setIcon(t,e){const{eGhost:n,eIcon:i,dragSource:r,dropIconMap:s,gos:a}=this;pC(i);let o=null;t||(t=r?.getDefaultIconName?r.getDefaultIconName():"notAllowed"),o=s[t],n.classList.toggle("ag-dnd-ghost-not-allowed",t==="notAllowed"),i.classList.toggle("ag-shake-left-to-right",e),!(o===s.hide&&a.get("suppressDragLeaveHidesColumns"))&&o&&i.appendChild(o)}setLabel(t){this.eLabel.textContent=t}},sbe=class extends Ql{constructor(){super(...arguments),this.beanName="dragAndDrop",this.dragSourceAndParamsList=[],this.dragItem=null,this.dragInitialSourcePointerOffsetX=0,this.dragInitialSourcePointerOffsetY=0,this.lastMouseEvent=null,this.lastDraggingEvent=null,this.dragSource=null,this.dragImageCompPromise=null,this.dragImageComp=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0,this.dropTargets=[],this.externalDropZoneCount=0,this.lastDropTarget=null}addDragSource(t,e=!1){const n={capturePointer:!0,dragSource:t,eElement:t.eElement,dragStartPixels:t.dragStartPixels,onDragStart:i=>this.onDragStart(t,i),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:e};this.dragSourceAndParamsList.push(n),this.beans.dragSvc.addDragSource(n)}setDragImageCompIcon(t,e=!1){const n=this.dragImageComp;n&&(e||this.dragImageLastIcon!==t)&&(this.dragImageLastIcon=t,n.setIcon(t,e))}removeDragSource(t){const{dragSourceAndParamsList:e,beans:n}=this;for(let i=0,r=e.length;i<r;i++)if(e[i].dragSource===t){const s=e[i];n.dragSvc?.removeDragSource(s),e.splice(i,1);break}}destroy(){const{dragSourceAndParamsList:t,dropTargets:e,beans:n}=this,i=n.dragSvc;for(const r of t)i?.removeDragSource(r);t.length=0,e.length=0,this.externalDropZoneCount=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){const t=this.lastMouseEvent;t&&this.onDragging(t,!0)}onDragStart(t,e){this.lastMouseEvent=e,this.dragSource=t,this.dragItem=t.getDragItem();const n=t.eElement.getBoundingClientRect();this.dragInitialSourcePointerOffsetX=e.clientX-n.left,this.dragInitialSourcePointerOffsetY=e.clientY-n.top,t.onDragStarted?.(),this.createAndUpdateDragImageComp(t)}onDragStop(t){const{dragSource:e,lastDropTarget:n}=this;if(e?.onDragStopped?.(),n){const i=this.dropTargetEvent(n,t,!1);n.onDragStop?.(i)}this.clearDragAndDropProperties()}onDragCancel(){const{dragSource:t,lastDropTarget:e,lastMouseEvent:n}=this;if(t?.onDragCancelled?.(),e&&n){const i=this.dropTargetEvent(e,n,!1);e.onDragCancel?.(i)}this.clearDragAndDropProperties()}onDragging(t,e=!1){this.positionDragImageComp(t);const n=this.findCurrentDropTarget(t),{lastDropTarget:i,dragSource:r,dragItem:s}=this;let a=!1;if(n!==i){if(a=!0,i){const o=this.dropTargetEvent(i,t,e);i.onDragLeave?.(o)}if(i!==null&&!n?this.handleExit(r,s):i===null&&n&&this.handleEnter(r,s),n){const o=this.dropTargetEvent(n,t,e);n.onDragEnter?.(o)}this.lastDropTarget=n}else if(n){const o=this.dropTargetEvent(n,t,e);n.onDragging?.(o),o?.changed&&(a=!0)}this.lastMouseEvent=t,a&&this.updateDragImageComp()}clearDragAndDropProperties(){this.removeDragImageComp(this.dragImageComp),this.dragImageCompPromise=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0,this.lastMouseEvent=null,this.lastDraggingEvent=null,this.lastDropTarget=null,this.dragItem=null,this.dragInitialSourcePointerOffsetX=0,this.dragInitialSourcePointerOffsetY=0,this.dragSource=null}getAllContainersFromDropTarget(t){const e=t.getContainer(),n=t.getSecondaryContainers?.(),i=n?.length;if(!i)return[[e]];const r=new Array(i+1);r[0]=[e];for(let s=0;s<i;++s)r[s+1]=n[s];return r}isMouseOnDropTarget(t,e){const n=this.getAllContainersFromDropTarget(e);let i=!1;const r=(o,l)=>{for(const u of l){const{width:h,height:g,left:v,right:y,top:w,bottom:S}=u.getBoundingClientRect();if(h===0||g===0)return!1;const x=o.clientX>=v&&o.clientX<y,T=o.clientY>=w&&o.clientY<S;if(!x||!T)return!1}return!0};for(const o of n)if(r(t,o)){i=!0;break}const{eElement:s,type:a}=this.dragSource;return e.targetContainsSource&&!e.getContainer().contains(s)?!1:i&&e.isInterestedIn(a,s)}findCurrentDropTarget(t){const e=[],n=this.dropTargets;for(let a=0,o=n.length;a<o;++a){const l=n[a];this.isMouseOnDropTarget(t,l)&&e.push(l)}const i=e.length;if(i===0)return null;if(i===1)return e[0];const s=Il(this.beans).elementsFromPoint(t.clientX,t.clientY);for(let a=0,o=s.length;a<o;++a){const l=s[a];for(let u=0,h=e.length;u<h;u++){const g=e[u],v=this.getAllContainersFromDropTarget(g);let y=!1;for(let w=0,S=v.length;w<S&&!y;w++){const x=v[w];for(let T=0,_=x.length;T<_;T++)if(x[T]===l){y=!0;break}}if(y)return g}}return null}addDropTarget(t){this.dropTargets.push(t),t.external&&this.externalDropZoneCount++}removeDropTarget(t){const e=t.getContainer(),n=this.dropTargets;let i=0;for(let r=0,s=n.length;r<s;++r){const a=n[r];if(a.getContainer()===e){a.external&&--this.externalDropZoneCount;continue}i!==r&&(n[i]=a),++i}n.length=i}hasExternalDropZones(){return this.externalDropZoneCount>0}findExternalZone(t){const e=this.dropTargets;for(let n=0,i=e.length;n<i;++n){const r=e[n];if(r.external&&r.getContainer()===t)return r}return null}dropTargetEvent(t,e,n){const{dragSource:i,dragItem:r,lastDraggingEvent:s,lastMouseEvent:a,dragInitialSourcePointerOffsetX:o,dragInitialSourcePointerOffsetY:l}=this,u=t.getContainer(),h=u.getBoundingClientRect(),{clientX:g,clientY:v}=e,y=g-(a?.clientX||0),w=v-(a?.clientY||0),S=this.createEvent({event:e,x:g-h.left,y:v-h.top,vDirection:w>0?"down":w<0?"up":null,hDirection:y<0?"left":y>0?"right":null,initialSourcePointerOffsetX:o,initialSourcePointerOffsetY:l,dragSource:i,fromNudge:n,dragItem:r,dropZoneTarget:u,dropTarget:s?.dropTarget??null,changed:!!s?.changed});return this.lastDraggingEvent=S,S}positionDragImageComp(t){const e=this.dragImageComp?.getGui();e&&Fye(e,t,this.beans)}removeDragImageComp(t){this.dragImageComp===t&&(this.dragImageComp=null),t&&(t.getGui()?.remove(),this.destroyBean(t))}createAndUpdateDragImageComp(t){const e=this.createDragImageComp(t)??null;this.dragImageCompPromise=e,e?.then(n=>{const i=this.lastMouseEvent;if(e!==this.dragImageCompPromise||!i||!this.isAlive()){this.destroyBean(n);return}this.dragImageCompPromise=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0;const r=this.dragImageComp;r!==n&&(this.dragImageComp=n,this.removeDragImageComp(r)),n&&(this.appendDragImageComp(n),this.updateDragImageComp(),this.positionDragImageComp(i))})}appendDragImageComp(t){const e=t.getGui(),n=e.style;n.position="absolute",n.zIndex="9999",this.beans.dragSvc?.hasPointerCapture()&&(n.pointerEvents="none"),this.gos.setInstanceDomData(e),this.beans.environment.applyThemeClasses(e),n.top="20px",n.left="20px";const i=q3(this.beans);i?i.appendChild(e):this.warnNoBody()}updateDragImageComp(){const{dragImageComp:t,dragSource:e,lastDropTarget:n,lastDraggingEvent:i,dragImageLastLabel:r}=this;if(!t)return;this.setDragImageCompIcon(n?.getIconName?.(i)??null);let s=e?.dragItemName;typeof s=="function"&&(s=s(i)),s||(s=""),r!==s&&(this.dragImageLastLabel=s,t.setLabel(s))}};function abe(t){return t?t.prototype&&"getGui"in t.prototype:!1}function obe(t,e,n,i){const{name:r}=n;let s,a,o,l,u,h;if(e){const g=e,v=g[r+"Selector"],y=v?v(i):null,w=S=>{typeof S=="string"?s=S:S!=null&&S!==!0&&(t.isFrameworkComponent(S)?o=S:a=S)};y?(w(y.component),l=y.params,u=y.popup,h=y.popupPosition):w(g[r])}return{compName:s,jsComp:a,fwComp:o,paramsFromSelector:l,popupFromSelector:u,popupPositionFromSelector:h}}var lbe=class extends He{constructor(){super(...arguments),this.beanName="userCompFactory"}wireBeans(t){this.agCompUtils=t.agCompUtils,this.registry=t.registry,this.frameworkCompWrapper=t.frameworkCompWrapper,this.gridOptions=t.gridOptions}getCompDetailsFromGridOptions(t,e,n,i=!1){return this.getCompDetails(this.gridOptions,t,e,n,i)}getCompDetails(t,e,n,i,r=!1){const{name:s,cellRenderer:a}=e;let{compName:o,jsComp:l,fwComp:u,paramsFromSelector:h,popupFromSelector:g,popupPositionFromSelector:v}=obe(this.beans.frameworkOverrides,t,e,i),y,w;const S=M=>{const F=this.registry.getUserComponent(s,M);F&&(l=F.componentFromFramework?void 0:F.component,u=F.componentFromFramework?F.component:void 0,y=F.params,w=F.processParams)};if(o!=null&&S(o),l==null&&u==null&&n!=null&&S(n),l&&a&&!abe(l)&&(l=this.agCompUtils?.adaptFunction(e,l)),!l&&!u){const{validation:M}=this.beans;r&&(o!==n||!n)?o?M?.isProvidedUserComp(o)||sa(50,{compName:o}):n?M||sa(260,{...this.gos.getModuleErrorParams(),propName:s,compName:n}):sa(216,{name:s}):n&&!M&&sa(146,{comp:n});return}const x=this.mergeParams(t,e,i,h,y,w),T=l==null,_=l??u;return{componentFromFramework:T,componentClass:_,params:x,type:e,popupFromSelector:g,popupPositionFromSelector:v,newAgStackInstance:()=>this.newAgStackInstance(_,T,x,e)}}newAgStackInstance(t,e,n,i){const r=!e;let s;r?s=new t:s=this.frameworkCompWrapper.wrap(t,i.mandatoryMethods,i.optionalMethods,i),this.createBean(s);const a=s.init?.(n);return a==null?Fr.resolve(s):a.then(()=>s)}mergeParams(t,e,n,i=null,r,s){const a={...n,...r},l=t?.[e.name+"Params"];if(typeof l=="function"){const u=l(n);ca(a,u)}else typeof l=="object"&&ca(a,l);return ca(a,i),s?s(a):a}},cbe={name:"dragAndDropImageComponent",mandatoryMethods:["setIcon","setLabel"]},ube={name:"headerComponent",optionalMethods:["refresh"]},hbe={name:"innerHeaderComponent"},dbe={name:"innerHeaderGroupComponent"},fbe={name:"headerGroupComponent"},gbe={name:"cellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},pbe={name:"loadingCellRenderer",cellRenderer:!0},mbe={name:"fullWidthCellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},vbe={name:"loadingCellRenderer",cellRenderer:!0},ybe={name:"groupRowRenderer",optionalMethods:["afterGuiAttached"],cellRenderer:!0},Cbe={name:"detailCellRenderer",optionalMethods:["refresh"],cellRenderer:!0};function bbe(t,e){return t.getCompDetailsFromGridOptions(cbe,"agDragAndDropImage",e,!0)}function wbe(t,e,n){return t.getCompDetails(e,ube,"agColumnHeader",n)}function Sbe(t,e,n){return t.getCompDetails(e,hbe,void 0,n)}function xbe(t,e){const n=e.columnGroup.getColGroupDef();return t.getCompDetails(n,fbe,"agColumnGroupHeader",e)}function Abe(t,e,n){return t.getCompDetails(e,dbe,void 0,n)}function Ebe(t,e){return t.getCompDetailsFromGridOptions(mbe,void 0,e,!0)}function Tbe(t,e){return t.getCompDetailsFromGridOptions(vbe,"agLoadingCellRenderer",e,!0)}function Rbe(t,e){return t.getCompDetailsFromGridOptions(ybe,"agGroupRowRenderer",e,!0)}function Dbe(t,e){return t.getCompDetailsFromGridOptions(Cbe,"agDetailCellRenderer",e,!0)}function i7(t,e,n){return t.getCompDetails(e,gbe,void 0,n)}function r7(t,e,n){return t.getCompDetails(e,pbe,"agSkeletonCellRenderer",n,!0)}var Mbe=class extends sbe{createEvent(t){return Pn(this.gos,t)}createDragImageComp(t){const{gos:e,beans:n}=this;return bbe(n.userCompFactory,Pn(e,{dragSource:t}))?.newAgStackInstance()}handleEnter(t,e){t?.onGridEnter?.(e)}handleExit(t,e){t?.onGridExit?.(e)}warnNoBody(){Tt(54)}isDropZoneWithinThisGrid(t){return this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody.contains(t.dropZoneTarget)}registerGridDropTarget(t,e){const n={getContainer:t,isInterestedIn:i=>i===1||i===0,getIconName:()=>"notAllowed"};this.addDropTarget(n),e.addDestroyFunc(()=>this.removeDropTarget(n))}},AT,ET,TT,RT,WD,qD,DT;function i5(){return AT===void 0&&(AT=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),AT}function FV(){return ET===void 0&&(ET=/(firefox)/i.test(navigator.userAgent)),ET}function kV(){return TT===void 0&&(TT=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),TT}function ey(){return RT===void 0&&(RT=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),RT}function s7(t){if(!t)return null;const e=t.tabIndex,n=t.getAttribute("tabIndex");return e===-1&&(n===null||n===""&&!FV())?null:e.toString()}function _be(){if(DT!==void 0)return DT;if(!document.body)return-1;let t=1e6;const e=FV()?6e6:1e9,n=document.createElement("div");for(document.body.appendChild(n);;){const i=t*2;if(n.style.height=i+"px",i>e||n.clientHeight!==i)break;t=i}return n.remove(),DT=t,t}function r5(){return qD==null&&NV(),qD}function NV(){const t=document.body,e=document.createElement("div");e.style.width=e.style.height="100px",e.style.opacity="0",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",e.style.position="absolute",t.appendChild(e);let n=e.offsetWidth-e.clientWidth;n===0&&e.clientWidth===0&&(n=null),e.parentNode&&e.remove(),n!=null&&(qD=n,WD=n===0)}function BV(){return WD==null&&NV(),WD}var KD=!1,IS=0;function Pbe(t){IS>0||(t.addEventListener("keydown",HS),t.addEventListener("mousedown",HS))}function Obe(t){IS>0||(t.removeEventListener("keydown",HS),t.removeEventListener("mousedown",HS))}function HS(t){const e=KD,n=t.type==="keydown";n&&(t.ctrlKey||t.metaKey||t.altKey)||e!==n&&(KD=n)}function Lbe(t){const e=lo(t);return Pbe(e),IS++,()=>{IS--,Obe(e)}}function IV(){return KD}function jp(t,e,n=!1){const i=Tye;let r=Kz;e&&(r+=", "+e),n&&(r+=', [tabindex="-1"]');const s=Array.prototype.slice.apply(t.querySelectorAll(i)).filter(l=>Fh(l)),a=Array.prototype.slice.apply(t.querySelectorAll(r));return a.length?((l,u)=>l.filter(h=>u.indexOf(h)===-1))(s,a):s}function GS(t,e=!1,n=!1,i=!1){const r=jp(t,i?".ag-tab-guard":null,n),s=e?On(r):r[0];return s?(s.focus({preventScroll:!0}),!0):!1}function hx(t,e,n,i){const r=jp(e,null),s=kr(t);let a;a=r.indexOf(s);const o=a+(i?-1:1);return o<0||o>=r.length?null:r[o]}function Fbe(t,e=5){let n=0;for(;t&&s7(t)===null&&++n<=e;)t=t.parentElement;return s7(t)===null?null:t}var kbe="ag-focus-managed",HV=class extends Ql{constructor(t,e={isStopPropagation:()=>!1,stopPropagation:()=>{}},n={}){super(),this.eFocusable=t,this.stopPropagationCallbacks=e,this.callbacks=n,this.callbacks={shouldStopEventPropagation:()=>!1,onTabKeyDown:i=>{if(i.defaultPrevented)return;const r=hx(this.beans,this.eFocusable,!1,i.shiftKey);r&&(r.focus(),i.preventDefault())},...n}}postConstruct(){const{eFocusable:t,callbacks:{onFocusIn:e,onFocusOut:n}}=this;t.classList.add(kbe),this.addKeyDownListeners(t),e&&this.addManagedElementListeners(t,{focusin:e}),n&&this.addManagedElementListeners(t,{focusout:n})}addKeyDownListeners(t){this.addManagedElementListeners(t,{keydown:e=>{if(e.defaultPrevented||this.stopPropagationCallbacks.isStopPropagation(e))return;const{callbacks:n}=this;if(n.shouldStopEventPropagation(e)){this.stopPropagationCallbacks.stopPropagation(e);return}e.key===Le.TAB?n.onTabKeyDown(e):n.handleKeyDown&&n.handleKeyDown(e)}})}},GV="__ag_Grid_Stop_Propagation";function zS(t){t[GV]=!0}function Rh(t){return t[GV]===!0}var zV={isStopPropagation:Rh,stopPropagation:zS},s5=class extends HV{constructor(t,e){super(t,zV,e)}};function VV(t,e){const n=t.column===e.column,i=t.rowPinned===e.rowPinned,r=t.rowIndex===e.rowIndex;return n&&i&&r}function Nbe(t,e){switch(t.rowPinned){case"top":if(e.rowPinned!=="top")return!0;break;case"bottom":if(e.rowPinned!=="bottom")return!1;break;default:if(Et(e.rowPinned))return e.rowPinned!=="top";break}return t.rowIndex<e.rowIndex}function Bbe(t){let e=0,n;const{pinnedRowModel:i,rowModel:r,pageBounds:s}=t;return i?.getPinnedTopRowCount()?n="top":r.getRowCount()?(n=null,e=s.getFirstRow()):i?.getPinnedBottomRowCount()&&(n="bottom"),n===void 0?null:{rowIndex:e,rowPinned:n}}function Ibe(t){let e,n=null;const{pinnedRowModel:i,pageBounds:r}=t,s=i?.getPinnedBottomRowCount(),a=i?.getPinnedTopRowCount();return s?(n="bottom",e=s-1):t.rowModel.getRowCount()?e=r.getLastRow():a&&(n="top",e=a-1),e===void 0?null:{rowIndex:e,rowPinned:n}}function UV(t,e){switch(e.rowPinned){case"top":return t.pinnedRowModel?.getPinnedTopRow(e.rowIndex);case"bottom":return t.pinnedRowModel?.getPinnedBottomRow(e.rowIndex);default:return t.rowModel.getRow(e.rowIndex)}}function Y1(t,e){const n=t.spannedRowRenderer?.getCellByPosition(e);if(n)return n;const i=t.rowRenderer.getRowByPosition(e);return i?i.getCellCtrl(e.column):null}function Hbe(t,e,n){const{rowModel:i,pinnedRowModel:r}=t;let s;return s??(s=i?.getRowNode(e)),n?s??(s=r?.getPinnedRowById(e,n)):(s??(s=r?.getPinnedRowById(e,"top")),s??(s=r?.getPinnedRowById(e,"bottom"))),s}function VS(t,e,n=!1){const{rowIndex:i,rowPinned:r}=e,{pageBounds:s,pinnedRowModel:a,rowModel:o}=t;if(i===0)return r==="top"?null:r==="bottom"&&o.isRowsToRender()?{rowIndex:s.getLastRow(),rowPinned:null}:a?.isRowsToRender("top")?{rowIndex:a.getPinnedTopRowCount()-1,rowPinned:"top"}:null;if(n){const l=r?void 0:o.getRow(i);return jV(t,l,!0)??{rowIndex:i-1,rowPinned:r}}return{rowIndex:i-1,rowPinned:r}}function a7(t,e,n=!1){const{rowIndex:i,rowPinned:r}=e,{pageBounds:s,pinnedRowModel:a,rowModel:o}=t;if(Gbe(t,e))return r==="bottom"?null:r==="top"&&o.isRowsToRender()?{rowIndex:s.getFirstRow(),rowPinned:null}:a?.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;if(n){const l=r?void 0:o.getRow(i);return jV(t,l)??{rowIndex:i+1,rowPinned:r}}return{rowIndex:i+1,rowPinned:r}}function jV(t,e,n=!1){const{gos:i,rowRenderer:r}=t;if(!e?.sticky||!bV(i))return;const s=r.getStickyTopRowCtrls(),a=r.getStickyBottomRowCtrls(),o=!a.some(g=>g.rowNode.rowIndex===e.rowIndex),l=o?s:a,u=(n?-1:1)*(o?-1:1);let h;for(let g=0;g<l.length;g++)if(l[g].rowNode.rowIndex===e.rowIndex){h=l[g+u];break}return h?{rowIndex:h.rowNode.rowIndex,rowPinned:null}:void 0}function Gbe(t,e){const{rowPinned:n,rowIndex:i}=e,{pinnedRowModel:r,pageBounds:s}=t;return n==="top"?(r?.getPinnedTopRowCount()??0)-1<=i:n==="bottom"?(r?.getPinnedBottomRowCount()??0)-1<=i:s.getLastRow()<=i}function pf(t){return t.gos.get("suppressHeaderFocus")||!!t.overlays?.exclusive}function a5(t){return t.gos.get("suppressCellFocus")||!!t.overlays?.exclusive}function Oy(t,e,n=!1){const i=t.ctrlsSvc.get("gridCtrl");return!n&&i.focusNextInnerContainer(e)?!0:((n||!e&&!i.isDetailGrid())&&i.forceFocusOutOfContainer(e),!1)}function zbe(t,e){const n=t.focusSvc,i=n.getFocusedCell();if(i&&e&&VV(i,e)){const{rowIndex:r,rowPinned:s,column:a}=e;zz(t)&&n.setFocusedCell({rowIndex:r,column:a,rowPinned:s,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!IV()})}}function Vl(t){return t.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0}function o5(t){const e=[],n=t.ctrlsSvc.getHeaderRowContainerCtrls();for(const i of n){if(!i)continue;const r=i.getGroupRowCount()||0;for(let s=0;s<r;s++){const a=i.getGroupRowCtrlAtIndex(s),o=e[s];if(a){const l=Vbe(t,a);(o==null||l>o)&&(e[s]=l)}}}return e}function Vbe(t,e){let i=t.colModel.isPivotMode()?jbe(t):qV(t);const r=e.getHeaderCellCtrls();for(const s of r){const{column:a}=s,o=a.getAutoHeaderHeight();o!=null&&o>i&&a.isAutoHeaderHeight()&&(i=o)}return i}function l5(t){let n=t.colModel.isPivotMode()?Ube(t):dx(t);return t.colModel.forAllCols(i=>{const r=i.getAutoHeaderHeight();r!=null&&r>n&&i.isAutoHeaderHeight()&&(n=r)}),n}function dx(t){return t.gos.get("headerHeight")??t.environment.getDefaultHeaderHeight()}function WV(t){return t.gos.get("floatingFiltersHeight")??dx(t)}function qV(t){return t.gos.get("groupHeaderHeight")??dx(t)}function Ube(t){return t.gos.get("pivotHeaderHeight")??dx(t)}function jbe(t){return t.gos.get("pivotGroupHeaderHeight")??qV(t)}function Wbe(t,e){return t.headerRowIndex===e.headerRowIndex&&t.column===e.column}var qbe=class extends He{setComp(t,e,n){this.comp=t,this.eGui=e;const{beans:i}=this,{headerNavigation:r,touchSvc:s,ctrlsSvc:a}=i;r&&this.createManagedBean(new s5(n,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this,i),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this,i)}),this.onPivotModeChanged(i),this.setupHeaderHeight();const o=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:o}),s?.mockHeaderContextMenu(this,o),a.register("gridHeaderCtrl",this)}setupHeaderHeight(){const t=this.setHeaderHeight.bind(this);t(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t),this.addManagedEventListeners({headerRowsChanged:t,columnHeaderHeightChanged:t,columnGroupHeaderHeightChanged:()=>Kh(this.beans,()=>t()),stylesChanged:t,advancedFilterEnabledChanged:t})}setHeaderHeight(){const{beans:t}=this;let e=0;const n=o5(t).reduce((a,o)=>a+o,0),i=l5(t);t.filterManager?.hasFloatingFilters()&&(e+=WV(t)),e+=n,e+=i;const r=t.environment.getHeaderRowBorderWidth(),s=e+r;if(this.headerHeightWithBorder!==s){this.headerHeightWithBorder=s;const a=`${s}px`;this.comp.setHeightAndMinHeight(a)}this.headerHeight!==e&&(this.headerHeight=e,this.eventSvc.dispatchEvent({type:"headerHeightChanged"}))}onPivotModeChanged(t){const e=t.colModel.isPivotMode();this.comp.toggleCss("ag-pivot-on",e),this.comp.toggleCss("ag-pivot-off",!e)}onDisplayedColumnsChanged(t){const n=t.visibleCols.allCols.some(i=>i.isSpanHeaderHeight());this.comp.toggleCss("ag-header-allow-overflow",n)}onTabKeyDown(t){const e=this.gos.get("enableRtl"),n=t.shiftKey,i=n!==e?"LEFT":"RIGHT",{beans:r}=this,{headerNavigation:s,focusSvc:a}=r;(s.navigateHorizontally(i,!0,t)||!n&&a.focusOverlay(!1)||Oy(r,n,!0))&&t.preventDefault()}handleKeyDown(t){let e=null;const{headerNavigation:n}=this.beans;switch(t.key){case Le.LEFT:e="LEFT";case Le.RIGHT:{Et(e)||(e="RIGHT"),n.navigateHorizontally(e,!1,t)&&t.preventDefault();break}case Le.UP:e="UP";case Le.DOWN:{Et(e)||(e="DOWN"),n.navigateVertically(e,t)&&t.preventDefault();break}default:return}}onFocusOut(t){const{relatedTarget:e}=t,{eGui:n,beans:i}=this;!e&&n.contains(kr(i))||n.contains(e)||(i.focusSvc.focusedHeader=null)}onHeaderContextMenu(t,e,n){const{menuSvc:i,ctrlsSvc:r}=this.beans;if(!t&&!n||!i?.isHeaderContextMenuEnabled())return;const{target:s}=t??e;(s===this.eGui||s===r.getHeaderRowContainerCtrl()?.eViewport)&&i.showHeaderContextMenu(void 0,t,n)}},c5=class extends He{constructor(t,e=!1){super(),this.callback=t,this.addSpacer=e}postConstruct(){const t=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",t),this.addManagedEventListeners({columnContainerWidthChanged:t,displayedColumnsChanged:t,leftPinnedWidthChanged:t}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:t,scrollVisibilityChanged:t,scrollbarWidthChanged:t}),this.setWidth()}setWidth(){const t=ms(this.gos,"print"),{visibleCols:e,scrollVisibleSvc:n}=this.beans,i=e.bodyWidth,r=e.getColsLeftWidth(),s=e.getDisplayedColumnsRightWidth();let a;t?a=i+r+s:(a=i,this.addSpacer&&(this.gos.get("enableRtl")?r:s)===0&&n.verticalScrollShowing&&(a+=n.getScrollbarWidth())),this.callback(a)}},xm=class extends He{};function fx(t,e,n){return n&&t.addDestroyFunc(()=>e.destroyBean(n)),n??t}var KV=class extends He{constructor(t,e,n,i){super(),this.columnOrGroup=t,this.eCell=e,this.colsSpanning=i,this.columnOrGroup=t,this.ariaEl=e.querySelector("[role=columnheader]")||e,this.beans=n}setColsSpanning(t){this.colsSpanning=t,this.onLeftChanged()}getColumnOrGroup(){const{beans:t,colsSpanning:e}=this;return t.gos.get("enableRtl")&&e?On(e):this.columnOrGroup}postConstruct(){const t=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:t}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:t}),this.addManagedPropertyListener("domLayout",t)}setLeftFirstTime(){const{gos:t,colAnimation:e}=this.beans,n=t.get("suppressColumnMoveAnimation"),i=Et(this.columnOrGroup.getOldLeft());e?.isActive()&&i&&!n?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const t=this.getColumnOrGroup(),e=this.modifyLeftForPrintLayout(t,t.getOldLeft()),n=this.modifyLeftForPrintLayout(t,t.getLeft());this.setLeft(e),this.actualLeft=n,this.beans.colAnimation.executeNextVMTurn(()=>{this.actualLeft===n&&this.setLeft(n)})}onLeftChanged(){const t=this.getColumnOrGroup(),e=t.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(t,e),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(t,e){const{gos:n,visibleCols:i}=this.beans;if(!ms(n,"print")||t.getPinned()==="left")return e;const s=i.getColsLeftWidth();if(t.getPinned()==="right"){const a=i.bodyWidth;return s+a+e}return s+e}setLeft(t){if(Et(t)&&(this.eCell.style.left=`${t}px`),zi(this.columnOrGroup)){const e=this.columnOrGroup.getLeafColumns();if(!e.length)return;e.length>1&&Sye(this.ariaEl,e.length)}}},Kbe="ag-column-first",Ybe="ag-column-last";function YV(t,e,n,i){return gr(t)?[]:$be(t.headerClass,t,e,n,i)}function XV(t,e,n){t.toggleCss(Kbe,n.isColAtEdge(e,"first")),t.toggleCss(Ybe,n.isColAtEdge(e,"last"))}function Xbe(t,e,n,i){return Pn(e,{colDef:t,column:n,columnGroup:i})}function $be(t,e,n,i,r){if(gr(t))return[];let s;if(typeof t=="function"){const a=Xbe(e,n,i,r);s=t(a)}else s=t;return typeof s=="string"?[s]:Array.isArray(s)?[...s]:[]}var Zbe=0,$V="headerCtrl",ZV=class extends He{constructor(t,e){super(),this.column=t,this.rowCtrl=e,this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.reAttemptToFocus=!1,this.instanceId=t.getUniqueId()+"-"+Zbe++}postConstruct(){const t=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],t),this.addManagedEventListeners({overlayExclusiveChanged:t})}setComp(t,e,n,i,r){e.setAttribute("col-id",this.column.colIdSanitised),this.wireComp(t,e,n,i,r),this.reAttemptToFocus&&(this.reAttemptToFocus=!1,this.focus(this.lastFocusEvent??void 0))}shouldStopEventPropagation(t){const{headerRowIndex:e,column:n}=this.beans.focusSvc.focusedHeader,i=n.getDefinition(),r=i?.suppressHeaderKeyboardEvent;if(!Et(r))return!1;const s=Pn(this.gos,{colDef:i,column:n,headerRowIndex:e,event:t});return!!r(s)}getWrapperHasFocus(){return kr(this.beans)===this.eGui}setGui(t,e){this.eGui=t,this.addDomData(e),e.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),e.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}refreshHeaderStyles(){const t=this.column.getDefinition();if(!t)return;const{headerStyle:e}=t;let n;if(typeof e=="function"){const i=this.getHeaderClassParams();n=e(i)}else n=e;n&&this.comp.setUserStyles(n)}onGuiFocus(){this.eventSvc.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(t){const{wrapperElement:e,checkMeasuringCallback:n,compBean:i}=t,{beans:r}=this,s=g=>{if(!this.isAlive()||!i.isAlive())return;const{paddingTop:v,paddingBottom:y,borderBottomWidth:w,borderTopWidth:S}=ox(this.eGui),x=v+y+w+S,_=e.offsetHeight+x;if(g<5){const F=!lo(r)?.contains(e),L=_==0;if(F||L){BD(()=>s(g+1),"raf",r);return}}this.setColHeaderHeight(this.column,_)};let a=!1,o;const l=()=>{const g=this.column.isAutoHeaderHeight();g&&!a&&u(),!g&&a&&h()},u=()=>{a=!0,this.comp.toggleCss("ag-header-cell-auto-height",!0),s(0),o=wm(this.beans,e,()=>s(0))},h=()=>{a=!1,o&&o(),this.comp.toggleCss("ag-header-cell-auto-height",!1),o=void 0};l(),i.addDestroyFunc(()=>h()),i.addManagedListeners(this.column,{widthChanged:()=>a&&s(0)}),i.addManagedEventListeners({sortChanged:()=>{a&&window.setTimeout(()=>s(0))}}),n&&n(l)}onDisplayedColumnsChanged(){const{comp:t,column:e,beans:n,eGui:i}=this;!t||!e||!i||(XV(t,e,n.visibleCols),qz(i,n.visibleCols.getAriaColIndex(e)))}addResizeAndMoveKeyboardListeners(t){t.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){const t=pf(this.beans);this.eGui&&tf(this.eGui,"tabindex",t?null:"-1")}onGuiKeyDown(t){const e=kr(this.beans),n=t.key===Le.LEFT||t.key===Le.RIGHT;if(this.isResizing&&(t.preventDefault(),t.stopImmediatePropagation()),e!==this.eGui||!t.shiftKey&&!t.altKey&&!t.ctrlKey&&!t.metaKey)return;if((this.isResizing||n)&&(t.preventDefault(),t.stopImmediatePropagation()),(t.ctrlKey||t.metaKey)&&OV(t)===Le.C)return this.beans.clipboardSvc?.copyToClipboard();if(!n)return;const s=t.key===Le.LEFT!==this.gos.get("enableRtl")?"left":"right";if(t.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const a=this.getViewportAdjustedResizeDiff(t);this.resizeHeader(a,t.shiftKey),this.resizeFeature?.toggleColumnResizing(!0)}else this.moveHeader(s)}moveHeader(t){this.beans.colMoves?.moveHeader(t,this.eGui,this.column,this.rowCtrl.pinned,this)}getViewportAdjustedResizeDiff(t){const e=this.getResizeDiff(t),{pinnedCols:n}=this.beans;return n?n.getHeaderResizeDiff(e,this.column):e}getResizeDiff(t){const{gos:e,column:n}=this;let i=t.key===Le.LEFT!==e.get("enableRtl");const r=n.getPinned(),s=e.get("enableRtl");return r&&s!==(r==="right")&&(i=!i),(i?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{this.resizeFeature?.toggleColumnResizing(!1)},150))}handleKeyDown(t){const e=this.getWrapperHasFocus();switch(t.key){case Le.PAGE_DOWN:case Le.PAGE_UP:case Le.PAGE_HOME:case Le.PAGE_END:e&&t.preventDefault()}}addDomData(t){const e=$V,{eGui:n,gos:i}=this;sm(i,n,e,this),t.addDestroyFunc(()=>sm(i,n,e,null))}focus(t){if(!this.isAlive())return!1;const{eGui:e}=this;return e?(this.lastFocusEvent=t||null,e.focus()):this.reAttemptToFocus=!0,!0}focusThis(){this.beans.focusSvc.focusedHeader={headerRowIndex:this.rowCtrl.rowIndex,column:this.column}}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop?.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(t,e,n){const i=t??e,{menuSvc:r,gos:s}=this.beans;s.get("preventDefaultOnContextMenu")&&i.preventDefault(),r?.isHeaderContextMenuEnabled(n)&&r.showHeaderContextMenu(n,t,e),this.dispatchColumnMouseEvent("columnHeaderContextMenu",n)}dispatchColumnMouseEvent(t,e){this.eventSvc.dispatchEvent({type:t,column:e})}setColHeaderHeight(t,e){if(!t.setAutoHeaderHeight(e))return;const{eventSvc:n}=this;t.isColumn?n.dispatchEvent({type:"columnHeaderHeightChanged",column:t,columns:[t],source:"autosizeColumnHeaderHeight"}):n.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:t,source:"autosizeColumnGroupHeaderHeight"})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.rowCtrl=null}},Qbe=class extends ZV{constructor(){super(...arguments),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map}wireComp(t,e,n,i,r){this.comp=t;const{rowCtrl:s,column:a,beans:o}=this,{colResize:l,context:u,colHover:h,rangeSvc:g}=o,v=fx(this,u,r);this.setGui(e,v),this.updateState(),this.setupWidth(v),this.setupMovingCss(v),this.setupMenuClass(v),this.setupSortableClass(v),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:i,checkMeasuringCallback:w=>this.setRefreshFunction("measuring",w),compBean:v}),this.addColumnHoverListener(v),this.setupFilterClass(v),this.setupStylesFromColDef(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(v),this.setupSelectAll(v),this.setupUserComp(),this.refreshAria(),l?this.resizeFeature=v.createManagedBean(l.createResizeFeature(s.pinned,a,n,t,this)):li(n,!1),h?.createHoverFeature(v,[a],e),g?.createRangeHighlightFeature(v,a,t),v.createManagedBean(new KV(a,e,o)),v.createManagedBean(new s5(e,{shouldStopEventPropagation:w=>this.shouldStopEventPropagation(w),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(v),v.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader","enableAdvancedFilter"],()=>this.refresh()),v.addManagedListeners(a,{colDefChanged:()=>this.refresh(),formulaRefChanged:()=>this.refresh(),headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});const y=()=>this.checkDisplayName();v.addManagedEventListeners({columnValueChanged:y,columnRowGroupChanged:y,columnPivotChanged:y,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),v.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(t,e){this.beans.colResize?.resizeHeader(this.column,t,e)}getHeaderClassParams(){const{column:t,beans:e}=this,n=t.colDef;return Pn(e.gos,{colDef:n,column:t,floatingFilter:!1})}setupUserComp(){const t=this.lookupUserCompDetails();t&&this.setCompDetails(t)}setCompDetails(t){this.userCompDetails=t,this.comp.setUserCompDetails(t)}lookupUserCompDetails(){const t=this.createParams(),e=this.column.getColDef();return wbe(this.beans.userCompFactory,e,t)}createParams(){const{menuSvc:t,sortSvc:e,colFilter:n,gos:i}=this.beans;return Pn(i,{column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&!!t?.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!!n&&(!this.openFilterEnabled||kS(this.gos)),showColumnMenu:(s,a)=>{t?.showColumnMenu({column:this.column,buttonElement:s,positionBy:"button",onClosedCallback:a})},showColumnMenuAfterMouseClick:(s,a)=>{t?.showColumnMenu({column:this.column,mouseEvent:s,positionBy:"mouse",onClosedCallback:a})},showFilter:s=>{t?.showFilterMenu({column:this.column,buttonElement:s,containerType:"columnFilter",positionBy:"button"})},progressSort:s=>{e?.progressSort(this.column,!!s,"uiColumnSorted")},setSort:(s,a)=>{e?.setSortForColumn(this.column,zl(s),!!a,"uiColumnSorted")},eGridHeader:this.eGui,setTooltip:(s,a)=>{i.assertModuleRegistered("Tooltip",3),this.setupTooltip(s,a)}})}setupSelectAll(t){const{selectionSvc:e}=this.beans;e&&(this.selectAllFeature=t.createOptionalManagedBean(e.createSelectAllFeature(this.column)),this.selectAllFeature?.setComp(this),t.addManagedPropertyListener("rowSelection",()=>{const n=e.createSelectAllFeature(this.column);n&&!this.selectAllFeature?(this.selectAllFeature=t.createManagedBean(n),this.selectAllFeature?.setComp(this),this.comp.refreshSelectAllGui()):this.selectAllFeature&&!n&&(this.comp.removeSelectAllGui(),this.selectAllFeature=this.destroyBean(this.selectAllFeature))}))}getSelectAllGui(){return this.selectAllFeature?.getCheckboxGui()}handleKeyDown(t){super.handleKeyDown(t),t.key===Le.SPACE?this.selectAllFeature?.onSpaceKeyDown(t):t.key===Le.ENTER?this.onEnterKeyDown(t):t.key===Le.DOWN&&t.altKey&&this.showMenuOnKeyPress(t,!1)}onEnterKeyDown(t){const{column:e,gos:n,sortable:i,beans:r}=this;let s=!1;(t.ctrlKey||t.metaKey)&&(s=this.showMenuOnKeyPress(t,!0)),s||(!t.altKey&&Vp(n)?r.rangeSvc?.handleColumnSelection(e,t):i&&r.sortSvc?.progressSort(e,t.shiftKey,"uiColumnSorted"))}showMenuOnKeyPress(t,e){const n=this.comp.getUserCompInstance();return o7(n)&&n.onMenuKeyboardShortcut(e)?(t.preventDefault(),!0):!1}onFocusIn(t){this.eGui.contains(t.relatedTarget)||(this.focusThis(),this.announceAriaDescription()),IV()&&this.setActiveHeader(!0)}onFocusOut(t){this.eGui.contains(t.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(t,e){this.tooltipFeature=this.beans.tooltipSvc?.setupHeaderTooltip(this.tooltipFeature,this,t,e)}setupStylesFromColDef(){this.setRefreshFunction("headerStyles",this.refreshHeaderStyles.bind(this)),this.refreshHeaderStyles()}setupClassesFromColDef(){const t=()=>{const e=this.column.getColDef(),n=YV(e,this.gos,this.column,null),i=this.userHeaderClasses;this.userHeaderClasses=new Set(n);for(const r of n)i.has(r)?i.delete(r):this.comp.toggleCss(r,!0);for(const r of i)this.comp.toggleCss(r,!1)};this.setRefreshFunction("headerClasses",t),t()}setDragSource(t){this.dragSourceElement=t,this.removeDragSource(),!(!t||!this.draggable)&&(this.dragSource=this.beans.colMoves?.setDragSourceForHeader(t,this.column,this.displayName)??null)}updateState(){const{menuSvc:t}=this.beans;this.menuEnabled=!!t?.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=!!t?.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(t,e){this.refreshFunctions[t]=e}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria();for(const t of Object.values(this.refreshFunctions))t()}refreshHeaderComp(){const t=this.lookupUserCompDetails();if(!t)return;(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==t.componentClass?this.attemptHeaderCompRefresh(t.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(t)}attemptHeaderCompRefresh(t){const e=this.comp.getUserCompInstance();return!e||!e.refresh?!1:e.refresh(t)}calculateDisplayName(){return this.beans.colNames.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){const t=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!t.suppressMovable&&!t.lockPosition)||!!t.enableRowGroup||!!t.enablePivot}setupWidth(t){const e=()=>{const n=this.column.getActualWidth();this.comp.setWidth(`${n}px`)};t.addManagedListeners(this.column,{widthChanged:e}),e()}setupMovingCss(t){const e=()=>{this.comp.toggleCss("ag-header-cell-moving",this.column.isMoving())};t.addManagedListeners(this.column,{movingChanged:e}),e()}setupMenuClass(t){const e=()=>{this.comp?.toggleCss("ag-column-menu-visible",this.column.isMenuVisible())};t.addManagedListeners(this.column,{menuVisibleChanged:e}),e()}setupSortableClass(t){const e=()=>{this.comp.toggleCss("ag-header-cell-sortable",!!this.sortable)};e(),this.setRefreshFunction("updateSortable",e),t.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(t){const e=()=>{const n=this.column.isFilterActive();this.comp.toggleCss("ag-header-cell-filtered",n),this.refreshAria()};t.addManagedListeners(this.column,{filterActiveChanged:e}),e()}setupWrapTextClass(){const t=()=>{const e=!!this.column.getColDef().wrapHeaderText;this.comp.toggleCss("ag-header-cell-wrap-text",e)};t(),this.setRefreshFunction("wrapText",t)}onHeaderHighlightChanged(){const t=this.column.getHighlighted(),e=t===0,n=t===1;this.comp.toggleCss("ag-header-highlight-before",e),this.comp.toggleCss("ag-header-highlight-after",n)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:t,column:e,comp:n,beans:i}=this,r=o5(this.beans),s=r.reduce((v,y)=>v+y,0)===0;if(n.toggleCss("ag-header-parent-hidden",s),!e.isSpanHeaderHeight()){t.style.removeProperty("top"),t.style.removeProperty("height"),n.toggleCss("ag-header-span-height",!1),n.toggleCss("ag-header-span-total",!1);return}const{numberOfParents:a,isSpanningTotal:o}=this.column.getColumnGroupPaddingInfo();n.toggleCss("ag-header-span-height",a>0);const l=l5(i);if(a===0){n.toggleCss("ag-header-span-total",!1),t.style.setProperty("top","0px"),t.style.setProperty("height",`${l}px`);return}n.toggleCss("ag-header-span-total",o);const u=(this.column.getFirstRealParent()?.getLevel()??-1)+1,h=r.length-u;let g=0;for(let v=0;v<h;v++)g+=r[r.length-1-v];t.style.setProperty("top",`${-g}px`),t.style.setProperty("height",`${l+g}px`)}refreshAriaSort(){let t=null;const{beans:e,column:n,comp:i,sortable:r}=this;if(r){const s=this.getLocaleTextFunc(),a=e.sortSvc?.getDisplaySortForColumn(n)??null;i.setAriaSort(fye(a)),t=s("ariaSortableColumn","Press ENTER to sort")}else i.setAriaSort();this.setAriaDescriptionProperty("sort",t)}refreshAriaMenu(){let t=null;this.menuEnabled&&(t=this.getLocaleTextFunc()("ariaMenuColumn","Press ALT DOWN to open column menu")),this.setAriaDescriptionProperty("menu",t)}refreshAriaFilterButton(){let t=null;const{openFilterEnabled:e,gos:n}=this;e&&!kS(n)&&(t=this.getLocaleTextFunc()("ariaFilterColumn","Press CTRL ENTER to open filter")),this.setAriaDescriptionProperty("filterButton",t)}refreshAriaFiltered(){let t=null;this.column.isFilterActive()&&(t=this.getLocaleTextFunc()("ariaColumnFiltered","Column Filtered")),this.setAriaDescriptionProperty("filter",t)}refreshAriaCellSelection(){let t=null;const{gos:e,column:n,beans:i}=this;if(Vp(e)){const s=this.getLocaleTextFunc(),a=i.rangeSvc?.isColumnInAnyRange(n);t=s("ariaColumnCellSelection",`Press CTRL+SPACE to ${a?"de":""}select all visible cells in this column`)}this.setAriaDescriptionProperty("cellSelection",t)}setAriaDescriptionProperty(t,e){const n=this.ariaDescriptionProperties;e!=null?n.set(t,e):n.delete(t)}announceAriaDescription(){const{beans:t,eGui:e,ariaDescriptionProperties:n}=this;if(!e.contains(kr(t)))return;const i=Array.from(n.keys()).sort((r,s)=>r==="filter"?-1:s.charCodeAt(0)-r.charCodeAt(0)).map(r=>n.get(r)).join(". ");t.ariaAnnounce?.announceValue(i,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered(),this.refreshAriaCellSelection()}addColumnHoverListener(t){this.beans.colHover?.addHeaderColumnHoverListener(t,this.comp,this.column)}addActiveHeaderMouseListeners(t){const e=r=>this.handleMouseOverChange(r.type==="mouseenter"),n=()=>{this.setActiveHeader(!0),this.dispatchColumnMouseEvent("columnHeaderClicked",this.column)},i=r=>this.handleContextMenuMouseEvent(r,void 0,this.column);t.addManagedListeners(this.eGui,{mouseenter:e,mouseleave:e,click:n,contextmenu:i})}handleMouseOverChange(t){this.setActiveHeader(t),this.eventSvc.dispatchEvent({type:t?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(t){this.comp.toggleCss("ag-header-active",t)}getAnchorElementForMenu(t){const e=this.comp.getUserCompInstance();return o7(e)?e.getAnchorElementForMenu(t):this.eGui}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function o7(t){return typeof t?.getAnchorElementForMenu=="function"&&typeof t.onMenuKeyboardShortcut=="function"}var Jbe=0,MT=class extends He{constructor(t,e,n){super(),this.rowIndex=t,this.pinned=e,this.type=n,this.instanceId=Jbe++,this.comp=null,this.allCtrls=[];let i="ag-header-row-column";n==="group"?i="ag-header-row-group":n==="filter"&&(i="ag-header-row-filter"),this.headerRowClass=`ag-header-row ${i}`}setRowIndex(t){this.rowIndex=t,this.comp?.setRowIndex(this.getAriaRowIndex()),this.onRowHeightChanged()}postConstruct(){this.isPrintLayout=ms(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return this.comp?this.allCtrls.every(t=>t.eGui!=null):!1}setComp(t,e,n=!0){this.comp=t,e=fx(this,this.beans.context,e),n&&(this.setRowIndex(this.rowIndex),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(e)}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(t){const e=this.onRowHeightChanged.bind(this),n=this.onDisplayedColumnsChanged.bind(this);t.addManagedEventListeners({columnResized:this.setWidth.bind(this),displayedColumnsChanged:n,virtualColumnsChanged:i=>this.onVirtualColumnsChanged(i.afterScroll),columnGroupHeaderHeightChanged:e,columnHeaderHeightChanged:e,stylesChanged:e,advancedFilterEnabledChanged:e}),t.addManagedPropertyListener("domLayout",n),t.addManagedPropertyListener("ensureDomOrder",i=>this.isEnsureDomOrder=i.currentValue),t.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e)}onDisplayedColumnsChanged(){this.isPrintLayout=ms(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}setWidth(){if(!this.comp)return;const t=this.getWidthForRow();this.comp.setWidth(`${t}px`)}getWidthForRow(){const{visibleCols:t}=this.beans;return this.isPrintLayout?this.pinned!=null?0:t.getContainerWidth("right")+t.getContainerWidth("left")+t.getContainerWidth(null):t.getContainerWidth(this.pinned)}onRowHeightChanged(){if(!this.comp)return;const{topOffset:t,rowHeight:e}=this.getTopAndHeight();this.comp.setTop(t+"px"),this.comp.setHeight(e+"px")}getTopAndHeight(){let t=0;const e=o5(this.beans);for(let r=0;r<e.length;r++){if(r===this.rowIndex&&this.type==="group")return{topOffset:t,rowHeight:e[r]};t+=e[r]}const n=l5(this.beans);if(this.type==="column")return{topOffset:t,rowHeight:n};t+=n;const i=WV(this.beans);return{topOffset:t,rowHeight:i}}onVirtualColumnsChanged(t=!1){if(!this.comp)return;const e=this.getUpdatedHeaderCtrls(),n=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(e,n,t)}getUpdatedHeaderCtrls(){const t=this.ctrlsById;this.ctrlsById=new Map;const e=this.getColumnsInViewport();for(const i of e)this.recycleAndCreateHeaderCtrls(i,this.ctrlsById,t);const n=i=>{const{focusSvc:r,visibleCols:s}=this.beans;return r.isHeaderWrapperFocused(i)?s.isVisible(i.column):!1};if(t)for(const[i,r]of t)n(r)?this.ctrlsById.set(i,r):this.destroyBean(r);return this.allCtrls=Array.from(this.ctrlsById.values()),this.allCtrls}getHeaderCellCtrls(){return this.allCtrls}recycleAndCreateHeaderCtrls(t,e,n){if(t.isEmptyGroup())return;const i=t.getUniqueId();let r;if(n&&(r=n.get(i),n.delete(i)),r&&r.column!=t&&(this.destroyBean(r),r=void 0),r==null)switch(this.type){case"filter":{r=this.createBean(this.beans.registry.createDynamicBean("headerFilterCellCtrl",!0,t,this));break}case"group":r=this.createBean(this.beans.registry.createDynamicBean("headerGroupCellCtrl",!0,t,this));break;default:r=this.createBean(new Qbe(t,this));break}e.set(i,r)}getColumnsInViewport(){if(!this.isPrintLayout)return this.getComponentsToRender();if(this.pinned)return[];const t=[];for(const e of["left",null,"right"])t.push(...this.getComponentsToRender(e));return t}getComponentsToRender(t=this.pinned){return this.type==="group"?this.beans.colViewport.getHeadersToRender(t,this.rowIndex):this.beans.colViewport.getColumnHeadersToRender(t)}focusHeader(t,e){const n=this.allCtrls.find(r=>r.column==t);return n?n.focus(e):!1}destroy(){this.allCtrls=this.destroyBeans(this.allCtrls),this.ctrlsById=void 0,this.comp=null,super.destroy()}},e1e=class extends He{constructor(t){super(),this.pinned=t,this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[]}setComp(t,e){this.comp=t,this.eViewport=e;const{pinnedCols:n,ctrlsSvc:i,colModel:r,colMoves:s}=this.beans;this.setupCenterWidth(),n?.setupHeaderPinnedWidth(this),this.setupDragAndDrop(s,this.eViewport);const a=this.refresh.bind(this,!0);this.addManagedEventListeners({displayedColumnsChanged:a,advancedFilterEnabledChanged:a});const o=`${typeof this.pinned=="string"?this.pinned:"center"}Header`;i.register(o,this),r.ready&&this.refresh()}getAllCtrls(){const t=[...this.groupsRowCtrls];return this.columnsRowCtrl&&t.push(this.columnsRowCtrl),this.filtersRowCtrl&&t.push(this.filtersRowCtrl),t}refresh(t=!1){const{focusSvc:e,filterManager:n,visibleCols:i}=this.beans;let r=0;const s=e.getFocusHeaderToUseAfterRefresh(),a=()=>{const g=i.headerGroupRowCount;r=g,t||(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls));const v=this.groupsRowCtrls.length;if(v!==g){if(v>g){for(let y=g;y<v;y++)this.destroyBean(this.groupsRowCtrls[y]);this.groupsRowCtrls.length=g;return}for(let y=v;y<g;y++){const w=this.createBean(new MT(y,this.pinned,"group"));this.groupsRowCtrls.push(w)}}},o=()=>{const g=r++;if(this.hidden){this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl);return}this.columnsRowCtrl==null||!t?(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.columnsRowCtrl=this.createBean(new MT(g,this.pinned,"column"))):this.columnsRowCtrl.rowIndex!==g&&this.columnsRowCtrl.setRowIndex(g)},l=()=>{this.includeFloatingFilter=!!n?.hasFloatingFilters()&&!this.hidden;const g=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){g();return}t||g();const v=r++;this.filtersRowCtrl?this.filtersRowCtrl.rowIndex!==v&&this.filtersRowCtrl.setRowIndex(v):this.filtersRowCtrl=this.createBean(new MT(v,this.pinned,"filter"))},u=this.getAllCtrls();a(),o(),l();const h=this.getAllCtrls();this.comp.setCtrls(h),this.restoreFocusOnHeader(e,s),u.length!==h.length&&this.beans.eventSvc.dispatchEvent({type:"headerRowsChanged"})}getHeaderCtrlForColumn(t){const e=n=>n?.getHeaderCellCtrls().find(i=>i.column===t);if(Ef(t))return e(this.columnsRowCtrl);if(this.groupsRowCtrls.length!==0)for(let n=0;n<this.groupsRowCtrls.length;n++){const i=e(this.groupsRowCtrls[n]);if(i)return i}}getHtmlElementForColumnHeader(t){return this.getHeaderCtrlForColumn(t)?.eGui??null}getRowType(t){return this.getAllCtrls()[t]?.type}focusHeader(t,e,n){const r=this.getAllCtrls()[t];return r?r.focusHeader(e,n):!1}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(t){return this.groupsRowCtrls[t]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(t){this.comp.setViewportScrollLeft(t)}onScrollCallback(t){this.addManagedElementListeners(this.eViewport,{scroll:t})}destroy(){this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl),this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls),super.destroy()}setupDragAndDrop(t,e){const n=t?.createBodyDropTarget(this.pinned,e);n&&this.createManagedBean(n)}restoreFocusOnHeader(t,e){if(!e)return;const{column:n}=e;n.getPinned()==this.pinned&&t.focusHeaderPosition({headerPosition:e,scroll:!1})}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new c5(t=>this.comp.setCenterWidth(`${t}px`),!0))}},gx=class extends fu{constructor(){super()}},t1e={tag:"div",cls:"ag-overlay-exporting-center",children:[{tag:"span",ref:"eExportingIcon",cls:"ag-loading-icon"},{tag:"span",ref:"eExportingText",cls:"ag-exporting-text"}]},n1e=class extends gx{constructor(){super(...arguments),this.eExportingIcon=bt,this.eExportingText=bt}init(t){const{beans:e}=this;this.setTemplate(t1e);const n=Vf("overlayExporting",e,null);n&&this.eExportingIcon.appendChild(n);const i=t.exporting?.overlayText??this.getLocaleTextFunc()("exportingOoo","Exporting...");this.eExportingText.textContent=i,e.ariaAnnounce.announceValue(i,"overlay")}},i1e={tag:"div",cls:"ag-overlay-loading-center",children:[{tag:"span",ref:"eLoadingIcon",cls:"ag-loading-icon"},{tag:"span",ref:"eLoadingText",cls:"ag-loading-text"}]},r1e=class extends gx{constructor(){super(...arguments),this.eLoadingIcon=bt,this.eLoadingText=bt}init(t){const{beans:e,gos:n}=this,i=ff(n.get("overlayLoadingTemplate")?.trim());if(this.setTemplate(i??i1e),!i){const r=Vf("overlayLoading",e,null);r&&this.eLoadingIcon.appendChild(r);const s=t.loading?.overlayText??this.getLocaleTextFunc()("loadingOoo","Loading...");this.eLoadingText.textContent=s,e.ariaAnnounce.announceValue(s,"overlay")}}},s1e={tag:"span",cls:"ag-overlay-no-matching-rows-center"},a1e=class extends gx{init(t){const{beans:e}=this;this.setTemplate(s1e);const n=t.noMatchingRows?.overlayText??this.getLocaleTextFunc()("noMatchingRows","No Matching Rows");this.getGui().textContent=n,e.ariaAnnounce.announceValue(n,"overlay")}},o1e={tag:"span",cls:"ag-overlay-no-rows-center"},l1e=class extends gx{init(t){const{beans:e,gos:n}=this,i=ff(n.get("overlayNoRowsTemplate")?.trim());if(this.setTemplate(i??o1e),!i){const r=t.noRows?.overlayText??this.getLocaleTextFunc()("noRowsToShow","No Rows To Show");this.getGui().textContent=r,e.ariaAnnounce.announceValue(r,"overlay")}}},c1e=".ag-label{white-space:nowrap}:where(.ag-ltr) .ag-label{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-label-align-right) .ag-label{order:1}:where(.ag-ltr) :where(.ag-label-align-right) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-rtl) :where(.ag-label-align-right) .ag-label{margin-right:var(--ag-spacing)}:where(.ag-label-align-right){.ag-label,.ag-wrapper{flex:none}}.ag-label-align-top{align-items:flex-start;flex-direction:column}:where(.ag-label-align-top){.ag-label,.ag-wrapper{align-self:stretch}}.ag-label-ellipsis{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-label-align-top) .ag-label{margin-bottom:calc(var(--ag-spacing)*.5)}",u1e=class extends LV{constructor(t,e,n){super(e,n),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=t||{},this.registerCSS(c1e)}postConstruct(){this.addCss("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:t,label:e,labelWidth:n,labelAlignment:i,disabled:r,labelEllipsis:s}=this.config;r!=null&&this.setDisabled(r),t!=null&&this.setLabelSeparator(t),e!=null&&this.setLabel(e),n!=null&&this.setLabelWidth(n),s!=null&&this.setLabelEllipsis(s),this.setLabelAlignment(i||this.labelAlignment),this.refreshLabel()}refreshLabel(){const{label:t,eLabel:e}=this;pC(e),typeof t=="string"?e.innerText=t+this.labelSeparator:t&&e.appendChild(t),t===""?(li(e,!1),qF(e,"presentation")):(li(e,!0),qF(e,null))}setLabelSeparator(t){return this.labelSeparator===t?this:(this.labelSeparator=t,this.label!=null&&this.refreshLabel(),this)}getLabelId(){const t=this.eLabel;return t.id=t.id||`ag-${this.getCompId()}-label`,t.id}getLabel(){return this.label}setLabel(t){return this.label===t?this:(this.label=t,this.refreshLabel(),this)}setLabelAlignment(t){const n=this.getGui().classList;return n.toggle("ag-label-align-left",t==="left"),n.toggle("ag-label-align-right",t==="right"),n.toggle("ag-label-align-top",t==="top"),this}setLabelEllipsis(t){return this.eLabel.classList.toggle("ag-label-ellipsis",t),this}setLabelWidth(t){return this.label==null?this:($z(this.eLabel,t),this)}setDisabled(t){t=!!t;const e=this.getGui();return Yz(e,t),e.classList.toggle("ag-disabled",t),this.disabled=t,this}isDisabled(){return!!this.disabled}},h1e=class extends u1e{constructor(t,e,n,i){super(t,e,n),this.className=i}postConstruct(){super.postConstruct();const{width:t,value:e,onValueChange:n,ariaLabel:i}=this.config;t!=null&&this.setWidth(t),e!=null&&this.setValue(e),n!=null&&this.onValueChange(n),i!=null&&this.setAriaLabel(i),this.className&&this.addCss(this.className),this.refreshAriaLabelledBy()}setLabel(t){return super.setLabel(t),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const t=this.getAriaElement(),e=this.getLabelId(),n=this.getLabel();n==null||n==""||gye(t)!==null?MS(t,""):MS(t,e??"")}setAriaLabel(t){return DS(this.getAriaElement(),t),this.refreshAriaLabelledBy(),this}onValueChange(t){return this.addManagedListeners(this,{fieldValueChanged:()=>t(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(t){return Th(this.getGui(),t),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(t,e){return this.value===t?this:(this.previousValue=this.value,this.value=t,e||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}};function d1e(t){return{tag:"div",role:"presentation",children:[{tag:"div",ref:"eLabel",cls:"ag-input-field-label"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-input-wrapper",role:"presentation",children:[{tag:t,ref:"eInput",cls:"ag-input-field-input"}]}]}}var f1e=class extends h1e{constructor(t,e,n="text",i="input"){super(t,t?.template??d1e(i),[],e),this.inputType=n,this.displayFieldTag=i,this.eLabel=bt,this.eWrapper=bt,this.eInput=bt}postConstruct(){super.postConstruct(),this.setInputType(this.inputType);const{eLabel:t,eWrapper:e,eInput:n,className:i}=this;t.classList.add(`${i}-label`),e.classList.add(`${i}-input-wrapper`),n.classList.add(`${i}-input`),this.addCss("ag-input-field"),n.id=n.id||`ag-${this.getCompId()}-input`;const{inputName:r,inputWidth:s,inputPlaceholder:a,autoComplete:o,tabIndex:l}=this.config;r!=null&&this.setInputName(r),s!=null&&this.setInputWidth(s),a!=null&&this.setInputPlaceholder(a),o!=null&&this.setAutoComplete(o),this.addInputListeners(),this.activateTabIndex([n],l)}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:t=>this.setValue(t.target.value)})}setInputType(t){this.displayFieldTag==="input"&&(this.inputType=t,tf(this.eInput,"type",t))}getInputElement(){return this.eInput}getWrapperElement(){return this.eWrapper}setInputWidth(t){return $z(this.eWrapper,t),this}setInputName(t){return this.getInputElement().setAttribute("name",t),this}getFocusableElement(){return this.eInput}setMaxLength(t){const e=this.eInput;return e.maxLength=t,this}setInputPlaceholder(t){return tf(this.eInput,"placeholder",t),this}setInputAriaLabel(t){return DS(this.eInput,t),this.refreshAriaLabelledBy(),this}setDisabled(t){return Yz(this.eInput,t),super.setDisabled(t)}setAutoComplete(t){if(t===!0)tf(this.eInput,"autocomplete",null);else{const e=typeof t=="string"?t:"off";tf(this.eInput,"autocomplete",e)}return this}},g1e=class extends f1e{constructor(t,e="ag-checkbox",n="checkbox"){super(t,e,n),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:t,passive:e,name:n}=this.config;typeof t=="boolean"&&this.setReadOnly(t),typeof e=="boolean"&&this.setPassive(e),n!=null&&this.setName(n)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(t){this.passive=t}isReadOnly(){return this.readOnly}setReadOnly(t){this.eWrapper.classList.toggle("ag-disabled",t),this.eInput.disabled=t,this.readOnly=t}setDisabled(t){return this.eWrapper.classList.toggle("ag-disabled",t),super.setDisabled(t)}toggle(){if(this.eInput.disabled)return;const t=this.isSelected(),e=this.getNextValue();this.passive?this.dispatchChange(e,t):this.setValue(e)}getValue(){return this.isSelected()}setValue(t,e){return this.refreshSelectedClass(t),this.setSelected(t,e),this}setName(t){const e=this.getInputElement();return e.name=t,this}isSelected(){return this.selected}setSelected(t,e){if(this.isSelected()===t)return;this.previousValue=this.isSelected(),t=this.selected=typeof t=="boolean"?t:void 0;const n=this.eInput;n.checked=t,n.indeterminate=t===void 0,e||this.dispatchChange(this.selected,this.previousValue)}dispatchChange(t,e,n){this.dispatchLocalEvent({type:"fieldValueChanged",selected:t,previousValue:e,event:n});const i=this.getInputElement();this.eventSvc.dispatchEvent({type:"checkboxChanged",id:i.id,name:i.name,selected:t,previousValue:e})}onCheckboxClick(t){if(this.passive||this.eInput.disabled)return;const e=this.isSelected(),n=this.selected=t.target.checked;this.refreshSelectedClass(n),this.dispatchChange(n,e,t)}refreshSelectedClass(t){const e=this.eWrapper.classList;e.toggle("ag-checked",t===!0),e.toggle("ag-indeterminate",t==null)}},p1e={selector:"AG-CHECKBOX",component:g1e},m1e=".ag-checkbox-cell{height:100%}",v1e={tag:"div",cls:"ag-cell-wrapper ag-checkbox-cell",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},y1e=class extends fu{constructor(){super(v1e,[p1e]),this.eCheckbox=bt,this.registerCSS(m1e)}init(t){this.refresh(t);const{eCheckbox:e,beans:n}=this,i=e.getInputElement();i.setAttribute("tabindex","-1"),jz(i,"polite"),this.addManagedListeners(i,{click:r=>{if(zS(r),e.isDisabled())return;const s=e.getValue();this.onCheckboxChanged(s)},dblclick:r=>{zS(r)}}),this.addManagedElementListeners(t.eGridCell,{keydown:r=>{if(r.key===Le.SPACE&&!e.isDisabled()){t.eGridCell===kr(n)&&e.toggle();const s=e.getValue();this.onCheckboxChanged(s),r.preventDefault()}}})}refresh(t){return this.params=t,this.updateCheckbox(t),!0}updateCheckbox(t){let e,n=!0;const{value:i,column:r,node:s}=t;if(s.group&&r)if(typeof i=="boolean")e=i;else{const g=r.getColId();g.startsWith(cx)?e=i==null||i===""?void 0:i==="true":s.aggData&&s.aggData[g]!==void 0||s.sourceRowIndex>=0?e=i??void 0:n=!1}else e=i??void 0;const{eCheckbox:a}=this;if(!n){a.setDisplayed(!1);return}a.setValue(e);const o=t.disabled??!r?.isCellEditable(s);a.setDisabled(o);const l=this.getLocaleTextFunc(),u=Eye(l,e),h=o?u:`${l("ariaToggleCellValue","Press SPACE to toggle cell value")} (${u})`;a.setInputAriaLabel(h)}onCheckboxChanged(t){const{params:e}=this,{column:n,node:i,value:r}=e,{editSvc:s}=this.beans;if(!n)return;const a={rowNode:i,column:n};s?.dispatchCellEvent(a,null,"cellEditingStarted",{value:r});const o=i.setDataValue(n,t,"ui");s?.dispatchCellEvent(a,null,"cellEditingStopped",{oldValue:r,newValue:t,valueChanged:o}),o||this.updateCheckbox(e)}},C1e=500,b1e=550,X1,w1e=t=>{if(!X1)X1=new WeakSet;else if(X1.has(t))return!1;return X1.add(t),!0},fp=class{constructor(t,e=!1){this.eElement=t,this.preventClick=e,this.startListener=null,this.handlers=[],this.eventSvc=void 0,this.touchStart=null,this.lastTapTime=null,this.longPressTimer=0,this.moved=!1}addEventListener(t,e){let n=this.eventSvc;if(!n){if(n===null)return;this.eventSvc=n=new gC;const i=this.onTouchStart.bind(this);this.startListener=i,this.eElement.addEventListener("touchstart",i,{passive:!0})}n.addEventListener(t,e)}removeEventListener(t,e){this.eventSvc?.removeEventListener(t,e)}onTouchStart(t){if(this.touchStart||!w1e(t))return;const e=t.touches[0];this.touchStart=e;const n=this.handlers;if(!n.length){const i=this.eElement,r=i.ownerDocument,s=this.onTouchMove.bind(this),a=this.onTouchEnd.bind(this),o=this.onTouchCancel.bind(this),l={passive:!0},u={passive:!1};Sw(n,[i,"touchmove",s,l],[r,"touchcancel",o,l],[r,"touchend",a,u],[r,"contextmenu",Dp,u])}this.clearLongPress(),this.longPressTimer=window.setTimeout(()=>{this.longPressTimer=0,this.touchStart===e&&!this.moved&&(this.moved=!0,this.eventSvc?.dispatchEvent({type:"longTap",touchStart:e,touchEvent:t}))},b1e)}onTouchMove(t){const{moved:e,touchStart:n}=this;if(!e&&n){const i=zp(n,t.touches);i&&!eV(i,n,4)&&(this.clearLongPress(),this.moved=!0)}}onTouchEnd(t){const e=this.touchStart;!e||!zp(e,t.changedTouches)||(this.moved||(this.eventSvc?.dispatchEvent({type:"tap",touchStart:e}),this.checkDoubleTap(e)),this.preventClick&&Dp(t),this.cancel())}onTouchCancel(t){const e=this.touchStart;!e||!zp(e,t.changedTouches)||(this.lastTapTime=null,this.cancel())}checkDoubleTap(t){let e=Date.now();const n=this.lastTapTime;n&&e-n>C1e&&(this.eventSvc?.dispatchEvent({type:"doubleTap",touchStart:t}),e=null),this.lastTapTime=e}cancel(){this.clearLongPress(),X3(this.handlers),this.touchStart=null}clearLongPress(){window.clearTimeout(this.longPressTimer),this.longPressTimer=0,this.moved=!1}destroy(){const t=this.startListener;t&&(this.startListener=null,this.eElement.removeEventListener("touchstart",t)),this.cancel(),this.eElement=null,this.eventSvc=null}},S1e=1,x1e=class{constructor(t){this.beans={},this.createdBeans=[],this.destroyed=!1,this.instanceId=S1e++,t?.beanClasses&&(this.beanDestroyComparator=t.beanDestroyComparator,this.init(t))}init(t){this.id=t.id,this.beans.context=this,this.destroyCallback=t.destroyCallback;for(const e of Object.keys(t.providedBeanInstances))this.beans[e]=t.providedBeanInstances[e];for(const e of t.beanClasses){const n=new e;n.beanName?this.beans[n.beanName]=n:console.error(`Bean ${e.name} is missing beanName`),this.createdBeans.push(n)}for(const e of t.derivedBeans??[]){const{beanName:n,bean:i}=e(this);this.beans[n]=i,this.createdBeans.push(i)}t.beanInitComparator&&this.createdBeans.sort(t.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(t,e){return this.initBeans([t],e),t}initBeans(t,e){const n=this.beans;for(const i of t)i.preWireBeans?.(n),i.wireBeans?.(n);for(const i of t)i.preConstruct?.();e&&t.forEach(e);for(const i of t)i.postConstruct?.()}getBeans(){return this.beans}getBean(t){return this.beans[t]}getId(){return this.id}destroy(){if(this.destroyed)return;this.destroyed=!0;const t=this.getBeanInstances();this.beanDestroyComparator&&t.sort(this.beanDestroyComparator),this.destroyBeans(t),this.beans={},this.createdBeans=[],this.destroyCallback?.()}destroyBean(t){t?.destroy?.()}destroyBeans(t){if(t)for(let e=0;e<t.length;e++)this.destroyBean(t[e]);return[]}isDestroyed(){return this.destroyed}};function A1e(t){return{beanName:"gridApi",bean:t.getBean("apiFunctionSvc").api}}var E1e=["licenseManager","environment","eventSvc","gos","paginationAutoPageSizeSvc","apiFunctionSvc","gridApi","registry","agCompUtils","userCompFactory","rowContainerHeight","horizontalResizeSvc","localeSvc","pinnedRowModel","dragSvc","colGroupSvc","visibleCols","popupSvc","selectionSvc","colFilter","quickFilter","filterManager","colModel","headerNavigation","pageBounds","pagination","pageBoundsListener","rowSpanSvc","stickyRowSvc","rowRenderer","expressionSvc","alignedGridsSvc","navigation","valueCache","valueSvc","autoWidthCalc","filterMenuFactory","dragAndDrop","focusSvc","cellNavigation","cellStyles","scrollVisibleSvc","sortSvc","colHover","colAnimation","autoColSvc","selectionColSvc","changeDetectionSvc","animationFrameSvc","undoRedo","colDefFactory","rowStyleSvc","rowNodeBlockLoader","rowNodeSorter","ctrlsSvc","pinnedCols","dataTypeSvc","syncSvc","overlays","stateSvc","expansionSvc","apiEventSvc","ariaAnnounce","menuSvc","colMoves","colAutosize","colFlex","colResize","pivotColsSvc","valueColsSvc","rowGroupColsSvc","colNames","colViewport","pivotResultCols","showRowGroupCols","validation"],l7=Object.fromEntries(E1e.map((t,e)=>[t,e]));function T1e(t,e){const n=(t.beanName?l7[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER,i=(e.beanName?l7[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return n-i}function R1e(t,e){return t?.beanName==="gridDestroySvc"?-1:e?.beanName==="gridDestroySvc"?1:0}var Dw={AUTO_HEIGHT:"ag-layout-auto-height",NORMAL:"ag-layout-normal",PRINT:"ag-layout-print"},u5=class extends He{constructor(t){super(),this.view=t}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const t=this.gos.get("domLayout"),e={autoHeight:t==="autoHeight",normal:t==="normal",print:t==="print"},n=e.autoHeight?Dw.AUTO_HEIGHT:e.print?Dw.PRINT:Dw.NORMAL;this.view.updateLayoutClasses(n,e)}},QV=class extends fu{constructor(t,e){super(),this.direction=e,this.eViewport=bt,this.eContainer=bt,this.hideTimeout=0,this.setTemplate(t)}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.toggleCss("ag-apple-scrollbar",kV()||ey())}destroy(){super.destroy(),window.clearTimeout(this.hideTimeout)}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=BV(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const t=this.getGui(),e=()=>this.toggleCss("ag-scrollbar-active",!0),n=()=>this.toggleCss("ag-scrollbar-active",!1);this.addManagedListeners(t,{mouseenter:e,mousedown:e,touchstart:e,mouseleave:n,touchend:n})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),Kh(this.beans,()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:t=>{t.direction===this.direction&&(this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=0),this.toggleCss("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.toggleCss("ag-scrollbar-scrolling",!1),this.hideTimeout=0},400)}})}attemptSettingScrollPosition(t){const e=this.eViewport;Gye(this,()=>Fh(e),()=>this.setScrollPosition(t),100)}onScrollCallback(t){this.addManagedElementListeners(this.eViewport,{scroll:t})}},D1e={tag:"div",cls:"ag-body-horizontal-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eLeftSpacer",cls:"ag-horizontal-left-spacer"},{tag:"div",ref:"eViewport",cls:"ag-body-horizontal-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-horizontal-scroll-container"}]},{tag:"div",ref:"eRightSpacer",cls:"ag-horizontal-right-spacer"}]},M1e=class extends QV{constructor(){super(D1e,"horizontal"),this.eLeftSpacer=bt,this.eRightSpacer=bt,this.setScrollVisibleDebounce=0}wireBeans(t){this.visibleCols=t.visibleCols,this.scrollVisibleSvc=t.scrollVisibleSvc}postConstruct(){super.postConstruct();const t=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:t,displayedColumnsWidthChanged:t,pinnedRowDataChanged:this.refreshCompBottom.bind(this)}),this.addManagedPropertyListener("domLayout",t),this.beans.ctrlsSvc.register("fakeHScrollComp",this),this.createManagedBean(new c5(e=>this.eContainer.style.width=`${e}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}destroy(){window.clearTimeout(this.setScrollVisibleDebounce),super.destroy()}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}refreshCompBottom(){if(!this.invisibleScrollbar)return;const t=this.beans.pinnedRowModel?.getPinnedBottomTotalHeight()??0;this.getGui().style.bottom=`${t}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const t=this.scrollVisibleSvc.verticalScrollShowing;let e=this.visibleCols.getDisplayedColumnsRightWidth();const n=!this.enableRtl&&t,i=this.scrollVisibleSvc.getScrollbarWidth();n&&(e+=i),Th(this.eRightSpacer,e),this.eRightSpacer.classList.toggle("ag-scroller-corner",e<=i);let r=this.visibleCols.getColsLeftWidth();this.enableRtl&&t&&(r+=i),Th(this.eLeftSpacer,r),this.eLeftSpacer.classList.toggle("ag-scroller-corner",r<=i)}setScrollVisible(){const t=this.scrollVisibleSvc.horizontalScrollShowing,e=this.invisibleScrollbar,n=this.gos.get("suppressHorizontalScroll"),i=t&&this.scrollVisibleSvc.getScrollbarWidth()||0,s=n?0:i===0&&e?16:i,a=()=>{this.setScrollVisibleDebounce=0,this.toggleCss("ag-scrollbar-invisible",e),wT(this.getGui(),s),wT(this.eViewport,s),wT(this.eContainer,s),s||this.eContainer.style.setProperty("min-height","1px"),this.setVisible(t,{skipAriaHidden:!0})};window.clearTimeout(this.setScrollVisibleDebounce),t?this.setScrollVisibleDebounce=window.setTimeout(a,100):a()}getScrollPosition(){return PS(this.eViewport,this.enableRtl)}setScrollPosition(t){Fh(this.eViewport)||this.attemptSettingScrollPosition(t),OS(this.eViewport,t,this.enableRtl)}},JV=class extends He{constructor(t,e){super(),this.eContainer=t,this.eViewport=e}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this,this.beans.rowContainerHeight)})}onHeightChanged(t){const e=t.uiContainerHeight,n=e!=null?`${e}px`:"";this.eContainer.style.height=n,this.eViewport&&(this.eViewport.style.height=n)}},_1e={tag:"div",cls:"ag-body-vertical-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eViewport",cls:"ag-body-vertical-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-vertical-scroll-container"}]}]},P1e=class extends QV{constructor(){super(_1e,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new JV(this.eContainer));const{ctrlsSvc:t}=this.beans;t.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this,t)})}setScrollVisible(){const{scrollVisibleSvc:t}=this.beans,e=t.verticalScrollShowing,n=this.invisibleScrollbar,i=e&&t.getScrollbarWidth()||0,r=i===0&&n?16:i;this.toggleCss("ag-scrollbar-invisible",n),Th(this.getGui(),r),Th(this.eViewport,r),Th(this.eContainer,r),this.setDisplayed(e,{skipAriaHidden:!0})}onRowContainerHeightChanged(t){const n=t.getGridBodyCtrl().eBodyViewport,i=this.getScrollPosition(),r=n.scrollTop;i!=r&&this.setScrollPosition(r,!0)}getScrollPosition(){return this.eViewport.scrollTop}setScrollPosition(t,e){!e&&!Fh(this.eViewport)&&this.attemptSettingScrollPosition(t),this.eViewport.scrollTop=t}},fh="Viewport",c7="fakeVScrollComp",_T=["fakeHScrollComp","centerHeader","topCenter","bottomCenter","stickyTopCenter","stickyBottomCenter"],u7=100,PT=150,O1e=class extends He{constructor(t){super(),this.clearRetryListenerFncs=[],this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.lastIsHorizontalScrollShowing=!1,this.scrollTimer=0,this.isScrollActive=!1,this.isVerticalPositionInvalidated=!0,this.isHorizontalPositionInvalidated=!0,this.eBodyViewport=t,this.resetLastHScrollDebounced=I0(this,()=>this.lastScrollSource[1]=null,PT),this.resetLastVScrollDebounced=I0(this,()=>this.lastScrollSource[0]=null,PT)}wireBeans(t){this.ctrlsSvc=t.ctrlsSvc,this.animationFrameSvc=t.animationFrameSvc,this.visibleCols=t.visibleCols}destroy(){super.destroy(),this.clearRetryListenerFncs=[],window.clearTimeout(this.scrollTimer)}postConstruct(){this.enableRtl=this.gos.get("enableRtl");const t=this.invalidateVerticalScroll.bind(this),e=this.invalidateHorizontalScroll.bind(this);this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),bodyHeightChanged:t,scrollGapChanged:e}),this.addManagedElementListeners(this.eBodyViewport,{scroll:t}),this.ctrlsSvc.whenReady(this,n=>{this.centerRowsCtrl=n.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}invalidateHorizontalScroll(){this.isHorizontalPositionInvalidated=!0}invalidateVerticalScroll(){this.isVerticalPositionInvalidated=!0}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.eViewport,{scroll:this.onHScroll.bind(this,fh)});for(const t of _T){const e=this.ctrlsSvc.get(t);this.registerScrollPartner(e,this.onHScroll.bind(this,t))}}addVerticalScrollListeners(){const t=this.ctrlsSvc.get("fakeVScrollComp"),e=this.gos.get("debounceVerticalScrollbar"),n=e?I0(this,this.onVScroll.bind(this,fh),u7):this.onVScroll.bind(this,fh),i=e?I0(this,this.onVScroll.bind(this,c7),u7):this.onVScroll.bind(this,c7);this.addManagedElementListeners(this.eBodyViewport,{scroll:n}),this.registerScrollPartner(t,i)}registerScrollPartner(t,e){t.onScrollCallback(e)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(t){this.centerRowsCtrl!=null&&(t===void 0&&(t=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(t)))}setScrollLeftForAllContainersExceptCurrent(t){for(const e of[..._T,fh]){if(this.lastScrollSource[1]===e)continue;const n=this.getViewportForSource(e);OS(n,t,this.enableRtl)}}getViewportForSource(t){return t===fh?this.centerRowsCtrl.eViewport:this.ctrlsSvc.get(t).eViewport}isControllingScroll(t,e){return this.lastScrollSource[e]==null?(e===0?this.lastScrollSource[0]=t:this.lastScrollSource[1]=t,!0):this.lastScrollSource[e]===t}onHScroll(t){if(!this.isControllingScroll(t,1))return;const e=this.centerRowsCtrl.eViewport,{scrollLeft:n}=e;if(this.shouldBlockScrollUpdate(1,n,!0))return;const i=PS(this.getViewportForSource(t),this.enableRtl);this.doHorizontalScroll(i),this.resetLastHScrollDebounced()}onVScroll(t){if(!this.isControllingScroll(t,0))return;let e;if(t===fh?e=this.eBodyViewport.scrollTop:e=this.ctrlsSvc.get("fakeVScrollComp").getScrollPosition(),this.shouldBlockScrollUpdate(0,e,!0))return;const{animationFrameSvc:n}=this;n?.setScrollTop(e),this.nextScrollTop=e,t===fh?this.ctrlsSvc.get("fakeVScrollComp").setScrollPosition(e):this.eBodyViewport.scrollTop=e,n?.active?n.schedule():this.scrollGridIfNeeded(!0),this.resetLastVScrollDebounced()}doHorizontalScroll(t){const e=this.ctrlsSvc.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===t&&t===e||(this.scrollLeft=t,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(t),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}isScrolling(){return this.isScrollActive}fireScrollEvent(t){const e={type:"bodyScroll",direction:t===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.isScrollActive=!0,this.eventSvc.dispatchEvent(e),window.clearTimeout(this.scrollTimer),this.scrollTimer=window.setTimeout(()=>{this.scrollTimer=0,this.isScrollActive=!1,this.eventSvc.dispatchEvent({...e,type:"bodyScrollEnd"})},PT)}shouldBlockScrollUpdate(t,e,n=!1){return n&&!ey()?!1:t===0?this.shouldBlockVerticalScroll(e):this.shouldBlockHorizontalScroll(e)}shouldBlockVerticalScroll(t){const e=Xz(this.eBodyViewport),{scrollHeight:n}=this.eBodyViewport;return t<0||t+e>n}shouldBlockHorizontalScroll(t){const e=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:n}=this.centerRowsCtrl.eViewport;if(this.enableRtl){if(t>0)return!0}else if(t<0)return!0;return Math.abs(t)+e>n}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){const t=this.scrollLeft;let e=!1;for(const n of _T)if(this.getViewportForSource(n).scrollLeft!==t){e=!0;break}e&&this.onHScroll(fh)}scrollGridIfNeeded(t=!1){const e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,t&&this.invalidateVerticalScroll(),this.redrawRowsAfterScroll()),e}setHorizontalScrollPosition(t,e=!1){const i=this.centerRowsCtrl.eViewport.scrollWidth-this.centerRowsCtrl.getCenterWidth();!e&&this.shouldBlockScrollUpdate(1,t)&&(this.enableRtl?t=t>0?0:i:t=Math.min(Math.max(t,0),i)),OS(this.centerRowsCtrl.eViewport,Math.abs(t),this.enableRtl),this.doHorizontalScroll(t)}setVerticalScrollPosition(t){this.invalidateVerticalScroll(),this.eBodyViewport.scrollTop=t}getVScrollPosition(){if(!this.isVerticalPositionInvalidated){const{lastOffsetHeight:n,lastScrollTop:i}=this;return{top:i,bottom:i+n}}this.isVerticalPositionInvalidated=!1;const{scrollTop:t,offsetHeight:e}=this.eBodyViewport;return this.lastScrollTop=t,this.lastOffsetHeight=e,{top:t,bottom:t+e}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.isHorizontalPositionInvalidated&&(this.lastIsHorizontalScrollShowing=this.centerRowsCtrl.isHorizontalScrollShowing(),this.isHorizontalPositionInvalidated=!1),this.lastIsHorizontalScrollShowing}scrollHorizontally(t){const e=this.centerRowsCtrl.eViewport.scrollLeft;return this.setHorizontalScrollPosition(e+t),this.centerRowsCtrl.eViewport.scrollLeft-e}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(t,e=null){const{rowModel:n}=this.beans,i=n.getRowCount();let r=-1;for(let s=0;s<i;s++){const a=n.getRow(s);if(typeof t=="function"){if(a&&t(a)){r=s;break}}else if(t===a||t===a.data){r=s;break}}r>=0&&this.ensureIndexVisible(r,e)}ensureIndexVisible(t,e,n=0){if(ms(this.gos,"print"))return;const{rowModel:i}=this.beans,r=i.getRowCount();if(typeof t!="number"||t<0||t>=r){Tt(88,{index:t});return}this.clearRetryListeners();const{frameworkOverrides:s,pageBounds:a,rowContainerHeight:o,rowRenderer:l}=this.beans;s.wrapIncoming(()=>{const u=this.ctrlsSvc.getGridBodyCtrl(),h=i.getRow(t);let g,v,y=0;this.invalidateVerticalScroll();do{const{stickyTopHeight:w,stickyBottomHeight:S}=u,x=h.rowTop,T=h.rowHeight,_=a.getPixelOffset(),M=h.rowTop-_,F=M+h.rowHeight,L=this.getVScrollPosition(),k=o.divStretchOffset,B=L.top+k,H=L.bottom+k,U=H-B,W=o.getScrollPositionForPixel(M),j=o.getScrollPositionForPixel(F-U),X=Math.min((W+j)/2,M),ne=B+w>M,$=H-S<F;let q=null;e==="top"?q=W-w:e==="bottom"?q=j+S:e==="middle"?q=X:ne?q=W-w:$&&(j-W>U?q=W-w:q=j+S),q!==null&&(this.setVerticalScrollPosition(q),l.redraw({afterScroll:!0})),g=x!==h.rowTop||T!==h.rowHeight,v=w!==u.stickyTopHeight||S!==u.stickyBottomHeight,y++}while((g||v)&&y<10);if(this.animationFrameSvc?.flushAllFrames(),n<10&&(h?.stub||!this.beans.rowAutoHeight?.areRowsMeasured())){const w=this.getVScrollPosition().top;this.clearRetryListenerFncs=this.addManagedEventListeners({bodyScroll:()=>{const S=this.getVScrollPosition().top;w!==S&&this.clearRetryListeners()},modelUpdated:()=>{this.clearRetryListeners(),!(t>=i.getRowCount())&&this.ensureIndexVisible(t,e,n+1)}})}})}clearRetryListeners(){for(const t of this.clearRetryListenerFncs)t();this.clearRetryListenerFncs=[]}ensureColumnVisible(t,e="auto"){const{colModel:n,frameworkOverrides:i}=this.beans,r=n.getCol(t);if(!r||r.isPinned()||!this.visibleCols.isColDisplayed(r))return;const s=this.getPositionedHorizontalScroll(r,e);i.wrapIncoming(()=>{s!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(s),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameSvc?.flushAllFrames()})}getPositionedHorizontalScroll(t,e){const{columnBeforeStart:n,columnAfterEnd:i}=this.isColumnOutsideViewport(t),r=this.centerRowsCtrl.getCenterWidth()<t.getActualWidth(),s=this.centerRowsCtrl.getCenterWidth(),a=this.enableRtl;let o=(a?n:i)||r,l=a?i:n;e!=="auto"&&(o=e==="start",l=e==="end");const u=e==="middle";if(o||l||u){const{colLeft:h,colMiddle:g,colRight:v}=this.getColumnBounds(t);return u?g-s/2:o?a?v:h:a?h-s:v-s}return null}isColumnOutsideViewport(t){const{start:e,end:n}=this.getViewportBounds(),{colLeft:i,colRight:r}=this.getColumnBounds(t),s=this.enableRtl,a=s?e>r:n<r,o=s?n<i:e>i;return{columnBeforeStart:a,columnAfterEnd:o}}getColumnBounds(t){const e=this.enableRtl,n=this.visibleCols.bodyWidth,i=t.getActualWidth(),r=t.getLeft(),s=e?-1:1,a=e?n-r:r,o=a+i*s,l=a+i/2*s;return{colLeft:a,colMiddle:l,colRight:o}}getViewportBounds(){const t=this.centerRowsCtrl.getCenterWidth(),e=this.centerRowsCtrl.getCenterViewportScrollLeft(),n=e,i=t+e;return{start:n,end:i,width:t}}},h7={horizontal:{overflow:t=>t.scrollWidth-t.clientWidth,scrollSize:t=>t.scrollWidth,clientSize:t=>t.clientWidth,opposite:"vertical"},vertical:{overflow:t=>t.scrollHeight-t.clientHeight,scrollSize:t=>t.scrollHeight,clientSize:t=>t.clientHeight,opposite:"horizontal"}};function L1e(t,e,n=r5()||0,i,r){return eU(t,e,"horizontal",n,i,r)}function F1e(t,e,n=r5()||0,i,r){return eU(t,e,"vertical",n,i,r)}function eU(t,e,n,i,r,s){const a=h7[n],o=h7[a.opposite],l=r?Fh(r):!0,u=s?Fh(s):!0,h=a.overflow(t);if(h<=0)return!1;if(!e||i===0)return!0;const g=o.overflow(e);if(g<=0)return!0;if(h<=i){if(l&&u&&k1e({candidateOverflow:g,candidateScrollSize:o.scrollSize(e),candidateClientSize:o.clientSize(e),scrollbarWidth:i}))return!1;const v=a.clientSize(t)+i;return a.scrollSize(t)<=v}return!0}function k1e({candidateOverflow:t,candidateScrollSize:e,candidateClientSize:n,scrollbarWidth:i}){if(t<=0||t>i)return!1;const r=n+i;return e>n&&e<=r}var N1e=class extends He{constructor(t){super(),this.centerContainerCtrl=t}wireBeans(t){this.scrollVisibleSvc=t.scrollVisibleSvc}postConstruct(){this.beans.ctrlsSvc.whenReady(this,t=>{this.gridBodyCtrl=t.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const{beans:t,centerContainerCtrl:e,gridBodyCtrl:n}=this,i=()=>{Kh(t,()=>{this.onCenterViewportResized()})};e.registerViewportResizeListener(i),n.registerBodyViewportResizeListener(i)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleSvc.updateScrollGap(),this.centerContainerCtrl.isViewportInTheDOMTree()){const{pinnedCols:t,colFlex:e}=this.beans;t?.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const n=this.centerContainerCtrl.getCenterWidth();n!==this.centerWidth&&(this.centerWidth=n,e?.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.scrollFeature.checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const t=this.gridBodyCtrl.eBodyViewport,e=Xz(t);this.bodyHeight!==e&&(this.bodyHeight=e,this.eventSvc.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){if(!this.isAlive())return;const t={horizontalScrollShowing:this.centerContainerCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleSvc.setScrollsVisible(t)}onHorizontalViewportChanged(){const{centerContainerCtrl:t,beans:e}=this,n=t.getCenterWidth(),i=t.getViewportScrollLeft();e.colViewport.setScrollPosition(n,i)}};function B1e(t){return t.altKey||t.ctrlKey||t.metaKey?!1:t.key?.length===1}function Mw(t,e,n,i){const r=e.getColDef().cellRendererParams?.suppressMouseEventHandling;return tU(t,e,n,i,r)}function I1e(t,e,n,i){const r=e?.suppressMouseEventHandling;return tU(t,void 0,n,i,r)}function tU(t,e,n,i,r){return r?r(Pn(t,{column:e,node:n,event:i})):!1}function nU(t,e,n){let i=e;for(;i;){const r=CV(t,i,n);if(r)return r;i=i.parentElement}return null}var US="cellCtrl";function h5(t,e){return nU(t,e,US)}var jS="renderedRow";function H1e(t,e){return nU(t,e,jS)}function d7(t,e,n,i,r){const s=i?i.getColDef().suppressKeyboardEvent:void 0;if(!s)return!1;const a=Pn(t,{event:e,editing:r,column:i,node:n,data:n.data,colDef:i.getColDef()});return!!(s&&s(a))}function G1e(t){const{pinnedRowModel:e,rowModel:n,rangeSvc:i,visibleCols:r}=t;if(!i||r.allCols.length===0)return;const s=e?.isEmpty("top")??!0,a=e?.isEmpty("bottom")??!0,o=s?null:"top";let l,u;a?(l=null,u=n.getRowCount()-1):(l="bottom",u=e?.getPinnedBottomRowCount()??-1),i.setCellRange({rowStartIndex:0,rowStartPinned:o,rowEndIndex:u,rowEndPinned:l})}var z1e=class extends He{constructor(t){super(),this.element=t}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.beans.touchSvc?.mockRowContextMenu(this),this.editSvc=this.beans.editSvc}addKeyboardListeners(){const t="keydown",e=this.processKeyboardEvent.bind(this,t);this.addManagedElementListeners(this.element,{[t]:e})}addMouseListeners(){let t="mousedown";kD("pointerdown")?t="pointerdown":kD("touchstart")&&(t="touchstart");const e=["dblclick","contextmenu","mouseover","mouseout","click",t];for(const n of e){const i=this.processMouseEvent.bind(this,n);this.addManagedElementListeners(this.element,{[n]:i})}}processMouseEvent(t,e){if(!Dy(this.beans,e)||Rh(e))return;const{cellCtrl:n,rowCtrl:i}=this.getControlsForEventTarget(e.target);t==="contextmenu"?(n?.column&&n.dispatchCellContextMenuEvent(e),this.beans.contextMenuSvc?.handleContextMenuMouseEvent(e,void 0,i,n)):(n&&n.onMouseEvent(t,e),i&&i.onMouseEvent(t,e))}getControlsForEventTarget(t){const{gos:e}=this;return{cellCtrl:h5(e,t),rowCtrl:H1e(e,t)}}processKeyboardEvent(t,e){const{cellCtrl:n,rowCtrl:i}=this.getControlsForEventTarget(e.target);e.defaultPrevented||(n?this.processCellKeyboardEvent(n,t,e):i?.isFullWidth()&&this.processFullWidthRowKeyboardEvent(i,t,e))}processCellKeyboardEvent(t,e,n){const i=this.editSvc?.isEditing(t,{withOpenEditor:!0})??!1;!d7(this.gos,n,t.rowNode,t.column,i)&&e==="keydown"&&(!i&&this.beans.navigation?.handlePageScrollingKey(n)||t.onKeyDown(n),this.doGridOperations(n,i),B1e(n)&&t.processCharacter(n)),e==="keydown"&&this.eventSvc.dispatchEvent(t.createEvent(n,"cellKeyDown"))}processFullWidthRowKeyboardEvent(t,e,n){const{rowNode:i}=t,{focusSvc:r,navigation:s}=this.beans,o=r.getFocusedCell()?.column;if(!d7(this.gos,n,i,o,!1)){const u=n.key;if(e==="keydown")switch(u){case Le.PAGE_HOME:case Le.PAGE_END:case Le.PAGE_UP:case Le.PAGE_DOWN:s?.handlePageScrollingKey(n,!0);break;case Le.LEFT:case Le.RIGHT:if(!this.gos.get("embedFullWidthRows"))break;case Le.UP:case Le.DOWN:t.onKeyboardNavigate(n);break;case Le.TAB:t.onTabKeyDown(n);break}}e==="keydown"&&this.eventSvc.dispatchEvent(t.createRowEvent("cellKeyDown",n))}doGridOperations(t,e){if(!t.ctrlKey&&!t.metaKey||e||!Dy(this.beans,t))return;const n=OV(t),{clipboardSvc:i,undoRedo:r}=this.beans;if(n===Le.A)return this.onCtrlAndA(t);if(n===Le.C)return this.onCtrlAndC(i,t);if(n===Le.D)return this.onCtrlAndD(i,t);if(n===Le.V)return this.onCtrlAndV(i,t);if(n===Le.X)return this.onCtrlAndX(i,t);if(n===Le.Y)return this.onCtrlAndY(r);if(n===Le.Z)return this.onCtrlAndZ(r,t)}onCtrlAndA(t){const{beans:{rowModel:e,rangeSvc:n,selectionSvc:i},gos:r}=this;n&&My(r)&&!gCe(r)&&e.isRowsToRender()?G1e(this.beans):i&&i.selectAllRowNodes({source:"keyboardSelectAll",selectAll:fCe(r)}),t.preventDefault()}onCtrlAndC(t,e){if(!t||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:n}=this.getControlsForEventTarget(e.target);this.editSvc?.isEditing(n,{withOpenEditor:!0})||(e.preventDefault(),t.copyToClipboard())}onCtrlAndX(t,e){if(!t||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:n}=this.getControlsForEventTarget(e.target);this.editSvc?.isEditing(n,{withOpenEditor:!0})||(e.preventDefault(),t.cutToClipboard(void 0,"ui"))}onCtrlAndV(t,e){const{cellCtrl:n}=this.getControlsForEventTarget(e.target);this.editSvc?.isEditing(n,{withOpenEditor:!0})||t&&!this.gos.get("suppressClipboardPaste")&&t.pasteFromClipboard()}onCtrlAndD(t,e){t&&!this.gos.get("suppressClipboardPaste")&&t.copyRangeDown(),e.preventDefault()}onCtrlAndZ(t,e){!this.gos.get("undoRedoCellEditing")||!t||(e.preventDefault(),e.shiftKey?t.redo("ui"):t.undo("ui"))}onCtrlAndY(t){t?.redo("ui")}},$1=t=>t.topRowCtrls,Z1=t=>t.getStickyTopRowCtrls(),Q1=t=>t.getStickyBottomRowCtrls(),J1=t=>t.bottomRowCtrls,ew=t=>t.allRowCtrls,OT=t=>t.getCtrls("top"),LT=t=>t.getCtrls("center"),FT=t=>t.getCtrls("bottom"),V1e={center:{type:"center",name:"center-cols",getRowCtrls:ew,getSpannedRowCtrls:LT},left:{type:"left",name:"pinned-left-cols",pinnedType:"left",getRowCtrls:ew,getSpannedRowCtrls:LT},right:{type:"right",name:"pinned-right-cols",pinnedType:"right",getRowCtrls:ew,getSpannedRowCtrls:LT},fullWidth:{type:"fullWidth",name:"full-width",fullWidth:!0,getRowCtrls:ew},topCenter:{type:"center",name:"floating-top",getRowCtrls:$1,getSpannedRowCtrls:OT},topLeft:{type:"left",name:"pinned-left-floating",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:$1,getSpannedRowCtrls:OT},topRight:{type:"right",name:"pinned-right-floating",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:$1,getSpannedRowCtrls:OT},topFullWidth:{type:"fullWidth",name:"floating-top-full-width",fullWidth:!0,getRowCtrls:$1},stickyTopCenter:{type:"center",name:"sticky-top",getRowCtrls:Z1},stickyTopLeft:{type:"left",name:"pinned-left-sticky-top",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:Z1},stickyTopRight:{type:"right",name:"pinned-right-sticky-top",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:Z1},stickyTopFullWidth:{type:"fullWidth",name:"sticky-top-full-width",fullWidth:!0,getRowCtrls:Z1},stickyBottomCenter:{type:"center",name:"sticky-bottom",getRowCtrls:Q1},stickyBottomLeft:{type:"left",name:"pinned-left-sticky-bottom",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:Q1},stickyBottomRight:{type:"right",name:"pinned-right-sticky-bottom",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:Q1},stickyBottomFullWidth:{type:"fullWidth",name:"sticky-bottom-full-width",fullWidth:!0,getRowCtrls:Q1},bottomCenter:{type:"center",name:"floating-bottom",getRowCtrls:J1,getSpannedRowCtrls:FT},bottomLeft:{type:"left",name:"pinned-left-floating-bottom",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:J1,getSpannedRowCtrls:FT},bottomRight:{type:"right",name:"pinned-right-floating-bottom",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:J1,getSpannedRowCtrls:FT},bottomFullWidth:{type:"fullWidth",name:"floating-bottom-full-width",fullWidth:!0,getRowCtrls:J1}};function iU(t){return`ag-${yC(t).name}-viewport`}function rU(t){const e=yC(t);return e.container??`ag-${e.name}-container`}function U1e(t){return`ag-${yC(t).name}-spanned-cells-container`}function yC(t){return V1e[t]}var j1e=["topCenter","topLeft","topRight"],W1e=["bottomCenter","bottomLeft","bottomRight"],q1e=["center","left","right"],K1e=["center","left","right","fullWidth"],Y1e=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],X1e=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],$1e=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],sU=["stickyTopCenter","stickyTopLeft","stickyTopRight"],aU=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],Z1e=[...sU,"stickyTopFullWidth",...aU,"stickyBottomFullWidth"],Q1e=[...j1e,...W1e,...q1e,...sU,...aU],J1e=class extends He{constructor(t){super(),this.name=t,this.visible=!0,this.EMPTY_CTRLS=[],this.options=yC(t)}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new N1e(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(t){this.comp.setOffsetTop(`${t.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.beans.ctrlsSvc.register(this.name,this)}forContainers(t,e){t.indexOf(this.name)>=0&&e()}setComp(t,e,n,i){this.comp=t,this.eContainer=e,this.eSpannedContainer=n,this.eViewport=i,this.createManagedBean(new z1e(this.eViewport??this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();const{pinnedCols:r,rangeSvc:s}=this.beans,a=()=>this.onPinnedWidthChanged();this.forContainers(X1e,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(r?.createPinnedWidthFeature(!0,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:a})}),this.forContainers($1e,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(r?.createPinnedWidthFeature(!1,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:a})}),this.forContainers(K1e,()=>this.createManagedBean(new JV(this.eContainer,this.name==="center"?i:void 0))),s&&this.forContainers(Q1e,()=>this.createManagedBean(s.createDragListenerFeature(this.eContainer))),this.forContainers(Y1e,()=>this.createManagedBean(new c5(o=>this.comp.setContainerWidth(`${o}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(t){this.addManagedElementListeners(this.eViewport,{scroll:t})}addListeners(){const{spannedRowRenderer:t,gos:e}=this.beans,n=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({displayedColumnsChanged:n,displayedColumnsWidthChanged:n,displayedRowsChanged:i=>this.onDisplayedRowsChanged(i.afterScroll)}),n(),this.onDisplayedRowsChanged(),t&&this.options.getSpannedRowCtrls&&e.get("enableCellSpan")&&this.addManagedListeners(t,{spannedRowsUpdated:()=>{const i=this.options.getSpannedRowCtrls(t);i&&this.comp.setSpannedRowCtrls(i,!1)}})}listenOnDomOrder(){if(Z1e.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}const e=()=>{const n=this.gos.get("ensureDomOrder"),i=ms(this.gos,"print");this.comp.setDomOrder(n||i)};this.addManagedPropertyListener("domLayout",e),e()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const{dragSvc:t}=this.beans;if(!t)return;const e=n=>{t.dragging&&n.cancelable&&n.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",e))}onHorizontalViewportChanged(t=!1){const e=this.getCenterWidth(),n=this.getCenterViewportScrollLeft();this.beans.colViewport.setScrollPosition(e,n,t)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return _S(this.eViewport)}getCenterViewportScrollLeft(){return PS(this.eViewport,this.enableRtl)}registerViewportResizeListener(t){const e=wm(this.beans,this.eViewport,t);this.addDestroyFunc(()=>e())}isViewportInTheDOMTree(){return K3(this.eViewport)}getViewportScrollLeft(){return PS(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){const{beans:t,gos:e,eViewport:n}=this,i=e.get("alwaysShowHorizontalScroll"),{ctrlsSvc:r}=t,s=r.getGridBodyCtrl()?.eBodyViewport,a=r.get("fakeHScrollComp")?.getGui(),o=r.get("fakeVScrollComp")?.getGui();return i||L1e(n,s,void 0,a,o)}setHorizontalScroll(t){this.comp.setHorizontalScroll(t)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(t){OS(this.eViewport,t,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const t=this.isContainerVisible();this.visible!=t&&(this.visible=t,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(t=!1){const e=this.options.getRowCtrls(this.beans.rowRenderer);if(!this.visible||e.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}const n=ms(this.gos,"print"),r=this.gos.get("embedFullWidthRows")||n,s=e.filter(a=>{const o=a.isFullWidth();return this.options.fullWidth?!r&&o:r||!o});this.comp.setRowCtrls({rowCtrls:s,useFlushSync:t})}},ewe="ag-force-vertical-scroll",twe="ag-selectable",nwe="ag-column-moving",iwe=class extends He{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(t){this.ctrlsSvc=t.ctrlsSvc,this.colModel=t.colModel,this.scrollVisibleSvc=t.scrollVisibleSvc,this.pinnedRowModel=t.pinnedRowModel,this.filterManager=t.filterManager,this.rowGroupColsSvc=t.rowGroupColsSvc}setComp(t,e,n,i,r,s,a){this.comp=t,this.eGridBody=e,this.eBodyViewport=n,this.eTop=i,this.eBottom=r,this.eStickyTop=s,this.eStickyBottom=a,this.eCenterColsViewport=n.querySelector(`.${iU("center")}`),this.eFullWidthContainer=n.querySelector(`.${rU("fullWidth")}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",o=>this.setCellTextSelection(o.currentValue)),this.createManagedBean(new u5(this.comp)),this.scrollFeature=this.createManagedBean(new O1e(n)),this.beans.rowDragSvc?.setupRowDrag(n,this),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([i,n,r,s,a]),this.setGridRootRole(),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),this.filterManager?.setupAdvFilterHeaderComp(i),this.ctrlsSvc.register("gridBodyCtrl",this)}addEventListeners(){const t=this.setFloatingHeights.bind(this),e=this.setGridRootRole.bind(this),n=this.toggleRowResizeStyles.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.updateScrollingClasses.bind(this),pinnedRowDataChanged:t,pinnedHeightChanged:t,pinnedRowsChanged:t,headerHeightChanged:this.setStickyTopOffsetTop.bind(this),columnRowGroupChanged:e,columnPivotChanged:e,rowResizeStarted:n,rowResizeEnded:n}),this.addManagedPropertyListener("treeData",e)}toggleRowResizeStyles(t){const e=t.type==="rowResizeStarted";this.eBodyViewport.classList.toggle("ag-prevent-animation",e)}onGridColumnsChanged(){const t=this.beans.colModel.getCols();this.comp.setColumnCount(t.length)}onScrollVisibilityChanged(){const{scrollVisibleSvc:t}=this,e=t.verticalScrollShowing;this.setVerticalScrollPaddingVisible(e),this.setStickyWidth(e),this.setStickyBottomOffsetBottom();const n=e&&t.getScrollbarWidth()||0,i=BV()?16:0,r=`calc(100% + ${n+i}px)`;Kh(this.beans,()=>this.comp.setBodyViewportWidth(r)),this.updateScrollingClasses()}setGridRootRole(){const{rowGroupColsSvc:t,colModel:e,gos:n}=this;let i=n.get("treeData");if(!i){const r=e.isPivotMode();i=(t?t.columns.length:0)>=(r?2:1)}this.comp.setGridRootRole(i?"treegrid":"grid")}addFocusListeners(t){for(const e of t)this.addManagedElementListeners(e,{focusin:n=>{const{target:i}=n,r=Gp(i,"ag-root",e);e.classList.toggle("ag-has-focus",!r)},focusout:n=>{const{target:i,relatedTarget:r}=n,s=e.contains(r),a=Gp(r,"ag-root",e);Gp(i,"ag-root",e)||(!s||a)&&e.classList.remove("ag-has-focus")}})}setColumnMovingCss(t){this.comp.setColumnMovingCss(nwe,t)}setCellTextSelection(t=!1){this.comp.setCellSelectableCss(twe,t)}updateScrollingClasses(){const{eGridBody:{classList:t},scrollVisibleSvc:e}=this;t.toggle("ag-body-vertical-content-no-gap",!e.verticalScrollGap),t.toggle("ag-body-horizontal-content-no-gap",!e.horizontalScrollGap)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:t=>{if(t.target instanceof HTMLImageElement)return t.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){this.beans.editSvc?.addStopEditingWhenGridLosesFocus([this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom])}updateRowCount(){const t=(this.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0)+(this.filterManager?.getHeaderRowCount()??0),{rowModel:e}=this.beans,n=e.isLastRowIndexKnown()?e.getRowCount():-1,i=n===-1?-1:t+n;this.comp.setRowCount(i)}registerBodyViewportResizeListener(t){this.comp.registerBodyViewportResizeListener(t)}setVerticalScrollPaddingVisible(t){const e=t?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(e)}isVerticalScrollShowing(){const{gos:t,comp:e,ctrlsSvc:n}=this,i=t.get("alwaysShowVerticalScroll"),r=i?ewe:null,s=ms(t,"normal");e.setAlwaysVerticalScrollClass(r,i);const a=n.get("center")?.eViewport,o=n.get("fakeHScrollComp")?.getGui(),l=n.get("fakeVScrollComp")?.getGui();return i||s&&F1e(this.eBodyViewport,a,void 0,l,o)}setupRowAnimationCssClass(){const{rowContainerHeight:t,environment:e}=this.beans;let n=e.sizesMeasured;const i=()=>{const r=n&&e5(this.gos)&&!t.stretching,s=r?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(s,r)};i(),this.addManagedEventListeners({heightScaleChanged:i}),this.addManagedPropertyListener("animateRows",i),this.addManagedEventListeners({stylesChanged:()=>{!n&&e.sizesMeasured&&(n=!0,i())}})}addBodyViewportListener(){const{eBodyViewport:t,eStickyTop:e,eStickyBottom:n,eTop:i,eBottom:r,beans:{popupSvc:s,touchSvc:a}}=this,o=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(t,{contextmenu:o}),a?.mockBodyContextMenu(this,o),this.addManagedElementListeners(t,{wheel:this.onBodyViewportWheel.bind(this,s)});const l=this.onStickyWheel.bind(this);for(const h of[e,n,i,r])this.addManagedElementListeners(h,{wheel:l});const u=this.onHorizontalWheel.bind(this);for(const h of["left","right","topLeft","topRight","bottomLeft","bottomRight"])this.addManagedElementListeners(this.ctrlsSvc.get(h).eContainer,{wheel:u});this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:t=>this.onFullWidthContainerWheel(t)})}onFullWidthContainerWheel(t){const{deltaX:e,deltaY:n,shiftKey:i}=t;(i||Math.abs(e)>Math.abs(n))&&Dy(this.beans,t)&&this.scrollGridBodyToMatchEvent(t)}onStickyWheel(t){const{deltaY:e}=t;this.scrollVertically(e)>0&&t.preventDefault()}onHorizontalWheel(t){const{deltaX:e,deltaY:n,shiftKey:i}=t;(i||Math.abs(e)>Math.abs(n))&&this.scrollGridBodyToMatchEvent(t)}scrollGridBodyToMatchEvent(t){const{deltaX:e,deltaY:n}=t;t.preventDefault(),this.eCenterColsViewport.scrollBy({left:e||n})}onBodyViewportContextMenu(t,e,n){if(!t&&!n)return;this.gos.get("preventDefaultOnContextMenu")&&(t||n).preventDefault();const{target:i}=t||e;(i===this.eBodyViewport||i===this.ctrlsSvc.get("center").eViewport)&&this.beans.contextMenuSvc?.showContextMenu({mouseEvent:t,touchEvent:n,value:null,anchorToElement:this.eGridBody,source:"ui"})}onBodyViewportWheel(t,e){this.gos.get("suppressScrollWhenPopupsAreOpen")&&t?.hasAnchoredPopup()&&e.preventDefault()}scrollVertically(t){const e=this.eBodyViewport.scrollTop;return this.scrollFeature.setVerticalScrollPosition(e+t),this.eBodyViewport.scrollTop-e}setFloatingHeights(){const{pinnedRowModel:t,beans:{environment:e}}=this,n=t?.getPinnedTopTotalHeight(),i=t?.getPinnedBottomTotalHeight(),r=e.getPinnedRowBorderWidth(),s=e.getRowBorderWidth(),a=r-s,o=n?a+n:0,l=i?a+i:0;this.comp.setTopHeight(o),this.comp.setBottomHeight(l),this.comp.setTopInvisible(o<=0),this.comp.setBottomInvisible(l<=0),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(t=0){this.comp.setStickyTopHeight(`${t}px`),this.stickyTopHeight=t}setStickyBottomHeight(t=0){this.comp.setStickyBottomHeight(`${t}px`),this.stickyBottomHeight=t}setStickyWidth(t){if(!t)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{const e=this.scrollVisibleSvc.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${e}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${e}px)`)}}setStickyTopOffsetTop(){const e=this.ctrlsSvc.get("gridHeaderCtrl").headerHeight+(this.filterManager?.getHeaderHeight()??0),n=this.pinnedRowModel?.getPinnedTopTotalHeight()??0;let i=0;e>0&&(i+=e),n>0&&(i+=n),i>0&&(i+=1),this.comp.setStickyTopTop(`${i}px`)}setStickyBottomOffsetBottom(){const{pinnedRowModel:t,scrollVisibleSvc:e,comp:n}=this,i=t?.getPinnedBottomTotalHeight()??0,s=e.horizontalScrollShowing&&e.getScrollbarWidth()||0,a=i+s;n.setStickyBottomBottom(`${a}px`)}},kT={TAB_GUARD:"ag-tab-guard",TAB_GUARD_TOP:"ag-tab-guard-top",TAB_GUARD_BOTTOM:"ag-tab-guard-bottom"},rwe=class extends Ql{constructor(t,e){super(),this.stopPropagationCallbacks=e,this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp:n,eTopGuard:i,eBottomGuard:r,focusTrapActive:s,forceFocusOutWhenTabGuardsAreEmpty:a,isFocusableContainer:o,focusInnerElement:l,onFocusIn:u,onFocusOut:h,shouldStopEventPropagation:g,onTabKeyDown:v,handleKeyDown:y,isEmpty:w,eFocusableElement:S}=t;this.comp=n,this.eTopGuard=i,this.eBottomGuard=r,this.providedFocusInnerElement=l,this.eFocusableElement=S,this.focusTrapActive=!!s,this.forceFocusOutWhenTabGuardsAreEmpty=!!a,this.isFocusableContainer=!!o,this.providedFocusIn=u,this.providedFocusOut=h,this.providedShouldStopEventPropagation=g,this.providedOnTabKeyDown=v,this.providedHandleKeyDown=y,this.providedIsEmpty=w}postConstruct(){this.createManagedBean(new HV(this.eFocusableElement,this.stopPropagationCallbacks,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:t=>this.onTabKeyDown(t),handleKeyDown:t=>this.handleKeyDown(t),onFocusIn:t=>this.onFocusIn(t),onFocusOut:t=>this.onFocusOut(t)})),this.activateTabGuards();for(const t of[this.eTopGuard,this.eBottomGuard])this.addManagedElementListeners(t,{focus:this.onFocus.bind(this)})}handleKeyDown(t){this.providedHandleKeyDown&&this.providedHandleKeyDown(t)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;const t=this.gos.get("tabIndex");this.comp.setTabIndex(t.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(t){if(this.isFocusableContainer&&!this.eFocusableElement.contains(t.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(t.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&(this.providedIsEmpty?this.providedIsEmpty():jp(this.eFocusableElement,".ag-tab-guard").length===0)){this.findNextElementOutsideAndFocus(t.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(t.relatedTarget))return;const e=t.target===this.eBottomGuard;!(this.providedFocusInnerElement?this.providedFocusInnerElement(e):this.focusInnerElement(e))&&this.forceFocusOutWhenTabGuardsAreEmpty&&this.findNextElementOutsideAndFocus(t.target===this.eBottomGuard)}findNextElementOutsideAndFocus(t){const e=lo(this.beans),n=jp(e.body,null,!0),i=n.indexOf(t?this.eTopGuard:this.eBottomGuard);if(i===-1)return;let r,s;t?(r=0,s=i):(r=i+1,s=n.length);const a=n.slice(r,s),o=this.gos.get("tabIndex");a.sort((l,u)=>{const h=Number.parseInt(l.getAttribute("tabindex")||"0"),g=Number.parseInt(u.getAttribute("tabindex")||"0");return g===o?1:h===o?-1:h===0?1:g===0?-1:h-g}),a[t?a.length-1:0]?.focus()}onFocusIn(t){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(t),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(t){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(t),this.eFocusableElement.contains(t.relatedTarget)||this.activateTabGuards())}onTabKeyDown(t){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(t);return}if(this.focusTrapActive||t.defaultPrevented)return;const e=this.tabGuardsAreActive();e&&this.deactivateTabGuards();const n=this.getNextFocusableElement(t.shiftKey);e&&setTimeout(()=>this.activateTabGuards(),0),n&&(n.focus(),t.preventDefault())}focusInnerElement(t=!1){const e=jp(this.eFocusableElement);return this.tabGuardsAreActive()&&(e.splice(0,1),e.splice(-1,1)),e.length?(e[t?e.length-1:0].focus({preventScroll:!0}),!0):!1}getNextFocusableElement(t){return hx(this.beans,this.eFocusableElement,!1,t)}forceFocusOutOfContainer(t=!1){if(this.forcingFocusOut)return;const e=t?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,e.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(t,e){return t===this.eTopGuard&&!e||t===this.eBottomGuard&&(e??!0)}setAllowFocus(t){this.allowFocus=t}},swe=class extends He{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}setComp(t,e,n){this.view=t,this.eGridHostDiv=e,this.eGui=n,this.eGui.setAttribute("grid-id",this.beans.context.getId());const{dragAndDrop:i,ctrlsSvc:r}=this.beans;i?.registerGridDropTarget(()=>this.eGui,this),this.createManagedBean(new u5(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr");const s=wm(this.beans,this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>s()),r.register("gridCtrl",this)}isDetailGrid(){return Fbe(this.getGui())?.getAttribute("row-id")?.startsWith("detail")||!1}getOptionalSelectors(){const t=this.beans;return{paginationSelector:t.pagination?.getPaginationSelector(),gridHeaderDropZonesSelector:t.registry?.getSelector("AG-GRID-HEADER-DROP-ZONES"),sideBarSelector:t.sideBar?.getSelector(),statusBarSelector:t.registry?.getSelector("AG-STATUS-BAR"),watermarkSelector:t.licenseManager?.getWatermarkSelector()}}onGridSizeChanged(){this.eventSvc.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(t){const{view:e}=this;if(t===!1)e.setCursor(null);else{const n=t===1?"ew-resize":"ns-resize";e.setCursor(n)}}disableUserSelect(t){this.view.setUserSelect(t?"none":null)}focusNextInnerContainer(t){const e=this.getFocusableContainers(),{indexWithFocus:n,nextIndex:i}=this.getNextFocusableIndex(e,t);if(i<0||i>=e.length)return!1;if(i===0){if(n>0){const{visibleCols:r,focusSvc:s}=this.beans,a=r.allCols,o=On(a);if(s.focusGridView({column:o,backwards:!0}))return!0}return!1}return this.focusContainer(e[i],t)}focusInnerElement(t){if(this.gos.getCallback("focusGridInnerElement")?.({fromBottom:!!t}))return!0;const n=this.getFocusableContainers(),{focusSvc:i,visibleCols:r}=this.beans,s=r.allCols;if(t){if(n.length>1)return this.focusContainer(On(n),t);const a=On(s);if(i.focusGridView({column:a,backwards:t}))return!0}if(this.gos.get("headerHeight")===0||pf(this.beans)){if(i.focusGridView({column:s[0],backwards:t}))return!0;for(let a=1;a<n.length;a++)if(GS(n[a].getGui(),t))return!0;return!1}return i.focusFirstHeader()}forceFocusOutOfContainer(t=!1){this.view.forceFocusOutOfContainer(t)}addFocusableContainer(t){this.additionalFocusableContainers.add(t)}removeFocusableContainer(t){this.additionalFocusableContainers.delete(t)}allowFocusForNextCoreContainer(t){const e=this.view.getFocusableContainers(),{nextIndex:n}=this.getNextFocusableIndex(e,t),i=e[n];i?this.focusContainer(i):this.forceFocusOutOfContainer(t)}isFocusable(){const t=this.beans;return!a5(t)||!pf(t)||!!t.sideBar?.comp?.isDisplayed()}getNextFocusableIndex(t,e){const n=kr(this.beans),i=t.findIndex(s=>s.getGui().contains(n)),r=i+(e?-1:1);return{indexWithFocus:i,nextIndex:r}}focusContainer(t,e){t.setAllowFocus?.(!0);const n=GS(t.getGui(),e,!1,!0);return t.setAllowFocus?.(!1),n}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},rt=(t,e)=>{for(const n of Object.keys(e))e[n]=t;return e},f7={dispatchEvent:"CommunityCore",...rt("CommunityCore",{destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,isModuleRegistered:0}),...rt("GridState",{getState:0,setState:0}),...rt("SharedRowSelection",{setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0}),...rt("RowApi",{redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRowIndex:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0}),...rt("ScrollApi",{getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0}),...rt("KeyboardNavigation",{getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0}),...rt("EventApi",{addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0}),...rt("ValueCache",{expireValueCache:0}),...rt("CellApi",{getCellValue:0}),...rt("SharedMenu",{showColumnMenu:0,hidePopupMenu:0}),...rt("Sort",{onSortChanged:0}),...rt("PinnedRow",{getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,forEachPinnedRow:0}),...rt("Overlay",{showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0}),...rt("RenderApi",{setGridAriaProperty:0,refreshCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0}),...rt("HighlightChanges",{flashCells:0}),...rt("RowDrag",{addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getRowDropPositionIndicator:0,setRowDropPositionIndicator:0}),...rt("ColumnApi",{getColumnDefs:0,getColumnDef:0,getDisplayNameForColumn:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnsVisible:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0}),...rt("ColumnAutoSize",{sizeColumnsToFit:0,autoSizeColumns:0,autoSizeAllColumns:0}),...rt("ColumnGroup",{setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumnGroup:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0}),...rt("ColumnMove",{moveColumnByIndex:0,moveColumns:0}),...rt("ColumnResize",{setColumnWidths:0}),...rt("ColumnHover",{isColumnHovered:0}),...rt("EditCore",{getCellEditorInstances:0,getEditingCells:0,getEditRowValues:0,stopEditing:0,startEditingCell:0,isEditing:0,validateEdit:0}),...rt("BatchEdit",{startBatchEdit:0,cancelBatchEdit:0,commitBatchEdit:0,isBatchEditing:0}),...rt("UndoRedoEdit",{undoCellEditing:0,redoCellEditing:0,getCurrentUndoSize:0,getCurrentRedoSize:0}),...rt("FilterCore",{isAnyFilterPresent:0,onFilterChanged:0}),...rt("ColumnFilter",{isColumnFilterPresent:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,hideColumnFilter:0,getColumnFilterHandler:0,doFilterAction:0}),...rt("QuickFilter",{isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0}),...rt("Find",{findGetActiveMatch:0,findGetTotalMatches:0,findGoTo:0,findNext:0,findPrevious:0,findGetNumMatches:0,findGetParts:0,findClearActive:0,findRefresh:0}),...rt("Pagination",{paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0}),...rt("CsrmSsrmSharedApi",{expandAll:0,collapseAll:0}),...rt("SsrmInfiniteSharedApi",{setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0}),...rt("ClientSideRowModelApi",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0,onRowHeightChanged:0,resetRowHeights:0}),...rt("CsvExport",{getDataAsCsv:0,exportDataAsCsv:0}),...rt("InfiniteRowModel",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0}),...rt("AdvancedFilter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0}),...rt("IntegratedCharts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0}),...rt("Clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0}),...rt("ExcelExport",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0}),...rt("SharedMasterDetail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0}),...rt("ContextMenu",{showContextMenu:0}),...rt("ColumnMenu",{showColumnChooser:0,hideColumnChooser:0}),...rt("CellSelection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0}),...rt("SharedRowGrouping",{setRowGroupColumns:0,removeRowGroupColumns:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0}),...rt("SharedAggregation",{addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0}),...rt("SharedPivot",{isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumns:0,addValueColumns:0,setPivotColumns:0,removePivotColumns:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0}),...rt("ServerSideRowModelApi",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0,onRowHeightChanged:0,resetRowHeights:0}),...rt("SideBar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0}),...rt("StatusBar",{getStatusPanel:0}),...rt("AiToolkit",{getStructuredSchema:0})},NT={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},awe=(t,e)=>t.eventSvc.dispatchEvent(e),oU=class{};Reflect.defineProperty(oU,"name",{value:"GridApi"});var owe=class extends He{constructor(){super(),this.beanName="apiFunctionSvc",this.api=new oU,this.fns={...NT,dispatchEvent:awe},this.preDestroyLink="";const{api:t}=this;for(const e of Object.keys(f7))t[e]=this.makeApi(e)[e]}postConstruct(){this.preDestroyLink=this.beans.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(t,e){const{fns:n,beans:i}=this;n!==NT&&(n[t]=i?.validation?.validateApiFunction(t,e)??e)}makeApi(t){return{[t]:(...e)=>{const{beans:n,fns:{[t]:i}}=this;return i?i(n,...e):this.apiNotFound(t)}}}apiNotFound(t){const{beans:e,gos:n,preDestroyLink:i}=this;if(!e)Tt(26,{fnName:t,preDestroyLink:i});else{const r=f7[t];n.assertModuleRegistered(r,`api.${t}`)&&Tt(27,{fnName:t,module:r})}}destroy(){super.destroy(),this.fns=NT,this.beans=null}};function lwe(t){return t.context.getId()}function cwe(t){t.gridDestroySvc.destroy()}function uwe(t){return t.gridDestroySvc.destroyCalled}function hwe(t,e){return t.gos.get(e)}function dwe(t,e,n){lU(t,{[e]:n})}function lU(t,e){t.gos.updateGridOptions({options:e})}function fwe(t,e){const n=e.replace(/Module$/,"");return t.gos.isModuleRegistered(n)}var cU=(t,e)=>{if(e!=null&&t?.setPointerCapture)try{return t.setPointerCapture(e),t.hasPointerCapture(e)}catch{}return!1},gwe=(t,e)=>{if(typeof PointerEvent>"u"||!(e instanceof PointerEvent))return null;const n=e.pointerId;if(!cU(t,n))return null;const i={eElement:t,pointerId:n,onLost(r){mwe(i,r)}};return t.addEventListener("lostpointercapture",i.onLost),i},pwe=t=>{if(!t)return;uU(t);const{eElement:e,pointerId:n}=t;if(e){try{e.releasePointerCapture(n)}catch{}t.eElement=null}},uU=t=>{const{eElement:e,onLost:n}=t;e&&n&&(e.removeEventListener("lostpointercapture",n),t.onLost=null)},mwe=(t,e)=>{uU(t);const{eElement:n,pointerId:i}=t;n&&e.pointerId===i&&cU(n,i)},gp,Mp,BT={passive:!0},gh={passive:!1},kl=t=>{if(!Mp)Mp=new WeakSet;else if(Mp.has(t))return!1;return Mp.add(t),!0},vwe=class extends Ql{constructor(){super(...arguments),this.beanName="dragSvc",this.dragging=!1,this.drag=null,this.dragSources=[]}get startTarget(){return this.drag?.start.target??null}isPointer(){return!!gp?.has(Il(this.beans))}hasPointerCapture(){const t=this.drag?.pointerCapture;return!!(t&&this.beans.eRootDiv.hasPointerCapture?.(t.pointerId))}destroy(){this.drag&&this.cancelDrag();const t=this.dragSources;for(const e of t)g7(e);t.length=0,super.destroy()}removeDragSource(t){const e=this.dragSources;for(let n=0,i=e.length;n<i;++n){const r=e[n];if(r.params===t){e.splice(n,1),g7(r);break}}}addDragSource(t){if(!this.isAlive())return;const{eElement:e,includeTouch:n}=t,i=[];let r;if(n){const u=e.style;u&&(r=u.touchAction,u.touchAction="none")}const s={handlers:i,params:t,oldTouchAction:r};this.dragSources.push(s),Sw(i,[e,"pointerdown",u=>this.onPointerDown(t,u),gh],[e,"mousedown",u=>this.onMouseDown(t,u)]);const l=this.gos.get("suppressTouch");n&&!l&&Sw(i,[e,"touchstart",h=>this.onTouchStart(t,h),gh])}cancelDrag(t){const e=this.drag;t??(t=e?.eElement),t&&this.eventSvc.dispatchEvent({type:"dragCancelled",target:t}),e?.params.onDragCancel?.(),this.destroyDrag()}shouldPreventMouseEvent(t){const e=t.type;return(e==="mousemove"||e==="pointermove")&&t.cancelable&&Dy(this.beans,t)&&!Q0(HT(t))}initDrag(t,...e){this.drag=t;const n=this.beans,i=o=>this.onScroll(o),r=o=>this.onKeyDown(o),s=Il(n),a=lo(n);Sw(t.handlers,[s,"contextmenu",Dp],[s,"keydown",r],[a,"scroll",i,{capture:!0}],[a.defaultView||window,"scroll",i],...e)}destroyDrag(){this.dragging=!1;const t=this.drag;if(t){const e=t.rootEl;gp?.get(e)===t&&gp.delete(e),this.drag=null,pwe(t.pointerCapture),X3(t.handlers)}}onPointerDown(t,e){if(this.isPointer())return;const n=this.beans;if(Mp?.has(e))return;const i=e.pointerType;if(i==="touch"&&(n.gos.get("suppressTouch")||!t.includeTouch||(t.stopPropagationForTouch&&e.stopPropagation(),Q0(HT(e))))||!e.isPrimary||i==="mouse"&&e.button!==0)return;this.destroyDrag();const r=Il(n),s=t.eElement,a=e.pointerId,o=new IT(r,t,e,a);gp??(gp=new WeakMap),gp.set(r,o);const l=v=>{v.pointerId===a&&this.onMouseOrPointerMove(v)},u=v=>{v.pointerId===a&&this.onMouseOrPointerUp(v)},h=v=>{v.pointerId===a&&kl(v)&&this.cancelDrag()},g=v=>this.draggingPreventDefault(v);this.initDrag(o,[r,"pointerup",u],[r,"pointercancel",h],[r,"pointermove",l,gh],[r,"touchmove",g,gh],[s,"mousemove",g,gh]),t.dragStartPixels===0?this.onMouseOrPointerMove(e):kl(e)}onTouchStart(t,e){if(this.gos.get("suppressTouch")||!t.includeTouch||!kl(e)||Q0(HT(e)))return;if(t.stopPropagationForTouch&&e.stopPropagation(),this.isPointer()){this.dragging&&Dp(e);return}this.destroyDrag();const i=this.beans,r=Il(i),s=new IT(r,t,e.touches[0]),a=v=>this.onTouchMove(v),o=v=>this.onTouchUp(v),l=v=>this.onTouchCancel(v),u=v=>this.draggingPreventDefault(v),h=Il(i),g=e.target??t.eElement;this.initDrag(s,[g,"touchmove",a,BT],[g,"touchend",o,BT],[g,"touchcancel",l,BT],[h,"touchmove",u,gh],[h,"touchend",o,gh],[h,"touchcancel",l,gh]),t.dragStartPixels===0&&this.onMove(s.start)}draggingPreventDefault(t){this.dragging&&Dp(t)}onMouseDown(t,e){if(e.button!==0||Mp?.has(e)||this.isPointer())return;const n=this.beans;this.destroyDrag();const i=new IT(Il(n),t,e),r=o=>this.onMouseOrPointerMove(o),s=o=>this.onMouseOrPointerUp(o),a=Il(n);this.initDrag(i,[a,"mousemove",r],[a,"mouseup",s]),t.dragStartPixels===0?this.onMouseOrPointerMove(e):kl(e)}onScroll(t){if(!kl(t))return;const e=this.drag,n=e?.lastDrag;n&&this.dragging&&e.params?.onDragging?.(n)}onMouseOrPointerMove(t){kl(t)&&(i5()&&lo(this.beans).getSelection()?.removeAllRanges(),this.shouldPreventMouseEvent(t)&&Dp(t),this.onMove(t))}onTouchCancel(t){const e=this.drag;!e||!kl(t)||zp(e.start,t.changedTouches)&&this.cancelDrag()}onTouchMove(t){const e=this.drag;if(!e||!kl(t))return;const n=zp(e.start,t.touches);n&&(this.onMove(n),this.draggingPreventDefault(t))}onMove(t){const e=this.drag;if(!e)return;e.lastDrag=t;const n=e.params;if(!this.dragging){const i=e.start,s=n.dragStartPixels??4;if(eV(t,i,s)||(this.dragging=!0,n.capturePointer&&(e.pointerCapture=gwe(this.beans.eRootDiv,t)),this.eventSvc.dispatchEvent({type:"dragStarted",target:n.eElement}),n.onDragStart?.(i),this.drag!==e)||(n.onDragging?.(i),this.drag!==e))return}n.onDragging?.(t)}onTouchUp(t){const e=this.drag;e&&kl(t)&&this.onUp(zp(e.start,t.changedTouches))}onMouseOrPointerUp(t){kl(t)&&this.onUp(t)}onUp(t){const e=this.drag;e&&(t||(t=e.lastDrag),t&&this.dragging&&(this.dragging=!1,e.params.onDragStop?.(t),this.eventSvc.dispatchEvent({type:"dragStopped",target:e.params.eElement})),this.destroyDrag())}onKeyDown(t){t.key===Le.ESCAPE&&this.cancelDrag()}},g7=t=>{X3(t.handlers);const e=t.oldTouchAction;if(e!=null){const n=t.params.eElement.style;n&&(n.touchAction=e)}},IT=class{constructor(t,e,n,i=null){this.rootEl=t,this.params=e,this.start=n,this.pointerId=i,this.handlers=[],this.lastDrag=null,this.pointerCapture=null,this.eElement=e.eElement}},HT=t=>{const e=t.target;return e instanceof Element?e:null},ywe=class extends vwe{shouldPreventMouseEvent(t){return this.gos.get("enableCellTextSelection")&&super.shouldPreventMouseEvent(t)}},Cwe=class extends He{constructor(){super(...arguments),this.beanName="horizontalResizeSvc"}addResizeBar(t){const e={dragStartPixels:t.dragStartPixels||0,eElement:t.eResizeBar,onDragStart:this.onDragStart.bind(this,t),onDragStop:this.onDragStop.bind(this,t),onDragging:this.onDragging.bind(this,t),onDragCancel:this.onDragStop.bind(this,t),includeTouch:!0,stopPropagationForTouch:!0},{dragSvc:n}=this.beans;return n.addDragSource(e),()=>n.removeDragSource(e)}onDragStart(t,e){this.dragStartX=e.clientX,this.setResizeIcons();const n=e instanceof MouseEvent&&e.shiftKey===!0;t.onResizeStart(n)}setResizeIcons(){const t=this.beans.ctrlsSvc.get("gridCtrl");t.setResizeCursor(1),t.disableUserSelect(!0)}onDragStop(t){t.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const t=this.beans.ctrlsSvc.get("gridCtrl");t.setResizeCursor(!1),t.disableUserSelect(!1)}onDragging(t,e){this.resizeAmount=e.clientX-this.dragStartX,t.onResizing(this.resizeAmount)}},bwe=t=>{let e=t.childrenAfterGroup;for(;e?.length;){const n=e[0];if(n.sourceRowIndex>=0)return n;e=n.childrenAfterGroup}};function wwe(t,e){return h5(t,e.target)?.getFocusedCellPosition()??null}var Swe=class{constructor(t,e){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=t,this.pathRoot={rowNode:e,children:null},this.mapToItems[e.id]=this.pathRoot}depthFirstSearchChangedPath(t,e){const{rowNode:n,children:i}=t;if(i)for(let r=0;r<i.length;++r)this.depthFirstSearchChangedPath(i[r],e);e(n)}depthFirstSearchEverything(t,e,n){const i=t.childrenAfterGroup;if(i)for(let r=0,s=i.length;r<s;++r){const a=i[r];a.childrenAfterGroup?this.depthFirstSearchEverything(a,e,n):n&&e(a)}e(t)}forEachChangedNodeDepthFirst(t,e=!1,n=!1){this.active&&!n?this.depthFirstSearchChangedPath(this.pathRoot,t):this.depthFirstSearchEverything(this.pathRoot.rowNode,t,e)}executeFromRootNode(t){t(this.pathRoot.rowNode)}createPathItems(t){let e=t,n=0;for(;!this.mapToItems[e.id];){const i={rowNode:e,children:null};this.mapToItems[e.id]=i,n++,e=e.parent}return n}populateColumnsMap(t,e){if(!this.keepingColumns||!e)return;let n=t;for(;n;){this.nodeIdsToColumns[n.id]||(this.nodeIdsToColumns[n.id]={});for(const i of e)this.nodeIdsToColumns[n.id][i.getId()]=!0;n=n.parent}}linkPathItems(t,e){let n=t;for(let i=0;i<e;i++){const r=this.mapToItems[n.id],s=this.mapToItems[n.parent.id];s.children||(s.children=[]),s.children.push(r),n=n.parent}}addParentNode(t,e){if(!t||t.isRowPinned())return;const n=this.createPathItems(t);this.linkPathItems(t,n),this.populateColumnsMap(t,e)}canSkip(t){return this.active&&!this.mapToItems[t.id]}getValueColumnsForNode(t,e){if(!this.keepingColumns)return e;const n=this.nodeIdsToColumns[t.id];return e.filter(r=>n[r.getId()])}getNotValueColumnsForNode(t,e){if(!this.keepingColumns)return null;const n=this.nodeIdsToColumns[t.id];return e.filter(r=>!n[r.getId()])}},hU={moduleName:"Drag",version:kn,beans:[ywe]},xwe={moduleName:"SharedDragAndDrop",version:kn,beans:[Mbe],dependsOn:[hU],userComponents:{agDragAndDropImage:rbe},icons:{columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",rowDrag:"grip"}},Awe={moduleName:"HorizontalResize",version:kn,beans:[Cwe],dependsOn:[hU]},Ewe=":where(.ag-ltr) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:left .2s}.ag-header-group-cell{transition:left .2s,width .2s}}:where(.ag-rtl) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:right .2s}.ag-header-group-cell{transition:right .2s,width .2s}}",Twe=class extends He{constructor(){super(...arguments),this.beanName="colAnimation",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.beans.ctrlsSvc.whenReady(this,t=>this.gridBodyCtrl=t.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(t){this.suppressAnimation=t}start(){if(this.active)return;const{gos:t}=this;t.get("suppressColumnMoveAnimation")||t.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(t){this.activeNext?this.executeNextFuncs.push(t):t()}executeLaterVMTurn(t){this.active?this.executeLaterFuncs.push(t):t()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const t=this.animationThreadCount,{gridBodyCtrl:e}=this;e.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===t&&e.setColumnMovingCss(!1)})}flush(t,e){const{executeNextFuncs:n,executeLaterFuncs:i}=this;if(n.length===0&&i.length===0){t(),e();return}const r=s=>{for(;s.length;){const a=s.pop();a&&a()}};this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{t(),r(n)},0),window.setTimeout(()=>{e(),r(i)},200)})}};function Rwe(t,e,n){t.colMoves?.moveColumnByIndex(e,n,"api")}function Dwe(t,e,n){t.colMoves?.moveColumns(e,n,"api")}var Mwe=class extends He{constructor(t){super(),this.pinned=t,this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[]}onDragEnter(t){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const e=t.dragItem.columns;if(e)for(const n of e)n.isPrimary()&&(n.isAnyFunctionActive()||(n.isAllowValue()?this.columnsToAggregate.push(n):n.isAllowRowGroup()?this.columnsToGroup.push(n):n.isAllowPivot()&&this.columnsToPivot.push(n)))}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(t){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(t){}onDragStop(t){const{valueColsSvc:e,rowGroupColsSvc:n,pivotColsSvc:i}=this.beans;this.columnsToAggregate.length>0&&e?.addColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&n?.addColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&i?.addColumns(this.columnsToPivot,"toolPanelDragAndDrop")}onDragCancel(){this.clearColumnsList()}};function _we(t,e){!e||e.length<=1||e.filter(i=>t.indexOf(i)<0).length>0||e.sort((i,r)=>{const s=t.indexOf(i),a=t.indexOf(r);return s-a})}function Pwe(t){const e=[...t];for(const n of t){let i=null,r=n.getParent();for(;r!=null&&r.getDisplayedLeafColumns().length===1;)i=r,r=r.getParent();if(i!=null){const a=!!i.getColGroupDef()?.marryChildren?i.getProvidedColumnGroup().getLeafColumns():i.getLeafColumns();for(const o of a)e.includes(o)||e.push(o)}}return e}function Owe(t,e,n,i){const r=i.allCols;let s=null,a=null;for(let o=0;o<t.length;o++){const l=t[o],u=n.getProposedColumnOrder(e,l);if(!n.doesOrderPassRules(u))continue;const h=u.filter(v=>r.includes(v));if(a===null)a=h;else if(!sx(h,a))break;const g=Fwe(u);(s===null||g<s.fragCount)&&(s={move:l,fragCount:g})}return s}function dU(t){const{isFromHeader:e,fromLeft:n,xPosition:i,fromEnter:r,fakeEvent:s,pinned:a,gos:o,colModel:l,colMoves:u,visibleCols:h}=t;let{allMovingColumns:g}=t;e&&(g=Pwe(g));const v=g.slice();_we(l.getCols(),v);const y=Nwe({movingCols:v,draggingRight:n,xPosition:i,pinned:a,gos:o,colModel:l,visibleCols:h}),w=Lwe(v,l);if(y.length===0)return;const S=y[0];if(w!==null&&(e||!r)&&!s&&(!n&&S>=w||n&&S<=w))return;const T=Owe(y,v,u,h);if(!T)return;const _=T.move;if(!(_>l.getCols().length-v.length))return{columns:v,toIndex:_}}function fU(t){const{columns:e,toIndex:n}=dU(t)||{},{finished:i,colMoves:r}=t;return!e||n==null?null:(r.moveColumns(e,n,"uiColumnMoved",i),i?null:{columns:e,toIndex:n})}function Lwe(t,e){const n=e.getCols(),i=t.map(l=>n.indexOf(l)).sort((l,u)=>l-u),r=i[0];return On(i)-r!==i.length-1?null:r}function Fwe(t){function e(i){const r=[];let s=i.getOriginalParent();for(;s!=null;)r.push(s),s=s.getOriginalParent();return r}let n=0;for(let i=0;i<t.length-1;i++){let r=e(t[i]),s=e(t[i+1]);[r,s]=r.length>s.length?[r,s]:[s,r];for(const a of r)s.indexOf(a)===-1&&n++}return n}function kwe(t,e){switch(e){case"left":return t.leftCols;case"right":return t.rightCols;default:return t.centerCols}}function Nwe(t){const{movingCols:e,draggingRight:n,xPosition:i,pinned:r,gos:s,colModel:a,visibleCols:o}=t;if(s.get("suppressMovableColumns")||e.some(M=>M.getColDef().suppressMovable))return[];const u=kwe(o,r),h=a.getCols(),g=u.filter(M=>e.includes(M)),v=u.filter(M=>!e.includes(M)),y=h.filter(M=>!e.includes(M));let w=0,S=i;if(n){let M=0;for(const F of g)M+=F.getActualWidth();S-=M}if(S>0){for(let M=0;M<v.length;M++){const F=v[M];if(S-=F.getActualWidth(),S<0)break;w++}n&&w++}let x;if(w>0){const M=v[w-1];x=y.indexOf(M)+1}else x=y.indexOf(v[0]),x===-1&&(x=0);const T=[x],_=(M,F)=>M-F;if(n){let M=x+1;const F=h.length-1;for(;M<=F;)T.push(M),M++;T.sort(_)}else{let M=x;const F=h.length-1;let L=h[M];for(;M<=F&&u.indexOf(L)<0;)M++,T.push(M),L=h[M];M=x-1;const k=0;for(;M>=k;)T.push(M),M--;T.sort(_).reverse()}return T}function YD(t){const{pinned:e,fromKeyboard:n,gos:i,ctrlsSvc:r,useHeaderRow:s,skipScrollPadding:a}=t;let o=r.getHeaderRowContainerCtrl(e)?.eViewport,{x:l}=t;return o?(n&&(l-=o.getBoundingClientRect().left),i.get("enableRtl")&&(s&&(o=o.querySelector(".ag-header-row")),l=o.clientWidth-l),e==null&&!a&&(l+=r.get("center").getCenterViewportScrollLeft()),l):0}function GT(t,e){for(const n of t)n.moving=e,n.dispatchColEvent("movingChanged","uiColumnMoved")}var p7=7,XD=100,tw=XD/2,Bwe=5,Iwe=100,Hwe=class extends He{constructor(t){super(),this.pinned=t,this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.isCenterContainer=!Et(t)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,t=>{this.gridBodyCon=t.gridBodyCtrl})}getIconName(){const{pinned:t,lastDraggingEvent:e}=this,{dragItem:n}=e||{},i=n?.columns??[];for(const r of i){const s=r.getPinned();if(r.getColDef().lockPinned){if(s==t)return"move";continue}const a=n?.containerType;if(a===t||!t)return"move";if(t&&(!s||a!==t))return"pinned"}return"notAllowed"}onDragEnter(t){const e=t.dragItem,n=e.columns;if(t.dragSource.type===0)this.setColumnsVisible(n,!0,"uiColumnDragged");else{const r=e.visibleState,s=(n||[]).filter(a=>r[a.getId()]&&!a.isVisible());this.setColumnsVisible(s,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(n,this.pinned),this.onDragging(t,!0,!0)}onDragging(t=this.lastDraggingEvent,e=!1,n=!1,i=!1){const{gos:r,ctrlsSvc:s}=this.beans,a=r.get("suppressMoveWhenColumnDragging");if(i&&!a){this.finishColumnMoving();return}if(this.lastDraggingEvent=t,!t||!i&&gr(t.hDirection))return;const o=YD({x:t.x,pinned:this.pinned,gos:r,ctrlsSvc:s});e||this.checkCenterForScrolling(o),a?this.handleColumnDragWhileSuppressingMovement(t,e,n,o,i):this.handleColumnDragWhileAllowingMovement(t,e,n,o,i)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.updateDragItemContainerType(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(t,e,n){if(!t?.length)return;const i=t.filter(r=>!r.getColDef().lockVisible);i.length&&this.beans.colModel.setColsVisible(i,e,n)}finishColumnMoving(){this.clearHighlighted();const t=this.lastMovedInfo;if(!t)return;const{columns:e,toIndex:n}=t;this.beans.colMoves.moveColumns(e,n,"uiColumnMoved",!0)}updateDragItemContainerType(){const{lastDraggingEvent:t}=this;if(this.gos.get("suppressMoveWhenColumnDragging")||!t)return;const e=t.dragItem;e&&(e.containerType=this.pinned)}handleColumnDragWhileSuppressingMovement(t,e,n,i,r){const s=this.getAllMovingColumns(t,!0);if(r){const a=this.isAttemptingToPin(s);a&&this.attemptToPinColumns(s,void 0,!0);const{fromLeft:o,xPosition:l}=this.getNormalisedXPositionInfo(s,a)||{};if(o==null||l==null){this.finishColumnMoving();return}this.moveColumnsAfterHighlight({allMovingColumns:s,xPosition:l,fromEnter:e,fakeEvent:n,fromLeft:o})}else{if(!this.beans.dragAndDrop.isDropZoneWithinThisGrid(t))return;this.highlightHoveredColumn(s,i)}}handleColumnDragWhileAllowingMovement(t,e,n,i,r){const s=this.getAllMovingColumns(t),a=this.normaliseDirection(t.hDirection)==="right",o=t.dragSource.type===1,l=this.getMoveColumnParams({allMovingColumns:s,isFromHeader:o,xPosition:i,fromLeft:a,fromEnter:e,fakeEvent:n}),u=fU({...l,finished:r});u&&(this.lastMovedInfo=u)}getAllMovingColumns(t,e=!1){const n=t.dragSource.getDragItem();let i=null;e?(i=n.columnsInSplit,i||(i=n.columns)):i=n.columns;const r=s=>s.getColDef().lockPinned?s.getPinned()==this.pinned:!0;return i?i.filter(r):[]}getMoveColumnParams(t){const{allMovingColumns:e,isFromHeader:n,xPosition:i,fromLeft:r,fromEnter:s,fakeEvent:a}=t,{gos:o,colModel:l,colMoves:u,visibleCols:h}=this.beans;return{allMovingColumns:e,isFromHeader:n,fromLeft:r,xPosition:i,pinned:this.pinned,fromEnter:s,fakeEvent:a,gos:o,colModel:l,colMoves:u,visibleCols:h}}highlightHoveredColumn(t,e){const{gos:n,colModel:i}=this.beans,r=n.get("enableRtl"),s=i.getCols().filter(h=>h.isVisible()&&h.getPinned()===this.pinned);let a=null,o=null,l=null;for(const h of s){if(o=h.getActualWidth(),a=this.getNormalisedColumnLeft(h,0,r),a!=null){const g=a+o;if(a<=e&&g>=e){l=h;break}}a=null,o=null}if(l)t.indexOf(l)!==-1&&(l=null);else{for(let h=s.length-1;h>=0;h--){const g=s[h],v=s[h].getParent();if(!v){l=g;break}const y=v?.getDisplayedLeafColumns();if(y.length){l=On(y);break}}if(!l)return;a=this.getNormalisedColumnLeft(l,0,r),o=l.getActualWidth()}if(l==null||a==null||o==null){this.lastHighlightedColumn?.column!==l&&this.clearHighlighted();return}let u;if(e-a<o/2){const h=s.indexOf(l);h===0?u=0:(u=1,l=s[h-1])}else u=1;(this.lastHighlightedColumn?.column!==l||this.lastHighlightedColumn?.position!==u)&&this.clearHighlighted(),m7(l,u),this.lastHighlightedColumn={column:l,position:u}}getNormalisedXPositionInfo(t,e){const{gos:n,visibleCols:i}=this.beans,r=n.get("enableRtl"),{firstMovingCol:s,column:a,position:o}=this.getColumnMoveAndTargetInfo(t,e,r);if(!s||!a||o==null)return;const l=i.allCols,u=l.indexOf(s),h=l.indexOf(a),g=o===0,v=u<h||u===h&&!g;let y=0;if(g?v&&(y-=1):v||(y+=1),h+y===u)return;const w=l[h+y];if(!w)return;const S=this.getNormalisedColumnLeft(w,20,r);return{fromLeft:v,xPosition:S}}getColumnMoveAndTargetInfo(t,e,n){const i=this.lastHighlightedColumn||{},{firstMovingCol:r,lastMovingCol:s}=Gwe(t);if(!r||!s||i.column||!e)return{firstMovingCol:r,...i};const o=this.getPinDirection()==="left";return{firstMovingCol:r,position:o?1:0,column:o!==n?r:s}}normaliseDirection(t){if(this.gos.get("enableRtl"))switch(t){case"left":return"right";case"right":return"left"}return t}getNormalisedColumnLeft(t,e,n){const{gos:i,ctrlsSvc:r}=this.beans,s=t.getLeft();if(s==null)return null;const a=t.getActualWidth();return YD({x:n?s+a-e:s+e,pinned:t.getPinned(),useHeaderRow:n,skipScrollPadding:!0,gos:i,ctrlsSvc:r})}isAttemptingToPin(t){const e=this.needToMoveLeft||this.needToMoveRight,n=this.failedMoveAttempts>p7;return e&&n||t.some(i=>i.getPinned()!==this.pinned)}moveColumnsAfterHighlight(t){const{allMovingColumns:e,xPosition:n,fromEnter:i,fakeEvent:r,fromLeft:s}=t,a=this.getMoveColumnParams({allMovingColumns:e,isFromHeader:!0,xPosition:n,fromLeft:s,fromEnter:i,fakeEvent:r}),{columns:o,toIndex:l}=dU(a)||{};o&&l!=null&&(this.lastMovedInfo={columns:o,toIndex:l}),this.finishColumnMoving()}clearHighlighted(){const{lastHighlightedColumn:t}=this;t&&(m7(t.column,null),this.lastHighlightedColumn=null)}checkCenterForScrolling(t){if(!this.isCenterContainer)return;const e=this.beans.ctrlsSvc.get("center"),n=e.getCenterViewportScrollLeft(),i=n+e.getCenterWidth();let r,s;this.gos.get("enableRtl")?(r=t<n+tw,s=t>i-tw):(s=t<n+tw,r=t>i-tw),this.needToMoveRight=r,this.needToMoveLeft=s,s||r?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),Iwe),this.beans.dragAndDrop.setDragImageCompIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,this.beans.dragAndDrop.setDragImageCompIcon(this.getIconName()))}moveInterval(){let t;this.intervalCount++,t=10+this.intervalCount*Bwe,t>XD&&(t=XD);let e=null;const n=this.gridBodyCon.scrollFeature;if(this.needToMoveLeft?e=n.scrollHorizontally(-t):this.needToMoveRight&&(e=n.scrollHorizontally(t)),e!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;const{pinnedCols:i,dragAndDrop:r,gos:s}=this.beans;if(this.failedMoveAttempts<=p7+1||!i)return;if(r.setDragImageCompIcon("pinned"),!s.get("suppressMoveWhenColumnDragging")){const a=this.lastDraggingEvent?.dragItem.columns;this.attemptToPinColumns(a,void 0,!0)}}}getPinDirection(){if(this.needToMoveLeft||this.pinned==="left")return"left";if(this.needToMoveRight||this.pinned==="right")return"right"}attemptToPinColumns(t,e,n=!1){const i=(t||[]).filter(a=>!a.getColDef().lockPinned);if(!i.length)return 0;n&&(e=this.getPinDirection());const{pinnedCols:r,dragAndDrop:s}=this.beans;return r?.setColsPinned(i,e,"uiColumnDragged"),n&&s.nudge(),i.length}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}};function m7(t,e){t.highlighted!==e&&(t.highlighted=e,t.dispatchColEvent("headerHighlightChanged","uiColumnMoved"))}function Gwe(t){const e=t.length;let n,i;for(let r=0;r<e;r++){if(!n){const s=t[r];s.getLeft()!=null&&(n=s)}if(!i){const s=t[e-1-r];s.getLeft()!=null&&(i=s)}if(n&&i)break}return{firstMovingCol:n,lastMovingCol:i}}var zwe=class extends He{constructor(t,e){super(),this.pinned=t,this.eContainer=e}postConstruct(){const{ctrlsSvc:t,dragAndDrop:e}=this.beans,n=this.pinned;t.whenReady(this,i=>{let r;const s=i.gridBodyCtrl.eBodyViewport;switch(n){case"left":r=[[s,i.left.eContainer],[i.bottomLeft.eContainer],[i.topLeft.eContainer]];break;case"right":r=[[s,i.right.eContainer],[i.bottomRight.eContainer],[i.topRight.eContainer]];break;default:r=[[s,i.center.eViewport],[i.bottomCenter.eViewport],[i.topCenter.eViewport]];break}this.eSecondaryContainers=r}),this.moveColumnFeature=this.createManagedBean(new Hwe(n)),this.bodyDropPivotTarget=this.createManagedBean(new Mwe(n)),e.addDropTarget(this),this.addDestroyFunc(()=>e.removeDropTarget(this))}isInterestedIn(t){return t===1||t===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(t){return this.beans.colModel.isPivotMode()&&t.dragSource.type===0}onDragEnter(t){this.currentDropListener=this.isDropColumnInPivotMode(t)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(t)}onDragLeave(t){this.currentDropListener.onDragLeave(t)}onDragging(t){this.currentDropListener.onDragging(t)}onDragStop(t){this.currentDropListener.onDragStop(t)}onDragCancel(){this.currentDropListener.onDragCancel()}},Vwe=class extends He{constructor(){super(...arguments),this.beanName="colMoves"}moveColumnByIndex(t,e,n){const i=this.beans.colModel.getCols();if(!i)return;const r=i[t];this.moveColumns([r],e,n)}moveColumns(t,e,n,i=!0){const{colModel:r,colAnimation:s,visibleCols:a,eventSvc:o}=this.beans,l=r.getCols();if(!l)return;if(e>l.length-t.length){Tt(30,{toIndex:e});return}s?.start();const u=r.getColsForKeys(t);this.doesMovePassRules(u,e)&&(jF(r.getCols(),u,e),a.refresh(n),o.dispatchEvent({type:"columnMoved",columns:u,column:u.length===1?u[0]:null,toIndex:e,finished:i,source:n})),s?.finish()}doesMovePassRules(t,e){const n=this.getProposedColumnOrder(t,e);return this.doesOrderPassRules(n)}doesOrderPassRules(t){const{colModel:e,gos:n}=this.beans;return!(!TV(t,e.getColTree())||!(r=>{const s=u=>u?u==="left"||u===!0?-1:1:0,a=n.get("enableRtl");let o=a?1:-1,l=!0;for(const u of r){const h=s(u.getColDef().lockPosition);a?h>o&&(l=!1):h<o&&(l=!1),o=h}return l})(t))}getProposedColumnOrder(t,e){const i=this.beans.colModel.getCols().slice();return jF(i,t,e),i}createBodyDropTarget(t,e){return new zwe(t,e)}moveHeader(t,e,n,i,r){const{ctrlsSvc:s,gos:a,colModel:o,visibleCols:l,focusSvc:u}=this.beans,h=e.getBoundingClientRect(),g=h.left,v=zi(n),y=v?h.width:n.getActualWidth(),w=t==="left"!==a.get("enableRtl"),S=YD({x:w?g-20:g+y+20,pinned:i,fromKeyboard:!0,gos:a,ctrlsSvc:s}),x=u.focusedHeader;fU({allMovingColumns:v?n.getLeafColumns():[n],isFromHeader:!0,fromLeft:t==="right",xPosition:S,pinned:i,fromEnter:!1,fakeEvent:!1,gos:a,colModel:o,colMoves:this,visibleCols:l,finished:!0});let T;if(v){const _=n.getDisplayedLeafColumns();T=w?_[0]:On(_)}else T=n;if(s.getScrollFeature().ensureColumnVisible(T,"auto"),(!r.isAlive()||a.get("ensureDomOrder"))&&x){let _;if(v){const M=n.getGroupId(),F=n.getLeafColumns();if(!F.length)return;const L=F[0].getParent();if(!L)return;_=Uwe(L,M)}else _=n;_&&u.focusHeaderPosition({headerPosition:{...x,column:_}})}}setDragSourceForHeader(t,e,n){const{gos:i,colModel:r,dragAndDrop:s,visibleCols:a}=this.beans;let o=!i.get("suppressDragLeaveHidesColumns");const l=zi(e),u=l?e.getProvidedColumnGroup().getLeafColumns():[e],g={type:1,eElement:t,getDefaultIconName:()=>o?"hide":"notAllowed",getDragItem:l?()=>Wwe(e,a.allCols):()=>jwe(e),dragItemName:n,onDragStarted:()=>{o=!i.get("suppressDragLeaveHidesColumns"),GT(u,!0)},onDragStopped:()=>GT(u,!1),onDragCancelled:()=>GT(u,!1),onGridEnter:v=>{if(o){const{columns:y=[],visibleState:w}=v??{},S=l?T=>!w||w[T.getColId()]:()=>!0,x=y.filter(T=>!T.getColDef().lockVisible&&S(T));r.setColsVisible(x,!0,"uiColumnMoved")}},onGridExit:v=>{if(o){const y=v?.columns?.filter(w=>!w.getColDef().lockVisible)||[];r.setColsVisible(y,!1,"uiColumnMoved")}}};return s.addDragSource(g,!0),g}};function Uwe(t,e){for(;t;){if(t.getGroupId()===e)return t;t=t.getParent()}}function jwe(t){const e={};return e[t.getId()]=t.isVisible(),{columns:[t],visibleState:e,containerType:t.pinned}}function Wwe(t,e){const n=t.getProvidedColumnGroup().getLeafColumns(),i={};for(const o of n)i[o.getId()]=o.isVisible();const r=[];for(const o of e)n.indexOf(o)>=0&&(r.push(o),rm(n,o));for(const o of n)r.push(o);const s=[],a=t.getLeafColumns();for(const o of r)a.indexOf(o)!==-1&&s.push(o);return{columns:r,columnsInSplit:s,visibleState:i,containerType:s[0]?.pinned}}var qwe={moduleName:"ColumnMove",version:kn,beans:[Vwe,Twe],apiFunctions:{moveColumnByIndex:Rwe,moveColumns:Dwe},dependsOn:[xwe],css:[Ewe]},Kwe=class extends He{constructor(){super(...arguments),this.beanName="autoWidthCalc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,t=>{this.centerRowContainerCtrl=t.center})}getPreferredWidthForColumn(t,e){const n=this.getHeaderCellForColumn(t);if(!n)return-1;const i=this.beans.rowRenderer.getAllCellsNotSpanningForColumn(t);return e||i.push(n),this.getPreferredWidthForElements(i)}getPreferredWidthForColumnGroup(t){const e=this.getHeaderCellForColumn(t);return e?this.getPreferredWidthForElements([e]):-1}getPreferredWidthForElements(t,e){const n=document.createElement("form");n.style.position="fixed";const i=this.centerRowContainerCtrl.eContainer;for(const s of t)this.cloneItemIntoDummy(s,n);i.appendChild(n);const r=Math.ceil(n.getBoundingClientRect().width);return n.remove(),e=e??this.gos.get("autoSizePadding"),r+e}getHeaderCellForColumn(t){let e=null;for(const n of this.beans.ctrlsSvc.getHeaderRowContainerCtrls()){const i=n.getHtmlElementForColumnHeader(t);i!=null&&(e=i)}return e}cloneItemIntoDummy(t,e){const n=t.cloneNode(!0);n.style.width="",n.style.position="static",n.style.left="";const i=document.createElement("div"),r=i.classList;["ag-header-cell","ag-header-group-cell"].some(o=>n.classList.contains(o))?(r.add("ag-header","ag-header-row"),i.style.position="static"):r.add("ag-row");let a=t.parentElement;for(;a;){if(["ag-header-row","ag-row"].some(l=>a.classList.contains(l))){for(let l=0;l<a.classList.length;l++){const u=a.classList[l];u!="ag-row-position-absolute"&&r.add(u)}break}a=a.parentElement}i.appendChild(n),e.appendChild(i)}},Ywe={moduleName:"AutoWidth",version:kn,beans:[Kwe]};function Xwe(t,e,n=!0,i="api"){t.colResize?.setColumnWidths(e,!1,n,i)}var $we=class extends He{constructor(t,e,n,i){super(),this.comp=t,this.eResize=e,this.pinned=n,this.columnGroup=i}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}const{horizontalResizeSvc:t,gos:e,colAutosize:n}=this.beans,i=t.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});this.addDestroyFunc(i),!e.get("suppressAutoSize")&&n&&this.addDestroyFunc(n.addColumnGroupResize(this.eResize,this.columnGroup,()=>this.resizeLeafColumnsToFit("uiColumnResized")))}onResizeStart(t){const{columnsToResize:e,resizeStartWidth:n,resizeRatios:i,groupAfterColumns:r,groupAfterStartWidth:s,groupAfterRatios:a}=this.getInitialValues(t);this.resizeCols=e,this.resizeStartWidth=n,this.resizeRatios=i,this.resizeTakeFromCols=r,this.resizeTakeFromStartWidth=s,this.resizeTakeFromRatios=a,this.toggleColumnResizing(!0)}onResizing(t,e,n="uiColumnResized"){const i=this.normaliseDragChange(e),r=this.resizeStartWidth+i;this.resizeColumnsFromLocalValues(r,n,t)}getInitialValues(t){const e=l=>l.reduce((u,h)=>u+h.getActualWidth(),0),n=(l,u)=>l.map(h=>h.getActualWidth()/u),i=this.getColumnsToResize(),r=e(i),s=n(i,r),a={columnsToResize:i,resizeStartWidth:r,resizeRatios:s};let o=null;if(t&&(o=this.beans.colGroupSvc?.getGroupAtDirection(this.columnGroup,"After")??null),o){const l=o.getDisplayedLeafColumns(),u=a.groupAfterColumns=l.filter(g=>g.isResizable()),h=a.groupAfterStartWidth=e(u);a.groupAfterRatios=n(u,h)}else a.groupAfterColumns=void 0,a.groupAfterStartWidth=void 0,a.groupAfterRatios=void 0;return a}resizeLeafColumnsToFit(t){const e=this.beans.autoWidthCalc.getPreferredWidthForColumnGroup(this.columnGroup),n=this.getInitialValues();e>n.resizeStartWidth&&this.resizeColumns(n,e,t,!0)}resizeColumnsFromLocalValues(t,e,n=!0){if(!this.resizeCols||!this.resizeRatios)return;const i={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols,groupAfterStartWidth:this.resizeTakeFromStartWidth,groupAfterRatios:this.resizeTakeFromRatios};this.resizeColumns(i,t,e,n)}resizeColumns(t,e,n,i=!0){const{columnsToResize:r,resizeStartWidth:s,resizeRatios:a,groupAfterColumns:o,groupAfterStartWidth:l,groupAfterRatios:u}=t,h=[];if(h.push({columns:r,ratios:a,width:e}),o){const g=e-s;h.push({columns:o,ratios:u,width:l-g})}this.beans.colResize?.resizeColumnSets({resizeSets:h,finished:i,source:n}),i&&this.toggleColumnResizing(!1)}toggleColumnResizing(t){this.comp.toggleCss("ag-column-resizing",t)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(e=>e.isResizable())}normaliseDragChange(t){let e=t;return this.gos.get("enableRtl")?this.pinned!=="left"&&(e*=-1):this.pinned==="right"&&(e*=-1),e}destroy(){super.destroy(),this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}},Zwe=class extends He{constructor(t,e,n,i,r){super(),this.pinned=t,this.column=e,this.eResize=n,this.comp=i,this.ctrl=r}postConstruct(){const t=[];let e,n;const i=()=>{if(li(this.eResize,e),!e)return;const{horizontalResizeSvc:a,colAutosize:o}=this.beans,l=a.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});t.push(l),n&&o&&t.push(o.addColumnAutosizeListeners(this.eResize,this.column))},r=()=>{for(const a of t)a();t.length=0},s=()=>{const a=this.column.isResizable(),o=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(a!==e||o!==n)&&(e=a,n=o,r(),i())};s(),this.addDestroyFunc(r),this.ctrl.setRefreshFunction("resize",s)}onResizing(t,e){const{column:n,lastResizeAmount:i,resizeStartWidth:r,beans:s}=this,a=this.normaliseResizeAmount(e),o=r+a,l=[{key:n,newWidth:o}],{pinnedCols:u,ctrlsSvc:h,colResize:g}=s;if(this.column.getPinned()){const v=u?.leftWidth??0,y=u?.rightWidth??0,w=_S(h.getGridBodyCtrl().eBodyViewport)-50;if(v+y+(a-i)>w)return}this.lastResizeAmount=a,g?.setColumnWidths(l,this.resizeWithShiftKey,t,"uiColumnResized"),t&&this.toggleColumnResizing(!1)}onResizeStart(t){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=t,this.toggleColumnResizing(!0)}toggleColumnResizing(t){this.column.resizing=t,this.comp.toggleCss("ag-column-resizing",t)}normaliseResizeAmount(t){let e=t;const n=this.pinned!=="left",i=this.pinned==="right";return this.gos.get("enableRtl")?n&&(e*=-1):i&&(e*=-1),e}},Qwe=class extends He{constructor(){super(...arguments),this.beanName="colResize"}setColumnWidths(t,e,n,i){const r=[],{colModel:s,gos:a,visibleCols:o}=this.beans;for(const l of t){const u=s.getColDefCol(l.key)||s.getCol(l.key);if(!u)continue;if(r.push({width:l.newWidth,ratios:[1],columns:[u]}),a.get("colResizeDefault")==="shift"&&(e=!e),e){const g=o.getColAfter(u);if(!g)continue;const v=u.getActualWidth()-l.newWidth,y=g.getActualWidth()+v;r.push({width:y,ratios:[1],columns:[g]})}}r.length!==0&&this.resizeColumnSets({resizeSets:r,finished:n,source:i})}resizeColumnSets(t){const{resizeSets:e,finished:n,source:i}=t;if(!(!e||e.every(h=>Jwe(h)))){if(n){const h=e&&e.length>0?e[0].columns:null;BS(this.eventSvc,h,n,i)}return}const s=[],a=[];for(const h of e){const{width:g,columns:v,ratios:y}=h,w={},S={};for(const _ of v)a.push(_);let x=!0,T=0;for(;x;){if(T++,T>1e3){sa(31);break}x=!1;const _=[];let M=0,F=g;v.forEach((k,B)=>{if(S[k.getId()])F-=w[k.getId()];else{_.push(k);const U=y[B];M+=U}});const L=1/M;_.forEach((k,B)=>{const H=B===_.length-1;let U;H?U=F:(U=Math.round(y[B]*g*L),F-=U);const W=k.getMinWidth(),j=k.getMaxWidth();U<W?(U=W,S[k.getId()]=!0,x=!0):j>0&&U>j&&(U=j,S[k.getId()]=!0,x=!0),w[k.getId()]=U})}for(const _ of v){const M=w[_.getId()];_.getActualWidth()!==M&&(_.setActualWidth(M,i),s.push(_))}}const o=s.length>0;let l=[];if(o){const{colFlex:h,visibleCols:g,colViewport:v}=this.beans;l=h?.refreshFlexedColumns({resizingCols:a,skipSetLeft:!0})??[],g.setLeftValues(i),g.updateBodyWidths(),v.checkViewportColumns()}const u=a.concat(l);(o||n)&&BS(this.eventSvc,u,n,i,l)}resizeHeader(t,e,n){if(!t.isResizable())return;const i=t.getActualWidth(),r=t.getMinWidth(),s=t.getMaxWidth(),a=Math.min(Math.max(i+e,r),s);this.setColumnWidths([{key:t,newWidth:a}],n,!0,"uiColumnResized")}createResizeFeature(t,e,n,i,r){return new Zwe(t,e,n,i,r)}createGroupResizeFeature(t,e,n,i){return new $we(t,e,n,i)}};function Jwe(t){const{columns:e,width:n}=t;let i=0,r=0,s=!0;for(const l of e){const u=l.getMinWidth();i+=u||0;const h=l.getMaxWidth();h>0?r+=h:s=!1}const a=n>=i,o=!s||n<=r;return a&&o}var eSe={moduleName:"ColumnResize",version:kn,beans:[Qwe],apiFunctions:{setColumnWidths:Xwe},dependsOn:[Awe,Ywe]},tSe=class extends He{constructor(t,e){super(),this.removeChildListenersFuncs=[],this.columnGroup=e,this.comp=t}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const t=this.onWidthChanged.bind(this);for(const e of this.columnGroup.getLeafColumns())e.__addEventListener("widthChanged",t),e.__addEventListener("visibleChanged",t),this.removeChildListenersFuncs.push(()=>{e.__removeEventListener("widthChanged",t),e.__removeEventListener("visibleChanged",t)})}removeListenersOnChildrenColumns(){for(const t of this.removeChildListenersFuncs)t();this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const t=this.columnGroup.getActualWidth();this.comp.setWidth(`${t}px`),this.comp.toggleCss("ag-hidden",t===0)}},nSe=class extends ZV{constructor(){super(...arguments),this.onSuppressColMoveChange=()=>{!this.isAlive()||this.isSuppressMoving()?this.removeDragSource():this.dragSource||this.setDragSource(this.eGui)}}wireComp(t,e,n,i,r){const{column:s,beans:a}=this,{context:o,colNames:l,colHover:u,rangeSvc:h,colResize:g}=a;this.comp=t,r=fx(this,o,r),this.setGui(e,r),this.displayName=l.getDisplayNameForColumnGroup(s,"header"),this.refreshHeaderStyles(),this.addClasses(),this.setupMovingCss(r),this.setupExpandable(r),this.setupTooltip(),this.refreshAnnouncement(),this.setupAutoHeight({wrapperElement:i,compBean:r}),this.setupUserComp(),this.addHeaderMouseListeners(r,i),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();const v=this.rowCtrl.pinned,y=s.getProvidedColumnGroup().getLeafColumns();u?.createHoverFeature(r,y,e),h?.createRangeHighlightFeature(r,s,t),r.createManagedBean(new KV(s,e,a)),r.createManagedBean(new tSe(t,s)),g?this.resizeFeature=r.createManagedBean(g.createGroupResizeFeature(t,n,v,s)):t.setResizableDisplayed(!1),r.createManagedBean(new s5(e,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(r,y),this.addManagedEventListeners({cellSelectionChanged:()=>this.refreshAnnouncement()}),r.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(r),r.addDestroyFunc(()=>this.clearComponent())}getHeaderClassParams(){const{column:t,beans:e}=this,n=t.getDefinition();return Pn(e.gos,{colDef:n,columnGroup:t,floatingFilter:!1})}refreshMaxHeaderHeight(){const{gos:t,comp:e}=this,n=t.get("groupHeaderHeight");n!=null?n===0?e.setHeaderWrapperHidden(!0):e.setHeaderWrapperMaxHeight(n):(e.setHeaderWrapperHidden(!1),e.setHeaderWrapperMaxHeight(null))}addHighlightListeners(t,e){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(const n of e)t.addManagedListeners(n,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,n)})}onLeafColumnHighlightChanged(t){const e=this.column.getDisplayedLeafColumns(),n=e[0]===t,i=On(e)===t;if(!n&&!i)return;const r=t.getHighlighted(),s=!!this.rowCtrl.getHeaderCellCtrls().find(l=>l.column.isMoving());let a=!1,o=!1;if(s){const l=this.beans.gos.get("enableRtl"),u=r===1,h=r===0;n&&(l?o=u:a=h),i&&(l?a=h:o=u)}this.comp.toggleCss("ag-header-highlight-before",a),this.comp.toggleCss("ag-header-highlight-after",o)}resizeHeader(t,e){const{resizeFeature:n}=this;if(!n)return;const i=n.getInitialValues(e);n.resizeColumns(i,i.resizeStartWidth+t,"uiColumnResized",!0)}resizeLeafColumnsToFit(t){this.resizeFeature?.resizeLeafColumnsToFit(t)}setupUserComp(){const{colGroupSvc:t,userCompFactory:e,gos:n,enterpriseMenuFactory:i}=this.beans,r=this.column,s=r.getProvidedColumnGroup(),a=Pn(n,{displayName:this.displayName,columnGroup:r,setExpanded:l=>{t.setColumnGroupOpened(s,l,"gridInitializing")},setTooltip:(l,u)=>{n.assertModuleRegistered("Tooltip",3),this.setupTooltip(l,u)},showColumnMenu:(l,u)=>i?.showMenuAfterButtonClick(s,l,"columnMenu",u),showColumnMenuAfterMouseClick:(l,u)=>i?.showMenuAfterMouseEvent(s,l,"columnMenu",u),eGridHeader:this.eGui}),o=xbe(e,a);o&&this.comp.setUserCompDetails(o)}addHeaderMouseListeners(t,e){const{column:n,comp:i,beans:{rangeSvc:r},gos:s}=this,a=h=>this.handleMouseOverChange(h.type==="mouseenter"),o=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",n.getProvidedColumnGroup()),l=h=>this.handleContextMenuMouseEvent(h,void 0,n.getProvidedColumnGroup());t.addManagedListeners(this.eGui,{mouseenter:a,mouseleave:a,click:o,contextmenu:l}),i.toggleCss("ag-header-group-cell-selectable",Vp(s));const u=r?.createHeaderGroupCellMouseListenerFeature(this.column,e);u&&this.createManagedBean(u)}handleMouseOverChange(t){this.eventSvc.dispatchEvent({type:t?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(t,e){this.tooltipFeature=this.beans.tooltipSvc?.setupHeaderGroupTooltip(this.tooltipFeature,this,t,e)}setupExpandable(t){const e=this.column.getProvidedColumnGroup();this.refreshExpanded();const n=this.refreshExpanded.bind(this);t.addManagedListeners(e,{expandedChanged:n,expandableChanged:n})}refreshExpanded(){const{column:t}=this;this.expandable=t.isExpandable();const e=t.isExpanded();this.expandable?this.comp.setAriaExpanded(e?"true":"false"):this.comp.setAriaExpanded(void 0),this.refreshHeaderStyles()}addClasses(){const{column:t}=this,e=t.getColGroupDef(),n=YV(e,this.gos,null,t);t.isPadding()?(n.push("ag-header-group-cell-no-group"),t.getLeafColumns().every(r=>r.isSpanHeaderHeight())&&n.push("ag-header-span-height")):(n.push("ag-header-group-cell-with-group"),e?.wrapHeaderText&&n.push("ag-header-cell-wrap-text"));for(const i of n)this.comp.toggleCss(i,!0)}setupMovingCss(t){const{column:e}=this,i=e.getProvidedColumnGroup().getLeafColumns(),r=()=>this.comp.toggleCss("ag-header-cell-moving",e.isMoving());for(const s of i)t.addManagedListeners(s,{movingChanged:r});r()}onFocusIn(t){this.eGui.contains(t.relatedTarget)||(this.focusThis(),this.announceAriaDescription())}handleKeyDown(t){if(super.handleKeyDown(t),!this.getWrapperHasFocus())return;const{column:n,expandable:i,gos:r,beans:s}=this,a=Vp(r);if(t.key==Le.ENTER){if(a&&!t.altKey)s.rangeSvc?.handleColumnSelection(n,t);else if(i){const o=!n.isExpanded();s.colGroupSvc.setColumnGroupOpened(n.getProvidedColumnGroup(),o,"uiColumnExpanded")}}}refreshAnnouncement(){let t;const{gos:e,column:n,beans:i}=this;if(Vp(e)){const s=this.getLocaleTextFunc(),a=i.rangeSvc?.isColumnInAnyRange(n);t=s("ariaColumnCellSelection",`Press CTRL+SPACE to ${a?"de":""}select all visible cells in this column group`)}this.ariaAnnouncement=t}announceAriaDescription(){const{beans:t,eGui:e,ariaAnnouncement:n}=this;!n||!e.contains(kr(t))||t.ariaAnnounce?.announceValue(n,"columnHeader")}setDragSource(t){!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),t&&(this.dragSource=this.beans.colMoves?.setDragSourceForHeader(t,this.column,this.displayName)??null))}isSuppressMoving(){return this.gos.get("suppressMovableColumns")||this.column.getLeafColumns().some(t=>t.getColDef().suppressMovable||t.getColDef().lockPosition)}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function iSe(t,e,n){t.colGroupSvc?.setColumnGroupOpened(e,n,"api")}function rSe(t,e,n){return t.colGroupSvc?.getColumnGroup(e,n)??null}function sSe(t,e){return t.colGroupSvc?.getProvidedColGroup(e)??null}function aSe(t,e,n){return t.colNames.getDisplayNameForColumnGroup(e,n)||""}function oSe(t){return t.colGroupSvc?.getColumnGroupState()??[]}function lSe(t,e){t.colGroupSvc?.setColumnGroupState(e,"api")}function cSe(t){t.colGroupSvc?.resetColumnGroupState("api")}function uSe(t){return t.visibleCols.treeLeft}function hSe(t){return t.visibleCols.treeCenter}function dSe(t){return t.visibleCols.treeRight}function fSe(t){return t.visibleCols.getAllTrees()}var gSe=class{constructor(){this.existingIds={}}getInstanceIdForKey(t){const e=this.existingIds[t];let n;return typeof e!="number"?n=0:n=e+1,this.existingIds[t]=n,n}};function pSe(t,e){for(let n=0;n<e.length;n++){const i=t.indexOf(e[n]);i>=0&&(t[i]=t[t.length-1],t.pop())}}var mSe=class extends He{constructor(){super(...arguments),this.beanName="visibleCols",this.colsAndGroupsMap={},this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.headerGroupRowCount=0,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.isBodyWidthDirty=!0}refresh(t,e=!1){const{colFlex:n,colModel:i,colGroupSvc:r,colViewport:s,selectionColSvc:a}=this.beans;e||this.buildTrees(i,r),r?.updateOpenClosedVisibility(),this.leftCols=zT(this.treeLeft),this.centerCols=zT(this.treeCenter),this.rightCols=zT(this.treeRight),a?.refreshVisibility(this.leftCols,this.centerCols,this.rightCols),this.joinColsAriaOrder(i),this.joinCols(),this.headerGroupRowCount=this.getHeaderRowCount(),this.setLeftValues(t),this.autoHeightCols=this.allCols.filter(o=>o.isAutoHeight()),n?.refreshFlexedColumns(),this.updateBodyWidths(),this.setFirstRightAndLastLeftPinned(i,this.leftCols,this.rightCols,t),s.checkViewportColumns(!1),this.eventSvc.dispatchEvent({type:"displayedColumnsChanged",source:t})}getHeaderRowCount(){if(!this.gos.get("hidePaddedHeaderRows"))return this.beans.colModel.cols.treeDepth;let t=0;for(const e of this.allCols){let n=e.getParent();for(;n;){if(!n.isPadding()){const i=n.getProvidedColumnGroup().getLevel()+1;i>t&&(t=i);break}n=n.getParent()}}return t}updateBodyWidths(){const t=dp(this.centerCols),e=dp(this.leftCols),n=dp(this.rightCols);this.isBodyWidthDirty=this.bodyWidth!==t,(this.bodyWidth!==t||this.leftWidth!==e||this.rightWidth!==n)&&(this.bodyWidth=t,this.leftWidth=e,this.rightWidth=n,this.eventSvc.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventSvc.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(t){this.setLeftValuesOfCols(t),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(t,e,n,i){let r,s;this.gos.get("enableRtl")?(r=e?e[0]:null,s=n?On(n):null):(r=e?On(e):null,s=n?n[0]:null);for(const a of t.getCols())a.setLastLeftPinned(a===r,i),a.setFirstRightPinned(a===s,i)}buildTrees(t,e){const n=t.getColsToShow(),i=n.filter(l=>l.getPinned()=="left"),r=n.filter(l=>l.getPinned()=="right"),s=n.filter(l=>l.getPinned()!="left"&&l.getPinned()!="right"),a=new gSe,o=l=>e?e.createColumnGroups(l):l.columns;this.treeLeft=o({columns:i,idCreator:a,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=o({columns:r,idCreator:a,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=o({columns:s,idCreator:a,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.ariaOrderColumns=[]}joinColsAriaOrder(t){const e=t.getCols(),n=[],i=[],r=[];for(const s of e){const a=s.getPinned();a?a===!0||a==="left"?n.push(s):r.push(s):i.push(s)}this.ariaOrderColumns=n.concat(i).concat(r)}getAriaColIndex(t){let e;return zi(t)?e=t.getLeafColumns()[0]:e=t,this.ariaOrderColumns.indexOf(e)+1}setLeftValuesOfGroups(){for(const t of[this.treeLeft,this.treeRight,this.treeCenter])for(const e of t)zi(e)&&e.checkLeft()}setLeftValuesOfCols(t){const{colModel:e}=this.beans;if(!e.getColDefCols())return;const i=e.getCols().slice(0),r=this.gos.get("enableRtl");for(const s of[this.leftCols,this.rightCols,this.centerCols]){if(r){let a=dp(s);for(const o of s)a-=o.getActualWidth(),o.setLeft(a,t)}else{let a=0;for(const o of s)o.setLeft(a,t),a+=o.getActualWidth()}pSe(i,s)}for(const s of i)s.setLeft(null,t)}joinCols(){this.gos.get("enableRtl")?this.allCols=this.rightCols.concat(this.centerCols).concat(this.leftCols):this.allCols=this.leftCols.concat(this.centerCols).concat(this.rightCols)}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}isColDisplayed(t){return this.allCols.indexOf(t)>=0}getLeftColsForRow(t){const{leftCols:e,beans:{colModel:n}}=this;return n.colSpanActive?this.getColsForRow(t,e):e}getRightColsForRow(t){const{rightCols:e,beans:{colModel:n}}=this;return n.colSpanActive?this.getColsForRow(t,e):e}getColsForRow(t,e,n,i){const r=[];let s=null;for(let a=0;a<e.length;a++){const o=e[a],l=e.length-a,u=Math.min(o.getColSpan(t),l),h=[o];if(u>1){const v=u-1;for(let y=1;y<=v;y++)h.push(e[a+y]);a+=v}let g;if(n){g=!1;for(const v of h)n(v)&&(g=!0)}else g=!0;g&&(r.length===0&&s&&(i&&i(o))&&r.push(s),r.push(o)),s=o}return r}getContainerWidth(t){switch(t){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getColBefore(t){const e=this.allCols,n=e.indexOf(t);return n>0?e[n-1]:null}isPinningLeft(){return this.leftCols.length>0}isPinningRight(){return this.rightCols.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const t=e=>{this.colsAndGroupsMap[e.getUniqueId()]=e};mf(this.treeCenter,!1,t),mf(this.treeLeft,!1,t),mf(this.treeRight,!1,t)}isVisible(t){return this.colsAndGroupsMap[t.getUniqueId()]===t}getFirstColumn(){const t=this.gos.get("enableRtl"),e=["leftCols","centerCols","rightCols"];t&&e.reverse();for(let n=0;n<e.length;n++){const i=this[e[n]];if(i.length)return t?On(i):i[0]}return null}getColAfter(t){const e=this.allCols,n=e.indexOf(t);return n<e.length-1?e[n+1]:null}getColsLeftWidth(){return dp(this.leftCols)}getDisplayedColumnsRightWidth(){return dp(this.rightCols)}isColAtEdge(t,e){const n=this.allCols;if(!n.length)return!1;const i=e==="first";let r;if(zi(t)){const s=t.getDisplayedLeafColumns();if(!s.length)return!1;r=i?s[0]:On(s)}else r=t;return(i?n[0]:On(n))===r}};function mf(t,e,n){if(t)for(let i=0;i<t.length;i++){const r=t[i];if(zi(r)){const s=e?r.getDisplayedChildren():r.getChildren();mf(s,e,n)}n(r)}}function zT(t){const e=[];return mf(t,!0,n=>{Ef(n)&&e.push(n)}),e}var vSe=class extends He{constructor(){super(...arguments),this.beanName="colGroupSvc"}getColumnGroupState(){const t=[],e=this.beans.colModel.getColTree();return Kc(null,e,n=>{Yr(n)&&t.push({groupId:n.getGroupId(),open:n.isExpanded()})}),t}resetColumnGroupState(t){const e=this.beans.colModel.getColDefColTree();if(!e)return;const n=[];Kc(null,e,i=>{if(Yr(i)){const r=i.getColGroupDef(),s={groupId:i.getGroupId(),open:r?r.openByDefault:void 0};n.push(s)}}),this.setColumnGroupState(n,t)}setColumnGroupState(t,e){const{colModel:n,colAnimation:i,visibleCols:r,eventSvc:s}=this.beans;if(!n.getColTree().length)return;i?.start();const o=[];for(const l of t){const u=l.groupId,h=l.open,g=this.getProvidedColGroup(u);g&&g.isExpanded()!==h&&(g.setExpanded(h),o.push(g))}r.refresh(e,!0),o.length&&s.dispatchEvent({type:"columnGroupOpened",columnGroup:o.length===1?o[0]:void 0,columnGroups:o}),i?.finish()}setColumnGroupOpened(t,e,n){let i;Yr(t)?i=t.getId():i=t||"",this.setColumnGroupState([{groupId:i,open:e}],n)}getProvidedColGroup(t){let e=null;return Kc(null,this.beans.colModel.getColTree(),n=>{Yr(n)&&n.getId()===t&&(e=n)}),e}getGroupAtDirection(t,e){const n=t.getProvidedColumnGroup().getLevel()+t.getPaddingLevel(),i=t.getDisplayedLeafColumns(),r=e==="After"?On(i):i[0],s=`getCol${e}`;for(;;){const a=this.beans.visibleCols[s](r);if(!a)return null;const o=this.getColGroupAtLevel(a,n);if(o!==t)return o}}getColGroupAtLevel(t,e){let n=t.getParent(),i,r;for(;i=n.getProvidedColumnGroup().getLevel(),r=n.getPaddingLevel(),!(i+r<=e);)n=n.getParent();return n}updateOpenClosedVisibility(){const t=this.beans.visibleCols.getAllTrees();mf(t,!1,e=>{zi(e)&&e.calculateDisplayedColumns()})}getColumnGroup(t,e){if(!t)return null;if(zi(t))return t;const n=this.beans.visibleCols.getAllTrees(),i=typeof e=="number";let r=null;return mf(n,!1,s=>{if(zi(s)){const a=s;let o;i?o=t===a.getGroupId()&&e===a.getPartId():o=t===a.getGroupId(),o&&(r=a)}}),r}createColumnGroups(t){const{columns:e,idCreator:n,pinned:i,oldDisplayedGroups:r,isStandaloneStructure:s}=t,a=this.mapOldGroupsById(r),o=[];let l=e;for(;l.length;){const u=l;l=[];let h=0;const g=v=>{const y=h;h=v;const w=u[y],x=(zi(w)?w.getProvidedColumnGroup():w).getOriginalParent();if(x==null){for(let _=y;_<v;_++)o.push(u[_]);return}const T=this.createColumnGroup(x,n,a,i,s);for(let _=y;_<v;_++)T.addChild(u[_]);l.push(T)};for(let v=1;v<u.length;v++){const y=u[v],S=(zi(y)?y.getProvidedColumnGroup():y).getOriginalParent(),x=u[h],_=(zi(x)?x.getProvidedColumnGroup():x).getOriginalParent();S!==_&&g(v)}h<u.length&&g(u.length)}return s||this.setupParentsIntoCols(o,null),o}createProvidedColumnGroup(t,e,n,i,r,s,a){const o=r.getUniqueKey(e.groupId||null,null),l=QF(this.beans,e,o),u=new Tw(l,o,!1,n);this.createBean(u);const h=this.findExistingGroup(e,s);h&&s.splice(h.idx,1);const g=h?.group;g&&u.setExpanded(g.isExpanded());const v=xV(this.beans,l.children,n+1,t,i,r,s,a);return u.setChildren(v),u}balanceColumnTree(t,e,n,i){const r=[];for(let s=0;s<t.length;s++){const a=t[s];if(Yr(a)){const o=a,l=this.balanceColumnTree(o.getChildren(),e+1,n,i);o.setChildren(l),r.push(o)}else{let o,l;for(let u=e;u<n;u++){const h=i.getUniqueKey(null,null),g=QF(this.beans,null,h),v=new Tw(g,h,!0,u);this.createBean(v),l&&l.setChildren([v]),l=v,o||(o=l)}if(o&&l)if(r.push(o),t.some(h=>Yr(h))){l.setChildren([a]);continue}else{l.setChildren(t);break}r.push(a)}}return r}findDepth(t){let e=0,n=t;for(;n?.[0]&&Yr(n[0]);)e++,n=n[0].getChildren();return e}findMaxDepth(t,e){let n=e;for(let i=0;i<t.length;i++){const r=t[i];if(Yr(r)){const s=r,a=this.findMaxDepth(s.getChildren(),e+1);n<a&&(n=a)}}return n}balanceTreeForAutoCols(t,e){const n=[];for(const i of t){let r=i;for(let s=e-1;s>=0;s--){const a=new Tw(null,`FAKE_PATH_${i.getId()}_${s}`,!0,s);this.createBean(a),a.setChildren([r]),r.originalParent=a,r=a}e===0&&(i.originalParent=null),n.push(r)}return n}findExistingGroup(t,e){if(t.groupId!=null)for(let i=0;i<e.length;i++){const r=e[i];if(r.getColGroupDef()&&r.getId()===t.groupId)return{idx:i,group:r}}}createColumnGroup(t,e,n,i,r){const s=t.getGroupId(),a=e.getInstanceIdForKey(s),o=PV(s,a);let l=n[o];return l&&l.getProvidedColumnGroup()!==t&&(l=null),Et(l)?l.reset():(l=new Py(t,s,a,i),r||this.createBean(l)),l}mapOldGroupsById(t){const e={},n=i=>{for(const r of i)if(zi(r)){const s=r;e[r.getUniqueId()]=s,n(s.getChildren())}};return t&&n(t),e}setupParentsIntoCols(t,e){for(const n of t??[])if(n.parent!==e&&(this.beans.colViewport.colsWithinViewportHash=""),n.parent=e,zi(n)){const i=n;this.setupParentsIntoCols(i.getChildren(),i)}}},ySe={moduleName:"ColumnGroup",version:kn,dynamicBeans:{headerGroupCellCtrl:nSe},beans:[vSe],apiFunctions:{getAllDisplayedColumnGroups:fSe,getCenterDisplayedColumnGroups:hSe,getColumnGroup:rSe,getColumnGroupState:oSe,getDisplayNameForColumnGroup:aSe,getLeftDisplayedColumnGroups:uSe,getProvidedColumnGroup:sSe,getRightDisplayedColumnGroups:dSe,resetColumnGroupState:cSe,setColumnGroupOpened:iSe,setColumnGroupState:lSe}},CSe=class extends He{constructor(){super(...arguments),this.beanName="colModel",this.pivotMode=!1,this.ready=!1,this.changeEventsDispatching=!1}postConstruct(){this.pivotMode=this.gos.get("pivotMode"),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents","rowNumbers","hidePaddedHeaderRows"],t=>this.refreshAll(Rw(t.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],this.recreateColumnDefs.bind(this)),this.addManagedPropertyListener("pivotMode",t=>this.setPivotMode(this.gos.get("pivotMode"),Rw(t.source)))}createColsFromColDefs(t){const{beans:e}=this,{valueCache:n,colAutosize:i,rowGroupColsSvc:r,pivotColsSvc:s,valueColsSvc:a,visibleCols:o,eventSvc:l,groupHierarchyColSvc:u}=e,h=this.colDefs?_V(e,t):void 0;n?.expire();const g=this.colDefCols?.list,v=this.colDefCols?.tree,y=FCe(e,this.colDefs,!0,v,t);JF(e,this.colDefCols?.tree,y.columnTree);const w=y.columnTree,S=y.treeDepth,x=DCe(w),T={};for(const _ of x)T[_.getId()]=_;this.colDefCols={tree:w,treeDepth:S,list:x,map:T},this.createColumnsForService([u],this.colDefCols,t),r?.extractCols(t,g),s?.extractCols(t,g),a?.extractCols(t,g),this.ready=!0,this.changeEventsDispatching=!0,this.refreshCols(!0,t),this.changeEventsDispatching=!1,o.refresh(t),l.dispatchEvent({type:"columnEverythingChanged",source:t}),h&&(this.changeEventsDispatching=!0,h(),this.changeEventsDispatching=!1),l.dispatchEvent({type:"newColumnsLoaded",source:t}),t==="gridInitializing"&&i?.applyAutosizeStrategy()}refreshCols(t,e){if(!this.colDefCols)return;const n=this.cols?.tree;this.saveColOrder();const{autoColSvc:i,selectionColSvc:r,rowNumbersSvc:s,quickFilter:a,pivotResultCols:o,showRowGroupCols:l,rowAutoHeight:u,visibleCols:h,colViewport:g,eventSvc:v,formula:y}=this.beans,w=this.selectCols(o,this.colDefCols);y?.setFormulasActive(w),this.createColumnsForService([i,r,s],w,e);const S=sCe(this.gos,this.showingPivotResult);(!t||S)&&this.restoreColOrder(w),this.positionLockedCols(w),l?.refresh(),a?.refreshCols(),this.setColSpanActive(),u?.setAutoHeightActive(w),h.clear(),g.clear(),sx(n,this.cols.tree)||v.dispatchEvent({type:"gridColumnsChanged"})}createColumnsForService(t,e,n){for(const i of t)i&&(i.createColumns(e,r=>{this.lastOrder=r(this.lastOrder),this.lastPivotOrder=r(this.lastPivotOrder)},n),i.addColumns(e))}selectCols(t,e){const n=t?.getPivotResultCols()??null;this.showingPivotResult=n!=null;const{map:i,list:r,tree:s,treeDepth:a}=n??e;return this.cols={list:r.slice(),map:{...i},tree:s.slice(),treeDepth:a},n&&(n.list.some(l=>this.cols?.map[l.getColId()]!==void 0)||(this.lastPivotOrder=null)),this.cols}getColsToShow(){if(!this.cols)return[];const{beans:t,showingPivotResult:e,cols:n}=this,{valueColsSvc:i,selectionColSvc:r}=t,s=this.isPivotMode()&&!e,a=r?.isSelectionColumnEnabled(),o=aCe(t),l=i?.columns;return n.list.filter(h=>{const g=MCe(h);if(s){const v=l?.includes(h);return g||v||a&&n5(h)||o&&Up(h)}else return g||h.isVisible()})}refreshAll(t){this.ready&&(this.refreshCols(!1,t),this.beans.visibleCols.refresh(t))}setColsVisible(t,e=!1,n){MV(this.beans,{state:t.map(i=>({colId:typeof i=="string"?i:i.getColId(),hide:!e}))},n)}restoreColOrder(t){const e=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!e)return;const n=e.filter(g=>t.map[g.getId()]!=null);if(n.length===0)return;if(n.length===t.list.length){t.list=n;return}const i=g=>{const v=g.getOriginalParent();return v?v.getChildren().length>1?!0:i(v):!1};if(!n.some(g=>i(g))){const g=new Set(n);for(const v of t.list)g.has(v)||n.push(v);t.list=n;return}const r=new Map;for(let g=0;g<n.length;g++){const v=n[g];r.set(v,g)}const s=t.list.filter(g=>!r.has(g));if(s.length===0){t.list=n;return}const a=(g,v)=>{const y=v?v.getOriginalParent():g.getOriginalParent();if(!y)return null;let w=null,S=null;for(const x of y.getChildren())if(!(x===v||x===g)){if(x instanceof Sm){const T=r.get(x);if(T==null)continue;(w==null||w<T)&&(w=T,S=x);continue}x.forEachLeafColumn(T=>{const _=r.get(T);_!=null&&(w==null||w<_)&&(w=_,S=T)})}return S??a(g,y)},o=[],l=new Map;for(const g of s){const v=a(g,null);if(v==null){o.push(g);continue}const y=l.get(v);y===void 0?l.set(v,g):Array.isArray(y)?y.push(g):l.set(v,[y,g])}const u=new Array(t.list.length);let h=u.length-1;for(let g=o.length-1;g>=0;g--)u[h--]=o[g];for(let g=n.length-1;g>=0;g--){const v=n[g],y=l.get(v);if(y)if(Array.isArray(y))for(let w=y.length-1;w>=0;w--){const S=y[w];u[h--]=S}else u[h--]=y;u[h--]=v}t.list=u}positionLockedCols(t){t.list=EV(t.list,this.gos)}saveColOrder(){this.showingPivotResult?this.lastPivotOrder=this.cols?.list??null:this.lastOrder=this.cols?.list??null}getColumnDefs(t){return this.colDefCols&&this.beans.colDefFactory?.getColumnDefs(this.colDefCols.list,this.showingPivotResult,this.lastOrder,this.cols?.list??[],t)}setColSpanActive(){this.colSpanActive=!!this.cols?.list.some(t=>t.getColDef().colSpan!=null)}isPivotMode(){return this.pivotMode}setPivotMode(t,e){if(t===this.pivotMode||(this.pivotMode=t,!this.ready))return;this.refreshCols(!1,e);const{visibleCols:n,eventSvc:i}=this.beans;n.refresh(e),i.dispatchEvent({type:"columnPivotModeChanged"})}isPivotActive(){const t=this.beans.pivotColsSvc?.columns;return this.pivotMode&&!!t?.length}recreateColumnDefs(t){if(!this.cols)return;this.beans.autoColSvc?.updateColumns(t);const e=Rw(t.source);this.createColsFromColDefs(e)}setColumnDefs(t,e){this.colDefs=t,this.createColsFromColDefs(e)}destroy(){JF(this.beans,this.colDefCols?.tree),super.destroy()}getColTree(){return this.cols?.tree??[]}getColDefColTree(){return this.colDefCols?.tree??[]}getColDefCols(){return this.colDefCols?.list??null}getCols(){return this.cols?.list??[]}forAllCols(t){const{pivotResultCols:e,autoColSvc:n,selectionColSvc:i,groupHierarchyColSvc:r}=this.beans;E0(this.colDefCols?.list,t)||E0(n?.columns?.list,t)||E0(i?.columns?.list,t)||E0(r?.columns?.list,t)||E0(e?.getPivotResultCols()?.list,t)}getColsForKeys(t){return t?t.map(e=>this.getCol(e)).filter(e=>e!=null):[]}getColDefCol(t){return this.colDefCols?.list?this.getColFromCollection(t,this.colDefCols):null}getCol(t){return t==null?null:this.getColFromCollection(t,this.cols)}getColById(t){return this.cols?.map[t]??null}getColFromCollection(t,e){if(e==null)return null;const{map:n,list:i}=e;if(typeof t=="string"&&n[t])return n[t];for(let o=0;o<i.length;o++)if(_Ce(i[o],t))return i[o];const{autoColSvc:r,selectionColSvc:s,groupHierarchyColSvc:a}=this.beans;return r?.getColumn(t)??s?.getColumn(t)??a?.getColumn(t)??null}},bSe={tag:"div",cls:"ag-skeleton-container"},wSe=class extends fu{constructor(){super(bSe)}init(e){const n=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",n),this.addDestroyFunc(()=>MS(e.eParentOfValue)),MS(e.eParentOfValue,n),e.deferRender?this.setupLoading(e):e.node.failedLoad?this.setupFailed():this.setupLoading(e)}setupFailed(){const e=this.getLocaleTextFunc();this.getGui().textContent=e("loadingError","ERR");const n=e("ariaSkeletonCellLoadingFailed","Row failed to load");DS(this.getGui(),n)}setupLoading(e){const n=ux({tag:"div",cls:"ag-skeleton-effect"}),i=e.node.rowIndex;if(i!=null){const a=75+25*(i%2===0?Math.sin(i):Math.cos(i));n.style.width=`${a}%`}this.getGui().appendChild(n);const r=this.getLocaleTextFunc(),s=e.deferRender?r("ariaDeferSkeletonCellLoading","Cell is loading"):r("ariaSkeletonCellLoading","Row data is loading");DS(this.getGui(),s)}refresh(e){return!1}},SSe={moduleName:"CheckboxCellRenderer",version:kn,userComponents:{agCheckboxCellRenderer:y1e}},xSe={moduleName:"SkeletonCellRenderer",version:kn,userComponents:{agSkeletonCellRenderer:wSe}},ASe=class extends He{constructor(){super(...arguments),this.beanName="colFlex",this.columnsHidden=!1}refreshFlexedColumns(t={}){const e=t.source??"flex";t.viewportWidth!=null&&(this.flexViewportWidth=t.viewportWidth);const n=this.flexViewportWidth,{visibleCols:i,colDelayRenderSvc:r}=this.beans,s=i.centerCols;let a=-1;if(t.resizingCols){const S=new Set(t.resizingCols);for(let x=s.length-1;x>=0;x--)if(S.has(s[x])){a=x;break}}let o=!1;const l=s.map((S,x)=>{const T=S.getFlex(),_=T!=null&&T>0&&x>a;return o||(o=_),{col:S,isFlex:_,flex:Math.max(0,T??0),initialSize:S.getActualWidth(),min:S.getMinWidth(),max:S.getMaxWidth(),targetSize:0}});if(o?(r?.hideColumns("colFlex"),this.columnsHidden=!0):this.columnsHidden&&this.revealColumns(r),!n||!o)return[];let u=l.length,h=l.reduce((S,x)=>S+x.flex,0),g=n;const v=(S,x)=>{S.frozenSize=x,S.col.setActualWidth(x,e),g-=x,h-=S.flex,u-=1},y=S=>S.frozenSize!=null;for(const S of l)S.isFlex||v(S,S.initialSize);for(;u>0;){const S=Math.round(h<1?g*h:g);let x,T=0,_=0;for(const L of l){if(y(L))continue;x=L,_+=S*(L.flex/h);const k=_-T,B=Math.round(k);L.targetSize=B,T+=B}x&&(x.targetSize+=S-T);let M=0;for(const L of l){if(y(L))continue;const k=L.targetSize,B=Math.min(Math.max(k,L.min),L.max);M+=B-k,L.violationType=B===k?void 0:B<k?"max":"min",L.targetSize=B}const F=M===0?"all":M>0?"min":"max";for(const L of l)y(L)||(F==="all"||L.violationType===F)&&v(L,L.targetSize)}t.skipSetLeft||i.setLeftValues(e),t.updateBodyWidths&&i.updateBodyWidths();const w=l.filter(S=>S.isFlex&&!S.violationType).map(S=>S.col);if(t.fireResizedEvent){const S=l.filter(T=>T.initialSize!==T.frozenSize).map(T=>T.col),x=l.filter(T=>T.flex).map(T=>T.col);BS(this.eventSvc,S,!0,e,x)}return this.revealColumns(r),w}revealColumns(t){this.columnsHidden&&(t?.revealColumns("colFlex"),this.columnsHidden=!1)}initCol(t){const{flex:e,initialFlex:n}=t.colDef;e!==void 0?t.flex=e:n!==void 0&&(t.flex=n)}setColFlex(t,e){t.flex=e??null,t.dispatchStateUpdatedEvent("flex")}},WS=t=>{if(typeof t=="bigint")return t;let e;if(typeof t=="number")e=t;else if(typeof t=="string"&&(e=t.trim(),e===""||(e.endsWith("n")&&(e=e.slice(0,-1)),!/^[+-]?\d+$/.test(e))))return null;if(e==null)return null;try{return BigInt(e)}catch{return null}},d5="T",ESe=new RegExp(`[${d5} ]`),TSe=new RegExp(`^\\d{4}-\\d{2}-\\d{2}(${d5}\\d{2}:\\d{2}:\\d{2}\\D?)?`);function v7(t,e){return t.toString().padStart(e,"0")}function y7(t,e=!0,n=d5){if(!t)return null;let i=[t.getFullYear(),t.getMonth()+1,t.getDate()].map(r=>v7(r,2)).join("-");return e&&(i+=n+[t.getHours(),t.getMinutes(),t.getSeconds()].map(r=>v7(r,2)).join(":")),i}function _w(t,e=!1){return!!$D(t,e)}function RSe(t){return _w(t,!0)}function $D(t,e=!1,n){if(!t||!TSe.test(t))return null;const[i,r]=t.split(ESe);if(!i)return null;const s=i.split("-").map(y=>Number.parseInt(y,10));if(s.filter(y=>!isNaN(y)).length!==3)return null;const[a,o,l]=s,u=new Date(a,o-1,l);if(u.getFullYear()!==a||u.getMonth()!==o-1||u.getDate()!==l||!r&&e)return null;if(!r||r==="00:00:00")return u;const[h,g,v]=r.split(":").map(y=>Number.parseInt(y,10));if(h>=0&&h<24)u.setHours(h);else if(e)return null;if(g>=0&&g<60)u.setMinutes(g);else if(e)return null;if(v>=0&&v<60)u.setSeconds(v);else if(e)return null;return u}function Pw(t,e,n){if(!e||!t)return;if(!n)return t[e];const i=e.split(".");let r=t;for(let s=0;s<i.length;s++){if(r==null)return;r=r[i[s]]}return r}var DSe=["dateTimeString","dateString","text","number","bigint","boolean","date"],MSe=class extends He{constructor(){super(...arguments),this.beanName="dataTypeSvc",this.dataTypeDefinitions={},this.isPendingInference=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[],this.columnDefinitionPropsPerDataType={number(){return{cellEditor:"agNumberCellEditor"}},bigint({filterModuleBean:t}){return t?{cellEditor:"agTextCellEditor"}:{cellEditor:"agTextCellEditor",comparator:{default:LSe,absolute:FSe}}},boolean(){return{cellEditor:"agCheckboxCellEditor",cellRenderer:"agCheckboxCellRenderer",getFindText:()=>null,suppressKeyboardEvent:({node:t,event:e,column:n})=>e.key===Le.SPACE&&n.isCellEditable(t)}},date({formatValue:t}){return{cellEditor:"agDateCellEditor",keyCreator:t}},dateString({formatValue:t}){return{cellEditor:"agDateStringCellEditor",keyCreator:t}},dateTime(t){return this.date(t)},dateTimeString(t){return this.dateString(t)},object({formatValue:t,colModel:e,colId:n}){return{cellEditorParams:{useFormatter:!0},comparator:(i,r)=>{const s=e.getColDefCol(n),a=s?.getColDef();if(!s||!a)return 0;const o=i==null?"":t({column:s,node:null,value:i}),l=r==null?"":t({column:s,node:null,value:r});return o===l?0:o>l?1:-1},keyCreator:t}},text(){return{}}}}wireBeans(t){this.colModel=t.colModel}postConstruct(){this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",t=>{this.processDataTypeDefinitions(),this.colModel.recreateColumnDefs(t)})}processDataTypeDefinitions(){const t=this.getDefaultDataTypes(),e={},n={},i=h=>g=>{const{column:v,node:y,value:w}=g;let S=v.getColDef().valueFormatter;return S===h.groupSafeValueFormatter&&(S=h.valueFormatter),this.beans.valueSvc.formatValue(v,y,w,S)};for(const h of Object.keys(t)){const g=t[h],v={...g,groupSafeValueFormatter:w7(g,this.gos)};e[h]=v,n[h]=i(v)}const r=this.gos.get("dataTypeDefinitions")??{},s={};for(const h of Object.keys(r)){const g=r[h],v=this.processDataTypeDefinition(g,r,[h],t);v&&(e[h]=v,g.dataTypeMatcher&&(s[h]=g.dataTypeMatcher),n[h]=i(v))}const{valueParser:a,valueFormatter:o}=t.object,{valueParser:l,valueFormatter:u}=e.object;this.hasObjectValueParser=l!==a,this.hasObjectValueFormatter=u!==o,this.formatValueFuncs=n,this.dataTypeDefinitions=e,this.dataTypeMatchers=this.sortKeysInMatchers(s,t)}sortKeysInMatchers(t,e){const n={...t};for(const i of DSe)delete n[i],n[i]=t[i]??e[i].dataTypeMatcher;return n}processDataTypeDefinition(t,e,n,i){let r;const s=t.extendsDataType;if(t.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),t.extendsDataType===t.baseDataType){let a=i[s];const o=e[s];if(a&&o&&(a=o),!b7(t,a,s))return;r=C7(a,t)}else{if(n.includes(s)){Tt(44);return}const a=e[s];if(!b7(t,a,s))return;const o=this.processDataTypeDefinition(a,e,[...n,s],i);if(!o)return;r=C7(o,t)}return{...r,groupSafeValueFormatter:w7(r,this.gos)}}updateColDefAndGetColumnType(t,e,n){let{cellDataType:i}=e;i===void 0&&(i=t.cellDataType);const{field:r}=e;if((i==null||i===!0)&&(i=this.canInferCellDataType(t,e)?this.inferCellDataType(r,n):!1),this.addFormulaCellEditorToColDef(t,e),!i){t.cellDataType=!1;return}const s=this.dataTypeDefinitions[i];if(!s){Tt(47,{cellDataType:i});return}return t.cellDataType=i,s.groupSafeValueFormatter&&(t.valueFormatter=s.groupSafeValueFormatter),s.valueParser&&(t.valueParser=s.valueParser),s.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(t,i,s,n),s.columnTypes}addFormulaCellEditorToColDef(t,e){!(e.allowFormula??t.allowFormula)||e.cellEditor||(t.cellEditor="agFormulaCellEditor")}addColumnListeners(t){if(!this.isPendingInference)return;const e=this.columnStateUpdatesPendingInference[t.getColId()];if(!e)return;const n=i=>{e.add(i.key)};t.__addEventListener("columnStateUpdated",n),this.columnStateUpdateListenerDestroyFuncs.push(()=>t.__removeEventListener("columnStateUpdated",n))}canInferCellDataType(t,e){const{gos:n}=this;if(!mC(n))return!1;const i={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(VT(e,i))return!1;const r=e.type===null?t.type:e.type;if(r){const s=n.get("columnTypes")??{};if(NS(r).some(o=>{const l=s[o.trim()];return l&&VT(l,i)}))return!1}return!VT(t,i)}inferCellDataType(t,e){if(!t)return;let n;const i=this.getInitialData();if(i){const s=t.includes(".")&&!this.gos.get("suppressFieldDotNotation");n=Pw(i,t,s)}else this.initWaitForRowData(e);return n==null?void 0:Object.keys(this.dataTypeMatchers).find(s=>this.dataTypeMatchers[s](n))??"object"}getInitialData(){const t=this.gos.get("rowData");if(t?.length)return t[0];if(this.initialData)return this.initialData;{const e=this.beans.rowModel.rootNode?._leafs;if(e?.length)return e[0].data}return null}initWaitForRowData(t){if(this.columnStateUpdatesPendingInference[t]=new Set,this.isPendingInference)return;this.isPendingInference=!0;const e=this.isColumnTypeOverrideInDataTypeDefinitions,{colAutosize:n,eventSvc:i}=this.beans;e&&n&&(n.shouldQueueResizeOperations=!0);const[r]=this.addManagedEventListeners({rowDataUpdateStarted:s=>{const{firstRowData:a}=s;a&&(r?.(),this.isPendingInference=!1,this.processColumnsPendingInference(a,e),this.columnStateUpdatesPendingInference={},e&&n?.processResizeOperations(),i.dispatchEvent({type:"dataTypesInferred"}))}})}processColumnsPendingInference(t,e){this.initialData=t;const n=[];this.destroyColumnStateUpdateListeners();const i={},r={};for(const s of Object.keys(this.columnStateUpdatesPendingInference)){const a=this.columnStateUpdatesPendingInference[s],o=this.colModel.getCol(s);if(!o)continue;const l=o.getColDef();if(!this.resetColDefIntoCol(o,"cellDataTypeInferred"))continue;const u=o.getColDef();if(e&&u.type&&u.type!==l.type){const h=kSe(o,a);h.rowGroup&&h.rowGroupIndex==null&&(i[s]=h),h.pivot&&h.pivotIndex==null&&(r[s]=h),n.push(h)}}e&&n.push(...this.generateColumnStateForRowGroupAndPivotIndexes(i,r)),n.length&&MV(this.beans,{state:n},"cellDataTypeInferred"),this.initialData=null}generateColumnStateForRowGroupAndPivotIndexes(t,e){const n={},{rowGroupColsSvc:i,pivotColsSvc:r}=this.beans;return i?.restoreColumnOrder(n,t),r?.restoreColumnOrder(n,e),Object.values(n)}resetColDefIntoCol(t,e){const n=t.getUserProvidedColDef();if(!n)return!1;const i=jD(this.beans,n,t.getColId());return t.setColDef(i,n,e),!0}getDateStringTypeDefinition(t){const{dateString:e}=this.dataTypeDefinitions;return t?this.getDataTypeDefinition(t)??e:e}getDateParserFunction(t){return this.getDateStringTypeDefinition(t).dateParser}getDateFormatterFunction(t){return this.getDateStringTypeDefinition(t).dateFormatter}getDateIncludesTimeFlag(t){return t==="dateTime"||t==="dateTimeString"}getDataTypeDefinition(t){const e=t.getColDef();if(e.cellDataType)return this.dataTypeDefinitions[e.cellDataType]}getBaseDataType(t){return this.getDataTypeDefinition(t)?.baseDataType}checkType(t,e){if(e==null)return!0;const n=this.getDataTypeDefinition(t)?.dataTypeMatcher;return!n||t.getColDef().allowFormula&&this.beans.formula?.isFormula(e)?!0:n(e)}validateColDef(t){const e=n=>Tt(48,{property:n});if(t.cellDataType==="object"){const{object:n}=this.dataTypeDefinitions;t.valueFormatter===n.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&e("Formatter"),t.editable&&t.valueParser===n.valueParser&&!this.hasObjectValueParser&&e("Parser")}}postProcess(t){const e=t.cellDataType;if(!e||typeof e!="string")return;const{dataTypeDefinitions:n,beans:i,formatValueFuncs:r}=this,s=n[e];s&&i.colFilter?.setColDefPropsForDataType(t,s,r[e])}getFormatValue(t){return this.formatValueFuncs[t]}isColPendingInference(t){return this.isPendingInference&&!!this.columnStateUpdatesPendingInference[t]}setColDefPropertiesForBaseDataType(t,e,n,i){const r=this.formatValueFuncs[e],s=this.columnDefinitionPropsPerDataType[n.baseDataType]({colDef:t,cellDataType:e,colModel:this.colModel,dataTypeDefinition:n,colId:i,formatValue:r,filterModuleBean:this.beans.filterManager});t.cellEditor==="agFormulaCellEditor"&&s.cellEditor!==t.cellEditor&&(s.cellEditor=t.cellEditor),Object.assign(t,s)}getDateObjectTypeDef(t){const e=this.getLocaleTextFunc(),n=this.getDateIncludesTimeFlag(t);return{baseDataType:t,valueParser:i=>$D(i.newValue&&String(i.newValue)),valueFormatter:i=>i.value==null?"":!(i.value instanceof Date)||isNaN(i.value.getTime())?e("invalidDate","Invalid Date"):y7(i.value,n)??"",dataTypeMatcher:i=>i instanceof Date}}getDateStringTypeDef(t){const e=this.getDateIncludesTimeFlag(t);return{baseDataType:t,dateParser:n=>$D(n)??void 0,dateFormatter:n=>y7(n??null,e)??void 0,valueParser:n=>_w(String(n.newValue))?n.newValue:null,valueFormatter:n=>_w(String(n.value))?String(n.value):"",dataTypeMatcher:n=>typeof n=="string"&&_w(n)}}getDefaultDataTypes(){const t=this.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:e=>e.newValue?.trim?.()===""?null:Number(e.newValue),valueFormatter:e=>e.value==null?"":typeof e.value!="number"||isNaN(e.value)?t("invalidNumber","Invalid Number"):String(e.value),dataTypeMatcher:e=>typeof e=="number"},bigint:{baseDataType:"bigint",valueParser:e=>{const{newValue:n}=e;return n==null||typeof n=="string"&&n.trim()===""?null:WS(n)},valueFormatter:e=>e.value==null?"":typeof e.value!="bigint"?t("invalidBigInt","Invalid BigInt"):String(e.value),dataTypeMatcher:e=>typeof e=="bigint"},text:{baseDataType:"text",valueParser:e=>e.newValue===""?null:LD(e.newValue),dataTypeMatcher:e=>typeof e=="string"},boolean:{baseDataType:"boolean",valueParser:e=>e.newValue==null?e.newValue:e.newValue?.trim?.()===""?null:String(e.newValue).toLowerCase()==="true",valueFormatter:e=>e.value==null?"":String(e.value),dataTypeMatcher:e=>typeof e=="boolean"},date:this.getDateObjectTypeDef("date"),dateString:this.getDateStringTypeDef("dateString"),dateTime:this.getDateObjectTypeDef("dateTime"),dateTimeString:{...this.getDateStringTypeDef("dateTimeString"),dataTypeMatcher:e=>typeof e=="string"&&RSe(e)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:e=>LD(e.value)??""}}}destroyColumnStateUpdateListeners(){for(const t of this.columnStateUpdateListenerDestroyFuncs)t();this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}};function C7(t,e){const n={...t,...e};return t.columnTypes&&e.columnTypes&&e.appendColumnTypes&&(n.columnTypes=[...NS(t.columnTypes),...NS(e.columnTypes)]),n}function b7(t,e,n){return e?e.baseDataType!==t.baseDataType?(Tt(46),!1):!0:(Tt(45,{parentCellDataType:n}),!1)}var _Se=t=>typeof t=="bigint"||typeof t=="number",PSe=t=>t==="number"||t==="bigint";function w7(t,e){if(t.valueFormatter)return n=>{const{node:i,colDef:r,column:s,value:a}=n;if(i?.group){const o=(r.pivotValueColumn??s).getAggFunc();if(o){if(o==="first"||o==="last")return t.valueFormatter(n);const{baseDataType:l}=t;if(PSe(l)&&o!=="count"){if(_Se(a))return t.valueFormatter(n);if(a==null)return;if(typeof a=="object"){if(typeof a.toNumber=="function")return t.valueFormatter({...n,value:a.toNumber()});if("value"in a)return t.valueFormatter({...n,value:a.value})}}return}}else if(e.get("groupHideOpenParents")&&n.column.isRowGroupActive()&&typeof n.value=="string"&&!t.dataTypeMatcher?.(n.value))return;return t.valueFormatter(n)}}function OSe(t,e,n,i){if(!e[n])return!1;const r=t[n];return r===null?(e[n]=!1,!1):i===void 0?!!r:r===i}function LSe(t,e){if(t==null)return e==null?0:-1;if(e==null)return 1;const n=WS(t),i=WS(e);return n!=null&&i!=null?n===i?0:n>i?1:-1:0}function FSe(t,e){if(t==null)return e==null?0:-1;if(e==null)return 1;const n=S7(t),i=S7(e);return n!=null&&i!=null?n===i?0:n>i?1:-1:0}function S7(t){const e=WS(t);return e==null?null:e<0n?-e:e}function VT(t,e){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([n,i])=>OSe(t,e,n,i))}function kSe(t,e){const n=jCe(t);for(const i of e)delete n[i],i==="rowGroup"?delete n.rowGroupIndex:i==="pivot"&&delete n.pivotIndex;return n}var NSe={moduleName:"DataType",version:kn,beans:[MSe],dependsOn:[SSe]},BSe={moduleName:"ColumnFlex",version:kn,beans:[ASe]},ISe=class extends He{constructor(){super(...arguments),this.beanName="colNames"}getDisplayNameForColumn(t,e,n=!1){if(!t)return null;const i=this.getHeaderName(t.getColDef(),t,null,null,e),{aggColNameSvc:r}=this.beans;return n&&r?r.getHeaderName(t,i):i}getDisplayNameForProvidedColumnGroup(t,e,n){const i=e?.getColGroupDef();return i?this.getHeaderName(i,null,t,e,n):null}getDisplayNameForColumnGroup(t,e){return this.getDisplayNameForProvidedColumnGroup(t,t.getProvidedColumnGroup(),e)}getHeaderName(t,e,n,i,r){const s=t.headerValueGetter;if(s){const a=Pn(this.gos,{colDef:t,column:e,columnGroup:n,providedColumnGroup:i,location:r});return typeof s=="function"?s(a):typeof s=="string"?this.beans.expressionSvc?.evaluate(s,a)??null:""}else{if(t.headerName!=null)return t.headerName;if(t.field)return uye(t.field)}return""}},HSe=class extends He{constructor(){super(...arguments),this.beanName="colViewport",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.columnsToRenderLeft=[],this.columnsToRenderRight=[],this.columnsToRenderCenter=[]}wireBeans(t){this.visibleCols=t.visibleCols,this.colModel=t.colModel}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}getScrollPosition(){return this.scrollPosition}setScrollPosition(t,e,n=!1){const{visibleCols:i}=this,r=i.isBodyWidthDirty;if(!(t===this.scrollWidth&&e===this.scrollPosition&&!r)){if(this.scrollWidth=t,this.scrollPosition=e,i.isBodyWidthDirty=!0,this.gos.get("enableRtl")){const a=i.bodyWidth;this.viewportLeft=a-e-t,this.viewportRight=a-e}else this.viewportLeft=e,this.viewportRight=t+e;this.colModel.ready&&this.checkViewportColumns(n)}}getColumnHeadersToRender(t){switch(t){case"left":return this.columnsToRenderLeft;case"right":return this.columnsToRenderRight;default:return this.columnsToRenderCenter}}getHeadersToRender(t,e){let n;switch(t){case"left":n=this.rowsOfHeadersToRenderLeft[e];break;case"right":n=this.rowsOfHeadersToRenderRight[e];break;default:n=this.rowsOfHeadersToRenderCenter[e];break}return n??[]}extractViewportColumns(){const t=this.visibleCols.centerCols;this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=t,this.headerColsWithinViewport=t):(this.colsWithinViewport=t.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=t.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(t){return t.isAutoHeaderHeight()||GSe(t)?!0:this.isColumnInRowViewport(t)}isColumnInRowViewport(t){if(t.isAutoHeight())return!0;const e=t.getLeft()||0,n=e+t.getActualWidth(),i=this.viewportLeft-200,r=this.viewportRight+200,s=e<i&&n<i,a=e>r&&n>r;return!s&&!a}getViewportColumns(){const{leftCols:t,rightCols:e}=this.visibleCols;return this.colsWithinViewport.concat(t).concat(e)}getColsWithinViewport(t){if(!this.colModel.colSpanActive)return this.colsWithinViewport;const e=s=>{const a=s.getLeft();return Et(a)&&a>this.viewportLeft},n=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),{visibleCols:i}=this,r=i.centerCols;return i.getColsForRow(t,r,n,e)}checkViewportColumns(t=!1){this.extractViewport()&&this.eventSvc.dispatchEvent({type:"virtualColumnsChanged",afterScroll:t})}calculateHeaderRows(){const{leftCols:t,rightCols:e}=this.visibleCols;this.columnsToRenderLeft=t,this.columnsToRenderRight=e,this.columnsToRenderCenter=this.colsWithinViewport;const n=i=>{const r=new Set,s={};for(const a of i){let o=a.getParent();const l=a.isSpanHeaderHeight();for(;o&&!r.has(o);){if(l&&o.isPadding()){o=o.getParent();continue}const h=o.getProvidedColumnGroup().getLevel();s[h]??(s[h]=[]),s[h].push(o),r.add(o),o=o.getParent()}}return s};this.rowsOfHeadersToRenderLeft=n(t),this.rowsOfHeadersToRenderRight=n(e),this.rowsOfHeadersToRenderCenter=n(this.headerColsWithinViewport)}extractViewport(){const t=i=>`${i.getId()}-${i.getPinned()||"normal"}`;this.extractViewportColumns();const e=this.getViewportColumns().map(t).join("#"),n=this.colsWithinViewportHash!==e;return n&&(this.colsWithinViewportHash=e,this.calculateHeaderRows()),n}};function GSe(t){for(;t;){if(t.isAutoHeaderHeight())return!0;t=t.getParent()}return!1}var zSe=class extends He{constructor(){super(...arguments),this.beanName="agCompUtils"}adaptFunction(t,e){if(!t.cellRenderer)return null;class n{refresh(){return!1}getGui(){return this.eGui}init(r){const s=e(r),a=typeof s;if(a==="string"||a==="number"||a==="boolean"){this.eGui=Y3("<span>"+s+"</span>");return}if(s==null){this.eGui=ux({tag:"span"});return}this.eGui=s}}return n}},VSe={moduleName:"CellRendererFunction",version:kn,beans:[zSe]},USe=class extends Ql{constructor(){super(...arguments),this.beanName="registry"}registerDynamicBeans(t){if(t){this.dynamicBeans??(this.dynamicBeans={});for(const e of Object.keys(t))this.dynamicBeans[e]=t[e]}}createDynamicBean(t,e,...n){if(!this.dynamicBeans)throw new Error(this.getDynamicError(t,!0));const i=this.dynamicBeans[t];if(i==null){if(e)throw new Error(this.getDynamicError(t,!1));return}return new i(...n)}};function jSe(t){return typeof t=="object"&&!!t.getComp}var WSe=class extends USe{constructor(){super(...arguments),this.agGridDefaults={},this.agGridDefaultOverrides={},this.jsComps={},this.selectors={},this.icons={}}postConstruct(){const t=this.gos.get("components");if(t!=null)for(const e of Object.keys(t))this.jsComps[e]=t[e]}registerModule(t){const{icons:e,userComponents:n,dynamicBeans:i,selectors:r}=t;if(n){const s=(a,o,l,u)=>{this.agGridDefaults[a]=o,(l||u)&&(this.agGridDefaultOverrides[a]={params:l,processParams:u})};for(const a of Object.keys(n)){let o=n[a];if(jSe(o)&&(o=o.getComp(this.beans)),typeof o=="object"){const{classImp:l,params:u,processParams:h}=o;s(a,l,u,h)}else s(a,o)}}this.registerDynamicBeans(i);for(const s of r??[])this.selectors[s.selector]=s;if(e)for(const s of Object.keys(e))this.icons[s]=e[s]}getUserComponent(t,e){const n=(o,l,u,h)=>({componentFromFramework:l,component:o,params:u,processParams:h}),{frameworkOverrides:i}=this.beans,r=i.frameworkComponent(e,this.gos.get("components"));if(r!=null)return n(r,!0);const s=this.jsComps[e];if(s){const o=i.isFrameworkComponent(s);return n(s,o)}const a=this.agGridDefaults[e];if(a){const o=this.agGridDefaultOverrides[e];return n(a,!1,o?.params,o?.processParams)}return this.beans.validation?.missingUserComponent(t,e,this.agGridDefaults,this.jsComps),null}getSelector(t){return this.selectors[t]}getIcon(t){return this.icons[t]}getDynamicError(t,e){return e?zD(279,{name:t}):this.beans.validation?.missingDynamicBean(t)??zD(256)}},qSe=23,KSe=class extends He{constructor(){super(...arguments),this.beanName="ctrlsSvc",this.params={},this.ready=!1,this.readyCallbacks=[]}postConstruct(){this.addEventListener("ready",()=>{if(this.updateReady(),this.ready){for(const t of this.readyCallbacks)t(this.params);this.readyCallbacks.length=0}},this.beans.frameworkOverrides.runWhenReadyAsync?.()??!1)}updateReady(){const t=Object.values(this.params);this.ready=t.length===qSe&&t.every(e=>e?.isAlive()??!1)}whenReady(t,e){this.ready?e(this.params):this.readyCallbacks.push(e),t.addDestroyFunc(()=>{const n=this.readyCallbacks.indexOf(e);n>=0&&this.readyCallbacks.splice(n,1)})}register(t,e){this.params[t]=e,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),e.addDestroyFunc(()=>{this.updateReady()})}get(t){return this.params[t]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader:t,centerHeader:e,rightHeader:n}=this.params;return[t,n,e]}getHeaderRowContainerCtrl(t){const e=this.params;switch(t){case"left":return e.leftHeader;case"right":return e.rightHeader;default:return e.centerHeader}}getScrollFeature(){return this.getGridBodyCtrl().scrollFeature}},YSe=':where([class^=ag-]),:where([class^=ag-]):after,:where([class^=ag-]):before{box-sizing:border-box}:where([class^=ag-]):where(button){color:inherit}:where([class^=ag-]):where(div,span,label):focus-visible{box-shadow:inset var(--ag-focus-shadow);outline:none;&:where(.invalid){box-shadow:inset var(--ag-focus-error-shadow)}}:where([class^=ag-]) ::-ms-clear{display:none}.ag-hidden{display:none!important}.ag-invisible{visibility:hidden!important}.ag-tab-guard{display:block;height:0;position:absolute;width:0}.ag-tab-guard-top{top:1px}.ag-tab-guard-bottom{bottom:1px}.ag-measurement-container{height:0;overflow:hidden;visibility:hidden;width:0}.ag-measurement-element-border{display:inline-block}.ag-measurement-element-border:before{border-left:var(--ag-internal-measurement-border);content:"";display:block}.ag-popup-child{top:0;z-index:5}.ag-popup-child:where(:not(.ag-tooltip-custom)){box-shadow:var(--ag-popup-shadow)}.ag-input-wrapper,.ag-picker-field-wrapper{align-items:center;display:flex;flex:1 1 auto;line-height:normal;position:relative}.ag-input-field{align-items:center;display:flex;flex-direction:row}.ag-input-field-input:where(:not([type=checkbox],[type=radio])){flex:1 1 auto;min-width:0;width:100%}.ag-chart,.ag-dnd-ghost,.ag-external,.ag-popup,.ag-root-wrapper{cursor:default;line-height:normal;white-space:normal;-webkit-font-smoothing:antialiased;background-color:var(--ag-background-color);color:var(--ag-text-color);color-scheme:var(--ag-browser-color-scheme);font-family:var(--ag-font-family);font-size:var(--ag-font-size);--ag-indentation-level:0}:where(.ag-icon):before{align-items:center;background-color:currentcolor;color:inherit;content:"";display:flex;font-family:inherit;font-size:var(--ag-icon-size);font-style:normal;font-variant:normal;height:var(--ag-icon-size);justify-content:center;line-height:var(--ag-icon-size);-webkit-mask-size:contain;mask-size:contain;text-transform:none;width:var(--ag-icon-size)}.ag-icon{background-position:50%;background-repeat:no-repeat;background-size:contain;color:var(--ag-icon-color);display:block;height:var(--ag-icon-size);position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-icon-size)}.ag-disabled .ag-icon,[disabled] .ag-icon{opacity:.5}.ag-icon-grip.ag-disabled,.ag-icon-grip[disabled]{opacity:.35}.ag-resizer{pointer-events:none;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:1}:where(.ag-resizer){&.ag-resizer-topLeft{cursor:nwse-resize;height:5px;left:0;top:0;width:5px}&.ag-resizer-top{cursor:ns-resize;height:5px;left:5px;right:5px;top:0}&.ag-resizer-topRight{cursor:nesw-resize;height:5px;right:0;top:0;width:5px}&.ag-resizer-right{bottom:5px;cursor:ew-resize;right:0;top:5px;width:5px}&.ag-resizer-bottomRight{bottom:0;cursor:nwse-resize;height:5px;right:0;width:5px}&.ag-resizer-bottom{bottom:0;cursor:ns-resize;height:5px;left:5px;right:5px}&.ag-resizer-bottomLeft{bottom:0;cursor:nesw-resize;height:5px;left:0;width:5px}&.ag-resizer-left{bottom:5px;cursor:ew-resize;left:0;top:5px;width:5px}}.ag-menu{background-color:var(--ag-menu-background-color);border:var(--ag-menu-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-menu-shadow);color:var(--ag-menu-text-color);max-height:100%;overflow-y:auto;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}',f5=typeof window!="object"||!window?.document?.fonts?.forEach,gU=!1,Tf=(t,e,n,i,r,s,a=!1)=>{if(f5||gU)return;i&&(t=`@layer ${CSS.escape(i).replaceAll("\\.",".")} { ${t} }`);let o=Ul.map.get(e);if(o||(o=[],Ul.map.set(e,o)),o.some(g=>g.css===t))return;const l=document.createElement("style");s&&l.setAttribute("nonce",s),l.dataset.agGlobalCss=n,l.textContent=t;const u={css:t,el:l,priority:r,isParams:a};let h;for(const g of o){if(g.priority>r)break;h=g}if(h){h.el.after(l);const g=o.indexOf(h);o.splice(g+1,0,u)}else e.nodeName==="STYLE"?e.after(l):e.insertBefore(l,e.querySelector(":not(title, meta)")),o.push(u)},pU=(t,e,n,i)=>{Tf(YSe,t,"shared",e,0,n),i?.forEach((r,s)=>r.forEach(a=>Tf(a,t,s,e,0,n)))},XSe=(t,e,n,i,r,s)=>{if(f5||gU)return;const a=Ul.grids.get(t);a?a.paramsCss=e:Ul.grids.set(t,{styleContainer:i,paramsCss:e}),ZD(i),e&&n&&Tf(e,i,n,r,2,s,!0)},$Se=t=>{const e=Ul.grids.get(t)?.styleContainer;if(!e)return;Ul.grids.delete(t),Array.from(Ul.grids.values()).some(i=>i.styleContainer===e)?ZD(e):(ZD(e,!0),Ul.map.delete(e))},ZD=(t,e=!1)=>{const n=new Set;for(const r of Ul.grids.values())r.styleContainer===t&&n.add(r.paramsCss);const i=Ul.map.get(t)??[];for(let r=i.length-1;r>=0;r--)(e||i[r].isParams&&!n.has(i[r].css))&&(i[r].el.remove(),i.splice(r,1))},x7,Ul=(x7=typeof window=="object"?window:{}).agStyleInjectionState??(x7.agStyleInjectionState={map:new WeakMap,grids:new Map}),jo=t=>new mU(t),Ch="$default",ZSe=0,mU=class{constructor({feature:t,params:e,modeParams:n={},css:i,cssImports:r}){this.feature=t,this.css=i,this.cssImports=r,this.modeParams={[Ch]:{...n[Ch]??{},...e??{}},...n}}use(t,e,n){let i=this._inject;if(i==null){let{css:r}=this;if(r){const s=`ag-theme-${this.feature??"part"}-${++ZSe}`;typeof r=="function"&&(r=r()),r=`:where(.${s}) {
${r}
}
`;for(const a of this.cssImports??[])r=`@import url(${JSON.stringify(a)});
${r}`;i={css:r,class:s}}else i=!1;this._inject=i}return i&&t&&Tf(i.css,t,i.class,e,1,n),i?i.class:!1}},QSe=t=>t.replace(/[A-Z]|\d+/g,e=>`-${e}`).toLowerCase(),g5=t=>`--ag-${QSe(t)}`,$l=t=>`var(${g5(t)})`,JSe=(t,e,n)=>Math.max(e,Math.min(n,t)),e2e=t=>{const e=new Map;return n=>{const i=n;return e.has(i)||e.set(i,t(n)),e.get(i)}},Hl=t=>({ref:"accentColor",mix:t}),Xa=t=>({ref:"foregroundColor",mix:t}),Ja=t=>({ref:"foregroundColor",mix:t,onto:"backgroundColor"}),t2e=t=>({ref:"foregroundColor",mix:t,onto:"headerBackgroundColor"}),Ws={ref:"backgroundColor"},_p={ref:"foregroundColor"},zc={ref:"accentColor"},qS={backgroundColor:"#fff",foregroundColor:"#181d1f",borderColor:Xa(.15),chromeBackgroundColor:Ja(.02),browserColorScheme:"light"},n2e={...qS,textColor:_p,accentColor:"#2196f3",invalidColor:"#e02525",fontFamily:["-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"],subtleTextColor:{ref:"textColor",mix:.5},borderWidth:1,borderRadius:4,spacing:8,fontSize:14,focusShadow:{spread:3,color:Hl(.5)},focusErrorShadow:{spread:3,color:{ref:"invalidColor",onto:"backgroundColor",mix:.5}},popupShadow:"0 0 16px #00000026",cardShadow:"0 1px 4px 1px #00000018",dropdownShadow:{ref:"cardShadow"},listItemHeight:{calc:"max(iconSize, dataFontSize) + widgetVerticalSpacing"},dragAndDropImageBackgroundColor:Ws,dragAndDropImageBorder:!0,dragAndDropImageNotAllowedBorder:{color:{ref:"invalidColor",onto:"dragAndDropImageBackgroundColor",mix:.5}},dragAndDropImageShadow:{ref:"popupShadow"},iconSize:16,iconColor:"inherit",toggleButtonWidth:28,toggleButtonHeight:18,toggleButtonOnBackgroundColor:zc,toggleButtonOffBackgroundColor:Ja(.3),toggleButtonSwitchBackgroundColor:Ws,toggleButtonSwitchInset:2,tooltipBackgroundColor:{ref:"chromeBackgroundColor"},tooltipErrorBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.1},tooltipTextColor:{ref:"textColor"},tooltipErrorTextColor:{ref:"invalidColor"},tooltipBorder:!0,tooltipErrorBorder:{color:{ref:"invalidColor",onto:"backgroundColor",mix:.25}},panelBackgroundColor:Ws,panelTitleBarHeight:{ref:"headerHeight"},panelTitleBarBackgroundColor:{ref:"headerBackgroundColor"},panelTitleBarIconColor:{ref:"headerTextColor"},panelTitleBarTextColor:{ref:"headerTextColor"},panelTitleBarFontFamily:{ref:"headerFontFamily"},panelTitleBarFontSize:{ref:"headerFontSize"},panelTitleBarFontWeight:{ref:"headerFontWeight"},panelTitleBarBorder:!0,dialogShadow:{ref:"popupShadow"},dialogBorder:{color:Xa(.2)},widgetContainerHorizontalPadding:{calc:"spacing * 1.5"},widgetContainerVerticalPadding:{calc:"spacing * 1.5"},widgetHorizontalSpacing:{calc:"spacing * 1.5"},widgetVerticalSpacing:{ref:"spacing"},dataFontSize:{ref:"fontSize"},headerBackgroundColor:{ref:"chromeBackgroundColor"},headerFontFamily:{ref:"fontFamily"},headerFontSize:{ref:"fontSize"},headerFontWeight:500,headerTextColor:{ref:"textColor"},headerHeight:{calc:"max(iconSize, dataFontSize) + spacing * 4 * headerVerticalPaddingScale"},headerVerticalPaddingScale:1,menuBorder:{color:Xa(.2)},menuBackgroundColor:Ja(.03),menuTextColor:Ja(.95),menuShadow:{ref:"popupShadow"},menuSeparatorColor:{ref:"borderColor"}},i2e=["colorScheme","color","length","scale","borderStyle","border","shadow","image","fontFamily","fontWeight","duration"],r2e=e2e(t=>(t=t.toLowerCase(),i2e.find(e=>t.endsWith(e.toLowerCase()))??"length")),px=t=>typeof t=="object"&&t?.ref?$l(t.ref):typeof t=="string"?t:typeof t=="number"?String(t):!1,p5=t=>{if(typeof t=="string")return t;if(typeof t=="object"&&t&&"ref"in t){const e=$l(t.ref);return t.mix==null?e:`color-mix(in srgb, ${t.onto?$l(t.onto):"transparent"}, ${e} ${JSe(t.mix*100,0,100)}%)`}return!1},s2e=px,Pp=t=>typeof t=="string"?t:typeof t=="number"?`${t}px`:typeof t=="object"&&t&&"calc"in t?`calc(${t.calc.replace(/ ?[*/+] ?/g," $& ").replace(/-?\b[a-z][a-z0-9]*\b(?![-(])/gi,n=>n[0]==="-"?n:" "+$l(n)+" ")})`:typeof t=="object"&&t&&"ref"in t?$l(t.ref):!1,a2e=px,QD=(t,e)=>typeof t=="string"?t:t===!0?QD({},e):t===!1?e==="columnBorder"?QD({color:"transparent"},e):"none":typeof t=="object"&&t&&"ref"in t?$l(t.ref):vU(t.style??"solid")+" "+Pp(t.width??{ref:"borderWidth"})+" "+p5(t.color??{ref:"borderColor"}),A7=t=>[Pp(t.offsetX??0),Pp(t.offsetY??0),Pp(t.radius??0),Pp(t.spread??0),p5(t.color??{ref:"foregroundColor"}),...t.inset?["inset"]:[]].join(" "),o2e=t=>typeof t=="string"?t:t===!1?"none":typeof t=="object"&&t&&"ref"in t?$l(t.ref):Array.isArray(t)?t.map(A7).join(", "):A7(t),vU=px,yU=t=>typeof t=="string"?t.includes(",")?t:E7(t):typeof t=="object"&&t&&"googleFont"in t?yU(t.googleFont):typeof t=="object"&&t&&"ref"in t?$l(t.ref):Array.isArray(t)?t.map(e=>(typeof e=="object"&&"googleFont"in e&&(e=e.googleFont),E7(e))).join(", "):!1,E7=t=>/^[\w-]+$|\w\(/.test(t)?t:JSON.stringify(t),l2e=px,CU=t=>typeof t=="string"?t:typeof t=="object"&&t&&"url"in t?`url(${JSON.stringify(t.url)})`:typeof t=="object"&&t&&"svg"in t?CU({url:`data:image/svg+xml,${encodeURIComponent(t.svg)}`}):typeof t=="object"&&t&&"ref"in t?$l(t.ref):!1,c2e=(t,e,n)=>typeof t=="string"?t:typeof t=="number"?(t>=10&&n.warn(104,{value:t,param:e}),`${t}s`):typeof t=="object"&&t&&"ref"in t?$l(t.ref):!1,u2e={color:p5,colorScheme:s2e,length:Pp,scale:a2e,border:QD,borderStyle:vU,shadow:o2e,image:CU,fontFamily:yU,fontWeight:l2e,duration:c2e},h2e=(t,e,n)=>{const i=r2e(t);return u2e[i](e,t,n)},d2e=0,f2e=(t,e)=>new bU({themeLogger:t,overridePrefix:e}),bU=class wU{constructor(e,n=[]){this.params=e,this.parts=n}withPart(e){return typeof e=="function"&&(e=e()),e instanceof mU?new wU(this.params,[...this.parts,e]):(this.params.themeLogger.preInitErr(259,"Invalid part",{part:e}),this)}withoutPart(e){return this.withPart(jo({feature:e}))}withParams(e,n=Ch){return this.withPart(jo({modeParams:{[n]:e}}))}_startUse({styleContainer:e,cssLayer:n,nonce:i,loadThemeGoogleFonts:r,moduleCss:s}){if(f5)return;p2e(),pU(e,n,i,s);const a=g2e(this);if(a.length>0)for(const o of a)r&&m2e(o,i);for(const o of this.parts)o.use(e,n,i)}_getCssClass(){return this._cssClassCache??(this._cssClassCache=T7(this.parts).map(e=>e.use(void 0,void 0,void 0)).filter(Boolean).concat(this._getParamsClassName()).join(" "))}_getParamsClassName(){return this._paramsClassName??(this._paramsClassName=`ag-theme-params-${++d2e}`)}_getModeParams(){let e=this._paramsCache;if(!e){const n={[Ch]:{...n2e}};for(const i of T7(this.parts))for(const r of Object.keys(i.modeParams)){const s=i.modeParams[r];if(s){const a=n[r]??(n[r]={}),o=new Set;for(const l of Object.keys(s)){const u=s[l];u!==void 0&&(a[l]=u,o.add(l))}if(r===Ch)for(const l of Object.keys(n)){const u=n[l];if(l!==Ch)for(const h of o)delete u[h]}}}this._paramsCache=e=n}return e}_getParamsCss(){if(!this._paramsCssCache){let e="",n="";const i=this._getModeParams(),{overridePrefix:r,themeLogger:s}=this.params,a=r?`--ag-${r}-`:void 0;for(const u of Object.keys(i)){const h=i[u];if(u!==Ch){const v=`:where([data-ag-theme-mode="${typeof CSS=="object"?CSS.escape(u):u}"]) & {
`;e+=v,n+=v}for(const g of Object.keys(h).sort()){const v=h[g],y=h2e(g,v,s);if(y===!1)s.error(107,{key:g,value:v});else{const w=g5(g),S=a?w.replace("--ag-",a):w,x=w.replace("--ag-","--ag-inherited-");e+=`	${w}: var(${x}, ${y});
`,n+=`	${x}: var(${S});
`}}u!==Ch&&(e+=`}
`,n+=`}
`)}const o=`:where(.${this._getParamsClassName()})`;let l=`${o} {
${e}}
`;l+=`:has(> ${o}):not(${o}) {
${n}}
`,this._paramsCssCache=l}return this._paramsCssCache}},T7=t=>{const e=new Map;for(const i of t)e.set(i.feature,i);const n=[];for(const i of t)(!i.feature||e.get(i.feature)===i)&&n.push(i);return n},g2e=t=>{const e=new Set,n=s=>{if(Array.isArray(s))s.forEach(n);else{const a=s?.googleFont;typeof a=="string"&&e.add(a)}};return Object.values(t._getModeParams()).flatMap(s=>Object.values(s)).forEach(n),Array.from(e).sort()},R7=!1,p2e=()=>{if(!R7){R7=!0;for(const t of Array.from(document.head.querySelectorAll('style[data-ag-scope="legacy"]')))t.remove()}},m2e=async(t,e)=>{const n=`@import url('https://${v2e}/css2?family=${encodeURIComponent(t)}:wght@100;200;300;400;500;600;700;800;900&display=swap');
`;Tf(n,document.head,`googleFont:${t}`,void 0,0,e)},v2e="fonts.googleapis.com",D7={changeKey:"listItemHeight",type:"length",defaultValue:24},y2e=class extends Ql{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.sizesMeasured=!1,this.globalCSS=[]}wireBeans(t){this.eRootDiv=t.eRootDiv}postConstruct(){const{gos:t,eRootDiv:e}=this;t.setInstanceDomData(e);const n=t.get("themeStyleContainer"),i=typeof ShadowRoot<"u",r=i&&e.getRootNode()instanceof ShadowRoot;this.eStyleContainer=(typeof n=="function"?n():n)??(r?e:document.head),!n&&!r&&i&&C2e(e,this.shadowRootError.bind(this),this.addDestroyFunc.bind(this)),this.cssLayer=t.get("themeCssLayer"),this.styleNonce=t.get("styleNonce"),this.addManagedPropertyListener("theme",()=>this.handleThemeChange()),this.handleThemeChange(),this.getSizeEl(D7),this.initVariables(),this.addDestroyFunc(()=>$Se(this)),this.mutationObserver=new MutationObserver(()=>{this.fireStylesChangedEvent("theme")}),this.addDestroyFunc(()=>this.mutationObserver.disconnect())}applyThemeClasses(t,e=[]){const{theme:n}=this,i=n?n._getCssClass():this.applyLegacyThemeClasses();for(const r of Array.from(t.classList))r.startsWith("ag-theme-")&&t.classList.remove(r);if(i){const r=t.className;t.className=`${r}${r?" ":""}${i}${e?.length?" "+e.join(" "):""}`}}applyLegacyThemeClasses(){let t="";this.mutationObserver.disconnect();let e=this.eRootDiv;for(;e;){let n=!1;for(const i of Array.from(e.classList))i.startsWith("ag-theme-")&&(n=!0,t=t?`${t} ${i}`:i);n&&this.mutationObserver.observe(e,{attributes:!0,attributeFilter:["class"]}),e=e.parentElement}return t}addGlobalCSS(t,e){this.theme?Tf(t,this.eStyleContainer,e,this.cssLayer,0,this.styleNonce):this.globalCSS.push([t,e])}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(D7)}getCSSVariablePixelValue(t){const e=this.lastKnownValues.get(t);if(e!=null)return e;const n=this.measureSizeEl(t);return n==="detached"||n==="no-styles"?(t.cacheDefault&&this.lastKnownValues.set(t,t.defaultValue),t.defaultValue):(this.lastKnownValues.set(t,n),n)}measureSizeEl(t){const e=this.getSizeEl(t);if(e.offsetParent==null)return"detached";const n=e.offsetWidth;return n===UT?"no-styles":(this.sizesMeasured=!0,n)}getMeasurementContainer(){let t=this.eMeasurementContainer;return t||(t=this.eMeasurementContainer=Ry({tag:"div",cls:"ag-measurement-container"}),this.eRootDiv.appendChild(t)),t}getSizeEl(t){let e=this.sizeEls.get(t);if(e)return e;const n=this.getMeasurementContainer();e=Ry({tag:"div"});const i=this.setSizeElStyles(e,t);n.appendChild(e),this.sizeEls.set(t,e);const{type:r,noWarn:s}=t;if(r!=="length"&&r!=="border")return e;let a=this.measureSizeEl(t);a==="no-styles"&&!s&&this.varError(i,t.defaultValue);const o=wm(this.beans,e,()=>{const l=this.measureSizeEl(t);l==="detached"||l==="no-styles"||(this.lastKnownValues.set(t,l),l!==a&&(a=l,this.fireStylesChangedEvent(t.changeKey)))});return this.addDestroyFunc(()=>o()),e}setSizeElStyles(t,e){const{changeKey:n,type:i}=e;let r=g5(n);return i==="border"?(r.endsWith("-width")&&(r=r.slice(0,-6)),t.className="ag-measurement-element-border",t.style.setProperty("--ag-internal-measurement-border",`var(${r}, solid ${UT}px)`)):t.style.width=`var(${r}, ${UT}px)`,r}handleThemeChange(){const{gos:t,theme:e}=this,n=t.get("theme");let i;if(n==="legacy")i=void 0;else{const r=n??this.getDefaultTheme();r instanceof bU?i=r:this.themeError(r)}i!==e&&this.handleNewTheme(i),this.postProcessThemeChange(i,n)}handleNewTheme(t){const{gos:e,eRootDiv:n,globalCSS:i}=this,r=this.getAdditionalCss();if(t){pU(this.eStyleContainer,this.cssLayer,this.styleNonce,r);for(const[s,a]of i)Tf(s,this.eStyleContainer,a,this.cssLayer,0,this.styleNonce);i.length=0}this.theme=t,t?._startUse({loadThemeGoogleFonts:e.get("loadThemeGoogleFonts"),styleContainer:this.eStyleContainer,cssLayer:this.cssLayer,nonce:this.styleNonce,moduleCss:r}),XSe(this,t?._getParamsCss()??null,t?._getParamsClassName()??null,this.eStyleContainer,this.cssLayer,this.styleNonce),this.applyThemeClasses(n),this.fireStylesChangedEvent("theme")}fireStylesChangedEvent(t){this.eventSvc.dispatchEvent({type:"stylesChanged",[`${t}Changed`]:!0})}},UT=15538,C2e=(t,e,n)=>{let i=60;const r=setInterval(()=>{typeof ShadowRoot<"u"&&t.getRootNode()instanceof ShadowRoot&&(e(),clearInterval(r)),(K3(t)||--i<0)&&clearInterval(r)},1e3);n(()=>clearInterval(r))},b2e='.ag-aria-description-container{border:0;z-index:9999;clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.ag-unselectable{-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-selectable{-webkit-user-select:text;-moz-user-select:text;user-select:text}.ag-shake-left-to-right{animation-direction:alternate;animation-duration:.2s;animation-iteration-count:infinite;animation-name:ag-shake-left-to-right}@keyframes ag-shake-left-to-right{0%{padding-left:6px;padding-right:2px}to{padding-left:2px;padding-right:6px}}.ag-body-horizontal-scroll-viewport,.ag-body-vertical-scroll-viewport,.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{flex:1 1 auto;height:100%;min-width:0;overflow:hidden;position:relative}.ag-viewport{position:relative}.ag-spanning-container{position:absolute;top:0;z-index:1}.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{overflow-x:auto;-ms-overflow-style:none!important;scrollbar-width:none!important}.ag-body-viewport::-webkit-scrollbar,.ag-center-cols-viewport::-webkit-scrollbar,.ag-floating-bottom-viewport::-webkit-scrollbar,.ag-floating-top-viewport::-webkit-scrollbar,.ag-header-viewport::-webkit-scrollbar,.ag-sticky-bottom-viewport::-webkit-scrollbar,.ag-sticky-top-viewport::-webkit-scrollbar{display:none!important}.ag-body-viewport{display:flex;overflow-x:hidden;&:where(.ag-layout-normal){overflow-y:auto;-webkit-overflow-scrolling:touch}}.ag-floating-bottom-container,.ag-floating-top-container,.ag-sticky-bottom-container,.ag-sticky-top-container{min-height:1px}.ag-center-cols-viewport{min-height:100%;width:100%}.ag-body-horizontal-scroll-viewport{overflow-x:scroll}.ag-body-vertical-scroll-viewport{overflow-y:scroll}.ag-body-container,.ag-body-horizontal-scroll-container,.ag-body-vertical-scroll-container,.ag-center-cols-container,.ag-floating-bottom-container,.ag-floating-bottom-full-width-container,.ag-floating-top-container,.ag-full-width-container,.ag-header-container,.ag-pinned-left-cols-container,.ag-pinned-left-sticky-bottom,.ag-pinned-right-cols-container,.ag-pinned-right-sticky-bottom,.ag-sticky-bottom-container,.ag-sticky-top-container{position:relative}.ag-floating-bottom-container,.ag-floating-top-container,.ag-header-container,.ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top,.ag-sticky-bottom-container,.ag-sticky-top-container{height:100%;white-space:nowrap}.ag-center-cols-container,.ag-pinned-right-cols-container{display:block}.ag-body-horizontal-scroll-container{height:100%}.ag-body-vertical-scroll-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container,.ag-full-width-container,.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{pointer-events:none;position:absolute;top:0}:where(.ag-ltr) .ag-floating-bottom-full-width-container,:where(.ag-ltr) .ag-floating-top-full-width-container,:where(.ag-ltr) .ag-full-width-container,:where(.ag-ltr) .ag-sticky-bottom-full-width-container,:where(.ag-ltr) .ag-sticky-top-full-width-container{left:0}:where(.ag-rtl) .ag-floating-bottom-full-width-container,:where(.ag-rtl) .ag-floating-top-full-width-container,:where(.ag-rtl) .ag-full-width-container,:where(.ag-rtl) .ag-sticky-bottom-full-width-container,:where(.ag-rtl) .ag-sticky-top-full-width-container{right:0}.ag-full-width-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container{display:inline-block;height:100%;overflow:hidden;width:100%}.ag-body{display:flex;flex:1 1 auto;flex-direction:row!important;min-height:0;position:relative}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:flex;min-height:0;min-width:0;position:relative;&:where(.ag-scrollbar-invisible){bottom:0;position:absolute;&:where(.ag-apple-scrollbar){opacity:0;transition:opacity .4s;visibility:hidden;&:where(.ag-scrollbar-active),&:where(.ag-scrollbar-scrolling){opacity:1;visibility:visible}}}}.ag-body-horizontal-scroll{width:100%;&:where(.ag-scrollbar-invisible){left:0;right:0}}.ag-body-vertical-scroll{height:100%;&:where(.ag-scrollbar-invisible){top:0;z-index:10}}:where(.ag-ltr) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){right:0}}:where(.ag-rtl) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){left:0}}.ag-force-vertical-scroll{overflow-y:scroll!important}.ag-horizontal-left-spacer,.ag-horizontal-right-spacer{height:100%;min-width:0;overflow-x:scroll;&:where(.ag-scroller-corner){overflow-x:hidden}}:where(.ag-row-animation) .ag-row{transition:transform .4s,top .4s,opacity .2s;&:where(.ag-after-created){transition:transform .4s,top .4s,height .4s,opacity .2s}}:where(.ag-row-animation.ag-prevent-animation) .ag-row{transition:none!important;&:where(.ag-row.ag-after-created){transition:none!important}}:where(.ag-row-no-animation) .ag-row{transition:none}.ag-row-loading{align-items:center;display:flex}.ag-row-position-absolute{position:absolute}.ag-row-position-relative{position:relative}.ag-full-width-row{overflow:hidden;pointer-events:all}.ag-row-inline-editing{z-index:1}.ag-row-dragging{z-index:2}.ag-stub-cell{align-items:center;display:flex}.ag-cell{display:inline-block;height:100%;position:absolute;white-space:nowrap;&:focus-visible{box-shadow:none}}.ag-cell-value{flex:1 1 auto}.ag-cell-value:not(.ag-allow-overflow),.ag-group-value{overflow:hidden;text-overflow:ellipsis}.ag-cell-wrap-text{white-space:normal;word-break:break-word}:where(.ag-cell) .ag-icon{display:inline-block;vertical-align:middle}.ag-floating-top{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-top:not(.ag-invisible)){border-bottom:var(--ag-pinned-row-border)}.ag-floating-bottom{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-bottom:not(.ag-invisible)){border-top:var(--ag-pinned-row-border)}.ag-sticky-bottom,.ag-sticky-top{background-color:var(--ag-data-background-color);display:flex;height:0;overflow:hidden;position:absolute;width:100%;z-index:1}.ag-sticky-bottom{box-sizing:content-box!important;:where(.ag-pinned-left-sticky-bottom),:where(.ag-pinned-right-sticky-bottom),:where(.ag-sticky-bottom-container){border-top:var(--ag-row-border);box-sizing:border-box}}.ag-opacity-zero{opacity:0!important}.ag-cell-label-container{align-items:center;display:flex;flex-direction:row-reverse;height:100%;justify-content:space-between;width:100%}:where(.ag-right-aligned-header){.ag-cell-label-container{flex-direction:row}.ag-header-cell-text{text-align:end}}.ag-column-group-icons{display:block;:where(.ag-column-group-closed-icon),:where(.ag-column-group-opened-icon){cursor:pointer}}:where(.ag-ltr){direction:ltr;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row}}:where(.ag-rtl){direction:rtl;text-align:right;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row-reverse}.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{display:block}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(180deg)}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(-180deg)}}:where(.ag-ltr) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-left:var(--ag-row-group-indent-size)}:where(.ag-rtl) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-right:var(--ag-row-group-indent-size)}:where(.ag-ltr) .ag-row-group-leaf-indent{margin-left:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}:where(.ag-rtl) .ag-row-group-leaf-indent{margin-right:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}.ag-value-change-delta{padding:0 2px}.ag-value-change-delta-up{color:var(--ag-value-change-delta-up-color)}.ag-value-change-delta-down{color:var(--ag-value-change-delta-down-color)}.ag-value-change-value{background-color:transparent;border-radius:1px;padding-left:1px;padding-right:1px;transition:background-color 1s}.ag-value-change-value-highlight{background-color:var(--ag-value-change-value-highlight-background-color);transition:background-color .1s}.ag-cell-data-changed{background-color:var(--ag-value-change-value-highlight-background-color)!important}.ag-cell-data-changed-animation{background-color:transparent}.ag-cell-highlight{background-color:var(--ag-range-selection-highlight-color)!important}.ag-row,.ag-spanned-row{color:var(--ag-cell-text-color);font-family:var(--ag-cell-font-family);font-size:var(--ag-data-font-size);white-space:nowrap;--ag-internal-content-line-height:calc(min(var(--ag-row-height), var(--ag-line-height, 1000px)) - var(--ag-internal-row-border-width, 1px) - 2px)}.ag-row{background-color:var(--ag-data-background-color);border-bottom:var(--ag-row-border);height:var(--ag-row-height);width:100%;&.ag-row-editing-invalid{background-color:var(--ag-full-row-edit-invalid-background-color)}}:where(.ag-body-vertical-content-no-gap>div>div>div,.ag-body-vertical-content-no-gap>div>div>div>div)>.ag-row-last{border-bottom-color:transparent}.ag-group-contracted,.ag-group-expanded{cursor:pointer}.ag-cell,.ag-full-width-row .ag-cell-wrapper.ag-row-group{border:1px solid transparent;line-height:var(--ag-internal-content-line-height);-webkit-font-smoothing:subpixel-antialiased}:where(.ag-ltr) .ag-cell{border-right:var(--ag-column-border)}:where(.ag-rtl) .ag-cell{border-left:var(--ag-column-border)}.ag-spanned-cell-wrapper{background-color:var(--ag-data-background-color);position:absolute}.ag-spanned-cell-wrapper>.ag-spanned-cell{display:block;position:relative}:where(.ag-ltr) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-right-color:transparent}:where(.ag-rtl) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-left-color:transparent}.ag-cell-wrapper{align-items:center;display:flex;>:where(:not(.ag-cell-value,.ag-group-value)){align-items:center;display:flex;height:var(--ag-internal-content-line-height)}&:where(.ag-row-group){align-items:flex-start}:where(.ag-full-width-row) &:where(.ag-row-group){align-items:center;height:100%}}:where(.ag-ltr) .ag-cell-wrapper{padding-left:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-rtl) .ag-cell-wrapper{padding-right:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-cell-wrap-text:not(.ag-cell-auto-height)) .ag-cell-wrapper{align-items:normal;height:100%;:where(.ag-cell-value){height:100%}}:where(.ag-ltr) .ag-row>.ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}:where(.ag-rtl) .ag-row>.ag-cell-wrapper.ag-row-group{padding-right:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-cell-focus:not(.ag-cell-range-selected):focus-within,.ag-cell-range-single-cell,.ag-cell-range-single-cell.ag-cell-range-handle,.ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected),.ag-context-menu-open .ag-full-width-row.ag-row-focus .ag-cell-wrapper.ag-row-group,.ag-full-width-row.ag-row-focus:focus .ag-cell-wrapper.ag-row-group{border:1px solid;border-color:var(--ag-range-selection-border-color);border-style:var(--ag-range-selection-border-style);outline:initial}.ag-full-width-row.ag-row-focus:focus{box-shadow:none}:where(.ag-ltr) .ag-group-contracted,:where(.ag-ltr) .ag-group-expanded,:where(.ag-ltr) .ag-row-drag,:where(.ag-ltr) .ag-selection-checkbox{margin-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-group-contracted,:where(.ag-rtl) .ag-group-expanded,:where(.ag-rtl) .ag-row-drag,:where(.ag-rtl) .ag-selection-checkbox{margin-left:var(--ag-cell-widget-spacing)}.ag-drag-handle-disabled{opacity:.35;pointer-events:none}:where(.ag-ltr) .ag-group-child-count{margin-left:3px}:where(.ag-rtl) .ag-group-child-count{margin-right:3px}.ag-row-highlight-above:after,.ag-row-highlight-below:after,.ag-row-highlight-inside:after{background-color:var(--ag-row-drag-indicator-color);border-radius:calc(var(--ag-row-drag-indicator-width)/2);content:"";height:var(--ag-row-drag-indicator-width);pointer-events:none;position:absolute;width:calc(100% - 1px)}:where(.ag-ltr) .ag-row-highlight-above:after,:where(.ag-ltr) .ag-row-highlight-below:after,:where(.ag-ltr) .ag-row-highlight-inside:after{left:1px}:where(.ag-rtl) .ag-row-highlight-above:after,:where(.ag-rtl) .ag-row-highlight-below:after,:where(.ag-rtl) .ag-row-highlight-inside:after{right:1px}.ag-row-highlight-above:after{top:0}.ag-row-highlight-below:after{bottom:0}.ag-row-highlight-indent:after{display:block;width:auto}:where(.ag-ltr) .ag-row-highlight-indent:after{left:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size));right:1px}:where(.ag-rtl) .ag-row-highlight-indent:after{left:1px;right:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size))}.ag-row-highlight-inside:after{background-color:var(--ag-selected-row-background-color);border:1px solid var(--ag-range-selection-border-color);display:block;height:auto;inset:0;width:auto}.ag-body,.ag-floating-bottom,.ag-floating-top{background-color:var(--ag-data-background-color)}.ag-row-odd{background-color:var(--ag-odd-row-background-color)}.ag-row-selected:before{background-color:var(--ag-selected-row-background-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-full-width-row.ag-row-group:before,.ag-row-hover:not(.ag-full-width-row):before{background-color:var(--ag-row-hover-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-row-selected:before{background-color:var(--ag-row-hover-color);background-image:linear-gradient(var(--ag-selected-row-background-color),var(--ag-selected-row-background-color))}.ag-row.ag-full-width-row.ag-row-group>*{position:relative}.ag-column-hover{background-color:var(--ag-column-hover-color)}.ag-header-range-highlight{background-color:var(--ag-range-header-highlight-color)}.ag-right-aligned-cell{font-variant-numeric:tabular-nums}:where(.ag-ltr) .ag-right-aligned-cell{text-align:right}:where(.ag-rtl) .ag-right-aligned-cell{text-align:left}.ag-right-aligned-cell .ag-cell-value,.ag-right-aligned-cell .ag-group-value{margin-left:auto}:where(.ag-ltr) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-ltr) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level));padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}:where(.ag-rtl) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-rtl) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-row>.ag-cell-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}.ag-row-dragging{cursor:move;opacity:.5}.ag-details-row{background-color:var(--ag-data-background-color);padding:calc(var(--ag-spacing)*3.75)}.ag-layout-auto-height,.ag-layout-print{.ag-center-cols-container,.ag-center-cols-viewport{min-height:150px}}.ag-overlay-exporting-wrapper,.ag-overlay-loading-wrapper,.ag-overlay-modal-wrapper{background-color:var(--ag-modal-overlay-background-color)}.ag-skeleton-container{align-content:center;height:100%;width:100%}.ag-skeleton-effect{animation:ag-skeleton-loading 1.5s ease-in-out .5s infinite;background-color:var(--ag-row-loading-skeleton-effect-color);border-radius:.25rem;height:1em;width:100%}:where(.ag-ltr) .ag-right-aligned-cell .ag-skeleton-effect{margin-left:auto}:where(.ag-rtl) .ag-right-aligned-cell .ag-skeleton-effect{margin-right:auto}@keyframes ag-skeleton-loading{0%{background-color:var(--ag-row-loading-skeleton-effect-color)}50%{background-color:color-mix(in srgb,transparent,var(--ag-row-loading-skeleton-effect-color) 40%)}to{background-color:var(--ag-row-loading-skeleton-effect-color)}}.ag-loading{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-loading{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-loading{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-ltr) .ag-loading-icon{padding-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-loading-icon{padding-left:var(--ag-cell-widget-spacing)}.ag-icon-loading{animation-duration:1s;animation-iteration-count:infinite;animation-name:spin;animation-timing-function:linear}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.ag-header{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);color:var(--ag-header-text-color);display:flex;font-family:var(--ag-header-font-family);font-size:var(--ag-header-font-size);font-weight:var(--ag-header-font-weight);overflow:hidden;white-space:nowrap;width:100%}.ag-header-row{height:var(--ag-header-height);position:absolute}.ag-floating-filter-button-button,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,:where(.ag-header-cell-sortable) .ag-header-cell-label,:where(.ag-header-group-cell-selectable) .ag-header-cell-comp-wrapper{cursor:pointer}:where(.ag-ltr) .ag-header-expand-icon{margin-left:4px}:where(.ag-rtl) .ag-header-expand-icon{margin-right:4px}.ag-header-row:where(:not(:first-child)){:where(.ag-header-cell:not(.ag-header-span-height.ag-header-span-total,.ag-header-parent-hidden)),:where(.ag-header-group-cell.ag-header-group-cell-with-group){border-top:var(--ag-header-row-border)}}.ag-header-row:where(:not(.ag-header-row-column-group)){overflow:hidden}:where(.ag-header.ag-header-allow-overflow) .ag-header-row{overflow:visible}.ag-header-cell{display:inline-flex;overflow:hidden}.ag-header-group-cell{contain:paint;display:flex}.ag-header-cell,.ag-header-group-cell{align-items:center;gap:var(--ag-cell-widget-spacing);height:100%;padding:0 var(--ag-cell-horizontal-padding);position:absolute}@property --ag-internal-moving-color{syntax:"<color>";inherits:false;initial-value:transparent}@property --ag-internal-hover-color{syntax:"<color>";inherits:false;initial-value:transparent}.ag-header-cell:where(:not(.ag-floating-filter)):before,.ag-header-group-cell:before{background-image:linear-gradient(var(--ag-internal-hover-color),var(--ag-internal-hover-color)),linear-gradient(var(--ag-internal-moving-color),var(--ag-internal-moving-color));content:"";inset:0;position:absolute;--ag-internal-moving-color:transparent;--ag-internal-hover-color:transparent;transition:--ag-internal-moving-color var(--ag-header-cell-background-transition-duration),--ag-internal-hover-color var(--ag-header-cell-background-transition-duration)}.ag-header-cell:where(:not(.ag-floating-filter)):where(:hover):before,.ag-header-group-cell:where(:hover):before{--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}.ag-header-cell:where(:not(.ag-floating-filter)):where(.ag-header-cell-moving):before,.ag-header-group-cell:where(.ag-header-cell-moving):before{--ag-internal-moving-color:var(--ag-header-cell-moving-background-color);--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}:where(.ag-header-cell:not(.ag-floating-filter)>*,.ag-header-group-cell>*){position:relative;z-index:1}.ag-header-cell-menu-button:where(:not(.ag-header-menu-always-show)){opacity:0;transition:opacity .2s}.ag-header-cell-filter-button,:where(.ag-header-cell.ag-header-active) .ag-header-cell-menu-button{opacity:1}.ag-header-cell-label,.ag-header-group-cell-label{align-items:center;align-self:stretch;display:flex;flex:1 1 auto;overflow:hidden;padding:5px 0}:where(.ag-ltr) .ag-sort-indicator-icon{padding-left:var(--ag-spacing)}:where(.ag-rtl) .ag-sort-indicator-icon{padding-right:var(--ag-spacing)}.ag-header-cell-label{text-overflow:ellipsis}.ag-header-group-cell-label.ag-sticky-label{flex:none;max-width:100%;overflow:visible;position:sticky}:where(.ag-ltr) .ag-header-group-cell-label.ag-sticky-label{left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-header-group-cell-label.ag-sticky-label{right:var(--ag-cell-horizontal-padding)}.ag-header-cell-text,.ag-header-group-text{overflow:hidden;text-overflow:ellipsis}.ag-header-cell-text{word-break:break-word}.ag-header-cell-comp-wrapper{width:100%}:where(.ag-header-group-cell) .ag-header-cell-comp-wrapper{display:flex}:where(.ag-header-cell:not(.ag-header-cell-auto-height)) .ag-header-cell-comp-wrapper{align-items:center;display:flex;height:100%}.ag-header-cell-wrap-text .ag-header-cell-comp-wrapper{white-space:normal}.ag-header-cell-comp-wrapper-limited-height>*{overflow:hidden}:where(.ag-right-aligned-header) .ag-header-cell-label{flex-direction:row-reverse}:where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-col-ref{color:var(--ag-subtle-text-color)}}:where(.ag-ltr) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-col-ref{margin-right:var(--ag-spacing)}.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-col-ref{margin-left:var(--ag-spacing)}.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-header-cell.ag-right-aligned-header){.ag-header-col-ref{color:var(--ag-subtle-text-color)}}:where(.ag-ltr) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-col-ref{margin-left:var(--ag-spacing)}.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-col-ref{margin-right:var(--ag-spacing)}.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}.ag-header-cell:after,.ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{content:"";height:var(--ag-header-column-border-height);position:absolute;top:calc(50% - var(--ag-header-column-border-height)*.5);z-index:1}:where(.ag-ltr) .ag-header-cell:after,:where(.ag-ltr) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-right:var(--ag-header-column-border);right:0}:where(.ag-rtl) .ag-header-cell:after,:where(.ag-rtl) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-left:var(--ag-header-column-border);left:0}.ag-header-highlight-after:after,.ag-header-highlight-before:after{background-color:var(--ag-column-drag-indicator-color);border-radius:calc(var(--ag-column-drag-indicator-width)/2);content:"";height:100%;position:absolute;top:0;width:var(--ag-column-drag-indicator-width)}:where(.ag-ltr) .ag-header-highlight-before:after{left:0}:where(.ag-rtl) .ag-header-highlight-before:after{right:0}:where(.ag-ltr) .ag-header-highlight-after:after{right:0;:where(.ag-pinned-left-header) &{right:1px}}:where(.ag-rtl) .ag-header-highlight-after:after{left:0;:where(.ag-pinned-left-header) &{left:1px}}.ag-header-cell-resize{align-items:center;cursor:ew-resize;display:flex;height:100%;position:absolute;top:0;width:8px;z-index:2}:where(.ag-ltr) .ag-header-cell-resize{right:-3px}:where(.ag-rtl) .ag-header-cell-resize{left:-3px}.ag-header-cell-resize:after{background-color:var(--ag-header-column-resize-handle-color);content:"";height:var(--ag-header-column-resize-handle-height);position:absolute;top:calc(50% - var(--ag-header-column-resize-handle-height)*.5);width:var(--ag-header-column-resize-handle-width);z-index:1}:where(.ag-ltr) .ag-header-cell-resize:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}:where(.ag-rtl) .ag-header-cell-resize:after{right:calc(50% - var(--ag-header-column-resize-handle-width))}:where(.ag-header-cell.ag-header-span-height) .ag-header-cell-resize:after{height:calc(100% - var(--ag-spacing)*4);top:calc(var(--ag-spacing)*2)}.ag-header-group-cell-no-group:where(.ag-header-span-height){display:none}.ag-sort-indicator-container{display:flex;gap:var(--ag-spacing)}.ag-layout-print{&.ag-body{display:block;height:unset}&.ag-root-wrapper{container-type:normal;display:inline-block}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:none}&.ag-force-vertical-scroll{overflow-y:visible!important}}@media print{.ag-root-wrapper.ag-layout-print{container-type:normal;display:table;.ag-body-horizontal-scroll-viewport,.ag-body-viewport,.ag-center-cols-container,.ag-center-cols-viewport,.ag-root,.ag-root-wrapper-body,.ag-virtual-list-viewport{display:block!important;height:auto!important;overflow:hidden!important}.ag-cell,.ag-row{-moz-column-break-inside:avoid;break-inside:avoid}}}ag-grid,ag-grid-angular{display:block}.ag-root-wrapper{border:var(--ag-wrapper-border);border-radius:var(--ag-wrapper-border-radius);container-type:inline-size;display:flex;flex-direction:column;overflow:hidden;position:relative;&.ag-layout-normal{height:100%}}.ag-root-wrapper-body{display:flex;flex-direction:row;&.ag-layout-normal{flex:1 1 auto;height:0;min-height:0}}.ag-root{display:flex;flex-direction:column;position:relative;&.ag-layout-auto-height,&.ag-layout-normal{flex:1 1 auto;overflow:hidden;width:0}&.ag-layout-normal{height:100%}}.ag-drag-handle{color:var(--ag-drag-handle-color);cursor:grab;:where(.ag-icon){color:var(--ag-drag-handle-color)}}.ag-chart-menu-icon,.ag-chart-settings-next,.ag-chart-settings-prev,.ag-column-group-icons,.ag-column-select-header-icon,.ag-filter-toolpanel-expand,.ag-floating-filter-button-button,.ag-group-title-bar-icon,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,.ag-panel-title-bar-button-icon,.ag-set-filter-group-icons,:where(.ag-group-contracted) .ag-icon,:where(.ag-group-expanded) .ag-icon{background-color:var(--ag-icon-button-background-color);border-radius:var(--ag-icon-button-border-radius);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-background-color);color:var(--ag-icon-button-color)}.ag-chart-menu-icon:hover,.ag-chart-settings-next:hover,.ag-chart-settings-prev:hover,.ag-column-group-icons:hover,.ag-column-select-header-icon:hover,.ag-filter-toolpanel-expand:hover,.ag-floating-filter-button-button:hover,.ag-group-title-bar-icon:hover,.ag-header-cell-filter-button:hover,.ag-header-cell-menu-button:hover,.ag-header-expand-icon:hover,.ag-panel-title-bar-button-icon:hover,.ag-panel-title-bar-button:hover,.ag-set-filter-group-icons:hover,:where(.ag-group-contracted) .ag-icon:hover,:where(.ag-group-expanded) .ag-icon:hover{background-color:var(--ag-icon-button-hover-background-color);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-hover-background-color);color:var(--ag-icon-button-hover-color)}:where(.ag-filter-active),:where(.ag-filter-toolpanel-group-instance-header-icon),:where(.ag-filter-toolpanel-instance-header-icon){position:relative}:where(.ag-filter-active):after,:where(.ag-filter-toolpanel-group-instance-header-icon):after,:where(.ag-filter-toolpanel-instance-header-icon):after{background-color:var(--ag-icon-button-active-indicator-color);border-radius:50%;content:"";height:6px;position:absolute;top:-1px;width:6px}:where(.ag-ltr) :where(.ag-filter-active):after,:where(.ag-ltr) :where(.ag-filter-toolpanel-group-instance-header-icon):after,:where(.ag-ltr) :where(.ag-filter-toolpanel-instance-header-icon):after{right:-1px}:where(.ag-rtl) :where(.ag-filter-active):after,:where(.ag-rtl) :where(.ag-filter-toolpanel-group-instance-header-icon):after,:where(.ag-rtl) :where(.ag-filter-toolpanel-instance-header-icon):after{left:-1px}.ag-filter-active{background-image:linear-gradient(var(--ag-icon-button-active-background-color),var(--ag-icon-button-active-background-color));border-radius:1px;outline:solid var(--ag-icon-button-background-spread) var(--ag-icon-button-active-background-color);:where(.ag-icon-filter){clip-path:path("M8,0C8,4.415 11.585,8 16,8L16,16L0,16L0,0L8,0Z");color:var(--ag-icon-button-active-color)}}',w2e={wrapperBorder:!0,rowBorder:!0,headerRowBorder:!0,footerRowBorder:{ref:"rowBorder"},columnBorder:{style:"solid",width:1,color:"transparent"},headerColumnBorder:!1,headerColumnBorderHeight:"100%",pinnedColumnBorder:!0,pinnedRowBorder:!0,sidePanelBorder:!0,sideBarPanelWidth:250,sideBarBackgroundColor:{ref:"chromeBackgroundColor"},sideButtonBarBackgroundColor:{ref:"sideBarBackgroundColor"},sideButtonBarTopPadding:0,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineColor:"transparent",sideButtonSelectedUnderlineTransitionDuration:0,sideButtonBackgroundColor:"transparent",sideButtonTextColor:{ref:"textColor"},sideButtonHoverBackgroundColor:{ref:"sideButtonBackgroundColor"},sideButtonHoverTextColor:{ref:"sideButtonTextColor"},sideButtonSelectedBackgroundColor:Ws,sideButtonSelectedTextColor:{ref:"sideButtonTextColor"},sideButtonBorder:"solid 1px transparent",sideButtonSelectedBorder:!0,sideButtonLeftPadding:{ref:"spacing"},sideButtonRightPadding:{ref:"spacing"},sideButtonVerticalPadding:{calc:"spacing * 3"},cellFontFamily:{ref:"fontFamily"},headerCellHoverBackgroundColor:"transparent",headerCellMovingBackgroundColor:{ref:"headerCellHoverBackgroundColor"},headerCellBackgroundTransitionDuration:"0.2s",cellTextColor:{ref:"textColor"},rangeSelectionBorderStyle:"solid",rangeSelectionBorderColor:zc,rangeSelectionBackgroundColor:Hl(.2),rangeSelectionChartBackgroundColor:"#0058FF1A",rangeSelectionChartCategoryBackgroundColor:"#00FF841A",rangeSelectionHighlightColor:Hl(.5),rangeHeaderHighlightColor:t2e(.08),rowNumbersSelectedColor:Hl(.5),rowHoverColor:Hl(.08),columnHoverColor:Hl(.05),selectedRowBackgroundColor:Hl(.12),modalOverlayBackgroundColor:{ref:"backgroundColor",mix:.66},dataBackgroundColor:Ws,oddRowBackgroundColor:{ref:"dataBackgroundColor"},wrapperBorderRadius:8,cellHorizontalPadding:{calc:"spacing * 2 * cellHorizontalPaddingScale"},cellWidgetSpacing:{calc:"spacing * 1.5"},cellHorizontalPaddingScale:1,rowGroupIndentSize:{calc:"cellWidgetSpacing + iconSize"},valueChangeDeltaUpColor:"#43a047",valueChangeDeltaDownColor:"#e53935",valueChangeValueHighlightBackgroundColor:"#16a08580",rowHeight:{calc:"max(iconSize, dataFontSize) + spacing * 3.25 * rowVerticalPaddingScale"},rowVerticalPaddingScale:1,paginationPanelHeight:{ref:"rowHeight",calc:"max(rowHeight, 22px)"},dragHandleColor:Xa(.7),headerColumnResizeHandleHeight:"30%",headerColumnResizeHandleWidth:2,headerColumnResizeHandleColor:{ref:"borderColor"},iconButtonColor:{ref:"iconColor"},iconButtonBackgroundColor:"transparent",iconButtonBackgroundSpread:4,iconButtonBorderRadius:1,iconButtonHoverColor:{ref:"iconButtonColor"},iconButtonHoverBackgroundColor:Xa(.1),iconButtonActiveColor:zc,iconButtonActiveBackgroundColor:Hl(.28),iconButtonActiveIndicatorColor:zc,setFilterIndentSize:{ref:"iconSize"},chartMenuPanelWidth:260,chartMenuLabelColor:Xa(.8),cellEditingBorder:{color:zc},cellEditingShadow:{ref:"cardShadow"},fullRowEditInvalidBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.25},columnSelectIndentSize:{ref:"iconSize"},toolPanelSeparatorBorder:!0,columnDropCellBackgroundColor:Xa(.07),columnDropCellTextColor:{ref:"textColor"},columnDropCellDragHandleColor:{ref:"textColor"},columnDropCellBorder:{color:Xa(.13)},selectCellBackgroundColor:Xa(.07),selectCellBorder:{color:Xa(.13)},advancedFilterBuilderButtonBarBorder:!0,advancedFilterBuilderIndentSize:{calc:"spacing * 2 + iconSize"},advancedFilterBuilderJoinPillColor:"#f08e8d",advancedFilterBuilderColumnPillColor:"#a6e194",advancedFilterBuilderOptionPillColor:"#f3c08b",advancedFilterBuilderValuePillColor:"#85c0e4",filterPanelApplyButtonColor:Ws,filterPanelApplyButtonBackgroundColor:zc,filterPanelCardSubtleColor:{ref:"textColor",mix:.7},filterPanelCardSubtleHoverColor:{ref:"textColor"},findMatchColor:_p,findMatchBackgroundColor:"#ffff00",findActiveMatchColor:_p,findActiveMatchBackgroundColor:"#ffa500",filterToolPanelGroupIndent:{ref:"spacing"},rowLoadingSkeletonEffectColor:Xa(.15),statusBarLabelColor:_p,statusBarLabelFontWeight:500,statusBarValueColor:_p,statusBarValueFontWeight:500,pinnedSourceRowTextColor:{ref:"textColor"},pinnedSourceRowBackgroundColor:{ref:"dataBackgroundColor"},pinnedSourceRowFontWeight:600,pinnedRowFontWeight:600,pinnedRowBackgroundColor:{ref:"dataBackgroundColor"},pinnedRowTextColor:{ref:"textColor"},rowDragIndicatorColor:{ref:"rangeSelectionBorderColor"},rowDragIndicatorWidth:2,columnDragIndicatorColor:{ref:"accentColor"},columnDragIndicatorWidth:2},S2e=".ag-cell-batch-edit{background-color:var(--ag-cell-batch-edit-background-color);color:var(--ag-cell-batch-edit-text-color);display:inherit}.ag-row-batch-edit{background-color:var(--ag-row-batch-edit-background-color);color:var(--ag-row-batch-edit-text-color)}",SU={cellBatchEditBackgroundColor:"rgba(220 181 139 / 16%)",cellBatchEditTextColor:"#422f00",rowBatchEditBackgroundColor:{ref:"cellBatchEditBackgroundColor"},rowBatchEditTextColor:{ref:"cellBatchEditTextColor"}},x2e={...SU,cellBatchEditTextColor:"#f3d0b3"},A2e=()=>jo({feature:"batchEditStyle",params:SU,css:S2e}),E2e=A2e(),T2e=":where(.ag-button){background:none;border:none;color:inherit;cursor:pointer;font-family:inherit;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0;text-indent:inherit;text-shadow:inherit;text-transform:inherit;word-spacing:inherit;&:disabled{cursor:default}&:focus-visible{box-shadow:var(--ag-focus-shadow);outline:none}}.ag-standard-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--ag-button-background-color);border:var(--ag-button-border);border-radius:var(--ag-button-border-radius);color:var(--ag-button-text-color);cursor:pointer;font-weight:var(--ag-button-font-weight);padding:var(--ag-button-vertical-padding) var(--ag-button-horizontal-padding);&:active{background-color:var(--ag-button-active-background-color);border:var(--ag-button-active-border);color:var(--ag-button-active-text-color)}&:disabled{background-color:var(--ag-button-disabled-background-color);border:var(--ag-button-disabled-border);color:var(--ag-button-disabled-text-color)}}.ag-standard-button:hover{background-color:var(--ag-button-hover-background-color);border:var(--ag-button-hover-border);color:var(--ag-button-hover-text-color)}",R2e={buttonTextColor:"inherit",buttonFontWeight:"normal",buttonBackgroundColor:"transparent",buttonBorder:!1,buttonBorderRadius:{ref:"borderRadius"},buttonHorizontalPadding:{calc:"spacing * 2"},buttonVerticalPadding:{ref:"spacing"},buttonHoverTextColor:{ref:"buttonTextColor"},buttonHoverBackgroundColor:{ref:"buttonBackgroundColor"},buttonHoverBorder:{ref:"buttonBorder"},buttonActiveTextColor:{ref:"buttonHoverTextColor"},buttonActiveBackgroundColor:{ref:"buttonHoverBackgroundColor"},buttonActiveBorder:{ref:"buttonHoverBorder"},buttonDisabledTextColor:{ref:"inputDisabledTextColor"},buttonDisabledBackgroundColor:{ref:"inputDisabledBackgroundColor"},buttonDisabledBorder:{ref:"inputDisabledBorder"}},D2e=()=>jo({feature:"buttonStyle",params:{...R2e,buttonBackgroundColor:Ws,buttonBorder:!0,buttonHoverBackgroundColor:{ref:"rowHoverColor"},buttonActiveBorder:{color:zc}},css:T2e}),M2e=D2e(),_2e=".ag-column-drop-vertical-empty-message{align-items:center;border:dashed var(--ag-border-width);border-color:var(--ag-border-color);display:flex;inset:0;justify-content:center;margin:calc(var(--ag-spacing)*1.5) calc(var(--ag-spacing)*2);overflow:hidden;padding:calc(var(--ag-spacing)*2);position:absolute}",P2e=()=>jo({feature:"columnDropStyle",css:_2e}),xU=P2e(),O2e={formulaToken1Color:"#3269c6",formulaToken1BackgroundColor:{ref:"formulaToken1Color",mix:.08},formulaToken1Border:{color:{ref:"formulaToken1Color"}},formulaToken2Color:"#c0343f",formulaToken2BackgroundColor:{ref:"formulaToken2Color",mix:.06},formulaToken2Border:{color:{ref:"formulaToken2Color"}},formulaToken3Color:"#8156b8",formulaToken3BackgroundColor:{ref:"formulaToken3Color",mix:.08},formulaToken3Border:{color:{ref:"formulaToken3Color"}},formulaToken4Color:"#007c1f",formulaToken4BackgroundColor:{ref:"formulaToken4Color",mix:.06},formulaToken4Border:{color:{ref:"formulaToken4Color"}},formulaToken5Color:"#b03e85",formulaToken5BackgroundColor:{ref:"formulaToken5Color",mix:.08},formulaToken5Border:{color:{ref:"formulaToken5Color"}},formulaToken6Color:"#b74900",formulaToken6BackgroundColor:{ref:"formulaToken6Color",mix:.06},formulaToken6Border:{color:{ref:"formulaToken6Color"}},formulaToken7Color:"#247492",formulaToken7BackgroundColor:{ref:"formulaToken7Color",mix:.08},formulaToken7Border:{color:{ref:"formulaToken7Color"}}},L2e=()=>jo({feature:"formulaStyle",params:O2e}),F2e=L2e(),k2e={warn:(...t)=>{Tt(t[0],t[1])},error:(...t)=>{sa(t[0],t[1])},preInitErr:(...t)=>{H0(t[0],t[2],t[1])}},N2e=()=>f2e(k2e).withParams(w2e).withPart(M2e).withPart(xU).withPart(E2e).withPart(F2e),B2e='.ag-checkbox-input-wrapper,.ag-radio-button-input-wrapper{background-color:var(--ag-checkbox-unchecked-background-color);border:solid var(--ag-checkbox-border-width) var(--ag-checkbox-unchecked-border-color);flex:none;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);&:where(.ag-checked){background-color:var(--ag-checkbox-checked-background-color);border-color:var(--ag-checkbox-checked-border-color)}&:where(.ag-checked):after{background-color:var(--ag-checkbox-checked-shape-color)}&:where(.ag-disabled){filter:grayscale();opacity:.5}}.ag-checkbox-input,.ag-radio-button-input{-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:block;height:var(--ag-icon-size);margin:0;opacity:0;width:var(--ag-icon-size)}.ag-checkbox-input-wrapper:after,.ag-radio-button-input-wrapper:after{content:"";display:block;inset:0;-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;pointer-events:none;position:absolute}.ag-checkbox-input-wrapper:where(:focus-within,:active),.ag-radio-button-input-wrapper:where(:focus-within,:active){box-shadow:var(--ag-focus-shadow)}.ag-checkbox-input-wrapper{border-radius:var(--ag-checkbox-border-radius);&:where(.ag-checked):after{-webkit-mask-image:var(--ag-checkbox-checked-shape-image);mask-image:var(--ag-checkbox-checked-shape-image)}&:where(.ag-indeterminate){background-color:var(--ag-checkbox-indeterminate-background-color);border-color:var(--ag-checkbox-indeterminate-border-color)}&:where(.ag-indeterminate):after{background-color:var(--ag-checkbox-indeterminate-shape-color);-webkit-mask-image:var(--ag-checkbox-indeterminate-shape-image);mask-image:var(--ag-checkbox-indeterminate-shape-image)}}.ag-cell-editing-error .ag-checkbox-input-wrapper:focus-within{box-shadow:var(--ag-focus-error-shadow)}.ag-radio-button-input-wrapper{border-radius:100%;&:where(.ag-checked):after{-webkit-mask-image:var(--ag-radio-checked-shape-image);mask-image:var(--ag-radio-checked-shape-image)}}',I2e=()=>jo({feature:"checkboxStyle",params:{checkboxBorderWidth:1,checkboxBorderRadius:{ref:"borderRadius"},checkboxUncheckedBackgroundColor:Ws,checkboxUncheckedBorderColor:Ja(.3),checkboxCheckedBackgroundColor:zc,checkboxCheckedBorderColor:{ref:"checkboxCheckedBackgroundColor"},checkboxCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="7" fill="none"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75" d="M1 3.5 3.5 6l5-5"/></svg>'},checkboxCheckedShapeColor:Ws,checkboxIndeterminateBackgroundColor:Ja(.3),checkboxIndeterminateBorderColor:{ref:"checkboxIndeterminateBackgroundColor"},checkboxIndeterminateShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="2" fill="none"><rect width="10" height="2" fill="#000" rx="1"/></svg>'},checkboxIndeterminateShapeColor:Ws,radioCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" fill="none"><circle cx="3" cy="3" r="3" fill="#000"/></svg>'}},css:B2e}),H2e=I2e(),AU=()=>({...qS,...x2e,backgroundColor:"hsl(217, 0%, 17%)",foregroundColor:"#FFF",chromeBackgroundColor:Ja(.05),rowHoverColor:Hl(.15),selectedRowBackgroundColor:Hl(.2),menuBackgroundColor:Ja(.1),browserColorScheme:"dark",popupShadow:"0 0px 20px #000A",cardShadow:"0 1px 4px 1px #000A",advancedFilterBuilderJoinPillColor:"#7a3a37",advancedFilterBuilderColumnPillColor:"#355f2d",advancedFilterBuilderOptionPillColor:"#5a3168",advancedFilterBuilderValuePillColor:"#374c86",filterPanelApplyButtonColor:_p,findMatchColor:Ws,findActiveMatchColor:Ws,checkboxUncheckedBorderColor:Ja(.4),toggleButtonOffBackgroundColor:Ja(.4),rowBatchEditBackgroundColor:Ja(.1),formulaToken1Color:"#4da3e5",formulaToken2Color:"#f55864",formulaToken3Color:"#b688f2",formulaToken4Color:"#24bb4a",formulaToken5Color:"#e772ba",formulaToken6Color:"#f69b5f",formulaToken7Color:"#a3e6ff"}),G2e=()=>({...AU(),backgroundColor:"#1f2836"}),z2e=()=>jo({feature:"colorScheme",params:qS,modeParams:{light:qS,dark:AU(),"dark-blue":G2e()}}),V2e=z2e(),EU={aggregation:'<path d="M18 7V4H6l6 8-6 8h12v-3"/>',arrows:'<polyline points="5 9 2 12 5 15"/><polyline points="9 5 12 2 15 5"/><polyline points="15 19 12 22 9 19"/><polyline points="19 9 22 12 19 15"/><line x1="2" x2="22" y1="12" y2="12"/><line x1="12" x2="12" y1="2" y2="22"/>',asc:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',cancel:'<path d="m18 6-12 12"/><path d="m6 6 12 12"/>',chart:'<line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/>',"color-picker":'<path d="m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z"/><path d="m5 2 5 5"/><path d="M2 13h15"/><path d="M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z"/>',columns:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"/>',contracted:'<path d="m9 18 6-6-6-6"/>',copy:'<rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>',cross:'<path d="M18 6 6 18"/><path d="m6 6 12 12"/>',csv:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',cut:'<circle cx="6" cy="6" r="3"/><path d="M8.12 8.12 12 12"/><path d="M20 4 8.12 15.88"/><circle cx="6" cy="18" r="3"/><path d="M14.8 14.8 20 20"/>',desc:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',down:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',excel:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',expanded:'<path d="m15 18-6-6 6-6"/>',eye:'<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/>',"eye-slash":'<path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/>',filter:'<path d="M3 6h18"/><path d="M7 12h10"/><path d="M10 18h4"/>',first:'<path d="m17 18-6-6 6-6"/><path d="M7 6v12"/>',grip:'<circle cx="5" cy="8" r="0.5"/><circle cx="12" cy="8" r="0.5"/><circle cx="19" cy="8" r="0.5"/><circle cx="5" cy="16" r="0.5"/><circle cx="12" cy="16" r="0.5"/><circle cx="19" cy="16" r="0.5"/><g stroke="none" fill="currentColor"><circle cx="5" cy="8" r="1"/><circle cx="12" cy="8" r="1"/><circle cx="19" cy="8" r="1"/><circle cx="5" cy="16" r="1"/><circle cx="12" cy="16" r="1"/><circle cx="19" cy="16" r="1"/></g>',group:'<path d="M16 12H3"/><path d="M16 18H3"/><path d="M10 6H3"/><path d="M21 18V8a2 2 0 0 0-2-2h-5"/><path d="m16 8-2-2 2-2"/>',last:'<path d="m7 18 6-6-6-6"/><path d="M17 6v12"/>',left:'<path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>',linked:'<path d="M9 17H7A5 5 0 0 1 7 7h2"/><path d="M15 7h2a5 5 0 1 1 0 10h-2"/><line x1="8" x2="16" y1="12" y2="12"/>',loading:'<line x1="12" x2="12" y1="2" y2="6"/><line x1="12" x2="12" y1="18" y2="22"/><line x1="4.93" x2="7.76" y1="4.93" y2="7.76"/><line x1="16.24" x2="19.07" y1="16.24" y2="19.07"/><line x1="2" x2="6" y1="12" y2="12"/><line x1="18" x2="22" y1="12" y2="12"/><line x1="4.93" x2="7.76" y1="19.07" y2="16.24"/><line x1="16.24" x2="19.07" y1="7.76" y2="4.93"/>',maximize:'<polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" x2="14" y1="3" y2="10"/><line x1="3" x2="10" y1="21" y2="14"/>',menu:'<line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/>',"menu-alt":'<circle cx="12" cy="5" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="12" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="19" r="0.75" fill="#D9D9D9"/>',minimize:'<polyline points="4 14 10 14 10 20"/><polyline points="20 10 14 10 14 4"/><line x1="14" x2="21" y1="10" y2="3"/><line x1="3" x2="10" y1="21" y2="14"/>',minus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/>',next:'<path d="m9 18 6-6-6-6"/>',none:'<path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/>',"not-allowed":'<circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/>',paste:'<path d="M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10"/><path d="m17 10 4 4-4 4"/>',pin:'<line x1="12" x2="12" y1="17" y2="22"/><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"/>',pivot:'<path d="M15 3v18"/><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M21 9H3"/><path d="M21 15H3"/>',plus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/>',previous:'<path d="m15 18-6-6 6-6"/>',right:'<path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>',save:'<path d="M12 17V3"/><path d="m6 11 6 6 6-6"/><path d="M19 21H5"/>',settings:'<path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/>',"small-left":'<path d="m15 18-6-6 6-6"/>',"small-right":'<path d="m9 18 6-6-6-6"/>',tick:'<path d="M20 6 9 17l-5-5"/>',"tree-closed":'<path d="m9 18 6-6-6-6"/>',"tree-indeterminate":'<path d="M5 12h14"/>',"tree-open":'<path d="m6 9 6 6 6-6"/>',unlinked:'<path d="M9 17H7A5 5 0 0 1 7 7"/><path d="M15 7h2a5 5 0 0 1 4 8"/><line x1="8" x2="12" y1="12" y2="12"/><line x1="2" x2="22" y1="2" y2="22"/>',up:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>'},TU={aasc:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.2012 8.07928C13.6346 8.0793 14.0128 8.15365 14.3359 8.30193C14.6609 8.45018 14.9141 8.65595 15.0947 8.9201C15.2754 9.18439 15.3683 9.49109 15.374 9.83904H14.1904C14.1676 9.60898 14.0695 9.4303 13.8965 9.30291C13.7235 9.1756 13.4889 9.1115 13.1924 9.1115C12.9909 9.1115 12.8204 9.1404 12.6816 9.19744C12.543 9.25255 12.4364 9.32917 12.3623 9.42791C12.2901 9.52678 12.2539 9.63933 12.2539 9.76482C12.2501 9.8692 12.272 9.9604 12.3193 10.0383C12.3688 10.1162 12.4369 10.1843 12.5225 10.2414C12.6079 10.2964 12.7064 10.3451 12.8184 10.3869C12.9304 10.4268 13.0505 10.4609 13.1777 10.4894L13.7031 10.6144C13.9578 10.6715 14.1914 10.7479 14.4043 10.8429C14.6173 10.938 14.8021 11.0547 14.958 11.1935C15.1138 11.3323 15.2348 11.4957 15.3203 11.6838C15.4077 11.8719 15.4522 12.088 15.4541 12.3312C15.4522 12.6885 15.3611 12.9986 15.1807 13.2609C15.0019 13.5214 14.7427 13.7248 14.4043 13.8693C14.0678 14.0118 13.6617 14.0832 13.1865 14.0832C12.7153 14.0832 12.3048 14.0107 11.9551 13.8664C11.6071 13.7219 11.3345 13.5071 11.1387 13.2238C10.9449 12.9387 10.8435 12.5862 10.834 12.1662H12.0283C12.0416 12.362 12.0984 12.5252 12.1973 12.6564C12.298 12.7857 12.4323 12.8838 12.5996 12.9504C12.7688 13.0149 12.96 13.047 13.1729 13.047C13.3817 13.047 13.563 13.0169 13.7168 12.9562C13.8727 12.8954 13.9935 12.8106 14.0791 12.7023C14.1647 12.5939 14.208 12.469 14.208 12.3283C14.2079 12.1974 14.1686 12.0875 14.0908 11.9982C14.0148 11.9089 13.9022 11.8324 13.7539 11.7697C13.6076 11.707 13.4276 11.6501 13.2148 11.5988L12.5791 11.4387C12.0869 11.3189 11.6982 11.1318 11.4131 10.8771C11.128 10.6224 10.9855 10.2793 10.9873 9.84783C10.9854 9.49418 11.0804 9.18439 11.2705 8.9201C11.4625 8.65603 11.7261 8.45015 12.0605 8.30193C12.3951 8.15369 12.7754 8.07928 13.2012 8.07928Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M5.8125 14.0002H4.48926L4.05664 12.6681H1.94824L1.51465 14.0002H0.19043L2.20703 8.15935H3.79883L5.8125 14.0002ZM2.26172 11.7043H3.74316L3.02539 9.49334H2.98047L2.26172 11.7043Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M8.45215 8.15935C8.88165 8.15935 9.24031 8.22251 9.52734 8.34978C9.81445 8.47717 10.0303 8.65477 10.1748 8.88103C10.3192 9.10536 10.3916 9.36368 10.3916 9.65642C10.3916 9.88452 10.3461 10.085 10.2549 10.258C10.1637 10.4289 10.0384 10.5696 9.87891 10.6799C9.72117 10.7882 9.54024 10.8657 9.33691 10.9113V10.9679C9.55917 10.9775 9.76716 11.0406 9.96094 11.1564C10.1568 11.2724 10.3158 11.4356 10.4375 11.6447C10.5591 11.8519 10.6201 12.099 10.6201 12.3859C10.6201 12.6958 10.5427 12.9727 10.3887 13.216C10.2366 13.4573 10.0113 13.6486 9.71289 13.7892C9.41443 13.9299 9.04655 14.0002 8.60938 14.0002H6.11426V8.15935H8.45215ZM7.34863 12.9904H8.35547C8.69943 12.9904 8.95057 12.9252 9.1084 12.7941C9.26621 12.661 9.34473 12.4834 9.34473 12.2629C9.34468 12.1014 9.30643 11.9587 9.22852 11.8351C9.15056 11.7116 9.03903 11.6145 8.89453 11.5441C8.75195 11.4738 8.58148 11.4387 8.38379 11.4387H7.34863V12.9904ZM7.34863 10.6037H8.26465C8.43369 10.6036 8.58376 10.5737 8.71484 10.5148C8.84793 10.454 8.95227 10.3683 9.02832 10.258C9.10628 10.1477 9.14551 10.0155 9.14551 9.8615C9.14546 9.65055 9.07008 9.48001 8.91992 9.35076C8.77165 9.22169 8.56064 9.15741 8.28711 9.1574H7.34863V10.6037Z" fill="black"/><path d="M7.16602 0.377127C7.44584 0.189493 7.82551 0.20905 8.08496 0.442557L11.418 3.44256C11.7257 3.71966 11.7507 4.19428 11.4736 4.50213C11.1966 4.80961 10.7228 4.83441 10.415 4.55779L7.60938 2.03338L5.11328 4.53045C4.82042 4.82326 4.34562 4.82322 4.05273 4.53045C3.75986 4.23757 3.75989 3.7628 4.05273 3.4699L7.05273 0.4699L7.16602 0.377127Z" fill="black"/></svg>',adesc:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.3867 11.4697C10.6796 11.1771 11.1544 11.1769 11.4473 11.4697C11.7399 11.7626 11.7399 12.2374 11.4473 12.5303L8.44727 15.5303L8.33398 15.623C8.05425 15.8106 7.67449 15.7909 7.41504 15.5576L4.08203 12.5576C3.77415 12.2805 3.74927 11.8059 4.02637 11.498C4.30342 11.1907 4.77722 11.1657 5.08496 11.4424L7.89062 13.9668L10.3867 11.4697Z" fill="black"/><path d="M13.2012 3.0791C13.6346 3.07912 14.0128 3.1535 14.3359 3.30176C14.6611 3.45006 14.9141 3.65661 15.0947 3.9209C15.2752 4.18513 15.3683 4.49104 15.374 4.83887H14.1904C14.1676 4.60882 14.0695 4.43012 13.8965 4.30273C13.7235 4.17546 13.4889 4.11133 13.1924 4.11133C12.9909 4.11133 12.8204 4.14023 12.6816 4.19727C12.5431 4.25236 12.4364 4.32902 12.3623 4.42773C12.2901 4.52659 12.2539 4.63919 12.2539 4.76465C12.2501 4.86901 12.272 4.96023 12.3193 5.03809C12.3688 5.11604 12.4369 5.18417 12.5225 5.24121C12.6079 5.29623 12.7064 5.34496 12.8184 5.38672C12.9304 5.42661 13.0505 5.46075 13.1777 5.48926L13.7031 5.61426C13.9578 5.67128 14.1914 5.74776 14.4043 5.84277C14.6172 5.93784 14.8021 6.05457 14.958 6.19336C15.1139 6.33216 15.2348 6.49633 15.3203 6.68457C15.4076 6.8727 15.4522 7.08885 15.4541 7.33203C15.4521 7.68929 15.3612 7.99944 15.1807 8.26172C15.0019 8.52216 14.7427 8.72465 14.4043 8.86914C14.0678 9.01165 13.6617 9.08301 13.1865 9.08301C12.7153 9.08299 12.3048 9.01057 11.9551 8.86621C11.6072 8.72173 11.3345 8.50786 11.1387 8.22461C10.9447 7.9394 10.8435 7.58622 10.834 7.16602H12.0283C12.0416 7.36176 12.0985 7.52509 12.1973 7.65625C12.298 7.78554 12.4323 7.88365 12.5996 7.9502C12.7688 8.01477 12.96 8.04785 13.1729 8.04785C13.3817 8.04781 13.5629 8.01678 13.7168 7.95605C13.8727 7.89522 13.9935 7.81051 14.0791 7.70215C14.1646 7.59387 14.2079 7.46965 14.208 7.3291C14.208 7.19796 14.1687 7.08739 14.0908 6.99805C14.0148 6.90868 13.9022 6.83228 13.7539 6.76953C13.6076 6.70685 13.4276 6.64993 13.2148 6.59863L12.5791 6.43848C12.0868 6.31871 11.6982 6.13163 11.4131 5.87695C11.1279 5.62221 10.9855 5.27916 10.9873 4.84766C10.9854 4.49404 11.0804 4.18517 11.2705 3.9209C11.4625 3.65661 11.7259 3.45006 12.0605 3.30176C12.3951 3.15353 12.7754 3.0791 13.2012 3.0791Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M5.8125 9H4.48926L4.05664 7.66797H1.94824L1.51465 9H0.19043L2.20703 3.15918H3.79883L5.8125 9ZM2.26172 6.7041H3.74316L3.02539 4.49414H2.98047L2.26172 6.7041Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M8.45215 3.15918C8.88181 3.15918 9.24025 3.22322 9.52734 3.35059C9.81445 3.47798 10.0303 3.6546 10.1748 3.88086C10.3193 4.10518 10.3916 4.36351 10.3916 4.65625C10.3916 4.88432 10.3461 5.08484 10.2549 5.25781C10.1636 5.4289 10.0386 5.57039 9.87891 5.68066C9.72118 5.78898 9.54022 5.86549 9.33691 5.91113V5.96875C9.55913 5.9783 9.76719 6.04044 9.96094 6.15625C10.1568 6.27223 10.3158 6.43538 10.4375 6.64453C10.5591 6.85173 10.6201 7.09875 10.6201 7.38574C10.6201 7.69567 10.5427 7.97245 10.3887 8.21582C10.2366 8.45719 10.0113 8.64841 9.71289 8.78906C9.41442 8.9297 9.04658 8.99999 8.60938 9H6.11426V3.15918H8.45215ZM7.34863 7.99023H8.35547C8.69948 7.99023 8.95057 7.92504 9.1084 7.79395C9.26621 7.66085 9.34473 7.48325 9.34473 7.2627C9.34466 7.10125 9.3064 6.95844 9.22852 6.83496C9.15056 6.71143 9.03899 6.61427 8.89453 6.54395C8.75196 6.47365 8.58145 6.43848 8.38379 6.43848H7.34863V7.99023ZM7.34863 5.60352H8.26465C8.43369 5.60347 8.58376 5.57354 8.71484 5.51465C8.84791 5.45381 8.95228 5.36807 9.02832 5.25781C9.10623 5.14755 9.14551 5.01529 9.14551 4.86133C9.14542 4.65046 9.07002 4.48078 8.91992 4.35156C8.77163 4.22228 8.56087 4.15724 8.28711 4.15723H7.34863V5.60352Z" fill="black"/></svg>',"chevron-down":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 6L8 10L4 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-left":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 12L6 8L10 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-right":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-up":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 10L8 6L12 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"column-arrow":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 26C0 28.2092 1.79086 30 4 30H14C16.2091 30 18 28.2092 18 26V15H25.8786L24.4394 16.4393C23.8536 17.0251 23.8536 17.9749 24.4394 18.5607C25.0252 19.1464 25.9748 19.1464 26.5606 18.5607L30.5606 14.5607C31.1464 13.9749 31.1464 13.0251 30.5606 12.4393L26.5606 8.43934C25.9748 7.85356 25.0252 7.85356 24.4394 8.43934C23.8536 9.02512 23.8536 9.97488 24.4394 10.5607L25.8786 12H18V6C18 3.79086 16.2091 2 14 2H4C1.79086 2 0 3.79086 0 6V26ZM14 5H10.5V12H15V6C15 5.44772 14.5523 5 14 5ZM4 5H7.5V12H3V6C3 5.44772 3.44772 5 4 5ZM10.5 15H15V26C15 26.5522 14.5523 27 14 27H10.5V15ZM4 27H7.5V15H3V26C3 26.5522 3.44772 27 4 27Z" fill="currentColor"/></svg>',edit:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 10.6262V12.5012H5.375L10.905 6.97122L9.03 5.09622L3.5 10.6262ZM12.355 5.52122C12.4014 5.47497 12.4381 5.42002 12.4632 5.35953C12.4883 5.29905 12.5012 5.23421 12.5012 5.16872C12.5012 5.10324 12.4883 5.0384 12.4632 4.97791C12.4381 4.91742 12.4014 4.86248 12.355 4.81622L11.185 3.64622C11.1387 3.59987 11.0838 3.5631 11.0233 3.53801C10.9628 3.51291 10.898 3.5 10.8325 3.5C10.767 3.5 10.7022 3.51291 10.6417 3.53801C10.5812 3.5631 10.5263 3.59987 10.48 3.64622L9.565 4.56122L11.44 6.43622L12.355 5.52122Z" fill="currentColor"/></svg>',"filter-add":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.12126 7.75L10.8517 7.75" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M6.65934 11.748L9.32778 11.748" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M12.2943 1.04872V6.19184M14.9886 3.74341H9.68478" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M8.25488 3C8.04799 3.18323 7.91706 3.45099 7.91699 3.74902C7.91713 4.04868 8.04988 4.31681 8.25879 4.5H2C1.58579 4.5 1.25 4.16421 1.25 3.75C1.25 3.33579 1.58579 3 2 3H8.25488Z" fill="currentColor"/></svg>',"pinned-bottom":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M3.47 12.28A.75.75 0 0 1 4 11h8a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.53-.22ZM12.731 5.256a.75.75 0 0 1-.2.524l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 1 1 1.06-1.06l2.72 2.72V2a.75.75 0 0 1 1.5 0v5.44l2.72-2.72a.75.75 0 0 1 1.26.536Z"/></svg>',"pinned-top":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M12.53 3.72A.75.75 0 0 1 12 5H4a.75.75 0 0 1 0-1.5h8a.75.75 0 0 1 .53.22ZM3.269 10.744a.75.75 0 0 1 .2-.524l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 1 1-1.06 1.06L8.75 8.56V14a.75.75 0 0 1-1.5 0V8.56l-2.72 2.72a.75.75 0 0 1-1.26-.536Z"/></svg>',"small-down":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 10.667 16 21.334l8.667-10.667H7.334Z"/></svg>',"small-up":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 21.333 16 10.666l8.667 10.667H7.334Z"/></svg>',"un-pin":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M8 11a.75.75 0 0 0-.75.75v3.333a.75.75 0 1 0 1.5 0V11.75A.75.75 0 0 0 8 11Z"/><path fill="currentColor" d="M13.11 1.436a.75.75 0 0 0-1.22-.872l-10 14a.75.75 0 1 0 1.22.872L5.207 12.5h7.376a.75.75 0 0 0 .75-.75v-1.174a2.08 2.08 0 0 0-1.153-1.863l-1.185-.599-.005-.002a.58.58 0 0 1-.323-.522V5.165a2.083 2.083 0 0 0 1.854-2.904l.589-.825Zm-3.943 5.52v.634a2.08 2.08 0 0 0 1.153 1.863l1.185.6.005.002a.58.58 0 0 1 .323.522V11H6.28l2.887-4.044ZM9.277 1H5.25a2.084 2.084 0 0 0-.083 4.165v1.676l1.5-2.132v-.292a.75.75 0 0 0-.75-.75H5.25a.584.584 0 0 1 0-1.167h2.972L9.277 1Z"/></svg>'},U2e=(t={})=>{let e="";for(const n of[...Object.keys(EU),...Object.keys(TU)]){const i=j2e(n,t.strokeWidth);e+=`.ag-icon-${n}::before { mask-image: url('data:image/svg+xml,${encodeURIComponent(i)}'); }
`}return e},j2e=(t,e=1.5)=>{const n=TU[t];if(n)return n;const i=EU[t];if(!i)throw new Error(`Missing icon data for ${t}`);return`<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="black" stroke-width="${e}" viewBox="0 0 24 24"><style>* { vector-effect: non-scaling-stroke; }</style>`+i+"</svg>"},W2e=(t={})=>jo({feature:"iconSet",css:()=>U2e(t)}),q2e=W2e(),K2e=':where(.ag-input-field-input[type=number]:not(.ag-number-field-input-stepper)){-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield;&::-webkit-inner-spin-button,&::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none;margin:0}}.ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){background-color:var(--ag-input-background-color);border:var(--ag-input-border);border-radius:var(--ag-input-border-radius);color:var(--ag-input-text-color);font-family:inherit;font-size:inherit;line-height:inherit;margin:0;min-height:var(--ag-input-height);padding:0;&:where(:disabled){background-color:var(--ag-input-disabled-background-color);border:var(--ag-input-disabled-border);color:var(--ag-input-disabled-text-color)}&:where(:focus){background-color:var(--ag-input-focus-background-color);border:var(--ag-input-focus-border);box-shadow:var(--ag-input-focus-shadow);color:var(--ag-input-focus-text-color);outline:none}&:where(:invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&::-moz-placeholder{color:var(--ag-input-placeholder-text-color)}&::placeholder{color:var(--ag-input-placeholder-text-color)}}:where(.ag-ltr) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-left:var(--ag-input-padding-start)}:where(.ag-rtl) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-right:var(--ag-input-padding-start)}&:where(.ag-ltr,.ag-rtl) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding:0 var(--ag-input-padding-start)}:where(.ag-column-select-header-filter-wrapper),:where(.ag-filter-add-select),:where(.ag-filter-filter),:where(.ag-filter-toolpanel-search),:where(.ag-floating-filter-search-icon),:where(.ag-mini-filter){.ag-input-wrapper:before{background-color:currentcolor;color:var(--ag-input-icon-color);content:"";display:block;height:12px;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;opacity:.5;position:absolute;width:12px}}:where(.ag-ltr) :where(.ag-column-select-header-filter-wrapper),:where(.ag-ltr) :where(.ag-filter-add-select),:where(.ag-ltr) :where(.ag-filter-filter),:where(.ag-ltr) :where(.ag-filter-toolpanel-search),:where(.ag-ltr) :where(.ag-floating-filter-search-icon),:where(.ag-ltr) :where(.ag-mini-filter){.ag-input-wrapper:before{margin-left:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-left:calc(var(--ag-spacing)*1.5 + 12px)}}:where(.ag-rtl) :where(.ag-column-select-header-filter-wrapper),:where(.ag-rtl) :where(.ag-filter-add-select),:where(.ag-rtl) :where(.ag-filter-filter),:where(.ag-rtl) :where(.ag-filter-toolpanel-search),:where(.ag-rtl) :where(.ag-floating-filter-search-icon),:where(.ag-rtl) :where(.ag-mini-filter){.ag-input-wrapper:before{margin-right:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-right:calc(var(--ag-spacing)*1.5 + 12px)}}',Y2e=".ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){&:focus{box-shadow:var(--ag-focus-shadow);&:where(.invalid),&:where(:invalid){box-shadow:var(--ag-focus-error-shadow)}}}",X2e={inputBackgroundColor:"transparent",inputBorder:!1,inputBorderRadius:0,inputTextColor:{ref:"textColor"},inputPlaceholderTextColor:{ref:"inputTextColor",mix:.5},inputPaddingStart:0,inputHeight:{calc:"max(iconSize, fontSize) + spacing * 2"},inputFocusBackgroundColor:{ref:"inputBackgroundColor"},inputFocusBorder:{ref:"inputBorder"},inputFocusShadow:"none",inputFocusTextColor:{ref:"inputTextColor"},inputDisabledBackgroundColor:{ref:"inputBackgroundColor"},inputDisabledBorder:{ref:"inputBorder"},inputDisabledTextColor:{ref:"inputTextColor"},inputInvalidBackgroundColor:{ref:"inputBackgroundColor"},inputInvalidBorder:{ref:"inputBorder"},inputInvalidTextColor:{ref:"inputTextColor"},inputIconColor:{ref:"inputTextColor"},pickerButtonBorder:!1,pickerButtonFocusBorder:{ref:"inputFocusBorder"},pickerButtonBackgroundColor:{ref:"backgroundColor"},pickerButtonFocusBackgroundColor:{ref:"backgroundColor"},pickerListBorder:!1,pickerListBackgroundColor:{ref:"backgroundColor"},colorPickerThumbSize:18,colorPickerTrackSize:12,colorPickerThumbBorderWidth:3,colorPickerTrackBorderRadius:12,colorPickerColorBorderRadius:4},$2e=()=>jo({feature:"inputStyle",params:{...X2e,inputBackgroundColor:Ws,inputBorder:!0,inputBorderRadius:{ref:"borderRadius"},inputPaddingStart:{ref:"spacing"},inputFocusBorder:{color:zc},inputFocusShadow:{ref:"focusShadow"},inputDisabledBackgroundColor:Ja(.06),inputDisabledTextColor:{ref:"textColor",mix:.5},inputInvalidBorder:{color:{ref:"invalidColor"}},pickerButtonBorder:!0,pickerListBorder:!0},css:()=>K2e+Y2e}),Z2e=$2e(),Q2e='.ag-tabs-header{background-color:var(--ag-tab-bar-background-color);border-bottom:var(--ag-tab-bar-border);display:flex;flex:1;gap:var(--ag-tab-spacing);padding:var(--ag-tab-bar-top-padding) var(--ag-tab-bar-horizontal-padding) 0}.ag-tabs-header-wrapper{display:flex}.ag-tabs-close-button-wrapper{align-items:center;border:0;display:flex;padding:var(--ag-spacing)}:where(.ag-ltr) .ag-tabs-close-button-wrapper{border-right:solid var(--ag-border-width) var(--ag-border-color)}:where(.ag-rtl) .ag-tabs-close-button-wrapper{border-left:solid var(--ag-border-width) var(--ag-border-color)}.ag-tabs-close-button{background-color:unset;border:0;cursor:pointer;padding:0}.ag-tab{align-items:center;background-color:var(--ag-tab-background-color);border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;color:var(--ag-tab-text-color);cursor:pointer;display:flex;flex:1;justify-content:center;padding:var(--ag-tab-top-padding) var(--ag-tab-horizontal-padding) var(--ag-tab-bottom-padding);position:relative}.ag-tab:hover{background-color:var(--ag-tab-hover-background-color);color:var(--ag-tab-hover-text-color)}.ag-tab.ag-tab-selected{background-color:var(--ag-tab-selected-background-color);color:var(--ag-tab-selected-text-color)}:where(.ag-ltr) .ag-tab.ag-tab-selected:where(:not(:first-of-type)){border-left-color:var(--ag-tab-selected-border-color)}:where(.ag-rtl) .ag-tab.ag-tab-selected:where(:not(:first-of-type)){border-right-color:var(--ag-tab-selected-border-color)}:where(.ag-ltr) .ag-tab.ag-tab-selected:where(:not(:last-of-type)){border-right-color:var(--ag-tab-selected-border-color)}:where(.ag-rtl) .ag-tab.ag-tab-selected:where(:not(:last-of-type)){border-left-color:var(--ag-tab-selected-border-color)}.ag-tab:after{background-color:var(--ag-tab-selected-underline-color);bottom:0;content:"";display:block;height:var(--ag-tab-selected-underline-width);left:0;opacity:0;position:absolute;right:0;transition:opacity var(--ag-tab-selected-underline-transition-duration)}.ag-tab.ag-tab-selected:after{opacity:1}',J2e={tabBarBackgroundColor:"transparent",tabBarHorizontalPadding:0,tabBarTopPadding:0,tabBackgroundColor:"transparent",tabTextColor:{ref:"textColor"},tabHorizontalPadding:{ref:"spacing"},tabTopPadding:{ref:"spacing"},tabBottomPadding:{ref:"spacing"},tabSpacing:"0",tabHoverBackgroundColor:{ref:"tabBackgroundColor"},tabHoverTextColor:{ref:"tabTextColor"},tabSelectedBackgroundColor:{ref:"tabBackgroundColor"},tabSelectedTextColor:{ref:"tabTextColor"},tabSelectedBorderWidth:{ref:"borderWidth"},tabSelectedBorderColor:"transparent",tabSelectedUnderlineColor:"transparent",tabSelectedUnderlineWidth:0,tabSelectedUnderlineTransitionDuration:0,tabBarBorder:!1},exe=()=>jo({feature:"tabStyle",params:{...J2e,tabBarBorder:!0,tabBarBackgroundColor:Xa(.05),tabTextColor:{ref:"textColor",mix:.7},tabSelectedTextColor:{ref:"textColor"},tabHoverTextColor:{ref:"textColor"},tabSelectedBorderColor:{ref:"borderColor"},tabSelectedBackgroundColor:Ws},css:Q2e}),txe=exe(),nxe=()=>({fontFamily:[{googleFont:"IBM Plex Sans"},"-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu"]}),ixe=()=>N2e().withPart(H2e).withPart(V2e).withPart(q2e).withPart(txe).withPart(Z2e).withPart(xU).withParams(nxe()),rxe=ixe(),Yh=(t,e,n,i,r)=>({changeKey:t,type:e,defaultValue:n,noWarn:i,cacheDefault:r}),sxe=Yh("cellHorizontalPadding","length",16),axe=Yh("indentationLevel","length",0,!0,!0),oxe=Yh("rowGroupIndentSize","length",0),M7=Yh("rowHeight","length",42),_7=Yh("headerHeight","length",48),jT=Yh("rowBorderWidth","border",1),P7=Yh("pinnedRowBorderWidth","border",1),lxe=Yh("headerRowBorderWidth","border",1);function cxe(t,e){for(const n of e.sort((i,r)=>i.moduleName.localeCompare(r.moduleName))){const i=n.css;i&&t.set(`module-${n.moduleName}`,i)}}var uxe=class extends y2e{initVariables(){this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.getSizeEl(M7),this.getSizeEl(_7),this.getSizeEl(jT),this.getSizeEl(P7),this.refreshRowBorderWidthVariable()}getPinnedRowBorderWidth(){return this.getCSSVariablePixelValue(P7)}getRowBorderWidth(){return this.getCSSVariablePixelValue(jT)}getHeaderRowBorderWidth(){return this.getCSSVariablePixelValue(lxe)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(M7)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(_7)}getDefaultCellHorizontalPadding(){return this.getCSSVariablePixelValue(sxe)}getCellPaddingLeft(){const t=this.getDefaultCellHorizontalPadding(),e=this.getCSSVariablePixelValue(axe),n=this.getCSSVariablePixelValue(oxe);return t-1+n*e}getCellPadding(){const t=this.getDefaultCellHorizontalPadding()-1;return this.getCellPaddingLeft()+t}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}refreshRowHeightVariable(){const{eRootDiv:t}=this,e=t.style.getPropertyValue("--ag-line-height").trim(),n=this.gos.get("rowHeight");if(n==null||isNaN(n)||!isFinite(n))return e!==null&&t.style.setProperty("--ag-line-height",null),-1;const i=`${n}px`;return e!=i?(t.style.setProperty("--ag-line-height",i),n):e!=""?Number.parseFloat(e):-1}fireStylesChangedEvent(t){t==="rowBorderWidth"&&this.refreshRowBorderWidthVariable(),super.fireStylesChangedEvent(t)}refreshRowBorderWidthVariable(){const t=this.getCSSVariablePixelValue(jT);this.eRootDiv.style.setProperty("--ag-internal-row-border-width",`${t}px`)}postProcessThemeChange(t,e){t&&getComputedStyle(this.getMeasurementContainer()).getPropertyValue("--ag-legacy-styles-loaded")&&sa(e?106:239)}getAdditionalCss(){const t=new Map;return t.set("core",[b2e]),cxe(t,Array.from(Xye())),t}getDefaultTheme(){return rxe}varError(t,e){Tt(9,{variable:{cssName:t,defaultValue:e}})}themeError(t){sa(240,{theme:t})}shadowRootError(){sa(293)}},hxe=class extends Ql{constructor(){super(...arguments),this.beanName="eventSvc",this.eventServiceType="global",this.globalSvc=new gC}addListener(t,e,n){this.globalSvc.addEventListener(t,e,n)}removeListener(t,e,n){this.globalSvc.removeEventListener(t,e,n)}addGlobalListener(t,e=!1){this.globalSvc.addGlobalListener(t,e)}removeGlobalListener(t,e=!1){this.globalSvc.removeGlobalListener(t,e)}dispatchEvent(t){this.globalSvc.dispatchEvent(this.gos.addCommon(t))}dispatchEventOnce(t){this.globalSvc.dispatchEventOnce(this.gos.addCommon(t))}},dxe=class extends hxe{postConstruct(){const{globalListener:t,globalSyncListener:e}=this.beans;t&&this.addGlobalListener(t,!0),e&&this.addGlobalListener(e,!1)}};function RU(t,e,n){const i=t.visibleCols.headerGroupRowCount;if(n>=i)return{column:e,headerRowIndex:n};let r=e.getParent();for(;r&&r.getProvidedColumnGroup().getLevel()>n;)r=r.getParent();const s=e.isSpanHeaderHeight();return!r||s&&r.isPadding()?{column:e,headerRowIndex:i}:{column:r,headerRowIndex:r.getProvidedColumnGroup().getLevel()}}var fxe=class extends He{constructor(){super(...arguments),this.beanName="headerNavigation",this.currentHeaderRowWithoutSpan=-1}postConstruct(){const t=this.beans;t.ctrlsSvc.whenReady(this,n=>{this.gridBodyCon=n.gridBodyCtrl});const e=lo(t);this.addManagedElementListeners(e,{mousedown:()=>{this.currentHeaderRowWithoutSpan=-1}})}getHeaderPositionForColumn(t,e){let n;const{colModel:i,colGroupSvc:r,ctrlsSvc:s}=this.beans;if(typeof t=="string"?(n=i.getCol(t),n||(n=r?.getColumnGroup(t)??null)):n=t,!n)return null;const o=s.getHeaderRowContainerCtrl()?.getAllCtrls(),l=On(o||[]).type==="filter",u=Vl(this.beans)-1;let h=-1,g=n;for(;g;)h++,g=g.getParent();let v=h;return e&&l&&v===u-1&&v++,v===-1?null:{headerRowIndex:v,column:n}}navigateVertically(t,e){const{focusSvc:n,visibleCols:i}=this.beans,{focusedHeader:r}=n;if(!r)return!1;const{headerRowIndex:s}=r,a=r.column,o=Vl(this.beans),l=this.getHeaderRowType(s),u=i.headerGroupRowCount;let{headerRowIndex:h,column:g,headerRowIndexWithoutSpan:v}=t==="UP"?gxe(l,a,s):pxe(a,s,u),y=!1;return h<0&&(h=0,g=a,y=!0),h>=o?(h=-1,this.currentHeaderRowWithoutSpan=-1):v!==void 0&&(this.currentHeaderRowWithoutSpan=v),!y&&!g?!1:n.focusHeaderPosition({headerPosition:{headerRowIndex:h,column:g},allowUserOverride:!0,event:e})}navigateHorizontally(t,e=!1,n){const{focusSvc:i,gos:r}=this.beans,s={...i.focusedHeader};let a,o;this.currentHeaderRowWithoutSpan!==-1?s.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=s.headerRowIndex,t==="LEFT"!==r.get("enableRtl")?(o="Before",a=this.findHeader(s,o)):(o="After",a=this.findHeader(s,o));const l=r.getCallback("tabToNextHeader");if(e&&l){const u=i.focusHeaderPositionFromUserFunc({userFunc:l,headerPosition:a,direction:o});if(u){const{headerRowIndex:h}=i.focusedHeader||{};h!=null&&h!=s.headerRowIndex&&(this.currentHeaderRowWithoutSpan=h)}return u}return a||!e?i.focusHeaderPosition({headerPosition:a,direction:o,fromTab:e,allowUserOverride:!0,event:n}):this.focusNextHeaderRow(s,o,n)}focusNextHeaderRow(t,e,n){const i=this.beans,r=t.headerRowIndex;let s=null,a;const o=Vl(i),l=this.beans.visibleCols.allCols;if(e==="Before"){if(r<=0)return!1;s=On(l),a=r-1,this.currentHeaderRowWithoutSpan-=1}else s=l[0],a=r+1,this.currentHeaderRowWithoutSpan<o?this.currentHeaderRowWithoutSpan+=1:this.currentHeaderRowWithoutSpan=-1;let{column:u,headerRowIndex:h}=RU(this.beans,s,a);return h>=o&&(h=-1),i.focusSvc.focusHeaderPosition({headerPosition:{column:u,headerRowIndex:h},direction:e,fromTab:!0,allowUserOverride:!0,event:n})}scrollToColumn(t,e="After"){if(t.getPinned())return;let n;if(zi(t)){const i=t.getDisplayedLeafColumns();n=e==="Before"?On(i):i[0]}else n=t;this.gridBodyCon.scrollFeature.ensureColumnVisible(n)}findHeader(t,e){const{colGroupSvc:n,visibleCols:i}=this.beans;let r=t.column;if(r instanceof Py){const l=r.getDisplayedLeafColumns();r=e==="Before"?l[0]:l[l.length-1]}const s=e==="Before"?i.getColBefore(r):i.getColAfter(r);if(!s)return;const a=i.headerGroupRowCount;if(t.headerRowIndex>=a)return{headerRowIndex:t.headerRowIndex,column:s};const o=n?.getColGroupAtLevel(s,t.headerRowIndex);return o?o.isPadding()&&s.isSpanHeaderHeight()?{headerRowIndex:i.headerGroupRowCount,column:s}:{headerRowIndex:t.headerRowIndex,column:o??s}:{headerRowIndex:s instanceof Sm&&s.isSpanHeaderHeight()?i.headerGroupRowCount:t.headerRowIndex,column:s}}getHeaderRowType(t){const e=this.beans.ctrlsSvc.getHeaderRowContainerCtrl();if(e)return e.getRowType(t)}};function gxe(t,e,n){const i=n-1;if(t!=="filter"){const r=e instanceof Sm&&e.isSpanHeaderHeight();let s=e.getParent();for(;s&&(s.getProvidedColumnGroup().getLevel()>i||r&&s.isPadding());)s=s.getParent();if(s)return r?{column:s,headerRowIndex:s.getProvidedColumnGroup().getLevel(),headerRowIndexWithoutSpan:i}:{column:s,headerRowIndex:i,headerRowIndexWithoutSpan:i}}return{column:e,headerRowIndex:i,headerRowIndexWithoutSpan:i}}function pxe(t,e,n){const i=e+1,r={column:t,headerRowIndex:i,headerRowIndexWithoutSpan:i};if(t instanceof Py){if(i>=n)return{column:t.getDisplayedLeafColumns()[0],headerRowIndex:n,headerRowIndexWithoutSpan:i};let a=t.getDisplayedChildren()[0];if(a instanceof Py&&a.isPadding()){const l=a.getDisplayedLeafColumns()[0];l.isSpanHeaderHeight()&&(a=l)}r.column=a,a instanceof Sm&&a.isSpanHeaderHeight()&&(r.headerRowIndex=n,r.headerRowIndexWithoutSpan=i)}return r}var mxe=class extends He{constructor(){super(...arguments),this.beanName="focusSvc",this.focusFallbackTimeout=null,this.needsFocusRestored=!1}wireBeans(t){this.colModel=t.colModel,this.visibleCols=t.visibleCols,this.rowRenderer=t.rowRenderer,this.navigation=t.navigation,this.filterManager=t.filterManager,this.overlays=t.overlays}postConstruct(){const t=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:t,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:t,columnRowGroupChanged:t}),this.addDestroyFunc(Lbe(this.beans))}attemptToRecoverFocus(){this.needsFocusRestored=!0,this.focusFallbackTimeout!=null&&clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=window.setTimeout(this.setFocusRecovered.bind(this),100)}setFocusRecovered(){this.needsFocusRestored=!1,this.focusFallbackTimeout!=null&&(clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=null)}shouldTakeFocus(){return this.gos.get("suppressFocusAfterRefresh")?(this.setFocusRecovered(),!1):this.needsFocusRestored?(this.setFocusRecovered(),!0):this.doesRowOrCellHaveBrowserFocus()}onColumnEverythingChanged(){if(!this.focusedCell)return;const t=this.focusedCell.column,e=this.colModel.getCol(t.getId());t!==e&&this.clearFocusedCell()}getFocusCellToUseAfterRefresh(){const{gos:t,focusedCell:e}=this;return t.get("suppressFocusAfterRefresh")||t.get("suppressCellFocus")||!e||!this.doesRowOrCellHaveBrowserFocus()?null:e}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeader||!this.isDomDataPresentInHierarchy(kr(this.beans),$V)?null:this.focusedHeader}doesRowOrCellHaveBrowserFocus(){const t=kr(this.beans);return this.isDomDataPresentInHierarchy(t,US,!0)?!0:this.isDomDataPresentInHierarchy(t,jS,!0)}isDomDataPresentInHierarchy(t,e,n){let i=t;for(;i;){const r=CV(this.gos,i,e);if(r)return r.destroyed&&n?(this.attemptToRecoverFocus(),!1):!0;i=i.parentNode}return!1}getFocusedCell(){return this.focusedCell}getFocusEventParams(t){const{rowIndex:e,rowPinned:n,column:i}=t,r={rowIndex:e,rowPinned:n,column:i,isFullWidthCell:!1},s=this.rowRenderer.getRowByPosition({rowIndex:e,rowPinned:n});return s&&(r.isFullWidthCell=s.isFullWidth()),r}clearFocusedCell(){if(this.focusedCell==null)return;const t=this.getFocusEventParams(this.focusedCell);this.focusedCell=null,this.eventSvc.dispatchEvent({type:"cellFocusCleared",...t})}setFocusedCell(t){this.setFocusRecovered();const{column:e,rowIndex:n,rowPinned:i,forceBrowserFocus:r=!1,preventScrollOnBrowserFocus:s=!1,sourceEvent:a}=t,o=this.colModel.getCol(e);if(!o){this.focusedCell=null;return}this.focusedCell={rowIndex:n,rowPinned:ff(i),column:o};const l=this.getFocusEventParams(this.focusedCell);this.eventSvc.dispatchEvent({type:"cellFocused",...l,...this.previousCellFocusParams&&{previousParams:this.previousCellFocusParams},forceBrowserFocus:r,preventScrollOnBrowserFocus:s,sourceEvent:a}),this.previousCellFocusParams=l}isCellFocused(t){return this.focusedCell==null?!1:VV(t,this.focusedCell)}isHeaderWrapperFocused(t){if(this.focusedHeader==null)return!1;const{column:e,rowCtrl:{rowIndex:n,pinned:i}}=t,{column:r,headerRowIndex:s}=this.focusedHeader;return e===r&&n===s&&i==r.getPinned()}focusHeaderPosition(t){if(this.setFocusRecovered(),pf(this.beans))return!1;const{direction:e,fromTab:n,allowUserOverride:i,event:r,fromCell:s,rowWithoutSpanValue:a,scroll:o=!0}=t;let{headerPosition:l}=t;if(s&&this.filterManager?.isAdvFilterHeaderActive())return this.focusAdvancedFilter(l);if(i){const u=this.focusedHeader,h=Vl(this.beans);if(n){const g=this.gos.getCallback("tabToNextHeader");g&&(l=this.getHeaderPositionFromUserFunc({userFunc:g,direction:e,currentPosition:u,headerPosition:l,headerRowCount:h}))}else{const g=this.gos.getCallback("navigateToNextHeader");if(g&&r){const v={key:r.key,previousHeaderPosition:u,nextHeaderPosition:l,headerRowCount:h,event:r};l=g(v)}}}return l?this.focusProvidedHeaderPosition({headerPosition:l,direction:e,event:r,fromCell:s,rowWithoutSpanValue:a,scroll:o}):!1}focusHeaderPositionFromUserFunc(t){if(pf(this.beans))return!1;const{userFunc:e,headerPosition:n,direction:i,event:r}=t,s=this.focusedHeader,a=Vl(this.beans),o=this.getHeaderPositionFromUserFunc({userFunc:e,direction:i,currentPosition:s,headerPosition:n,headerRowCount:a});return!!o&&this.focusProvidedHeaderPosition({headerPosition:o,direction:i,event:r})}getHeaderPositionFromUserFunc(t){const{userFunc:e,direction:n,currentPosition:i,headerPosition:r,headerRowCount:s}=t,o=e({backwards:n==="Before",previousHeaderPosition:i,nextHeaderPosition:r,headerRowCount:s});return o===!0?i:o===!1?null:o}focusProvidedHeaderPosition(t){const{headerPosition:e,direction:n,fromCell:i,rowWithoutSpanValue:r,event:s,scroll:a=!0}=t,{column:o,headerRowIndex:l}=e,{filterManager:u,ctrlsSvc:h,headerNavigation:g}=this.beans;if(this.focusedHeader&&Wbe(t.headerPosition,this.focusedHeader))return!1;if(l===-1)return u?.isAdvFilterHeaderActive()?this.focusAdvancedFilter(e):this.focusGridView({column:o,event:s});a&&g?.scrollToColumn(o,n);const y=h.getHeaderRowContainerCtrl(o.getPinned())?.focusHeader(e.headerRowIndex,o,s)||!1;return g&&y&&(r!=null||i)&&(g.currentHeaderRowWithoutSpan=r??-1),y}focusFirstHeader(){if(this.overlays?.exclusive&&this.focusOverlay())return!0;const t=this.visibleCols.allCols[0];if(!t)return!1;const e=RU(this.beans,t,0);return this.focusHeaderPosition({headerPosition:e,rowWithoutSpanValue:0})}focusLastHeader(t){if(this.overlays?.exclusive&&this.focusOverlay(!0))return!0;const e=Vl(this.beans)-1,n=On(this.visibleCols.allCols);return this.focusHeaderPosition({headerPosition:{headerRowIndex:e,column:n},rowWithoutSpanValue:-1,event:t})}focusPreviousFromFirstCell(t){return this.filterManager?.isAdvFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(t)}isAnyCellFocused(){return!!this.focusedCell}isRowFocused(t,e){return this.focusedCell==null?!1:this.focusedCell.rowIndex===t&&this.focusedCell.rowPinned===ff(e)}focusOverlay(t){const e=this.overlays?.isVisible()&&this.overlays.eWrapper?.getGui();return!!e&&GS(e,t)}focusGridView(t){const{backwards:e=!1,canFocusOverlay:n=!0,event:i}=t;if(this.overlays?.exclusive)return n&&this.focusOverlay(e);if(a5(this.beans))return e&&!pf(this.beans)?this.focusLastHeader():n&&this.focusOverlay(e)?!0:e?!1:Oy(this.beans,e);const r=e?Ibe(this.beans):Bbe(this.beans);if(r){const s=t.column??this.focusedHeader?.column,{rowIndex:a,rowPinned:o}=r,l=UV(this.beans,r);if(!s||!l||a==null)return!1;if(s.isSuppressNavigable(l)){const u=this.gos.get("enableRtl");let h;return!i||i.key===Le.TAB?h=u?Le.LEFT:Le.RIGHT:h=i.key,this.beans.navigation?.navigateToNextCell(null,h,{rowIndex:a,column:s,rowPinned:o||null},!0),!0}return this.navigation?.ensureCellVisible({rowIndex:a,column:s,rowPinned:o}),e&&this.rowRenderer.getRowByPosition(r)?.isFullWidth()&&this.navigation?.tryToFocusFullWidthRow(r,e)||(this.setFocusedCell({rowIndex:a,column:s,rowPinned:ff(o),forceBrowserFocus:!0}),this.beans.rangeSvc?.setRangeToCell({rowIndex:a,rowPinned:o,column:s})),!0}return!!(n&&this.focusOverlay(e)||e&&this.focusLastHeader())}focusAdvancedFilter(t){return this.advFilterFocusColumn=t?.column,this.beans.advancedFilter?.getCtrl().focusHeaderComp()??!1}focusNextFromAdvancedFilter(t,e){const n=(e?void 0:this.advFilterFocusColumn)??this.visibleCols.allCols?.[0];return t?this.focusHeaderPosition({headerPosition:{column:n,headerRowIndex:Vl(this.beans)-1}}):this.focusGridView({column:n})}clearAdvancedFilterColumn(){this.advFilterFocusColumn=void 0}},vxe=class extends He{constructor(){super(...arguments),this.beanName="scrollVisibleSvc"}wireBeans(t){this.ctrlsSvc=t.ctrlsSvc,this.colAnimation=t.colAnimation}postConstruct(){const{gos:t}=this;this.horizontalScrollShowing=t.get("alwaysShowHorizontalScroll")===!0,this.verticalScrollShowing=t.get("alwaysShowVerticalScroll")===!0,this.getScrollbarWidth();const e=this.updateScrollVisible.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,newColumnsLoaded:e})}updateScrollVisible(){const{colAnimation:t}=this;t?.isActive()?t.executeLaterVMTurn(()=>{t.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){const t=this.ctrlsSvc.get("center");if(!t||this.colAnimation?.isActive())return;const e={horizontalScrollShowing:t.isHorizontalScrollShowing(),verticalScrollShowing:this.verticalScrollShowing};this.setScrollsVisible(e),this.updateScrollGap()}updateScrollGap(){const t=this.ctrlsSvc.get("center"),e=t.hasHorizontalScrollGap(),n=t.hasVerticalScrollGap();(this.horizontalScrollGap!==e||this.verticalScrollGap!==n)&&(this.horizontalScrollGap=e,this.verticalScrollGap=n,this.eventSvc.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(t){(this.horizontalScrollShowing!==t.horizontalScrollShowing||this.verticalScrollShowing!==t.verticalScrollShowing)&&(this.horizontalScrollShowing=t.horizontalScrollShowing,this.verticalScrollShowing=t.verticalScrollShowing,this.eventSvc.dispatchEvent({type:"scrollVisibilityChanged"}))}getScrollbarWidth(){if(this.scrollbarWidth==null){const t=this.gos.get("scrollbarWidth"),n=typeof t=="number"&&t>=0?t:r5();n!=null&&(this.scrollbarWidth=n,this.eventSvc.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},yxe=class extends He{constructor(){super(...arguments),this.beanName="gridDestroySvc",this.destroyCalled=!1}destroy(){if(this.destroyCalled)return;const{stateSvc:t,ctrlsSvc:e,context:n}=this.beans;this.eventSvc.dispatchEvent({type:"gridPreDestroyed",state:t?.getState()??{}}),this.destroyCalled=!0,e.get("gridCtrl")?.destroyGridUi(),n.destroy(),super.destroy()}},Cxe=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","pinnedRowsChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterUiChanged","filterOpened","floatingFilterUiChanged","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel","findChanged","rowResizeStarted","rowResizeEnded","columnsReset","bulkEditingStarted","bulkEditingStopped","batchEditingStarted","batchEditingStopped"],bxe=new Set(["gridPreDestroyed","fillStart","pasteStart"]),DU=Cxe.reduce((t,e)=>(t[e]=pCe(e),t),{}),WT={agSetColumnFilter:"SetFilter",agSetColumnFloatingFilter:"SetFilter",agMultiColumnFilter:"MultiFilter",agMultiColumnFloatingFilter:"MultiFilter",agGroupColumnFilter:"GroupFilter",agGroupColumnFloatingFilter:"GroupFilter",agGroupCellRenderer:"GroupCellRenderer",agGroupRowRenderer:"GroupCellRenderer",agRichSelect:"RichSelect",agRichSelectCellEditor:"RichSelect",agDetailCellRenderer:"SharedMasterDetail",agSparklineCellRenderer:"Sparklines",agDragAndDropImage:"SharedDragAndDrop",agColumnHeader:"ColumnHeaderComp",agColumnGroupHeader:"ColumnGroupHeaderComp",agSortIndicator:"Sort",agAnimateShowChangeCellRenderer:"HighlightChanges",agAnimateSlideCellRenderer:"HighlightChanges",agLoadingCellRenderer:"LoadingCellRenderer",agSkeletonCellRenderer:"SkeletonCellRenderer",agCheckboxCellRenderer:"CheckboxCellRenderer",agLoadingOverlay:"Overlay",agExportingOverlay:"Overlay",agNoRowsOverlay:"Overlay",agNoMatchingRowsOverlay:"Overlay",agTooltipComponent:"Tooltip",agReadOnlyFloatingFilter:"CustomFilter",agTextColumnFilter:"TextFilter",agNumberColumnFilter:"NumberFilter",agBigIntColumnFilter:"BigIntFilter",agDateColumnFilter:"DateFilter",agDateInput:"DateFilter",agTextColumnFloatingFilter:"TextFilter",agNumberColumnFloatingFilter:"NumberFilter",agBigIntColumnFloatingFilter:"BigIntFilter",agDateColumnFloatingFilter:"DateFilter",agFormulaCellEditor:"Formula",agCellEditor:"TextEditor",agSelectCellEditor:"SelectEditor",agTextCellEditor:"TextEditor",agNumberCellEditor:"NumberEditor",agDateCellEditor:"DateEditor",agDateStringCellEditor:"DateEditor",agCheckboxCellEditor:"CheckboxEditor",agLargeTextCellEditor:"LargeTextEditor",agMenuItem:"MenuItem",agColumnsToolPanel:"ColumnsToolPanel",agFiltersToolPanel:"FiltersToolPanel",agNewFiltersToolPanel:"NewFiltersToolPanel",agAggregationComponent:"StatusBar",agSelectedRowCountComponent:"StatusBar",agTotalRowCountComponent:"StatusBar",agFilteredRowCountComponent:"StatusBar",agTotalAndFilteredRowCountComponent:"StatusBar",agFindCellRenderer:"Find"},wxe={allowFormula:"Formula",aggFunc:"SharedAggregation",autoHeight:"RowAutoHeight",cellClass:"CellStyle",cellClassRules:"CellStyle",cellEditor:({cellEditor:t,editable:e,...n})=>{const i=n.groupRowEditable;return!!e||!!i?typeof t=="string"?WT[t]??"CustomEditor":"CustomEditor":null},cellRenderer:({cellRenderer:t})=>typeof t!="string"?null:WT[t],cellStyle:"CellStyle",columnChooserParams:"ColumnMenu",contextMenuItems:"ContextMenu",dndSource:"DragAndDrop",dndSourceOnRowDrag:"DragAndDrop",editable:({editable:t,cellEditor:e})=>t&&!e?"TextEditor":null,enableCellChangeFlash:"HighlightChanges",enablePivot:"SharedPivot",enableRowGroup:"SharedRowGrouping",enableValue:"SharedAggregation",filter:({filter:t})=>t&&typeof t!="string"&&typeof t!="boolean"?"CustomFilter":typeof t=="string"?WT[t]??"ColumnFilter":"ColumnFilter",floatingFilter:"ColumnFilter",getQuickFilterText:"QuickFilter",headerTooltip:"Tooltip",headerTooltipValueGetter:"Tooltip",mainMenuItems:"ColumnMenu",menuTabs:t=>{const e=["columnsMenuTab","generalMenuTab"];return t.menuTabs?.some(n=>e.includes(n))?"ColumnMenu":null},pivot:"SharedPivot",pivotIndex:"SharedPivot",rowDrag:"RowDrag",rowGroup:"SharedRowGrouping",rowGroupIndex:"SharedRowGrouping",tooltipField:"Tooltip",tooltipValueGetter:"Tooltip",tooltipComponentSelector:"Tooltip",spanRows:"CellSpan",groupHierarchy:"SharedRowGrouping"},Sxe={alignedGrids:"AlignedGrids",allowContextMenuWithControlKey:"ContextMenu",autoSizeStrategy:"ColumnAutoSize",cellSelection:"CellSelection",columnHoverHighlight:"ColumnHover",datasource:"InfiniteRowModel",doesExternalFilterPass:"ExternalFilter",editType:"EditCore",invalidEditValueMode:"EditCore",enableAdvancedFilter:"AdvancedFilter",enableCellSpan:"CellSpan",enableCharts:"IntegratedCharts",enableRangeSelection:"CellSelection",enableRowPinning:"PinnedRow",findSearchValue:"Find",getFullRowEditValidationErrors:"EditCore",getContextMenuItems:"ContextMenu",getLocaleText:"Locale",getMainMenuItems:"ColumnMenu",getRowClass:"RowStyle",getRowStyle:"RowStyle",groupTotalRow:"SharedRowGrouping",grandTotalRow:"ClientSideRowModelHierarchy",initialState:"GridState",isExternalFilterPresent:"ExternalFilter",isRowPinnable:"PinnedRow",isRowPinned:"PinnedRow",localeText:"Locale",masterDetail:"SharedMasterDetail",pagination:"Pagination",pinnedBottomRowData:"PinnedRow",pinnedTopRowData:"PinnedRow",pivotMode:"SharedPivot",pivotPanelShow:"RowGroupingPanel",quickFilterText:"QuickFilter",rowClass:"RowStyle",rowClassRules:"RowStyle",rowData:"ClientSideRowModel",rowDragManaged:"RowDrag",refreshAfterGroupEdit:["RowGrouping","TreeData"],rowGroupPanelShow:"RowGroupingPanel",rowNumbers:"RowNumbers",rowSelection:"SharedRowSelection",rowStyle:"RowStyle",serverSideDatasource:"ServerSideRowModel",sideBar:"SideBar",statusBar:"StatusBar",treeData:"SharedTreeData",undoRedoCellEditing:"UndoRedoEdit",valueCache:"ValueCache",viewportDatasource:"ViewportRowModel"},xxe=0,Axe=0,O7="__ag_grid_instance",Exe=class extends He{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.instanceId=Axe++,this.gridReadyFired=!1,this.queueEvents=[],this.propEventSvc=new gC,this.globalEventHandlerFactory=t=>(e,n)=>{if(!this.isAlive())return;const i=bxe.has(e);if(i&&!t||!i&&t||!Txe(e))return;const r=(s,a)=>{const o=DU[s],l=this.gridOptions[o];typeof l=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>l(a))};if(this.gridReadyFired)r(e,n);else if(e==="gridReady"){r(e,n),this.gridReadyFired=!0;for(const s of this.queueEvents)r(s.eventName,s.event);this.queueEvents=[]}else this.queueEvents.push({eventName:e,event:n})}}wireBeans(t){this.gridOptions=t.gridOptions,this.validation=t.validation,this.api=t.gridApi,this.gridId=t.context.getId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){this.validateGridOptions(this.gridOptions),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory().bind(this),!0),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propEventSvc.setFrameworkOverrides(this.beans.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:t})=>{this.updateGridOptions({options:t,force:!0,source:"optionsUpdated"})}})}destroy(){super.destroy(),this.queueEvents=[]}get(t){return this.gridOptions[t]??iV[t]}getCallback(t){return this.mergeGridCommonParams(this.gridOptions[t])}exists(t){return Et(this.gridOptions[t])}mergeGridCommonParams(t){return t&&(n=>t(this.addCommon(n)))}updateGridOptions({options:t,force:e,source:n="api"}){const i={id:xxe++,properties:[]},r=[],{gridOptions:s,validation:a}=this;for(const o of Object.keys(t)){const l=Q3.applyGlobalGridOption(o,t[o]);a?.warnOnInitialPropertyUpdate(n,o);const u=e||typeof l=="object"&&n==="api",h=s[o];if(u||h!==l){s[o]=l;const g={type:o,currentValue:l,previousValue:h,changeSet:i,source:n};r.push(g)}}this.validateGridOptions(this.gridOptions),i.properties=r.map(o=>o.type);for(const o of r)LS(this,`Updated property ${o.type} from`,o.previousValue," to ",o.currentValue),this.propEventSvc.dispatchEvent(o)}addPropertyEventListener(t,e){this.propEventSvc.addEventListener(t,e)}removePropertyEventListener(t,e){this.propEventSvc.removeEventListener(t,e)}getDomDataKey(){return this.domDataKey}addCommon(t){return t.api=this.api,t.context=this.gridOptionsContext,t}validateOptions(t,e){for(const n of Object.keys(t)){const i=t[n];if(i==null||i===!1)continue;let r=e[n];typeof r=="function"&&(r=r(t,this.gridOptions,this.beans)),r&&this.assertModuleRegistered(r,n)}}validateGridOptions(t){this.validateOptions(t,Sxe),this.validation?.processGridOptions(t)}validateColDef(t,e,n){(n||!this.beans.dataTypeSvc?.isColPendingInference(e))&&(this.validateOptions(t,wxe),this.validation?.validateColDef(t))}assertModuleRegistered(t,e){const n=Array.isArray(t)?t.some(i=>this.isModuleRegistered(i)):this.isModuleRegistered(t);return n||sa(200,{...this.getModuleErrorParams(),moduleName:t,reasonOrId:e}),n}getModuleErrorParams(){return{gridId:this.gridId,gridScoped:lV(),rowModelType:this.get("rowModelType"),isUmd:cV()}}isModuleRegistered(t){return HD(t,this.gridId,this.get("rowModelType"))}setInstanceDomData(t){t[O7]=this.instanceId}isElementInThisInstance(t){let e=t;for(;e;){const n=e[O7];if(Et(n))return n===this.instanceId;e=e.parentElement}return!1}};function Txe(t){return!!DU[t]}var Rxe=class extends He{constructor(t,e){super(),this.column=t,this.eGui=e,this.lastMovingChanged=0}postConstruct(){this.addManagedElementListeners(this.eGui,{click:t=>t&&this.onClick(t)}),this.addManagedListeners(this.column,{movingChanged:()=>{this.lastMovingChanged=Date.now()}})}onClick(t){const{sortSvc:e,rangeSvc:n,gos:i}=this.beans;if(!(Vp(i)?t.altKey:!0))n?.handleColumnSelection(this.column,t);else if(this.column.isSortable()){const s=this.column.isMoving(),o=Date.now()-this.lastMovingChanged<50;s||o||e?.progressSortFromEvent(this.column,t)}}};function Dxe(t,e){const n={"aria-hidden":"true"};return{tag:"div",cls:"ag-cell-label-container",role:"presentation",children:[{tag:"span",ref:"eMenu",cls:"ag-header-icon ag-header-cell-menu-button",attrs:n},{tag:"span",ref:"eFilterButton",cls:"ag-header-icon ag-header-cell-filter-button",attrs:n},{tag:"div",ref:"eLabel",cls:"ag-header-cell-label",role:"presentation",children:[t?{tag:"span",ref:"eColRef",cls:"ag-header-col-ref"}:null,{tag:"span",ref:"eText",cls:"ag-header-cell-text"},{tag:"span",ref:"eFilter",cls:"ag-header-icon ag-header-label-icon ag-filter-icon",attrs:n},e?{tag:"ag-sort-indicator",ref:"eSortIndicator"}:null]}]}}var Mxe=class extends fu{constructor(){super(...arguments),this.eFilter=bt,this.eFilterButton=bt,this.eSortIndicator=bt,this.eMenu=bt,this.eLabel=bt,this.eText=bt,this.eColRef=bt,this.eSortOrder=bt,this.eSortAsc=bt,this.eSortDesc=bt,this.eSortMixed=bt,this.eSortNone=bt,this.eSortAbsoluteAsc=bt,this.eSortAbsoluteDesc=bt,this.isLoadingInnerComponent=!1}refresh(t){const e=this.params;if(this.params=t,this.workOutTemplate(t,!!this.beans?.sortSvc)!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||t.enableSorting!=this.currentSort||t.column.formulaRef!=this.currentRef||this.currentSuppressMenuHide!=null&&this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||e.enableFilterButton!=t.enableFilterButton||e.enableFilterIcon!=t.enableFilterIcon)return!1;if(this.innerHeaderComponent){const n={...t};ca(n,t.innerHeaderComponentParams),this.innerHeaderComponent.refresh?.(n)}else this.setDisplayName(t);return!0}workOutTemplate(t,e){const{formula:n}=this.beans,i=t.template;return i?i?.trim?i.trim():i:Dxe(!!n?.active,e)}init(t){this.params=t;const{sortSvc:e,touchSvc:n,rowNumbersSvc:i,userCompFactory:r}=this.beans,s=e?.getSortIndicatorSelector();this.currentTemplate=this.workOutTemplate(t,!!s),this.setTemplate(this.currentTemplate,s?[s]:void 0),this.eLabel&&(this.mouseListener??(this.mouseListener=this.createManagedBean(new Rxe(t.column,this.eLabel)))),n?.setupForHeader(this),this.setMenu(),this.setupSort(),this.setupColumnRefIndicator(),i?.setupForHeader(this),this.setupFilterIcon(),this.setupFilterButton(),this.workOutInnerHeaderComponent(r,t),this.setDisplayName(t)}workOutInnerHeaderComponent(t,e){const n=Sbe(t,e,e);n&&(this.isLoadingInnerComponent=!0,n.newAgStackInstance().then(i=>{this.isLoadingInnerComponent=!1,i&&(this.isAlive()?(this.innerHeaderComponent=i,this.eText&&this.eText.appendChild(i.getGui())):this.destroyBean(i))}))}setDisplayName(t){const{displayName:e}=t,n=this.currentDisplayName;this.currentDisplayName=e,!(!this.eText||n===e||this.innerHeaderComponent||this.isLoadingInnerComponent)&&(this.eText.textContent=ax(e))}addInIcon(t,e,n){const i=Vf(t,this.beans,n);i&&e.appendChild(i)}workOutShowMenu(){return this.params.enableMenu&&!!this.beans.menuSvc?.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return!!this.beans.menuSvc?.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){FD(this.eMenu),this.eMenu=void 0;return}const{gos:t,eMenu:e,params:n}=this,i=kS(t);this.addInIcon(i?"menu":"menuAlt",e,n.column),e.classList.toggle("ag-header-menu-icon",!i);const r=this.shouldSuppressMenuHide();this.currentSuppressMenuHide=r,this.addManagedElementListeners(e,{click:()=>this.showColumnMenu(this.eMenu)}),this.toggleMenuAlwaysShow(r)}toggleMenuAlwaysShow(t){this.eMenu?.classList.toggle("ag-header-menu-always-show",t)}showColumnMenu(t){const{currentSuppressMenuHide:e,params:n}=this;e||this.toggleMenuAlwaysShow(!0),n.showColumnMenu(t,()=>{e||this.toggleMenuAlwaysShow(!1)})}onMenuKeyboardShortcut(t){const{params:e,gos:n,beans:i,eMenu:r,eFilterButton:s}=this,a=e.column,o=kS(n);if(t&&!o){if(i.menuSvc?.isFilterMenuInHeaderEnabled(a))return e.showFilter(s??r??this.getGui()),!0}else if(e.enableMenu)return this.showColumnMenu(r??s??this.getGui()),!0;return!1}setupSort(){const{sortSvc:t}=this.beans;if(!t)return;const{enableSorting:e,column:n}=this.params;if(this.currentSort=e,!this.eSortIndicator){this.eSortIndicator=this.createBean(t.createSortIndicator(!0));const{eSortIndicator:i,eSortOrder:r,eSortAsc:s,eSortDesc:a,eSortMixed:o,eSortNone:l,eSortAbsoluteAsc:u,eSortAbsoluteDesc:h}=this;i.attachCustomElements(r,s,a,o,l,u,h)}this.eSortIndicator.setupSort(n),this.currentSort&&t.setupHeader(this,n)}setupColumnRefIndicator(){const{eColRef:t,beans:{editModelSvc:e},params:n}=this;t&&(this.currentRef=n.column.formulaRef,t.textContent=this.currentRef,li(t,!1),this.addManagedEventListeners({cellEditingStarted:()=>{const i=e?.getEditPositions(),r=!!this.currentRef&&!!i?.some(s=>s.column.isAllowFormula());li(t,r)},cellEditingStopped:()=>{li(t,!1)}}))}setupFilterIcon(){const{eFilter:t,params:e}=this;if(!t)return;const n=()=>{const i=e.column.isFilterActive();li(t,i,{skipAriaHidden:!0})};this.configureFilter(e.enableFilterIcon,t,n,"filterActive")}setupFilterButton(){const{eFilterButton:t,params:e}=this;if(!t)return;this.configureFilter(e.enableFilterButton,t,this.onFilterChangedButton.bind(this),"filter")?this.addManagedElementListeners(t,{click:()=>e.showFilter(t)}):this.eFilterButton=void 0}configureFilter(t,e,n,i){if(!t)return FD(e),!1;const r=this.params.column;return this.addInIcon(i,e,r),this.addManagedListeners(r,{filterChanged:n}),n(),!0}onFilterChangedButton(){const t=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",t)}getAnchorElementForMenu(t){const{eFilterButton:e,eMenu:n}=this;return t?e??n??this.getGui():n??e??this.getGui()}destroy(){super.destroy(),this.innerHeaderComponent=this.destroyBean(this.innerHeaderComponent),this.mouseListener=this.destroyBean(this.mouseListener)}},_xe=class extends He{constructor(t,e){super(),this.eLabel=t,this.columnGroup=e,this.isSticky=!1,this.left=null,this.right=null}postConstruct(){const{columnGroup:t,beans:e}=this,{ctrlsSvc:n}=e;n.whenReady(this,()=>{const i=this.refreshPosition.bind(this);t.getPinned()==null&&this.addManagedEventListeners({bodyScroll:r=>{r.direction==="horizontal"&&this.updateSticky(r.left)}}),this.addManagedListeners(t,{leftChanged:i,displayedChildrenChanged:i}),this.addManagedEventListeners({columnResized:i}),this.refreshPosition()})}refreshPosition(){const{columnGroup:t,beans:e}=this,n=t.getLeft(),i=t.getActualWidth();if(n==null||i===0){this.left=null,this.right=null,this.setSticky(!1);return}this.left=n,this.right=n+i;const r=e.colViewport.getScrollPosition();r!=null&&this.updateSticky(r)}updateSticky(t){const{beans:e,left:n,right:i}=this;if(n==null||i==null){this.setSticky(!1);return}const{gos:r,visibleCols:s}=e,o=r.get("enableRtl")?s.bodyWidth-t:t;this.setSticky(n<o&&i>o)}setSticky(t){const{isSticky:e,eLabel:n}=this;e!==t&&(this.isSticky=t,n.classList.toggle("ag-sticky-label",t))}},Pxe={tag:"div",cls:"ag-header-group-cell-label",role:"presentation",children:[{tag:"span",ref:"agLabel",cls:"ag-header-group-text",role:"presentation"},{tag:"span",ref:"agOpened",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"},{tag:"span",ref:"agClosed",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"}]},Oxe=class extends fu{constructor(){super(Pxe),this.agOpened=bt,this.agClosed=bt,this.agLabel=bt,this.isLoadingInnerComponent=!1}init(t){const{userCompFactory:e,touchSvc:n}=this.beans;this.params=t,this.checkWarnings(),this.workOutInnerHeaderGroupComponent(e,t),this.setupLabel(t),this.addGroupExpandIcon(t),this.setupExpandIcons(),n?.setupForHeaderGroup(this)}checkWarnings(){this.params.template&&Tt(89)}workOutInnerHeaderGroupComponent(t,e){const n=Abe(t,e,e);n&&(this.isLoadingInnerComponent=!0,n.newAgStackInstance().then(i=>{this.isLoadingInnerComponent=!1,i&&(this.isAlive()?(this.innerHeaderGroupComponent=i,this.agLabel.appendChild(i.getGui())):this.destroyBean(i))}))}setupExpandIcons(){const{agOpened:t,agClosed:e,params:{columnGroup:n},beans:{colGroupSvc:i}}=this;this.addInIcon("columnGroupOpened",t),this.addInIcon("columnGroupClosed",e);const r=l=>{if(Rh(l))return;const u=!n.isExpanded();i.setColumnGroupOpened(n.getProvidedColumnGroup(),u,"uiColumnExpanded")};this.addTouchAndClickListeners(e,r),this.addTouchAndClickListeners(t,r);const s=l=>{zS(l)};this.addManagedElementListeners(e,{dblclick:s}),this.addManagedElementListeners(t,{dblclick:s}),this.addManagedElementListeners(this.getGui(),{dblclick:r}),this.updateIconVisibility();const a=n.getProvidedColumnGroup(),o=this.updateIconVisibility.bind(this);this.addManagedListeners(a,{expandedChanged:o,expandableChanged:o})}addTouchAndClickListeners(t,e){this.beans.touchSvc?.setupForHeaderGroupElement(this,t,e),this.addManagedElementListeners(t,{click:e})}updateIconVisibility(){const{agOpened:t,agClosed:e,params:{columnGroup:n}}=this;if(n.isExpandable()){const i=n.isExpanded();li(t,i),li(e,!i)}else li(t,!1),li(e,!1)}addInIcon(t,e){const n=Vf(t,this.beans,null);n&&e.appendChild(n)}addGroupExpandIcon(t){if(!t.columnGroup.isExpandable()){const{agOpened:e,agClosed:n}=this;li(e,!1),li(n,!1)}}setupLabel(t){const{displayName:e,columnGroup:n}=t,{innerHeaderGroupComponent:i,isLoadingInnerComponent:r}=this,s=i||r;Et(e)&&!s&&(this.agLabel.textContent=ax(e)),n.getColGroupDef()?.suppressStickyLabel||this.createManagedBean(new _xe(this.getGui(),n))}destroy(){super.destroy(),this.innerHeaderGroupComponent&&(this.destroyBean(this.innerHeaderGroupComponent),this.innerHeaderGroupComponent=void 0)}},Lxe={moduleName:"ColumnHeaderComp",version:kn,userComponents:{agColumnHeader:Mxe},icons:{menu:"menu",menuAlt:"menu-alt"}},Fxe={moduleName:"ColumnGroupHeaderComp",version:kn,userComponents:{agColumnGroupHeader:Oxe},icons:{columnGroupOpened:"expanded",columnGroupClosed:"contracted"}},kxe=class extends He{constructor(){super(...arguments),this.beanName="animationFrameSvc",this.p1={list:[],sorted:!1},this.p2={list:[],sorted:!1},this.f1={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastScrollTop=0,this.taskCount=0}setScrollTop(t){this.scrollGoingDown=t>=this.lastScrollTop,t===0&&(this.scrollGoingDown=!0),this.lastScrollTop=t}postConstruct(){this.active=!this.gos.get("suppressAnimationFrame"),this.batchFrameworkComps=this.beans.frameworkOverrides.batchFrameworkComps}verify(){this.active===!1&&Tt(92)}createTask(t,e,n,i,r=!1){this.verify();let s=n;i&&this.batchFrameworkComps&&(s="f1");const a={task:t,index:e,createOrder:++this.taskCount,deferred:r};this.addTaskToList(this[s],a),this.schedule()}addTaskToList(t,e){t.list.push(e),t.sorted=!1}sortTaskList(t){if(t.sorted)return;const e=this.scrollGoingDown?1:-1;t.list.sort((n,i)=>n.deferred!==i.deferred?n.deferred?-1:1:n.index!==i.index?e*(i.index-n.index):i.createOrder-n.createOrder),t.sorted=!0}addDestroyTask(t){this.verify(),this.destroyTasks.push(t),this.schedule()}executeFrame(t){const{p1:e,p2:n,f1:i,destroyTasks:r,beans:s}=this,{ctrlsSvc:a,frameworkOverrides:o}=s,l=e.list,u=n.list,h=i.list,g=Date.now();let v=0;const y=t<=0,w=a.getScrollFeature();for(;y||v<t;){if(!w.scrollGridIfNeeded()){let x;if(l.length)this.sortTaskList(e),x=l.pop().task;else if(u.length)this.sortTaskList(n),x=u.pop().task;else if(h.length)o.wrapOutgoing(()=>{for(;(y||v<t)&&!w.scrollGridIfNeeded();){if(h.length)this.sortTaskList(i),x=h.pop().task,x();else break;v=Date.now()-g}}),x=()=>{};else if(r.length)x=r.pop();else break;x()}v=Date.now()-g}l.length||u.length||h.length||r.length?this.requestFrame():this.ticking=!1}flushAllFrames(){this.active&&this.executeFrame(-1)}schedule(){this.active&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const t=this.executeFrame.bind(this,60);Kh(this.beans,t)}isQueueEmpty(){return!this.ticking}},Nxe={moduleName:"AnimationFrame",version:kn,beans:[kxe]},Bxe=class extends He{constructor(){super(...arguments),this.beanName="iconSvc"}createIconNoSpan(t,e){return Vf(t,this.beans,e?.column)}},Ixe=class extends He{constructor(){super(...arguments),this.beanName="touchSvc"}mockBodyContextMenu(t,e){this.mockContextMenu(t,t.eBodyViewport,e)}mockHeaderContextMenu(t,e){this.mockContextMenu(t,t.eGui,e)}mockRowContextMenu(t){if(!ey())return;const e=(n,i,r)=>{const{rowCtrl:s,cellCtrl:a}=t.getControlsForEventTarget(r?.target??null);a?.column&&a.dispatchCellContextMenuEvent(r??null),this.beans.contextMenuSvc?.handleContextMenuMouseEvent(void 0,r,s,a)};this.mockContextMenu(t,t.element,e)}handleCellDoubleClick(t,e){return(()=>{if(!ey()||kD("dblclick"))return!1;const i=Date.now(),r=i-t.lastIPadMouseClickEvent<200;return t.lastIPadMouseClickEvent=i,r})()?(t.onCellDoubleClicked(e),e.preventDefault(),!0):!1}setupForHeader(t){const{gos:e,sortSvc:n,menuSvc:i}=this.beans;if(e.get("suppressTouch"))return;const{params:r,eMenu:s,eFilterButton:a}=t,o=new fp(t.getGui(),!0);t.addDestroyFunc(()=>o.destroy());const l=t.shouldSuppressMenuHide(),u=l&&Et(s)&&r.enableMenu;let h=o;if(u&&(h=new fp(s,!0),t.addDestroyFunc(()=>h.destroy())),r.enableMenu||i?.isHeaderContextMenuEnabled(r.column)){const g=u?"tap":"longTap",v=y=>r.showColumnMenuAfterMouseClick(y.touchStart);t.addManagedListeners(h,{[g]:v}),t.addManagedListeners(o,{longTap:v})}if(r.enableSorting){const g=v=>{const y=v.touchStart.target;l&&(s?.contains(y)||a?.contains(y))||n?.progressSort(r.column,!1,"uiColumnSorted")};t.addManagedListeners(o,{tap:g})}if(r.enableFilterButton&&a){const g=new fp(a,!0);t.addManagedListeners(g,{tap:()=>r.showFilter(a)}),t.addDestroyFunc(()=>g.destroy())}}setupForHeaderGroup(t){const e=t.params;if(this.beans.menuSvc?.isHeaderContextMenuEnabled(e.columnGroup.getProvidedColumnGroup())){const n=new fp(e.eGridHeader,!0),i=r=>e.showColumnMenuAfterMouseClick(r.touchStart);t.addManagedListeners(n,{longTap:i}),t.addDestroyFunc(()=>n.destroy())}}setupForHeaderGroupElement(t,e,n){const i=new fp(e,!0);t.addManagedListeners(i,{tap:n}),t.addDestroyFunc(()=>i.destroy())}mockContextMenu(t,e,n){if(!ey())return;const i=new fp(e),r=s=>{Dy(this.beans,s.touchEvent)&&n(void 0,s.touchStart,s.touchEvent)};t.addManagedListeners(i,{longTap:r}),t.addDestroyFunc(()=>i.destroy())}},Hxe={moduleName:"Touch",version:kn,beans:[Ixe]},Gxe=class extends He{constructor(){super(...arguments),this.beanName="cellNavigation"}wireBeans(t){this.rowSpanSvc=t.rowSpanSvc}getNextCellToFocus(t,e,n=!1){return n?this.getNextCellToFocusWithCtrlPressed(t,e):this.getNextCellToFocusWithoutCtrlPressed(t,e)}getNextCellToFocusWithCtrlPressed(t,e){const n=t===Le.UP,i=t===Le.DOWN,r=t===Le.LEFT;let s,a;const{pageBounds:o,gos:l,visibleCols:u,pinnedRowModel:h}=this.beans,{rowPinned:g}=e;if(n||i)g&&h?n?a=0:a=g==="top"?h.getPinnedTopRowCount()-1:h.getPinnedBottomRowCount()-1:a=n?o.getFirstRow():o.getLastRow(),s=e.column;else{const v=l.get("enableRtl");a=e.rowIndex,s=(r!==v?u.allCols:[...u.allCols].reverse()).find(w=>this.isCellGoodToFocusOn({rowIndex:a,rowPinned:null,column:w}))}return s?{rowIndex:a,rowPinned:g,column:s}:null}getNextCellToFocusWithoutCtrlPressed(t,e){let n=e,i=!1;for(;!i;){switch(t){case Le.UP:n=this.getCellAbove(n);break;case Le.DOWN:n=this.getCellBelow(n);break;case Le.RIGHT:n=this.gos.get("enableRtl")?this.getCellToLeft(n):this.getCellToRight(n);break;case Le.LEFT:n=this.gos.get("enableRtl")?this.getCellToRight(n):this.getCellToLeft(n);break;default:n=null,Tt(8,{key:t});break}n?i=this.isCellGoodToFocusOn(n):i=!0}return n}isCellGoodToFocusOn(t){const e=t.column;let n;const{pinnedRowModel:i,rowModel:r}=this.beans;switch(t.rowPinned){case"top":n=i?.getPinnedTopRow(t.rowIndex);break;case"bottom":n=i?.getPinnedBottomRow(t.rowIndex);break;default:n=r.getRow(t.rowIndex);break}return n?!this.isSuppressNavigable(e,n):!1}getCellToLeft(t){if(!t)return null;const e=this.beans.visibleCols.getColBefore(t.column);return e?{rowIndex:t.rowIndex,column:e,rowPinned:t.rowPinned}:null}getCellToRight(t){if(!t)return null;const e=this.beans.visibleCols.getColAfter(t.column);return e?{rowIndex:t.rowIndex,column:e,rowPinned:t.rowPinned}:null}getCellBelow(t){if(!t)return null;const e=this.rowSpanSvc?.getCellEnd(t)??t,n=a7(this.beans,e,!0);return n?{rowIndex:n.rowIndex,column:t.column,rowPinned:n.rowPinned}:null}getCellAbove(t){if(!t)return null;const e=this.rowSpanSvc?.getCellStart(t)??t,n=VS(this.beans,{rowIndex:e.rowIndex,rowPinned:e.rowPinned},!0);return n?{rowIndex:n.rowIndex,column:t.column,rowPinned:n.rowPinned}:null}getNextTabbedCell(t,e){return e?this.getNextTabbedCellBackwards(t):this.getNextTabbedCellForwards(t)}getNextTabbedCellForwards(t){const{visibleCols:e,pagination:n}=this.beans,i=e.allCols;let r=t.rowIndex,s=t.rowPinned,a=e.getColAfter(t.column);if(!a){a=i[0];const o=a7(this.beans,t,!0);if(gr(o)||!o.rowPinned&&!(n?.isRowInPage(o.rowIndex)??!0))return null;r=o?o.rowIndex:null,s=o?o.rowPinned:null}return{rowIndex:r,column:a,rowPinned:s}}getNextTabbedCellBackwards(t){const{beans:e}=this,{visibleCols:n,pagination:i}=e,r=n.allCols;let s=t.rowIndex,a=t.rowPinned,o=n.getColBefore(t.column);if(!o){o=On(r);const l=VS(e,{rowIndex:t.rowIndex,rowPinned:t.rowPinned},!0);if(gr(l)||!l.rowPinned&&!(i?.isRowInPage(l.rowIndex)??!0))return null;s=l?l.rowIndex:null,a=l?l.rowPinned:null}return{rowIndex:s,column:o,rowPinned:a}}isSuppressNavigable(t,e){const{suppressNavigable:n}=t.colDef;if(typeof n=="boolean")return n;if(typeof n=="function"){const i=t.createColumnFunctionCallbackParams(e);return n(i)}return!1}};function zxe(t){return t.focusSvc.getFocusedCell()}function Vxe(t){return t.focusSvc.clearFocusedCell()}function Uxe(t,e,n,i){t.focusSvc.setFocusedCell({rowIndex:e,column:n,rowPinned:i,forceBrowserFocus:!0})}function jxe(t,e){return t.navigation?.tabToNextCell(!1,e)??!1}function Wxe(t,e){return t.navigation?.tabToNextCell(!0,e)??!1}function qxe(t,e,n=!1){const i=t.headerNavigation?.getHeaderPositionForColumn(e,n);i&&t.focusSvc.focusHeaderPosition({headerPosition:i})}function MU(t){const e=t;return e?.getFrameworkComponentInstance!=null?e.getFrameworkComponentInstance():t}var Kxe=class{constructor(){this.cellValidations=new Map}getCellValidation(t){const{rowNode:e,column:n}=t||{};return this.cellValidations?.get(e)?.get(n)}hasCellValidation(t){return!t?.rowNode||!t.column?this.cellValidations.size>0:!!this.getCellValidation(t)}setCellValidation(t,e){const{rowNode:n,column:i}=t;this.cellValidations.has(n)||this.cellValidations.set(n,new Map),this.cellValidations.get(n).set(i,e)}clearCellValidation(t){const{rowNode:e,column:n}=t;this.cellValidations.get(e)?.delete(n)}setCellValidationMap(t){this.cellValidations=t}getCellValidationMap(){return this.cellValidations}clearCellValidationMap(){this.cellValidations.clear()}},Yxe=class{constructor(){this.rowValidations=new Map}getRowValidation(t){const{rowNode:e}=t||{};return this.rowValidations.get(e)}hasRowValidation(t){return t?.rowNode?!!this.getRowValidation(t):this.rowValidations.size>0}setRowValidation({rowNode:t},e){this.rowValidations.set(t,e)}clearRowValidation({rowNode:t}){this.rowValidations.delete(t)}setRowValidationMap(t){this.rowValidations=t}getRowValidationMap(){return this.rowValidations}clearRowValidationMap(){this.rowValidations.clear()}};function Xxe(t,e={}){const{rowIndex:n,rowId:i,rowCtrl:r,rowPinned:s}=e;if(r)return r;const{rowModel:a,rowRenderer:o}=t;let{rowNode:l}=e;return l||(i?l=Hbe(t,i,s):n!=null&&(l=a.getRow(n))),o.getRowCtrls(l?[l]:[])?.[0]}function $xe(t,e={}){const{cellCtrl:n,colId:i,columnId:r,column:s}=e;if(n)return n;const a=t.colModel.getCol(i??r??Zxe(s)),o=e.rowCtrl??Xxe(t,e),l=o?.getCellCtrl(a)??void 0;if(l)return l;const u=e.rowNode??o?.rowNode;if(u)return t.rowRenderer.getCellCtrls([u],[a])?.[0]}function Zxe(t){if(t)return typeof t=="string"?t:t.getColId()}var _U=Symbol("unedited");function Qxe(t,e,n){const i={editorValueExists:!1};if(PU(t)&&(e.getValidationErrors?.()?.length??0)>0||n?.isCancelling)return i;if(n?.isStopping){const s=e?.isCancelAfterEnd?.();if(s)return{...i,isCancelAfterEnd:s}}return{editorValue:e.getValue(),editorValueExists:!0}}function Jxe(t,e){for(const n of t.editModelSvc?.getEditPositions()??[]){const i=$xe(t,n);if(!i)continue;const r=i.comp?.getCellEditor();if(!r)continue;const{editorValue:s,editorValueExists:a,isCancelAfterEnd:o}=Qxe(t,r,e);o&&t.editModelSvc?.setEdit(n,{editorState:{isCancelAfterEnd:o}}),eAe(t,n,s,void 0,!a)}}function eAe(t,e,n,i,r,s){const{editModelSvc:a,valueSvc:o}=t;if(!a)return;const{rowNode:l,column:u}=e;if(!(l&&u))return;let h=a.getEdit(e);if(h?.sourceValue===void 0){const g=h?L7(t,h.editorValue,!1,u):_U,v={sourceValue:o.getValue(u,l,"data"),pendingValue:g};h=a.setEdit(e,v)}a.setEdit(e,{editorValue:r?L7(t,h.sourceValue,!0,u):n})}function L7(t,e,n,i){const{formula:r}=t;return i.isAllowFormula()&&r?.isFormula(e)?r?.normaliseFormula(e,n)??e:e}function tAe(t){if(!t)return!1;for(let e=0,n=t.length;e<n;++e){const i=t[e],r=i.cellEditorParams;if(!(!r||!i.editable&&!i.groupRowEditable)&&(r.minLength!==void 0||r.maxLength!==void 0||r.getValidationErrors!==void 0||r.min!==void 0||r.max!==void 0))return!0}return!1}function nAe(t){const e=t.rowRenderer.getCellCtrls();for(let n=0,i=e.length;n<i;++n){const s=e[n].comp?.getCellEditor();if(s){const a=MU(s);if(a.getValidationElement||a.getValidationErrors)return!0}}return!1}function PU(t){return!!t.gos.get("getFullRowEditValidationErrors")||tAe(t.colModel.getColumnDefs())||nAe(t)}function JD(t,e){if(!PU(t))return;const n=new Kxe,{ariaAnnounce:i,localeSvc:r,editModelSvc:s,gos:a}=t,o=a.get("editType")==="fullRow",u=tV(r)("ariaValidationErrorPrefix","Cell Editor Validation"),h=new Set;for(const g of t.rowRenderer.getCellCtrls()){const v=g.comp?.getCellEditor();if(!v)continue;const y=MU(v),{rowNode:w,column:S}=g,x=y.getValidationErrors?.()??[],T=y.getValidationElement?.(!1)||!y.isPopup?.()&&g.eGui;if(T){const _=x!=null&&x.length>0,M=_?x.join(". "):"";vye(T,_),_&&i.announceValue(`${u} ${x}`,"editorValidation"),T instanceof HTMLInputElement?T.setCustomValidity(M):T.classList.toggle("invalid",_)}x?.length>0&&n.setCellValidation({rowNode:w,column:S},{errorMessages:x}),h.add(g.rowCtrl)}if(Jxe(t,{}),s?.setCellValidationModel(n),o){const g=iAe(t);s?.setRowValidationModel(g)}for(const g of h.values()){g.rowEditStyleFeature?.applyRowStyles();for(const v of g.getAllCellCtrls())v.tooltipFeature?.refreshTooltip(!0),v.editorTooltipFeature?.refreshTooltip(!0),v.editStyleFeature?.applyCellStyles?.()}}var iAe=t=>{const e=new Yxe,n=t.gos.get("getFullRowEditValidationErrors"),i=t.editModelSvc?.getEditMap();if(!i)return e;for(const r of i.keys()){const s=i.get(r);if(!s)continue;const a=[],{rowIndex:o,rowPinned:l}=r;for(const h of s.keys()){const g=s.get(h);if(!g)continue;const{editorValue:v,pendingValue:y,sourceValue:w}=g,S=v??(y===_U?void 0:y)??w;a.push({column:h,colId:h.getColId(),rowIndex:o,rowPinned:l,oldValue:w,newValue:S})}const u=n?.({editorsState:a})??[];u.length>0&&e.setRowValidation({rowNode:r},{errorMessages:u})}return e};function rAe(t){return!!(t.rowPinned&&t.pinnedSibling)}function sAe(t,e,n,{rowNode:i,column:r},s){return Pn(t.gos,{type:n,node:i,data:i.data,value:s,column:r,colDef:r.getColDef(),rowPinned:i.rowPinned,event:e,rowIndex:i.rowIndex})}function aAe(t,e=!1){return t===Le.DELETE?!0:!e&&t===Le.BACKSPACE?kV():!1}var oAe=class extends He{constructor(t,e,n,i){super(),this.cellCtrl=t,this.rowNode=n,this.rowCtrl=i,this.beans=e}init(){this.eGui=this.cellCtrl.eGui}onKeyDown(t){const e=t.key;switch(e){case Le.ENTER:this.onEnterKeyDown(t);break;case Le.F2:this.onF2KeyDown(t);break;case Le.ESCAPE:this.onEscapeKeyDown(t);break;case Le.TAB:this.onTabKeyDown(t);break;case Le.BACKSPACE:case Le.DELETE:this.onBackspaceOrDeleteKeyDown(e,t);break;case Le.DOWN:case Le.UP:case Le.RIGHT:case Le.LEFT:this.onNavigationKeyDown(t,e);break}}onNavigationKeyDown(t,e){const{cellCtrl:n,beans:i}=this;if(!i.editSvc?.isEditing(n,{withOpenEditor:!0})){if(t.shiftKey&&n.isRangeSelectionEnabled())this.onShiftRangeSelect(t);else{const r=n.getFocusedCellPosition();i.navigation?.navigateToNextCell(t,e,r,!0)}t.preventDefault()}}onShiftRangeSelect(t){const{rangeSvc:e,navigation:n}=this.beans;if(!e)return;const i=e.extendLatestRangeInDirection(t);i&&(t.key===Le.LEFT||t.key===Le.RIGHT?n?.ensureColumnVisible(i.column):n?.ensureRowVisible(i.rowIndex))}onTabKeyDown(t){this.beans.navigation?.onTabKeyDown(this.cellCtrl,t)}onBackspaceOrDeleteKeyDown(t,e){const{cellCtrl:n,beans:i,rowNode:r}=this,{gos:s,rangeSvc:a,eventSvc:o,editSvc:l}=i;if(o.dispatchEvent({type:"keyShortcutChangedCellStart"}),aAe(t,s.get("enableCellEditingOnBackspace"))&&!l?.isEditing(n,{withOpenEditor:!0})){if(a&&My(s))a.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(n.isCellEditable()){const u=i.valueSvc.getDeleteValue(n.column,r);r.setDataValue(n.column,u,"cellClear")}}else l?.isEditing(n,{withOpenEditor:!0})||i.editSvc?.startEditing(n,{startedEdit:!0,event:e});o.dispatchEvent({type:"keyShortcutChangedCellEnd"})}onEnterKeyDown(t){const{cellCtrl:e,beans:n}=this,{editSvc:i,navigation:r}=n,s=i?.isEditing(e,{withOpenEditor:!0}),a=e.rowNode,o=i?.isRowEditing(a,{withOpenEditor:!0}),l=u=>{i?.startEditing(u,{startedEdit:!0,event:t,source:"edit"})&&t.preventDefault()};if(s||o){if(this.isCtrlEnter(t)){i?.applyBulkEdit(e,n?.rangeSvc?.getCellRanges()||[]);return}if(JD(n),i?.checkNavWithValidation(void 0,t)==="block-stop")return;i?.isEditing(e,{withOpenEditor:!0})?i?.stopEditing(e,{event:t,source:"edit"}):o&&!e.isCellEditable()?i?.stopEditing({rowNode:a},{event:t,source:"edit"}):l(e)}else if(n.gos.get("enterNavigatesVertically")){const u=t.shiftKey?Le.UP:Le.DOWN;r?.navigateToNextCell(null,u,e.cellPosition,!1)}else{if(i?.hasValidationErrors())return;i?.hasValidationErrors(e)&&i.revertSingleCellEdit(e,!0),l(e)}}isCtrlEnter(t){return(t.ctrlKey||t.metaKey)&&t.key===Le.ENTER}onF2KeyDown(t){const{cellCtrl:e,beans:{editSvc:n}}=this;n?.isEditing()&&(JD(this.beans),n?.checkNavWithValidation(void 0,t)==="block-stop")||n?.startEditing(e,{startedEdit:!0,event:t})}onEscapeKeyDown(t){const{cellCtrl:e,beans:{editSvc:n}}=this;n?.checkNavWithValidation(e,t)==="block-stop"&&n.revertSingleCellEdit(e),setTimeout(()=>{n?.stopEditing(e,{event:t,cancel:!0})})}processCharacter(t){const n=t.target!==this.eGui,{beans:{editSvc:i},cellCtrl:r}=this;if(n||i?.isEditing(r,{withOpenEditor:!0}))return;if(t.key===Le.SPACE)this.onSpaceKeyDown(t);else if(i?.isCellEditable(r,"ui")){if(i?.hasValidationErrors()&&!i?.hasValidationErrors(r))return;i?.startEditing(r,{startedEdit:!0,event:t,source:"api",editable:!0}),!r.editCompDetails?.params?.suppressPreventDefault&&t.preventDefault()}}onSpaceKeyDown(t){const{gos:e,editSvc:n}=this.beans,{rowNode:i}=this.cellCtrl;!n?.isEditing(this.cellCtrl,{withOpenEditor:!0})&&mV(e)&&this.beans.selectionSvc?.handleSelectionEvent(t,i,"spaceKey"),t.preventDefault()}},lAe=class extends He{constructor(t,e,n){super(),this.cellCtrl=t,this.column=n,this.beans=e}onMouseEvent(t,e){if(!Rh(e))switch(t){case"click":this.onCellClicked(e);break;case"pointerdown":case"mousedown":case"touchstart":this.onMouseDown(e);break;case"dblclick":this.onCellDoubleClicked(e);break;case"mouseout":this.onMouseOut(e);break;case"mouseover":this.onMouseOver(e);break}}onCellClicked(t){if(this.beans.touchSvc?.handleCellDoubleClick(this,t))return;const{eventSvc:e,rangeSvc:n,editSvc:i,editModelSvc:r,frameworkOverrides:s,gos:a}=this.beans,o=t.ctrlKey||t.metaKey,{cellCtrl:l}=this,{column:u,cellPosition:h,rowNode:g}=l,v=Mw(a,u,g,t);n&&o&&!v&&n.getCellRangeCount(h)>1&&n.intersectLastRange(!0);const y=l.createEvent(t,"cellClicked");y.isEventHandlingSuppressed=v,e.dispatchEvent(y);const w=u.getColDef();if(w.onCellClicked&&window.setTimeout(()=>{s.wrapOutgoing(()=>{w.onCellClicked(y)})},0),!v&&r?.getState(l)!=="editing"){const S=i?.isEditing(),x=i?.isRangeSelectionEnabledWhileEditing(),T=r?.getCellValidationModel().getCellValidationMap().size??0,_=r?.getRowValidationModel().getRowValidationMap().size??0;if(S&&(x||T>0||_>0))return;i?.shouldStartEditing(l,t)?i?.startEditing(l,{event:t}):i?.shouldStopEditing(l,t)&&(this.beans.gos.get("editType")==="fullRow"?i?.stopEditing(l,{event:t,source:"edit"}):i?.stopEditing(void 0,{event:t,source:"edit"}))}}onCellDoubleClicked(t){const{column:e,beans:n,cellCtrl:i}=this,{eventSvc:r,frameworkOverrides:s,editSvc:a,editModelSvc:o,gos:l}=n,u=Mw(l,i.column,i.rowNode,t),h=e.getColDef(),g=i.createEvent(t,"cellDoubleClicked");if(g.isEventHandlingSuppressed=u,r.dispatchEvent(g),typeof h.onCellDoubleClicked=="function"&&window.setTimeout(()=>{s.wrapOutgoing(()=>{h.onCellDoubleClicked(g)})},0),!u&&a?.shouldStartEditing(i,t)&&o?.getState(i)!=="editing"){const v=a?.isEditing(),y=a?.isRangeSelectionEnabledWhileEditing(),w=o?.getCellValidationModel().getCellValidationMap().size??0,S=o?.getRowValidationModel().getRowValidationMap().size??0;if(v&&(y||w>0||S>0))return;a?.startEditing(i,{event:t})}}onMouseDown(t){const{shiftKey:e}=t,n=t.target,{cellCtrl:i,beans:r}=this,{eventSvc:s,rangeSvc:a,rowNumbersSvc:o,focusSvc:l,gos:u,editSvc:h}=r,{column:g,rowNode:v,cellPosition:y}=i,w=Mw(u,g,v,t),S=()=>{const M=i.createEvent(t,"cellMouseDown");M.isEventHandlingSuppressed=w,s.dispatchEvent(M)};if(w){S();return}if(this.isRightClickInExistingRange(t))return;const x=a&&!a.isEmpty(),T=this.containsWidget(n),_=Up(g);if(!(o&&_&&!o.handleMouseDownOnCell(y,t))){if(!e||!x){const M=h?.isEditing(i),L=u.get("enableCellTextSelection")&&t.defaultPrevented,k=(i5()||L)&&!M&&!Q0(n)&&!T;i.focusCell(k,t)}if(e&&x&&!l.isCellFocused(y)){t.preventDefault();const M=l.getFocusedCell();if(M){const{column:F,rowIndex:L,rowPinned:k}=M,B=!!h?.isRangeSelectionEnabledWhileEditing?.();h?.isEditing(M)&&!B&&h?.stopEditing(M),B||l.setFocusedCell({column:F,rowIndex:L,rowPinned:k,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,sourceEvent:t})}}T||(a?.handleCellMouseDown(t,y),S())}}isRightClickInExistingRange(t){const{rangeSvc:e}=this.beans;if(e){const n=e.isCellInAnyRange(this.cellCtrl.cellPosition),i=yCe(this.beans,t);if(n&&i)return!0}return!1}containsWidget(t){return Gp(t,"ag-selection-checkbox",3)||Gp(t,"ag-drag-handle",3)}onMouseOut(t){if(this.mouseStayingInsideCell(t))return;const{eventSvc:e,colHover:n}=this.beans;e.dispatchEvent(this.cellCtrl.createEvent(t,"cellMouseOut")),n?.clearMouseOver()}onMouseOver(t){if(this.mouseStayingInsideCell(t))return;const{eventSvc:e,colHover:n}=this.beans;e.dispatchEvent(this.cellCtrl.createEvent(t,"cellMouseOver")),n?.setMouseOver([this.column])}mouseStayingInsideCell(t){if(!t.target||!t.relatedTarget)return!1;const e=this.cellCtrl.eGui,n=e.contains(t.target),i=e.contains(t.relatedTarget);return n&&i}},cAe=class extends He{constructor(t,e){super(),this.cellCtrl=t,this.beans=e,this.column=t.column,this.rowNode=t.rowNode}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}init(){this.eSetLeft=this.cellCtrl.getRootElement(),this.eContent=this.cellCtrl.eGui;const t=this.cellCtrl.getCellSpan();if(t||(this.setupColSpan(),this.setupRowSpan()),this.onLeftChanged(),this.onWidthChanged(),t||this._legacyApplyRowSpan(),t){const e=this.refreshSpanHeight.bind(this,t);e(),this.addManagedListeners(this.beans.eventSvc,{paginationChanged:e,recalculateRowBounds:e,pinnedHeightChanged:e})}}refreshSpanHeight(t){const e=t.getCellHeight();e!=null&&(this.eContent.style.height=`${e}px`)}onNewColumnsLoaded(){const t=this.column.getRowSpan(this.rowNode);this.rowSpan!==t&&(this.rowSpan=t,this._legacyApplyRowSpan(!0))}onDisplayColumnsChanged(){const t=this.getColSpanningList();sx(this.colsSpanning,t)||(this.colsSpanning=t,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eContent)return;const t=this.getCellWidth();this.eContent.style.width=`${t}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((t,e)=>t+e.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const{column:t,rowNode:e}=this,n=t.getColSpan(e),i=[];if(n===1)i.push(t);else{let r=t;const s=t.getPinned();for(let a=0;r&&a<n&&(i.push(r),r=this.beans.visibleCols.getColAfter(r),!(!r||gr(r)||s!==r.getPinned()));a++);}return i}onLeftChanged(){if(!this.eSetLeft)return;const t=this.modifyLeftForPrintLayout(this.getCellLeft());this.eSetLeft.style.left=t+"px"}getCellLeft(){let t;return this.beans.gos.get("enableRtl")&&this.colsSpanning?t=On(this.colsSpanning):t=this.column,t.getLeft()}modifyLeftForPrintLayout(t){if(!this.cellCtrl.printLayout||this.column.getPinned()==="left")return t;const{visibleCols:e}=this.beans,n=e.getColsLeftWidth();if(this.column.getPinned()==="right"){const i=e.bodyWidth;return n+i+(t||0)}return n+(t||0)}_legacyApplyRowSpan(t){if(this.rowSpan===1&&!t)return;const n=yV(this.beans)*this.rowSpan;this.eContent.style.height=`${n}px`,this.eContent.style.zIndex="1"}destroy(){super.destroy()}},uAe="ag-cell",hAe="ag-cell-auto-height",dAe="ag-cell-normal-height",fAe="ag-cell-focus",gAe="ag-cell-first-right-pinned",pAe="ag-cell-last-left-pinned",mAe="ag-cell-not-inline-editing",vAe="ag-cell-wrap-text",yAe=0,Ow=class extends He{constructor(t,e,n,i){super(),this.column=t,this.rowNode=e,this.rowCtrl=i,this.rangeFeature=void 0,this.rowResizeFeature=void 0,this.positionFeature=void 0,this.customStyleFeature=void 0,this.editStyleFeature=void 0,this.mouseListener=void 0,this.keyboardListener=void 0,this.suppressRefreshCell=!1,this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.focusEventWhileNotReady=null,this.hasBeenFocused=!1,this.hasEdit=!1,this.tooltipFeature=void 0,this.editorTooltipFeature=void 0,this.beans=n,this.gos=n.gos,this.editSvc=n.editSvc,this.hasEdit=!!n.editSvc;const{colId:r}=t;this.instanceId=r+"-"+yAe++,this.createCellPosition(),this.updateAndFormatValue(!1)}addFeatures(){const{beans:t}=this;this.positionFeature=new cAe(this,t),this.customStyleFeature=t.cellStyles?.createCellCustomStyleFeature(this),this.editStyleFeature=t.editSvc?.createCellStyleFeature(this),this.mouseListener=new lAe(this,t,this.column),this.keyboardListener=new oAe(this,t,this.rowNode,this.rowCtrl),this.enableTooltipFeature();const{rangeSvc:e}=t;e&&My(t.gos)&&(this.rangeFeature=e.createCellRangeFeature(this)),Up(this.column)&&(this.rowResizeFeature=this.beans.rowNumbersSvc.createRowNumbersRowResizerFeature(this))}isCellSpanning(){return!1}getCellSpan(){}removeFeatures(){const t=this.beans.context;this.positionFeature=t.destroyBean(this.positionFeature),this.editorTooltipFeature=t.destroyBean(this.editorTooltipFeature),this.customStyleFeature=t.destroyBean(this.customStyleFeature),this.editStyleFeature=t.destroyBean(this.editStyleFeature),this.mouseListener=t.destroyBean(this.mouseListener),this.keyboardListener=t.destroyBean(this.keyboardListener),this.rangeFeature=t.destroyBean(this.rangeFeature),this.rowResizeFeature=t.destroyBean(this.rowResizeFeature),this.disableTooltipFeature()}enableTooltipFeature(t,e){this.tooltipFeature=this.beans.tooltipSvc?.enableCellTooltipFeature(this,t,e)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}enableEditorTooltipFeature(t){this.editorTooltipFeature&&this.disableEditorTooltipFeature(),this.editorTooltipFeature=this.beans.tooltipSvc?.setupCellEditorTooltip(this,t),JD(this.beans)}disableEditorTooltipFeature(){this.editorTooltipFeature=this.beans.context.destroyBean(this.editorTooltipFeature)}setComp(t,e,n,i,r,s,a){this.comp=t,this.eGui=e,this.printLayout=r,a??(a=this),this.addDomData(a),this.addFeatures(),a.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.setupFocus(),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(i,a),this.refreshFirstAndLastStyles(),this.checkFormulaError(),this.refreshAriaColIndex(),this.positionFeature?.init(),this.customStyleFeature?.setComp(t),this.editStyleFeature?.setComp(t),this.tooltipFeature?.refreshTooltip(),this.keyboardListener?.init(),this.rangeFeature?.setComp(t),this.rowResizeFeature?.refreshRowResizer();const o=s?this.isCellEditable():void 0,l=!o&&this.hasEdit&&this.editSvc?.isEditing(this,{withOpenEditor:!0});if(o||l?this.editSvc?.startEditing(this,{startedEdit:!1,source:"api",silent:!0,continueEditing:!0,editable:o}):this.showValue(!1,!0),this.onCompAttachedFuncs.length){for(const u of this.onCompAttachedFuncs)u();this.onCompAttachedFuncs=[]}}checkFormulaError(){const t=!!this.beans.formula?.getFormulaError(this.column,this.rowNode);this.eGui.classList.toggle("formula-error",t)}setupAutoHeight(t,e){this.isAutoHeight=this.beans.rowAutoHeight?.setupCellAutoHeight(this,t,e)??!1}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){const t=this.column.getColDef();return t.cellRenderer!=null||t.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}getDeferLoadingCellRenderer(){const{beans:t,column:e}=this,{userCompFactory:n,ctrlsSvc:i,eventSvc:r}=t,s=e.getColDef(),a=this.createCellRendererParams();a.deferRender=!0;const o=r7(n,s,a);if(i.getGridBodyCtrl()?.scrollFeature?.isScrolling()){let l;const u=new Fr(g=>{l=g}),[h]=this.addManagedListeners(r,{bodyScrollEnd:()=>{l(),h()}});return{loadingComp:o,onReady:u}}return{loadingComp:o,onReady:Fr.resolve()}}showValue(t,e){const{beans:n,column:i,rowNode:r,rangeFeature:s}=this,{userCompFactory:a}=n;let o=this.getValueToDisplay(),l;const u=r.stub&&r.groupData?.[i.getId()]==null,h=i.getColDef();if(u||this.isCellRenderer()){const g=this.createCellRendererParams();!u||Up(i)?l=i7(a,h,g):l=r7(a,h,g)}if(!l&&!u&&n.findSvc?.isMatch(r,i)){const g=this.createCellRendererParams();l=i7(a,{...i.getColDef(),cellRenderer:"agFindCellRenderer"},g)}if(this.hasEdit&&this.editSvc.isBatchEditing()&&this.editSvc.isRowEditing(r,{checkSiblings:!0})){const g=this.editSvc.prepDetailsDuringBatch(this,{compDetails:l,valueToDisplay:o});g&&(g.compDetails?l=g.compDetails:g.valueToDisplay&&(o=g.valueToDisplay))}this.comp.setRenderDetails(l,o,t),this.customRowDragComp?.refreshVisibility(),!e&&s&&Kh(n,()=>s?.refreshRangeStyleAndHandle()),this.rowResizeFeature?.refreshRowResizer()}setupControlComps(){const t=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(t),!0),this.includeRowDrag=this.isIncludeControl(t.rowDrag),this.includeDndSource=this.isIncludeControl(t.dndSource),this.comp.setIncludeSelection(this.includeSelection),this.comp.setIncludeDndSource(this.includeDndSource),this.comp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}getCellValueClass(){const t="ag-cell-value",e=this.column.getColDef().cellRenderer==="agCheckboxCellRenderer";let n="";return e&&(n=" ag-allow-overflow"),`${t}${n}`}isIncludeControl(t,e=!1){return(this.rowNode.rowPinned==null||e&&rAe(this.rowNode))&&!!t}isCheckboxSelection(t){const{rowSelection:e,groupDisplayType:n}=this.beans.gridOptions,i=hCe(e),r=n5(this.column);return n==="custom"&&i!=="selectionColumn"&&r?!1:t.checkboxSelection||r&&typeof e=="object"&&uCe(e)}refreshShouldDestroy(){const t=this.column.getColDef(),e=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(t),!0),n=this.includeRowDrag!=this.isIncludeControl(t.rowDrag),i=this.includeDndSource!=this.isIncludeControl(t.dndSource),r=this.isAutoHeight!=this.column.isAutoHeight();return e||n||i||r}onPopupEditorClosed(){const{editSvc:t}=this.beans;t?.isEditing(this,{withOpenEditor:!0})&&t?.stopEditing(this,{source:t?.isBatchEditing()?"ui":"api"})}stopEditing(t=!1){const{editSvc:e}=this.beans;return e?.stopEditing(this,{cancel:t,source:e?.isBatchEditing()?"ui":"api"})??!1}createCellRendererParams(){const{value:t,valueFormatted:e,column:n,rowNode:i,comp:r,eGui:s,beans:{valueSvc:a,gos:o,editSvc:l}}=this;return Pn(o,{value:t,valueFormatted:e,getValue:()=>a.getValueForDisplay({column:n,node:i,from:"edit"}).value,setValue:h=>l?.setDataValue({rowNode:i,column:n},h)||i.setDataValue(n,h),formatValue:this.formatValue.bind(this),data:i.data,node:i,pinned:n.getPinned(),colDef:n.getColDef(),column:n,refreshCell:this.refreshCell.bind(this),eGridCell:s,eParentOfValue:r.getParentOfValue(),registerRowDragger:(h,g,v,y)=>this.registerRowDragger(h,g,y),setTooltip:(h,g)=>{o.assertModuleRegistered("Tooltip",3),this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(h,g),this.tooltipFeature?.refreshTooltip()}})}onCellChanged(t){t.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(t){if(this.refreshShouldDestroy()?this.rowCtrl?.recreateCell(this):this.refreshCell(t),this.hasEdit&&this.editCompDetails){const{editSvc:e,comp:n}=this;!n?.getCellEditor()&&e.isEditing(this,{withOpenEditor:!0})&&e.startEditing(this,{startedEdit:!1,source:"api",silent:!0})}}refreshCell({force:t,suppressFlash:e,newData:n}={}){const{editStyleFeature:i,customStyleFeature:r,rowCtrl:{rowEditStyleFeature:s},beans:{cellFlashSvc:a,filterManager:o},column:l,comp:u,suppressRefreshCell:h,tooltipFeature:g}=this;if(h)return;const{field:v,valueGetter:y,showRowGroup:w,enableCellChangeFlash:S}=l.getColDef(),x=v==null&&y==null&&w==null,T=t||x||n,_=!!u,M=this.updateAndFormatValue(_),F=T||M;if(_){if(F){this.showValue(!!n,!1);const L=o?.isSuppressFlashingCellsBecauseFiltering();!e&&!L&&S&&a?.flashCell(this),i?.applyCellStyles?.(),r?.applyUserStyles(),r?.applyClassesFromColDef(),s?.applyRowStyles(),this.checkFormulaError()}g?.refreshTooltip(),r?.applyCellClassRules()}}isCellEditable(){return this.column.isCellEditable(this.rowNode)}formatValue(t){return this.callValueFormatter(t)??t}callValueFormatter(t){return this.beans.valueSvc.formatValue(this.column,this.rowNode,t)}updateAndFormatValue(t){const e=this.value,n=this.valueFormatted,{value:i,valueFormatted:r}=this.beans.valueSvc.getValueForDisplay({column:this.column,node:this.rowNode,includeValueFormatted:!0,from:"edit"});return this.value=i,this.valueFormatted=r,t?!this.valuesAreEqual(e,this.value)||this.valueFormatted!=n:!0}valuesAreEqual(t,e){const n=this.column.getColDef();return n.equals?n.equals(t,e):t===e}addDomData(t){const e=this.eGui;sm(this.beans.gos,e,US,this),t.addDestroyFunc(()=>sm(this.beans.gos,e,US,null))}createEvent(t,e){const{rowNode:n,column:i,value:r,beans:s}=this;return sAe(s,t,e,{rowNode:n,column:i},r)}processCharacter(t){this.keyboardListener?.processCharacter(t)}onKeyDown(t){this.keyboardListener?.onKeyDown(t)}onMouseEvent(t,e){this.mouseListener?.onMouseEvent(t,e)}getColSpanningList(){return this.positionFeature?.getColSpanningList()??[]}onLeftChanged(){this.comp&&this.positionFeature?.onLeftChanged()}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{comp:t,column:e,beans:n}=this;XV(t,e,n.visibleCols)}refreshAriaColIndex(){const t=this.beans.visibleCols.getAriaColIndex(this.column);qz(this.eGui,t)}onWidthChanged(){return this.positionFeature?.onWidthChanged()}getRowPosition(){const{rowIndex:t,rowPinned:e}=this.cellPosition;return{rowIndex:t,rowPinned:e}}updateRangeBordersIfRangeCount(){this.comp&&this.rangeFeature?.updateRangeBordersIfRangeCount()}onCellSelectionChanged(){this.comp&&this.rangeFeature?.onCellSelectionChanged()}isRangeSelectionEnabled(){return this.rangeFeature!=null}focusCell(t=!1,e){const n=this.editSvc?.allowedFocusTargetOnValidation(this);n&&n!==this||this.beans.focusSvc.setFocusedCell({...this.getFocusedCellPosition(),forceBrowserFocus:t,sourceEvent:e})}restoreFocus(t=!1){const{beans:{editSvc:e,focusSvc:n},comp:i}=this;if(!i||e?.isEditing(this)||!this.isCellFocused()||!n.shouldTakeFocus())return;const r=()=>{if(!this.isAlive())return;const s=i.getFocusableElement();this.isCellFocused()&&s.focus({preventScroll:!0})};if(t){setTimeout(r,0);return}r()}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.restoreFocus(),this.rangeFeature?.onCellSelectionChanged(),this.rowResizeFeature?.refreshRowResizer()}onSuppressCellFocusChanged(t){const e=this.eGui;e&&(Up(this.column)&&(t=!0),tf(e,"tabindex",t?void 0:-1))}onFirstRightPinnedChanged(){if(!this.comp)return;const t=this.column.isFirstRightPinned();this.comp.toggleCss(gAe,t)}onLastLeftPinnedChanged(){if(!this.comp)return;const t=this.column.isLastLeftPinned();this.comp.toggleCss(pAe,t)}checkCellFocused(){return this.beans.focusSvc.isCellFocused(this.cellPosition)}isCellFocused(){const t=this.checkCellFocused();return this.hasBeenFocused||(this.hasBeenFocused=t),t}setupFocus(){this.restoreFocus(!0),this.onCellFocused(this.focusEventWhileNotReady??void 0)}onCellFocused(t){const{beans:e}=this;if(a5(e))return;if(!this.comp){t&&(this.focusEventWhileNotReady=t);return}const n=this.isCellFocused(),i=e.editSvc?.isEditing(this)??!1;if(this.comp.toggleCss(fAe,n),n&&(t?.forceBrowserFocus||!this.hasBrowserFocus()&&this.beans.focusSvc.shouldTakeFocus())){let r=this.comp.getFocusableElement();if(i){const a=jp(r,null,!0);a.length&&(r=a[0])}const s=t?t.preventScrollOnBrowserFocus:!0;r.focus({preventScroll:s}),Mye(e,r)}n&&this.focusEventWhileNotReady&&(this.focusEventWhileNotReady=null),n&&t&&this.rowCtrl.announceDescription()}createCellPosition(){const{rowIndex:t,rowPinned:e}=this.rowNode;this.cellPosition={rowIndex:t,rowPinned:ff(e),column:this.column}}applyStaticCssClasses(){const{comp:t}=this;t.toggleCss(uAe,!0),t.toggleCss(mAe,!0);const e=this.column.isAutoHeight()==!0;t.toggleCss(hAe,e),t.toggleCss(dAe,!e)}onColumnHover(){this.beans.colHover?.onCellColumnHover(this.column,this.comp)}onColDefChanged(){this.comp&&(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editSvc?.isEditing(this)?this.editSvc?.handleColDefChanged(this):this.refreshOrDestroyCell({force:!0,suppressFlash:!0}))}setWrapText(){const t=this.column.getColDef().wrapText==!0;this.comp.toggleCss(vAe,t)}dispatchCellContextMenuEvent(t){const e=this.column.getColDef(),n=this.createEvent(t,"cellContextMenu"),{beans:i}=this;i.eventSvc.dispatchEvent(n),e.onCellContextMenu&&window.setTimeout(()=>{i.frameworkOverrides.wrapOutgoing(()=>{e.onCellContextMenu(n)})},0)}getCellRenderer(){return this.comp?.getCellRenderer()??null}destroy(){this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.isCellFocused()&&this.hasBrowserFocus()&&this.beans.focusSvc.attemptToRecoverFocus(),super.destroy()}hasBrowserFocus(){return this.eGui?.contains(kr(this.beans))??!1}createSelectionCheckbox(){const t=this.beans.selectionSvc?.createCheckboxSelectionComponent();if(t)return this.beans.context.createBean(t),t.init({rowNode:this.rowNode,column:this.column}),t}createDndSource(){const t=this.beans.registry.createDynamicBean("dndSourceComp",!1,this.rowNode,this.column,this.eGui);return t&&this.beans.context.createBean(t),t}registerRowDragger(t,e,n){if(this.customRowDragComp){this.customRowDragComp.setDragElement(t,e);return}const i=this.createRowDragComp(t,e,n);i&&(this.customRowDragComp=i,this.addDestroyFunc(()=>{this.beans.context.destroyBean(i),this.customRowDragComp=null}),i.refreshVisibility())}createRowDragComp(t,e,n){const i=this.beans.rowDragSvc?.createRowDragCompForCell(this.rowNode,this.column,()=>this.value,t,e,n);if(i)return this.beans.context.createBean(i),i}cellEditorAttached(){for(const t of this.onEditorAttachedFuncs)t();this.onEditorAttachedFuncs=[]}setFocusedCellPosition(t){}getFocusedCellPosition(){return this.cellPosition}refreshAriaRowIndex(){}getRootElement(){return this.eGui}};function F7(t){if(t.group)return t.level;const e=t.parent;return e?e.level+1:0}var CAe=0,eM=class extends He{constructor(t,e,n,i,r){super(),this.rowNode=t,this.useAnimationFrameForCreate=i,this.printLayout=r,this.focusEventWhileNotReady=null,this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKey=null,this.beans=e,this.gos=e.gos,this.paginationPage=e.pagination?.getCurrentPage()??0,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=t.id+"-"+CAe++,this.rowId=Z0(t.id),this.initRowBusinessKey(),this.rowFocused=e.focusSvc.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=F7(this.rowNode),this.setRowType(),this.setAnimateFlags(n),this.rowStyles=this.processStylesFromGridOptions(),this.rowEditStyleFeature=e.editSvc?.createRowStyleFeature(this),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;const t=this.businessKeyForNodeFunc(this.rowNode);this.businessKey=Z0(t)}updateGui(t,e){t==="left"?this.leftGui=e:t==="right"?this.rightGui=e:t==="fullWidth"?this.fullWidthGui=e:this.centerGui=e}setComp(t,e,n,i){const{context:r,rowRenderer:s}=this.beans;i=fx(this,r,i);const a={rowComp:t,element:e,containerType:n,compBean:i};this.allRowGuis.push(a),this.updateGui(n,a),this.initialiseRowComp(a);const o=this.rowNode,l=this.rowType==="FullWidthLoading"||o.stub,u=!o.data&&this.beans.rowModel.getType()==="infinite";!l&&!u&&!o.rowPinned&&s.dispatchFirstDataRenderedEvent(),this.setupFocus()}unsetComp(t){this.allRowGuis=this.allRowGuis.filter(e=>e.containerType!==t),this.updateGui(t,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(t){const e=t?"none":"";for(const n of this.allRowGuis)n.element.style.display=e}initialiseRowComp(t){const e=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(t),this.onRowHeightChanged(t),this.updateRowIndexes(t),this.setFocusedClasses(t),this.setStylesFromGridOptions(!1,t),mV(e)&&this.rowNode.selectable&&this.onRowSelected(t),this.updateColumnLists(!this.useAnimationFrameForCreate);const n=t.rowComp,i=this.getInitialRowClasses(t.containerType);for(const r of i)n.toggleCss(r,!0);this.executeSlideAndFadeAnimations(t),this.rowNode.group&&yye(t.element,this.rowNode.expanded==!0),this.setRowCompRowId(n),this.setRowCompRowBusinessKey(n),sm(e,t.element,jS,this),t.compBean.addDestroyFunc(()=>sm(e,t.element,jS,null)),this.useAnimationFrameForCreate?this.beans.animationFrameSvc.createTask(this.addHoverFunctionality.bind(this,t),this.rowNode.rowIndex,"p2",!1):this.addHoverFunctionality(t),this.isFullWidth()&&this.setupFullWidth(t),e.get("rowDragEntireRow")&&this.addRowDraggerToRow(t),this.useAnimationFrameForCreate&&this.beans.animationFrameSvc.addDestroyTask(()=>{this.isAlive()&&t.rowComp.toggleCss("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(t){this.businessKey!=null&&t.setRowBusinessKey(this.businessKey)}setRowCompRowId(t){const e=Z0(this.rowNode.id);this.rowId=e,e!=null&&t.setRowId(e)}executeSlideAndFadeAnimations(t){const{containerType:e}=t;this.slideInAnimation[e]&&(BD(()=>{this.onTopChanged()}),this.slideInAnimation[e]=!1),this.fadeInAnimation[e]&&(BD(()=>{t.rowComp.toggleCss("ag-opacity-zero",!1)}),this.fadeInAnimation[e]=!1)}addRowDraggerToRow(t){const e=this.beans.rowDragSvc?.createRowDragCompForRow(this.rowNode,t.element);if(!e)return;const n=this.createBean(e,this.beans.context);this.rowDragComps.push(n),t.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(i=>i!==n),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,this.beans.context),this.destroyBean(n,this.beans.context)})}setupFullWidth(t){const e=this.getPinnedForContainer(t.containerType),n=this.createFullWidthCompDetails(t.element,e);t.rowComp.showFullWidth(n)}getFullWidthCellRenderers(){return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(t=>t?.rowComp?.getFullWidthCellRenderer()):[this.fullWidthGui?.rowComp?.getFullWidthCellRenderer()]}executeProcessRowPostCreateFunc(){const t=this.gos.getCallback("processRowPostCreate");if(!t||!this.areAllContainersReady())return;const e={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};t(e)}areAllContainersReady(){const{leftGui:t,centerGui:e,rightGui:n,beans:{visibleCols:i}}=this,r=!!t||!i.isPinningLeft(),s=!!e,a=!!n||!i.isPinningRight();return r&&s&&a}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;const t=this.beans.gos.getCallback("isFullWidthRow");return t?t({rowNode:this.rowNode}):!1}setRowType(){const{rowNode:t,gos:e,beans:{colModel:n}}=this,i=t.stub&&!e.get("suppressServerSideFullWidthLoadingRow")&&!e.get("groupHideOpenParents"),r=this.isNodeFullWidthCell(),s=e.get("masterDetail")&&t.detail,a=n.isPivotMode(),o=cCe(e,t,a);i?this.rowType="FullWidthLoading":s?this.rowType="FullWidthDetail":r?this.rowType="FullWidth":o?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(t=!1,e=!1){if(this.isFullWidth())return;const{animationFrameSvc:n}=this.beans;if(!n?.active||t||this.printLayout){this.updateColumnListsImpl(e);return}this.updateColumnListsPending||(n.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"p1",!1),this.updateColumnListsPending=!0)}getNewCellCtrl(t){if(!this.beans.rowSpanSvc?.isCellSpanning(t,this.rowNode))return new Ow(t,this.rowNode,this.beans,this)}isCorrectCtrlForSpan(t){return!this.beans.rowSpanSvc?.isCellSpanning(t.column,this.rowNode)}createCellCtrls(t,e,n=null){const i={list:[],map:{}},r=(u,h,g)=>{g!=null?i.list.splice(g,0,h):i.list.push(h),i.map[u]=h},s=[];for(const u of e){const h=u.getInstanceId();let g=t.map[h];g&&!this.isCorrectCtrlForSpan(g)&&(g.destroy(),g=void 0),g||(g=this.getNewCellCtrl(u)),g&&r(h,g)}for(const u of t.list){const h=u.column.getInstanceId();if(i.map[h]!=null)continue;!this.isCellEligibleToBeRemoved(u,n)?s.push([h,u]):u.destroy()}if(s.length)for(const[u,h]of s){const g=i.list.findIndex(y=>y.column.getLeft()>h.column.getLeft()),v=g===-1?void 0:Math.max(g-1,0);r(u,h,v)}const{focusSvc:a,visibleCols:o}=this.beans,l=a.getFocusedCell();if(l&&l.column.getPinned()==n){const u=l.column.getInstanceId();if(!i.map[u]&&o.allCols.includes(l.column)){const g=this.createFocusedCellCtrl();if(g){const v=i.list.findIndex(w=>w.column.getLeft()>g.column.getLeft()),y=v===-1?void 0:Math.max(v-1,0);r(u,g,y)}}}return i}createFocusedCellCtrl(){const{focusSvc:t,rowSpanSvc:e}=this.beans,n=t.getFocusedCell();if(!n)return;const i=e?.getCellSpan(n.column,this.rowNode);if(i){if(i.firstNode!==this.rowNode||!i.doesSpanContain(n))return}else if(!t.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned))return;return this.getNewCellCtrl(n.column)}updateColumnListsImpl(t){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(t)}setCellCtrls(t){for(const e of this.allRowGuis){const n=this.getCellCtrlsForContainer(e.containerType);e.rowComp.setCellCtrls(n,t)}}getCellCtrlsForContainer(t){switch(t){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const t=this.beans.colViewport,e=this.beans.visibleCols;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,e.allCols),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const n=t.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,n);const i=e.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,i,"left");const r=e.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,r,"right")}}isCellEligibleToBeRemoved(t,e){const{column:r}=t;if(r.getPinned()!=e||!this.isCorrectCtrlForSpan(t))return!0;const{visibleCols:s,editSvc:a}=this.beans,o=a?.isEditing(t),l=t.isCellFocused();return o||l?!(s.allCols.indexOf(r)>=0):!0}getDomOrder(){return this.gos.get("ensureDomOrder")||ms(this.gos,"print")}listenOnDomOrder(t){const e=()=>{t.rowComp.setDomOrder(this.getDomOrder())};t.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],e)}setAnimateFlags(t){if(this.rowNode.sticky||!t)return;const e=Et(this.rowNode.oldRowTop),{visibleCols:n}=this.beans,i=n.isPinningLeft(),r=n.isPinningRight();if(e){const{slideInAnimation:s}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){s.fullWidth=!0;return}s.center=!0,s.left=i,s.right=r}else{const{fadeInAnimation:s}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){s.fullWidth=!0;return}s.center=!0,s.left=i,s.right=r}}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){const t=(a,o)=>a?a.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(a.element,o).params):!0,e=t(this.fullWidthGui,null),n=t(this.centerGui,null),i=t(this.leftGui,"left"),r=t(this.rightGui,"right");return e&&n&&i&&r}addListeners(){const{beans:t,gos:e,rowNode:n}=this,{expansionSvc:i,eventSvc:r,context:s,rowSpanSvc:a}=t;this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),...i?.getRowExpandedListeners(this)??{}}),n.detail&&this.addManagedListeners(n.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(n,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this),rowPinned:this.onRowPinned.bind(this)}),this.addManagedListeners(r,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),a&&this.addManagedListeners(a,{spannedCellsUpdated:({pinned:o})=>{o&&!n.rowPinned||this.updateColumnLists()}}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,s),this.tooltipFeature=this.destroyBean(this.tooltipFeature,s),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,s)}),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",()=>{if(e.get("rowDragEntireRow")){for(const l of this.allRowGuis)this.addRowDraggerToRow(l);return}this.rowDragComps=this.destroyBeans(this.rowDragComps,s)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{for(const t of this.getAllCellCtrls())t.onRowIndexChanged()},cellChanged:t=>{for(const e of this.getAllCellCtrls())e.onCellChanged(t)}})}onRowPinned(){for(const t of this.allRowGuis)t.rowComp.toggleCss("ag-row-pinned-source",!!this.rowNode.pinnedSibling)}onRowNodeDataChanged(t){this.refreshRow({suppressFlash:!t.update,newData:!t.update})}refreshRow(t){if(this.isFullWidth()!==!!this.isNodeFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}for(const n of this.getAllCellCtrls())n.refreshCell(t);for(const n of this.allRowGuis)this.setRowCompRowId(n.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(n.rowComp);this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.rowEditStyleFeature?.applyRowStyles(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const t=this.beans.rowDropHighlightSvc,e=t?.row===this.rowNode?t.position:"none",n=e==="above",i=e==="inside",r=e==="below",s=e!=="none",a=n||r,o=this.rowNode.uiLevel,l=a&&o>0,u=l?o.toString():"0";for(const h of this.allRowGuis){const g=h.rowComp;g.toggleCss("ag-row-highlight-above",n),g.toggleCss("ag-row-highlight-inside",i),g.toggleCss("ag-row-highlight-below",r),g.toggleCss("ag-row-highlight-indent",l),s?h.element.style.setProperty("--ag-row-highlight-level",u):h.element.style.removeProperty("--ag-row-highlight-level")}}postProcessRowDragging(){const t=this.rowNode.dragging;for(const e of this.allRowGuis)e.rowComp.toggleCss("ag-row-dragging",t)}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.rowAutoHeight?.requestCheckAutoHeight()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:ff(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(t){const e=this.findFullWidthInfoForEvent(t);if(!e)return;const{rowGui:n,column:i}=e;if(!(n.element===t.target))return;const a=this.rowNode,{focusSvc:o,navigation:l}=this.beans,u=o.getFocusedCell(),h={rowIndex:a.rowIndex,rowPinned:a.rowPinned,column:u?.column??i};l?.navigateToNextCell(t,t.key,h,!0),t.preventDefault()}onTabKeyDown(t){if(t.defaultPrevented||Rh(t))return;const e=this.allRowGuis.find(o=>o.element.contains(t.target)),n=e?e.element:null,i=n===t.target,r=kr(this.beans);let s=!1;n&&r&&(s=n.contains(r)&&r.classList.contains("ag-cell"));let a=null;!i&&!s&&(a=hx(this.beans,n,!1,t.shiftKey)),(this.isFullWidth()&&i||!a)&&this.beans.navigation?.onTabKeyDown(this,t)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){const t=this.allRowGuis.find(e=>Fh(e.element))?.element;return t?t.getBoundingClientRect().top:0}onSuppressCellFocusChanged(t){const e=this.isFullWidth()&&t?void 0:this.gos.get("tabIndex");for(const n of this.allRowGuis)tf(n.element,"tabindex",e)}setupFocus(){this.isFullWidth()&&(this.restoreFullWidthFocus(!0),this.onFullWidthRowFocused(this.focusEventWhileNotReady??void 0))}restoreFullWidthFocus(t=!1){const{focusSvc:e,editSvc:n}=this.beans;if(n?.isEditing(this)||!e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned)||!e.shouldTakeFocus())return;const i=this.getFullWidthRowGuiForFocus();if(!i)return;const r=()=>{this.isAlive()&&e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned)&&i.element.focus({preventScroll:!0})};if(t){setTimeout(r,0);return}r()}getFullWidthRowGuiForFocus(t){if(this.fullWidthGui)return this.fullWidthGui;const e=this.beans.focusSvc.getFocusedCell(),n=this.beans.colModel.getCol(t?.column??e?.column);if(!n)return;const i=n?.pinned;return i==="right"?this.rightGui:i==="left"?this.leftGui:this.centerGui}setFullWidthRowFocusedClass(t,e){this.forEachGui(void 0,n=>{n.element.classList.toggle("ag-full-width-focus",e&&n===t)})}onFullWidthRowFocused(t){const{focusSvc:e}=this.beans;if(!(this.isFullWidth()&&e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned))){this.setFullWidthRowFocusedClass(void 0,!1);return}const i=this.getFullWidthRowGuiForFocus(t);if(!i){t&&(this.focusEventWhileNotReady=t),this.setFullWidthRowFocusedClass(void 0,!1);return}this.setFullWidthRowFocusedClass(i,!0),this.focusEventWhileNotReady=null,t?.forceBrowserFocus&&i.element.focus({preventScroll:!0})}recreateCell(t){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,t),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,t),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,t),t.destroy(),this.updateColumnLists()}removeCellCtrl(t,e){const n={list:[],map:{}};for(const i of t.list)i!==e&&(n.list.push(i),n.map[i.column.getInstanceId()]=i);return n}onMouseEvent(t,e){switch(t){case"dblclick":this.onRowDblClick(e);break;case"click":this.onRowClick(e);break;case"pointerdown":case"touchstart":case"mousedown":this.onRowMouseDown(e);break}}createRowEvent(t,e){const{rowNode:n}=this;return Pn(this.gos,{type:t,node:n,data:n.data,rowIndex:n.rowIndex,rowPinned:n.rowPinned,event:e})}createRowEventWithSource(t,e){const n=this.createRowEvent(t,e);return n.source=this,n}onRowDblClick(t){if(Rh(t))return;const e=this.createRowEventWithSource("rowDoubleClicked",t);e.isEventHandlingSuppressed=this.isSuppressMouseEvent(t),this.beans.eventSvc.dispatchEvent(e)}findFullWidthInfoForEvent(t){if(!t)return;const e=this.findFullWidthRowGui(t.target),n=this.getColumnForFullWidth(e);if(!(!e||!n))return{rowGui:e,column:n}}findFullWidthRowGui(t){return this.allRowGuis.find(e=>e.element.contains(t))}getColumnForFullWidth(t){const{visibleCols:e}=this.beans;switch(t?.containerType){case"center":return e.centerCols[0];case"left":return e.leftCols[0];case"right":return e.rightCols[0];default:return e.allCols[0]}}onRowMouseDown(t){if(this.lastMouseDownOnDragger=Gp(t.target,"ag-row-drag",3),!this.isFullWidth()||this.isSuppressMouseEvent(t))return;const{rangeSvc:e,focusSvc:n}=this.beans;e?.removeAllCellRanges();const i=this.findFullWidthInfoForEvent(t);if(!i)return;const{rowGui:r,column:s}=i,a=r.element,o=t.target,l=this.rowNode;let u=t.defaultPrevented||i5();a&&a.contains(o)&&Q0(o)&&(u=!1),n.setFocusedCell({rowIndex:l.rowIndex,column:s,rowPinned:l.rowPinned,forceBrowserFocus:u})}isSuppressMouseEvent(t){const{gos:e,rowNode:n}=this;if(this.isFullWidth()){const r=this.findFullWidthRowGui(t.target);return I1e(e,r?.rowComp.getFullWidthCellRendererParams(),n,t)}const i=h5(e,t.target);return i!=null&&Mw(e,i.column,n,t)}onRowClick(t){if(Rh(t)||this.lastMouseDownOnDragger)return;const n=this.isSuppressMouseEvent(t),{eventSvc:i,selectionSvc:r}=this.beans,s=this.createRowEventWithSource("rowClicked",t);s.isEventHandlingSuppressed=n,i.dispatchEvent(s),!n&&r?.handleSelectionEvent(t,this.rowNode,"rowClicked")}setupDetailRowAutoHeight(t){this.rowType==="FullWidthDetail"&&this.beans.masterDetailSvc?.setupDetailRowAutoHeight(this,t)}createFullWidthCompDetails(t,e){const{gos:n,rowNode:i}=this,r=Pn(n,{fullWidth:!0,data:i.data,node:i,value:i.key,valueFormatted:i.key,eGridCell:t,eParentOfValue:t,pinned:e,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(a,o,l,u)=>this.addFullWidthRowDragging(a,o,l,u),setTooltip:(a,o)=>{n.assertModuleRegistered("Tooltip",3),this.setupFullWidthRowTooltip(a,o)}}),s=this.beans.userCompFactory;switch(this.rowType){case"FullWidthDetail":return Dbe(s,r);case"FullWidthGroup":{const{value:a,valueFormatted:o}=this.beans.valueSvc.getValueForDisplay({node:this.rowNode,includeValueFormatted:!0,from:"edit"});return r.value=a,r.valueFormatted=o,Rbe(s,r)}case"FullWidthLoading":return Tbe(s,r);default:return Ebe(s,r)}}setupFullWidthRowTooltip(t,e){this.fullWidthGui&&(this.tooltipFeature=this.beans.tooltipSvc?.setupFullWidthRowTooltip(this.tooltipFeature,this,t,e))}addFullWidthRowDragging(t,e,n="",i){const{rowDragSvc:r,context:s}=this.beans;if(!r||!this.isFullWidth())return;const a=r.createRowDragComp(()=>n,this.rowNode,void 0,t,e,i);this.createBean(a,s),this.addDestroyFunc(()=>{this.destroyBean(a,s)})}onUiLevelChanged(){const t=F7(this.rowNode);if(this.rowLevel!=t){const e="ag-row-level-"+t,n="ag-row-level-"+this.rowLevel;for(const i of this.allRowGuis)i.rowComp.toggleCss(e,!0),i.rowComp.toggleCss(n,!1)}this.rowLevel=t}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getLastRow()}refreshFirstAndLastRowStyles(){const t=this.isFirstRowOnPage(),e=this.isLastRowOnPage();if(this.firstRowOnPage!==t){this.firstRowOnPage=t;for(const n of this.allRowGuis)n.rowComp.toggleCss("ag-row-first",t)}if(this.lastRowOnPage!==e){this.lastRowOnPage=e;for(const n of this.allRowGuis)n.rowComp.toggleCss("ag-row-last",e)}}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){const t=[];if(this.beans.rowStyleSvc?.processClassesFromGridOptions(t,this.rowNode),!!t.length)for(const e of t)for(const n of this.allRowGuis)n.rowComp.toggleCss(e,!0)}postProcessRowClassRules(){this.beans.rowStyleSvc?.processRowClassRules(this.rowNode,t=>{for(const e of this.allRowGuis)e.rowComp.toggleCss(t,!0)},t=>{for(const e of this.allRowGuis)e.rowComp.toggleCss(t,!1)})}setStylesFromGridOptions(t,e){t&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(e,n=>n.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(t){return t==="left"||t==="right"?t:null}getInitialRowClasses(t){const e=this.getPinnedForContainer(t),n=this.isFullWidth(),{rowNode:i,beans:r}=this,s=[];s.push("ag-row"),s.push(this.rowFocused?"ag-row-focus":"ag-row-no-focus"),this.fadeInAnimation[t]&&s.push("ag-opacity-zero"),s.push(i.rowIndex%2===0?"ag-row-even":"ag-row-odd"),i.isRowPinned()&&(s.push("ag-row-pinned"),r.pinnedRowModel?.isManual()&&s.push("ag-row-pinned-manual")),!i.isRowPinned()&&i.pinnedSibling&&s.push("ag-row-pinned-source"),i.isSelected()&&s.push("ag-row-selected"),i.footer&&s.push("ag-row-footer"),s.push("ag-row-level-"+this.rowLevel),i.stub&&s.push("ag-row-loading"),n&&s.push("ag-full-width-row"),r.expansionSvc?.addExpandedCss(s,i),i.dragging&&s.push("ag-row-dragging");const{rowStyleSvc:a}=r;return a&&(a.processClassesFromGridOptions(s,i),a.preProcessRowClassRules(s,i)),s.push(this.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),this.isFirstRowOnPage()&&s.push("ag-row-first"),this.isLastRowOnPage()&&s.push("ag-row-last"),n&&(e==="left"&&s.push("ag-cell-last-left-pinned"),e==="right"&&s.push("ag-cell-first-right-pinned")),s}processStylesFromGridOptions(){return this.beans.rowStyleSvc?.processStylesFromGridOptions(this.rowNode)??this.emptyStyle}onRowSelected(t){this.beans.selectionSvc?.onRowCtrlSelected(this,e=>{(e===this.centerGui||e===this.fullWidthGui)&&this.announceDescription()},t)}announceDescription(){this.beans.selectionSvc?.announceAriaRowSelection(this.rowNode)}addHoverFunctionality(t){if(!this.active)return;const{element:e,compBean:n}=t,{rowNode:i,beans:r,gos:s}=this;n.addManagedListeners(e,{pointerenter:a=>{a.pointerType==="mouse"&&i.dispatchRowEvent("mouseEnter")},pointerleave:a=>{a.pointerType==="mouse"&&i.dispatchRowEvent("mouseLeave")}}),n.addManagedListeners(i,{mouseEnter:()=>{!r.dragSvc?.dragging&&!s.get("suppressRowHoverHighlight")&&(e.classList.add("ag-row-hover"),i.setHovered(!0))},mouseLeave:()=>{this.resetHoveredStatus(e)}})}resetHoveredStatus(t){const e=t?[t]:this.allRowGuis.map(n=>n.element);for(const n of e)n.classList.remove("ag-row-hover");this.rowNode.setHovered(!1)}roundRowTopToBounds(t){const e=this.beans.ctrlsSvc.getScrollFeature().getApproximateVScollPosition(),n=this.applyPaginationOffset(e.top,!0)-100,i=this.applyPaginationOffset(e.bottom,!0)+100;return Math.min(Math.max(n,t),i)}forEachGui(t,e){if(t)e(t);else for(const n of this.allRowGuis)e(n)}isRowRendered(){return this.allRowGuis.length>0}onRowHeightChanged(t){if(this.rowNode.rowHeight==null)return;const e=this.rowNode.rowHeight,n=this.beans.environment.getDefaultRowHeight(),r=vV(this.gos)?oCe(this.beans,this.rowNode).height:void 0,s=r?`${Math.min(n,r)-2}px`:void 0;this.forEachGui(t,a=>{a.element.style.height=`${e}px`,s&&a.element.style.setProperty("--ag-line-height",s)})}destroyFirstPass(t=!1){this.active=!1;const{rowNode:e}=this;if(!t&&e5(this.gos)&&!e.sticky)if(e.rowTop!=null){const r=this.roundRowTopToBounds(e.rowTop);this.setRowTop(r)}else for(const r of this.allRowGuis)r.rowComp.toggleCss("ag-opacity-zero",!0);this.fullWidthGui?.element.contains(kr(this.beans))&&this.beans.focusSvc.attemptToRecoverFocus(),e.setHovered(!1);const n=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(n),this.beans.eventSvc.dispatchEvent(n),super.destroy()}destroySecondPass(){this.allRowGuis.length=0;const t=e=>{for(const n of e.list)n.destroy();return{list:[],map:{}}};this.centerCellCtrls=t(this.centerCellCtrls),this.leftCellCtrls=t(this.leftCellCtrls),this.rightCellCtrls=t(this.rightCellCtrls)}setFocusedClasses(t){this.forEachGui(t,e=>{e.rowComp.toggleCss("ag-row-focus",this.rowFocused),e.rowComp.toggleCss("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const{focusSvc:t}=this.beans,e=t.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);e!==this.rowFocused&&(this.rowFocused=e,this.setFocusedClasses())}onPaginationChanged(){const t=this.beans.pagination?.getCurrentPage()??0;this.paginationPage!==t&&(this.paginationPage=t,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(t,e=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return t;const n=this.beans.pageBounds.getPixelOffset();return t+n*(e?1:-1)}setRowTop(t){if(!this.printLayout&&Et(t)){const e=this.applyPaginationOffset(t),r=`${this.rowNode.isRowPinned()||this.rowNode.sticky?e:this.beans.rowContainerHeight.getRealPixelPosition(e)}px`;this.setRowTopStyle(r)}}getInitialRowTop(t){return this.suppressRowTransform?this.getInitialRowTopShared(t):void 0}getInitialTransform(t){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(t)})`}getInitialRowTopShared(t){if(this.printLayout)return"";const e=this.rowNode;let n;if(e.sticky)n=e.stickyRowTop;else{const i=this.slideInAnimation[t]?this.roundRowTopToBounds(e.oldRowTop):e.rowTop,r=this.applyPaginationOffset(i);n=e.isRowPinned()?r:this.beans.rowContainerHeight.getRealPixelPosition(r)}return n+"px"}setRowTopStyle(t){for(const e of this.allRowGuis)this.suppressRowTransform?e.rowComp.setTop(t):e.rowComp.setTransform(`translateY(${t})`)}getCellCtrl(t,e=!1){let n=null;for(const i of this.getAllCellCtrls())i.column==t&&(n=i);if(n!=null||e)return n;for(const i of this.getAllCellCtrls())i?.getColSpanningList().indexOf(t)>=0&&(n=i);return n}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}updateRowIndexes(t){const e=this.rowNode.getRowIndexString();if(e===null)return;const n=(this.beans.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0)+(this.beans.filterManager?.getHeaderRowCount()??0),i=this.rowNode.rowIndex%2===0,r=n+this.rowNode.rowIndex+1;this.forEachGui(t,s=>{s.rowComp.setRowIndex(e),s.rowComp.toggleCss("ag-row-even",i),s.rowComp.toggleCss("ag-row-odd",!i),bye(s.element,r)})}},bAe=class extends He{constructor(){super(),this.beanName="navigation",this.onPageDown=YF(this.onPageDown,100),this.onPageUp=YF(this.onPageUp,100)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,t=>{this.gridBodyCon=t.gridBodyCtrl})}handlePageScrollingKey(t,e=!1){const n=t.key,i=t.altKey,r=t.ctrlKey||t.metaKey,s=!!this.beans.rangeSvc&&t.shiftKey,a=wwe(this.gos,t);let o=!1;switch(n){case Le.PAGE_HOME:case Le.PAGE_END:!r&&!i&&(this.onHomeOrEndKey(n),o=!0);break;case Le.LEFT:case Le.RIGHT:case Le.UP:case Le.DOWN:if(!a)return!1;r&&!i&&!s&&(this.onCtrlUpDownLeftRight(n,a),o=!0);break;case Le.PAGE_DOWN:case Le.PAGE_UP:!r&&!i&&(o=this.handlePageUpDown(n,a,e));break}return o&&t.preventDefault(),o}handlePageUpDown(t,e,n){return n&&(e=this.beans.focusSvc.getFocusedCell()),e?(t===Le.PAGE_UP?this.onPageUp(e):this.onPageDown(e),!0):!1}navigateTo({scrollIndex:t,scrollType:e,scrollColumn:n,focusIndex:i,focusColumn:r,isAsync:s,rowPinned:a}){const{scrollFeature:o}=this.gridBodyCon;Et(n)&&!n.isPinned()&&o.ensureColumnVisible(n),Et(t)&&o.ensureIndexVisible(t,e),s||o.ensureIndexVisible(i);const{focusSvc:l,rangeSvc:u}=this.beans;l.setFocusedCell({rowIndex:i,column:r,rowPinned:a,forceBrowserFocus:!0}),u?.setRangeToCell({rowIndex:i,rowPinned:a,column:r})}onPageDown(t){const e=this.beans,n=qT(e),i=this.getViewportHeight(),{pageBounds:r,rowModel:s,rowAutoHeight:a}=e,o=r.getPixelOffset(),l=n.top+i,u=s.getRowIndexAtPixel(l+o);a?.active?this.navigateToNextPageWithAutoHeight(t,u):this.navigateToNextPage(t,u)}onPageUp(t){const e=this.beans,n=qT(e),{pageBounds:i,rowModel:r,rowAutoHeight:s}=e,a=i.getPixelOffset(),o=n.top,l=r.getRowIndexAtPixel(o+a);s?.active?this.navigateToNextPageWithAutoHeight(t,l,!0):this.navigateToNextPage(t,l,!0)}navigateToNextPage(t,e,n=!1){const{pageBounds:i,rowModel:r}=this.beans,s=this.getViewportHeight(),a=i.getFirstRow(),o=i.getLastRow(),l=i.getPixelOffset(),u=r.getRow(t.rowIndex),h=n?u?.rowHeight-s-l:s-l,g=u?.rowTop+h;let v=r.getRowIndexAtPixel(g+l);if(v===t.rowIndex){const w=n?-1:1;e=v=t.rowIndex+w}let y;n?(y="bottom",v<a&&(v=a),e<a&&(e=a)):(y="top",v>o&&(v=o),e>o&&(e=o)),this.isRowTallerThanView(r.getRow(v))&&(e=v,y="top"),this.navigateTo({scrollIndex:e,scrollType:y,scrollColumn:null,focusIndex:v,focusColumn:t.column})}navigateToNextPageWithAutoHeight(t,e,n=!1){this.navigateTo({scrollIndex:e,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:e,focusColumn:t.column}),setTimeout(()=>{const i=this.getNextFocusIndexForAutoHeight(t,n);this.navigateTo({scrollIndex:e,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:i,focusColumn:t.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(t,e=!1){const n=e?-1:1,i=this.getViewportHeight(),{pageBounds:r,rowModel:s}=this.beans,a=r.getLastRow();let o=0,l=t.rowIndex;for(;l>=0&&l<=a;){const u=s.getRow(l);if(u){const h=u.rowHeight??0;if(o+h>i)break;o+=h}l+=n}return Math.max(0,Math.min(l,a))}getViewportHeight(){const t=this.beans,e=qT(t),n=this.beans.scrollVisibleSvc.getScrollbarWidth();let i=e.bottom-e.top;return t.ctrlsSvc.get("center").isHorizontalScrollShowing()&&(i-=n),i}isRowTallerThanView(t){if(!t)return!1;const e=t.rowHeight;return typeof e!="number"?!1:e>this.getViewportHeight()}onCtrlUpDownLeftRight(t,e){const n=this.beans.cellNavigation.getNextCellToFocus(t,e,!0),i=this.getNormalisedPosition(n),{rowIndex:r,rowPinned:s,column:a}=i??n,o=a;this.navigateTo({scrollIndex:r,scrollType:null,scrollColumn:o,focusIndex:r,focusColumn:o,rowPinned:s})}onHomeOrEndKey(t){const e=t===Le.PAGE_HOME,{visibleCols:n,pageBounds:i,rowModel:r}=this.beans,s=n.allCols,a=e?i.getFirstRow():i.getLastRow(),o=r.getRow(a);if(!o)return;const l=(e?s:[...s].reverse()).find(u=>!u.isSuppressNavigable(o));l&&this.navigateTo({scrollIndex:a,scrollType:null,scrollColumn:l,focusIndex:a,focusColumn:l})}onTabKeyDown(t,e){const n=e.shiftKey,i=this.tabToNextCellCommon(t,n,e),r=this.beans,{ctrlsSvc:s,pageBounds:a,focusSvc:o,gos:l}=r;if(i!==!1){i?e.preventDefault():i===null&&s.get("gridCtrl").allowFocusForNextCoreContainer(n);return}if(n){const{rowIndex:u,rowPinned:h}=t.getRowPosition();(h?u===0:u===a.getFirstRow())&&(l.get("headerHeight")===0||pf(r)?Oy(r,!0,!0):(e.preventDefault(),o.focusPreviousFromFirstCell(e)))}else t instanceof Ow&&t.focusCell(!0),(o.focusOverlay(!1)||Oy(r,n))&&e.preventDefault()}tabToNextCell(t,e){const n=this.beans,{focusSvc:i,rowRenderer:r}=n,s=i.getFocusedCell();if(!s)return!1;let a=Y1(n,s);return!a&&(a=r.getRowByPosition(s),!a?.isFullWidth())?!1:!!this.tabToNextCellCommon(a,t,e,"api")}tabToNextCellCommon(t,e,n,i="ui"){const{editSvc:r,focusSvc:s}=this.beans;let a;const o=t instanceof Ow?t:t.getAllCellCtrls()?.[0];return r?.isEditing()?a=r?.moveToNextCell(o,e,n,i):a=this.moveToNextCellNotEditing(t,e,n),a===null?a:a||!!s.focusedHeader}moveToNextCellNotEditing(t,e,n){const i=this.beans.visibleCols.allCols;let r;if(t instanceof eM){if(r={...t.getRowPosition(),column:e?i[0]:On(i)},this.gos.get("embedFullWidthRows")&&n){const a=t.findFullWidthInfoForEvent(n);a&&(r.column=a.column)}}else r=t.getFocusedCellPosition();const s=this.findNextCellToFocusOn(r,{backwards:e,startEditing:!1});if(s===!1)return null;if(s instanceof Ow)s.focusCell(!0);else if(s)return this.tryToFocusFullWidthRow(s,e);return Et(s)}findNextCellToFocusOn(t,{backwards:e,startEditing:n,skipToNextEditableCell:i}){let r=t;const s=this.beans,{cellNavigation:a,gos:o,focusSvc:l,rowRenderer:u,rangeSvc:h}=s;for(;;){t!==r&&(t=r),e||(r=this.getLastCellOfColSpan(r)),r=a.getNextTabbedCell(r,e);const g=o.getCallback("tabToNextCell");if(Et(g)){const S=g({backwards:e,editing:n,previousCellPosition:t,nextCellPosition:r||null});if(S===!0)r=t;else{if(S===!1)return!1;r={rowIndex:S.rowIndex,column:S.column,rowPinned:S.rowPinned}}}if(!r)return null;if(r.rowIndex<0){const w=Vl(s);return l.focusHeaderPosition({headerPosition:{headerRowIndex:w+r.rowIndex,column:r.column},fromCell:!0}),null}const v=o.get("editType")==="fullRow";if(n&&(!v||i)&&!this.isCellEditable(r))continue;this.ensureCellVisible(r);const y=Y1(s,r);if(!y){const w=u.getRowByPosition(r);if(!w||!w.isFullWidth()||n)continue;return{...w.getRowPosition(),column:r?.column}}if(!a.isSuppressNavigable(y.column,y.rowNode))return y.setFocusedCellPosition(r),h?.setRangeToCell(r),y}}isCellEditable(t){const e=this.lookupRowNodeForCell(t);return e?t.column.isCellEditable(e):!1}lookupRowNodeForCell({rowIndex:t,rowPinned:e}){const{pinnedRowModel:n,rowModel:i}=this.beans;return e==="top"?n?.getPinnedTopRow(t):e==="bottom"?n?.getPinnedBottomRow(t):i.getRow(t)}navigateToNextCell(t,e,n,i){let r=n,s=!1;const a=this.beans,{cellNavigation:o,focusSvc:l,gos:u}=a;for(;r&&(r===n||!this.isValidNavigateCell(r));)u.get("enableRtl")?e===Le.LEFT&&(r=this.getLastCellOfColSpan(r)):e===Le.RIGHT&&(r=this.getLastCellOfColSpan(r)),r=o.getNextCellToFocus(e,r),s=gr(r);if(s&&t&&t.key===Le.UP&&(r={rowIndex:-1,rowPinned:null,column:n.column}),i){const g=u.getCallback("navigateToNextCell");if(Et(g)){const y=g({key:e,previousCellPosition:n,nextCellPosition:r||null,event:t});Et(y)?r={rowPinned:y.rowPinned,rowIndex:y.rowIndex,column:y.column}:r=null}}if(!r)return;if(r.rowIndex<0){const g=Vl(a);l.focusHeaderPosition({headerPosition:{headerRowIndex:g+r.rowIndex,column:n.column},event:t||void 0,fromCell:!0});return}const h=this.getNormalisedPosition(r);h?this.focusPosition(h):this.tryToFocusFullWidthRow(r)}getNormalisedPosition(t){if(!!this.beans.spannedRowRenderer?.getCellByPosition(t))return t;this.ensureCellVisible(t);const n=Y1(this.beans,t);return n?(t=n.getFocusedCellPosition(),this.ensureCellVisible(t),t):null}tryToFocusFullWidthRow(t,e){const{visibleCols:n,rowRenderer:i,focusSvc:r,eventSvc:s}=this.beans,a=n.allCols;if(!i.getRowByPosition(t)?.isFullWidth())return!1;const l=r.getFocusedCell(),u={rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:t.column||(e?On(a):a[0])};this.focusPosition(u);const h=e??(l!=null&&Nbe(u,l));return s.dispatchEvent({type:"fullWidthRowFocused",rowIndex:u.rowIndex,rowPinned:u.rowPinned,column:u.column,isFullWidthCell:!0,fromBelow:h}),!0}focusPosition(t){const{focusSvc:e,rangeSvc:n}=this.beans;e.setFocusedCell({rowIndex:t.rowIndex,column:t.column,rowPinned:t.rowPinned,forceBrowserFocus:!0}),n?.setRangeToCell(t)}isValidNavigateCell(t){return!!UV(this.beans,t)}getLastCellOfColSpan(t){const e=Y1(this.beans,t);if(!e)return t;const n=e.getColSpanningList();return n.length===1?t:{rowIndex:t.rowIndex,column:On(n),rowPinned:t.rowPinned}}ensureCellVisible(t){const e=bV(this.gos),n=this.beans.rowModel.getRow(t.rowIndex),i=e&&n?.sticky,{scrollFeature:r}=this.gridBodyCon;!i&&gr(t.rowPinned)&&r.ensureIndexVisible(t.rowIndex),t.column.isPinned()||r.ensureColumnVisible(t.column)}ensureColumnVisible(t){const e=this.gridBodyCon.scrollFeature;t.isPinned()||e.ensureColumnVisible(t)}ensureRowVisible(t){this.gridBodyCon.scrollFeature.ensureIndexVisible(t)}};function qT(t){return t.ctrlsSvc.getScrollFeature().getVScrollPosition()}var wAe={moduleName:"KeyboardNavigation",version:kn,beans:[bAe,Gxe,fxe],apiFunctions:{getFocusedCell:zxe,clearFocusedCell:Vxe,setFocusedCell:Uxe,setFocusedHeader:qxe,tabToNextCell:jxe,tabToPreviousCell:Wxe}},SAe=class extends He{constructor(){super(...arguments),this.beanName="pageBoundsListener"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(t){this.calculatePages(),this.eventSvc.dispatchEvent({type:"paginationChanged",animate:t?.animate??!1,newData:t?.newData??!1,newPage:t?.newPage??!1,newPageSize:t?.newPageSize??!1,keepRenderedRows:t?.keepRenderedRows??!1})}calculatePages(){const{pageBounds:t,pagination:e,rowModel:n}=this.beans;e?e.calculatePages():t.calculateBounds(0,n.getRowCount()-1)}},xAe=class extends He{constructor(){super(...arguments),this.beanName="pageBounds",this.pixelOffset=0}getFirstRow(){return this.topRowBounds?.rowIndex??-1}getLastRow(){return this.bottomRowBounds?.rowIndex??-1}getCurrentPageHeight(){const{topRowBounds:t,bottomRowBounds:e}=this;return!t||!e?0:Math.max(e.rowTop+e.rowHeight-t.rowTop,0)}getCurrentPagePixelRange(){const{topRowBounds:t,bottomRowBounds:e}=this,n=t?.rowTop??0,i=e?e.rowTop+e.rowHeight:0;return{pageFirstPixel:n,pageLastPixel:i}}calculateBounds(t,e){const{rowModel:n}=this.beans,i=n.getRowBounds(t);i&&(i.rowIndex=t),this.topRowBounds=i;const r=n.getRowBounds(e);r&&(r.rowIndex=e),this.bottomRowBounds=r,this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){const t=this.topRowBounds?.rowTop??0;this.pixelOffset!==t&&(this.pixelOffset=t,this.eventSvc.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},AAe=".ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top{min-width:0;overflow:hidden;position:relative}.ag-pinned-left-sticky-top,.ag-pinned-right-sticky-top{height:100%;overflow:hidden;position:relative}.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{height:100%;overflow:hidden;width:100%}.ag-pinned-left-header,.ag-pinned-right-header{display:inline-block;height:100%;overflow:hidden;position:relative}.ag-body-horizontal-scroll:not(.ag-scrollbar-invisible){.ag-horizontal-left-spacer:not(.ag-scroller-corner){border-right:var(--ag-pinned-column-border)}.ag-horizontal-right-spacer:not(.ag-scroller-corner){border-left:var(--ag-pinned-column-border)}}.ag-pinned-right-header{border-left:var(--ag-pinned-column-border)}.ag-pinned-left-header{border-right:var(--ag-pinned-column-border)}.ag-cell.ag-cell-first-right-pinned:not(.ag-cell-range-left,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-left:var(--ag-pinned-column-border)}.ag-cell.ag-cell-last-left-pinned:not(.ag-cell-range-right,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-right:var(--ag-pinned-column-border)}.ag-pinned-left-header .ag-header-cell-resize:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}.ag-pinned-right-header .ag-header-cell-resize:after{left:50%}.ag-pinned-left-header .ag-header-cell-resize{right:-3px}.ag-pinned-right-header .ag-header-cell-resize{left:-3px}",EAe=class extends He{constructor(t,e){super(),this.isLeft=t,this.elements=e,this.getWidth=t?()=>this.beans.pinnedCols.leftWidth:()=>this.beans.pinnedCols.rightWidth}postConstruct(){this.addManagedEventListeners({[`${this.isLeft?"left":"right"}PinnedWidthChanged`]:this.onPinnedWidthChanged.bind(this)})}onPinnedWidthChanged(){const t=this.getWidth(),e=t>0;for(const n of this.elements)n&&(li(n,e),Th(n,t))}},TAe=class extends He{constructor(){super(...arguments),this.beanName="pinnedCols"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl});const t=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:t,displayedColumnsWidthChanged:t}),this.addManagedPropertyListener("domLayout",t)}checkContainerWidths(){const{gos:t,visibleCols:e,eventSvc:n}=this.beans,i=ms(t,"print"),r=i?0:e.getColsLeftWidth(),s=i?0:e.getDisplayedColumnsRightWidth();r!=this.leftWidth&&(this.leftWidth=r,n.dispatchEvent({type:"leftPinnedWidthChanged"})),s!=this.rightWidth&&(this.rightWidth=s,n.dispatchEvent({type:"rightPinnedWidthChanged"}))}keepPinnedColumnsNarrowerThanViewport(){const t=this.gridBodyCtrl.eBodyViewport,e=_S(t);if(e<=50)return;const n=this.getPinnedColumnsOverflowingViewport(e-50),i=this.gos.getCallback("processUnpinnedColumns"),{columns:r,hasLockedPinned:s}=n;let a=r;!a.length&&!s||(i&&(a=i({columns:a,viewportWidth:e})),a?.length&&(a=a.filter(o=>!Up(o)),this.setColsPinned(a,null,"viewportSizeFeature")))}createPinnedWidthFeature(t,...e){return new EAe(t,e)}setColsPinned(t,e,n){const{colModel:i,colAnimation:r,visibleCols:s,gos:a}=this.beans;if(!i.cols||!t?.length)return;if(ms(a,"print")){Tt(37);return}r?.start();let o;e===!0||e==="left"?o="left":e==="right"?o="right":o=null;const l=[];for(const u of t){if(!u)continue;const h=i.getCol(u);h&&h.getPinned()!==o&&(this.setColPinned(h,o),l.push(h))}l.length&&(s.refresh(n),DV(this.eventSvc,l,n)),r?.finish()}initCol(t){const{pinned:e,initialPinned:n}=t.colDef;e!==void 0?this.setColPinned(t,e):this.setColPinned(t,n)}setColPinned(t,e){e===!0||e==="left"?t.pinned="left":e==="right"?t.pinned="right":t.pinned=null,t.dispatchStateUpdatedEvent("pinned")}setupHeaderPinnedWidth(t){const{scrollVisibleSvc:e}=this.beans;if(t.pinned==null)return;const n=t.pinned==="left",i=t.pinned==="right";t.hidden=!0;const r=()=>{const s=n?this.leftWidth:this.rightWidth;if(s==null)return;const a=s==0,o=t.hidden!==a,l=this.gos.get("enableRtl"),u=e.getScrollbarWidth(),g=e.verticalScrollShowing&&(l&&n||!l&&i)?s+u:s;t.comp.setPinnedContainerWidth(`${g}px`),t.comp.setDisplayed(!a),o&&(t.hidden=a,t.refresh())};t.addManagedEventListeners({leftPinnedWidthChanged:r,rightPinnedWidthChanged:r,scrollVisibilityChanged:r,scrollbarWidthChanged:r})}getHeaderResizeDiff(t,e){if(e.getPinned()){const{leftWidth:i,rightWidth:r}=this,s=_S(this.beans.ctrlsSvc.getGridBodyCtrl().eBodyViewport)-50;if(i+r+t>s)if(s>i+r)t=s-i-r;else return 0}return t}getPinnedColumnsOverflowingViewport(t){const e=this.rightWidth??0,n=this.leftWidth??0,i=e+n;let r=!1;if(i<t)return{columns:[],hasLockedPinned:r};const{visibleCols:s}=this.beans,a=[...s.leftCols],o=[...s.rightCols];let l=0,u=0;const h=0,g=[];let v=i-h-t;for(;(u<a.length||l<o.length)&&v>0;){if(l<o.length){const y=o[l++];if(y.colDef.lockPinned){r=!0;continue}v-=y.getActualWidth(),g.push(y)}if(u<a.length&&v>0){const y=a[u++];if(y.colDef.lockPinned){r=!0;continue}v-=y.getActualWidth(),g.push(y)}}return{columns:g,hasLockedPinned:r}}},RAe={moduleName:"PinnedColumn",version:kn,beans:[TAe],css:[AAe]},DAe=class extends Ql{constructor(){super(),this.beanName="ariaAnnounce",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.lastAnnouncement="",this.updateAnnouncement=I0(this,this.updateAnnouncement.bind(this),200)}postConstruct(){const t=this.beans,e=lo(t),n=this.descriptionContainer=e.createElement("div");n.classList.add("ag-aria-description-container"),jz(n,"polite"),mye(n,"additions text"),pye(n,!0),t.eRootDiv.appendChild(n)}announceValue(t,e){this.pendingAnnouncements.set(e,t),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;const t=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{this.handleAnnouncementUpdate(t)},50)}handleAnnouncementUpdate(t){if(!this.isAlive()||!this.descriptionContainer)return;let e=t;if(e==null||e.replace(/[ .]/g,"")==""){this.lastAnnouncement="";return}this.lastAnnouncement===e&&(e=`${e}`),this.lastAnnouncement=e,this.descriptionContainer.textContent=e}destroy(){super.destroy();const{descriptionContainer:t}=this;t&&(pC(t),t.remove()),this.descriptionContainer=null,this.pendingAnnouncements.clear()}},MAe=class extends DAe{},_Ae={moduleName:"Aria",version:kn,beans:[MAe]},PAe=":where(.ag-delay-render){.ag-cell,.ag-header-cell,.ag-header-group-cell,.ag-row,.ag-spanned-cell-wrapper{visibility:hidden}}",k7="ag-delay-render",OAe=class extends He{constructor(){super(...arguments),this.beanName="colDelayRenderSvc",this.hideRequested=!1,this.alreadyRevealed=!1,this.timesRetried=0,this.requesters=new Set}hideColumns(t){this.alreadyRevealed||this.requesters.has(t)||(this.requesters.add(t),this.hideRequested||(this.beans.ctrlsSvc.whenReady(this,e=>{e.gridBodyCtrl.eGridBody.classList.add(k7)}),this.hideRequested=!0))}revealColumns(t){if(this.alreadyRevealed||!this.isAlive()||(this.requesters.delete(t),this.requesters.size>0))return;const{renderStatus:e,ctrlsSvc:n}=this.beans;if(e){if(!e.areHeaderCellsRendered()&&this.timesRetried<5){this.timesRetried++,setTimeout(()=>this.revealColumns(t));return}this.timesRetried=0}n.getGridBodyCtrl().eGridBody.classList.remove(k7),this.alreadyRevealed=!0}},LAe={moduleName:"ColumnDelayRender",version:kn,beans:[OAe],css:[PAe]};function FAe(t){t.overlays?.showLoadingOverlay()}function kAe(t){t.overlays?.showNoRowsOverlay()}function NAe(t){t.overlays?.hideOverlay()}var BAe=".ag-overlay{inset:0;pointer-events:none;position:absolute;z-index:2}.ag-overlay-panel,.ag-overlay-wrapper{display:flex;height:100%;width:100%}.ag-overlay-wrapper{align-items:center;flex:none;justify-content:center;text-align:center}.ag-overlay-exporting-wrapper,.ag-overlay-loading-wrapper,.ag-overlay-modal-wrapper{pointer-events:all}.ag-overlay-exporting-center,.ag-overlay-loading-center{background:var(--ag-background-color);border:solid var(--ag-border-width) var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-popup-shadow);display:flex;padding:var(--ag-spacing)}",IAe={tag:"div",cls:"ag-overlay",role:"presentation",children:[{tag:"div",cls:"ag-overlay-panel",role:"presentation",children:[{tag:"div",ref:"eOverlayWrapper",cls:"ag-overlay-wrapper",role:"presentation"}]}]},OU=class extends fu{constructor(){super(IAe),this.eOverlayWrapper=bt,this.activeOverlay=null,this.activePromise=null,this.activeCssClass=null,this.elToFocusAfter=null,this.overlayExclusive=!1,this.oldWrapperPadding=null,this.registerCSS(BAe)}handleKeyDown(t){if(t.key!==Le.TAB||t.defaultPrevented||Rh(t))return;const{beans:e,eOverlayWrapper:n}=this;if(n&&hx(e,n,!1,t.shiftKey))return;let r=!1;t.shiftKey?r=e.focusSvc.focusGridView({column:On(e.visibleCols.allCols),backwards:!0,canFocusOverlay:!1}):r=Oy(e,!1),r&&t.preventDefault()}updateLayoutClasses(t,e){const n=this.eOverlayWrapper;if(!n)return;const i=n.classList,{AUTO_HEIGHT:r,NORMAL:s,PRINT:a}=Dw;i.toggle(r,e.autoHeight),i.toggle(s,e.normal),i.toggle(a,e.print)}postConstruct(){this.createManagedBean(new u5(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.beans.overlays.setWrapperComp(this,!1),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)}),this.addManagedEventListeners({gridSizeChanged:this.refreshWrapperPadding.bind(this)})}setWrapperTypeClass(t){const e=this.eOverlayWrapper?.classList;if(!e){this.activeCssClass=null;return}this.activeCssClass&&e.toggle(this.activeCssClass,!1),this.activeCssClass=t,e.toggle(t,!0)}showOverlay(t,e,n){if(this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=t,this.overlayExclusive=n,!t)return this.refreshWrapperPadding(),Fr.resolve();if(this.setWrapperTypeClass(e),this.setDisplayed(!0,{skipAriaHidden:!0}),this.refreshWrapperPadding(),n&&this.isGridFocused()){const i=kr(this.beans);i&&!zz(this.beans)&&(this.elToFocusAfter=i)}return t.then(i=>{const r=this.eOverlayWrapper;if(!r){this.destroyBean(i);return}if(this.activePromise!==t){this.activeOverlay!==i&&(this.destroyBean(i),i=null);return}this.activePromise=null,i&&(this.activeOverlay!==i&&(r.appendChild(i.getGui()),this.activeOverlay=i),n&&this.isGridFocused()&&GS(r))}),t}refreshWrapperPadding(){if(!this.eOverlayWrapper){this.oldWrapperPadding=null;return}const t=!!this.activeOverlay||!!this.activePromise;let e=0;t&&!this.overlayExclusive&&(e=this.beans.ctrlsSvc.get("gridHeaderCtrl")?.headerHeight||0),e!==this.oldWrapperPadding&&(this.oldWrapperPadding=e,this.eOverlayWrapper.style.setProperty("padding-top",`${e}px`))}destroyActiveOverlay(){this.activePromise=null;const t=this.activeOverlay;if(!t){this.overlayExclusive=!1,this.elToFocusAfter=null,this.refreshWrapperPadding();return}let e=this.elToFocusAfter;this.elToFocusAfter=null,this.activeOverlay=null,this.overlayExclusive=!1,e&&!this.isGridFocused()&&(e=null),this.destroyBean(t);const n=this.eOverlayWrapper;n&&pC(n),e?.focus?.({preventScroll:!0}),this.refreshWrapperPadding()}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}isGridFocused(){const t=kr(this.beans);return!!t&&this.beans.eGridDiv.contains(t)}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.beans.overlays.setWrapperComp(this,!0),super.destroy(),this.eOverlayWrapper=null}},HAe={selector:"AG-OVERLAY-WRAPPER",component:OU},GAe=["refresh"],CC=t=>({name:t,optionalMethods:GAe}),qd={id:"agLoadingOverlay",overlayType:"loading",comp:CC("loadingOverlayComponent"),wrapperCls:"ag-overlay-loading-wrapper",exclusive:!0,compKey:"loadingOverlayComponent",paramsKey:"loadingOverlayComponentParams",isSuppressed:t=>{const e=t.get("loading");return e===!1||t.get("suppressLoadingOverlay")===!0&&e!==!0}},Op={id:"agNoRowsOverlay",overlayType:"noRows",comp:CC("noRowsOverlayComponent"),wrapperCls:"ag-overlay-no-rows-wrapper",compKey:"noRowsOverlayComponent",paramsKey:"noRowsOverlayComponentParams",isSuppressed:t=>t.get("suppressNoRowsOverlay")},m5={id:"agNoMatchingRowsOverlay",overlayType:"noMatchingRows",comp:CC("noMatchingRowsOverlayComponent"),wrapperCls:"ag-overlay-no-matching-rows-wrapper"},KS={id:"agExportingOverlay",overlayType:"exporting",comp:CC("exportingOverlayComponent"),wrapperCls:"ag-overlay-exporting-wrapper",exclusive:!0},Lw={id:"activeOverlay",comp:CC("activeOverlay"),wrapperCls:"ag-overlay-modal-wrapper",exclusive:!0},zAe=t=>t?{agLoadingOverlay:qd,agNoRowsOverlay:Op,agNoMatchingRowsOverlay:m5,agExportingOverlay:KS}[t]??Lw:null,VAe=t=>t?{loading:qd,noRows:Op,noMatchingRows:m5,exporting:KS}[t]:null,UAe=class extends He{constructor(){super(...arguments),this.beanName="overlays",this.eWrapper=void 0,this.exclusive=!1,this.oldExclusive=!1,this.currentDef=null,this.showInitialOverlay=!0,this.userForcedNoRows=!1,this.exportsInProgress=0,this.newColumnsLoadedCleanup=null}postConstruct(){const t=this.gos;this.showInitialOverlay=mC(t);const e=()=>{this.userForcedNoRows||this.updateOverlay(!1)},[n,i,r,s]=this.addManagedEventListeners({newColumnsLoaded:e,rowCountReady:()=>{this.disableInitialOverlay(),e(),i()},rowDataUpdated:e,modelUpdated:e});this.newColumnsLoadedCleanup=n,this.addManagedPropertyListeners(["loading","activeOverlay","activeOverlayParams","overlayComponentParams","loadingOverlayComponentParams","noRowsOverlayComponentParams"],a=>this.onPropChange(new Set(a.changeSet?.properties)))}destroy(){this.doHideOverlay(),super.destroy(),this.eWrapper=void 0}setWrapperComp(t,e){this.isAlive()&&(e?this.eWrapper===t&&(this.eWrapper=void 0):this.eWrapper=t,this.updateOverlay(!1))}isVisible(){return!!this.currentDef}showLoadingOverlay(){this.showInitialOverlay=!1;const t=this.gos;if(!this.eWrapper||t.get("activeOverlay")||this.isDisabled(qd))return;const e=t.get("loading");!e&&e!==void 0||this.doShowOverlay(qd)}showNoRowsOverlay(){this.showInitialOverlay=!1;const t=this.gos;!this.eWrapper||t.get("activeOverlay")||t.get("loading")||this.isDisabled(Op)||(this.userForcedNoRows=!0,this.doShowOverlay(Op))}async showExportOverlay(t){const{gos:e,beans:n}=this;if(!this.eWrapper||e.get("activeOverlay")||e.get("loading")||this.isDisabled(KS)||this.userForcedNoRows&&this.currentDef===Op){t();return}const i=this.getDesiredDefWithOverride(KS);if(!i){t();return}this.exportsInProgress++,this.focusedCell=n.focusSvc.getFocusedCell(),await this.doShowOverlay(i),await new Promise(s=>setTimeout(()=>s()));const r=Date.now();try{t()}finally{const s=Date.now()-r,a=Math.max(0,300-s),o=()=>{this.exportsInProgress--,this.exportsInProgress===0&&(this.updateOverlay(!1),zbe(n,this.focusedCell),this.focusedCell=null)};a>0?setTimeout(()=>o(),a):o()}}hideOverlay(){const t=this.gos;this.showInitialOverlay=!1;const e=this.userForcedNoRows;if(this.userForcedNoRows=!1,t.get("loading")){Tt(99);return}if(t.get("activeOverlay")){Tt(296);return}if(this.currentDef===m5){Tt(297);return}this.doHideOverlay(),e&&this.getOverlayDef()!==Op&&this.updateOverlay(!1)}getOverlayWrapperSelector(){return HAe}getOverlayWrapperCompClass(){return OU}onPropChange(t){const e=t.has("activeOverlay");if((e||t.has("loading"))&&this.updateOverlay(e))return;const n=this.currentDef,i=this.eWrapper?.activeOverlay;if(i&&n){const r=t.has("activeOverlayParams");if(n===Lw)r&&i.refresh?.(this.makeCompParams(!0));else{const s=n.paramsKey;(t.has("overlayComponentParams")||s&&t.has(s))&&i.refresh?.(this.makeCompParams(!1,s,n.overlayType))}}}updateOverlay(t){const e=this.eWrapper;if(!e)return this.currentDef=null,!1;const n=this.getDesiredDefWithOverride(),i=this.currentDef,r=n===Lw&&t;return n!==i?n?(this.doShowOverlay(n),!0):(this.disableInitialOverlay(),this.doHideOverlay()):r&&n?(e.hideOverlay(),this.doShowOverlay(n),!0):(n||this.disableInitialOverlay(),!1)}getDesiredDefWithOverride(t){const{gos:e}=this;let n=zAe(e.get("activeOverlay"));return n||(n=t??this.getOverlayDef(),n&&this.isDisabled(n)&&(n=null)),n}getOverlayDef(){const{gos:t,beans:e}=this,{rowModel:n}=e,i=t.get("loading");if(i!==void 0){if(this.disableInitialOverlay(),i)return qd}else if(this.showInitialOverlay){if(!this.isDisabled(qd)&&(!t.get("columnDefs")||!t.get("rowData")))return qd;this.disableInitialOverlay()}else this.disableInitialOverlay();const s=n.getOverlayType();return VAe(s)}disableInitialOverlay(){this.showInitialOverlay=!1,this.newColumnsLoadedCleanup?.(),this.newColumnsLoadedCleanup=null}doShowOverlay(t){const{gos:e,beans:n}=this,{userCompFactory:i}=n;this.currentDef=t;const r=t!==Lw,s=!!t.exclusive;this.exclusive=s;let a;(t.paramsKey&&e.get(t.paramsKey)||t.compKey&&e.get(t.compKey))&&(a=t.paramsKey);let o;r&&(e.get("overlayComponent")||e.get("overlayComponentSelector"))&&(o=i.getCompDetailsFromGridOptions({name:"overlayComponent",optionalMethods:["refresh"]},void 0,this.makeCompParams(!1,t.paramsKey,t.overlayType))),o??(o=i.getCompDetailsFromGridOptions(t.comp,r?t.id:void 0,this.makeCompParams(!r,a,t.overlayType),!1));const l=o?.newAgStackInstance()??null,u=this.eWrapper?this.eWrapper.showOverlay(l,t.wrapperCls,s):Fr.resolve();return this.eWrapper?.refreshWrapperPadding(),this.setExclusive(s),u}makeCompParams(t,e,n){const{gos:i}=this,r=t?i.get("activeOverlayParams"):{...i.get("overlayComponentParams"),...e&&i.get(e)||null,overlayType:n};return Pn(i,r??{})}doHideOverlay(){let t=!1;this.currentDef&&(this.currentDef=null,t=!0),this.exclusive=!1;const e=this.eWrapper;return e&&(e.hideOverlay(),e.refreshWrapperPadding(),this.setExclusive(!1)),t}setExclusive(t){this.oldExclusive!==t&&(this.oldExclusive=t,this.eventSvc.dispatchEvent({type:"overlayExclusiveChanged"}))}isDisabled(t){const{gos:e}=this;return t.overlayType&&e.get("suppressOverlays")?.includes(t.overlayType)||t.isSuppressed?.(e)===!0}},jAe={moduleName:"Overlay",version:kn,userComponents:{agLoadingOverlay:r1e,agNoRowsOverlay:l1e,agNoMatchingRowsOverlay:a1e,agExportingOverlay:n1e},apiFunctions:{showLoadingOverlay:FAe,showNoRowsOverlay:kAe,hideOverlay:NAe},icons:{overlayLoading:"loading",overlayExporting:"loading"},beans:[UAe]},WAe=class extends He{constructor(){super(...arguments),this.beanName="rowContainerHeight",this.scrollY=0,this.uiBodyHeight=0}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=_be(),LS(this.gos,"RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}updateOffset(){if(!this.stretching)return;const t=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition().top,e=this.getUiBodyHeight();(t!==this.scrollY||e!==this.uiBodyHeight)&&(this.scrollY=t,this.uiBodyHeight=e,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const t=this.scrollY/this.maxScrollY,e=t*this.pixelsToShave;LS(this.gos,`RowContainerHeightService - Div Stretch Offset = ${e} (${this.pixelsToShave} * ${t})`),this.setDivStretchOffset(e)}setUiContainerHeight(t){t!==this.uiContainerHeight&&(this.uiContainerHeight=t,this.eventSvc.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(t){const e=typeof t=="number"?Math.floor(t):null;this.divStretchOffset!==e&&(this.divStretchOffset=e,this.eventSvc.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(t){this.modelHeight=t,this.stretching=t!=null&&this.maxDivHeight>0&&t>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getRealPixelPosition(t){return t-this.divStretchOffset}getUiBodyHeight(){const t=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition();return t.bottom-t.top}getScrollPositionForPixel(t){if(this.pixelsToShave<=0)return t;const e=this.modelHeight-this.getUiBodyHeight(),n=t/e;return this.maxScrollY*n}},qAe=400,KAe=class extends He{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const t=()=>{for(const s of this.getAllCellCtrls())s.onCellSelectionChanged()},e=()=>{for(const s of this.getAllCellCtrls())s.updateRangeBordersIfRangeCount()},n=()=>{this.eventSvc.addListener("cellSelectionChanged",t),this.eventSvc.addListener("columnMoved",e),this.eventSvc.addListener("columnPinned",e),this.eventSvc.addListener("columnVisible",e)},i=()=>{this.eventSvc.removeListener("cellSelectionChanged",t),this.eventSvc.removeListener("columnMoved",e),this.eventSvc.removeListener("columnPinned",e),this.eventSvc.removeListener("columnVisible",e)};this.addDestroyFunc(()=>i()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{My(this.gos)?n():i()}),My(this.gos)&&n()}}wireBeans(t){this.pageBounds=t.pageBounds,this.colModel=t.colModel,this.pinnedRowModel=t.pinnedRowModel,this.rowModel=t.rowModel,this.focusSvc=t.focusSvc,this.rowContainerHeight=t.rowContainerHeight,this.ctrlsSvc=t.ctrlsSvc,this.editSvc=t.editSvc}postConstruct(){this.ctrlsSvc.whenReady(this,t=>{this.gridBodyCtrl=t.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),pinnedRowsChanged:this.onPinnedRowsChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",i=>this.onSuppressCellFocusChanged(i.currentValue)),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.addManagedPropertyListener("cellSelection",({currentValue:i,previousValue:r})=>{(!r&&i||r&&!i)&&this.redrawRows()});const{stickyRowSvc:t,gos:e,showRowGroupCols:n}=this.beans;if(n&&this.addManagedPropertyListener("showOpenedGroup",()=>{const i=n.columns;i.length&&this.refreshCells({columns:i,force:!0})}),t)this.stickyRowFeature=t.createStickyRowFeature(this,this.createRowCon.bind(this),this.destroyRowCtrls.bind(this));else{const i=this.gridBodyCtrl;i.setStickyTopHeight(0),i.setStickyBottomHeight(0)}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=ms(e,"print"),this.embedFullWidthRows=this.printLayout||e.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const t=this.getKeepDetailRowsCount(),e=t??3;this.cachedRowCtrls=new YAe(e)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?.stickyTopRowCtrls??[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?.stickyBottomRowCtrls??[]}updateAllRowCtrls(){const t=Object.values(this.rowCtrlsByRowIndex),e=Object.values(this.zombieRowCtrls),n=this.cachedRowCtrls?.getEntries()??[];e.length>0||n.length>0?this.allRowCtrls=[...t,...e,...n]:this.allRowCtrls=t}isCellBeingRendered(t,e){const n=this.rowCtrlsByRowIndex[t];return!e||!n?!!n:n.isFullWidth()?!0:!!this.beans.spannedRowRenderer?.getCellByPosition({rowIndex:t,column:e,rowPinned:null})||!!n.getCellCtrl(e)||!n.isRowRendered()}updateCellFocus(t){for(const e of this.getAllCellCtrls())e.onCellFocused(t);for(const e of this.getFullWidthRowCtrls())e.onFullWidthRowFocused(t)}onCellFocusChanged(t){if(t?.rowIndex!=null&&!t.rowPinned){const e=this.beans.colModel.getCol(t.column)??void 0;this.isCellBeingRendered(t.rowIndex,e)||this.redraw()}this.updateCellFocus(t)}onSuppressCellFocusChanged(t){for(const e of this.getAllCellCtrls())e.onSuppressCellFocusChanged(t);for(const e of this.getFullWidthRowCtrls())e.onSuppressCellFocusChanged(t)}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:t=>this.onCellFocusChanged(t),cellFocusCleared:()=>this.updateCellFocus(),flashCells:t=>{const{cellFlashSvc:e}=this.beans;if(e)for(const n of this.getAllCellCtrls())e.onFlashCells(n,t)},columnHoverChanged:()=>{for(const t of this.getAllCellCtrls())t.onColumnHover()},displayedColumnsChanged:()=>{for(const t of this.getAllCellCtrls())t.onDisplayedColumnsChanged()},displayedColumnsWidthChanged:()=>{if(this.printLayout)for(const t of this.getAllCellCtrls())t.onLeftChanged()}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){for(const t of this.destroyFuncsForColumnListeners)t();this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners();const t=this.colModel.getCols();for(const e of t){const n=l=>{for(const u of this.getAllCellCtrls())u.column===e&&l(u)},i=()=>{n(l=>l.onLeftChanged())},r=()=>{n(l=>l.onWidthChanged())},s=()=>{n(l=>l.onFirstRightPinnedChanged())},a=()=>{n(l=>l.onLastLeftPinnedChanged())},o=()=>{n(l=>l.onColDefChanged())};e.__addEventListener("leftChanged",i),e.__addEventListener("widthChanged",r),e.__addEventListener("firstRightPinnedChanged",s),e.__addEventListener("lastLeftPinnedChanged",a),e.__addEventListener("colDefChanged",o),this.destroyFuncsForColumnListeners.push(()=>{e.__removeEventListener("leftChanged",i),e.__removeEventListener("widthChanged",r),e.__removeEventListener("firstRightPinnedChanged",s),e.__removeEventListener("lastLeftPinnedChanged",a),e.__removeEventListener("colDefChanged",o)})}}onDomLayoutChanged(){const t=ms(this.gos,"print"),e=t||this.gos.get("embedFullWidthRows"),n=e!==this.embedFullWidthRows||this.printLayout!==t;this.printLayout=t,this.embedFullWidthRows=e,n&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t)}onPageLoaded(t){const e={recycleRows:t.keepRenderedRows,animate:t.animate,newData:t.newData,newPage:t.newPage,onlyBody:!0};this.redrawAfterModelUpdate(e)}getAllCellsNotSpanningForColumn(t){const e=[];for(const n of this.getAllRowCtrls()){const i=n.getCellCtrl(t,!0)?.eGui;i&&e.push(i)}return e}refreshFloatingRowComps(t=!0){this.refreshFloatingRows(this.topRowCtrls,"top",t),this.refreshFloatingRows(this.bottomRowCtrls,"bottom",t)}refreshFloatingRows(t,e,n){const{pinnedRowModel:i,beans:r,printLayout:s}=this,a=Object.fromEntries(t.map(l=>[l.rowNode.id,l]));i?.forEachPinnedRow(e,(l,u)=>{const h=t[u];h&&i.getPinnedRowById(h.rowNode.id,e)===void 0&&(h.destroyFirstPass(),h.destroySecondPass()),l.id in a&&n?(t[u]=a[l.id],delete a[l.id]):t[u]=new eM(l,r,!1,!1,s)});const o=(e==="top"?i?.getPinnedTopRowCount():i?.getPinnedBottomRowCount())??0;t.length=o}onPinnedRowDataChanged(){const t={recycleRows:!0};this.redrawAfterModelUpdate(t)}onPinnedRowsChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}redrawRow(t,e=!1){if(t.sticky)this.stickyRowFeature?.refreshStickyNode(t);else if(this.cachedRowCtrls?.has(t)){this.cachedRowCtrls.removeRow(t);return}else{const n=i=>{const r=i[t.rowIndex];r&&r.rowNode===t&&(r.destroyFirstPass(),r.destroySecondPass(),i[t.rowIndex]=this.createRowCon(t,!1,!1))};switch(t.rowPinned){case"top":n(this.topRowCtrls);break;case"bottom":n(this.bottomRowCtrls);break;default:n(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}e||this.dispatchDisplayedRowsChanged(!1)}redrawRows(t){const{editSvc:e}=this.beans;if(e?.isEditing()&&(e.isBatchEditing()?e.cleanupEditors():e.stopEditing(void 0,{source:"api"})),t!=null){for(const i of t??[])this.redrawRow(i,!0);this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}redrawAfterModelUpdate(t={}){this.getLockOnRefresh();const e=this.beans.focusSvc?.getFocusCellToUseAfterRefresh();this.updateContainerHeights(),this.scrollToTopIfNewData(t);const n=!t.domLayoutChanged&&!!t.recycleRows,i=t.animate&&e5(this.gos),r=n?this.getRowsToRecycle():null;n||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender();const{stickyRowFeature:s,gos:a}=this;if(s){s.checkStickyRows();const o=s.extraTopHeight+s.extraBottomHeight;o&&this.updateContainerHeights(o)}this.recycleRows(r,i),this.gridBodyCtrl.updateRowCount(),t.onlyBody||this.refreshFloatingRowComps(a.get("enableRowPinning")?n:void 0),this.dispatchDisplayedRowsChanged(),e!=null&&this.restoreFocusedCell(e),this.releaseLockOnRefresh()}scrollToTopIfNewData(t){const e=t.newData||t.newPage,n=this.gos.get("suppressScrollOnNewData");e&&!n&&(this.gridBodyCtrl.scrollFeature.scrollToTop(),this.stickyRowFeature?.resetOffsets())}updateContainerHeights(t=0){const{rowContainerHeight:e}=this;if(this.printLayout){e.setModelHeight(null);return}let n=this.pageBounds.getCurrentPageHeight();n===0&&(n=1),e.setModelHeight(n+t)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error(zD(252));this.refreshInProgress=!0,this.beans.frameworkOverrides.getLockOnRefresh?.()}releaseLockOnRefresh(){this.refreshInProgress=!1,this.beans.frameworkOverrides.releaseLockOnRefresh?.()}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(t){if(!t)return;const e=this.beans.focusSvc,n=this.findPositionToFocus(t);if(!n){e.focusHeaderPosition({headerPosition:{headerRowIndex:Vl(this.beans)-1,column:t.column}});return}if(t.rowIndex!==n.rowIndex||t.rowPinned!=n.rowPinned){e.setFocusedCell({...n,preventScrollOnBrowserFocus:!0,forceBrowserFocus:!0});return}e.doesRowOrCellHaveBrowserFocus()||this.updateCellFocus(Pn(this.gos,{...n,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))}findPositionToFocus(t){const{pagination:e,pageBounds:n}=this.beans;let i=t;for(i.rowPinned==null&&e&&n&&!e.isRowInPage(i.rowIndex)&&(i={rowPinned:null,rowIndex:n.getFirstRow()});i;){if(i.rowPinned==null&&n)if(i.rowIndex<n.getFirstRow()){if(i=VS(this.beans,{rowPinned:null,rowIndex:0}),!i)return null}else i.rowIndex>n.getLastRow()&&(i={rowPinned:null,rowIndex:n.getLastRow()});const r=this.getRowByPosition(i);if(r?.isAlive())return{...r.getRowPosition(),column:t.column};i=VS(this.beans,i)}return null}getAllCellCtrls(){const t=[],e=this.getAllRowCtrls(),n=e.length;for(let i=0;i<n;i++){const r=e[i].getAllCellCtrls(),s=r.length;for(let a=0;a<s;a++)t.push(r[a])}return t}getAllRowCtrls(){const{spannedRowRenderer:t}=this.beans,e=this.getStickyTopRowCtrls(),n=this.getStickyBottomRowCtrls();return[...this.topRowCtrls,...this.bottomRowCtrls,...e,...n,...t?.getCtrls("top")??[],...t?.getCtrls("bottom")??[],...t?.getCtrls("center")??[],...Object.values(this.rowCtrlsByRowIndex)]}addRenderedRowListener(t,e,n){const i=this.rowCtrlsByRowIndex[e];i&&i.addEventListener(t,n)}refreshCells({rowNodes:t,columns:e,force:n,suppressFlash:i}={}){const r={force:n,newData:!1,suppressFlash:i};for(const s of this.getCellCtrls(t,e))s.refreshOrDestroyCell(r);this.refreshFullWidth(t)}refreshRows(t={}){for(const e of this.getRowCtrls(t.rowNodes))e.refreshRow(t);this.refreshFullWidth(t.rowNodes)}refreshFullWidth(t){if(!t)return;let e=!1;for(const n of this.getRowCtrls(t)){if(!n.isFullWidth())continue;n.refreshFullWidth()||(e=!0,this.redrawRow(n.rowNode,!0))}e&&this.dispatchDisplayedRowsChanged(!1)}getRowCtrls(t){const e=N7(t),n=this.getAllRowCtrls();return!t||!e?n:n.filter(i=>{const r=i.rowNode;return B7(r,e)})}getCellCtrls(t,e){let n;Et(e)&&(n={},e.forEach(r=>{const s=this.colModel.getCol(r);Et(s)&&(n[s.getId()]=!0)}));const i=[];for(const r of this.getRowCtrls(t))for(const s of r.getAllCellCtrls()){const a=s.column.getId();n&&!n[a]||i.push(s)}return i}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(t=!1){const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e,t),this.stickyRowFeature?.destroyStickyCtrls()}getRowsToRecycle(){const t=[];for(const n of Object.keys(this.rowCtrlsByRowIndex))this.rowCtrlsByRowIndex[n].rowNode.id==null&&t.push(n);this.removeRowCtrls(t);const e={};for(const n of Object.values(this.rowCtrlsByRowIndex)){const i=n.rowNode;e[i.id]=n}return this.rowCtrlsByRowIndex={},e}removeRowCtrls(t,e=!1){for(const n of t){const i=this.rowCtrlsByRowIndex[n];i&&(i.destroyFirstPass(e),i.destroySecondPass()),delete this.rowCtrlsByRowIndex[n]}}onBodyScroll(t){t.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(t={}){const{focusSvc:e,animationFrameSvc:n}=this.beans,{afterScroll:i}=t;let r;const s=this.stickyRowFeature;s&&(r=e?.getFocusCellToUseAfterRefresh()||void 0);const a=this.firstRenderedRow,o=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let l=!1;if(s){l=s.checkStickyRows();const h=s.extraTopHeight+s.extraBottomHeight;h&&this.updateContainerHeights(h)}const u=this.firstRenderedRow!==a||this.lastRenderedRow!==o;if(!(i&&!l&&!u)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,i),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(i&&!l),r!=null)){const h=e?.getFocusCellToUseAfterRefresh();r!=null&&h==null&&(n?.flushAllFrames(),this.restoreFocusedCell(r))}}removeRowCompsNotToDraw(t,e){const n={};for(const s of t)n[s]=!0;const r=Object.keys(this.rowCtrlsByRowIndex).filter(s=>!n[s]);this.removeRowCtrls(r,e)}calculateIndexesToDraw(t){const e=[];for(let a=this.firstRenderedRow;a<=this.lastRenderedRow;a++)e.push(a);const n=this.beans.pagination,i=this.beans.focusSvc?.getFocusedCell()?.rowIndex;i!=null&&(i<this.firstRenderedRow||i>this.lastRenderedRow)&&(!n||n.isRowInPage(i))&&i<this.rowModel.getRowCount()&&e.push(i);const r=a=>{const o=a.rowNode.rowIndex;o==null||o===i||(o<this.firstRenderedRow||o>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(a)&&e.push(o)};for(const a of Object.values(this.rowCtrlsByRowIndex))r(a);if(t)for(const a of Object.values(t))r(a);e.sort((a,o)=>a-o);const s=[];for(let a=0;a<e.length;a++){const o=e[a],l=this.rowModel.getRow(o);l&&!l.sticky&&s.push(o)}return s}recycleRows(t,e=!1,n=!1){const i=this.calculateIndexesToDraw(t);(this.printLayout||n)&&(e=!1),this.removeRowCompsNotToDraw(i,!e);for(const r of i)this.createOrUpdateRowCtrl(r,t,e,n);if(t){const{animationFrameSvc:r}=this.beans;r?.active&&n&&!this.printLayout?r.addDestroyTask(()=>{this.destroyRowCtrls(t,e),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(t,e)}this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(t=!1){this.eventSvc.dispatchEvent({type:"displayedRowsChanged",afterScroll:t})}onDisplayedColumnsChanged(){const{visibleCols:t}=this.beans,e=t.isPinningLeft(),n=t.isPinningRight();(this.pinningLeft!==e||n!==this.pinningRight)&&(this.pinningLeft=e,this.pinningRight=n,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const t=[];for(const e of this.getFullWidthRowCtrls()){const n=e.rowNode.rowIndex;t.push(n.toString())}this.refreshFloatingRowComps(),this.removeRowCtrls(t),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(t){const e=N7(t);return this.getAllRowCtrls().filter(n=>{if(!n.isFullWidth())return!1;const i=n.rowNode;return!(e!=null&&!B7(i,e))})}createOrUpdateRowCtrl(t,e,n,i){let r,s=this.rowCtrlsByRowIndex[t];if(s||(r=this.rowModel.getRow(t),Et(r)&&Et(e)&&e[r.id]&&r.alreadyRendered&&(s=e[r.id],e[r.id]=null)),!s)if(r||(r=this.rowModel.getRow(t)),Et(r))s=this.createRowCon(r,n,i);else return;r&&(r.alreadyRendered=!0),this.rowCtrlsByRowIndex[t]=s}destroyRowCtrls(t,e){const n=[];if(t){for(const i of Object.values(t))if(i){if(this.cachedRowCtrls&&i.isCacheable()){this.cachedRowCtrls.addRow(i);continue}if(i.destroyFirstPass(!e),e){const r=i.instanceId;this.zombieRowCtrls[r]=i,n.push(()=>{i.destroySecondPass(),delete this.zombieRowCtrls[r]})}else i.destroySecondPass()}}e&&(n.push(()=>{this.isAlive()&&(this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged())}),window.setTimeout(()=>{for(const i of n)i()},qAe))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){const t=this.getRowBuffer(),e=yV(this.beans);return t*e}workOutFirstAndLastRowsToRender(){const{rowContainerHeight:t,pageBounds:e,rowModel:n}=this;t.updateOffset();let i,r;if(!n.isRowsToRender())i=0,r=-1;else if(this.printLayout)this.beans.environment.refreshRowHeightVariable(),i=e.getFirstRow(),r=e.getLastRow();else{const h=this.getRowBufferInPixels(),g=this.ctrlsSvc.getScrollFeature(),v=this.gos.get("suppressRowVirtualisation");let y=!1,w,S;do{const F=e.getPixelOffset(),{pageFirstPixel:L,pageLastPixel:k}=e.getCurrentPagePixelRange(),B=t.divStretchOffset,H=g.getVScrollPosition(),U=H.top,W=H.bottom;v?(w=L+B,S=k+B):(w=Math.max(U+F-h,L)+B,S=Math.min(W+F+h,k)+B),this.firstVisibleVPixel=Math.max(U+F,L)+B,this.lastVisibleVPixel=Math.min(W+F,k)+B,y=this.ensureAllRowsInRangeHaveHeightsCalculated(w,S)}while(y);let x=n.getRowIndexAtPixel(w),T=n.getRowIndexAtPixel(S);const _=e.getFirstRow(),M=e.getLastRow();x<_&&(x=_),T>M&&(T=M),i=x,r=T}const s=ms(this.gos,"normal"),a=this.gos.get("suppressMaxRenderedRowRestriction"),o=Math.max(this.getRowBuffer(),500);s&&!a&&r-i>o&&(r=i+o);const l=i!==this.firstRenderedRow,u=r!==this.lastRenderedRow;(l||u)&&(this.firstRenderedRow=i,this.lastRenderedRow=r,this.eventSvc.dispatchEvent({type:"viewportChanged",firstRow:i,lastRow:r}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,Kh(this.beans,()=>{this.beans.eventSvc.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(t,e){const n=this.pinnedRowModel?.ensureRowHeightsValid(),i=this.stickyRowFeature?.ensureRowHeightsValid(),{pageBounds:r,rowModel:s}=this,a=s.ensureRowHeightsValid(t,e,r.getFirstRow(),r.getLastRow());return(a||i)&&this.eventSvc.dispatchEvent({type:"recalculateRowBounds"}),i||a||n?(this.updateContainerHeights(),!0):!1}doNotUnVirtualiseRow(t){const i=t.rowNode,r=this.focusSvc.isRowFocused(i.rowIndex,i.rowPinned),s=this.editSvc?.isEditing(t),a=i.detail;return r||s||a?!!this.isRowPresent(i):!1}isRowPresent(t){return this.rowModel.isRowPresent(t)?this.beans.pagination?.isRowInPage(t.rowIndex)??!0:!1}createRowCon(t,e,n){const i=this.cachedRowCtrls?.getRow(t)??null;if(i)return i;const r=n&&!this.printLayout&&!!this.beans.animationFrameSvc?.active;return new eM(t,this.beans,e,r,this.printLayout)}getRenderedNodes(){const t=Object.values(this.rowCtrlsByRowIndex).map(i=>i.rowNode),e=this.getStickyTopRowCtrls().map(i=>i.rowNode),n=this.getStickyBottomRowCtrls().map(i=>i.rowNode);return[...e,...t,...n]}getRowByPosition(t){let e;const{rowIndex:n}=t;switch(t.rowPinned){case"top":e=this.topRowCtrls[n];break;case"bottom":e=this.bottomRowCtrls[n];break;default:e=this.rowCtrlsByRowIndex[n],e||(e=this.getStickyTopRowCtrls().find(i=>i.rowNode.rowIndex===n)||null,e||(e=this.getStickyBottomRowCtrls().find(i=>i.rowNode.rowIndex===n)||null));break}return e}isRangeInRenderedViewport(t,e){if(t==null||e==null)return!1;const i=t>this.lastRenderedRow;return!(e<this.firstRenderedRow)&&!i}},YAe=class{constructor(t){this.entriesMap={},this.entriesList=[],this.maxCount=t}addRow(t){if(this.entriesMap[t.rowNode.id]=t,this.entriesList.push(t),t.setCached(!0),this.entriesList.length>this.maxCount){const e=this.entriesList[0];e.destroyFirstPass(),e.destroySecondPass(),this.removeFromCache(e)}}getRow(t){if(t?.id==null)return null;const e=this.entriesMap[t.id];return e?(this.removeFromCache(e),e.setCached(!1),e.rowNode!=t?null:e):null}has(t){return this.entriesMap[t.id]!=null}removeRow(t){const e=t.id,n=this.entriesMap[e];delete this.entriesMap[e],rm(this.entriesList,n)}removeFromCache(t){const e=t.rowNode.id;delete this.entriesMap[e],rm(this.entriesList,t)}getEntries(){return this.entriesList}};function N7(t){if(!t)return;const e={top:{},bottom:{},normal:{}};for(const n of t){const i=n.id;switch(n.rowPinned){case"top":e.top[i]=n;break;case"bottom":e.bottom[i]=n;break;default:e.normal[i]=n;break}}return e}function B7(t,e){const n=t.id;switch(t.rowPinned){case"top":return e.top[n]!=null;case"bottom":return e.bottom[n]!=null;default:return e.normal[n]!=null}}var XAe=class extends He{constructor(){super(...arguments),this.beanName="rowNodeSorter",this.accentedSort=!1,this.primaryColumnsSortGroups=!1,this.pivotActive=!1}postConstruct(){this.firstLeaf=mC(this.gos)?bwe:$Ae,this.addManagedPropertyListeners(["accentedSort","autoGroupColumnDef","treeData"],this.updateOptions.bind(this));const t=this.updatePivotModeState.bind(this);this.addManagedEventListeners({columnPivotModeChanged:t,columnPivotChanged:t}),this.updateOptions(),t()}updateOptions(){this.accentedSort=!!this.gos.get("accentedSort"),this.primaryColumnsSortGroups=xh(this.gos)}updatePivotModeState(){this.pivotActive=this.beans.colModel.isPivotActive()}doFullSortInPlace(t,e){return t.sort((n,i)=>this.compareRowNodes(e,n,i))}compareRowNodes(t,e,n){if(e===n)return 0;const i=this.accentedSort;for(let r=0,s=t.length;r<s;++r){const a=t[r],o=a.sort==="desc";let l=this.getValue(e,a.column),u=this.getValue(n,a.column),h;const g=this.getComparator(a,e);if(g?h=g(l,u,e,n,o):(a.type==="absolute"&&(l=I7(l),u=I7(u)),h=oye(l,u,i)),h)return a.sort==="asc"?h:-h}return 0}getComparator(t,e){const n=t.column.getColDef(),i=this.getComparatorFromColDef(n,t);if(i)return i;if(!n.showRowGroup)return;const r=!e.group&&n.field;if(!r)return;const s=this.beans.colModel.getColDefCol(r);if(s)return this.getComparatorFromColDef(s.getColDef(),t)}getComparatorFromColDef(t,e){const n=t.comparator;if(n!=null)return typeof n=="object"?n[iu(e.type)]:n}getValue(t,e){const n=this.beans;if(this.primaryColumnsSortGroups){if(t.rowGroupColumn===e)return this.getGroupDataValue(t,e);if(t.group&&e.getColDef().showRowGroup)return}const i=n.valueSvc.getValue(e,t,"data");if(e.isAllowFormula()){const r=n.formula;if(r?.isFormula(i))return r.resolveValue(e,t)}return i}getGroupDataValue(t,e){if(wV(this.gos,this.pivotActive)){const i=this.firstLeaf(t);return i&&this.beans.valueSvc.getValue(e,i,"data")}const n=this.beans.showRowGroupCols?.getShowRowGroupCol(e.getId());return n?t.groupData?.[n.getId()]:void 0}},$Ae=t=>{if(t.data)return t;let e=t.childrenAfterGroup;for(;e?.length;){const n=e[0];if(n.data)return n;e=n.childrenAfterGroup}},I7=t=>{if(!t)return t;if(typeof t=="bigint")return t<0n?-t:t;const e=Number(t);return isNaN(e)?t:Math.abs(e)};function ZAe(t){t.sortSvc?.onSortChanged("api")}var zd=(t,e)=>({tag:"span",ref:`eSort${t}`,cls:`ag-sort-indicator-icon ag-sort-${e} ag-hidden`,attrs:{"aria-hidden":"true"}}),QAe={tag:"span",cls:"ag-sort-indicator-container",children:[zd("Order","order"),zd("Asc","ascending-icon"),zd("Desc","descending-icon"),zd("Mixed","mixed-icon"),zd("AbsoluteAsc","absolute-ascending-icon"),zd("AbsoluteDesc","absolute-descending-icon"),zd("None","none-icon")]},v5=class extends fu{constructor(t){super(),this.eSortOrder=bt,this.eSortAsc=bt,this.eSortDesc=bt,this.eSortMixed=bt,this.eSortNone=bt,this.eSortAbsoluteAsc=bt,this.eSortAbsoluteDesc=bt,t||this.setTemplate(QAe)}attachCustomElements(t,e,n,i,r,s,a){this.eSortOrder=t,this.eSortAsc=e,this.eSortDesc=n,this.eSortMixed=i,this.eSortNone=r,this.eSortAbsoluteAsc=s,this.eSortAbsoluteDesc=a}setupSort(t,e=!1){if(this.column=t,this.suppressOrder=e,this.setupMultiSortIndicator(),!t.isSortable()&&!t.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,t),this.addInIcon("sortDescending",this.eSortDesc,t),this.addInIcon("sortUnSort",this.eSortNone,t),this.addInIcon("sortAbsoluteAscending",this.eSortAbsoluteAsc,t),this.addInIcon("sortAbsoluteDescending",this.eSortAbsoluteDesc,t);const n=this.updateIcons.bind(this),i=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",n),this.addManagedEventListeners({newColumnsLoaded:n,sortChanged:i,columnRowGroupChanged:i}),this.onSortChanged()}addInIcon(t,e,n){if(e==null)return;const i=Vf(t,this.beans,n);i&&e.appendChild(i)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const{eSortAsc:t,eSortDesc:e,eSortAbsoluteAsc:n,eSortAbsoluteDesc:i,eSortNone:r,column:s,gos:a,beans:o}=this,{isDefaultSortAllowed:l,isAbsoluteSortAllowed:u,isAbsoluteSort:h,isDefaultSort:g,isAscending:v,isDescending:y,direction:w}=xCe(s,o);if(t&&li(t,v&&g&&l,{skipAriaHidden:!0}),e&&li(e,y&&g&&l,{skipAriaHidden:!0}),r){const S=!s.getColDef().unSortIcon&&!a.get("unSortIcon");li(r,!S&&!w,{skipAriaHidden:!0})}n&&li(n,v&&h&&u,{skipAriaHidden:!0}),i&&li(i,y&&h&&u,{skipAriaHidden:!0})}setupMultiSortIndicator(){const{eSortMixed:t,column:e,gos:n}=this;this.addInIcon("sortUnSort",t,e);const i=e.getColDef().showRowGroup;xh(n)&&i&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){const{eSortMixed:t,beans:e,column:n}=this;if(t){const i=e.sortSvc.getDisplaySortForColumn(n)?.direction==="mixed";li(t,i,{skipAriaHidden:!0})}}updateSortOrder(){const{eSortOrder:t,column:e,beans:{sortSvc:n}}=this;if(!t)return;const i=n.getColumnsWithSortingOrdered(),r=n.getDisplaySortIndexForColumn(e)??-1,s=i.some(o=>n.getDisplaySortIndexForColumn(o)??!1),a=r>=0&&s;li(t,a,{skipAriaHidden:!0}),r>=0?t.textContent=(r+1).toString():pC(t)}},JAe={selector:"AG-SORT-INDICATOR",component:v5},eEe=class extends He{constructor(){super(...arguments),this.beanName="sortSvc"}progressSort(t,e,n){const i=this.getNextSortDirection(t);this.setSortForColumn(t,i,e,n)}progressSortFromEvent(t,e){const i=this.gos.get("multiSortKey")==="ctrl"?e.ctrlKey||e.metaKey:e.shiftKey;this.progressSort(t,i,"uiColumnSorted")}setSortForColumn(t,e,n,i){const{gos:r,showRowGroupCols:s}=this.beans,a=xh(r);let o=[t];if(a&&t.getColDef().showRowGroup){const g=s?.getSourceColumnsForGroupColumn?.(t)?.filter(v=>v.isSortable());g&&(o=[t,...g])}for(const h of o)this.setColSort(h,e,i);const l=(n||r.get("alwaysMultiSort"))&&!r.get("suppressMultiSort"),u=[];if(!l){const h=this.clearSortBarTheseColumns(o,i);u.push(...h)}this.updateSortIndex(t),u.push(...o),this.dispatchSortChangedEvents(i,u)}updateSortIndex(t){const{gos:e,colModel:n,showRowGroupCols:i}=this.beans,r=xh(e),s=i?.getShowRowGroupCol(t.getId()),a=r&&s||t,o=this.getColumnsWithSortingOrdered();n.forAllCols(h=>this.setColSortIndex(h,null));const l=o.filter(h=>r&&h.getColDef().showRowGroup?!1:h!==a);(a.getSortDef()?[...l,a]:l).forEach((h,g)=>this.setColSortIndex(h,g))}onSortChanged(t,e){this.dispatchSortChangedEvents(t,e)}isSortActive(){let t=!1;return this.beans.colModel.forAllCols(e=>{if(e.getSortDef())return t=!0,!0}),t}dispatchSortChangedEvents(t,e){const n={type:"sortChanged",source:t};e&&(n.columns=e),this.eventSvc.dispatchEvent(n)}clearSortBarTheseColumns(t,e){const n=[];return this.beans.colModel.forAllCols(i=>{t.includes(i)||(i.getSortDef()&&n.push(i),this.setColSort(i,void 0,e))}),n}getNextSortDirection(t){const e=t.getSortingOrder(),n=t.getSortDef();let r=e.findIndex(s=>Ew(s,n))+1;return r>=e.length&&(r=0),zl(e[r])}getIndexedSortMap(){const{gos:t,colModel:e,showRowGroupCols:n,rowGroupColsSvc:i}=this.beans;let r=[];if(e.forAllCols(u=>{u.getSortDef()&&r.push(u)}),e.isPivotMode()){const u=xh(t);r=r.filter(h=>{const g=!!h.getAggFunc(),v=!h.isPrimary(),y=u?n?.getShowRowGroupCol(h.getId()):h.getColDef().showRowGroup;return g||v||y})}const s=i?.columns.filter(u=>!!u.getSortDef())??[],a={};r.forEach((u,h)=>a[u.getId()]=h),r.sort((u,h)=>{const g=u.getSortIndex(),v=h.getSortIndex();if(g!=null&&v!=null)return g-v;if(g==null&&v==null){const y=a[u.getId()],w=a[h.getId()];return y>w?1:-1}else return v==null?-1:1});const o=xh(t)&&!!s.length;o&&(r=[...new Set(r.map(u=>n?.getShowRowGroupCol(u.getId())??u))]);const l=new Map;if(r.forEach((u,h)=>l.set(u,h)),o)for(const u of s){const h=n.getShowRowGroupCol(u.getId());l.set(u,l.get(h))}return l}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([,t],[,e])=>t-e).map(([t])=>t)}collectSortItems(t=!1){const e=[],n=this.getColumnsWithSortingOrdered();for(const i of n){const r=i.getSortDef()?.direction;if(!r)continue;const s=iu(i.getSortDef()?.type),a={sort:r,type:s};t?a.colId=i.getId():a.column=i,e.push(a)}return e}getSortModel(){return this.collectSortItems(!0)}getSortOptions(){return this.collectSortItems()}canColumnDisplayMixedSort(t){const e=xh(this.gos),n=!!t.getColDef().showRowGroup;return e&&n}getDisplaySortForColumn(t){const e=this.beans.showRowGroupCols?.getSourceColumnsForGroupColumn(t);if(!this.canColumnDisplayMixedSort(t)||!e?.length)return t.getSortDef();const i=t.getColDef().field!=null||!!t.getColDef().valueGetter?[t,...e]:e,r=i[0].getSortDef();return i.every(a=>Ew(a.getSortDef(),r))?r:{type:iu(t.getSortDef()?.type),direction:"mixed"}}getDisplaySortIndexForColumn(t){return this.getIndexedSortMap().get(t)}setupHeader(t,e){const n=()=>{const{type:i,direction:r}=zl(e.getSortDef());if(t.toggleCss("ag-header-cell-sorted-asc",r==="asc"),t.toggleCss("ag-header-cell-sorted-desc",r==="desc"),t.toggleCss("ag-header-cell-sorted-abs-asc",i==="absolute"&&r==="asc"),t.toggleCss("ag-header-cell-sorted-abs-desc",i==="absolute"&&r==="desc"),t.toggleCss("ag-header-cell-sorted-none",!r),e.getColDef().showRowGroup){const o=!this.beans.showRowGroupCols?.getSourceColumnsForGroupColumn(e)?.every(l=>r==l.getSortDef()?.direction);t.toggleCss("ag-header-cell-sorted-mixed",o)}};t.addManagedEventListeners({sortChanged:n,columnPinned:n,columnRowGroupChanged:n,displayedColumnsChanged:n})}initCol(t){const{sortIndex:e,initialSortIndex:n}=t.colDef,i=OCe(t.colDef);i&&t.setSortDef(i,!0),e!==void 0?e!==null&&(t.sortIndex=e):n!==null&&(t.sortIndex=n)}updateColSort(t,e,n){e!==void 0&&this.setColSort(t,zl(e),n)}setColSort(t,e,n){Ew(t.getSortDef(),e)||(t.setSortDef(zl(e),e===void 0),t.dispatchColEvent("sortChanged",n)),t.dispatchStateUpdatedEvent("sort")}setColSortIndex(t,e){t.sortIndex=e,t.dispatchStateUpdatedEvent("sortIndex")}createSortIndicator(t){return new v5(t)}getSortIndicatorSelector(){return JAe}},tEe={moduleName:"Sort",version:kn,beans:[eEe,XAe],apiFunctions:{onSortChanged:ZAe},userComponents:{agSortIndicator:v5},icons:{sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",sortAbsoluteAscending:"aasc",sortAbsoluteDescending:"adesc"}},nEe=class extends He{constructor(){super(...arguments),this.beanName="syncSvc",this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",t=>this.setColumnDefs(t))}start(){this.beans.ctrlsSvc.whenReady(this,()=>{const t=this.gos.get("columnDefs");t?this.setColumnsAndData(t):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(t){const{colModel:e,rowModel:n}=this.beans;e.setColumnDefs(t??[],"gridInitializing"),n.start()}gridReady(){const{eventSvc:t,gos:e}=this;t.dispatchEvent({type:"gridReady"}),LS(e,`initialised successfully, enterprise = ${e.isModuleRegistered("EnterpriseCore")}`)}setColumnDefs(t){const e=this.gos.get("columnDefs");if(e){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(e);return}this.beans.colModel.setColumnDefs(e,Rw(t.source))}}},iEe="paste",rEe=class extends He{constructor(){super(...arguments),this.beanName="changeDetectionSvc",this.clientSideRowModel=null}postConstruct(){const{gos:t,rowModel:e}=this.beans;mC(t)&&(this.clientSideRowModel=e),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(t){const{gos:e,rowRenderer:n}=this.beans;if(t.source===iEe||e.get("suppressChangeDetection"))return;const i=t.node,r=[i],s=this.clientSideRowModel,a=s?.rootNode;if(a&&!i.isRowPinned()){const o=e.get("aggregateOnlyChangedColumns"),l=new Swe(o,a);l.addParentNode(i.parent,[t.column]),s.doAggregate(l),l.forEachChangedNodeDepthFirst(u=>{r.push(u),u.sibling&&r.push(u.sibling)})}n.refreshCells({rowNodes:r})}},sEe=class extends He{constructor(){super(...arguments),this.beanName="expressionSvc",this.cache={}}evaluate(t,e){if(typeof t=="string")return this.evaluateExpression(t,e);sa(15,{expression:t})}evaluateExpression(t,e){try{return this.createExpressionFunction(t)(e.value,e.context,e.oldValue,e.newValue,e.value,e.node,e.data,e.colDef,e.rowIndex,e.api,e.getValue,e.column,e.columnGroup)}catch(n){return sa(16,{expression:t,params:e,e:n}),null}}createExpressionFunction(t){const e=this.cache;if(e[t])return e[t];const n=this.createFunctionBody(t),i=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",n);return e[t]=i,i}createFunctionBody(t){return t.includes("return")?t:"return "+t+";"}},aEe={moduleName:"Expression",version:kn,beans:[sEe]},oEe={moduleName:"ChangeDetection",version:kn,beans:[rEe]},lEe=class extends He{constructor(){super(...arguments),this.beanName="valueSvc",this.initialised=!1,this.isSsrm=!1}wireBeans(t){this.expressionSvc=t.expressionSvc,this.colModel=t.colModel,this.valueCache=t.valueCache,this.dataTypeSvc=t.dataTypeSvc,this.editSvc=t.editSvc,this.formulaDataSvc=t.formulaDataSvc}postConstruct(){this.initialised||this.init()}init(){const{gos:t,valueCache:e}=this;this.executeValueGetter=e?this.executeValueGetterWithValueCache.bind(this):this.executeValueGetterWithoutValueCache.bind(this),this.isSsrm=pV(t),this.cellExpressions=t.get("enableCellExpressions"),this.isTreeData=t.get("treeData"),this.initialised=!0;const n=i=>this.callColumnCellValueChangedHandler(i);this.eventSvc.addListener("cellValueChanged",n,!0),this.addDestroyFunc(()=>this.eventSvc.removeListener("cellValueChanged",n,!0)),this.addManagedPropertyListener("treeData",i=>this.isTreeData=i.currentValue)}getValueForDisplay(t){const e=this.beans,n=t.column,i=t.node,r=e.showRowGroupColValueSvc,s=!n&&i.group,a=n?.colDef.showRowGroup,o=!this.isTreeData||i.footer;if(r&&o&&(s||a)){const v=r.getGroupValue(i,n,this.displayIgnoresAggData(i));return v==null?{value:null,valueFormatted:null}:{value:v.value,valueFormatted:t.includeValueFormatted?r.formatAndPrefixGroupColValue(v,n,t.exporting):null}}if(!n)return{value:i.key,valueFormatted:null};let l=this.getValue(n,i,t.from,this.displayIgnoresAggData(i)),u=l;const h=e.formula;n.isAllowFormula()&&h?.isFormula(l)&&(t.useRawFormula?(l=h.normaliseFormula(l,!0),u=h.resolveValue(n,i)):(l=h.resolveValue(n,i),u=l));const g=t.includeValueFormatted&&!(t.exporting&&n.colDef.useValueFormatterForExport===!1);return{value:l,valueFormatted:g?this.formatValue(n,i,u):null}}getValue(t,e,n,i=!1){if(this.initialised||this.init(),!e)return;const r=t.getColDef();if(!e.group){const l=r.pivotValueColumn;l&&(t=l)}const s=this.editSvc?.getPendingEditValue(e,t,n);if(s!==void 0)return s;const a=r.showRowGroup;if(typeof a=="string"&&(this.beans.rowGroupColsSvc?.getColumnIndex(a)??-1)>e.level)return null;let o=this.resolveValue(t,e,i);if(this.cellExpressions&&WF(o)){const l=o.substring(1);o=this.executeValueGetter(l,e.data,t,e)}return o}getFormulaFromDataSource(t,e){const n=this.formulaDataSvc;if(!n?.hasDataSource()||!t.isAllowFormula())return;const i=n.getFormula({column:t,rowNode:e});return WF(i)?i:void 0}displayIgnoresAggData(t){return!t.group||!t.expanded||t.footer||t.leafGroup&&this.colModel.isPivotMode()?!1:!!t.sibling&&!this.gos.get("groupSuppressBlankHeader")}resolveValue(t,e,n){const i=t.getColDef(),r=t.getColId(),s=this.isTreeData,a=this.getFormulaFromDataSource(t,e);if(a!==void 0)return a;const o=!n&&e.aggData&&e.aggData[r]!==void 0;if(s&&o)return e.aggData[r];const l=e.data,u=i.field;if(s&&i.valueGetter)return this.executeValueGetter(i.valueGetter,l,t,e);if(s&&u&&l)return Pw(l,u,t.isFieldContainsDots());const h=e.groupData;if(h&&r in h)return e.groupData[r];if(o)return e.aggData[r];const v=i.showRowGroup,y=typeof v!="string"||!e.group,w=this.isSsrm&&n&&!!i.aggFunc,S=this.isSsrm&&e.footer&&e.field&&(v===!0||v===e.field);if(i.valueGetter&&!w)return y?this.executeValueGetter(i.valueGetter,l,t,e):void 0;if(S)return Pw(l,e.field,t.isFieldContainsDots());if(u&&l&&!w)return y?Pw(l,u,t.isFieldContainsDots()):void 0}parseValue(t,e,n,i){const r=t.getColDef();if(r.allowFormula&&this.beans.formula?.isFormula(n))return n;const s=r.valueParser;if(Et(s)){const a=Pn(this.gos,{node:e,data:e?.data,oldValue:i,newValue:n,colDef:r,column:t});return typeof s=="function"?s(a):this.expressionSvc?.evaluate(s,a)}return n}getDeleteValue(t,e){return Et(t.getColDef().valueParser)?this.parseValue(t,e,"",this.getValueForDisplay({column:t,node:e,from:"edit"}).value)??null:null}formatValue(t,e,n,i,r=!0){const{expressionSvc:s}=this.beans;let a=null,o;const l=t.getColDef();if(i?o=i:r&&(o=l.valueFormatter),o){const u=e?e.data:null,h=Pn(this.gos,{value:n,node:e,data:u,colDef:l,column:t});typeof o=="function"?a=o(h):a=s?s.evaluate(o,h):null}else if(l.refData)return l.refData[n]||"";return a==null&&Array.isArray(n)&&(a=n.join(", ")),a}setValue(t,e,n,i){const r=e.getColDef();if(!t.data&&this.canCreateRowNodeData(t,r)&&(t.data={}),!this.isSetValueSupported({column:e,newValue:n,colDef:r}))return!1;const s=this.getValue(e,t,"data"),a=Pn(this.gos,{node:t,data:t.data,oldValue:s,newValue:n,colDef:r,column:e}),o=t.group?r.groupRowValueSetter:void 0;let l=!1,u=!1;if(t.data){const h=this.handleExternalFormulaChange({column:e,eventSource:i,newValue:n,setterParams:a,rowNode:t});if(h!==null)return h;l=this.computeValueChange({column:e,rowNode:t,newValue:n,params:a,rowData:t.data,valueSetter:r.valueSetter,field:r.field})??!0}return o&&(u=o(Pn(this.gos,{node:t,data:t.data,oldValue:s,newValue:n,colDef:r,column:e,eventSource:i,valueChanged:l||n!==s,aggregatedChildren:this.beans.aggStage?.getAggregatedChildren(t,e)??[]}))??!0),!l&&!u?!1:this.finishValueChange(t,e,a,i)}canCreateRowNodeData(t,e){return t.group?!(e.groupRowValueSetter!=null||e.groupRowEditable!=null||e.pivotValueColumn):!0}finishValueChange(t,e,n,i){t.resetQuickFilterAggregateText(),this.valueCache?.onDataChanged();const r=this.getValue(e,t,"data");return this.dispatchCellValueChangedEvent(t,n,r,i),t.pinnedSibling&&this.dispatchCellValueChangedEvent(t.pinnedSibling,n,r,i),!0}isSetValueSupported(t){const{column:e,newValue:n,colDef:i}=t,{field:r,valueSetter:s}=i,a=this.beans.formula,o=e.isAllowFormula()&&a?.isFormula(n),l=!!this.formulaDataSvc?.hasDataSource();return gr(r)&&gr(s)&&!(l&&o)?(Tt(17),!1):this.dataTypeSvc&&!this.dataTypeSvc.checkType(e,n)?(Tt(135),!1):!0}handleExternalFormulaChange(t){const{column:e,rowNode:n,newValue:i,eventSource:r,setterParams:s}=t,a=this.beans.formula,o=this.formulaDataSvc;if(!o?.hasDataSource()||!e.isAllowFormula())return null;const l=a?.isFormula(i),u=o.getFormula({column:e,rowNode:n});if(l){if(!(u!==i))return!1;o.setFormula({column:e,rowNode:n,formula:i});const g=a?.resolveValue(e,n),v=e.getColDef();if(Et(v.valueSetter)||!gr(v.field)){const y={...s,newValue:g};this.computeValueChange({column:e,rowNode:n,newValue:g,params:y,rowData:n.data,valueSetter:v.valueSetter,field:v.field})}return this.finishValueChange(n,e,s,r)}return u!==void 0&&o.setFormula({column:e,rowNode:n,formula:void 0}),null}computeValueChange(t){const{valueSetter:e,params:n,rowData:i,field:r,column:s,newValue:a}=t;return Et(e)?typeof e=="function"?e(n):this.expressionSvc?.evaluate(e,n):!!i&&this.setValueUsingField(i,r,a,s.isFieldContainsDots())}dispatchCellValueChangedEvent(t,e,n,i){this.eventSvc.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:t.rowIndex,rowPinned:t.rowPinned,column:e.column,colDef:e.colDef,data:t.data,node:t,oldValue:e.oldValue,newValue:n,value:n,source:i})}callColumnCellValueChangedHandler(t){const e=t.colDef.onCellValueChanged;typeof e=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>{e({node:t.node,data:t.data,oldValue:t.oldValue,newValue:t.newValue,colDef:t.colDef,column:t.column,api:t.api,context:t.context})})}setValueUsingField(t,e,n,i){if(!e)return!1;let r=!1;if(!i)r=t[e]===n,r||(t[e]=n);else{const s=e.split(".");let a=t;for(;s.length>0&&a;){const o=s.shift();s.length===0?(r=a[o]===n,r||(a[o]=n)):a=a[o]}}return!r}executeValueGetterWithValueCache(t,e,n,i){const r=n.getColId(),s=this.valueCache.getValue(i,r);if(s!==void 0)return s;const a=this.executeValueGetterWithoutValueCache(t,e,n,i);return this.valueCache.setValue(i,r,a),a}executeValueGetterWithoutValueCache(t,e,n,i){const r=Pn(this.gos,{data:e,node:i,column:n,colDef:n.getColDef(),getValue:a=>this.getValueCallback(i,a)});let s;return typeof t=="function"?s=t(r):s=this.expressionSvc?.evaluate(t,r),s}getValueCallback(t,e){const n=this.colModel.getColDefCol(e);return n?this.getValue(n,t,"data"):null}getKeyForNode(t,e){const n=this.getValue(t,e,"data"),i=t.getColDef().keyCreator;let r=n;if(i){const s=Pn(this.gos,{value:n,colDef:t.getColDef(),column:t,node:e,data:e.data});r=i(s)}return typeof r=="string"||r==null||(r=String(r),r==="[object Object]"&&Tt(121)),r}},cEe={moduleName:"CommunityCore",version:kn,beans:[yxe,owe,WSe,lbe,WAe,mSe,dxe,Exe,CSe,xAe,SAe,KAe,lEe,mxe,uxe,vxe,KSe,nEe,ISe,HSe,Bxe],icons:{selectOpen:"small-down",smallDown:"small-down",colorPicker:"color-picker",smallUp:"small-up",checkboxChecked:"small-up",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off",smallLeft:"small-left",smallRight:"small-right"},apiFunctions:{getGridId:lwe,destroy:cwe,isDestroyed:uwe,getGridOption:hwe,setGridOption:dwe,updateGridOptions:lU,isModuleRegistered:fwe},dependsOn:[NSe,qwe,eSe,tEe,Lxe,ySe,Fxe,jAe,oEe,Nxe,wAe,RAe,_Ae,Hxe,VSe,BSe,aEe,xSe,LAe]},uEe=()=>`No AG Grid modules are registered! It is recommended to start with all Community features via the AllCommunityModule:
                    
    import { ModuleRegistry, AllCommunityModule } from 'ag-grid-community';
    
    ModuleRegistry.registerModules([ AllCommunityModule ]);
    `;function hEe({moduleName:t,rowModelType:e}){return`To use the ${t}Module you must set the gridOption "rowModelType='${e}'"`}var LU=class{constructor(t="javascript"){this.frameworkName=t,this.renderingEngine="vanilla",this.batchFrameworkComps=!1,this.wrapIncoming=e=>e(),this.wrapOutgoing=e=>e(),this.baseDocLink=`${rV}/${this.frameworkName}-data-grid`,Qye(this.baseDocLink)}frameworkComponent(t){return null}isFrameworkComponent(t){return!1}getDocLink(t){return this.baseDocLink+(t?"/"+t:"")}},H7=new WeakMap,G7=new WeakMap,dEe=1,fEe=class{create(t,e,n,i,r,s){const a=Q3.applyGlobalGridOptions(e),o=a.gridId??String(dEe++),l=this.getRegisteredModules(r,o,a.rowModelType),u=this.createBeansList(a.rowModelType,l,o),h=this.createProvidedBeans(t,a,r);if(!u)return;const v={providedBeanInstances:h,beanClasses:u,id:o,beanInitComparator:T1e,beanDestroyComparator:R1e,derivedBeans:[A1e],destroyCallback:()=>{G7.delete(w),H7.delete(t),Kye(o),s?.()}},y=new x1e(v);this.registerModuleFeatures(y,l),n(y),y.getBean("syncSvc").start(),i?.(y);const w=y.getBean("gridApi");return H7.set(t,w),G7.set(w,t),w}getRegisteredModules(t,e,n){return ID(cEe,void 0,!0),t?.modules?.forEach(i=>ID(i,e)),Yye(e,z7(n))}registerModuleFeatures(t,e){const n=t.getBean("registry"),i=t.getBean("apiFunctionSvc");for(const r of e){n.registerModule(r);const s=r.apiFunctions;if(s){const a=Object.keys(s);for(const o of a)i?.addFunction(o,s[o])}}}createProvidedBeans(t,e,n){let i=n?n.frameworkOverrides:null;gr(i)&&(i=new LU);const r={gridOptions:e,eGridDiv:t,eRootDiv:t,globalListener:n?n.globalListener:null,globalSyncListener:n?n.globalSyncListener:null,frameworkOverrides:i};return n?.providedBeanInstances&&Object.assign(r,n.providedBeanInstances),r}createBeansList(t,e,n){const i={clientSide:"ClientSideRowModel",infinite:"InfiniteRowModel",serverSide:"ServerSideRowModel",viewport:"ViewportRowModel"},r=z7(t),s=i[r];if(!s){H0(201,{rowModelType:r},`Unknown rowModelType ${r}.`);return}if(!Zye()){H0(272,void 0,uEe());return}if(!t){const o=Object.entries(i).filter(([l,u])=>HD(u,n,l));if(o.length==1){const[l,u]=o[0];if(l!==r){const h={moduleName:u,rowModelType:l};H0(275,h,hEe(h));return}}}if(!HD(s,n,r)){const o=cV(),l=`rowModelType = '${r}'`,u=`Missing module ${s}Module for rowModelType ${r}.`;H0(200,{reasonOrId:l,moduleName:s,gridScoped:lV(),gridId:n,rowModelType:r,isUmd:o},u);return}const a=new Set;for(const o of e)for(const l of o.beans??[])a.add(l);return Array.from(a)}};function z7(t){return t??"clientSide"}var gEe={paste:"api",rangeSvc:"api",fillHandle:"api",cellClear:"api",bulk:"api"};new Set(Object.keys(gEe));var pEe={agSetColumnFilter:"agSetColumnFilterHandler",agMultiColumnFilter:"agMultiColumnFilterHandler",agGroupColumnFilter:"agGroupColumnFilterHandler",agNumberColumnFilter:"agNumberColumnFilterHandler",agBigIntColumnFilter:"agBigIntColumnFilterHandler",agDateColumnFilter:"agDateColumnFilterHandler",agTextColumnFilter:"agTextColumnFilterHandler"};new Set(Object.values(pEe));var mEe=class{wrap(t,e,n,i){const r=this.createWrapper(t,i);for(const s of e??[])this.createMethod(r,s,!0);for(const s of n??[])this.createMethod(r,s,!1);return r}createMethod(t,e,n){t.addMethod(e,this.createMethodProxy(t,e,n))}createMethodProxy(t,e,n){return function(){return t.hasMethod(e)?t.callMethod(e,arguments):(n&&Tt(49,{methodName:e}),null)}}},vEe=class extends rwe{constructor(t){super(t,zV)}},Zr=Se.createContext({}),FU=Se.createContext("default"),bC=(t,e,n,i)=>{if(!t||t.componentFromFramework||e.isDestroyed())return;const s=t.newAgStackInstance();let a,o,l=!1;return s.then(u=>{if(l){e.destroyBean(u);return}a=u,o=a.getGui(),n.appendChild(o),V7(i,a)}),()=>{l=!0,a&&(o?.remove(),e.destroyBean(a),i&&V7(i,void 0))}},V7=(t,e)=>{if(t)if(t instanceof Function)t(e);else{const n=t;n.current=e}},$a=(...t)=>t.filter(n=>n!=null&&n!=="").join(" "),no=class kU{constructor(...e){this.classesMap={};for(const n of e)this.classesMap[n]=!0}setClass(e,n){if(!!this.classesMap[e]==n)return this;const r=new kU;return r.classesMap={...this.classesMap},r.classesMap[e]=n,r}toString(){return Object.keys(this.classesMap).filter(n=>this.classesMap[n]).join(" ")}},Am=t=>{const e=()=>typeof Symbol=="function"&&Symbol.for,n=()=>e()?Symbol.for("react.memo"):60115;return typeof t=="function"&&!(t.prototype&&t.prototype.isReactComponent)||typeof t=="object"&&t.$$typeof===n()},tM=Se.version?.split(".")[0],NU=tM==="16"||tM==="17";function yEe(){return tM==="19"}var Fw=!1;function CEe(t){return Fw||setTimeout(()=>Fw=!1,0),Fw=!0,t()}var Ly=(t,e)=>{!NU&&t&&!Fw?uq.flushSync(e):e()},bEe=t=>{NU?t():Se.startTransition(t)};function wEe(t,e,n){return Se.useSyncExternalStore?Se.useSyncExternalStore(t,e):n}function YS(t,e,n){if(e==null||t==null)return e;if(t===e||e.length===0&&t.length===0)return t;if(n||t.length===0&&e.length>0||t.length>0&&e.length===0)return e;const i=[],r=[],s=new Map,a=new Map;for(let o=0;o<e.length;o++){const l=e[o];a.set(l.instanceId,l)}for(let o=0;o<t.length;o++){const l=t[o];s.set(l.instanceId,l),a.has(l.instanceId)&&i.push(l)}for(let o=0;o<e.length;o++){const l=e[o],u=l.instanceId;s.has(u)||r.push(l)}return i.length===t.length&&r.length===0?t:i.length===0&&r.length===e.length?e:i.length===0?r:r.length===0?i:[...i,...r]}var BU=D.forwardRef((t,e)=>{const{registry:n,context:i}=D.useContext(Zr),r=D.useRef(null),s=D.useRef(null),a=D.useRef(null),o=D.useRef(null),l=D.useRef(null),u=D.useRef(),[h,g]=D.useState(),[v,y]=D.useState(),[w,S]=D.useState(),[x,T]=D.useState(()=>new no),[_,M]=D.useState(()=>new no("ag-hidden")),[F,L]=D.useState(()=>new no("ag-hidden")),[k,B]=D.useState(()=>new no("ag-invisible"));D.useImperativeHandle(e,()=>({refresh(){return!1}})),D.useLayoutEffect(()=>bC(h,i,s.current),[h]);const H=D.useCallback(K=>{if(r.current=K,!K||i.isDestroyed()){u.current=i.destroyBean(u.current);return}const Q={setInnerRenderer:(le,V)=>{g(le),S(V)},setChildCount:le=>y(le),toggleCss:(le,V)=>T(Z=>Z.setClass(le,V)),setContractedDisplayed:le=>L(V=>V.setClass("ag-hidden",!le)),setExpandedDisplayed:le=>M(V=>V.setClass("ag-hidden",!le)),setCheckboxVisible:le=>B(V=>V.setClass("ag-invisible",!le)),setCheckboxSpacing:le=>B(V=>V.setClass("ag-group-checkbox-spacing",le))},oe=n.createDynamicBean("groupCellRendererCtrl",!0);oe&&(u.current=i.createBean(oe),u.current.init(Q,K,a.current,o.current,l.current,BU,t))},[]),U=D.useMemo(()=>`ag-cell-wrapper ${x.toString()}`,[x]),W=D.useMemo(()=>`ag-group-expanded ${_.toString()}`,[_]),j=D.useMemo(()=>`ag-group-contracted ${F.toString()}`,[F]),X=D.useMemo(()=>`ag-group-checkbox ${k.toString()}`,[k]),ne=h?.componentFromFramework,$=ne?h.componentClass:void 0,q=h==null&&w!=null,z=ax(w);return Se.createElement("span",{className:U,ref:H,...t.colDef?{}:{role:u.current?.getCellAriaRole()}},Se.createElement("span",{className:W,ref:o}),Se.createElement("span",{className:j,ref:l}),Se.createElement("span",{className:X,ref:a}),Se.createElement("span",{className:"ag-group-value",ref:s},q?z:ne?Se.createElement($,{...h.params}):null),Se.createElement("span",{className:"ag-group-child-count"},v))}),U7=BU,y5=D.createContext({setMethods:()=>{}}),SEe=t=>{const{initialProps:e,addUpdateCallback:n,CustomComponentClass:i,setMethods:r}=t,[{key:s,...a},o]=D.useState(e);return D.useEffect(()=>{n(l=>o(l))},[]),Se.createElement(y5.Provider,{value:{setMethods:r}},Se.createElement(i,{key:s,...a}))},xEe=D.memo(SEe),AEe=0;function j7(){return`agPortalKey_${++AEe}`}var IU=class{constructor(t,e,n,i){this.portal=null,this.oldPortal=null,this.reactComponent=t,this.portalManager=e,this.componentType=n,this.suppressFallbackMethods=!!i,this.statelessComponent=this.isStateless(this.reactComponent),this.key=j7(),this.portalKey=j7(),this.instanceCreated=this.isStatelessComponent()?Fr.resolve(!1):new Fr(r=>{this.resolveInstanceCreated=r})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const t=this.portal;t&&this.portalManager.destroyPortal(t)}createParentElement(t){const e=this.portalManager.getComponentWrappingElement(),n=document.createElement(e||"div");return n.classList.add("ag-react-container"),t.reactContainer=n,n}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(t){return typeof t=="function"&&!(t.prototype&&t.prototype.isReactComponent)||typeof t=="object"&&t.$$typeof===this.getMemoType()}hasMethod(t){const e=this.getFrameworkComponentInstance();return!!e&&e[t]!=null||this.fallbackMethodAvailable(t)}callMethod(t,e){const n=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(t,e&&e[0]?e[0]:{});if(!n){setTimeout(()=>this.callMethod(t,e));return}const i=n[t];if(i)return i.apply(n,e);if(this.fallbackMethodAvailable(t))return this.fallbackMethod(t,e&&e[0]?e[0]:{})}addMethod(t,e){this[t]=e}init(t){return this.eParentElement=this.createParentElement(t),this.createOrUpdatePortal(t),new Fr(e=>this.createReactComponent(e))}createOrUpdatePortal(t){this.isStatelessComponent()||(this.ref=e=>{this.componentInstance=e,this.resolveInstanceCreated?.(!0),this.resolveInstanceCreated=void 0},t.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...t,key:this.key}),this.portal=QS.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(t,e){return D.createElement(t,e)}createReactComponent(t){this.portalManager.mountReactPortal(this.portal,this,t)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(t){this.oldPortal=this.portal,this.createOrUpdatePortal(t),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(t,e){const n=this[`${t}Component`];if(!this.suppressFallbackMethods&&n)return n.bind(this)(e)}fallbackMethodAvailable(t){return this.suppressFallbackMethods?!1:!!this[`${t}Component`]}};function mx(t,e,n){for(const i of t){const r=e[i];r&&(n[i]=r)}}var ho=class extends IU{constructor(){super(...arguments),this.awaitUpdateCallback=new Fr(t=>{this.resolveUpdateCallback=t}),this.wrapperComponent=xEe}init(t){return this.sourceParams=t,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(t,e){return super.createElement(this.wrapperComponent,{initialProps:e,CustomComponentClass:t,setMethods:n=>this.setMethods(n),addUpdateCallback:n=>{this.updateCallback=()=>(n(this.getProps()),new Fr(i=>{setTimeout(()=>{i()})})),this.resolveUpdateCallback()}})}setMethods(t){this.providedMethods=t,mx(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new Fr(t=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>t())}))}},EEe=class extends ho{refresh(t){return this.sourceParams=t,this.refreshProps(),!0}},TEe=class extends ho{refresh(t){this.sourceParams=t,this.refreshProps()}},REe=class extends ho{constructor(){super(...arguments),this.date=null,this.onDateChange=t=>this.updateDate(t)}getDate(){return this.date}setDate(t){this.date=t,this.refreshProps()}refresh(t){this.sourceParams=t,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(t){this.setDate(t),this.sourceParams.onDateChanged()}getProps(){const t=super.getProps();return t.date=this.date,t.onDateChange=this.onDateChange,delete t.onDateChanged,t}},DEe=class extends ho{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(t,e){this.icon=t,this.shake=e,this.refreshProps()}setLabel(t){this.label=t,this.refreshProps()}getProps(){const t=super.getProps(),{label:e,icon:n,shake:i}=this;return t.label=e,t.icon=n,t.shake=i,t}},MEe=class extends ho{constructor(){super(...arguments),this.model=null,this.onModelChange=t=>this.updateModel(t),this.onUiChange=()=>this.sourceParams.filterModifiedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1,this.awaitSetMethodsCallback=new Fr(t=>{this.resolveSetMethodsCallback=t})}isFilterActive(){return this.model!=null}doesFilterPass(t){return this.providedMethods.doesFilterPass(t)}getModel(){return this.model}setModel(t){return this.expectingNewMethods=!0,this.model=t,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(t){return this.sourceParams=t,this.refreshProps(),!0}afterGuiAttached(t){const e=this.providedMethods;e?e.afterGuiAttached?.(t):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(t))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(t){this.expectingNewMethods===!1&&this.hasBeenActive&&this.providedMethods?.doesFilterPass!==t?.doesFilterPass&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(t),this.resolveSetMethodsCallback(),this.resolveFilterPassCallback?.(),this.resolveFilterPassCallback=void 0}updateModel(t){this.resolveFilterPassCallback?.();const e=new Fr(n=>{this.resolveFilterPassCallback=n});this.setModel(t).then(()=>{e.then(()=>{this.sourceParams.filterChangedCallback()})})}getProps(){const t=super.getProps();return t.model=this.model,t.onModelChange=this.onModelChange,t.onUiChange=this.onUiChange,delete t.filterChangedCallback,t}},_Ee=class extends ho{constructor(){super(...arguments),this.awaitSetMethodsCallback=new Fr(t=>{this.resolveSetMethodsCallback=t})}refresh(t){return this.sourceParams=t,this.refreshProps(),!0}afterGuiAttached(t){const e=this.providedMethods;e?e.afterGuiAttached?.(t):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(t))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","onAnyFilterChanged"]}setMethods(t){super.setMethods(t),this.resolveSetMethodsCallback()}};function HU(t,e){t.parentFilterInstance(n=>{(n.setModel(e)||Fr.resolve()).then(()=>{t.filterParams.filterChangedCallback()})})}var PEe=class{constructor(t,e){this.floatingFilterParams=t,this.refreshProps=e,this.model=null,this.onModelChange=n=>this.updateModel(n)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(t){this.model=t,this.refreshProps()}refresh(t){this.floatingFilterParams=t,this.refreshProps()}setMethods(t){mx(this.getOptionalMethods(),t,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(t){this.model=t,this.refreshProps(),HU(this.floatingFilterParams,t)}},OEe=class extends ho{constructor(){super(...arguments),this.model=null,this.onModelChange=t=>this.updateModel(t)}onParentModelChanged(t){this.model=t,this.refreshProps()}refresh(t){this.sourceParams=t,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(t){this.model=t,this.refreshProps(),HU(this.sourceParams,t)}getProps(){const t=super.getProps();return t.model=this.model,t.onModelChange=this.onModelChange,t}},LEe=class extends ho{refresh(t){this.sourceParams=t,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}},FEe=class extends ho{refresh(t){return this.sourceParams=t,this.refreshProps(),!0}},kEe=class extends ho{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=t=>this.updateActive(t)}setActive(t){this.awaitSetActive(t)}setExpanded(t){this.expanded=t,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(t){return this.active=t,this.refreshProps()}updateActive(t){const e=this.awaitSetActive(t);t&&e.then(()=>this.sourceParams.onItemActivated())}getProps(){const t=super.getProps();return t.active=this.active,t.expanded=this.expanded,t.onActiveChange=this.onActiveChange,delete t.onItemActivated,t}},NEe=class extends ho{refresh(t){return this.sourceParams=t,this.refreshProps(),!0}},BEe=class extends ho{constructor(){super(...arguments),this.onStateChange=t=>this.updateState(t)}refresh(t){return this.sourceParams=t,this.refreshProps(),!0}getState(){return this.state}updateState(t){this.state=t,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const t=super.getProps();return t.state=this.state,t.onStateChange=this.onStateChange,t}};function C5(){Tt(231)}var IEe=1e3,HEe=class{constructor(t,e,n){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=e||"div",this.refresher=t,this.maxComponentCreationTimeMs=n||IEe}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(t){this.portals=this.portals.filter(e=>e!==t),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(t,e,n){this.portals=[...this.portals,t],this.waitForInstance(e,n),this.batchUpdate()}updateReactPortal(t,e){this.portals[this.portals.indexOf(t)]=e,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(t,e,n=Date.now()){if(this.destroyed){e(null);return}if(t.rendered())e(t);else{if(Date.now()-n>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate){Ly(!0,()=>this.refresher()),t.rendered()&&e(t);return}window.setTimeout(()=>{this.waitForInstance(t,e,n)})}}},GEe=Se.createContext([]),zEe=Se.createContext(void 0),VEe=({ctrl:t})=>{const e=t.isAlive(),{context:n}=D.useContext(Zr),[i,r]=D.useState(),[s,a]=D.useState(),o=D.useRef(),l=D.useRef(null),u=D.useRef(null),h=D.useRef(null),g=D.useRef(),v=D.useRef();e&&!v.current&&(v.current=new vC(()=>l.current));const y=D.useCallback(T=>{if(l.current=T,!T||!t.isAlive()||n.isDestroyed()){o.current=n.destroyBean(o.current);return}o.current=n.createBean(new xm);const _=()=>{const F=t.getSelectAllGui();F&&(u.current?.insertAdjacentElement("afterend",F),o.current.addDestroyFunc(()=>F.remove()))},M={setWidth:F=>{l.current&&(l.current.style.width=F)},toggleCss:(F,L)=>v.current.toggleCss(F,L),setUserStyles:F=>a(F),setAriaSort:F=>{l.current&&(F?xye(l.current,F):Aye(l.current))},setUserCompDetails:F=>r(F),getUserCompInstance:()=>g.current||void 0,refreshSelectAllGui:_,removeSelectAllGui:()=>t.getSelectAllGui()?.remove()};t.setComp(M,T,u.current,h.current,o.current),_()},[]);D.useLayoutEffect(()=>bC(i,n,h.current,g),[i]),D.useEffect(()=>{t.setDragSource(l.current)},[i]);const w=D.useMemo(()=>!!(i?.componentFromFramework&&Am(i.componentClass)),[i]),S=i?.componentFromFramework,x=i?.componentClass;return Se.createElement("div",{ref:y,style:s,className:"ag-header-cell",role:"columnheader"},Se.createElement("div",{ref:u,className:"ag-header-cell-resize",role:"presentation"}),Se.createElement("div",{ref:h,className:"ag-header-cell-comp-wrapper",role:"presentation"},S?w?Se.createElement(x,{...i.params}):Se.createElement(x,{...i.params,ref:g}):null))},UEe=D.memo(VEe),jEe=class{constructor(t,e){this.floatingFilterParams=t,this.refreshProps=e}getProps(){return this.floatingFilterParams}refresh(t){this.floatingFilterParams=t,this.refreshProps()}setMethods(t){mx(this.getOptionalMethods(),t,this)}getOptionalMethods(){return["afterGuiAttached"]}},WEe=({ctrl:t})=>{const{context:e,gos:n}=D.useContext(Zr),[i,r]=D.useState(),[s,a]=D.useState(()=>new no("ag-header-cell","ag-floating-filter")),[o,l]=D.useState(()=>new no),[u,h]=D.useState(()=>new no("ag-floating-filter-button","ag-hidden")),[g,v]=D.useState("false"),[y,w]=D.useState(),[,S]=D.useState(1),x=D.useRef(),T=D.useRef(null),_=D.useRef(null),M=D.useRef(null),F=D.useRef(null),L=D.useRef(),k=D.useRef(),B=le=>{le!=null&&L.current?.(le)},H=D.useCallback(le=>{if(T.current=le,!le||!t.isAlive()||e.isDestroyed()){x.current=e.destroyBean(x.current);return}x.current=e.createBean(new xm),k.current=new Fr(Z=>{L.current=Z});const V={toggleCss:(Z,ae)=>a(Ee=>Ee.setClass(Z,ae)),setUserStyles:Z=>r(Z),addOrRemoveBodyCssClass:(Z,ae)=>l(Ee=>Ee.setClass(Z,ae)),setButtonWrapperDisplayed:Z=>{h(ae=>ae.setClass("ag-hidden",!Z)),v(Z?"false":"true")},setWidth:Z=>{T.current&&(T.current.style.width=Z)},setCompDetails:Z=>w(Z),getFloatingFilterComp:()=>k.current?k.current:null,setMenuIcon:Z=>F.current?.appendChild(Z)};t.setComp(V,le,F.current,_.current,x.current)},[]);D.useLayoutEffect(()=>bC(y,e,_.current,B),[y]);const U=D.useMemo(()=>s.toString(),[s]),W=D.useMemo(()=>o.toString(),[o]),j=D.useMemo(()=>u.toString(),[u]),X=D.useMemo(()=>!!(y&&y.componentFromFramework&&Am(y.componentClass)),[y]),ne=D.useMemo(()=>n.get("reactiveCustomComponents"),[]),$=D.useMemo(()=>n.get("enableFilterHandlers"),[]),[q,z]=D.useState();D.useEffect(()=>{if(y?.componentFromFramework)if(ne){const le=$?jEe:PEe,V=new le(y.params,()=>S(Z=>Z+1));B(V),z(V)}else C5()},[y]);const K=q?.getProps(),Q=y?.componentFromFramework,oe=y?.componentClass;return Se.createElement("div",{ref:H,style:i,className:U,role:"gridcell"},Se.createElement("div",{ref:_,className:W,role:"presentation"},Q?ne?K&&Se.createElement(y5.Provider,{value:{setMethods:le=>q.setMethods(le)}},Se.createElement(oe,{...K})):Se.createElement(oe,{...y.params,ref:X?()=>{}:B}):null),Se.createElement("div",{ref:M,"aria-hidden":g,className:j,role:"presentation"},Se.createElement("button",{ref:F,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},qEe=D.memo(WEe),KEe=({ctrl:t})=>{const{context:e}=D.useContext(Zr),[n,i]=D.useState(),[r,s]=D.useState(()=>new no),[a,o]=D.useState(()=>new no),[l,u]=D.useState("false"),[h,g]=D.useState(),[v,y]=D.useState(),w=D.useRef(),S=D.useRef(null),x=D.useRef(null),T=D.useRef(null),_=D.useRef(),M=D.useCallback(U=>{if(S.current=U,!U||!t.isAlive()||e.isDestroyed()){w.current=e.destroyBean(w.current);return}w.current=e.createBean(new xm);const W={setWidth:j=>{S.current&&(S.current.style.width=j)},toggleCss:(j,X)=>s(ne=>ne.setClass(j,X)),setUserStyles:j=>i(j),setHeaderWrapperHidden:j=>{const X=T.current;X&&(j?X.style.setProperty("display","none"):X.style.removeProperty("display"))},setHeaderWrapperMaxHeight:j=>{const X=T.current;X&&(j!=null?X.style.setProperty("max-height",`${j}px`):X.style.removeProperty("max-height"),X.classList.toggle("ag-header-cell-comp-wrapper-limited-height",j!=null))},setUserCompDetails:j=>y(j),setResizableDisplayed:j=>{o(X=>X.setClass("ag-hidden",!j)),u(j?"false":"true")},setAriaExpanded:j=>g(j),getUserCompInstance:()=>_.current||void 0};t.setComp(W,U,x.current,T.current,w.current)},[]);D.useLayoutEffect(()=>bC(v,e,T.current),[v]),D.useEffect(()=>{S.current&&t.setDragSource(S.current)},[v]);const F=D.useMemo(()=>!!(v?.componentFromFramework&&Am(v.componentClass)),[v]),L=D.useMemo(()=>"ag-header-group-cell "+r.toString(),[r]),k=D.useMemo(()=>"ag-header-cell-resize "+a.toString(),[a]),B=v?.componentFromFramework,H=v?.componentClass;return Se.createElement("div",{ref:M,style:n,className:L,role:"columnheader","aria-expanded":h},Se.createElement("div",{ref:T,className:"ag-header-cell-comp-wrapper",role:"presentation"},B?F?Se.createElement(H,{...v.params}):Se.createElement(H,{...v.params,ref:_}):null),Se.createElement("div",{ref:x,"aria-hidden":l,className:k}))},YEe=D.memo(KEe),XEe=({ctrl:t})=>{const{gos:e,context:n}=D.useContext(Zr),{topOffset:i,rowHeight:r}=D.useMemo(()=>t.getTopAndHeight(),[]),s=D.useMemo(()=>e.get("tabIndex"),[]),[a,o]=D.useState(()=>t.getAriaRowIndex()),l=t.headerRowClass,[u,h]=D.useState(()=>r+"px"),[g,v]=D.useState(()=>i+"px"),y=D.useRef(null),[w,S]=D.useState(()=>t.getUpdatedHeaderCtrls()),x=D.useRef(),T=D.useRef(null),_=D.useCallback(L=>{if(T.current=L,!L||!t.isAlive()||n.isDestroyed()){x.current=n.destroyBean(x.current);return}x.current=n.createBean(new xm);const k={setHeight:B=>h(B),setTop:B=>v(B),setHeaderCtrls:(B,H,U)=>{const W=y.current,j=YS(W,B,H);j!==W&&(y.current=j,Ly(U,()=>S(j)))},setWidth:B=>{T.current&&(T.current.style.width=B)},setRowIndex:B=>{o(B)}};t.setComp(k,x.current,!1)},[]),M=D.useMemo(()=>({height:u,top:g}),[u,g]),F=D.useCallback(L=>{switch(t.type){case"group":return Se.createElement(YEe,{ctrl:L,key:L.instanceId});case"filter":return Se.createElement(qEe,{ctrl:L,key:L.instanceId});default:return Se.createElement(UEe,{ctrl:L,key:L.instanceId})}},[]);return Se.createElement("div",{ref:_,className:l,role:"row",style:M,tabIndex:s,"aria-rowindex":a},w.map(F))},$Ee=D.memo(XEe),ZEe=({pinned:t})=>{const[e,n]=D.useState(!0),[i,r]=D.useState([]),{context:s}=D.useContext(Zr),a=D.useRef(null),o=D.useRef(null),l=D.useRef(),u=t==="left",h=t==="right",g=!u&&!h,v=D.useCallback(S=>{if(a.current=S,!S||s.isDestroyed()){l.current=s.destroyBean(l.current);return}l.current=s.createBean(new e1e(t));const x={setDisplayed:n,setCtrls:T=>r(T),setCenterWidth:T=>{o.current&&(o.current.style.width=T)},setViewportScrollLeft:T=>{a.current&&(a.current.scrollLeft=T)},setPinnedContainerWidth:T=>{a.current&&(a.current.style.width=T,a.current.style.minWidth=T,a.current.style.maxWidth=T)}};l.current.setComp(x,a.current)},[]),y=e?"":"ag-hidden",w=()=>i.map(S=>Se.createElement($Ee,{ctrl:S,key:S.instanceId}));return u?Se.createElement("div",{ref:v,className:"ag-pinned-left-header "+y,"aria-hidden":!e,role:"rowgroup"},w()):h?Se.createElement("div",{ref:v,className:"ag-pinned-right-header "+y,"aria-hidden":!e,role:"rowgroup"},w()):g?Se.createElement("div",{ref:v,className:"ag-header-viewport "+y,role:"rowgroup",tabIndex:-1},Se.createElement("div",{ref:o,className:"ag-header-container",role:"presentation"},w())):null},KT=D.memo(ZEe),QEe=()=>{const[t,e]=D.useState(()=>new no),[n,i]=D.useState(),{context:r}=D.useContext(Zr),s=D.useRef(null),a=D.useRef(),o=D.useCallback(h=>{if(s.current=h,!h||r.isDestroyed()){a.current=r.destroyBean(a.current);return}a.current=r.createBean(new qbe);const g={toggleCss:(v,y)=>e(w=>w.setClass(v,y)),setHeightAndMinHeight:v=>i(v)};a.current.setComp(g,h,h)},[]),l=D.useMemo(()=>"ag-header "+t.toString(),[t]),u=D.useMemo(()=>({height:n,minHeight:n}),[n]);return Se.createElement("div",{ref:o,className:l,style:u,role:"presentation"},Se.createElement(KT,{pinned:"left"}),Se.createElement(KT,{pinned:null}),Se.createElement(KT,{pinned:"right"}))},JEe=D.memo(QEe),eTe=(t,e)=>{D.useEffect(()=>{const n=e.current;if(n){const i=n.parentElement;if(i){const r=document.createComment(t);return i.insertBefore(r,n),()=>{r.remove()}}}},[t])},Kd=eTe,tTe=class{constructor(t,e){this.cellEditorParams=t,this.refreshProps=e,this.instanceCreated=new Fr(n=>{this.resolveInstanceCreated=n}),this.onValueChange=n=>this.updateValue(n),this.value=t.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(t){this.cellEditorParams=t,this.refreshProps()}setMethods(t){mx(this.getOptionalMethods(),t,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(t){this.componentInstance=t,this.resolveInstanceCreated?.(),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached","getValidationErrors","getValidationElement"]}updateValue(t){this.value=t,this.refreshProps()}},nTe=t=>{const e=D.useRef(t),n=D.useRef(),i=D.useRef(!1),r=D.useRef(!1),[,s]=D.useState(0);i.current&&(r.current=!0),D.useEffect(()=>(i.current||(n.current=e.current(),i.current=!0),s(a=>a+1),()=>{r.current&&n.current?.()}),[])},iTe=t=>{const[e,n]=D.useState(),i=D.useContext(Zr),{context:r,popupSvc:s,gos:a,editSvc:o}=i,{editDetails:l,cellCtrl:u,eParentCell:h}=t;return nTe(()=>{const{compDetails:g}=l,v=a.get("stopEditingWhenCellsLoseFocus");let y,w;if(!r.isDestroyed()){w=r.createBean(o.createPopupEditorWrapper(g.params));const S=w.getGui();if(t.jsChildComp){const L=t.jsChildComp.getGui();L&&S.appendChild(L)}const{column:x,rowNode:T}=u,_={column:x,rowNode:T,type:"popupCellEditor",eventSource:h,ePopup:S,position:l.popupPosition,keepWithinBounds:!0},M=s?.positionPopupByComponent.bind(s,_),F=s?.addPopup({modal:v,eChild:S,closeOnEsc:!0,closedCallback:()=>{u.onPopupEditorClosed()},anchorToElement:h,positionCallback:M,ariaOwns:h});y=F?F.hideFunc:void 0,n(w),t.jsChildComp?.afterGuiAttached?.()}return()=>{y?.(),r.destroyBean(w)}}),D.useLayoutEffect(()=>()=>{u.isCellFocused()&&e?.getGui().contains(kr(i))&&h.focus({preventScroll:!0})},[e]),e&&t.wrappedContent?QS.createPortal(t.wrappedContent,e.getGui()):null},W7=D.memo(iTe),rTe=(t,e,n)=>{const{compProxy:i}=t;n(i);const r=i.getProps(),s=Am(e);return Se.createElement(y5.Provider,{value:{setMethods:a=>i.setMethods(a)}},s?Se.createElement(e,{...r}):Se.createElement(e,{...r,ref:a=>i.setRef(a)}))},q7=(t,e,n)=>t.compProxy?rTe(t,e,n):Se.createElement(e,{...t.compDetails.params,ref:n}),sTe=(t,e,n,i,r)=>{const s=t.compDetails,a=s.componentClass,o=s.componentFromFramework&&!t.popup,l=s.componentFromFramework&&t.popup,u=!s.componentFromFramework&&t.popup;return o?q7(t,a,e):l?Se.createElement(W7,{editDetails:t,cellCtrl:i,eParentCell:n,wrappedContent:q7(t,a,e)}):u&&r?Se.createElement(W7,{editDetails:t,cellCtrl:i,eParentCell:n,jsChildComp:r}):null},aTe=(t,e,n,i,r,s,a=!1)=>{const{context:o}=D.useContext(Zr),l=D.useCallback(()=>{const u=r.current;if(!u)return;const h=u.getGui();h&&h.parentElement&&h.remove(),o.destroyBean(u),r.current=void 0},[]);D.useEffect(()=>{const u=t!=null&&!a,h=t?.compDetails&&!t.compDetails.componentFromFramework,g=e&&n==null;if(!(u&&h&&!g)){l();return}const y=t.compDetails;if(r.current){const S=r.current,T=S.refresh!=null&&t.force==!1?S.refresh(y.params):!1;if(T===!0||T===void 0)return;l()}y.newAgStackInstance().then(S=>{if(!S)return;const x=S.getGui();if(!x)return;(e?n:s.current).appendChild(x),r.current=S})},[t,e,i,a]),D.useEffect(()=>l,[])},GU=aTe,oTe=({cellCtrl:t,parent:e})=>{const n=D.useRef(),i=D.useMemo(()=>{const{loadingComp:r}=t.getDeferLoadingCellRenderer();return r?{value:void 0,compDetails:r,force:!1}:void 0},[t]);if(GU(i,!1,void 0,1,n,e),i?.compDetails?.componentFromFramework){const r=i.compDetails.componentClass;return Se.createElement(r,{...i.compDetails.params})}return Se.createElement(Se.Fragment,null)},lTe=({cellCtrl:t,printLayout:e,editingCell:n})=>{const i=D.useContext(Zr),{context:r}=i,{column:{colIdSanitised:s},instanceId:a}=t,o=D.useRef(),[l,u]=D.useState(()=>t.isCellRenderer()?void 0:{compDetails:void 0,value:t.getValueToDisplay(),force:!1}),[h,g]=D.useState(),[v,y]=D.useState(1),[w,S]=D.useState(),[x,T]=D.useState(!1),[_,M]=D.useState(!1),[F,L]=D.useState(!1),[k,B]=D.useState(),H=D.useMemo(()=>t.isForceWrapper(),[t]),U=D.useMemo(()=>t.getCellAriaRole(),[t]),W=D.useRef(null),j=D.useRef(null),X=D.useRef(null),ne=D.useRef(),$=D.useRef(),q=D.useRef(),z=D.useRef([]),K=D.useRef(),Q=D.useRef(),[oe,le]=D.useState(0),V=D.useCallback(Ke=>{Q.current=Ke,le(Lt=>Lt+1)},[]),Z=l!=null&&(x||F||_)&&(h==null||!!h.popup),ae=H||Z,Ee=D.useMemo(()=>t.getCellValueClass(),[t]),Pe=D.useCallback(Ke=>{if($.current=Ke,Ke){const Lt=Ke.isCancelBeforeStart&&Ke.isCancelBeforeStart();setTimeout(()=>{Lt?(t.stopEditing(!0),t.focusCell(!0)):(t.cellEditorAttached(),t.enableEditorTooltipFeature(Ke))})}},[t]),Ie=D.useRef();Ie.current||(Ie.current=new vC(()=>W.current));const ze=!!h&&!h.popup;GU(l,ae,Q.current,oe,ne,W,ze);const Ot=D.useRef();D.useLayoutEffect(()=>{const Ke=Ot.current,Lt=l;if(Ot.current=l,Ke==null||Ke.compDetails==null||Lt==null||Lt.compDetails==null)return;K.current?.refreshVisibility();const Nn=Ke.compDetails,Zt=Lt.compDetails;if(Nn.componentClass!=Zt.componentClass||X.current?.refresh==null)return;X.current.refresh(Zt.params)!=!0&&y(Wt=>Wt+1)},[l]),D.useLayoutEffect(()=>{if(!(h&&!h.compDetails.componentFromFramework)||r.isDestroyed())return;const Lt=h.compDetails,Nn=h.popup===!0,Zt=Lt.newAgStackInstance();return Zt.then(Ye=>{if(!Ye)return;const Wt=Ye.getGui();Pe(Ye),Nn||((H?q:W).current?.appendChild(Wt),Ye.afterGuiAttached?.()),B(Ye)}),()=>{Zt.then(Ye=>{const Wt=Ye.getGui();t.disableEditorTooltipFeature(),r.destroyBean(Ye),Pe(void 0),B(void 0),Wt?.remove()})}},[h]);const me=D.useCallback(Ke=>{if(q.current=Ke,!Ke||r.isDestroyed()||!t.isAlive()){const Zt=z.current;z.current=[];for(const Ye of Zt)Ye();return}let Lt;const Nn=Zt=>{Zt&&(Ke.insertAdjacentElement("afterbegin",Zt.getGui()),z.current.push(()=>{FD(Zt.getGui()),r.destroyBean(Zt),K.current===Lt&&(K.current=void 0)}))};x&&Nn(t.createSelectionCheckbox()),F&&Nn(t.createDndSource()),_&&(Lt=t.createRowDragComp(),K.current=Lt,Lt&&(Nn(Lt),Lt.refreshVisibility()))},[t,r,F,_,x]),Be=D.useCallback(()=>{const Ke=!t.isCellSpanning()||j.current,Lt=W.current;if(!Lt||!Ke||!t||!t.isAlive()||r.isDestroyed()){o.current=r.destroyBean(o.current);return}o.current=r.createBean(new xm);const Nn={toggleCss:(Ye,Wt)=>Ie.current.toggleCss(Ye,Wt),setUserStyles:Ye=>S(Ye),getFocusableElement:()=>W.current,setIncludeSelection:Ye=>T(Ye),setIncludeRowDrag:Ye=>M(Ye),setIncludeDndSource:Ye=>L(Ye),getCellEditor:()=>$.current??null,getCellRenderer:()=>X.current??ne.current,getParentOfValue:()=>Q.current??q.current??W.current,setRenderDetails:(Ye,Wt,Vt)=>{const un=()=>{u(qi=>qi?.compDetails!==Ye||qi?.value!==Wt||qi?.force!==Vt?{value:Wt,compDetails:Ye,force:Vt}:qi)};if(Ye?.params?.deferRender&&!t.rowNode.group){const{loadingComp:qi,onReady:fa}=t.getDeferLoadingCellRenderer();if(qi){u({value:void 0,compDetails:qi,force:!1}),fa.then(()=>bEe(un));return}}un()},setEditDetails:(Ye,Wt,Vt,un)=>{if(Ye){let qi;Ye.componentFromFramework&&(un?qi=new tTe(Ye.params,()=>y(fa=>fa+1)):C5()),g({compDetails:Ye,popup:Wt,popupPosition:Vt,compProxy:qi}),Wt||u(void 0)}else t.hasBrowserFocus()&&Nn.getFocusableElement().focus({preventScroll:!0}),$.current=void 0,g(void 0)},refreshEditStyles:(Ye,Wt)=>{if(!W.current)return;const{current:Vt}=Ie;Vt.toggleCss("ag-cell-value",!ae),Vt.toggleCss("ag-cell-inline-editing",!!Ye&&!Wt),Vt.toggleCss("ag-cell-popup-editing",!!Ye&&!!Wt),Vt.toggleCss("ag-cell-not-inline-editing",!Ye||!!Wt)}},Zt=q.current||void 0;t.setComp(Nn,Lt,j.current??void 0,Zt,e,n,o.current)},[]),Je=D.useCallback(Ke=>{W.current=Ke,Be()},[]),be=D.useCallback(Ke=>{j.current=Ke,Be()},[]),wt=D.useMemo(()=>!!(l?.compDetails?.componentFromFramework&&Am(l.compDetails.componentClass)),[l]);D.useLayoutEffect(()=>{if(!W.current)return;const{current:Ke}=Ie;Ke.toggleCss("ag-cell-value",!ae),Ke.toggleCss("ag-cell-inline-editing",!!h&&!h.popup),Ke.toggleCss("ag-cell-popup-editing",!!h&&!!h.popup),Ke.toggleCss("ag-cell-not-inline-editing",!h||!!h.popup)});const nt=()=>{const{compDetails:Ke,value:Lt}=l;if(!Ke)return Lt?.toString?.()??Lt;if(Ke.componentFromFramework){const Nn=Ke.componentClass;return Se.createElement(D.Suspense,{fallback:Se.createElement(oTe,{cellCtrl:t,parent:W})},wt?Se.createElement(Nn,{...Ke.params,key:v}):Se.createElement(Nn,{...Ke.params,key:v,ref:X}))}},jt=()=>{const Ke=()=>l==null?null:ae?Se.createElement("span",{role:"presentation",id:`cell-${a}`,className:Ee,ref:V},nt()):nt(),Lt=Nn=>sTe(Nn,Pe,W.current,t,k);return h!=null?h.popup?Se.createElement(Se.Fragment,null,Ke(),Lt(h)):Lt(h):Ke()},$t=()=>Se.createElement("div",{ref:Je,style:w,role:U,"col-id":s},ae?Se.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:me},jt()):jt());return t.isCellSpanning()?Se.createElement("div",{ref:be,className:"ag-spanned-cell-wrapper",role:"presentation"},$t()):$t()},cTe=D.memo(lTe),uTe=({rowCtrl:t,containerType:e})=>{const{context:n,gos:i,editSvc:r}=D.useContext(Zr),s=D.useContext(FU)==="default",a=D.useRef(),o=D.useRef(t.getDomOrder()),l=t.isFullWidth(),u=t.rowNode.displayed,[h,g]=D.useState(()=>u?t.rowNode.getRowIndexString():null),[v,y]=D.useState(()=>t.rowId),[w,S]=D.useState(()=>t.businessKey),[x,T]=D.useState(()=>t.rowStyles),_=D.useRef(null),[M,F]=D.useState(()=>null),[L,k]=D.useState(),[B,H]=D.useState(()=>u?t.getInitialRowTop(e):void 0),[U,W]=D.useState(()=>u?t.getInitialTransform(e):void 0),j=D.useRef(null),X=D.useRef(),ne=D.useRef(),$=D.useRef(!1),[q,z]=D.useState(0);D.useEffect(()=>{if($.current||!L||q>10)return;const Be=j.current?.firstChild;Be?(t.setupDetailRowAutoHeight(Be),$.current=!0):z(Je=>Je+1)},[L,q]);const K=D.useRef();K.current||(K.current=new vC(()=>j.current));const Q=D.useRef(()=>{}),oe=D.useCallback(Be=>(Q.current=Be,()=>{Q.current=()=>{}}),[]),le=wEe(oe,()=>_.current,[]),V=s?le:M,Z=D.useCallback(Be=>{if(j.current=Be,a.current=Be?n.createBean(new xm):n.destroyBean(a.current),!Be){t.unsetComp(e);return}if(!t.isAlive()||n.isDestroyed())return;const Je={setTop:H,setTransform:W,toggleCss:(be,wt)=>K.current.toggleCss(be,wt),setDomOrder:be=>o.current=be,setRowIndex:g,setRowId:y,setRowBusinessKey:S,setUserStyles:T,setCellCtrls:(be,wt)=>{const nt=_.current,jt=YS(nt,be,o.current);jt!==nt&&(_.current=jt,s?Q.current():Ly(wt,()=>F(jt)))},showFullWidth:be=>{ne.current=be.params,k(be)},getFullWidthCellRenderer:()=>X.current,getFullWidthCellRendererParams:()=>ne.current,refreshFullWidth:be=>{const wt=be();return ne.current=wt,ze.current?(k(nt=>({...nt,params:wt})),!0):!X.current||!X.current.refresh?!1:X.current.refresh(wt)}};t.setComp(Je,Be,e,a.current)},[]);D.useLayoutEffect(()=>bC(L,n,j.current,X),[L]);const ae=D.useMemo(()=>{const Be={top:B,transform:U};return Object.assign(Be,x),Be},[B,U,x]),Ee=l&&L?.componentFromFramework,Pe=!l&&V!=null,Ie=D.useMemo(()=>!!(L?.componentFromFramework&&Am(L.componentClass)),[L]),ze=D.useRef(!1);D.useEffect(()=>{ze.current=Ie&&!!L&&!!i.get("reactiveCustomComponents")},[Ie,L]);const Ot=()=>V?.map(Be=>Se.createElement(cTe,{cellCtrl:Be,editingCell:r?.isEditing(Be,{withOpenEditor:!0})??!1,printLayout:t.printLayout,key:Be.instanceId})),me=()=>{const Be=L.componentClass;return Ie?Se.createElement(Be,{...L.params}):Se.createElement(Be,{...L.params,ref:X})};return Se.createElement("div",{ref:Z,role:"row",style:ae,"row-index":h,"row-id":v,"row-business-key":w},Pe?Ot():Ee?me():null)},K7=D.memo(uTe),hTe=({name:t})=>{const{context:e,gos:n}=D.useContext(Zr),i=D.useMemo(()=>yC(t),[t]),r=D.useRef(null),s=D.useRef(null),a=D.useRef(null),o=D.useRef([]),l=D.useRef([]),[u,h]=D.useState(()=>[]),g=!!n.get("enableCellSpan")&&!!i.getSpannedRowCtrls,v=D.useRef([]),y=D.useRef([]),[w,S]=D.useState(()=>[]),x=D.useRef(!1),T=D.useRef(),_=D.useMemo(()=>$a("ag-viewport",iU(t)),[t]),M=D.useMemo(()=>$a(rU(t)),[t]),F=D.useMemo(()=>$a("ag-spanning-container",U1e(t)),[t]),L=i.type==="center"||g,k=L?r:s;Kd(" AG Row Container "+t+" ",k);const B=D.useCallback(()=>{const q=!L||r.current!=null,z=s.current!=null,K=!g||a.current!=null;return q&&z&&K},[]),H=D.useCallback(()=>r.current==null&&s.current==null&&a.current==null,[]),U=D.useCallback(()=>{if(H()&&(T.current=e.destroyBean(T.current)),!e.isDestroyed()&&B()){const q=Q=>{const oe=YS(l.current,o.current,x.current);oe!==l.current&&(l.current=oe,Ly(Q,()=>h(oe)))},z=Q=>{const oe=YS(y.current,v.current,x.current);oe!==y.current&&(y.current=oe,Ly(Q,()=>S(oe)))},K={setHorizontalScroll:Q=>{r.current&&(r.current.scrollLeft=Q)},setViewportHeight:Q=>{r.current&&(r.current.style.height=Q)},setRowCtrls:({rowCtrls:Q,useFlushSync:oe})=>{const le=!!oe&&o.current.length>0&&Q.length>0;o.current=Q,q(le)},setSpannedRowCtrls:(Q,oe)=>{const le=!!oe&&v.current.length>0&&Q.length>0;v.current=Q,z(le)},setDomOrder:Q=>{x.current!=Q&&(x.current=Q,q(!1))},setContainerWidth:Q=>{s.current&&(s.current.style.width=Q)},setOffsetTop:Q=>{s.current&&(s.current.style.transform=`translateY(${Q})`)}};T.current=e.createBean(new J1e(t)),T.current.setComp(K,s.current,a.current??void 0,r.current)}},[B,H]),W=D.useCallback(q=>{s.current=q,U()},[U]),j=D.useCallback(q=>{a.current=q,U()},[U]),X=D.useCallback(q=>{r.current=q,U()},[U]),ne=()=>Se.createElement("div",{className:M,ref:W,role:L?"presentation":"rowgroup"},u.map(q=>Se.createElement(K7,{rowCtrl:q,containerType:i.type,key:q.instanceId})));if(!L)return ne();const $=()=>Se.createElement("div",{className:F,ref:j,role:"presentation"},w.map(q=>Se.createElement(K7,{rowCtrl:q,containerType:i.type,key:q.instanceId})));return Se.createElement("div",{className:_,ref:X,role:"rowgroup"},ne(),g?$():null)},dTe=D.memo(hTe),fTe=()=>{const t=D.useContext(Zr),{context:e,overlays:n}=t,[i,r]=D.useState(""),[s,a]=D.useState(0),[o,l]=D.useState(0),[u,h]=D.useState("0px"),[g,v]=D.useState("0px"),[y,w]=D.useState("100%"),[S,x]=D.useState("0px"),[T,_]=D.useState("0px"),[M,F]=D.useState("100%"),[L,k]=D.useState(!0),[B,H]=D.useState(!0),[U,W]=D.useState(null),[j,X]=D.useState(""),[ne,$]=D.useState(null),[q,z]=D.useState("ag-layout-normal"),K=D.useRef();K.current||(K.current=new vC(()=>Q.current));const Q=D.useRef(null),oe=D.useRef(null),le=D.useRef(null),V=D.useRef(null),Z=D.useRef(null),ae=D.useRef(null),Ee=D.useRef(null),Pe=D.useRef([]),Ie=D.useRef([]);Kd(" AG Grid Body ",Q),Kd(" AG Pinned Top ",oe),Kd(" AG Sticky Top ",le),Kd(" AG Middle ",ae),Kd(" AG Pinned Bottom ",Ee);const ze=D.useCallback(Ye=>{if(Q.current=Ye,!Ye||e.isDestroyed()){Pe.current=e.destroyBeans(Pe.current);for(const qt of Ie.current)qt();Ie.current=[];return}const Wt=(qt,Sn)=>{qt.appendChild(Sn),Ie.current.push(()=>Sn.remove())},Vt=qt=>{const Sn=e.createBean(new qt);return Pe.current.push(Sn),Sn},un=(qt,Sn,go)=>{Wt(qt,document.createComment(go)),Wt(qt,Vt(Sn).getGui())};un(Ye,M1e," AG Fake Horizontal Scroll ");const qi=n?.getOverlayWrapperCompClass();qi&&un(Ye,qi," AG Overlay Wrapper "),Z.current&&un(Z.current,P1e," AG Fake Vertical Scroll ");const fa={setRowAnimationCssOnBodyViewport:r,setColumnCount:qt=>{Q.current&&wye(Q.current,qt)},setRowCount:qt=>{Q.current&&Cye(Q.current,qt)},setTopHeight:a,setBottomHeight:l,setStickyTopHeight:h,setStickyTopTop:v,setStickyTopWidth:w,setTopInvisible:k,setBottomInvisible:H,setColumnMovingCss:(qt,Sn)=>K.current.toggleCss(qt,Sn),updateLayoutClasses:z,setAlwaysVerticalScrollClass:W,setPinnedTopBottomOverflowY:X,setCellSelectableCss:(qt,Sn)=>$(Sn?qt:null),setBodyViewportWidth:qt=>{ae.current&&(ae.current.style.width=qt)},registerBodyViewportResizeListener:qt=>{if(ae.current){const Sn=wm(t,ae.current,qt);Ie.current.push(()=>Sn())}},setStickyBottomHeight:x,setStickyBottomBottom:_,setStickyBottomWidth:F,setGridRootRole:qt=>Ye.setAttribute("role",qt)},fo=e.createBean(new iwe);Pe.current.push(fo),fo.setComp(fa,Ye,ae.current,oe.current,Ee.current,le.current,V.current)},[]),Ot=D.useMemo(()=>$a("ag-root","ag-unselectable",q),[q]),me=D.useMemo(()=>$a("ag-body-viewport",i,q,U,ne),[i,q,U,ne]),Be=D.useMemo(()=>$a("ag-body",q),[q]),Je=D.useMemo(()=>$a("ag-floating-top",L?"ag-invisible":null,ne),[ne,L]),be=D.useMemo(()=>$a("ag-sticky-top",ne),[ne]),wt=D.useMemo(()=>$a("ag-sticky-bottom",S==="0px"?"ag-invisible":null,ne),[ne,S]),nt=D.useMemo(()=>$a("ag-floating-bottom",B?"ag-invisible":null,ne),[ne,B]),jt=D.useMemo(()=>({height:s,minHeight:s,overflowY:j}),[s,j]),$t=D.useMemo(()=>({height:u,top:g,width:y}),[u,g,y]),Ke=D.useMemo(()=>({height:S,bottom:T,width:M}),[S,T,M]),Lt=D.useMemo(()=>({height:o,minHeight:o,overflowY:j}),[o,j]),Nn=Ye=>Se.createElement(dTe,{name:Ye,key:`${Ye}-container`}),Zt=({section:Ye,children:Wt,className:Vt,style:un})=>Se.createElement("div",{ref:Ye,className:Vt,role:"presentation",style:un},Wt.map(Nn));return Se.createElement("div",{ref:ze,className:Ot},Se.createElement(JEe,null),Zt({section:oe,className:Je,style:jt,children:["topLeft","topCenter","topRight","topFullWidth"]}),Se.createElement("div",{className:Be,ref:Z,role:"presentation"},Zt({section:ae,className:me,children:["left","center","right","fullWidth"]})),Zt({section:le,className:be,style:$t,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),Zt({section:V,className:wt,style:Ke,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),Zt({section:Ee,className:nt,style:Lt,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},gTe=D.memo(fTe),pTe=(t,e)=>{const{children:n,eFocusableElement:i,onTabKeyDown:r,gridCtrl:s,forceFocusOutWhenTabGuardsAreEmpty:a,isEmpty:o}=t,{context:l}=D.useContext(Zr),u=D.useRef(null),h=D.useRef(null),g=D.useRef(),v=T=>{const _=T==null?void 0:parseInt(T,10).toString();for(const M of[u,h])_===void 0?M.current?.removeAttribute("tabindex"):M.current?.setAttribute("tabindex",_)};D.useImperativeHandle(e,()=>({forceFocusOutOfContainer(T){g.current?.forceFocusOutOfContainer(T)}}));const y=D.useCallback(()=>{const T=u.current,_=h.current;if(!T&&!_||l.isDestroyed()){g.current=l.destroyBean(g.current);return}if(T&&_){const M={setTabIndex:v};g.current=l.createBean(new vEe({comp:M,eTopGuard:T,eBottomGuard:_,eFocusableElement:i,onTabKeyDown:r,forceFocusOutWhenTabGuardsAreEmpty:a,focusInnerElement:F=>s.focusInnerElement(F),isEmpty:o}))}},[]),w=D.useCallback(T=>{u.current=T,y()},[y]),S=D.useCallback(T=>{h.current=T,y()},[y]),x=T=>{const _=T==="top"?kT.TAB_GUARD_TOP:kT.TAB_GUARD_BOTTOM;return Se.createElement("div",{className:`${kT.TAB_GUARD} ${_}`,role:"presentation",ref:T==="top"?w:S})};return Se.createElement(Se.Fragment,null,x("top"),n,x("bottom"))},mTe=D.forwardRef(pTe),vTe=D.memo(mTe),yTe=({context:t})=>{const[e,n]=D.useState(""),[i,r]=D.useState(""),[s,a]=D.useState(null),[o,l]=D.useState(null),[u,h]=D.useState(!1),[g,v]=D.useState(),y=D.useRef(),w=D.useRef(null),S=D.useRef(),[x,T]=D.useState(null),_=D.useRef(()=>{}),M=D.useRef(),F=D.useRef([]),L=D.useCallback(()=>{},[]);Kd(" AG Grid ",w);const k=D.useCallback(X=>{if(w.current=X,y.current=X?t.createBean(new swe):t.destroyBean(y.current),!X||t.isDestroyed())return;const ne=y.current;_.current=ne.focusInnerElement.bind(ne);const $={destroyGridUi:()=>{},setRtlClass:n,forceFocusOutOfContainer:q=>{if(!q&&M.current?.isDisplayed()){M.current.forceFocusOutOfContainer(q);return}S.current?.forceFocusOutOfContainer(q)},updateLayoutClasses:r,getFocusableContainers:()=>{const q=[],z=w.current?.querySelector(".ag-root");z&&q.push({getGui:()=>z});for(const K of F.current)K.isDisplayed()&&q.push(K);return q},setCursor:a,setUserSelect:l};ne.setComp($,X,X),h(!0)},[]);D.useEffect(()=>{const X=y.current,ne=w.current;if(!g||!X||!x||!ne||t.isDestroyed())return;const $=[],{watermarkSelector:q,paginationSelector:z,sideBarSelector:K,statusBarSelector:Q,gridHeaderDropZonesSelector:oe}=X.getOptionalSelectors(),le=[];if(oe){const Z=t.createBean(new oe.component),ae=Z.getGui();ne.insertAdjacentElement("afterbegin",ae),le.push(ae),$.push(Z)}if(K){const Z=t.createBean(new K.component),ae=Z.getGui(),Ee=x.querySelector(".ag-tab-guard-bottom");Ee&&(Ee.insertAdjacentElement("beforebegin",ae),le.push(ae)),$.push(Z),F.current.push(Z)}const V=Z=>{const ae=t.createBean(new Z),Ee=ae.getGui();return ne.insertAdjacentElement("beforeend",Ee),le.push(Ee),$.push(ae),ae};if(Q&&V(Q.component),z){const Z=V(z.component);M.current=Z,F.current.push(Z)}return q&&V(q.component),()=>{t.destroyBeans($);for(const Z of le)Z.remove()}},[g,x,t]);const B=D.useMemo(()=>$a("ag-root-wrapper",e,i),[e,i]),H=D.useMemo(()=>$a("ag-root-wrapper-body","ag-focus-managed",i),[i]),U=D.useMemo(()=>({userSelect:o??"",WebkitUserSelect:o??"",cursor:s??""}),[o,s]),W=D.useCallback(X=>{S.current=X,v(X!==null)},[]),j=D.useCallback(()=>!y.current?.isFocusable(),[]);return Se.createElement("div",{ref:k,className:B,style:U,role:"presentation"},Se.createElement("div",{className:H,ref:T,role:"presentation"},u&&x&&!t.isDestroyed()&&Se.createElement(Zr.Provider,{value:t.getBeans()},Se.createElement(vTe,{ref:W,eFocusableElement:x,onTabKeyDown:L,gridCtrl:y.current,forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:j},Se.createElement(gTe,null)))))},CTe=D.memo(yTe),bTe=class extends He{postConstruct(){if(this.beans.colAutosize){const t=this.queueResizeOperationsForTick.bind(this);this.addManagedEventListeners({rowExpansionStateChanged:t,expandOrCollapseAll:t,cellValueChanged:t,rowNodeDataChanged:t,rowDataUpdated:t})}}queueResizeOperationsForTick(){const t=this.beans.colAutosize;t.shouldQueueResizeOperations=!0,setTimeout(()=>{t.processResizeOperations()},0)}areHeaderCellsRendered(){return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().every(t=>t.getAllCtrls().every(e=>e.areCellsRendered()))}areCellsRendered(){return this.beans.rowRenderer.getAllRowCtrls().every(t=>t.isRowRendered()&&t.getAllCellCtrls().every(e=>!!e.eGui))}},wTe=typeof window>"u"?D.useEffect:D.useLayoutEffect,zU={setGridApi:void 0,maxComponentCreationTimeMs:void 0,children:void 0},STe={gridOptions:void 0,modules:void 0,containerStyle:void 0,className:void 0,passGridApi:void 0,componentWrappingElement:void 0,...zU},VU=new Set(Object.keys(STe)),xTe=new Set(Object.keys(zU)),UU=t=>{const e=D.useContext(GEe),n=D.useContext(zEe),i=D.useRef(),r=D.useRef(null),s=D.useRef(null),a=D.useRef([]),o=D.useRef([]),l=D.useRef(t),u=D.useRef(),h=D.useRef(),g=D.useRef(!1),[v,y]=D.useState(void 0),[,w]=D.useState(0),S=D.useRef(),x=L=>{const k=r.current?.classList,B=(H="")=>H.trim().split(/\s+/g).filter(Boolean);if(S.current!==L){for(const H of B(S.current))k?.contains(H)&&k.remove(H);for(const H of B(L))k?.contains(H)||k?.add(H);S.current=L}};wTe(()=>{x(t.className)},[t.className]);const T=D.useCallback(L=>{if(r.current=L,x(t.className),!L){for(const q of a.current)q();a.current.length=0;return}const k=[...t.modules??[],...e??[]];n&&uV(k)?.setLicenseKey(n),s.current||(s.current=new HEe(()=>w(q=>q+1),t.componentWrappingElement,t.maxComponentCreationTimeMs),a.current.push(()=>{s.current?.destroy(),s.current=null}));const B=mCe(t.gridOptions,t,Object.keys(t).filter(q=>!VU.has(q))),H=()=>{if(g.current){const q=()=>u.current?.shouldQueueUpdates()?void 0:o.current.shift();let z=q();for(;z;)z(),z=q()}},U=new RTe(H);u.current=U;const W=new bTe,j={providedBeanInstances:{frameworkCompWrapper:new ETe(s.current,B),renderStatus:W},modules:k,frameworkOverrides:U,setThemeOnGridDiv:!0},X=q=>{y(q),q.createBean(W),a.current.push(()=>{q.destroy()}),q.getBean("ctrlsSvc").whenReady({addDestroyFunc:z=>{a.current.push(z)}},()=>{if(q.isDestroyed())return;const z=i.current;z&&t.passGridApi?.(z)})},ne=q=>{q.getBean("ctrlsSvc").whenReady({addDestroyFunc:z=>{a.current.push(z)}},()=>{for(const z of o.current)z();o.current.length=0,g.current=!0})},$=new fEe;B.gridId??(B.gridId=h.current),i.current=$.create(L,B,X,ne,j),a.current.push(()=>{i.current=void 0}),i.current&&(h.current=i.current.getGridId())},[]),_=D.useMemo(()=>({height:"100%",...t.containerStyle||{}}),[t.containerStyle]),M=D.useCallback(L=>{g.current&&!u.current?.shouldQueueUpdates()?L():o.current.push(L)},[]);D.useEffect(()=>{const L=ATe(l.current,t);l.current=t,M(()=>{i.current&&vCe(L,i.current)})},[t]);const F=!Se.useSyncExternalStore||Aw(t,"renderingMode")==="legacy"?"legacy":"default";return Se.createElement("div",{style:_,ref:T},Se.createElement(FU.Provider,{value:F},v&&!v.isDestroyed()?Se.createElement(CTe,{key:v.instanceId,context:v}):null,s.current?.getPortals()??null))};function ATe(t,e){const n={};for(const i of Object.keys(e)){if(VU.has(i)){xTe.has(i)&&Tt(274,{prop:i});continue}const r=e[i];t[i]!==r&&(n[i]=r)}return n}var ETe=class extends mEe{constructor(t,e){super(),this.parent=t,this.gridOptions=e}createWrapper(t,e){const n=this.gridOptions;if(Aw(n,"reactiveCustomComponents")){const a=(o=>{switch(o){case"filter":return Aw(n,"enableFilterHandlers")?_Ee:MEe;case"floatingFilterComponent":return Aw(n,"enableFilterHandlers")?LEe:OEe;case"dateComponent":return REe;case"dragAndDropImageComponent":return DEe;case"loadingOverlayComponent":case"noRowsOverlayComponent":case"activeOverlay":return TEe;case"statusPanel":return NEe;case"toolPanel":return BEe;case"menuItem":return kEe;case"cellRenderer":return EEe;case"innerHeaderComponent":return FEe}})(e.name);if(a)return new a(t,this.parent,e)}else switch(e.name){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"activeOverlay":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":C5();break}const r=!e.cellRenderer&&e.name!=="toolPanel";return new IU(t,this.parent,e,r)}},TTe=D.forwardRef((t,e)=>{const n=D.useContext(Zr),{registry:i,context:r,gos:s,rowModel:a}=n,[o,l]=D.useState(()=>new no),[u,h]=D.useState(()=>new no),[g,v]=D.useState(),[y,w]=D.useState(),S=D.useRef(),x=D.useRef(null),T=D.useRef(),_=D.useMemo(()=>$ye(t.api.getGridId(),g?.rowModelType??"clientSide"),[t]),M=D.useMemo(()=>o.toString()+" ag-details-row",[o]),F=D.useMemo(()=>u.toString()+" ag-details-grid",[u]);e&&D.useImperativeHandle(e,()=>({refresh(){return S.current?.refresh()??!1}})),t.template&&Tt(230);const L=D.useCallback(B=>{if(x.current=B,!B||r.isDestroyed()){S.current=r.destroyBean(S.current),T.current?.();return}const H={toggleCss:(W,j)=>l(X=>X.setClass(W,j)),toggleDetailGridCss:(W,j)=>h(X=>X.setClass(W,j)),setDetailGrid:W=>v(W),setRowData:W=>w(W),getGui:()=>x.current},U=i.createDynamicBean("detailCellRendererCtrl",!0);if(U&&(r.createBean(U),U.init(H,t),S.current=U,s.get("detailRowAutoHeight"))){const W=()=>{if(x.current==null)return;const j=x.current.clientHeight;j!=null&&j>0&&setTimeout(()=>{t.node.setRowHeight(j),(mC(s)||pV(s))&&a.onRowHeightChanged()},0)};T.current=wm(n,B,W),W()}},[]),k=D.useCallback(B=>{S.current?.registerDetailWithMaster(B)},[]);return Se.createElement("div",{className:M,ref:L},g&&Se.createElement(UU,{className:F,...g,modules:_,rowData:y,passGridApi:k}))}),RTe=class extends LU{constructor(t){super("react"),this.processQueuedUpdates=t,this.queueUpdates=!1,this.renderingEngine="react",this.frameworkComponents={agGroupCellRenderer:U7,agGroupRowRenderer:U7,agDetailCellRenderer:TTe},this.wrapIncoming=(e,n)=>n==="ensureVisible"?CEe(e):e()}frameworkComponent(t){return this.frameworkComponents[t]}isFrameworkComponent(t){if(!t)return!1;const e=t.prototype;return!(e&&"getGui"in e)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return yEe()}},DTe=class extends D.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=t=>{this.api=t;for(const e of this.apiListeners)e(t)}}registerApiListener(t){this.apiListeners.push(t)}componentWillUnmount(){this.apiListeners.length=0}render(){return Se.createElement(UU,{...this.props,passGridApi:this.setGridApi})}};Hp.workerSrc=new URL("/Space-Management/assets/pdf.worker.min-wgc6bjNh.mjs",import.meta.url).toString();const nw=["#93C5FD","#86EFAC","#FCD34D","#F9A8D4","#A5B4FC","#6EE7B7","#FCA5A5","#C4B5FD","#67E8F9","#FDE68A"],MTe=["Office","Conference Room","Corridor","Storage","Restroom","Open Area","Lab","Reception","Utility","Other"];function _Te(){const[t,e]=D.useState(null),[n,i]=D.useState({width:900,height:600}),[r,s]=D.useState("select"),[a,o]=D.useState([]),[l,u]=D.useState(!1),[h,g]=D.useState(null),[v,y]=D.useState([]),[w,S]=D.useState(null),[x,T]=D.useState(1),_=D.useRef(null),M=D.useRef(null),F=[{field:"id",headerName:"ID",width:60,editable:!1},{field:"name",headerName:"Room Name",editable:!0,flex:1},{field:"useType",headerName:"Use Type",editable:!0,flex:1,cellEditor:"agSelectCellEditor",cellEditorParams:{values:MTe}},{field:"area",headerName:"Area (sq ft)",editable:!0,width:120,valueParser:$=>Number($.newValue)},{field:"department",headerName:"Department",editable:!0,flex:1},{field:"notes",headerName:"Notes",editable:!0,flex:1}];D.useEffect(()=>{const $=new ResizeObserver(()=>{M.current&&i({width:M.current.offsetWidth,height:M.current.offsetHeight})});return M.current&&$.observe(M.current),()=>$.disconnect()},[]);const L=async $=>{const q=$.target.files[0];if(!q)return;const z=await q.arrayBuffer(),Q=await(await _z({data:z}).promise).getPage(1),oe=Q.getViewport({scale:1.5}),le=document.createElement("canvas");le.width=oe.width,le.height=oe.height;const V=le.getContext("2d");await Q.render({canvasContext:V,viewport:oe}).promise;const Z=new window.Image;Z.src=le.toDataURL(),Z.onload=()=>{e(Z);const ae=n.width/oe.width;T(Math.min(ae,1))}},k=()=>{const q=_.current.getPointerPosition();return{x:q.x/x,y:q.y/x}},B=$=>{if($.target!==_.current&&$.target.getClassName?.(),r==="rect"){const q=k();g({x:q.x,y:q.y,width:0,height:0}),u(!0)}else if(r==="polygon"){const q=k();y(z=>[...z,q.x,q.y])}else r==="select"&&S(null)},H=()=>{if(r==="rect"&&l&&h){const $=k();g(q=>({...q,width:$.x-q.x,height:$.y-q.y}))}},U=()=>{if(r==="rect"&&l&&h){if(u(!1),Math.abs(h.width)>5&&Math.abs(h.height)>5){const $={id:a.length+1,type:"rect",x:h.width<0?h.x+h.width:h.x,y:h.height<0?h.y+h.height:h.y,width:Math.abs(h.width),height:Math.abs(h.height),name:`Room ${a.length+1}`,useType:"Office",area:Math.round(Math.abs(h.width)*Math.abs(h.height)/100),department:"",notes:"",color:nw[a.length%nw.length]};o(q=>[...q,$])}g(null)}},W=()=>{if(v.length<6)return;const $={id:a.length+1,type:"polygon",points:v,name:`Room ${a.length+1}`,useType:"Office",area:0,department:"",notes:"",color:nw[a.length%nw.length]};o(q=>[...q,$]),y([])},j=()=>{w&&(o($=>$.filter(q=>q.id!==w)),S(null))},X=$=>{o(q=>q.map(z=>z.id===$.data.id?{...z,...$.data}:z))},ne=()=>{const $=["ID","Name","Use Type","Area (sq ft)","Department","Notes"],q=a.map(le=>[le.id,le.name,le.useType,le.area,le.department,le.notes].join(",")),z=[$.join(","),...q].join(`
`),K=new Blob([z],{type:"text/csv"}),Q=URL.createObjectURL(K),oe=document.createElement("a");oe.href=Q,oe.download="space-data.csv",oe.click(),URL.revokeObjectURL(Q)};return ke.jsxs("div",{className:"flex flex-col gap-4",children:[ke.jsxs("div",{className:"bg-white rounded-2xl shadow-md border border-gray-200 p-4 flex flex-wrap items-center gap-3",children:[ke.jsx("span",{className:"font-semibold text-gray-700 mr-2",children:"Floor Plan Editor"}),ke.jsxs("label",{className:"cursor-pointer px-4 py-2 bg-gray-800 text-white text-sm rounded-md hover:bg-gray-700 transition",children:[" Load PDF",ke.jsx("input",{type:"file",accept:".pdf",className:"hidden",onChange:L})]}),ke.jsx("div",{className:"h-6 w-px bg-gray-300"}),[{id:"select",label:" Select"},{id:"rect",label:" Rectangle"},{id:"polygon",label:" Polygon"}].map($=>ke.jsx("button",{onClick:()=>{s($.id),y([])},className:`px-3 py-2 text-sm rounded-md border transition ${r===$.id?"bg-gray-800 text-white border-gray-800":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:$.label},$.id)),r==="polygon"&&v.length>=6&&ke.jsx("button",{onClick:W,className:"px-3 py-2 text-sm rounded-md bg-green-600 text-white hover:bg-green-700 transition",children:" Finish Polygon"}),w&&ke.jsx("button",{onClick:j,className:"px-3 py-2 text-sm rounded-md bg-red-500 text-white hover:bg-red-600 transition",children:" Delete Room"}),ke.jsx("div",{className:"ml-auto",children:ke.jsx("button",{onClick:ne,disabled:a.length===0,className:"px-4 py-2 text-sm rounded-md bg-blue-600 text-white hover:bg-blue-700 transition disabled:opacity-40",children:" Export CSV"})})]}),ke.jsx("div",{className:"bg-white rounded-2xl shadow-md border border-gray-200 overflow-hidden",children:ke.jsxs("div",{ref:M,className:"w-full",style:{height:"560px",background:"#F8FAFC",cursor:r==="select"?"default":"crosshair"},children:[!t&&ke.jsxs("div",{className:"flex items-center justify-center h-full text-gray-400 flex-col gap-2",children:[ke.jsx("span",{className:"text-4xl",children:""}),ke.jsx("span",{className:"text-lg",children:"Load a PDF floor plan to get started"}),ke.jsx("span",{className:"text-sm",children:"Then use the Rectangle or Polygon tool to draw rooms"})]}),ke.jsx(lve,{ref:_,width:n.width,height:n.height,scaleX:x,scaleY:x,onMouseDown:B,onMouseMove:H,onMouseUp:U,children:ke.jsxs(sve,{children:[t&&ke.jsx(ove,{image:t,x:0,y:0,width:t.naturalWidth,height:t.naturalHeight}),a.map($=>{const q=$.id===w;return $.type==="rect"?ke.jsxs(Se.Fragment,{children:[ke.jsx(fF,{x:$.x,y:$.y,width:$.width,height:$.height,fill:$.color,opacity:.45,stroke:q?"#1D4ED8":"#374151",strokeWidth:q?2:1,onClick:()=>r==="select"&&S($.id)}),ke.jsx(pF,{x:$.x+4,y:$.y+4,text:$.name,fontSize:11,fill:"#1F2937",listening:!1})]},$.id):$.type==="polygon"?ke.jsxs(Se.Fragment,{children:[ke.jsx(gF,{points:$.points,fill:$.color,opacity:.45,stroke:q?"#1D4ED8":"#374151",strokeWidth:q?2:1,closed:!0,onClick:()=>r==="select"&&S($.id)}),ke.jsx(pF,{x:$.points[0]+4,y:$.points[1]+4,text:$.name,fontSize:11,fill:"#1F2937",listening:!1})]},$.id):null}),h&&ke.jsx(fF,{x:h.x,y:h.y,width:h.width,height:h.height,fill:"#93C5FD",opacity:.35,stroke:"#3B82F6",strokeWidth:1,dash:[4,4]}),v.length>0&&ke.jsxs(ke.Fragment,{children:[ke.jsx(gF,{points:v,stroke:"#3B82F6",strokeWidth:1.5,dash:[4,4]}),Array.from({length:v.length/2}).map(($,q)=>ke.jsx(ave,{x:v[q*2],y:v[q*2+1],radius:4,fill:"#3B82F6"},q))]})]})})]})}),ke.jsxs("div",{className:"bg-white rounded-2xl shadow-md border border-gray-200 p-4",children:[ke.jsxs("div",{className:"flex justify-between items-center mb-3",children:[ke.jsxs("h3",{className:"font-semibold text-gray-700",children:["Room Data  ",a.length," room",a.length!==1?"s":""]}),ke.jsx("span",{className:"text-xs text-gray-400",children:"Click any cell to edit"})]}),a.length===0?ke.jsx("div",{className:"text-center text-gray-400 py-8 border border-dashed border-gray-300 rounded-xl",children:"Draw rooms on the floor plan to populate this table"}):ke.jsx("div",{className:"ag-theme-alpine w-full",style:{height:300},children:ke.jsx(DTe,{rowData:a,columnDefs:F,onCellValueChanged:X,getRowId:$=>String($.data.id),stopEditingWhenCellsLoseFocus:!0,onRowClicked:$=>S($.data.id)})})]})]})}function PTe(){const[t,e]=D.useState([]),n=({isActive:i})=>`px-3 py-2 rounded-md text-sm font-medium transition ${i?"bg-gray-700 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"}`;return ke.jsx(tq,{children:ke.jsxs("div",{className:"min-h-screen bg-gray-100 text-gray-900",children:[ke.jsxs("nav",{className:"bg-gray-900 shadow-md p-4 flex justify-between items-center",children:[ke.jsx("h1",{className:"text-xl font-bold text-white",children:" Space Manager"}),ke.jsxs("div",{className:"flex space-x-2",children:[ke.jsx(aw,{to:"/",className:n,children:"Dashboard"}),ke.jsx(aw,{to:"/upload",className:n,children:"Upload"}),ke.jsx(aw,{to:"/editor",className:n,children:"Floor Plan"})]})]}),ke.jsx("main",{className:"max-w-7xl mx-auto mt-8 p-4",children:ke.jsxs(PW,{children:[ke.jsx(iw,{path:"/",element:ke.jsx(Lhe,{data:t})}),ke.jsx(iw,{path:"/upload",element:ke.jsx(ufe,{onUpload:e})}),ke.jsx(iw,{path:"/editor",element:ke.jsx(_Te,{})})]})}),ke.jsxs("footer",{className:"text-center text-gray-500 text-sm py-6",children:[" ",new Date().getFullYear()," Space Management Dashboard"]})]})})}Lj.createRoot(document.getElementById("root")).render(ke.jsx(D.StrictMode,{children:ke.jsx(PTe,{})}));

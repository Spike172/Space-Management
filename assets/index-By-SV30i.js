function _mergeNamespaces(e,t){for(var n=0;n<t.length;n++){const o=t[n];if(typeof o!="string"&&!Array.isArray(o)){for(const u in o)if(u!=="default"&&!(u in e)){const d=Object.getOwnPropertyDescriptor(o,u);d&&Object.defineProperty(e,u,d.get?d:{enumerable:!0,get:()=>o[u]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function n(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(u){if(u.ep)return;u.ep=!0;const d=n(u);fetch(u.href,d)}})();function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var n=function o(){var u=!1;try{u=this instanceof o}catch{}return u?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var u=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(n,o,u.get?u:{enumerable:!0,get:function(){return e[o]}})}),n}var jsxRuntime={exports:{}},reactJsxRuntime_production={};var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(o,u,d){var f=null;if(d!==void 0&&(f=""+d),u.key!==void 0&&(f=""+u.key),"key"in u){d={};for(var g in u)g!=="key"&&(d[g]=u[g])}else d=u;return u=d.ref,{$$typeof:e,type:o,key:f,ref:u!==void 0?u:null,props:d}}return reactJsxRuntime_production.Fragment=t,reactJsxRuntime_production.jsx=n,reactJsxRuntime_production.jsxs=n,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),_=Symbol.iterator;function F(K){return K===null||typeof K!="object"?null:(K=_&&K[_]||K["@@iterator"],typeof K=="function"?K:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,N={};function B(K,ne,ue){this.props=K,this.context=ne,this.refs=N,this.updater=ue||M}B.prototype.isReactComponent={},B.prototype.setState=function(K,ne){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,ne,"setState")},B.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function H(){}H.prototype=B.prototype;function U(K,ne,ue){this.props=K,this.context=ne,this.refs=N,this.updater=ue||M}var $=U.prototype=new H;$.constructor=U,I($,B.prototype),$.isPureReactComponent=!0;var z=Array.isArray;function j(){}var J={H:null,A:null,T:null,S:null},ie=Object.prototype.hasOwnProperty;function se(K,ne,ue){var ye=ue.ref;return{$$typeof:e,type:K,key:ne,ref:ye!==void 0?ye:null,props:ue}}function fe(K,ne){return se(K.type,ne,K.props)}function de(K){return typeof K=="object"&&K!==null&&K.$$typeof===e}function Ce(K){var ne={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(ue){return ne[ue]})}var be=/\/+/g;function xe(K,ne){return typeof K=="object"&&K!==null&&K.key!=null?Ce(""+K.key):ne.toString(36)}function Ee(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(j,j):(K.status="pending",K.then(function(ne){K.status==="pending"&&(K.status="fulfilled",K.value=ne)},function(ne){K.status==="pending"&&(K.status="rejected",K.reason=ne)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function ae(K,ne,ue,ye,pe){var X=typeof K;(X==="undefined"||X==="boolean")&&(K=null);var le=!1;if(K===null)le=!0;else switch(X){case"bigint":case"string":case"number":le=!0;break;case"object":switch(K.$$typeof){case e:case t:le=!0;break;case S:return le=K._init,ae(le(K._payload),ne,ue,ye,pe)}}if(le)return pe=pe(K),le=ye===""?"."+xe(K,0):ye,z(pe)?(ue="",le!=null&&(ue=le.replace(be,"$&/")+"/"),ae(pe,ne,ue,"",function(me){return me})):pe!=null&&(de(pe)&&(pe=fe(pe,ue+(pe.key==null||K&&K.key===pe.key?"":(""+pe.key).replace(be,"$&/")+"/")+le)),ne.push(pe)),1;le=0;var he=ye===""?".":ye+":";if(z(K))for(var ce=0;ce<K.length;ce++)ye=K[ce],X=he+xe(ye,ce),le+=ae(ye,ne,ue,X,pe);else if(ce=F(K),typeof ce=="function")for(K=ce.call(K),ce=0;!(ye=K.next()).done;)ye=ye.value,X=he+xe(ye,ce++),le+=ae(ye,ne,ue,X,pe);else if(X==="object"){if(typeof K.then=="function")return ae(Ee(K),ne,ue,ye,pe);throw ne=String(K),Error("Objects are not valid as a React child (found: "+(ne==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":ne)+"). If you meant to render a collection of children, use an array instead.")}return le}function oe(K,ne,ue){if(K==null)return K;var ye=[],pe=0;return ae(K,ye,"","",function(X){return ne.call(ue,X,pe++)}),ye}function ee(K){if(K._status===-1){var ne=K._result;ne=ne(),ne.then(function(ue){(K._status===0||K._status===-1)&&(K._status=1,K._result=ue)},function(ue){(K._status===0||K._status===-1)&&(K._status=2,K._result=ue)}),K._status===-1&&(K._status=0,K._result=ne)}if(K._status===1)return K._result.default;throw K._result}var Z=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ne=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(ne))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)},Q={map:oe,forEach:function(K,ne,ue){oe(K,function(){ne.apply(this,arguments)},ue)},count:function(K){var ne=0;return oe(K,function(){ne++}),ne},toArray:function(K){return oe(K,function(ne){return ne})||[]},only:function(K){if(!de(K))throw Error("React.Children.only expected to receive a single React element child.");return K}};return react_production.Activity=R,react_production.Children=Q,react_production.Component=B,react_production.Fragment=n,react_production.Profiler=u,react_production.PureComponent=U,react_production.StrictMode=o,react_production.Suspense=v,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=J,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(K){return J.H.useMemoCache(K)}},react_production.cache=function(K){return function(){return K.apply(null,arguments)}},react_production.cacheSignal=function(){return null},react_production.cloneElement=function(K,ne,ue){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var ye=I({},K.props),pe=K.key;if(ne!=null)for(X in ne.key!==void 0&&(pe=""+ne.key),ne)!ie.call(ne,X)||X==="key"||X==="__self"||X==="__source"||X==="ref"&&ne.ref===void 0||(ye[X]=ne[X]);var X=arguments.length-2;if(X===1)ye.children=ue;else if(1<X){for(var le=Array(X),he=0;he<X;he++)le[he]=arguments[he+2];ye.children=le}return se(K.type,pe,ye)},react_production.createContext=function(K){return K={$$typeof:f,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:d,_context:K},K},react_production.createElement=function(K,ne,ue){var ye,pe={},X=null;if(ne!=null)for(ye in ne.key!==void 0&&(X=""+ne.key),ne)ie.call(ne,ye)&&ye!=="key"&&ye!=="__self"&&ye!=="__source"&&(pe[ye]=ne[ye]);var le=arguments.length-2;if(le===1)pe.children=ue;else if(1<le){for(var he=Array(le),ce=0;ce<le;ce++)he[ce]=arguments[ce+2];pe.children=he}if(K&&K.defaultProps)for(ye in le=K.defaultProps,le)pe[ye]===void 0&&(pe[ye]=le[ye]);return se(K,X,pe)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(K){return{$$typeof:g,render:K}},react_production.isValidElement=de,react_production.lazy=function(K){return{$$typeof:S,_payload:{_status:-1,_result:K},_init:ee}},react_production.memo=function(K,ne){return{$$typeof:w,type:K,compare:ne===void 0?null:ne}},react_production.startTransition=function(K){var ne=J.T,ue={};J.T=ue;try{var ye=K(),pe=J.S;pe!==null&&pe(ue,ye),typeof ye=="object"&&ye!==null&&typeof ye.then=="function"&&ye.then(j,Z)}catch(X){Z(X)}finally{ne!==null&&ue.types!==null&&(ne.types=ue.types),J.T=ne}},react_production.unstable_useCacheRefresh=function(){return J.H.useCacheRefresh()},react_production.use=function(K){return J.H.use(K)},react_production.useActionState=function(K,ne,ue){return J.H.useActionState(K,ne,ue)},react_production.useCallback=function(K,ne){return J.H.useCallback(K,ne)},react_production.useContext=function(K){return J.H.useContext(K)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(K,ne){return J.H.useDeferredValue(K,ne)},react_production.useEffect=function(K,ne){return J.H.useEffect(K,ne)},react_production.useEffectEvent=function(K){return J.H.useEffectEvent(K)},react_production.useId=function(){return J.H.useId()},react_production.useImperativeHandle=function(K,ne,ue){return J.H.useImperativeHandle(K,ne,ue)},react_production.useInsertionEffect=function(K,ne){return J.H.useInsertionEffect(K,ne)},react_production.useLayoutEffect=function(K,ne){return J.H.useLayoutEffect(K,ne)},react_production.useMemo=function(K,ne){return J.H.useMemo(K,ne)},react_production.useOptimistic=function(K,ne){return J.H.useOptimistic(K,ne)},react_production.useReducer=function(K,ne,ue){return J.H.useReducer(K,ne,ue)},react_production.useRef=function(K){return J.H.useRef(K)},react_production.useState=function(K){return J.H.useState(K)},react_production.useSyncExternalStore=function(K,ne,ue){return J.H.useSyncExternalStore(K,ne,ue)},react_production.useTransition=function(){return J.H.useTransition()},react_production.version="19.2.0",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(e){function t(ae,oe){var ee=ae.length;ae.push(oe);e:for(;0<ee;){var Z=ee-1>>>1,Q=ae[Z];if(0<u(Q,oe))ae[Z]=oe,ae[ee]=Q,ee=Z;else break e}}function n(ae){return ae.length===0?null:ae[0]}function o(ae){if(ae.length===0)return null;var oe=ae[0],ee=ae.pop();if(ee!==oe){ae[0]=ee;e:for(var Z=0,Q=ae.length,K=Q>>>1;Z<K;){var ne=2*(Z+1)-1,ue=ae[ne],ye=ne+1,pe=ae[ye];if(0>u(ue,ee))ye<Q&&0>u(pe,ue)?(ae[Z]=pe,ae[ye]=ee,Z=ye):(ae[Z]=ue,ae[ne]=ee,Z=ne);else if(ye<Q&&0>u(pe,ee))ae[Z]=pe,ae[ye]=ee,Z=ye;else break e}}return oe}function u(ae,oe){var ee=ae.sortIndex-oe.sortIndex;return ee!==0?ee:ae.id-oe.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var f=Date,g=f.now();e.unstable_now=function(){return f.now()-g}}var v=[],w=[],S=1,R=null,_=3,F=!1,M=!1,I=!1,N=!1,B=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function $(ae){for(var oe=n(w);oe!==null;){if(oe.callback===null)o(w);else if(oe.startTime<=ae)o(w),oe.sortIndex=oe.expirationTime,t(v,oe);else break;oe=n(w)}}function z(ae){if(I=!1,$(ae),!M)if(n(v)!==null)M=!0,j||(j=!0,Ce());else{var oe=n(w);oe!==null&&Ee(z,oe.startTime-ae)}}var j=!1,J=-1,ie=5,se=-1;function fe(){return N?!0:!(e.unstable_now()-se<ie)}function de(){if(N=!1,j){var ae=e.unstable_now();se=ae;var oe=!0;try{e:{M=!1,I&&(I=!1,H(J),J=-1),F=!0;var ee=_;try{t:{for($(ae),R=n(v);R!==null&&!(R.expirationTime>ae&&fe());){var Z=R.callback;if(typeof Z=="function"){R.callback=null,_=R.priorityLevel;var Q=Z(R.expirationTime<=ae);if(ae=e.unstable_now(),typeof Q=="function"){R.callback=Q,$(ae),oe=!0;break t}R===n(v)&&o(v),$(ae)}else o(v);R=n(v)}if(R!==null)oe=!0;else{var K=n(w);K!==null&&Ee(z,K.startTime-ae),oe=!1}}break e}finally{R=null,_=ee,F=!1}oe=void 0}}finally{oe?Ce():j=!1}}}var Ce;if(typeof U=="function")Ce=function(){U(de)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,xe=be.port2;be.port1.onmessage=de,Ce=function(){xe.postMessage(null)}}else Ce=function(){B(de,0)};function Ee(ae,oe){J=B(function(){ae(e.unstable_now())},oe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ae){ae.callback=null},e.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ie=0<ae?Math.floor(1e3/ae):5},e.unstable_getCurrentPriorityLevel=function(){return _},e.unstable_next=function(ae){switch(_){case 1:case 2:case 3:var oe=3;break;default:oe=_}var ee=_;_=oe;try{return ae()}finally{_=ee}},e.unstable_requestPaint=function(){N=!0},e.unstable_runWithPriority=function(ae,oe){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var ee=_;_=ae;try{return oe()}finally{_=ee}},e.unstable_scheduleCallback=function(ae,oe,ee){var Z=e.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?Z+ee:Z):ee=Z,ae){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=ee+Q,ae={id:S++,callback:oe,priorityLevel:ae,startTime:ee,expirationTime:Q,sortIndex:-1},ee>Z?(ae.sortIndex=ee,t(w,ae),n(v)===null&&ae===n(w)&&(I?(H(J),J=-1):I=!0,Ee(z,ee-Z))):(ae.sortIndex=Q,t(v,ae),M||F||(M=!0,j||(j=!0,Ce()))),ae},e.unstable_shouldYield=fe,e.unstable_wrapCallback=function(ae){var oe=_;return function(){var ee=_;_=oe;try{return ae.apply(this,arguments)}finally{_=ee}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var e=requireReact();function t(v){var w="https://react.dev/errors/"+v;if(1<arguments.length){w+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)w+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+v+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var o={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},u=Symbol.for("react.portal");function d(v,w,S){var R=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:R==null?null:""+R,children:v,containerInfo:w,implementation:S}}var f=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(v,w){if(v==="font")return"";if(typeof w=="string")return w==="use-credentials"?w:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,reactDom_production.createPortal=function(v,w){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!w||w.nodeType!==1&&w.nodeType!==9&&w.nodeType!==11)throw Error(t(299));return d(v,w,null,S)},reactDom_production.flushSync=function(v){var w=f.T,S=o.p;try{if(f.T=null,o.p=2,v)return v()}finally{f.T=w,o.p=S,o.d.f()}},reactDom_production.preconnect=function(v,w){typeof v=="string"&&(w?(w=w.crossOrigin,w=typeof w=="string"?w==="use-credentials"?w:"":void 0):w=null,o.d.C(v,w))},reactDom_production.prefetchDNS=function(v){typeof v=="string"&&o.d.D(v)},reactDom_production.preinit=function(v,w){if(typeof v=="string"&&w&&typeof w.as=="string"){var S=w.as,R=g(S,w.crossOrigin),_=typeof w.integrity=="string"?w.integrity:void 0,F=typeof w.fetchPriority=="string"?w.fetchPriority:void 0;S==="style"?o.d.S(v,typeof w.precedence=="string"?w.precedence:void 0,{crossOrigin:R,integrity:_,fetchPriority:F}):S==="script"&&o.d.X(v,{crossOrigin:R,integrity:_,fetchPriority:F,nonce:typeof w.nonce=="string"?w.nonce:void 0})}},reactDom_production.preinitModule=function(v,w){if(typeof v=="string")if(typeof w=="object"&&w!==null){if(w.as==null||w.as==="script"){var S=g(w.as,w.crossOrigin);o.d.M(v,{crossOrigin:S,integrity:typeof w.integrity=="string"?w.integrity:void 0,nonce:typeof w.nonce=="string"?w.nonce:void 0})}}else w==null&&o.d.M(v)},reactDom_production.preload=function(v,w){if(typeof v=="string"&&typeof w=="object"&&w!==null&&typeof w.as=="string"){var S=w.as,R=g(S,w.crossOrigin);o.d.L(v,S,{crossOrigin:R,integrity:typeof w.integrity=="string"?w.integrity:void 0,nonce:typeof w.nonce=="string"?w.nonce:void 0,type:typeof w.type=="string"?w.type:void 0,fetchPriority:typeof w.fetchPriority=="string"?w.fetchPriority:void 0,referrerPolicy:typeof w.referrerPolicy=="string"?w.referrerPolicy:void 0,imageSrcSet:typeof w.imageSrcSet=="string"?w.imageSrcSet:void 0,imageSizes:typeof w.imageSizes=="string"?w.imageSizes:void 0,media:typeof w.media=="string"?w.media:void 0})}},reactDom_production.preloadModule=function(v,w){if(typeof v=="string")if(w){var S=g(w.as,w.crossOrigin);o.d.m(v,{as:typeof w.as=="string"&&w.as!=="script"?w.as:void 0,crossOrigin:S,integrity:typeof w.integrity=="string"?w.integrity:void 0})}else o.d.m(v)},reactDom_production.requestFormReset=function(v){o.d.r(v)},reactDom_production.unstable_batchedUpdates=function(v,w){return v(w)},reactDom_production.useFormState=function(v,w,S){return f.H.useFormState(v,w,S)},reactDom_production.useFormStatus=function(){return f.H.useHostTransitionStatus()},reactDom_production.version="19.2.0",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),reactDom.exports=requireReactDom_production(),reactDom.exports}var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var e=requireScheduler(),t=requireReact(),n=requireReactDom();function o(C){var E="https://react.dev/errors/"+C;if(1<arguments.length){E+="?args[]="+encodeURIComponent(arguments[1]);for(var D=2;D<arguments.length;D++)E+="&args[]="+encodeURIComponent(arguments[D])}return"Minified React error #"+C+"; visit "+E+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(C){return!(!C||C.nodeType!==1&&C.nodeType!==9&&C.nodeType!==11)}function d(C){var E=C,D=C;if(C.alternate)for(;E.return;)E=E.return;else{C=E;do E=C,(E.flags&4098)!==0&&(D=E.return),C=E.return;while(C)}return E.tag===3?D:null}function f(C){if(C.tag===13){var E=C.memoizedState;if(E===null&&(C=C.alternate,C!==null&&(E=C.memoizedState)),E!==null)return E.dehydrated}return null}function g(C){if(C.tag===31){var E=C.memoizedState;if(E===null&&(C=C.alternate,C!==null&&(E=C.memoizedState)),E!==null)return E.dehydrated}return null}function v(C){if(d(C)!==C)throw Error(o(188))}function w(C){var E=C.alternate;if(!E){if(E=d(C),E===null)throw Error(o(188));return E!==C?null:C}for(var D=C,O=E;;){var V=D.return;if(V===null)break;var W=V.alternate;if(W===null){if(O=V.return,O!==null){D=O;continue}break}if(V.child===W.child){for(W=V.child;W;){if(W===D)return v(V),C;if(W===O)return v(V),E;W=W.sibling}throw Error(o(188))}if(D.return!==O.return)D=V,O=W;else{for(var te=!1,ve=V.child;ve;){if(ve===D){te=!0,D=V,O=W;break}if(ve===O){te=!0,O=V,D=W;break}ve=ve.sibling}if(!te){for(ve=W.child;ve;){if(ve===D){te=!0,D=W,O=V;break}if(ve===O){te=!0,O=W,D=V;break}ve=ve.sibling}if(!te)throw Error(o(189))}}if(D.alternate!==O)throw Error(o(190))}if(D.tag!==3)throw Error(o(188));return D.stateNode.current===D?C:E}function S(C){var E=C.tag;if(E===5||E===26||E===27||E===6)return C;for(C=C.child;C!==null;){if(E=S(C),E!==null)return E;C=C.sibling}return null}var R=Object.assign,_=Symbol.for("react.element"),F=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),U=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),se=Symbol.for("react.activity"),fe=Symbol.for("react.memo_cache_sentinel"),de=Symbol.iterator;function Ce(C){return C===null||typeof C!="object"?null:(C=de&&C[de]||C["@@iterator"],typeof C=="function"?C:null)}var be=Symbol.for("react.client.reference");function xe(C){if(C==null)return null;if(typeof C=="function")return C.$$typeof===be?null:C.displayName||C.name||null;if(typeof C=="string")return C;switch(C){case I:return"Fragment";case B:return"Profiler";case N:return"StrictMode";case z:return"Suspense";case j:return"SuspenseList";case se:return"Activity"}if(typeof C=="object")switch(C.$$typeof){case M:return"Portal";case U:return C.displayName||"Context";case H:return(C._context.displayName||"Context")+".Consumer";case $:var E=C.render;return C=C.displayName,C||(C=E.displayName||E.name||"",C=C!==""?"ForwardRef("+C+")":"ForwardRef"),C;case J:return E=C.displayName||null,E!==null?E:xe(C.type)||"Memo";case ie:E=C._payload,C=C._init;try{return xe(C(E))}catch{}}return null}var Ee=Array.isArray,ae=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},Z=[],Q=-1;function K(C){return{current:C}}function ne(C){0>Q||(C.current=Z[Q],Z[Q]=null,Q--)}function ue(C,E){Q++,Z[Q]=C.current,C.current=E}var ye=K(null),pe=K(null),X=K(null),le=K(null);function he(C,E){switch(ue(X,E),ue(pe,C),ue(ye,null),E.nodeType){case 9:case 11:C=(C=E.documentElement)&&(C=C.namespaceURI)?Vf(C):0;break;default:if(C=E.tagName,E=E.namespaceURI)E=Vf(E),C=zf(E,C);else switch(C){case"svg":C=1;break;case"math":C=2;break;default:C=0}}ne(ye),ue(ye,C)}function ce(){ne(ye),ne(pe),ne(X)}function me(C){C.memoizedState!==null&&ue(le,C);var E=ye.current,D=zf(E,C.type);E!==D&&(ue(pe,C),ue(ye,D))}function we(C){pe.current===C&&(ne(ye),ne(pe)),le.current===C&&(ne(le),ld._currentValue=ee)}var Se,_e;function We(C){if(Se===void 0)try{throw Error()}catch(D){var E=D.stack.trim().match(/\n( *(at )?)/);Se=E&&E[1]||"",_e=-1<D.stack.indexOf(`
    at`)?" (<anonymous>)":-1<D.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Se+C+_e}var Fe=!1;function Le(C,E){if(!C||Fe)return"";Fe=!0;var D=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var O={DetermineComponentFrameRoot:function(){try{if(E){var Ke=function(){throw Error()};if(Object.defineProperty(Ke.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ke,[])}catch(Ue){var He=Ue}Reflect.construct(C,[],Ke)}else{try{Ke.call()}catch(Ue){He=Ue}C.call(Ke.prototype)}}else{try{throw Error()}catch(Ue){He=Ue}(Ke=C())&&typeof Ke.catch=="function"&&Ke.catch(function(){})}}catch(Ue){if(Ue&&He&&typeof Ue.stack=="string")return[Ue.stack,He.stack]}return[null,null]}};O.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var V=Object.getOwnPropertyDescriptor(O.DetermineComponentFrameRoot,"name");V&&V.configurable&&Object.defineProperty(O.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var W=O.DetermineComponentFrameRoot(),te=W[0],ve=W[1];if(te&&ve){var Re=te.split(`
`),ke=ve.split(`
`);for(V=O=0;O<Re.length&&!Re[O].includes("DetermineComponentFrameRoot");)O++;for(;V<ke.length&&!ke[V].includes("DetermineComponentFrameRoot");)V++;if(O===Re.length||V===ke.length)for(O=Re.length-1,V=ke.length-1;1<=O&&0<=V&&Re[O]!==ke[V];)V--;for(;1<=O&&0<=V;O--,V--)if(Re[O]!==ke[V]){if(O!==1||V!==1)do if(O--,V--,0>V||Re[O]!==ke[V]){var je=`
`+Re[O].replace(" at new "," at ");return C.displayName&&je.includes("<anonymous>")&&(je=je.replace("<anonymous>",C.displayName)),je}while(1<=O&&0<=V);break}}}finally{Fe=!1,Error.prepareStackTrace=D}return(D=C?C.displayName||C.name:"")?We(D):""}function De(C,E){switch(C.tag){case 26:case 27:case 5:return We(C.type);case 16:return We("Lazy");case 13:return C.child!==E&&E!==null?We("Suspense Fallback"):We("Suspense");case 19:return We("SuspenseList");case 0:case 15:return Le(C.type,!1);case 11:return Le(C.type.render,!1);case 1:return Le(C.type,!0);case 31:return We("Activity");default:return""}}function Be(C){try{var E="",D=null;do E+=De(C,D),D=C,C=C.return;while(C);return E}catch(O){return`
Error generating stack: `+O.message+`
`+O.stack}}var $e=Object.prototype.hasOwnProperty,Ze=e.unstable_scheduleCallback,Ye=e.unstable_cancelCallback,nt=e.unstable_shouldYield,it=e.unstable_requestPaint,ot=e.unstable_now,vt=e.unstable_getCurrentPriorityLevel,nn=e.unstable_ImmediatePriority,en=e.unstable_UserBlockingPriority,Dt=e.unstable_NormalPriority,wt=e.unstable_LowPriority,Bn=e.unstable_IdlePriority,Bo=e.log,wl=e.unstable_setDisableYieldValue,bs=null,Xe=null;function Ie(C){if(typeof Bo=="function"&&wl(C),Xe&&typeof Xe.setStrictMode=="function")try{Xe.setStrictMode(bs,C)}catch{}}var Pe=Math.clz32?Math.clz32:Pn,st=Math.log,Vt=Math.LN2;function Pn(C){return C>>>=0,C===0?32:31-(st(C)/Vt|0)|0}var Cn=256,Fi=262144,wi=4194304;function ni(C){var E=C&42;if(E!==0)return E;switch(C&-C){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return C&261888;case 262144:case 524288:case 1048576:case 2097152:return C&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return C&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return C}}function Sn(C,E,D){var O=C.pendingLanes;if(O===0)return 0;var V=0,W=C.suspendedLanes,te=C.pingedLanes;C=C.warmLanes;var ve=O&134217727;return ve!==0?(O=ve&~W,O!==0?V=ni(O):(te&=ve,te!==0?V=ni(te):D||(D=ve&~C,D!==0&&(V=ni(D))))):(ve=O&~W,ve!==0?V=ni(ve):te!==0?V=ni(te):D||(D=O&~C,D!==0&&(V=ni(D)))),V===0?0:E!==0&&E!==V&&(E&W)===0&&(W=V&-V,D=E&-E,W>=D||W===32&&(D&4194048)!==0)?E:V}function Oi(C,E){return(C.pendingLanes&~(C.suspendedLanes&~C.pingedLanes)&E)===0}function fr(C,E){switch(C){case 1:case 2:case 4:case 8:case 64:return E+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return E+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ii(){var C=wi;return wi<<=1,(wi&62914560)===0&&(wi=4194304),C}function un(C){for(var E=[],D=0;31>D;D++)E.push(C);return E}function pr(C,E){C.pendingLanes|=E,E!==268435456&&(C.suspendedLanes=0,C.pingedLanes=0,C.warmLanes=0)}function Yr(C,E,D,O,V,W){var te=C.pendingLanes;C.pendingLanes=D,C.suspendedLanes=0,C.pingedLanes=0,C.warmLanes=0,C.expiredLanes&=D,C.entangledLanes&=D,C.errorRecoveryDisabledLanes&=D,C.shellSuspendCounter=0;var ve=C.entanglements,Re=C.expirationTimes,ke=C.hiddenUpdates;for(D=te&~D;0<D;){var je=31-Pe(D),Ke=1<<je;ve[je]=0,Re[je]=-1;var He=ke[je];if(He!==null)for(ke[je]=null,je=0;je<He.length;je++){var Ue=He[je];Ue!==null&&(Ue.lane&=-536870913)}D&=~Ke}O!==0&&br(C,O,0),W!==0&&V===0&&C.tag!==0&&(C.suspendedLanes|=W&~(te&~E))}function br(C,E,D){C.pendingLanes|=E,C.suspendedLanes&=~E;var O=31-Pe(E);C.entangledLanes|=E,C.entanglements[O]=C.entanglements[O]|1073741824|D&261930}function Xr(C,E){var D=C.entangledLanes|=E;for(C=C.entanglements;D;){var O=31-Pe(D),V=1<<O;V&E|C[O]&E&&(C[O]|=E),D&=~V}}function Qr(C,E){var D=E&-E;return D=(D&42)!==0?1:Mn(D),(D&(C.suspendedLanes|E))!==0?0:D}function Mn(C){switch(C){case 2:C=1;break;case 8:C=4;break;case 32:C=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:C=128;break;case 268435456:C=134217728;break;default:C=0}return C}function qi(C){return C&=-C,2<C?8<C?(C&134217727)!==0?32:268435456:8:2}function ws(){var C=oe.p;return C!==0?C:(C=window.event,C===void 0?32:dp(C.type))}function Es(C,E){var D=oe.p;try{return oe.p=C,E()}finally{oe.p=D}}var Zr=Math.random().toString(36).slice(2),Fn="__reactFiber$"+Zr,ii="__reactProps$"+Zr,xs="__reactContainer$"+Zr,wr="__reactEvents$"+Zr,Rs="__reactListeners$"+Zr,Fa="__reactHandles$"+Zr,El="__reactResources$"+Zr,Jr="__reactMarker$"+Zr;function io(C){delete C[Fn],delete C[ii],delete C[wr],delete C[Rs],delete C[Fa]}function ro(C){var E=C[Fn];if(E)return E;for(var D=C.parentNode;D;){if(E=D[xs]||D[Fn]){if(D=E.alternate,E.child!==null||D!==null&&D.child!==null)for(C=Yf(C);C!==null;){if(D=C[Fn])return D;C=Yf(C)}return E}C=D,D=C.parentNode}return null}function so(C){if(C=C[Fn]||C[xs]){var E=C.tag;if(E===5||E===6||E===13||E===31||E===26||E===27||E===3)return C}return null}function Go(C){var E=C.tag;if(E===5||E===26||E===27||E===6)return C.stateNode;throw Error(o(33))}function As(C){var E=C[El];return E||(E=C[El]={hoistableStyles:new Map,hoistableScripts:new Map}),E}function On(C){C[Jr]=!0}var es=new Set,xl={};function Ts(C,E){Li(C,E),Li(C+"Capture",E)}function Li(C,E){for(xl[C]=E,C=0;C<E.length;C++)es.add(E[C])}var Ni=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Oa={},dn={};function kc(C){return $e.call(dn,C)?!0:$e.call(Oa,C)?!1:Ni.test(C)?dn[C]=!0:(Oa[C]=!0,!1)}function Ho(C,E,D){if(kc(E))if(D===null)C.removeAttribute(E);else{switch(typeof D){case"undefined":case"function":case"symbol":C.removeAttribute(E);return;case"boolean":var O=E.toLowerCase().slice(0,5);if(O!=="data-"&&O!=="aria-"){C.removeAttribute(E);return}}C.setAttribute(E,""+D)}}function Ia(C,E,D){if(D===null)C.removeAttribute(E);else{switch(typeof D){case"undefined":case"function":case"symbol":case"boolean":C.removeAttribute(E);return}C.setAttribute(E,""+D)}}function Er(C,E,D,O){if(O===null)C.removeAttribute(D);else{switch(typeof O){case"undefined":case"function":case"symbol":case"boolean":C.removeAttribute(D);return}C.setAttributeNS(E,D,""+O)}}function Ki(C){switch(typeof C){case"bigint":case"boolean":case"number":case"string":case"undefined":return C;case"object":return C;default:return""}}function Rl(C){var E=C.type;return(C=C.nodeName)&&C.toLowerCase()==="input"&&(E==="checkbox"||E==="radio")}function Bc(C,E,D){var O=Object.getOwnPropertyDescriptor(C.constructor.prototype,E);if(!C.hasOwnProperty(E)&&typeof O<"u"&&typeof O.get=="function"&&typeof O.set=="function"){var V=O.get,W=O.set;return Object.defineProperty(C,E,{configurable:!0,get:function(){return V.call(this)},set:function(te){D=""+te,W.call(this,te)}}),Object.defineProperty(C,E,{enumerable:O.enumerable}),{getValue:function(){return D},setValue:function(te){D=""+te},stopTracking:function(){C._valueTracker=null,delete C[E]}}}}function La(C){if(!C._valueTracker){var E=Rl(C)?"checked":"value";C._valueTracker=Bc(C,E,""+C[E])}}function ri(C){if(!C)return!1;var E=C._valueTracker;if(!E)return!0;var D=E.getValue(),O="";return C&&(O=Rl(C)?C.checked?"true":"false":C.value),C=O,C!==D?(E.setValue(C),!0):!1}function rn(C){if(C=C||(typeof document<"u"?document:void 0),typeof C>"u")return null;try{return C.activeElement||C.body}catch{return C.body}}var Al=/[\n"\\]/g;function si(C){return C.replace(Al,function(E){return"\\"+E.charCodeAt(0).toString(16)+" "})}function Vo(C,E,D,O,V,W,te,ve){C.name="",te!=null&&typeof te!="function"&&typeof te!="symbol"&&typeof te!="boolean"?C.type=te:C.removeAttribute("type"),E!=null?te==="number"?(E===0&&C.value===""||C.value!=E)&&(C.value=""+Ki(E)):C.value!==""+Ki(E)&&(C.value=""+Ki(E)):te!=="submit"&&te!=="reset"||C.removeAttribute("value"),E!=null?gr(C,te,Ki(E)):D!=null?gr(C,te,Ki(D)):O!=null&&C.removeAttribute("value"),V==null&&W!=null&&(C.defaultChecked=!!W),V!=null&&(C.checked=V&&typeof V!="function"&&typeof V!="symbol"),ve!=null&&typeof ve!="function"&&typeof ve!="symbol"&&typeof ve!="boolean"?C.name=""+Ki(ve):C.removeAttribute("name")}function Tl(C,E,D,O,V,W,te,ve){if(W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"&&(C.type=W),E!=null||D!=null){if(!(W!=="submit"&&W!=="reset"||E!=null)){La(C);return}D=D!=null?""+Ki(D):"",E=E!=null?""+Ki(E):D,ve||E===C.value||(C.value=E),C.defaultValue=E}O=O??V,O=typeof O!="function"&&typeof O!="symbol"&&!!O,C.checked=ve?C.checked:!!O,C.defaultChecked=!!O,te!=null&&typeof te!="function"&&typeof te!="symbol"&&typeof te!="boolean"&&(C.name=te),La(C)}function gr(C,E,D){E==="number"&&rn(C.ownerDocument)===C||C.defaultValue===""+D||(C.defaultValue=""+D)}function ts(C,E,D,O){if(C=C.options,E){E={};for(var V=0;V<D.length;V++)E["$"+D[V]]=!0;for(D=0;D<C.length;D++)V=E.hasOwnProperty("$"+C[D].value),C[D].selected!==V&&(C[D].selected=V),V&&O&&(C[D].defaultSelected=!0)}else{for(D=""+Ki(D),E=null,V=0;V<C.length;V++){if(C[V].value===D){C[V].selected=!0,O&&(C[V].defaultSelected=!0);return}E!==null||C[V].disabled||(E=C[V])}E!==null&&(E.selected=!0)}}function _l(C,E,D){if(E!=null&&(E=""+Ki(E),E!==C.value&&(C.value=E),D==null)){C.defaultValue!==E&&(C.defaultValue=E);return}C.defaultValue=D!=null?""+Ki(D):""}function Dl(C,E,D,O){if(E==null){if(O!=null){if(D!=null)throw Error(o(92));if(Ee(O)){if(1<O.length)throw Error(o(93));O=O[0]}D=O}D==null&&(D=""),E=D}D=Ki(E),C.defaultValue=D,O=C.textContent,O===D&&O!==""&&O!==null&&(C.value=O),La(C)}function oo(C,E){if(E){var D=C.firstChild;if(D&&D===C.lastChild&&D.nodeType===3){D.nodeValue=E;return}}C.textContent=E}var gd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Gc(C,E,D){var O=E.indexOf("--")===0;D==null||typeof D=="boolean"||D===""?O?C.setProperty(E,""):E==="float"?C.cssFloat="":C[E]="":O?C.setProperty(E,D):typeof D!="number"||D===0||gd.has(E)?E==="float"?C.cssFloat=D:C[E]=(""+D).trim():C[E]=D+"px"}function Hc(C,E,D){if(E!=null&&typeof E!="object")throw Error(o(62));if(C=C.style,D!=null){for(var O in D)!D.hasOwnProperty(O)||E!=null&&E.hasOwnProperty(O)||(O.indexOf("--")===0?C.setProperty(O,""):O==="float"?C.cssFloat="":C[O]="");for(var V in E)O=E[V],E.hasOwnProperty(V)&&D[V]!==O&&Gc(C,V,O)}else for(var W in E)E.hasOwnProperty(W)&&Gc(C,W,E[W])}function Pl(C){if(C.indexOf("-")===-1)return!1;switch(C){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var md=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Na(C){return Vc.test(""+C)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":C}function ns(){}var Ml=null;function Fl(C){return C=C.target||C.srcElement||window,C.correspondingUseElement&&(C=C.correspondingUseElement),C.nodeType===3?C.parentNode:C}var ao=null,_s=null;function zc(C){var E=so(C);if(E&&(C=E.stateNode)){var D=C[ii]||null;e:switch(C=E.stateNode,E.type){case"input":if(Vo(C,D.value,D.defaultValue,D.defaultValue,D.checked,D.defaultChecked,D.type,D.name),E=D.name,D.type==="radio"&&E!=null){for(D=C;D.parentNode;)D=D.parentNode;for(D=D.querySelectorAll('input[name="'+si(""+E)+'"][type="radio"]'),E=0;E<D.length;E++){var O=D[E];if(O!==C&&O.form===C.form){var V=O[ii]||null;if(!V)throw Error(o(90));Vo(O,V.value,V.defaultValue,V.defaultValue,V.checked,V.defaultChecked,V.type,V.name)}}for(E=0;E<D.length;E++)O=D[E],O.form===C.form&&ri(O)}break e;case"textarea":_l(C,D.value,D.defaultValue);break e;case"select":E=D.value,E!=null&&ts(C,!!D.multiple,E,!1)}}}var Ol=!1;function Uc(C,E,D){if(Ol)return C(E,D);Ol=!0;try{var O=C(E);return O}finally{if(Ol=!1,(ao!==null||_s!==null)&&(Sr(),ao&&(E=ao,C=_s,_s=ao=null,zc(E),C)))for(E=0;E<C.length;E++)zc(C[E])}}function zo(C,E){var D=C.stateNode;if(D===null)return null;var O=D[ii]||null;if(O===null)return null;D=O[E];e:switch(E){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(O=!O.disabled)||(C=C.type,O=!(C==="button"||C==="input"||C==="select"||C==="textarea")),C=!O;break e;default:C=!1}if(C)return null;if(D&&typeof D!="function")throw Error(o(231,E,typeof D));return D}var xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wc=!1;if(xr)try{var Uo={};Object.defineProperty(Uo,"passive",{get:function(){Wc=!0}}),window.addEventListener("test",Uo,Uo),window.removeEventListener("test",Uo,Uo)}catch{Wc=!1}var ki=null,Il=null,lo=null;function Ba(){if(lo)return lo;var C,E=Il,D=E.length,O,V="value"in ki?ki.value:ki.textContent,W=V.length;for(C=0;C<D&&E[C]===V[C];C++);var te=D-C;for(O=1;O<=te&&E[D-O]===V[W-O];O++);return lo=V.slice(C,1<O?1-O:void 0)}function Ga(C){var E=C.keyCode;return"charCode"in C?(C=C.charCode,C===0&&E===13&&(C=13)):C=E,C===10&&(C=13),32<=C||C===13?C:0}function Wo(){return!0}function vd(){return!1}function ui(C){function E(D,O,V,W,te){this._reactName=D,this._targetInst=V,this.type=O,this.nativeEvent=W,this.target=te,this.currentTarget=null;for(var ve in C)C.hasOwnProperty(ve)&&(D=C[ve],this[ve]=D?D(W):W[ve]);return this.isDefaultPrevented=(W.defaultPrevented!=null?W.defaultPrevented:W.returnValue===!1)?Wo:vd,this.isPropagationStopped=vd,this}return R(E.prototype,{preventDefault:function(){this.defaultPrevented=!0;var D=this.nativeEvent;D&&(D.preventDefault?D.preventDefault():typeof D.returnValue!="unknown"&&(D.returnValue=!1),this.isDefaultPrevented=Wo)},stopPropagation:function(){var D=this.nativeEvent;D&&(D.stopPropagation?D.stopPropagation():typeof D.cancelBubble!="unknown"&&(D.cancelBubble=!0),this.isPropagationStopped=Wo)},persist:function(){},isPersistent:Wo}),E}var Ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(C){return C.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ha=ui(Ds),jo=R({},Ds,{view:0,detail:0}),yd=ui(jo),Va,Ll,$o,qo=R({},jo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gl,button:0,buttons:0,relatedTarget:function(C){return C.relatedTarget===void 0?C.fromElement===C.srcElement?C.toElement:C.fromElement:C.relatedTarget},movementX:function(C){return"movementX"in C?C.movementX:(C!==$o&&($o&&C.type==="mousemove"?(Va=C.screenX-$o.screenX,Ll=C.screenY-$o.screenY):Ll=Va=0,$o=C),Va)},movementY:function(C){return"movementY"in C?C.movementY:Ll}}),jc=ui(qo),Cd=R({},qo,{dataTransfer:0}),Sd=ui(Cd),$c=R({},jo,{relatedTarget:0}),Nl=ui($c),bd=R({},Ds,{animationName:0,elapsedTime:0,pseudoElement:0}),ef=ui(bd),tf=R({},Ds,{clipboardData:function(C){return"clipboardData"in C?C.clipboardData:window.clipboardData}}),wd=ui(tf),za=R({},Ds,{data:0}),kl=ui(za),Bl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ed={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qc(C){var E=this.nativeEvent;return E.getModifierState?E.getModifierState(C):(C=xd[C])?!!E[C]:!1}function Gl(){return qc}var Rd=R({},jo,{key:function(C){if(C.key){var E=Bl[C.key]||C.key;if(E!=="Unidentified")return E}return C.type==="keypress"?(C=Ga(C),C===13?"Enter":String.fromCharCode(C)):C.type==="keydown"||C.type==="keyup"?Ed[C.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gl,charCode:function(C){return C.type==="keypress"?Ga(C):0},keyCode:function(C){return C.type==="keydown"||C.type==="keyup"?C.keyCode:0},which:function(C){return C.type==="keypress"?Ga(C):C.type==="keydown"||C.type==="keyup"?C.keyCode:0}}),co=ui(Rd),Hl=R({},qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Kc=ui(Hl),Yc=R({},jo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gl}),Ad=ui(Yc),Td=R({},Ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),nf=ui(Td),Qn=R({},qo,{deltaX:function(C){return"deltaX"in C?C.deltaX:"wheelDeltaX"in C?-C.wheelDeltaX:0},deltaY:function(C){return"deltaY"in C?C.deltaY:"wheelDeltaY"in C?-C.wheelDeltaY:"wheelDelta"in C?-C.wheelDelta:0},deltaZ:0,deltaMode:0}),_d=ui(Qn),Dd=R({},Ds,{newState:0,oldState:0}),Pd=ui(Dd),Md=[9,13,27,32],uo=xr&&"CompositionEvent"in window,Ko=null;xr&&"documentMode"in document&&(Ko=document.documentMode);var Vl=xr&&"TextEvent"in window&&!Ko,Xc=xr&&(!uo||Ko&&8<Ko&&11>=Ko),Fd=" ",Ua=!1;function zl(C,E){switch(C){case"keyup":return Md.indexOf(E.keyCode)!==-1;case"keydown":return E.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qc(C){return C=C.detail,typeof C=="object"&&"data"in C?C.data:null}var ho=!1;function Od(C,E){switch(C){case"compositionend":return Qc(E);case"keypress":return E.which!==32?null:(Ua=!0,Fd);case"textInput":return C=E.data,C===Fd&&Ua?null:C;default:return null}}function Zc(C,E){if(ho)return C==="compositionend"||!uo&&zl(C,E)?(C=Ba(),lo=Il=ki=null,ho=!1,C):null;switch(C){case"paste":return null;case"keypress":if(!(E.ctrlKey||E.altKey||E.metaKey)||E.ctrlKey&&E.altKey){if(E.char&&1<E.char.length)return E.char;if(E.which)return String.fromCharCode(E.which)}return null;case"compositionend":return Xc&&E.locale!=="ko"?null:E.data;default:return null}}var Jc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eu(C){var E=C&&C.nodeName&&C.nodeName.toLowerCase();return E==="input"?!!Jc[C.type]:E==="textarea"}function Ul(C,E,D,O){ao?_s?_s.push(O):_s=[O]:ao=O,E=Gh(E,"onChange"),0<E.length&&(D=new Ha("onChange","change",null,D,O),C.push({event:D,listeners:E}))}var Ps=null,fo=null;function Id(C){Lf(C,0)}function Yo(C){var E=Go(C);if(ri(E))return C}function tu(C,E){if(C==="change")return E}var Rr=!1;if(xr){var Wa;if(xr){var nu="oninput"in document;if(!nu){var iu=document.createElement("div");iu.setAttribute("oninput","return;"),nu=typeof iu.oninput=="function"}Wa=nu}else Wa=!1;Rr=Wa&&(!document.documentMode||9<document.documentMode)}function Yi(){Ps&&(Ps.detachEvent("onpropertychange",ja),fo=Ps=null)}function ja(C){if(C.propertyName==="value"&&Yo(fo)){var E=[];Ul(E,fo,C,Fl(C)),Uc(Id,E)}}function Ld(C,E,D){C==="focusin"?(Yi(),Ps=E,fo=D,Ps.attachEvent("onpropertychange",ja)):C==="focusout"&&Yi()}function ru(C){if(C==="selectionchange"||C==="keyup"||C==="keydown")return Yo(fo)}function Nd(C,E){if(C==="click")return Yo(E)}function kd(C,E){if(C==="input"||C==="change")return Yo(E)}function su(C,E){return C===E&&(C!==0||1/C===1/E)||C!==C&&E!==E}var di=typeof Object.is=="function"?Object.is:su;function Xo(C,E){if(di(C,E))return!0;if(typeof C!="object"||C===null||typeof E!="object"||E===null)return!1;var D=Object.keys(C),O=Object.keys(E);if(D.length!==O.length)return!1;for(O=0;O<D.length;O++){var V=D[O];if(!$e.call(E,V)||!di(C[V],E[V]))return!1}return!0}function $a(C){for(;C&&C.firstChild;)C=C.firstChild;return C}function Qo(C,E){var D=$a(C);C=0;for(var O;D;){if(D.nodeType===3){if(O=C+D.textContent.length,C<=E&&O>=E)return{node:D,offset:E-C};C=O}e:{for(;D;){if(D.nextSibling){D=D.nextSibling;break e}D=D.parentNode}D=void 0}D=$a(D)}}function Yt(C,E){return C&&E?C===E?!0:C&&C.nodeType===3?!1:E&&E.nodeType===3?Yt(C,E.parentNode):"contains"in C?C.contains(E):C.compareDocumentPosition?!!(C.compareDocumentPosition(E)&16):!1:!1}function Bd(C){C=C!=null&&C.ownerDocument!=null&&C.ownerDocument.defaultView!=null?C.ownerDocument.defaultView:window;for(var E=rn(C.document);E instanceof C.HTMLIFrameElement;){try{var D=typeof E.contentWindow.location.href=="string"}catch{D=!1}if(D)C=E.contentWindow;else break;E=rn(C.document)}return E}function ou(C){var E=C&&C.nodeName&&C.nodeName.toLowerCase();return E&&(E==="input"&&(C.type==="text"||C.type==="search"||C.type==="tel"||C.type==="url"||C.type==="password")||E==="textarea"||C.contentEditable==="true")}var Gd=xr&&"documentMode"in document&&11>=document.documentMode,Ar=null,Tr=null,Zo=null,Wl=!1;function Jo(C,E,D){var O=D.window===D?D.document:D.nodeType===9?D:D.ownerDocument;Wl||Ar==null||Ar!==rn(O)||(O=Ar,"selectionStart"in O&&ou(O)?O={start:O.selectionStart,end:O.selectionEnd}:(O=(O.ownerDocument&&O.ownerDocument.defaultView||window).getSelection(),O={anchorNode:O.anchorNode,anchorOffset:O.anchorOffset,focusNode:O.focusNode,focusOffset:O.focusOffset}),Zo&&Xo(Zo,O)||(Zo=O,O=Gh(Tr,"onSelect"),0<O.length&&(E=new Ha("onSelect","select",null,E,D),C.push({event:E,listeners:O}),E.target=Ar)))}function oi(C,E){var D={};return D[C.toLowerCase()]=E.toLowerCase(),D["Webkit"+C]="webkit"+E,D["Moz"+C]="moz"+E,D}var po={animationend:oi("Animation","AnimationEnd"),animationiteration:oi("Animation","AnimationIteration"),animationstart:oi("Animation","AnimationStart"),transitionrun:oi("Transition","TransitionRun"),transitionstart:oi("Transition","TransitionStart"),transitioncancel:oi("Transition","TransitionCancel"),transitionend:oi("Transition","TransitionEnd")},qa={},au={};xr&&(au=document.createElement("div").style,"AnimationEvent"in window||(delete po.animationend.animation,delete po.animationiteration.animation,delete po.animationstart.animation),"TransitionEvent"in window||delete po.transitionend.transition);function rs(C){if(qa[C])return qa[C];if(!po[C])return C;var E=po[C],D;for(D in E)if(E.hasOwnProperty(D)&&D in au)return qa[C]=E[D];return C}var jl=rs("animationend"),Ka=rs("animationiteration"),lu=rs("animationstart"),Hd=rs("transitionrun"),rf=rs("transitionstart"),Vd=rs("transitioncancel"),cu=rs("transitionend"),Xi=new Map,Ya="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ya.push("scrollEnd");function Qi(C,E){Xi.set(C,E),Ts(E,[C])}var Xa=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var E=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(E))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)},Zi=[],ss=0,Wn=0;function Qa(){for(var C=ss,E=Wn=ss=0;E<C;){var D=Zi[E];Zi[E++]=null;var O=Zi[E];Zi[E++]=null;var V=Zi[E];Zi[E++]=null;var W=Zi[E];if(Zi[E++]=null,O!==null&&V!==null){var te=O.pending;te===null?V.next=V:(V.next=te.next,te.next=V),O.pending=V}W!==0&&Ms(D,V,W)}}function jn(C,E,D,O){Zi[ss++]=C,Zi[ss++]=E,Zi[ss++]=D,Zi[ss++]=O,Wn|=O,C.lanes|=O,C=C.alternate,C!==null&&(C.lanes|=O)}function $l(C,E,D,O){return jn(C,E,D,O),Ji(C)}function hi(C,E){return jn(C,null,null,E),Ji(C)}function Ms(C,E,D){C.lanes|=D;var O=C.alternate;O!==null&&(O.lanes|=D);for(var V=!1,W=C.return;W!==null;)W.childLanes|=D,O=W.alternate,O!==null&&(O.childLanes|=D),W.tag===22&&(C=W.stateNode,C===null||C._visibility&1||(V=!0)),C=W,W=W.return;return C.tag===3?(W=C.stateNode,V&&E!==null&&(V=31-Pe(D),C=W.hiddenUpdates,O=C[V],O===null?C[V]=[E]:O.push(E),E.lane=D|536870912),W):null}function Ji(C){if(50<Xs)throw Xs=0,Oo=null,Error(o(185));for(var E=C.return;E!==null;)C=E,E=C.return;return C.tag===3?C.stateNode:null}var Fs={};function uu(C,E,D,O){this.tag=C,this.key=D,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=E,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=O,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hn(C,E,D,O){return new uu(C,E,D,O)}function ql(C){return C=C.prototype,!(!C||!C.isReactComponent)}function Ei(C,E){var D=C.alternate;return D===null?(D=hn(C.tag,E,C.key,C.mode),D.elementType=C.elementType,D.type=C.type,D.stateNode=C.stateNode,D.alternate=C,C.alternate=D):(D.pendingProps=E,D.type=C.type,D.flags=0,D.subtreeFlags=0,D.deletions=null),D.flags=C.flags&65011712,D.childLanes=C.childLanes,D.lanes=C.lanes,D.child=C.child,D.memoizedProps=C.memoizedProps,D.memoizedState=C.memoizedState,D.updateQueue=C.updateQueue,E=C.dependencies,D.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext},D.sibling=C.sibling,D.index=C.index,D.ref=C.ref,D.refCleanup=C.refCleanup,D}function ea(C,E){C.flags&=65011714;var D=C.alternate;return D===null?(C.childLanes=0,C.lanes=E,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=D.childLanes,C.lanes=D.lanes,C.child=D.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=D.memoizedProps,C.memoizedState=D.memoizedState,C.updateQueue=D.updateQueue,C.type=D.type,E=D.dependencies,C.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext}),C}function _r(C,E,D,O,V,W){var te=0;if(O=C,typeof C=="function")ql(C)&&(te=1);else if(typeof C=="string")te=jp(C,D,ye.current)?26:C==="html"||C==="head"||C==="body"?27:5;else e:switch(C){case se:return C=hn(31,D,E,V),C.elementType=se,C.lanes=W,C;case I:return Os(D.children,V,W,E);case N:te=8,V|=24;break;case B:return C=hn(12,D,E,V|2),C.elementType=B,C.lanes=W,C;case z:return C=hn(13,D,E,V),C.elementType=z,C.lanes=W,C;case j:return C=hn(19,D,E,V),C.elementType=j,C.lanes=W,C;default:if(typeof C=="object"&&C!==null)switch(C.$$typeof){case U:te=10;break e;case H:te=9;break e;case $:te=11;break e;case J:te=14;break e;case ie:te=16,O=null;break e}te=29,D=Error(o(130,C===null?"null":typeof C,"")),O=null}return E=hn(te,D,E,V),E.elementType=C,E.type=O,E.lanes=W,E}function Os(C,E,D,O){return C=hn(7,C,O,E),C.lanes=D,C}function Kl(C,E,D){return C=hn(6,C,null,E),C.lanes=D,C}function ta(C){var E=hn(18,null,null,0);return E.stateNode=C,E}function Yl(C,E,D){return E=hn(4,C.children!==null?C.children:[],C.key,E),E.lanes=D,E.stateNode={containerInfo:C.containerInfo,pendingChildren:null,implementation:C.implementation},E}var Za=new WeakMap;function Bi(C,E){if(typeof C=="object"&&C!==null){var D=Za.get(C);return D!==void 0?D:(E={value:C,source:E,stack:Be(E)},Za.set(C,E),E)}return{value:C,source:E,stack:Be(E)}}var Is=[],Ls=0,na=null,ia=0,xi=[],sn=0,os=null,fn=1,mr="";function Dr(C,E){Is[Ls++]=ia,Is[Ls++]=na,na=C,ia=E}function zd(C,E,D){xi[sn++]=fn,xi[sn++]=mr,xi[sn++]=os,os=C;var O=fn;C=mr;var V=32-Pe(O)-1;O&=~(1<<V),D+=1;var W=32-Pe(E)+V;if(30<W){var te=V-V%5;W=(O&(1<<te)-1).toString(32),O>>=te,V-=te,fn=1<<32-Pe(E)+V|D<<V|O,mr=W+C}else fn=1<<W|D<<V|O,mr=C}function Pr(C){C.return!==null&&(Dr(C,1),zd(C,1,0))}function Xl(C){for(;C===na;)na=Is[--Ls],Is[Ls]=null,ia=Is[--Ls],Is[Ls]=null;for(;C===os;)os=xi[--sn],xi[sn]=null,mr=xi[--sn],xi[sn]=null,fn=xi[--sn],xi[sn]=null}function Ql(C,E){xi[sn++]=fn,xi[sn++]=mr,xi[sn++]=os,fn=E.id,mr=E.overflow,os=C}var bn=null,Xt=null,Ot=!1,as=null,Gi=!1,ra=Error(o(519));function Mr(C){var E=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Fr(Bi(E,C)),ra}function Ud(C){var E=C.stateNode,D=C.type,O=C.memoizedProps;switch(E[Fn]=C,E[ii]=O,D){case"dialog":Nt("cancel",E),Nt("close",E);break;case"iframe":case"object":case"embed":Nt("load",E);break;case"video":case"audio":for(D=0;D<hr.length;D++)Nt(hr[D],E);break;case"source":Nt("error",E);break;case"img":case"image":case"link":Nt("error",E),Nt("load",E);break;case"details":Nt("toggle",E);break;case"input":Nt("invalid",E),Tl(E,O.value,O.defaultValue,O.checked,O.defaultChecked,O.type,O.name,!0);break;case"select":Nt("invalid",E);break;case"textarea":Nt("invalid",E),Dl(E,O.value,O.defaultValue,O.children)}D=O.children,typeof D!="string"&&typeof D!="number"&&typeof D!="bigint"||E.textContent===""+D||O.suppressHydrationWarning===!0||Gf(E.textContent,D)?(O.popover!=null&&(Nt("beforetoggle",E),Nt("toggle",E)),O.onScroll!=null&&Nt("scroll",E),O.onScrollEnd!=null&&Nt("scrollend",E),O.onClick!=null&&(E.onclick=ns),E=!0):E=!1,E||Mr(C,!0)}function Wd(C){for(bn=C.return;bn;)switch(bn.tag){case 5:case 31:case 13:Gi=!1;return;case 27:case 3:Gi=!0;return;default:bn=bn.return}}function sa(C){if(C!==bn)return!1;if(!Ot)return Wd(C),Ot=!0,!1;var E=C.tag,D;if((D=E!==3&&E!==27)&&((D=E===5)&&(D=C.type,D=!(D!=="form"&&D!=="button")||Sf(C.type,C.memoizedProps)),D=!D),D&&Xt&&Mr(C),Wd(C),E===13){if(C=C.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(o(317));Xt=Kf(C)}else if(E===31){if(C=C.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(o(317));Xt=Kf(C)}else E===27?(E=Xt,Ra(C.type)?(C=Rf,Rf=null,Xt=C):Xt=E):Xt=bn?qr(C.stateNode.nextSibling):null;return!0}function Ns(){Xt=bn=null,Ot=!1}function Zl(){var C=as;return C!==null&&(En===null?En=C:En.push.apply(En,C),as=null),C}function Fr(C){as===null?as=[C]:as.push(C)}var oa=K(null),ks=null,Or=null;function ls(C,E,D){ue(oa,E._currentValue),E._currentValue=D}function Ir(C){C._currentValue=oa.current,ne(oa)}function Jl(C,E,D){for(;C!==null;){var O=C.alternate;if((C.childLanes&E)!==E?(C.childLanes|=E,O!==null&&(O.childLanes|=E)):O!==null&&(O.childLanes&E)!==E&&(O.childLanes|=E),C===D)break;C=C.return}}function ec(C,E,D,O){var V=C.child;for(V!==null&&(V.return=C);V!==null;){var W=V.dependencies;if(W!==null){var te=V.child;W=W.firstContext;e:for(;W!==null;){var ve=W;W=V;for(var Re=0;Re<E.length;Re++)if(ve.context===E[Re]){W.lanes|=D,ve=W.alternate,ve!==null&&(ve.lanes|=D),Jl(W.return,D,C),O||(te=null);break e}W=ve.next}}else if(V.tag===18){if(te=V.return,te===null)throw Error(o(341));te.lanes|=D,W=te.alternate,W!==null&&(W.lanes|=D),Jl(te,D,C),te=null}else te=V.child;if(te!==null)te.return=V;else for(te=V;te!==null;){if(te===C){te=null;break}if(V=te.sibling,V!==null){V.return=te.return,te=V;break}te=te.return}V=te}}function Lr(C,E,D,O){C=null;for(var V=E,W=!1;V!==null;){if(!W){if((V.flags&524288)!==0)W=!0;else if((V.flags&262144)!==0)break}if(V.tag===10){var te=V.alternate;if(te===null)throw Error(o(387));if(te=te.memoizedProps,te!==null){var ve=V.type;di(V.pendingProps.value,te.value)||(C!==null?C.push(ve):C=[ve])}}else if(V===le.current){if(te=V.alternate,te===null)throw Error(o(387));te.memoizedState.memoizedState!==V.memoizedState.memoizedState&&(C!==null?C.push(ld):C=[ld])}V=V.return}C!==null&&ec(E,C,D,O),E.flags|=262144}function Ja(C){for(C=C.firstContext;C!==null;){if(!di(C.context._currentValue,C.memoizedValue))return!0;C=C.next}return!1}function Bs(C){ks=C,Or=null,C=C.dependencies,C!==null&&(C.firstContext=null)}function gt(C){return jd(ks,C)}function aa(C,E){return ks===null&&Bs(C),jd(C,E)}function jd(C,E){var D=E._currentValue;if(E={context:E,memoizedValue:D,next:null},Or===null){if(C===null)throw Error(o(308));Or=E,C.dependencies={lanes:0,firstContext:E},C.flags|=524288}else Or=Or.next=E;return D}var $d=typeof AbortController<"u"?AbortController:function(){var C=[],E=this.signal={aborted:!1,addEventListener:function(D,O){C.push(O)}};this.abort=function(){E.aborted=!0,C.forEach(function(D){return D()})}},sf=e.unstable_scheduleCallback,of=e.unstable_NormalPriority,In={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function du(){return{controller:new $d,data:new Map,refCount:0}}function go(C){C.refCount--,C.refCount===0&&sf(of,function(){C.controller.abort()})}var Hi=null,tc=0,cs=0,er=null;function hu(C,E){if(Hi===null){var D=Hi=[];tc=0,cs=Ve(),er={status:"pending",value:void 0,then:function(O){D.push(O)}}}return tc++,E.then(fu,fu),E}function fu(){if(--tc===0&&Hi!==null){er!==null&&(er.status="fulfilled");var C=Hi;Hi=null,cs=0,er=null;for(var E=0;E<C.length;E++)(0,C[E])()}}function pu(C,E){var D=[],O={status:"pending",value:null,reason:null,then:function(V){D.push(V)}};return C.then(function(){O.status="fulfilled",O.value=E;for(var V=0;V<D.length;V++)(0,D[V])(E)},function(V){for(O.status="rejected",O.reason=V,V=0;V<D.length;V++)(0,D[V])(void 0)}),O}var qd=ae.S;ae.S=function(C,E){td=ot(),typeof E=="object"&&E!==null&&typeof E.then=="function"&&hu(C,E),qd!==null&&qd(C,E)};var Gs=K(null);function nc(){var C=Gs.current;return C!==null?C:mt.pooledCache}function el(C,E){E===null?ue(Gs,Gs.current):ue(Gs,E.pool)}function gu(){var C=nc();return C===null?null:{parent:In._currentValue,pool:C}}var mo=Error(o(460)),tl=Error(o(474)),Et=Error(o(542)),ic={then:function(){}};function Ri(C){return C=C.status,C==="fulfilled"||C==="rejected"}function rc(C,E,D){switch(D=C[D],D===void 0?C.push(E):D!==E&&(E.then(ns,ns),E=D),E.status){case"fulfilled":return E.value;case"rejected":throw C=E.reason,Co(C),C;default:if(typeof E.status=="string")E.then(ns,ns);else{if(C=mt,C!==null&&100<C.shellSuspendCounter)throw Error(o(482));C=E,C.status="pending",C.then(function(O){if(E.status==="pending"){var V=E;V.status="fulfilled",V.value=O}},function(O){if(E.status==="pending"){var V=E;V.status="rejected",V.reason=O}})}switch(E.status){case"fulfilled":return E.value;case"rejected":throw C=E.reason,Co(C),C}throw Nr=E,mo}}function vo(C){try{var E=C._init;return E(C._payload)}catch(D){throw D!==null&&typeof D=="object"&&typeof D.then=="function"?(Nr=D,mo):D}}var Nr=null;function yo(){if(Nr===null)throw Error(o(459));var C=Nr;return Nr=null,C}function Co(C){if(C===mo||C===Et)throw Error(o(483))}var So=null,bo=0;function nl(C){var E=bo;return bo+=1,So===null&&(So=[]),rc(So,C,E)}function tr(C,E){E=E.props.ref,C.ref=E!==void 0?E:null}function la(C,E){throw E.$$typeof===_?Error(o(525)):(C=Object.prototype.toString.call(E),Error(o(31,C==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":C)))}function sc(C){function E(Me,Te){if(C){var Ne=Me.deletions;Ne===null?(Me.deletions=[Te],Me.flags|=16):Ne.push(Te)}}function D(Me,Te){if(!C)return null;for(;Te!==null;)E(Me,Te),Te=Te.sibling;return null}function O(Me){for(var Te=new Map;Me!==null;)Me.key!==null?Te.set(Me.key,Me):Te.set(Me.index,Me),Me=Me.sibling;return Te}function V(Me,Te){return Me=Ei(Me,Te),Me.index=0,Me.sibling=null,Me}function W(Me,Te,Ne){return Me.index=Ne,C?(Ne=Me.alternate,Ne!==null?(Ne=Ne.index,Ne<Te?(Me.flags|=67108866,Te):Ne):(Me.flags|=67108866,Te)):(Me.flags|=1048576,Te)}function te(Me){return C&&Me.alternate===null&&(Me.flags|=67108866),Me}function ve(Me,Te,Ne,qe){return Te===null||Te.tag!==6?(Te=Kl(Ne,Me.mode,qe),Te.return=Me,Te):(Te=V(Te,Ne),Te.return=Me,Te)}function Re(Me,Te,Ne,qe){var dt=Ne.type;return dt===I?je(Me,Te,Ne.props.children,qe,Ne.key):Te!==null&&(Te.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===ie&&vo(dt)===Te.type)?(Te=V(Te,Ne.props),tr(Te,Ne),Te.return=Me,Te):(Te=_r(Ne.type,Ne.key,Ne.props,null,Me.mode,qe),tr(Te,Ne),Te.return=Me,Te)}function ke(Me,Te,Ne,qe){return Te===null||Te.tag!==4||Te.stateNode.containerInfo!==Ne.containerInfo||Te.stateNode.implementation!==Ne.implementation?(Te=Yl(Ne,Me.mode,qe),Te.return=Me,Te):(Te=V(Te,Ne.children||[]),Te.return=Me,Te)}function je(Me,Te,Ne,qe,dt){return Te===null||Te.tag!==7?(Te=Os(Ne,Me.mode,qe,dt),Te.return=Me,Te):(Te=V(Te,Ne),Te.return=Me,Te)}function Ke(Me,Te,Ne){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return Te=Kl(""+Te,Me.mode,Ne),Te.return=Me,Te;if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case F:return Ne=_r(Te.type,Te.key,Te.props,null,Me.mode,Ne),tr(Ne,Te),Ne.return=Me,Ne;case M:return Te=Yl(Te,Me.mode,Ne),Te.return=Me,Te;case ie:return Te=vo(Te),Ke(Me,Te,Ne)}if(Ee(Te)||Ce(Te))return Te=Os(Te,Me.mode,Ne,null),Te.return=Me,Te;if(typeof Te.then=="function")return Ke(Me,nl(Te),Ne);if(Te.$$typeof===U)return Ke(Me,aa(Me,Te),Ne);la(Me,Te)}return null}function He(Me,Te,Ne,qe){var dt=Te!==null?Te.key:null;if(typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint")return dt!==null?null:ve(Me,Te,""+Ne,qe);if(typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case F:return Ne.key===dt?Re(Me,Te,Ne,qe):null;case M:return Ne.key===dt?ke(Me,Te,Ne,qe):null;case ie:return Ne=vo(Ne),He(Me,Te,Ne,qe)}if(Ee(Ne)||Ce(Ne))return dt!==null?null:je(Me,Te,Ne,qe,null);if(typeof Ne.then=="function")return He(Me,Te,nl(Ne),qe);if(Ne.$$typeof===U)return He(Me,Te,aa(Me,Ne),qe);la(Me,Ne)}return null}function Ue(Me,Te,Ne,qe,dt){if(typeof qe=="string"&&qe!==""||typeof qe=="number"||typeof qe=="bigint")return Me=Me.get(Ne)||null,ve(Te,Me,""+qe,dt);if(typeof qe=="object"&&qe!==null){switch(qe.$$typeof){case F:return Me=Me.get(qe.key===null?Ne:qe.key)||null,Re(Te,Me,qe,dt);case M:return Me=Me.get(qe.key===null?Ne:qe.key)||null,ke(Te,Me,qe,dt);case ie:return qe=vo(qe),Ue(Me,Te,Ne,qe,dt)}if(Ee(qe)||Ce(qe))return Me=Me.get(Ne)||null,je(Te,Me,qe,dt,null);if(typeof qe.then=="function")return Ue(Me,Te,Ne,nl(qe),dt);if(qe.$$typeof===U)return Ue(Me,Te,Ne,aa(Te,qe),dt);la(Te,qe)}return null}function at(Me,Te,Ne,qe){for(var dt=null,zt=null,lt=Te,At=Te=0,Bt=null;lt!==null&&At<Ne.length;At++){lt.index>At?(Bt=lt,lt=null):Bt=lt.sibling;var Ut=He(Me,lt,Ne[At],qe);if(Ut===null){lt===null&&(lt=Bt);break}C&&lt&&Ut.alternate===null&&E(Me,lt),Te=W(Ut,Te,At),zt===null?dt=Ut:zt.sibling=Ut,zt=Ut,lt=Bt}if(At===Ne.length)return D(Me,lt),Ot&&Dr(Me,At),dt;if(lt===null){for(;At<Ne.length;At++)lt=Ke(Me,Ne[At],qe),lt!==null&&(Te=W(lt,Te,At),zt===null?dt=lt:zt.sibling=lt,zt=lt);return Ot&&Dr(Me,At),dt}for(lt=O(lt);At<Ne.length;At++)Bt=Ue(lt,Me,At,Ne[At],qe),Bt!==null&&(C&&Bt.alternate!==null&&lt.delete(Bt.key===null?At:Bt.key),Te=W(Bt,Te,At),zt===null?dt=Bt:zt.sibling=Bt,zt=Bt);return C&&lt.forEach(function(Ma){return E(Me,Ma)}),Ot&&Dr(Me,At),dt}function pt(Me,Te,Ne,qe){if(Ne==null)throw Error(o(151));for(var dt=null,zt=null,lt=Te,At=Te=0,Bt=null,Ut=Ne.next();lt!==null&&!Ut.done;At++,Ut=Ne.next()){lt.index>At?(Bt=lt,lt=null):Bt=lt.sibling;var Ma=He(Me,lt,Ut.value,qe);if(Ma===null){lt===null&&(lt=Bt);break}C&&lt&&Ma.alternate===null&&E(Me,lt),Te=W(Ma,Te,At),zt===null?dt=Ma:zt.sibling=Ma,zt=Ma,lt=Bt}if(Ut.done)return D(Me,lt),Ot&&Dr(Me,At),dt;if(lt===null){for(;!Ut.done;At++,Ut=Ne.next())Ut=Ke(Me,Ut.value,qe),Ut!==null&&(Te=W(Ut,Te,At),zt===null?dt=Ut:zt.sibling=Ut,zt=Ut);return Ot&&Dr(Me,At),dt}for(lt=O(lt);!Ut.done;At++,Ut=Ne.next())Ut=Ue(lt,Me,At,Ut.value,qe),Ut!==null&&(C&&Ut.alternate!==null&&lt.delete(Ut.key===null?At:Ut.key),Te=W(Ut,Te,At),zt===null?dt=Ut:zt.sibling=Ut,zt=Ut);return C&&lt.forEach(function(ng){return E(Me,ng)}),Ot&&Dr(Me,At),dt}function Jt(Me,Te,Ne,qe){if(typeof Ne=="object"&&Ne!==null&&Ne.type===I&&Ne.key===null&&(Ne=Ne.props.children),typeof Ne=="object"&&Ne!==null){switch(Ne.$$typeof){case F:e:{for(var dt=Ne.key;Te!==null;){if(Te.key===dt){if(dt=Ne.type,dt===I){if(Te.tag===7){D(Me,Te.sibling),qe=V(Te,Ne.props.children),qe.return=Me,Me=qe;break e}}else if(Te.elementType===dt||typeof dt=="object"&&dt!==null&&dt.$$typeof===ie&&vo(dt)===Te.type){D(Me,Te.sibling),qe=V(Te,Ne.props),tr(qe,Ne),qe.return=Me,Me=qe;break e}D(Me,Te);break}else E(Me,Te);Te=Te.sibling}Ne.type===I?(qe=Os(Ne.props.children,Me.mode,qe,Ne.key),qe.return=Me,Me=qe):(qe=_r(Ne.type,Ne.key,Ne.props,null,Me.mode,qe),tr(qe,Ne),qe.return=Me,Me=qe)}return te(Me);case M:e:{for(dt=Ne.key;Te!==null;){if(Te.key===dt)if(Te.tag===4&&Te.stateNode.containerInfo===Ne.containerInfo&&Te.stateNode.implementation===Ne.implementation){D(Me,Te.sibling),qe=V(Te,Ne.children||[]),qe.return=Me,Me=qe;break e}else{D(Me,Te);break}else E(Me,Te);Te=Te.sibling}qe=Yl(Ne,Me.mode,qe),qe.return=Me,Me=qe}return te(Me);case ie:return Ne=vo(Ne),Jt(Me,Te,Ne,qe)}if(Ee(Ne))return at(Me,Te,Ne,qe);if(Ce(Ne)){if(dt=Ce(Ne),typeof dt!="function")throw Error(o(150));return Ne=dt.call(Ne),pt(Me,Te,Ne,qe)}if(typeof Ne.then=="function")return Jt(Me,Te,nl(Ne),qe);if(Ne.$$typeof===U)return Jt(Me,Te,aa(Me,Ne),qe);la(Me,Ne)}return typeof Ne=="string"&&Ne!==""||typeof Ne=="number"||typeof Ne=="bigint"?(Ne=""+Ne,Te!==null&&Te.tag===6?(D(Me,Te.sibling),qe=V(Te,Ne),qe.return=Me,Me=qe):(D(Me,Te),qe=Kl(Ne,Me.mode,qe),qe.return=Me,Me=qe),te(Me)):D(Me,Te)}return function(Me,Te,Ne,qe){try{bo=0;var dt=Jt(Me,Te,Ne,qe);return So=null,dt}catch(lt){if(lt===mo||lt===Et)throw lt;var zt=hn(29,lt,null,Me.mode);return zt.lanes=qe,zt.return=Me,zt}finally{}}}var us=sc(!0),oc=sc(!1),fi=!1;function il(C){C.updateQueue={baseState:C.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mu(C,E){C=C.updateQueue,E.updateQueue===C&&(E.updateQueue={baseState:C.baseState,firstBaseUpdate:C.firstBaseUpdate,lastBaseUpdate:C.lastBaseUpdate,shared:C.shared,callbacks:null})}function ds(C){return{lane:C,tag:0,payload:null,callback:null,next:null}}function Hs(C,E,D){var O=C.updateQueue;if(O===null)return null;if(O=O.shared,(ct&2)!==0){var V=O.pending;return V===null?E.next=E:(E.next=V.next,V.next=E),O.pending=E,E=Ji(C),Ms(C,null,D),E}return jn(C,O,E,D),Ji(C)}function Vs(C,E,D){if(E=E.updateQueue,E!==null&&(E=E.shared,(D&4194048)!==0)){var O=E.lanes;O&=C.pendingLanes,D|=O,E.lanes=D,Xr(C,D)}}function ut(C,E){var D=C.updateQueue,O=C.alternate;if(O!==null&&(O=O.updateQueue,D===O)){var V=null,W=null;if(D=D.firstBaseUpdate,D!==null){do{var te={lane:D.lane,tag:D.tag,payload:D.payload,callback:null,next:null};W===null?V=W=te:W=W.next=te,D=D.next}while(D!==null);W===null?V=W=E:W=W.next=E}else V=W=E;D={baseState:O.baseState,firstBaseUpdate:V,lastBaseUpdate:W,shared:O.shared,callbacks:O.callbacks},C.updateQueue=D;return}C=D.lastBaseUpdate,C===null?D.firstBaseUpdate=E:C.next=E,D.lastBaseUpdate=E}var vu=!1;function rl(){if(vu){var C=er;if(C!==null)throw C}}function ca(C,E,D,O){vu=!1;var V=C.updateQueue;fi=!1;var W=V.firstBaseUpdate,te=V.lastBaseUpdate,ve=V.shared.pending;if(ve!==null){V.shared.pending=null;var Re=ve,ke=Re.next;Re.next=null,te===null?W=ke:te.next=ke,te=Re;var je=C.alternate;je!==null&&(je=je.updateQueue,ve=je.lastBaseUpdate,ve!==te&&(ve===null?je.firstBaseUpdate=ke:ve.next=ke,je.lastBaseUpdate=Re))}if(W!==null){var Ke=V.baseState;te=0,je=ke=Re=null,ve=W;do{var He=ve.lane&-536870913,Ue=He!==ve.lane;if(Ue?(bt&He)===He:(O&He)===He){He!==0&&He===cs&&(vu=!0),je!==null&&(je=je.next={lane:0,tag:ve.tag,payload:ve.payload,callback:null,next:null});e:{var at=C,pt=ve;He=E;var Jt=D;switch(pt.tag){case 1:if(at=pt.payload,typeof at=="function"){Ke=at.call(Jt,Ke,He);break e}Ke=at;break e;case 3:at.flags=at.flags&-65537|128;case 0:if(at=pt.payload,He=typeof at=="function"?at.call(Jt,Ke,He):at,He==null)break e;Ke=R({},Ke,He);break e;case 2:fi=!0}}He=ve.callback,He!==null&&(C.flags|=64,Ue&&(C.flags|=8192),Ue=V.callbacks,Ue===null?V.callbacks=[He]:Ue.push(He))}else Ue={lane:He,tag:ve.tag,payload:ve.payload,callback:ve.callback,next:null},je===null?(ke=je=Ue,Re=Ke):je=je.next=Ue,te|=He;if(ve=ve.next,ve===null){if(ve=V.shared.pending,ve===null)break;Ue=ve,ve=Ue.next,Ue.next=null,V.lastBaseUpdate=Ue,V.shared.pending=null}}while(!0);je===null&&(Re=Ke),V.baseState=Re,V.firstBaseUpdate=ke,V.lastBaseUpdate=je,W===null&&(V.shared.lanes=0),Wr|=te,C.lanes=te,C.memoizedState=Ke}}function ua(C,E){if(typeof C!="function")throw Error(o(191,C));C.call(E)}function Kd(C,E){var D=C.callbacks;if(D!==null)for(C.callbacks=null,C=0;C<D.length;C++)ua(D[C],E)}var da=K(null),ac=K(0);function Yd(C,E){C=Wi,ue(ac,C),ue(da,E),Wi=C|E.baseLanes}function yu(){ue(ac,Wi),ue(da,da.current)}function sl(){Wi=ac.current,ne(da),ne(ac)}var Ai=K(null),gi=null;function hs(C){var E=C.alternate;ue(It,It.current&1),ue(Ai,C),gi===null&&(E===null||da.current!==null||E.memoizedState!==null)&&(gi=C)}function Cu(C){ue(It,It.current),ue(Ai,C),gi===null&&(gi=C)}function Xd(C){C.tag===22?(ue(It,It.current),ue(Ai,C),gi===null&&(gi=C)):Ti()}function Ti(){ue(It,It.current),ue(Ai,Ai.current)}function Rn(C){ne(Ai),gi===C&&(gi=null),ne(It)}var It=K(0);function Vi(C){for(var E=C;E!==null;){if(E.tag===13){var D=E.memoizedState;if(D!==null&&(D=D.dehydrated,D===null||Ef(D)||xf(D)))return E}else if(E.tag===19&&(E.memoizedProps.revealOrder==="forwards"||E.memoizedProps.revealOrder==="backwards"||E.memoizedProps.revealOrder==="unstable_legacy-backwards"||E.memoizedProps.revealOrder==="together")){if((E.flags&128)!==0)return E}else if(E.child!==null){E.child.return=E,E=E.child;continue}if(E===C)break;for(;E.sibling===null;){if(E.return===null||E.return===C)return null;E=E.return}E.sibling.return=E.return,E=E.sibling}return null}var on=0,Ct=null,qt=null,Pt=null,nr=!1,ha=!1,wo=!1,lc=0,ol=0,fa=null,Su=0;function pn(){throw Error(o(321))}function bu(C,E){if(E===null)return!1;for(var D=0;D<E.length&&D<C.length;D++)if(!di(C[D],E[D]))return!1;return!0}function cc(C,E,D,O,V,W){return on=W,Ct=E,E.memoizedState=null,E.updateQueue=null,E.lanes=0,ae.H=C===null||C.memoizedState===null?Dh:Vu,wo=!1,W=D(O,V),wo=!1,ha&&(W=Eo(E,D,O,V)),Qd(C),W}function Qd(C){ae.H=pa;var E=qt!==null&&qt.next!==null;if(on=0,Pt=qt=Ct=null,nr=!1,ol=0,fa=null,E)throw Error(o(300));C===null||Ln||(C=C.dependencies,C!==null&&Ja(C)&&(Ln=!0))}function Eo(C,E,D,O){Ct=C;var V=0;do{if(ha&&(fa=null),ol=0,ha=!1,25<=V)throw Error(o(301));if(V+=1,Pt=qt=null,C.updateQueue!=null){var W=C.updateQueue;W.lastEffect=null,W.events=null,W.stores=null,W.memoCache!=null&&(W.memoCache.index=0)}ae.H=ir,W=E(D,O)}while(ha);return W}function xo(){var C=ae.H,E=C.useState()[0];return E=typeof E.then=="function"?al(E):E,C=C.useState()[0],(qt!==null?qt.memoizedState:null)!==C&&(Ct.flags|=1024),E}function wu(){var C=lc!==0;return lc=0,C}function Eu(C,E,D){E.updateQueue=C.updateQueue,E.flags&=-2053,C.lanes&=~D}function xu(C){if(nr){for(C=C.memoizedState;C!==null;){var E=C.queue;E!==null&&(E.pending=null),C=C.next}nr=!1}on=0,Pt=qt=Ct=null,ha=!1,ol=lc=0,fa=null}function Gn(){var C={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?Ct.memoizedState=Pt=C:Pt=Pt.next=C,Pt}function An(){if(qt===null){var C=Ct.alternate;C=C!==null?C.memoizedState:null}else C=qt.next;var E=Pt===null?Ct.memoizedState:Pt.next;if(E!==null)Pt=E,qt=C;else{if(C===null)throw Ct.alternate===null?Error(o(467)):Error(o(310));qt=C,C={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},Pt===null?Ct.memoizedState=Pt=C:Pt=Pt.next=C}return Pt}function uc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function al(C){var E=ol;return ol+=1,fa===null&&(fa=[]),C=rc(fa,C,E),E=Ct,(Pt===null?E.memoizedState:Pt.next)===null&&(E=E.alternate,ae.H=E===null||E.memoizedState===null?Dh:Vu),C}function zs(C){if(C!==null&&typeof C=="object"){if(typeof C.then=="function")return al(C);if(C.$$typeof===U)return gt(C)}throw Error(o(438,String(C)))}function Ru(C){var E=null,D=Ct.updateQueue;if(D!==null&&(E=D.memoCache),E==null){var O=Ct.alternate;O!==null&&(O=O.updateQueue,O!==null&&(O=O.memoCache,O!=null&&(E={data:O.data.map(function(V){return V.slice()}),index:0})))}if(E==null&&(E={data:[],index:0}),D===null&&(D=uc(),Ct.updateQueue=D),D.memoCache=E,D=E.data[E.index],D===void 0)for(D=E.data[E.index]=Array(C),O=0;O<C;O++)D[O]=fe;return E.index++,D}function fs(C,E){return typeof E=="function"?E(C):E}function dc(C){var E=An();return Au(E,qt,C)}function Au(C,E,D){var O=C.queue;if(O===null)throw Error(o(311));O.lastRenderedReducer=D;var V=C.baseQueue,W=O.pending;if(W!==null){if(V!==null){var te=V.next;V.next=W.next,W.next=te}E.baseQueue=V=W,O.pending=null}if(W=C.baseState,V===null)C.memoizedState=W;else{E=V.next;var ve=te=null,Re=null,ke=E,je=!1;do{var Ke=ke.lane&-536870913;if(Ke!==ke.lane?(bt&Ke)===Ke:(on&Ke)===Ke){var He=ke.revertLane;if(He===0)Re!==null&&(Re=Re.next={lane:0,revertLane:0,gesture:null,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null}),Ke===cs&&(je=!0);else if((on&He)===He){ke=ke.next,He===cs&&(je=!0);continue}else Ke={lane:0,revertLane:ke.revertLane,gesture:null,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null},Re===null?(ve=Re=Ke,te=W):Re=Re.next=Ke,Ct.lanes|=He,Wr|=He;Ke=ke.action,wo&&D(W,Ke),W=ke.hasEagerState?ke.eagerState:D(W,Ke)}else He={lane:Ke,revertLane:ke.revertLane,gesture:ke.gesture,action:ke.action,hasEagerState:ke.hasEagerState,eagerState:ke.eagerState,next:null},Re===null?(ve=Re=He,te=W):Re=Re.next=He,Ct.lanes|=Ke,Wr|=Ke;ke=ke.next}while(ke!==null&&ke!==E);if(Re===null?te=W:Re.next=ve,!di(W,C.memoizedState)&&(Ln=!0,je&&(D=er,D!==null)))throw D;C.memoizedState=W,C.baseState=te,C.baseQueue=Re,O.lastRenderedState=W}return V===null&&(O.lanes=0),[C.memoizedState,O.dispatch]}function Tu(C){var E=An(),D=E.queue;if(D===null)throw Error(o(311));D.lastRenderedReducer=C;var O=D.dispatch,V=D.pending,W=E.memoizedState;if(V!==null){D.pending=null;var te=V=V.next;do W=C(W,te.action),te=te.next;while(te!==V);di(W,E.memoizedState)||(Ln=!0),E.memoizedState=W,E.baseQueue===null&&(E.baseState=W),D.lastRenderedState=W}return[W,O]}function Zd(C,E,D){var O=Ct,V=An(),W=Ot;if(W){if(D===void 0)throw Error(o(407));D=D()}else D=E();var te=!di((qt||V).memoizedState,D);if(te&&(V.memoizedState=D,Ln=!0),V=V.queue,Lu(th.bind(null,O,V,C),[C]),V.getSnapshot!==E||te||Pt!==null&&Pt.memoizedState.tag&1){if(O.flags|=2048,Us(9,{destroy:void 0},eh.bind(null,O,V,D,E),null),mt===null)throw Error(o(349));W||(on&127)!==0||Jd(O,E,D)}return D}function Jd(C,E,D){C.flags|=16384,C={getSnapshot:E,value:D},E=Ct.updateQueue,E===null?(E=uc(),Ct.updateQueue=E,E.stores=[C]):(D=E.stores,D===null?E.stores=[C]:D.push(C))}function eh(C,E,D,O){E.value=D,E.getSnapshot=O,nh(E)&&ih(C)}function th(C,E,D){return D(function(){nh(E)&&ih(C)})}function nh(C){var E=C.getSnapshot;C=C.value;try{var D=E();return!di(C,D)}catch{return!0}}function ih(C){var E=hi(C,2);E!==null&&Rt(E,C,2)}function _u(C){var E=Gn();if(typeof C=="function"){var D=C;if(C=D(),wo){Ie(!0);try{D()}finally{Ie(!1)}}}return E.memoizedState=E.baseState=C,E.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:C},E}function Du(C,E,D,O){return C.baseState=D,Au(C,qt,typeof O=="function"?O:fs)}function af(C,E,D,O,V){if(gc(C))throw Error(o(485));if(C=E.action,C!==null){var W={payload:V,action:C,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(te){W.listeners.push(te)}};ae.T!==null?D(!0):W.isTransition=!1,O(W),D=E.pending,D===null?(W.next=E.pending=W,rh(E,W)):(W.next=D.next,E.pending=D.next=W)}}function rh(C,E){var D=E.action,O=E.payload,V=C.state;if(E.isTransition){var W=ae.T,te={};ae.T=te;try{var ve=D(V,O),Re=ae.S;Re!==null&&Re(te,ve),sh(C,E,ve)}catch(ke){Pu(C,E,ke)}finally{W!==null&&te.types!==null&&(W.types=te.types),ae.T=W}}else try{W=D(V,O),sh(C,E,W)}catch(ke){Pu(C,E,ke)}}function sh(C,E,D){D!==null&&typeof D=="object"&&typeof D.then=="function"?D.then(function(O){oh(C,E,O)},function(O){return Pu(C,E,O)}):oh(C,E,D)}function oh(C,E,D){E.status="fulfilled",E.value=D,ah(E),C.state=D,E=C.pending,E!==null&&(D=E.next,D===E?C.pending=null:(D=D.next,E.next=D,rh(C,D)))}function Pu(C,E,D){var O=C.pending;if(C.pending=null,O!==null){O=O.next;do E.status="rejected",E.reason=D,ah(E),E=E.next;while(E!==O)}C.action=null}function ah(C){C=C.listeners;for(var E=0;E<C.length;E++)(0,C[E])()}function Mu(C,E){return E}function Fu(C,E){if(Ot){var D=mt.formState;if(D!==null){e:{var O=Ct;if(Ot){if(Xt){t:{for(var V=Xt,W=Gi;V.nodeType!==8;){if(!W){V=null;break t}if(V=qr(V.nextSibling),V===null){V=null;break t}}W=V.data,V=W==="F!"||W==="F"?V:null}if(V){Xt=qr(V.nextSibling),O=V.data==="F!";break e}}Mr(O)}O=!1}O&&(E=D[0])}}return D=Gn(),D.memoizedState=D.baseState=E,O={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mu,lastRenderedState:E},D.queue=O,D=Ah.bind(null,Ct,O),O.dispatch=D,O=_u(!1),W=Hu.bind(null,Ct,!1,O.queue),O=Gn(),V={state:E,dispatch:null,action:C,pending:null},O.queue=V,D=af.bind(null,Ct,V,W,D),V.dispatch=D,O.memoizedState=C,[E,D,!1]}function lh(C){var E=An();return Ou(E,qt,C)}function Ou(C,E,D){if(E=Au(C,E,Mu)[0],C=dc(fs)[0],typeof E=="object"&&E!==null&&typeof E.then=="function")try{var O=al(E)}catch(te){throw te===mo?Et:te}else O=E;E=An();var V=E.queue,W=V.dispatch;return D!==E.memoizedState&&(Ct.flags|=2048,Us(9,{destroy:void 0},ch.bind(null,V,D),null)),[O,W,C]}function ch(C,E){C.action=E}function Iu(C){var E=An(),D=qt;if(D!==null)return Ou(E,D,C);An(),E=E.memoizedState,D=An();var O=D.queue.dispatch;return D.memoizedState=C,[E,O,!1]}function Us(C,E,D,O){return C={tag:C,create:D,deps:O,inst:E,next:null},E=Ct.updateQueue,E===null&&(E=uc(),Ct.updateQueue=E),D=E.lastEffect,D===null?E.lastEffect=C.next=C:(O=D.next,D.next=C,C.next=O,E.lastEffect=C),C}function hc(){return An().memoizedState}function fc(C,E,D,O){var V=Gn();Ct.flags|=C,V.memoizedState=Us(1|E,{destroy:void 0},D,O===void 0?null:O)}function pc(C,E,D,O){var V=An();O=O===void 0?null:O;var W=V.memoizedState.inst;qt!==null&&O!==null&&bu(O,qt.memoizedState.deps)?V.memoizedState=Us(E,W,D,O):(Ct.flags|=C,V.memoizedState=Us(1|E,W,D,O))}function uh(C,E){fc(8390656,8,C,E)}function Lu(C,E){pc(2048,8,C,E)}function dh(C){Ct.flags|=4;var E=Ct.updateQueue;if(E===null)E=uc(),Ct.updateQueue=E,E.events=[C];else{var D=E.events;D===null?E.events=[C]:D.push(C)}}function hh(C){var E=An().memoizedState;return dh({ref:E,nextImpl:C}),function(){if((ct&2)!==0)throw Error(o(440));return E.impl.apply(void 0,arguments)}}function fh(C,E){return pc(4,2,C,E)}function ph(C,E){return pc(4,4,C,E)}function gh(C,E){if(typeof E=="function"){C=C();var D=E(C);return function(){typeof D=="function"?D():E(null)}}if(E!=null)return C=C(),E.current=C,function(){E.current=null}}function mh(C,E,D){D=D!=null?D.concat([C]):null,pc(4,4,gh.bind(null,E,C),D)}function Nu(){}function yh(C,E){var D=An();E=E===void 0?null:E;var O=D.memoizedState;return E!==null&&bu(E,O[1])?O[0]:(D.memoizedState=[C,E],C)}function Ch(C,E){var D=An();E=E===void 0?null:E;var O=D.memoizedState;if(E!==null&&bu(E,O[1]))return O[0];if(O=C(),wo){Ie(!0);try{C()}finally{Ie(!1)}}return D.memoizedState=[O,E],O}function ku(C,E,D){return D===void 0||(on&1073741824)!==0&&(bt&261930)===0?C.memoizedState=E:(C.memoizedState=D,C=Tt(),Ct.lanes|=C,Wr|=C,D)}function Sh(C,E,D,O){return di(D,E)?D:da.current!==null?(C=ku(C,D,O),di(C,E)||(Ln=!0),C):(on&42)===0||(on&1073741824)!==0&&(bt&261930)===0?(Ln=!0,C.memoizedState=D):(C=Tt(),Ct.lanes|=C,Wr|=C,E)}function bh(C,E,D,O,V){var W=oe.p;oe.p=W!==0&&8>W?W:8;var te=ae.T,ve={};ae.T=ve,Hu(C,!1,E,D);try{var Re=V(),ke=ae.S;if(ke!==null&&ke(ve,Re),Re!==null&&typeof Re=="object"&&typeof Re.then=="function"){var je=pu(Re,O);ll(C,E,je,$i(C))}else ll(C,E,O,$i(C))}catch(Ke){ll(C,E,{then:function(){},status:"rejected",reason:Ke},$i())}finally{oe.p=W,te!==null&&ve.types!==null&&(te.types=ve.types),ae.T=te}}function lf(){}function Bu(C,E,D,O){if(C.tag!==5)throw Error(o(476));var V=wh(C).queue;bh(C,V,E,ee,D===null?lf:function(){return Eh(C),D(O)})}function wh(C){var E=C.memoizedState;if(E!==null)return E;E={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:ee},next:null};var D={};return E.next={memoizedState:D,baseState:D,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:D},next:null},C.memoizedState=E,C=C.alternate,C!==null&&(C.memoizedState=E),E}function Eh(C){var E=wh(C);E.next===null&&(E=C.alternate.memoizedState),ll(C,E.next.queue,{},$i())}function Gu(){return gt(ld)}function xh(){return An().memoizedState}function Rh(){return An().memoizedState}function cf(C){for(var E=C.return;E!==null;){switch(E.tag){case 24:case 3:var D=$i();C=ds(D);var O=Hs(E,C,D);O!==null&&(Rt(O,E,D),Vs(O,E,D)),E={cache:du()},C.payload=E;return}E=E.return}}function uf(C,E,D){var O=$i();D={lane:O,revertLane:0,gesture:null,action:D,hasEagerState:!1,eagerState:null,next:null},gc(C)?Th(E,D):(D=$l(C,E,D,O),D!==null&&(Rt(D,C,O),_h(D,E,O)))}function Ah(C,E,D){var O=$i();ll(C,E,D,O)}function ll(C,E,D,O){var V={lane:O,revertLane:0,gesture:null,action:D,hasEagerState:!1,eagerState:null,next:null};if(gc(C))Th(E,V);else{var W=C.alternate;if(C.lanes===0&&(W===null||W.lanes===0)&&(W=E.lastRenderedReducer,W!==null))try{var te=E.lastRenderedState,ve=W(te,D);if(V.hasEagerState=!0,V.eagerState=ve,di(ve,te))return jn(C,E,V,0),mt===null&&Qa(),!1}catch{}finally{}if(D=$l(C,E,V,O),D!==null)return Rt(D,C,O),_h(D,E,O),!0}return!1}function Hu(C,E,D,O){if(O={lane:2,revertLane:Ve(),gesture:null,action:O,hasEagerState:!1,eagerState:null,next:null},gc(C)){if(E)throw Error(o(479))}else E=$l(C,D,O,2),E!==null&&Rt(E,C,2)}function gc(C){var E=C.alternate;return C===Ct||E!==null&&E===Ct}function Th(C,E){ha=nr=!0;var D=C.pending;D===null?E.next=E:(E.next=D.next,D.next=E),C.pending=E}function _h(C,E,D){if((D&4194048)!==0){var O=E.lanes;O&=C.pendingLanes,D|=O,E.lanes=D,Xr(C,D)}}var pa={readContext:gt,use:zs,useCallback:pn,useContext:pn,useEffect:pn,useImperativeHandle:pn,useLayoutEffect:pn,useInsertionEffect:pn,useMemo:pn,useReducer:pn,useRef:pn,useState:pn,useDebugValue:pn,useDeferredValue:pn,useTransition:pn,useSyncExternalStore:pn,useId:pn,useHostTransitionStatus:pn,useFormState:pn,useActionState:pn,useOptimistic:pn,useMemoCache:pn,useCacheRefresh:pn};pa.useEffectEvent=pn;var Dh={readContext:gt,use:zs,useCallback:function(C,E){return Gn().memoizedState=[C,E===void 0?null:E],C},useContext:gt,useEffect:uh,useImperativeHandle:function(C,E,D){D=D!=null?D.concat([C]):null,fc(4194308,4,gh.bind(null,E,C),D)},useLayoutEffect:function(C,E){return fc(4194308,4,C,E)},useInsertionEffect:function(C,E){fc(4,2,C,E)},useMemo:function(C,E){var D=Gn();E=E===void 0?null:E;var O=C();if(wo){Ie(!0);try{C()}finally{Ie(!1)}}return D.memoizedState=[O,E],O},useReducer:function(C,E,D){var O=Gn();if(D!==void 0){var V=D(E);if(wo){Ie(!0);try{D(E)}finally{Ie(!1)}}}else V=E;return O.memoizedState=O.baseState=V,C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:C,lastRenderedState:V},O.queue=C,C=C.dispatch=uf.bind(null,Ct,C),[O.memoizedState,C]},useRef:function(C){var E=Gn();return C={current:C},E.memoizedState=C},useState:function(C){C=_u(C);var E=C.queue,D=Ah.bind(null,Ct,E);return E.dispatch=D,[C.memoizedState,D]},useDebugValue:Nu,useDeferredValue:function(C,E){var D=Gn();return ku(D,C,E)},useTransition:function(){var C=_u(!1);return C=bh.bind(null,Ct,C.queue,!0,!1),Gn().memoizedState=C,[!1,C]},useSyncExternalStore:function(C,E,D){var O=Ct,V=Gn();if(Ot){if(D===void 0)throw Error(o(407));D=D()}else{if(D=E(),mt===null)throw Error(o(349));(bt&127)!==0||Jd(O,E,D)}V.memoizedState=D;var W={value:D,getSnapshot:E};return V.queue=W,uh(th.bind(null,O,W,C),[C]),O.flags|=2048,Us(9,{destroy:void 0},eh.bind(null,O,W,D,E),null),D},useId:function(){var C=Gn(),E=mt.identifierPrefix;if(Ot){var D=mr,O=fn;D=(O&~(1<<32-Pe(O)-1)).toString(32)+D,E="_"+E+"R_"+D,D=lc++,0<D&&(E+="H"+D.toString(32)),E+="_"}else D=Su++,E="_"+E+"r_"+D.toString(32)+"_";return C.memoizedState=E},useHostTransitionStatus:Gu,useFormState:Fu,useActionState:Fu,useOptimistic:function(C){var E=Gn();E.memoizedState=E.baseState=C;var D={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return E.queue=D,E=Hu.bind(null,Ct,!0,D),D.dispatch=E,[C,E]},useMemoCache:Ru,useCacheRefresh:function(){return Gn().memoizedState=cf.bind(null,Ct)},useEffectEvent:function(C){var E=Gn(),D={impl:C};return E.memoizedState=D,function(){if((ct&2)!==0)throw Error(o(440));return D.impl.apply(void 0,arguments)}}},Vu={readContext:gt,use:zs,useCallback:yh,useContext:gt,useEffect:Lu,useImperativeHandle:mh,useInsertionEffect:fh,useLayoutEffect:ph,useMemo:Ch,useReducer:dc,useRef:hc,useState:function(){return dc(fs)},useDebugValue:Nu,useDeferredValue:function(C,E){var D=An();return Sh(D,qt.memoizedState,C,E)},useTransition:function(){var C=dc(fs)[0],E=An().memoizedState;return[typeof C=="boolean"?C:al(C),E]},useSyncExternalStore:Zd,useId:xh,useHostTransitionStatus:Gu,useFormState:lh,useActionState:lh,useOptimistic:function(C,E){var D=An();return Du(D,qt,C,E)},useMemoCache:Ru,useCacheRefresh:Rh};Vu.useEffectEvent=hh;var ir={readContext:gt,use:zs,useCallback:yh,useContext:gt,useEffect:Lu,useImperativeHandle:mh,useInsertionEffect:fh,useLayoutEffect:ph,useMemo:Ch,useReducer:Tu,useRef:hc,useState:function(){return Tu(fs)},useDebugValue:Nu,useDeferredValue:function(C,E){var D=An();return qt===null?ku(D,C,E):Sh(D,qt.memoizedState,C,E)},useTransition:function(){var C=Tu(fs)[0],E=An().memoizedState;return[typeof C=="boolean"?C:al(C),E]},useSyncExternalStore:Zd,useId:xh,useHostTransitionStatus:Gu,useFormState:Iu,useActionState:Iu,useOptimistic:function(C,E){var D=An();return qt!==null?Du(D,qt,C,E):(D.baseState=C,[C,D.queue.dispatch])},useMemoCache:Ru,useCacheRefresh:Rh};ir.useEffectEvent=hh;function mc(C,E,D,O){E=C.memoizedState,D=D(O,E),D=D==null?E:R({},E,D),C.memoizedState=D,C.lanes===0&&(C.updateQueue.baseState=D)}var cl={enqueueSetState:function(C,E,D){C=C._reactInternals;var O=$i(),V=ds(O);V.payload=E,D!=null&&(V.callback=D),E=Hs(C,V,O),E!==null&&(Rt(E,C,O),Vs(E,C,O))},enqueueReplaceState:function(C,E,D){C=C._reactInternals;var O=$i(),V=ds(O);V.tag=1,V.payload=E,D!=null&&(V.callback=D),E=Hs(C,V,O),E!==null&&(Rt(E,C,O),Vs(E,C,O))},enqueueForceUpdate:function(C,E){C=C._reactInternals;var D=$i(),O=ds(D);O.tag=2,E!=null&&(O.callback=E),E=Hs(C,O,D),E!==null&&(Rt(E,C,D),Vs(E,C,D))}};function zu(C,E,D,O,V,W,te){return C=C.stateNode,typeof C.shouldComponentUpdate=="function"?C.shouldComponentUpdate(O,W,te):E.prototype&&E.prototype.isPureReactComponent?!Xo(D,O)||!Xo(V,W):!0}function Uu(C,E,D,O){C=E.state,typeof E.componentWillReceiveProps=="function"&&E.componentWillReceiveProps(D,O),typeof E.UNSAFE_componentWillReceiveProps=="function"&&E.UNSAFE_componentWillReceiveProps(D,O),E.state!==C&&cl.enqueueReplaceState(E,E.state,null)}function Ws(C,E){var D=E;if("ref"in E){D={};for(var O in E)O!=="ref"&&(D[O]=E[O])}if(C=C.defaultProps){D===E&&(D=R({},D));for(var V in C)D[V]===void 0&&(D[V]=C[V])}return D}function Ph(C){Xa(C)}function Wu(C){console.error(C)}function ju(C){Xa(C)}function vc(C,E){try{var D=C.onUncaughtError;D(E.value,{componentStack:E.stack})}catch(O){setTimeout(function(){throw O})}}function Mh(C,E,D){try{var O=C.onCaughtError;O(D.value,{componentStack:D.stack,errorBoundary:E.tag===1?E.stateNode:null})}catch(V){setTimeout(function(){throw V})}}function $u(C,E,D){return D=ds(D),D.tag=3,D.payload={element:null},D.callback=function(){vc(C,E)},D}function qu(C){return C=ds(C),C.tag=3,C}function Fh(C,E,D,O){var V=D.type.getDerivedStateFromError;if(typeof V=="function"){var W=O.value;C.payload=function(){return V(W)},C.callback=function(){Mh(E,D,O)}}var te=D.stateNode;te!==null&&typeof te.componentDidCatch=="function"&&(C.callback=function(){Mh(E,D,O),typeof V!="function"&&(Dn===null?Dn=new Set([this]):Dn.add(this));var ve=O.stack;this.componentDidCatch(O.value,{componentStack:ve!==null?ve:""})})}function Hn(C,E,D,O,V){if(D.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){if(E=D.alternate,E!==null&&Lr(E,D,V,!0),D=Ai.current,D!==null){switch(D.tag){case 31:case 13:return gi===null?ba():D.alternate===null&&gn===0&&(gn=3),D.flags&=-257,D.flags|=65536,D.lanes=V,O===ic?D.flags|=16384:(E=D.updateQueue,E===null?D.updateQueue=new Set([O]):E.add(O),bl(C,O,V)),!1;case 22:return D.flags|=65536,O===ic?D.flags|=16384:(E=D.updateQueue,E===null?(E={transitions:null,markerInstances:null,retryQueue:new Set([O])},D.updateQueue=E):(D=E.retryQueue,D===null?E.retryQueue=new Set([O]):D.add(O)),bl(C,O,V)),!1}throw Error(o(435,D.tag))}return bl(C,O,V),ba(),!1}if(Ot)return E=Ai.current,E!==null?((E.flags&65536)===0&&(E.flags|=256),E.flags|=65536,E.lanes=V,O!==ra&&(C=Error(o(422),{cause:O}),Fr(Bi(C,D)))):(O!==ra&&(E=Error(o(423),{cause:O}),Fr(Bi(E,D))),C=C.current.alternate,C.flags|=65536,V&=-V,C.lanes|=V,O=Bi(O,D),V=$u(C.stateNode,O,V),ut(C,V),gn!==4&&(gn=2)),!1;var W=Error(o(520),{cause:O});if(W=Bi(W,D),Fo===null?Fo=[W]:Fo.push(W),gn!==4&&(gn=2),E===null)return!0;O=Bi(O,D),D=E;do{switch(D.tag){case 3:return D.flags|=65536,C=V&-V,D.lanes|=C,C=$u(D.stateNode,O,C),ut(D,C),!1;case 1:if(E=D.type,W=D.stateNode,(D.flags&128)===0&&(typeof E.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(Dn===null||!Dn.has(W))))return D.flags|=65536,V&=-V,D.lanes|=V,V=qu(V),Fh(V,C,D,O),ut(D,V),!1}D=D.return}while(D!==null);return!1}var yc=Error(o(461)),Ln=!1;function $n(C,E,D,O){E.child=C===null?oc(E,null,D,O):us(E,C.child,D,O)}function Ku(C,E,D,O,V){D=D.render;var W=E.ref;if("ref"in O){var te={};for(var ve in O)ve!=="ref"&&(te[ve]=O[ve])}else te=O;return Bs(E),O=cc(C,E,D,te,W,V),ve=wu(),C!==null&&!Ln?(Eu(C,E,V),Tn(C,E,V)):(Ot&&ve&&Pr(E),E.flags|=1,$n(C,E,O,V),E.child)}function Ro(C,E,D,O,V){if(C===null){var W=D.type;return typeof W=="function"&&!ql(W)&&W.defaultProps===void 0&&D.compare===null?(E.tag=15,E.type=W,Cc(C,E,W,O,V)):(C=_r(D.type,null,O,E,E.mode,V),C.ref=E.ref,C.return=E,E.child=C)}if(W=C.child,!Rc(C,V)){var te=W.memoizedProps;if(D=D.compare,D=D!==null?D:Xo,D(te,O)&&C.ref===E.ref)return Tn(C,E,V)}return E.flags|=1,C=Ei(W,O),C.ref=E.ref,C.return=E,E.child=C}function Cc(C,E,D,O,V){if(C!==null){var W=C.memoizedProps;if(Xo(W,O)&&C.ref===E.ref)if(Ln=!1,E.pendingProps=O=W,Rc(C,V))(C.flags&131072)!==0&&(Ln=!0);else return E.lanes=C.lanes,Tn(C,E,V)}return ga(C,E,D,O,V)}function Ao(C,E,D,O){var V=O.children,W=C!==null?C.memoizedState:null;if(C===null&&E.stateNode===null&&(E.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),O.mode==="hidden"){if((E.flags&128)!==0){if(W=W!==null?W.baseLanes|D:D,C!==null){for(O=E.child=C.child,V=0;O!==null;)V=V|O.lanes|O.childLanes,O=O.sibling;O=V&~W}else O=0,E.child=null;return _i(C,E,W,D,O)}if((D&536870912)!==0)E.memoizedState={baseLanes:0,cachePool:null},C!==null&&el(E,W!==null?W.cachePool:null),W!==null?Yd(E,W):yu(),Xd(E);else return O=E.lanes=536870912,_i(C,E,W!==null?W.baseLanes|D:D,D,O)}else W!==null?(el(E,W.cachePool),Yd(E,W),Ti(),E.memoizedState=null):(C!==null&&el(E,null),yu(),Ti());return $n(C,E,V,D),E.child}function Br(C,E){return C!==null&&C.tag===22||E.stateNode!==null||(E.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),E.sibling}function _i(C,E,D,O,V){var W=nc();return W=W===null?null:{parent:In._currentValue,pool:W},E.memoizedState={baseLanes:D,cachePool:W},C!==null&&el(E,null),yu(),Xd(E),C!==null&&Lr(C,E,O,!0),E.childLanes=V,null}function Sc(C,E){return E=xc({mode:E.mode,children:E.children},C.mode),E.ref=C.ref,C.child=E,E.return=C,E}function Oh(C,E,D){return us(E,C.child,null,D),C=Sc(E,E.pendingProps),C.flags|=2,Rn(E),E.memoizedState=null,C}function bc(C,E,D){var O=E.pendingProps,V=(E.flags&128)!==0;if(E.flags&=-129,C===null){if(Ot){if(O.mode==="hidden")return C=Sc(E,O),E.lanes=536870912,Br(null,C);if(Cu(E),(C=Xt)?(C=qf(C,Gi),C=C!==null&&C.data==="&"?C:null,C!==null&&(E.memoizedState={dehydrated:C,treeContext:os!==null?{id:fn,overflow:mr}:null,retryLane:536870912,hydrationErrors:null},D=ta(C),D.return=E,E.child=D,bn=E,Xt=null)):C=null,C===null)throw Mr(E);return E.lanes=536870912,null}return Sc(E,O)}var W=C.memoizedState;if(W!==null){var te=W.dehydrated;if(Cu(E),V)if(E.flags&256)E.flags&=-257,E=Oh(C,E,D);else if(E.memoizedState!==null)E.child=C.child,E.flags|=128,E=null;else throw Error(o(558));else if(Ln||Lr(C,E,D,!1),V=(D&C.childLanes)!==0,Ln||V){if(O=mt,O!==null&&(te=Qr(O,D),te!==0&&te!==W.retryLane))throw W.retryLane=te,hi(C,te),Rt(O,C,te),yc;ba(),E=Oh(C,E,D)}else C=W.treeContext,Xt=qr(te.nextSibling),bn=E,Ot=!0,as=null,Gi=!1,C!==null&&Ql(E,C),E=Sc(E,O),E.flags|=4096;return E}return C=Ei(C.child,{mode:O.mode,children:O.children}),C.ref=E.ref,E.child=C,C.return=E,C}function To(C,E){var D=E.ref;if(D===null)C!==null&&C.ref!==null&&(E.flags|=4194816);else{if(typeof D!="function"&&typeof D!="object")throw Error(o(284));(C===null||C.ref!==D)&&(E.flags|=4194816)}}function ga(C,E,D,O,V){return Bs(E),D=cc(C,E,D,O,void 0,V),O=wu(),C!==null&&!Ln?(Eu(C,E,V),Tn(C,E,V)):(Ot&&O&&Pr(E),E.flags|=1,$n(C,E,D,V),E.child)}function ul(C,E,D,O,V,W){return Bs(E),E.updateQueue=null,D=Eo(E,O,D,V),Qd(C),O=wu(),C!==null&&!Ln?(Eu(C,E,W),Tn(C,E,W)):(Ot&&O&&Pr(E),E.flags|=1,$n(C,E,D,W),E.child)}function wc(C,E,D,O,V){if(Bs(E),E.stateNode===null){var W=Fs,te=D.contextType;typeof te=="object"&&te!==null&&(W=gt(te)),W=new D(O,W),E.memoizedState=W.state!==null&&W.state!==void 0?W.state:null,W.updater=cl,E.stateNode=W,W._reactInternals=E,W=E.stateNode,W.props=O,W.state=E.memoizedState,W.refs={},il(E),te=D.contextType,W.context=typeof te=="object"&&te!==null?gt(te):Fs,W.state=E.memoizedState,te=D.getDerivedStateFromProps,typeof te=="function"&&(mc(E,D,te,O),W.state=E.memoizedState),typeof D.getDerivedStateFromProps=="function"||typeof W.getSnapshotBeforeUpdate=="function"||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(te=W.state,typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount(),te!==W.state&&cl.enqueueReplaceState(W,W.state,null),ca(E,O,W,V),rl(),W.state=E.memoizedState),typeof W.componentDidMount=="function"&&(E.flags|=4194308),O=!0}else if(C===null){W=E.stateNode;var ve=E.memoizedProps,Re=Ws(D,ve);W.props=Re;var ke=W.context,je=D.contextType;te=Fs,typeof je=="object"&&je!==null&&(te=gt(je));var Ke=D.getDerivedStateFromProps;je=typeof Ke=="function"||typeof W.getSnapshotBeforeUpdate=="function",ve=E.pendingProps!==ve,je||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(ve||ke!==te)&&Uu(E,W,O,te),fi=!1;var He=E.memoizedState;W.state=He,ca(E,O,W,V),rl(),ke=E.memoizedState,ve||He!==ke||fi?(typeof Ke=="function"&&(mc(E,D,Ke,O),ke=E.memoizedState),(Re=fi||zu(E,D,Re,O,He,ke,te))?(je||typeof W.UNSAFE_componentWillMount!="function"&&typeof W.componentWillMount!="function"||(typeof W.componentWillMount=="function"&&W.componentWillMount(),typeof W.UNSAFE_componentWillMount=="function"&&W.UNSAFE_componentWillMount()),typeof W.componentDidMount=="function"&&(E.flags|=4194308)):(typeof W.componentDidMount=="function"&&(E.flags|=4194308),E.memoizedProps=O,E.memoizedState=ke),W.props=O,W.state=ke,W.context=te,O=Re):(typeof W.componentDidMount=="function"&&(E.flags|=4194308),O=!1)}else{W=E.stateNode,mu(C,E),te=E.memoizedProps,je=Ws(D,te),W.props=je,Ke=E.pendingProps,He=W.context,ke=D.contextType,Re=Fs,typeof ke=="object"&&ke!==null&&(Re=gt(ke)),ve=D.getDerivedStateFromProps,(ke=typeof ve=="function"||typeof W.getSnapshotBeforeUpdate=="function")||typeof W.UNSAFE_componentWillReceiveProps!="function"&&typeof W.componentWillReceiveProps!="function"||(te!==Ke||He!==Re)&&Uu(E,W,O,Re),fi=!1,He=E.memoizedState,W.state=He,ca(E,O,W,V),rl();var Ue=E.memoizedState;te!==Ke||He!==Ue||fi||C!==null&&C.dependencies!==null&&Ja(C.dependencies)?(typeof ve=="function"&&(mc(E,D,ve,O),Ue=E.memoizedState),(je=fi||zu(E,D,je,O,He,Ue,Re)||C!==null&&C.dependencies!==null&&Ja(C.dependencies))?(ke||typeof W.UNSAFE_componentWillUpdate!="function"&&typeof W.componentWillUpdate!="function"||(typeof W.componentWillUpdate=="function"&&W.componentWillUpdate(O,Ue,Re),typeof W.UNSAFE_componentWillUpdate=="function"&&W.UNSAFE_componentWillUpdate(O,Ue,Re)),typeof W.componentDidUpdate=="function"&&(E.flags|=4),typeof W.getSnapshotBeforeUpdate=="function"&&(E.flags|=1024)):(typeof W.componentDidUpdate!="function"||te===C.memoizedProps&&He===C.memoizedState||(E.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||te===C.memoizedProps&&He===C.memoizedState||(E.flags|=1024),E.memoizedProps=O,E.memoizedState=Ue),W.props=O,W.state=Ue,W.context=Re,O=je):(typeof W.componentDidUpdate!="function"||te===C.memoizedProps&&He===C.memoizedState||(E.flags|=4),typeof W.getSnapshotBeforeUpdate!="function"||te===C.memoizedProps&&He===C.memoizedState||(E.flags|=1024),O=!1)}return W=O,To(C,E),O=(E.flags&128)!==0,W||O?(W=E.stateNode,D=O&&typeof D.getDerivedStateFromError!="function"?null:W.render(),E.flags|=1,C!==null&&O?(E.child=us(E,C.child,null,V),E.child=us(E,null,D,V)):$n(C,E,D,V),E.memoizedState=W.state,C=E.child):C=Tn(C,E,V),C}function Ih(C,E,D,O){return Ns(),E.flags|=256,$n(C,E,D,O),E.child}var Yu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ai(C){return{baseLanes:C,cachePool:gu()}}function Ec(C,E,D){return C=C!==null?C.childLanes&~D:0,E&&(C|=Ci),C}function Lh(C,E,D){var O=E.pendingProps,V=!1,W=(E.flags&128)!==0,te;if((te=W)||(te=C!==null&&C.memoizedState===null?!1:(It.current&2)!==0),te&&(V=!0,E.flags&=-129),te=(E.flags&32)!==0,E.flags&=-33,C===null){if(Ot){if(V?hs(E):Ti(),(C=Xt)?(C=qf(C,Gi),C=C!==null&&C.data!=="&"?C:null,C!==null&&(E.memoizedState={dehydrated:C,treeContext:os!==null?{id:fn,overflow:mr}:null,retryLane:536870912,hydrationErrors:null},D=ta(C),D.return=E,E.child=D,bn=E,Xt=null)):C=null,C===null)throw Mr(E);return xf(C)?E.lanes=32:E.lanes=536870912,null}var ve=O.children;return O=O.fallback,V?(Ti(),V=E.mode,ve=xc({mode:"hidden",children:ve},V),O=Os(O,V,D,null),ve.return=E,O.return=E,ve.sibling=O,E.child=ve,O=E.child,O.memoizedState=ai(D),O.childLanes=Ec(C,te,D),E.memoizedState=Yu,Br(null,O)):(hs(E),dl(E,ve))}var Re=C.memoizedState;if(Re!==null&&(ve=Re.dehydrated,ve!==null)){if(W)E.flags&256?(hs(E),E.flags&=-257,E=Xu(C,E,D)):E.memoizedState!==null?(Ti(),E.child=C.child,E.flags|=128,E=null):(Ti(),ve=O.fallback,V=E.mode,O=xc({mode:"visible",children:O.children},V),ve=Os(ve,V,D,null),ve.flags|=2,O.return=E,ve.return=E,O.sibling=ve,E.child=O,us(E,C.child,null,D),O=E.child,O.memoizedState=ai(D),O.childLanes=Ec(C,te,D),E.memoizedState=Yu,E=Br(null,O));else if(hs(E),xf(ve)){if(te=ve.nextSibling&&ve.nextSibling.dataset,te)var ke=te.dgst;te=ke,O=Error(o(419)),O.stack="",O.digest=te,Fr({value:O,source:null,stack:null}),E=Xu(C,E,D)}else if(Ln||Lr(C,E,D,!1),te=(D&C.childLanes)!==0,Ln||te){if(te=mt,te!==null&&(O=Qr(te,D),O!==0&&O!==Re.retryLane))throw Re.retryLane=O,hi(C,O),Rt(te,C,O),yc;Ef(ve)||ba(),E=Xu(C,E,D)}else Ef(ve)?(E.flags|=192,E.child=C.child,E=null):(C=Re.treeContext,Xt=qr(ve.nextSibling),bn=E,Ot=!0,as=null,Gi=!1,C!==null&&Ql(E,C),E=dl(E,O.children),E.flags|=4096);return E}return V?(Ti(),ve=O.fallback,V=E.mode,Re=C.child,ke=Re.sibling,O=Ei(Re,{mode:"hidden",children:O.children}),O.subtreeFlags=Re.subtreeFlags&65011712,ke!==null?ve=Ei(ke,ve):(ve=Os(ve,V,D,null),ve.flags|=2),ve.return=E,O.return=E,O.sibling=ve,E.child=O,Br(null,O),O=E.child,ve=C.child.memoizedState,ve===null?ve=ai(D):(V=ve.cachePool,V!==null?(Re=In._currentValue,V=V.parent!==Re?{parent:Re,pool:Re}:V):V=gu(),ve={baseLanes:ve.baseLanes|D,cachePool:V}),O.memoizedState=ve,O.childLanes=Ec(C,te,D),E.memoizedState=Yu,Br(C.child,O)):(hs(E),D=C.child,C=D.sibling,D=Ei(D,{mode:"visible",children:O.children}),D.return=E,D.sibling=null,C!==null&&(te=E.deletions,te===null?(E.deletions=[C],E.flags|=16):te.push(C)),E.child=D,E.memoizedState=null,D)}function dl(C,E){return E=xc({mode:"visible",children:E},C.mode),E.return=C,C.child=E}function xc(C,E){return C=hn(22,C,null,E),C.lanes=0,C}function Xu(C,E,D){return us(E,C.child,null,D),C=dl(E,E.pendingProps.children),C.flags|=2,E.memoizedState=null,C}function Nh(C,E,D){C.lanes|=E;var O=C.alternate;O!==null&&(O.lanes|=E),Jl(C.return,E,D)}function _o(C,E,D,O,V,W){var te=C.memoizedState;te===null?C.memoizedState={isBackwards:E,rendering:null,renderingStartTime:0,last:O,tail:D,tailMode:V,treeForkCount:W}:(te.isBackwards=E,te.rendering=null,te.renderingStartTime=0,te.last=O,te.tail=D,te.tailMode=V,te.treeForkCount=W)}function Di(C,E,D){var O=E.pendingProps,V=O.revealOrder,W=O.tail;O=O.children;var te=It.current,ve=(te&2)!==0;if(ve?(te=te&1|2,E.flags|=128):te&=1,ue(It,te),$n(C,E,O,D),O=Ot?ia:0,!ve&&C!==null&&(C.flags&128)!==0)e:for(C=E.child;C!==null;){if(C.tag===13)C.memoizedState!==null&&Nh(C,D,E);else if(C.tag===19)Nh(C,D,E);else if(C.child!==null){C.child.return=C,C=C.child;continue}if(C===E)break e;for(;C.sibling===null;){if(C.return===null||C.return===E)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}switch(V){case"forwards":for(D=E.child,V=null;D!==null;)C=D.alternate,C!==null&&Vi(C)===null&&(V=D),D=D.sibling;D=V,D===null?(V=E.child,E.child=null):(V=D.sibling,D.sibling=null),_o(E,!1,V,D,W,O);break;case"backwards":case"unstable_legacy-backwards":for(D=null,V=E.child,E.child=null;V!==null;){if(C=V.alternate,C!==null&&Vi(C)===null){E.child=V;break}C=V.sibling,V.sibling=D,D=V,V=C}_o(E,!0,D,null,W,O);break;case"together":_o(E,!1,null,null,void 0,O);break;default:E.memoizedState=null}return E.child}function Tn(C,E,D){if(C!==null&&(E.dependencies=C.dependencies),Wr|=E.lanes,(D&E.childLanes)===0)if(C!==null){if(Lr(C,E,D,!1),(D&E.childLanes)===0)return null}else return null;if(C!==null&&E.child!==C.child)throw Error(o(153));if(E.child!==null){for(C=E.child,D=Ei(C,C.pendingProps),E.child=D,D.return=E;C.sibling!==null;)C=C.sibling,D=D.sibling=Ei(C,C.pendingProps),D.return=E;D.sibling=null}return E.child}function Rc(C,E){return(C.lanes&E)!==0?!0:(C=C.dependencies,!!(C!==null&&Ja(C)))}function df(C,E,D){switch(E.tag){case 3:he(E,E.stateNode.containerInfo),ls(E,In,C.memoizedState.cache),Ns();break;case 27:case 5:me(E);break;case 4:he(E,E.stateNode.containerInfo);break;case 10:ls(E,E.type,E.memoizedProps.value);break;case 31:if(E.memoizedState!==null)return E.flags|=128,Cu(E),null;break;case 13:var O=E.memoizedState;if(O!==null)return O.dehydrated!==null?(hs(E),E.flags|=128,null):(D&E.child.childLanes)!==0?Lh(C,E,D):(hs(E),C=Tn(C,E,D),C!==null?C.sibling:null);hs(E);break;case 19:var V=(C.flags&128)!==0;if(O=(D&E.childLanes)!==0,O||(Lr(C,E,D,!1),O=(D&E.childLanes)!==0),V){if(O)return Di(C,E,D);E.flags|=128}if(V=E.memoizedState,V!==null&&(V.rendering=null,V.tail=null,V.lastEffect=null),ue(It,It.current),O)break;return null;case 22:return E.lanes=0,Ao(C,E,D,E.pendingProps);case 24:ls(E,In,C.memoizedState.cache)}return Tn(C,E,D)}function Ac(C,E,D){if(C!==null)if(C.memoizedProps!==E.pendingProps)Ln=!0;else{if(!Rc(C,D)&&(E.flags&128)===0)return Ln=!1,df(C,E,D);Ln=(C.flags&131072)!==0}else Ln=!1,Ot&&(E.flags&1048576)!==0&&zd(E,ia,E.index);switch(E.lanes=0,E.tag){case 16:e:{var O=E.pendingProps;if(C=vo(E.elementType),E.type=C,typeof C=="function")ql(C)?(O=Ws(C,O),E.tag=1,E=wc(null,E,C,O,D)):(E.tag=0,E=ga(null,E,C,O,D));else{if(C!=null){var V=C.$$typeof;if(V===$){E.tag=11,E=Ku(null,E,C,O,D);break e}else if(V===J){E.tag=14,E=Ro(null,E,C,O,D);break e}}throw E=xe(C)||C,Error(o(306,E,""))}}return E;case 0:return ga(C,E,E.type,E.pendingProps,D);case 1:return O=E.type,V=Ws(O,E.pendingProps),wc(C,E,O,V,D);case 3:e:{if(he(E,E.stateNode.containerInfo),C===null)throw Error(o(387));O=E.pendingProps;var W=E.memoizedState;V=W.element,mu(C,E),ca(E,O,null,D);var te=E.memoizedState;if(O=te.cache,ls(E,In,O),O!==W.cache&&ec(E,[In],D,!0),rl(),O=te.element,W.isDehydrated)if(W={element:O,isDehydrated:!1,cache:te.cache},E.updateQueue.baseState=W,E.memoizedState=W,E.flags&256){E=Ih(C,E,O,D);break e}else if(O!==V){V=Bi(Error(o(424)),E),Fr(V),E=Ih(C,E,O,D);break e}else{switch(C=E.stateNode.containerInfo,C.nodeType){case 9:C=C.body;break;default:C=C.nodeName==="HTML"?C.ownerDocument.body:C}for(Xt=qr(C.firstChild),bn=E,Ot=!0,as=null,Gi=!0,D=oc(E,null,O,D),E.child=D;D;)D.flags=D.flags&-3|4096,D=D.sibling}else{if(Ns(),O===V){E=Tn(C,E,D);break e}$n(C,E,O,D)}E=E.child}return E;case 26:return To(C,E),C===null?(D=Jf(E.type,null,E.pendingProps,null))?E.memoizedState=D:Ot||(D=E.type,C=E.pendingProps,O=Hh(X.current).createElement(D),O[Fn]=E,O[ii]=C,bi(O,D,C),On(O),E.stateNode=O):E.memoizedState=Jf(E.type,C.memoizedProps,E.pendingProps,C.memoizedState),null;case 27:return me(E),C===null&&Ot&&(O=E.stateNode=Xf(E.type,E.pendingProps,X.current),bn=E,Gi=!0,V=Xt,Ra(E.type)?(Rf=V,Xt=qr(O.firstChild)):Xt=V),$n(C,E,E.pendingProps.children,D),To(C,E),C===null&&(E.flags|=4194304),E.child;case 5:return C===null&&Ot&&((V=O=Xt)&&(O=Fp(O,E.type,E.pendingProps,Gi),O!==null?(E.stateNode=O,bn=E,Xt=qr(O.firstChild),Gi=!1,V=!0):V=!1),V||Mr(E)),me(E),V=E.type,W=E.pendingProps,te=C!==null?C.memoizedProps:null,O=W.children,Sf(V,W)?O=null:te!==null&&Sf(V,te)&&(E.flags|=32),E.memoizedState!==null&&(V=cc(C,E,xo,null,null,D),ld._currentValue=V),To(C,E),$n(C,E,O,D),E.child;case 6:return C===null&&Ot&&((C=D=Xt)&&(D=Op(D,E.pendingProps,Gi),D!==null?(E.stateNode=D,bn=E,Xt=null,C=!0):C=!1),C||Mr(E)),null;case 13:return Lh(C,E,D);case 4:return he(E,E.stateNode.containerInfo),O=E.pendingProps,C===null?E.child=us(E,null,O,D):$n(C,E,O,D),E.child;case 11:return Ku(C,E,E.type,E.pendingProps,D);case 7:return $n(C,E,E.pendingProps,D),E.child;case 8:return $n(C,E,E.pendingProps.children,D),E.child;case 12:return $n(C,E,E.pendingProps.children,D),E.child;case 10:return O=E.pendingProps,ls(E,E.type,O.value),$n(C,E,O.children,D),E.child;case 9:return V=E.type._context,O=E.pendingProps.children,Bs(E),V=gt(V),O=O(V),E.flags|=1,$n(C,E,O,D),E.child;case 14:return Ro(C,E,E.type,E.pendingProps,D);case 15:return Cc(C,E,E.type,E.pendingProps,D);case 19:return Di(C,E,D);case 31:return bc(C,E,D);case 22:return Ao(C,E,D,E.pendingProps);case 24:return Bs(E),O=gt(In),C===null?(V=nc(),V===null&&(V=mt,W=du(),V.pooledCache=W,W.refCount++,W!==null&&(V.pooledCacheLanes|=D),V=W),E.memoizedState={parent:O,cache:V},il(E),ls(E,In,V)):((C.lanes&D)!==0&&(mu(C,E),ca(E,null,null,D),rl()),V=C.memoizedState,W=E.memoizedState,V.parent!==O?(V={parent:O,cache:O},E.memoizedState=V,E.lanes===0&&(E.memoizedState=E.updateQueue.baseState=V),ls(E,In,O)):(O=W.cache,ls(E,In,O),O!==V.cache&&ec(E,[In],D,!0))),$n(C,E,E.pendingProps.children,D),E.child;case 29:throw E.pendingProps}throw Error(o(156,E.tag))}function Gr(C){C.flags|=4}function hl(C,E,D,O,V){if((E=(C.mode&32)!==0)&&(E=!1),E){if(C.flags|=16777216,(V&335544128)===V)if(C.stateNode.complete)C.flags|=8192;else if(vn())C.flags|=8192;else throw Nr=ic,tl}else C.flags&=-16777217}function Qu(C,E){if(E.type!=="stylesheet"||(E.state.loading&4)!==0)C.flags&=-16777217;else if(C.flags|=16777216,!rp(E))if(vn())C.flags|=8192;else throw Nr=ic,tl}function ps(C,E){E!==null&&(C.flags|=4),C.flags&16384&&(E=C.tag!==22?Ii():536870912,C.lanes|=E,tn|=E)}function Hr(C,E){if(!Ot)switch(C.tailMode){case"hidden":E=C.tail;for(var D=null;E!==null;)E.alternate!==null&&(D=E),E=E.sibling;D===null?C.tail=null:D.sibling=null;break;case"collapsed":D=C.tail;for(var O=null;D!==null;)D.alternate!==null&&(O=D),D=D.sibling;O===null?E||C.tail===null?C.tail=null:C.tail.sibling=null:O.sibling=null}}function Kt(C){var E=C.alternate!==null&&C.alternate.child===C.child,D=0,O=0;if(E)for(var V=C.child;V!==null;)D|=V.lanes|V.childLanes,O|=V.subtreeFlags&65011712,O|=V.flags&65011712,V.return=C,V=V.sibling;else for(V=C.child;V!==null;)D|=V.lanes|V.childLanes,O|=V.subtreeFlags,O|=V.flags,V.return=C,V=V.sibling;return C.subtreeFlags|=O,C.childLanes=D,E}function fl(C,E,D){var O=E.pendingProps;switch(Xl(E),E.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(E),null;case 1:return Kt(E),null;case 3:return D=E.stateNode,O=null,C!==null&&(O=C.memoizedState.cache),E.memoizedState.cache!==O&&(E.flags|=2048),Ir(In),ce(),D.pendingContext&&(D.context=D.pendingContext,D.pendingContext=null),(C===null||C.child===null)&&(sa(E)?Gr(E):C===null||C.memoizedState.isDehydrated&&(E.flags&256)===0||(E.flags|=1024,Zl())),Kt(E),null;case 26:var V=E.type,W=E.memoizedState;return C===null?(Gr(E),W!==null?(Kt(E),Qu(E,W)):(Kt(E),hl(E,V,null,O,D))):W?W!==C.memoizedState?(Gr(E),Kt(E),Qu(E,W)):(Kt(E),E.flags&=-16777217):(C=C.memoizedProps,C!==O&&Gr(E),Kt(E),hl(E,V,C,O,D)),null;case 27:if(we(E),D=X.current,V=E.type,C!==null&&E.stateNode!=null)C.memoizedProps!==O&&Gr(E);else{if(!O){if(E.stateNode===null)throw Error(o(166));return Kt(E),null}C=ye.current,sa(E)?Ud(E):(C=Xf(V,O,D),E.stateNode=C,Gr(E))}return Kt(E),null;case 5:if(we(E),V=E.type,C!==null&&E.stateNode!=null)C.memoizedProps!==O&&Gr(E);else{if(!O){if(E.stateNode===null)throw Error(o(166));return Kt(E),null}if(W=ye.current,sa(E))Ud(E);else{var te=Hh(X.current);switch(W){case 1:W=te.createElementNS("http://www.w3.org/2000/svg",V);break;case 2:W=te.createElementNS("http://www.w3.org/1998/Math/MathML",V);break;default:switch(V){case"svg":W=te.createElementNS("http://www.w3.org/2000/svg",V);break;case"math":W=te.createElementNS("http://www.w3.org/1998/Math/MathML",V);break;case"script":W=te.createElement("div"),W.innerHTML="<script><\/script>",W=W.removeChild(W.firstChild);break;case"select":W=typeof O.is=="string"?te.createElement("select",{is:O.is}):te.createElement("select"),O.multiple?W.multiple=!0:O.size&&(W.size=O.size);break;default:W=typeof O.is=="string"?te.createElement(V,{is:O.is}):te.createElement(V)}}W[Fn]=E,W[ii]=O;e:for(te=E.child;te!==null;){if(te.tag===5||te.tag===6)W.appendChild(te.stateNode);else if(te.tag!==4&&te.tag!==27&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===E)break e;for(;te.sibling===null;){if(te.return===null||te.return===E)break e;te=te.return}te.sibling.return=te.return,te=te.sibling}E.stateNode=W;e:switch(bi(W,V,O),V){case"button":case"input":case"select":case"textarea":O=!!O.autoFocus;break e;case"img":O=!0;break e;default:O=!1}O&&Gr(E)}}return Kt(E),hl(E,E.type,C===null?null:C.memoizedProps,E.pendingProps,D),null;case 6:if(C&&E.stateNode!=null)C.memoizedProps!==O&&Gr(E);else{if(typeof O!="string"&&E.stateNode===null)throw Error(o(166));if(C=X.current,sa(E)){if(C=E.stateNode,D=E.memoizedProps,O=null,V=bn,V!==null)switch(V.tag){case 27:case 5:O=V.memoizedProps}C[Fn]=E,C=!!(C.nodeValue===D||O!==null&&O.suppressHydrationWarning===!0||Gf(C.nodeValue,D)),C||Mr(E,!0)}else C=Hh(C).createTextNode(O),C[Fn]=E,E.stateNode=C}return Kt(E),null;case 31:if(D=E.memoizedState,C===null||C.memoizedState!==null){if(O=sa(E),D!==null){if(C===null){if(!O)throw Error(o(318));if(C=E.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(o(557));C[Fn]=E}else Ns(),(E.flags&128)===0&&(E.memoizedState=null),E.flags|=4;Kt(E),C=!1}else D=Zl(),C!==null&&C.memoizedState!==null&&(C.memoizedState.hydrationErrors=D),C=!0;if(!C)return E.flags&256?(Rn(E),E):(Rn(E),null);if((E.flags&128)!==0)throw Error(o(558))}return Kt(E),null;case 13:if(O=E.memoizedState,C===null||C.memoizedState!==null&&C.memoizedState.dehydrated!==null){if(V=sa(E),O!==null&&O.dehydrated!==null){if(C===null){if(!V)throw Error(o(318));if(V=E.memoizedState,V=V!==null?V.dehydrated:null,!V)throw Error(o(317));V[Fn]=E}else Ns(),(E.flags&128)===0&&(E.memoizedState=null),E.flags|=4;Kt(E),V=!1}else V=Zl(),C!==null&&C.memoizedState!==null&&(C.memoizedState.hydrationErrors=V),V=!0;if(!V)return E.flags&256?(Rn(E),E):(Rn(E),null)}return Rn(E),(E.flags&128)!==0?(E.lanes=D,E):(D=O!==null,C=C!==null&&C.memoizedState!==null,D&&(O=E.child,V=null,O.alternate!==null&&O.alternate.memoizedState!==null&&O.alternate.memoizedState.cachePool!==null&&(V=O.alternate.memoizedState.cachePool.pool),W=null,O.memoizedState!==null&&O.memoizedState.cachePool!==null&&(W=O.memoizedState.cachePool.pool),W!==V&&(O.flags|=2048)),D!==C&&D&&(E.child.flags|=8192),ps(E,E.updateQueue),Kt(E),null);case 4:return ce(),C===null&&gf(E.stateNode.containerInfo),Kt(E),null;case 10:return Ir(E.type),Kt(E),null;case 19:if(ne(It),O=E.memoizedState,O===null)return Kt(E),null;if(V=(E.flags&128)!==0,W=O.rendering,W===null)if(V)Hr(O,!1);else{if(gn!==0||C!==null&&(C.flags&128)!==0)for(C=E.child;C!==null;){if(W=Vi(C),W!==null){for(E.flags|=128,Hr(O,!1),C=W.updateQueue,E.updateQueue=C,ps(E,C),E.subtreeFlags=0,C=D,D=E.child;D!==null;)ea(D,C),D=D.sibling;return ue(It,It.current&1|2),Ot&&Dr(E,O.treeForkCount),E.child}C=C.sibling}O.tail!==null&&ot()>_n&&(E.flags|=128,V=!0,Hr(O,!1),E.lanes=4194304)}else{if(!V)if(C=Vi(W),C!==null){if(E.flags|=128,V=!0,C=C.updateQueue,E.updateQueue=C,ps(E,C),Hr(O,!0),O.tail===null&&O.tailMode==="hidden"&&!W.alternate&&!Ot)return Kt(E),null}else 2*ot()-O.renderingStartTime>_n&&D!==536870912&&(E.flags|=128,V=!0,Hr(O,!1),E.lanes=4194304);O.isBackwards?(W.sibling=E.child,E.child=W):(C=O.last,C!==null?C.sibling=W:E.child=W,O.last=W)}return O.tail!==null?(C=O.tail,O.rendering=C,O.tail=C.sibling,O.renderingStartTime=ot(),C.sibling=null,D=It.current,ue(It,V?D&1|2:D&1),Ot&&Dr(E,O.treeForkCount),C):(Kt(E),null);case 22:case 23:return Rn(E),sl(),O=E.memoizedState!==null,C!==null?C.memoizedState!==null!==O&&(E.flags|=8192):O&&(E.flags|=8192),O?(D&536870912)!==0&&(E.flags&128)===0&&(Kt(E),E.subtreeFlags&6&&(E.flags|=8192)):Kt(E),D=E.updateQueue,D!==null&&ps(E,D.retryQueue),D=null,C!==null&&C.memoizedState!==null&&C.memoizedState.cachePool!==null&&(D=C.memoizedState.cachePool.pool),O=null,E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(O=E.memoizedState.cachePool.pool),O!==D&&(E.flags|=2048),C!==null&&ne(Gs),null;case 24:return D=null,C!==null&&(D=C.memoizedState.cache),E.memoizedState.cache!==D&&(E.flags|=2048),Ir(In),Kt(E),null;case 25:return null;case 30:return null}throw Error(o(156,E.tag))}function rr(C,E){switch(Xl(E),E.tag){case 1:return C=E.flags,C&65536?(E.flags=C&-65537|128,E):null;case 3:return Ir(In),ce(),C=E.flags,(C&65536)!==0&&(C&128)===0?(E.flags=C&-65537|128,E):null;case 26:case 27:case 5:return we(E),null;case 31:if(E.memoizedState!==null){if(Rn(E),E.alternate===null)throw Error(o(340));Ns()}return C=E.flags,C&65536?(E.flags=C&-65537|128,E):null;case 13:if(Rn(E),C=E.memoizedState,C!==null&&C.dehydrated!==null){if(E.alternate===null)throw Error(o(340));Ns()}return C=E.flags,C&65536?(E.flags=C&-65537|128,E):null;case 19:return ne(It),null;case 4:return ce(),null;case 10:return Ir(E.type),null;case 22:case 23:return Rn(E),sl(),C!==null&&ne(Gs),C=E.flags,C&65536?(E.flags=C&-65537|128,E):null;case 24:return Ir(In),null;case 25:return null;default:return null}}function zi(C,E){switch(Xl(E),E.tag){case 3:Ir(In),ce();break;case 26:case 27:case 5:we(E);break;case 4:ce();break;case 31:E.memoizedState!==null&&Rn(E);break;case 13:Rn(E);break;case 19:ne(It);break;case 10:Ir(E.type);break;case 22:case 23:Rn(E),sl(),C!==null&&ne(Gs);break;case 24:Ir(In)}}function sr(C,E){try{var D=E.updateQueue,O=D!==null?D.lastEffect:null;if(O!==null){var V=O.next;D=V;do{if((D.tag&C)===C){O=void 0;var W=D.create,te=D.inst;O=W(),te.destroy=O}D=D.next}while(D!==V)}}catch(ve){Gt(E,E.return,ve)}}function Zn(C,E,D){try{var O=E.updateQueue,V=O!==null?O.lastEffect:null;if(V!==null){var W=V.next;O=W;do{if((O.tag&C)===C){var te=O.inst,ve=te.destroy;if(ve!==void 0){te.destroy=void 0,V=E;var Re=D,ke=ve;try{ke()}catch(je){Gt(V,Re,je)}}}O=O.next}while(O!==W)}}catch(je){Gt(E,E.return,je)}}function vr(C){var E=C.updateQueue;if(E!==null){var D=C.stateNode;try{Kd(E,D)}catch(O){Gt(C,C.return,O)}}}function qn(C,E,D){D.props=Ws(C.type,C.memoizedProps),D.state=C.memoizedState;try{D.componentWillUnmount()}catch(O){Gt(C,E,O)}}function gs(C,E){try{var D=C.ref;if(D!==null){switch(C.tag){case 26:case 27:case 5:var O=C.stateNode;break;case 30:O=C.stateNode;break;default:O=C.stateNode}typeof D=="function"?C.refCleanup=D(O):D.current=O}}catch(V){Gt(C,E,V)}}function Jn(C,E){var D=C.ref,O=C.refCleanup;if(D!==null)if(typeof O=="function")try{O()}catch(V){Gt(C,E,V)}finally{C.refCleanup=null,C=C.alternate,C!=null&&(C.refCleanup=null)}else if(typeof D=="function")try{D(null)}catch(V){Gt(C,E,V)}else D.current=null}function pl(C){var E=C.type,D=C.memoizedProps,O=C.stateNode;try{e:switch(E){case"button":case"input":case"select":case"textarea":D.autoFocus&&O.focus();break e;case"img":D.src?O.src=D.src:D.srcSet&&(O.srcset=D.srcSet)}}catch(V){Gt(C,C.return,V)}}function Vn(C,E,D){try{var O=C.stateNode;Ap(O,C.type,D,E),O[ii]=E}catch(V){Gt(C,C.return,V)}}function an(C){return C.tag===5||C.tag===3||C.tag===26||C.tag===27&&Ra(C.type)||C.tag===4}function Mt(C){e:for(;;){for(;C.sibling===null;){if(C.return===null||an(C.return))return null;C=C.return}for(C.sibling.return=C.return,C=C.sibling;C.tag!==5&&C.tag!==6&&C.tag!==18;){if(C.tag===27&&Ra(C.type)||C.flags&2||C.child===null||C.tag===4)continue e;C.child.return=C,C=C.child}if(!(C.flags&2))return C.stateNode}}function Vr(C,E,D){var O=C.tag;if(O===5||O===6)C=C.stateNode,E?(D.nodeType===9?D.body:D.nodeName==="HTML"?D.ownerDocument.body:D).insertBefore(C,E):(E=D.nodeType===9?D.body:D.nodeName==="HTML"?D.ownerDocument.body:D,E.appendChild(C),D=D._reactRootContainer,D!=null||E.onclick!==null||(E.onclick=ns));else if(O!==4&&(O===27&&Ra(C.type)&&(D=C.stateNode,E=null),C=C.child,C!==null))for(Vr(C,E,D),C=C.sibling;C!==null;)Vr(C,E,D),C=C.sibling}function mi(C,E,D){var O=C.tag;if(O===5||O===6)C=C.stateNode,E?D.insertBefore(C,E):D.appendChild(C);else if(O!==4&&(O===27&&Ra(C.type)&&(D=C.stateNode),C=C.child,C!==null))for(mi(C,E,D),C=C.sibling;C!==null;)mi(C,E,D),C=C.sibling}function Tc(C){var E=C.stateNode,D=C.memoizedProps;try{for(var O=C.type,V=E.attributes;V.length;)E.removeAttributeNode(V[0]);bi(E,O,D),E[Fn]=C,E[ii]=D}catch(W){Gt(C,C.return,W)}}var or=!1,Qt=!1,yr=!1,kh=typeof WeakSet=="function"?WeakSet:Set,Kn=null;function hf(C,E){if(C=C.containerInfo,yf=qh,C=Bd(C),ou(C)){if("selectionStart"in C)var D={start:C.selectionStart,end:C.selectionEnd};else e:{D=(D=C.ownerDocument)&&D.defaultView||window;var O=D.getSelection&&D.getSelection();if(O&&O.rangeCount!==0){D=O.anchorNode;var V=O.anchorOffset,W=O.focusNode;O=O.focusOffset;try{D.nodeType,W.nodeType}catch{D=null;break e}var te=0,ve=-1,Re=-1,ke=0,je=0,Ke=C,He=null;t:for(;;){for(var Ue;Ke!==D||V!==0&&Ke.nodeType!==3||(ve=te+V),Ke!==W||O!==0&&Ke.nodeType!==3||(Re=te+O),Ke.nodeType===3&&(te+=Ke.nodeValue.length),(Ue=Ke.firstChild)!==null;)He=Ke,Ke=Ue;for(;;){if(Ke===C)break t;if(He===D&&++ke===V&&(ve=te),He===W&&++je===O&&(Re=te),(Ue=Ke.nextSibling)!==null)break;Ke=He,He=Ke.parentNode}Ke=Ue}D=ve===-1||Re===-1?null:{start:ve,end:Re}}else D=null}D=D||{start:0,end:0}}else D=null;for(Cf={focusedElem:C,selectionRange:D},qh=!1,Kn=E;Kn!==null;)if(E=Kn,C=E.child,(E.subtreeFlags&1028)!==0&&C!==null)C.return=E,Kn=C;else for(;Kn!==null;){switch(E=Kn,W=E.alternate,C=E.flags,E.tag){case 0:if((C&4)!==0&&(C=E.updateQueue,C=C!==null?C.events:null,C!==null))for(D=0;D<C.length;D++)V=C[D],V.ref.impl=V.nextImpl;break;case 11:case 15:break;case 1:if((C&1024)!==0&&W!==null){C=void 0,D=E,V=W.memoizedProps,W=W.memoizedState,O=D.stateNode;try{var at=Ws(D.type,V);C=O.getSnapshotBeforeUpdate(at,W),O.__reactInternalSnapshotBeforeUpdate=C}catch(pt){Gt(D,D.return,pt)}}break;case 3:if((C&1024)!==0){if(C=E.stateNode.containerInfo,D=C.nodeType,D===9)wf(C);else if(D===1)switch(C.nodeName){case"HEAD":case"HTML":case"BODY":wf(C);break;default:C.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((C&1024)!==0)throw Error(o(163))}if(C=E.sibling,C!==null){C.return=E.return,Kn=C;break}Kn=E.return}}function cn(C,E,D){var O=D.flags;switch(D.tag){case 0:case 11:case 15:cr(C,D),O&4&&sr(5,D);break;case 1:if(cr(C,D),O&4)if(C=D.stateNode,E===null)try{C.componentDidMount()}catch(te){Gt(D,D.return,te)}else{var V=Ws(D.type,E.memoizedProps);E=E.memoizedState;try{C.componentDidUpdate(V,E,C.__reactInternalSnapshotBeforeUpdate)}catch(te){Gt(D,D.return,te)}}O&64&&vr(D),O&512&&gs(D,D.return);break;case 3:if(cr(C,D),O&64&&(C=D.updateQueue,C!==null)){if(E=null,D.child!==null)switch(D.child.tag){case 27:case 5:E=D.child.stateNode;break;case 1:E=D.child.stateNode}try{Kd(C,E)}catch(te){Gt(D,D.return,te)}}break;case 27:E===null&&O&4&&Tc(D);case 26:case 5:cr(C,D),E===null&&O&4&&pl(D),O&512&&gs(D,D.return);break;case 12:cr(C,D);break;case 31:cr(C,D),O&4&&js(C,D);break;case 13:cr(C,D),O&4&&ma(C,D),O&64&&(C=D.memoizedState,C!==null&&(C=C.dehydrated,C!==null&&(D=L.bind(null,D),Ip(C,D))));break;case 22:if(O=D.memoizedState!==null||or,!O){E=E!==null&&E.memoizedState!==null||Qt,V=or;var W=Qt;or=O,(Qt=E)&&!W?vi(C,D,(D.subtreeFlags&8772)!==0):cr(C,D),or=V,Qt=W}break;case 30:break;default:cr(C,D)}}function gl(C){var E=C.alternate;E!==null&&(C.alternate=null,gl(E)),C.child=null,C.deletions=null,C.sibling=null,C.tag===5&&(E=C.stateNode,E!==null&&io(E)),C.stateNode=null,C.return=null,C.dependencies=null,C.memoizedProps=null,C.memoizedState=null,C.pendingProps=null,C.stateNode=null,C.updateQueue=null}var Wt=null,li=!1;function ar(C,E,D){for(D=D.child;D!==null;)_c(C,E,D),D=D.sibling}function _c(C,E,D){if(Xe&&typeof Xe.onCommitFiberUnmount=="function")try{Xe.onCommitFiberUnmount(bs,D)}catch{}switch(D.tag){case 26:Qt||Jn(D,E),ar(C,E,D),D.memoizedState?D.memoizedState.count--:D.stateNode&&(D=D.stateNode,D.parentNode.removeChild(D));break;case 27:Qt||Jn(D,E);var O=Wt,V=li;Ra(D.type)&&(Wt=D.stateNode,li=!1),ar(C,E,D),sd(D.stateNode),Wt=O,li=V;break;case 5:Qt||Jn(D,E);case 6:if(O=Wt,V=li,Wt=null,ar(C,E,D),Wt=O,li=V,Wt!==null)if(li)try{(Wt.nodeType===9?Wt.body:Wt.nodeName==="HTML"?Wt.ownerDocument.body:Wt).removeChild(D.stateNode)}catch(W){Gt(D,E,W)}else try{Wt.removeChild(D.stateNode)}catch(W){Gt(D,E,W)}break;case 18:Wt!==null&&(li?(C=Wt,jf(C.nodeType===9?C.body:C.nodeName==="HTML"?C.ownerDocument.body:C,D.stateNode),Nc(C)):jf(Wt,D.stateNode));break;case 4:O=Wt,V=li,Wt=D.stateNode.containerInfo,li=!0,ar(C,E,D),Wt=O,li=V;break;case 0:case 11:case 14:case 15:Zn(2,D,E),Qt||Zn(4,D,E),ar(C,E,D);break;case 1:Qt||(Jn(D,E),O=D.stateNode,typeof O.componentWillUnmount=="function"&&qn(D,E,O)),ar(C,E,D);break;case 21:ar(C,E,D);break;case 22:Qt=(O=Qt)||D.memoizedState!==null,ar(C,E,D),Qt=O;break;default:ar(C,E,D)}}function js(C,E){if(E.memoizedState===null&&(C=E.alternate,C!==null&&(C=C.memoizedState,C!==null))){C=C.dehydrated;try{Nc(C)}catch(D){Gt(E,E.return,D)}}}function ma(C,E){if(E.memoizedState===null&&(C=E.alternate,C!==null&&(C=C.memoizedState,C!==null&&(C=C.dehydrated,C!==null))))try{Nc(C)}catch(D){Gt(E,E.return,D)}}function Zu(C){switch(C.tag){case 31:case 13:case 19:var E=C.stateNode;return E===null&&(E=C.stateNode=new kh),E;case 22:return C=C.stateNode,E=C._retryCache,E===null&&(E=C._retryCache=new kh),E;default:throw Error(o(435,C.tag))}}function ms(C,E){var D=Zu(C);E.forEach(function(O){if(!D.has(O)){D.add(O);var V=G.bind(null,C,O);O.then(V,V)}})}function zn(C,E){var D=E.deletions;if(D!==null)for(var O=0;O<D.length;O++){var V=D[O],W=C,te=E,ve=te;e:for(;ve!==null;){switch(ve.tag){case 27:if(Ra(ve.type)){Wt=ve.stateNode,li=!1;break e}break;case 5:Wt=ve.stateNode,li=!1;break e;case 3:case 4:Wt=ve.stateNode.containerInfo,li=!0;break e}ve=ve.return}if(Wt===null)throw Error(o(160));_c(W,te,V),Wt=null,li=!1,W=V.alternate,W!==null&&(W.return=null),V.return=null}if(E.subtreeFlags&13886)for(E=E.child;E!==null;)$s(E,C),E=E.sibling}var lr=null;function $s(C,E){var D=C.alternate,O=C.flags;switch(C.tag){case 0:case 11:case 14:case 15:zn(E,C),Un(C),O&4&&(Zn(3,C,C.return),sr(3,C),Zn(5,C,C.return));break;case 1:zn(E,C),Un(C),O&512&&(Qt||D===null||Jn(D,D.return)),O&64&&or&&(C=C.updateQueue,C!==null&&(O=C.callbacks,O!==null&&(D=C.shared.hiddenCallbacks,C.shared.hiddenCallbacks=D===null?O:D.concat(O))));break;case 26:var V=lr;if(zn(E,C),Un(C),O&512&&(Qt||D===null||Jn(D,D.return)),O&4){var W=D!==null?D.memoizedState:null;if(O=C.memoizedState,D===null)if(O===null)if(C.stateNode===null){e:{O=C.type,D=C.memoizedProps,V=V.ownerDocument||V;t:switch(O){case"title":W=V.getElementsByTagName("title")[0],(!W||W[Jr]||W[Fn]||W.namespaceURI==="http://www.w3.org/2000/svg"||W.hasAttribute("itemprop"))&&(W=V.createElement(O),V.head.insertBefore(W,V.querySelector("head > title"))),bi(W,O,D),W[Fn]=C,On(W),O=W;break e;case"link":var te=np("link","href",V).get(O+(D.href||""));if(te){for(var ve=0;ve<te.length;ve++)if(W=te[ve],W.getAttribute("href")===(D.href==null||D.href===""?null:D.href)&&W.getAttribute("rel")===(D.rel==null?null:D.rel)&&W.getAttribute("title")===(D.title==null?null:D.title)&&W.getAttribute("crossorigin")===(D.crossOrigin==null?null:D.crossOrigin)){te.splice(ve,1);break t}}W=V.createElement(O),bi(W,O,D),V.head.appendChild(W);break;case"meta":if(te=np("meta","content",V).get(O+(D.content||""))){for(ve=0;ve<te.length;ve++)if(W=te[ve],W.getAttribute("content")===(D.content==null?null:""+D.content)&&W.getAttribute("name")===(D.name==null?null:D.name)&&W.getAttribute("property")===(D.property==null?null:D.property)&&W.getAttribute("http-equiv")===(D.httpEquiv==null?null:D.httpEquiv)&&W.getAttribute("charset")===(D.charSet==null?null:D.charSet)){te.splice(ve,1);break t}}W=V.createElement(O),bi(W,O,D),V.head.appendChild(W);break;default:throw Error(o(468,O))}W[Fn]=C,On(W),O=W}C.stateNode=O}else ip(V,C.type,C.stateNode);else C.stateNode=tp(V,O,C.memoizedProps);else W!==O?(W===null?D.stateNode!==null&&(D=D.stateNode,D.parentNode.removeChild(D)):W.count--,O===null?ip(V,C.type,C.stateNode):tp(V,O,C.memoizedProps)):O===null&&C.stateNode!==null&&Vn(C,C.memoizedProps,D.memoizedProps)}break;case 27:zn(E,C),Un(C),O&512&&(Qt||D===null||Jn(D,D.return)),D!==null&&O&4&&Vn(C,C.memoizedProps,D.memoizedProps);break;case 5:if(zn(E,C),Un(C),O&512&&(Qt||D===null||Jn(D,D.return)),C.flags&32){V=C.stateNode;try{oo(V,"")}catch(at){Gt(C,C.return,at)}}O&4&&C.stateNode!=null&&(V=C.memoizedProps,Vn(C,V,D!==null?D.memoizedProps:V)),O&1024&&(yr=!0);break;case 6:if(zn(E,C),Un(C),O&4){if(C.stateNode===null)throw Error(o(162));O=C.memoizedProps,D=C.stateNode;try{D.nodeValue=O}catch(at){Gt(C,C.return,at)}}break;case 3:if(Uh=null,V=lr,lr=Vh(E.containerInfo),zn(E,C),lr=V,Un(C),O&4&&D!==null&&D.memoizedState.isDehydrated)try{Nc(E.containerInfo)}catch(at){Gt(C,C.return,at)}yr&&(yr=!1,Dc(C));break;case 4:O=lr,lr=Vh(C.stateNode.containerInfo),zn(E,C),Un(C),lr=O;break;case 12:zn(E,C),Un(C);break;case 31:zn(E,C),Un(C),O&4&&(O=C.updateQueue,O!==null&&(C.updateQueue=null,ms(C,O)));break;case 13:zn(E,C),Un(C),C.child.flags&8192&&C.memoizedState!==null!=(D!==null&&D.memoizedState!==null)&&(va=ot()),O&4&&(O=C.updateQueue,O!==null&&(C.updateQueue=null,ms(C,O)));break;case 22:V=C.memoizedState!==null;var Re=D!==null&&D.memoizedState!==null,ke=or,je=Qt;if(or=ke||V,Qt=je||Re,zn(E,C),Qt=je,or=ke,Un(C),O&8192)e:for(E=C.stateNode,E._visibility=V?E._visibility&-2:E._visibility|1,V&&(D===null||Re||or||Qt||zr(C)),D=null,E=C;;){if(E.tag===5||E.tag===26){if(D===null){Re=D=E;try{if(W=Re.stateNode,V)te=W.style,typeof te.setProperty=="function"?te.setProperty("display","none","important"):te.display="none";else{ve=Re.stateNode;var Ke=Re.memoizedProps.style,He=Ke!=null&&Ke.hasOwnProperty("display")?Ke.display:null;ve.style.display=He==null||typeof He=="boolean"?"":(""+He).trim()}}catch(at){Gt(Re,Re.return,at)}}}else if(E.tag===6){if(D===null){Re=E;try{Re.stateNode.nodeValue=V?"":Re.memoizedProps}catch(at){Gt(Re,Re.return,at)}}}else if(E.tag===18){if(D===null){Re=E;try{var Ue=Re.stateNode;V?$f(Ue,!0):$f(Re.stateNode,!1)}catch(at){Gt(Re,Re.return,at)}}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===C)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===C)break e;for(;E.sibling===null;){if(E.return===null||E.return===C)break e;D===E&&(D=null),E=E.return}D===E&&(D=null),E.sibling.return=E.return,E=E.sibling}O&4&&(O=C.updateQueue,O!==null&&(D=O.retryQueue,D!==null&&(O.retryQueue=null,ms(C,D))));break;case 19:zn(E,C),Un(C),O&4&&(O=C.updateQueue,O!==null&&(C.updateQueue=null,ms(C,O)));break;case 30:break;case 21:break;default:zn(E,C),Un(C)}}function Un(C){var E=C.flags;if(E&2){try{for(var D,O=C.return;O!==null;){if(an(O)){D=O;break}O=O.return}if(D==null)throw Error(o(160));switch(D.tag){case 27:var V=D.stateNode,W=Mt(C);mi(C,W,V);break;case 5:var te=D.stateNode;D.flags&32&&(oo(te,""),D.flags&=-33);var ve=Mt(C);mi(C,ve,te);break;case 3:case 4:var Re=D.stateNode.containerInfo,ke=Mt(C);Vr(C,ke,Re);break;default:throw Error(o(161))}}catch(je){Gt(C,C.return,je)}C.flags&=-3}E&4096&&(C.flags&=-4097)}function Dc(C){if(C.subtreeFlags&1024)for(C=C.child;C!==null;){var E=C;Dc(E),E.tag===5&&E.flags&1024&&E.stateNode.reset(),C=C.sibling}}function cr(C,E){if(E.subtreeFlags&8772)for(E=E.child;E!==null;)cn(C,E.alternate,E),E=E.sibling}function zr(C){for(C=C.child;C!==null;){var E=C;switch(E.tag){case 0:case 11:case 14:case 15:Zn(4,E,E.return),zr(E);break;case 1:Jn(E,E.return);var D=E.stateNode;typeof D.componentWillUnmount=="function"&&qn(E,E.return,D),zr(E);break;case 27:sd(E.stateNode);case 26:case 5:Jn(E,E.return),zr(E);break;case 22:E.memoizedState===null&&zr(E);break;case 30:zr(E);break;default:zr(E)}C=C.sibling}}function vi(C,E,D){for(D=D&&(E.subtreeFlags&8772)!==0,E=E.child;E!==null;){var O=E.alternate,V=C,W=E,te=W.flags;switch(W.tag){case 0:case 11:case 15:vi(V,W,D),sr(4,W);break;case 1:if(vi(V,W,D),O=W,V=O.stateNode,typeof V.componentDidMount=="function")try{V.componentDidMount()}catch(ke){Gt(O,O.return,ke)}if(O=W,V=O.updateQueue,V!==null){var ve=O.stateNode;try{var Re=V.shared.hiddenCallbacks;if(Re!==null)for(V.shared.hiddenCallbacks=null,V=0;V<Re.length;V++)ua(Re[V],ve)}catch(ke){Gt(O,O.return,ke)}}D&&te&64&&vr(W),gs(W,W.return);break;case 27:Tc(W);case 26:case 5:vi(V,W,D),D&&O===null&&te&4&&pl(W),gs(W,W.return);break;case 12:vi(V,W,D);break;case 31:vi(V,W,D),D&&te&4&&js(V,W);break;case 13:vi(V,W,D),D&&te&4&&ma(V,W);break;case 22:W.memoizedState===null&&vi(V,W,D),gs(W,W.return);break;case 30:break;default:vi(V,W,D)}E=E.sibling}}function qs(C,E){var D=null;C!==null&&C.memoizedState!==null&&C.memoizedState.cachePool!==null&&(D=C.memoizedState.cachePool.pool),C=null,E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(C=E.memoizedState.cachePool.pool),C!==D&&(C!=null&&C.refCount++,D!=null&&go(D))}function Do(C,E){C=null,E.alternate!==null&&(C=E.alternate.memoizedState.cache),E=E.memoizedState.cache,E!==C&&(E.refCount++,C!=null&&go(C))}function ei(C,E,D,O){if(E.subtreeFlags&10256)for(E=E.child;E!==null;)Ju(C,E,D,O),E=E.sibling}function Ju(C,E,D,O){var V=E.flags;switch(E.tag){case 0:case 11:case 15:ei(C,E,D,O),V&2048&&sr(9,E);break;case 1:ei(C,E,D,O);break;case 3:ei(C,E,D,O),V&2048&&(C=null,E.alternate!==null&&(C=E.alternate.memoizedState.cache),E=E.memoizedState.cache,E!==C&&(E.refCount++,C!=null&&go(C)));break;case 12:if(V&2048){ei(C,E,D,O),C=E.stateNode;try{var W=E.memoizedProps,te=W.id,ve=W.onPostCommit;typeof ve=="function"&&ve(te,E.alternate===null?"mount":"update",C.passiveEffectDuration,-0)}catch(Re){Gt(E,E.return,Re)}}else ei(C,E,D,O);break;case 31:ei(C,E,D,O);break;case 13:ei(C,E,D,O);break;case 23:break;case 22:W=E.stateNode,te=E.alternate,E.memoizedState!==null?W._visibility&2?ei(C,E,D,O):Ur(C,E):W._visibility&2?ei(C,E,D,O):(W._visibility|=2,ti(C,E,D,O,(E.subtreeFlags&10256)!==0||!1)),V&2048&&qs(te,E);break;case 24:ei(C,E,D,O),V&2048&&Do(E.alternate,E);break;default:ei(C,E,D,O)}}function ti(C,E,D,O,V){for(V=V&&((E.subtreeFlags&10256)!==0||!1),E=E.child;E!==null;){var W=C,te=E,ve=D,Re=O,ke=te.flags;switch(te.tag){case 0:case 11:case 15:ti(W,te,ve,Re,V),sr(8,te);break;case 23:break;case 22:var je=te.stateNode;te.memoizedState!==null?je._visibility&2?ti(W,te,ve,Re,V):Ur(W,te):(je._visibility|=2,ti(W,te,ve,Re,V)),V&&ke&2048&&qs(te.alternate,te);break;case 24:ti(W,te,ve,Re,V),V&&ke&2048&&Do(te.alternate,te);break;default:ti(W,te,ve,Re,V)}E=E.sibling}}function Ur(C,E){if(E.subtreeFlags&10256)for(E=E.child;E!==null;){var D=C,O=E,V=O.flags;switch(O.tag){case 22:Ur(D,O),V&2048&&qs(O.alternate,O);break;case 24:Ur(D,O),V&2048&&Do(O.alternate,O);break;default:Ur(D,O)}E=E.sibling}}var Po=8192;function Ui(C,E,D){if(C.subtreeFlags&Po)for(C=C.child;C!==null;)Pc(C,E,D),C=C.sibling}function Pc(C,E,D){switch(C.tag){case 26:Ui(C,E,D),C.flags&Po&&C.memoizedState!==null&&$p(D,lr,C.memoizedState,C.memoizedProps);break;case 5:Ui(C,E,D);break;case 3:case 4:var O=lr;lr=Vh(C.stateNode.containerInfo),Ui(C,E,D),lr=O;break;case 22:C.memoizedState===null&&(O=C.alternate,O!==null&&O.memoizedState!==null?(O=Po,Po=16777216,Ui(C,E,D),Po=O):Ui(C,E,D));break;default:Ui(C,E,D)}}function Mo(C){var E=C.alternate;if(E!==null&&(C=E.child,C!==null)){E.child=null;do E=C.sibling,C.sibling=null,C=E;while(C!==null)}}function Ks(C){var E=C.deletions;if((C.flags&16)!==0){if(E!==null)for(var D=0;D<E.length;D++){var O=E[D];Kn=O,wn(O,C)}Mo(C)}if(C.subtreeFlags&10256)for(C=C.child;C!==null;)Pi(C),C=C.sibling}function Pi(C){switch(C.tag){case 0:case 11:case 15:Ks(C),C.flags&2048&&Zn(9,C,C.return);break;case 3:Ks(C);break;case 12:Ks(C);break;case 22:var E=C.stateNode;C.memoizedState!==null&&E._visibility&2&&(C.return===null||C.return.tag!==13)?(E._visibility&=-3,yi(C)):Ks(C);break;default:Ks(C)}}function yi(C){var E=C.deletions;if((C.flags&16)!==0){if(E!==null)for(var D=0;D<E.length;D++){var O=E[D];Kn=O,wn(O,C)}Mo(C)}for(C=C.child;C!==null;){switch(E=C,E.tag){case 0:case 11:case 15:Zn(8,E,E.return),yi(E);break;case 22:D=E.stateNode,D._visibility&2&&(D._visibility&=-3,yi(E));break;default:yi(E)}C=C.sibling}}function wn(C,E){for(;Kn!==null;){var D=Kn;switch(D.tag){case 0:case 11:case 15:Zn(8,D,E);break;case 23:case 22:if(D.memoizedState!==null&&D.memoizedState.cachePool!==null){var O=D.memoizedState.cachePool.pool;O!=null&&O.refCount++}break;case 24:go(D.memoizedState.cache)}if(O=D.child,O!==null)O.return=D,Kn=O;else e:for(D=C;Kn!==null;){O=Kn;var V=O.sibling,W=O.return;if(gl(O),O===D){Kn=null;break e}if(V!==null){V.return=W,Kn=V;break e}Kn=W}}}var vs={getCacheForType:function(C){var E=gt(In),D=E.data.get(C);return D===void 0&&(D=C(),E.data.set(C,D)),D},cacheSignal:function(){return gt(In).controller.signal}},St=typeof WeakMap=="function"?WeakMap:Map,ct=0,mt=null,xt=null,bt=0,Lt=0,ci=null,ur=!1,Cr=!1,ed=!1,Wi=0,gn=0,Wr=0,Ys=0,ml=0,Ci=0,tn=0,Fo=null,En=null,xn=!1,va=0,td=0,_n=1/0,mn=null,Dn=null,jt=0,ji=null,ya=null,dr=0,Ca=0,Sa=null,vl=null,Xs=0,Oo=null;function $i(){return(ct&2)!==0&&bt!==0?bt&-bt:ae.T!==null?Ve():ws()}function Tt(){if(Ci===0)if((bt&536870912)===0||Ot){var C=Fi;Fi<<=1,(Fi&3932160)===0&&(Fi=262144),Ci=C}else Ci=536870912;return C=Ai.current,C!==null&&(C.flags|=32),Ci}function Rt(C,E,D){(C===mt&&(Lt===2||Lt===9)||C.cancelPendingCommit!==null)&&(Zs(C,0),Nn(C,bt,Ci,!1)),pr(C,D),((ct&2)===0||C!==mt)&&(C===mt&&((ct&2)===0&&(Ys|=D),gn===4&&Nn(C,bt,Ci,!1)),Je(C))}function _t(C,E,D){if((ct&6)!==0)throw Error(o(327));var O=!D&&(E&127)===0&&(E&C.expiredLanes)===0||Oi(C,E),V=O?yl(C,E):Si(C,E,!0),W=O;do{if(V===0){Cr&&!O&&Nn(C,E,0,!1);break}else{if(D=C.current.alternate,W&&!$t(D)){V=Si(C,E,!1),W=!1;continue}if(V===2){if(W=E,C.errorRecoveryDisabledLanes&W)var te=0;else te=C.pendingLanes&-536870913,te=te!==0?te:te&536870912?536870912:0;if(te!==0){E=te;e:{var ve=C;V=Fo;var Re=ve.current.memoizedState.isDehydrated;if(Re&&(Zs(ve,te).flags|=256),te=Si(ve,te,!1),te!==2){if(ed&&!Re){ve.errorRecoveryDisabledLanes|=W,Ys|=W,V=4;break e}W=En,En=V,W!==null&&(En===null?En=W:En.push.apply(En,W))}V=te}if(W=!1,V!==2)continue}}if(V===1){Zs(C,0),Nn(C,E,0,!0);break}e:{switch(O=C,W=V,W){case 0:case 1:throw Error(o(345));case 4:if((E&4194048)!==E)break;case 6:Nn(O,E,Ci,!ur);break e;case 2:En=null;break;case 3:case 5:break;default:throw Error(o(329))}if((E&62914560)===E&&(V=va+300-ot(),10<V)){if(Nn(O,E,Ci,!ur),Sn(O,0,!0)!==0)break e;dr=E,O.timeoutHandle=Uf(Ft.bind(null,O,D,En,mn,xn,E,Ci,Ys,tn,ur,W,"Throttled",-0,0),V);break e}Ft(O,D,En,mn,xn,E,Ci,Ys,tn,ur,W,null,-0,0)}}break}while(!0);Je(C)}function Ft(C,E,D,O,V,W,te,ve,Re,ke,je,Ke,He,Ue){if(C.timeoutHandle=-1,Ke=E.subtreeFlags,Ke&8192||(Ke&16785408)===16785408){Ke={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ns},Pc(E,W,Ke);var at=(W&62914560)===W?va-ot():(W&4194048)===W?td-ot():0;if(at=qp(Ke,at),at!==null){dr=W,C.cancelPendingCommit=at(Cs.bind(null,C,E,W,D,O,V,te,ve,Re,je,Ke,null,He,Ue)),Nn(C,W,te,!ke);return}}Cs(C,E,W,D,O,V,te,ve,Re)}function $t(C){for(var E=C;;){var D=E.tag;if((D===0||D===11||D===15)&&E.flags&16384&&(D=E.updateQueue,D!==null&&(D=D.stores,D!==null)))for(var O=0;O<D.length;O++){var V=D[O],W=V.getSnapshot;V=V.value;try{if(!di(W(),V))return!1}catch{return!1}}if(D=E.child,E.subtreeFlags&16384&&D!==null)D.return=E,E=D;else{if(E===C)break;for(;E.sibling===null;){if(E.return===null||E.return===C)return!0;E=E.return}E.sibling.return=E.return,E=E.sibling}}return!0}function Nn(C,E,D,O){E&=~ml,E&=~Ys,C.suspendedLanes|=E,C.pingedLanes&=~E,O&&(C.warmLanes|=E),O=C.expirationTimes;for(var V=E;0<V;){var W=31-Pe(V),te=1<<W;O[W]=-1,V&=~te}D!==0&&br(C,D,E)}function Sr(){return(ct&6)===0?(rt(0),!1):!0}function Qs(){if(xt!==null){if(Lt===0)var C=xt.return;else C=xt,Or=ks=null,xu(C),So=null,bo=0,C=xt;for(;C!==null;)zi(C.alternate,C),C=C.return;xt=null}}function Zs(C,E){var D=C.timeoutHandle;D!==-1&&(C.timeoutHandle=-1,Dp(D)),D=C.cancelPendingCommit,D!==null&&(C.cancelPendingCommit=null,D()),dr=0,Qs(),mt=C,xt=D=Ei(C.current,null),bt=E,Lt=0,ci=null,ur=!1,Cr=Oi(C,E),ed=!1,tn=Ci=ml=Ys=Wr=gn=0,En=Fo=null,xn=!1,(E&8)!==0&&(E|=E&32);var O=C.entangledLanes;if(O!==0)for(C=C.entanglements,O&=E;0<O;){var V=31-Pe(O),W=1<<V;E|=C[V],O&=~W}return Wi=E,Qa(),D}function jr(C,E){Ct=null,ae.H=pa,E===mo||E===Et?(E=yo(),Lt=3):E===tl?(E=yo(),Lt=4):Lt=E===yc?8:E!==null&&typeof E=="object"&&typeof E.then=="function"?6:1,ci=E,xt===null&&(gn=1,vc(C,Bi(E,C.current)))}function vn(){var C=Ai.current;return C===null?!0:(bt&4194048)===bt?gi===null:(bt&62914560)===bt||(bt&536870912)!==0?C===gi:!1}function ys(){var C=ae.H;return ae.H=pa,C===null?pa:C}function Js(){var C=ae.A;return ae.A=vs,C}function ba(){gn=4,ur||(bt&4194048)!==bt&&Ai.current!==null||(Cr=!0),(Wr&134217727)===0&&(Ys&134217727)===0||mt===null||Nn(mt,bt,Ci,!1)}function Si(C,E,D){var O=ct;ct|=2;var V=ys(),W=Js();(mt!==C||bt!==E)&&(mn=null,Zs(C,E)),E=!1;var te=gn;e:do try{if(Lt!==0&&xt!==null){var ve=xt,Re=ci;switch(Lt){case 8:Qs(),te=6;break e;case 3:case 2:case 9:case 6:Ai.current===null&&(E=!0);var ke=Lt;if(Lt=0,ci=null,Io(C,ve,Re,ke),D&&Cr){te=0;break e}break;default:ke=Lt,Lt=0,ci=null,Io(C,ve,Re,ke)}}wa(),te=gn;break}catch(je){jr(C,je)}while(!0);return E&&C.shellSuspendCounter++,Or=ks=null,ct=O,ae.H=V,ae.A=W,xt===null&&(mt=null,bt=0,Qa()),te}function wa(){for(;xt!==null;)Mc(xt)}function yl(C,E){var D=ct;ct|=2;var O=ys(),V=Js();mt!==C||bt!==E?(mn=null,_n=ot()+500,Zs(C,E)):Cr=Oi(C,E);e:do try{if(Lt!==0&&xt!==null){E=xt;var W=ci;t:switch(Lt){case 1:Lt=0,ci=null,Io(C,E,W,1);break;case 2:case 9:if(Ri(W)){Lt=0,ci=null,Cl(E);break}E=function(){Lt!==2&&Lt!==9||mt!==C||(Lt=7),Je(C)},W.then(E,E);break e;case 3:Lt=7;break e;case 4:Lt=5;break e;case 7:Ri(W)?(Lt=0,ci=null,Cl(E)):(Lt=0,ci=null,Io(C,E,W,7));break;case 5:var te=null;switch(xt.tag){case 26:te=xt.memoizedState;case 5:case 27:var ve=xt;if(te?rp(te):ve.stateNode.complete){Lt=0,ci=null;var Re=ve.sibling;if(Re!==null)xt=Re;else{var ke=ve.return;ke!==null?(xt=ke,eo(ke)):xt=null}break t}}Lt=0,ci=null,Io(C,E,W,5);break;case 6:Lt=0,ci=null,Io(C,E,W,6);break;case 8:Qs(),gn=6;break e;default:throw Error(o(462))}}Mi();break}catch(je){jr(C,je)}while(!0);return Or=ks=null,ae.H=O,ae.A=V,ct=D,xt!==null?0:(mt=null,bt=0,Qa(),gn)}function Mi(){for(;xt!==null&&!nt();)Mc(xt)}function Mc(C){var E=Ac(C.alternate,C,Wi);C.memoizedProps=C.pendingProps,E===null?eo(C):xt=E}function Cl(C){var E=C,D=E.alternate;switch(E.tag){case 15:case 0:E=ul(D,E,E.pendingProps,E.type,void 0,bt);break;case 11:E=ul(D,E,E.pendingProps,E.type.render,E.ref,bt);break;case 5:xu(E);default:zi(D,E),E=xt=ea(E,Wi),E=Ac(D,E,Wi)}C.memoizedProps=C.pendingProps,E===null?eo(C):xt=E}function Io(C,E,D,O){Or=ks=null,xu(E),So=null,bo=0;var V=E.return;try{if(Hn(C,V,E,D,bt)){gn=1,vc(C,Bi(D,C.current)),xt=null;return}}catch(W){if(V!==null)throw xt=V,W;gn=1,vc(C,Bi(D,C.current)),xt=null;return}E.flags&32768?(Ot||O===1?C=!0:Cr||(bt&536870912)!==0?C=!1:(ur=C=!0,(O===2||O===9||O===3||O===6)&&(O=Ai.current,O!==null&&O.tag===13&&(O.flags|=16384))),Sl(E,C)):eo(E)}function eo(C){var E=C;do{if((E.flags&32768)!==0){Sl(E,ur);return}C=E.return;var D=fl(E.alternate,E,Wi);if(D!==null){xt=D;return}if(E=E.sibling,E!==null){xt=E;return}xt=E=C}while(E!==null);gn===0&&(gn=5)}function Sl(C,E){do{var D=rr(C.alternate,C);if(D!==null){D.flags&=32767,xt=D;return}if(D=C.return,D!==null&&(D.flags|=32768,D.subtreeFlags=0,D.deletions=null),!E&&(C=C.sibling,C!==null)){xt=C;return}xt=C=D}while(C!==null);gn=6,xt=null}function Cs(C,E,D,O,V,W,te,ve,Re){C.cancelPendingCommit=null;do Ea();while(jt!==0);if((ct&6)!==0)throw Error(o(327));if(E!==null){if(E===C.current)throw Error(o(177));if(W=E.lanes|E.childLanes,W|=Wn,Yr(C,D,W,te,ve,Re),C===mt&&(xt=mt=null,bt=0),ya=E,ji=C,dr=D,Ca=W,Sa=V,vl=O,(E.subtreeFlags&10256)!==0||(E.flags&10256)!==0?(C.callbackNode=null,C.callbackPriority=0,q(Dt,function(){return Fc(),null})):(C.callbackNode=null,C.callbackPriority=0),O=(E.flags&13878)!==0,(E.subtreeFlags&13878)!==0||O){O=ae.T,ae.T=null,V=oe.p,oe.p=2,te=ct,ct|=4;try{hf(C,E,D)}finally{ct=te,oe.p=V,ae.T=O}}jt=1,kn(),Ss(),Lo()}}function kn(){if(jt===1){jt=0;var C=ji,E=ya,D=(E.flags&13878)!==0;if((E.subtreeFlags&13878)!==0||D){D=ae.T,ae.T=null;var O=oe.p;oe.p=2;var V=ct;ct|=4;try{$s(E,C);var W=Cf,te=Bd(C.containerInfo),ve=W.focusedElem,Re=W.selectionRange;if(te!==ve&&ve&&ve.ownerDocument&&Yt(ve.ownerDocument.documentElement,ve)){if(Re!==null&&ou(ve)){var ke=Re.start,je=Re.end;if(je===void 0&&(je=ke),"selectionStart"in ve)ve.selectionStart=ke,ve.selectionEnd=Math.min(je,ve.value.length);else{var Ke=ve.ownerDocument||document,He=Ke&&Ke.defaultView||window;if(He.getSelection){var Ue=He.getSelection(),at=ve.textContent.length,pt=Math.min(Re.start,at),Jt=Re.end===void 0?pt:Math.min(Re.end,at);!Ue.extend&&pt>Jt&&(te=Jt,Jt=pt,pt=te);var Me=Qo(ve,pt),Te=Qo(ve,Jt);if(Me&&Te&&(Ue.rangeCount!==1||Ue.anchorNode!==Me.node||Ue.anchorOffset!==Me.offset||Ue.focusNode!==Te.node||Ue.focusOffset!==Te.offset)){var Ne=Ke.createRange();Ne.setStart(Me.node,Me.offset),Ue.removeAllRanges(),pt>Jt?(Ue.addRange(Ne),Ue.extend(Te.node,Te.offset)):(Ne.setEnd(Te.node,Te.offset),Ue.addRange(Ne))}}}}for(Ke=[],Ue=ve;Ue=Ue.parentNode;)Ue.nodeType===1&&Ke.push({element:Ue,left:Ue.scrollLeft,top:Ue.scrollTop});for(typeof ve.focus=="function"&&ve.focus(),ve=0;ve<Ke.length;ve++){var qe=Ke[ve];qe.element.scrollLeft=qe.left,qe.element.scrollTop=qe.top}}qh=!!yf,Cf=yf=null}finally{ct=V,oe.p=O,ae.T=D}}C.current=E,jt=2}}function Ss(){if(jt===2){jt=0;var C=ji,E=ya,D=(E.flags&8772)!==0;if((E.subtreeFlags&8772)!==0||D){D=ae.T,ae.T=null;var O=oe.p;oe.p=2;var V=ct;ct|=4;try{cn(C,E.alternate,E)}finally{ct=V,oe.p=O,ae.T=D}}jt=3}}function Lo(){if(jt===4||jt===3){jt=0,it();var C=ji,E=ya,D=dr,O=vl;(E.subtreeFlags&10256)!==0||(E.flags&10256)!==0?jt=5:(jt=0,ya=ji=null,$r(C,C.pendingLanes));var V=C.pendingLanes;if(V===0&&(Dn=null),qi(D),E=E.stateNode,Xe&&typeof Xe.onCommitFiberRoot=="function")try{Xe.onCommitFiberRoot(bs,E,void 0,(E.current.flags&128)===128)}catch{}if(O!==null){E=ae.T,V=oe.p,oe.p=2,ae.T=null;try{for(var W=C.onRecoverableError,te=0;te<O.length;te++){var ve=O[te];W(ve.value,{componentStack:ve.stack})}}finally{ae.T=E,oe.p=V}}(dr&3)!==0&&Ea(),Je(C),V=C.pendingLanes,(D&261930)!==0&&(V&42)!==0?C===Oo?Xs++:(Xs=0,Oo=C):Xs=0,rt(0)}}function $r(C,E){(C.pooledCacheLanes&=E)===0&&(E=C.pooledCache,E!=null&&(C.pooledCache=null,go(E)))}function Ea(){return kn(),Ss(),Lo(),Fc()}function Fc(){if(jt!==5)return!1;var C=ji,E=Ca;Ca=0;var D=qi(dr),O=ae.T,V=oe.p;try{oe.p=32>D?32:D,ae.T=null,D=Sa,Sa=null;var W=ji,te=dr;if(jt=0,ya=ji=null,dr=0,(ct&6)!==0)throw Error(o(331));var ve=ct;if(ct|=4,Pi(W.current),Ju(W,W.current,te,D),ct=ve,rt(0,!1),Xe&&typeof Xe.onPostCommitFiberRoot=="function")try{Xe.onPostCommitFiberRoot(bs,W)}catch{}return!0}finally{oe.p=V,ae.T=O,$r(C,E)}}function nd(C,E,D){E=Bi(D,E),E=$u(C.stateNode,E,2),C=Hs(C,E,2),C!==null&&(pr(C,2),Je(C))}function Gt(C,E,D){if(C.tag===3)nd(C,C,D);else for(;E!==null;){if(E.tag===3){nd(E,C,D);break}else if(E.tag===1){var O=E.stateNode;if(typeof E.type.getDerivedStateFromError=="function"||typeof O.componentDidCatch=="function"&&(Dn===null||!Dn.has(O))){C=Bi(D,C),D=qu(2),O=Hs(E,D,2),O!==null&&(Fh(D,O,E,C),pr(O,2),Je(O));break}}E=E.return}}function bl(C,E,D){var O=C.pingCache;if(O===null){O=C.pingCache=new St;var V=new Set;O.set(E,V)}else V=O.get(E),V===void 0&&(V=new Set,O.set(E,V));V.has(D)||(ed=!0,V.add(D),C=A.bind(null,C,E,D),E.then(C,C))}function A(C,E,D){var O=C.pingCache;O!==null&&O.delete(E),C.pingedLanes|=C.suspendedLanes&D,C.warmLanes&=~D,mt===C&&(bt&D)===D&&(gn===4||gn===3&&(bt&62914560)===bt&&300>ot()-va?(ct&2)===0&&Zs(C,0):ml|=D,tn===bt&&(tn=0)),Je(C)}function T(C,E){E===0&&(E=Ii()),C=hi(C,E),C!==null&&(pr(C,E),Je(C))}function L(C){var E=C.memoizedState,D=0;E!==null&&(D=E.retryLane),T(C,D)}function G(C,E){var D=0;switch(C.tag){case 31:case 13:var O=C.stateNode,V=C.memoizedState;V!==null&&(D=V.retryLane);break;case 19:O=C.stateNode;break;case 22:O=C.stateNode._retryCache;break;default:throw Error(o(314))}O!==null&&O.delete(E),T(C,D)}function q(C,E){return Ze(C,E)}var Y=null,ge=null,Ae=!1,ze=!1,Qe=!1,tt=0;function Je(C){C!==ge&&C.next===null&&(ge===null?Y=ge=C:ge=ge.next=C),ze=!0,Ae||(Ae=!0,Oe())}function rt(C,E){if(!Qe&&ze){Qe=!0;do for(var D=!1,O=Y;O!==null;){if(C!==0){var V=O.pendingLanes;if(V===0)var W=0;else{var te=O.suspendedLanes,ve=O.pingedLanes;W=(1<<31-Pe(42|C)+1)-1,W&=V&~(te&~ve),W=W&201326741?W&201326741|1:W?W|2:0}W!==0&&(D=!0,Ge(O,W))}else W=bt,W=Sn(O,O===mt?W:0,O.cancelPendingCommit!==null||O.timeoutHandle!==-1),(W&3)===0||Oi(O,W)||(D=!0,Ge(O,W));O=O.next}while(D);Qe=!1}}function yt(){Yn()}function Yn(){ze=Ae=!1;var C=0;tt!==0&&_p()&&(C=tt);for(var E=ot(),D=null,O=Y;O!==null;){var V=O.next,W=xa(O,E);W===0?(O.next=null,D===null?Y=V:D.next=V,V===null&&(ge=D)):(D=O,(C!==0||(W&3)!==0)&&(ze=!0)),O=V}jt!==0&&jt!==5||rt(C),tt!==0&&(tt=0)}function xa(C,E){for(var D=C.suspendedLanes,O=C.pingedLanes,V=C.expirationTimes,W=C.pendingLanes&-62914561;0<W;){var te=31-Pe(W),ve=1<<te,Re=V[te];Re===-1?((ve&D)===0||(ve&O)!==0)&&(V[te]=fr(ve,E)):Re<=E&&(C.expiredLanes|=ve),W&=~ve}if(E=mt,D=bt,D=Sn(C,C===E?D:0,C.cancelPendingCommit!==null||C.timeoutHandle!==-1),O=C.callbackNode,D===0||C===E&&(Lt===2||Lt===9)||C.cancelPendingCommit!==null)return O!==null&&O!==null&&Ye(O),C.callbackNode=null,C.callbackPriority=0;if((D&3)===0||Oi(C,D)){if(E=D&-D,E===C.callbackPriority)return E;switch(O!==null&&Ye(O),qi(D)){case 2:case 8:D=en;break;case 32:D=Dt;break;case 268435456:D=Bn;break;default:D=Dt}return O=no.bind(null,C),D=Ze(D,O),C.callbackPriority=E,C.callbackNode=D,E}return O!==null&&O!==null&&Ye(O),C.callbackPriority=2,C.callbackNode=null,2}function no(C,E){if(jt!==0&&jt!==5)return C.callbackNode=null,C.callbackPriority=0,null;var D=C.callbackNode;if(Ea()&&C.callbackNode!==D)return null;var O=bt;return O=Sn(C,C===mt?O:0,C.cancelPendingCommit!==null||C.timeoutHandle!==-1),O===0?null:(_t(C,O,E),xa(C,ot()),C.callbackNode!=null&&C.callbackNode===D?no.bind(null,C):null)}function Ge(C,E){if(Ea())return null;_t(C,E,!0)}function Oe(){Pp(function(){(ct&6)!==0?Ze(nn,yt):Yn()})}function Ve(){if(tt===0){var C=cs;C===0&&(C=Cn,Cn<<=1,(Cn&261888)===0&&(Cn=256)),tt=C}return tt}function et(C){return C==null||typeof C=="symbol"||typeof C=="boolean"?null:typeof C=="function"?C:Na(""+C)}function ht(C,E){var D=E.ownerDocument.createElement("input");return D.name=E.name,D.value=E.value,C.id&&D.setAttribute("form",C.id),E.parentNode.insertBefore(D,E),C=new FormData(C),D.parentNode.removeChild(D),C}function yn(C,E,D,O,V){if(E==="submit"&&D&&D.stateNode===V){var W=et((V[ii]||null).action),te=O.submitter;te&&(E=(E=te[ii]||null)?et(E.formAction):te.getAttribute("formAction"),E!==null&&(W=E,te=null));var ve=new Ha("action","action",null,O,V);C.push({event:ve,listeners:[{instance:null,listener:function(){if(O.defaultPrevented){if(tt!==0){var Re=te?ht(V,te):new FormData(V);Bu(D,{pending:!0,data:Re,method:V.method,action:W},null,Re)}}else typeof W=="function"&&(ve.preventDefault(),Re=te?ht(V,te):new FormData(V),Bu(D,{pending:!0,data:Re,method:V.method,action:W},W,Re))},currentTarget:V}]})}}for(var ft=0;ft<Ya.length;ft++){var kt=Ya[ft],Xn=kt.toLowerCase(),Ht=kt[0].toUpperCase()+kt.slice(1);Qi(Xn,"on"+Ht)}Qi(jl,"onAnimationEnd"),Qi(Ka,"onAnimationIteration"),Qi(lu,"onAnimationStart"),Qi("dblclick","onDoubleClick"),Qi("focusin","onFocus"),Qi("focusout","onBlur"),Qi(Hd,"onTransitionRun"),Qi(rf,"onTransitionStart"),Qi(Vd,"onTransitionCancel"),Qi(cu,"onTransitionEnd"),Li("onMouseEnter",["mouseout","mouseover"]),Li("onMouseLeave",["mouseout","mouseover"]),Li("onPointerEnter",["pointerout","pointerover"]),Li("onPointerLeave",["pointerout","pointerover"]),Ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ts("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ff=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hr));function Lf(C,E){E=(E&4)!==0;for(var D=0;D<C.length;D++){var O=C[D],V=O.event;O=O.listeners;e:{var W=void 0;if(E)for(var te=O.length-1;0<=te;te--){var ve=O[te],Re=ve.instance,ke=ve.currentTarget;if(ve=ve.listener,Re!==W&&V.isPropagationStopped())break e;W=ve,V.currentTarget=ke;try{W(V)}catch(je){Xa(je)}V.currentTarget=null,W=Re}else for(te=0;te<O.length;te++){if(ve=O[te],Re=ve.instance,ke=ve.currentTarget,ve=ve.listener,Re!==W&&V.isPropagationStopped())break e;W=ve,V.currentTarget=ke;try{W(V)}catch(je){Xa(je)}V.currentTarget=null,W=Re}}}}function Nt(C,E){var D=E[wr];D===void 0&&(D=E[wr]=new Set);var O=C+"__bubble";D.has(O)||(Nf(E,C,2,!1),D.add(O))}function pf(C,E,D){var O=0;E&&(O|=4),Nf(D,C,O,E)}var Bh="_reactListening"+Math.random().toString(36).slice(2);function gf(C){if(!C[Bh]){C[Bh]=!0,es.forEach(function(D){D!=="selectionchange"&&(ff.has(D)||pf(D,!1,C),pf(D,!0,C))});var E=C.nodeType===9?C:C.ownerDocument;E===null||E[Bh]||(E[Bh]=!0,pf("selectionchange",!1,E))}}function Nf(C,E,D,O){switch(dp(E)){case 2:var V=Xp;break;case 8:V=Qp;break;default:V=Pf}D=V.bind(null,E,D,C),V=void 0,!Wc||E!=="touchstart"&&E!=="touchmove"&&E!=="wheel"||(V=!0),O?V!==void 0?C.addEventListener(E,D,{capture:!0,passive:V}):C.addEventListener(E,D,!0):V!==void 0?C.addEventListener(E,D,{passive:V}):C.addEventListener(E,D,!1)}function mf(C,E,D,O,V){var W=O;if((E&1)===0&&(E&2)===0&&O!==null)e:for(;;){if(O===null)return;var te=O.tag;if(te===3||te===4){var ve=O.stateNode.containerInfo;if(ve===V)break;if(te===4)for(te=O.return;te!==null;){var Re=te.tag;if((Re===3||Re===4)&&te.stateNode.containerInfo===V)return;te=te.return}for(;ve!==null;){if(te=ro(ve),te===null)return;if(Re=te.tag,Re===5||Re===6||Re===26||Re===27){O=W=te;continue e}ve=ve.parentNode}}O=O.return}Uc(function(){var ke=W,je=Fl(D),Ke=[];e:{var He=Xi.get(C);if(He!==void 0){var Ue=Ha,at=C;switch(C){case"keypress":if(Ga(D)===0)break e;case"keydown":case"keyup":Ue=co;break;case"focusin":at="focus",Ue=Nl;break;case"focusout":at="blur",Ue=Nl;break;case"beforeblur":case"afterblur":Ue=Nl;break;case"click":if(D.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ue=jc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ue=Sd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ue=Ad;break;case jl:case Ka:case lu:Ue=ef;break;case cu:Ue=nf;break;case"scroll":case"scrollend":Ue=yd;break;case"wheel":Ue=_d;break;case"copy":case"cut":case"paste":Ue=wd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ue=Kc;break;case"toggle":case"beforetoggle":Ue=Pd}var pt=(E&4)!==0,Jt=!pt&&(C==="scroll"||C==="scrollend"),Me=pt?He!==null?He+"Capture":null:He;pt=[];for(var Te=ke,Ne;Te!==null;){var qe=Te;if(Ne=qe.stateNode,qe=qe.tag,qe!==5&&qe!==26&&qe!==27||Ne===null||Me===null||(qe=zo(Te,Me),qe!=null&&pt.push(rd(Te,qe,Ne))),Jt)break;Te=Te.return}0<pt.length&&(He=new Ue(He,at,null,D,je),Ke.push({event:He,listeners:pt}))}}if((E&7)===0){e:{if(He=C==="mouseover"||C==="pointerover",Ue=C==="mouseout"||C==="pointerout",He&&D!==Ml&&(at=D.relatedTarget||D.fromElement)&&(ro(at)||at[xs]))break e;if((Ue||He)&&(He=je.window===je?je:(He=je.ownerDocument)?He.defaultView||He.parentWindow:window,Ue?(at=D.relatedTarget||D.toElement,Ue=ke,at=at?ro(at):null,at!==null&&(Jt=d(at),pt=at.tag,at!==Jt||pt!==5&&pt!==27&&pt!==6)&&(at=null)):(Ue=null,at=ke),Ue!==at)){if(pt=jc,qe="onMouseLeave",Me="onMouseEnter",Te="mouse",(C==="pointerout"||C==="pointerover")&&(pt=Kc,qe="onPointerLeave",Me="onPointerEnter",Te="pointer"),Jt=Ue==null?He:Go(Ue),Ne=at==null?He:Go(at),He=new pt(qe,Te+"leave",Ue,D,je),He.target=Jt,He.relatedTarget=Ne,qe=null,ro(je)===ke&&(pt=new pt(Me,Te+"enter",at,D,je),pt.target=Ne,pt.relatedTarget=Jt,qe=pt),Jt=qe,Ue&&at)t:{for(pt=Ep,Me=Ue,Te=at,Ne=0,qe=Me;qe;qe=pt(qe))Ne++;qe=0;for(var dt=Te;dt;dt=pt(dt))qe++;for(;0<Ne-qe;)Me=pt(Me),Ne--;for(;0<qe-Ne;)Te=pt(Te),qe--;for(;Ne--;){if(Me===Te||Te!==null&&Me===Te.alternate){pt=Me;break t}Me=pt(Me),Te=pt(Te)}pt=null}else pt=null;Ue!==null&&kf(Ke,He,Ue,pt,!1),at!==null&&Jt!==null&&kf(Ke,Jt,at,pt,!0)}}e:{if(He=ke?Go(ke):window,Ue=He.nodeName&&He.nodeName.toLowerCase(),Ue==="select"||Ue==="input"&&He.type==="file")var zt=tu;else if(eu(He))if(Rr)zt=kd;else{zt=ru;var lt=Ld}else Ue=He.nodeName,!Ue||Ue.toLowerCase()!=="input"||He.type!=="checkbox"&&He.type!=="radio"?ke&&Pl(ke.elementType)&&(zt=tu):zt=Nd;if(zt&&(zt=zt(C,ke))){Ul(Ke,zt,D,je);break e}lt&&lt(C,He,ke),C==="focusout"&&ke&&He.type==="number"&&ke.memoizedProps.value!=null&&gr(He,"number",He.value)}switch(lt=ke?Go(ke):window,C){case"focusin":(eu(lt)||lt.contentEditable==="true")&&(Ar=lt,Tr=ke,Zo=null);break;case"focusout":Zo=Tr=Ar=null;break;case"mousedown":Wl=!0;break;case"contextmenu":case"mouseup":case"dragend":Wl=!1,Jo(Ke,D,je);break;case"selectionchange":if(Gd)break;case"keydown":case"keyup":Jo(Ke,D,je)}var At;if(uo)e:{switch(C){case"compositionstart":var Bt="onCompositionStart";break e;case"compositionend":Bt="onCompositionEnd";break e;case"compositionupdate":Bt="onCompositionUpdate";break e}Bt=void 0}else ho?zl(C,D)&&(Bt="onCompositionEnd"):C==="keydown"&&D.keyCode===229&&(Bt="onCompositionStart");Bt&&(Xc&&D.locale!=="ko"&&(ho||Bt!=="onCompositionStart"?Bt==="onCompositionEnd"&&ho&&(At=Ba()):(ki=je,Il="value"in ki?ki.value:ki.textContent,ho=!0)),lt=Gh(ke,Bt),0<lt.length&&(Bt=new kl(Bt,C,null,D,je),Ke.push({event:Bt,listeners:lt}),At?Bt.data=At:(At=Qc(D),At!==null&&(Bt.data=At)))),(At=Vl?Od(C,D):Zc(C,D))&&(Bt=Gh(ke,"onBeforeInput"),0<Bt.length&&(lt=new kl("onBeforeInput","beforeinput",null,D,je),Ke.push({event:lt,listeners:Bt}),lt.data=At)),yn(Ke,C,ke,D,je)}Lf(Ke,E)})}function rd(C,E,D){return{instance:C,listener:E,currentTarget:D}}function Gh(C,E){for(var D=E+"Capture",O=[];C!==null;){var V=C,W=V.stateNode;if(V=V.tag,V!==5&&V!==26&&V!==27||W===null||(V=zo(C,D),V!=null&&O.unshift(rd(C,V,W)),V=zo(C,E),V!=null&&O.push(rd(C,V,W))),C.tag===3)return O;C=C.return}return[]}function Ep(C){if(C===null)return null;do C=C.return;while(C&&C.tag!==5&&C.tag!==27);return C||null}function kf(C,E,D,O,V){for(var W=E._reactName,te=[];D!==null&&D!==O;){var ve=D,Re=ve.alternate,ke=ve.stateNode;if(ve=ve.tag,Re!==null&&Re===O)break;ve!==5&&ve!==26&&ve!==27||ke===null||(Re=ke,V?(ke=zo(D,W),ke!=null&&te.unshift(rd(D,ke,Re))):V||(ke=zo(D,W),ke!=null&&te.push(rd(D,ke,Re)))),D=D.return}te.length!==0&&C.push({event:E,listeners:te})}var xp=/\r\n?/g,Rp=/\u0000|\uFFFD/g;function Bf(C){return(typeof C=="string"?C:""+C).replace(xp,`
`).replace(Rp,"")}function Gf(C,E){return E=Bf(E),Bf(C)===E}function Zt(C,E,D,O,V,W){switch(D){case"children":typeof O=="string"?E==="body"||E==="textarea"&&O===""||oo(C,O):(typeof O=="number"||typeof O=="bigint")&&E!=="body"&&oo(C,""+O);break;case"className":Ia(C,"class",O);break;case"tabIndex":Ia(C,"tabindex",O);break;case"dir":case"role":case"viewBox":case"width":case"height":Ia(C,D,O);break;case"style":Hc(C,O,W);break;case"data":if(E!=="object"){Ia(C,"data",O);break}case"src":case"href":if(O===""&&(E!=="a"||D!=="href")){C.removeAttribute(D);break}if(O==null||typeof O=="function"||typeof O=="symbol"||typeof O=="boolean"){C.removeAttribute(D);break}O=Na(""+O),C.setAttribute(D,O);break;case"action":case"formAction":if(typeof O=="function"){C.setAttribute(D,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof W=="function"&&(D==="formAction"?(E!=="input"&&Zt(C,E,"name",V.name,V,null),Zt(C,E,"formEncType",V.formEncType,V,null),Zt(C,E,"formMethod",V.formMethod,V,null),Zt(C,E,"formTarget",V.formTarget,V,null)):(Zt(C,E,"encType",V.encType,V,null),Zt(C,E,"method",V.method,V,null),Zt(C,E,"target",V.target,V,null)));if(O==null||typeof O=="symbol"||typeof O=="boolean"){C.removeAttribute(D);break}O=Na(""+O),C.setAttribute(D,O);break;case"onClick":O!=null&&(C.onclick=ns);break;case"onScroll":O!=null&&Nt("scroll",C);break;case"onScrollEnd":O!=null&&Nt("scrollend",C);break;case"dangerouslySetInnerHTML":if(O!=null){if(typeof O!="object"||!("__html"in O))throw Error(o(61));if(D=O.__html,D!=null){if(V.children!=null)throw Error(o(60));C.innerHTML=D}}break;case"multiple":C.multiple=O&&typeof O!="function"&&typeof O!="symbol";break;case"muted":C.muted=O&&typeof O!="function"&&typeof O!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(O==null||typeof O=="function"||typeof O=="boolean"||typeof O=="symbol"){C.removeAttribute("xlink:href");break}D=Na(""+O),C.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",D);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":O!=null&&typeof O!="function"&&typeof O!="symbol"?C.setAttribute(D,""+O):C.removeAttribute(D);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":O&&typeof O!="function"&&typeof O!="symbol"?C.setAttribute(D,""):C.removeAttribute(D);break;case"capture":case"download":O===!0?C.setAttribute(D,""):O!==!1&&O!=null&&typeof O!="function"&&typeof O!="symbol"?C.setAttribute(D,O):C.removeAttribute(D);break;case"cols":case"rows":case"size":case"span":O!=null&&typeof O!="function"&&typeof O!="symbol"&&!isNaN(O)&&1<=O?C.setAttribute(D,O):C.removeAttribute(D);break;case"rowSpan":case"start":O==null||typeof O=="function"||typeof O=="symbol"||isNaN(O)?C.removeAttribute(D):C.setAttribute(D,O);break;case"popover":Nt("beforetoggle",C),Nt("toggle",C),Ho(C,"popover",O);break;case"xlinkActuate":Er(C,"http://www.w3.org/1999/xlink","xlink:actuate",O);break;case"xlinkArcrole":Er(C,"http://www.w3.org/1999/xlink","xlink:arcrole",O);break;case"xlinkRole":Er(C,"http://www.w3.org/1999/xlink","xlink:role",O);break;case"xlinkShow":Er(C,"http://www.w3.org/1999/xlink","xlink:show",O);break;case"xlinkTitle":Er(C,"http://www.w3.org/1999/xlink","xlink:title",O);break;case"xlinkType":Er(C,"http://www.w3.org/1999/xlink","xlink:type",O);break;case"xmlBase":Er(C,"http://www.w3.org/XML/1998/namespace","xml:base",O);break;case"xmlLang":Er(C,"http://www.w3.org/XML/1998/namespace","xml:lang",O);break;case"xmlSpace":Er(C,"http://www.w3.org/XML/1998/namespace","xml:space",O);break;case"is":Ho(C,"is",O);break;case"innerText":case"textContent":break;default:(!(2<D.length)||D[0]!=="o"&&D[0]!=="O"||D[1]!=="n"&&D[1]!=="N")&&(D=md.get(D)||D,Ho(C,D,O))}}function vf(C,E,D,O,V,W){switch(D){case"style":Hc(C,O,W);break;case"dangerouslySetInnerHTML":if(O!=null){if(typeof O!="object"||!("__html"in O))throw Error(o(61));if(D=O.__html,D!=null){if(V.children!=null)throw Error(o(60));C.innerHTML=D}}break;case"children":typeof O=="string"?oo(C,O):(typeof O=="number"||typeof O=="bigint")&&oo(C,""+O);break;case"onScroll":O!=null&&Nt("scroll",C);break;case"onScrollEnd":O!=null&&Nt("scrollend",C);break;case"onClick":O!=null&&(C.onclick=ns);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xl.hasOwnProperty(D))e:{if(D[0]==="o"&&D[1]==="n"&&(V=D.endsWith("Capture"),E=D.slice(2,V?D.length-7:void 0),W=C[ii]||null,W=W!=null?W[D]:null,typeof W=="function"&&C.removeEventListener(E,W,V),typeof O=="function")){typeof W!="function"&&W!==null&&(D in C?C[D]=null:C.hasAttribute(D)&&C.removeAttribute(D)),C.addEventListener(E,O,V);break e}D in C?C[D]=O:O===!0?C.setAttribute(D,""):Ho(C,D,O)}}}function bi(C,E,D){switch(E){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nt("error",C),Nt("load",C);var O=!1,V=!1,W;for(W in D)if(D.hasOwnProperty(W)){var te=D[W];if(te!=null)switch(W){case"src":O=!0;break;case"srcSet":V=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,E));default:Zt(C,E,W,te,D,null)}}V&&Zt(C,E,"srcSet",D.srcSet,D,null),O&&Zt(C,E,"src",D.src,D,null);return;case"input":Nt("invalid",C);var ve=W=te=V=null,Re=null,ke=null;for(O in D)if(D.hasOwnProperty(O)){var je=D[O];if(je!=null)switch(O){case"name":V=je;break;case"type":te=je;break;case"checked":Re=je;break;case"defaultChecked":ke=je;break;case"value":W=je;break;case"defaultValue":ve=je;break;case"children":case"dangerouslySetInnerHTML":if(je!=null)throw Error(o(137,E));break;default:Zt(C,E,O,je,D,null)}}Tl(C,W,ve,Re,ke,te,V,!1);return;case"select":Nt("invalid",C),O=te=W=null;for(V in D)if(D.hasOwnProperty(V)&&(ve=D[V],ve!=null))switch(V){case"value":W=ve;break;case"defaultValue":te=ve;break;case"multiple":O=ve;default:Zt(C,E,V,ve,D,null)}E=W,D=te,C.multiple=!!O,E!=null?ts(C,!!O,E,!1):D!=null&&ts(C,!!O,D,!0);return;case"textarea":Nt("invalid",C),W=V=O=null;for(te in D)if(D.hasOwnProperty(te)&&(ve=D[te],ve!=null))switch(te){case"value":O=ve;break;case"defaultValue":V=ve;break;case"children":W=ve;break;case"dangerouslySetInnerHTML":if(ve!=null)throw Error(o(91));break;default:Zt(C,E,te,ve,D,null)}Dl(C,O,V,W);return;case"option":for(Re in D)if(D.hasOwnProperty(Re)&&(O=D[Re],O!=null))switch(Re){case"selected":C.selected=O&&typeof O!="function"&&typeof O!="symbol";break;default:Zt(C,E,Re,O,D,null)}return;case"dialog":Nt("beforetoggle",C),Nt("toggle",C),Nt("cancel",C),Nt("close",C);break;case"iframe":case"object":Nt("load",C);break;case"video":case"audio":for(O=0;O<hr.length;O++)Nt(hr[O],C);break;case"image":Nt("error",C),Nt("load",C);break;case"details":Nt("toggle",C);break;case"embed":case"source":case"link":Nt("error",C),Nt("load",C);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ke in D)if(D.hasOwnProperty(ke)&&(O=D[ke],O!=null))switch(ke){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,E));default:Zt(C,E,ke,O,D,null)}return;default:if(Pl(E)){for(je in D)D.hasOwnProperty(je)&&(O=D[je],O!==void 0&&vf(C,E,je,O,D,void 0));return}}for(ve in D)D.hasOwnProperty(ve)&&(O=D[ve],O!=null&&Zt(C,E,ve,O,D,null))}function Ap(C,E,D,O){switch(E){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var V=null,W=null,te=null,ve=null,Re=null,ke=null,je=null;for(Ue in D){var Ke=D[Ue];if(D.hasOwnProperty(Ue)&&Ke!=null)switch(Ue){case"checked":break;case"value":break;case"defaultValue":Re=Ke;default:O.hasOwnProperty(Ue)||Zt(C,E,Ue,null,O,Ke)}}for(var He in O){var Ue=O[He];if(Ke=D[He],O.hasOwnProperty(He)&&(Ue!=null||Ke!=null))switch(He){case"type":W=Ue;break;case"name":V=Ue;break;case"checked":ke=Ue;break;case"defaultChecked":je=Ue;break;case"value":te=Ue;break;case"defaultValue":ve=Ue;break;case"children":case"dangerouslySetInnerHTML":if(Ue!=null)throw Error(o(137,E));break;default:Ue!==Ke&&Zt(C,E,He,Ue,O,Ke)}}Vo(C,te,ve,Re,ke,je,W,V);return;case"select":Ue=te=ve=He=null;for(W in D)if(Re=D[W],D.hasOwnProperty(W)&&Re!=null)switch(W){case"value":break;case"multiple":Ue=Re;default:O.hasOwnProperty(W)||Zt(C,E,W,null,O,Re)}for(V in O)if(W=O[V],Re=D[V],O.hasOwnProperty(V)&&(W!=null||Re!=null))switch(V){case"value":He=W;break;case"defaultValue":ve=W;break;case"multiple":te=W;default:W!==Re&&Zt(C,E,V,W,O,Re)}E=ve,D=te,O=Ue,He!=null?ts(C,!!D,He,!1):!!O!=!!D&&(E!=null?ts(C,!!D,E,!0):ts(C,!!D,D?[]:"",!1));return;case"textarea":Ue=He=null;for(ve in D)if(V=D[ve],D.hasOwnProperty(ve)&&V!=null&&!O.hasOwnProperty(ve))switch(ve){case"value":break;case"children":break;default:Zt(C,E,ve,null,O,V)}for(te in O)if(V=O[te],W=D[te],O.hasOwnProperty(te)&&(V!=null||W!=null))switch(te){case"value":He=V;break;case"defaultValue":Ue=V;break;case"children":break;case"dangerouslySetInnerHTML":if(V!=null)throw Error(o(91));break;default:V!==W&&Zt(C,E,te,V,O,W)}_l(C,He,Ue);return;case"option":for(var at in D)if(He=D[at],D.hasOwnProperty(at)&&He!=null&&!O.hasOwnProperty(at))switch(at){case"selected":C.selected=!1;break;default:Zt(C,E,at,null,O,He)}for(Re in O)if(He=O[Re],Ue=D[Re],O.hasOwnProperty(Re)&&He!==Ue&&(He!=null||Ue!=null))switch(Re){case"selected":C.selected=He&&typeof He!="function"&&typeof He!="symbol";break;default:Zt(C,E,Re,He,O,Ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pt in D)He=D[pt],D.hasOwnProperty(pt)&&He!=null&&!O.hasOwnProperty(pt)&&Zt(C,E,pt,null,O,He);for(ke in O)if(He=O[ke],Ue=D[ke],O.hasOwnProperty(ke)&&He!==Ue&&(He!=null||Ue!=null))switch(ke){case"children":case"dangerouslySetInnerHTML":if(He!=null)throw Error(o(137,E));break;default:Zt(C,E,ke,He,O,Ue)}return;default:if(Pl(E)){for(var Jt in D)He=D[Jt],D.hasOwnProperty(Jt)&&He!==void 0&&!O.hasOwnProperty(Jt)&&vf(C,E,Jt,void 0,O,He);for(je in O)He=O[je],Ue=D[je],!O.hasOwnProperty(je)||He===Ue||He===void 0&&Ue===void 0||vf(C,E,je,He,O,Ue);return}}for(var Me in D)He=D[Me],D.hasOwnProperty(Me)&&He!=null&&!O.hasOwnProperty(Me)&&Zt(C,E,Me,null,O,He);for(Ke in O)He=O[Ke],Ue=D[Ke],!O.hasOwnProperty(Ke)||He===Ue||He==null&&Ue==null||Zt(C,E,Ke,He,O,Ue)}function Hf(C){switch(C){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Tp(){if(typeof performance.getEntriesByType=="function"){for(var C=0,E=0,D=performance.getEntriesByType("resource"),O=0;O<D.length;O++){var V=D[O],W=V.transferSize,te=V.initiatorType,ve=V.duration;if(W&&ve&&Hf(te)){for(te=0,ve=V.responseEnd,O+=1;O<D.length;O++){var Re=D[O],ke=Re.startTime;if(ke>ve)break;var je=Re.transferSize,Ke=Re.initiatorType;je&&Hf(Ke)&&(Re=Re.responseEnd,te+=je*(Re<ve?1:(ve-ke)/(Re-ke)))}if(--O,E+=8*(W+te)/(V.duration/1e3),C++,10<C)break}}if(0<C)return E/C/1e6}return navigator.connection&&(C=navigator.connection.downlink,typeof C=="number")?C:5}var yf=null,Cf=null;function Hh(C){return C.nodeType===9?C:C.ownerDocument}function Vf(C){switch(C){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zf(C,E){if(C===0)switch(E){case"svg":return 1;case"math":return 2;default:return 0}return C===1&&E==="foreignObject"?0:C}function Sf(C,E){return C==="textarea"||C==="noscript"||typeof E.children=="string"||typeof E.children=="number"||typeof E.children=="bigint"||typeof E.dangerouslySetInnerHTML=="object"&&E.dangerouslySetInnerHTML!==null&&E.dangerouslySetInnerHTML.__html!=null}var bf=null;function _p(){var C=window.event;return C&&C.type==="popstate"?C===bf?!1:(bf=C,!0):(bf=null,!1)}var Uf=typeof setTimeout=="function"?setTimeout:void 0,Dp=typeof clearTimeout=="function"?clearTimeout:void 0,Wf=typeof Promise=="function"?Promise:void 0,Pp=typeof queueMicrotask=="function"?queueMicrotask:typeof Wf<"u"?function(C){return Wf.resolve(null).then(C).catch(Mp)}:Uf;function Mp(C){setTimeout(function(){throw C})}function Ra(C){return C==="head"}function jf(C,E){var D=E,O=0;do{var V=D.nextSibling;if(C.removeChild(D),V&&V.nodeType===8)if(D=V.data,D==="/$"||D==="/&"){if(O===0){C.removeChild(V),Nc(E);return}O--}else if(D==="$"||D==="$?"||D==="$~"||D==="$!"||D==="&")O++;else if(D==="html")sd(C.ownerDocument.documentElement);else if(D==="head"){D=C.ownerDocument.head,sd(D);for(var W=D.firstChild;W;){var te=W.nextSibling,ve=W.nodeName;W[Jr]||ve==="SCRIPT"||ve==="STYLE"||ve==="LINK"&&W.rel.toLowerCase()==="stylesheet"||D.removeChild(W),W=te}}else D==="body"&&sd(C.ownerDocument.body);D=V}while(D);Nc(E)}function $f(C,E){var D=C;C=0;do{var O=D.nextSibling;if(D.nodeType===1?E?(D._stashedDisplay=D.style.display,D.style.display="none"):(D.style.display=D._stashedDisplay||"",D.getAttribute("style")===""&&D.removeAttribute("style")):D.nodeType===3&&(E?(D._stashedText=D.nodeValue,D.nodeValue=""):D.nodeValue=D._stashedText||""),O&&O.nodeType===8)if(D=O.data,D==="/$"){if(C===0)break;C--}else D!=="$"&&D!=="$?"&&D!=="$~"&&D!=="$!"||C++;D=O}while(D)}function wf(C){var E=C.firstChild;for(E&&E.nodeType===10&&(E=E.nextSibling);E;){var D=E;switch(E=E.nextSibling,D.nodeName){case"HTML":case"HEAD":case"BODY":wf(D),io(D);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(D.rel.toLowerCase()==="stylesheet")continue}C.removeChild(D)}}function Fp(C,E,D,O){for(;C.nodeType===1;){var V=D;if(C.nodeName.toLowerCase()!==E.toLowerCase()){if(!O&&(C.nodeName!=="INPUT"||C.type!=="hidden"))break}else if(O){if(!C[Jr])switch(E){case"meta":if(!C.hasAttribute("itemprop"))break;return C;case"link":if(W=C.getAttribute("rel"),W==="stylesheet"&&C.hasAttribute("data-precedence"))break;if(W!==V.rel||C.getAttribute("href")!==(V.href==null||V.href===""?null:V.href)||C.getAttribute("crossorigin")!==(V.crossOrigin==null?null:V.crossOrigin)||C.getAttribute("title")!==(V.title==null?null:V.title))break;return C;case"style":if(C.hasAttribute("data-precedence"))break;return C;case"script":if(W=C.getAttribute("src"),(W!==(V.src==null?null:V.src)||C.getAttribute("type")!==(V.type==null?null:V.type)||C.getAttribute("crossorigin")!==(V.crossOrigin==null?null:V.crossOrigin))&&W&&C.hasAttribute("async")&&!C.hasAttribute("itemprop"))break;return C;default:return C}}else if(E==="input"&&C.type==="hidden"){var W=V.name==null?null:""+V.name;if(V.type==="hidden"&&C.getAttribute("name")===W)return C}else return C;if(C=qr(C.nextSibling),C===null)break}return null}function Op(C,E,D){if(E==="")return null;for(;C.nodeType!==3;)if((C.nodeType!==1||C.nodeName!=="INPUT"||C.type!=="hidden")&&!D||(C=qr(C.nextSibling),C===null))return null;return C}function qf(C,E){for(;C.nodeType!==8;)if((C.nodeType!==1||C.nodeName!=="INPUT"||C.type!=="hidden")&&!E||(C=qr(C.nextSibling),C===null))return null;return C}function Ef(C){return C.data==="$?"||C.data==="$~"}function xf(C){return C.data==="$!"||C.data==="$?"&&C.ownerDocument.readyState!=="loading"}function Ip(C,E){var D=C.ownerDocument;if(C.data==="$~")C._reactRetry=E;else if(C.data!=="$?"||D.readyState!=="loading")E();else{var O=function(){E(),D.removeEventListener("DOMContentLoaded",O)};D.addEventListener("DOMContentLoaded",O),C._reactRetry=O}}function qr(C){for(;C!=null;C=C.nextSibling){var E=C.nodeType;if(E===1||E===3)break;if(E===8){if(E=C.data,E==="$"||E==="$!"||E==="$?"||E==="$~"||E==="&"||E==="F!"||E==="F")break;if(E==="/$"||E==="/&")return null}}return C}var Rf=null;function Kf(C){C=C.nextSibling;for(var E=0;C;){if(C.nodeType===8){var D=C.data;if(D==="/$"||D==="/&"){if(E===0)return qr(C.nextSibling);E--}else D!=="$"&&D!=="$!"&&D!=="$?"&&D!=="$~"&&D!=="&"||E++}C=C.nextSibling}return null}function Yf(C){C=C.previousSibling;for(var E=0;C;){if(C.nodeType===8){var D=C.data;if(D==="$"||D==="$!"||D==="$?"||D==="$~"||D==="&"){if(E===0)return C;E--}else D!=="/$"&&D!=="/&"||E++}C=C.previousSibling}return null}function Xf(C,E,D){switch(E=Hh(D),C){case"html":if(C=E.documentElement,!C)throw Error(o(452));return C;case"head":if(C=E.head,!C)throw Error(o(453));return C;case"body":if(C=E.body,!C)throw Error(o(454));return C;default:throw Error(o(451))}}function sd(C){for(var E=C.attributes;E.length;)C.removeAttributeNode(E[0]);io(C)}var Kr=new Map,Qf=new Set;function Vh(C){return typeof C.getRootNode=="function"?C.getRootNode():C.nodeType===9?C:C.ownerDocument}var No=oe.d;oe.d={f:Lp,r:Np,D:kp,C:Bp,L:Gp,m:Hp,X:zp,S:Vp,M:Up};function Lp(){var C=No.f(),E=Sr();return C||E}function Np(C){var E=so(C);E!==null&&E.tag===5&&E.type==="form"?Eh(E):No.r(C)}var Oc=typeof document>"u"?null:document;function Zf(C,E,D){var O=Oc;if(O&&typeof E=="string"&&E){var V=si(E);V='link[rel="'+C+'"][href="'+V+'"]',typeof D=="string"&&(V+='[crossorigin="'+D+'"]'),Qf.has(V)||(Qf.add(V),C={rel:C,crossOrigin:D,href:E},O.querySelector(V)===null&&(E=O.createElement("link"),bi(E,"link",C),On(E),O.head.appendChild(E)))}}function kp(C){No.D(C),Zf("dns-prefetch",C,null)}function Bp(C,E){No.C(C,E),Zf("preconnect",C,E)}function Gp(C,E,D){No.L(C,E,D);var O=Oc;if(O&&C&&E){var V='link[rel="preload"][as="'+si(E)+'"]';E==="image"&&D&&D.imageSrcSet?(V+='[imagesrcset="'+si(D.imageSrcSet)+'"]',typeof D.imageSizes=="string"&&(V+='[imagesizes="'+si(D.imageSizes)+'"]')):V+='[href="'+si(C)+'"]';var W=V;switch(E){case"style":W=Ic(C);break;case"script":W=Lc(C)}Kr.has(W)||(C=R({rel:"preload",href:E==="image"&&D&&D.imageSrcSet?void 0:C,as:E},D),Kr.set(W,C),O.querySelector(V)!==null||E==="style"&&O.querySelector(od(W))||E==="script"&&O.querySelector(ad(W))||(E=O.createElement("link"),bi(E,"link",C),On(E),O.head.appendChild(E)))}}function Hp(C,E){No.m(C,E);var D=Oc;if(D&&C){var O=E&&typeof E.as=="string"?E.as:"script",V='link[rel="modulepreload"][as="'+si(O)+'"][href="'+si(C)+'"]',W=V;switch(O){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":W=Lc(C)}if(!Kr.has(W)&&(C=R({rel:"modulepreload",href:C},E),Kr.set(W,C),D.querySelector(V)===null)){switch(O){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(D.querySelector(ad(W)))return}O=D.createElement("link"),bi(O,"link",C),On(O),D.head.appendChild(O)}}}function Vp(C,E,D){No.S(C,E,D);var O=Oc;if(O&&C){var V=As(O).hoistableStyles,W=Ic(C);E=E||"default";var te=V.get(W);if(!te){var ve={loading:0,preload:null};if(te=O.querySelector(od(W)))ve.loading=5;else{C=R({rel:"stylesheet",href:C,"data-precedence":E},D),(D=Kr.get(W))&&Af(C,D);var Re=te=O.createElement("link");On(Re),bi(Re,"link",C),Re._p=new Promise(function(ke,je){Re.onload=ke,Re.onerror=je}),Re.addEventListener("load",function(){ve.loading|=1}),Re.addEventListener("error",function(){ve.loading|=2}),ve.loading|=4,zh(te,E,O)}te={type:"stylesheet",instance:te,count:1,state:ve},V.set(W,te)}}}function zp(C,E){No.X(C,E);var D=Oc;if(D&&C){var O=As(D).hoistableScripts,V=Lc(C),W=O.get(V);W||(W=D.querySelector(ad(V)),W||(C=R({src:C,async:!0},E),(E=Kr.get(V))&&Tf(C,E),W=D.createElement("script"),On(W),bi(W,"link",C),D.head.appendChild(W)),W={type:"script",instance:W,count:1,state:null},O.set(V,W))}}function Up(C,E){No.M(C,E);var D=Oc;if(D&&C){var O=As(D).hoistableScripts,V=Lc(C),W=O.get(V);W||(W=D.querySelector(ad(V)),W||(C=R({src:C,async:!0,type:"module"},E),(E=Kr.get(V))&&Tf(C,E),W=D.createElement("script"),On(W),bi(W,"link",C),D.head.appendChild(W)),W={type:"script",instance:W,count:1,state:null},O.set(V,W))}}function Jf(C,E,D,O){var V=(V=X.current)?Vh(V):null;if(!V)throw Error(o(446));switch(C){case"meta":case"title":return null;case"style":return typeof D.precedence=="string"&&typeof D.href=="string"?(E=Ic(D.href),D=As(V).hoistableStyles,O=D.get(E),O||(O={type:"style",instance:null,count:0,state:null},D.set(E,O)),O):{type:"void",instance:null,count:0,state:null};case"link":if(D.rel==="stylesheet"&&typeof D.href=="string"&&typeof D.precedence=="string"){C=Ic(D.href);var W=As(V).hoistableStyles,te=W.get(C);if(te||(V=V.ownerDocument||V,te={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},W.set(C,te),(W=V.querySelector(od(C)))&&!W._p&&(te.instance=W,te.state.loading=5),Kr.has(C)||(D={rel:"preload",as:"style",href:D.href,crossOrigin:D.crossOrigin,integrity:D.integrity,media:D.media,hrefLang:D.hrefLang,referrerPolicy:D.referrerPolicy},Kr.set(C,D),W||Wp(V,C,D,te.state))),E&&O===null)throw Error(o(528,""));return te}if(E&&O!==null)throw Error(o(529,""));return null;case"script":return E=D.async,D=D.src,typeof D=="string"&&E&&typeof E!="function"&&typeof E!="symbol"?(E=Lc(D),D=As(V).hoistableScripts,O=D.get(E),O||(O={type:"script",instance:null,count:0,state:null},D.set(E,O)),O):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,C))}}function Ic(C){return'href="'+si(C)+'"'}function od(C){return'link[rel="stylesheet"]['+C+"]"}function ep(C){return R({},C,{"data-precedence":C.precedence,precedence:null})}function Wp(C,E,D,O){C.querySelector('link[rel="preload"][as="style"]['+E+"]")?O.loading=1:(E=C.createElement("link"),O.preload=E,E.addEventListener("load",function(){return O.loading|=1}),E.addEventListener("error",function(){return O.loading|=2}),bi(E,"link",D),On(E),C.head.appendChild(E))}function Lc(C){return'[src="'+si(C)+'"]'}function ad(C){return"script[async]"+C}function tp(C,E,D){if(E.count++,E.instance===null)switch(E.type){case"style":var O=C.querySelector('style[data-href~="'+si(D.href)+'"]');if(O)return E.instance=O,On(O),O;var V=R({},D,{"data-href":D.href,"data-precedence":D.precedence,href:null,precedence:null});return O=(C.ownerDocument||C).createElement("style"),On(O),bi(O,"style",V),zh(O,D.precedence,C),E.instance=O;case"stylesheet":V=Ic(D.href);var W=C.querySelector(od(V));if(W)return E.state.loading|=4,E.instance=W,On(W),W;O=ep(D),(V=Kr.get(V))&&Af(O,V),W=(C.ownerDocument||C).createElement("link"),On(W);var te=W;return te._p=new Promise(function(ve,Re){te.onload=ve,te.onerror=Re}),bi(W,"link",O),E.state.loading|=4,zh(W,D.precedence,C),E.instance=W;case"script":return W=Lc(D.src),(V=C.querySelector(ad(W)))?(E.instance=V,On(V),V):(O=D,(V=Kr.get(W))&&(O=R({},D),Tf(O,V)),C=C.ownerDocument||C,V=C.createElement("script"),On(V),bi(V,"link",O),C.head.appendChild(V),E.instance=V);case"void":return null;default:throw Error(o(443,E.type))}else E.type==="stylesheet"&&(E.state.loading&4)===0&&(O=E.instance,E.state.loading|=4,zh(O,D.precedence,C));return E.instance}function zh(C,E,D){for(var O=D.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),V=O.length?O[O.length-1]:null,W=V,te=0;te<O.length;te++){var ve=O[te];if(ve.dataset.precedence===E)W=ve;else if(W!==V)break}W?W.parentNode.insertBefore(C,W.nextSibling):(E=D.nodeType===9?D.head:D,E.insertBefore(C,E.firstChild))}function Af(C,E){C.crossOrigin==null&&(C.crossOrigin=E.crossOrigin),C.referrerPolicy==null&&(C.referrerPolicy=E.referrerPolicy),C.title==null&&(C.title=E.title)}function Tf(C,E){C.crossOrigin==null&&(C.crossOrigin=E.crossOrigin),C.referrerPolicy==null&&(C.referrerPolicy=E.referrerPolicy),C.integrity==null&&(C.integrity=E.integrity)}var Uh=null;function np(C,E,D){if(Uh===null){var O=new Map,V=Uh=new Map;V.set(D,O)}else V=Uh,O=V.get(D),O||(O=new Map,V.set(D,O));if(O.has(C))return O;for(O.set(C,null),D=D.getElementsByTagName(C),V=0;V<D.length;V++){var W=D[V];if(!(W[Jr]||W[Fn]||C==="link"&&W.getAttribute("rel")==="stylesheet")&&W.namespaceURI!=="http://www.w3.org/2000/svg"){var te=W.getAttribute(E)||"";te=C+te;var ve=O.get(te);ve?ve.push(W):O.set(te,[W])}}return O}function ip(C,E,D){C=C.ownerDocument||C,C.head.insertBefore(D,E==="title"?C.querySelector("head > title"):null)}function jp(C,E,D){if(D===1||E.itemProp!=null)return!1;switch(C){case"meta":case"title":return!0;case"style":if(typeof E.precedence!="string"||typeof E.href!="string"||E.href==="")break;return!0;case"link":if(typeof E.rel!="string"||typeof E.href!="string"||E.href===""||E.onLoad||E.onError)break;switch(E.rel){case"stylesheet":return C=E.disabled,typeof E.precedence=="string"&&C==null;default:return!0}case"script":if(E.async&&typeof E.async!="function"&&typeof E.async!="symbol"&&!E.onLoad&&!E.onError&&E.src&&typeof E.src=="string")return!0}return!1}function rp(C){return!(C.type==="stylesheet"&&(C.state.loading&3)===0)}function $p(C,E,D,O){if(D.type==="stylesheet"&&(typeof O.media!="string"||matchMedia(O.media).matches!==!1)&&(D.state.loading&4)===0){if(D.instance===null){var V=Ic(O.href),W=E.querySelector(od(V));if(W){E=W._p,E!==null&&typeof E=="object"&&typeof E.then=="function"&&(C.count++,C=Wh.bind(C),E.then(C,C)),D.state.loading|=4,D.instance=W,On(W);return}W=E.ownerDocument||E,O=ep(O),(V=Kr.get(V))&&Af(O,V),W=W.createElement("link"),On(W);var te=W;te._p=new Promise(function(ve,Re){te.onload=ve,te.onerror=Re}),bi(W,"link",O),D.instance=W}C.stylesheets===null&&(C.stylesheets=new Map),C.stylesheets.set(D,E),(E=D.state.preload)&&(D.state.loading&3)===0&&(C.count++,D=Wh.bind(C),E.addEventListener("load",D),E.addEventListener("error",D))}}var _f=0;function qp(C,E){return C.stylesheets&&C.count===0&&$h(C,C.stylesheets),0<C.count||0<C.imgCount?function(D){var O=setTimeout(function(){if(C.stylesheets&&$h(C,C.stylesheets),C.unsuspend){var W=C.unsuspend;C.unsuspend=null,W()}},6e4+E);0<C.imgBytes&&_f===0&&(_f=62500*Tp());var V=setTimeout(function(){if(C.waitingForImages=!1,C.count===0&&(C.stylesheets&&$h(C,C.stylesheets),C.unsuspend)){var W=C.unsuspend;C.unsuspend=null,W()}},(C.imgBytes>_f?50:800)+E);return C.unsuspend=D,function(){C.unsuspend=null,clearTimeout(O),clearTimeout(V)}}:null}function Wh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)$h(this,this.stylesheets);else if(this.unsuspend){var C=this.unsuspend;this.unsuspend=null,C()}}}var jh=null;function $h(C,E){C.stylesheets=null,C.unsuspend!==null&&(C.count++,jh=new Map,E.forEach(Kp,C),jh=null,Wh.call(C))}function Kp(C,E){if(!(E.state.loading&4)){var D=jh.get(C);if(D)var O=D.get(null);else{D=new Map,jh.set(C,D);for(var V=C.querySelectorAll("link[data-precedence],style[data-precedence]"),W=0;W<V.length;W++){var te=V[W];(te.nodeName==="LINK"||te.getAttribute("media")!=="not all")&&(D.set(te.dataset.precedence,te),O=te)}O&&D.set(null,O)}V=E.instance,te=V.getAttribute("data-precedence"),W=D.get(te)||O,W===O&&D.set(null,V),D.set(te,V),this.count++,O=Wh.bind(this),V.addEventListener("load",O),V.addEventListener("error",O),W?W.parentNode.insertBefore(V,W.nextSibling):(C=C.nodeType===9?C.head:C,C.insertBefore(V,C.firstChild)),E.state.loading|=4}}var ld={$$typeof:U,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function Yp(C,E,D,O,V,W,te,ve,Re){this.tag=1,this.containerInfo=C,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=un(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=un(0),this.hiddenUpdates=un(null),this.identifierPrefix=O,this.onUncaughtError=V,this.onCaughtError=W,this.onRecoverableError=te,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Re,this.incompleteTransitions=new Map}function sp(C,E,D,O,V,W,te,ve,Re,ke,je,Ke){return C=new Yp(C,E,D,te,Re,ke,je,Ke,ve),E=1,W===!0&&(E|=24),W=hn(3,null,null,E),C.current=W,W.stateNode=C,E=du(),E.refCount++,C.pooledCache=E,E.refCount++,W.memoizedState={element:O,isDehydrated:D,cache:E},il(W),C}function op(C){return C?(C=Fs,C):Fs}function ap(C,E,D,O,V,W){V=op(V),O.context===null?O.context=V:O.pendingContext=V,O=ds(E),O.payload={element:D},W=W===void 0?null:W,W!==null&&(O.callback=W),D=Hs(C,O,E),D!==null&&(Rt(D,C,E),Vs(D,C,E))}function lp(C,E){if(C=C.memoizedState,C!==null&&C.dehydrated!==null){var D=C.retryLane;C.retryLane=D!==0&&D<E?D:E}}function Df(C,E){lp(C,E),(C=C.alternate)&&lp(C,E)}function cp(C){if(C.tag===13||C.tag===31){var E=hi(C,67108864);E!==null&&Rt(E,C,67108864),Df(C,67108864)}}function up(C){if(C.tag===13||C.tag===31){var E=$i();E=Mn(E);var D=hi(C,E);D!==null&&Rt(D,C,E),Df(C,E)}}var qh=!0;function Xp(C,E,D,O){var V=ae.T;ae.T=null;var W=oe.p;try{oe.p=2,Pf(C,E,D,O)}finally{oe.p=W,ae.T=V}}function Qp(C,E,D,O){var V=ae.T;ae.T=null;var W=oe.p;try{oe.p=8,Pf(C,E,D,O)}finally{oe.p=W,ae.T=V}}function Pf(C,E,D,O){if(qh){var V=Mf(O);if(V===null)mf(C,E,O,Kh,D),hp(C,O);else if(Jp(V,C,E,D,O))O.stopPropagation();else if(hp(C,O),E&4&&-1<Zp.indexOf(C)){for(;V!==null;){var W=so(V);if(W!==null)switch(W.tag){case 3:if(W=W.stateNode,W.current.memoizedState.isDehydrated){var te=ni(W.pendingLanes);if(te!==0){var ve=W;for(ve.pendingLanes|=2,ve.entangledLanes|=2;te;){var Re=1<<31-Pe(te);ve.entanglements[1]|=Re,te&=~Re}Je(W),(ct&6)===0&&(_n=ot()+500,rt(0))}}break;case 31:case 13:ve=hi(W,2),ve!==null&&Rt(ve,W,2),Sr(),Df(W,2)}if(W=Mf(O),W===null&&mf(C,E,O,Kh,D),W===V)break;V=W}V!==null&&O.stopPropagation()}else mf(C,E,O,null,D)}}function Mf(C){return C=Fl(C),Ff(C)}var Kh=null;function Ff(C){if(Kh=null,C=ro(C),C!==null){var E=d(C);if(E===null)C=null;else{var D=E.tag;if(D===13){if(C=f(E),C!==null)return C;C=null}else if(D===31){if(C=g(E),C!==null)return C;C=null}else if(D===3){if(E.stateNode.current.memoizedState.isDehydrated)return E.tag===3?E.stateNode.containerInfo:null;C=null}else E!==C&&(C=null)}}return Kh=C,null}function dp(C){switch(C){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vt()){case nn:return 2;case en:return 8;case Dt:case wt:return 32;case Bn:return 268435456;default:return 32}default:return 32}}var Of=!1,Aa=null,Ta=null,Da=null,cd=new Map,ud=new Map,Pa=[],Zp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hp(C,E){switch(C){case"focusin":case"focusout":Aa=null;break;case"dragenter":case"dragleave":Ta=null;break;case"mouseover":case"mouseout":Da=null;break;case"pointerover":case"pointerout":cd.delete(E.pointerId);break;case"gotpointercapture":case"lostpointercapture":ud.delete(E.pointerId)}}function dd(C,E,D,O,V,W){return C===null||C.nativeEvent!==W?(C={blockedOn:E,domEventName:D,eventSystemFlags:O,nativeEvent:W,targetContainers:[V]},E!==null&&(E=so(E),E!==null&&cp(E)),C):(C.eventSystemFlags|=O,E=C.targetContainers,V!==null&&E.indexOf(V)===-1&&E.push(V),C)}function Jp(C,E,D,O,V){switch(E){case"focusin":return Aa=dd(Aa,C,E,D,O,V),!0;case"dragenter":return Ta=dd(Ta,C,E,D,O,V),!0;case"mouseover":return Da=dd(Da,C,E,D,O,V),!0;case"pointerover":var W=V.pointerId;return cd.set(W,dd(cd.get(W)||null,C,E,D,O,V)),!0;case"gotpointercapture":return W=V.pointerId,ud.set(W,dd(ud.get(W)||null,C,E,D,O,V)),!0}return!1}function fp(C){var E=ro(C.target);if(E!==null){var D=d(E);if(D!==null){if(E=D.tag,E===13){if(E=f(D),E!==null){C.blockedOn=E,Es(C.priority,function(){up(D)});return}}else if(E===31){if(E=g(D),E!==null){C.blockedOn=E,Es(C.priority,function(){up(D)});return}}else if(E===3&&D.stateNode.current.memoizedState.isDehydrated){C.blockedOn=D.tag===3?D.stateNode.containerInfo:null;return}}}C.blockedOn=null}function Yh(C){if(C.blockedOn!==null)return!1;for(var E=C.targetContainers;0<E.length;){var D=Mf(C.nativeEvent);if(D===null){D=C.nativeEvent;var O=new D.constructor(D.type,D);Ml=O,D.target.dispatchEvent(O),Ml=null}else return E=so(D),E!==null&&cp(E),C.blockedOn=D,!1;E.shift()}return!0}function pp(C,E,D){Yh(C)&&D.delete(E)}function eg(){Of=!1,Aa!==null&&Yh(Aa)&&(Aa=null),Ta!==null&&Yh(Ta)&&(Ta=null),Da!==null&&Yh(Da)&&(Da=null),cd.forEach(pp),ud.forEach(pp)}function Xh(C,E){C.blockedOn===E&&(C.blockedOn=null,Of||(Of=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,eg)))}var Qh=null;function gp(C){Qh!==C&&(Qh=C,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Qh===C&&(Qh=null);for(var E=0;E<C.length;E+=3){var D=C[E],O=C[E+1],V=C[E+2];if(typeof O!="function"){if(Ff(O||D)===null)continue;break}var W=so(D);W!==null&&(C.splice(E,3),E-=3,Bu(W,{pending:!0,data:V,method:D.method,action:O},O,V))}}))}function Nc(C){function E(Re){return Xh(Re,C)}Aa!==null&&Xh(Aa,C),Ta!==null&&Xh(Ta,C),Da!==null&&Xh(Da,C),cd.forEach(E),ud.forEach(E);for(var D=0;D<Pa.length;D++){var O=Pa[D];O.blockedOn===C&&(O.blockedOn=null)}for(;0<Pa.length&&(D=Pa[0],D.blockedOn===null);)fp(D),D.blockedOn===null&&Pa.shift();if(D=(C.ownerDocument||C).$$reactFormReplay,D!=null)for(O=0;O<D.length;O+=3){var V=D[O],W=D[O+1],te=V[ii]||null;if(typeof W=="function")te||gp(D);else if(te){var ve=null;if(W&&W.hasAttribute("formAction")){if(V=W,te=W[ii]||null)ve=te.formAction;else if(Ff(V)!==null)continue}else ve=te.action;typeof ve=="function"?D[O+1]=ve:(D.splice(O,3),O-=3),gp(D)}}}function mp(){function C(W){W.canIntercept&&W.info==="react-transition"&&W.intercept({handler:function(){return new Promise(function(te){return V=te})},focusReset:"manual",scroll:"manual"})}function E(){V!==null&&(V(),V=null),O||setTimeout(D,20)}function D(){if(!O&&!navigation.transition){var W=navigation.currentEntry;W&&W.url!=null&&navigation.navigate(W.url,{state:W.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var O=!1,V=null;return navigation.addEventListener("navigate",C),navigation.addEventListener("navigatesuccess",E),navigation.addEventListener("navigateerror",E),setTimeout(D,100),function(){O=!0,navigation.removeEventListener("navigate",C),navigation.removeEventListener("navigatesuccess",E),navigation.removeEventListener("navigateerror",E),V!==null&&(V(),V=null)}}}function If(C){this._internalRoot=C}Zh.prototype.render=If.prototype.render=function(C){var E=this._internalRoot;if(E===null)throw Error(o(409));var D=E.current,O=$i();ap(D,O,C,E,null,null)},Zh.prototype.unmount=If.prototype.unmount=function(){var C=this._internalRoot;if(C!==null){this._internalRoot=null;var E=C.containerInfo;ap(C.current,2,null,C,null,null),Sr(),E[xs]=null}};function Zh(C){this._internalRoot=C}Zh.prototype.unstable_scheduleHydration=function(C){if(C){var E=ws();C={blockedOn:null,target:C,priority:E};for(var D=0;D<Pa.length&&E!==0&&E<Pa[D].priority;D++);Pa.splice(D,0,C),D===0&&fp(C)}};var vp=t.version;if(vp!=="19.2.0")throw Error(o(527,vp,"19.2.0"));oe.findDOMNode=function(C){var E=C._reactInternals;if(E===void 0)throw typeof C.render=="function"?Error(o(188)):(C=Object.keys(C).join(","),Error(o(268,C)));return C=w(E),C=C!==null?S(C):null,C=C===null?null:C.stateNode,C};var tg={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ae,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jh.isDisabled&&Jh.supportsFiber)try{bs=Jh.inject(tg),Xe=Jh}catch{}}return reactDomClient_production.createRoot=function(C,E){if(!u(C))throw Error(o(299));var D=!1,O="",V=Ph,W=Wu,te=ju;return E!=null&&(E.unstable_strictMode===!0&&(D=!0),E.identifierPrefix!==void 0&&(O=E.identifierPrefix),E.onUncaughtError!==void 0&&(V=E.onUncaughtError),E.onCaughtError!==void 0&&(W=E.onCaughtError),E.onRecoverableError!==void 0&&(te=E.onRecoverableError)),E=sp(C,1,!1,null,null,D,O,null,V,W,te,mp),C[xs]=E.current,gf(C),new If(E)},reactDomClient_production.hydrateRoot=function(C,E,D){if(!u(C))throw Error(o(299));var O=!1,V="",W=Ph,te=Wu,ve=ju,Re=null;return D!=null&&(D.unstable_strictMode===!0&&(O=!0),D.identifierPrefix!==void 0&&(V=D.identifierPrefix),D.onUncaughtError!==void 0&&(W=D.onUncaughtError),D.onCaughtError!==void 0&&(te=D.onCaughtError),D.onRecoverableError!==void 0&&(ve=D.onRecoverableError),D.formState!==void 0&&(Re=D.formState)),E=sp(C,1,!0,E,D??null,O,V,Re,W,te,ve,mp),E.context=op(null),D=E.current,O=$i(),O=Mn(O),V=ds(O),V.callback=null,Hs(D,V,O),D=O,E.current.lanes=D,pr(E,D),Je(E),C[xs]=E.current,gf(C),new Zh(E)},reactDomClient_production.version="19.2.0",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();var PopStateEventType="popstate";function createHashHistory(e={}){function t(u,d){let{pathname:f="/",search:g="",hash:v=""}=parsePath(u.location.hash.substring(1));return!f.startsWith("/")&&!f.startsWith(".")&&(f="/"+f),createLocation("",{pathname:f,search:g,hash:v},d.state&&d.state.usr||null,d.state&&d.state.key||"default")}function n(u,d){let f=u.document.querySelector("base"),g="";if(f&&f.getAttribute("href")){let v=u.location.href,w=v.indexOf("#");g=w===-1?v:v.slice(0,w)}return g+"#"+(typeof d=="string"?d:createPath(d))}function o(u,d){warning(u.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(d)})`)}return getUrlBasedHistory(t,n,o,e)}function invariant$1(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function warning(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function createKey(){return Math.random().toString(36).substring(2,10)}function getHistoryState(e,t){return{usr:e.state,key:e.key,idx:t}}function createLocation(e,t,n=null,o){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?parsePath(t):t,state:n,key:t&&t.key||o||createKey()}}function createPath({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function parsePath(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let o=e.indexOf("?");o>=0&&(t.search=e.substring(o),e=e.substring(0,o)),e&&(t.pathname=e)}return t}function getUrlBasedHistory(e,t,n,o={}){let{window:u=document.defaultView,v5Compat:d=!1}=o,f=u.history,g="POP",v=null,w=S();w==null&&(w=0,f.replaceState({...f.state,idx:w},""));function S(){return(f.state||{idx:null}).idx}function R(){g="POP";let N=S(),B=N==null?null:N-w;w=N,v&&v({action:g,location:I.location,delta:B})}function _(N,B){g="PUSH";let H=createLocation(I.location,N,B);n&&n(H,N),w=S()+1;let U=getHistoryState(H,w),$=I.createHref(H);try{f.pushState(U,"",$)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;u.location.assign($)}d&&v&&v({action:g,location:I.location,delta:1})}function F(N,B){g="REPLACE";let H=createLocation(I.location,N,B);n&&n(H,N),w=S();let U=getHistoryState(H,w),$=I.createHref(H);f.replaceState(U,"",$),d&&v&&v({action:g,location:I.location,delta:0})}function M(N){return createBrowserURLImpl(N)}let I={get action(){return g},get location(){return e(u,f)},listen(N){if(v)throw new Error("A history only accepts one active listener");return u.addEventListener(PopStateEventType,R),v=N,()=>{u.removeEventListener(PopStateEventType,R),v=null}},createHref(N){return t(u,N)},createURL:M,encodeLocation(N){let B=M(N);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:_,replace:F,go(N){return f.go(N)}};return I}function createBrowserURLImpl(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),invariant$1(n,"No window.location.(origin|href) available to create URL");let o=typeof e=="string"?e:createPath(e);return o=o.replace(/ $/,"%20"),!t&&o.startsWith("//")&&(o=n+o),new URL(o,n)}function matchRoutes(e,t,n="/"){return matchRoutesImpl(e,t,n,!1)}function matchRoutesImpl(e,t,n,o){let u=typeof t=="string"?parsePath(t):t,d=stripBasename(u.pathname||"/",n);if(d==null)return null;let f=flattenRoutes(e);rankRouteBranches(f);let g=null;for(let v=0;g==null&&v<f.length;++v){let w=decodePath(d);g=matchRouteBranch(f[v],w,o)}return g}function flattenRoutes(e,t=[],n=[],o="",u=!1){let d=(f,g,v=u,w)=>{let S={relativePath:w===void 0?f.path||"":w,caseSensitive:f.caseSensitive===!0,childrenIndex:g,route:f};if(S.relativePath.startsWith("/")){if(!S.relativePath.startsWith(o)&&v)return;invariant$1(S.relativePath.startsWith(o),`Absolute route path "${S.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),S.relativePath=S.relativePath.slice(o.length)}let R=joinPaths([o,S.relativePath]),_=n.concat(S);f.children&&f.children.length>0&&(invariant$1(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${R}".`),flattenRoutes(f.children,t,_,R,v)),!(f.path==null&&!f.index)&&t.push({path:R,score:computeScore(R,f.index),routesMeta:_})};return e.forEach((f,g)=>{if(f.path===""||!f.path?.includes("?"))d(f,g);else for(let v of explodeOptionalSegments(f.path))d(f,g,!0,v)}),t}function explodeOptionalSegments(e){let t=e.split("/");if(t.length===0)return[];let[n,...o]=t,u=n.endsWith("?"),d=n.replace(/\?$/,"");if(o.length===0)return u?[d,""]:[d];let f=explodeOptionalSegments(o.join("/")),g=[];return g.push(...f.map(v=>v===""?d:[d,v].join("/"))),u&&g.push(...f),g.map(v=>e.startsWith("/")&&v===""?"/":v)}function rankRouteBranches(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:compareIndexes(t.routesMeta.map(o=>o.childrenIndex),n.routesMeta.map(o=>o.childrenIndex)))}var paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=e=>e==="*";function computeScore(e,t){let n=e.split("/"),o=n.length;return n.some(isSplat)&&(o+=splatPenalty),t&&(o+=indexRouteValue),n.filter(u=>!isSplat(u)).reduce((u,d)=>u+(paramRe.test(d)?dynamicSegmentValue:d===""?emptySegmentValue:staticSegmentValue),o)}function compareIndexes(e,t){return e.length===t.length&&e.slice(0,-1).every((o,u)=>o===t[u])?e[e.length-1]-t[t.length-1]:0}function matchRouteBranch(e,t,n=!1){let{routesMeta:o}=e,u={},d="/",f=[];for(let g=0;g<o.length;++g){let v=o[g],w=g===o.length-1,S=d==="/"?t:t.slice(d.length)||"/",R=matchPath({path:v.relativePath,caseSensitive:v.caseSensitive,end:w},S),_=v.route;if(!R&&w&&n&&!o[o.length-1].route.index&&(R=matchPath({path:v.relativePath,caseSensitive:v.caseSensitive,end:!1},S)),!R)return null;Object.assign(u,R.params),f.push({params:u,pathname:joinPaths([d,R.pathname]),pathnameBase:normalizePathname(joinPaths([d,R.pathnameBase])),route:_}),R.pathnameBase!=="/"&&(d=joinPaths([d,R.pathnameBase]))}return f}function matchPath(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,o]=compilePath(e.path,e.caseSensitive,e.end),u=t.match(n);if(!u)return null;let d=u[0],f=d.replace(/(.)\/+$/,"$1"),g=u.slice(1);return{params:o.reduce((w,{paramName:S,isOptional:R},_)=>{if(S==="*"){let M=g[_]||"";f=d.slice(0,d.length-M.length).replace(/(.)\/+$/,"$1")}const F=g[_];return R&&!F?w[S]=void 0:w[S]=(F||"").replace(/%2F/g,"/"),w},{}),pathname:d,pathnameBase:f,pattern:e}}function compilePath(e,t=!1,n=!0){warning(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let o=[],u="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,g,v)=>(o.push({paramName:g,isOptional:v!=null}),v?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(o.push({paramName:"*"}),u+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?u+="\\/*$":e!==""&&e!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,t?void 0:"i"),o]}function decodePath(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return warning(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function stripBasename(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,o=e.charAt(n);return o&&o!=="/"?null:e.slice(n)||"/"}var ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function resolvePath(e,t="/"){let{pathname:n,search:o="",hash:u=""}=typeof e=="string"?parsePath(e):e,d;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?d=resolvePathname(n.substring(1),"/"):d=resolvePathname(n,t)):d=t,{pathname:d,search:normalizeSearch(o),hash:normalizeHash(u)}}function resolvePathname(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(u=>{u===".."?n.length>1&&n.pop():u!=="."&&n.push(u)}),n.length>1?n.join("/"):"/"}function getInvalidPathError(e,t,n,o){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function getPathContributingMatches(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function getResolveToMatches(e){let t=getPathContributingMatches(e);return t.map((n,o)=>o===t.length-1?n.pathname:n.pathnameBase)}function resolveTo(e,t,n,o=!1){let u;typeof e=="string"?u=parsePath(e):(u={...e},invariant$1(!u.pathname||!u.pathname.includes("?"),getInvalidPathError("?","pathname","search",u)),invariant$1(!u.pathname||!u.pathname.includes("#"),getInvalidPathError("#","pathname","hash",u)),invariant$1(!u.search||!u.search.includes("#"),getInvalidPathError("#","search","hash",u)));let d=e===""||u.pathname==="",f=d?"/":u.pathname,g;if(f==null)g=n;else{let R=t.length-1;if(!o&&f.startsWith("..")){let _=f.split("/");for(;_[0]==="..";)_.shift(),R-=1;u.pathname=_.join("/")}g=R>=0?t[R]:"/"}let v=resolvePath(u,g),w=f&&f!=="/"&&f.endsWith("/"),S=(d||f===".")&&n.endsWith("/");return!v.pathname.endsWith("/")&&(w||S)&&(v.pathname+="/"),v}var joinPaths=e=>e.join("/").replace(/\/\/+/g,"/"),normalizePathname=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,normalizeHash=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,ErrorResponseImpl=class{constructor(e,t,n,o=!1){this.status=e,this.statusText=t||"",this.internal=o,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function isRouteErrorResponse(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function getRoutePattern(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var isBrowser$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function parseToInfo(e,t){let n=e;if(typeof n!="string"||!ABSOLUTE_URL_REGEX.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let o=n,u=!1;if(isBrowser$1)try{let d=new URL(window.location.href),f=n.startsWith("//")?new URL(d.protocol+n):new URL(n),g=stripBasename(f.pathname,t);f.origin===d.origin&&g!=null?n=g+f.search+f.hash:u=!0}catch{warning(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:o,isExternal:u,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var validMutationMethodsArr=["POST","PUT","PATCH","DELETE"];new Set(validMutationMethodsArr);var validRequestMethodsArr=["GET",...validMutationMethodsArr];new Set(validRequestMethodsArr);var DataRouterContext=reactExports.createContext(null);DataRouterContext.displayName="DataRouter";var DataRouterStateContext=reactExports.createContext(null);DataRouterStateContext.displayName="DataRouterState";var RSCRouterContext=reactExports.createContext(!1),ViewTransitionContext=reactExports.createContext({isTransitioning:!1});ViewTransitionContext.displayName="ViewTransition";var FetchersContext=reactExports.createContext(new Map);FetchersContext.displayName="Fetchers";var AwaitContext=reactExports.createContext(null);AwaitContext.displayName="Await";var NavigationContext=reactExports.createContext(null);NavigationContext.displayName="Navigation";var LocationContext=reactExports.createContext(null);LocationContext.displayName="Location";var RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1});RouteContext.displayName="Route";var RouteErrorContext=reactExports.createContext(null);RouteErrorContext.displayName="RouteError";var ERROR_DIGEST_BASE="REACT_ROUTER_ERROR",ERROR_DIGEST_REDIRECT="REDIRECT",ERROR_DIGEST_ROUTE_ERROR_RESPONSE="ROUTE_ERROR_RESPONSE";function decodeRedirectErrorDigest(e){if(e.startsWith(`${ERROR_DIGEST_BASE}:${ERROR_DIGEST_REDIRECT}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function decodeRouteErrorResponseDigest(e){if(e.startsWith(`${ERROR_DIGEST_BASE}:${ERROR_DIGEST_ROUTE_ERROR_RESPONSE}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new ErrorResponseImpl(t.status,t.statusText,t.data)}catch{}}function useHref(e,{relative:t}={}){invariant$1(useInRouterContext(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:o}=reactExports.useContext(NavigationContext),{hash:u,pathname:d,search:f}=useResolvedPath(e,{relative:t}),g=d;return n!=="/"&&(g=d==="/"?n:joinPaths([n,d])),o.createHref({pathname:g,search:f,hash:u})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return invariant$1(useInRouterContext(),"useLocation() may be used only in the context of a <Router> component."),reactExports.useContext(LocationContext).location}var navigateEffectWarning="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function useIsomorphicLayoutEffect$3(e){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(e)}function useNavigate(){let{isDataRoute:e}=reactExports.useContext(RouteContext);return e?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){invariant$1(useInRouterContext(),"useNavigate() may be used only in the context of a <Router> component.");let e=reactExports.useContext(DataRouterContext),{basename:t,navigator:n}=reactExports.useContext(NavigationContext),{matches:o}=reactExports.useContext(RouteContext),{pathname:u}=useLocation(),d=JSON.stringify(getResolveToMatches(o)),f=reactExports.useRef(!1);return useIsomorphicLayoutEffect$3(()=>{f.current=!0}),reactExports.useCallback((v,w={})=>{if(warning(f.current,navigateEffectWarning),!f.current)return;if(typeof v=="number"){n.go(v);return}let S=resolveTo(v,JSON.parse(d),u,w.relative==="path");e==null&&t!=="/"&&(S.pathname=S.pathname==="/"?t:joinPaths([t,S.pathname])),(w.replace?n.replace:n.push)(S,w.state,w)},[t,n,d,u,e])}reactExports.createContext(null);function useResolvedPath(e,{relative:t}={}){let{matches:n}=reactExports.useContext(RouteContext),{pathname:o}=useLocation(),u=JSON.stringify(getResolveToMatches(n));return reactExports.useMemo(()=>resolveTo(e,JSON.parse(u),o,t==="path"),[e,u,o,t])}function useRoutes(e,t){return useRoutesImpl(e,t)}function useRoutesImpl(e,t,n,o,u){invariant$1(useInRouterContext(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:d}=reactExports.useContext(NavigationContext),{matches:f}=reactExports.useContext(RouteContext),g=f[f.length-1],v=g?g.params:{},w=g?g.pathname:"/",S=g?g.pathnameBase:"/",R=g&&g.route;{let H=R&&R.path||"";warningOnce(w,!R||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${w}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let _=useLocation(),F;if(t){let H=typeof t=="string"?parsePath(t):t;invariant$1(S==="/"||H.pathname?.startsWith(S),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${S}" but pathname "${H.pathname}" was given in the \`location\` prop.`),F=H}else F=_;let M=F.pathname||"/",I=M;if(S!=="/"){let H=S.replace(/^\//,"").split("/");I="/"+M.replace(/^\//,"").split("/").slice(H.length).join("/")}let N=matchRoutes(e,{pathname:I});warning(R||N!=null,`No routes matched location "${F.pathname}${F.search}${F.hash}" `),warning(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${F.pathname}${F.search}${F.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let B=_renderMatches(N&&N.map(H=>Object.assign({},H,{params:Object.assign({},v,H.params),pathname:joinPaths([S,d.encodeLocation?d.encodeLocation(H.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?S:joinPaths([S,d.encodeLocation?d.encodeLocation(H.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:H.pathnameBase])})),f,n,o,u);return t&&B?reactExports.createElement(LocationContext.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...F},navigationType:"POP"}},B):B}function DefaultErrorComponent(){let e=useRouteError(),t=isRouteErrorResponse(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,o="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:o},d={padding:"2px 4px",backgroundColor:o},f=null;return console.error("Error handled by React Router default ErrorBoundary:",e),f=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("p",null," Hey developer "),reactExports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",reactExports.createElement("code",{style:d},"ErrorBoundary")," or"," ",reactExports.createElement("code",{style:d},"errorElement")," prop on your route.")),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},t),n?reactExports.createElement("pre",{style:u},n):null,f)}var defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null),RenderErrorBoundary=class extends reactExports.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const n=decodeRouteErrorResponseDigest(e.digest);n&&(e=n)}let t=e!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?reactExports.createElement(RSCErrorHandler,{error:e},t):t}};RenderErrorBoundary.contextType=RSCRouterContext;var errorRedirectHandledMap=new WeakMap;function RSCErrorHandler({children:e,error:t}){let{basename:n}=reactExports.useContext(NavigationContext);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let o=decodeRedirectErrorDigest(t.digest);if(o){let u=errorRedirectHandledMap.get(t);if(u)throw u;let d=parseToInfo(o.location,n);if(isBrowser$1&&!errorRedirectHandledMap.get(t))if(d.isExternal||o.reloadDocument)window.location.href=d.absoluteURL||d.to;else{const f=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(d.to,{replace:o.replace}));throw errorRedirectHandledMap.set(t,f),f}return reactExports.createElement("meta",{httpEquiv:"refresh",content:`0;url=${d.absoluteURL||d.to}`})}}return e}function RenderedRoute({routeContext:e,match:t,children:n}){let o=reactExports.useContext(DataRouterContext);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),reactExports.createElement(RouteContext.Provider,{value:e},n)}function _renderMatches(e,t=[],n=null,o=null,u=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let d=e,f=n?.errors;if(f!=null){let S=d.findIndex(R=>R.route.id&&f?.[R.route.id]!==void 0);invariant$1(S>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),d=d.slice(0,Math.min(d.length,S+1))}let g=!1,v=-1;if(n)for(let S=0;S<d.length;S++){let R=d[S];if((R.route.HydrateFallback||R.route.hydrateFallbackElement)&&(v=S),R.route.id){let{loaderData:_,errors:F}=n,M=R.route.loader&&!_.hasOwnProperty(R.route.id)&&(!F||F[R.route.id]===void 0);if(R.route.lazy||M){g=!0,v>=0?d=d.slice(0,v+1):d=[d[0]];break}}}let w=n&&o?(S,R)=>{o(S,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:getRoutePattern(n.matches),errorInfo:R})}:void 0;return d.reduceRight((S,R,_)=>{let F,M=!1,I=null,N=null;n&&(F=f&&R.route.id?f[R.route.id]:void 0,I=R.route.errorElement||defaultErrorElement,g&&(v<0&&_===0?(warningOnce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),M=!0,N=null):v===_&&(M=!0,N=R.route.hydrateFallbackElement||null)));let B=t.concat(d.slice(0,_+1)),H=()=>{let U;return F?U=I:M?U=N:R.route.Component?U=reactExports.createElement(R.route.Component,null):R.route.element?U=R.route.element:U=S,reactExports.createElement(RenderedRoute,{match:R,routeContext:{outlet:S,matches:B,isDataRoute:n!=null},children:U})};return n&&(R.route.ErrorBoundary||R.route.errorElement||_===0)?reactExports.createElement(RenderErrorBoundary,{location:n.location,revalidation:n.revalidation,component:I,error:F,children:H(),routeContext:{outlet:null,matches:B,isDataRoute:!0},onError:w}):H()},null)}function getDataRouterConsoleError(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext(e){let t=reactExports.useContext(DataRouterContext);return invariant$1(t,getDataRouterConsoleError(e)),t}function useDataRouterState(e){let t=reactExports.useContext(DataRouterStateContext);return invariant$1(t,getDataRouterConsoleError(e)),t}function useRouteContext(e){let t=reactExports.useContext(RouteContext);return invariant$1(t,getDataRouterConsoleError(e)),t}function useCurrentRouteId(e){let t=useRouteContext(e),n=t.matches[t.matches.length-1];return invariant$1(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function useRouteId(){return useCurrentRouteId("useRouteId")}function useRouteError(){let e=reactExports.useContext(RouteErrorContext),t=useDataRouterState("useRouteError"),n=useCurrentRouteId("useRouteError");return e!==void 0?e:t.errors?.[n]}function useNavigateStable(){let{router:e}=useDataRouterContext("useNavigate"),t=useCurrentRouteId("useNavigate"),n=reactExports.useRef(!1);return useIsomorphicLayoutEffect$3(()=>{n.current=!0}),reactExports.useCallback(async(u,d={})=>{warning(n.current,navigateEffectWarning),n.current&&(typeof u=="number"?await e.navigate(u):await e.navigate(u,{fromRouteId:t,...d}))},[e,t])}var alreadyWarned={};function warningOnce(e,t,n){!t&&!alreadyWarned[e]&&(alreadyWarned[e]=!0,warning(!1,n))}reactExports.memo(DataRoutes);function DataRoutes({routes:e,future:t,state:n,onError:o}){return useRoutesImpl(e,void 0,n,o,t)}function Route(e){invariant$1(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Router({basename:e="/",children:t=null,location:n,navigationType:o="POP",navigator:u,static:d=!1,unstable_useTransitions:f}){invariant$1(!useInRouterContext(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let g=e.replace(/^\/*/,"/"),v=reactExports.useMemo(()=>({basename:g,navigator:u,static:d,unstable_useTransitions:f,future:{}}),[g,u,d,f]);typeof n=="string"&&(n=parsePath(n));let{pathname:w="/",search:S="",hash:R="",state:_=null,key:F="default"}=n,M=reactExports.useMemo(()=>{let I=stripBasename(w,g);return I==null?null:{location:{pathname:I,search:S,hash:R,state:_,key:F},navigationType:o}},[g,w,S,R,_,F,o]);return warning(M!=null,`<Router basename="${g}"> is not able to match the URL "${w}${S}${R}" because it does not start with the basename, so the <Router> won't render anything.`),M==null?null:reactExports.createElement(NavigationContext.Provider,{value:v},reactExports.createElement(LocationContext.Provider,{children:t,value:M}))}function Routes({children:e,location:t}){return useRoutes(createRoutesFromChildren(e),t)}function createRoutesFromChildren(e,t=[]){let n=[];return reactExports.Children.forEach(e,(o,u)=>{if(!reactExports.isValidElement(o))return;let d=[...t,u];if(o.type===reactExports.Fragment){n.push.apply(n,createRoutesFromChildren(o.props.children,d));return}invariant$1(o.type===Route,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),invariant$1(!o.props.index||!o.props.children,"An index route cannot have child routes.");let f={id:o.props.id||d.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(f.children=createRoutesFromChildren(o.props.children,d)),n.push(f)}),n}var defaultMethod="get",defaultEncType="application/x-www-form-urlencoded";function isHtmlElement(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function isButtonElement(e){return isHtmlElement(e)&&e.tagName.toLowerCase()==="button"}function isFormElement(e){return isHtmlElement(e)&&e.tagName.toLowerCase()==="form"}function isInputElement(e){return isHtmlElement(e)&&e.tagName.toLowerCase()==="input"}function isModifiedEvent(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function shouldProcessLinkClick(e,t){return e.button===0&&(!t||t==="_self")&&!isModifiedEvent(e)}var _formDataSupportsSubmitter=null;function isFormDataSubmitterSupported(){if(_formDataSupportsSubmitter===null)try{new FormData(document.createElement("form"),0),_formDataSupportsSubmitter=!1}catch{_formDataSupportsSubmitter=!0}return _formDataSupportsSubmitter}var supportedFormEncTypes=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function getFormEncType(e){return e!=null&&!supportedFormEncTypes.has(e)?(warning(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${defaultEncType}"`),null):e}function getFormSubmissionInfo(e,t){let n,o,u,d,f;if(isFormElement(e)){let g=e.getAttribute("action");o=g?stripBasename(g,t):null,n=e.getAttribute("method")||defaultMethod,u=getFormEncType(e.getAttribute("enctype"))||defaultEncType,d=new FormData(e)}else if(isButtonElement(e)||isInputElement(e)&&(e.type==="submit"||e.type==="image")){let g=e.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let v=e.getAttribute("formaction")||g.getAttribute("action");if(o=v?stripBasename(v,t):null,n=e.getAttribute("formmethod")||g.getAttribute("method")||defaultMethod,u=getFormEncType(e.getAttribute("formenctype"))||getFormEncType(g.getAttribute("enctype"))||defaultEncType,d=new FormData(g,e),!isFormDataSubmitterSupported()){let{name:w,type:S,value:R}=e;if(S==="image"){let _=w?`${w}.`:"";d.append(`${_}x`,"0"),d.append(`${_}y`,"0")}else w&&d.append(w,R)}}else{if(isHtmlElement(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=defaultMethod,o=null,u=defaultEncType,f=e}return d&&u==="text/plain"&&(f=d,d=void 0),{action:o,method:n.toLowerCase(),encType:u,formData:d,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function invariant2(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function singleFetchUrl(e,t,n,o){let u=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n?u.pathname.endsWith("/")?u.pathname=`${u.pathname}_.${o}`:u.pathname=`${u.pathname}.${o}`:u.pathname==="/"?u.pathname=`_root.${o}`:t&&stripBasename(u.pathname,t)==="/"?u.pathname=`${t.replace(/\/$/,"")}/_root.${o}`:u.pathname=`${u.pathname.replace(/\/$/,"")}.${o}`,u}async function loadRouteModule(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function isHtmlLinkDescriptor(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function getKeyedPrefetchLinks(e,t,n){let o=await Promise.all(e.map(async u=>{let d=t.routes[u.route.id];if(d){let f=await loadRouteModule(d,n);return f.links?f.links():[]}return[]}));return dedupeLinkDescriptors(o.flat(1).filter(isHtmlLinkDescriptor).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function getNewMatchesForLinks(e,t,n,o,u,d){let f=(v,w)=>n[w]?v.route.id!==n[w].route.id:!0,g=(v,w)=>n[w].pathname!==v.pathname||n[w].route.path?.endsWith("*")&&n[w].params["*"]!==v.params["*"];return d==="assets"?t.filter((v,w)=>f(v,w)||g(v,w)):d==="data"?t.filter((v,w)=>{let S=o.routes[v.route.id];if(!S||!S.hasLoader)return!1;if(f(v,w)||g(v,w))return!0;if(v.route.shouldRevalidate){let R=v.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:v.params,defaultShouldRevalidate:!0});if(typeof R=="boolean")return R}return!0}):[]}function getModuleLinkHrefs(e,t,{includeHydrateFallback:n}={}){return dedupeHrefs(e.map(o=>{let u=t.routes[o.route.id];if(!u)return[];let d=[u.module];return u.clientActionModule&&(d=d.concat(u.clientActionModule)),u.clientLoaderModule&&(d=d.concat(u.clientLoaderModule)),n&&u.hydrateFallbackModule&&(d=d.concat(u.hydrateFallbackModule)),u.imports&&(d=d.concat(u.imports)),d}).flat(1))}function dedupeHrefs(e){return[...new Set(e)]}function sortKeys(e){let t={},n=Object.keys(e).sort();for(let o of n)t[o]=e[o];return t}function dedupeLinkDescriptors(e,t){let n=new Set;return new Set(t),e.reduce((o,u)=>{let d=JSON.stringify(sortKeys(u));return n.has(d)||(n.add(d),o.push({key:d,link:u})),o},[])}function useDataRouterContext2(){let e=reactExports.useContext(DataRouterContext);return invariant2(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function useDataRouterStateContext(){let e=reactExports.useContext(DataRouterStateContext);return invariant2(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var FrameworkContext=reactExports.createContext(void 0);FrameworkContext.displayName="FrameworkContext";function useFrameworkContext(){let e=reactExports.useContext(FrameworkContext);return invariant2(e,"You must render this element inside a <HydratedRouter> element"),e}function usePrefetchBehavior(e,t){let n=reactExports.useContext(FrameworkContext),[o,u]=reactExports.useState(!1),[d,f]=reactExports.useState(!1),{onFocus:g,onBlur:v,onMouseEnter:w,onMouseLeave:S,onTouchStart:R}=t,_=reactExports.useRef(null);reactExports.useEffect(()=>{if(e==="render"&&f(!0),e==="viewport"){let I=B=>{B.forEach(H=>{f(H.isIntersecting)})},N=new IntersectionObserver(I,{threshold:.5});return _.current&&N.observe(_.current),()=>{N.disconnect()}}},[e]),reactExports.useEffect(()=>{if(o){let I=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(I)}}},[o]);let F=()=>{u(!0)},M=()=>{u(!1),f(!1)};return n?e!=="intent"?[d,_,{}]:[d,_,{onFocus:composeEventHandlers(g,F),onBlur:composeEventHandlers(v,M),onMouseEnter:composeEventHandlers(w,F),onMouseLeave:composeEventHandlers(S,M),onTouchStart:composeEventHandlers(R,F)}]:[!1,_,{}]}function composeEventHandlers(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function PrefetchPageLinks({page:e,...t}){let{router:n}=useDataRouterContext2(),o=reactExports.useMemo(()=>matchRoutes(n.routes,e,n.basename),[n.routes,e,n.basename]);return o?reactExports.createElement(PrefetchPageLinksImpl,{page:e,matches:o,...t}):null}function useKeyedPrefetchLinks(e){let{manifest:t,routeModules:n}=useFrameworkContext(),[o,u]=reactExports.useState([]);return reactExports.useEffect(()=>{let d=!1;return getKeyedPrefetchLinks(e,t,n).then(f=>{d||u(f)}),()=>{d=!0}},[e,t,n]),o}function PrefetchPageLinksImpl({page:e,matches:t,...n}){let o=useLocation(),{future:u,manifest:d,routeModules:f}=useFrameworkContext(),{basename:g}=useDataRouterContext2(),{loaderData:v,matches:w}=useDataRouterStateContext(),S=reactExports.useMemo(()=>getNewMatchesForLinks(e,t,w,d,o,"data"),[e,t,w,d,o]),R=reactExports.useMemo(()=>getNewMatchesForLinks(e,t,w,d,o,"assets"),[e,t,w,d,o]),_=reactExports.useMemo(()=>{if(e===o.pathname+o.search+o.hash)return[];let I=new Set,N=!1;if(t.forEach(H=>{let U=d.routes[H.route.id];!U||!U.hasLoader||(!S.some($=>$.route.id===H.route.id)&&H.route.id in v&&f[H.route.id]?.shouldRevalidate||U.hasClientLoader?N=!0:I.add(H.route.id))}),I.size===0)return[];let B=singleFetchUrl(e,g,u.unstable_trailingSlashAwareDataRequests,"data");return N&&I.size>0&&B.searchParams.set("_routes",t.filter(H=>I.has(H.route.id)).map(H=>H.route.id).join(",")),[B.pathname+B.search]},[g,u.unstable_trailingSlashAwareDataRequests,v,o,d,S,t,e,f]),F=reactExports.useMemo(()=>getModuleLinkHrefs(R,d),[R,d]),M=useKeyedPrefetchLinks(R);return reactExports.createElement(reactExports.Fragment,null,_.map(I=>reactExports.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...n})),F.map(I=>reactExports.createElement("link",{key:I,rel:"modulepreload",href:I,...n})),M.map(({key:I,link:N})=>reactExports.createElement("link",{key:I,nonce:n.nonce,...N,crossOrigin:N.crossOrigin??n.crossOrigin})))}function mergeRefs(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var isBrowser2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{isBrowser2&&(window.__reactRouterVersion="7.13.0")}catch{}function HashRouter({basename:e,children:t,unstable_useTransitions:n,window:o}){let u=reactExports.useRef();u.current==null&&(u.current=createHashHistory({window:o,v5Compat:!0}));let d=u.current,[f,g]=reactExports.useState({action:d.action,location:d.location}),v=reactExports.useCallback(w=>{n===!1?g(w):reactExports.startTransition(()=>g(w))},[n]);return reactExports.useLayoutEffect(()=>d.listen(v),[d,v]),reactExports.createElement(Router,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:d,unstable_useTransitions:n})}var ABSOLUTE_URL_REGEX2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function({onClick:t,discover:n="render",prefetch:o="none",relative:u,reloadDocument:d,replace:f,state:g,target:v,to:w,preventScrollReset:S,viewTransition:R,unstable_defaultShouldRevalidate:_,...F},M){let{basename:I,unstable_useTransitions:N}=reactExports.useContext(NavigationContext),B=typeof w=="string"&&ABSOLUTE_URL_REGEX2.test(w),H=parseToInfo(w,I);w=H.to;let U=useHref(w,{relative:u}),[$,z,j]=usePrefetchBehavior(o,F),J=useLinkClickHandler(w,{replace:f,state:g,target:v,preventScrollReset:S,relative:u,viewTransition:R,unstable_defaultShouldRevalidate:_,unstable_useTransitions:N});function ie(fe){t&&t(fe),fe.defaultPrevented||J(fe)}let se=reactExports.createElement("a",{...F,...j,href:H.absoluteURL||U,onClick:H.isExternal||d?t:ie,ref:mergeRefs(M,z),target:v,"data-discover":!B&&n==="render"?"true":void 0});return $&&!B?reactExports.createElement(reactExports.Fragment,null,se,reactExports.createElement(PrefetchPageLinks,{page:U})):se});Link.displayName="Link";var NavLink=reactExports.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:o="",end:u=!1,style:d,to:f,viewTransition:g,children:v,...w},S){let R=useResolvedPath(f,{relative:w.relative}),_=useLocation(),F=reactExports.useContext(DataRouterStateContext),{navigator:M,basename:I}=reactExports.useContext(NavigationContext),N=F!=null&&useViewTransitionState(R)&&g===!0,B=M.encodeLocation?M.encodeLocation(R).pathname:R.pathname,H=_.pathname,U=F&&F.navigation&&F.navigation.location?F.navigation.location.pathname:null;n||(H=H.toLowerCase(),U=U?U.toLowerCase():null,B=B.toLowerCase()),U&&I&&(U=stripBasename(U,I)||U);const $=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let z=H===B||!u&&H.startsWith(B)&&H.charAt($)==="/",j=U!=null&&(U===B||!u&&U.startsWith(B)&&U.charAt(B.length)==="/"),J={isActive:z,isPending:j,isTransitioning:N},ie=z?t:void 0,se;typeof o=="function"?se=o(J):se=[o,z?"active":null,j?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let fe=typeof d=="function"?d(J):d;return reactExports.createElement(Link,{...w,"aria-current":ie,className:se,ref:S,style:fe,to:f,viewTransition:g},typeof v=="function"?v(J):v)});NavLink.displayName="NavLink";var Form=reactExports.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:o,replace:u,state:d,method:f=defaultMethod,action:g,onSubmit:v,relative:w,preventScrollReset:S,viewTransition:R,unstable_defaultShouldRevalidate:_,...F},M)=>{let{unstable_useTransitions:I}=reactExports.useContext(NavigationContext),N=useSubmit(),B=useFormAction(g,{relative:w}),H=f.toLowerCase()==="get"?"get":"post",U=typeof g=="string"&&ABSOLUTE_URL_REGEX2.test(g),$=z=>{if(v&&v(z),z.defaultPrevented)return;z.preventDefault();let j=z.nativeEvent.submitter,J=j?.getAttribute("formmethod")||f,ie=()=>N(j||z.currentTarget,{fetcherKey:t,method:J,navigate:n,replace:u,state:d,relative:w,preventScrollReset:S,viewTransition:R,unstable_defaultShouldRevalidate:_});I&&n!==!1?reactExports.startTransition(()=>ie()):ie()};return reactExports.createElement("form",{ref:M,method:H,action:B,onSubmit:o?v:$,...F,"data-discover":!U&&e==="render"?"true":void 0})});Form.displayName="Form";function getDataRouterConsoleError2(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function useDataRouterContext3(e){let t=reactExports.useContext(DataRouterContext);return invariant$1(t,getDataRouterConsoleError2(e)),t}function useLinkClickHandler(e,{target:t,replace:n,state:o,preventScrollReset:u,relative:d,viewTransition:f,unstable_defaultShouldRevalidate:g,unstable_useTransitions:v}={}){let w=useNavigate(),S=useLocation(),R=useResolvedPath(e,{relative:d});return reactExports.useCallback(_=>{if(shouldProcessLinkClick(_,t)){_.preventDefault();let F=n!==void 0?n:createPath(S)===createPath(R),M=()=>w(e,{replace:F,state:o,preventScrollReset:u,relative:d,viewTransition:f,unstable_defaultShouldRevalidate:g});v?reactExports.startTransition(()=>M()):M()}},[S,w,R,n,o,t,e,u,d,f,g,v])}var fetcherId=0,getUniqueFetcherId=()=>`__${String(++fetcherId)}__`;function useSubmit(){let{router:e}=useDataRouterContext3("useSubmit"),{basename:t}=reactExports.useContext(NavigationContext),n=useRouteId(),o=e.fetch,u=e.navigate;return reactExports.useCallback(async(d,f={})=>{let{action:g,method:v,encType:w,formData:S,body:R}=getFormSubmissionInfo(d,t);if(f.navigate===!1){let _=f.fetcherKey||getUniqueFetcherId();await o(_,n,f.action||g,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:S,body:R,formMethod:f.method||v,formEncType:f.encType||w,flushSync:f.flushSync})}else await u(f.action||g,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:S,body:R,formMethod:f.method||v,formEncType:f.encType||w,replace:f.replace,state:f.state,fromRouteId:n,flushSync:f.flushSync,viewTransition:f.viewTransition})},[o,u,t,n])}function useFormAction(e,{relative:t}={}){let{basename:n}=reactExports.useContext(NavigationContext),o=reactExports.useContext(RouteContext);invariant$1(o,"useFormAction must be used inside a RouteContext");let[u]=o.matches.slice(-1),d={...useResolvedPath(e||".",{relative:t})},f=useLocation();if(e==null){d.search=f.search;let g=new URLSearchParams(d.search),v=g.getAll("index");if(v.some(S=>S==="")){g.delete("index"),v.filter(R=>R).forEach(R=>g.append("index",R));let S=g.toString();d.search=S?`?${S}`:""}}return(!e||e===".")&&u.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(d.pathname=d.pathname==="/"?n:joinPaths([n,d.pathname])),createPath(d)}function useViewTransitionState(e,{relative:t}={}){let n=reactExports.useContext(ViewTransitionContext);invariant$1(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=useDataRouterContext3("useViewTransitionState"),u=useResolvedPath(e,{relative:t});if(!n.isTransitioning)return!1;let d=stripBasename(n.currentLocation.pathname,o)||n.currentLocation.pathname,f=stripBasename(n.nextLocation.pathname,o)||n.nextLocation.pathname;return matchPath(u.pathname,f)!=null||matchPath(u.pathname,d)!=null}var reactDomExports=requireReactDom();const ReactDOM=getDefaultExportFromCjs(reactDomExports);function r(e){var t,n,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var u=e.length;for(t=0;t<u;t++)e[t]&&(n=r(e[t]))&&(o&&(o+=" "),o+=n)}else for(n in e)e[n]&&(o&&(o+=" "),o+=n);return o}function clsx(){for(var e,t,n=0,o="",u=arguments.length;n<u;n++)(e=arguments[n])&&(t=r(e))&&(o&&(o+=" "),o+=t);return o}var EventKeys=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function isEventKey(e){if(typeof e!="string")return!1;var t=EventKeys;return t.includes(e)}var SVGElementPropKeys=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function isSvgElementPropKey(e){if(typeof e!="string")return!1;var t=SVGElementPropKeys;return t.includes(e)}function isDataAttribute(e){return typeof e=="string"&&e.startsWith("data-")}function svgPropertiesNoEvents(e){var t=Object.entries(e).filter(n=>{var[o]=n;return isSvgElementPropKey(o)||isDataAttribute(o)});return Object.fromEntries(t)}function svgPropertiesNoEventsFromUnknown(e){if(e==null)return null;if(reactExports.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return svgPropertiesNoEvents(t)}return typeof e=="object"&&!Array.isArray(e)?svgPropertiesNoEvents(e):null}function svgPropertiesAndEvents(e){var t=Object.entries(e).filter(n=>{var[o]=n;return isSvgElementPropKey(o)||isDataAttribute(o)||isEventKey(o)});return Object.fromEntries(t)}var _excluded$d=["children","width","height","viewBox","className","style","title","desc"];function _extends$h(){return _extends$h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$h.apply(null,arguments)}function _objectWithoutProperties$d(e,t){if(e==null)return{};var n,o,u=_objectWithoutPropertiesLoose$d(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(o=0;o<d.length;o++)n=d[o],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(u[n]=e[n])}return u}function _objectWithoutPropertiesLoose$d(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;n[o]=e[o]}return n}var Surface=reactExports.forwardRef((e,t)=>{var{children:n,width:o,height:u,viewBox:d,className:f,style:g,title:v,desc:w}=e,S=_objectWithoutProperties$d(e,_excluded$d),R=d||{width:o,height:u,x:0,y:0},_=clsx("recharts-surface",f);return reactExports.createElement("svg",_extends$h({},svgPropertiesAndEvents(S),{className:_,width:o,height:u,style:g,viewBox:"".concat(R.x," ").concat(R.y," ").concat(R.width," ").concat(R.height),ref:t}),reactExports.createElement("title",null,v),reactExports.createElement("desc",null,w),n)}),_excluded$c=["children","className"];function _extends$g(){return _extends$g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$g.apply(null,arguments)}function _objectWithoutProperties$c(e,t){if(e==null)return{};var n,o,u=_objectWithoutPropertiesLoose$c(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(o=0;o<d.length;o++)n=d[o],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(u[n]=e[n])}return u}function _objectWithoutPropertiesLoose$c(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;n[o]=e[o]}return n}var Layer$2=reactExports.forwardRef((e,t)=>{var{children:n,className:o}=e,u=_objectWithoutProperties$c(e,_excluded$c),d=clsx("recharts-layer",o);return reactExports.createElement("g",_extends$g({className:d},svgPropertiesAndEvents(u),{ref:t}),n)}),LegendPortalContext=reactExports.createContext(null);function constant$1(e){return function(){return e}}const cos=Math.cos,sin=Math.sin,sqrt$1=Math.sqrt,pi$1=Math.PI,tau$1=2*pi$1,pi=Math.PI,tau=2*pi,epsilon=1e-6,tauEpsilon=tau-epsilon;function append(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function appendRound(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return append;const n=10**t;return function(o){this._+=o[0];for(let u=1,d=o.length;u<d;++u)this._+=Math.round(arguments[u]*n)/n+o[u]}}let Path$1=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?append:appendRound(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,o,u){this._append`Q${+t},${+n},${this._x1=+o},${this._y1=+u}`}bezierCurveTo(t,n,o,u,d,f){this._append`C${+t},${+n},${+o},${+u},${this._x1=+d},${this._y1=+f}`}arcTo(t,n,o,u,d){if(t=+t,n=+n,o=+o,u=+u,d=+d,d<0)throw new Error(`negative radius: ${d}`);let f=this._x1,g=this._y1,v=o-t,w=u-n,S=f-t,R=g-n,_=S*S+R*R;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(_>epsilon)if(!(Math.abs(R*v-w*S)>epsilon)||!d)this._append`L${this._x1=t},${this._y1=n}`;else{let F=o-f,M=u-g,I=v*v+w*w,N=F*F+M*M,B=Math.sqrt(I),H=Math.sqrt(_),U=d*Math.tan((pi-Math.acos((I+_-N)/(2*B*H)))/2),$=U/H,z=U/B;Math.abs($-1)>epsilon&&this._append`L${t+$*S},${n+$*R}`,this._append`A${d},${d},0,0,${+(R*F>S*M)},${this._x1=t+z*v},${this._y1=n+z*w}`}}arc(t,n,o,u,d,f){if(t=+t,n=+n,o=+o,f=!!f,o<0)throw new Error(`negative radius: ${o}`);let g=o*Math.cos(u),v=o*Math.sin(u),w=t+g,S=n+v,R=1^f,_=f?u-d:d-u;this._x1===null?this._append`M${w},${S}`:(Math.abs(this._x1-w)>epsilon||Math.abs(this._y1-S)>epsilon)&&this._append`L${w},${S}`,o&&(_<0&&(_=_%tau+tau),_>tauEpsilon?this._append`A${o},${o},0,1,${R},${t-g},${n-v}A${o},${o},0,1,${R},${this._x1=w},${this._y1=S}`:_>epsilon&&this._append`A${o},${o},0,${+(_>=pi)},${R},${this._x1=t+o*Math.cos(d)},${this._y1=n+o*Math.sin(d)}`)}rect(t,n,o,u){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${o=+o}v${+u}h${-o}Z`}toString(){return this._}};function withPath(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const o=Math.floor(n);if(!(o>=0))throw new RangeError(`invalid digits: ${n}`);t=o}return e},()=>new Path$1(t)}function array(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Linear(e){this._context=e}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function curveLinear(e){return new Linear(e)}function x$1(e){return e[0]}function y(e){return e[1]}function shapeLine(e,t){var n=constant$1(!0),o=null,u=curveLinear,d=null,f=withPath(g);e=typeof e=="function"?e:e===void 0?x$1:constant$1(e),t=typeof t=="function"?t:t===void 0?y:constant$1(t);function g(v){var w,S=(v=array(v)).length,R,_=!1,F;for(o==null&&(d=u(F=f())),w=0;w<=S;++w)!(w<S&&n(R=v[w],w,v))===_&&((_=!_)?d.lineStart():d.lineEnd()),_&&d.point(+e(R,w,v),+t(R,w,v));if(F)return d=null,F+""||null}return g.x=function(v){return arguments.length?(e=typeof v=="function"?v:constant$1(+v),g):e},g.y=function(v){return arguments.length?(t=typeof v=="function"?v:constant$1(+v),g):t},g.defined=function(v){return arguments.length?(n=typeof v=="function"?v:constant$1(!!v),g):n},g.curve=function(v){return arguments.length?(u=v,o!=null&&(d=u(o)),g):u},g.context=function(v){return arguments.length?(v==null?o=d=null:d=u(o=v),g):o},g}function shapeArea(e,t,n){var o=null,u=constant$1(!0),d=null,f=curveLinear,g=null,v=withPath(w);e=typeof e=="function"?e:e===void 0?x$1:constant$1(+e),t=typeof t=="function"?t:constant$1(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?y:constant$1(+n);function w(R){var _,F,M,I=(R=array(R)).length,N,B=!1,H,U=new Array(I),$=new Array(I);for(d==null&&(g=f(H=v())),_=0;_<=I;++_){if(!(_<I&&u(N=R[_],_,R))===B)if(B=!B)F=_,g.areaStart(),g.lineStart();else{for(g.lineEnd(),g.lineStart(),M=_-1;M>=F;--M)g.point(U[M],$[M]);g.lineEnd(),g.areaEnd()}B&&(U[_]=+e(N,_,R),$[_]=+t(N,_,R),g.point(o?+o(N,_,R):U[_],n?+n(N,_,R):$[_]))}if(H)return g=null,H+""||null}function S(){return shapeLine().defined(u).curve(f).context(d)}return w.x=function(R){return arguments.length?(e=typeof R=="function"?R:constant$1(+R),o=null,w):e},w.x0=function(R){return arguments.length?(e=typeof R=="function"?R:constant$1(+R),w):e},w.x1=function(R){return arguments.length?(o=R==null?null:typeof R=="function"?R:constant$1(+R),w):o},w.y=function(R){return arguments.length?(t=typeof R=="function"?R:constant$1(+R),n=null,w):t},w.y0=function(R){return arguments.length?(t=typeof R=="function"?R:constant$1(+R),w):t},w.y1=function(R){return arguments.length?(n=R==null?null:typeof R=="function"?R:constant$1(+R),w):n},w.lineX0=w.lineY0=function(){return S().x(e).y(t)},w.lineY1=function(){return S().x(e).y(n)},w.lineX1=function(){return S().x(o).y(t)},w.defined=function(R){return arguments.length?(u=typeof R=="function"?R:constant$1(!!R),w):u},w.curve=function(R){return arguments.length?(f=R,d!=null&&(g=f(d)),w):f},w.context=function(R){return arguments.length?(R==null?d=g=null:g=f(d=R),w):d},w}class Bump{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function bumpX(e){return new Bump(e,!0)}function bumpY(e){return new Bump(e,!1)}const symbolCircle={draw(e,t){const n=sqrt$1(t/pi$1);e.moveTo(n,0),e.arc(0,0,n,0,tau$1)}},symbolCross={draw(e,t){const n=sqrt$1(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},tan30=sqrt$1(1/3),tan30_2=tan30*2,symbolDiamond={draw(e,t){const n=sqrt$1(t/tan30_2),o=n*tan30;e.moveTo(0,-n),e.lineTo(o,0),e.lineTo(0,n),e.lineTo(-o,0),e.closePath()}},symbolSquare={draw(e,t){const n=sqrt$1(t),o=-n/2;e.rect(o,o,n,n)}},ka=.8908130915292852,kr=sin(pi$1/10)/sin(7*pi$1/10),kx=sin(tau$1/10)*kr,ky=-cos(tau$1/10)*kr,symbolStar={draw(e,t){const n=sqrt$1(t*ka),o=kx*n,u=ky*n;e.moveTo(0,-n),e.lineTo(o,u);for(let d=1;d<5;++d){const f=tau$1*d/5,g=cos(f),v=sin(f);e.lineTo(v*n,-g*n),e.lineTo(g*o-v*u,v*o+g*u)}e.closePath()}},sqrt3=sqrt$1(3),symbolTriangle={draw(e,t){const n=-sqrt$1(t/(sqrt3*3));e.moveTo(0,n*2),e.lineTo(-sqrt3*n,-n),e.lineTo(sqrt3*n,-n),e.closePath()}},c$1=-.5,s=sqrt$1(3)/2,k=1/sqrt$1(12),a$1=(k/2+1)*3,symbolWye={draw(e,t){const n=sqrt$1(t/a$1),o=n/2,u=n*k,d=o,f=n*k+n,g=-d,v=f;e.moveTo(o,u),e.lineTo(d,f),e.lineTo(g,v),e.lineTo(c$1*o-s*u,s*o+c$1*u),e.lineTo(c$1*d-s*f,s*d+c$1*f),e.lineTo(c$1*g-s*v,s*g+c$1*v),e.lineTo(c$1*o+s*u,c$1*u-s*o),e.lineTo(c$1*d+s*f,c$1*f-s*d),e.lineTo(c$1*g+s*v,c$1*v-s*g),e.closePath()}};function Symbol$1(e,t){let n=null,o=withPath(u);e=typeof e=="function"?e:constant$1(e||symbolCircle),t=typeof t=="function"?t:constant$1(t===void 0?64:+t);function u(){let d;if(n||(n=d=o()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),d)return n=null,d+""||null}return u.type=function(d){return arguments.length?(e=typeof d=="function"?d:constant$1(d),u):e},u.size=function(d){return arguments.length?(t=typeof d=="function"?d:constant$1(+d),u):t},u.context=function(d){return arguments.length?(n=d??null,u):n},u}function noop$7(){}function point$2(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Basis(e){this._context=e}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$2(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function curveBasis(e){return new Basis(e)}function BasisClosed(e){this._context=e}BasisClosed.prototype={areaStart:noop$7,areaEnd:noop$7,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:point$2(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function curveBasisClosed(e){return new BasisClosed(e)}function BasisOpen(e){this._context=e}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,o=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,o):this._context.moveTo(n,o);break;case 3:this._point=4;default:point$2(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function curveBasisOpen(e){return new BasisOpen(e)}function LinearClosed(e){this._context=e}LinearClosed.prototype={areaStart:noop$7,areaEnd:noop$7,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function curveLinearClosed(e){return new LinearClosed(e)}function sign(e){return e<0?-1:1}function slope3(e,t,n){var o=e._x1-e._x0,u=t-e._x1,d=(e._y1-e._y0)/(o||u<0&&-0),f=(n-e._y1)/(u||o<0&&-0),g=(d*u+f*o)/(o+u);return(sign(d)+sign(f))*Math.min(Math.abs(d),Math.abs(f),.5*Math.abs(g))||0}function slope2(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function point$1(e,t,n){var o=e._x0,u=e._y0,d=e._x1,f=e._y1,g=(d-o)/3;e._context.bezierCurveTo(o+g,u+g*t,d-g,f-g*n,d,f)}function MonotoneX(e){this._context=e}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$1(this,this._t0,slope2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,point$1(this,slope2(this,n=slope3(this,e,t)),n);break;default:point$1(this,this._t0,n=slope3(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function MonotoneY(e){this._context=new ReflectContext(e)}(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(e,t){MonotoneX.prototype.point.call(this,t,e)};function ReflectContext(e){this._context=e}ReflectContext.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,o,u,d){this._context.bezierCurveTo(t,e,o,n,d,u)}};function monotoneX(e){return new MonotoneX(e)}function monotoneY(e){return new MonotoneY(e)}function Natural(e){this._context=e}Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var o=controlPoints(e),u=controlPoints(t),d=0,f=1;f<n;++d,++f)this._context.bezierCurveTo(o[0][d],u[0][d],o[1][d],u[1][d],e[f],t[f]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function controlPoints(e){var t,n=e.length-1,o,u=new Array(n),d=new Array(n),f=new Array(n);for(u[0]=0,d[0]=2,f[0]=e[0]+2*e[1],t=1;t<n-1;++t)u[t]=1,d[t]=4,f[t]=4*e[t]+2*e[t+1];for(u[n-1]=2,d[n-1]=7,f[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)o=u[t]/d[t-1],d[t]-=o,f[t]-=o*f[t-1];for(u[n-1]=f[n-1]/d[n-1],t=n-2;t>=0;--t)u[t]=(f[t]-u[t+1])/d[t];for(d[n-1]=(e[n]+u[n-1])/2,t=0;t<n-1;++t)d[t]=2*e[t+1]-u[t+1];return[u,d]}function curveNatural(e){return new Natural(e)}function Step(e,t){this._context=e,this._t=t}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function curveStep(e){return new Step(e,.5)}function stepBefore(e){return new Step(e,0)}function stepAfter(e){return new Step(e,1)}function stackOffsetNone(e,t){if((f=e.length)>1)for(var n=1,o,u,d=e[t[0]],f,g=d.length;n<f;++n)for(u=d,d=e[t[n]],o=0;o<g;++o)d[o][1]+=d[o][0]=isNaN(u[o][1])?u[o][0]:u[o][1]}function stackOrderNone(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function stackValue(e,t){return e[t]}function stackSeries(e){const t=[];return t.key=e,t}function shapeStack(){var e=constant$1([]),t=stackOrderNone,n=stackOffsetNone,o=stackValue;function u(d){var f=Array.from(e.apply(this,arguments),stackSeries),g,v=f.length,w=-1,S;for(const R of d)for(g=0,++w;g<v;++g)(f[g][w]=[0,+o(R,f[g].key,w,d)]).data=R;for(g=0,S=array(t(f));g<v;++g)f[S[g]].index=g;return n(f,S),f}return u.keys=function(d){return arguments.length?(e=typeof d=="function"?d:constant$1(Array.from(d)),u):e},u.value=function(d){return arguments.length?(o=typeof d=="function"?d:constant$1(+d),u):o},u.order=function(d){return arguments.length?(t=d==null?stackOrderNone:typeof d=="function"?d:constant$1(Array.from(d)),u):t},u.offset=function(d){return arguments.length?(n=d??stackOffsetNone,u):n},u}function stackOffsetExpand(e,t){if((o=e.length)>0){for(var n,o,u=0,d=e[0].length,f;u<d;++u){for(f=n=0;n<o;++n)f+=e[n][u][1]||0;if(f)for(n=0;n<o;++n)e[n][u][1]/=f}stackOffsetNone(e,t)}}function stackOffsetSilhouette(e,t){if((u=e.length)>0){for(var n=0,o=e[t[0]],u,d=o.length;n<d;++n){for(var f=0,g=0;f<u;++f)g+=e[f][n][1]||0;o[n][1]+=o[n][0]=-g/2}stackOffsetNone(e,t)}}function stackOffsetWiggle(e,t){if(!(!((f=e.length)>0)||!((d=(u=e[t[0]]).length)>0))){for(var n=0,o=1,u,d,f;o<d;++o){for(var g=0,v=0,w=0;g<f;++g){for(var S=e[t[g]],R=S[o][1]||0,_=S[o-1][1]||0,F=(R-_)/2,M=0;M<g;++M){var I=e[t[M]],N=I[o][1]||0,B=I[o-1][1]||0;F+=N-B}v+=R,w+=F*R}u[o-1][1]+=u[o-1][0]=n,v&&(n-=w/v)}u[o-1][1]+=u[o-1][0]=n,stackOffsetNone(e,t)}}var get$2={},isUnsafeProperty={},hasRequiredIsUnsafeProperty;function requireIsUnsafeProperty(){return hasRequiredIsUnsafeProperty||(hasRequiredIsUnsafeProperty=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(isUnsafeProperty)),isUnsafeProperty}var isDeepKey={},hasRequiredIsDeepKey;function requireIsDeepKey(){return hasRequiredIsDeepKey||(hasRequiredIsDeepKey=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(isDeepKey)),isDeepKey}var toKey={},hasRequiredToKey;function requireToKey(){return hasRequiredToKey||(hasRequiredToKey=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(toKey)),toKey}var toPath={},toString$2={},hasRequiredToString;function requireToString(){return hasRequiredToString||(hasRequiredToString=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(t).join(",");const o=String(n);return o==="0"&&Object.is(Number(n),-0)?"-0":o}e.toString=t})(toString$2)),toString$2}var hasRequiredToPath;function requireToPath(){return hasRequiredToPath||(hasRequiredToPath=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireToString(),n=requireToKey();function o(u){if(Array.isArray(u))return u.map(n.toKey);if(typeof u=="symbol")return[u];u=t.toString(u);const d=[],f=u.length;if(f===0)return d;let g=0,v="",w="",S=!1;for(u.charCodeAt(0)===46&&(d.push(""),g++);g<f;){const R=u[g];w?R==="\\"&&g+1<f?(g++,v+=u[g]):R===w?w="":v+=R:S?R==='"'||R==="'"?w=R:R==="]"?(S=!1,d.push(v),v=""):v+=R:R==="["?(S=!0,v&&(d.push(v),v="")):R==="."?v&&(d.push(v),v=""):v+=R,g++}return v&&d.push(v),d}e.toPath=o})(toPath)),toPath}var hasRequiredGet$1;function requireGet$1(){return hasRequiredGet$1||(hasRequiredGet$1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIsUnsafeProperty(),n=requireIsDeepKey(),o=requireToKey(),u=requireToPath();function d(g,v,w){if(g==null)return w;switch(typeof v){case"string":{if(t.isUnsafeProperty(v))return w;const S=g[v];return S===void 0?n.isDeepKey(v)?d(g,u.toPath(v),w):w:S}case"number":case"symbol":{typeof v=="number"&&(v=o.toKey(v));const S=g[v];return S===void 0?w:S}default:{if(Array.isArray(v))return f(g,v,w);if(Object.is(v?.valueOf(),-0)?v="-0":v=String(v),t.isUnsafeProperty(v))return w;const S=g[v];return S===void 0?w:S}}}function f(g,v,w){if(v.length===0)return w;let S=g;for(let R=0;R<v.length;R++){if(S==null||t.isUnsafeProperty(v[R]))return w;S=S[v[R]]}return S===void 0?w:S}e.get=d})(get$2)),get$2}var get$1,hasRequiredGet;function requireGet(){return hasRequiredGet||(hasRequiredGet=1,get$1=requireGet$1().get),get$1}var getExports=requireGet();const get=getDefaultExportFromCjs(getExports);var mathSign=e=>e===0?0:e>0?1:-1,isNan=e=>typeof e=="number"&&e!=+e,isPercent=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,isNumber$1=e=>(typeof e=="number"||e instanceof Number)&&!isNan(e),isNumOrStr=e=>isNumber$1(e)||typeof e=="string",idCounter$2=0,uniqueId=e=>{var t=++idCounter$2;return"".concat(e||"").concat(t)},getPercentValue=function(t,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!isNumber$1(t)&&typeof t!="string")return o;var d;if(isPercent(t)){if(n==null)return o;var f=t.indexOf("%");d=n*parseFloat(t.slice(0,f))/100}else d=+t;return isNan(d)&&(d=o),u&&n!=null&&d>n&&(d=n),d},hasDuplicate=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},o=0;o<t;o++)if(!n[e[o]])n[e[o]]=!0;else return!0;return!1};function interpolate$2(e,t,n){return isNumber$1(e)&&isNumber$1(t)?e+n*(t-e):t}function findEntryInArray(e,t,n){if(!(!e||!e.length))return e.find(o=>o&&(typeof t=="function"?t(o):get(o,t))===n)}var isNullish$1=e=>e===null||typeof e>"u",upperFirst=e=>isNullish$1(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),_excluded$b=["type","size","sizeType"];function _extends$f(){return _extends$f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$f.apply(null,arguments)}function ownKeys$r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$r(Object(n),!0).forEach(function(o){_defineProperty$s(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$r(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$s(e,t,n){return(t=_toPropertyKey$s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$s(e){var t=_toPrimitive$s(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$s(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _objectWithoutProperties$b(e,t){if(e==null)return{};var n,o,u=_objectWithoutPropertiesLoose$b(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(o=0;o<d.length;o++)n=d[o],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(u[n]=e[n])}return u}function _objectWithoutPropertiesLoose$b(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;n[o]=e[o]}return n}var symbolFactories={symbolCircle,symbolCross,symbolDiamond,symbolSquare,symbolStar,symbolTriangle,symbolWye},RADIAN$1=Math.PI/180,getSymbolFactory=e=>{var t="symbol".concat(upperFirst(e));return symbolFactories[t]||symbolCircle},calculateAreaSize=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var o=18*RADIAN$1;return 1.25*e*e*(Math.tan(o)-Math.tan(o*2)*Math.tan(o)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},registerSymbol=(e,t)=>{symbolFactories["symbol".concat(upperFirst(e))]=t},Symbols=e=>{var{type:t="circle",size:n=64,sizeType:o="area"}=e,u=_objectWithoutProperties$b(e,_excluded$b),d=_objectSpread$r(_objectSpread$r({},u),{},{type:t,size:n,sizeType:o}),f="circle";typeof t=="string"&&(f=t);var g=()=>{var _=getSymbolFactory(f),F=Symbol$1().type(_).size(calculateAreaSize(n,o,f)),M=F();if(M!==null)return M},{className:v,cx:w,cy:S}=d,R=svgPropertiesAndEvents(d);return w===+w&&S===+S&&n===+n?reactExports.createElement("path",_extends$f({},R,{className:clsx("recharts-symbols",v),transform:"translate(".concat(w,", ").concat(S,")"),d:g()})):null};Symbols.registerSymbol=registerSymbol;var adaptEventHandlers=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(reactExports.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var o={};return Object.keys(n).forEach(u=>{isEventKey(u)&&(o[u]=(d=>n[u](n,d)))}),o},getEventHandlerOfChild=(e,t,n)=>o=>(e(t,n,o),null),adaptEventsOfChild=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var o=null;return Object.keys(e).forEach(u=>{var d=e[u];isEventKey(u)&&typeof d=="function"&&(o||(o={}),o[u]=getEventHandlerOfChild(d,t,n))}),o},uniqBy$3={},uniqBy$2={},hasRequiredUniqBy$2;function requireUniqBy$2(){return hasRequiredUniqBy$2||(hasRequiredUniqBy$2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,o){const u=new Map;for(let d=0;d<n.length;d++){const f=n[d],g=o(f);u.has(g)||u.set(g,f)}return Array.from(u.values())}e.uniqBy=t})(uniqBy$2)),uniqBy$2}var identity$4={},hasRequiredIdentity;function requireIdentity(){return hasRequiredIdentity||(hasRequiredIdentity=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(identity$4)),identity$4}var isArrayLikeObject={},isArrayLike={},isLength={},hasRequiredIsLength;function requireIsLength(){return hasRequiredIsLength||(hasRequiredIsLength=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(isLength)),isLength}var hasRequiredIsArrayLike;function requireIsArrayLike(){return hasRequiredIsArrayLike||(hasRequiredIsArrayLike=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIsLength();function n(o){return o!=null&&typeof o!="function"&&t.isLength(o.length)}e.isArrayLike=n})(isArrayLike)),isArrayLike}var isObjectLike={},hasRequiredIsObjectLike;function requireIsObjectLike(){return hasRequiredIsObjectLike||(hasRequiredIsObjectLike=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(isObjectLike)),isObjectLike}var hasRequiredIsArrayLikeObject;function requireIsArrayLikeObject(){return hasRequiredIsArrayLikeObject||(hasRequiredIsArrayLikeObject=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIsArrayLike(),n=requireIsObjectLike();function o(u){return n.isObjectLike(u)&&t.isArrayLike(u)}e.isArrayLikeObject=o})(isArrayLikeObject)),isArrayLikeObject}var iteratee={},property={},hasRequiredProperty;function requireProperty(){return hasRequiredProperty||(hasRequiredProperty=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireGet$1();function n(o){return function(u){return t.get(u,o)}}e.property=n})(property)),property}var matches={},isMatch={},isMatchWith={},isObject$2={},hasRequiredIsObject;function requireIsObject(){return hasRequiredIsObject||(hasRequiredIsObject=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(isObject$2)),isObject$2}var isPrimitive={},hasRequiredIsPrimitive;function requireIsPrimitive(){return hasRequiredIsPrimitive||(hasRequiredIsPrimitive=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(isPrimitive)),isPrimitive}var eq={},hasRequiredEq;function requireEq(){return hasRequiredEq||(hasRequiredEq=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,o){return n===o||Number.isNaN(n)&&Number.isNaN(o)}e.eq=t})(eq)),eq}var hasRequiredIsMatchWith;function requireIsMatchWith(){return hasRequiredIsMatchWith||(hasRequiredIsMatchWith=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIsObject(),n=requireIsPrimitive(),o=requireEq();function u(S,R,_){return typeof _!="function"?u(S,R,()=>{}):d(S,R,function F(M,I,N,B,H,U){const $=_(M,I,N,B,H,U);return $!==void 0?!!$:d(M,I,F,U)},new Map)}function d(S,R,_,F){if(R===S)return!0;switch(typeof R){case"object":return f(S,R,_,F);case"function":return Object.keys(R).length>0?d(S,{...R},_,F):o.eq(S,R);default:return t.isObject(S)?typeof R=="string"?R==="":!0:o.eq(S,R)}}function f(S,R,_,F){if(R==null)return!0;if(Array.isArray(R))return v(S,R,_,F);if(R instanceof Map)return g(S,R,_,F);if(R instanceof Set)return w(S,R,_,F);const M=Object.keys(R);if(S==null)return M.length===0;if(M.length===0)return!0;if(F?.has(R))return F.get(R)===S;F?.set(R,S);try{for(let I=0;I<M.length;I++){const N=M[I];if(!n.isPrimitive(S)&&!(N in S)||R[N]===void 0&&S[N]!==void 0||R[N]===null&&S[N]!==null||!_(S[N],R[N],N,S,R,F))return!1}return!0}finally{F?.delete(R)}}function g(S,R,_,F){if(R.size===0)return!0;if(!(S instanceof Map))return!1;for(const[M,I]of R.entries()){const N=S.get(M);if(_(N,I,M,S,R,F)===!1)return!1}return!0}function v(S,R,_,F){if(R.length===0)return!0;if(!Array.isArray(S))return!1;const M=new Set;for(let I=0;I<R.length;I++){const N=R[I];let B=!1;for(let H=0;H<S.length;H++){if(M.has(H))continue;const U=S[H];let $=!1;if(_(U,N,I,S,R,F)&&($=!0),$){M.add(H),B=!0;break}}if(!B)return!1}return!0}function w(S,R,_,F){return R.size===0?!0:S instanceof Set?v([...S],[...R],_,F):!1}e.isMatchWith=u,e.isSetMatch=w})(isMatchWith)),isMatchWith}var hasRequiredIsMatch;function requireIsMatch(){return hasRequiredIsMatch||(hasRequiredIsMatch=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIsMatchWith();function n(o,u){return t.isMatchWith(o,u,()=>{})}e.isMatch=n})(isMatch)),isMatch}var cloneDeep$1={},cloneDeepWith$1={},getSymbols={},hasRequiredGetSymbols;function requireGetSymbols(){return hasRequiredGetSymbols||(hasRequiredGetSymbols=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(o=>Object.prototype.propertyIsEnumerable.call(n,o))}e.getSymbols=t})(getSymbols)),getSymbols}var getTag={},hasRequiredGetTag;function requireGetTag(){return hasRequiredGetTag||(hasRequiredGetTag=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(getTag)),getTag}var tags={},hasRequiredTags;function requireTags(){return hasRequiredTags||(hasRequiredTags=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",o="[object Number]",u="[object Boolean]",d="[object Arguments]",f="[object Symbol]",g="[object Date]",v="[object Map]",w="[object Set]",S="[object Array]",R="[object Function]",_="[object ArrayBuffer]",F="[object Object]",M="[object Error]",I="[object DataView]",N="[object Uint8Array]",B="[object Uint8ClampedArray]",H="[object Uint16Array]",U="[object Uint32Array]",$="[object BigUint64Array]",z="[object Int8Array]",j="[object Int16Array]",J="[object Int32Array]",ie="[object BigInt64Array]",se="[object Float32Array]",fe="[object Float64Array]";e.argumentsTag=d,e.arrayBufferTag=_,e.arrayTag=S,e.bigInt64ArrayTag=ie,e.bigUint64ArrayTag=$,e.booleanTag=u,e.dataViewTag=I,e.dateTag=g,e.errorTag=M,e.float32ArrayTag=se,e.float64ArrayTag=fe,e.functionTag=R,e.int16ArrayTag=j,e.int32ArrayTag=J,e.int8ArrayTag=z,e.mapTag=v,e.numberTag=o,e.objectTag=F,e.regexpTag=t,e.setTag=w,e.stringTag=n,e.symbolTag=f,e.uint16ArrayTag=H,e.uint32ArrayTag=U,e.uint8ArrayTag=N,e.uint8ClampedArrayTag=B})(tags)),tags}var isTypedArray$1={},hasRequiredIsTypedArray;function requireIsTypedArray(){return hasRequiredIsTypedArray||(hasRequiredIsTypedArray=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(isTypedArray$1)),isTypedArray$1}var hasRequiredCloneDeepWith$1;function requireCloneDeepWith$1(){return hasRequiredCloneDeepWith$1||(hasRequiredCloneDeepWith$1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireGetSymbols(),n=requireGetTag(),o=requireTags(),u=requireIsPrimitive(),d=requireIsTypedArray();function f(S,R){return g(S,void 0,S,new Map,R)}function g(S,R,_,F=new Map,M=void 0){const I=M?.(S,R,_,F);if(I!==void 0)return I;if(u.isPrimitive(S))return S;if(F.has(S))return F.get(S);if(Array.isArray(S)){const N=new Array(S.length);F.set(S,N);for(let B=0;B<S.length;B++)N[B]=g(S[B],B,_,F,M);return Object.hasOwn(S,"index")&&(N.index=S.index),Object.hasOwn(S,"input")&&(N.input=S.input),N}if(S instanceof Date)return new Date(S.getTime());if(S instanceof RegExp){const N=new RegExp(S.source,S.flags);return N.lastIndex=S.lastIndex,N}if(S instanceof Map){const N=new Map;F.set(S,N);for(const[B,H]of S)N.set(B,g(H,B,_,F,M));return N}if(S instanceof Set){const N=new Set;F.set(S,N);for(const B of S)N.add(g(B,void 0,_,F,M));return N}if(typeof Buffer<"u"&&Buffer.isBuffer(S))return S.subarray();if(d.isTypedArray(S)){const N=new(Object.getPrototypeOf(S)).constructor(S.length);F.set(S,N);for(let B=0;B<S.length;B++)N[B]=g(S[B],B,_,F,M);return N}if(S instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&S instanceof SharedArrayBuffer)return S.slice(0);if(S instanceof DataView){const N=new DataView(S.buffer.slice(0),S.byteOffset,S.byteLength);return F.set(S,N),v(N,S,_,F,M),N}if(typeof File<"u"&&S instanceof File){const N=new File([S],S.name,{type:S.type});return F.set(S,N),v(N,S,_,F,M),N}if(typeof Blob<"u"&&S instanceof Blob){const N=new Blob([S],{type:S.type});return F.set(S,N),v(N,S,_,F,M),N}if(S instanceof Error){const N=new S.constructor;return F.set(S,N),N.message=S.message,N.name=S.name,N.stack=S.stack,N.cause=S.cause,v(N,S,_,F,M),N}if(S instanceof Boolean){const N=new Boolean(S.valueOf());return F.set(S,N),v(N,S,_,F,M),N}if(S instanceof Number){const N=new Number(S.valueOf());return F.set(S,N),v(N,S,_,F,M),N}if(S instanceof String){const N=new String(S.valueOf());return F.set(S,N),v(N,S,_,F,M),N}if(typeof S=="object"&&w(S)){const N=Object.create(Object.getPrototypeOf(S));return F.set(S,N),v(N,S,_,F,M),N}return S}function v(S,R,_=S,F,M){const I=[...Object.keys(R),...t.getSymbols(R)];for(let N=0;N<I.length;N++){const B=I[N],H=Object.getOwnPropertyDescriptor(S,B);(H==null||H.writable)&&(S[B]=g(R[B],B,_,F,M))}}function w(S){switch(n.getTag(S)){case o.argumentsTag:case o.arrayTag:case o.arrayBufferTag:case o.dataViewTag:case o.booleanTag:case o.dateTag:case o.float32ArrayTag:case o.float64ArrayTag:case o.int8ArrayTag:case o.int16ArrayTag:case o.int32ArrayTag:case o.mapTag:case o.numberTag:case o.objectTag:case o.regexpTag:case o.setTag:case o.stringTag:case o.symbolTag:case o.uint8ArrayTag:case o.uint8ClampedArrayTag:case o.uint16ArrayTag:case o.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=f,e.cloneDeepWithImpl=g,e.copyProperties=v})(cloneDeepWith$1)),cloneDeepWith$1}var hasRequiredCloneDeep$1;function requireCloneDeep$1(){return hasRequiredCloneDeep$1||(hasRequiredCloneDeep$1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireCloneDeepWith$1();function n(o){return t.cloneDeepWithImpl(o,void 0,o,new Map,void 0)}e.cloneDeep=n})(cloneDeep$1)),cloneDeep$1}var hasRequiredMatches;function requireMatches(){return hasRequiredMatches||(hasRequiredMatches=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIsMatch(),n=requireCloneDeep$1();function o(u){return u=n.cloneDeep(u),d=>t.isMatch(d,u)}e.matches=o})(matches)),matches}var matchesProperty={},cloneDeep={},cloneDeepWith={},hasRequiredCloneDeepWith;function requireCloneDeepWith(){return hasRequiredCloneDeepWith||(hasRequiredCloneDeepWith=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireCloneDeepWith$1(),n=requireTags();function o(u,d){return t.cloneDeepWith(u,(f,g,v,w)=>{const S=d?.(f,g,v,w);if(S!==void 0)return S;if(typeof u=="object")switch(Object.prototype.toString.call(u)){case n.numberTag:case n.stringTag:case n.booleanTag:{const R=new u.constructor(u?.valueOf());return t.copyProperties(R,u),R}case n.argumentsTag:{const R={};return t.copyProperties(R,u),R.length=u.length,R[Symbol.iterator]=u[Symbol.iterator],R}default:return}})}e.cloneDeepWith=o})(cloneDeepWith)),cloneDeepWith}var hasRequiredCloneDeep;function requireCloneDeep(){return hasRequiredCloneDeep||(hasRequiredCloneDeep=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireCloneDeepWith();function n(o){return t.cloneDeepWith(o)}e.cloneDeep=n})(cloneDeep)),cloneDeep}var has$1={},isIndex={},hasRequiredIsIndex;function requireIsIndex(){return hasRequiredIsIndex||(hasRequiredIsIndex=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(o,u=Number.MAX_SAFE_INTEGER){switch(typeof o){case"number":return Number.isInteger(o)&&o>=0&&o<u;case"symbol":return!1;case"string":return t.test(o)}}e.isIndex=n})(isIndex)),isIndex}var isArguments={},hasRequiredIsArguments;function requireIsArguments(){return hasRequiredIsArguments||(hasRequiredIsArguments=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireGetTag();function n(o){return o!==null&&typeof o=="object"&&t.getTag(o)==="[object Arguments]"}e.isArguments=n})(isArguments)),isArguments}var hasRequiredHas;function requireHas(){return hasRequiredHas||(hasRequiredHas=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIsDeepKey(),n=requireIsIndex(),o=requireIsArguments(),u=requireToPath();function d(f,g){let v;if(Array.isArray(g)?v=g:typeof g=="string"&&t.isDeepKey(g)&&f?.[g]==null?v=u.toPath(g):v=[g],v.length===0)return!1;let w=f;for(let S=0;S<v.length;S++){const R=v[S];if((w==null||!Object.hasOwn(w,R))&&!((Array.isArray(w)||o.isArguments(w))&&n.isIndex(R)&&R<w.length))return!1;w=w[R]}return!0}e.has=d})(has$1)),has$1}var hasRequiredMatchesProperty;function requireMatchesProperty(){return hasRequiredMatchesProperty||(hasRequiredMatchesProperty=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIsMatch(),n=requireToKey(),o=requireCloneDeep(),u=requireGet$1(),d=requireHas();function f(g,v){switch(typeof g){case"object":{Object.is(g?.valueOf(),-0)&&(g="-0");break}case"number":{g=n.toKey(g);break}}return v=o.cloneDeep(v),function(w){const S=u.get(w,g);return S===void 0?d.has(w,g):v===void 0?S===void 0:t.isMatch(S,v)}}e.matchesProperty=f})(matchesProperty)),matchesProperty}var hasRequiredIteratee;function requireIteratee(){return hasRequiredIteratee||(hasRequiredIteratee=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIdentity(),n=requireProperty(),o=requireMatches(),u=requireMatchesProperty();function d(f){if(f==null)return t.identity;switch(typeof f){case"function":return f;case"object":return Array.isArray(f)&&f.length===2?u.matchesProperty(f[0],f[1]):o.matches(f);case"string":case"symbol":case"number":return n.property(f)}}e.iteratee=d})(iteratee)),iteratee}var hasRequiredUniqBy$1;function requireUniqBy$1(){return hasRequiredUniqBy$1||(hasRequiredUniqBy$1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireUniqBy$2(),n=requireIdentity(),o=requireIsArrayLikeObject(),u=requireIteratee();function d(f,g=n.identity){return o.isArrayLikeObject(f)?t.uniqBy(Array.from(f),u.iteratee(g)):[]}e.uniqBy=d})(uniqBy$3)),uniqBy$3}var uniqBy$1,hasRequiredUniqBy;function requireUniqBy(){return hasRequiredUniqBy||(hasRequiredUniqBy=1,uniqBy$1=requireUniqBy$1().uniqBy),uniqBy$1}var uniqByExports=requireUniqBy();const uniqBy=getDefaultExportFromCjs(uniqByExports);function getUniqPayload(e,t,n){return t===!0?uniqBy(e,n):typeof t=="function"?uniqBy(e,t):e}var withSelector$1={exports:{}},withSelector_production={},shim={exports:{}},useSyncExternalStoreShim_production={};var hasRequiredUseSyncExternalStoreShim_production;function requireUseSyncExternalStoreShim_production(){if(hasRequiredUseSyncExternalStoreShim_production)return useSyncExternalStoreShim_production;hasRequiredUseSyncExternalStoreShim_production=1;var e=requireReact();function t(R,_){return R===_&&(R!==0||1/R===1/_)||R!==R&&_!==_}var n=typeof Object.is=="function"?Object.is:t,o=e.useState,u=e.useEffect,d=e.useLayoutEffect,f=e.useDebugValue;function g(R,_){var F=_(),M=o({inst:{value:F,getSnapshot:_}}),I=M[0].inst,N=M[1];return d(function(){I.value=F,I.getSnapshot=_,v(I)&&N({inst:I})},[R,F,_]),u(function(){return v(I)&&N({inst:I}),R(function(){v(I)&&N({inst:I})})},[R]),f(F),F}function v(R){var _=R.getSnapshot;R=R.value;try{var F=_();return!n(R,F)}catch{return!0}}function w(R,_){return _()}var S=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?w:g;return useSyncExternalStoreShim_production.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:S,useSyncExternalStoreShim_production}var hasRequiredShim;function requireShim(){return hasRequiredShim||(hasRequiredShim=1,shim.exports=requireUseSyncExternalStoreShim_production()),shim.exports}var hasRequiredWithSelector_production;function requireWithSelector_production(){if(hasRequiredWithSelector_production)return withSelector_production;hasRequiredWithSelector_production=1;var e=requireReact(),t=requireShim();function n(w,S){return w===S&&(w!==0||1/w===1/S)||w!==w&&S!==S}var o=typeof Object.is=="function"?Object.is:n,u=t.useSyncExternalStore,d=e.useRef,f=e.useEffect,g=e.useMemo,v=e.useDebugValue;return withSelector_production.useSyncExternalStoreWithSelector=function(w,S,R,_,F){var M=d(null);if(M.current===null){var I={hasValue:!1,value:null};M.current=I}else I=M.current;M=g(function(){function B(j){if(!H){if(H=!0,U=j,j=_(j),F!==void 0&&I.hasValue){var J=I.value;if(F(J,j))return $=J}return $=j}if(J=$,o(U,j))return J;var ie=_(j);return F!==void 0&&F(J,ie)?(U=j,J):(U=j,$=ie)}var H=!1,U,$,z=R===void 0?null:R;return[function(){return B(S())},z===null?void 0:function(){return B(z())}]},[S,R,_,F]);var N=u(w,M[0],M[1]);return f(function(){I.hasValue=!0,I.value=N},[N]),v(N),N},withSelector_production}var hasRequiredWithSelector$1;function requireWithSelector$1(){return hasRequiredWithSelector$1||(hasRequiredWithSelector$1=1,withSelector$1.exports=requireWithSelector_production()),withSelector$1.exports}var withSelectorExports=requireWithSelector$1(),RechartsReduxContext=reactExports.createContext(null),noopDispatch=e=>e,useAppDispatch=()=>{var e=reactExports.useContext(RechartsReduxContext);return e?e.store.dispatch:noopDispatch},noop$6=()=>{},addNestedSubNoop=()=>noop$6,refEquality=(e,t)=>e===t;function useAppSelector(e){var t=reactExports.useContext(RechartsReduxContext);return withSelectorExports.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:addNestedSubNoop,t?t.store.getState:noop$6,t?t.store.getState:noop$6,t?e:noop$6,refEquality)}function assertIsFunction(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function assertIsObject(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function assertIsArrayOfFunctions(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(o=>typeof o=="function"?`function ${o.name||"unnamed"}()`:typeof o).join(", ");throw new TypeError(`${t}[${n}]`)}}var ensureIsArray=e=>Array.isArray(e)?e:[e];function getDependencies(e){const t=Array.isArray(e[0])?e[0]:e;return assertIsArrayOfFunctions(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function collectInputSelectorResults(e,t){const n=[],{length:o}=e;for(let u=0;u<o;u++)n.push(e[u].apply(null,t));return n}var StrongRef=class{constructor(e){this.value=e}deref(){return this.value}},Ref=typeof WeakRef<"u"?WeakRef:StrongRef,UNTERMINATED=0,TERMINATED=1;function createCacheNode(){return{s:UNTERMINATED,v:void 0,o:null,p:null}}function weakMapMemoize(e,t={}){let n=createCacheNode();const{resultEqualityCheck:o}=t;let u,d=0;function f(){let g=n;const{length:v}=arguments;for(let R=0,_=v;R<_;R++){const F=arguments[R];if(typeof F=="function"||typeof F=="object"&&F!==null){let M=g.o;M===null&&(g.o=M=new WeakMap);const I=M.get(F);I===void 0?(g=createCacheNode(),M.set(F,g)):g=I}else{let M=g.p;M===null&&(g.p=M=new Map);const I=M.get(F);I===void 0?(g=createCacheNode(),M.set(F,g)):g=I}}const w=g;let S;if(g.s===TERMINATED)S=g.v;else if(S=e.apply(null,arguments),d++,o){const R=u?.deref?.()??u;R!=null&&o(R,S)&&(S=R,d!==0&&d--),u=typeof S=="object"&&S!==null||typeof S=="function"?new Ref(S):S}return w.s=TERMINATED,w.v=S,S}return f.clearCache=()=>{n=createCacheNode(),f.resetResultsCount()},f.resultsCount=()=>d,f.resetResultsCount=()=>{d=0},f}function createSelectorCreator(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,o=(...u)=>{let d=0,f=0,g,v={},w=u.pop();typeof w=="object"&&(v=w,w=u.pop()),assertIsFunction(w,`createSelector expects an output function after the inputs, but received: [${typeof w}]`);const S={...n,...v},{memoize:R,memoizeOptions:_=[],argsMemoize:F=weakMapMemoize,argsMemoizeOptions:M=[]}=S,I=ensureIsArray(_),N=ensureIsArray(M),B=getDependencies(u),H=R(function(){return d++,w.apply(null,arguments)},...I),U=F(function(){f++;const z=collectInputSelectorResults(B,arguments);return g=H.apply(null,z),g},...N);return Object.assign(U,{resultFunc:w,memoizedResultFunc:H,dependencies:B,dependencyRecomputations:()=>f,resetDependencyRecomputations:()=>{f=0},lastResult:()=>g,recomputations:()=>d,resetRecomputations:()=>{d=0},memoize:R,argsMemoize:F})};return Object.assign(o,{withTypes:()=>o}),o}var createSelector=createSelectorCreator(weakMapMemoize),createStructuredSelector=Object.assign((e,t=createSelector)=>{assertIsObject(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),o=n.map(d=>e[d]);return t(o,(...d)=>d.reduce((f,g,v)=>(f[n[v]]=g,f),{}))},{withTypes:()=>createStructuredSelector}),sortBy$2={},orderBy={},compareValues={},hasRequiredCompareValues;function requireCompareValues(){return hasRequiredCompareValues||(hasRequiredCompareValues=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(o){return typeof o=="symbol"?1:o===null?2:o===void 0?3:o!==o?4:0}const n=(o,u,d)=>{if(o!==u){const f=t(o),g=t(u);if(f===g&&f===0){if(o<u)return d==="desc"?1:-1;if(o>u)return d==="desc"?-1:1}return d==="desc"?g-f:f-g}return 0};e.compareValues=n})(compareValues)),compareValues}var isKey={},isSymbol={},hasRequiredIsSymbol;function requireIsSymbol(){return hasRequiredIsSymbol||(hasRequiredIsSymbol=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(isSymbol)),isSymbol}var hasRequiredIsKey;function requireIsKey(){return hasRequiredIsKey||(hasRequiredIsKey=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIsSymbol(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;function u(d,f){return Array.isArray(d)?!1:typeof d=="number"||typeof d=="boolean"||d==null||t.isSymbol(d)?!0:typeof d=="string"&&(o.test(d)||!n.test(d))||f!=null&&Object.hasOwn(f,d)}e.isKey=u})(isKey)),isKey}var hasRequiredOrderBy;function requireOrderBy(){return hasRequiredOrderBy||(hasRequiredOrderBy=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireCompareValues(),n=requireIsKey(),o=requireToPath();function u(d,f,g,v){if(d==null)return[];g=v?void 0:g,Array.isArray(d)||(d=Object.values(d)),Array.isArray(f)||(f=f==null?[null]:[f]),f.length===0&&(f=[null]),Array.isArray(g)||(g=g==null?[]:[g]),g=g.map(F=>String(F));const w=(F,M)=>{let I=F;for(let N=0;N<M.length&&I!=null;++N)I=I[M[N]];return I},S=(F,M)=>M==null||F==null?M:typeof F=="object"&&"key"in F?Object.hasOwn(M,F.key)?M[F.key]:w(M,F.path):typeof F=="function"?F(M):Array.isArray(F)?w(M,F):typeof M=="object"?M[F]:M,R=f.map(F=>(Array.isArray(F)&&F.length===1&&(F=F[0]),F==null||typeof F=="function"||Array.isArray(F)||n.isKey(F)?F:{key:F,path:o.toPath(F)}));return d.map(F=>({original:F,criteria:R.map(M=>S(M,F))})).slice().sort((F,M)=>{for(let I=0;I<R.length;I++){const N=t.compareValues(F.criteria[I],M.criteria[I],g[I]);if(N!==0)return N}return 0}).map(F=>F.original)}e.orderBy=u})(orderBy)),orderBy}var flatten={},hasRequiredFlatten;function requireFlatten(){return hasRequiredFlatten||(hasRequiredFlatten=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,o=1){const u=[],d=Math.floor(o),f=(g,v)=>{for(let w=0;w<g.length;w++){const S=g[w];Array.isArray(S)&&v<d?f(S,v+1):u.push(S)}};return f(n,0),u}e.flatten=t})(flatten)),flatten}var isIterateeCall={},hasRequiredIsIterateeCall;function requireIsIterateeCall(){return hasRequiredIsIterateeCall||(hasRequiredIsIterateeCall=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIsIndex(),n=requireIsArrayLike(),o=requireIsObject(),u=requireEq();function d(f,g,v){return o.isObject(v)&&(typeof g=="number"&&n.isArrayLike(v)&&t.isIndex(g)&&g<v.length||typeof g=="string"&&g in v)?u.eq(v[g],f):!1}e.isIterateeCall=d})(isIterateeCall)),isIterateeCall}var hasRequiredSortBy$1;function requireSortBy$1(){return hasRequiredSortBy$1||(hasRequiredSortBy$1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireOrderBy(),n=requireFlatten(),o=requireIsIterateeCall();function u(d,...f){const g=f.length;return g>1&&o.isIterateeCall(d,f[0],f[1])?f=[]:g>2&&o.isIterateeCall(f[0],f[1],f[2])&&(f=[f[0]]),t.orderBy(d,n.flatten(f),["asc"])}e.sortBy=u})(sortBy$2)),sortBy$2}var sortBy$1,hasRequiredSortBy;function requireSortBy(){return hasRequiredSortBy||(hasRequiredSortBy=1,sortBy$1=requireSortBy$1().sortBy),sortBy$1}var sortByExports=requireSortBy();const sortBy=getDefaultExportFromCjs(sortByExports);var selectLegendSettings=e=>e.legend.settings,selectLegendSize=e=>e.legend.size,selectAllLegendPayload2DArray=e=>e.legend.payload;createSelector([selectAllLegendPayload2DArray,selectLegendSettings],(e,t)=>{var{itemSorter:n}=t,o=e.flat(1);return n?sortBy(o,n):o});var EPS$1=1;function useElementOffset(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=reactExports.useState({height:0,left:0,top:0,width:0}),o=reactExports.useCallback(u=>{if(u!=null){var d=u.getBoundingClientRect(),f={height:d.height,left:d.left,top:d.top,width:d.width};(Math.abs(f.height-t.height)>EPS$1||Math.abs(f.left-t.left)>EPS$1||Math.abs(f.top-t.top)>EPS$1||Math.abs(f.width-t.width)>EPS$1)&&n({height:f.height,left:f.left,top:f.top,width:f.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,o]}function formatProdErrorMessage$1(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var $$observable=typeof Symbol=="function"&&Symbol.observable||"@@observable",symbol_observable_default=$$observable,randomString=()=>Math.random().toString(36).substring(7).split("").join("."),ActionTypes={INIT:`@@redux/INIT${randomString()}`,REPLACE:`@@redux/REPLACE${randomString()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${randomString()}`},actionTypes_default=ActionTypes;function isPlainObject$5(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function createStore(e,t,n){if(typeof e!="function")throw new Error(formatProdErrorMessage$1(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(formatProdErrorMessage$1(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(formatProdErrorMessage$1(1));return n(createStore)(e,t)}let o=e,u=t,d=new Map,f=d,g=0,v=!1;function w(){f===d&&(f=new Map,d.forEach((N,B)=>{f.set(B,N)}))}function S(){if(v)throw new Error(formatProdErrorMessage$1(3));return u}function R(N){if(typeof N!="function")throw new Error(formatProdErrorMessage$1(4));if(v)throw new Error(formatProdErrorMessage$1(5));let B=!0;w();const H=g++;return f.set(H,N),function(){if(B){if(v)throw new Error(formatProdErrorMessage$1(6));B=!1,w(),f.delete(H),d=null}}}function _(N){if(!isPlainObject$5(N))throw new Error(formatProdErrorMessage$1(7));if(typeof N.type>"u")throw new Error(formatProdErrorMessage$1(8));if(typeof N.type!="string")throw new Error(formatProdErrorMessage$1(17));if(v)throw new Error(formatProdErrorMessage$1(9));try{v=!0,u=o(u,N)}finally{v=!1}return(d=f).forEach(H=>{H()}),N}function F(N){if(typeof N!="function")throw new Error(formatProdErrorMessage$1(10));o=N,_({type:actionTypes_default.REPLACE})}function M(){const N=R;return{subscribe(B){if(typeof B!="object"||B===null)throw new Error(formatProdErrorMessage$1(11));function H(){const $=B;$.next&&$.next(S())}return H(),{unsubscribe:N(H)}},[symbol_observable_default](){return this}}}return _({type:actionTypes_default.INIT}),{dispatch:_,subscribe:R,getState:S,replaceReducer:F,[symbol_observable_default]:M}}function assertReducerShape(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:actionTypes_default.INIT})>"u")throw new Error(formatProdErrorMessage$1(12));if(typeof n(void 0,{type:actionTypes_default.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(formatProdErrorMessage$1(13))})}function combineReducers(e){const t=Object.keys(e),n={};for(let d=0;d<t.length;d++){const f=t[d];typeof e[f]=="function"&&(n[f]=e[f])}const o=Object.keys(n);let u;try{assertReducerShape(n)}catch(d){u=d}return function(f={},g){if(u)throw u;let v=!1;const w={};for(let S=0;S<o.length;S++){const R=o[S],_=n[R],F=f[R],M=_(F,g);if(typeof M>"u")throw g&&g.type,new Error(formatProdErrorMessage$1(14));w[R]=M,v=v||M!==F}return v=v||o.length!==Object.keys(f).length,v?w:f}}function compose$1(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...o)=>t(n(...o)))}function applyMiddleware(...e){return t=>(n,o)=>{const u=t(n,o);let d=()=>{throw new Error(formatProdErrorMessage$1(15))};const f={getState:u.getState,dispatch:(v,...w)=>d(v,...w)},g=e.map(v=>v(f));return d=compose$1(...g)(u.dispatch),{...u,dispatch:d}}}function isAction(e){return isPlainObject$5(e)&&"type"in e&&typeof e.type=="string"}var NOTHING=Symbol.for("immer-nothing"),DRAFTABLE=Symbol.for("immer-draftable"),DRAFT_STATE=Symbol.for("immer-state");function die(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var getPrototypeOf$1=Object.getPrototypeOf;function isDraft(e){return!!e&&!!e[DRAFT_STATE]}function isDraftable(e){return e?isPlainObject$4(e)||Array.isArray(e)||!!e[DRAFTABLE]||!!e.constructor?.[DRAFTABLE]||isMap(e)||isSet(e):!1}var objectCtorString=Object.prototype.constructor.toString(),cachedCtorStrings=new WeakMap;function isPlainObject$4(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let o=cachedCtorStrings.get(n);return o===void 0&&(o=Function.toString.call(n),cachedCtorStrings.set(n,o)),o===objectCtorString}function each(e,t,n=!0){getArchtype(e)===0?(n?Reflect.ownKeys(e):Object.keys(e)).forEach(u=>{t(u,e[u],e)}):e.forEach((o,u)=>t(u,o,e))}function getArchtype(e){const t=e[DRAFT_STATE];return t?t.type_:Array.isArray(e)?1:isMap(e)?2:isSet(e)?3:0}function has(e,t){return getArchtype(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function set(e,t,n){const o=getArchtype(e);o===2?e.set(t,n):o===3?e.add(n):e[t]=n}function is(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function isMap(e){return e instanceof Map}function isSet(e){return e instanceof Set}function latest(e){return e.copy_||e.base_}function shallowCopy(e,t){if(isMap(e))return new Map(e);if(isSet(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=isPlainObject$4(e);if(t===!0||t==="class_only"&&!n){const o=Object.getOwnPropertyDescriptors(e);delete o[DRAFT_STATE];let u=Reflect.ownKeys(o);for(let d=0;d<u.length;d++){const f=u[d],g=o[f];g.writable===!1&&(g.writable=!0,g.configurable=!0),(g.get||g.set)&&(o[f]={configurable:!0,writable:!0,enumerable:g.enumerable,value:e[f]})}return Object.create(getPrototypeOf$1(e),o)}else{const o=getPrototypeOf$1(e);if(o!==null&&n)return{...e};const u=Object.create(o);return Object.assign(u,e)}}function freeze(e,t=!1){return isFrozen(e)||isDraft(e)||!isDraftable(e)||(getArchtype(e)>1&&Object.defineProperties(e,{set:dontMutateMethodOverride,add:dontMutateMethodOverride,clear:dontMutateMethodOverride,delete:dontMutateMethodOverride}),Object.freeze(e),t&&Object.values(e).forEach(n=>freeze(n,!0))),e}function dontMutateFrozenCollections(){die(2)}var dontMutateMethodOverride={value:dontMutateFrozenCollections};function isFrozen(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var plugins={};function getPlugin(e){const t=plugins[e];return t||die(0,e),t}var currentScope;function getCurrentScope(){return currentScope}function createScope(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function usePatchesInScope(e,t){t&&(getPlugin("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function revokeScope(e){leaveScope(e),e.drafts_.forEach(revokeDraft),e.drafts_=null}function leaveScope(e){e===currentScope&&(currentScope=e.parent_)}function enterScope(e){return currentScope=createScope(currentScope,e)}function revokeDraft(e){const t=e[DRAFT_STATE];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function processResult(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[DRAFT_STATE].modified_&&(revokeScope(t),die(4)),isDraftable(e)&&(e=finalize(t,e),t.parent_||maybeFreeze(t,e)),t.patches_&&getPlugin("Patches").generateReplacementPatches_(n[DRAFT_STATE].base_,e,t.patches_,t.inversePatches_)):e=finalize(t,n,[]),revokeScope(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==NOTHING?e:void 0}function finalize(e,t,n){if(isFrozen(t))return t;const o=e.immer_.shouldUseStrictIteration(),u=t[DRAFT_STATE];if(!u)return each(t,(d,f)=>finalizeProperty(e,u,t,d,f,n),o),t;if(u.scope_!==e)return t;if(!u.modified_)return maybeFreeze(e,u.base_,!0),u.base_;if(!u.finalized_){u.finalized_=!0,u.scope_.unfinalizedDrafts_--;const d=u.copy_;let f=d,g=!1;u.type_===3&&(f=new Set(d),d.clear(),g=!0),each(f,(v,w)=>finalizeProperty(e,u,d,v,w,n,g),o),maybeFreeze(e,d,!1),n&&e.patches_&&getPlugin("Patches").generatePatches_(u,n,e.patches_,e.inversePatches_)}return u.copy_}function finalizeProperty(e,t,n,o,u,d,f){if(u==null||typeof u!="object"&&!f)return;const g=isFrozen(u);if(!(g&&!f)){if(isDraft(u)){const v=d&&t&&t.type_!==3&&!has(t.assigned_,o)?d.concat(o):void 0,w=finalize(e,u,v);if(set(n,o,w),isDraft(w))e.canAutoFreeze_=!1;else return}else f&&n.add(u);if(isDraftable(u)&&!g){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[o]===u&&g)return;finalize(e,u),(!t||!t.scope_.parent_)&&typeof o!="symbol"&&(isMap(n)?n.has(o):Object.prototype.propertyIsEnumerable.call(n,o))&&maybeFreeze(e,u)}}}function maybeFreeze(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&freeze(t,n)}function createProxyProxy(e,t){const n=Array.isArray(e),o={type_:n?1:0,scope_:t?t.scope_:getCurrentScope(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let u=o,d=objectTraps;n&&(u=[o],d=arrayTraps);const{revoke:f,proxy:g}=Proxy.revocable(u,d);return o.draft_=g,o.revoke_=f,g}var objectTraps={get(e,t){if(t===DRAFT_STATE)return e;const n=latest(e);if(!has(n,t))return readPropFromProto(e,n,t);const o=n[t];return e.finalized_||!isDraftable(o)?o:o===peek(e.base_,t)?(prepareCopy(e),e.copy_[t]=createProxy(o,e)):o},has(e,t){return t in latest(e)},ownKeys(e){return Reflect.ownKeys(latest(e))},set(e,t,n){const o=getDescriptorFromProto(latest(e),t);if(o?.set)return o.set.call(e.draft_,n),!0;if(!e.modified_){const u=peek(latest(e),t),d=u?.[DRAFT_STATE];if(d&&d.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(is(n,u)&&(n!==void 0||has(e.base_,t)))return!0;prepareCopy(e),markChanged(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return peek(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,prepareCopy(e),markChanged(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=latest(e),o=Reflect.getOwnPropertyDescriptor(n,t);return o&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:o.enumerable,value:n[t]}},defineProperty(){die(11)},getPrototypeOf(e){return getPrototypeOf$1(e.base_)},setPrototypeOf(){die(12)}},arrayTraps={};each(objectTraps,(e,t)=>{arrayTraps[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});arrayTraps.deleteProperty=function(e,t){return arrayTraps.set.call(this,e,t,void 0)};arrayTraps.set=function(e,t,n){return objectTraps.set.call(this,e[0],t,n,e[0])};function peek(e,t){const n=e[DRAFT_STATE];return(n?latest(n):e)[t]}function readPropFromProto(e,t,n){const o=getDescriptorFromProto(t,n);return o?"value"in o?o.value:o.get?.call(e.draft_):void 0}function getDescriptorFromProto(e,t){if(!(t in e))return;let n=getPrototypeOf$1(e);for(;n;){const o=Object.getOwnPropertyDescriptor(n,t);if(o)return o;n=getPrototypeOf$1(n)}}function markChanged(e){e.modified_||(e.modified_=!0,e.parent_&&markChanged(e.parent_))}function prepareCopy(e){e.copy_||(e.copy_=shallowCopy(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Immer2=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,n,o)=>{if(typeof t=="function"&&typeof n!="function"){const d=n;n=t;const f=this;return function(v=d,...w){return f.produce(v,S=>n.call(this,S,...w))}}typeof n!="function"&&die(6),o!==void 0&&typeof o!="function"&&die(7);let u;if(isDraftable(t)){const d=enterScope(this),f=createProxy(t,void 0);let g=!0;try{u=n(f),g=!1}finally{g?revokeScope(d):leaveScope(d)}return usePatchesInScope(d,o),processResult(u,d)}else if(!t||typeof t!="object"){if(u=n(t),u===void 0&&(u=t),u===NOTHING&&(u=void 0),this.autoFreeze_&&freeze(u,!0),o){const d=[],f=[];getPlugin("Patches").generateReplacementPatches_(t,u,d,f),o(d,f)}return u}else die(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(f,...g)=>this.produceWithPatches(f,v=>t(v,...g));let o,u;return[this.produce(t,n,(f,g)=>{o=f,u=g}),o,u]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){isDraftable(e)||die(8),isDraft(e)&&(e=current(e));const t=enterScope(this),n=createProxy(e,void 0);return n[DRAFT_STATE].isManual_=!0,leaveScope(t),n}finishDraft(e,t){const n=e&&e[DRAFT_STATE];(!n||!n.isManual_)&&die(9);const{scope_:o}=n;return usePatchesInScope(o,t),processResult(void 0,o)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const u=t[n];if(u.path.length===0&&u.op==="replace"){e=u.value;break}}n>-1&&(t=t.slice(n+1));const o=getPlugin("Patches").applyPatches_;return isDraft(e)?o(e,t):this.produce(e,u=>o(u,t))}};function createProxy(e,t){const n=isMap(e)?getPlugin("MapSet").proxyMap_(e,t):isSet(e)?getPlugin("MapSet").proxySet_(e,t):createProxyProxy(e,t);return(t?t.scope_:getCurrentScope()).drafts_.push(n),n}function current(e){return isDraft(e)||die(10,e),currentImpl(e)}function currentImpl(e){if(!isDraftable(e)||isFrozen(e))return e;const t=e[DRAFT_STATE];let n,o=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=shallowCopy(e,t.scope_.immer_.useStrictShallowCopy_),o=t.scope_.immer_.shouldUseStrictIteration()}else n=shallowCopy(e,!0);return each(n,(u,d)=>{set(n,u,currentImpl(d))},o),t&&(t.finalized_=!1),n}var immer=new Immer2,produce=immer.produce,setUseStrictIteration=immer.setUseStrictIteration.bind(immer);function castDraft(e){return e}function createThunkMiddleware(e){return({dispatch:n,getState:o})=>u=>d=>typeof d=="function"?d(n,o,e):u(d)}var thunk=createThunkMiddleware(),withExtraArgument=createThunkMiddleware,composeWithDevTools=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?compose$1:compose$1.apply(null,arguments)};function createAction(e,t){function n(...o){if(t){let u=t(...o);if(!u)throw new Error(formatProdErrorMessage(0));return{type:e,payload:u.payload,..."meta"in u&&{meta:u.meta},..."error"in u&&{error:u.error}}}return{type:e,payload:o[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=o=>isAction(o)&&o.type===e,n}var Tuple=class hd extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,hd.prototype)}static get[Symbol.species](){return hd}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new hd(...t[0].concat(this)):new hd(...t.concat(this))}};function freezeDraftable(e){return isDraftable(e)?produce(e,()=>{}):e}function getOrInsertComputed(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function isBoolean$1(e){return typeof e=="boolean"}var buildGetDefaultMiddleware=()=>function(t){const{thunk:n=!0,immutableCheck:o=!0,serializableCheck:u=!0,actionCreatorCheck:d=!0}=t??{};let f=new Tuple;return n&&(isBoolean$1(n)?f.push(thunk):f.push(withExtraArgument(n.extraArgument))),f},SHOULD_AUTOBATCH="RTK_autoBatch",prepareAutoBatched=()=>e=>({payload:e,meta:{[SHOULD_AUTOBATCH]:!0}}),createQueueWithTimer=e=>t=>{setTimeout(t,e)},autoBatchEnhancer=(e={type:"raf"})=>t=>(...n)=>{const o=t(...n);let u=!0,d=!1,f=!1;const g=new Set,v=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:createQueueWithTimer(10):e.type==="callback"?e.queueNotification:createQueueWithTimer(e.timeout),w=()=>{f=!1,d&&(d=!1,g.forEach(S=>S()))};return Object.assign({},o,{subscribe(S){const R=()=>u&&S(),_=o.subscribe(R);return g.add(S),()=>{_(),g.delete(S)}},dispatch(S){try{return u=!S?.meta?.[SHOULD_AUTOBATCH],d=!u,d&&(f||(f=!0,v(w))),o.dispatch(S)}finally{u=!0}}})},buildGetDefaultEnhancers=e=>function(n){const{autoBatch:o=!0}=n??{};let u=new Tuple(e);return o&&u.push(autoBatchEnhancer(typeof o=="object"?o:void 0)),u};function configureStore(e){const t=buildGetDefaultMiddleware(),{reducer:n=void 0,middleware:o,devTools:u=!0,preloadedState:d=void 0,enhancers:f=void 0}=e||{};let g;if(typeof n=="function")g=n;else if(isPlainObject$5(n))g=combineReducers(n);else throw new Error(formatProdErrorMessage(1));let v;typeof o=="function"?v=o(t):v=t();let w=compose$1;u&&(w=composeWithDevTools({trace:!1,...typeof u=="object"&&u}));const S=applyMiddleware(...v),R=buildGetDefaultEnhancers(S);let _=typeof f=="function"?f(R):R();const F=w(..._);return createStore(g,d,F)}function executeReducerBuilderCallback(e){const t={},n=[];let o;const u={addCase(d,f){const g=typeof d=="string"?d:d.type;if(!g)throw new Error(formatProdErrorMessage(28));if(g in t)throw new Error(formatProdErrorMessage(29));return t[g]=f,u},addAsyncThunk(d,f){return f.pending&&(t[d.pending.type]=f.pending),f.rejected&&(t[d.rejected.type]=f.rejected),f.fulfilled&&(t[d.fulfilled.type]=f.fulfilled),f.settled&&n.push({matcher:d.settled,reducer:f.settled}),u},addMatcher(d,f){return n.push({matcher:d,reducer:f}),u},addDefaultCase(d){return o=d,u}};return e(u),[t,n,o]}setUseStrictIteration(!1);function isStateFunction(e){return typeof e=="function"}function createReducer(e,t){let[n,o,u]=executeReducerBuilderCallback(t),d;if(isStateFunction(e))d=()=>freezeDraftable(e());else{const g=freezeDraftable(e);d=()=>g}function f(g=d(),v){let w=[n[v.type],...o.filter(({matcher:S})=>S(v)).map(({reducer:S})=>S)];return w.filter(S=>!!S).length===0&&(w=[u]),w.reduce((S,R)=>{if(R)if(isDraft(S)){const F=R(S,v);return F===void 0?S:F}else{if(isDraftable(S))return produce(S,_=>R(_,v));{const _=R(S,v);if(_===void 0){if(S===null)return S;throw Error("A case reducer on a non-draftable value must not return undefined")}return _}}return S},g)}return f.getInitialState=d,f}var urlAlphabet="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",nanoid=(e=21)=>{let t="",n=e;for(;n--;)t+=urlAlphabet[Math.random()*64|0];return t},asyncThunkSymbol=Symbol.for("rtk-slice-createasyncthunk");function getType(e,t){return`${e}/${t}`}function buildCreateSlice({creators:e}={}){const t=e?.asyncThunk?.[asyncThunkSymbol];return function(o){const{name:u,reducerPath:d=u}=o;if(!u)throw new Error(formatProdErrorMessage(11));const f=(typeof o.reducers=="function"?o.reducers(buildReducerCreators()):o.reducers)||{},g=Object.keys(f),v={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},w={addCase(U,$){const z=typeof U=="string"?U:U.type;if(!z)throw new Error(formatProdErrorMessage(12));if(z in v.sliceCaseReducersByType)throw new Error(formatProdErrorMessage(13));return v.sliceCaseReducersByType[z]=$,w},addMatcher(U,$){return v.sliceMatchers.push({matcher:U,reducer:$}),w},exposeAction(U,$){return v.actionCreators[U]=$,w},exposeCaseReducer(U,$){return v.sliceCaseReducersByName[U]=$,w}};g.forEach(U=>{const $=f[U],z={reducerName:U,type:getType(u,U),createNotation:typeof o.reducers=="function"};isAsyncThunkSliceReducerDefinition($)?handleThunkCaseReducerDefinition(z,$,w,t):handleNormalReducerDefinition(z,$,w)});function S(){const[U={},$=[],z=void 0]=typeof o.extraReducers=="function"?executeReducerBuilderCallback(o.extraReducers):[o.extraReducers],j={...U,...v.sliceCaseReducersByType};return createReducer(o.initialState,J=>{for(let ie in j)J.addCase(ie,j[ie]);for(let ie of v.sliceMatchers)J.addMatcher(ie.matcher,ie.reducer);for(let ie of $)J.addMatcher(ie.matcher,ie.reducer);z&&J.addDefaultCase(z)})}const R=U=>U,_=new Map,F=new WeakMap;let M;function I(U,$){return M||(M=S()),M(U,$)}function N(){return M||(M=S()),M.getInitialState()}function B(U,$=!1){function z(J){let ie=J[U];return typeof ie>"u"&&$&&(ie=getOrInsertComputed(F,z,N)),ie}function j(J=R){const ie=getOrInsertComputed(_,$,()=>new WeakMap);return getOrInsertComputed(ie,J,()=>{const se={};for(const[fe,de]of Object.entries(o.selectors??{}))se[fe]=wrapSelector(de,J,()=>getOrInsertComputed(F,J,N),$);return se})}return{reducerPath:U,getSelectors:j,get selectors(){return j(z)},selectSlice:z}}const H={name:u,reducer:I,actions:v.actionCreators,caseReducers:v.sliceCaseReducersByName,getInitialState:N,...B(d),injectInto(U,{reducerPath:$,...z}={}){const j=$??d;return U.inject({reducerPath:j,reducer:I},z),{...H,...B(j,!0)}}};return H}}function wrapSelector(e,t,n,o){function u(d,...f){let g=t(d);return typeof g>"u"&&o&&(g=n()),e(g,...f)}return u.unwrapped=e,u}var createSlice=buildCreateSlice();function buildReducerCreators(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function handleNormalReducerDefinition({type:e,reducerName:t,createNotation:n},o,u){let d,f;if("reducer"in o){if(n&&!isCaseReducerWithPrepareDefinition(o))throw new Error(formatProdErrorMessage(17));d=o.reducer,f=o.prepare}else d=o;u.addCase(e,d).exposeCaseReducer(t,d).exposeAction(t,f?createAction(e,f):createAction(e))}function isAsyncThunkSliceReducerDefinition(e){return e._reducerDefinitionType==="asyncThunk"}function isCaseReducerWithPrepareDefinition(e){return e._reducerDefinitionType==="reducerWithPrepare"}function handleThunkCaseReducerDefinition({type:e,reducerName:t},n,o,u){if(!u)throw new Error(formatProdErrorMessage(18));const{payloadCreator:d,fulfilled:f,pending:g,rejected:v,settled:w,options:S}=n,R=u(e,d,S);o.exposeAction(t,R),f&&o.addCase(R.fulfilled,f),g&&o.addCase(R.pending,g),v&&o.addCase(R.rejected,v),w&&o.addMatcher(R.settled,w),o.exposeCaseReducer(t,{fulfilled:f||noop$5,pending:g||noop$5,rejected:v||noop$5,settled:w||noop$5})}function noop$5(){}var task="task",listener="listener",completed="completed",cancelled="cancelled",taskCancelled=`task-${cancelled}`,taskCompleted=`task-${completed}`,listenerCancelled=`${listener}-${cancelled}`,listenerCompleted=`${listener}-${completed}`,TaskAbortError=class{constructor(e){this.code=e,this.message=`${task} ${cancelled} (reason: ${e})`}name="TaskAbortError";message},assertFunction=(e,t)=>{if(typeof e!="function")throw new TypeError(formatProdErrorMessage(32))},noop2=()=>{},catchRejection=(e,t=noop2)=>(e.catch(t),e),addAbortSignalListener=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),abortControllerWithReason=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},validateActive=e=>{if(e.aborted){const{reason:t}=e;throw new TaskAbortError(t)}};function raceWithSignal(e,t){let n=noop2;return new Promise((o,u)=>{const d=()=>u(new TaskAbortError(e.reason));if(e.aborted){d();return}n=addAbortSignalListener(e,d),t.finally(()=>n()).then(o,u)}).finally(()=>{n=noop2})}var runTask=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof TaskAbortError?"cancelled":"rejected",error:n}}finally{t?.()}},createPause=e=>t=>catchRejection(raceWithSignal(e,t).then(n=>(validateActive(e),n))),createDelay=e=>{const t=createPause(e);return n=>t(new Promise(o=>setTimeout(o,n)))},{assign}=Object,INTERNAL_NIL_TOKEN={},alm="listenerMiddleware",createFork=(e,t)=>{const n=o=>addAbortSignalListener(e,()=>abortControllerWithReason(o,e.reason));return(o,u)=>{assertFunction(o);const d=new AbortController;n(d);const f=runTask(async()=>{validateActive(e),validateActive(d.signal);const g=await o({pause:createPause(d.signal),delay:createDelay(d.signal),signal:d.signal});return validateActive(d.signal),g},()=>abortControllerWithReason(d,taskCompleted));return u?.autoJoin&&t.push(f.catch(noop2)),{result:createPause(e)(f),cancel(){abortControllerWithReason(d,taskCancelled)}}}},createTakePattern=(e,t)=>{const n=async(o,u)=>{validateActive(t);let d=()=>{};const g=[new Promise((v,w)=>{let S=e({predicate:o,effect:(R,_)=>{_.unsubscribe(),v([R,_.getState(),_.getOriginalState()])}});d=()=>{S(),w()}})];u!=null&&g.push(new Promise(v=>setTimeout(v,u,null)));try{const v=await raceWithSignal(t,Promise.race(g));return validateActive(t),v}finally{d()}};return(o,u)=>catchRejection(n(o,u))},getListenerEntryPropsFrom=e=>{let{type:t,actionCreator:n,matcher:o,predicate:u,effect:d}=e;if(t)u=createAction(t).match;else if(n)t=n.type,u=n.match;else if(o)u=o;else if(!u)throw new Error(formatProdErrorMessage(21));return assertFunction(d),{predicate:u,type:t,effect:d}},createListenerEntry=assign(e=>{const{type:t,predicate:n,effect:o}=getListenerEntryPropsFrom(e);return{id:nanoid(),effect:o,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(formatProdErrorMessage(22))}}},{withTypes:()=>createListenerEntry}),findListenerEntry=(e,t)=>{const{type:n,effect:o,predicate:u}=getListenerEntryPropsFrom(t);return Array.from(e.values()).find(d=>(typeof n=="string"?d.type===n:d.predicate===u)&&d.effect===o)},cancelActiveListeners=e=>{e.pending.forEach(t=>{abortControllerWithReason(t,listenerCancelled)})},createClearListenerMiddleware=(e,t)=>()=>{for(const n of t.keys())cancelActiveListeners(n);e.clear()},safelyNotifyError=(e,t,n)=>{try{e(t,n)}catch(o){setTimeout(()=>{throw o},0)}},addListener=assign(createAction(`${alm}/add`),{withTypes:()=>addListener}),clearAllListeners=createAction(`${alm}/removeAll`),removeListener=assign(createAction(`${alm}/remove`),{withTypes:()=>removeListener}),defaultErrorHandler=(...e)=>{console.error(`${alm}/error`,...e)},createListenerMiddleware=(e={})=>{const t=new Map,n=new Map,o=F=>{const M=n.get(F)??0;n.set(F,M+1)},u=F=>{const M=n.get(F)??1;M===1?n.delete(F):n.set(F,M-1)},{extra:d,onError:f=defaultErrorHandler}=e;assertFunction(f);const g=F=>(F.unsubscribe=()=>t.delete(F.id),t.set(F.id,F),M=>{F.unsubscribe(),M?.cancelActive&&cancelActiveListeners(F)}),v=F=>{const M=findListenerEntry(t,F)??createListenerEntry(F);return g(M)};assign(v,{withTypes:()=>v});const w=F=>{const M=findListenerEntry(t,F);return M&&(M.unsubscribe(),F.cancelActive&&cancelActiveListeners(M)),!!M};assign(w,{withTypes:()=>w});const S=async(F,M,I,N)=>{const B=new AbortController,H=createTakePattern(v,B.signal),U=[];try{F.pending.add(B),o(F),await Promise.resolve(F.effect(M,assign({},I,{getOriginalState:N,condition:($,z)=>H($,z).then(Boolean),take:H,delay:createDelay(B.signal),pause:createPause(B.signal),extra:d,signal:B.signal,fork:createFork(B.signal,U),unsubscribe:F.unsubscribe,subscribe:()=>{t.set(F.id,F)},cancelActiveListeners:()=>{F.pending.forEach(($,z,j)=>{$!==B&&(abortControllerWithReason($,listenerCancelled),j.delete($))})},cancel:()=>{abortControllerWithReason(B,listenerCancelled),F.pending.delete(B)},throwIfCancelled:()=>{validateActive(B.signal)}})))}catch($){$ instanceof TaskAbortError||safelyNotifyError(f,$,{raisedBy:"effect"})}finally{await Promise.all(U),abortControllerWithReason(B,listenerCompleted),u(F),F.pending.delete(B)}},R=createClearListenerMiddleware(t,n);return{middleware:F=>M=>I=>{if(!isAction(I))return M(I);if(addListener.match(I))return v(I.payload);if(clearAllListeners.match(I)){R();return}if(removeListener.match(I))return w(I.payload);let N=F.getState();const B=()=>{if(N===INTERNAL_NIL_TOKEN)throw new Error(formatProdErrorMessage(23));return N};let H;try{if(H=M(I),t.size>0){const U=F.getState(),$=Array.from(t.values());for(const z of $){let j=!1;try{j=z.predicate(I,U,N)}catch(J){j=!1,safelyNotifyError(f,J,{raisedBy:"predicate"})}j&&S(z,I,F,B)}}}finally{N=INTERNAL_NIL_TOKEN}return H},startListening:v,stopListening:w,clearListeners:R}};function formatProdErrorMessage(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var initialState$a={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},chartLayoutSlice=createSlice({name:"chartLayout",initialState:initialState$a,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,o,u,d;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(o=t.payload.right)!==null&&o!==void 0?o:0,e.margin.bottom=(u=t.payload.bottom)!==null&&u!==void 0?u:0,e.margin.left=(d=t.payload.left)!==null&&d!==void 0?d:0},setScale(e,t){e.scale=t.payload}}}),{setMargin,setLayout,setChartSize,setScale}=chartLayoutSlice.actions,chartLayoutReducer=chartLayoutSlice.reducer;function ownKeys$q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$q(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$q(Object(n),!0).forEach(function(o){_defineProperty$r(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$q(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$r(e,t,n){return(t=_toPropertyKey$r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$r(e){var t=_toPrimitive$r(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$r(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RADIAN=Math.PI/180,radianToDegree=e=>e*180/Math.PI,polarToCartesian=(e,t,n,o)=>({x:e+Math.cos(-RADIAN*o)*n,y:t+Math.sin(-RADIAN*o)*n}),getMaxRadius=function(t,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(o.left||0)-(o.right||0)),Math.abs(n-(o.top||0)-(o.bottom||0)))/2},distanceBetweenPoints=(e,t)=>{var{x:n,y:o}=e,{x:u,y:d}=t;return Math.sqrt((n-u)**2+(o-d)**2)},getAngleOfPoint=(e,t)=>{var{x:n,y:o}=e,{cx:u,cy:d}=t,f=distanceBetweenPoints({x:n,y:o},{x:u,y:d});if(f<=0)return{radius:f,angle:0};var g=(n-u)/f,v=Math.acos(g);return o>d&&(v=2*Math.PI-v),{radius:f,angle:radianToDegree(v),angleInRadian:v}},formatAngleOfSector=e=>{var{startAngle:t,endAngle:n}=e,o=Math.floor(t/360),u=Math.floor(n/360),d=Math.min(o,u);return{startAngle:t-d*360,endAngle:n-d*360}},reverseFormatAngleOfSector=(e,t)=>{var{startAngle:n,endAngle:o}=t,u=Math.floor(n/360),d=Math.floor(o/360),f=Math.min(u,d);return e+f*360},inRangeOfSector=(e,t)=>{var{x:n,y:o}=e,{radius:u,angle:d}=getAngleOfPoint({x:n,y:o},t),{innerRadius:f,outerRadius:g}=t;if(u<f||u>g||u===0)return null;var{startAngle:v,endAngle:w}=formatAngleOfSector(t),S=d,R;if(v<=w){for(;S>w;)S-=360;for(;S<v;)S+=360;R=S>=v&&S<=w}else{for(;S>v;)S-=360;for(;S<w;)S+=360;R=S>=w&&S<=v}return R?_objectSpread$q(_objectSpread$q({},t),{},{radius:u,angle:reverseFormatAngleOfSector(S,t)}):null};function getSliced(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function ownKeys$p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$p(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$p(Object(n),!0).forEach(function(o){_defineProperty$q(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$p(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$q(e,t,n){return(t=_toPropertyKey$q(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$q(e){var t=_toPrimitive$q(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$q(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function getValueByDataKey(e,t,n){return isNullish$1(e)||isNullish$1(t)?n:isNumOrStr(t)?get(e,t,n):typeof t=="function"?t(e):n}var calculateActiveTickIndex=(e,t,n,o,u)=>{var d,f=-1,g=(d=t?.length)!==null&&d!==void 0?d:0;if(g<=1||e==null)return 0;if(o==="angleAxis"&&u!=null&&Math.abs(Math.abs(u[1]-u[0])-360)<=1e-6)for(var v=0;v<g;v++){var w=v>0?n[v-1].coordinate:n[g-1].coordinate,S=n[v].coordinate,R=v>=g-1?n[0].coordinate:n[v+1].coordinate,_=void 0;if(mathSign(S-w)!==mathSign(R-S)){var F=[];if(mathSign(R-S)===mathSign(u[1]-u[0])){_=R;var M=S+u[1]-u[0];F[0]=Math.min(M,(M+w)/2),F[1]=Math.max(M,(M+w)/2)}else{_=w;var I=R+u[1]-u[0];F[0]=Math.min(S,(I+S)/2),F[1]=Math.max(S,(I+S)/2)}var N=[Math.min(S,(_+S)/2),Math.max(S,(_+S)/2)];if(e>N[0]&&e<=N[1]||e>=F[0]&&e<=F[1]){({index:f}=n[v]);break}}else{var B=Math.min(w,R),H=Math.max(w,R);if(e>(B+S)/2&&e<=(H+S)/2){({index:f}=n[v]);break}}}else if(t){for(var U=0;U<g;U++)if(U===0&&e<=(t[U].coordinate+t[U+1].coordinate)/2||U>0&&U<g-1&&e>(t[U].coordinate+t[U-1].coordinate)/2&&e<=(t[U].coordinate+t[U+1].coordinate)/2||U===g-1&&e>(t[U].coordinate+t[U-1].coordinate)/2){({index:f}=t[U]);break}}return f},appendOffsetOfLegend=(e,t,n)=>{if(t&&n){var{width:o,height:u}=n,{align:d,verticalAlign:f,layout:g}=t;if((g==="vertical"||g==="horizontal"&&f==="middle")&&d!=="center"&&isNumber$1(e[d]))return _objectSpread$p(_objectSpread$p({},e),{},{[d]:e[d]+(o||0)});if((g==="horizontal"||g==="vertical"&&d==="center")&&f!=="middle"&&isNumber$1(e[f]))return _objectSpread$p(_objectSpread$p({},e),{},{[f]:e[f]+(u||0)})}return e},isCategoricalAxis=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",EPS=1e-4,checkDomainOfScale=e=>{var t=e.domain();if(!(!t||t.length<=2)){var n=t.length,o=e.range(),u=Math.min(o[0],o[1])-EPS,d=Math.max(o[0],o[1])+EPS,f=e(t[0]),g=e(t[n-1]);(f<u||f>d||g<u||g>d)&&e.domain([t[0],t[n-1]])}},offsetSign=e=>{var t=e.length;if(!(t<=0))for(var n=0,o=e[0].length;n<o;++n)for(var u=0,d=0,f=0;f<t;++f){var g=isNan(e[f][n][1])?e[f][n][0]:e[f][n][1];g>=0?(e[f][n][0]=u,e[f][n][1]=u+g,u=e[f][n][1]):(e[f][n][0]=d,e[f][n][1]=d+g,d=e[f][n][1])}},offsetPositive=e=>{var t=e.length;if(!(t<=0))for(var n=0,o=e[0].length;n<o;++n)for(var u=0,d=0;d<t;++d){var f=isNan(e[d][n][1])?e[d][n][0]:e[d][n][1];f>=0?(e[d][n][0]=u,e[d][n][1]=u+f,u=e[d][n][1]):(e[d][n][0]=0,e[d][n][1]=0)}},STACK_OFFSET_MAP={sign:offsetSign,expand:stackOffsetExpand,none:stackOffsetNone,silhouette:stackOffsetSilhouette,wiggle:stackOffsetWiggle,positive:offsetPositive},getStackedData=(e,t,n)=>{var o=STACK_OFFSET_MAP[n],u=shapeStack().keys(t).value((d,f)=>+getValueByDataKey(d,f,0)).order(stackOrderNone).offset(o);return u(e)},getDomainOfSingle=e=>{var t=e.flat(2).filter(isNumber$1);return[Math.min(...t),Math.max(...t)]},makeDomainFinite=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],getDomainOfStackGroups=(e,t,n)=>{if(e!=null)return makeDomainFinite(Object.keys(e).reduce((o,u)=>{var d=e[u],{stackedData:f}=d,g=f.reduce((v,w)=>{var S=getSliced(w,t,n),R=getDomainOfSingle(S);return[Math.min(v[0],R[0]),Math.max(v[1],R[1])]},[1/0,-1/0]);return[Math.min(g[0],o[0]),Math.max(g[1],o[1])]},[1/0,-1/0]))},MIN_VALUE_REG=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,MAX_VALUE_REG=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,getBandSizeOfAxis=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var o=e.scale.bandwidth();return o}if(e&&t&&t.length>=2){for(var u=sortBy(t,S=>S.coordinate),d=1/0,f=1,g=u.length;f<g;f++){var v=u[f],w=u[f-1];d=Math.min((v.coordinate||0)-(w.coordinate||0),d)}return d===1/0?0:d}return 0};function getTooltipEntry(e){var{tooltipEntrySettings:t,dataKey:n,payload:o,value:u,name:d}=e;return _objectSpread$p(_objectSpread$p({},t),{},{dataKey:n,payload:o,value:u,name:d})}function getTooltipNameProp(e,t){if(e)return String(e);if(typeof t=="string")return t}function inRange(e,t,n,o,u){if(n==="horizontal"||n==="vertical"){var d=e>=u.left&&e<=u.left+u.width&&t>=u.top&&t<=u.top+u.height;return d?{x:e,y:t}:null}return o?inRangeOfSector({x:e,y:t},o):null}var getActiveCoordinate=(e,t,n,o)=>{var u=t.find(w=>w&&w.index===n);if(u){if(e==="horizontal")return{x:u.coordinate,y:o.y};if(e==="vertical")return{x:o.x,y:u.coordinate};if(e==="centric"){var d=u.coordinate,{radius:f}=o;return _objectSpread$p(_objectSpread$p(_objectSpread$p({},o),polarToCartesian(o.cx,o.cy,f,d)),{},{angle:d,radius:f})}var g=u.coordinate,{angle:v}=o;return _objectSpread$p(_objectSpread$p(_objectSpread$p({},o),polarToCartesian(o.cx,o.cy,g,v)),{},{angle:v,radius:g})}return{x:0,y:0}},calculateTooltipPos=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,selectChartWidth=e=>e.layout.width,selectChartHeight=e=>e.layout.height,selectContainerScale=e=>e.layout.scale,selectMargin=e=>e.layout.margin,selectAllXAxes=createSelector(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),selectAllYAxes=createSelector(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),DATA_ITEM_INDEX_ATTRIBUTE_NAME="data-recharts-item-index",DATA_ITEM_DATAKEY_ATTRIBUTE_NAME="data-recharts-item-data-key",DEFAULT_Y_AXIS_WIDTH=60;function ownKeys$o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$o(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$o(Object(n),!0).forEach(function(o){_defineProperty$p(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$o(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$p(e,t,n){return(t=_toPropertyKey$p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$p(e){var t=_toPrimitive$p(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$p(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var selectBrushHeight=e=>e.brush.height;function selectLeftAxesOffset(e){var t=selectAllYAxes(e);return t.reduce((n,o)=>{if(o.orientation==="left"&&!o.mirror&&!o.hide){var u=typeof o.width=="number"?o.width:DEFAULT_Y_AXIS_WIDTH;return n+u}return n},0)}function selectRightAxesOffset(e){var t=selectAllYAxes(e);return t.reduce((n,o)=>{if(o.orientation==="right"&&!o.mirror&&!o.hide){var u=typeof o.width=="number"?o.width:DEFAULT_Y_AXIS_WIDTH;return n+u}return n},0)}function selectTopAxesOffset(e){var t=selectAllXAxes(e);return t.reduce((n,o)=>o.orientation==="top"&&!o.mirror&&!o.hide?n+o.height:n,0)}function selectBottomAxesOffset(e){var t=selectAllXAxes(e);return t.reduce((n,o)=>o.orientation==="bottom"&&!o.mirror&&!o.hide?n+o.height:n,0)}var selectChartOffsetInternal=createSelector([selectChartWidth,selectChartHeight,selectMargin,selectBrushHeight,selectLeftAxesOffset,selectRightAxesOffset,selectTopAxesOffset,selectBottomAxesOffset,selectLegendSettings,selectLegendSize],(e,t,n,o,u,d,f,g,v,w)=>{var S={left:(n.left||0)+u,right:(n.right||0)+d},R={top:(n.top||0)+f,bottom:(n.bottom||0)+g},_=_objectSpread$o(_objectSpread$o({},R),S),F=_.bottom;_.bottom+=o,_=appendOffsetOfLegend(_,v,w);var M=e-_.left-_.right,I=t-_.top-_.bottom;return _objectSpread$o(_objectSpread$o({brushBottom:F},_),{},{width:Math.max(M,0),height:Math.max(I,0)})}),selectChartViewBox=createSelector(selectChartOffsetInternal,e=>({x:e.left,y:e.top,width:e.width,height:e.height}));createSelector(selectChartWidth,selectChartHeight,(e,t)=>({x:0,y:0,width:e,height:t}));var PanoramaContext=reactExports.createContext(null),useIsPanorama=()=>reactExports.useContext(PanoramaContext)!=null,selectBrushSettings=e=>e.brush,selectBrushDimensions=createSelector([selectBrushSettings,selectChartOffsetInternal,selectMargin],(e,t,n)=>({height:e.height,x:isNumber$1(e.x)?e.x:t.left,y:isNumber$1(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:isNumber$1(e.width)?e.width:t.width})),throttle$3={},debounce$1={},debounce={},hasRequiredDebounce$1;function requireDebounce$1(){return hasRequiredDebounce$1||(hasRequiredDebounce$1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,o,{signal:u,edges:d}={}){let f,g=null;const v=d!=null&&d.includes("leading"),w=d==null||d.includes("trailing"),S=()=>{g!==null&&(n.apply(f,g),f=void 0,g=null)},R=()=>{w&&S(),I()};let _=null;const F=()=>{_!=null&&clearTimeout(_),_=setTimeout(()=>{_=null,R()},o)},M=()=>{_!==null&&(clearTimeout(_),_=null)},I=()=>{M(),f=void 0,g=null},N=()=>{S()},B=function(...H){if(u?.aborted)return;f=this,g=H;const U=_==null;F(),v&&U&&S()};return B.schedule=F,B.cancel=I,B.flush=N,u?.addEventListener("abort",I,{once:!0}),B}e.debounce=t})(debounce)),debounce}var hasRequiredDebounce;function requireDebounce(){return hasRequiredDebounce||(hasRequiredDebounce=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireDebounce$1();function n(o,u=0,d={}){typeof d!="object"&&(d={});const{leading:f=!1,trailing:g=!0,maxWait:v}=d,w=Array(2);f&&(w[0]="leading"),g&&(w[1]="trailing");let S,R=null;const _=t.debounce(function(...I){S=o.apply(this,I),R=null},u,{edges:w}),F=function(...I){return v!=null&&(R===null&&(R=Date.now()),Date.now()-R>=v)?(S=o.apply(this,I),R=Date.now(),_.cancel(),_.schedule(),S):(_.apply(this,I),S)},M=()=>(_.flush(),S);return F.cancel=_.cancel,F.flush=M,F}e.debounce=n})(debounce$1)),debounce$1}var hasRequiredThrottle$1;function requireThrottle$1(){return hasRequiredThrottle$1||(hasRequiredThrottle$1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireDebounce();function n(o,u=0,d={}){const{leading:f=!0,trailing:g=!0}=d;return t.debounce(o,u,{leading:f,maxWait:u,trailing:g})}e.throttle=n})(throttle$3)),throttle$3}var throttle$2,hasRequiredThrottle;function requireThrottle(){return hasRequiredThrottle||(hasRequiredThrottle=1,throttle$2=requireThrottle$1().throttle),throttle$2}var throttleExports=requireThrottle();const throttle$1=getDefaultExportFromCjs(throttleExports);var warn=function(t,n){for(var o=arguments.length,u=new Array(o>2?o-2:0),d=2;d<o;d++)u[d-2]=arguments[d]},calculateChartDimensions=(e,t,n)=>{var{width:o="100%",height:u="100%",aspect:d,maxHeight:f}=n,g=isPercent(o)?e:Number(o),v=isPercent(u)?t:Number(u);return d&&d>0&&(g?v=g/d:v&&(g=v*d),f&&v>f&&(v=f)),{calculatedWidth:g,calculatedHeight:v}},bothOverflow={width:0,height:0,overflow:"visible"},overflowX={width:0,overflowX:"visible"},overflowY={height:0,overflowY:"visible"},noStyle={},getInnerDivStyle=e=>{var{width:t,height:n}=e,o=isPercent(t),u=isPercent(n);return o&&u?bothOverflow:o?overflowX:u?overflowY:noStyle};function getDefaultWidthAndHeight(e){var{width:t,height:n,aspect:o}=e,u=t,d=n;return u===void 0&&d===void 0?(u="100%",d="100%"):u===void 0?u=o&&o>0?void 0:"100%":d===void 0&&(d=o&&o>0?void 0:"100%"),{width:u,height:d}}function isWellBehavedNumber(e){return Number.isFinite(e)}function isPositiveNumber(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function _extends$e(){return _extends$e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$e.apply(null,arguments)}function ownKeys$n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$n(Object(n),!0).forEach(function(o){_defineProperty$o(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$n(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$o(e,t,n){return(t=_toPropertyKey$o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$o(e){var t=_toPrimitive$o(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$o(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ResponsiveContainerContext=reactExports.createContext({width:-1,height:-1});function ResponsiveContainerContextProvider(e){var{children:t,width:n,height:o}=e,u=reactExports.useMemo(()=>({width:n,height:o}),[n,o]);return n<=0||o<=0?null:reactExports.createElement(ResponsiveContainerContext.Provider,{value:u},t)}var useResponsiveContainerContext=()=>reactExports.useContext(ResponsiveContainerContext),SizeDetectorContainer=reactExports.forwardRef((e,t)=>{var{aspect:n,initialDimension:o={width:-1,height:-1},width:u,height:d,minWidth:f=0,minHeight:g,maxHeight:v,children:w,debounce:S=0,id:R,className:_,onResize:F,style:M={}}=e,I=reactExports.useRef(null),N=reactExports.useRef();N.current=F,reactExports.useImperativeHandle(t,()=>I.current);var[B,H]=reactExports.useState({containerWidth:o.width,containerHeight:o.height}),U=reactExports.useCallback((ie,se)=>{H(fe=>{var de=Math.round(ie),Ce=Math.round(se);return fe.containerWidth===de&&fe.containerHeight===Ce?fe:{containerWidth:de,containerHeight:Ce}})},[]);reactExports.useEffect(()=>{var ie=Ce=>{var be,{width:xe,height:Ee}=Ce[0].contentRect;U(xe,Ee),(be=N.current)===null||be===void 0||be.call(N,xe,Ee)};S>0&&(ie=throttle$1(ie,S,{trailing:!0,leading:!1}));var se=new ResizeObserver(ie),{width:fe,height:de}=I.current.getBoundingClientRect();return U(fe,de),se.observe(I.current),()=>{se.disconnect()}},[U,S]);var{containerWidth:$,containerHeight:z}=B;warn(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:j,calculatedHeight:J}=calculateChartDimensions($,z,{width:u,height:d,aspect:n,maxHeight:v});return warn(j>0||J>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,j,J,u,d,f,g,n),reactExports.createElement("div",{id:R?"".concat(R):void 0,className:clsx("recharts-responsive-container",_),style:_objectSpread$n(_objectSpread$n({},M),{},{width:u,height:d,minWidth:f,minHeight:g,maxHeight:v}),ref:I},reactExports.createElement("div",{style:getInnerDivStyle({width:u,height:d})},reactExports.createElement(ResponsiveContainerContextProvider,{width:j,height:J},w)))}),ResponsiveContainer=reactExports.forwardRef((e,t)=>{var n=useResponsiveContainerContext();if(isPositiveNumber(n.width)&&isPositiveNumber(n.height))return e.children;var{width:o,height:u}=getDefaultWidthAndHeight({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:d,calculatedHeight:f}=calculateChartDimensions(void 0,void 0,{width:o,height:u,aspect:e.aspect,maxHeight:e.maxHeight});return isNumber$1(d)&&isNumber$1(f)?reactExports.createElement(ResponsiveContainerContextProvider,{width:d,height:f},e.children):reactExports.createElement(SizeDetectorContainer,_extends$e({},e,{width:o,height:u,ref:t}))}),useViewBox=()=>{var e,t=useIsPanorama(),n=useAppSelector(selectChartViewBox),o=useAppSelector(selectBrushDimensions),u=(e=useAppSelector(selectBrushSettings))===null||e===void 0?void 0:e.padding;return!t||!o||!u?n:{width:o.width-u.left-u.right,height:o.height-u.top-u.bottom,x:u.left,y:u.top}},manyComponentsThrowErrorsIfOffsetIsUndefined={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},useOffsetInternal=()=>{var e;return(e=useAppSelector(selectChartOffsetInternal))!==null&&e!==void 0?e:manyComponentsThrowErrorsIfOffsetIsUndefined},useChartWidth=()=>useAppSelector(selectChartWidth),useChartHeight=()=>useAppSelector(selectChartHeight),selectChartLayout=e=>e.layout.layoutType,useChartLayout=()=>useAppSelector(selectChartLayout),ReportChartSize=e=>{var t=useAppDispatch(),n=useIsPanorama(),{width:o,height:u}=e,d=useResponsiveContainerContext(),f=o,g=u;return d&&(f=d.width>0?d.width:o,g=d.height>0?d.height:u),reactExports.useEffect(()=>{!n&&isPositiveNumber(f)&&isPositiveNumber(g)&&t(setChartSize({width:f,height:g}))},[t,n,f,g]),null},initialState$9={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},legendSlice=createSlice({name:"legend",initialState:initialState$9,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:prepareAutoBatched()},removeLegendPayload:{reducer(e,t){var n=current(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)},prepare:prepareAutoBatched()}}}),{setLegendSize,setLegendSettings,addLegendPayload,removeLegendPayload}=legendSlice.actions,legendReducer=legendSlice.reducer;function _extends$d(){return _extends$d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$d.apply(null,arguments)}function ownKeys$m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$m(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$m(Object(n),!0).forEach(function(o){_defineProperty$n(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$m(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$n(e,t,n){return(t=_toPropertyKey$n(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$n(e){var t=_toPrimitive$n(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$n(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function defaultFormatter$1(e){return Array.isArray(e)&&isNumOrStr(e[0])&&isNumOrStr(e[1])?e.join(" ~ "):e}var DefaultTooltipContent=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:o={},labelStyle:u={},payload:d,formatter:f,itemSorter:g,wrapperClassName:v,labelClassName:w,label:S,labelFormatter:R,accessibilityLayer:_=!1}=e,F=()=>{if(d&&d.length){var z={padding:0,margin:0},j=(g?sortBy(d,g):d).map((J,ie)=>{if(J.type==="none")return null;var se=J.formatter||f||defaultFormatter$1,{value:fe,name:de}=J,Ce=fe,be=de;if(se){var xe=se(fe,de,J,ie,d);if(Array.isArray(xe))[Ce,be]=xe;else if(xe!=null)Ce=xe;else return null}var Ee=_objectSpread$m({display:"block",paddingTop:4,paddingBottom:4,color:J.color||"#000"},o);return reactExports.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(ie),style:Ee},isNumOrStr(be)?reactExports.createElement("span",{className:"recharts-tooltip-item-name"},be):null,isNumOrStr(be)?reactExports.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,reactExports.createElement("span",{className:"recharts-tooltip-item-value"},Ce),reactExports.createElement("span",{className:"recharts-tooltip-item-unit"},J.unit||""))});return reactExports.createElement("ul",{className:"recharts-tooltip-item-list",style:z},j)}return null},M=_objectSpread$m({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),I=_objectSpread$m({margin:0},u),N=!isNullish$1(S),B=N?S:"",H=clsx("recharts-default-tooltip",v),U=clsx("recharts-tooltip-label",w);N&&R&&d!==void 0&&d!==null&&(B=R(S,d));var $=_?{role:"status","aria-live":"assertive"}:{};return reactExports.createElement("div",_extends$d({className:H,style:M},$),reactExports.createElement("p",{className:U,style:I},reactExports.isValidElement(B)?B:"".concat(B)),F())},CSS_CLASS_PREFIX="recharts-tooltip-wrapper",TOOLTIP_HIDDEN={visibility:"hidden"};function getTooltipCSSClassName(e){var{coordinate:t,translateX:n,translateY:o}=e;return clsx(CSS_CLASS_PREFIX,{["".concat(CSS_CLASS_PREFIX,"-right")]:isNumber$1(n)&&t&&isNumber$1(t.x)&&n>=t.x,["".concat(CSS_CLASS_PREFIX,"-left")]:isNumber$1(n)&&t&&isNumber$1(t.x)&&n<t.x,["".concat(CSS_CLASS_PREFIX,"-bottom")]:isNumber$1(o)&&t&&isNumber$1(t.y)&&o>=t.y,["".concat(CSS_CLASS_PREFIX,"-top")]:isNumber$1(o)&&t&&isNumber$1(t.y)&&o<t.y})}function getTooltipTranslateXY(e){var{allowEscapeViewBox:t,coordinate:n,key:o,offsetTopLeft:u,position:d,reverseDirection:f,tooltipDimension:g,viewBox:v,viewBoxDimension:w}=e;if(d&&isNumber$1(d[o]))return d[o];var S=n[o]-g-(u>0?u:0),R=n[o]+u;if(t[o])return f[o]?S:R;var _=v[o];if(_==null)return 0;if(f[o]){var F=S,M=_;return F<M?Math.max(R,_):Math.max(S,_)}if(w==null)return 0;var I=R+g,N=_+w;return I>N?Math.max(S,_):Math.max(R,_)}function getTransformStyle(e){var{translateX:t,translateY:n,useTranslate3d:o}=e;return{transform:o?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function getTooltipTranslate(e){var{allowEscapeViewBox:t,coordinate:n,offsetTopLeft:o,position:u,reverseDirection:d,tooltipBox:f,useTranslate3d:g,viewBox:v}=e,w,S,R;return f.height>0&&f.width>0&&n?(S=getTooltipTranslateXY({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:o,position:u,reverseDirection:d,tooltipDimension:f.width,viewBox:v,viewBoxDimension:v.width}),R=getTooltipTranslateXY({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:o,position:u,reverseDirection:d,tooltipDimension:f.height,viewBox:v,viewBoxDimension:v.height}),w=getTransformStyle({translateX:S,translateY:R,useTranslate3d:g})):w=TOOLTIP_HIDDEN,{cssProperties:w,cssClasses:getTooltipCSSClassName({translateX:S,translateY:R,coordinate:n})}}function ownKeys$l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$l(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$l(Object(n),!0).forEach(function(o){_defineProperty$m(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$l(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$m(e,t,n){return(t=_toPropertyKey$m(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$m(e){var t=_toPrimitive$m(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$m(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class TooltipBoundingBox extends reactExports.PureComponent{constructor(){super(...arguments),_defineProperty$m(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),_defineProperty$m(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,o,u,d;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(o=this.props.coordinate)===null||o===void 0?void 0:o.x)!==null&&n!==void 0?n:0,y:(u=(d=this.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:o,animationEasing:u,children:d,coordinate:f,hasPayload:g,isAnimationActive:v,offset:w,position:S,reverseDirection:R,useTranslate3d:_,viewBox:F,wrapperStyle:M,lastBoundingBox:I,innerRef:N,hasPortalFromProps:B}=this.props,{cssClasses:H,cssProperties:U}=getTooltipTranslate({allowEscapeViewBox:n,coordinate:f,offsetTopLeft:w,position:S,reverseDirection:R,tooltipBox:{height:I.height,width:I.width},useTranslate3d:_,viewBox:F}),$=B?{}:_objectSpread$l(_objectSpread$l({transition:v&&t?"transform ".concat(o,"ms ").concat(u):void 0},U),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&g?"visible":"hidden",position:"absolute",top:0,left:0}),z=_objectSpread$l(_objectSpread$l({},$),{},{visibility:!this.state.dismissed&&t&&g?"visible":"hidden"},M);return reactExports.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:H,style:z,ref:N},d)}}var parseIsSsrByDefault=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Global={devToolsEnabled:!1,isSsr:parseIsSsrByDefault()},useAccessibilityLayer=()=>useAppSelector(e=>e.rootProps.accessibilityLayer);function _extends$c(){return _extends$c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$c.apply(null,arguments)}function ownKeys$k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$k(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$k(Object(n),!0).forEach(function(o){_defineProperty$l(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$k(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$l(e,t,n){return(t=_toPropertyKey$l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$l(e){var t=_toPrimitive$l(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$l(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var CURVE_FACTORIES={curveBasisClosed,curveBasisOpen,curveBasis,curveBumpX:bumpX,curveBumpY:bumpY,curveLinearClosed,curveLinear,curveMonotoneX:monotoneX,curveMonotoneY:monotoneY,curveNatural,curveStep,curveStepAfter:stepAfter,curveStepBefore:stepBefore},defined=e=>isWellBehavedNumber(e.x)&&isWellBehavedNumber(e.y),getX=e=>e.x,getY=e=>e.y,getCurveFactory=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(upperFirst(e));return(n==="curveMonotone"||n==="curveBump")&&t?CURVE_FACTORIES["".concat(n).concat(t==="vertical"?"Y":"X")]:CURVE_FACTORIES[n]||curveLinear},getPath$1=e=>{var{type:t="linear",points:n=[],baseLine:o,layout:u,connectNulls:d=!1}=e,f=getCurveFactory(t,u),g=d?n.filter(defined):n,v;if(Array.isArray(o)){var w=d?o.filter(R=>defined(R)):o,S=g.map((R,_)=>_objectSpread$k(_objectSpread$k({},R),{},{base:w[_]}));return u==="vertical"?v=shapeArea().y(getY).x1(getX).x0(R=>R.base.x):v=shapeArea().x(getX).y1(getY).y0(R=>R.base.y),v.defined(defined).curve(f),v(S)}return u==="vertical"&&isNumber$1(o)?v=shapeArea().y(getY).x1(getX).x0(o):isNumber$1(o)?v=shapeArea().x(getX).y1(getY).y0(o):v=shapeLine().x(getX).y(getY),v.defined(defined).curve(f),v(g)},Curve=e=>{var{className:t,points:n,path:o,pathRef:u}=e;if((!n||!n.length)&&!o)return null;var d=n&&n.length?getPath$1(e):o;return reactExports.createElement("path",_extends$c({},svgPropertiesNoEvents(e),adaptEventHandlers(e),{className:clsx("recharts-curve",t),d:d===null?void 0:d,ref:u}))},_excluded$a=["x","y","top","left","width","height","className"];function _extends$b(){return _extends$b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$b.apply(null,arguments)}function ownKeys$j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$j(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$j(Object(n),!0).forEach(function(o){_defineProperty$k(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$j(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$k(e,t,n){return(t=_toPropertyKey$k(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$k(e){var t=_toPrimitive$k(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$k(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _objectWithoutProperties$a(e,t){if(e==null)return{};var n,o,u=_objectWithoutPropertiesLoose$a(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(o=0;o<d.length;o++)n=d[o],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(u[n]=e[n])}return u}function _objectWithoutPropertiesLoose$a(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;n[o]=e[o]}return n}var getPath=(e,t,n,o,u,d)=>"M".concat(e,",").concat(u,"v").concat(o,"M").concat(d,",").concat(t,"h").concat(n),Cross=e=>{var{x:t=0,y:n=0,top:o=0,left:u=0,width:d=0,height:f=0,className:g}=e,v=_objectWithoutProperties$a(e,_excluded$a),w=_objectSpread$j({x:t,y:n,top:o,left:u,width:d,height:f},v);return!isNumber$1(t)||!isNumber$1(n)||!isNumber$1(d)||!isNumber$1(f)||!isNumber$1(o)||!isNumber$1(u)?null:reactExports.createElement("path",_extends$b({},svgPropertiesAndEvents(w),{className:clsx("recharts-cross",g),d:getPath(t,n,d,f,o,u)}))};function getCursorRectangle(e,t,n,o){var u=o/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-u:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-u,width:e==="horizontal"?o:n.width-1,height:e==="horizontal"?n.height-1:o}}function ownKeys$i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$i(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$i(Object(n),!0).forEach(function(o){_defineProperty$j(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$i(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$j(e,t,n){return(t=_toPropertyKey$j(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$j(e){var t=_toPrimitive$j(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$j(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function resolveDefaultProps(e,t){var n=_objectSpread$i({},e),o=t,u=Object.keys(t),d=u.reduce((f,g)=>(f[g]===void 0&&o[g]!==void 0&&(f[g]=o[g]),f),n);return d}function noop$4(){}function isNotNil(e){return e!=null}function ownKeys$h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$h(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$h(Object(n),!0).forEach(function(o){_defineProperty$i(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$h(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$i(e,t,n){return(t=_toPropertyKey$i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$i(e){var t=_toPrimitive$i(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$i(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var getDashCase=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),getTransitionVal=(e,t,n)=>e.map(o=>"".concat(getDashCase(o)," ").concat(t,"ms ").concat(n)).join(","),getIntersectionKeys=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,o)=>n.filter(u=>o.includes(u))),mapObject=(e,t)=>Object.keys(t).reduce((n,o)=>_objectSpread$h(_objectSpread$h({},n),{},{[o]:e(o,t[o])}),{});function ownKeys$g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$g(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$g(Object(n),!0).forEach(function(o){_defineProperty$h(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$g(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$h(e,t,n){return(t=_toPropertyKey$h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$h(e){var t=_toPrimitive$h(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$h(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var alpha$1=(e,t,n)=>e+(t-e)*n,needContinue=e=>{var{from:t,to:n}=e;return t!==n},calStepperVals=(e,t,n)=>{var o=mapObject((u,d)=>{if(needContinue(d)){var[f,g]=e(d.from,d.to,d.velocity);return _objectSpread$g(_objectSpread$g({},d),{},{from:f,velocity:g})}return d},t);return n<1?mapObject((u,d)=>needContinue(d)?_objectSpread$g(_objectSpread$g({},d),{},{velocity:alpha$1(d.velocity,o[u].velocity,n),from:alpha$1(d.from,o[u].from,n)}):d,t):calStepperVals(e,o,n-1)};function createStepperUpdate(e,t,n,o,u,d){var f,g=o.reduce((_,F)=>_objectSpread$g(_objectSpread$g({},_),{},{[F]:{from:e[F],velocity:0,to:t[F]}}),{}),v=()=>mapObject((_,F)=>F.from,g),w=()=>!Object.values(g).filter(needContinue).length,S=null,R=_=>{f||(f=_);var F=_-f,M=F/n.dt;g=calStepperVals(n,g,M),u(_objectSpread$g(_objectSpread$g(_objectSpread$g({},e),t),v())),f=_,w()||(S=d.setTimeout(R))};return()=>(S=d.setTimeout(R),()=>{S()})}function createTimingUpdate(e,t,n,o,u,d,f){var g=null,v=u.reduce((R,_)=>_objectSpread$g(_objectSpread$g({},R),{},{[_]:[e[_],t[_]]}),{}),w,S=R=>{w||(w=R);var _=(R-w)/o,F=mapObject((I,N)=>alpha$1(...N,n(_)),v);if(d(_objectSpread$g(_objectSpread$g(_objectSpread$g({},e),t),F)),_<1)g=f.setTimeout(S);else{var M=mapObject((I,N)=>alpha$1(...N,n(1)),v);d(_objectSpread$g(_objectSpread$g(_objectSpread$g({},e),t),M))}};return()=>(g=f.setTimeout(S),()=>{g()})}const configUpdate=(e,t,n,o,u,d)=>{var f=getIntersectionKeys(e,t);return n.isStepper===!0?createStepperUpdate(e,t,n,f,u,d):createTimingUpdate(e,t,n,o,f,u,d)};var ACCURACY=1e-4,cubicBezierFactor=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],evaluatePolynomial=(e,t)=>e.map((n,o)=>n*t**o).reduce((n,o)=>n+o),cubicBezier$1=(e,t)=>n=>{var o=cubicBezierFactor(e,t);return evaluatePolynomial(o,n)},derivativeCubicBezier=(e,t)=>n=>{var o=cubicBezierFactor(e,t),u=[...o.map((d,f)=>d*f).slice(1),0];return evaluatePolynomial(u,n)},configBezier=function(){for(var t,n,o,u,d=arguments.length,f=new Array(d),g=0;g<d;g++)f[g]=arguments[g];if(f.length===1)switch(f[0]){case"linear":[t,o,n,u]=[0,0,1,1];break;case"ease":[t,o,n,u]=[.25,.1,.25,1];break;case"ease-in":[t,o,n,u]=[.42,0,1,1];break;case"ease-out":[t,o,n,u]=[.42,0,.58,1];break;case"ease-in-out":[t,o,n,u]=[0,0,.58,1];break;default:{var v=f[0].split("(");v[0]==="cubic-bezier"&&v[1].split(")")[0].split(",").length===4&&([t,o,n,u]=v[1].split(")")[0].split(",").map(M=>parseFloat(M)))}}else f.length===4&&([t,o,n,u]=f);var w=cubicBezier$1(t,n),S=cubicBezier$1(o,u),R=derivativeCubicBezier(t,n),_=M=>M>1?1:M<0?0:M,F=M=>{for(var I=M>1?1:M,N=I,B=0;B<8;++B){var H=w(N)-I,U=R(N);if(Math.abs(H-I)<ACCURACY||U<ACCURACY)return S(N);N=_(N-H/U)}return S(N)};return F.isStepper=!1,F},configSpring=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:o=8,dt:u=17}=t,d=(f,g,v)=>{var w=-(f-g)*n,S=v*o,R=v+(w-S)*u/1e3,_=v*u/1e3+f;return Math.abs(_-g)<ACCURACY&&Math.abs(R)<ACCURACY?[g,0]:[_,R]};return d.isStepper=!0,d.dt=u,d},configEasing=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return configBezier(e);case"spring":return configSpring();default:if(e.split("(")[0]==="cubic-bezier")return configBezier(e)}return typeof e=="function"?e:null};function createAnimateManager(e){var t,n=()=>null,o=!1,u=null,d=f=>{if(!o){if(Array.isArray(f)){if(!f.length)return;var g=f,[v,...w]=g;if(typeof v=="number"){u=e.setTimeout(d.bind(null,w),v);return}d(v),u=e.setTimeout(d.bind(null,w));return}typeof f=="string"&&(t=f,n(t)),typeof f=="object"&&(t=f,n(t)),typeof f=="function"&&f()}};return{stop:()=>{o=!0},start:f=>{o=!1,u&&(u(),u=null),d(f)},subscribe:f=>(n=f,()=>{n=()=>null}),getTimeoutController:()=>e}}class RequestAnimationFrameTimeoutController{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=performance.now(),u=null,d=f=>{f-o>=n?t(f):typeof requestAnimationFrame=="function"&&(u=requestAnimationFrame(d))};return u=requestAnimationFrame(d),()=>{cancelAnimationFrame(u)}}}function createDefaultAnimationManager(){return createAnimateManager(new RequestAnimationFrameTimeoutController)}var AnimationManagerContext=reactExports.createContext(createDefaultAnimationManager);function useAnimationManager(e,t){var n=reactExports.useContext(AnimationManagerContext);return reactExports.useMemo(()=>t??n(e),[e,t,n])}var defaultJavascriptAnimateProps={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},from={t:0},to={t:1};function JavascriptAnimate(e){var t=resolveDefaultProps(e,defaultJavascriptAnimateProps),{isActive:n,canBegin:o,duration:u,easing:d,begin:f,onAnimationEnd:g,onAnimationStart:v,children:w}=t,S=useAnimationManager(t.animationId,t.animationManager),[R,_]=reactExports.useState(n?from:to),F=reactExports.useRef(null);return reactExports.useEffect(()=>{n||_(to)},[n]),reactExports.useEffect(()=>{if(!n||!o)return noop$4;var M=configUpdate(from,to,configEasing(d),u,_,S.getTimeoutController()),I=()=>{F.current=M()};return S.start([v,f,I,u,g]),()=>{S.stop(),F.current&&F.current(),g()}},[n,o,u,d,f,v,g,S]),w(R.t)}function useAnimationId(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=reactExports.useRef(uniqueId(t)),o=reactExports.useRef(e);return o.current!==e&&(n.current=uniqueId(t),o.current=e),n.current}var _excluded$9=["radius"],_excluded2$3=["radius"];function ownKeys$f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$f(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$f(Object(n),!0).forEach(function(o){_defineProperty$g(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$f(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$g(e,t,n){return(t=_toPropertyKey$g(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$g(e){var t=_toPrimitive$g(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$g(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _extends$a(){return _extends$a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$a.apply(null,arguments)}function _objectWithoutProperties$9(e,t){if(e==null)return{};var n,o,u=_objectWithoutPropertiesLoose$9(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(o=0;o<d.length;o++)n=d[o],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(u[n]=e[n])}return u}function _objectWithoutPropertiesLoose$9(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;n[o]=e[o]}return n}var getRectanglePath=(e,t,n,o,u)=>{var d=Math.min(Math.abs(n)/2,Math.abs(o)/2),f=o>=0?1:-1,g=n>=0?1:-1,v=o>=0&&n>=0||o<0&&n<0?1:0,w;if(d>0&&u instanceof Array){for(var S=[0,0,0,0],R=0,_=4;R<_;R++)S[R]=u[R]>d?d:u[R];w="M".concat(e,",").concat(t+f*S[0]),S[0]>0&&(w+="A ".concat(S[0],",").concat(S[0],",0,0,").concat(v,",").concat(e+g*S[0],",").concat(t)),w+="L ".concat(e+n-g*S[1],",").concat(t),S[1]>0&&(w+="A ".concat(S[1],",").concat(S[1],",0,0,").concat(v,`,
        `).concat(e+n,",").concat(t+f*S[1])),w+="L ".concat(e+n,",").concat(t+o-f*S[2]),S[2]>0&&(w+="A ".concat(S[2],",").concat(S[2],",0,0,").concat(v,`,
        `).concat(e+n-g*S[2],",").concat(t+o)),w+="L ".concat(e+g*S[3],",").concat(t+o),S[3]>0&&(w+="A ".concat(S[3],",").concat(S[3],",0,0,").concat(v,`,
        `).concat(e,",").concat(t+o-f*S[3])),w+="Z"}else if(d>0&&u===+u&&u>0){var F=Math.min(d,u);w="M ".concat(e,",").concat(t+f*F,`
            A `).concat(F,",").concat(F,",0,0,").concat(v,",").concat(e+g*F,",").concat(t,`
            L `).concat(e+n-g*F,",").concat(t,`
            A `).concat(F,",").concat(F,",0,0,").concat(v,",").concat(e+n,",").concat(t+f*F,`
            L `).concat(e+n,",").concat(t+o-f*F,`
            A `).concat(F,",").concat(F,",0,0,").concat(v,",").concat(e+n-g*F,",").concat(t+o,`
            L `).concat(e+g*F,",").concat(t+o,`
            A `).concat(F,",").concat(F,",0,0,").concat(v,",").concat(e,",").concat(t+o-f*F," Z")}else w="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(o," h ").concat(-n," Z");return w},defaultProps$4={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Rectangle=e=>{var t=resolveDefaultProps(e,defaultProps$4),n=reactExports.useRef(null),[o,u]=reactExports.useState(-1);reactExports.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var oe=n.current.getTotalLength();oe&&u(oe)}catch{}},[]);var{x:d,y:f,width:g,height:v,radius:w,className:S}=t,{animationEasing:R,animationDuration:_,animationBegin:F,isAnimationActive:M,isUpdateAnimationActive:I}=t,N=reactExports.useRef(g),B=reactExports.useRef(v),H=reactExports.useRef(d),U=reactExports.useRef(f),$=reactExports.useMemo(()=>({x:d,y:f,width:g,height:v,radius:w}),[d,f,g,v,w]),z=useAnimationId($,"rectangle-");if(d!==+d||f!==+f||g!==+g||v!==+v||g===0||v===0)return null;var j=clsx("recharts-rectangle",S);if(!I){var J=svgPropertiesAndEvents(t),{radius:ie}=J,se=_objectWithoutProperties$9(J,_excluded$9);return reactExports.createElement("path",_extends$a({},se,{radius:typeof w=="number"?w:void 0,className:j,d:getRectanglePath(d,f,g,v,w)}))}var fe=N.current,de=B.current,Ce=H.current,be=U.current,xe="0px ".concat(o===-1?1:o,"px"),Ee="".concat(o,"px 0px"),ae=getTransitionVal(["strokeDasharray"],_,typeof R=="string"?R:void 0);return reactExports.createElement(JavascriptAnimate,{animationId:z,key:z,canBegin:o>0,duration:_,easing:R,isActive:I,begin:F},oe=>{var ee=interpolate$2(fe,g,oe),Z=interpolate$2(de,v,oe),Q=interpolate$2(Ce,d,oe),K=interpolate$2(be,f,oe);n.current&&(N.current=ee,B.current=Z,H.current=Q,U.current=K);var ne;M?oe>0?ne={transition:ae,strokeDasharray:Ee}:ne={strokeDasharray:xe}:ne={strokeDasharray:Ee};var ue=svgPropertiesAndEvents(t),{radius:ye}=ue,pe=_objectWithoutProperties$9(ue,_excluded2$3);return reactExports.createElement("path",_extends$a({},pe,{radius:typeof w=="number"?w:void 0,className:j,d:getRectanglePath(Q,K,ee,Z,w),ref:n,style:_objectSpread$f(_objectSpread$f({},ne),t.style)}))})};function getRadialCursorPoints(e){var{cx:t,cy:n,radius:o,startAngle:u,endAngle:d}=e,f=polarToCartesian(t,n,o,u),g=polarToCartesian(t,n,o,d);return{points:[f,g],cx:t,cy:n,radius:o,startAngle:u,endAngle:d}}function _extends$9(){return _extends$9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$9.apply(null,arguments)}var getDeltaAngle$1=(e,t)=>{var n=mathSign(t-e),o=Math.min(Math.abs(t-e),359.999);return n*o},getTangentCircle=e=>{var{cx:t,cy:n,radius:o,angle:u,sign:d,isExternal:f,cornerRadius:g,cornerIsExternal:v}=e,w=g*(f?1:-1)+o,S=Math.asin(g/w)/RADIAN,R=v?u:u+d*S,_=polarToCartesian(t,n,w,R),F=polarToCartesian(t,n,o,R),M=v?u-d*S:u,I=polarToCartesian(t,n,w*Math.cos(S*RADIAN),M);return{center:_,circleTangency:F,lineTangency:I,theta:S}},getSectorPath=e=>{var{cx:t,cy:n,innerRadius:o,outerRadius:u,startAngle:d,endAngle:f}=e,g=getDeltaAngle$1(d,f),v=d+g,w=polarToCartesian(t,n,u,d),S=polarToCartesian(t,n,u,v),R="M ".concat(w.x,",").concat(w.y,`
    A `).concat(u,",").concat(u,`,0,
    `).concat(+(Math.abs(g)>180),",").concat(+(d>v),`,
    `).concat(S.x,",").concat(S.y,`
  `);if(o>0){var _=polarToCartesian(t,n,o,d),F=polarToCartesian(t,n,o,v);R+="L ".concat(F.x,",").concat(F.y,`
            A `).concat(o,",").concat(o,`,0,
            `).concat(+(Math.abs(g)>180),",").concat(+(d<=v),`,
            `).concat(_.x,",").concat(_.y," Z")}else R+="L ".concat(t,",").concat(n," Z");return R},getSectorWithCorner=e=>{var{cx:t,cy:n,innerRadius:o,outerRadius:u,cornerRadius:d,forceCornerRadius:f,cornerIsExternal:g,startAngle:v,endAngle:w}=e,S=mathSign(w-v),{circleTangency:R,lineTangency:_,theta:F}=getTangentCircle({cx:t,cy:n,radius:u,angle:v,sign:S,cornerRadius:d,cornerIsExternal:g}),{circleTangency:M,lineTangency:I,theta:N}=getTangentCircle({cx:t,cy:n,radius:u,angle:w,sign:-S,cornerRadius:d,cornerIsExternal:g}),B=g?Math.abs(v-w):Math.abs(v-w)-F-N;if(B<0)return f?"M ".concat(_.x,",").concat(_.y,`
        a`).concat(d,",").concat(d,",0,0,1,").concat(d*2,`,0
        a`).concat(d,",").concat(d,",0,0,1,").concat(-d*2,`,0
      `):getSectorPath({cx:t,cy:n,innerRadius:o,outerRadius:u,startAngle:v,endAngle:w});var H="M ".concat(_.x,",").concat(_.y,`
    A`).concat(d,",").concat(d,",0,0,").concat(+(S<0),",").concat(R.x,",").concat(R.y,`
    A`).concat(u,",").concat(u,",0,").concat(+(B>180),",").concat(+(S<0),",").concat(M.x,",").concat(M.y,`
    A`).concat(d,",").concat(d,",0,0,").concat(+(S<0),",").concat(I.x,",").concat(I.y,`
  `);if(o>0){var{circleTangency:U,lineTangency:$,theta:z}=getTangentCircle({cx:t,cy:n,radius:o,angle:v,sign:S,isExternal:!0,cornerRadius:d,cornerIsExternal:g}),{circleTangency:j,lineTangency:J,theta:ie}=getTangentCircle({cx:t,cy:n,radius:o,angle:w,sign:-S,isExternal:!0,cornerRadius:d,cornerIsExternal:g}),se=g?Math.abs(v-w):Math.abs(v-w)-z-ie;if(se<0&&d===0)return"".concat(H,"L").concat(t,",").concat(n,"Z");H+="L".concat(J.x,",").concat(J.y,`
      A`).concat(d,",").concat(d,",0,0,").concat(+(S<0),",").concat(j.x,",").concat(j.y,`
      A`).concat(o,",").concat(o,",0,").concat(+(se>180),",").concat(+(S>0),",").concat(U.x,",").concat(U.y,`
      A`).concat(d,",").concat(d,",0,0,").concat(+(S<0),",").concat($.x,",").concat($.y,"Z")}else H+="L".concat(t,",").concat(n,"Z");return H},defaultProps$3={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Sector=e=>{var t=resolveDefaultProps(e,defaultProps$3),{cx:n,cy:o,innerRadius:u,outerRadius:d,cornerRadius:f,forceCornerRadius:g,cornerIsExternal:v,startAngle:w,endAngle:S,className:R}=t;if(d<u||w===S)return null;var _=clsx("recharts-sector",R),F=d-u,M=getPercentValue(f,F,0,!0),I;return M>0&&Math.abs(w-S)<360?I=getSectorWithCorner({cx:n,cy:o,innerRadius:u,outerRadius:d,cornerRadius:Math.min(M,F/2),forceCornerRadius:g,cornerIsExternal:v,startAngle:w,endAngle:S}):I=getSectorPath({cx:n,cy:o,innerRadius:u,outerRadius:d,startAngle:w,endAngle:S}),reactExports.createElement("path",_extends$9({},svgPropertiesAndEvents(t),{className:_,d:I}))};function getCursorPoints(e,t,n){var o,u,d,f;if(e==="horizontal")o=t.x,d=o,u=n.top,f=n.top+n.height;else if(e==="vertical")u=t.y,f=u,o=n.left,d=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:g,cy:v,innerRadius:w,outerRadius:S,angle:R}=t,_=polarToCartesian(g,v,w,R),F=polarToCartesian(g,v,S,R);o=_.x,u=_.y,d=F.x,f=F.y}else return getRadialCursorPoints(t);return[{x:o,y:u},{x:d,y:f}]}var range$4={},toFinite={},toNumber={},hasRequiredToNumber;function requireToNumber(){return hasRequiredToNumber||(hasRequiredToNumber=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIsSymbol();function n(o){return t.isSymbol(o)?NaN:Number(o)}e.toNumber=n})(toNumber)),toNumber}var hasRequiredToFinite;function requireToFinite(){return hasRequiredToFinite||(hasRequiredToFinite=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireToNumber();function n(o){return o?(o=t.toNumber(o),o===1/0||o===-1/0?(o<0?-1:1)*Number.MAX_VALUE:o===o?o:0):o===0?o:0}e.toFinite=n})(toFinite)),toFinite}var hasRequiredRange$1;function requireRange$1(){return hasRequiredRange$1||(hasRequiredRange$1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireIsIterateeCall(),n=requireToFinite();function o(u,d,f){f&&typeof f!="number"&&t.isIterateeCall(u,d,f)&&(d=f=void 0),u=n.toFinite(u),d===void 0?(d=u,u=0):d=n.toFinite(d),f=f===void 0?u<d?1:-1:n.toFinite(f);const g=Math.max(Math.ceil((d-u)/(f||1)),0),v=new Array(g);for(let w=0;w<g;w++)v[w]=u,u+=f;return v}e.range=o})(range$4)),range$4}var range$3,hasRequiredRange;function requireRange(){return hasRequiredRange||(hasRequiredRange=1,range$3=requireRange$1().range),range$3}var rangeExports=requireRange();const range$2=getDefaultExportFromCjs(rangeExports);function ascending(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function descending(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function bisector(e){let t,n,o;e.length!==2?(t=ascending,n=(g,v)=>ascending(e(g),v),o=(g,v)=>e(g)-v):(t=e===ascending||e===descending?e:zero$1,n=e,o=e);function u(g,v,w=0,S=g.length){if(w<S){if(t(v,v)!==0)return S;do{const R=w+S>>>1;n(g[R],v)<0?w=R+1:S=R}while(w<S)}return w}function d(g,v,w=0,S=g.length){if(w<S){if(t(v,v)!==0)return S;do{const R=w+S>>>1;n(g[R],v)<=0?w=R+1:S=R}while(w<S)}return w}function f(g,v,w=0,S=g.length){const R=u(g,v,w,S-1);return R>w&&o(g[R-1],v)>-o(g[R],v)?R-1:R}return{left:u,center:f,right:d}}function zero$1(){return 0}function number$3(e){return e===null?NaN:+e}function*numbers(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const ascendingBisect=bisector(ascending),bisectRight=ascendingBisect.right;bisector(number$3).center;class InternMap extends Map{constructor(t,n=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[o,u]of t)this.set(o,u)}get(t){return super.get(intern_get(this,t))}has(t){return super.has(intern_get(this,t))}set(t,n){return super.set(intern_set(this,t),n)}delete(t){return super.delete(intern_delete(this,t))}}function intern_get({_intern:e,_key:t},n){const o=t(n);return e.has(o)?e.get(o):n}function intern_set({_intern:e,_key:t},n){const o=t(n);return e.has(o)?e.get(o):(e.set(o,n),n)}function intern_delete({_intern:e,_key:t},n){const o=t(n);return e.has(o)&&(n=e.get(o),e.delete(o)),n}function keyof(e){return e!==null&&typeof e=="object"?e.valueOf():e}function compareDefined(e=ascending){if(e===ascending)return ascendingDefined;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const o=e(t,n);return o||o===0?o:(e(n,n)===0)-(e(t,t)===0)}}function ascendingDefined(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(e,t,n){const o=(t-e)/Math.max(0,n),u=Math.floor(Math.log10(o)),d=o/Math.pow(10,u),f=d>=e10?10:d>=e5?5:d>=e2?2:1;let g,v,w;return u<0?(w=Math.pow(10,-u)/f,g=Math.round(e*w),v=Math.round(t*w),g/w<e&&++g,v/w>t&&--v,w=-w):(w=Math.pow(10,u)*f,g=Math.round(e/w),v=Math.round(t/w),g*w<e&&++g,v*w>t&&--v),v<g&&.5<=n&&n<2?tickSpec(e,t,n*2):[g,v,w]}function ticks(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const o=t<e,[u,d,f]=o?tickSpec(t,e,n):tickSpec(e,t,n);if(!(d>=u))return[];const g=d-u+1,v=new Array(g);if(o)if(f<0)for(let w=0;w<g;++w)v[w]=(d-w)/-f;else for(let w=0;w<g;++w)v[w]=(d-w)*f;else if(f<0)for(let w=0;w<g;++w)v[w]=(u+w)/-f;else for(let w=0;w<g;++w)v[w]=(u+w)*f;return v}function tickIncrement(e,t,n){return t=+t,e=+e,n=+n,tickSpec(e,t,n)[2]}function tickStep(e,t,n){t=+t,e=+e,n=+n;const o=t<e,u=o?tickIncrement(t,e,n):tickIncrement(e,t,n);return(o?-1:1)*(u<0?1/-u:u)}function max(e,t){let n;for(const o of e)o!=null&&(n<o||n===void 0&&o>=o)&&(n=o);return n}function min(e,t){let n;for(const o of e)o!=null&&(n>o||n===void 0&&o>=o)&&(n=o);return n}function quickselect(e,t,n=0,o=1/0,u){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),o=Math.floor(Math.min(e.length-1,o)),!(n<=t&&t<=o))return e;for(u=u===void 0?ascendingDefined:compareDefined(u);o>n;){if(o-n>600){const v=o-n+1,w=t-n+1,S=Math.log(v),R=.5*Math.exp(2*S/3),_=.5*Math.sqrt(S*R*(v-R)/v)*(w-v/2<0?-1:1),F=Math.max(n,Math.floor(t-w*R/v+_)),M=Math.min(o,Math.floor(t+(v-w)*R/v+_));quickselect(e,t,F,M,u)}const d=e[t];let f=n,g=o;for(swap(e,n,t),u(e[o],d)>0&&swap(e,n,o);f<g;){for(swap(e,f,g),++f,--g;u(e[f],d)<0;)++f;for(;u(e[g],d)>0;)--g}u(e[n],d)===0?swap(e,n,g):(++g,swap(e,g,o)),g<=t&&(n=g+1),t<=g&&(o=g-1)}return e}function swap(e,t,n){const o=e[t];e[t]=e[n],e[n]=o}function quantile$1(e,t,n){if(e=Float64Array.from(numbers(e)),!(!(o=e.length)||isNaN(t=+t))){if(t<=0||o<2)return min(e);if(t>=1)return max(e);var o,u=(o-1)*t,d=Math.floor(u),f=max(quickselect(e,d).subarray(0,d+1)),g=min(e.subarray(d+1));return f+(g-f)*(u-d)}}function quantileSorted(e,t,n=number$3){if(!(!(o=e.length)||isNaN(t=+t))){if(t<=0||o<2)return+n(e[0],0,e);if(t>=1)return+n(e[o-1],o-1,e);var o,u=(o-1)*t,d=Math.floor(u),f=+n(e[d],d,e),g=+n(e[d+1],d+1,e);return f+(g-f)*(u-d)}}function range$1(e,t,n){e=+e,t=+t,n=(u=arguments.length)<2?(t=e,e=0,1):u<3?1:+n;for(var o=-1,u=Math.max(0,Math.ceil((t-e)/n))|0,d=new Array(u);++o<u;)d[o]=e+o*n;return d}function initRange(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function initInterpolator(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const implicit=Symbol("implicit");function ordinal(){var e=new InternMap,t=[],n=[],o=implicit;function u(d){let f=e.get(d);if(f===void 0){if(o!==implicit)return o;e.set(d,f=t.push(d)-1)}return n[f%n.length]}return u.domain=function(d){if(!arguments.length)return t.slice();t=[],e=new InternMap;for(const f of d)e.has(f)||e.set(f,t.push(f)-1);return u},u.range=function(d){return arguments.length?(n=Array.from(d),u):n.slice()},u.unknown=function(d){return arguments.length?(o=d,u):o},u.copy=function(){return ordinal(t,n).unknown(o)},initRange.apply(u,arguments),u}function band(){var e=ordinal().unknown(void 0),t=e.domain,n=e.range,o=0,u=1,d,f,g=!1,v=0,w=0,S=.5;delete e.unknown;function R(){var _=t().length,F=u<o,M=F?u:o,I=F?o:u;d=(I-M)/Math.max(1,_-v+w*2),g&&(d=Math.floor(d)),M+=(I-M-d*(_-v))*S,f=d*(1-v),g&&(M=Math.round(M),f=Math.round(f));var N=range$1(_).map(function(B){return M+d*B});return n(F?N.reverse():N)}return e.domain=function(_){return arguments.length?(t(_),R()):t()},e.range=function(_){return arguments.length?([o,u]=_,o=+o,u=+u,R()):[o,u]},e.rangeRound=function(_){return[o,u]=_,o=+o,u=+u,g=!0,R()},e.bandwidth=function(){return f},e.step=function(){return d},e.round=function(_){return arguments.length?(g=!!_,R()):g},e.padding=function(_){return arguments.length?(v=Math.min(1,w=+_),R()):v},e.paddingInner=function(_){return arguments.length?(v=Math.min(1,_),R()):v},e.paddingOuter=function(_){return arguments.length?(w=+_,R()):w},e.align=function(_){return arguments.length?(S=Math.max(0,Math.min(1,_)),R()):S},e.copy=function(){return band(t(),[o,u]).round(g).paddingInner(v).paddingOuter(w).align(S)},initRange.apply(R(),arguments)}function pointish(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return pointish(t())},e}function point(){return pointish(band.apply(null,arguments).paddingInner(1))}function define(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function extend$1(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color$1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color$1(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=reHex.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?rgbn(t):n===3?new Rgb(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?rgba$1(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?rgba$1(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=reRgbInteger.exec(e))?new Rgb(t[1],t[2],t[3],1):(t=reRgbPercent.exec(e))?new Rgb(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=reRgbaInteger.exec(e))?rgba$1(t[1],t[2],t[3],t[4]):(t=reRgbaPercent.exec(e))?rgba$1(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=reHslPercent.exec(e))?hsla$1(t[1],t[2]/100,t[3]/100,1):(t=reHslaPercent.exec(e))?hsla$1(t[1],t[2]/100,t[3]/100,t[4]):named.hasOwnProperty(e)?rgbn(named[e]):e==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(e){return new Rgb(e>>16&255,e>>8&255,e&255,1)}function rgba$1(e,t,n,o){return o<=0&&(e=t=n=NaN),new Rgb(e,t,n,o)}function rgbConvert(e){return e instanceof Color||(e=color$1(e)),e?(e=e.rgb(),new Rgb(e.r,e.g,e.b,e.opacity)):new Rgb}function rgb$1(e,t,n,o){return arguments.length===1?rgbConvert(e):new Rgb(e,t,n,o??1)}function Rgb(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}define(Rgb,rgb$1,extend$1(Color,{brighter(e){return e=e==null?brighter:Math.pow(brighter,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?darker:Math.pow(darker,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex$1(this.r)}${hex$1(this.g)}${hex$1(this.b)}`}function rgb_formatHex8(){return`#${hex$1(this.r)}${hex$1(this.g)}${hex$1(this.b)}${hex$1((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const e=clampa(this.opacity);return`${e===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${e===1?")":`, ${e})`}`}function clampa(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function clampi(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function hex$1(e){return e=clampi(e),(e<16?"0":"")+e.toString(16)}function hsla$1(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Hsl(e,t,n,o)}function hslConvert(e){if(e instanceof Hsl)return new Hsl(e.h,e.s,e.l,e.opacity);if(e instanceof Color||(e=color$1(e)),!e)return new Hsl;if(e instanceof Hsl)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,u=Math.min(t,n,o),d=Math.max(t,n,o),f=NaN,g=d-u,v=(d+u)/2;return g?(t===d?f=(n-o)/g+(n<o)*6:n===d?f=(o-t)/g+2:f=(t-n)/g+4,g/=v<.5?d+u:2-d-u,f*=60):g=v>0&&v<1?0:f,new Hsl(f,g,v,e.opacity)}function hsl(e,t,n,o){return arguments.length===1?hslConvert(e):new Hsl(e,t,n,o??1)}function Hsl(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}define(Hsl,hsl,extend$1(Color,{brighter(e){return e=e==null?brighter:Math.pow(brighter,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?darker:Math.pow(darker,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,u=2*n-o;return new Rgb(hsl2rgb(e>=240?e-240:e+120,u,o),hsl2rgb(e,u,o),hsl2rgb(e<120?e+240:e-120,u,o),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=clampa(this.opacity);return`${e===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function clamph(e){return e=(e||0)%360,e<0?e+360:e}function clampt(e){return Math.max(0,Math.min(1,e||0))}function hsl2rgb(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const constant=e=>()=>e;function linear$1(e,t){return function(n){return e+n*t}}function exponential(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function gamma(e){return(e=+e)==1?nogamma:function(t,n){return n-t?exponential(t,n,e):constant(isNaN(t)?n:t)}}function nogamma(e,t){var n=t-e;return n?linear$1(e,n):constant(isNaN(e)?t:e)}const rgb=(function e(t){var n=gamma(t);function o(u,d){var f=n((u=rgb$1(u)).r,(d=rgb$1(d)).r),g=n(u.g,d.g),v=n(u.b,d.b),w=nogamma(u.opacity,d.opacity);return function(S){return u.r=f(S),u.g=g(S),u.b=v(S),u.opacity=w(S),u+""}}return o.gamma=e,o})(1);function numberArray(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,o=t.slice(),u;return function(d){for(u=0;u<n;++u)o[u]=e[u]*(1-d)+t[u]*d;return o}}function isNumberArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function genericArray(e,t){var n=t?t.length:0,o=e?Math.min(n,e.length):0,u=new Array(o),d=new Array(n),f;for(f=0;f<o;++f)u[f]=interpolate$1(e[f],t[f]);for(;f<n;++f)d[f]=t[f];return function(g){for(f=0;f<o;++f)d[f]=u[f](g);return d}}function date$1(e,t){var n=new Date;return e=+e,t=+t,function(o){return n.setTime(e*(1-o)+t*o),n}}function interpolateNumber(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function object(e,t){var n={},o={},u;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(u in t)u in e?n[u]=interpolate$1(e[u],t[u]):o[u]=t[u];return function(d){for(u in n)o[u]=n[u](d);return o}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(e){return function(){return e}}function one(e){return function(t){return e(t)+""}}function string(e,t){var n=reA.lastIndex=reB.lastIndex=0,o,u,d,f=-1,g=[],v=[];for(e=e+"",t=t+"";(o=reA.exec(e))&&(u=reB.exec(t));)(d=u.index)>n&&(d=t.slice(n,d),g[f]?g[f]+=d:g[++f]=d),(o=o[0])===(u=u[0])?g[f]?g[f]+=u:g[++f]=u:(g[++f]=null,v.push({i:f,x:interpolateNumber(o,u)})),n=reB.lastIndex;return n<t.length&&(d=t.slice(n),g[f]?g[f]+=d:g[++f]=d),g.length<2?v[0]?one(v[0].x):zero(t):(t=v.length,function(w){for(var S=0,R;S<t;++S)g[(R=v[S]).i]=R.x(w);return g.join("")})}function interpolate$1(e,t){var n=typeof t,o;return t==null||n==="boolean"?constant(t):(n==="number"?interpolateNumber:n==="string"?(o=color$1(t))?(t=o,rgb):string:t instanceof color$1?rgb:t instanceof Date?date$1:isNumberArray(t)?numberArray:Array.isArray(t)?genericArray:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?object:interpolateNumber)(e,t)}function interpolateRound(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function piecewise(e,t){t===void 0&&(t=e,e=interpolate$1);for(var n=0,o=t.length-1,u=t[0],d=new Array(o<0?0:o);n<o;)d[n]=e(u,u=t[++n]);return function(f){var g=Math.max(0,Math.min(o-1,Math.floor(f*=o)));return d[g](f-g)}}function constants$1(e){return function(){return e}}function number$2(e){return+e}var unit=[0,1];function identity$3(e){return e}function normalize(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:constants$1(isNaN(t)?NaN:.5)}function clamper(e,t){var n;return e>t&&(n=e,e=t,t=n),function(o){return Math.max(e,Math.min(t,o))}}function bimap(e,t,n){var o=e[0],u=e[1],d=t[0],f=t[1];return u<o?(o=normalize(u,o),d=n(f,d)):(o=normalize(o,u),d=n(d,f)),function(g){return d(o(g))}}function polymap(e,t,n){var o=Math.min(e.length,t.length)-1,u=new Array(o),d=new Array(o),f=-1;for(e[o]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++f<o;)u[f]=normalize(e[f],e[f+1]),d[f]=n(t[f],t[f+1]);return function(g){var v=bisectRight(e,g,1,o)-1;return d[v](u[v](g))}}function copy$1(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function transformer$2(){var e=unit,t=unit,n=interpolate$1,o,u,d,f=identity$3,g,v,w;function S(){var _=Math.min(e.length,t.length);return f!==identity$3&&(f=clamper(e[0],e[_-1])),g=_>2?polymap:bimap,v=w=null,R}function R(_){return _==null||isNaN(_=+_)?d:(v||(v=g(e.map(o),t,n)))(o(f(_)))}return R.invert=function(_){return f(u((w||(w=g(t,e.map(o),interpolateNumber)))(_)))},R.domain=function(_){return arguments.length?(e=Array.from(_,number$2),S()):e.slice()},R.range=function(_){return arguments.length?(t=Array.from(_),S()):t.slice()},R.rangeRound=function(_){return t=Array.from(_),n=interpolateRound,S()},R.clamp=function(_){return arguments.length?(f=_?!0:identity$3,S()):f!==identity$3},R.interpolate=function(_){return arguments.length?(n=_,S()):n},R.unknown=function(_){return arguments.length?(d=_,R):d},function(_,F){return o=_,u=F,S()}}function continuous(){return transformer$2()(identity$3,identity$3)}function formatDecimal(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function formatDecimalParts(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,o=e.slice(0,n);return[o.length>1?o[0]+o.slice(2):o,+e.slice(n+1)]}function exponent(e){return e=formatDecimalParts(Math.abs(e)),e?e[1]:NaN}function formatGroup(e,t){return function(n,o){for(var u=n.length,d=[],f=0,g=e[0],v=0;u>0&&g>0&&(v+g+1>o&&(g=Math.max(1,o-v)),d.push(n.substring(u-=g,u+g)),!((v+=g+1)>o));)g=e[f=(f+1)%e.length];return d.reverse().join(t)}}function formatNumerals(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(e){if(!(t=re.exec(e)))throw new Error("invalid format: "+e);var t;return new FormatSpecifier({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(e){e:for(var t=e.length,n=1,o=-1,u;n<t;++n)switch(e[n]){case".":o=u=n;break;case"0":o===0&&(o=n),u=n;break;default:if(!+e[n])break e;o>0&&(o=0);break}return o>0?e.slice(0,o)+e.slice(u+1):e}var prefixExponent;function formatPrefixAuto(e,t){var n=formatDecimalParts(e,t);if(!n)return e+"";var o=n[0],u=n[1],d=u-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(u/3)))*3)+1,f=o.length;return d===f?o:d>f?o+new Array(d-f+1).join("0"):d>0?o.slice(0,d)+"."+o.slice(d):"0."+new Array(1-d).join("0")+formatDecimalParts(e,Math.max(0,t+d-1))[0]}function formatRounded(e,t){var n=formatDecimalParts(e,t);if(!n)return e+"";var o=n[0],u=n[1];return u<0?"0."+new Array(-u).join("0")+o:o.length>u+1?o.slice(0,u+1)+"."+o.slice(u+1):o+new Array(u-o.length+2).join("0")}const formatTypes={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:formatDecimal,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>formatRounded(e*100,t),r:formatRounded,s:formatPrefixAuto,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function identity$2(e){return e}var map$1=Array.prototype.map,prefixes=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$1(e){var t=e.grouping===void 0||e.thousands===void 0?identity$2:formatGroup(map$1.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",o=e.currency===void 0?"":e.currency[1]+"",u=e.decimal===void 0?".":e.decimal+"",d=e.numerals===void 0?identity$2:formatNumerals(map$1.call(e.numerals,String)),f=e.percent===void 0?"%":e.percent+"",g=e.minus===void 0?"":e.minus+"",v=e.nan===void 0?"NaN":e.nan+"";function w(R){R=formatSpecifier(R);var _=R.fill,F=R.align,M=R.sign,I=R.symbol,N=R.zero,B=R.width,H=R.comma,U=R.precision,$=R.trim,z=R.type;z==="n"?(H=!0,z="g"):formatTypes[z]||(U===void 0&&(U=12),$=!0,z="g"),(N||_==="0"&&F==="=")&&(N=!0,_="0",F="=");var j=I==="$"?n:I==="#"&&/[boxX]/.test(z)?"0"+z.toLowerCase():"",J=I==="$"?o:/[%p]/.test(z)?f:"",ie=formatTypes[z],se=/[defgprs%]/.test(z);U=U===void 0?6:/[gprs]/.test(z)?Math.max(1,Math.min(21,U)):Math.max(0,Math.min(20,U));function fe(de){var Ce=j,be=J,xe,Ee,ae;if(z==="c")be=ie(de)+be,de="";else{de=+de;var oe=de<0||1/de<0;if(de=isNaN(de)?v:ie(Math.abs(de),U),$&&(de=formatTrim(de)),oe&&+de==0&&M!=="+"&&(oe=!1),Ce=(oe?M==="("?M:g:M==="-"||M==="("?"":M)+Ce,be=(z==="s"?prefixes[8+prefixExponent/3]:"")+be+(oe&&M==="("?")":""),se){for(xe=-1,Ee=de.length;++xe<Ee;)if(ae=de.charCodeAt(xe),48>ae||ae>57){be=(ae===46?u+de.slice(xe+1):de.slice(xe))+be,de=de.slice(0,xe);break}}}H&&!N&&(de=t(de,1/0));var ee=Ce.length+de.length+be.length,Z=ee<B?new Array(B-ee+1).join(_):"";switch(H&&N&&(de=t(Z+de,Z.length?B-be.length:1/0),Z=""),F){case"<":de=Ce+de+be+Z;break;case"=":de=Ce+Z+de+be;break;case"^":de=Z.slice(0,ee=Z.length>>1)+Ce+de+be+Z.slice(ee);break;default:de=Z+Ce+de+be;break}return d(de)}return fe.toString=function(){return R+""},fe}function S(R,_){var F=w((R=formatSpecifier(R),R.type="f",R)),M=Math.max(-8,Math.min(8,Math.floor(exponent(_)/3)))*3,I=Math.pow(10,-M),N=prefixes[8+M/3];return function(B){return F(I*B)+N}}return{format:w,formatPrefix:S}}var locale$1,format,formatPrefix;defaultLocale$1({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale$1(e){return locale$1=formatLocale$1(e),format=locale$1.format,formatPrefix=locale$1.formatPrefix,locale$1}function precisionFixed(e){return Math.max(0,-exponent(Math.abs(e)))}function precisionPrefix(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(t)/3)))*3-exponent(Math.abs(e)))}function precisionRound(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,exponent(t)-exponent(e))+1}function tickFormat(e,t,n,o){var u=tickStep(e,t,n),d;switch(o=formatSpecifier(o??",f"),o.type){case"s":{var f=Math.max(Math.abs(e),Math.abs(t));return o.precision==null&&!isNaN(d=precisionPrefix(u,f))&&(o.precision=d),formatPrefix(o,f)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(d=precisionRound(u,Math.max(Math.abs(e),Math.abs(t))))&&(o.precision=d-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(d=precisionFixed(u))&&(o.precision=d-(o.type==="%")*2);break}}return format(o)}function linearish(e){var t=e.domain;return e.ticks=function(n){var o=t();return ticks(o[0],o[o.length-1],n??10)},e.tickFormat=function(n,o){var u=t();return tickFormat(u[0],u[u.length-1],n??10,o)},e.nice=function(n){n==null&&(n=10);var o=t(),u=0,d=o.length-1,f=o[u],g=o[d],v,w,S=10;for(g<f&&(w=f,f=g,g=w,w=u,u=d,d=w);S-- >0;){if(w=tickIncrement(f,g,n),w===v)return o[u]=f,o[d]=g,t(o);if(w>0)f=Math.floor(f/w)*w,g=Math.ceil(g/w)*w;else if(w<0)f=Math.ceil(f*w)/w,g=Math.floor(g*w)/w;else break;v=w}return e},e}function linear(){var e=continuous();return e.copy=function(){return copy$1(e,linear())},initRange.apply(e,arguments),linearish(e)}function identity$1(e){var t;function n(o){return o==null||isNaN(o=+o)?t:o}return n.invert=n,n.domain=n.range=function(o){return arguments.length?(e=Array.from(o,number$2),n):e.slice()},n.unknown=function(o){return arguments.length?(t=o,n):t},n.copy=function(){return identity$1(e).unknown(t)},e=arguments.length?Array.from(e,number$2):[0,1],linearish(n)}function nice(e,t){e=e.slice();var n=0,o=e.length-1,u=e[n],d=e[o],f;return d<u&&(f=n,n=o,o=f,f=u,u=d,d=f),e[n]=t.floor(u),e[o]=t.ceil(d),e}function transformLog(e){return Math.log(e)}function transformExp(e){return Math.exp(e)}function transformLogn(e){return-Math.log(-e)}function transformExpn(e){return-Math.exp(-e)}function pow10(e){return isFinite(e)?+("1e"+e):e<0?0:e}function powp(e){return e===10?pow10:e===Math.E?Math.exp:t=>Math.pow(e,t)}function logp(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function reflect(e){return(t,n)=>-e(-t,n)}function loggish(e){const t=e(transformLog,transformExp),n=t.domain;let o=10,u,d;function f(){return u=logp(o),d=powp(o),n()[0]<0?(u=reflect(u),d=reflect(d),e(transformLogn,transformExpn)):e(transformLog,transformExp),t}return t.base=function(g){return arguments.length?(o=+g,f()):o},t.domain=function(g){return arguments.length?(n(g),f()):n()},t.ticks=g=>{const v=n();let w=v[0],S=v[v.length-1];const R=S<w;R&&([w,S]=[S,w]);let _=u(w),F=u(S),M,I;const N=g==null?10:+g;let B=[];if(!(o%1)&&F-_<N){if(_=Math.floor(_),F=Math.ceil(F),w>0){for(;_<=F;++_)for(M=1;M<o;++M)if(I=_<0?M/d(-_):M*d(_),!(I<w)){if(I>S)break;B.push(I)}}else for(;_<=F;++_)for(M=o-1;M>=1;--M)if(I=_>0?M/d(-_):M*d(_),!(I<w)){if(I>S)break;B.push(I)}B.length*2<N&&(B=ticks(w,S,N))}else B=ticks(_,F,Math.min(F-_,N)).map(d);return R?B.reverse():B},t.tickFormat=(g,v)=>{if(g==null&&(g=10),v==null&&(v=o===10?"s":","),typeof v!="function"&&(!(o%1)&&(v=formatSpecifier(v)).precision==null&&(v.trim=!0),v=format(v)),g===1/0)return v;const w=Math.max(1,o*g/t.ticks().length);return S=>{let R=S/d(Math.round(u(S)));return R*o<o-.5&&(R*=o),R<=w?v(S):""}},t.nice=()=>n(nice(n(),{floor:g=>d(Math.floor(u(g))),ceil:g=>d(Math.ceil(u(g)))})),t}function log(){const e=loggish(transformer$2()).domain([1,10]);return e.copy=()=>copy$1(e,log()).base(e.base()),initRange.apply(e,arguments),e}function transformSymlog(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function transformSymexp(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function symlogish(e){var t=1,n=e(transformSymlog(t),transformSymexp(t));return n.constant=function(o){return arguments.length?e(transformSymlog(t=+o),transformSymexp(t)):t},linearish(n)}function symlog(){var e=symlogish(transformer$2());return e.copy=function(){return copy$1(e,symlog()).constant(e.constant())},initRange.apply(e,arguments)}function transformPow(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function transformSqrt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function transformSquare(e){return e<0?-e*e:e*e}function powish(e){var t=e(identity$3,identity$3),n=1;function o(){return n===1?e(identity$3,identity$3):n===.5?e(transformSqrt,transformSquare):e(transformPow(n),transformPow(1/n))}return t.exponent=function(u){return arguments.length?(n=+u,o()):n},linearish(t)}function pow(){var e=powish(transformer$2());return e.copy=function(){return copy$1(e,pow()).exponent(e.exponent())},initRange.apply(e,arguments),e}function sqrt(){return pow.apply(null,arguments).exponent(.5)}function square(e){return Math.sign(e)*e*e}function unsquare(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function radial(){var e=continuous(),t=[0,1],n=!1,o;function u(d){var f=unsquare(e(d));return isNaN(f)?o:n?Math.round(f):f}return u.invert=function(d){return e.invert(square(d))},u.domain=function(d){return arguments.length?(e.domain(d),u):e.domain()},u.range=function(d){return arguments.length?(e.range((t=Array.from(d,number$2)).map(square)),u):t.slice()},u.rangeRound=function(d){return u.range(d).round(!0)},u.round=function(d){return arguments.length?(n=!!d,u):n},u.clamp=function(d){return arguments.length?(e.clamp(d),u):e.clamp()},u.unknown=function(d){return arguments.length?(o=d,u):o},u.copy=function(){return radial(e.domain(),t).round(n).clamp(e.clamp()).unknown(o)},initRange.apply(u,arguments),linearish(u)}function quantile(){var e=[],t=[],n=[],o;function u(){var f=0,g=Math.max(1,t.length);for(n=new Array(g-1);++f<g;)n[f-1]=quantileSorted(e,f/g);return d}function d(f){return f==null||isNaN(f=+f)?o:t[bisectRight(n,f)]}return d.invertExtent=function(f){var g=t.indexOf(f);return g<0?[NaN,NaN]:[g>0?n[g-1]:e[0],g<n.length?n[g]:e[e.length-1]]},d.domain=function(f){if(!arguments.length)return e.slice();e=[];for(let g of f)g!=null&&!isNaN(g=+g)&&e.push(g);return e.sort(ascending),u()},d.range=function(f){return arguments.length?(t=Array.from(f),u()):t.slice()},d.unknown=function(f){return arguments.length?(o=f,d):o},d.quantiles=function(){return n.slice()},d.copy=function(){return quantile().domain(e).range(t).unknown(o)},initRange.apply(d,arguments)}function quantize(){var e=0,t=1,n=1,o=[.5],u=[0,1],d;function f(v){return v!=null&&v<=v?u[bisectRight(o,v,0,n)]:d}function g(){var v=-1;for(o=new Array(n);++v<n;)o[v]=((v+1)*t-(v-n)*e)/(n+1);return f}return f.domain=function(v){return arguments.length?([e,t]=v,e=+e,t=+t,g()):[e,t]},f.range=function(v){return arguments.length?(n=(u=Array.from(v)).length-1,g()):u.slice()},f.invertExtent=function(v){var w=u.indexOf(v);return w<0?[NaN,NaN]:w<1?[e,o[0]]:w>=n?[o[n-1],t]:[o[w-1],o[w]]},f.unknown=function(v){return arguments.length&&(d=v),f},f.thresholds=function(){return o.slice()},f.copy=function(){return quantize().domain([e,t]).range(u).unknown(d)},initRange.apply(linearish(f),arguments)}function threshold(){var e=[.5],t=[0,1],n,o=1;function u(d){return d!=null&&d<=d?t[bisectRight(e,d,0,o)]:n}return u.domain=function(d){return arguments.length?(e=Array.from(d),o=Math.min(e.length,t.length-1),u):e.slice()},u.range=function(d){return arguments.length?(t=Array.from(d),o=Math.min(e.length,t.length-1),u):t.slice()},u.invertExtent=function(d){var f=t.indexOf(d);return[e[f-1],e[f]]},u.unknown=function(d){return arguments.length?(n=d,u):n},u.copy=function(){return threshold().domain(e).range(t).unknown(n)},initRange.apply(u,arguments)}const t0=new Date,t1=new Date;function timeInterval(e,t,n,o){function u(d){return e(d=arguments.length===0?new Date:new Date(+d)),d}return u.floor=d=>(e(d=new Date(+d)),d),u.ceil=d=>(e(d=new Date(d-1)),t(d,1),e(d),d),u.round=d=>{const f=u(d),g=u.ceil(d);return d-f<g-d?f:g},u.offset=(d,f)=>(t(d=new Date(+d),f==null?1:Math.floor(f)),d),u.range=(d,f,g)=>{const v=[];if(d=u.ceil(d),g=g==null?1:Math.floor(g),!(d<f)||!(g>0))return v;let w;do v.push(w=new Date(+d)),t(d,g),e(d);while(w<d&&d<f);return v},u.filter=d=>timeInterval(f=>{if(f>=f)for(;e(f),!d(f);)f.setTime(f-1)},(f,g)=>{if(f>=f)if(g<0)for(;++g<=0;)for(;t(f,-1),!d(f););else for(;--g>=0;)for(;t(f,1),!d(f););}),n&&(u.count=(d,f)=>(t0.setTime(+d),t1.setTime(+f),e(t0),e(t1),Math.floor(n(t0,t1))),u.every=d=>(d=Math.floor(d),!isFinite(d)||!(d>0)?null:d>1?u.filter(o?f=>o(f)%d===0:f=>u.count(0,f)%d===0):u)),u}const millisecond=timeInterval(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);millisecond.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?timeInterval(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):millisecond);millisecond.range;const durationSecond=1e3,durationMinute=durationSecond*60,durationHour=durationMinute*60,durationDay=durationHour*24,durationWeek=durationDay*7,durationMonth=durationDay*30,durationYear=durationDay*365,second=timeInterval(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*durationSecond)},(e,t)=>(t-e)/durationSecond,e=>e.getUTCSeconds());second.range;const timeMinute=timeInterval(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*durationSecond)},(e,t)=>{e.setTime(+e+t*durationMinute)},(e,t)=>(t-e)/durationMinute,e=>e.getMinutes());timeMinute.range;const utcMinute=timeInterval(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*durationMinute)},(e,t)=>(t-e)/durationMinute,e=>e.getUTCMinutes());utcMinute.range;const timeHour=timeInterval(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*durationSecond-e.getMinutes()*durationMinute)},(e,t)=>{e.setTime(+e+t*durationHour)},(e,t)=>(t-e)/durationHour,e=>e.getHours());timeHour.range;const utcHour=timeInterval(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*durationHour)},(e,t)=>(t-e)/durationHour,e=>e.getUTCHours());utcHour.range;const timeDay=timeInterval(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*durationMinute)/durationDay,e=>e.getDate()-1);timeDay.range;const utcDay=timeInterval(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/durationDay,e=>e.getUTCDate()-1);utcDay.range;const unixDay=timeInterval(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/durationDay,e=>Math.floor(e/durationDay));unixDay.range;function timeWeekday(e){return timeInterval(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*durationMinute)/durationWeek)}const timeSunday=timeWeekday(0),timeMonday=timeWeekday(1),timeTuesday=timeWeekday(2),timeWednesday=timeWeekday(3),timeThursday=timeWeekday(4),timeFriday=timeWeekday(5),timeSaturday=timeWeekday(6);timeSunday.range;timeMonday.range;timeTuesday.range;timeWednesday.range;timeThursday.range;timeFriday.range;timeSaturday.range;function utcWeekday(e){return timeInterval(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/durationWeek)}const utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6);utcSunday.range;utcMonday.range;utcTuesday.range;utcWednesday.range;utcThursday.range;utcFriday.range;utcSaturday.range;const timeMonth=timeInterval(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());timeMonth.range;const utcMonth=timeInterval(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());utcMonth.range;const timeYear=timeInterval(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());timeYear.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:timeInterval(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});timeYear.range;const utcYear=timeInterval(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());utcYear.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:timeInterval(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});utcYear.range;function ticker(e,t,n,o,u,d){const f=[[second,1,durationSecond],[second,5,5*durationSecond],[second,15,15*durationSecond],[second,30,30*durationSecond],[d,1,durationMinute],[d,5,5*durationMinute],[d,15,15*durationMinute],[d,30,30*durationMinute],[u,1,durationHour],[u,3,3*durationHour],[u,6,6*durationHour],[u,12,12*durationHour],[o,1,durationDay],[o,2,2*durationDay],[n,1,durationWeek],[t,1,durationMonth],[t,3,3*durationMonth],[e,1,durationYear]];function g(w,S,R){const _=S<w;_&&([w,S]=[S,w]);const F=R&&typeof R.range=="function"?R:v(w,S,R),M=F?F.range(w,+S+1):[];return _?M.reverse():M}function v(w,S,R){const _=Math.abs(S-w)/R,F=bisector(([,,N])=>N).right(f,_);if(F===f.length)return e.every(tickStep(w/durationYear,S/durationYear,R));if(F===0)return millisecond.every(Math.max(tickStep(w,S,R),1));const[M,I]=f[_/f[F-1][2]<f[F][2]/_?F-1:F];return M.every(I)}return[g,v]}const[utcTicks,utcTickInterval]=ticker(utcYear,utcMonth,utcSunday,unixDay,utcHour,utcMinute),[timeTicks,timeTickInterval]=ticker(timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute);function localDate(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function utcDate(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function newDate(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function formatLocale(e){var t=e.dateTime,n=e.date,o=e.time,u=e.periods,d=e.days,f=e.shortDays,g=e.months,v=e.shortMonths,w=formatRe(u),S=formatLookup(u),R=formatRe(d),_=formatLookup(d),F=formatRe(f),M=formatLookup(f),I=formatRe(g),N=formatLookup(g),B=formatRe(v),H=formatLookup(v),U={a:oe,A:ee,b:Z,B:Q,c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:K,q:ne,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},$={a:ue,A:ye,b:pe,B:X,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:le,q:he,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},z={a:fe,A:de,b:Ce,B:be,c:xe,d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:se,q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:Ee,X:ae,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};U.x=j(n,U),U.X=j(o,U),U.c=j(t,U),$.x=j(n,$),$.X=j(o,$),$.c=j(t,$);function j(ce,me){return function(we){var Se=[],_e=-1,We=0,Fe=ce.length,Le,De,Be;for(we instanceof Date||(we=new Date(+we));++_e<Fe;)ce.charCodeAt(_e)===37&&(Se.push(ce.slice(We,_e)),(De=pads[Le=ce.charAt(++_e)])!=null?Le=ce.charAt(++_e):De=Le==="e"?" ":"0",(Be=me[Le])&&(Le=Be(we,De)),Se.push(Le),We=_e+1);return Se.push(ce.slice(We,_e)),Se.join("")}}function J(ce,me){return function(we){var Se=newDate(1900,void 0,1),_e=ie(Se,ce,we+="",0),We,Fe;if(_e!=we.length)return null;if("Q"in Se)return new Date(Se.Q);if("s"in Se)return new Date(Se.s*1e3+("L"in Se?Se.L:0));if(me&&!("Z"in Se)&&(Se.Z=0),"p"in Se&&(Se.H=Se.H%12+Se.p*12),Se.m===void 0&&(Se.m="q"in Se?Se.q:0),"V"in Se){if(Se.V<1||Se.V>53)return null;"w"in Se||(Se.w=1),"Z"in Se?(We=utcDate(newDate(Se.y,0,1)),Fe=We.getUTCDay(),We=Fe>4||Fe===0?utcMonday.ceil(We):utcMonday(We),We=utcDay.offset(We,(Se.V-1)*7),Se.y=We.getUTCFullYear(),Se.m=We.getUTCMonth(),Se.d=We.getUTCDate()+(Se.w+6)%7):(We=localDate(newDate(Se.y,0,1)),Fe=We.getDay(),We=Fe>4||Fe===0?timeMonday.ceil(We):timeMonday(We),We=timeDay.offset(We,(Se.V-1)*7),Se.y=We.getFullYear(),Se.m=We.getMonth(),Se.d=We.getDate()+(Se.w+6)%7)}else("W"in Se||"U"in Se)&&("w"in Se||(Se.w="u"in Se?Se.u%7:"W"in Se?1:0),Fe="Z"in Se?utcDate(newDate(Se.y,0,1)).getUTCDay():localDate(newDate(Se.y,0,1)).getDay(),Se.m=0,Se.d="W"in Se?(Se.w+6)%7+Se.W*7-(Fe+5)%7:Se.w+Se.U*7-(Fe+6)%7);return"Z"in Se?(Se.H+=Se.Z/100|0,Se.M+=Se.Z%100,utcDate(Se)):localDate(Se)}}function ie(ce,me,we,Se){for(var _e=0,We=me.length,Fe=we.length,Le,De;_e<We;){if(Se>=Fe)return-1;if(Le=me.charCodeAt(_e++),Le===37){if(Le=me.charAt(_e++),De=z[Le in pads?me.charAt(_e++):Le],!De||(Se=De(ce,we,Se))<0)return-1}else if(Le!=we.charCodeAt(Se++))return-1}return Se}function se(ce,me,we){var Se=w.exec(me.slice(we));return Se?(ce.p=S.get(Se[0].toLowerCase()),we+Se[0].length):-1}function fe(ce,me,we){var Se=F.exec(me.slice(we));return Se?(ce.w=M.get(Se[0].toLowerCase()),we+Se[0].length):-1}function de(ce,me,we){var Se=R.exec(me.slice(we));return Se?(ce.w=_.get(Se[0].toLowerCase()),we+Se[0].length):-1}function Ce(ce,me,we){var Se=B.exec(me.slice(we));return Se?(ce.m=H.get(Se[0].toLowerCase()),we+Se[0].length):-1}function be(ce,me,we){var Se=I.exec(me.slice(we));return Se?(ce.m=N.get(Se[0].toLowerCase()),we+Se[0].length):-1}function xe(ce,me,we){return ie(ce,t,me,we)}function Ee(ce,me,we){return ie(ce,n,me,we)}function ae(ce,me,we){return ie(ce,o,me,we)}function oe(ce){return f[ce.getDay()]}function ee(ce){return d[ce.getDay()]}function Z(ce){return v[ce.getMonth()]}function Q(ce){return g[ce.getMonth()]}function K(ce){return u[+(ce.getHours()>=12)]}function ne(ce){return 1+~~(ce.getMonth()/3)}function ue(ce){return f[ce.getUTCDay()]}function ye(ce){return d[ce.getUTCDay()]}function pe(ce){return v[ce.getUTCMonth()]}function X(ce){return g[ce.getUTCMonth()]}function le(ce){return u[+(ce.getUTCHours()>=12)]}function he(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var me=j(ce+="",U);return me.toString=function(){return ce},me},parse:function(ce){var me=J(ce+="",!1);return me.toString=function(){return ce},me},utcFormat:function(ce){var me=j(ce+="",$);return me.toString=function(){return ce},me},utcParse:function(ce){var me=J(ce+="",!0);return me.toString=function(){return ce},me}}}var pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(e,t,n){var o=e<0?"-":"",u=(o?-e:e)+"",d=u.length;return o+(d<n?new Array(n-d+1).join(t)+u:u)}function requote(e){return e.replace(requoteRe,"\\$&")}function formatRe(e){return new RegExp("^(?:"+e.map(requote).join("|")+")","i")}function formatLookup(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function parseWeekdayNumberSunday(e,t,n){var o=numberRe.exec(t.slice(n,n+1));return o?(e.w=+o[0],n+o[0].length):-1}function parseWeekdayNumberMonday(e,t,n){var o=numberRe.exec(t.slice(n,n+1));return o?(e.u=+o[0],n+o[0].length):-1}function parseWeekNumberSunday(e,t,n){var o=numberRe.exec(t.slice(n,n+2));return o?(e.U=+o[0],n+o[0].length):-1}function parseWeekNumberISO(e,t,n){var o=numberRe.exec(t.slice(n,n+2));return o?(e.V=+o[0],n+o[0].length):-1}function parseWeekNumberMonday(e,t,n){var o=numberRe.exec(t.slice(n,n+2));return o?(e.W=+o[0],n+o[0].length):-1}function parseFullYear(e,t,n){var o=numberRe.exec(t.slice(n,n+4));return o?(e.y=+o[0],n+o[0].length):-1}function parseYear(e,t,n){var o=numberRe.exec(t.slice(n,n+2));return o?(e.y=+o[0]+(+o[0]>68?1900:2e3),n+o[0].length):-1}function parseZone(e,t,n){var o=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return o?(e.Z=o[1]?0:-(o[2]+(o[3]||"00")),n+o[0].length):-1}function parseQuarter(e,t,n){var o=numberRe.exec(t.slice(n,n+1));return o?(e.q=o[0]*3-3,n+o[0].length):-1}function parseMonthNumber(e,t,n){var o=numberRe.exec(t.slice(n,n+2));return o?(e.m=o[0]-1,n+o[0].length):-1}function parseDayOfMonth(e,t,n){var o=numberRe.exec(t.slice(n,n+2));return o?(e.d=+o[0],n+o[0].length):-1}function parseDayOfYear(e,t,n){var o=numberRe.exec(t.slice(n,n+3));return o?(e.m=0,e.d=+o[0],n+o[0].length):-1}function parseHour24(e,t,n){var o=numberRe.exec(t.slice(n,n+2));return o?(e.H=+o[0],n+o[0].length):-1}function parseMinutes(e,t,n){var o=numberRe.exec(t.slice(n,n+2));return o?(e.M=+o[0],n+o[0].length):-1}function parseSeconds(e,t,n){var o=numberRe.exec(t.slice(n,n+2));return o?(e.S=+o[0],n+o[0].length):-1}function parseMilliseconds(e,t,n){var o=numberRe.exec(t.slice(n,n+3));return o?(e.L=+o[0],n+o[0].length):-1}function parseMicroseconds(e,t,n){var o=numberRe.exec(t.slice(n,n+6));return o?(e.L=Math.floor(o[0]/1e3),n+o[0].length):-1}function parseLiteralPercent(e,t,n){var o=percentRe.exec(t.slice(n,n+1));return o?n+o[0].length:-1}function parseUnixTimestamp(e,t,n){var o=numberRe.exec(t.slice(n));return o?(e.Q=+o[0],n+o[0].length):-1}function parseUnixTimestampSeconds(e,t,n){var o=numberRe.exec(t.slice(n));return o?(e.s=+o[0],n+o[0].length):-1}function formatDayOfMonth(e,t){return pad(e.getDate(),t,2)}function formatHour24(e,t){return pad(e.getHours(),t,2)}function formatHour12(e,t){return pad(e.getHours()%12||12,t,2)}function formatDayOfYear(e,t){return pad(1+timeDay.count(timeYear(e),e),t,3)}function formatMilliseconds(e,t){return pad(e.getMilliseconds(),t,3)}function formatMicroseconds(e,t){return formatMilliseconds(e,t)+"000"}function formatMonthNumber(e,t){return pad(e.getMonth()+1,t,2)}function formatMinutes(e,t){return pad(e.getMinutes(),t,2)}function formatSeconds(e,t){return pad(e.getSeconds(),t,2)}function formatWeekdayNumberMonday(e){var t=e.getDay();return t===0?7:t}function formatWeekNumberSunday(e,t){return pad(timeSunday.count(timeYear(e)-1,e),t,2)}function dISO(e){var t=e.getDay();return t>=4||t===0?timeThursday(e):timeThursday.ceil(e)}function formatWeekNumberISO(e,t){return e=dISO(e),pad(timeThursday.count(timeYear(e),e)+(timeYear(e).getDay()===4),t,2)}function formatWeekdayNumberSunday(e){return e.getDay()}function formatWeekNumberMonday(e,t){return pad(timeMonday.count(timeYear(e)-1,e),t,2)}function formatYear(e,t){return pad(e.getFullYear()%100,t,2)}function formatYearISO(e,t){return e=dISO(e),pad(e.getFullYear()%100,t,2)}function formatFullYear(e,t){return pad(e.getFullYear()%1e4,t,4)}function formatFullYearISO(e,t){var n=e.getDay();return e=n>=4||n===0?timeThursday(e):timeThursday.ceil(e),pad(e.getFullYear()%1e4,t,4)}function formatZone(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+pad(t/60|0,"0",2)+pad(t%60,"0",2)}function formatUTCDayOfMonth(e,t){return pad(e.getUTCDate(),t,2)}function formatUTCHour24(e,t){return pad(e.getUTCHours(),t,2)}function formatUTCHour12(e,t){return pad(e.getUTCHours()%12||12,t,2)}function formatUTCDayOfYear(e,t){return pad(1+utcDay.count(utcYear(e),e),t,3)}function formatUTCMilliseconds(e,t){return pad(e.getUTCMilliseconds(),t,3)}function formatUTCMicroseconds(e,t){return formatUTCMilliseconds(e,t)+"000"}function formatUTCMonthNumber(e,t){return pad(e.getUTCMonth()+1,t,2)}function formatUTCMinutes(e,t){return pad(e.getUTCMinutes(),t,2)}function formatUTCSeconds(e,t){return pad(e.getUTCSeconds(),t,2)}function formatUTCWeekdayNumberMonday(e){var t=e.getUTCDay();return t===0?7:t}function formatUTCWeekNumberSunday(e,t){return pad(utcSunday.count(utcYear(e)-1,e),t,2)}function UTCdISO(e){var t=e.getUTCDay();return t>=4||t===0?utcThursday(e):utcThursday.ceil(e)}function formatUTCWeekNumberISO(e,t){return e=UTCdISO(e),pad(utcThursday.count(utcYear(e),e)+(utcYear(e).getUTCDay()===4),t,2)}function formatUTCWeekdayNumberSunday(e){return e.getUTCDay()}function formatUTCWeekNumberMonday(e,t){return pad(utcMonday.count(utcYear(e)-1,e),t,2)}function formatUTCYear(e,t){return pad(e.getUTCFullYear()%100,t,2)}function formatUTCYearISO(e,t){return e=UTCdISO(e),pad(e.getUTCFullYear()%100,t,2)}function formatUTCFullYear(e,t){return pad(e.getUTCFullYear()%1e4,t,4)}function formatUTCFullYearISO(e,t){var n=e.getUTCDay();return e=n>=4||n===0?utcThursday(e):utcThursday.ceil(e),pad(e.getUTCFullYear()%1e4,t,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(e){return+e}function formatUnixTimestampSeconds(e){return Math.floor(+e/1e3)}var locale,timeFormat,utcFormat;defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function defaultLocale(e){return locale=formatLocale(e),timeFormat=locale.format,locale.parse,utcFormat=locale.utcFormat,locale.utcParse,locale}function date(e){return new Date(e)}function number$1(e){return e instanceof Date?+e:+new Date(+e)}function calendar(e,t,n,o,u,d,f,g,v,w){var S=continuous(),R=S.invert,_=S.domain,F=w(".%L"),M=w(":%S"),I=w("%I:%M"),N=w("%I %p"),B=w("%a %d"),H=w("%b %d"),U=w("%B"),$=w("%Y");function z(j){return(v(j)<j?F:g(j)<j?M:f(j)<j?I:d(j)<j?N:o(j)<j?u(j)<j?B:H:n(j)<j?U:$)(j)}return S.invert=function(j){return new Date(R(j))},S.domain=function(j){return arguments.length?_(Array.from(j,number$1)):_().map(date)},S.ticks=function(j){var J=_();return e(J[0],J[J.length-1],j??10)},S.tickFormat=function(j,J){return J==null?z:w(J)},S.nice=function(j){var J=_();return(!j||typeof j.range!="function")&&(j=t(J[0],J[J.length-1],j??10)),j?_(nice(J,j)):S},S.copy=function(){return copy$1(S,calendar(e,t,n,o,u,d,f,g,v,w))},S}function time$1(){return initRange.apply(calendar(timeTicks,timeTickInterval,timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute,second,timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function utcTime(){return initRange.apply(calendar(utcTicks,utcTickInterval,utcYear,utcMonth,utcSunday,utcDay,utcHour,utcMinute,second,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function transformer$1(){var e=0,t=1,n,o,u,d,f=identity$3,g=!1,v;function w(R){return R==null||isNaN(R=+R)?v:f(u===0?.5:(R=(d(R)-n)*u,g?Math.max(0,Math.min(1,R)):R))}w.domain=function(R){return arguments.length?([e,t]=R,n=d(e=+e),o=d(t=+t),u=n===o?0:1/(o-n),w):[e,t]},w.clamp=function(R){return arguments.length?(g=!!R,w):g},w.interpolator=function(R){return arguments.length?(f=R,w):f};function S(R){return function(_){var F,M;return arguments.length?([F,M]=_,f=R(F,M),w):[f(0),f(1)]}}return w.range=S(interpolate$1),w.rangeRound=S(interpolateRound),w.unknown=function(R){return arguments.length?(v=R,w):v},function(R){return d=R,n=R(e),o=R(t),u=n===o?0:1/(o-n),w}}function copy(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function sequential(){var e=linearish(transformer$1()(identity$3));return e.copy=function(){return copy(e,sequential())},initInterpolator.apply(e,arguments)}function sequentialLog(){var e=loggish(transformer$1()).domain([1,10]);return e.copy=function(){return copy(e,sequentialLog()).base(e.base())},initInterpolator.apply(e,arguments)}function sequentialSymlog(){var e=symlogish(transformer$1());return e.copy=function(){return copy(e,sequentialSymlog()).constant(e.constant())},initInterpolator.apply(e,arguments)}function sequentialPow(){var e=powish(transformer$1());return e.copy=function(){return copy(e,sequentialPow()).exponent(e.exponent())},initInterpolator.apply(e,arguments)}function sequentialSqrt(){return sequentialPow.apply(null,arguments).exponent(.5)}function sequentialQuantile(){var e=[],t=identity$3;function n(o){if(o!=null&&!isNaN(o=+o))return t((bisectRight(e,o,1)-1)/(e.length-1))}return n.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let u of o)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(ascending),n},n.interpolator=function(o){return arguments.length?(t=o,n):t},n.range=function(){return e.map((o,u)=>t(u/(e.length-1)))},n.quantiles=function(o){return Array.from({length:o+1},(u,d)=>quantile$1(e,d/o))},n.copy=function(){return sequentialQuantile(t).domain(e)},initInterpolator.apply(n,arguments)}function transformer(){var e=0,t=.5,n=1,o=1,u,d,f,g,v,w=identity$3,S,R=!1,_;function F(I){return isNaN(I=+I)?_:(I=.5+((I=+S(I))-d)*(o*I<o*d?g:v),w(R?Math.max(0,Math.min(1,I)):I))}F.domain=function(I){return arguments.length?([e,t,n]=I,u=S(e=+e),d=S(t=+t),f=S(n=+n),g=u===d?0:.5/(d-u),v=d===f?0:.5/(f-d),o=d<u?-1:1,F):[e,t,n]},F.clamp=function(I){return arguments.length?(R=!!I,F):R},F.interpolator=function(I){return arguments.length?(w=I,F):w};function M(I){return function(N){var B,H,U;return arguments.length?([B,H,U]=N,w=piecewise(I,[B,H,U]),F):[w(0),w(.5),w(1)]}}return F.range=M(interpolate$1),F.rangeRound=M(interpolateRound),F.unknown=function(I){return arguments.length?(_=I,F):_},function(I){return S=I,u=I(e),d=I(t),f=I(n),g=u===d?0:.5/(d-u),v=d===f?0:.5/(f-d),o=d<u?-1:1,F}}function diverging(){var e=linearish(transformer()(identity$3));return e.copy=function(){return copy(e,diverging())},initInterpolator.apply(e,arguments)}function divergingLog(){var e=loggish(transformer()).domain([.1,1,10]);return e.copy=function(){return copy(e,divergingLog()).base(e.base())},initInterpolator.apply(e,arguments)}function divergingSymlog(){var e=symlogish(transformer());return e.copy=function(){return copy(e,divergingSymlog()).constant(e.constant())},initInterpolator.apply(e,arguments)}function divergingPow(){var e=powish(transformer());return e.copy=function(){return copy(e,divergingPow()).exponent(e.exponent())},initInterpolator.apply(e,arguments)}function divergingSqrt(){return divergingPow.apply(null,arguments).exponent(.5)}const d3Scales=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:band,scaleDiverging:diverging,scaleDivergingLog:divergingLog,scaleDivergingPow:divergingPow,scaleDivergingSqrt:divergingSqrt,scaleDivergingSymlog:divergingSymlog,scaleIdentity:identity$1,scaleImplicit:implicit,scaleLinear:linear,scaleLog:log,scaleOrdinal:ordinal,scalePoint:point,scalePow:pow,scaleQuantile:quantile,scaleQuantize:quantize,scaleRadial:radial,scaleSequential:sequential,scaleSequentialLog:sequentialLog,scaleSequentialPow:sequentialPow,scaleSequentialQuantile:sequentialQuantile,scaleSequentialSqrt:sequentialSqrt,scaleSequentialSymlog:sequentialSymlog,scaleSqrt:sqrt,scaleSymlog:symlog,scaleThreshold:threshold,scaleTime:time$1,scaleUtc:utcTime,tickFormat},Symbol.toStringTag,{value:"Module"}));var selectChartDataWithIndexes=e=>e.chartData,selectChartDataAndAlwaysIgnoreIndexes=createSelector([selectChartDataWithIndexes],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),selectChartDataWithIndexesIfNotInPanorama=(e,t,n,o)=>o?selectChartDataAndAlwaysIgnoreIndexes(e):selectChartDataWithIndexes(e);function isWellFormedNumberDomain(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(isWellBehavedNumber(t)&&isWellBehavedNumber(n))return!0}return!1}function extendDomain(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function numericalDomainSpecifiedWithoutRequiringData(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,o]=e,u,d;if(isWellBehavedNumber(n))u=n;else if(typeof n=="function")return;if(isWellBehavedNumber(o))d=o;else if(typeof o=="function")return;var f=[u,d];if(isWellFormedNumberDomain(f))return f}}function parseNumericalUserDomain(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var o=e(t,n);if(isWellFormedNumberDomain(o))return extendDomain(o,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[u,d]=e,f,g;if(u==="auto")t!=null&&(f=Math.min(...t));else if(isNumber$1(u))f=u;else if(typeof u=="function")try{t!=null&&(f=u(t?.[0]))}catch{}else if(typeof u=="string"&&MIN_VALUE_REG.test(u)){var v=MIN_VALUE_REG.exec(u);if(v==null||t==null)f=void 0;else{var w=+v[1];f=t[0]-w}}else f=t?.[0];if(d==="auto")t!=null&&(g=Math.max(...t));else if(isNumber$1(d))g=d;else if(typeof d=="function")try{t!=null&&(g=d(t?.[1]))}catch{}else if(typeof d=="string"&&MAX_VALUE_REG.test(d)){var S=MAX_VALUE_REG.exec(d);if(S==null||t==null)g=void 0;else{var R=+S[1];g=t[1]+R}}else g=t?.[1];var _=[f,g];if(isWellFormedNumberDomain(_))return t==null?_:extendDomain(_,t,n)}}}var MAX_DIGITS=1e9,defaults$1={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Decimal,external=!0,decimalError="[DecimalError] ",invalidArgument=decimalError+"Invalid argument: ",exponentOutOfRange=decimalError+"Exponent out of range: ",mathfloor=Math.floor,mathpow=Math.pow,isDecimal=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ONE,BASE=1e7,LOG_BASE=7,MAX_SAFE_INTEGER=9007199254740991,MAX_E=mathfloor(MAX_SAFE_INTEGER/LOG_BASE),P={};P.absoluteValue=P.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};P.comparedTo=P.cmp=function(e){var t,n,o,u,d=this;if(e=new d.constructor(e),d.s!==e.s)return d.s||-e.s;if(d.e!==e.e)return d.e>e.e^d.s<0?1:-1;for(o=d.d.length,u=e.d.length,t=0,n=o<u?o:u;t<n;++t)if(d.d[t]!==e.d[t])return d.d[t]>e.d[t]^d.s<0?1:-1;return o===u?0:o>u^d.s<0?1:-1};P.decimalPlaces=P.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*LOG_BASE;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};P.dividedBy=P.div=function(e){return divide(this,new this.constructor(e))};P.dividedToIntegerBy=P.idiv=function(e){var t=this,n=t.constructor;return round(divide(t,new n(e),0,1),n.precision)};P.equals=P.eq=function(e){return!this.cmp(e)};P.exponent=function(){return getBase10Exponent(this)};P.greaterThan=P.gt=function(e){return this.cmp(e)>0};P.greaterThanOrEqualTo=P.gte=function(e){return this.cmp(e)>=0};P.isInteger=P.isint=function(){return this.e>this.d.length-2};P.isNegative=P.isneg=function(){return this.s<0};P.isPositive=P.ispos=function(){return this.s>0};P.isZero=function(){return this.s===0};P.lessThan=P.lt=function(e){return this.cmp(e)<0};P.lessThanOrEqualTo=P.lte=function(e){return this.cmp(e)<1};P.logarithm=P.log=function(e){var t,n=this,o=n.constructor,u=o.precision,d=u+5;if(e===void 0)e=new o(10);else if(e=new o(e),e.s<1||e.eq(ONE))throw Error(decimalError+"NaN");if(n.s<1)throw Error(decimalError+(n.s?"NaN":"-Infinity"));return n.eq(ONE)?new o(0):(external=!1,t=divide(ln(n,d),ln(e,d),d),external=!0,round(t,u))};P.minus=P.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?subtract(t,e):add(t,(e.s=-e.s,e))};P.modulo=P.mod=function(e){var t,n=this,o=n.constructor,u=o.precision;if(e=new o(e),!e.s)throw Error(decimalError+"NaN");return n.s?(external=!1,t=divide(n,e,0,1).times(e),external=!0,n.minus(t)):round(new o(n),u)};P.naturalExponential=P.exp=function(){return exp(this)};P.naturalLogarithm=P.ln=function(){return ln(this)};P.negated=P.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};P.plus=P.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?add(t,e):subtract(t,(e.s=-e.s,e))};P.precision=P.sd=function(e){var t,n,o,u=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(invalidArgument+e);if(t=getBase10Exponent(u)+1,o=u.d.length-1,n=o*LOG_BASE+1,o=u.d[o],o){for(;o%10==0;o/=10)n--;for(o=u.d[0];o>=10;o/=10)n++}return e&&t>n?t:n};P.squareRoot=P.sqrt=function(){var e,t,n,o,u,d,f,g=this,v=g.constructor;if(g.s<1){if(!g.s)return new v(0);throw Error(decimalError+"NaN")}for(e=getBase10Exponent(g),external=!1,u=Math.sqrt(+g),u==0||u==1/0?(t=digitsToString(g.d),(t.length+e)%2==0&&(t+="0"),u=Math.sqrt(t),e=mathfloor((e+1)/2)-(e<0||e%2),u==1/0?t="5e"+e:(t=u.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),o=new v(t)):o=new v(u.toString()),n=v.precision,u=f=n+3;;)if(d=o,o=d.plus(divide(g,d,f+2)).times(.5),digitsToString(d.d).slice(0,f)===(t=digitsToString(o.d)).slice(0,f)){if(t=t.slice(f-3,f+1),u==f&&t=="4999"){if(round(d,n+1,0),d.times(d).eq(g)){o=d;break}}else if(t!="9999")break;f+=4}return external=!0,round(o,n)};P.times=P.mul=function(e){var t,n,o,u,d,f,g,v,w,S=this,R=S.constructor,_=S.d,F=(e=new R(e)).d;if(!S.s||!e.s)return new R(0);for(e.s*=S.s,n=S.e+e.e,v=_.length,w=F.length,v<w&&(d=_,_=F,F=d,f=v,v=w,w=f),d=[],f=v+w,o=f;o--;)d.push(0);for(o=w;--o>=0;){for(t=0,u=v+o;u>o;)g=d[u]+F[o]*_[u-o-1]+t,d[u--]=g%BASE|0,t=g/BASE|0;d[u]=(d[u]+t)%BASE|0}for(;!d[--f];)d.pop();return t?++n:d.shift(),e.d=d,e.e=n,external?round(e,R.precision):e};P.toDecimalPlaces=P.todp=function(e,t){var n=this,o=n.constructor;return n=new o(n),e===void 0?n:(checkInt32(e,0,MAX_DIGITS),t===void 0?t=o.rounding:checkInt32(t,0,8),round(n,e+getBase10Exponent(n)+1,t))};P.toExponential=function(e,t){var n,o=this,u=o.constructor;return e===void 0?n=toString$1(o,!0):(checkInt32(e,0,MAX_DIGITS),t===void 0?t=u.rounding:checkInt32(t,0,8),o=round(new u(o),e+1,t),n=toString$1(o,!0,e+1)),n};P.toFixed=function(e,t){var n,o,u=this,d=u.constructor;return e===void 0?toString$1(u):(checkInt32(e,0,MAX_DIGITS),t===void 0?t=d.rounding:checkInt32(t,0,8),o=round(new d(u),e+getBase10Exponent(u)+1,t),n=toString$1(o.abs(),!1,e+getBase10Exponent(o)+1),u.isneg()&&!u.isZero()?"-"+n:n)};P.toInteger=P.toint=function(){var e=this,t=e.constructor;return round(new t(e),getBase10Exponent(e)+1,t.rounding)};P.toNumber=function(){return+this};P.toPower=P.pow=function(e){var t,n,o,u,d,f,g=this,v=g.constructor,w=12,S=+(e=new v(e));if(!e.s)return new v(ONE);if(g=new v(g),!g.s){if(e.s<1)throw Error(decimalError+"Infinity");return g}if(g.eq(ONE))return g;if(o=v.precision,e.eq(ONE))return round(g,o);if(t=e.e,n=e.d.length-1,f=t>=n,d=g.s,f){if((n=S<0?-S:S)<=MAX_SAFE_INTEGER){for(u=new v(ONE),t=Math.ceil(o/LOG_BASE+4),external=!1;n%2&&(u=u.times(g),truncate(u.d,t)),n=mathfloor(n/2),n!==0;)g=g.times(g),truncate(g.d,t);return external=!0,e.s<0?new v(ONE).div(u):round(u,o)}}else if(d<0)throw Error(decimalError+"NaN");return d=d<0&&e.d[Math.max(t,n)]&1?-1:1,g.s=1,external=!1,u=e.times(ln(g,o+w)),external=!0,u=exp(u),u.s=d,u};P.toPrecision=function(e,t){var n,o,u=this,d=u.constructor;return e===void 0?(n=getBase10Exponent(u),o=toString$1(u,n<=d.toExpNeg||n>=d.toExpPos)):(checkInt32(e,1,MAX_DIGITS),t===void 0?t=d.rounding:checkInt32(t,0,8),u=round(new d(u),e,t),n=getBase10Exponent(u),o=toString$1(u,e<=n||n<=d.toExpNeg,e)),o};P.toSignificantDigits=P.tosd=function(e,t){var n=this,o=n.constructor;return e===void 0?(e=o.precision,t=o.rounding):(checkInt32(e,1,MAX_DIGITS),t===void 0?t=o.rounding:checkInt32(t,0,8)),round(new o(n),e,t)};P.toString=P.valueOf=P.val=P.toJSON=P[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=getBase10Exponent(e),n=e.constructor;return toString$1(e,t<=n.toExpNeg||t>=n.toExpPos)};function add(e,t){var n,o,u,d,f,g,v,w,S=e.constructor,R=S.precision;if(!e.s||!t.s)return t.s||(t=new S(e)),external?round(t,R):t;if(v=e.d,w=t.d,f=e.e,u=t.e,v=v.slice(),d=f-u,d){for(d<0?(o=v,d=-d,g=w.length):(o=w,u=f,g=v.length),f=Math.ceil(R/LOG_BASE),g=f>g?f+1:g+1,d>g&&(d=g,o.length=1),o.reverse();d--;)o.push(0);o.reverse()}for(g=v.length,d=w.length,g-d<0&&(d=g,o=w,w=v,v=o),n=0;d;)n=(v[--d]=v[d]+w[d]+n)/BASE|0,v[d]%=BASE;for(n&&(v.unshift(n),++u),g=v.length;v[--g]==0;)v.pop();return t.d=v,t.e=u,external?round(t,R):t}function checkInt32(e,t,n){if(e!==~~e||e<t||e>n)throw Error(invalidArgument+e)}function digitsToString(e){var t,n,o,u=e.length-1,d="",f=e[0];if(u>0){for(d+=f,t=1;t<u;t++)o=e[t]+"",n=LOG_BASE-o.length,n&&(d+=getZeroString(n)),d+=o;f=e[t],o=f+"",n=LOG_BASE-o.length,n&&(d+=getZeroString(n))}else if(f===0)return"0";for(;f%10===0;)f/=10;return d+f}var divide=(function(){function e(o,u){var d,f=0,g=o.length;for(o=o.slice();g--;)d=o[g]*u+f,o[g]=d%BASE|0,f=d/BASE|0;return f&&o.unshift(f),o}function t(o,u,d,f){var g,v;if(d!=f)v=d>f?1:-1;else for(g=v=0;g<d;g++)if(o[g]!=u[g]){v=o[g]>u[g]?1:-1;break}return v}function n(o,u,d){for(var f=0;d--;)o[d]-=f,f=o[d]<u[d]?1:0,o[d]=f*BASE+o[d]-u[d];for(;!o[0]&&o.length>1;)o.shift()}return function(o,u,d,f){var g,v,w,S,R,_,F,M,I,N,B,H,U,$,z,j,J,ie,se=o.constructor,fe=o.s==u.s?1:-1,de=o.d,Ce=u.d;if(!o.s)return new se(o);if(!u.s)throw Error(decimalError+"Division by zero");for(v=o.e-u.e,J=Ce.length,z=de.length,F=new se(fe),M=F.d=[],w=0;Ce[w]==(de[w]||0);)++w;if(Ce[w]>(de[w]||0)&&--v,d==null?H=d=se.precision:f?H=d+(getBase10Exponent(o)-getBase10Exponent(u))+1:H=d,H<0)return new se(0);if(H=H/LOG_BASE+2|0,w=0,J==1)for(S=0,Ce=Ce[0],H++;(w<z||S)&&H--;w++)U=S*BASE+(de[w]||0),M[w]=U/Ce|0,S=U%Ce|0;else{for(S=BASE/(Ce[0]+1)|0,S>1&&(Ce=e(Ce,S),de=e(de,S),J=Ce.length,z=de.length),$=J,I=de.slice(0,J),N=I.length;N<J;)I[N++]=0;ie=Ce.slice(),ie.unshift(0),j=Ce[0],Ce[1]>=BASE/2&&++j;do S=0,g=t(Ce,I,J,N),g<0?(B=I[0],J!=N&&(B=B*BASE+(I[1]||0)),S=B/j|0,S>1?(S>=BASE&&(S=BASE-1),R=e(Ce,S),_=R.length,N=I.length,g=t(R,I,_,N),g==1&&(S--,n(R,J<_?ie:Ce,_))):(S==0&&(g=S=1),R=Ce.slice()),_=R.length,_<N&&R.unshift(0),n(I,R,N),g==-1&&(N=I.length,g=t(Ce,I,J,N),g<1&&(S++,n(I,J<N?ie:Ce,N))),N=I.length):g===0&&(S++,I=[0]),M[w++]=S,g&&I[0]?I[N++]=de[$]||0:(I=[de[$]],N=1);while(($++<z||I[0]!==void 0)&&H--)}return M[0]||M.shift(),F.e=v,round(F,f?d+getBase10Exponent(F)+1:d)}})();function exp(e,t){var n,o,u,d,f,g,v=0,w=0,S=e.constructor,R=S.precision;if(getBase10Exponent(e)>16)throw Error(exponentOutOfRange+getBase10Exponent(e));if(!e.s)return new S(ONE);for(external=!1,g=R,f=new S(.03125);e.abs().gte(.1);)e=e.times(f),w+=5;for(o=Math.log(mathpow(2,w))/Math.LN10*2+5|0,g+=o,n=u=d=new S(ONE),S.precision=g;;){if(u=round(u.times(e),g),n=n.times(++v),f=d.plus(divide(u,n,g)),digitsToString(f.d).slice(0,g)===digitsToString(d.d).slice(0,g)){for(;w--;)d=round(d.times(d),g);return S.precision=R,t==null?(external=!0,round(d,R)):d}d=f}}function getBase10Exponent(e){for(var t=e.e*LOG_BASE,n=e.d[0];n>=10;n/=10)t++;return t}function getLn10(e,t,n){if(t>e.LN10.sd())throw external=!0,n&&(e.precision=n),Error(decimalError+"LN10 precision limit exceeded");return round(new e(e.LN10),t)}function getZeroString(e){for(var t="";e--;)t+="0";return t}function ln(e,t){var n,o,u,d,f,g,v,w,S,R=1,_=10,F=e,M=F.d,I=F.constructor,N=I.precision;if(F.s<1)throw Error(decimalError+(F.s?"NaN":"-Infinity"));if(F.eq(ONE))return new I(0);if(t==null?(external=!1,w=N):w=t,F.eq(10))return t==null&&(external=!0),getLn10(I,w);if(w+=_,I.precision=w,n=digitsToString(M),o=n.charAt(0),d=getBase10Exponent(F),Math.abs(d)<15e14){for(;o<7&&o!=1||o==1&&n.charAt(1)>3;)F=F.times(e),n=digitsToString(F.d),o=n.charAt(0),R++;d=getBase10Exponent(F),o>1?(F=new I("0."+n),d++):F=new I(o+"."+n.slice(1))}else return v=getLn10(I,w+2,N).times(d+""),F=ln(new I(o+"."+n.slice(1)),w-_).plus(v),I.precision=N,t==null?(external=!0,round(F,N)):F;for(g=f=F=divide(F.minus(ONE),F.plus(ONE),w),S=round(F.times(F),w),u=3;;){if(f=round(f.times(S),w),v=g.plus(divide(f,new I(u),w)),digitsToString(v.d).slice(0,w)===digitsToString(g.d).slice(0,w))return g=g.times(2),d!==0&&(g=g.plus(getLn10(I,w+2,N).times(d+""))),g=divide(g,new I(R),w),I.precision=N,t==null?(external=!0,round(g,N)):g;g=v,u+=2}}function parseDecimal(e,t){var n,o,u;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(o=t.search(/e/i))>0?(n<0&&(n=o),n+=+t.slice(o+1),t=t.substring(0,o)):n<0&&(n=t.length),o=0;t.charCodeAt(o)===48;)++o;for(u=t.length;t.charCodeAt(u-1)===48;)--u;if(t=t.slice(o,u),t){if(u-=o,n=n-o-1,e.e=mathfloor(n/LOG_BASE),e.d=[],o=(n+1)%LOG_BASE,n<0&&(o+=LOG_BASE),o<u){for(o&&e.d.push(+t.slice(0,o)),u-=LOG_BASE;o<u;)e.d.push(+t.slice(o,o+=LOG_BASE));t=t.slice(o),o=LOG_BASE-t.length}else o-=u;for(;o--;)t+="0";if(e.d.push(+t),external&&(e.e>MAX_E||e.e<-MAX_E))throw Error(exponentOutOfRange+n)}else e.s=0,e.e=0,e.d=[0];return e}function round(e,t,n){var o,u,d,f,g,v,w,S,R=e.d;for(f=1,d=R[0];d>=10;d/=10)f++;if(o=t-f,o<0)o+=LOG_BASE,u=t,w=R[S=0];else{if(S=Math.ceil((o+1)/LOG_BASE),d=R.length,S>=d)return e;for(w=d=R[S],f=1;d>=10;d/=10)f++;o%=LOG_BASE,u=o-LOG_BASE+f}if(n!==void 0&&(d=mathpow(10,f-u-1),g=w/d%10|0,v=t<0||R[S+1]!==void 0||w%d,v=n<4?(g||v)&&(n==0||n==(e.s<0?3:2)):g>5||g==5&&(n==4||v||n==6&&(o>0?u>0?w/mathpow(10,f-u):0:R[S-1])%10&1||n==(e.s<0?8:7))),t<1||!R[0])return v?(d=getBase10Exponent(e),R.length=1,t=t-d-1,R[0]=mathpow(10,(LOG_BASE-t%LOG_BASE)%LOG_BASE),e.e=mathfloor(-t/LOG_BASE)||0):(R.length=1,R[0]=e.e=e.s=0),e;if(o==0?(R.length=S,d=1,S--):(R.length=S+1,d=mathpow(10,LOG_BASE-o),R[S]=u>0?(w/mathpow(10,f-u)%mathpow(10,u)|0)*d:0),v)for(;;)if(S==0){(R[0]+=d)==BASE&&(R[0]=1,++e.e);break}else{if(R[S]+=d,R[S]!=BASE)break;R[S--]=0,d=1}for(o=R.length;R[--o]===0;)R.pop();if(external&&(e.e>MAX_E||e.e<-MAX_E))throw Error(exponentOutOfRange+getBase10Exponent(e));return e}function subtract(e,t){var n,o,u,d,f,g,v,w,S,R,_=e.constructor,F=_.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new _(e),external?round(t,F):t;if(v=e.d,R=t.d,o=t.e,w=e.e,v=v.slice(),f=w-o,f){for(S=f<0,S?(n=v,f=-f,g=R.length):(n=R,o=w,g=v.length),u=Math.max(Math.ceil(F/LOG_BASE),g)+2,f>u&&(f=u,n.length=1),n.reverse(),u=f;u--;)n.push(0);n.reverse()}else{for(u=v.length,g=R.length,S=u<g,S&&(g=u),u=0;u<g;u++)if(v[u]!=R[u]){S=v[u]<R[u];break}f=0}for(S&&(n=v,v=R,R=n,t.s=-t.s),g=v.length,u=R.length-g;u>0;--u)v[g++]=0;for(u=R.length;u>f;){if(v[--u]<R[u]){for(d=u;d&&v[--d]===0;)v[d]=BASE-1;--v[d],v[u]+=BASE}v[u]-=R[u]}for(;v[--g]===0;)v.pop();for(;v[0]===0;v.shift())--o;return v[0]?(t.d=v,t.e=o,external?round(t,F):t):new _(0)}function toString$1(e,t,n){var o,u=getBase10Exponent(e),d=digitsToString(e.d),f=d.length;return t?(n&&(o=n-f)>0?d=d.charAt(0)+"."+d.slice(1)+getZeroString(o):f>1&&(d=d.charAt(0)+"."+d.slice(1)),d=d+(u<0?"e":"e+")+u):u<0?(d="0."+getZeroString(-u-1)+d,n&&(o=n-f)>0&&(d+=getZeroString(o))):u>=f?(d+=getZeroString(u+1-f),n&&(o=n-u-1)>0&&(d=d+"."+getZeroString(o))):((o=u+1)<f&&(d=d.slice(0,o)+"."+d.slice(o)),n&&(o=n-f)>0&&(u+1===f&&(d+="."),d+=getZeroString(o))),e.s<0?"-"+d:d}function truncate(e,t){if(e.length>t)return e.length=t,!0}function clone(e){var t,n,o;function u(d){var f=this;if(!(f instanceof u))return new u(d);if(f.constructor=u,d instanceof u){f.s=d.s,f.e=d.e,f.d=(d=d.d)?d.slice():d;return}if(typeof d=="number"){if(d*0!==0)throw Error(invalidArgument+d);if(d>0)f.s=1;else if(d<0)d=-d,f.s=-1;else{f.s=0,f.e=0,f.d=[0];return}if(d===~~d&&d<1e7){f.e=0,f.d=[d];return}return parseDecimal(f,d.toString())}else if(typeof d!="string")throw Error(invalidArgument+d);if(d.charCodeAt(0)===45?(d=d.slice(1),f.s=-1):f.s=1,isDecimal.test(d))parseDecimal(f,d);else throw Error(invalidArgument+d)}if(u.prototype=P,u.ROUND_UP=0,u.ROUND_DOWN=1,u.ROUND_CEIL=2,u.ROUND_FLOOR=3,u.ROUND_HALF_UP=4,u.ROUND_HALF_DOWN=5,u.ROUND_HALF_EVEN=6,u.ROUND_HALF_CEIL=7,u.ROUND_HALF_FLOOR=8,u.clone=clone,u.config=u.set=config,e===void 0&&(e={}),e)for(o=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<o.length;)e.hasOwnProperty(n=o[t++])||(e[n]=this[n]);return u.config(e),u}function config(e){if(!e||typeof e!="object")throw Error(decimalError+"Object expected");var t,n,o,u=["precision",1,MAX_DIGITS,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<u.length;t+=3)if((o=e[n=u[t]])!==void 0)if(mathfloor(o)===o&&o>=u[t+1]&&o<=u[t+2])this[n]=o;else throw Error(invalidArgument+n+": "+o);if((o=e[n="LN10"])!==void 0)if(o==Math.LN10)this[n]=new this(o);else throw Error(invalidArgument+n+": "+o);return this}var Decimal=clone(defaults$1);ONE=new Decimal(1);const Decimal$1=Decimal;var identity=e=>e,PLACE_HOLDER={},isPlaceHolder=e=>e===PLACE_HOLDER,curry0=e=>function t(){return arguments.length===0||arguments.length===1&&isPlaceHolder(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},curryN=(e,t)=>e===1?t:curry0(function(){for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];var d=o.filter(f=>f!==PLACE_HOLDER).length;return d>=e?t(...o):curryN(e-d,curry0(function(){for(var f=arguments.length,g=new Array(f),v=0;v<f;v++)g[v]=arguments[v];var w=o.map(S=>isPlaceHolder(S)?g.shift():S);return t(...w,...g)}))}),curry=e=>curryN(e.length,e),range=(e,t)=>{for(var n=[],o=e;o<t;++o)n[o-e]=o;return n},map=curry((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(n=>t[n]).map(e)),compose=function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];if(!n.length)return identity;var u=n.reverse(),d=u[0],f=u.slice(1);return function(){return f.reduce((g,v)=>v(g),d(...arguments))}},reverse=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),memoize$1=e=>{var t=null,n=null;return function(){for(var o=arguments.length,u=new Array(o),d=0;d<o;d++)u[d]=arguments[d];return t&&u.every((f,g)=>{var v;return f===((v=t)===null||v===void 0?void 0:v[g])})||(t=u,n=e(...u)),n}};function getDigitCount(e){var t;return e===0?t=1:t=Math.floor(new Decimal$1(e).abs().log(10).toNumber())+1,t}function rangeStep(e,t,n){for(var o=new Decimal$1(e),u=0,d=[];o.lt(t)&&u<1e5;)d.push(o.toNumber()),o=o.add(n),u++;return d}curry((e,t,n)=>{var o=+e,u=+t;return o+n*(u-o)});curry((e,t,n)=>{var o=t-+e;return o=o||1/0,(n-e)/o});curry((e,t,n)=>{var o=t-+e;return o=o||1/0,Math.max(0,Math.min(1,(n-e)/o))});var getValidInterval=e=>{var[t,n]=e,[o,u]=[t,n];return t>n&&([o,u]=[n,t]),[o,u]},getFormatStep=(e,t,n)=>{if(e.lte(0))return new Decimal$1(0);var o=getDigitCount(e.toNumber()),u=new Decimal$1(10).pow(o),d=e.div(u),f=o!==1?.05:.1,g=new Decimal$1(Math.ceil(d.div(f).toNumber())).add(n).mul(f),v=g.mul(u);return t?new Decimal$1(v.toNumber()):new Decimal$1(Math.ceil(v.toNumber()))},getTickOfSingleValue=(e,t,n)=>{var o=new Decimal$1(1),u=new Decimal$1(e);if(!u.isint()&&n){var d=Math.abs(e);d<1?(o=new Decimal$1(10).pow(getDigitCount(e)-1),u=new Decimal$1(Math.floor(u.div(o).toNumber())).mul(o)):d>1&&(u=new Decimal$1(Math.floor(e)))}else e===0?u=new Decimal$1(Math.floor((t-1)/2)):n||(u=new Decimal$1(Math.floor(e)));var f=Math.floor((t-1)/2),g=compose(map(v=>u.add(new Decimal$1(v-f).mul(o)).toNumber()),range);return g(0,t)},_calculateStep=function(t,n,o,u){var d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(o-1)))return{step:new Decimal$1(0),tickMin:new Decimal$1(0),tickMax:new Decimal$1(0)};var f=getFormatStep(new Decimal$1(n).sub(t).div(o-1),u,d),g;t<=0&&n>=0?g=new Decimal$1(0):(g=new Decimal$1(t).add(n).div(2),g=g.sub(new Decimal$1(g).mod(f)));var v=Math.ceil(g.sub(t).div(f).toNumber()),w=Math.ceil(new Decimal$1(n).sub(g).div(f).toNumber()),S=v+w+1;return S>o?_calculateStep(t,n,o,u,d+1):(S<o&&(w=n>0?w+(o-S):w,v=n>0?v:v+(o-S)),{step:f,tickMin:g.sub(new Decimal$1(v).mul(f)),tickMax:g.add(new Decimal$1(w).mul(f))})};function getNiceTickValuesFn(e){var[t,n]=e,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,d=Math.max(o,2),[f,g]=getValidInterval([t,n]);if(f===-1/0||g===1/0){var v=g===1/0?[f,...range(0,o-1).map(()=>1/0)]:[...range(0,o-1).map(()=>-1/0),g];return t>n?reverse(v):v}if(f===g)return getTickOfSingleValue(f,o,u);var{step:w,tickMin:S,tickMax:R}=_calculateStep(f,g,d,u,0),_=rangeStep(S,R.add(new Decimal$1(.1).mul(w)),w);return t>n?reverse(_):_}function getTickValuesFixedDomainFn(e,t){var[n,o]=e,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[d,f]=getValidInterval([n,o]);if(d===-1/0||f===1/0)return[n,o];if(d===f)return[d];var g=Math.max(t,2),v=getFormatStep(new Decimal$1(f).sub(d).div(g-1),u,0),w=[...rangeStep(new Decimal$1(d),new Decimal$1(f),v),f];return u===!1&&(w=w.map(S=>Math.round(S))),n>o?reverse(w):w}var getNiceTickValues=memoize$1(getNiceTickValuesFn),getTickValuesFixedDomain=memoize$1(getTickValuesFixedDomainFn),selectBarCategoryGap=e=>e.rootProps.barCategoryGap,selectStackOffsetType=e=>e.rootProps.stackOffset,selectChartName=e=>e.options.chartName,selectSyncId=e=>e.rootProps.syncId,selectSyncMethod=e=>e.rootProps.syncMethod,selectEventEmitter=e=>e.options.eventEmitter,defaultPolarAngleAxisProps={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},defaultPolarRadiusAxisProps={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},combineAxisRangeWithReverse=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},implicitAngleAxis={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:defaultPolarAngleAxisProps.angleAxisId,includeHidden:!1,name:void 0,reversed:defaultPolarAngleAxisProps.reversed,scale:defaultPolarAngleAxisProps.scale,tick:defaultPolarAngleAxisProps.tick,tickCount:void 0,ticks:void 0,type:defaultPolarAngleAxisProps.type,unit:void 0},implicitRadiusAxis={allowDataOverflow:defaultPolarRadiusAxisProps.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:defaultPolarRadiusAxisProps.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:defaultPolarRadiusAxisProps.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:defaultPolarRadiusAxisProps.scale,tick:defaultPolarRadiusAxisProps.tick,tickCount:defaultPolarRadiusAxisProps.tickCount,ticks:void 0,type:defaultPolarRadiusAxisProps.type,unit:void 0},implicitRadialBarAngleAxis={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:defaultPolarAngleAxisProps.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:defaultPolarAngleAxisProps.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:defaultPolarAngleAxisProps.scale,tick:defaultPolarAngleAxisProps.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},implicitRadialBarRadiusAxis={allowDataOverflow:defaultPolarRadiusAxisProps.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:defaultPolarRadiusAxisProps.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:defaultPolarRadiusAxisProps.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:defaultPolarRadiusAxisProps.scale,tick:defaultPolarRadiusAxisProps.tick,tickCount:defaultPolarRadiusAxisProps.tickCount,ticks:void 0,type:"category",unit:void 0},selectAngleAxis=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?implicitRadialBarAngleAxis:implicitAngleAxis,selectRadiusAxis=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?implicitRadialBarRadiusAxis:implicitRadiusAxis,selectPolarOptions=e=>e.polarOptions,selectMaxRadius=createSelector([selectChartWidth,selectChartHeight,selectChartOffsetInternal],getMaxRadius),selectInnerRadius=createSelector([selectPolarOptions,selectMaxRadius],(e,t)=>{if(e!=null)return getPercentValue(e.innerRadius,t,0)}),selectOuterRadius=createSelector([selectPolarOptions,selectMaxRadius],(e,t)=>{if(e!=null)return getPercentValue(e.outerRadius,t,t*.8)}),combineAngleAxisRange=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},selectAngleAxisRange=createSelector([selectPolarOptions],combineAngleAxisRange);createSelector([selectAngleAxis,selectAngleAxisRange],combineAxisRangeWithReverse);var selectRadiusAxisRange=createSelector([selectMaxRadius,selectInnerRadius,selectOuterRadius],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});createSelector([selectRadiusAxis,selectRadiusAxisRange],combineAxisRangeWithReverse);var selectPolarViewBox=createSelector([selectChartLayout,selectPolarOptions,selectInnerRadius,selectOuterRadius,selectChartWidth,selectChartHeight],(e,t,n,o,u,d)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||o==null)){var{cx:f,cy:g,startAngle:v,endAngle:w}=t;return{cx:getPercentValue(f,u,u/2),cy:getPercentValue(g,d,d/2),innerRadius:n,outerRadius:o,startAngle:v,endAngle:w,clockWise:!1}}}),pickAxisType=(e,t)=>t,pickAxisId=(e,t,n)=>n;function getStackSeriesIdentifier(e){return e?.id}var selectTooltipAxisType=e=>{var t=selectChartLayout(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},selectTooltipAxisId=e=>e.tooltip.settings.axisId,selectTooltipAxis=e=>{var t=selectTooltipAxisType(e),n=selectTooltipAxisId(e);return selectAxisSettings(e,t,n)},selectTooltipAxisDataKey=createSelector([selectTooltipAxis],e=>e?.dataKey);function combineDisplayedStackedData(e,t,n){var{chartData:o=[]}=t,{allowDuplicatedCategory:u,dataKey:d}=n,f=new Map;return e.forEach(g=>{var v,w=(v=g.data)!==null&&v!==void 0?v:o;if(!(w==null||w.length===0)){var S=getStackSeriesIdentifier(g);w.forEach((R,_)=>{var F=d==null||u?_:String(getValueByDataKey(R,d,null)),M=getValueByDataKey(R,g.dataKey,0),I;f.has(F)?I=f.get(F):I={},Object.assign(I,{[S]:M}),f.set(F,I)})}}),Array.from(f.values())}function isStacked(e){return e.stackId!=null&&e.dataKey!=null}var numberDomainEqualityCheck=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function arrayEqualityCheck(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function ownKeys$e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$e(Object(n),!0).forEach(function(o){_defineProperty$f(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$e(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$f(e,t,n){return(t=_toPropertyKey$f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$f(e){var t=_toPrimitive$f(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$f(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var defaultNumericDomain=[0,"auto"],implicitXAxis={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},selectXAxisSettingsNoDefaults=(e,t)=>e.cartesianAxis.xAxis[t],selectXAxisSettings=(e,t)=>{var n=selectXAxisSettingsNoDefaults(e,t);return n??implicitXAxis},implicitYAxis={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:defaultNumericDomain,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:DEFAULT_Y_AXIS_WIDTH},selectYAxisSettingsNoDefaults=(e,t)=>e.cartesianAxis.yAxis[t],selectYAxisSettings=(e,t)=>{var n=selectYAxisSettingsNoDefaults(e,t);return n??implicitYAxis},implicitZAxis={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},selectZAxisSettings=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??implicitZAxis},selectBaseAxis=(e,t,n)=>{switch(t){case"xAxis":return selectXAxisSettings(e,n);case"yAxis":return selectYAxisSettings(e,n);case"zAxis":return selectZAxisSettings(e,n);case"angleAxis":return selectAngleAxis(e,n);case"radiusAxis":return selectRadiusAxis(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},selectCartesianAxisSettings=(e,t,n)=>{switch(t){case"xAxis":return selectXAxisSettings(e,n);case"yAxis":return selectYAxisSettings(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},selectAxisSettings=(e,t,n)=>{switch(t){case"xAxis":return selectXAxisSettings(e,n);case"yAxis":return selectYAxisSettings(e,n);case"angleAxis":return selectAngleAxis(e,n);case"radiusAxis":return selectRadiusAxis(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},selectHasBar=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function itemAxisPredicate(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var selectUnfilteredCartesianItems=e=>e.graphicalItems.cartesianItems,selectAxisPredicate$1=createSelector([pickAxisType,pickAxisId],itemAxisPredicate),combineGraphicalItemsSettings=(e,t,n)=>e.filter(n).filter(o=>t?.includeHidden===!0?!0:!o.hide),selectCartesianItemsSettings=createSelector([selectUnfilteredCartesianItems,selectBaseAxis,selectAxisPredicate$1],combineGraphicalItemsSettings,{memoizeOptions:{resultEqualityCheck:arrayEqualityCheck}}),selectStackedCartesianItemsSettings=createSelector([selectCartesianItemsSettings],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(isStacked)),filterGraphicalNotStackedItems=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),selectCartesianItemsSettingsExceptStacked=createSelector([selectCartesianItemsSettings],filterGraphicalNotStackedItems),combineGraphicalItemsData=e=>e.map(t=>t.data).filter(Boolean).flat(1),selectCartesianGraphicalItemsData=createSelector([selectCartesianItemsSettings],combineGraphicalItemsData,{memoizeOptions:{resultEqualityCheck:arrayEqualityCheck}}),combineDisplayedData=(e,t)=>{var{chartData:n=[],dataStartIndex:o,dataEndIndex:u}=t;return e.length>0?e:n.slice(o,u+1)},selectDisplayedData$1=createSelector([selectCartesianGraphicalItemsData,selectChartDataWithIndexesIfNotInPanorama],combineDisplayedData),combineAppliedValues=(e,t,n)=>t?.dataKey!=null?e.map(o=>({value:getValueByDataKey(o,t.dataKey)})):n.length>0?n.map(o=>o.dataKey).flatMap(o=>e.map(u=>({value:getValueByDataKey(u,o)}))):e.map(o=>({value:o})),selectAllAppliedValues=createSelector([selectDisplayedData$1,selectBaseAxis,selectCartesianItemsSettings],combineAppliedValues);function isErrorBarRelevantForAxisType(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function makeNumber(e){if(isNumOrStr(e)||e instanceof Date){var t=Number(e);if(isWellBehavedNumber(t))return t}}function makeDomain(e){if(Array.isArray(e)){var t=[makeNumber(e[0]),makeNumber(e[1])];return isWellFormedNumberDomain(t)?t:void 0}var n=makeNumber(e);if(n!=null)return[n,n]}function onlyAllowNumbers(e){return e.map(makeNumber).filter(isNotNil)}function getErrorDomainByDataKey(e,t,n){return!n||typeof t!="number"||isNan(t)?[]:n.length?onlyAllowNumbers(n.flatMap(o=>{var u=getValueByDataKey(e,o.dataKey),d,f;if(Array.isArray(u)?[d,f]=u:d=f=u,!(!isWellBehavedNumber(d)||!isWellBehavedNumber(f)))return[t-d,t+f]})):[]}var selectDisplayedStackedData=createSelector([selectStackedCartesianItemsSettings,selectChartDataWithIndexesIfNotInPanorama,selectTooltipAxis],combineDisplayedStackedData),combineStackGroups=(e,t,n)=>{var o={},u=t.reduce((d,f)=>(f.stackId==null||(d[f.stackId]==null&&(d[f.stackId]=[]),d[f.stackId].push(f)),d),o);return Object.fromEntries(Object.entries(u).map(d=>{var[f,g]=d,v=g.map(getStackSeriesIdentifier);return[f,{stackedData:getStackedData(e,v,n),graphicalItems:g}]}))},selectStackGroups=createSelector([selectDisplayedStackedData,selectStackedCartesianItemsSettings,selectStackOffsetType],combineStackGroups),combineDomainOfStackGroups=(e,t,n,o)=>{var{dataStartIndex:u,dataEndIndex:d}=t;if(o==null&&n!=="zAxis"){var f=getDomainOfStackGroups(e,u,d);if(!(f!=null&&f[0]===0&&f[1]===0))return f}},selectAllowsDataOverflow=createSelector([selectBaseAxis],e=>e.allowDataOverflow),getDomainDefinition=e=>{var t;if(e==null||!("domain"in e))return defaultNumericDomain;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var n=onlyAllowNumbers(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:defaultNumericDomain},selectDomainDefinition=createSelector([selectBaseAxis],getDomainDefinition),selectDomainFromUserPreference=createSelector([selectDomainDefinition,selectAllowsDataOverflow],numericalDomainSpecifiedWithoutRequiringData),selectDomainOfStackGroups=createSelector([selectStackGroups,selectChartDataWithIndexes,pickAxisType,selectDomainFromUserPreference],combineDomainOfStackGroups,{memoizeOptions:{resultEqualityCheck:numberDomainEqualityCheck}}),selectAllErrorBarSettings=e=>e.errorBars,combineRelevantErrorBarSettings=(e,t,n)=>e.flatMap(o=>t[o.id]).filter(Boolean).filter(o=>isErrorBarRelevantForAxisType(n,o)),mergeDomains=function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];var u=n.filter(Boolean);if(u.length!==0){var d=u.flat(),f=Math.min(...d),g=Math.max(...d);return[f,g]}},combineDomainOfAllAppliedNumericalValuesIncludingErrorValues=(e,t,n,o,u)=>{var d,f;if(n.length>0&&e.forEach(g=>{n.forEach(v=>{var w,S,R=(w=o[v.id])===null||w===void 0?void 0:w.filter(B=>isErrorBarRelevantForAxisType(u,B)),_=getValueByDataKey(g,(S=t.dataKey)!==null&&S!==void 0?S:v.dataKey),F=getErrorDomainByDataKey(g,_,R);if(F.length>=2){var M=Math.min(...F),I=Math.max(...F);(d==null||M<d)&&(d=M),(f==null||I>f)&&(f=I)}var N=makeDomain(_);N!=null&&(d=d==null?N[0]:Math.min(d,N[0]),f=f==null?N[1]:Math.max(f,N[1]))})}),t?.dataKey!=null&&e.forEach(g=>{var v=makeDomain(getValueByDataKey(g,t.dataKey));v!=null&&(d=d==null?v[0]:Math.min(d,v[0]),f=f==null?v[1]:Math.max(f,v[1]))}),isWellBehavedNumber(d)&&isWellBehavedNumber(f))return[d,f]},selectDomainOfAllAppliedNumericalValuesIncludingErrorValues$1=createSelector([selectDisplayedData$1,selectBaseAxis,selectCartesianItemsSettingsExceptStacked,selectAllErrorBarSettings,pickAxisType],combineDomainOfAllAppliedNumericalValuesIncludingErrorValues,{memoizeOptions:{resultEqualityCheck:numberDomainEqualityCheck}});function onlyAllowNumbersAndStringsAndDates(e){var{value:t}=e;if(isNumOrStr(t)||t instanceof Date)return t}var computeDomainOfTypeCategory=(e,t,n)=>{var o=e.map(onlyAllowNumbersAndStringsAndDates).filter(u=>u!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&hasDuplicate(o))?range$2(0,e.length):t.allowDuplicatedCategory?o:Array.from(new Set(o))},selectReferenceDots=e=>e.referenceElements.dots,filterReferenceElements=(e,t,n)=>e.filter(o=>o.ifOverflow==="extendDomain").filter(o=>t==="xAxis"?o.xAxisId===n:o.yAxisId===n),selectReferenceDotsByAxis=createSelector([selectReferenceDots,pickAxisType,pickAxisId],filterReferenceElements),selectReferenceAreas=e=>e.referenceElements.areas,selectReferenceAreasByAxis=createSelector([selectReferenceAreas,pickAxisType,pickAxisId],filterReferenceElements),selectReferenceLines=e=>e.referenceElements.lines,selectReferenceLinesByAxis=createSelector([selectReferenceLines,pickAxisType,pickAxisId],filterReferenceElements),combineDotsDomain=(e,t)=>{var n=onlyAllowNumbers(e.map(o=>t==="xAxis"?o.x:o.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},selectReferenceDotsDomain=createSelector(selectReferenceDotsByAxis,pickAxisType,combineDotsDomain),combineAreasDomain=(e,t)=>{var n=onlyAllowNumbers(e.flatMap(o=>[t==="xAxis"?o.x1:o.y1,t==="xAxis"?o.x2:o.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},selectReferenceAreasDomain=createSelector([selectReferenceAreasByAxis,pickAxisType],combineAreasDomain),combineLinesDomain=(e,t)=>{var n=onlyAllowNumbers(e.map(o=>t==="xAxis"?o.x:o.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},selectReferenceLinesDomain=createSelector(selectReferenceLinesByAxis,pickAxisType,combineLinesDomain),selectReferenceElementsDomain=createSelector(selectReferenceDotsDomain,selectReferenceLinesDomain,selectReferenceAreasDomain,(e,t,n)=>mergeDomains(e,n,t)),combineNumericalDomain=(e,t,n,o,u,d,f,g)=>{if(n!=null)return n;var v=f==="vertical"&&g==="xAxis"||f==="horizontal"&&g==="yAxis",w=v?mergeDomains(o,d,u):mergeDomains(d,u);return parseNumericalUserDomain(t,w,e.allowDataOverflow)},selectNumericalDomain=createSelector([selectBaseAxis,selectDomainDefinition,selectDomainFromUserPreference,selectDomainOfStackGroups,selectDomainOfAllAppliedNumericalValuesIncludingErrorValues$1,selectReferenceElementsDomain,selectChartLayout,pickAxisType],combineNumericalDomain,{memoizeOptions:{resultEqualityCheck:numberDomainEqualityCheck}}),expandDomain=[0,1],combineAxisDomain=(e,t,n,o,u,d,f)=>{if(!((e==null||n==null||n.length===0)&&f===void 0)){var{dataKey:g,type:v}=e,w=isCategoricalAxis(t,d);return w&&g==null?range$2(0,n.length):v==="category"?computeDomainOfTypeCategory(o,e,w):u==="expand"?expandDomain:f}},selectAxisDomain=createSelector([selectBaseAxis,selectChartLayout,selectDisplayedData$1,selectAllAppliedValues,selectStackOffsetType,pickAxisType,selectNumericalDomain],combineAxisDomain),combineRealScaleType=(e,t,n,o,u)=>{if(e!=null){var{scale:d,type:f}=e;if(d==="auto")return t==="radial"&&u==="radiusAxis"?"band":t==="radial"&&u==="angleAxis"?"linear":f==="category"&&o&&(o.indexOf("LineChart")>=0||o.indexOf("AreaChart")>=0||o.indexOf("ComposedChart")>=0&&!n)?"point":f==="category"?"band":"linear";if(typeof d=="string"){var g="scale".concat(upperFirst(d));return g in d3Scales?g:"point"}}},selectRealScaleType=createSelector([selectBaseAxis,selectChartLayout,selectHasBar,selectChartName,pickAxisType],combineRealScaleType);function getD3ScaleFromType(e){if(e!=null){if(e in d3Scales)return d3Scales[e]();var t="scale".concat(upperFirst(e));if(t in d3Scales)return d3Scales[t]()}}function combineScaleFunction(e,t,n,o){if(!(n==null||o==null)){if(typeof e.scale=="function")return e.scale.copy().domain(n).range(o);var u=getD3ScaleFromType(t);if(u!=null){var d=u.domain(n).range(o);return checkDomainOfScale(d),d}}}var combineNiceTicks=(e,t,n)=>{var o=getDomainDefinition(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(o)&&(o[0]==="auto"||o[1]==="auto")&&isWellFormedNumberDomain(e))return getNiceTickValues(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&isWellFormedNumberDomain(e))return getTickValuesFixedDomain(e,t.tickCount,t.allowDecimals)}},selectNiceTicks=createSelector([selectAxisDomain,selectAxisSettings,selectRealScaleType],combineNiceTicks),combineAxisDomainWithNiceTicks=(e,t,n,o)=>{if(o!=="angleAxis"&&e?.type==="number"&&isWellFormedNumberDomain(t)&&Array.isArray(n)&&n.length>0){var u=t[0],d=n[0],f=t[1],g=n[n.length-1];return[Math.min(u,d),Math.max(f,g)]}return t},selectAxisDomainIncludingNiceTicks=createSelector([selectBaseAxis,selectAxisDomain,selectNiceTicks,pickAxisType],combineAxisDomainWithNiceTicks),selectSmallestDistanceBetweenValues=createSelector(selectAllAppliedValues,selectBaseAxis,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,o=Array.from(onlyAllowNumbers(e.map(g=>g.value))).sort((g,v)=>g-v);if(o.length<2)return 1/0;var u=o[o.length-1]-o[0];if(u===0)return 1/0;for(var d=0;d<o.length-1;d++){var f=o[d+1]-o[d];n=Math.min(n,f)}return n/u}}),selectCalculatedPadding=createSelector(selectSmallestDistanceBetweenValues,selectChartLayout,selectBarCategoryGap,selectChartOffsetInternal,(e,t,n,o)=>o,(e,t,n,o,u)=>{if(!isWellBehavedNumber(e))return 0;var d=t==="vertical"?o.height:o.width;if(u==="gap")return e*d/2;if(u==="no-gap"){var f=getPercentValue(n,e*d),g=e*d/2;return g-f-(g-f)/d*f}return 0}),selectCalculatedXAxisPadding=(e,t)=>{var n=selectXAxisSettings(e,t);return n==null||typeof n.padding!="string"?0:selectCalculatedPadding(e,"xAxis",t,n.padding)},selectCalculatedYAxisPadding=(e,t)=>{var n=selectYAxisSettings(e,t);return n==null||typeof n.padding!="string"?0:selectCalculatedPadding(e,"yAxis",t,n.padding)},selectXAxisPadding=createSelector(selectXAxisSettings,selectCalculatedXAxisPadding,(e,t)=>{var n,o;if(e==null)return{left:0,right:0};var{padding:u}=e;return typeof u=="string"?{left:t,right:t}:{left:((n=u.left)!==null&&n!==void 0?n:0)+t,right:((o=u.right)!==null&&o!==void 0?o:0)+t}}),selectYAxisPadding=createSelector(selectYAxisSettings,selectCalculatedYAxisPadding,(e,t)=>{var n,o;if(e==null)return{top:0,bottom:0};var{padding:u}=e;return typeof u=="string"?{top:t,bottom:t}:{top:((n=u.top)!==null&&n!==void 0?n:0)+t,bottom:((o=u.bottom)!==null&&o!==void 0?o:0)+t}}),combineXAxisRange=createSelector([selectChartOffsetInternal,selectXAxisPadding,selectBrushDimensions,selectBrushSettings,(e,t,n)=>n],(e,t,n,o,u)=>{var{padding:d}=o;return u?[d.left,n.width-d.right]:[e.left+t.left,e.left+e.width-t.right]}),combineYAxisRange=createSelector([selectChartOffsetInternal,selectChartLayout,selectYAxisPadding,selectBrushDimensions,selectBrushSettings,(e,t,n)=>n],(e,t,n,o,u,d)=>{var{padding:f}=u;return d?[o.height-f.bottom,f.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),selectAxisRange=(e,t,n,o)=>{var u;switch(t){case"xAxis":return combineXAxisRange(e,n,o);case"yAxis":return combineYAxisRange(e,n,o);case"zAxis":return(u=selectZAxisSettings(e,n))===null||u===void 0?void 0:u.range;case"angleAxis":return selectAngleAxisRange(e);case"radiusAxis":return selectRadiusAxisRange(e,n);default:return}},selectAxisRangeWithReverse=createSelector([selectBaseAxis,selectAxisRange],combineAxisRangeWithReverse),selectAxisScale=createSelector([selectBaseAxis,selectRealScaleType,selectAxisDomainIncludingNiceTicks,selectAxisRangeWithReverse],combineScaleFunction);createSelector([selectCartesianItemsSettings,selectAllErrorBarSettings,pickAxisType],combineRelevantErrorBarSettings);function compareIds(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var pickAxisOrientation=(e,t)=>t,pickMirror=(e,t,n)=>n,selectAllXAxesWithOffsetType=createSelector(selectAllXAxes,pickAxisOrientation,pickMirror,(e,t,n)=>e.filter(o=>o.orientation===t).filter(o=>o.mirror===n).sort(compareIds)),selectAllYAxesWithOffsetType=createSelector(selectAllYAxes,pickAxisOrientation,pickMirror,(e,t,n)=>e.filter(o=>o.orientation===t).filter(o=>o.mirror===n).sort(compareIds)),getXAxisSize=(e,t)=>({width:e.width,height:t.height}),getYAxisSize=(e,t)=>{var n=typeof t.width=="number"?t.width:DEFAULT_Y_AXIS_WIDTH;return{width:n,height:e.height}};createSelector(selectChartOffsetInternal,selectXAxisSettings,getXAxisSize);var combineXAxisPositionStartingPoint=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},combineYAxisPositionStartingPoint=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},selectAllXAxesOffsetSteps=createSelector(selectChartHeight,selectChartOffsetInternal,selectAllXAxesWithOffsetType,pickAxisOrientation,pickMirror,(e,t,n,o,u)=>{var d={},f;return n.forEach(g=>{var v=getXAxisSize(t,g);f==null&&(f=combineXAxisPositionStartingPoint(t,o,e));var w=o==="top"&&!u||o==="bottom"&&u;d[g.id]=f-Number(w)*v.height,f+=(w?-1:1)*v.height}),d}),selectAllYAxesOffsetSteps=createSelector(selectChartWidth,selectChartOffsetInternal,selectAllYAxesWithOffsetType,pickAxisOrientation,pickMirror,(e,t,n,o,u)=>{var d={},f;return n.forEach(g=>{var v=getYAxisSize(t,g);f==null&&(f=combineYAxisPositionStartingPoint(t,o,e));var w=o==="left"&&!u||o==="right"&&u;d[g.id]=f-Number(w)*v.width,f+=(w?-1:1)*v.width}),d}),selectXAxisOffsetSteps=(e,t)=>{var n=selectXAxisSettings(e,t);if(n!=null)return selectAllXAxesOffsetSteps(e,n.orientation,n.mirror)};createSelector([selectChartOffsetInternal,selectXAxisSettings,selectXAxisOffsetSteps,(e,t)=>t],(e,t,n,o)=>{if(t!=null){var u=n?.[o];return u==null?{x:e.left,y:0}:{x:e.left,y:u}}});var selectYAxisOffsetSteps=(e,t)=>{var n=selectYAxisSettings(e,t);if(n!=null)return selectAllYAxesOffsetSteps(e,n.orientation,n.mirror)};createSelector([selectChartOffsetInternal,selectYAxisSettings,selectYAxisOffsetSteps,(e,t)=>t],(e,t,n,o)=>{if(t!=null){var u=n?.[o];return u==null?{x:0,y:e.top}:{x:u,y:e.top}}});createSelector(selectChartOffsetInternal,selectYAxisSettings,(e,t)=>{var n=typeof t.width=="number"?t.width:DEFAULT_Y_AXIS_WIDTH;return{width:n,height:e.height}});var combineDuplicateDomain=(e,t,n,o)=>{if(n!=null){var{allowDuplicatedCategory:u,type:d,dataKey:f}=n,g=isCategoricalAxis(e,o),v=t.map(w=>w.value);if(f&&g&&d==="category"&&u&&hasDuplicate(v))return v}},selectDuplicateDomain=createSelector([selectChartLayout,selectAllAppliedValues,selectBaseAxis,pickAxisType],combineDuplicateDomain),combineCategoricalDomain=(e,t,n,o)=>{if(!(n==null||n.dataKey==null)){var{type:u,scale:d}=n,f=isCategoricalAxis(e,o);if(f&&(u==="number"||d!=="auto"))return t.map(g=>g.value)}},selectCategoricalDomain=createSelector([selectChartLayout,selectAllAppliedValues,selectAxisSettings,pickAxisType],combineCategoricalDomain);createSelector([selectChartLayout,selectCartesianAxisSettings,selectRealScaleType,selectAxisScale,selectDuplicateDomain,selectCategoricalDomain,selectAxisRange,selectNiceTicks,pickAxisType],(e,t,n,o,u,d,f,g,v)=>{if(t==null)return null;var w=isCategoricalAxis(e,v);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:v,categoricalDomain:d,duplicateDomain:u,isCategorical:w,niceTicks:g,range:f,realScaleType:n,scale:o}});var combineAxisTicks=(e,t,n,o,u,d,f,g,v)=>{if(!(t==null||o==null)){var w=isCategoricalAxis(e,v),{type:S,ticks:R,tickCount:_}=t,F=n==="scaleBand"&&typeof o.bandwidth=="function"?o.bandwidth()/2:2,M=S==="category"&&o.bandwidth?o.bandwidth()/F:0;M=v==="angleAxis"&&d!=null&&d.length>=2?mathSign(d[0]-d[1])*2*M:M;var I=R||u;if(I){var N=I.map((B,H)=>{var U=f?f.indexOf(B):B;return{index:H,coordinate:o(U)+M,value:B,offset:M}});return N.filter(B=>!isNan(B.coordinate))}return w&&g?g.map((B,H)=>({coordinate:o(B)+M,value:B,index:H,offset:M})):o.ticks?o.ticks(_).map(B=>({coordinate:o(B)+M,value:B,offset:M})):o.domain().map((B,H)=>({coordinate:o(B)+M,value:f?f[B]:B,index:H,offset:M}))}};createSelector([selectChartLayout,selectAxisSettings,selectRealScaleType,selectAxisScale,selectNiceTicks,selectAxisRange,selectDuplicateDomain,selectCategoricalDomain,pickAxisType],combineAxisTicks);var combineGraphicalItemTicks=(e,t,n,o,u,d,f)=>{if(!(t==null||n==null||o==null||o[0]===o[1])){var g=isCategoricalAxis(e,f),{tickCount:v}=t,w=0;return w=f==="angleAxis"&&o?.length>=2?mathSign(o[0]-o[1])*2*w:w,g&&d?d.map((S,R)=>({coordinate:n(S)+w,value:S,index:R,offset:w})):n.ticks?n.ticks(v).map(S=>({coordinate:n(S)+w,value:S,offset:w})):n.domain().map((S,R)=>({coordinate:n(S)+w,value:u?u[S]:S,index:R,offset:w}))}};createSelector([selectChartLayout,selectAxisSettings,selectAxisScale,selectAxisRange,selectDuplicateDomain,selectCategoricalDomain,pickAxisType],combineGraphicalItemTicks);createSelector(selectBaseAxis,selectAxisScale,(e,t)=>{if(!(e==null||t==null))return _objectSpread$e(_objectSpread$e({},e),{},{scale:t})});var selectZAxisScale=createSelector([selectBaseAxis,selectRealScaleType,selectAxisDomain,selectAxisRangeWithReverse],combineScaleFunction);createSelector((e,t,n)=>selectZAxisSettings(e,n),selectZAxisScale,(e,t)=>{if(!(e==null||t==null))return _objectSpread$e(_objectSpread$e({},e),{},{scale:t})});var selectChartDirection=createSelector([selectChartLayout,selectAllXAxes,selectAllYAxes],(e,t,n)=>{switch(e){case"horizontal":return t.some(o=>o.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(o=>o.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),selectDefaultTooltipEventType=e=>e.options.defaultTooltipEventType,selectValidateTooltipEventTypes=e=>e.options.validateTooltipEventTypes;function combineTooltipEventType(e,t,n){if(e==null)return t;var o=e?"axis":"item";return n==null?t:n.includes(o)?o:t}function selectTooltipEventType$1(e,t){var n=selectDefaultTooltipEventType(e),o=selectValidateTooltipEventTypes(e);return combineTooltipEventType(t,n,o)}function useTooltipEventType(e){return useAppSelector(t=>selectTooltipEventType$1(t,e))}var combineActiveLabel=(e,t)=>{var n,o=Number(t);if(!(isNan(o)||t==null))return o>=0?e==null||(n=e[o])===null||n===void 0?void 0:n.value:void 0},selectTooltipSettings=e=>e.tooltip.settings,noInteraction={active:!1,index:null,dataKey:void 0,coordinate:void 0},initialState$8={itemInteraction:{click:noInteraction,hover:noInteraction},axisInteraction:{click:noInteraction,hover:noInteraction},keyboardInteraction:noInteraction,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},tooltipSlice=createSlice({name:"tooltip",initialState:initialState$8,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:prepareAutoBatched()},removeTooltipEntrySettings:{reducer(e,t){var n=current(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},prepare:prepareAutoBatched()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings,removeTooltipEntrySettings,setTooltipSettingsState,setActiveMouseOverItemIndex,mouseLeaveItem,mouseLeaveChart,setActiveClickItemIndex,setMouseOverAxisIndex,setMouseClickAxisIndex,setSyncInteraction,setKeyboardInteraction}=tooltipSlice.actions,tooltipReducer=tooltipSlice.reducer;function ownKeys$d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$d(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$d(Object(n),!0).forEach(function(o){_defineProperty$e(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$d(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$e(e,t,n){return(t=_toPropertyKey$e(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$e(e){var t=_toPrimitive$e(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$e(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function chooseAppropriateMouseInteraction(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function hasBeenActivePreviously(e){return e.index!=null}var combineTooltipInteractionState=(e,t,n,o)=>{if(t==null)return noInteraction;var u=chooseAppropriateMouseInteraction(e,t,n);if(u==null)return noInteraction;if(u.active)return u;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var d=e.settings.active===!0;if(hasBeenActivePreviously(u)){if(d)return _objectSpread$d(_objectSpread$d({},u),{},{active:!0})}else if(o!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:o};return _objectSpread$d(_objectSpread$d({},noInteraction),{},{coordinate:u.coordinate})},combineActiveTooltipIndex=(e,t)=>{var n=e?.index;if(n==null)return null;var o=Number(n);if(!isWellBehavedNumber(o))return n;var u=0,d=1/0;return t.length>0&&(d=t.length-1),String(Math.max(u,Math.min(o,d)))},combineCoordinateForDefaultIndex=(e,t,n,o,u,d,f,g)=>{if(!(d==null||g==null)){var v=f[0],w=v==null?void 0:g(v.positions,d);if(w!=null)return w;var S=u?.[Number(d)];if(S)switch(n){case"horizontal":return{x:S.coordinate,y:(o.top+t)/2};default:return{x:(o.left+e)/2,y:S.coordinate}}}},combineTooltipPayloadConfigurations=(e,t,n,o)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var u;return n==="hover"?u=e.itemInteraction.hover.dataKey:u=e.itemInteraction.click.dataKey,u==null&&o!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(d=>{var f;return((f=d.settings)===null||f===void 0?void 0:f.dataKey)===u})},selectTooltipPayloadSearcher=e=>e.options.tooltipPayloadSearcher,selectTooltipState=e=>e.tooltip;function ownKeys$c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$c(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$c(Object(n),!0).forEach(function(o){_defineProperty$d(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$c(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$d(e,t,n){return(t=_toPropertyKey$d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$d(e){var t=_toPrimitive$d(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$d(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function selectFinalData(e,t){return e??t}var combineTooltipPayload=(e,t,n,o,u,d,f)=>{if(!(t==null||d==null)){var{chartData:g,computedData:v,dataStartIndex:w,dataEndIndex:S}=n,R=[];return e.reduce((_,F)=>{var M,{dataDefinedOnItem:I,settings:N}=F,B=selectFinalData(I,g),H=Array.isArray(B)?getSliced(B,w,S):B,U=(M=N?.dataKey)!==null&&M!==void 0?M:o,$=N?.nameKey,z;if(o&&Array.isArray(H)&&!Array.isArray(H[0])&&f==="axis"?z=findEntryInArray(H,o,u):z=d(H,t,v,$),Array.isArray(z))z.forEach(J=>{var ie=_objectSpread$c(_objectSpread$c({},N),{},{name:J.name,unit:J.unit,color:void 0,fill:void 0});_.push(getTooltipEntry({tooltipEntrySettings:ie,dataKey:J.dataKey,payload:J.payload,value:getValueByDataKey(J.payload,J.dataKey),name:J.name}))});else{var j;_.push(getTooltipEntry({tooltipEntrySettings:N,dataKey:U,payload:z,value:getValueByDataKey(z,U),name:(j=getValueByDataKey(z,$))!==null&&j!==void 0?j:N?.name}))}return _},R)}},selectTooltipAxisRealScaleType=createSelector([selectTooltipAxis,selectChartLayout,selectHasBar,selectChartName,selectTooltipAxisType],combineRealScaleType),selectAllUnfilteredGraphicalItems=createSelector([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),selectTooltipAxisPredicate=createSelector([selectTooltipAxisType,selectTooltipAxisId],itemAxisPredicate),selectAllGraphicalItemsSettings=createSelector([selectAllUnfilteredGraphicalItems,selectTooltipAxis,selectTooltipAxisPredicate],combineGraphicalItemsSettings,{memoizeOptions:{resultEqualityCheck:arrayEqualityCheck}}),selectAllStackedGraphicalItemsSettings=createSelector([selectAllGraphicalItemsSettings],e=>e.filter(isStacked)),selectTooltipGraphicalItemsData=createSelector([selectAllGraphicalItemsSettings],combineGraphicalItemsData,{memoizeOptions:{resultEqualityCheck:arrayEqualityCheck}}),selectTooltipDisplayedData=createSelector([selectTooltipGraphicalItemsData,selectChartDataWithIndexes],combineDisplayedData),selectTooltipStackedData=createSelector([selectAllStackedGraphicalItemsSettings,selectChartDataWithIndexes,selectTooltipAxis],combineDisplayedStackedData),selectAllTooltipAppliedValues=createSelector([selectTooltipDisplayedData,selectTooltipAxis,selectAllGraphicalItemsSettings],combineAppliedValues),selectTooltipAxisDomainDefinition=createSelector([selectTooltipAxis],getDomainDefinition),selectTooltipDataOverflow=createSelector([selectTooltipAxis],e=>e.allowDataOverflow),selectTooltipDomainFromUserPreferences=createSelector([selectTooltipAxisDomainDefinition,selectTooltipDataOverflow],numericalDomainSpecifiedWithoutRequiringData),selectAllStackedGraphicalItems=createSelector([selectAllGraphicalItemsSettings],e=>e.filter(isStacked)),selectTooltipStackGroups=createSelector([selectTooltipStackedData,selectAllStackedGraphicalItems,selectStackOffsetType],combineStackGroups),selectTooltipDomainOfStackGroups=createSelector([selectTooltipStackGroups,selectChartDataWithIndexes,selectTooltipAxisType,selectTooltipDomainFromUserPreferences],combineDomainOfStackGroups),selectTooltipItemsSettingsExceptStacked=createSelector([selectAllGraphicalItemsSettings],filterGraphicalNotStackedItems),selectDomainOfAllAppliedNumericalValuesIncludingErrorValues=createSelector([selectTooltipDisplayedData,selectTooltipAxis,selectTooltipItemsSettingsExceptStacked,selectAllErrorBarSettings,selectTooltipAxisType],combineDomainOfAllAppliedNumericalValuesIncludingErrorValues,{memoizeOptions:{resultEqualityCheck:numberDomainEqualityCheck}}),selectReferenceDotsByTooltipAxis=createSelector([selectReferenceDots,selectTooltipAxisType,selectTooltipAxisId],filterReferenceElements),selectTooltipReferenceDotsDomain=createSelector([selectReferenceDotsByTooltipAxis,selectTooltipAxisType],combineDotsDomain),selectReferenceAreasByTooltipAxis=createSelector([selectReferenceAreas,selectTooltipAxisType,selectTooltipAxisId],filterReferenceElements),selectTooltipReferenceAreasDomain=createSelector([selectReferenceAreasByTooltipAxis,selectTooltipAxisType],combineAreasDomain),selectReferenceLinesByTooltipAxis=createSelector([selectReferenceLines,selectTooltipAxisType,selectTooltipAxisId],filterReferenceElements),selectTooltipReferenceLinesDomain=createSelector([selectReferenceLinesByTooltipAxis,selectTooltipAxisType],combineLinesDomain),selectTooltipReferenceElementsDomain=createSelector([selectTooltipReferenceDotsDomain,selectTooltipReferenceLinesDomain,selectTooltipReferenceAreasDomain],mergeDomains),selectTooltipNumericalDomain=createSelector([selectTooltipAxis,selectTooltipAxisDomainDefinition,selectTooltipDomainFromUserPreferences,selectTooltipDomainOfStackGroups,selectDomainOfAllAppliedNumericalValuesIncludingErrorValues,selectTooltipReferenceElementsDomain,selectChartLayout,selectTooltipAxisType],combineNumericalDomain),selectTooltipAxisDomain=createSelector([selectTooltipAxis,selectChartLayout,selectTooltipDisplayedData,selectAllTooltipAppliedValues,selectStackOffsetType,selectTooltipAxisType,selectTooltipNumericalDomain],combineAxisDomain),selectTooltipNiceTicks=createSelector([selectTooltipAxisDomain,selectTooltipAxis,selectTooltipAxisRealScaleType],combineNiceTicks),selectTooltipAxisDomainIncludingNiceTicks=createSelector([selectTooltipAxis,selectTooltipAxisDomain,selectTooltipNiceTicks,selectTooltipAxisType],combineAxisDomainWithNiceTicks),selectTooltipAxisRange=e=>{var t=selectTooltipAxisType(e),n=selectTooltipAxisId(e),o=!1;return selectAxisRange(e,t,n,o)},selectTooltipAxisRangeWithReverse=createSelector([selectTooltipAxis,selectTooltipAxisRange],combineAxisRangeWithReverse),selectTooltipAxisScale=createSelector([selectTooltipAxis,selectTooltipAxisRealScaleType,selectTooltipAxisDomainIncludingNiceTicks,selectTooltipAxisRangeWithReverse],combineScaleFunction),selectTooltipDuplicateDomain=createSelector([selectChartLayout,selectAllTooltipAppliedValues,selectTooltipAxis,selectTooltipAxisType],combineDuplicateDomain),selectTooltipCategoricalDomain=createSelector([selectChartLayout,selectAllTooltipAppliedValues,selectTooltipAxis,selectTooltipAxisType],combineCategoricalDomain),combineTicksOfTooltipAxis=(e,t,n,o,u,d,f,g)=>{if(t){var{type:v}=t,w=isCategoricalAxis(e,g);if(o){var S=n==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,R=v==="category"&&o.bandwidth?o.bandwidth()/S:0;return R=g==="angleAxis"&&u!=null&&u?.length>=2?mathSign(u[0]-u[1])*2*R:R,w&&f?f.map((_,F)=>({coordinate:o(_)+R,value:_,index:F,offset:R})):o.domain().map((_,F)=>({coordinate:o(_)+R,value:d?d[_]:_,index:F,offset:R}))}}},selectTooltipAxisTicks=createSelector([selectChartLayout,selectTooltipAxis,selectTooltipAxisRealScaleType,selectTooltipAxisScale,selectTooltipAxisRange,selectTooltipDuplicateDomain,selectTooltipCategoricalDomain,selectTooltipAxisType],combineTicksOfTooltipAxis),selectTooltipEventType=createSelector([selectDefaultTooltipEventType,selectValidateTooltipEventTypes,selectTooltipSettings],(e,t,n)=>combineTooltipEventType(n.shared,e,t)),selectTooltipTrigger=e=>e.tooltip.settings.trigger,selectDefaultIndex=e=>e.tooltip.settings.defaultIndex,selectTooltipInteractionState$1=createSelector([selectTooltipState,selectTooltipEventType,selectTooltipTrigger,selectDefaultIndex],combineTooltipInteractionState),selectActiveTooltipIndex=createSelector([selectTooltipInteractionState$1,selectTooltipDisplayedData],combineActiveTooltipIndex),selectActiveLabel$1=createSelector([selectTooltipAxisTicks,selectActiveTooltipIndex],combineActiveLabel),selectActiveTooltipDataKey=createSelector([selectTooltipInteractionState$1],e=>{if(e)return e.dataKey}),selectTooltipPayloadConfigurations$1=createSelector([selectTooltipState,selectTooltipEventType,selectTooltipTrigger,selectDefaultIndex],combineTooltipPayloadConfigurations),selectTooltipCoordinateForDefaultIndex=createSelector([selectChartWidth,selectChartHeight,selectChartLayout,selectChartOffsetInternal,selectTooltipAxisTicks,selectDefaultIndex,selectTooltipPayloadConfigurations$1,selectTooltipPayloadSearcher],combineCoordinateForDefaultIndex),selectActiveTooltipCoordinate=createSelector([selectTooltipInteractionState$1,selectTooltipCoordinateForDefaultIndex],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),selectIsTooltipActive$1=createSelector([selectTooltipInteractionState$1],e=>e.active),selectActiveTooltipPayload=createSelector([selectTooltipPayloadConfigurations$1,selectActiveTooltipIndex,selectChartDataWithIndexes,selectTooltipAxisDataKey,selectActiveLabel$1,selectTooltipPayloadSearcher,selectTooltipEventType],combineTooltipPayload);createSelector([selectActiveTooltipPayload],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function ownKeys$b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$b(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$b(Object(n),!0).forEach(function(o){_defineProperty$c(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$b(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$c(e,t,n){return(t=_toPropertyKey$c(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$c(e){var t=_toPrimitive$c(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$c(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var useTooltipAxis=()=>useAppSelector(selectTooltipAxis),useTooltipAxisBandSize=()=>{var e=useTooltipAxis(),t=useAppSelector(selectTooltipAxisTicks),n=useAppSelector(selectTooltipAxisScale);return getBandSizeOfAxis(_objectSpread$b(_objectSpread$b({},e),{},{scale:n}),t)},useChartName=()=>useAppSelector(selectChartName),pickTooltipEventType=(e,t)=>t,pickTrigger=(e,t,n)=>n,pickDefaultIndex=(e,t,n,o)=>o,selectOrderedTooltipTicks=createSelector(selectTooltipAxisTicks,e=>sortBy(e,t=>t.coordinate)),selectTooltipInteractionState=createSelector([selectTooltipState,pickTooltipEventType,pickTrigger,pickDefaultIndex],combineTooltipInteractionState),selectActiveIndex=createSelector([selectTooltipInteractionState,selectTooltipDisplayedData],combineActiveTooltipIndex),selectTooltipDataKey=(e,t,n)=>{if(t!=null){var o=selectTooltipState(e);return t==="axis"?n==="hover"?o.axisInteraction.hover.dataKey:o.axisInteraction.click.dataKey:n==="hover"?o.itemInteraction.hover.dataKey:o.itemInteraction.click.dataKey}},selectTooltipPayloadConfigurations=createSelector([selectTooltipState,pickTooltipEventType,pickTrigger,pickDefaultIndex],combineTooltipPayloadConfigurations),selectCoordinateForDefaultIndex=createSelector([selectChartWidth,selectChartHeight,selectChartLayout,selectChartOffsetInternal,selectTooltipAxisTicks,pickDefaultIndex,selectTooltipPayloadConfigurations,selectTooltipPayloadSearcher],combineCoordinateForDefaultIndex),selectActiveCoordinate=createSelector([selectTooltipInteractionState,selectCoordinateForDefaultIndex],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),selectActiveLabel=createSelector(selectTooltipAxisTicks,selectActiveIndex,combineActiveLabel),selectTooltipPayload=createSelector([selectTooltipPayloadConfigurations,selectActiveIndex,selectChartDataWithIndexes,selectTooltipAxisDataKey,selectActiveLabel,selectTooltipPayloadSearcher,pickTooltipEventType],combineTooltipPayload),selectIsTooltipActive=createSelector([selectTooltipInteractionState],e=>({isActive:e.active,activeIndex:e.index})),combineActiveProps=(e,t,n,o,u,d,f,g)=>{if(!(!e||!t||!o||!u||!d)){var v=inRange(e.chartX,e.chartY,t,n,g);if(v){var w=calculateTooltipPos(v,t),S=calculateActiveTickIndex(w,f,d,o,u),R=getActiveCoordinate(t,d,S,v);return{activeIndex:String(S),activeCoordinate:R}}}};function _extends$8(){return _extends$8=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$8.apply(null,arguments)}function ownKeys$a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$a(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$a(Object(n),!0).forEach(function(o){_defineProperty$b(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$a(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$b(e,t,n){return(t=_toPropertyKey$b(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$b(e){var t=_toPrimitive$b(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$b(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CursorInternal(e){var{coordinate:t,payload:n,index:o,offset:u,tooltipAxisBandSize:d,layout:f,cursor:g,tooltipEventType:v,chartName:w}=e,S=t,R=n,_=o;if(!g||!S||w!=="ScatterChart"&&v!=="axis")return null;var F,M;if(w==="ScatterChart")F=S,M=Cross;else if(w==="BarChart")F=getCursorRectangle(f,S,u,d),M=Rectangle;else if(f==="radial"){var{cx:I,cy:N,radius:B,startAngle:H,endAngle:U}=getRadialCursorPoints(S);F={cx:I,cy:N,startAngle:H,endAngle:U,innerRadius:B,outerRadius:B},M=Sector}else F={points:getCursorPoints(f,S,u)},M=Curve;var $=typeof g=="object"&&"className"in g?g.className:void 0,z=_objectSpread$a(_objectSpread$a(_objectSpread$a(_objectSpread$a({stroke:"#ccc",pointerEvents:"none"},u),F),svgPropertiesNoEventsFromUnknown(g)),{},{payload:R,payloadIndex:_,className:clsx("recharts-tooltip-cursor",$)});return reactExports.isValidElement(g)?reactExports.cloneElement(g,z):reactExports.createElement(M,z)}function Cursor(e){var t=useTooltipAxisBandSize(),n=useOffsetInternal(),o=useChartLayout(),u=useChartName();return reactExports.createElement(CursorInternal,_extends$8({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:o,tooltipAxisBandSize:t,chartName:u}))}var TooltipPortalContext=reactExports.createContext(null),useTooltipPortal=()=>reactExports.useContext(TooltipPortalContext),eventemitter3={exports:{}},hasRequiredEventemitter3;function requireEventemitter3(){return hasRequiredEventemitter3||(hasRequiredEventemitter3=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(n=!1));function u(v,w,S){this.fn=v,this.context=w,this.once=S||!1}function d(v,w,S,R,_){if(typeof S!="function")throw new TypeError("The listener must be a function");var F=new u(S,R||v,_),M=n?n+w:w;return v._events[M]?v._events[M].fn?v._events[M]=[v._events[M],F]:v._events[M].push(F):(v._events[M]=F,v._eventsCount++),v}function f(v,w){--v._eventsCount===0?v._events=new o:delete v._events[w]}function g(){this._events=new o,this._eventsCount=0}g.prototype.eventNames=function(){var w=[],S,R;if(this._eventsCount===0)return w;for(R in S=this._events)t.call(S,R)&&w.push(n?R.slice(1):R);return Object.getOwnPropertySymbols?w.concat(Object.getOwnPropertySymbols(S)):w},g.prototype.listeners=function(w){var S=n?n+w:w,R=this._events[S];if(!R)return[];if(R.fn)return[R.fn];for(var _=0,F=R.length,M=new Array(F);_<F;_++)M[_]=R[_].fn;return M},g.prototype.listenerCount=function(w){var S=n?n+w:w,R=this._events[S];return R?R.fn?1:R.length:0},g.prototype.emit=function(w,S,R,_,F,M){var I=n?n+w:w;if(!this._events[I])return!1;var N=this._events[I],B=arguments.length,H,U;if(N.fn){switch(N.once&&this.removeListener(w,N.fn,void 0,!0),B){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,S),!0;case 3:return N.fn.call(N.context,S,R),!0;case 4:return N.fn.call(N.context,S,R,_),!0;case 5:return N.fn.call(N.context,S,R,_,F),!0;case 6:return N.fn.call(N.context,S,R,_,F,M),!0}for(U=1,H=new Array(B-1);U<B;U++)H[U-1]=arguments[U];N.fn.apply(N.context,H)}else{var $=N.length,z;for(U=0;U<$;U++)switch(N[U].once&&this.removeListener(w,N[U].fn,void 0,!0),B){case 1:N[U].fn.call(N[U].context);break;case 2:N[U].fn.call(N[U].context,S);break;case 3:N[U].fn.call(N[U].context,S,R);break;case 4:N[U].fn.call(N[U].context,S,R,_);break;default:if(!H)for(z=1,H=new Array(B-1);z<B;z++)H[z-1]=arguments[z];N[U].fn.apply(N[U].context,H)}}return!0},g.prototype.on=function(w,S,R){return d(this,w,S,R,!1)},g.prototype.once=function(w,S,R){return d(this,w,S,R,!0)},g.prototype.removeListener=function(w,S,R,_){var F=n?n+w:w;if(!this._events[F])return this;if(!S)return f(this,F),this;var M=this._events[F];if(M.fn)M.fn===S&&(!_||M.once)&&(!R||M.context===R)&&f(this,F);else{for(var I=0,N=[],B=M.length;I<B;I++)(M[I].fn!==S||_&&!M[I].once||R&&M[I].context!==R)&&N.push(M[I]);N.length?this._events[F]=N.length===1?N[0]:N:f(this,F)}return this},g.prototype.removeAllListeners=function(w){var S;return w?(S=n?n+w:w,this._events[S]&&f(this,S)):(this._events=new o,this._eventsCount=0),this},g.prototype.off=g.prototype.removeListener,g.prototype.addListener=g.prototype.on,g.prefixed=n,g.EventEmitter=g,e.exports=g})(eventemitter3)),eventemitter3.exports}var eventemitter3Exports=requireEventemitter3();const EventEmitter=getDefaultExportFromCjs(eventemitter3Exports);var eventCenter=new EventEmitter,TOOLTIP_SYNC_EVENT="recharts.syncEvent.tooltip",BRUSH_SYNC_EVENT="recharts.syncEvent.brush";function arrayTooltipSearcher(e,t){if(t){var n=Number.parseInt(t,10);if(!isNan(n))return e?.[n]}}var initialState$7={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},optionsSlice=createSlice({name:"options",initialState:initialState$7,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),optionsReducer=optionsSlice.reducer,{createEventEmitter}=optionsSlice.actions;function selectSynchronisedTooltipState(e){return e.tooltip.syncInteraction}var initialChartDataState={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},chartDataSlice=createSlice({name:"chartData",initialState:initialChartDataState,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:o}=t.payload;n!=null&&(e.dataStartIndex=n),o!=null&&(e.dataEndIndex=o)}}}),{setChartData,setDataStartEndIndexes,setComputedData}=chartDataSlice.actions,chartDataReducer=chartDataSlice.reducer,_excluded$8=["x","y"];function ownKeys$9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$9(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$9(Object(n),!0).forEach(function(o){_defineProperty$a(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$9(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$a(e,t,n){return(t=_toPropertyKey$a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$a(e){var t=_toPrimitive$a(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$a(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _objectWithoutProperties$8(e,t){if(e==null)return{};var n,o,u=_objectWithoutPropertiesLoose$8(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(o=0;o<d.length;o++)n=d[o],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(u[n]=e[n])}return u}function _objectWithoutPropertiesLoose$8(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;n[o]=e[o]}return n}var noop$3=()=>{};function useTooltipSyncEventsListener(){var e=useAppSelector(selectSyncId),t=useAppSelector(selectEventEmitter),n=useAppDispatch(),o=useAppSelector(selectSyncMethod),u=useAppSelector(selectTooltipAxisTicks),d=useChartLayout(),f=useViewBox(),g=useAppSelector(v=>v.rootProps.className);reactExports.useEffect(()=>{if(e==null)return noop$3;var v=(w,S,R)=>{if(t!==R&&e===w){if(o==="index"){var _;if(f&&S!==null&&S!==void 0&&(_=S.payload)!==null&&_!==void 0&&_.coordinate&&S.payload.sourceViewBox){var F=S.payload.coordinate,{x:M,y:I}=F,N=_objectWithoutProperties$8(F,_excluded$8),{x:B,y:H,width:U,height:$}=S.payload.sourceViewBox,z=_objectSpread$9(_objectSpread$9({},N),{},{x:f.x+(U?(M-B)/U:0)*f.width,y:f.y+($?(I-H)/$:0)*f.height});n(_objectSpread$9(_objectSpread$9({},S),{},{payload:_objectSpread$9(_objectSpread$9({},S.payload),{},{coordinate:z})}))}else n(S);return}if(u!=null){var j;if(typeof o=="function"){var J={activeTooltipIndex:S.payload.index==null?void 0:Number(S.payload.index),isTooltipActive:S.payload.active,activeIndex:S.payload.index==null?void 0:Number(S.payload.index),activeLabel:S.payload.label,activeDataKey:S.payload.dataKey,activeCoordinate:S.payload.coordinate},ie=o(u,J);j=u[ie]}else o==="value"&&(j=u.find(ae=>String(ae.value)===S.payload.label));var{coordinate:se}=S.payload;if(j==null||S.payload.active===!1||se==null||f==null){n(setSyncInteraction({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0}));return}var{x:fe,y:de}=se,Ce=Math.min(fe,f.x+f.width),be=Math.min(de,f.y+f.height),xe={x:d==="horizontal"?j.coordinate:Ce,y:d==="horizontal"?be:j.coordinate},Ee=setSyncInteraction({active:S.payload.active,coordinate:xe,dataKey:S.payload.dataKey,index:String(j.index),label:S.payload.label,sourceViewBox:S.payload.sourceViewBox});n(Ee)}}};return eventCenter.on(TOOLTIP_SYNC_EVENT,v),()=>{eventCenter.off(TOOLTIP_SYNC_EVENT,v)}},[g,n,t,e,o,u,d,f])}function useBrushSyncEventsListener(){var e=useAppSelector(selectSyncId),t=useAppSelector(selectEventEmitter),n=useAppDispatch();reactExports.useEffect(()=>{if(e==null)return noop$3;var o=(u,d,f)=>{t!==f&&e===u&&n(setDataStartEndIndexes(d))};return eventCenter.on(BRUSH_SYNC_EVENT,o),()=>{eventCenter.off(BRUSH_SYNC_EVENT,o)}},[n,t,e])}function useSynchronisedEventsFromOtherCharts(){var e=useAppDispatch();reactExports.useEffect(()=>{e(createEventEmitter())},[e]),useTooltipSyncEventsListener(),useBrushSyncEventsListener()}function useTooltipChartSynchronisation(e,t,n,o,u,d){var f=useAppSelector(F=>selectTooltipDataKey(F,e,t)),g=useAppSelector(selectEventEmitter),v=useAppSelector(selectSyncId),w=useAppSelector(selectSyncMethod),S=useAppSelector(selectSynchronisedTooltipState),R=S?.active,_=useViewBox();reactExports.useEffect(()=>{if(!R&&v!=null&&g!=null){var F=setSyncInteraction({active:d,coordinate:n,dataKey:f,index:u,label:typeof o=="number"?String(o):o,sourceViewBox:_});eventCenter.emit(TOOLTIP_SYNC_EVENT,v,F,g)}},[R,n,f,u,o,g,v,w,d,_])}function ownKeys$8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$8(Object(n),!0).forEach(function(o){_defineProperty$9(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$8(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$9(e,t,n){return(t=_toPropertyKey$9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$9(e){var t=_toPrimitive$9(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function defaultUniqBy(e){return e.dataKey}function renderContent(e,t){return reactExports.isValidElement(e)?reactExports.cloneElement(e,t):typeof e=="function"?reactExports.createElement(e,t):reactExports.createElement(DefaultTooltipContent,t)}var emptyPayload=[],defaultTooltipProps={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Global.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Tooltip(e){var t=resolveDefaultProps(e,defaultTooltipProps),{active:n,allowEscapeViewBox:o,animationDuration:u,animationEasing:d,content:f,filterNull:g,isAnimationActive:v,offset:w,payloadUniqBy:S,position:R,reverseDirection:_,useTranslate3d:F,wrapperStyle:M,cursor:I,shared:N,trigger:B,defaultIndex:H,portal:U,axisId:$}=t,z=useAppDispatch(),j=typeof H=="number"?String(H):H;reactExports.useEffect(()=>{z(setTooltipSettingsState({shared:N,trigger:B,axisId:$,active:n,defaultIndex:j}))},[z,N,B,$,n,j]);var J=useViewBox(),ie=useAccessibilityLayer(),se=useTooltipEventType(N),{activeIndex:fe,isActive:de}=useAppSelector(pe=>selectIsTooltipActive(pe,se,B,j)),Ce=useAppSelector(pe=>selectTooltipPayload(pe,se,B,j)),be=useAppSelector(pe=>selectActiveLabel(pe,se,B,j)),xe=useAppSelector(pe=>selectActiveCoordinate(pe,se,B,j)),Ee=Ce,ae=useTooltipPortal(),oe=n??de,[ee,Z]=useElementOffset([Ee,oe]),Q=se==="axis"?be:void 0;useTooltipChartSynchronisation(se,B,xe,Q,fe,oe);var K=U??ae;if(K==null)return null;var ne=Ee??emptyPayload;oe||(ne=emptyPayload),g&&ne.length&&(ne=getUniqPayload(Ee.filter(pe=>pe.value!=null&&(pe.hide!==!0||t.includeHidden)),S,defaultUniqBy));var ue=ne.length>0,ye=reactExports.createElement(TooltipBoundingBox,{allowEscapeViewBox:o,animationDuration:u,animationEasing:d,isAnimationActive:v,active:oe,coordinate:xe,hasPayload:ue,offset:w,position:R,reverseDirection:_,useTranslate3d:F,viewBox:J,wrapperStyle:M,lastBoundingBox:ee,innerRef:Z,hasPortalFromProps:!!U},renderContent(f,_objectSpread$8(_objectSpread$8({},t),{},{payload:ne,label:Q,active:oe,coordinate:xe,accessibilityLayer:ie})));return reactExports.createElement(reactExports.Fragment,null,reactDomExports.createPortal(ye,K),oe&&reactExports.createElement(Cursor,{cursor:I,tooltipEventType:se,coordinate:xe,payload:Ee,index:fe}))}var Cell=e=>null;Cell.displayName="Cell";function _defineProperty$8(e,t,n){return(t=_toPropertyKey$8(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$8(e){var t=_toPrimitive$8(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$8(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class LRUCache{constructor(t){_defineProperty$8(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var o=this.cache.keys().next().value;this.cache.delete(o)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function ownKeys$7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$7(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$7(Object(n),!0).forEach(function(o){_defineProperty$7(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$7(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$7(e,t,n){return(t=_toPropertyKey$7(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$7(e){var t=_toPrimitive$7(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$7(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var defaultConfig={cacheSize:2e3,enableCache:!0},currentConfig=_objectSpread$7({},defaultConfig),stringCache=new LRUCache(currentConfig.cacheSize),SPAN_STYLE={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},MEASUREMENT_SPAN_ID="recharts_measurement_span";function createCacheKey(e,t){var n=t.fontSize||"",o=t.fontFamily||"",u=t.fontWeight||"",d=t.fontStyle||"",f=t.letterSpacing||"",g=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(o,"|").concat(u,"|").concat(d,"|").concat(f,"|").concat(g)}var measureTextWithDOM=(e,t)=>{try{var n=document.getElementById(MEASUREMENT_SPAN_ID);n||(n=document.createElement("span"),n.setAttribute("id",MEASUREMENT_SPAN_ID),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,SPAN_STYLE,t),n.textContent="".concat(e);var o=n.getBoundingClientRect();return{width:o.width,height:o.height}}catch{return{width:0,height:0}}},getStringSize=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Global.isSsr)return{width:0,height:0};if(!currentConfig.enableCache)return measureTextWithDOM(t,n);var o=createCacheKey(t,n),u=stringCache.get(o);if(u)return u;var d=measureTextWithDOM(t,n);return stringCache.set(o,d),d},MULTIPLY_OR_DIVIDE_REGEX=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ADD_OR_SUBTRACT_REGEX=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,CSS_LENGTH_UNIT_REGEX=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,NUM_SPLIT_REGEX=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,CONVERSION_RATES={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},FIXED_CSS_LENGTH_UNITS=Object.keys(CONVERSION_RATES),STR_NAN="NaN";function convertToPx(e,t){return e*CONVERSION_RATES[t]}class DecimalCSS{static parse(t){var n,[,o,u]=(n=NUM_SPLIT_REGEX.exec(t))!==null&&n!==void 0?n:[];return new DecimalCSS(parseFloat(o),u??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,isNan(t)&&(this.unit=""),n!==""&&!CSS_LENGTH_UNIT_REGEX.test(n)&&(this.num=NaN,this.unit=""),FIXED_CSS_LENGTH_UNITS.includes(n)&&(this.num=convertToPx(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new DecimalCSS(NaN,""):new DecimalCSS(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new DecimalCSS(NaN,""):new DecimalCSS(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new DecimalCSS(NaN,""):new DecimalCSS(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new DecimalCSS(NaN,""):new DecimalCSS(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return isNan(this.num)}}function calculateArithmetic(e){if(e.includes(STR_NAN))return STR_NAN;for(var t=e;t.includes("*")||t.includes("/");){var n,[,o,u,d]=(n=MULTIPLY_OR_DIVIDE_REGEX.exec(t))!==null&&n!==void 0?n:[],f=DecimalCSS.parse(o??""),g=DecimalCSS.parse(d??""),v=u==="*"?f.multiply(g):f.divide(g);if(v.isNaN())return STR_NAN;t=t.replace(MULTIPLY_OR_DIVIDE_REGEX,v.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var w,[,S,R,_]=(w=ADD_OR_SUBTRACT_REGEX.exec(t))!==null&&w!==void 0?w:[],F=DecimalCSS.parse(S??""),M=DecimalCSS.parse(_??""),I=R==="+"?F.add(M):F.subtract(M);if(I.isNaN())return STR_NAN;t=t.replace(ADD_OR_SUBTRACT_REGEX,I.toString())}return t}var PARENTHESES_REGEX=/\(([^()]*)\)/;function calculateParentheses(e){for(var t=e,n;(n=PARENTHESES_REGEX.exec(t))!=null;){var[,o]=n;t=t.replace(PARENTHESES_REGEX,calculateArithmetic(o))}return t}function evaluateExpression(e){var t=e.replace(/\s+/g,"");return t=calculateParentheses(t),t=calculateArithmetic(t),t}function safeEvaluateExpression(e){try{return evaluateExpression(e)}catch{return STR_NAN}}function reduceCSSCalc(e){var t=safeEvaluateExpression(e.slice(5,-1));return t===STR_NAN?"":t}var _excluded$7=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],_excluded2$2=["dx","dy","angle","className","breakAll"];function _extends$7(){return _extends$7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$7.apply(null,arguments)}function _objectWithoutProperties$7(e,t){if(e==null)return{};var n,o,u=_objectWithoutPropertiesLoose$7(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(o=0;o<d.length;o++)n=d[o],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(u[n]=e[n])}return u}function _objectWithoutPropertiesLoose$7(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;n[o]=e[o]}return n}var BREAKING_SPACES=/[ \f\n\r\t\v\u2028\u2029]+/,calculateWordWidths=e=>{var{children:t,breakAll:n,style:o}=e;try{var u=[];isNullish$1(t)||(n?u=t.toString().split(""):u=t.toString().split(BREAKING_SPACES));var d=u.map(g=>({word:g,width:getStringSize(g,o).width})),f=n?0:getStringSize("",o).width;return{wordsWithComputedWidth:d,spaceWidth:f}}catch{return null}},calculateWordsByLines=(e,t,n,o,u)=>{var{maxLines:d,children:f,style:g,breakAll:v}=e,w=isNumber$1(d),S=f,R=function(){var de=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return de.reduce((Ce,be)=>{var{word:xe,width:Ee}=be,ae=Ce[Ce.length-1];if(ae&&(o==null||u||ae.width+Ee+n<Number(o)))ae.words.push(xe),ae.width+=Ee+n;else{var oe={words:[xe],width:Ee};Ce.push(oe)}return Ce},[])},_=R(t),F=fe=>fe.reduce((de,Ce)=>de.width>Ce.width?de:Ce);if(!w||u)return _;var M=_.length>d||F(_).width>Number(o);if(!M)return _;for(var I="",N=fe=>{var de=S.slice(0,fe),Ce=calculateWordWidths({breakAll:v,style:g,children:de+I}).wordsWithComputedWidth,be=R(Ce),xe=be.length>d||F(be).width>Number(o);return[xe,be]},B=0,H=S.length-1,U=0,$;B<=H&&U<=S.length-1;){var z=Math.floor((B+H)/2),j=z-1,[J,ie]=N(j),[se]=N(z);if(!J&&!se&&(B=z+1),J&&se&&(H=z-1),!J&&se){$=ie;break}U++}return $||_},getWordsWithoutCalculate=e=>{var t=isNullish$1(e)?[]:e.toString().split(BREAKING_SPACES);return[{words:t}]},getWordsByLines=e=>{var{width:t,scaleToFit:n,children:o,style:u,breakAll:d,maxLines:f}=e;if((t||n)&&!Global.isSsr){var g,v,w=calculateWordWidths({breakAll:d,children:o,style:u});if(w){var{wordsWithComputedWidth:S,spaceWidth:R}=w;g=S,v=R}else return getWordsWithoutCalculate(o);return calculateWordsByLines({breakAll:d,children:o,maxLines:f,style:u},g,v,t,n)}return getWordsWithoutCalculate(o)},DEFAULT_FILL="#808080",Text$2=reactExports.forwardRef((e,t)=>{var{x:n=0,y:o=0,lineHeight:u="1em",capHeight:d="0.71em",scaleToFit:f=!1,textAnchor:g="start",verticalAnchor:v="end",fill:w=DEFAULT_FILL}=e,S=_objectWithoutProperties$7(e,_excluded$7),R=reactExports.useMemo(()=>getWordsByLines({breakAll:S.breakAll,children:S.children,maxLines:S.maxLines,scaleToFit:f,style:S.style,width:S.width}),[S.breakAll,S.children,S.maxLines,f,S.style,S.width]),{dx:_,dy:F,angle:M,className:I,breakAll:N}=S,B=_objectWithoutProperties$7(S,_excluded2$2);if(!isNumOrStr(n)||!isNumOrStr(o)||R.length===0)return null;var H=n+(isNumber$1(_)?_:0),U=o+(isNumber$1(F)?F:0),$;switch(v){case"start":$=reduceCSSCalc("calc(".concat(d,")"));break;case"middle":$=reduceCSSCalc("calc(".concat((R.length-1)/2," * -").concat(u," + (").concat(d," / 2))"));break;default:$=reduceCSSCalc("calc(".concat(R.length-1," * -").concat(u,")"));break}var z=[];if(f){var j=R[0].width,{width:J}=S;z.push("scale(".concat(isNumber$1(J)?J/j:1,")"))}return M&&z.push("rotate(".concat(M,", ").concat(H,", ").concat(U,")")),z.length&&(B.transform=z.join(" ")),reactExports.createElement("text",_extends$7({},svgPropertiesAndEvents(B),{ref:t,x:H,y:U,className:clsx("recharts-text",I),textAnchor:g,fill:w.includes("url")?DEFAULT_FILL:w}),R.map((ie,se)=>{var fe=ie.words.join(N?"":" ");return reactExports.createElement("tspan",{x:H,dy:se===0?$:u,key:"".concat(fe,"-").concat(se)},fe)}))});Text$2.displayName="Text";var _excluded$6=["labelRef"];function _objectWithoutProperties$6(e,t){if(e==null)return{};var n,o,u=_objectWithoutPropertiesLoose$6(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(o=0;o<d.length;o++)n=d[o],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(u[n]=e[n])}return u}function _objectWithoutPropertiesLoose$6(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;n[o]=e[o]}return n}function ownKeys$6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$6(Object(n),!0).forEach(function(o){_defineProperty$6(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$6(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$6(e,t,n){return(t=_toPropertyKey$6(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$6(e){var t=_toPrimitive$6(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$6(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _extends$6(){return _extends$6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$6.apply(null,arguments)}var CartesianLabelContext=reactExports.createContext(null),useCartesianLabelContext=()=>{var e=reactExports.useContext(CartesianLabelContext),t=useViewBox();return e||t},PolarLabelContext=reactExports.createContext(null),usePolarLabelContext=()=>{var e=reactExports.useContext(PolarLabelContext),t=useAppSelector(selectPolarViewBox);return e||t},getLabel=e=>{var{value:t,formatter:n}=e,o=isNullish$1(e.children)?t:e.children;return typeof n=="function"?n(o):o},isLabelContentAFunction=e=>e!=null&&typeof e=="function",getDeltaAngle=(e,t)=>{var n=mathSign(t-e),o=Math.min(Math.abs(t-e),360);return n*o},renderRadialLabel=(e,t,n,o,u)=>{var{offset:d,className:f}=e,{cx:g,cy:v,innerRadius:w,outerRadius:S,startAngle:R,endAngle:_,clockWise:F}=u,M=(w+S)/2,I=getDeltaAngle(R,_),N=I>=0?1:-1,B,H;switch(t){case"insideStart":B=R+N*d,H=F;break;case"insideEnd":B=_-N*d,H=!F;break;case"end":B=_+N*d,H=F;break;default:throw new Error("Unsupported position ".concat(t))}H=I<=0?H:!H;var U=polarToCartesian(g,v,M,B),$=polarToCartesian(g,v,M,B+(H?1:-1)*359),z="M".concat(U.x,",").concat(U.y,`
    A`).concat(M,",").concat(M,",0,1,").concat(H?0:1,`,
    `).concat($.x,",").concat($.y),j=isNullish$1(e.id)?uniqueId("recharts-radial-line-"):e.id;return reactExports.createElement("text",_extends$6({},o,{dominantBaseline:"central",className:clsx("recharts-radial-bar-label",f)}),reactExports.createElement("defs",null,reactExports.createElement("path",{id:j,d:z})),reactExports.createElement("textPath",{xlinkHref:"#".concat(j)},n))},getAttrsOfPolarLabel=(e,t,n)=>{var{cx:o,cy:u,innerRadius:d,outerRadius:f,startAngle:g,endAngle:v}=e,w=(g+v)/2;if(n==="outside"){var{x:S,y:R}=polarToCartesian(o,u,f+t,w);return{x:S,y:R,textAnchor:S>=o?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:o,y:u,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:o,y:u,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:o,y:u,textAnchor:"middle",verticalAnchor:"end"};var _=(d+f)/2,{x:F,y:M}=polarToCartesian(o,u,_,w);return{x:F,y:M,textAnchor:"middle",verticalAnchor:"middle"}},isPolar=e=>"cx"in e&&isNumber$1(e.cx),getAttrsOfCartesianLabel=(e,t)=>{var{parentViewBox:n,offset:o,position:u}=e,d;n!=null&&!isPolar(n)&&(d=n);var{x:f,y:g,width:v,height:w}=t,S=w>=0?1:-1,R=S*o,_=S>0?"end":"start",F=S>0?"start":"end",M=v>=0?1:-1,I=M*o,N=M>0?"end":"start",B=M>0?"start":"end";if(u==="top"){var H={x:f+v/2,y:g-S*o,textAnchor:"middle",verticalAnchor:_};return _objectSpread$6(_objectSpread$6({},H),d?{height:Math.max(g-d.y,0),width:v}:{})}if(u==="bottom"){var U={x:f+v/2,y:g+w+R,textAnchor:"middle",verticalAnchor:F};return _objectSpread$6(_objectSpread$6({},U),d?{height:Math.max(d.y+d.height-(g+w),0),width:v}:{})}if(u==="left"){var $={x:f-I,y:g+w/2,textAnchor:N,verticalAnchor:"middle"};return _objectSpread$6(_objectSpread$6({},$),d?{width:Math.max($.x-d.x,0),height:w}:{})}if(u==="right"){var z={x:f+v+I,y:g+w/2,textAnchor:B,verticalAnchor:"middle"};return _objectSpread$6(_objectSpread$6({},z),d?{width:Math.max(d.x+d.width-z.x,0),height:w}:{})}var j=d?{width:v,height:w}:{};return u==="insideLeft"?_objectSpread$6({x:f+I,y:g+w/2,textAnchor:B,verticalAnchor:"middle"},j):u==="insideRight"?_objectSpread$6({x:f+v-I,y:g+w/2,textAnchor:N,verticalAnchor:"middle"},j):u==="insideTop"?_objectSpread$6({x:f+v/2,y:g+R,textAnchor:"middle",verticalAnchor:F},j):u==="insideBottom"?_objectSpread$6({x:f+v/2,y:g+w-R,textAnchor:"middle",verticalAnchor:_},j):u==="insideTopLeft"?_objectSpread$6({x:f+I,y:g+R,textAnchor:B,verticalAnchor:F},j):u==="insideTopRight"?_objectSpread$6({x:f+v-I,y:g+R,textAnchor:N,verticalAnchor:F},j):u==="insideBottomLeft"?_objectSpread$6({x:f+I,y:g+w-R,textAnchor:B,verticalAnchor:_},j):u==="insideBottomRight"?_objectSpread$6({x:f+v-I,y:g+w-R,textAnchor:N,verticalAnchor:_},j):u&&typeof u=="object"&&(isNumber$1(u.x)||isPercent(u.x))&&(isNumber$1(u.y)||isPercent(u.y))?_objectSpread$6({x:f+getPercentValue(u.x,v),y:g+getPercentValue(u.y,w),textAnchor:"end",verticalAnchor:"end"},j):_objectSpread$6({x:f+v/2,y:g+w/2,textAnchor:"middle",verticalAnchor:"middle"},j)},defaultLabelProps={offset:5};function Label$1(e){var t=resolveDefaultProps(e,defaultLabelProps),{viewBox:n,position:o,value:u,children:d,content:f,className:g="",textBreakAll:v,labelRef:w}=t,S=usePolarLabelContext(),R=useCartesianLabelContext(),_=o==="center"?R:S??R,F=n||_;if(!F||isNullish$1(u)&&isNullish$1(d)&&!reactExports.isValidElement(f)&&typeof f!="function")return null;var M=_objectSpread$6(_objectSpread$6({},t),{},{viewBox:F});if(reactExports.isValidElement(f)){var{labelRef:I}=M,N=_objectWithoutProperties$6(M,_excluded$6);return reactExports.cloneElement(f,N)}var B;if(typeof f=="function"){if(B=reactExports.createElement(f,M),reactExports.isValidElement(B))return B}else B=getLabel(t);var H=isPolar(F),U=svgPropertiesAndEvents(t);if(H&&(o==="insideStart"||o==="insideEnd"||o==="end"))return renderRadialLabel(t,o,B,U,F);var $=H?getAttrsOfPolarLabel(F,t.offset,t.position):getAttrsOfCartesianLabel(t,F);return reactExports.createElement(Text$2,_extends$6({ref:w,className:clsx("recharts-label",g)},U,$,{breakAll:v}),B)}Label$1.displayName="Label";var last$3={},last$2={},hasRequiredLast$2;function requireLast$2(){return hasRequiredLast$2||(hasRequiredLast$2=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(last$2)),last$2}var toArray$2={},hasRequiredToArray;function requireToArray(){return hasRequiredToArray||(hasRequiredToArray=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(toArray$2)),toArray$2}var hasRequiredLast$1;function requireLast$1(){return hasRequiredLast$1||(hasRequiredLast$1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=requireLast$2(),n=requireToArray(),o=requireIsArrayLike();function u(d){if(o.isArrayLike(d))return t.last(n.toArray(d))}e.last=u})(last$3)),last$3}var last$1,hasRequiredLast;function requireLast(){return hasRequiredLast||(hasRequiredLast=1,last$1=requireLast$1().last),last$1}var lastExports=requireLast();const last=getDefaultExportFromCjs(lastExports);var _excluded$5=["valueAccessor"],_excluded2$1=["dataKey","clockWise","id","textBreakAll"];function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$5.apply(null,arguments)}function _objectWithoutProperties$5(e,t){if(e==null)return{};var n,o,u=_objectWithoutPropertiesLoose$5(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(o=0;o<d.length;o++)n=d[o],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(u[n]=e[n])}return u}function _objectWithoutPropertiesLoose$5(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;n[o]=e[o]}return n}var defaultAccessor=e=>Array.isArray(e.value)?last(e.value):e.value,CartesianLabelListContext=reactExports.createContext(void 0);CartesianLabelListContext.Provider;var PolarLabelListContext=reactExports.createContext(void 0),PolarLabelListContextProvider=PolarLabelListContext.Provider;function useCartesianLabelListContext(){return reactExports.useContext(CartesianLabelListContext)}function usePolarLabelListContext(){return reactExports.useContext(PolarLabelListContext)}function LabelList(e){var{valueAccessor:t=defaultAccessor}=e,n=_objectWithoutProperties$5(e,_excluded$5),{dataKey:o,clockWise:u,id:d,textBreakAll:f}=n,g=_objectWithoutProperties$5(n,_excluded2$1),v=useCartesianLabelListContext(),w=usePolarLabelListContext(),S=v||w;return!S||!S.length?null:reactExports.createElement(Layer$2,{className:"recharts-label-list"},S.map((R,_)=>{var F,M=isNullish$1(o)?t(R,_):getValueByDataKey(R&&R.payload,o),I=isNullish$1(d)?{}:{id:"".concat(d,"-").concat(_)};return reactExports.createElement(Label$1,_extends$5({key:"label-".concat(_)},svgPropertiesAndEvents(R),g,I,{fill:(F=n.fill)!==null&&F!==void 0?F:R.fill,parentViewBox:R.parentViewBox,value:M,textBreakAll:f,viewBox:R.viewBox,index:_}))}))}LabelList.displayName="LabelList";function LabelListFromLabelProp(e){var{label:t}=e;return t?t===!0?reactExports.createElement(LabelList,{key:"labelList-implicit"}):reactExports.isValidElement(t)||isLabelContentAFunction(t)?reactExports.createElement(LabelList,{key:"labelList-implicit",content:t}):typeof t=="object"?reactExports.createElement(LabelList,_extends$5({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var selectUnfilteredPolarItems=e=>e.graphicalItems.polarItems,selectAxisPredicate=createSelector([pickAxisType,pickAxisId],itemAxisPredicate),selectPolarItemsSettings=createSelector([selectUnfilteredPolarItems,selectBaseAxis,selectAxisPredicate],combineGraphicalItemsSettings),selectPolarGraphicalItemsData=createSelector([selectPolarItemsSettings],combineGraphicalItemsData),selectPolarDisplayedData=createSelector([selectPolarGraphicalItemsData,selectChartDataAndAlwaysIgnoreIndexes],combineDisplayedData),selectPolarAppliedValues=createSelector([selectPolarDisplayedData,selectBaseAxis,selectPolarItemsSettings],combineAppliedValues);createSelector([selectPolarDisplayedData,selectBaseAxis,selectPolarItemsSettings],(e,t,n)=>n.length>0?e.flatMap(o=>n.flatMap(u=>{var d,f=getValueByDataKey(o,(d=t.dataKey)!==null&&d!==void 0?d:u.dataKey);return{value:f,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(o=>({value:getValueByDataKey(o,t.dataKey),errorDomain:[]})):e.map(o=>({value:o,errorDomain:[]})));var unsupportedInPolarChart=()=>{},selectDomainOfAllPolarAppliedNumericalValues=createSelector([selectPolarDisplayedData,selectBaseAxis,selectPolarItemsSettings,selectAllErrorBarSettings,pickAxisType],combineDomainOfAllAppliedNumericalValuesIncludingErrorValues),selectPolarNumericalDomain=createSelector([selectBaseAxis,selectDomainDefinition,selectDomainFromUserPreference,unsupportedInPolarChart,selectDomainOfAllPolarAppliedNumericalValues,unsupportedInPolarChart,selectChartLayout,pickAxisType],combineNumericalDomain),selectPolarAxisDomain=createSelector([selectBaseAxis,selectChartLayout,selectPolarDisplayedData,selectPolarAppliedValues,selectStackOffsetType,pickAxisType,selectPolarNumericalDomain],combineAxisDomain),selectPolarNiceTicks=createSelector([selectPolarAxisDomain,selectBaseAxis,selectRealScaleType],combineNiceTicks);createSelector([selectBaseAxis,selectPolarAxisDomain,selectPolarNiceTicks,pickAxisType],combineAxisDomainWithNiceTicks);var initialState$6={radiusAxis:{},angleAxis:{}},polarAxisSlice=createSlice({name:"polarAxis",initialState:initialState$6,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis,removeRadiusAxis,addAngleAxis,removeAngleAxis}=polarAxisSlice.actions,polarAxisReducer=polarAxisSlice.reducer;function ownKeys$5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$5(Object(n),!0).forEach(function(o){_defineProperty$5(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$5(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$5(e,t,n){return(t=_toPropertyKey$5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$5(e){var t=_toPrimitive$5(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$5(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pickId=(e,t)=>t,selectSynchronisedPieSettings=createSelector([selectUnfilteredPolarItems,pickId],(e,t)=>e.filter(n=>n.type==="pie").find(n=>n.id===t)),emptyArray=[],pickCells=(e,t,n)=>n?.length===0?emptyArray:n,selectDisplayedData=createSelector([selectChartDataAndAlwaysIgnoreIndexes,selectSynchronisedPieSettings,pickCells],(e,t,n)=>{var{chartData:o}=e;if(t!=null){var u;if(t?.data!=null&&t.data.length>0?u=t.data:u=o,(!u||!u.length)&&n!=null&&(u=n.map(d=>_objectSpread$5(_objectSpread$5({},t.presentationProps),d.props))),u!=null)return u}}),selectPieLegend=createSelector([selectDisplayedData,selectSynchronisedPieSettings,pickCells],(e,t,n)=>{if(!(e==null||t==null))return e.map((o,u)=>{var d,f=getValueByDataKey(o,t.nameKey,t.name),g;return n!=null&&(d=n[u])!==null&&d!==void 0&&(d=d.props)!==null&&d!==void 0&&d.fill?g=n[u].props.fill:typeof o=="object"&&o!=null&&"fill"in o?g=o.fill:g=t.fill,{value:getTooltipNameProp(f,t.dataKey),color:g,payload:o,type:t.legendType}})}),selectPieSectors=createSelector([selectDisplayedData,selectSynchronisedPieSettings,pickCells,selectChartOffsetInternal],(e,t,n,o)=>{if(!(t==null||e==null))return computePieSectors({offset:o,pieSettings:t,displayedData:e,cells:n})}),reactIs={exports:{}},reactIs_production={};var hasRequiredReactIs_production;function requireReactIs_production(){if(hasRequiredReactIs_production)return reactIs_production;hasRequiredReactIs_production=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),_=Symbol.for("react.view_transition"),F=Symbol.for("react.client.reference");function M(I){if(typeof I=="object"&&I!==null){var N=I.$$typeof;switch(N){case e:switch(I=I.type,I){case n:case u:case o:case v:case w:case _:return I;default:switch(I=I&&I.$$typeof,I){case f:case g:case R:case S:return I;case d:return I;default:return N}}case t:return N}}}return reactIs_production.ContextConsumer=d,reactIs_production.ContextProvider=f,reactIs_production.Element=e,reactIs_production.ForwardRef=g,reactIs_production.Fragment=n,reactIs_production.Lazy=R,reactIs_production.Memo=S,reactIs_production.Portal=t,reactIs_production.Profiler=u,reactIs_production.StrictMode=o,reactIs_production.Suspense=v,reactIs_production.SuspenseList=w,reactIs_production.isContextConsumer=function(I){return M(I)===d},reactIs_production.isContextProvider=function(I){return M(I)===f},reactIs_production.isElement=function(I){return typeof I=="object"&&I!==null&&I.$$typeof===e},reactIs_production.isForwardRef=function(I){return M(I)===g},reactIs_production.isFragment=function(I){return M(I)===n},reactIs_production.isLazy=function(I){return M(I)===R},reactIs_production.isMemo=function(I){return M(I)===S},reactIs_production.isPortal=function(I){return M(I)===t},reactIs_production.isProfiler=function(I){return M(I)===u},reactIs_production.isStrictMode=function(I){return M(I)===o},reactIs_production.isSuspense=function(I){return M(I)===v},reactIs_production.isSuspenseList=function(I){return M(I)===w},reactIs_production.isValidElementType=function(I){return typeof I=="string"||typeof I=="function"||I===n||I===u||I===o||I===v||I===w||typeof I=="object"&&I!==null&&(I.$$typeof===R||I.$$typeof===S||I.$$typeof===f||I.$$typeof===d||I.$$typeof===g||I.$$typeof===F||I.getModuleId!==void 0)},reactIs_production.typeOf=M,reactIs_production}var hasRequiredReactIs;function requireReactIs(){return hasRequiredReactIs||(hasRequiredReactIs=1,reactIs.exports=requireReactIs_production()),reactIs.exports}var reactIsExports=requireReactIs(),getDisplayName=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",lastChildren=null,lastResult=null,toArray$1=e=>{if(e===lastChildren&&Array.isArray(lastResult))return lastResult;var t=[];return reactExports.Children.forEach(e,n=>{isNullish$1(n)||(reactIsExports.isFragment(n)?t=t.concat(toArray$1(n.props.children)):t.push(n))}),lastResult=t,lastChildren=e,t};function findAllByType(e,t){var n=[],o=[];return Array.isArray(t)?o=t.map(u=>getDisplayName(u)):o=[getDisplayName(t)],toArray$1(e).forEach(u=>{var d=get(u,"type.displayName")||get(u,"type.name");o.indexOf(d)!==-1&&n.push(u)}),n}var isPlainObject$3={},hasRequiredIsPlainObject$1;function requireIsPlainObject$1(){return hasRequiredIsPlainObject$1||(hasRequiredIsPlainObject$1=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const u=n[Symbol.toStringTag];return u==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${u}]`}let o=n;for(;Object.getPrototypeOf(o)!==null;)o=Object.getPrototypeOf(o);return Object.getPrototypeOf(n)===o}e.isPlainObject=t})(isPlainObject$3)),isPlainObject$3}var isPlainObject$2,hasRequiredIsPlainObject;function requireIsPlainObject(){return hasRequiredIsPlainObject||(hasRequiredIsPlainObject=1,isPlainObject$2=requireIsPlainObject$1().isPlainObject),isPlainObject$2}var isPlainObjectExports=requireIsPlainObject();const isPlainObject$1=getDefaultExportFromCjs(isPlainObjectExports);function ownKeys$4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$4(Object(n),!0).forEach(function(o){_defineProperty$4(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$4(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$4(e,t,n){return(t=_toPropertyKey$4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$4(e){var t=_toPrimitive$4(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$4(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$4.apply(null,arguments)}var getTrapezoidPath=(e,t,n,o,u)=>{var d=n-o,f;return f="M ".concat(e,",").concat(t),f+="L ".concat(e+n,",").concat(t),f+="L ".concat(e+n-d/2,",").concat(t+u),f+="L ".concat(e+n-d/2-o,",").concat(t+u),f+="L ".concat(e,",").concat(t," Z"),f},defaultProps$2={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Trapezoid=e=>{var t=resolveDefaultProps(e,defaultProps$2),{x:n,y:o,upperWidth:u,lowerWidth:d,height:f,className:g}=t,{animationEasing:v,animationDuration:w,animationBegin:S,isUpdateAnimationActive:R}=t,_=reactExports.useRef(null),[F,M]=reactExports.useState(-1),I=reactExports.useRef(u),N=reactExports.useRef(d),B=reactExports.useRef(f),H=reactExports.useRef(n),U=reactExports.useRef(o),$=useAnimationId(e,"trapezoid-");if(reactExports.useEffect(()=>{if(_.current&&_.current.getTotalLength)try{var xe=_.current.getTotalLength();xe&&M(xe)}catch{}},[]),n!==+n||o!==+o||u!==+u||d!==+d||f!==+f||u===0&&d===0||f===0)return null;var z=clsx("recharts-trapezoid",g);if(!R)return reactExports.createElement("g",null,reactExports.createElement("path",_extends$4({},svgPropertiesAndEvents(t),{className:z,d:getTrapezoidPath(n,o,u,d,f)})));var j=I.current,J=N.current,ie=B.current,se=H.current,fe=U.current,de="0px ".concat(F===-1?1:F,"px"),Ce="".concat(F,"px 0px"),be=getTransitionVal(["strokeDasharray"],w,v);return reactExports.createElement(JavascriptAnimate,{animationId:$,key:$,canBegin:F>0,duration:w,easing:v,isActive:R,begin:S},xe=>{var Ee=interpolate$2(j,u,xe),ae=interpolate$2(J,d,xe),oe=interpolate$2(ie,f,xe),ee=interpolate$2(se,n,xe),Z=interpolate$2(fe,o,xe);_.current&&(I.current=Ee,N.current=ae,B.current=oe,H.current=ee,U.current=Z);var Q=xe>0?{transition:be,strokeDasharray:Ce}:{strokeDasharray:de};return reactExports.createElement("path",_extends$4({},svgPropertiesAndEvents(t),{className:z,d:getTrapezoidPath(ee,Z,Ee,ae,oe),ref:_,style:_objectSpread$4(_objectSpread$4({},Q),t.style)}))})},_excluded$4=["option","shapeType","propTransformer","activeClassName","isActive"];function _objectWithoutProperties$4(e,t){if(e==null)return{};var n,o,u=_objectWithoutPropertiesLoose$4(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(o=0;o<d.length;o++)n=d[o],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(u[n]=e[n])}return u}function _objectWithoutPropertiesLoose$4(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;n[o]=e[o]}return n}function ownKeys$3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$3(Object(n),!0).forEach(function(o){_defineProperty$3(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$3(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$3(e,t,n){return(t=_toPropertyKey$3(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$3(e){var t=_toPrimitive$3(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$3(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function defaultPropTransformer(e,t){return _objectSpread$3(_objectSpread$3({},t),e)}function isSymbolsProps(e,t){return e==="symbols"}function ShapeSelector(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return reactExports.createElement(Rectangle,n);case"trapezoid":return reactExports.createElement(Trapezoid,n);case"sector":return reactExports.createElement(Sector,n);case"symbols":if(isSymbolsProps(t))return reactExports.createElement(Symbols,n);break;default:return null}}function getPropsFromShapeOption(e){return reactExports.isValidElement(e)?e.props:e}function Shape$1(e){var{option:t,shapeType:n,propTransformer:o=defaultPropTransformer,activeClassName:u="recharts-active-shape",isActive:d}=e,f=_objectWithoutProperties$4(e,_excluded$4),g;if(reactExports.isValidElement(t))g=reactExports.cloneElement(t,_objectSpread$3(_objectSpread$3({},f),getPropsFromShapeOption(t)));else if(typeof t=="function")g=t(f);else if(isPlainObject$1(t)&&typeof t!="boolean"){var v=o(t,f);g=reactExports.createElement(ShapeSelector,{shapeType:n,elementProps:v})}else{var w=f;g=reactExports.createElement(ShapeSelector,{shapeType:n,elementProps:w})}return d?reactExports.createElement(Layer$2,{className:u},g):g}var useMouseEnterItemDispatch=(e,t)=>{var n=useAppDispatch();return(o,u)=>d=>{e?.(o,u,d),n(setActiveMouseOverItemIndex({activeIndex:String(u),activeDataKey:t,activeCoordinate:o.tooltipPosition}))}},useMouseLeaveItemDispatch=e=>{var t=useAppDispatch();return(n,o)=>u=>{e?.(n,o,u),t(mouseLeaveItem())}},useMouseClickItemDispatch=(e,t)=>{var n=useAppDispatch();return(o,u)=>d=>{e?.(o,u,d),n(setActiveClickItemIndex({activeIndex:String(u),activeDataKey:t,activeCoordinate:o.tooltipPosition}))}};function SetTooltipEntrySettings(e){var{fn:t,args:n}=e,o=useAppDispatch(),u=useIsPanorama();return reactExports.useLayoutEffect(()=>{if(!u){var d=t(n);return o(addTooltipEntrySettings(d)),()=>{o(removeTooltipEntrySettings(d))}}},[t,n,o,u]),null}var noop$2=()=>{};function SetPolarLegendPayload(e){var{legendPayload:t}=e,n=useAppDispatch(),o=useAppSelector(selectChartLayout);return reactExports.useLayoutEffect(()=>o!=="centric"&&o!=="radial"?noop$2:(n(addLegendPayload(t)),()=>{n(removeLegendPayload(t))}),[n,o,t]),null}var _ref,useIdFallback=()=>{var[e]=reactExports.useState(()=>uniqueId("uid-"));return e},useId=(_ref=React$1.useId)!==null&&_ref!==void 0?_ref:useIdFallback;function useUniqueId(e,t){var n=useId();return t||(e?"".concat(e,"-").concat(n):n)}var GraphicalItemIdContext=reactExports.createContext(void 0),RegisterGraphicalItemId=e=>{var{id:t,type:n,children:o}=e,u=useUniqueId("recharts-".concat(n),t);return reactExports.createElement(GraphicalItemIdContext.Provider,{value:u},o(u))},initialState$5={cartesianItems:[],polarItems:[]},graphicalItemsSlice=createSlice({name:"graphicalItems",initialState:initialState$5,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:prepareAutoBatched()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:n,next:o}=t.payload,u=current(e).cartesianItems.indexOf(n);u>-1&&(e.cartesianItems[u]=o)},prepare:prepareAutoBatched()},removeCartesianGraphicalItem:{reducer(e,t){var n=current(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},prepare:prepareAutoBatched()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:prepareAutoBatched()},removePolarGraphicalItem:{reducer(e,t){var n=current(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)},prepare:prepareAutoBatched()}}}),{addCartesianGraphicalItem,replaceCartesianGraphicalItem,removeCartesianGraphicalItem,addPolarGraphicalItem,removePolarGraphicalItem}=graphicalItemsSlice.actions,graphicalItemsReducer=graphicalItemsSlice.reducer;function SetPolarGraphicalItem(e){var t=useAppDispatch();return reactExports.useLayoutEffect(()=>(t(addPolarGraphicalItem(e)),()=>{t(removePolarGraphicalItem(e))}),[t,e]),null}var _excluded$3=["onMouseEnter","onClick","onMouseLeave"],_excluded2=["id"],_excluded3=["id"];function _objectWithoutProperties$3(e,t){if(e==null)return{};var n,o,u=_objectWithoutPropertiesLoose$3(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(o=0;o<d.length;o++)n=d[o],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(u[n]=e[n])}return u}function _objectWithoutPropertiesLoose$3(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;n[o]=e[o]}return n}function ownKeys$2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$2(Object(n),!0).forEach(function(o){_defineProperty$2(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$2(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$2(e,t,n){return(t=_toPropertyKey$2(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$2(e){var t=_toPrimitive$2(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$2(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$3.apply(null,arguments)}function SetPiePayloadLegend(e){var t=reactExports.useMemo(()=>findAllByType(e.children,Cell),[e.children]),n=useAppSelector(o=>selectPieLegend(o,e.id,t));return n==null?null:reactExports.createElement(SetPolarLegendPayload,{legendPayload:n})}function getTooltipEntrySettings(e){var{dataKey:t,nameKey:n,sectors:o,stroke:u,strokeWidth:d,fill:f,name:g,hide:v,tooltipType:w}=e;return{dataDefinedOnItem:o.map(S=>S.tooltipPayload),positions:o.map(S=>S.tooltipPosition),settings:{stroke:u,strokeWidth:d,fill:f,dataKey:t,nameKey:n,name:getTooltipNameProp(g,t),hide:v,type:w,color:f,unit:""}}}var getTextAnchor=(e,t)=>e>t?"start":e<t?"end":"middle",getOuterRadius=(e,t,n)=>getPercentValue(typeof t=="function"?t(e):t,n,n*.8),parseCoordinateOfPie=(e,t,n)=>{var{top:o,left:u,width:d,height:f}=t,g=getMaxRadius(d,f),v=u+getPercentValue(e.cx,d,d/2),w=o+getPercentValue(e.cy,f,f/2),S=getPercentValue(e.innerRadius,g,0),R=getOuterRadius(n,e.outerRadius,g),_=e.maxRadius||Math.sqrt(d*d+f*f)/2;return{cx:v,cy:w,innerRadius:S,outerRadius:R,maxRadius:_}},parseDeltaAngle=(e,t)=>{var n=mathSign(t-e),o=Math.min(Math.abs(t-e),360);return n*o};function getClassNamePropertyIfExists(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var renderLabelLineItem=(e,t)=>{if(reactExports.isValidElement(e))return reactExports.cloneElement(e,t);if(typeof e=="function")return e(t);var n=clsx("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return reactExports.createElement(Curve,_extends$3({},t,{type:"linear",className:n}))},renderLabelItem=(e,t,n)=>{if(reactExports.isValidElement(e))return reactExports.cloneElement(e,t);var o=n;if(typeof e=="function"&&(o=e(t),reactExports.isValidElement(o)))return o;var u=clsx("recharts-pie-label-text",getClassNamePropertyIfExists(e));return reactExports.createElement(Text$2,_extends$3({},t,{alignmentBaseline:"middle",className:u}),o)};function PieLabels(e){var{sectors:t,props:n,showLabels:o}=e,{label:u,labelLine:d,dataKey:f}=n;if(!o||!u||!t)return null;var g=svgPropertiesNoEvents(n),v=svgPropertiesNoEventsFromUnknown(u),w=svgPropertiesNoEventsFromUnknown(d),S=typeof u=="object"&&"offsetRadius"in u&&typeof u.offsetRadius=="number"&&u.offsetRadius||20,R=t.map((_,F)=>{var M=(_.startAngle+_.endAngle)/2,I=polarToCartesian(_.cx,_.cy,_.outerRadius+S,M),N=_objectSpread$2(_objectSpread$2(_objectSpread$2(_objectSpread$2({},g),_),{},{stroke:"none"},v),{},{index:F,textAnchor:getTextAnchor(I.x,_.cx)},I),B=_objectSpread$2(_objectSpread$2(_objectSpread$2(_objectSpread$2({},g),_),{},{fill:"none",stroke:_.fill},w),{},{index:F,points:[polarToCartesian(_.cx,_.cy,_.outerRadius,M),I],key:"line"});return reactExports.createElement(Layer$2,{key:"label-".concat(_.startAngle,"-").concat(_.endAngle,"-").concat(_.midAngle,"-").concat(F)},d&&renderLabelLineItem(d,B),renderLabelItem(u,N,getValueByDataKey(_,f)))});return reactExports.createElement(Layer$2,{className:"recharts-pie-labels"},R)}function PieLabelList(e){var{sectors:t,props:n,showLabels:o}=e,{label:u}=n;return typeof u=="object"&&u!=null&&"position"in u?reactExports.createElement(LabelListFromLabelProp,{label:u}):reactExports.createElement(PieLabels,{sectors:t,props:n,showLabels:o})}function PieSectors(e){var{sectors:t,activeShape:n,inactiveShape:o,allOtherPieProps:u}=e,d=useAppSelector(selectActiveTooltipIndex),{onMouseEnter:f,onClick:g,onMouseLeave:v}=u,w=_objectWithoutProperties$3(u,_excluded$3),S=useMouseEnterItemDispatch(f,u.dataKey),R=useMouseLeaveItemDispatch(v),_=useMouseClickItemDispatch(g,u.dataKey);return t==null||t.length===0?null:reactExports.createElement(reactExports.Fragment,null,t.map((F,M)=>{if(F?.startAngle===0&&F?.endAngle===0&&t.length!==1)return null;var I=n&&String(M)===d,N=d?o:null,B=I?n:N,H=_objectSpread$2(_objectSpread$2({},F),{},{stroke:F.stroke,tabIndex:-1,[DATA_ITEM_INDEX_ATTRIBUTE_NAME]:M,[DATA_ITEM_DATAKEY_ATTRIBUTE_NAME]:u.dataKey});return reactExports.createElement(Layer$2,_extends$3({key:"sector-".concat(F?.startAngle,"-").concat(F?.endAngle,"-").concat(F.midAngle,"-").concat(M),tabIndex:-1,className:"recharts-pie-sector"},adaptEventsOfChild(w,F,M),{onMouseEnter:S(F,M),onMouseLeave:R(F,M),onClick:_(F,M)}),reactExports.createElement(Shape$1,_extends$3({option:B,isActive:I,shapeType:"sector"},H)))}))}function computePieSectors(e){var t,{pieSettings:n,displayedData:o,cells:u,offset:d}=e,{cornerRadius:f,startAngle:g,endAngle:v,dataKey:w,nameKey:S,tooltipType:R}=n,_=Math.abs(n.minAngle),F=parseDeltaAngle(g,v),M=Math.abs(F),I=o.length<=1?0:(t=n.paddingAngle)!==null&&t!==void 0?t:0,N=o.filter(j=>getValueByDataKey(j,w,0)!==0).length,B=(M>=360?N:N-1)*I,H=M-N*_-B,U=o.reduce((j,J)=>{var ie=getValueByDataKey(J,w,0);return j+(isNumber$1(ie)?ie:0)},0),$;if(U>0){var z;$=o.map((j,J)=>{var ie=getValueByDataKey(j,w,0),se=getValueByDataKey(j,S,J),fe=parseCoordinateOfPie(n,d,j),de=(isNumber$1(ie)?ie:0)/U,Ce,be=_objectSpread$2(_objectSpread$2({},j),u&&u[J]&&u[J].props);J?Ce=z.endAngle+mathSign(F)*I*(ie!==0?1:0):Ce=g;var xe=Ce+mathSign(F)*((ie!==0?_:0)+de*H),Ee=(Ce+xe)/2,ae=(fe.innerRadius+fe.outerRadius)/2,oe=[{name:se,value:ie,payload:be,dataKey:w,type:R}],ee=polarToCartesian(fe.cx,fe.cy,ae,Ee);return z=_objectSpread$2(_objectSpread$2(_objectSpread$2(_objectSpread$2({},n.presentationProps),{},{percent:de,cornerRadius:f,name:se,tooltipPayload:oe,midAngle:Ee,middleRadius:ae,tooltipPosition:ee},be),fe),{},{value:ie,startAngle:Ce,endAngle:xe,payload:be,paddingAngle:mathSign(F)*I}),z})}return $}function PieLabelListProvider(e){var{showLabels:t,sectors:n,children:o}=e,u=reactExports.useMemo(()=>!t||!n?[]:n.map(d=>({value:d.value,payload:d.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:d.cx,cy:d.cy,innerRadius:d.innerRadius,outerRadius:d.outerRadius,startAngle:d.startAngle,endAngle:d.endAngle,clockWise:!1},fill:d.fill})),[n,t]);return reactExports.createElement(PolarLabelListContextProvider,{value:t?u:void 0},o)}function SectorsWithAnimation(e){var{props:t,previousSectorsRef:n}=e,{sectors:o,isAnimationActive:u,animationBegin:d,animationDuration:f,animationEasing:g,activeShape:v,inactiveShape:w,onAnimationStart:S,onAnimationEnd:R}=t,_=useAnimationId(t,"recharts-pie-"),F=n.current,[M,I]=reactExports.useState(!1),N=reactExports.useCallback(()=>{typeof R=="function"&&R(),I(!1)},[R]),B=reactExports.useCallback(()=>{typeof S=="function"&&S(),I(!0)},[S]);return reactExports.createElement(PieLabelListProvider,{showLabels:!M,sectors:o},reactExports.createElement(JavascriptAnimate,{animationId:_,begin:d,duration:f,isActive:u,easing:g,onAnimationStart:B,onAnimationEnd:N,key:_},H=>{var U=[],$=o&&o[0],z=$?.startAngle;return o?.forEach((j,J)=>{var ie=F&&F[J],se=J>0?get(j,"paddingAngle",0):0;if(ie){var fe=interpolate$2(ie.endAngle-ie.startAngle,j.endAngle-j.startAngle,H),de=_objectSpread$2(_objectSpread$2({},j),{},{startAngle:z+se,endAngle:z+fe+se});U.push(de),z=de.endAngle}else{var{endAngle:Ce,startAngle:be}=j,xe=interpolate$2(0,Ce-be,H),Ee=_objectSpread$2(_objectSpread$2({},j),{},{startAngle:z+se,endAngle:z+xe+se});U.push(Ee),z=Ee.endAngle}}),n.current=U,reactExports.createElement(Layer$2,null,reactExports.createElement(PieSectors,{sectors:U,activeShape:v,inactiveShape:w,allOtherPieProps:t}))}),reactExports.createElement(PieLabelList,{showLabels:!M,sectors:o,props:t}),t.children)}var defaultPieProps={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Global.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function PieImpl(e){var{id:t}=e,n=_objectWithoutProperties$3(e,_excluded2),{hide:o,className:u,rootTabIndex:d}=e,f=reactExports.useMemo(()=>findAllByType(e.children,Cell),[e.children]),g=useAppSelector(S=>selectPieSectors(S,t,f)),v=reactExports.useRef(null),w=clsx("recharts-pie",u);return o||g==null?(v.current=null,reactExports.createElement(Layer$2,{tabIndex:d,className:w})):reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(SetTooltipEntrySettings,{fn:getTooltipEntrySettings,args:_objectSpread$2(_objectSpread$2({},e),{},{sectors:g})}),reactExports.createElement(Layer$2,{tabIndex:d,className:w},reactExports.createElement(SectorsWithAnimation,{props:_objectSpread$2(_objectSpread$2({},n),{},{sectors:g}),previousSectorsRef:v})))}function Pie(e){var t=resolveDefaultProps(e,defaultPieProps),{id:n}=t,o=_objectWithoutProperties$3(t,_excluded3),u=svgPropertiesNoEvents(o);return reactExports.createElement(RegisterGraphicalItemId,{id:n,type:"pie"},d=>reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(SetPolarGraphicalItem,{type:"pie",id:d,data:o.data,dataKey:o.dataKey,hide:o.hide,angleAxisId:0,radiusAxisId:0,name:o.name,nameKey:o.nameKey,tooltipType:o.tooltipType,legendType:o.legendType,fill:o.fill,cx:o.cx,cy:o.cy,startAngle:o.startAngle,endAngle:o.endAngle,paddingAngle:o.paddingAngle,minAngle:o.minAngle,innerRadius:o.innerRadius,outerRadius:o.outerRadius,cornerRadius:o.cornerRadius,presentationProps:u,maxRadius:t.maxRadius}),reactExports.createElement(SetPiePayloadLegend,_extends$3({},o,{id:d})),reactExports.createElement(PieImpl,_extends$3({},o,{id:d}))))}Pie.displayName="Pie";function ownKeys$1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread$1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$1(Object(n),!0).forEach(function(o){_defineProperty$1(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$1(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty$1(e,t,n){return(t=_toPropertyKey$1(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey$1(e){var t=_toPrimitive$1(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive$1(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var initialState$4={xAxis:{},yAxis:{},zAxis:{}},cartesianAxisSlice=createSlice({name:"cartesianAxis",initialState:initialState$4,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:prepareAutoBatched()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:prepareAutoBatched()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:prepareAutoBatched()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:prepareAutoBatched()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:prepareAutoBatched()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:prepareAutoBatched()},updateYAxisWidth(e,t){var{id:n,width:o}=t.payload,u=e.yAxis[n];if(u){var d=u.widthHistory||[];if(d.length===3&&d[0]===d[2]&&o===d[1]&&o!==u.width&&Math.abs(o-d[0])<=1)return;var f=[...d,o].slice(-3);e.yAxis[n]=_objectSpread$1(_objectSpread$1({},e.yAxis[n]),{},{width:o,widthHistory:f})}}}}),{addXAxis,removeXAxis,addYAxis,removeYAxis,addZAxis,removeZAxis,updateYAxisWidth}=cartesianAxisSlice.actions,cartesianAxisReducer=cartesianAxisSlice.reducer,selectChartOffset=createSelector([selectChartOffsetInternal],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),selectPlotArea=createSelector([selectChartOffset,selectChartWidth,selectChartHeight],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),usePlotArea=()=>useAppSelector(selectPlotArea),initialState$3={},errorBarSlice=createSlice({name:"errorBars",initialState:initialState$3,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:o}=t.payload;e[n]||(e[n]=[]),e[n].push(o)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:o,next:u}=t.payload;e[n]&&(e[n]=e[n].map(d=>d.dataKey===o.dataKey&&d.direction===o.direction?u:d))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:o}=t.payload;e[n]&&(e[n]=e[n].filter(u=>u.dataKey!==o.dataKey||u.direction!==o.direction))}}}),{addErrorBar,replaceErrorBar,removeErrorBar}=errorBarSlice.actions,errorBarReducer=errorBarSlice.reducer,ChartDataContextProvider=e=>{var{chartData:t}=e,n=useAppDispatch(),o=useIsPanorama();return reactExports.useEffect(()=>o?()=>{}:(n(setChartData(t)),()=>{n(setChartData(void 0))}),[t,n,o]),null},initialState$2={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},brushSlice=createSlice({name:"brush",initialState:initialState$2,reducers:{setBrushSettings(e,t){return t.payload==null?initialState$2:t.payload}}}),{setBrushSettings}=brushSlice.actions,brushReducer=brushSlice.reducer,initialState$1={dots:[],areas:[],lines:[]},referenceElementsSlice=createSlice({name:"referenceElements",initialState:initialState$1,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=current(e).dots.findIndex(o=>o===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=current(e).areas.findIndex(o=>o===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=current(e).lines.findIndex(o=>o===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot,removeDot,addArea,removeArea,addLine,removeLine}=referenceElementsSlice.actions,referenceElementsReducer=referenceElementsSlice.reducer,ClipPathIdContext=reactExports.createContext(void 0),ClipPathProvider=e=>{var{children:t}=e,[n]=reactExports.useState("".concat(uniqueId("recharts"),"-clip")),o=usePlotArea();if(o==null)return null;var{x:u,y:d,width:f,height:g}=o;return reactExports.createElement(ClipPathIdContext.Provider,{value:n},reactExports.createElement("defs",null,reactExports.createElement("clipPath",{id:n},reactExports.createElement("rect",{x:u,y:d,height:g,width:f}))),t)},withSelector={exports:{}},useSyncExternalStoreWithSelector_production={};var hasRequiredUseSyncExternalStoreWithSelector_production;function requireUseSyncExternalStoreWithSelector_production(){if(hasRequiredUseSyncExternalStoreWithSelector_production)return useSyncExternalStoreWithSelector_production;hasRequiredUseSyncExternalStoreWithSelector_production=1;var e=requireReact();function t(v,w){return v===w&&(v!==0||1/v===1/w)||v!==v&&w!==w}var n=typeof Object.is=="function"?Object.is:t,o=e.useSyncExternalStore,u=e.useRef,d=e.useEffect,f=e.useMemo,g=e.useDebugValue;return useSyncExternalStoreWithSelector_production.useSyncExternalStoreWithSelector=function(v,w,S,R,_){var F=u(null);if(F.current===null){var M={hasValue:!1,value:null};F.current=M}else M=F.current;F=f(function(){function N(z){if(!B){if(B=!0,H=z,z=R(z),_!==void 0&&M.hasValue){var j=M.value;if(_(j,z))return U=j}return U=z}if(j=U,n(H,z))return j;var J=R(z);return _!==void 0&&_(j,J)?(H=z,j):(H=z,U=J)}var B=!1,H,U,$=S===void 0?null:S;return[function(){return N(w())},$===null?void 0:function(){return N($())}]},[w,S,R,_]);var I=o(v,F[0],F[1]);return d(function(){M.hasValue=!0,M.value=I},[I]),g(I),I},useSyncExternalStoreWithSelector_production}var hasRequiredWithSelector;function requireWithSelector(){return hasRequiredWithSelector||(hasRequiredWithSelector=1,withSelector.exports=requireUseSyncExternalStoreWithSelector_production()),withSelector.exports}requireWithSelector();function defaultNoopBatch(e){e()}function createListenerCollection(){let e=null,t=null;return{clear(){e=null,t=null},notify(){defaultNoopBatch(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let o=e;for(;o;)n.push(o),o=o.next;return n},subscribe(n){let o=!0;const u=t={callback:n,next:null,prev:t};return u.prev?u.prev.next=u:e=u,function(){!o||e===null||(o=!1,u.next?u.next.prev=u.prev:t=u.prev,u.prev?u.prev.next=u.next:e=u.next)}}}}var nullListeners={notify(){},get:()=>[]};function createSubscription(e,t){let n,o=nullListeners,u=0,d=!1;function f(I){S();const N=o.subscribe(I);let B=!1;return()=>{B||(B=!0,N(),R())}}function g(){o.notify()}function v(){M.onStateChange&&M.onStateChange()}function w(){return d}function S(){u++,n||(n=e.subscribe(v),o=createListenerCollection())}function R(){u--,n&&u===0&&(n(),n=void 0,o.clear(),o=nullListeners)}function _(){d||(d=!0,S())}function F(){d&&(d=!1,R())}const M={addNestedSub:f,notifyNestedSubs:g,handleChangeWrapper:v,isSubscribed:w,trySubscribe:_,tryUnsubscribe:F,getListeners:()=>o};return M}var canUseDOM=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",isDOM=canUseDOM(),isRunningInReactNative=()=>typeof navigator<"u"&&navigator.product==="ReactNative",isReactNative=isRunningInReactNative(),getUseIsomorphicLayoutEffect=()=>isDOM||isReactNative?reactExports.useLayoutEffect:reactExports.useEffect,useIsomorphicLayoutEffect$2=getUseIsomorphicLayoutEffect(),ContextKey=Symbol.for("react-redux-context"),gT=typeof globalThis<"u"?globalThis:{};function getContext(){if(!reactExports.createContext)return{};const e=gT[ContextKey]??=new Map;let t=e.get(reactExports.createContext);return t||(t=reactExports.createContext(null),e.set(reactExports.createContext,t)),t}var ReactReduxContext=getContext();function Provider(e){const{children:t,context:n,serverState:o,store:u}=e,d=reactExports.useMemo(()=>{const v=createSubscription(u);return{store:u,subscription:v,getServerState:o?()=>o:void 0}},[u,o]),f=reactExports.useMemo(()=>u.getState(),[u]);useIsomorphicLayoutEffect$2(()=>{const{subscription:v}=d;return v.onStateChange=v.notifyNestedSubs,v.trySubscribe(),f!==u.getState()&&v.notifyNestedSubs(),()=>{v.tryUnsubscribe(),v.onStateChange=void 0}},[d,f]);const g=n||ReactReduxContext;return reactExports.createElement(g.Provider,{value:d},t)}var Provider_default=Provider,pickChartPointer=(e,t)=>t,selectActivePropsFromChartPointer=createSelector([pickChartPointer,selectChartLayout,selectPolarViewBox,selectTooltipAxisType,selectTooltipAxisRangeWithReverse,selectTooltipAxisTicks,selectOrderedTooltipTicks,selectChartOffsetInternal],combineActiveProps),getChartPointer=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,o=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/o)}},mouseClickAction=createAction("mouseClick"),mouseClickMiddleware=createListenerMiddleware();mouseClickMiddleware.startListening({actionCreator:mouseClickAction,effect:(e,t)=>{var n=e.payload,o=selectActivePropsFromChartPointer(t.getState(),getChartPointer(n));o?.activeIndex!=null&&t.dispatch(setMouseClickAxisIndex({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}});var mouseMoveAction=createAction("mouseMove"),mouseMoveMiddleware=createListenerMiddleware();mouseMoveMiddleware.startListening({actionCreator:mouseMoveAction,effect:(e,t)=>{var n=e.payload,o=t.getState(),u=selectTooltipEventType$1(o,o.tooltip.settings.shared),d=selectActivePropsFromChartPointer(o,getChartPointer(n));u==="axis"&&(d?.activeIndex!=null?t.dispatch(setMouseOverAxisIndex({activeIndex:d.activeIndex,activeDataKey:void 0,activeCoordinate:d.activeCoordinate})):t.dispatch(mouseLeaveChart()))}});var initialState={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},rootPropsSlice=createSlice({name:"rootProps",initialState,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:initialState.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),rootPropsReducer=rootPropsSlice.reducer,{updateOptions}=rootPropsSlice.actions,polarOptionsSlice=createSlice({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions}=polarOptionsSlice.actions,polarOptionsReducer=polarOptionsSlice.reducer,keyDownAction=createAction("keyDown"),focusAction=createAction("focus"),keyboardEventsMiddleware=createListenerMiddleware();keyboardEventsMiddleware.startListening({actionCreator:keyDownAction,effect:(e,t)=>{var n=t.getState(),o=n.rootProps.accessibilityLayer!==!1;if(o){var{keyboardInteraction:u}=n.tooltip,d=e.payload;if(!(d!=="ArrowRight"&&d!=="ArrowLeft"&&d!=="Enter")){var f=Number(combineActiveTooltipIndex(u,selectTooltipDisplayedData(n))),g=selectTooltipAxisTicks(n);if(d==="Enter"){var v=selectCoordinateForDefaultIndex(n,"axis","hover",String(u.index));t.dispatch(setKeyboardInteraction({active:!u.active,activeIndex:u.index,activeDataKey:u.dataKey,activeCoordinate:v}));return}var w=selectChartDirection(n),S=w==="left-to-right"?1:-1,R=d==="ArrowRight"?1:-1,_=f+R*S;if(!(g==null||_>=g.length||_<0)){var F=selectCoordinateForDefaultIndex(n,"axis","hover",String(_));t.dispatch(setKeyboardInteraction({active:!0,activeIndex:_.toString(),activeDataKey:void 0,activeCoordinate:F}))}}}}});keyboardEventsMiddleware.startListening({actionCreator:focusAction,effect:(e,t)=>{var n=t.getState(),o=n.rootProps.accessibilityLayer!==!1;if(o){var{keyboardInteraction:u}=n.tooltip;if(!u.active&&u.index==null){var d="0",f=selectCoordinateForDefaultIndex(n,"axis","hover",String(d));t.dispatch(setKeyboardInteraction({activeDataKey:void 0,active:!0,activeIndex:d,activeCoordinate:f}))}}}});var externalEventAction=createAction("externalEvent"),externalEventsMiddleware=createListenerMiddleware();externalEventsMiddleware.startListening({actionCreator:externalEventAction,effect:(e,t)=>{if(e.payload.handler!=null){var n=t.getState(),o={activeCoordinate:selectActiveTooltipCoordinate(n),activeDataKey:selectActiveTooltipDataKey(n),activeIndex:selectActiveTooltipIndex(n),activeLabel:selectActiveLabel$1(n),activeTooltipIndex:selectActiveTooltipIndex(n),isTooltipActive:selectIsTooltipActive$1(n)};e.payload.handler(o,e.payload.reactEvent)}}});var selectAllTooltipPayloadConfiguration=createSelector([selectTooltipState],e=>e.tooltipItemPayloads),selectTooltipCoordinate=createSelector([selectAllTooltipPayloadConfiguration,selectTooltipPayloadSearcher,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,o)=>{var u=e.find(g=>g.settings.dataKey===o);if(u!=null){var{positions:d}=u;if(d!=null){var f=t(d,n);return f}}}),touchEventAction=createAction("touchMove"),touchEventMiddleware=createListenerMiddleware();touchEventMiddleware.startListening({actionCreator:touchEventAction,effect:(e,t)=>{var n=e.payload,o=t.getState(),u=selectTooltipEventType$1(o,o.tooltip.settings.shared);if(u==="axis"){var d=selectActivePropsFromChartPointer(o,getChartPointer({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));d?.activeIndex!=null&&t.dispatch(setMouseOverAxisIndex({activeIndex:d.activeIndex,activeDataKey:void 0,activeCoordinate:d.activeCoordinate}))}else if(u==="item"){var f,g=n.touches[0],v=document.elementFromPoint(g.clientX,g.clientY);if(!v||!v.getAttribute)return;var w=v.getAttribute(DATA_ITEM_INDEX_ATTRIBUTE_NAME),S=(f=v.getAttribute(DATA_ITEM_DATAKEY_ATTRIBUTE_NAME))!==null&&f!==void 0?f:void 0,R=selectTooltipCoordinate(t.getState(),w,S);t.dispatch(setActiveMouseOverItemIndex({activeDataKey:S,activeIndex:w,activeCoordinate:R}))}}});var rootReducer=combineReducers({brush:brushReducer,cartesianAxis:cartesianAxisReducer,chartData:chartDataReducer,errorBars:errorBarReducer,graphicalItems:graphicalItemsReducer,layout:chartLayoutReducer,legend:legendReducer,options:optionsReducer,polarAxis:polarAxisReducer,polarOptions:polarOptionsReducer,referenceElements:referenceElementsReducer,rootProps:rootPropsReducer,tooltip:tooltipReducer}),createRechartsStore=function(t){return configureStore({reducer:rootReducer,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([mouseClickMiddleware.middleware,mouseMoveMiddleware.middleware,keyboardEventsMiddleware.middleware,externalEventsMiddleware.middleware,touchEventMiddleware.middleware]),enhancers:n=>{var o=n;return typeof n=="function"&&(o=n()),o.concat(autoBatchEnhancer({type:"raf"}))},devTools:Global.devToolsEnabled})};function RechartsStoreProvider(e){var{preloadedState:t,children:n,reduxStoreName:o}=e,u=useIsPanorama(),d=reactExports.useRef(null);if(u)return n;d.current==null&&(d.current=createRechartsStore(t));var f=RechartsReduxContext;return reactExports.createElement(Provider_default,{context:f,store:d.current},n)}function ReportMainChartProps(e){var{layout:t,margin:n}=e,o=useAppDispatch(),u=useIsPanorama();return reactExports.useEffect(()=>{u||(o(setLayout(t)),o(setMargin(n)))},[o,u,t,n]),null}function ReportChartProps(e){var t=useAppDispatch();return reactExports.useEffect(()=>{t(updateOptions(e))},[t,e]),null}var _excluded$2=["children"];function _objectWithoutProperties$2(e,t){if(e==null)return{};var n,o,u=_objectWithoutPropertiesLoose$2(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(o=0;o<d.length;o++)n=d[o],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(u[n]=e[n])}return u}function _objectWithoutPropertiesLoose$2(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;n[o]=e[o]}return n}function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$2.apply(null,arguments)}var FULL_WIDTH_AND_HEIGHT={width:"100%",height:"100%",display:"block"},MainChartSurface=reactExports.forwardRef((e,t)=>{var n=useChartWidth(),o=useChartHeight(),u=useAccessibilityLayer();if(!isPositiveNumber(n)||!isPositiveNumber(o))return null;var{children:d,otherAttributes:f,title:g,desc:v}=e,w,S;return typeof f.tabIndex=="number"?w=f.tabIndex:w=u?0:void 0,typeof f.role=="string"?S=f.role:S=u?"application":void 0,reactExports.createElement(Surface,_extends$2({},f,{title:g,desc:v,role:S,tabIndex:w,width:n,height:o,style:FULL_WIDTH_AND_HEIGHT,ref:t}),d)}),BrushPanoramaSurface=e=>{var{children:t}=e,n=useAppSelector(selectBrushDimensions);if(!n)return null;var{width:o,height:u,y:d,x:f}=n;return reactExports.createElement(Surface,{width:o,height:u,x:f,y:d},t)},RootSurface=reactExports.forwardRef((e,t)=>{var{children:n}=e,o=_objectWithoutProperties$2(e,_excluded$2),u=useIsPanorama();return u?reactExports.createElement(BrushPanoramaSurface,null,n):reactExports.createElement(MainChartSurface,_extends$2({ref:t},o),n)});function useReportScale(){var e=useAppDispatch(),[t,n]=reactExports.useState(null),o=useAppSelector(selectContainerScale);return reactExports.useEffect(()=>{if(t!=null){var u=t.getBoundingClientRect(),d=u.width/t.offsetWidth;isWellBehavedNumber(d)&&d!==o&&e(setScale(d))}},[t,e,o]),n}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(o){_defineProperty(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return typeof t=="symbol"?t:t+""}function _toPrimitive(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends$1.apply(null,arguments)}var EventSynchronizer=()=>(useSynchronisedEventsFromOtherCharts(),null);function getNumberOrZero(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var ResponsiveDiv=reactExports.forwardRef((e,t)=>{var n,o,u=reactExports.useRef(null),[d,f]=reactExports.useState({containerWidth:getNumberOrZero((n=e.style)===null||n===void 0?void 0:n.width),containerHeight:getNumberOrZero((o=e.style)===null||o===void 0?void 0:o.height)}),g=reactExports.useCallback((w,S)=>{f(R=>{var _=Math.round(w),F=Math.round(S);return R.containerWidth===_&&R.containerHeight===F?R:{containerWidth:_,containerHeight:F}})},[]),v=reactExports.useCallback(w=>{if(typeof t=="function"&&t(w),w!=null){var{width:S,height:R}=w.getBoundingClientRect();g(S,R);var _=M=>{var{width:I,height:N}=M[0].contentRect;g(I,N)},F=new ResizeObserver(_);F.observe(w),u.current=F}},[t,g]);return reactExports.useEffect(()=>()=>{var w=u.current;w?.disconnect()},[g]),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(ReportChartSize,{width:d.containerWidth,height:d.containerHeight}),reactExports.createElement("div",_extends$1({ref:v},e)))}),ReadSizeOnceDiv=reactExports.forwardRef((e,t)=>{var{width:n,height:o}=e,[u,d]=reactExports.useState({containerWidth:getNumberOrZero(n),containerHeight:getNumberOrZero(o)}),f=reactExports.useCallback((v,w)=>{d(S=>{var R=Math.round(v),_=Math.round(w);return S.containerWidth===R&&S.containerHeight===_?S:{containerWidth:R,containerHeight:_}})},[]),g=reactExports.useCallback(v=>{if(typeof t=="function"&&t(v),v!=null){var{width:w,height:S}=v.getBoundingClientRect();f(w,S)}},[t,f]);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(ReportChartSize,{width:u.containerWidth,height:u.containerHeight}),reactExports.createElement("div",_extends$1({ref:g},e)))}),StaticDiv=reactExports.forwardRef((e,t)=>{var{width:n,height:o}=e;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(ReportChartSize,{width:n,height:o}),reactExports.createElement("div",_extends$1({ref:t},e)))}),NonResponsiveDiv=reactExports.forwardRef((e,t)=>{var{width:n,height:o}=e;return isPercent(n)||isPercent(o)?reactExports.createElement(ReadSizeOnceDiv,_extends$1({},e,{ref:t})):reactExports.createElement(StaticDiv,_extends$1({},e,{ref:t}))});function getWrapperDivComponent(e){return e===!0?ResponsiveDiv:NonResponsiveDiv}var RechartsWrapper=reactExports.forwardRef((e,t)=>{var{children:n,className:o,height:u,onClick:d,onContextMenu:f,onDoubleClick:g,onMouseDown:v,onMouseEnter:w,onMouseLeave:S,onMouseMove:R,onMouseUp:_,onTouchEnd:F,onTouchMove:M,onTouchStart:I,style:N,width:B,responsive:H,dispatchTouchEvents:U=!0}=e,$=reactExports.useRef(null),z=useAppDispatch(),[j,J]=reactExports.useState(null),[ie,se]=reactExports.useState(null),fe=useReportScale(),de=useResponsiveContainerContext(),Ce=de?.width>0?de.width:B,be=de?.height>0?de.height:u,xe=reactExports.useCallback(ce=>{fe(ce),typeof t=="function"&&t(ce),J(ce),se(ce),ce!=null&&($.current=ce)},[fe,t,J,se]),Ee=reactExports.useCallback(ce=>{z(mouseClickAction(ce)),z(externalEventAction({handler:d,reactEvent:ce}))},[z,d]),ae=reactExports.useCallback(ce=>{z(mouseMoveAction(ce)),z(externalEventAction({handler:w,reactEvent:ce}))},[z,w]),oe=reactExports.useCallback(ce=>{z(mouseLeaveChart()),z(externalEventAction({handler:S,reactEvent:ce}))},[z,S]),ee=reactExports.useCallback(ce=>{z(mouseMoveAction(ce)),z(externalEventAction({handler:R,reactEvent:ce}))},[z,R]),Z=reactExports.useCallback(()=>{z(focusAction())},[z]),Q=reactExports.useCallback(ce=>{z(keyDownAction(ce.key))},[z]),K=reactExports.useCallback(ce=>{z(externalEventAction({handler:f,reactEvent:ce}))},[z,f]),ne=reactExports.useCallback(ce=>{z(externalEventAction({handler:g,reactEvent:ce}))},[z,g]),ue=reactExports.useCallback(ce=>{z(externalEventAction({handler:v,reactEvent:ce}))},[z,v]),ye=reactExports.useCallback(ce=>{z(externalEventAction({handler:_,reactEvent:ce}))},[z,_]),pe=reactExports.useCallback(ce=>{z(externalEventAction({handler:I,reactEvent:ce}))},[z,I]),X=reactExports.useCallback(ce=>{U&&z(touchEventAction(ce)),z(externalEventAction({handler:M,reactEvent:ce}))},[z,U,M]),le=reactExports.useCallback(ce=>{z(externalEventAction({handler:F,reactEvent:ce}))},[z,F]),he=getWrapperDivComponent(H);return reactExports.createElement(TooltipPortalContext.Provider,{value:j},reactExports.createElement(LegendPortalContext.Provider,{value:ie},reactExports.createElement(he,{width:Ce??N?.width,height:be??N?.height,className:clsx("recharts-wrapper",o),style:_objectSpread({position:"relative",cursor:"default",width:Ce,height:be},N),onClick:Ee,onContextMenu:K,onDoubleClick:ne,onFocus:Z,onKeyDown:Q,onMouseDown:ue,onMouseEnter:ae,onMouseLeave:oe,onMouseMove:ee,onMouseUp:ye,onTouchEnd:le,onTouchMove:X,onTouchStart:pe,ref:xe},reactExports.createElement(EventSynchronizer,null),n)))}),_excluded$1=["width","height","responsive","children","className","style","compact","title","desc"];function _objectWithoutProperties$1(e,t){if(e==null)return{};var n,o,u=_objectWithoutPropertiesLoose$1(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(o=0;o<d.length;o++)n=d[o],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(u[n]=e[n])}return u}function _objectWithoutPropertiesLoose$1(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;n[o]=e[o]}return n}var CategoricalChart=reactExports.forwardRef((e,t)=>{var{width:n,height:o,responsive:u,children:d,className:f,style:g,compact:v,title:w,desc:S}=e,R=_objectWithoutProperties$1(e,_excluded$1),_=svgPropertiesNoEvents(R);return v?reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(ReportChartSize,{width:n,height:o}),reactExports.createElement(RootSurface,{otherAttributes:_,title:w,desc:S},d)):reactExports.createElement(RechartsWrapper,{className:f,style:g,width:n,height:o,responsive:u,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},reactExports.createElement(RootSurface,{otherAttributes:_,title:w,desc:S,ref:t},reactExports.createElement(ClipPathProvider,null,d)))});function ReportPolarOptions(e){var t=useAppDispatch();return reactExports.useEffect(()=>{t(updatePolarOptions(e))},[t,e]),null}var _excluded=["layout"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},_extends.apply(null,arguments)}function _objectWithoutProperties(e,t){if(e==null)return{};var n,o,u=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(o=0;o<d.length;o++)n=d[o],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(u[n]=e[n])}return u}function _objectWithoutPropertiesLoose(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;n[o]=e[o]}return n}var defaultMargin={top:5,right:5,bottom:5,left:5},defaultProps$1={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:defaultMargin,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1},PolarChart=reactExports.forwardRef(function(t,n){var o,u=resolveDefaultProps(t.categoricalChartProps,defaultProps$1),{layout:d}=u,f=_objectWithoutProperties(u,_excluded),{chartName:g,defaultTooltipEventType:v,validateTooltipEventTypes:w,tooltipPayloadSearcher:S}=t,R={chartName:g,defaultTooltipEventType:v,validateTooltipEventTypes:w,tooltipPayloadSearcher:S,eventEmitter:void 0};return reactExports.createElement(RechartsStoreProvider,{preloadedState:{options:R},reduxStoreName:(o=u.id)!==null&&o!==void 0?o:g},reactExports.createElement(ChartDataContextProvider,{chartData:u.data}),reactExports.createElement(ReportMainChartProps,{layout:d,margin:u.margin}),reactExports.createElement(ReportChartProps,{accessibilityLayer:u.accessibilityLayer,barCategoryGap:u.barCategoryGap,maxBarSize:u.maxBarSize,stackOffset:u.stackOffset,barGap:u.barGap,barSize:u.barSize,syncId:u.syncId,syncMethod:u.syncMethod,className:u.className}),reactExports.createElement(ReportPolarOptions,{cx:u.cx,cy:u.cy,startAngle:u.startAngle,endAngle:u.endAngle,innerRadius:u.innerRadius,outerRadius:u.outerRadius}),reactExports.createElement(CategoricalChart,_extends({},f,{ref:n})))}),allowedTooltipTypes=["item"],defaultProps={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},PieChart=reactExports.forwardRef((e,t)=>{var n=resolveDefaultProps(e,defaultProps);return reactExports.createElement(PolarChart,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:allowedTooltipTypes,tooltipPayloadSearcher:arrayTooltipSearcher,categoricalChartProps:n,ref:t})});const LayoutGroupContext=reactExports.createContext({});function useConstant(e){const t=reactExports.useRef(null);return t.current===null&&(t.current=e()),t.current}const isBrowser=typeof window<"u",useIsomorphicLayoutEffect$1=isBrowser?reactExports.useLayoutEffect:reactExports.useEffect,PresenceContext=reactExports.createContext(null);function addUniqueItem(e,t){e.indexOf(t)===-1&&e.push(t)}function removeItem(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const clamp$1=(e,t,n)=>n>t?t:n<e?e:n;let invariant=()=>{};const MotionGlobalConfig={},isNumericalString=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function isObject$1(e){return typeof e=="object"&&e!==null}const isZeroValueString=e=>/^0[^.\s]+$/u.test(e);function memo(e){let t;return()=>(t===void 0&&(t=e()),t)}const noop$1=e=>e,combineFunctions=(e,t)=>n=>t(e(n)),pipe=(...e)=>e.reduce(combineFunctions),progress=(e,t,n)=>{const o=t-e;return o===0?1:(n-e)/o};class SubscriptionManager{constructor(){this.subscriptions=[]}add(t){return addUniqueItem(this.subscriptions,t),()=>removeItem(this.subscriptions,t)}notify(t,n,o){const u=this.subscriptions.length;if(u)if(u===1)this.subscriptions[0](t,n,o);else for(let d=0;d<u;d++){const f=this.subscriptions[d];f&&f(t,n,o)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const secondsToMilliseconds=e=>e*1e3,millisecondsToSeconds=e=>e/1e3;function velocityPerSecond(e,t){return t?e*(1e3/t):0}const calcBezier=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(e,t,n,o,u){let d,f,g=0;do f=t+(n-t)/2,d=calcBezier(f,o,u)-e,d>0?n=f:t=f;while(Math.abs(d)>subdivisionPrecision&&++g<subdivisionMaxIterations);return f}function cubicBezier(e,t,n,o){if(e===t&&n===o)return noop$1;const u=d=>binarySubdivide(d,0,1,e,n);return d=>d===0||d===1?d:calcBezier(u(d),t,o)}const mirrorEasing=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,reverseEasing=e=>t=>1-e(1-t),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=e=>(e*=2)<1?.5*backIn(e):.5*(2-Math.pow(2,-10*(e-1))),circIn=e=>1-Math.sin(Math.acos(e)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=e=>Array.isArray(e)&&typeof e[0]!="number",isBezierDefinition=e=>Array.isArray(e)&&typeof e[0]=="number",easingLookup={linear:noop$1,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},isValidEasing=e=>typeof e=="string",easingDefinitionToFunction=e=>{if(isBezierDefinition(e)){invariant(e.length===4);const[t,n,o,u]=e;return cubicBezier(t,n,o,u)}else if(isValidEasing(e))return easingLookup[e];return e},stepsOrder=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function createRenderStep(e,t){let n=new Set,o=new Set,u=!1,d=!1;const f=new WeakSet;let g={delta:0,timestamp:0,isProcessing:!1};function v(S){f.has(S)&&(w.schedule(S),e()),S(g)}const w={schedule:(S,R=!1,_=!1)=>{const M=_&&u?n:o;return R&&f.add(S),M.has(S)||M.add(S),S},cancel:S=>{o.delete(S),f.delete(S)},process:S=>{if(g=S,u){d=!0;return}u=!0,[n,o]=[o,n],n.forEach(v),n.clear(),u=!1,d&&(d=!1,w.process(S))}};return w}const maxElapsed=40;function createRenderBatcher(e,t){let n=!1,o=!0;const u={delta:0,timestamp:0,isProcessing:!1},d=()=>n=!0,f=stepsOrder.reduce((U,$)=>(U[$]=createRenderStep(d),U),{}),{setup:g,read:v,resolveKeyframes:w,preUpdate:S,update:R,preRender:_,render:F,postRender:M}=f,I=()=>{const U=MotionGlobalConfig.useManualTiming?u.timestamp:performance.now();n=!1,MotionGlobalConfig.useManualTiming||(u.delta=o?1e3/60:Math.max(Math.min(U-u.timestamp,maxElapsed),1)),u.timestamp=U,u.isProcessing=!0,g.process(u),v.process(u),w.process(u),S.process(u),R.process(u),_.process(u),F.process(u),M.process(u),u.isProcessing=!1,n&&t&&(o=!1,e(I))},N=()=>{n=!0,o=!0,u.isProcessing||e(I)};return{schedule:stepsOrder.reduce((U,$)=>{const z=f[$];return U[$]=(j,J=!1,ie=!1)=>(n||N(),z.schedule(j,J,ie)),U},{}),cancel:U=>{for(let $=0;$<stepsOrder.length;$++)f[stepsOrder[$]].cancel(U)},state:u,steps:f}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop$1,!0);let now$1;function clearTime(){now$1=void 0}const time={now:()=>(now$1===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now$1),set:e=>{now$1=e,queueMicrotask(clearTime)}},checkStringStartsWith=e=>t=>typeof t=="string"&&t.startsWith(e),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=e=>startsAsVariableToken(e)?singleCssVariableRegex.test(e.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,number={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},alpha={...number,transform:e=>clamp$1(0,1,e)},scale={...number,default:1},sanitize=e=>Math.round(e*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(e){return e==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(e,t)=>n=>!!(typeof n=="string"&&singleColorRegex.test(n)&&n.startsWith(e)||t&&!isNullish(n)&&Object.prototype.hasOwnProperty.call(n,t)),splitColor=(e,t,n)=>o=>{if(typeof o!="string")return o;const[u,d,f,g]=o.match(floatRegex);return{[e]:parseFloat(u),[t]:parseFloat(d),[n]:parseFloat(f),alpha:g!==void 0?parseFloat(g):1}},clampRgbUnit=e=>clamp$1(0,255,e),rgbUnit={...number,transform:e=>Math.round(clampRgbUnit(e))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:o=1})=>"rgba("+rgbUnit.transform(e)+", "+rgbUnit.transform(t)+", "+rgbUnit.transform(n)+", "+sanitize(alpha.transform(o))+")"};function parseHex(e){let t="",n="",o="",u="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),o=e.substring(5,7),u=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),o=e.substring(3,4),u=e.substring(4,5),t+=t,n+=n,o+=o,u+=u),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(o,16),alpha:u?parseInt(u,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},createUnitType=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:e=>percent.parse(e)/100,transform:e=>percent.transform(e*100)},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:o=1})=>"hsla("+Math.round(e)+", "+percent.transform(sanitize(t))+", "+percent.transform(sanitize(n))+", "+sanitize(alpha.transform(o))+")"},color={test:e=>rgba.test(e)||hex.test(e)||hsla.test(e),parse:e=>rgba.test(e)?rgba.parse(e):hsla.test(e)?hsla.parse(e):hex.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?rgba.transform(e):hsla.transform(e),getAnimatableNone:e=>{const t=color.parse(e);return t.alpha=0,color.transform(t)}},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test$1(e){return isNaN(e)&&typeof e=="string"&&(e.match(floatRegex)?.length||0)+(e.match(colorRegex)?.length||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(e){const t=e.toString(),n=[],o={color:[],number:[],var:[]},u=[];let d=0;const g=t.replace(complexRegex,v=>(color.test(v)?(o.color.push(d),u.push(COLOR_TOKEN),n.push(color.parse(v))):v.startsWith(VAR_FUNCTION_TOKEN)?(o.var.push(d),u.push(VAR_TOKEN),n.push(v)):(o.number.push(d),u.push(NUMBER_TOKEN),n.push(parseFloat(v))),++d,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:n,split:g,indexes:o,types:u}}function parseComplexValue(e){return analyseComplexValue(e).values}function createTransformer(e){const{split:t,types:n}=analyseComplexValue(e),o=t.length;return u=>{let d="";for(let f=0;f<o;f++)if(d+=t[f],u[f]!==void 0){const g=n[f];g===NUMBER_TOKEN?d+=sanitize(u[f]):g===COLOR_TOKEN?d+=color.transform(u[f]):d+=u[f]}return d}}const convertNumbersToZero=e=>typeof e=="number"?0:color.test(e)?color.getAnimatableNone(e):e;function getAnimatableNone$1(e){const t=parseComplexValue(e);return createTransformer(e)(t.map(convertNumbersToZero))}const complex={test:test$1,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1};function hueToRgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function hslaToRgba({hue:e,saturation:t,lightness:n,alpha:o}){e/=360,t/=100,n/=100;let u=0,d=0,f=0;if(!t)u=d=f=n;else{const g=n<.5?n*(1+t):n+t-n*t,v=2*n-g;u=hueToRgb(v,g,e+1/3),d=hueToRgb(v,g,e),f=hueToRgb(v,g,e-1/3)}return{red:Math.round(u*255),green:Math.round(d*255),blue:Math.round(f*255),alpha:o}}function mixImmediate(e,t){return n=>n>0?t:e}const mixNumber$1=(e,t,n)=>e+(t-e)*n,mixLinearColor=(e,t,n)=>{const o=e*e,u=n*(t*t-o)+o;return u<0?0:Math.sqrt(u)},colorTypes=[hex,rgba,hsla],getColorType=e=>colorTypes.find(t=>t.test(e));function asRGBA(e){const t=getColorType(e);if(!t)return!1;let n=t.parse(e);return t===hsla&&(n=hslaToRgba(n)),n}const mixColor=(e,t)=>{const n=asRGBA(e),o=asRGBA(t);if(!n||!o)return mixImmediate(e,t);const u={...n};return d=>(u.red=mixLinearColor(n.red,o.red,d),u.green=mixLinearColor(n.green,o.green,d),u.blue=mixLinearColor(n.blue,o.blue,d),u.alpha=mixNumber$1(n.alpha,o.alpha,d),rgba.transform(u))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(e,t){return invisibleValues.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function mixNumber(e,t){return n=>mixNumber$1(e,t,n)}function getMixer(e){return typeof e=="number"?mixNumber:typeof e=="string"?isCSSVariableToken(e)?mixImmediate:color.test(e)?mixColor:mixComplex:Array.isArray(e)?mixArray:typeof e=="object"?color.test(e)?mixColor:mixObject:mixImmediate}function mixArray(e,t){const n=[...e],o=n.length,u=e.map((d,f)=>getMixer(d)(d,t[f]));return d=>{for(let f=0;f<o;f++)n[f]=u[f](d);return n}}function mixObject(e,t){const n={...e,...t},o={};for(const u in n)e[u]!==void 0&&t[u]!==void 0&&(o[u]=getMixer(e[u])(e[u],t[u]));return u=>{for(const d in o)n[d]=o[d](u);return n}}function matchOrder(e,t){const n=[],o={color:0,var:0,number:0};for(let u=0;u<t.values.length;u++){const d=t.types[u],f=e.indexes[d][o[d]],g=e.values[f]??0;n[u]=g,o[d]++}return n}const mixComplex=(e,t)=>{const n=complex.createTransformer(t),o=analyseComplexValue(e),u=analyseComplexValue(t);return o.indexes.var.length===u.indexes.var.length&&o.indexes.color.length===u.indexes.color.length&&o.indexes.number.length>=u.indexes.number.length?invisibleValues.has(e)&&!u.values.length||invisibleValues.has(t)&&!o.values.length?mixVisibility(e,t):pipe(mixArray(matchOrder(o,u),u.values),n):mixImmediate(e,t)};function mix(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?mixNumber$1(e,t,n):getMixer(e)(e,t)}const frameloopDriver=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>frame.update(t,n),stop:()=>cancelFrame(t),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generateLinearEasing=(e,t,n=10)=>{let o="";const u=Math.max(Math.round(t/n),2);for(let d=0;d<u;d++)o+=Math.round(e(d/(u-1))*1e4)/1e4+", ";return`linear(${o.substring(0,o.length-2)})`},maxGeneratorDuration=2e4;function calcGeneratorDuration(e){let t=0;const n=50;let o=e.next(t);for(;!o.done&&t<maxGeneratorDuration;)t+=n,o=e.next(t);return t>=maxGeneratorDuration?1/0:t}function createGeneratorEasing(e,t=100,n){const o=n({...e,keyframes:[0,t]}),u=Math.min(calcGeneratorDuration(o),maxGeneratorDuration);return{type:"keyframes",ease:d=>o.next(u*d).value/t,duration:millisecondsToSeconds(u)}}const velocitySampleDuration=5;function calcGeneratorVelocity(e,t,n){const o=Math.max(t-velocitySampleDuration,0);return velocityPerSecond(n-e(o),t-o)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:e=springDefaults.duration,bounce:t=springDefaults.bounce,velocity:n=springDefaults.velocity,mass:o=springDefaults.mass}){let u,d,f=1-t;f=clamp$1(springDefaults.minDamping,springDefaults.maxDamping,f),e=clamp$1(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(e)),f<1?(u=w=>{const S=w*f,R=S*e,_=S-n,F=calcAngularFreq(w,f),M=Math.exp(-R);return safeMin-_/F*M},d=w=>{const R=w*f*e,_=R*n+n,F=Math.pow(f,2)*Math.pow(w,2)*e,M=Math.exp(-R),I=calcAngularFreq(Math.pow(w,2),f);return(-u(w)+safeMin>0?-1:1)*((_-F)*M)/I}):(u=w=>{const S=Math.exp(-w*e),R=(w-n)*e+1;return-safeMin+S*R},d=w=>{const S=Math.exp(-w*e),R=(n-w)*(e*e);return S*R});const g=5/e,v=approximateRoot(u,d,g);if(e=secondsToMilliseconds(e),isNaN(v))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:e};{const w=Math.pow(v,2)*o;return{stiffness:w,damping:f*2*Math.sqrt(o*w),duration:e}}}const rootIterations=12;function approximateRoot(e,t,n){let o=n;for(let u=1;u<rootIterations;u++)o=o-e(o)/t(o);return o}function calcAngularFreq(e,t){return e*Math.sqrt(1-t*t)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(e,t){return t.some(n=>e[n]!==void 0)}function getSpringOptions(e){let t={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...e};if(!isSpringType(e,physicsKeys)&&isSpringType(e,durationKeys))if(e.visualDuration){const n=e.visualDuration,o=2*Math.PI/(n*1.2),u=o*o,d=2*clamp$1(.05,1,1-(e.bounce||0))*Math.sqrt(u);t={...t,mass:springDefaults.mass,stiffness:u,damping:d}}else{const n=findSpring(e);t={...t,...n,mass:springDefaults.mass},t.isResolvedFromDuration=!0}return t}function spring(e=springDefaults.visualDuration,t=springDefaults.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:o,restDelta:u}=n;const d=n.keyframes[0],f=n.keyframes[n.keyframes.length-1],g={done:!1,value:d},{stiffness:v,damping:w,mass:S,duration:R,velocity:_,isResolvedFromDuration:F}=getSpringOptions({...n,velocity:-millisecondsToSeconds(n.velocity||0)}),M=_||0,I=w/(2*Math.sqrt(v*S)),N=f-d,B=millisecondsToSeconds(Math.sqrt(v/S)),H=Math.abs(N)<5;o||(o=H?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),u||(u=H?springDefaults.restDelta.granular:springDefaults.restDelta.default);let U;if(I<1){const z=calcAngularFreq(B,I);U=j=>{const J=Math.exp(-I*B*j);return f-J*((M+I*B*N)/z*Math.sin(z*j)+N*Math.cos(z*j))}}else if(I===1)U=z=>f-Math.exp(-B*z)*(N+(M+B*N)*z);else{const z=B*Math.sqrt(I*I-1);U=j=>{const J=Math.exp(-I*B*j),ie=Math.min(z*j,300);return f-J*((M+I*B*N)*Math.sinh(ie)+z*N*Math.cosh(ie))/z}}const $={calculatedDuration:F&&R||null,next:z=>{const j=U(z);if(F)g.done=z>=R;else{let J=z===0?M:0;I<1&&(J=z===0?secondsToMilliseconds(M):calcGeneratorVelocity(U,z,j));const ie=Math.abs(J)<=o,se=Math.abs(f-j)<=u;g.done=ie&&se}return g.value=g.done?f:j,g},toString:()=>{const z=Math.min(calcGeneratorDuration($),maxGeneratorDuration),j=generateLinearEasing(J=>$.next(z*J).value,z,30);return z+"ms "+j},toTransition:()=>{}};return $}spring.applyToOptions=e=>{const t=createGeneratorEasing(e,100,spring);return e.ease=t.ease,e.duration=secondsToMilliseconds(t.duration),e.type="keyframes",e};function inertia({keyframes:e,velocity:t=0,power:n=.8,timeConstant:o=325,bounceDamping:u=10,bounceStiffness:d=500,modifyTarget:f,min:g,max:v,restDelta:w=.5,restSpeed:S}){const R=e[0],_={done:!1,value:R},F=ie=>g!==void 0&&ie<g||v!==void 0&&ie>v,M=ie=>g===void 0?v:v===void 0||Math.abs(g-ie)<Math.abs(v-ie)?g:v;let I=n*t;const N=R+I,B=f===void 0?N:f(N);B!==N&&(I=B-R);const H=ie=>-I*Math.exp(-ie/o),U=ie=>B+H(ie),$=ie=>{const se=H(ie),fe=U(ie);_.done=Math.abs(se)<=w,_.value=_.done?B:fe};let z,j;const J=ie=>{F(_.value)&&(z=ie,j=spring({keyframes:[_.value,M(_.value)],velocity:calcGeneratorVelocity(U,ie,_.value),damping:u,stiffness:d,restDelta:w,restSpeed:S}))};return J(0),{calculatedDuration:null,next:ie=>{let se=!1;return!j&&z===void 0&&(se=!0,$(ie),J(ie)),z!==void 0&&ie>=z?j.next(ie-z):(!se&&$(ie),_)}}}function createMixers(e,t,n){const o=[],u=n||MotionGlobalConfig.mix||mix,d=e.length-1;for(let f=0;f<d;f++){let g=u(e[f],e[f+1]);if(t){const v=Array.isArray(t)?t[f]||noop$1:t;g=pipe(v,g)}o.push(g)}return o}function interpolate(e,t,{clamp:n=!0,ease:o,mixer:u}={}){const d=e.length;if(invariant(d===t.length),d===1)return()=>t[0];if(d===2&&t[0]===t[1])return()=>t[1];const f=e[0]===e[1];e[0]>e[d-1]&&(e=[...e].reverse(),t=[...t].reverse());const g=createMixers(t,o,u),v=g.length,w=S=>{if(f&&S<e[0])return t[0];let R=0;if(v>1)for(;R<e.length-2&&!(S<e[R+1]);R++);const _=progress(e[R],e[R+1],S);return g[R](_)};return n?S=>w(clamp$1(e[0],e[d-1],S)):w}function fillOffset(e,t){const n=e[e.length-1];for(let o=1;o<=t;o++){const u=progress(0,t,o);e.push(mixNumber$1(n,1,u))}}function defaultOffset(e){const t=[0];return fillOffset(t,e.length-1),t}function convertOffsetToTimes(e,t){return e.map(n=>n*t)}function defaultEasing(e,t){return e.map(()=>t||easeInOut).splice(0,e.length-1)}function keyframes({duration:e=300,keyframes:t,times:n,ease:o="easeInOut"}){const u=isEasingArray(o)?o.map(easingDefinitionToFunction):easingDefinitionToFunction(o),d={done:!1,value:t[0]},f=convertOffsetToTimes(n&&n.length===t.length?n:defaultOffset(t),e),g=interpolate(f,t,{ease:Array.isArray(u)?u:defaultEasing(t,u)});return{calculatedDuration:e,next:v=>(d.value=g(v),d.done=v>=e,d)}}const isNotNull$1=e=>e!==null;function getFinalKeyframe$1(e,{repeat:t,repeatType:n="loop"},o,u=1){const d=e.filter(isNotNull$1),g=u<0||t&&n!=="loop"&&t%2===1?0:d.length-1;return!g||o===void 0?d[g]:o}const transitionTypeMap={decay:inertia,inertia,tween:keyframes,keyframes,spring};function replaceTransitionType(e){typeof e.type=="string"&&(e.type=transitionTypeMap[e.type])}class WithPromise{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const percentToProgress=e=>e/100;class JSAnimation extends WithPromise{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==time.now()&&this.tick(time.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;replaceTransitionType(t);const{type:n=keyframes,repeat:o=0,repeatDelay:u=0,repeatType:d,velocity:f=0}=t;let{keyframes:g}=t;const v=n||keyframes;v!==keyframes&&typeof g[0]!="number"&&(this.mixKeyframes=pipe(percentToProgress,mix(g[0],g[1])),g=[0,100]);const w=v({...t,keyframes:g});d==="mirror"&&(this.mirroredGenerator=v({...t,keyframes:[...g].reverse(),velocity:-f})),w.calculatedDuration===null&&(w.calculatedDuration=calcGeneratorDuration(w));const{calculatedDuration:S}=w;this.calculatedDuration=S,this.resolvedDuration=S+u,this.totalDuration=this.resolvedDuration*(o+1)-u,this.generator=w}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:o,totalDuration:u,mixKeyframes:d,mirroredGenerator:f,resolvedDuration:g,calculatedDuration:v}=this;if(this.startTime===null)return o.next(0);const{delay:w=0,keyframes:S,repeat:R,repeatType:_,repeatDelay:F,type:M,onUpdate:I,finalKeyframe:N}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-u/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const B=this.currentTime-w*(this.playbackSpeed>=0?1:-1),H=this.playbackSpeed>=0?B<0:B>u;this.currentTime=Math.max(B,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let U=this.currentTime,$=o;if(R){const ie=Math.min(this.currentTime,u)/g;let se=Math.floor(ie),fe=ie%1;!fe&&ie>=1&&(fe=1),fe===1&&se--,se=Math.min(se,R+1),!!(se%2)&&(_==="reverse"?(fe=1-fe,F&&(fe-=F/g)):_==="mirror"&&($=f)),U=clamp$1(0,1,fe)*g}const z=H?{done:!1,value:S[0]}:$.next(U);d&&(z.value=d(z.value));let{done:j}=z;!H&&v!==null&&(j=this.playbackSpeed>=0?this.currentTime>=u:this.currentTime<=0);const J=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&j);return J&&M!==inertia&&(z.value=getFinalKeyframe$1(S,this.options,N,this.speed)),I&&I(z.value),J&&this.finish(),z}then(t,n){return this.finished.then(t,n)}get duration(){return millisecondsToSeconds(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+millisecondsToSeconds(t)}get time(){return millisecondsToSeconds(this.currentTime)}set time(t){t=secondsToMilliseconds(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(time.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=frameloopDriver,startTime:n}=this.options;this.driver||(this.driver=t(u=>this.tick(u))),this.options.onPlay?.();const o=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=o):this.holdTime!==null?this.startTime=o-this.holdTime:this.startTime||(this.startTime=n??o),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(time.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function fillWildcards(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const radToDeg=e=>e*180/Math.PI,rotate=e=>{const t=radToDeg(Math.atan2(e[1],e[0]));return rebaseAngle(t)},matrix2dParsers={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate,rotateZ:rotate,skewX:e=>radToDeg(Math.atan(e[1])),skewY:e=>radToDeg(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},rebaseAngle=e=>(e=e%360,e<0&&(e+=360),e),rotateZ=rotate,scaleX=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),scaleY=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),matrix3dParsers={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX,scaleY,scale:e=>(scaleX(e)+scaleY(e))/2,rotateX:e=>rebaseAngle(radToDeg(Math.atan2(e[6],e[5]))),rotateY:e=>rebaseAngle(radToDeg(Math.atan2(-e[2],e[0]))),rotateZ,rotate:rotateZ,skewX:e=>radToDeg(Math.atan(e[4])),skewY:e=>radToDeg(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function defaultTransformValue(e){return e.includes("scale")?1:0}function parseValueFromTransform(e,t){if(!e||e==="none")return defaultTransformValue(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let o,u;if(n)o=matrix3dParsers,u=n;else{const g=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);o=matrix2dParsers,u=g}if(!u)return defaultTransformValue(t);const d=o[t],f=u[1].split(",").map(convertTransformToNumber);return typeof d=="function"?d(f):f[d]}const readTransformValue=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return parseValueFromTransform(n,t)};function convertTransformToNumber(e){return parseFloat(e.trim())}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),isNumOrPxType=e=>e===number||e===px,transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(e=>!transformKeys.has(e));function removeNonTranslationalTransform(e){const t=[];return nonTranslationalTransformKeys.forEach(n=>{const o=e.getValue(n);o!==void 0&&(t.push([n,o.get()]),o.set(n.startsWith("scale")?1:0))}),t}const positionalValues={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>parseValueFromTransform(t,"x"),y:(e,{transform:t})=>parseValueFromTransform(t,"y")};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1,isForced=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const e=Array.from(toResolve).filter(o=>o.needsMeasurement),t=new Set(e.map(o=>o.element)),n=new Map;t.forEach(o=>{const u=removeNonTranslationalTransform(o);u.length&&(n.set(o,u),o.render())}),e.forEach(o=>o.measureInitialState()),t.forEach(o=>{o.render();const u=n.get(o);u&&u.forEach(([d,f])=>{o.getValue(d)?.set(f)})}),e.forEach(o=>o.measureEndState()),e.forEach(o=>{o.suspendedScrollY!==void 0&&window.scrollTo(0,o.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(e=>e.complete(isForced)),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){isForced=!0,readAllKeyframes(),measureAllKeyframes(),isForced=!1}class KeyframeResolver{constructor(t,n,o,u,d,f=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=o,this.motionValue=u,this.element=d,this.isAsync=f}scheduleResolve(){this.state="scheduled",this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:o,motionValue:u}=this;if(t[0]===null){const d=u?.get(),f=t[t.length-1];if(d!==void 0)t[0]=d;else if(o&&n){const g=o.readValue(n,f);g!=null&&(t[0]=g)}t[0]===void 0&&(t[0]=f),u&&d===void 0&&u.set(t[0])}fillWildcards(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),toResolve.delete(this)}cancel(){this.state==="scheduled"&&(toResolve.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const isCSSVar=e=>e.startsWith("--");function setStyle(e,t,n){isCSSVar(t)?e.style.setProperty(t,n):e.style[t]=n}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0),supportsFlags={};function memoSupports(e,t){const n=memo(e);return()=>supportsFlags[t]??n()}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cubicBezierAsString=([e,t,n,o])=>`cubic-bezier(${e}, ${t}, ${n}, ${o})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(e,t){if(e)return typeof e=="function"?supportsLinearEasing()?generateLinearEasing(e,t):"ease-out":isBezierDefinition(e)?cubicBezierAsString(e):Array.isArray(e)?e.map(n=>mapEasingToNativeEasing(n,t)||supportedWaapiEasing.easeOut):supportedWaapiEasing[e]}function startWaapiAnimation(e,t,n,{delay:o=0,duration:u=300,repeat:d=0,repeatType:f="loop",ease:g="easeOut",times:v}={},w=void 0){const S={[t]:n};v&&(S.offset=v);const R=mapEasingToNativeEasing(g,u);Array.isArray(R)&&(S.easing=R);const _={delay:o,duration:u,easing:Array.isArray(R)?"linear":R,fill:"both",iterations:d+1,direction:f==="reverse"?"alternate":"normal"};return w&&(_.pseudoElement=w),e.animate(S,_)}function isGenerator(e){return typeof e=="function"&&"applyToOptions"in e}function applyGeneratorOptions({type:e,...t}){return isGenerator(e)&&supportsLinearEasing()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class NativeAnimation extends WithPromise{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:o,keyframes:u,pseudoElement:d,allowFlatten:f=!1,finalKeyframe:g,onComplete:v}=t;this.isPseudoElement=!!d,this.allowFlatten=f,this.options=t,invariant(typeof t.type!="string");const w=applyGeneratorOptions(t);this.animation=startWaapiAnimation(n,o,u,w,d),w.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!d){const S=getFinalKeyframe$1(u,this.options,g,this.speed);this.updateMotionValue?this.updateMotionValue(S):setStyle(n,o,S),this.animation.cancel()}v?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return millisecondsToSeconds(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+millisecondsToSeconds(t)}get time(){return millisecondsToSeconds(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=secondsToMilliseconds(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&supportsScrollTimeline()?(this.animation.timeline=t,noop$1):n(this)}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(e){return e in unsupportedEasingFunctions}function replaceStringEasing(e){typeof e.ease=="string"&&isUnsupportedEase(e.ease)&&(e.ease=unsupportedEasingFunctions[e.ease])}const sampleDelta=10;class NativeAnimationExtended extends NativeAnimation{constructor(t){replaceStringEasing(t),replaceTransitionType(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:o,onComplete:u,element:d,...f}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const g=new JSAnimation({...f,autoplay:!1}),v=secondsToMilliseconds(this.finishedTime??this.time);n.setWithVelocity(g.sample(v-sampleDelta).value,g.sample(v).value,sampleDelta),g.stop()}}const isAnimatable=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(complex.test(e)||e==="0")&&!e.startsWith("url("));function hasKeyframesChanged(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function canAnimate(e,t,n,o){const u=e[0];if(u===null)return!1;if(t==="display"||t==="visibility")return!0;const d=e[e.length-1],f=isAnimatable(u,t),g=isAnimatable(d,t);return!f||!g?!1:hasKeyframesChanged(e)||(n==="spring"||isGenerator(n))&&o}function makeAnimationInstant(e){e.duration=0,e.type="keyframes"}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]),supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function supportsBrowserAnimation(e){const{motionValue:t,name:n,repeatDelay:o,repeatType:u,damping:d,type:f}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:v,transformTemplate:w}=t.owner.getProps();return supportsWaapi()&&n&&acceleratedValues.has(n)&&(n!=="transform"||!w)&&!v&&!o&&u!=="mirror"&&d!==0&&f!=="inertia"}const MAX_RESOLVE_DELAY=40;class AsyncMotionValueAnimation extends WithPromise{constructor({autoplay:t=!0,delay:n=0,type:o="keyframes",repeat:u=0,repeatDelay:d=0,repeatType:f="loop",keyframes:g,name:v,motionValue:w,element:S,...R}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=time.now();const _={autoplay:t,delay:n,type:o,repeat:u,repeatDelay:d,repeatType:f,name:v,motionValue:w,element:S,...R},F=S?.KeyframeResolver||KeyframeResolver;this.keyframeResolver=new F(g,(M,I,N)=>this.onKeyframesResolved(M,I,_,!N),v,w,S),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,o,u){this.keyframeResolver=void 0;const{name:d,type:f,velocity:g,delay:v,isHandoff:w,onUpdate:S}=o;this.resolvedAt=time.now(),canAnimate(t,d,f,g)||((MotionGlobalConfig.instantAnimations||!v)&&S?.(getFinalKeyframe$1(t,o,n)),t[0]=t[t.length-1],makeAnimationInstant(o),o.repeat=0);const _={startTime:u?this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...o,keyframes:t},F=!w&&supportsBrowserAnimation(_)?new NativeAnimationExtended({..._,element:_.motionValue.owner.current}):new JSAnimation(_);F.finished.then(()=>this.notifyFinished()).catch(noop$1),this.pendingTimeline&&(this.stopTimeline=F.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=F}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),flushKeyframeResolvers()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(e){const t=splitCSSVariableRegex.exec(e);if(!t)return[,];const[,n,o,u]=t;return[`--${n??o}`,u]}function getVariableValue(e,t,n=1){const[o,u]=parseCSSVariable(e);if(!o)return;const d=window.getComputedStyle(t).getPropertyValue(o);if(d){const f=d.trim();return isNumericalString(f)?parseFloat(f):f}return isCSSVariableToken(u)?getVariableValue(u,t,n+1):u}function getValueTransition(e,t){return e?.[t]??e?.default??e}const positionalKeys=new Set(["width","height","top","left","right","bottom",...transformPropOrder]),auto={test:e=>e==="auto",parse:e=>e},testValueType=e=>t=>t.test(e),dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto],findDimensionValueType=e=>dimensionValueTypes.find(testValueType(e));function isNone(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||isZeroValueString(e):!0}const maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[o]=n.match(floatRegex)||[];if(!o)return e;const u=n.replace(o,"");let d=maxDefaults.has(t)?1:0;return o!==n&&(d*=100),t+"("+d+u+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:e=>{const t=e.match(functionRegex);return t?t.map(applyDefaultFilter).join(" "):e}},int={...number,transform:Math.round},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px},numberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,backgroundPositionX:px,backgroundPositionY:px,...transformValueTypes,zIndex:int,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter,WebkitFilter:filter},getDefaultValueType=e=>defaultValueTypes[e];function getAnimatableNone(e,t){let n=getDefaultValueType(e);return n!==filter&&(n=complex),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(e,t,n){let o=0,u;for(;o<e.length&&!u;){const d=e[o];typeof d=="string"&&!invalidTemplates.has(d)&&analyseComplexValue(d).values.length&&(u=e[o]),o++}if(u&&n)for(const d of t)e[d]=getAnimatableNone(n,u)}class DOMKeyframesResolver extends KeyframeResolver{constructor(t,n,o,u,d){super(t,n,o,u,d,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:o}=this;if(!n||!n.current)return;super.readKeyframes();for(let v=0;v<t.length;v++){let w=t[v];if(typeof w=="string"&&(w=w.trim(),isCSSVariableToken(w))){const S=getVariableValue(w,n.current);S!==void 0&&(t[v]=S),v===t.length-1&&(this.finalKeyframe=w)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(o)||t.length!==2)return;const[u,d]=t,f=findDimensionValueType(u),g=findDimensionValueType(d);if(f!==g)if(isNumOrPxType(f)&&isNumOrPxType(g))for(let v=0;v<t.length;v++){const w=t[v];typeof w=="string"&&(t[v]=parseFloat(w))}else positionalValues[o]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,o=[];for(let u=0;u<t.length;u++)(t[u]===null||isNone(t[u]))&&o.push(u);o.length&&makeNoneKeyframesAnimatable(t,o,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:o}=this;if(!t||!t.current)return;o==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[o](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const u=n[n.length-1];u!==void 0&&t.getValue(o,u).jump(u,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:o}=this;if(!t||!t.current)return;const u=t.getValue(n);u&&u.jump(this.measuredOrigin,!1);const d=o.length-1,f=o[d];o[d]=positionalValues[n](t.measureViewportBox(),window.getComputedStyle(t.current)),f!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=f),this.removedTransforms?.length&&this.removedTransforms.forEach(([g,v])=>{t.getValue(g).set(v)}),this.resolveNoneKeyframes()}}function resolveElements(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let o=document;const u=n?.[e]??o.querySelectorAll(e);return u?Array.from(u):[]}return Array.from(e)}const getValueAsType=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function isHTMLElement(e){return isObject$1(e)&&"offsetHeight"in e}const MAX_VELOCITY_DELTA=30,isFloat=e=>!isNaN(parseFloat(e));class MotionValue{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=o=>{const u=time.now();if(this.updatedAt!==u&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(o),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const d of this.dependents)d.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=time.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new SubscriptionManager);const o=this.events[t].add(n);return t==="change"?()=>{o(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:o}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,o){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-o}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(e,t){return new MotionValue(e,t)}const{schedule:microtask}=createRenderBatcher(queueMicrotask,!1),isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function setDragLock(e){return e==="x"||e==="y"?isDragging[e]?null:(isDragging[e]=!0,()=>{isDragging[e]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function setupGesture(e,t){const n=resolveElements(e),o=new AbortController,u={passive:!0,...t,signal:o.signal};return[n,u,()=>o.abort()]}function isValidHover(e){return!(e.pointerType==="touch"||isDragActive())}function hover(e,t,n={}){const[o,u,d]=setupGesture(e,n),f=g=>{if(!isValidHover(g))return;const{target:v}=g,w=t(v,g);if(typeof w!="function"||!v)return;const S=R=>{isValidHover(R)&&(w(R),v.removeEventListener("pointerleave",S))};v.addEventListener("pointerleave",S,u)};return o.forEach(g=>{g.addEventListener("pointerenter",f,u)}),d}const isNodeOrChild=(e,t)=>t?e===t?!0:isNodeOrChild(e,t.parentElement):!1,isPrimaryPointer=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,focusableElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(e){return focusableElements.has(e.tagName)||e.tabIndex!==-1}const isPressing=new WeakSet;function filterEvents(e){return t=>{t.key==="Enter"&&e(t)}}function firePointerEvent(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(e,t)=>{const n=e.currentTarget;if(!n)return;const o=filterEvents(()=>{if(isPressing.has(n))return;firePointerEvent(n,"down");const u=filterEvents(()=>{firePointerEvent(n,"up")}),d=()=>firePointerEvent(n,"cancel");n.addEventListener("keyup",u,t),n.addEventListener("blur",d,t)});n.addEventListener("keydown",o,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",o),t)};function isValidPressEvent(e){return isPrimaryPointer(e)&&!isDragActive()}function press(e,t,n={}){const[o,u,d]=setupGesture(e,n),f=g=>{const v=g.currentTarget;if(!isValidPressEvent(g))return;isPressing.add(v);const w=t(v,g),S=(F,M)=>{window.removeEventListener("pointerup",R),window.removeEventListener("pointercancel",_),isPressing.has(v)&&isPressing.delete(v),isValidPressEvent(F)&&typeof w=="function"&&w(F,{success:M})},R=F=>{S(F,v===window||v===document||n.useGlobalTarget||isNodeOrChild(v,F.target))},_=F=>{S(F,!1)};window.addEventListener("pointerup",R,u),window.addEventListener("pointercancel",_,u)};return o.forEach(g=>{(n.useGlobalTarget?window:g).addEventListener("pointerdown",f,u),isHTMLElement(g)&&(g.addEventListener("focus",w=>enableKeyboardPress(w,u)),!isElementKeyboardAccessible(g)&&!g.hasAttribute("tabindex")&&(g.tabIndex=0))}),d}function isSVGElement(e){return isObject$1(e)&&"ownerSVGElement"in e}function isSVGSVGElement(e){return isSVGElement(e)&&e.tagName==="svg"}const isMotionValue=e=>!!(e&&e.getVelocity),valueTypes=[...dimensionValueTypes,color,complex],findValueType=e=>valueTypes.find(testValueType(e)),MotionConfigContext=reactExports.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function usePresence(e=!0){const t=reactExports.useContext(PresenceContext);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:o,register:u}=t,d=reactExports.useId();reactExports.useEffect(()=>{if(e)return u(d)},[e]);const f=reactExports.useCallback(()=>e&&o&&o(d),[d,o,e]);return!n&&o?[!1,f]:[!0]}const LazyContext=reactExports.createContext({strict:!1}),featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const e in featureProps)featureDefinitions[e]={isEnabled:t=>featureProps[e].some(n=>!!t[n])};function loadFeatures(e){for(const t in e)featureDefinitions[t]={...featureDefinitions[t],...e[t]}}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||validMotionProps.has(e)}let shouldForward=e=>!isValidMotionProp(e);function loadExternalIsValidProp(e){typeof e=="function"&&(shouldForward=t=>t.startsWith("on")?!isValidMotionProp(t):e(t))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(e,t,n){const o={};for(const u in e)u==="values"&&typeof e.values=="object"||(shouldForward(u)||n===!0&&isValidMotionProp(u)||!t&&!isValidMotionProp(u)||e.draggable&&u.startsWith("onDrag"))&&(o[u]=e[u]);return o}const MotionContext=reactExports.createContext({});function isAnimationControls(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function isVariantLabel(e){return typeof e=="string"||Array.isArray(e)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(e){return isAnimationControls(e.animate)||variantProps.some(t=>isVariantLabel(e[t]))}function isVariantNode(e){return!!(isControllingVariants(e)||e.variants)}function getCurrentTreeVariants(e,t){if(isControllingVariants(e)){const{initial:n,animate:o}=e;return{initial:n===!1||isVariantLabel(n)?n:void 0,animate:isVariantLabel(o)?o:void 0}}return e.inherit!==!1?t:{}}function useCreateMotionContext(e){const{initial:t,animate:n}=getCurrentTreeVariants(e,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:t,animate:n}),[variantLabelsAsDependency(t),variantLabelsAsDependency(n)])}function variantLabelsAsDependency(e){return Array.isArray(e)?e.join(" "):e}const scaleCorrectors={};function addScaleCorrector(e){for(const t in e)scaleCorrectors[t]=e[t],isCSSVariableName(t)&&(scaleCorrectors[t].isCSSVariable=!0)}function isForcedMotionValue(e,{layout:t,layoutId:n}){return transformProps.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!scaleCorrectors[e]||e==="opacity")}const translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(e,t,n){let o="",u=!0;for(let d=0;d<numTransforms;d++){const f=transformPropOrder[d],g=e[f];if(g===void 0)continue;let v=!0;if(typeof g=="number"?v=g===(f.startsWith("scale")?1:0):v=parseFloat(g)===0,!v||n){const w=getValueAsType(g,numberValueTypes[f]);if(!v){u=!1;const S=translateAlias[f]||f;o+=`${S}(${w}) `}n&&(t[f]=w)}}return o=o.trim(),n?o=n(t,u?"":o):u&&(o="none"),o}function buildHTMLStyles(e,t,n){const{style:o,vars:u,transformOrigin:d}=e;let f=!1,g=!1;for(const v in t){const w=t[v];if(transformProps.has(v)){f=!0;continue}else if(isCSSVariableName(v)){u[v]=w;continue}else{const S=getValueAsType(w,numberValueTypes[v]);v.startsWith("origin")?(g=!0,d[v]=S):o[v]=S}}if(t.transform||(f||n?o.transform=buildTransform(t,e.transform,n):o.transform&&(o.transform="none")),g){const{originX:v="50%",originY:w="50%",originZ:S=0}=d;o.transformOrigin=`${v} ${w} ${S}`}}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function copyRawValuesOnly(e,t,n){for(const o in t)!isMotionValue(t[o])&&!isForcedMotionValue(o,n)&&(e[o]=t[o])}function useInitialMotionValues({transformTemplate:e},t){return reactExports.useMemo(()=>{const n=createHtmlRenderState();return buildHTMLStyles(n,t,e),Object.assign({},n.vars,n.style)},[t])}function useStyle(e,t){const n=e.style||{},o={};return copyRawValuesOnly(o,n,e),Object.assign(o,useInitialMotionValues(e,t)),o}function useHTMLProps(e,t){const n={},o=useStyle(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=o,n}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(e,t,n=1,o=0,u=!0){e.pathLength=1;const d=u?dashKeys:camelKeys;e[d.offset]=px.transform(-o);const f=px.transform(t),g=px.transform(n);e[d.array]=`${f} ${g}`}function buildSVGAttrs(e,{attrX:t,attrY:n,attrScale:o,pathLength:u,pathSpacing:d=1,pathOffset:f=0,...g},v,w,S){if(buildHTMLStyles(e,g,w),v){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:R,style:_}=e;R.transform&&(_.transform=R.transform,delete R.transform),(_.transform||R.transformOrigin)&&(_.transformOrigin=R.transformOrigin??"50% 50%",delete R.transformOrigin),_.transform&&(_.transformBox=S?.transformBox??"fill-box",delete R.transformBox),t!==void 0&&(R.x=t),n!==void 0&&(R.y=n),o!==void 0&&(R.scale=o),u!==void 0&&buildSVGPath(R,u,d,f,!1)}const createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),isSVGTag=e=>typeof e=="string"&&e.toLowerCase()==="svg";function useSVGProps(e,t,n,o){const u=reactExports.useMemo(()=>{const d=createSvgRenderState();return buildSVGAttrs(d,t,isSVGTag(o),e.transformTemplate,e.style),{...d.attrs,style:{...d.style}}},[t]);if(e.style){const d={};copyRawValuesOnly(d,e.style,e),u.style={...d,...u.style}}return u}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(e){return typeof e!="string"||e.includes("-")?!1:!!(lowercaseSVGElements.indexOf(e)>-1||/[A-Z]/u.test(e))}function useRender(e,t,n,{latestValues:o},u,d=!1){const g=(isSVGComponent(e)?useSVGProps:useHTMLProps)(t,o,u,e),v=filterProps(t,typeof e=="string",d),w=e!==reactExports.Fragment?{...v,...g,ref:n}:{},{children:S}=t,R=reactExports.useMemo(()=>isMotionValue(S)?S.get():S,[S]);return reactExports.createElement(e,{...w,children:R})}function getValueState(e){const t=[{},{}];return e?.values.forEach((n,o)=>{t[0][o]=n.get(),t[1][o]=n.getVelocity()}),t}function resolveVariantFromProps(e,t,n,o){if(typeof t=="function"){const[u,d]=getValueState(o);t=t(n!==void 0?n:e.custom,u,d)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[u,d]=getValueState(o);t=t(n!==void 0?n:e.custom,u,d)}return t}function resolveMotionValue(e){return isMotionValue(e)?e.get():e}function makeState({scrapeMotionValuesFromProps:e,createRenderState:t},n,o,u){return{latestValues:makeLatestValues(n,o,u,e),renderState:t()}}function makeLatestValues(e,t,n,o){const u={},d=o(e,{});for(const _ in d)u[_]=resolveMotionValue(d[_]);let{initial:f,animate:g}=e;const v=isControllingVariants(e),w=isVariantNode(e);t&&w&&!v&&e.inherit!==!1&&(f===void 0&&(f=t.initial),g===void 0&&(g=t.animate));let S=n?n.initial===!1:!1;S=S||f===!1;const R=S?g:f;if(R&&typeof R!="boolean"&&!isAnimationControls(R)){const _=Array.isArray(R)?R:[R];for(let F=0;F<_.length;F++){const M=resolveVariantFromProps(e,_[F]);if(M){const{transitionEnd:I,transition:N,...B}=M;for(const H in B){let U=B[H];if(Array.isArray(U)){const $=S?U.length-1:0;U=U[$]}U!==null&&(u[H]=U)}for(const H in I)u[H]=I[H]}}}return u}const makeUseVisualState=e=>(t,n)=>{const o=reactExports.useContext(MotionContext),u=reactExports.useContext(PresenceContext),d=()=>makeState(e,t,o,u);return n?d():useConstant(d)};function scrapeMotionValuesFromProps$1(e,t,n){const{style:o}=e,u={};for(const d in o)(isMotionValue(o[d])||t.style&&isMotionValue(t.style[d])||isForcedMotionValue(d,e)||n?.getValue(d)?.liveStyle!==void 0)&&(u[d]=o[d]);return u}const useHTMLVisualState=makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState});function scrapeMotionValuesFromProps(e,t,n){const o=scrapeMotionValuesFromProps$1(e,t,n);for(const u in e)if(isMotionValue(e[u])||isMotionValue(t[u])){const d=transformPropOrder.indexOf(u)!==-1?"attr"+u.charAt(0).toUpperCase()+u.substring(1):u;o[d]=e[u]}return o}const useSVGVisualState=makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState}),motionComponentSymbol=Symbol.for("motionComponentSymbol");function isRefObject(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function useMotionRef(e,t,n){return reactExports.useCallback(o=>{o&&e.onMount&&e.onMount(o),t&&(o?t.mount(o):t.unmount()),n&&(typeof n=="function"?n(o):isRefObject(n)&&(n.current=o))},[t])}const camelToDash=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId),SwitchLayoutGroupContext=reactExports.createContext({});function useVisualElement(e,t,n,o,u){const{visualElement:d}=reactExports.useContext(MotionContext),f=reactExports.useContext(LazyContext),g=reactExports.useContext(PresenceContext),v=reactExports.useContext(MotionConfigContext).reducedMotion,w=reactExports.useRef(null);o=o||f.renderer,!w.current&&o&&(w.current=o(e,{visualState:t,parent:d,props:n,presenceContext:g,blockInitialAnimation:g?g.initial===!1:!1,reducedMotionConfig:v}));const S=w.current,R=reactExports.useContext(SwitchLayoutGroupContext);S&&!S.projection&&u&&(S.type==="html"||S.type==="svg")&&createProjectionNode$1(w.current,n,u,R);const _=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{S&&_.current&&S.update(n,g)});const F=n[optimizedAppearDataAttribute],M=reactExports.useRef(!!F&&!window.MotionHandoffIsComplete?.(F)&&window.MotionHasOptimisedAnimation?.(F));return useIsomorphicLayoutEffect$1(()=>{S&&(_.current=!0,window.MotionIsMounted=!0,S.updateFeatures(),S.scheduleRenderMicrotask(),M.current&&S.animationState&&S.animationState.animateChanges())}),reactExports.useEffect(()=>{S&&(!M.current&&S.animationState&&S.animationState.animateChanges(),M.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(F)}),M.current=!1),S.enteringChildren=void 0)}),S}function createProjectionNode$1(e,t,n,o){const{layoutId:u,layout:d,drag:f,dragConstraints:g,layoutScroll:v,layoutRoot:w,layoutCrossfade:S}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:getClosestProjectingNode(e.parent)),e.projection.setOptions({layoutId:u,layout:d,alwaysMeasureLayout:!!f||g&&isRefObject(g),visualElement:e,animationType:typeof d=="string"?d:"both",initialPromotionConfig:o,crossfade:S,layoutScroll:v,layoutRoot:w})}function getClosestProjectingNode(e){if(e)return e.options.allowProjection!==!1?e.projection:getClosestProjectingNode(e.parent)}function createMotionComponent(e,{forwardMotionProps:t=!1}={},n,o){n&&loadFeatures(n);const u=isSVGComponent(e)?useSVGVisualState:useHTMLVisualState;function d(g,v){let w;const S={...reactExports.useContext(MotionConfigContext),...g,layoutId:useLayoutId(g)},{isStatic:R}=S,_=useCreateMotionContext(g),F=u(g,R);if(!R&&isBrowser){useStrictMode();const M=getProjectionFunctionality(S);w=M.MeasureLayout,_.visualElement=useVisualElement(e,F,S,o,M.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:_,children:[w&&_.visualElement?jsxRuntimeExports.jsx(w,{visualElement:_.visualElement,...S}):null,useRender(e,g,useMotionRef(F,_.visualElement,v),F,R,t)]})}d.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const f=reactExports.forwardRef(d);return f[motionComponentSymbol]=e,f}function useLayoutId({layoutId:e}){const t=reactExports.useContext(LayoutGroupContext).id;return t&&e!==void 0?t+"-"+e:e}function useStrictMode(e,t){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(e){const{drag:t,layout:n}=featureDefinitions;if(!t&&!n)return{};const o={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?o.MeasureLayout:void 0,ProjectionNode:o.ProjectionNode}}function createMotionProxy(e,t){if(typeof Proxy>"u")return createMotionComponent;const n=new Map,o=(d,f)=>createMotionComponent(d,f,e,t),u=(d,f)=>o(d,f);return new Proxy(u,{get:(d,f)=>f==="create"?o:(n.has(f)||n.set(f,createMotionComponent(f,void 0,e,t)),n.get(f))})}function convertBoundingBoxToBox({top:e,left:t,right:n,bottom:o}){return{x:{min:t,max:n},y:{min:e,max:o}}}function convertBoxToBoundingBox({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function transformBoxPoints(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),o=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:o.y,right:o.x}}function isIdentityScale(e){return e===void 0||e===1}function hasScale({scale:e,scaleX:t,scaleY:n}){return!isIdentityScale(e)||!isIdentityScale(t)||!isIdentityScale(n)}function hasTransform(e){return hasScale(e)||has2DTranslate(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function has2DTranslate(e){return is2DTranslate(e.x)||is2DTranslate(e.y)}function is2DTranslate(e){return e&&e!=="0%"}function scalePoint(e,t,n){const o=e-n,u=t*o;return n+u}function applyPointDelta(e,t,n,o,u){return u!==void 0&&(e=scalePoint(e,u,o)),scalePoint(e,n,o)+t}function applyAxisDelta(e,t=0,n=1,o,u){e.min=applyPointDelta(e.min,t,n,o,u),e.max=applyPointDelta(e.max,t,n,o,u)}function applyBoxDelta(e,{x:t,y:n}){applyAxisDelta(e.x,t.translate,t.scale,t.originPoint),applyAxisDelta(e.y,n.translate,n.scale,n.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(e,t,n,o=!1){const u=n.length;if(!u)return;t.x=t.y=1;let d,f;for(let g=0;g<u;g++){d=n[g],f=d.projectionDelta;const{visualElement:v}=d.options;v&&v.props.style&&v.props.style.display==="contents"||(o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&transformBox(e,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),f&&(t.x*=f.x.scale,t.y*=f.y.scale,applyBoxDelta(e,f)),o&&hasTransform(d.latestValues)&&transformBox(e,d.latestValues))}t.x<TREE_SCALE_SNAP_MAX&&t.x>TREE_SCALE_SNAP_MIN&&(t.x=1),t.y<TREE_SCALE_SNAP_MAX&&t.y>TREE_SCALE_SNAP_MIN&&(t.y=1)}function translateAxis(e,t){e.min=e.min+t,e.max=e.max+t}function transformAxis(e,t,n,o,u=.5){const d=mixNumber$1(e.min,e.max,u);applyAxisDelta(e,t,n,d,o)}function transformBox(e,t){transformAxis(e.x,t.x,t.scaleX,t.scale,t.originX),transformAxis(e.y,t.y,t.scaleY,t.scale,t.originY)}function measureViewportBox(e,t){return convertBoundingBoxToBox(transformBoxPoints(e.getBoundingClientRect(),t))}function measurePageBox(e,t,n){const o=measureViewportBox(e,n),{scroll:u}=t;return u&&(translateAxis(o.x,u.offset.x),translateAxis(o.y,u.offset.y)),o}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()}),prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>prefersReducedMotion.current=e.matches;e.addEventListener("change",t),t()}else prefersReducedMotion.current=!1}const visualElementStore=new WeakMap;function updateMotionValuesFromProps(e,t,n){for(const o in t){const u=t[o],d=n[o];if(isMotionValue(u))e.addValue(o,u);else if(isMotionValue(d))e.addValue(o,motionValue(u,{owner:e}));else if(d!==u)if(e.hasValue(o)){const f=e.getValue(o);f.liveStyle===!0?f.jump(u):f.hasAnimated||f.set(u)}else{const f=e.getStaticValue(o);e.addValue(o,motionValue(f!==void 0?f:u,{owner:e}))}}for(const o in n)t[o]===void 0&&e.removeValue(o);return t}const propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(t,n,o){return{}}constructor({parent:t,props:n,presenceContext:o,reducedMotionConfig:u,blockInitialAnimation:d,visualState:f},g={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const _=time.now();this.renderScheduledAt<_&&(this.renderScheduledAt=_,frame.render(this.render,!1,!0))};const{latestValues:v,renderState:w}=f;this.latestValues=v,this.baseTarget={...v},this.initialValues=n.initial?{...v}:{},this.renderState=w,this.parent=t,this.props=n,this.presenceContext=o,this.depth=t?t.depth+1:0,this.reducedMotionConfig=u,this.options=g,this.blockInitialAnimation=!!d,this.isControllingVariants=isControllingVariants(n),this.isVariantNode=isVariantNode(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:S,...R}=this.scrapeMotionValuesFromProps(n,{},this);for(const _ in R){const F=R[_];v[_]!==void 0&&isMotionValue(F)&&F.set(v[_])}}mount(t){this.current=t,visualElementStore.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,o)=>this.bindToMotionValue(o,n)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const o=transformProps.has(t);o&&this.onBindTransform&&this.onBindTransform();const u=n.on("change",f=>{this.latestValues[t]=f,this.props.onUpdate&&frame.preRender(this.notifyUpdate),o&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let d;window.MotionCheckAppearSync&&(d=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{u(),d&&d(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in featureDefinitions){const n=featureDefinitions[t];if(!n)continue;const{isEnabled:o,Feature:u}=n;if(!this.features[t]&&u&&o(this.props)&&(this.features[t]=new u(this)),this.features[t]){const d=this.features[t];d.isMounted?d.update():(d.mount(),d.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let o=0;o<propEventHandlers.length;o++){const u=propEventHandlers[o];this.propEventSubscriptions[u]&&(this.propEventSubscriptions[u](),delete this.propEventSubscriptions[u]);const d="on"+u,f=t[d];f&&(this.propEventSubscriptions[u]=this.on(u,f))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const o=this.values.get(t);n!==o&&(o&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let o=this.values.get(t);return o===void 0&&n!==void 0&&(o=motionValue(n===null?void 0:n,{owner:this}),this.addValue(t,o)),o}readValue(t,n){let o=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return o!=null&&(typeof o=="string"&&(isNumericalString(o)||isZeroValueString(o))?o=parseFloat(o):!findValueType(o)&&complex.test(n)&&(o=getAnimatableNone(t,n)),this.setBaseTarget(t,isMotionValue(o)?o.get():o)),isMotionValue(o)?o.get():o}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let o;if(typeof n=="string"||typeof n=="object"){const d=resolveVariantFromProps(this.props,n,this.presenceContext?.custom);d&&(o=d[t])}if(n&&o!==void 0)return o;const u=this.getBaseTargetFromProps(this.props,t);return u!==void 0&&!isMotionValue(u)?u:this.initialValues[t]!==void 0&&o===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new SubscriptionManager),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){microtask.render(this.render)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:o}){delete n[t],delete o[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;isMotionValue(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function renderHTML(e,{style:t,vars:n},o,u){const d=e.style;let f;for(f in t)d[f]=t[f];u?.applyProjectionStyles(d,o);for(f in n)d.setProperty(f,n[f])}function getComputedStyle$1(e){return window.getComputedStyle(e)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(t,n){if(transformProps.has(n))return this.projection?.isProjecting?defaultTransformValue(n):readTransformValue(t,n);{const o=getComputedStyle$1(t),u=(isCSSVariableName(n)?o.getPropertyValue(n):o[n])||0;return typeof u=="string"?u.trim():u}}measureInstanceViewportBox(t,{transformPagePoint:n}){return measureViewportBox(t,n)}build(t,n,o){buildHTMLStyles(t,n,o.transformTemplate)}scrapeMotionValuesFromProps(t,n,o){return scrapeMotionValuesFromProps$1(t,n,o)}}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(e,t,n,o){renderHTML(e,t,void 0,o);for(const u in t.attrs)e.setAttribute(camelCaseAttributes.has(u)?u:camelToDash(u),t.attrs[u])}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(transformProps.has(n)){const o=getDefaultValueType(n);return o&&o.default||0}return n=camelCaseAttributes.has(n)?n:camelToDash(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,o){return scrapeMotionValuesFromProps(t,n,o)}build(t,n,o){buildSVGAttrs(t,n,this.isSVGTag,o.transformTemplate,o.style)}renderInstance(t,n,o,u){renderSVG(t,n,o,u)}mount(t){this.isSVGTag=isSVGTag(t.tagName),super.mount(t)}}const createDomVisualElement=(e,t)=>isSVGComponent(e)?new SVGVisualElement(t):new HTMLVisualElement(t,{allowProjection:e!==reactExports.Fragment});function resolveVariant(e,t,n){const o=e.getProps();return resolveVariantFromProps(o,t,n!==void 0?n:o.custom,e)}const isKeyframesTarget=e=>Array.isArray(e);function setMotionValue(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,motionValue(n))}function resolveFinalValueInKeyframes(e){return isKeyframesTarget(e)?e[e.length-1]||0:e}function setTarget(e,t){const n=resolveVariant(e,t);let{transitionEnd:o={},transition:u={},...d}=n||{};d={...d,...o};for(const f in d){const g=resolveFinalValueInKeyframes(d[f]);setMotionValue(e,f,g)}}function isWillChangeMotionValue(e){return!!(isMotionValue(e)&&e.add)}function addValueToWillChange(e,t){const n=e.getValue("willChange");if(isWillChangeMotionValue(n))return n.add(t);if(!n&&MotionGlobalConfig.WillChange){const o=new MotionGlobalConfig.WillChange("auto");e.addValue("willChange",o),o.add(t)}}function getOptimisedAppearId(e){return e.props[optimizedAppearDataAttribute]}const isNotNull=e=>e!==null;function getFinalKeyframe(e,{repeat:t,repeatType:n="loop"},o){const u=e.filter(isNotNull),d=t&&n!=="loop"&&t%2===1?0:u.length-1;return u[d]}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(e,{keyframes:t})=>t.length>2?keyframesTransition:transformProps.has(e)?e.startsWith("scale")?criticallyDampedSpring(t[1]):underDampedSpring:ease;function isTransitionDefined({when:e,delay:t,delayChildren:n,staggerChildren:o,staggerDirection:u,repeat:d,repeatType:f,repeatDelay:g,from:v,elapsed:w,...S}){return!!Object.keys(S).length}const animateMotionValue=(e,t,n,o={},u,d)=>f=>{const g=getValueTransition(o,e)||{},v=g.delay||o.delay||0;let{elapsed:w=0}=o;w=w-secondsToMilliseconds(v);const S={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...g,delay:-w,onUpdate:_=>{t.set(_),g.onUpdate&&g.onUpdate(_)},onComplete:()=>{f(),g.onComplete&&g.onComplete()},name:e,motionValue:t,element:d?void 0:u};isTransitionDefined(g)||Object.assign(S,getDefaultTransition(e,S)),S.duration&&(S.duration=secondsToMilliseconds(S.duration)),S.repeatDelay&&(S.repeatDelay=secondsToMilliseconds(S.repeatDelay)),S.from!==void 0&&(S.keyframes[0]=S.from);let R=!1;if((S.type===!1||S.duration===0&&!S.repeatDelay)&&(makeAnimationInstant(S),S.delay===0&&(R=!0)),(MotionGlobalConfig.instantAnimations||MotionGlobalConfig.skipAnimations)&&(R=!0,makeAnimationInstant(S),S.delay=0),S.allowFlatten=!g.type&&!g.ease,R&&!d&&t.get()!==void 0){const _=getFinalKeyframe(S.keyframes,g);if(_!==void 0){frame.update(()=>{S.onUpdate(_),S.onComplete()});return}}return g.isSync?new JSAnimation(S):new AsyncMotionValueAnimation(S)};function shouldBlockAnimation({protectedKeys:e,needsAnimating:t},n){const o=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,o}function animateTarget(e,t,{delay:n=0,transitionOverride:o,type:u}={}){let{transition:d=e.getDefaultTransition(),transitionEnd:f,...g}=t;o&&(d=o);const v=[],w=u&&e.animationState&&e.animationState.getState()[u];for(const S in g){const R=e.getValue(S,e.latestValues[S]??null),_=g[S];if(_===void 0||w&&shouldBlockAnimation(w,S))continue;const F={delay:n,...getValueTransition(d||{},S)},M=R.get();if(M!==void 0&&!R.isAnimating&&!Array.isArray(_)&&_===M&&!F.velocity)continue;let I=!1;if(window.MotionHandoffAnimation){const B=getOptimisedAppearId(e);if(B){const H=window.MotionHandoffAnimation(B,S,frame);H!==null&&(F.startTime=H,I=!0)}}addValueToWillChange(e,S),R.start(animateMotionValue(S,R,_,e.shouldReduceMotion&&positionalKeys.has(S)?{type:!1}:F,e,I));const N=R.animation;N&&v.push(N)}return f&&Promise.all(v).then(()=>{frame.update(()=>{f&&setTarget(e,f)})}),v}function calcChildStagger(e,t,n,o=0,u=1){const d=Array.from(e).sort((w,S)=>w.sortNodePosition(S)).indexOf(t),f=e.size,g=(f-1)*o;return typeof n=="function"?n(d,f):u===1?d*o:g-d*o}function animateVariant(e,t,n={}){const o=resolveVariant(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:u=e.getDefaultTransition()||{}}=o||{};n.transitionOverride&&(u=n.transitionOverride);const d=o?()=>Promise.all(animateTarget(e,o,n)):()=>Promise.resolve(),f=e.variantChildren&&e.variantChildren.size?(v=0)=>{const{delayChildren:w=0,staggerChildren:S,staggerDirection:R}=u;return animateChildren(e,t,v,w,S,R,n)}:()=>Promise.resolve(),{when:g}=u;if(g){const[v,w]=g==="beforeChildren"?[d,f]:[f,d];return v().then(()=>w())}else return Promise.all([d(),f(n.delay)])}function animateChildren(e,t,n=0,o=0,u=0,d=1,f){const g=[];for(const v of e.variantChildren)v.notify("AnimationStart",t),g.push(animateVariant(v,t,{...f,delay:n+(typeof o=="function"?0:o)+calcChildStagger(e.variantChildren,v,o,u,d)}).then(()=>v.notify("AnimationComplete",t)));return Promise.all(g)}function animateVisualElement(e,t,n={}){e.notify("AnimationStart",t);let o;if(Array.isArray(t)){const u=t.map(d=>animateVariant(e,d,n));o=Promise.all(u)}else if(typeof t=="string")o=animateVariant(e,t,n);else{const u=typeof t=="function"?resolveVariant(e,t,n.custom):t;o=Promise.all(animateTarget(e,u,n))}return o.then(()=>{e.notify("AnimationComplete",t)})}function shallowCompare(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let o=0;o<n;o++)if(t[o]!==e[o])return!1;return!0}const numVariantProps=variantProps.length;function getVariantContext(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?getVariantContext(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<numVariantProps;n++){const o=variantProps[n],u=e.props[o];(isVariantLabel(u)||u===!1)&&(t[o]=u)}return t}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(e){return t=>Promise.all(t.map(({animation:n,options:o})=>animateVisualElement(e,n,o)))}function createAnimationState(e){let t=animateList(e),n=createState(),o=!0;const u=v=>(w,S)=>{const R=resolveVariant(e,S,v==="exit"?e.presenceContext?.custom:void 0);if(R){const{transition:_,transitionEnd:F,...M}=R;w={...w,...M,...F}}return w};function d(v){t=v(e)}function f(v){const{props:w}=e,S=getVariantContext(e.parent)||{},R=[],_=new Set;let F={},M=1/0;for(let N=0;N<numAnimationTypes;N++){const B=reversePriorityOrder[N],H=n[B],U=w[B]!==void 0?w[B]:S[B],$=isVariantLabel(U),z=B===v?H.isActive:null;z===!1&&(M=N);let j=U===S[B]&&U!==w[B]&&$;if(j&&o&&e.manuallyAnimateOnMount&&(j=!1),H.protectedKeys={...F},!H.isActive&&z===null||!U&&!H.prevProp||isAnimationControls(U)||typeof U=="boolean")continue;const J=checkVariantsDidChange(H.prevProp,U);let ie=J||B===v&&H.isActive&&!j&&$||N>M&&$,se=!1;const fe=Array.isArray(U)?U:[U];let de=fe.reduce(u(B),{});z===!1&&(de={});const{prevResolvedValues:Ce={}}=H,be={...Ce,...de},xe=oe=>{ie=!0,_.has(oe)&&(se=!0,_.delete(oe)),H.needsAnimating[oe]=!0;const ee=e.getValue(oe);ee&&(ee.liveStyle=!1)};for(const oe in be){const ee=de[oe],Z=Ce[oe];if(F.hasOwnProperty(oe))continue;let Q=!1;isKeyframesTarget(ee)&&isKeyframesTarget(Z)?Q=!shallowCompare(ee,Z):Q=ee!==Z,Q?ee!=null?xe(oe):_.add(oe):ee!==void 0&&_.has(oe)?xe(oe):H.protectedKeys[oe]=!0}H.prevProp=U,H.prevResolvedValues=de,H.isActive&&(F={...F,...de}),o&&e.blockInitialAnimation&&(ie=!1);const Ee=j&&J;ie&&(!Ee||se)&&R.push(...fe.map(oe=>{const ee={type:B};if(typeof oe=="string"&&o&&!Ee&&e.manuallyAnimateOnMount&&e.parent){const{parent:Z}=e,Q=resolveVariant(Z,oe);if(Z.enteringChildren&&Q){const{delayChildren:K}=Q.transition||{};ee.delay=calcChildStagger(Z.enteringChildren,e,K)}}return{animation:oe,options:ee}}))}if(_.size){const N={};if(typeof w.initial!="boolean"){const B=resolveVariant(e,Array.isArray(w.initial)?w.initial[0]:w.initial);B&&B.transition&&(N.transition=B.transition)}_.forEach(B=>{const H=e.getBaseTarget(B),U=e.getValue(B);U&&(U.liveStyle=!0),N[B]=H??null}),R.push({animation:N})}let I=!!R.length;return o&&(w.initial===!1||w.initial===w.animate)&&!e.manuallyAnimateOnMount&&(I=!1),o=!1,I?t(R):Promise.resolve()}function g(v,w){if(n[v].isActive===w)return Promise.resolve();e.variantChildren?.forEach(R=>R.animationState?.setActive(v,w)),n[v].isActive=w;const S=f(v);for(const R in n)n[R].protectedKeys={};return S}return{animateChanges:f,setActive:g,setAnimateFunction:d,getState:()=>n,reset:()=>{n=createState()}}}function checkVariantsDidChange(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!shallowCompare(t,e):!1}function createTypeState(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class Feature{constructor(t){this.isMounted=!1,this.node=t}update(){}}class AnimationFeature extends Feature{constructor(t){super(t),t.animationState||(t.animationState=createAnimationState(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();isAnimationControls(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===o)return;const u=this.node.animationState.setActive("exit",!t);n&&!t&&u.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}};function addDomEvent(e,t,n,o={passive:!0}){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n)}function extractEventInfo(e){return{point:{x:e.pageX,y:e.pageY}}}const addPointerInfo=e=>t=>isPrimaryPointer(t)&&e(t,extractEventInfo(t));function addPointerEvent(e,t,n,o){return addDomEvent(e,t,addPointerInfo(n),o)}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(e){return e.max-e.min}function isNear(e,t,n){return Math.abs(e-t)<=n}function calcAxisDelta(e,t,n,o=.5){e.origin=o,e.originPoint=mixNumber$1(t.min,t.max,e.origin),e.scale=calcLength(n)/calcLength(t),e.translate=mixNumber$1(n.min,n.max,e.origin)-e.originPoint,(e.scale>=SCALE_MIN&&e.scale<=SCALE_MAX||isNaN(e.scale))&&(e.scale=1),(e.translate>=TRANSLATE_MIN&&e.translate<=TRANSLATE_MAX||isNaN(e.translate))&&(e.translate=0)}function calcBoxDelta(e,t,n,o){calcAxisDelta(e.x,t.x,n.x,o?o.originX:void 0),calcAxisDelta(e.y,t.y,n.y,o?o.originY:void 0)}function calcRelativeAxis(e,t,n){e.min=n.min+t.min,e.max=e.min+calcLength(t)}function calcRelativeBox(e,t,n){calcRelativeAxis(e.x,t.x,n.x),calcRelativeAxis(e.y,t.y,n.y)}function calcRelativeAxisPosition(e,t,n){e.min=t.min-n.min,e.max=e.min+calcLength(t)}function calcRelativePosition(e,t,n){calcRelativeAxisPosition(e.x,t.x,n.x),calcRelativeAxisPosition(e.y,t.y,n.y)}function eachAxis(e){return[e("x"),e("y")]}const getContextWindow=({current:e})=>e?e.ownerDocument.defaultView:null,distance=(e,t)=>Math.abs(e-t);function distance2D(e,t){const n=distance(e.x,t.x),o=distance(e.y,t.y);return Math.sqrt(n**2+o**2)}class PanSession{constructor(t,n,{transformPagePoint:o,contextWindow:u=window,dragSnapToOrigin:d=!1,distanceThreshold:f=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=getPanInfo(this.lastMoveEventInfo,this.history),F=this.startEvent!==null,M=distance2D(_.offset,{x:0,y:0})>=this.distanceThreshold;if(!F&&!M)return;const{point:I}=_,{timestamp:N}=frameData;this.history.push({...I,timestamp:N});const{onStart:B,onMove:H}=this.handlers;F||(B&&B(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),H&&H(this.lastMoveEvent,_)},this.handlePointerMove=(_,F)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=transformPoint(F,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(_,F)=>{this.end();const{onEnd:M,onSessionEnd:I,resumeAnimation:N}=this.handlers;if(this.dragSnapToOrigin&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const B=getPanInfo(_.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(F,this.transformPagePoint),this.history);this.startEvent&&M&&M(_,B),I&&I(_,B)},!isPrimaryPointer(t))return;this.dragSnapToOrigin=d,this.handlers=n,this.transformPagePoint=o,this.distanceThreshold=f,this.contextWindow=u||window;const g=extractEventInfo(t),v=transformPoint(g,this.transformPagePoint),{point:w}=v,{timestamp:S}=frameData;this.history=[{...w,timestamp:S}];const{onSessionStart:R}=n;R&&R(t,getPanInfo(v,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(e,t){return t?{point:t(e.point)}:e}function subtractPoint(e,t){return{x:e.x-t.x,y:e.y-t.y}}function getPanInfo({point:e},t){return{point:e,delta:subtractPoint(e,lastDevicePoint(t)),offset:subtractPoint(e,startDevicePoint(t)),velocity:getVelocity(t,.1)}}function startDevicePoint(e){return e[0]}function lastDevicePoint(e){return e[e.length-1]}function getVelocity(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,o=null;const u=lastDevicePoint(e);for(;n>=0&&(o=e[n],!(u.timestamp-o.timestamp>secondsToMilliseconds(t)));)n--;if(!o)return{x:0,y:0};const d=millisecondsToSeconds(u.timestamp-o.timestamp);if(d===0)return{x:0,y:0};const f={x:(u.x-o.x)/d,y:(u.y-o.y)/d};return f.x===1/0&&(f.x=0),f.y===1/0&&(f.y=0),f}function applyConstraints(e,{min:t,max:n},o){return t!==void 0&&e<t?e=o?mixNumber$1(t,e,o.min):Math.max(e,t):n!==void 0&&e>n&&(e=o?mixNumber$1(n,e,o.max):Math.min(e,n)),e}function calcRelativeAxisConstraints(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function calcRelativeConstraints(e,{top:t,left:n,bottom:o,right:u}){return{x:calcRelativeAxisConstraints(e.x,n,u),y:calcRelativeAxisConstraints(e.y,t,o)}}function calcViewportAxisConstraints(e,t){let n=t.min-e.min,o=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,o]=[o,n]),{min:n,max:o}}function calcViewportConstraints(e,t){return{x:calcViewportAxisConstraints(e.x,t.x),y:calcViewportAxisConstraints(e.y,t.y)}}function calcOrigin(e,t){let n=.5;const o=calcLength(e),u=calcLength(t);return u>o?n=progress(t.min,t.max-o,e.min):o>u&&(n=progress(e.min,e.max-u,t.min)),clamp$1(0,1,n)}function rebaseAxisConstraints(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const defaultElastic=.35;function resolveDragElastic(e=defaultElastic){return e===!1?e=0:e===!0&&(e=defaultElastic),{x:resolveAxisElastic(e,"left","right"),y:resolveAxisElastic(e,"top","bottom")}}function resolveAxisElastic(e,t,n){return{min:resolvePointElastic(e,t),max:resolvePointElastic(e,n)}}function resolvePointElastic(e,t){return typeof e=="number"?e:e[t]||0}const elementDragControls=new WeakMap;class VisualElementDragControls{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:o}={}){const{presenceContext:u}=this.visualElement;if(u&&u.isPresent===!1)return;const d=R=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(extractEventInfo(R).point)},f=(R,_)=>{const{drag:F,dragPropagation:M,onDragStart:I}=this.getProps();if(F&&!M&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(F),!this.openDragLock))return;this.latestPointerEvent=R,this.latestPanInfo=_,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(B=>{let H=this.getAxisMotionValue(B).get()||0;if(percent.test(H)){const{projection:U}=this.visualElement;if(U&&U.layout){const $=U.layout.layoutBox[B];$&&(H=calcLength($)*(parseFloat(H)/100))}}this.originPoint[B]=H}),I&&frame.postRender(()=>I(R,_)),addValueToWillChange(this.visualElement,"transform");const{animationState:N}=this.visualElement;N&&N.setActive("whileDrag",!0)},g=(R,_)=>{this.latestPointerEvent=R,this.latestPanInfo=_;const{dragPropagation:F,dragDirectionLock:M,onDirectionLock:I,onDrag:N}=this.getProps();if(!F&&!this.openDragLock)return;const{offset:B}=_;if(M&&this.currentDirection===null){this.currentDirection=getCurrentDirection(B),this.currentDirection!==null&&I&&I(this.currentDirection);return}this.updateAxis("x",_.point,B),this.updateAxis("y",_.point,B),this.visualElement.render(),N&&N(R,_)},v=(R,_)=>{this.latestPointerEvent=R,this.latestPanInfo=_,this.stop(R,_),this.latestPointerEvent=null,this.latestPanInfo=null},w=()=>eachAxis(R=>this.getAnimationState(R)==="paused"&&this.getAxisMotionValue(R).animation?.play()),{dragSnapToOrigin:S}=this.getProps();this.panSession=new PanSession(t,{onSessionStart:d,onStart:f,onMove:g,onSessionEnd:v,resumeAnimation:w},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:S,distanceThreshold:o,contextWindow:getContextWindow(this.visualElement)})}stop(t,n){const o=t||this.latestPointerEvent,u=n||this.latestPanInfo,d=this.isDragging;if(this.cancel(),!d||!u||!o)return;const{velocity:f}=u;this.startAnimation(f);const{onDragEnd:g}=this.getProps();g&&frame.postRender(()=>g(o,u))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:o}=this.getProps();!o&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,o){const{drag:u}=this.getProps();if(!o||!shouldDrag(t,u,this.currentDirection))return;const d=this.getAxisMotionValue(t);let f=this.originPoint[t]+o[t];this.constraints&&this.constraints[t]&&(f=applyConstraints(f,this.constraints[t],this.elastic[t])),d.set(f)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,u=this.constraints;t&&isRefObject(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&o?this.constraints=calcRelativeConstraints(o.layoutBox,t):this.constraints=!1,this.elastic=resolveDragElastic(n),u!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(d=>{this.constraints!==!1&&this.getAxisMotionValue(d)&&(this.constraints[d]=rebaseAxisConstraints(o.layoutBox[d],this.constraints[d]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!isRefObject(t))return!1;const o=t.current,{projection:u}=this.visualElement;if(!u||!u.layout)return!1;const d=measurePageBox(o,u.root,this.visualElement.getTransformPagePoint());let f=calcViewportConstraints(u.layout.layoutBox,d);if(n){const g=n(convertBoxToBoundingBox(f));this.hasMutatedConstraints=!!g,g&&(f=convertBoundingBoxToBox(g))}return f}startAnimation(t){const{drag:n,dragMomentum:o,dragElastic:u,dragTransition:d,dragSnapToOrigin:f,onDragTransitionEnd:g}=this.getProps(),v=this.constraints||{},w=eachAxis(S=>{if(!shouldDrag(S,n,this.currentDirection))return;let R=v&&v[S]||{};f&&(R={min:0,max:0});const _=u?200:1e6,F=u?40:1e7,M={type:"inertia",velocity:o?t[S]:0,bounceStiffness:_,bounceDamping:F,timeConstant:750,restDelta:1,restSpeed:10,...d,...R};return this.startAxisValueAnimation(S,M)});return Promise.all(w).then(g)}startAxisValueAnimation(t,n){const o=this.getAxisMotionValue(t);return addValueToWillChange(this.visualElement,t),o.start(animateMotionValue(t,o,0,n,this.visualElement,!1))}stopAnimation(){eachAxis(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){eachAxis(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,o=this.visualElement.getProps(),u=o[n];return u||this.visualElement.getValue(t,(o.initial?o.initial[t]:void 0)||0)}snapToCursor(t){eachAxis(n=>{const{drag:o}=this.getProps();if(!shouldDrag(n,o,this.currentDirection))return;const{projection:u}=this.visualElement,d=this.getAxisMotionValue(n);if(u&&u.layout){const{min:f,max:g}=u.layout.layoutBox[n];d.set(t[n]-mixNumber$1(f,g,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:o}=this.visualElement;if(!isRefObject(n)||!o||!this.constraints)return;this.stopAnimation();const u={x:0,y:0};eachAxis(f=>{const g=this.getAxisMotionValue(f);if(g&&this.constraints!==!1){const v=g.get();u[f]=calcOrigin({min:v,max:v},this.constraints[f])}});const{transformTemplate:d}=this.visualElement.getProps();this.visualElement.current.style.transform=d?d({},""):"none",o.root&&o.root.updateScroll(),o.updateLayout(),this.resolveConstraints(),eachAxis(f=>{if(!shouldDrag(f,t,null))return;const g=this.getAxisMotionValue(f),{min:v,max:w}=this.constraints[f];g.set(mixNumber$1(v,w,u[f]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const t=this.visualElement.current,n=addPointerEvent(t,"pointerdown",v=>{const{drag:w,dragListener:S=!0}=this.getProps();w&&S&&this.start(v)}),o=()=>{const{dragConstraints:v}=this.getProps();isRefObject(v)&&v.current&&(this.constraints=this.resolveRefConstraints())},{projection:u}=this.visualElement,d=u.addEventListener("measure",o);u&&!u.layout&&(u.root&&u.root.updateScroll(),u.updateLayout()),frame.read(o);const f=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),g=u.addEventListener("didUpdate",(({delta:v,hasLayoutChanged:w})=>{this.isDragging&&w&&(eachAxis(S=>{const R=this.getAxisMotionValue(S);R&&(this.originPoint[S]+=v[S].translate,R.set(R.get()+v[S].translate))}),this.visualElement.render())}));return()=>{f(),n(),d(),g&&g()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:o=!1,dragPropagation:u=!1,dragConstraints:d=!1,dragElastic:f=defaultElastic,dragMomentum:g=!0}=t;return{...t,drag:n,dragDirectionLock:o,dragPropagation:u,dragConstraints:d,dragElastic:f,dragMomentum:g}}}function shouldDrag(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function getCurrentDirection(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class DragGesture extends Feature{constructor(t){super(t),this.removeGroupControls=noop$1,this.removeListeners=noop$1,this.controls=new VisualElementDragControls(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop$1}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=e=>(t,n)=>{e&&frame.postRender(()=>e(t,n))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop$1}onPointerDown(t){this.session=new PanSession(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:o,onPanEnd:u}=this.node.getProps();return{onSessionStart:asyncHandler(t),onStart:asyncHandler(n),onMove:o,onEnd:(d,f)=>{delete this.session,u&&frame.postRender(()=>u(d,f))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const correctBorderRadius={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(px.test(e))e=parseFloat(e);else return e;const n=pixelsToPercent(e,t.target.x),o=pixelsToPercent(e,t.target.y);return`${n}% ${o}%`}},correctBoxShadow={correct:(e,{treeScale:t,projectionDelta:n})=>{const o=e,u=complex.parse(e);if(u.length>5)return o;const d=complex.createTransformer(e),f=typeof u[0]!="number"?1:0,g=n.x.scale*t.x,v=n.y.scale*t.y;u[0+f]/=g,u[1+f]/=v;const w=mixNumber$1(g,v,.5);return typeof u[2+f]=="number"&&(u[2+f]/=w),typeof u[3+f]=="number"&&(u[3+f]/=w),d(u)}};let hasTakenAnySnapshot=!1;class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:o,layoutId:u}=this.props,{projection:d}=t;addScaleCorrector(defaultScaleCorrectors),d&&(n.group&&n.group.add(d),o&&o.register&&u&&o.register(d),hasTakenAnySnapshot&&d.root.didUpdate(),d.addEventListener("animationComplete",()=>{this.safeToRemove()}),d.setOptions({...d.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:o,drag:u,isPresent:d}=this.props,{projection:f}=o;return f&&(f.isPresent=d,hasTakenAnySnapshot=!0,u||t.layoutDependency!==n||n===void 0||t.isPresent!==d?f.willUpdate():this.safeToRemove(),t.isPresent!==d&&(d?f.promote():f.relegate()||frame.postRender(()=>{const g=f.getStack();(!g||!g.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),microtask.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:o}=this.props,{projection:u}=t;hasTakenAnySnapshot=!0,u&&(u.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(u),o&&o.deregister&&o.deregister(u))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function MeasureLayout(e){const[t,n]=usePresence(),o=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...e,layoutGroup:o,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:t,safeToRemove:n})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow};function animateSingleValue(e,t,n){const o=isMotionValue(e)?e:motionValue(e);return o.start(animateMotionValue("",o,t,n)),o.animation}const compareByDepth=(e,t)=>e.depth-t.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(t){addUniqueItem(this.children,t),this.isDirty=!0}remove(t){removeItem(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(t)}}function delay(e,t){const n=time.now(),o=({timestamp:u})=>{const d=u-n;d>=t&&(cancelFrame(o),e(d-t))};return frame.setup(o,!0),()=>cancelFrame(o)}const borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=e=>typeof e=="string"?parseFloat(e):e,isPx=e=>typeof e=="number"||px.test(e);function mixValues(e,t,n,o,u,d){u?(e.opacity=mixNumber$1(0,n.opacity??1,easeCrossfadeIn(o)),e.opacityExit=mixNumber$1(t.opacity??1,0,easeCrossfadeOut(o))):d&&(e.opacity=mixNumber$1(t.opacity??1,n.opacity??1,o));for(let f=0;f<numBorders;f++){const g=`border${borders[f]}Radius`;let v=getRadius(t,g),w=getRadius(n,g);if(v===void 0&&w===void 0)continue;v||(v=0),w||(w=0),v===0||w===0||isPx(v)===isPx(w)?(e[g]=Math.max(mixNumber$1(asNumber(v),asNumber(w),o),0),(percent.test(w)||percent.test(v))&&(e[g]+="%")):e[g]=w}(t.rotate||n.rotate)&&(e.rotate=mixNumber$1(t.rotate||0,n.rotate||0,o))}function getRadius(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop$1);function compress(e,t,n){return o=>o<e?0:o>t?1:n(progress(e,t,o))}function copyAxisInto(e,t){e.min=t.min,e.max=t.max}function copyBoxInto(e,t){copyAxisInto(e.x,t.x),copyAxisInto(e.y,t.y)}function copyAxisDeltaInto(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function removePointDelta(e,t,n,o,u){return e-=t,e=scalePoint(e,1/n,o),u!==void 0&&(e=scalePoint(e,1/u,o)),e}function removeAxisDelta(e,t=0,n=1,o=.5,u,d=e,f=e){if(percent.test(t)&&(t=parseFloat(t),t=mixNumber$1(f.min,f.max,t/100)-f.min),typeof t!="number")return;let g=mixNumber$1(d.min,d.max,o);e===d&&(g-=t),e.min=removePointDelta(e.min,t,n,g,u),e.max=removePointDelta(e.max,t,n,g,u)}function removeAxisTransforms(e,t,[n,o,u],d,f){removeAxisDelta(e,t[n],t[o],t[u],t.scale,d,f)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(e,t,n,o){removeAxisTransforms(e.x,t,xKeys,n?n.x:void 0,o?o.x:void 0),removeAxisTransforms(e.y,t,yKeys,n?n.y:void 0,o?o.y:void 0)}function isAxisDeltaZero(e){return e.translate===0&&e.scale===1}function isDeltaZero(e){return isAxisDeltaZero(e.x)&&isAxisDeltaZero(e.y)}function axisEquals(e,t){return e.min===t.min&&e.max===t.max}function boxEquals(e,t){return axisEquals(e.x,t.x)&&axisEquals(e.y,t.y)}function axisEqualsRounded(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function boxEqualsRounded(e,t){return axisEqualsRounded(e.x,t.x)&&axisEqualsRounded(e.y,t.y)}function aspectRatio(e){return calcLength(e.x)/calcLength(e.y)}function axisDeltaEquals(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class NodeStack{constructor(){this.members=[]}add(t){addUniqueItem(this.members,t),t.scheduleRender()}remove(t){if(removeItem(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(u=>t===u);if(n===0)return!1;let o;for(let u=n;u>=0;u--){const d=this.members[u];if(d.isPresent!==!1){o=d;break}}return o?(this.promote(o),!0):!1}promote(t,n){const o=this.lead;if(t!==o&&(this.prevLead=o,this.lead=t,t.show(),o)){o.instance&&o.scheduleRender(),t.scheduleRender(),t.resumeFrom=o,n&&(t.resumeFrom.preserveOpacity=!0),o.snapshot&&(t.snapshot=o.snapshot,t.snapshot.latestValues=o.animationValues||o.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:u}=t.options;u===!1&&o.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:o}=t;n.onExitComplete&&n.onExitComplete(),o&&o.options.onExitComplete&&o.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(e,t,n){let o="";const u=e.x.translate/t.x,d=e.y.translate/t.y,f=n?.z||0;if((u||d||f)&&(o=`translate3d(${u}px, ${d}px, ${f}px) `),(t.x!==1||t.y!==1)&&(o+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:w,rotate:S,rotateX:R,rotateY:_,skewX:F,skewY:M}=n;w&&(o=`perspective(${w}px) ${o}`),S&&(o+=`rotate(${S}deg) `),R&&(o+=`rotateX(${R}deg) `),_&&(o+=`rotateY(${_}deg) `),F&&(o+=`skewX(${F}deg) `),M&&(o+=`skewY(${M}deg) `)}const g=e.x.scale*t.x,v=e.y.scale*t.y;return(g!==1||v!==1)&&(o+=`scale(${g}, ${v})`),o||"none"}const transformAxes=["","X","Y","Z"],animationTarget=1e3;let id=0;function resetDistortingTransform(e,t,n,o){const{latestValues:u}=t;u[e]&&(n[e]=u[e],t.setStaticValue(e,0),o&&(o[e]=0))}function cancelTreeOptimisedTransformAnimations(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=getOptimisedAppearId(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:u,layoutId:d}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",frame,!(u||d))}const{parent:o}=e;o&&!o.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(o)}function createProjectionNode({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:o,resetTransform:u}){return class{constructor(f={},g=t?.()){this.id=id++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=f,this.root=g?g.root||g:this,this.path=g?[...g.path,g]:[],this.parent=g,this.depth=g?g.depth+1:0;for(let v=0;v<this.path.length;v++)this.path[v].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(f,g){return this.eventHandlers.has(f)||this.eventHandlers.set(f,new SubscriptionManager),this.eventHandlers.get(f).add(g)}notifyListeners(f,...g){const v=this.eventHandlers.get(f);v&&v.notify(...g)}hasListeners(f){return this.eventHandlers.has(f)}mount(f){if(this.instance)return;this.isSVG=isSVGElement(f)&&!isSVGSVGElement(f),this.instance=f;const{layoutId:g,layout:v,visualElement:w}=this.options;if(w&&!w.current&&w.mount(f),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(v||g)&&(this.isLayoutDirty=!0),e){let S,R=0;const _=()=>this.root.updateBlockedByResize=!1;frame.read(()=>{R=window.innerWidth}),e(f,()=>{const F=window.innerWidth;F!==R&&(R=F,this.root.updateBlockedByResize=!0,S&&S(),S=delay(_,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation)))})}g&&this.root.registerSharedNode(g,this),this.options.animate!==!1&&w&&(g||v)&&this.addEventListener("didUpdate",({delta:S,hasLayoutChanged:R,hasRelativeLayoutChanged:_,layout:F})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const M=this.options.transition||w.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:I,onLayoutAnimationComplete:N}=w.getProps(),B=!this.targetLayout||!boxEqualsRounded(this.targetLayout,F),H=!R&&_;if(this.options.layoutRoot||this.resumeFrom||H||R&&(B||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const U={...getValueTransition(M,"layout"),onPlay:I,onComplete:N};(w.shouldReduceMotion||this.options.layoutRoot)&&(U.delay=0,U.type=!1),this.startAnimation(U),this.setAnimationOrigin(S,H)}else R||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=F})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const f=this.getStack();f&&f.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:f}=this.options;return f&&f.getProps().transformTemplate}willUpdate(f=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let S=0;S<this.path.length;S++){const R=this.path[S];R.shouldResetTransform=!0,R.updateScroll("snapshot"),R.options.layoutRoot&&R.willUpdate(!1)}const{layoutId:g,layout:v}=this.options;if(g===void 0&&!v)return;const w=this.getTransformTemplate();this.prevTransformTemplateValue=w?w(this.latestValues,""):void 0,this.updateSnapshot(),f&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(clearIsLayoutDirty);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate)):this.nodes.forEach(clearIsLayoutDirty),this.clearAllSnapshots();const g=time.now();frameData.delta=clamp$1(0,1e3/60,g-frameData.timestamp),frameData.timestamp=g,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!calcLength(this.snapshot.measuredBox.x)&&!calcLength(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let v=0;v<this.path.length;v++)this.path[v].updateScroll();const f=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:g}=this.options;g&&g.notify("LayoutMeasure",this.layout.layoutBox,f?f.layoutBox:void 0)}updateScroll(f="measure"){let g=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===f&&(g=!1),g&&this.instance){const v=o(this.instance);this.scroll={animationId:this.root.animationId,phase:f,isRoot:v,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:v}}}resetTransform(){if(!u)return;const f=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,g=this.projectionDelta&&!isDeltaZero(this.projectionDelta),v=this.getTransformTemplate(),w=v?v(this.latestValues,""):void 0,S=w!==this.prevTransformTemplateValue;f&&this.instance&&(g||hasTransform(this.latestValues)||S)&&(u(this.instance,w),this.shouldResetTransform=!1,this.scheduleRender())}measure(f=!0){const g=this.measurePageBox();let v=this.removeElementScroll(g);return f&&(v=this.removeTransform(v)),roundBox(v),{animationId:this.root.animationId,measuredBox:g,layoutBox:v,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:f}=this.options;if(!f)return createBox();const g=f.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(checkNodeWasScrollRoot))){const{scroll:w}=this.root;w&&(translateAxis(g.x,w.offset.x),translateAxis(g.y,w.offset.y))}return g}removeElementScroll(f){const g=createBox();if(copyBoxInto(g,f),this.scroll?.wasRoot)return g;for(let v=0;v<this.path.length;v++){const w=this.path[v],{scroll:S,options:R}=w;w!==this.root&&S&&R.layoutScroll&&(S.wasRoot&&copyBoxInto(g,f),translateAxis(g.x,S.offset.x),translateAxis(g.y,S.offset.y))}return g}applyTransform(f,g=!1){const v=createBox();copyBoxInto(v,f);for(let w=0;w<this.path.length;w++){const S=this.path[w];!g&&S.options.layoutScroll&&S.scroll&&S!==S.root&&transformBox(v,{x:-S.scroll.offset.x,y:-S.scroll.offset.y}),hasTransform(S.latestValues)&&transformBox(v,S.latestValues)}return hasTransform(this.latestValues)&&transformBox(v,this.latestValues),v}removeTransform(f){const g=createBox();copyBoxInto(g,f);for(let v=0;v<this.path.length;v++){const w=this.path[v];if(!w.instance||!hasTransform(w.latestValues))continue;hasScale(w.latestValues)&&w.updateSnapshot();const S=createBox(),R=w.measurePageBox();copyBoxInto(S,R),removeBoxTransforms(g,w.latestValues,w.snapshot?w.snapshot.layoutBox:void 0,S)}return hasTransform(this.latestValues)&&removeBoxTransforms(g,this.latestValues),g}setTargetDelta(f){this.targetDelta=f,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(f){this.options={...this.options,...f,crossfade:f.crossfade!==void 0?f.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(f=!1){const g=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=g.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=g.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=g.isSharedProjectionDirty);const v=!!this.resumingFrom||this!==g;if(!(f||v&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:S,layoutId:R}=this.options;if(!(!this.layout||!(S||R))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const _=this.getClosestProjectingParent();_&&_.layout&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,_.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const _=this.getClosestProjectingParent();_&&!!_.resumingFrom==!!this.resumingFrom&&!_.options.layoutScroll&&_.target&&this.animationProgress!==1?(this.relativeParent=_,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,_.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const f=this.getLead(),g=!!this.resumingFrom||this!==f;let v=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(v=!1),g&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(v=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(v=!1),v)return;const{layout:w,layoutId:S}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(w||S))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const R=this.treeScale.x,_=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,g),f.layout&&!f.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(f.target=f.layout.layoutBox,f.targetWithTransforms=createBox());const{target:F}=f;if(!F){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,F,this.latestValues),(this.treeScale.x!==R||this.treeScale.y!==_||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",F))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(f=!0){if(this.options.visualElement?.scheduleRender(),f){const g=this.getStack();g&&g.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(f,g=!1){const v=this.snapshot,w=v?v.latestValues:{},S={...this.latestValues},R=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!g;const _=createBox(),F=v?v.source:void 0,M=this.layout?this.layout.source:void 0,I=F!==M,N=this.getStack(),B=!N||N.members.length<=1,H=!!(I&&!B&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let U;this.mixTargetDelta=$=>{const z=$/1e3;mixAxisDelta(R.x,f.x,z),mixAxisDelta(R.y,f.y,z),this.setTargetDelta(R),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(_,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,_,z),U&&boxEquals(this.relativeTarget,U)&&(this.isProjectionDirty=!1),U||(U=createBox()),copyBoxInto(U,this.relativeTarget)),I&&(this.animationValues=S,mixValues(S,w,this.latestValues,z,H,B)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(f){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=motionValue(0)),this.currentAnimation=animateSingleValue(this.motionValue,[0,1e3],{...f,velocity:0,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),f.onUpdate&&f.onUpdate(g)},onStop:()=>{},onComplete:()=>{f.onComplete&&f.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const f=this.getStack();f&&f.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const f=this.getLead();let{targetWithTransforms:g,target:v,layout:w,latestValues:S}=f;if(!(!g||!v||!w)){if(this!==f&&this.layout&&w&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,w.layoutBox)){v=this.target||createBox();const R=calcLength(this.layout.layoutBox.x);v.x.min=f.target.x.min,v.x.max=v.x.min+R;const _=calcLength(this.layout.layoutBox.y);v.y.min=f.target.y.min,v.y.max=v.y.min+_}copyBoxInto(g,v),transformBox(g,S),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,g,S)}}registerSharedNode(f,g){this.sharedNodes.has(f)||this.sharedNodes.set(f,new NodeStack),this.sharedNodes.get(f).add(g);const w=g.options.initialPromotionConfig;g.promote({transition:w?w.transition:void 0,preserveFollowOpacity:w&&w.shouldPreserveFollowOpacity?w.shouldPreserveFollowOpacity(g):void 0})}isLead(){const f=this.getStack();return f?f.lead===this:!0}getLead(){const{layoutId:f}=this.options;return f?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:f}=this.options;return f?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:f}=this.options;if(f)return this.root.sharedNodes.get(f)}promote({needsReset:f,transition:g,preserveFollowOpacity:v}={}){const w=this.getStack();w&&w.promote(this,v),f&&(this.projectionDelta=void 0,this.needsReset=!0),g&&this.setOptions({transition:g})}relegate(){const f=this.getStack();return f?f.relegate(this):!1}resetSkewAndRotation(){const{visualElement:f}=this.options;if(!f)return;let g=!1;const{latestValues:v}=f;if((v.z||v.rotate||v.rotateX||v.rotateY||v.rotateZ||v.skewX||v.skewY)&&(g=!0),!g)return;const w={};v.z&&resetDistortingTransform("z",f,w,this.animationValues);for(let S=0;S<transformAxes.length;S++)resetDistortingTransform(`rotate${transformAxes[S]}`,f,w,this.animationValues),resetDistortingTransform(`skew${transformAxes[S]}`,f,w,this.animationValues);f.render();for(const S in w)f.setStaticValue(S,w[S]),this.animationValues&&(this.animationValues[S]=w[S]);f.scheduleRender()}applyProjectionStyles(f,g){if(!this.instance||this.isSVG)return;if(!this.isVisible){f.visibility="hidden";return}const v=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,f.visibility="",f.opacity="",f.pointerEvents=resolveMotionValue(g?.pointerEvents)||"",f.transform=v?v(this.latestValues,""):"none";return}const w=this.getLead();if(!this.projectionDelta||!this.layout||!w.target){this.options.layoutId&&(f.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,f.pointerEvents=resolveMotionValue(g?.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(f.transform=v?v({},""):"none",this.hasProjected=!1);return}f.visibility="";const S=w.animationValues||w.latestValues;this.applyTransformsToTarget();let R=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,S);v&&(R=v(S,R)),f.transform=R;const{x:_,y:F}=this.projectionDelta;f.transformOrigin=`${_.origin*100}% ${F.origin*100}% 0`,w.animationValues?f.opacity=w===this?S.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:S.opacityExit:f.opacity=w===this?S.opacity!==void 0?S.opacity:"":S.opacityExit!==void 0?S.opacityExit:0;for(const M in scaleCorrectors){if(S[M]===void 0)continue;const{correct:I,applyTo:N,isCSSVariable:B}=scaleCorrectors[M],H=R==="none"?S[M]:I(S[M],w);if(N){const U=N.length;for(let $=0;$<U;$++)f[N[$]]=H}else B?this.options.visualElement.renderState.vars[M]=H:f[M]=H}this.options.layoutId&&(f.pointerEvents=w===this?resolveMotionValue(g?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(f=>f.currentAnimation?.stop()),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(e){e.updateLayout()}function notifyLayoutUpdate(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:o}=e.layout,{animationType:u}=e.options,d=t.source!==e.layout.source;u==="size"?eachAxis(S=>{const R=d?t.measuredBox[S]:t.layoutBox[S],_=calcLength(R);R.min=n[S].min,R.max=R.min+_}):shouldAnimatePositionOnly(u,t.layoutBox,n)&&eachAxis(S=>{const R=d?t.measuredBox[S]:t.layoutBox[S],_=calcLength(n[S]);R.max=R.min+_,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[S].max=e.relativeTarget[S].min+_)});const f=createDelta();calcBoxDelta(f,n,t.layoutBox);const g=createDelta();d?calcBoxDelta(g,e.applyTransform(o,!0),t.measuredBox):calcBoxDelta(g,n,t.layoutBox);const v=!isDeltaZero(f);let w=!1;if(!e.resumeFrom){const S=e.getClosestProjectingParent();if(S&&!S.resumeFrom){const{snapshot:R,layout:_}=S;if(R&&_){const F=createBox();calcRelativePosition(F,t.layoutBox,R.layoutBox);const M=createBox();calcRelativePosition(M,n,_.layoutBox),boxEqualsRounded(F,M)||(w=!0),S.options.layoutRoot&&(e.relativeTarget=M,e.relativeTargetOrigin=F,e.relativeParent=S)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:g,layoutDelta:f,hasLayoutChanged:v,hasRelativeLayoutChanged:w})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function propagateDirtyNodes(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function cleanDirtyNodes(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function clearSnapshot(e){e.clearSnapshot()}function clearMeasurements(e){e.clearMeasurements()}function clearIsLayoutDirty(e){e.isLayoutDirty=!1}function resetTransformStyle(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function finishAnimation(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function resolveTargetDelta(e){e.resolveTargetDelta()}function calcProjection(e){e.calcProjection()}function resetSkewAndRotation(e){e.resetSkewAndRotation()}function removeLeadSnapshots(e){e.removeLeadSnapshot()}function mixAxisDelta(e,t,n){e.translate=mixNumber$1(t.translate,0,n),e.scale=mixNumber$1(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function mixAxis(e,t,n,o){e.min=mixNumber$1(t.min,n.min,o),e.max=mixNumber$1(t.max,n.max,o)}function mixBox(e,t,n,o){mixAxis(e.x,t.x,n.x,o),mixAxis(e.y,t.y,n.y,o)}function hasOpacityCrossfade(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop$1;function roundAxis(e){e.min=roundPoint(e.min),e.max=roundPoint(e.max)}function roundBox(e){roundAxis(e.x),roundAxis(e.y)}function shouldAnimatePositionOnly(e,t,n){return e==="position"||e==="preserve-aspect"&&!isNear(aspectRatio(t),aspectRatio(n),.2)}function checkNodeWasScrollRoot(e){return e!==e.root&&e.scroll?.wasRoot}const DocumentProjectionNode=createProjectionNode({attachResizeListener:(e,t)=>addDomEvent(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const e=new DocumentProjectionNode({});e.mount(window),e.setOptions({layoutScroll:!0}),rootProjectionNode.current=e}return rootProjectionNode.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(e,t,n){const{props:o}=e;e.animationState&&o.whileHover&&e.animationState.setActive("whileHover",n==="Start");const u="onHover"+n,d=o[u];d&&frame.postRender(()=>d(t,extractEventInfo(t)))}class HoverGesture extends Feature{mount(){const{current:t}=this.node;t&&(this.unmount=hover(t,(n,o)=>(handleHoverEvent(this.node,o,"Start"),u=>handleHoverEvent(this.node,u,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(e,t,n){const{props:o}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&o.whileTap&&e.animationState.setActive("whileTap",n==="Start");const u="onTap"+(n==="End"?"":n),d=o[u];d&&frame.postRender(()=>d(t,extractEventInfo(t)))}class PressGesture extends Feature{mount(){const{current:t}=this.node;t&&(this.unmount=press(t,(n,o)=>(handlePressEvent(this.node,o,"Start"),(u,{success:d})=>handlePressEvent(this.node,u,d?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=e=>{const t=observerCallbacks.get(e.target);t&&t(e)},fireAllObserverCallbacks=e=>{e.forEach(fireObserverCallback)};function initIntersectionObserver({root:e,...t}){const n=e||document;observers.has(n)||observers.set(n,{});const o=observers.get(n),u=JSON.stringify(t);return o[u]||(o[u]=new IntersectionObserver(fireAllObserverCallbacks,{root:e,...t})),o[u]}function observeIntersection(e,t,n){const o=initIntersectionObserver(t);return observerCallbacks.set(e,n),o.observe(e),()=>{observerCallbacks.delete(e),o.unobserve(e)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:o,amount:u="some",once:d}=t,f={root:n?n.current:void 0,rootMargin:o,threshold:typeof u=="number"?u:thresholdNames[u]},g=v=>{const{isIntersecting:w}=v;if(this.isInView===w||(this.isInView=w,d&&!w&&this.hasEnteredView))return;w&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",w);const{onViewportEnter:S,onViewportLeave:R}=this.node.getProps(),_=w?S:R;_&&_(v)};return observeIntersection(this.node.current,f,g)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(t,n))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},featureBundle={...animations,...gestureAnimations,...drag,...layout},motion=createMotionProxy(featureBundle,createDomVisualElement);function Dashboard({data:e}){const t=["#9CA3AF","#6B7280","#4B5563","#374151","#1F2937"];return jsxRuntimeExports.jsxs(motion.div,{className:"bg-white p-8 rounded-2xl shadow-md border border-gray-200",initial:{opacity:0,y:30},animate:{opacity:1,y:0},children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"Space Utilization Overview"}),e.length===0?jsxRuntimeExports.jsx("div",{className:"text-gray-500 text-center p-8 border border-dashed border-gray-300 rounded-xl",children:" No data yet. Please upload an Excel file to see visualization."}):jsxRuntimeExports.jsx("div",{className:"h-[350px]",children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(PieChart,{children:[jsxRuntimeExports.jsx(Pie,{data:e,dataKey:"value",nameKey:"name",outerRadius:120,label:!0,children:e.map((n,o)=>jsxRuntimeExports.jsx(Cell,{fill:t[o%t.length]},o))}),jsxRuntimeExports.jsx(Tooltip,{contentStyle:{backgroundColor:"#F9FAFB",border:"1px solid #D1D5DB",borderRadius:"0.5rem"}})]})})})]})}function bind(e,t){return function(){return e.apply(t,arguments)}}const{toString}=Object.prototype,{getPrototypeOf}=Object,{iterator,toStringTag}=Symbol,kindOf=(e=>t=>{const n=toString.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=e=>(e=e.toLowerCase(),t=>kindOf(t)===e),typeOfTest=e=>t=>typeof t===e,{isArray}=Array,isUndefined=typeOfTest("undefined");function isBuffer(e){return e!==null&&!isUndefined(e)&&e.constructor!==null&&!isUndefined(e.constructor)&&isFunction$1(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&isArrayBuffer(e.buffer),t}const isString=typeOfTest("string"),isFunction$1=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=e=>e!==null&&typeof e=="object",isBoolean=e=>e===!0||e===!1,isPlainObject=e=>{if(kindOf(e)!=="object")return!1;const t=getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(toStringTag in e)&&!(iterator in e)},isEmptyObject=e=>{if(!isObject(e)||isBuffer(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=e=>isObject(e)&&isFunction$1(e.pipe),isFormData=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||isFunction$1(e.append)&&((t=kindOf(e))==="formdata"||t==="object"&&isFunction$1(e.toString)&&e.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach$1(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let o,u;if(typeof e!="object"&&(e=[e]),isArray(e))for(o=0,u=e.length;o<u;o++)t.call(null,e[o],o,e);else{if(isBuffer(e))return;const d=n?Object.getOwnPropertyNames(e):Object.keys(e),f=d.length;let g;for(o=0;o<f;o++)g=d[o],t.call(null,e[g],g,e)}}function findKey(e,t){if(isBuffer(e))return null;t=t.toLowerCase();const n=Object.keys(e);let o=n.length,u;for(;o-- >0;)if(u=n[o],t===u.toLowerCase())return u;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=e=>!isUndefined(e)&&e!==_global;function merge(){const{caseless:e,skipUndefined:t}=isContextDefined(this)&&this||{},n={},o=(u,d)=>{if(d==="__proto__"||d==="constructor"||d==="prototype")return;const f=e&&findKey(n,d)||d;isPlainObject(n[f])&&isPlainObject(u)?n[f]=merge(n[f],u):isPlainObject(u)?n[f]=merge({},u):isArray(u)?n[f]=u.slice():(!t||!isUndefined(u))&&(n[f]=u)};for(let u=0,d=arguments.length;u<d;u++)arguments[u]&&forEach$1(arguments[u],o);return n}const extend=(e,t,n,{allOwnKeys:o}={})=>(forEach$1(t,(u,d)=>{n&&isFunction$1(u)?Object.defineProperty(e,d,{value:bind(u,n),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,d,{value:u,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:o}),e),stripBOM=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),inherits=(e,t,n,o)=>{e.prototype=Object.create(t.prototype,o),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject=(e,t,n,o)=>{let u,d,f;const g={};if(t=t||{},e==null)return t;do{for(u=Object.getOwnPropertyNames(e),d=u.length;d-- >0;)f=u[d],(!o||o(f,e,t))&&!g[f]&&(t[f]=e[f],g[f]=!0);e=n!==!1&&getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},endsWith=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const o=e.indexOf(t,n);return o!==-1&&o===n},toArray=e=>{if(!e)return null;if(isArray(e))return e;let t=e.length;if(!isNumber(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},isTypedArray=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(e,t)=>{const o=(e&&e[iterator]).call(e);let u;for(;(u=o.next())&&!u.done;){const d=u.value;t.call(e,d[0],d[1])}},matchAll=(e,t)=>{let n;const o=[];for(;(n=e.exec(t))!==null;)o.push(n);return o},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,o,u){return o.toUpperCase()+u}),hasOwnProperty=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),o={};forEach$1(n,(u,d)=>{let f;(f=t(u,d,e))!==!1&&(o[d]=f||u)}),Object.defineProperties(e,o)},freezeMethods=e=>{reduceDescriptors(e,(t,n)=>{if(isFunction$1(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const o=e[n];if(isFunction$1(o)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},toObjectSet=(e,t)=>{const n={},o=u=>{u.forEach(d=>{n[d]=!0})};return isArray(e)?o(e):o(String(e).split(t)),n},noop=()=>{},toFiniteNumber=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function isSpecCompliantForm(e){return!!(e&&isFunction$1(e.append)&&e[toStringTag]==="FormData"&&e[iterator])}const toJSONObject=e=>{const t=new Array(10),n=(o,u)=>{if(isObject(o)){if(t.indexOf(o)>=0)return;if(isBuffer(o))return o;if(!("toJSON"in o)){t[u]=o;const d=isArray(o)?[]:{};return forEach$1(o,(f,g)=>{const v=n(f,u+1);!isUndefined(v)&&(d[g]=v)}),t[u]=void 0,d}}return o};return n(e,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=e=>e&&(isObject(e)||isFunction$1(e))&&isFunction$1(e.then)&&isFunction$1(e.catch),_setImmediate=((e,t)=>e?setImmediate:t?((n,o)=>(_global.addEventListener("message",({source:u,data:d})=>{u===_global&&d===n&&o.length&&o.shift()()},!1),u=>{o.push(u),_global.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",isFunction$1(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,isIterable=e=>e!=null&&isFunction$1(e[iterator]),utils$1={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isBoolean,isObject,isPlainObject,isEmptyObject,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction:isFunction$1,isStream,isURLSearchParams,isTypedArray,isFileList,forEach:forEach$1,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty,hasOwnProp:hasOwnProperty,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop,toFiniteNumber,findKey,global:_global,isContextDefined,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap,isIterable};let AxiosError$1=class yp extends Error{static from(t,n,o,u,d,f){const g=new yp(t.message,n||t.code,o,u,d);return g.cause=t,g.name=t.name,f&&Object.assign(g,f),g}constructor(t,n,o,u,d){super(t),this.name="AxiosError",this.isAxiosError=!0,n&&(this.code=n),o&&(this.config=o),u&&(this.request=u),d&&(this.response=d,this.status=d.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}};AxiosError$1.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";AxiosError$1.ERR_BAD_OPTION="ERR_BAD_OPTION";AxiosError$1.ECONNABORTED="ECONNABORTED";AxiosError$1.ETIMEDOUT="ETIMEDOUT";AxiosError$1.ERR_NETWORK="ERR_NETWORK";AxiosError$1.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";AxiosError$1.ERR_DEPRECATED="ERR_DEPRECATED";AxiosError$1.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";AxiosError$1.ERR_BAD_REQUEST="ERR_BAD_REQUEST";AxiosError$1.ERR_CANCELED="ERR_CANCELED";AxiosError$1.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";AxiosError$1.ERR_INVALID_URL="ERR_INVALID_URL";const httpAdapter=null;function isVisitable(e){return utils$1.isPlainObject(e)||utils$1.isArray(e)}function removeBrackets(e){return utils$1.endsWith(e,"[]")?e.slice(0,-2):e}function renderKey(e,t,n){return e?e.concat(t).map(function(u,d){return u=removeBrackets(u),!n&&d?"["+u+"]":u}).join(n?".":""):t}function isFlatArray(e){return utils$1.isArray(e)&&!e.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(t){return/^is[A-Z]/.test(t)});function toFormData$1(e,t,n){if(!utils$1.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=utils$1.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(I,N){return!utils$1.isUndefined(N[I])});const o=n.metaTokens,u=n.visitor||S,d=n.dots,f=n.indexes,v=(n.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(t);if(!utils$1.isFunction(u))throw new TypeError("visitor must be a function");function w(M){if(M===null)return"";if(utils$1.isDate(M))return M.toISOString();if(utils$1.isBoolean(M))return M.toString();if(!v&&utils$1.isBlob(M))throw new AxiosError$1("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(M)||utils$1.isTypedArray(M)?v&&typeof Blob=="function"?new Blob([M]):Buffer.from(M):M}function S(M,I,N){let B=M;if(M&&!N&&typeof M=="object"){if(utils$1.endsWith(I,"{}"))I=o?I:I.slice(0,-2),M=JSON.stringify(M);else if(utils$1.isArray(M)&&isFlatArray(M)||(utils$1.isFileList(M)||utils$1.endsWith(I,"[]"))&&(B=utils$1.toArray(M)))return I=removeBrackets(I),B.forEach(function(U,$){!(utils$1.isUndefined(U)||U===null)&&t.append(f===!0?renderKey([I],$,d):f===null?I:I+"[]",w(U))}),!1}return isVisitable(M)?!0:(t.append(renderKey(N,I,d),w(M)),!1)}const R=[],_=Object.assign(predicates,{defaultVisitor:S,convertValue:w,isVisitable});function F(M,I){if(!utils$1.isUndefined(M)){if(R.indexOf(M)!==-1)throw Error("Circular reference detected in "+I.join("."));R.push(M),utils$1.forEach(M,function(B,H){(!(utils$1.isUndefined(B)||B===null)&&u.call(t,B,utils$1.isString(H)?H.trim():H,I,_))===!0&&F(B,I?I.concat(H):[H])}),R.pop()}}if(!utils$1.isObject(e))throw new TypeError("data must be an object");return F(e),t}function encode$1(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(o){return t[o]})}function AxiosURLSearchParams(e,t){this._pairs=[],e&&toFormData$1(e,this,t)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(t,n){this._pairs.push([t,n])};prototype.toString=function(t){const n=t?function(o){return t.call(this,o,encode$1)}:encode$1;return this._pairs.map(function(u){return n(u[0])+"="+n(u[1])},"").join("&")};function encode(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function buildURL(e,t,n){if(!t)return e;const o=n&&n.encode||encode,u=utils$1.isFunction(n)?{serialize:n}:n,d=u&&u.serialize;let f;if(d?f=d(t,u):f=utils$1.isURLSearchParams(t)?t.toString():new AxiosURLSearchParams(t,u).toString(o),f){const g=e.indexOf("#");g!==-1&&(e=e.slice(0,g)),e+=(e.indexOf("?")===-1?"?":"&")+f}return e}class InterceptorManager{constructor(){this.handlers=[]}use(t,n,o){return this.handlers.push({fulfilled:t,rejected:n,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){utils$1.forEach(this.handlers,function(o){o!==null&&t(o)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(e,t){return toFormData$1(e,new platform.classes.URLSearchParams,{visitor:function(n,o,u,d){return platform.isNode&&utils$1.isBuffer(n)?(this.append(o,n.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)},...t})}function parsePropPath(e){return utils$1.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function arrayToObject(e){const t={},n=Object.keys(e);let o;const u=n.length;let d;for(o=0;o<u;o++)d=n[o],t[d]=e[d];return t}function formDataToJSON(e){function t(n,o,u,d){let f=n[d++];if(f==="__proto__")return!0;const g=Number.isFinite(+f),v=d>=n.length;return f=!f&&utils$1.isArray(u)?u.length:f,v?(utils$1.hasOwnProp(u,f)?u[f]=[u[f],o]:u[f]=o,!g):((!u[f]||!utils$1.isObject(u[f]))&&(u[f]=[]),t(n,o,u[f],d)&&utils$1.isArray(u[f])&&(u[f]=arrayToObject(u[f])),!g)}if(utils$1.isFormData(e)&&utils$1.isFunction(e.entries)){const n={};return utils$1.forEachEntry(e,(o,u)=>{t(parsePropPath(o),u,n,0)}),n}return null}function stringifySafely(e,t,n){if(utils$1.isString(e))try{return(t||JSON.parse)(e),utils$1.trim(e)}catch(o){if(o.name!=="SyntaxError")throw o}return(n||JSON.stringify)(e)}const defaults={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const o=n.getContentType()||"",u=o.indexOf("application/json")>-1,d=utils$1.isObject(t);if(d&&utils$1.isHTMLForm(t)&&(t=new FormData(t)),utils$1.isFormData(t))return u?JSON.stringify(formDataToJSON(t)):t;if(utils$1.isArrayBuffer(t)||utils$1.isBuffer(t)||utils$1.isStream(t)||utils$1.isFile(t)||utils$1.isBlob(t)||utils$1.isReadableStream(t))return t;if(utils$1.isArrayBufferView(t))return t.buffer;if(utils$1.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let g;if(d){if(o.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(t,this.formSerializer).toString();if((g=utils$1.isFileList(t))||o.indexOf("multipart/form-data")>-1){const v=this.env&&this.env.FormData;return toFormData$1(g?{"files[]":t}:t,v&&new v,this.formSerializer)}}return d||u?(n.setContentType("application/json",!1),stringifySafely(t)):t}],transformResponse:[function(t){const n=this.transitional||defaults.transitional,o=n&&n.forcedJSONParsing,u=this.responseType==="json";if(utils$1.isResponse(t)||utils$1.isReadableStream(t))return t;if(t&&utils$1.isString(t)&&(o&&!this.responseType||u)){const f=!(n&&n.silentJSONParsing)&&u;try{return JSON.parse(t,this.parseReviver)}catch(g){if(f)throw g.name==="SyntaxError"?AxiosError$1.from(g,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):g}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],e=>{defaults.headers[e]={}});const ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=e=>{const t={};let n,o,u;return e&&e.split(`
`).forEach(function(f){u=f.indexOf(":"),n=f.substring(0,u).trim().toLowerCase(),o=f.substring(u+1).trim(),!(!n||t[n]&&ignoreDuplicateOf[n])&&(n==="set-cookie"?t[n]?t[n].push(o):t[n]=[o]:t[n]=t[n]?t[n]+", "+o:o)}),t},$internals=Symbol("internals");function normalizeHeader(e){return e&&String(e).trim().toLowerCase()}function normalizeValue(e){return e===!1||e==null?e:utils$1.isArray(e)?e.map(normalizeValue):String(e)}function parseTokens(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=n.exec(e);)t[o[1]]=o[2];return t}const isValidHeaderName=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function matchHeaderValue(e,t,n,o,u){if(utils$1.isFunction(o))return o.call(this,t,n);if(u&&(t=n),!!utils$1.isString(t)){if(utils$1.isString(o))return t.indexOf(o)!==-1;if(utils$1.isRegExp(o))return o.test(t)}}function formatHeader(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,o)=>n.toUpperCase()+o)}function buildAccessors(e,t){const n=utils$1.toCamelCase(" "+t);["get","set","has"].forEach(o=>{Object.defineProperty(e,o+n,{value:function(u,d,f){return this[o].call(this,t,u,d,f)},configurable:!0})})}let AxiosHeaders$1=class{constructor(t){t&&this.set(t)}set(t,n,o){const u=this;function d(g,v,w){const S=normalizeHeader(v);if(!S)throw new Error("header name must be a non-empty string");const R=utils$1.findKey(u,S);(!R||u[R]===void 0||w===!0||w===void 0&&u[R]!==!1)&&(u[R||v]=normalizeValue(g))}const f=(g,v)=>utils$1.forEach(g,(w,S)=>d(w,S,v));if(utils$1.isPlainObject(t)||t instanceof this.constructor)f(t,n);else if(utils$1.isString(t)&&(t=t.trim())&&!isValidHeaderName(t))f(parseHeaders(t),n);else if(utils$1.isObject(t)&&utils$1.isIterable(t)){let g={},v,w;for(const S of t){if(!utils$1.isArray(S))throw TypeError("Object iterator must return a key-value pair");g[w=S[0]]=(v=g[w])?utils$1.isArray(v)?[...v,S[1]]:[v,S[1]]:S[1]}f(g,n)}else t!=null&&d(n,t,o);return this}get(t,n){if(t=normalizeHeader(t),t){const o=utils$1.findKey(this,t);if(o){const u=this[o];if(!n)return u;if(n===!0)return parseTokens(u);if(utils$1.isFunction(n))return n.call(this,u,o);if(utils$1.isRegExp(n))return n.exec(u);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=normalizeHeader(t),t){const o=utils$1.findKey(this,t);return!!(o&&this[o]!==void 0&&(!n||matchHeaderValue(this,this[o],o,n)))}return!1}delete(t,n){const o=this;let u=!1;function d(f){if(f=normalizeHeader(f),f){const g=utils$1.findKey(o,f);g&&(!n||matchHeaderValue(o,o[g],g,n))&&(delete o[g],u=!0)}}return utils$1.isArray(t)?t.forEach(d):d(t),u}clear(t){const n=Object.keys(this);let o=n.length,u=!1;for(;o--;){const d=n[o];(!t||matchHeaderValue(this,this[d],d,t,!0))&&(delete this[d],u=!0)}return u}normalize(t){const n=this,o={};return utils$1.forEach(this,(u,d)=>{const f=utils$1.findKey(o,d);if(f){n[f]=normalizeValue(u),delete n[d];return}const g=t?formatHeader(d):String(d).trim();g!==d&&delete n[d],n[g]=normalizeValue(u),o[g]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return utils$1.forEach(this,(o,u)=>{o!=null&&o!==!1&&(n[u]=t&&utils$1.isArray(o)?o.join(", "):o)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const o=new this(t);return n.forEach(u=>o.set(u)),o}static accessor(t){const o=(this[$internals]=this[$internals]={accessors:{}}).accessors,u=this.prototype;function d(f){const g=normalizeHeader(f);o[g]||(buildAccessors(u,f),o[g]=!0)}return utils$1.isArray(t)?t.forEach(d):d(t),this}};AxiosHeaders$1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders$1.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(o){this[n]=o}}});utils$1.freezeMethods(AxiosHeaders$1);function transformData(e,t){const n=this||defaults,o=t||n,u=AxiosHeaders$1.from(o.headers);let d=o.data;return utils$1.forEach(e,function(g){d=g.call(n,d,u.normalize(),t?t.status:void 0)}),u.normalize(),d}function isCancel$1(e){return!!(e&&e.__CANCEL__)}let CanceledError$1=class extends AxiosError$1{constructor(t,n,o){super(t??"canceled",AxiosError$1.ERR_CANCELED,n,o),this.name="CanceledError",this.__CANCEL__=!0}};function settle(e,t,n){const o=n.config.validateStatus;!n.status||!o||o(n.status)?e(n):t(new AxiosError$1("Request failed with status code "+n.status,[AxiosError$1.ERR_BAD_REQUEST,AxiosError$1.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function parseProtocol(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function speedometer(e,t){e=e||10;const n=new Array(e),o=new Array(e);let u=0,d=0,f;return t=t!==void 0?t:1e3,function(v){const w=Date.now(),S=o[d];f||(f=w),n[u]=v,o[u]=w;let R=d,_=0;for(;R!==u;)_+=n[R++],R=R%e;if(u=(u+1)%e,u===d&&(d=(d+1)%e),w-f<t)return;const F=S&&w-S;return F?Math.round(_*1e3/F):void 0}}function throttle(e,t){let n=0,o=1e3/t,u,d;const f=(w,S=Date.now())=>{n=S,u=null,d&&(clearTimeout(d),d=null),e(...w)};return[(...w)=>{const S=Date.now(),R=S-n;R>=o?f(w,S):(u=w,d||(d=setTimeout(()=>{d=null,f(u)},o-R)))},()=>u&&f(u)]}const progressEventReducer=(e,t,n=3)=>{let o=0;const u=speedometer(50,250);return throttle(d=>{const f=d.loaded,g=d.lengthComputable?d.total:void 0,v=f-o,w=u(v),S=f<=g;o=f;const R={loaded:f,total:g,progress:g?f/g:void 0,bytes:v,rate:w||void 0,estimated:w&&g&&S?(g-f)/w:void 0,event:d,lengthComputable:g!=null,[t?"download":"upload"]:!0};e(R)},n)},progressEventDecorator=(e,t)=>{const n=e!=null;return[o=>t[0]({lengthComputable:n,total:e,loaded:o}),t[1]]},asyncDecorator=e=>(...t)=>utils$1.asap(()=>e(...t)),isURLSameOrigin=platform.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,platform.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(e,t,n,o,u,d,f){if(typeof document>"u")return;const g=[`${e}=${encodeURIComponent(t)}`];utils$1.isNumber(n)&&g.push(`expires=${new Date(n).toUTCString()}`),utils$1.isString(o)&&g.push(`path=${o}`),utils$1.isString(u)&&g.push(`domain=${u}`),d===!0&&g.push("secure"),utils$1.isString(f)&&g.push(`SameSite=${f}`),document.cookie=g.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(e){return typeof e!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function combineURLs(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function buildFullPath(e,t,n){let o=!isAbsoluteURL(t);return e&&(o||n==!1)?combineURLs(e,t):t}const headersToObject=e=>e instanceof AxiosHeaders$1?{...e}:e;function mergeConfig$1(e,t){t=t||{};const n={};function o(w,S,R,_){return utils$1.isPlainObject(w)&&utils$1.isPlainObject(S)?utils$1.merge.call({caseless:_},w,S):utils$1.isPlainObject(S)?utils$1.merge({},S):utils$1.isArray(S)?S.slice():S}function u(w,S,R,_){if(utils$1.isUndefined(S)){if(!utils$1.isUndefined(w))return o(void 0,w,R,_)}else return o(w,S,R,_)}function d(w,S){if(!utils$1.isUndefined(S))return o(void 0,S)}function f(w,S){if(utils$1.isUndefined(S)){if(!utils$1.isUndefined(w))return o(void 0,w)}else return o(void 0,S)}function g(w,S,R){if(R in t)return o(w,S);if(R in e)return o(void 0,w)}const v={url:d,method:d,data:d,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:g,headers:(w,S,R)=>u(headersToObject(w),headersToObject(S),R,!0)};return utils$1.forEach(Object.keys({...e,...t}),function(S){if(S==="__proto__"||S==="constructor"||S==="prototype")return;const R=utils$1.hasOwnProp(v,S)?v[S]:u,_=R(e[S],t[S],S);utils$1.isUndefined(_)&&R!==g||(n[S]=_)}),n}const resolveConfig=e=>{const t=mergeConfig$1({},e);let{data:n,withXSRFToken:o,xsrfHeaderName:u,xsrfCookieName:d,headers:f,auth:g}=t;if(t.headers=f=AxiosHeaders$1.from(f),t.url=buildURL(buildFullPath(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),g&&f.set("Authorization","Basic "+btoa((g.username||"")+":"+(g.password?unescape(encodeURIComponent(g.password)):""))),utils$1.isFormData(n)){if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if(utils$1.isFunction(n.getHeaders)){const v=n.getHeaders(),w=["content-type","content-length"];Object.entries(v).forEach(([S,R])=>{w.includes(S.toLowerCase())&&f.set(S,R)})}}if(platform.hasStandardBrowserEnv&&(o&&utils$1.isFunction(o)&&(o=o(t)),o||o!==!1&&isURLSameOrigin(t.url))){const v=u&&d&&cookies.read(d);v&&f.set(u,v)}return t},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(e){return new Promise(function(n,o){const u=resolveConfig(e);let d=u.data;const f=AxiosHeaders$1.from(u.headers).normalize();let{responseType:g,onUploadProgress:v,onDownloadProgress:w}=u,S,R,_,F,M;function I(){F&&F(),M&&M(),u.cancelToken&&u.cancelToken.unsubscribe(S),u.signal&&u.signal.removeEventListener("abort",S)}let N=new XMLHttpRequest;N.open(u.method.toUpperCase(),u.url,!0),N.timeout=u.timeout;function B(){if(!N)return;const U=AxiosHeaders$1.from("getAllResponseHeaders"in N&&N.getAllResponseHeaders()),z={data:!g||g==="text"||g==="json"?N.responseText:N.response,status:N.status,statusText:N.statusText,headers:U,config:e,request:N};settle(function(J){n(J),I()},function(J){o(J),I()},z),N=null}"onloadend"in N?N.onloadend=B:N.onreadystatechange=function(){!N||N.readyState!==4||N.status===0&&!(N.responseURL&&N.responseURL.indexOf("file:")===0)||setTimeout(B)},N.onabort=function(){N&&(o(new AxiosError$1("Request aborted",AxiosError$1.ECONNABORTED,e,N)),N=null)},N.onerror=function($){const z=$&&$.message?$.message:"Network Error",j=new AxiosError$1(z,AxiosError$1.ERR_NETWORK,e,N);j.event=$||null,o(j),N=null},N.ontimeout=function(){let $=u.timeout?"timeout of "+u.timeout+"ms exceeded":"timeout exceeded";const z=u.transitional||transitionalDefaults;u.timeoutErrorMessage&&($=u.timeoutErrorMessage),o(new AxiosError$1($,z.clarifyTimeoutError?AxiosError$1.ETIMEDOUT:AxiosError$1.ECONNABORTED,e,N)),N=null},d===void 0&&f.setContentType(null),"setRequestHeader"in N&&utils$1.forEach(f.toJSON(),function($,z){N.setRequestHeader(z,$)}),utils$1.isUndefined(u.withCredentials)||(N.withCredentials=!!u.withCredentials),g&&g!=="json"&&(N.responseType=u.responseType),w&&([_,M]=progressEventReducer(w,!0),N.addEventListener("progress",_)),v&&N.upload&&([R,F]=progressEventReducer(v),N.upload.addEventListener("progress",R),N.upload.addEventListener("loadend",F)),(u.cancelToken||u.signal)&&(S=U=>{N&&(o(!U||U.type?new CanceledError$1(null,e,N):U),N.abort(),N=null)},u.cancelToken&&u.cancelToken.subscribe(S),u.signal&&(u.signal.aborted?S():u.signal.addEventListener("abort",S)));const H=parseProtocol(u.url);if(H&&platform.protocols.indexOf(H)===-1){o(new AxiosError$1("Unsupported protocol "+H+":",AxiosError$1.ERR_BAD_REQUEST,e));return}N.send(d||null)})},composeSignals=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let o=new AbortController,u;const d=function(w){if(!u){u=!0,g();const S=w instanceof Error?w:this.reason;o.abort(S instanceof AxiosError$1?S:new CanceledError$1(S instanceof Error?S.message:S))}};let f=t&&setTimeout(()=>{f=null,d(new AxiosError$1(`timeout of ${t}ms exceeded`,AxiosError$1.ETIMEDOUT))},t);const g=()=>{e&&(f&&clearTimeout(f),f=null,e.forEach(w=>{w.unsubscribe?w.unsubscribe(d):w.removeEventListener("abort",d)}),e=null)};e.forEach(w=>w.addEventListener("abort",d));const{signal:v}=o;return v.unsubscribe=()=>utils$1.asap(g),v}},streamChunk=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let o=0,u;for(;o<n;)u=o+t,yield e.slice(o,u),o=u},readBytes=async function*(e,t){for await(const n of readStream(e))yield*streamChunk(n,t)},readStream=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:o}=await t.read();if(n)break;yield o}}finally{await t.cancel()}},trackStream=(e,t,n,o)=>{const u=readBytes(e,t);let d=0,f,g=v=>{f||(f=!0,o&&o(v))};return new ReadableStream({async pull(v){try{const{done:w,value:S}=await u.next();if(w){g(),v.close();return}let R=S.byteLength;if(n){let _=d+=R;n(_)}v.enqueue(new Uint8Array(S))}catch(w){throw g(w),w}},cancel(v){return g(v),u.return()}},{highWaterMark:2})},DEFAULT_CHUNK_SIZE=64*1024,{isFunction}=utils$1,globalFetchAPI=(({Request:e,Response:t})=>({Request:e,Response:t}))(utils$1.global),{ReadableStream:ReadableStream$1,TextEncoder}=utils$1.global,test=(e,...t)=>{try{return!!e(...t)}catch{return!1}},factory=e=>{e=utils$1.merge.call({skipUndefined:!0},globalFetchAPI,e);const{fetch:t,Request:n,Response:o}=e,u=t?isFunction(t):typeof fetch=="function",d=isFunction(n),f=isFunction(o);if(!u)return!1;const g=u&&isFunction(ReadableStream$1),v=u&&(typeof TextEncoder=="function"?(M=>I=>M.encode(I))(new TextEncoder):async M=>new Uint8Array(await new n(M).arrayBuffer())),w=d&&g&&test(()=>{let M=!1;const I=new n(platform.origin,{body:new ReadableStream$1,method:"POST",get duplex(){return M=!0,"half"}}).headers.has("Content-Type");return M&&!I}),S=f&&g&&test(()=>utils$1.isReadableStream(new o("").body)),R={stream:S&&(M=>M.body)};u&&["text","arrayBuffer","blob","formData","stream"].forEach(M=>{!R[M]&&(R[M]=(I,N)=>{let B=I&&I[M];if(B)return B.call(I);throw new AxiosError$1(`Response type '${M}' is not supported`,AxiosError$1.ERR_NOT_SUPPORT,N)})});const _=async M=>{if(M==null)return 0;if(utils$1.isBlob(M))return M.size;if(utils$1.isSpecCompliantForm(M))return(await new n(platform.origin,{method:"POST",body:M}).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(M)||utils$1.isArrayBuffer(M))return M.byteLength;if(utils$1.isURLSearchParams(M)&&(M=M+""),utils$1.isString(M))return(await v(M)).byteLength},F=async(M,I)=>{const N=utils$1.toFiniteNumber(M.getContentLength());return N??_(I)};return async M=>{let{url:I,method:N,data:B,signal:H,cancelToken:U,timeout:$,onDownloadProgress:z,onUploadProgress:j,responseType:J,headers:ie,withCredentials:se="same-origin",fetchOptions:fe}=resolveConfig(M),de=t||fetch;J=J?(J+"").toLowerCase():"text";let Ce=composeSignals([H,U&&U.toAbortSignal()],$),be=null;const xe=Ce&&Ce.unsubscribe&&(()=>{Ce.unsubscribe()});let Ee;try{if(j&&w&&N!=="get"&&N!=="head"&&(Ee=await F(ie,B))!==0){let K=new n(I,{method:"POST",body:B,duplex:"half"}),ne;if(utils$1.isFormData(B)&&(ne=K.headers.get("content-type"))&&ie.setContentType(ne),K.body){const[ue,ye]=progressEventDecorator(Ee,progressEventReducer(asyncDecorator(j)));B=trackStream(K.body,DEFAULT_CHUNK_SIZE,ue,ye)}}utils$1.isString(se)||(se=se?"include":"omit");const ae=d&&"credentials"in n.prototype,oe={...fe,signal:Ce,method:N.toUpperCase(),headers:ie.normalize().toJSON(),body:B,duplex:"half",credentials:ae?se:void 0};be=d&&new n(I,oe);let ee=await(d?de(be,fe):de(I,oe));const Z=S&&(J==="stream"||J==="response");if(S&&(z||Z&&xe)){const K={};["status","statusText","headers"].forEach(pe=>{K[pe]=ee[pe]});const ne=utils$1.toFiniteNumber(ee.headers.get("content-length")),[ue,ye]=z&&progressEventDecorator(ne,progressEventReducer(asyncDecorator(z),!0))||[];ee=new o(trackStream(ee.body,DEFAULT_CHUNK_SIZE,ue,()=>{ye&&ye(),xe&&xe()}),K)}J=J||"text";let Q=await R[utils$1.findKey(R,J)||"text"](ee,M);return!Z&&xe&&xe(),await new Promise((K,ne)=>{settle(K,ne,{data:Q,headers:AxiosHeaders$1.from(ee.headers),status:ee.status,statusText:ee.statusText,config:M,request:be})})}catch(ae){throw xe&&xe(),ae&&ae.name==="TypeError"&&/Load failed|fetch/i.test(ae.message)?Object.assign(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,M,be,ae&&ae.response),{cause:ae.cause||ae}):AxiosError$1.from(ae,ae&&ae.code,M,be,ae&&ae.response)}}},seedCache=new Map,getFetch=e=>{let t=e&&e.env||{};const{fetch:n,Request:o,Response:u}=t,d=[o,u,n];let f=d.length,g=f,v,w,S=seedCache;for(;g--;)v=d[g],w=S.get(v),w===void 0&&S.set(v,w=g?new Map:factory(t)),S=w;return w};getFetch();const knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:{get:getFetch}};utils$1.forEach(knownAdapters,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const renderReason=e=>`- ${e}`,isResolvedHandle=e=>utils$1.isFunction(e)||e===null||e===!1;function getAdapter$1(e,t){e=utils$1.isArray(e)?e:[e];const{length:n}=e;let o,u;const d={};for(let f=0;f<n;f++){o=e[f];let g;if(u=o,!isResolvedHandle(o)&&(u=knownAdapters[(g=String(o)).toLowerCase()],u===void 0))throw new AxiosError$1(`Unknown adapter '${g}'`);if(u&&(utils$1.isFunction(u)||(u=u.get(t))))break;d[g||"#"+f]=u}if(!u){const f=Object.entries(d).map(([v,w])=>`adapter ${v} `+(w===!1?"is not supported by the environment":"is not available in the build"));let g=n?f.length>1?`since :
`+f.map(renderReason).join(`
`):" "+renderReason(f[0]):"as no adapter specified";throw new AxiosError$1("There is no suitable adapter to dispatch the request "+g,"ERR_NOT_SUPPORT")}return u}const adapters={getAdapter:getAdapter$1,adapters:knownAdapters};function throwIfCancellationRequested(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new CanceledError$1(null,e)}function dispatchRequest(e){return throwIfCancellationRequested(e),e.headers=AxiosHeaders$1.from(e.headers),e.data=transformData.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(e.adapter||defaults.adapter,e)(e).then(function(o){return throwIfCancellationRequested(e),o.data=transformData.call(e,e.transformResponse,o),o.headers=AxiosHeaders$1.from(o.headers),o},function(o){return isCancel$1(o)||(throwIfCancellationRequested(e),o&&o.response&&(o.response.data=transformData.call(e,e.transformResponse,o.response),o.response.headers=AxiosHeaders$1.from(o.response.headers))),Promise.reject(o)})}const VERSION$2="1.13.5",validators$1={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{validators$1[e]=function(o){return typeof o===e||"a"+(t<1?"n ":" ")+e}});const deprecatedWarnings={};validators$1.transitional=function(t,n,o){function u(d,f){return"[Axios v"+VERSION$2+"] Transitional option '"+d+"'"+f+(o?". "+o:"")}return(d,f,g)=>{if(t===!1)throw new AxiosError$1(u(f," has been removed"+(n?" in "+n:"")),AxiosError$1.ERR_DEPRECATED);return n&&!deprecatedWarnings[f]&&(deprecatedWarnings[f]=!0,console.warn(u(f," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(d,f,g):!0}};validators$1.spelling=function(t){return(n,o)=>(console.warn(`${o} is likely a misspelling of ${t}`),!0)};function assertOptions(e,t,n){if(typeof e!="object")throw new AxiosError$1("options must be an object",AxiosError$1.ERR_BAD_OPTION_VALUE);const o=Object.keys(e);let u=o.length;for(;u-- >0;){const d=o[u],f=t[d];if(f){const g=e[d],v=g===void 0||f(g,d,e);if(v!==!0)throw new AxiosError$1("option "+d+" must be "+v,AxiosError$1.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new AxiosError$1("Unknown option "+d,AxiosError$1.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;let Axios$1=class{constructor(t){this.defaults=t||{},this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(t,n){try{return await this._request(t,n)}catch(o){if(o instanceof Error){let u={};Error.captureStackTrace?Error.captureStackTrace(u):u=new Error;const d=u.stack?u.stack.replace(/^.+\n/,""):"";try{o.stack?d&&!String(o.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+d):o.stack=d}catch{}}throw o}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=mergeConfig$1(this.defaults,n);const{transitional:o,paramsSerializer:u,headers:d}=n;o!==void 0&&validator.assertOptions(o,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean),legacyInterceptorReqResOrdering:validators.transitional(validators.boolean)},!1),u!=null&&(utils$1.isFunction(u)?n.paramsSerializer={serialize:u}:validator.assertOptions(u,{encode:validators.function,serialize:validators.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),validator.assertOptions(n,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let f=d&&utils$1.merge(d.common,d[n.method]);d&&utils$1.forEach(["delete","get","head","post","put","patch","common"],M=>{delete d[M]}),n.headers=AxiosHeaders$1.concat(f,d);const g=[];let v=!0;this.interceptors.request.forEach(function(I){if(typeof I.runWhen=="function"&&I.runWhen(n)===!1)return;v=v&&I.synchronous;const N=n.transitional||transitionalDefaults;N&&N.legacyInterceptorReqResOrdering?g.unshift(I.fulfilled,I.rejected):g.push(I.fulfilled,I.rejected)});const w=[];this.interceptors.response.forEach(function(I){w.push(I.fulfilled,I.rejected)});let S,R=0,_;if(!v){const M=[dispatchRequest.bind(this),void 0];for(M.unshift(...g),M.push(...w),_=M.length,S=Promise.resolve(n);R<_;)S=S.then(M[R++],M[R++]);return S}_=g.length;let F=n;for(;R<_;){const M=g[R++],I=g[R++];try{F=M(F)}catch(N){I.call(this,N);break}}try{S=dispatchRequest.call(this,F)}catch(M){return Promise.reject(M)}for(R=0,_=w.length;R<_;)S=S.then(w[R++],w[R++]);return S}getUri(t){t=mergeConfig$1(this.defaults,t);const n=buildFullPath(t.baseURL,t.url,t.allowAbsoluteUrls);return buildURL(n,t.params,t.paramsSerializer)}};utils$1.forEach(["delete","get","head","options"],function(t){Axios$1.prototype[t]=function(n,o){return this.request(mergeConfig$1(o||{},{method:t,url:n,data:(o||{}).data}))}});utils$1.forEach(["post","put","patch"],function(t){function n(o){return function(d,f,g){return this.request(mergeConfig$1(g||{},{method:t,headers:o?{"Content-Type":"multipart/form-data"}:{},url:d,data:f}))}}Axios$1.prototype[t]=n(),Axios$1.prototype[t+"Form"]=n(!0)});let CancelToken$1=class Cp{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(d){n=d});const o=this;this.promise.then(u=>{if(!o._listeners)return;let d=o._listeners.length;for(;d-- >0;)o._listeners[d](u);o._listeners=null}),this.promise.then=u=>{let d;const f=new Promise(g=>{o.subscribe(g),d=g}).then(u);return f.cancel=function(){o.unsubscribe(d)},f},t(function(d,f,g){o.reason||(o.reason=new CanceledError$1(d,f,g),n(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=o=>{t.abort(o)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Cp(function(u){t=u}),cancel:t}}};function spread$1(e){return function(n){return e.apply(null,n)}}function isAxiosError$1(e){return utils$1.isObject(e)&&e.isAxiosError===!0}const HttpStatusCode$1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(HttpStatusCode$1).forEach(([e,t])=>{HttpStatusCode$1[t]=e});function createInstance$1(e){const t=new Axios$1(e),n=bind(Axios$1.prototype.request,t);return utils$1.extend(n,Axios$1.prototype,t,{allOwnKeys:!0}),utils$1.extend(n,t,null,{allOwnKeys:!0}),n.create=function(u){return createInstance$1(mergeConfig$1(e,u))},n}const axios=createInstance$1(defaults);axios.Axios=Axios$1;axios.CanceledError=CanceledError$1;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel$1;axios.VERSION=VERSION$2;axios.toFormData=toFormData$1;axios.AxiosError=AxiosError$1;axios.Cancel=axios.CanceledError;axios.all=function(t){return Promise.all(t)};axios.spread=spread$1;axios.isAxiosError=isAxiosError$1;axios.mergeConfig=mergeConfig$1;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=e=>formDataToJSON(utils$1.isHTMLForm(e)?new FormData(e):e);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const{Axios,AxiosError,CanceledError,isCancel,CancelToken,VERSION:VERSION$1,all,Cancel,isAxiosError,spread,toFormData,AxiosHeaders,HttpStatusCode,formToJSON,getAdapter,mergeConfig}=axios,api=axios.create({baseURL:"https://space-management-api.onrender.com",timeout:45e3});function FileUploader({onUpload:e}){const[t,n]=reactExports.useState(null),[o,u]=reactExports.useState(""),[d,f]=reactExports.useState(!1),g=async()=>{if(!t)return alert("Please select a file first");const v=new FormData;v.append("file",t);try{f(!0);const w=await api.post("/upload",v);e(w.data.summary),u(" "+w.data.message)}catch(w){console.error(w),u(" Upload failed. Check the console for details.")}finally{f(!1)}};return jsxRuntimeExports.jsxs(motion.div,{className:"bg-white p-8 rounded-2xl shadow-md border border-gray-200 text-center",initial:{opacity:0,y:30},animate:{opacity:1,y:0},children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"Upload Space Data (Excel)"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 mb-6",children:"Upload your Excel file exported from Bluebeam Revu or another source."}),jsxRuntimeExports.jsx("input",{type:"file",accept:".xlsx,.xls",className:"border border-gray-300 rounded-md px-3 py-2 w-full mb-4 bg-gray-50",onChange:v=>n(v.target.files[0])}),jsxRuntimeExports.jsx("button",{onClick:g,disabled:d,className:"px-6 py-2 bg-gray-800 text-white rounded-md hover:bg-gray-700 transition disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Uploading...":"Upload File"}),o&&jsxRuntimeExports.jsx("p",{className:"mt-4 text-gray-700 font-medium",children:o}),d&&jsxRuntimeExports.jsx("p",{className:"mt-2 text-gray-400 text-sm",children:"This may take a moment if the server is waking up..."})]})}const PI_OVER_180=Math.PI/180;function detectBrowser(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const glob=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},Konva$1={_global:glob,version:"10.2.0",isBrowser:detectBrowser(),isUnminified:/param/.test((function(e){}).toString()),dblClickWindow:400,getAngle(e){return Konva$1.angleDeg?e*PI_OVER_180:e},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return Konva$1.DD.isDragging},isTransforming(){var e,t;return(t=(e=Konva$1.Transformer)===null||e===void 0?void 0:e.isTransforming())!==null&&t!==void 0?t:!1},isDragReady(){return!!Konva$1.DD.node},releaseCanvasOnDestroy:!0,document:glob.document,_injectGlobal(e){typeof glob.Konva<"u"&&console.error("Several Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),glob.Konva=e}},_registerNode=e=>{Konva$1[e.prototype.getClassName()]=e};Konva$1._injectGlobal(Konva$1);const NODE_ERROR=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,ensureBrowser=()=>{if(typeof document>"u")throw new Error(NODE_ERROR)};class Transform{constructor(t=[1,0,0,1,0,0]){this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new Transform(this.m)}copyInto(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]}point(t){const n=this.m;return{x:n[0]*t.x+n[2]*t.y+n[4],y:n[1]*t.x+n[3]*t.y+n[5]}}translate(t,n){return this.m[4]+=this.m[0]*t+this.m[2]*n,this.m[5]+=this.m[1]*t+this.m[3]*n,this}scale(t,n){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=n,this.m[3]*=n,this}rotate(t){const n=Math.cos(t),o=Math.sin(t),u=this.m[0]*n+this.m[2]*o,d=this.m[1]*n+this.m[3]*o,f=this.m[0]*-o+this.m[2]*n,g=this.m[1]*-o+this.m[3]*n;return this.m[0]=u,this.m[1]=d,this.m[2]=f,this.m[3]=g,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(t,n){const o=this.m[0]+this.m[2]*n,u=this.m[1]+this.m[3]*n,d=this.m[2]+this.m[0]*t,f=this.m[3]+this.m[1]*t;return this.m[0]=o,this.m[1]=u,this.m[2]=d,this.m[3]=f,this}multiply(t){const n=this.m[0]*t.m[0]+this.m[2]*t.m[1],o=this.m[1]*t.m[0]+this.m[3]*t.m[1],u=this.m[0]*t.m[2]+this.m[2]*t.m[3],d=this.m[1]*t.m[2]+this.m[3]*t.m[3],f=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],g=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=n,this.m[1]=o,this.m[2]=u,this.m[3]=d,this.m[4]=f,this.m[5]=g,this}invert(){const t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),n=this.m[3]*t,o=-this.m[1]*t,u=-this.m[2]*t,d=this.m[0]*t,f=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),g=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=n,this.m[1]=o,this.m[2]=u,this.m[3]=d,this.m[4]=f,this.m[5]=g,this}getMatrix(){return this.m}decompose(){const t=this.m[0],n=this.m[1],o=this.m[2],u=this.m[3],d=this.m[4],f=this.m[5],g=t*u-n*o,v={x:d,y:f,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(t!=0||n!=0){const w=Math.sqrt(t*t+n*n);v.rotation=n>0?Math.acos(t/w):-Math.acos(t/w),v.scaleX=w,v.scaleY=g/w,v.skewX=(t*o+n*u)/g,v.skewY=0}else if(o!=0||u!=0){const w=Math.sqrt(o*o+u*u);v.rotation=Math.PI/2-(u>0?Math.acos(-o/w):-Math.acos(o/w)),v.scaleX=g/w,v.scaleY=w,v.skewX=0,v.skewY=(t*o+n*u)/g}return v.rotation=Util._getRotation(v.rotation),v}}const OBJECT_ARRAY="[object Array]",OBJECT_NUMBER="[object Number]",OBJECT_STRING="[object String]",OBJECT_BOOLEAN="[object Boolean]",PI_OVER_DEG180=Math.PI/180,DEG180_OVER_PI=180/Math.PI,HASH="#",EMPTY_STRING$1="",ZERO="0",KONVA_WARNING="Konva warning: ",KONVA_ERROR="Konva error: ",RGB_PAREN="rgb(",COLORS={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},RGB_REGEX=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let animQueue=[],_isCanvasFarblingActive=null;const req=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(e){setTimeout(e,16)},Util={_isElement(e){return!!(e&&e.nodeType==1)},_isFunction(e){return!!(e&&e.constructor&&e.call&&e.apply)},_isPlainObject(e){return!!e&&e.constructor===Object},_isArray(e){return Object.prototype.toString.call(e)===OBJECT_ARRAY},_isNumber(e){return Object.prototype.toString.call(e)===OBJECT_NUMBER&&!isNaN(e)&&isFinite(e)},_isString(e){return Object.prototype.toString.call(e)===OBJECT_STRING},_isBoolean(e){return Object.prototype.toString.call(e)===OBJECT_BOOLEAN},isObject(e){return e instanceof Object},isValidSelector(e){if(typeof e!="string")return!1;const t=e[0];return t==="#"||t==="."||t===t.toUpperCase()},_sign(e){return e===0||e>0?1:-1},requestAnimFrame(e){animQueue.push(e),animQueue.length===1&&req(function(){const t=animQueue;animQueue=[],t.forEach(function(n){n()})})},createCanvasElement(){ensureBrowser();const e=document.createElement("canvas");try{e.style=e.style||{}}catch{}return e},createImageElement(){return ensureBrowser(),document.createElement("img")},_isInDocument(e){for(;e=e.parentNode;)if(e==document)return!0;return!1},_urlToImage(e,t){const n=Util.createImageElement();n.onload=function(){t(n)},n.src=e},_rgbToHex(e,t,n){return((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1)},_hexToRgb(e){e=e.replace(HASH,EMPTY_STRING$1);const t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:t&255}},getRandomColor(){let e=(Math.random()*16777215<<0).toString(16);for(;e.length<6;)e=ZERO+e;return HASH+e},isCanvasFarblingActive(){if(_isCanvasFarblingActive!==null)return _isCanvasFarblingActive;if(typeof document>"u")return _isCanvasFarblingActive=!1,!1;const e=this.createCanvasElement();e.width=10,e.height=10;const t=e.getContext("2d",{willReadFrequently:!0});t.clearRect(0,0,10,10),t.fillStyle="#282828",t.fillRect(0,0,10,10);const n=t.getImageData(0,0,10,10).data;let o=!1;for(let u=0;u<100;u++)if(n[u*4]!==40||n[u*4+1]!==40||n[u*4+2]!==40||n[u*4+3]!==255){o=!0;break}return _isCanvasFarblingActive=o,this.releaseCanvas(e),_isCanvasFarblingActive},getHitColor(){const e=this.getRandomColor();return this.isCanvasFarblingActive()?this.getSnappedHexColor(e):e},getHitColorKey(e,t,n){return this.isCanvasFarblingActive()&&(e=Math.round(e/5)*5,t=Math.round(t/5)*5,n=Math.round(n/5)*5),HASH+this._rgbToHex(e,t,n)},getSnappedHexColor(e){const t=this._hexToRgb(e);return HASH+this._rgbToHex(Math.round(t.r/5)*5,Math.round(t.g/5)*5,Math.round(t.b/5)*5)},getRGB(e){let t;return e in COLORS?(t=COLORS[e],{r:t[0],g:t[1],b:t[2]}):e[0]===HASH?this._hexToRgb(e.substring(1)):e.substr(0,4)===RGB_PAREN?(t=RGB_REGEX.exec(e.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},colorToRGBA(e){return e=e||"black",Util._namedColorToRBA(e)||Util._hex3ColorToRGBA(e)||Util._hex4ColorToRGBA(e)||Util._hex6ColorToRGBA(e)||Util._hex8ColorToRGBA(e)||Util._rgbColorToRGBA(e)||Util._rgbaColorToRGBA(e)||Util._hslColorToRGBA(e)},_namedColorToRBA(e){const t=COLORS[e.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA(e){if(e.indexOf("rgb(")===0){e=e.match(/rgb\(([^)]+)\)/)[1];const t=e.split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA(e){if(e.indexOf("rgba(")===0){e=e.match(/rgba\(([^)]+)\)/)[1];const t=e.split(/ *, */).map((n,o)=>n.slice(-1)==="%"?o===3?parseInt(n)/100:parseInt(n)/100*255:Number(n));return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex8ColorToRGBA(e){if(e[0]==="#"&&e.length===9)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:parseInt(e.slice(7,9),16)/255}},_hex6ColorToRGBA(e){if(e[0]==="#"&&e.length===7)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:1}},_hex4ColorToRGBA(e){if(e[0]==="#"&&e.length===5)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:parseInt(e[4]+e[4],16)/255}},_hex3ColorToRGBA(e){if(e[0]==="#"&&e.length===4)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:1}},_hslColorToRGBA(e){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(e)){const[t,...n]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e),o=Number(n[0])/360,u=Number(n[1])/100,d=Number(n[2])/100;let f,g,v;if(u===0)return v=d*255,{r:Math.round(v),g:Math.round(v),b:Math.round(v),a:1};d<.5?f=d*(1+u):f=d+u-d*u;const w=2*d-f,S=[0,0,0];for(let R=0;R<3;R++)g=o+1/3*-(R-1),g<0&&g++,g>1&&g--,6*g<1?v=w+(f-w)*6*g:2*g<1?v=f:3*g<2?v=w+(f-w)*(2/3-g)*6:v=w,S[R]=v*255;return{r:Math.round(S[0]),g:Math.round(S[1]),b:Math.round(S[2]),a:1}}},haveIntersection(e,t){return!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y)},cloneObject(e){const t={};for(const n in e)this._isPlainObject(e[n])?t[n]=this.cloneObject(e[n]):this._isArray(e[n])?t[n]=this.cloneArray(e[n]):t[n]=e[n];return t},cloneArray(e){return e.slice(0)},degToRad(e){return e*PI_OVER_DEG180},radToDeg(e){return e*DEG180_OVER_PI},_degToRad(e){return Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),Util.degToRad(e)},_radToDeg(e){return Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),Util.radToDeg(e)},_getRotation(e){return Konva$1.angleDeg?Util.radToDeg(e):e},_capitalize(e){return e.charAt(0).toUpperCase()+e.slice(1)},throw(e){throw new Error(KONVA_ERROR+e)},error(e){console.error(KONVA_ERROR+e)},warn(e){Konva$1.showWarnings&&console.warn(KONVA_WARNING+e)},each(e,t){for(const n in e)t(n,e[n])},_inRange(e,t,n){return t<=e&&e<n},_getProjectionToSegment(e,t,n,o,u,d){let f,g,v;const w=(e-n)*(e-n)+(t-o)*(t-o);if(w==0)f=e,g=t,v=(u-n)*(u-n)+(d-o)*(d-o);else{const S=((u-e)*(n-e)+(d-t)*(o-t))/w;S<0?(f=e,g=t,v=(e-u)*(e-u)+(t-d)*(t-d)):S>1?(f=n,g=o,v=(n-u)*(n-u)+(o-d)*(o-d)):(f=e+S*(n-e),g=t+S*(o-t),v=(f-u)*(f-u)+(g-d)*(g-d))}return[f,g,v]},_getProjectionToLine(e,t,n){const o=Util.cloneObject(e);let u=Number.MAX_VALUE;return t.forEach(function(d,f){if(!n&&f===t.length-1)return;const g=t[(f+1)%t.length],v=Util._getProjectionToSegment(d.x,d.y,g.x,g.y,e.x,e.y),w=v[0],S=v[1],R=v[2];R<u&&(o.x=w,o.y=S,u=R)}),o},_prepareArrayForTween(e,t,n){const o=[],u=[];if(e.length>t.length){const f=t;t=e,e=f}for(let f=0;f<e.length;f+=2)o.push({x:e[f],y:e[f+1]});for(let f=0;f<t.length;f+=2)u.push({x:t[f],y:t[f+1]});const d=[];return u.forEach(function(f){const g=Util._getProjectionToLine(f,o,n);d.push(g.x),d.push(g.y)}),d},_prepareToStringify(e){let t;e.visitedByCircularReferenceRemoval=!0;for(const n in e)if(e.hasOwnProperty(n)&&e[n]&&typeof e[n]=="object"){if(t=Object.getOwnPropertyDescriptor(e,n),e[n].visitedByCircularReferenceRemoval||Util._isElement(e[n]))if(t.configurable)delete e[n];else return null;else if(Util._prepareToStringify(e[n])===null)if(t.configurable)delete e[n];else return null}return delete e.visitedByCircularReferenceRemoval,e},_assign(e,t){for(const n in t)e[n]=t[n];return e},_getFirstPointerId(e){return e.touches?e.changedTouches[0].identifier:e.pointerId||999},releaseCanvas(...e){Konva$1.releaseCanvasOnDestroy&&e.forEach(t=>{t.width=0,t.height=0})},drawRoundedRectPath(e,t,n,o){let u=t<0?t:0,d=n<0?n:0;t=Math.abs(t),n=Math.abs(n);let f=0,g=0,v=0,w=0;typeof o=="number"?f=g=v=w=Math.min(o,t/2,n/2):(f=Math.min(o[0]||0,t/2,n/2),g=Math.min(o[1]||0,t/2,n/2),w=Math.min(o[2]||0,t/2,n/2),v=Math.min(o[3]||0,t/2,n/2)),e.moveTo(u+f,d),e.lineTo(u+t-g,d),e.arc(u+t-g,d+g,g,Math.PI*3/2,0,!1),e.lineTo(u+t,d+n-w),e.arc(u+t-w,d+n-w,w,0,Math.PI/2,!1),e.lineTo(u+v,d+n),e.arc(u+v,d+n-v,v,Math.PI/2,Math.PI,!1),e.lineTo(u,d+f),e.arc(u+f,d+f,f,Math.PI,Math.PI*3/2,!1)},drawRoundedPolygonPath(e,t,n,o,u){o=Math.abs(o);for(let d=0;d<n;d++){const f=t[(d-1+n)%n],g=t[d],v=t[(d+1)%n],w={x:g.x-f.x,y:g.y-f.y},S={x:v.x-g.x,y:v.y-g.y},R=Math.hypot(w.x,w.y),_=Math.hypot(S.x,S.y);let F;typeof u=="number"?F=u:F=d<u.length?u[d]:0,F=o*Math.cos(Math.PI/n)*Math.min(1,F/o*2);const I={x:w.x/R,y:w.y/R},N={x:S.x/_,y:S.y/_},B={x:g.x-I.x*F,y:g.y-I.y*F},H={x:g.x+N.x*F,y:g.y+N.y*F};d===0?e.moveTo(B.x,B.y):e.lineTo(B.x,B.y),e.arcTo(g.x,g.y,H.x,H.y,F)}}};function simplifyArray(e){const t=[],n=e.length,o=Util;for(let u=0;u<n;u++){let d=e[u];o._isNumber(d)?d=Math.round(d*1e3)/1e3:o._isString(d)||(d=d+""),t.push(d)}return t}const COMMA=",",OPEN_PAREN="(",CLOSE_PAREN=")",OPEN_PAREN_BRACKET="([",CLOSE_BRACKET_PAREN="])",SEMICOLON=";",DOUBLE_PAREN="()",EQUALS="=",CONTEXT_METHODS=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],CONTEXT_PROPERTIES=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"],traceArrMax=100;let _cssFiltersSupported=null;function isCSSFiltersSupported(){if(_cssFiltersSupported!==null)return _cssFiltersSupported;try{const t=Util.createCanvasElement().getContext("2d");return t?!!t&&"filter"in t:(_cssFiltersSupported=!1,!1)}catch{return _cssFiltersSupported=!1,!1}}class Context{constructor(t){this.canvas=t,Konva$1.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,n){let o=this.traceArr,u=o.length,d="",f,g,v,w;for(f=0;f<u;f++)g=o[f],v=g.method,v?(w=g.args,d+=v,t?d+=DOUBLE_PAREN:Util._isArray(w[0])?d+=OPEN_PAREN_BRACKET+w.join(COMMA)+CLOSE_BRACKET_PAREN:(n&&(w=w.map(S=>typeof S=="number"?Math.floor(S):S)),d+=OPEN_PAREN+w.join(COMMA)+CLOSE_PAREN)):(d+=g.property,t||(d+=EQUALS+g.val)),d+=SEMICOLON;return d}clearTrace(){this.traceArr=[]}_trace(t){let n=this.traceArr,o;n.push(t),o=n.length,o>=traceArrMax&&n.shift()}reset(){const t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){const n=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(t){const n=t.attrs.lineCap;n&&this.setAttr("lineCap",n)}_applyOpacity(t){const n=t.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(t){const n=t.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}_applyMiterLimit(t){const n=t.attrs.miterLimit;n!=null&&this.setAttr("miterLimit",n)}setAttr(t,n){this._context[t]=n}arc(t,n,o,u,d,f){this._context.arc(t,n,o,u,d,f)}arcTo(t,n,o,u,d){this._context.arcTo(t,n,o,u,d)}beginPath(){this._context.beginPath()}bezierCurveTo(t,n,o,u,d,f){this._context.bezierCurveTo(t,n,o,u,d,f)}clearRect(t,n,o,u){this._context.clearRect(t,n,o,u)}clip(...t){this._context.clip.apply(this._context,t)}closePath(){this._context.closePath()}createImageData(t,n){const o=arguments;if(o.length===2)return this._context.createImageData(t,n);if(o.length===1)return this._context.createImageData(t)}createLinearGradient(t,n,o,u){return this._context.createLinearGradient(t,n,o,u)}createPattern(t,n){return this._context.createPattern(t,n)}createRadialGradient(t,n,o,u,d,f){return this._context.createRadialGradient(t,n,o,u,d,f)}drawImage(t,n,o,u,d,f,g,v,w){const S=arguments,R=this._context;S.length===3?R.drawImage(t,n,o):S.length===5?R.drawImage(t,n,o,u,d):S.length===9&&R.drawImage(t,n,o,u,d,f,g,v,w)}ellipse(t,n,o,u,d,f,g,v){this._context.ellipse(t,n,o,u,d,f,g,v)}isPointInPath(t,n,o,u){return o?this._context.isPointInPath(o,t,n,u):this._context.isPointInPath(t,n,u)}fill(...t){this._context.fill.apply(this._context,t)}fillRect(t,n,o,u){this._context.fillRect(t,n,o,u)}strokeRect(t,n,o,u){this._context.strokeRect(t,n,o,u)}fillText(t,n,o,u){u?this._context.fillText(t,n,o,u):this._context.fillText(t,n,o)}measureText(t){return this._context.measureText(t)}getImageData(t,n,o,u){return this._context.getImageData(t,n,o,u)}lineTo(t,n){this._context.lineTo(t,n)}moveTo(t,n){this._context.moveTo(t,n)}rect(t,n,o,u){this._context.rect(t,n,o,u)}roundRect(t,n,o,u,d){this._context.roundRect(t,n,o,u,d)}putImageData(t,n,o){this._context.putImageData(t,n,o)}quadraticCurveTo(t,n,o,u){this._context.quadraticCurveTo(t,n,o,u)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,n){this._context.scale(t,n)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,n,o,u,d,f){this._context.setTransform(t,n,o,u,d,f)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,n,o,u){this._context.strokeText(t,n,o,u)}transform(t,n,o,u,d,f){this._context.transform(t,n,o,u,d,f)}translate(t,n){this._context.translate(t,n)}_enableTrace(){let t=this,n=CONTEXT_METHODS.length,o=this.setAttr,u,d;const f=function(g){let v=t[g],w;t[g]=function(){return d=simplifyArray(Array.prototype.slice.call(arguments,0)),w=v.apply(t,arguments),t._trace({method:g,args:d}),w}};for(u=0;u<n;u++)f(CONTEXT_METHODS[u]);t.setAttr=function(){o.apply(t,arguments);const g=arguments[0];let v=arguments[1];(g==="shadowOffsetX"||g==="shadowOffsetY"||g==="shadowBlur")&&(v=v/this.canvas.getPixelRatio()),t._trace({property:g,val:v})}}_applyGlobalCompositeOperation(t){const n=t.attrs.globalCompositeOperation;!n||n==="source-over"||this.setAttr("globalCompositeOperation",n)}}CONTEXT_PROPERTIES.forEach(function(e){Object.defineProperty(Context.prototype,e,{get(){return this._context[e]},set(t){this._context[e]=t}})});class SceneContext extends Context{constructor(t,{willReadFrequently:n=!1}={}){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:n})}_fillColor(t){const n=t.fill();this.setAttr("fillStyle",n),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){const n=t._getLinearGradient();n&&(this.setAttr("fillStyle",n),t._fillFunc(this))}_fillRadialGradient(t){const n=t._getRadialGradient();n&&(this.setAttr("fillStyle",n),t._fillFunc(this))}_fill(t){const n=t.fill(),o=t.getFillPriority();if(n&&o==="color"){this._fillColor(t);return}const u=t.getFillPatternImage();if(u&&o==="pattern"){this._fillPattern(t);return}const d=t.getFillLinearGradientColorStops();if(d&&o==="linear-gradient"){this._fillLinearGradient(t);return}const f=t.getFillRadialGradientColorStops();if(f&&o==="radial-gradient"){this._fillRadialGradient(t);return}n?this._fillColor(t):u?this._fillPattern(t):d?this._fillLinearGradient(t):f&&this._fillRadialGradient(t)}_strokeLinearGradient(t){const n=t.getStrokeLinearGradientStartPoint(),o=t.getStrokeLinearGradientEndPoint(),u=t.getStrokeLinearGradientColorStops(),d=this.createLinearGradient(n.x,n.y,o.x,o.y);if(u){for(let f=0;f<u.length;f+=2)d.addColorStop(u[f],u[f+1]);this.setAttr("strokeStyle",d)}}_stroke(t){const n=t.dash(),o=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!o){this.save();const d=this.getCanvas().getPixelRatio();this.setTransform(d,0,0,d,0,0)}this._applyLineCap(t),n&&t.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),o||this.restore()}}_applyShadow(t){var n,o,u;const d=(n=t.getShadowRGBA())!==null&&n!==void 0?n:"black",f=(o=t.getShadowBlur())!==null&&o!==void 0?o:5,g=(u=t.getShadowOffset())!==null&&u!==void 0?u:{x:0,y:0},v=t.getAbsoluteScale(),w=this.canvas.getPixelRatio(),S=v.x*w,R=v.y*w;this.setAttr("shadowColor",d),this.setAttr("shadowBlur",f*Math.min(Math.abs(S),Math.abs(R))),this.setAttr("shadowOffsetX",g.x*S),this.setAttr("shadowOffsetY",g.y*R)}}class HitContext extends Context{constructor(t){super(t),this._context=t._canvas.getContext("2d",{willReadFrequently:!0})}_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){const n=t.getStrokeScaleEnabled();if(!n){this.save();const d=this.getCanvas().getPixelRatio();this.setTransform(d,0,0,d,0,0)}this._applyLineCap(t);const o=t.hitStrokeWidth(),u=o==="auto"?t.strokeWidth():o;this.setAttr("lineWidth",u),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),n||this.restore()}}}let _pixelRatio;function getDevicePixelRatio(){if(_pixelRatio)return _pixelRatio;const e=Util.createCanvasElement(),t=e.getContext("2d");return _pixelRatio=(function(){const n=Konva$1._global.devicePixelRatio||1,o=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return n/o})(),Util.releaseCanvas(e),_pixelRatio}class Canvas{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const o=(t||{}).pixelRatio||Konva$1.pixelRatio||getDevicePixelRatio();this.pixelRatio=o,this._canvas=Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){const n=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";const n=this.pixelRatio;this.getContext()._context.scale(n,n)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";const n=this.pixelRatio;this.getContext()._context.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,n){this.setWidth(t||0),this.setHeight(n||0)}toDataURL(t,n){try{return this._canvas.toDataURL(t,n)}catch{try{return this._canvas.toDataURL()}catch(u){return Util.error("Unable to get data URL. "+u.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}class SceneCanvas extends Canvas{constructor(t={width:0,height:0,willReadFrequently:!1}){super(t),this.context=new SceneContext(this,{willReadFrequently:t.willReadFrequently}),this.setSize(t.width,t.height)}}class HitCanvas extends Canvas{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new HitContext(this),this.setSize(t.width,t.height)}}const DD={get isDragging(){let e=!1;return DD._dragElements.forEach(t=>{t.dragStatus==="dragging"&&(e=!0)}),e},justDragged:!1,get node(){let e;return DD._dragElements.forEach(t=>{e=t.node}),e},_dragElements:new Map,_drag(e){const t=[];DD._dragElements.forEach((n,o)=>{const{node:u}=n,d=u.getStage();d.setPointersPositions(e),n.pointerId===void 0&&(n.pointerId=Util._getFirstPointerId(e));const f=d._changedPointerPositions.find(g=>g.id===n.pointerId);if(f){if(n.dragStatus!=="dragging"){const g=u.dragDistance();if(Math.max(Math.abs(f.x-n.startPointerPos.x),Math.abs(f.y-n.startPointerPos.y))<g||(u.startDrag({evt:e}),!u.isDragging()))return}u._setDragPosition(e,n),t.push(u)}}),t.forEach(n=>{n.fire("dragmove",{type:"dragmove",target:n,evt:e},!0)})},_endDragBefore(e){const t=[];DD._dragElements.forEach(n=>{const{node:o}=n,u=o.getStage();if(e&&u.setPointersPositions(e),!u._changedPointerPositions.find(g=>g.id===n.pointerId))return;(n.dragStatus==="dragging"||n.dragStatus==="stopped")&&(DD.justDragged=!0,Konva$1._mouseListenClick=!1,Konva$1._touchListenClick=!1,Konva$1._pointerListenClick=!1,n.dragStatus="stopped");const f=n.node.getLayer()||n.node instanceof Konva$1.Stage&&n.node;f&&t.indexOf(f)===-1&&t.push(f)}),t.forEach(n=>{n.draw()})},_endDragAfter(e){DD._dragElements.forEach((t,n)=>{t.dragStatus==="stopped"&&t.node.fire("dragend",{type:"dragend",target:t.node,evt:e},!0),t.dragStatus!=="dragging"&&DD._dragElements.delete(n)})}};Konva$1.isBrowser&&(window.addEventListener("mouseup",DD._endDragBefore,!0),window.addEventListener("touchend",DD._endDragBefore,!0),window.addEventListener("touchcancel",DD._endDragBefore,!0),window.addEventListener("mousemove",DD._drag),window.addEventListener("touchmove",DD._drag),window.addEventListener("mouseup",DD._endDragAfter,!1),window.addEventListener("touchend",DD._endDragAfter,!1),window.addEventListener("touchcancel",DD._endDragAfter,!1));function _formatValue(e){return Util._isString(e)?'"'+e+'"':Object.prototype.toString.call(e)==="[object Number]"||Util._isBoolean(e)?e:Object.prototype.toString.call(e)}function RGBComponent(e){return e>255?255:e<0?0:Math.round(e)}function getNumberValidator(){if(Konva$1.isUnminified)return function(e,t){return Util._isNumber(e)||Util.warn(_formatValue(e)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),e}}function getNumberOrArrayOfNumbersValidator(e){if(Konva$1.isUnminified)return function(t,n){let o=Util._isNumber(t),u=Util._isArray(t)&&t.length==e;return!o&&!u&&Util.warn(_formatValue(t)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+e+")"),t}}function getNumberOrAutoValidator(){if(Konva$1.isUnminified)return function(e,t){return Util._isNumber(e)||e==="auto"||Util.warn(_formatValue(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),e}}function getStringValidator(){if(Konva$1.isUnminified)return function(e,t){return Util._isString(e)||Util.warn(_formatValue(e)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),e}}function getStringOrGradientValidator(){if(Konva$1.isUnminified)return function(e,t){const n=Util._isString(e),o=Object.prototype.toString.call(e)==="[object CanvasGradient]"||e&&e.addColorStop;return n||o||Util.warn(_formatValue(e)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),e}}function getNumberArrayValidator(){if(Konva$1.isUnminified)return function(e,t){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&e instanceof n||(Util._isArray(e)?e.forEach(function(o){Util._isNumber(o)||Util.warn('"'+t+'" attribute has non numeric element '+o+". Make sure that all elements are numbers.")}):Util.warn(_formatValue(e)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),e}}function getBooleanValidator(){if(Konva$1.isUnminified)return function(e,t){return e===!0||e===!1||Util.warn(_formatValue(e)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),e}}function getComponentValidator(e){if(Konva$1.isUnminified)return function(t,n){return t==null||Util.isObject(t)||Util.warn(_formatValue(t)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+e),t}}const GET="get",SET$1="set",Factory={addGetterSetter(e,t,n,o,u){Factory.addGetter(e,t,n),Factory.addSetter(e,t,o,u),Factory.addOverloadedGetterSetter(e,t)},addGetter(e,t,n){const o=GET+Util._capitalize(t);e.prototype[o]=e.prototype[o]||function(){const u=this.attrs[t];return u===void 0?n:u}},addSetter(e,t,n,o){const u=SET$1+Util._capitalize(t);e.prototype[u]||Factory.overWriteSetter(e,t,n,o)},overWriteSetter(e,t,n,o){const u=SET$1+Util._capitalize(t);e.prototype[u]=function(d){return n&&d!==void 0&&d!==null&&(d=n.call(this,d,t)),this._setAttr(t,d),o&&o.call(this),this}},addComponentsGetterSetter(e,t,n,o,u){const d=n.length,f=Util._capitalize,g=GET+f(t),v=SET$1+f(t);e.prototype[g]=function(){const S={};for(let R=0;R<d;R++){const _=n[R];S[_]=this.getAttr(t+f(_))}return S};const w=getComponentValidator(n);e.prototype[v]=function(S){const R=this.attrs[t];o&&(S=o.call(this,S,t)),w&&w.call(this,S,t);for(const _ in S)S.hasOwnProperty(_)&&this._setAttr(t+f(_),S[_]);return S||n.forEach(_=>{this._setAttr(t+f(_),void 0)}),this._fireChangeEvent(t,R,S),u&&u.call(this),this},Factory.addOverloadedGetterSetter(e,t)},addOverloadedGetterSetter(e,t){const n=Util._capitalize(t),o=SET$1+n,u=GET+n;e.prototype[t]=function(){return arguments.length?(this[o](arguments[0]),this):this[u]()}},addDeprecatedGetterSetter(e,t,n,o){Util.error("Adding deprecated "+t);const u=GET+Util._capitalize(t),d=t+" property is deprecated and will be removed soon. Look at Konva change log for more information.";e.prototype[u]=function(){Util.error(d);const f=this.attrs[t];return f===void 0?n:f},Factory.addSetter(e,t,o,function(){Util.error(d)}),Factory.addOverloadedGetterSetter(e,t)},backCompat(e,t){Util.each(t,function(n,o){const u=e.prototype[o],d=GET+Util._capitalize(n),f=SET$1+Util._capitalize(n);function g(){u.apply(this,arguments),Util.error('"'+n+'" method is deprecated and will be removed soon. Use ""'+o+'" instead.')}e.prototype[n]=g,e.prototype[d]=g,e.prototype[f]=g})},afterSetFilter(){this._filterUpToDate=!1}};function parseCSSFilters(e){const t=/(\w+)\(([^)]+)\)/g;let n;for(;(n=t.exec(e))!==null;){const[,o,u]=n;switch(o){case"blur":{const d=parseFloat(u.replace("px",""));return function(f){this.blurRadius(d*.5);const g=Konva$1.Filters;g&&g.Blur&&g.Blur.call(this,f)}}case"brightness":{const d=u.includes("%")?parseFloat(u)/100:parseFloat(u);return function(f){this.brightness(d);const g=Konva$1.Filters;g&&g.Brightness&&g.Brightness.call(this,f)}}case"contrast":{const d=parseFloat(u);return function(f){const g=100*(Math.sqrt(d)-1);this.contrast(g);const v=Konva$1.Filters;v&&v.Contrast&&v.Contrast.call(this,f)}}case"grayscale":return function(d){const f=Konva$1.Filters;f&&f.Grayscale&&f.Grayscale.call(this,d)};case"sepia":return function(d){const f=Konva$1.Filters;f&&f.Sepia&&f.Sepia.call(this,d)};case"invert":return function(d){const f=Konva$1.Filters;f&&f.Invert&&f.Invert.call(this,d)};default:Util.warn(`CSS filter "${o}" is not supported in fallback mode. Consider using function filters for better compatibility.`);break}}return()=>{}}const ABSOLUTE_OPACITY="absoluteOpacity",ALL_LISTENERS="allEventListeners",ABSOLUTE_TRANSFORM="absoluteTransform",ABSOLUTE_SCALE="absoluteScale",CANVAS="canvas",CHANGE="Change",CHILDREN="children",KONVA="konva",LISTENING="listening",MOUSEENTER$1="mouseenter",MOUSELEAVE$1="mouseleave",POINTERENTER$1="pointerenter",POINTERLEAVE$1="pointerleave",TOUCHENTER="touchenter",TOUCHLEAVE="touchleave",SET="set",SHAPE="Shape",SPACE$1=" ",STAGE$1="stage",TRANSFORM="transform",UPPER_STAGE="Stage",VISIBLE="visible",TRANSFORM_CHANGE_STR$1=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(SPACE$1);let idCounter$1=1,Node$1=class fd{constructor(t){this._id=idCounter$1++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){(t===TRANSFORM||t===ABSOLUTE_TRANSFORM)&&this._cache.get(t)?this._cache.get(t).dirty=!0:t?this._cache.delete(t):this._cache.clear()}_getCache(t,n){let o=this._cache.get(t);return(o===void 0||(t===TRANSFORM||t===ABSOLUTE_TRANSFORM)&&o.dirty===!0)&&(o=n.call(this),this._cache.set(t,o)),o}_calculate(t,n,o){if(!this._attachedDepsListeners.get(t)){const u=n.map(d=>d+"Change.konva").join(SPACE$1);this.on(u,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,o)}_getCanvasCache(){return this._cache.get(CANVAS)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===ABSOLUTE_TRANSFORM&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(CANVAS)){const{scene:t,filter:n,hit:o}=this._cache.get(CANVAS);Util.releaseCanvas(t._canvas,n._canvas,o._canvas),this._cache.delete(CANVAS)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){const n=t||{};let o={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(o=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let u=Math.ceil(n.width||o.width),d=Math.ceil(n.height||o.height),f=n.pixelRatio,g=n.x===void 0?Math.floor(o.x):n.x,v=n.y===void 0?Math.floor(o.y):n.y,w=n.offset||0,S=n.drawBorder||!1,R=n.hitCanvasPixelRatio||1;if(!u||!d){Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const _=Math.abs(Math.round(o.x)-g)>.5?1:0,F=Math.abs(Math.round(o.y)-v)>.5?1:0;u+=w*2+_,d+=w*2+F,g-=w,v-=w;const M=new SceneCanvas({pixelRatio:f,width:u,height:d}),I=new SceneCanvas({pixelRatio:f,width:0,height:0,willReadFrequently:!0}),N=new HitCanvas({pixelRatio:R,width:u,height:d}),B=M.getContext(),H=N.getContext(),U=new SceneCanvas({width:M.width/M.pixelRatio+Math.abs(g),height:M.height/M.pixelRatio+Math.abs(v),pixelRatio:M.pixelRatio}),$=U.getContext();return N.isCache=!0,M.isCache=!0,this._cache.delete(CANVAS),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(M.getContext()._context.imageSmoothingEnabled=!1,I.getContext()._context.imageSmoothingEnabled=!1),B.save(),H.save(),$.save(),B.translate(-g,-v),H.translate(-g,-v),$.translate(-g,-v),U.x=g,U.y=v,this._isUnderCache=!0,this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY),this._clearSelfAndDescendantCache(ABSOLUTE_SCALE),this.drawScene(M,this,U),this.drawHit(N,this),this._isUnderCache=!1,B.restore(),H.restore(),S&&(B.save(),B.beginPath(),B.rect(0,0,u,d),B.closePath(),B.setAttr("strokeStyle","red"),B.setAttr("lineWidth",5),B.stroke(),B.restore()),Util.releaseCanvas(U._canvas),this._cache.set(CANVAS,{scene:M,filter:I,hit:N,x:g,y:v}),this._requestDraw(),this}isCached(){return this._cache.has(CANVAS)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,n){const o=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}];let u=1/0,d=1/0,f=-1/0,g=-1/0;const v=this.getAbsoluteTransform(n);return o.forEach(function(w){const S=v.point(w);u===void 0&&(u=f=S.x,d=g=S.y),u=Math.min(u,S.x),d=Math.min(d,S.y),f=Math.max(f,S.x),g=Math.max(g,S.y)}),{x:u,y:d,width:f-u,height:g-d}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();t.translate(n.x,n.y);const o=this._getCachedSceneCanvas(),u=o.pixelRatio;t.drawImage(o._canvas,0,0,o.width/u,o.height/u),t.restore()}_drawCachedHitCanvas(t){const n=this._getCanvasCache(),o=n.hit;t.save(),t.translate(n.x,n.y),t.drawImage(o._canvas,0,0,o.width/o.pixelRatio,o.height/o.pixelRatio),t.restore()}_getCachedSceneCanvas(){let t=this.filters(),n=this._getCanvasCache(),o=n.scene,u=n.filter,d=u.getContext(),f,g,v,w;if(!t||t.length===0)return o;if(this._filterUpToDate)return u;let S=!0;for(let _=0;_<t.length;_++)if(typeof t[_]=="string"&&isCSSFiltersSupported(),typeof t[_]!="string"||!isCSSFiltersSupported()){S=!1;break}const R=o.pixelRatio;if(u.setSize(o.width/o.pixelRatio,o.height/o.pixelRatio),S){const _=t.join(" ");return d.save(),d.setAttr("filter",_),d.drawImage(o._canvas,0,0,o.getWidth()/R,o.getHeight()/R),d.restore(),this._filterUpToDate=!0,u}try{for(f=t.length,d.clear(),d.drawImage(o._canvas,0,0,o.getWidth()/R,o.getHeight()/R),g=d.getImageData(0,0,u.getWidth(),u.getHeight()),v=0;v<f;v++)w=t[v],typeof w=="string"&&(w=parseCSSFilters(w)),w.call(this,g),d.putImageData(g,0,0)}catch(_){Util.error("Unable to apply filter. "+_.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,u}on(t,n){if(this._cache&&this._cache.delete(ALL_LISTENERS),arguments.length===3)return this._delegate.apply(this,arguments);const o=t.split(SPACE$1);for(let u=0;u<o.length;u++){const f=o[u].split("."),g=f[0],v=f[1]||"";this.eventListeners[g]||(this.eventListeners[g]=[]),this.eventListeners[g].push({name:v,handler:n})}return this}off(t,n){let o=(t||"").split(SPACE$1),u=o.length,d,f,g,v,w,S;if(this._cache&&this._cache.delete(ALL_LISTENERS),!t)for(f in this.eventListeners)this._off(f);for(d=0;d<u;d++)if(g=o[d],v=g.split("."),w=v[0],S=v[1],w)this.eventListeners[w]&&this._off(w,S,n);else for(f in this.eventListeners)this._off(f,S,n);return this}dispatchEvent(t){const n={target:this,type:t.type,evt:t};return this.fire(t.type,n),this}addEventListener(t,n){return this.on(t,function(o){n.call(this,o.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,n,o){const u=this;this.on(t,function(d){const f=d.target.findAncestors(n,!0,u);for(let g=0;g<f.length;g++)d=Util.cloneObject(d),d.currentTarget=f[g],o.call(f[g],d)})}remove(){return this.isDragging()&&this.stopDrag(),DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM),this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY),this._clearSelfAndDescendantCache(ABSOLUTE_SCALE),this._clearSelfAndDescendantCache(STAGE$1),this._clearSelfAndDescendantCache(VISIBLE),this._clearSelfAndDescendantCache(LISTENING)}_remove(){this._clearCaches();const t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(t){const n="get"+Util._capitalize(t);return Util._isFunction(this[n])?this[n]():this.attrs[t]}getAncestors(){let t=this.getParent(),n=[];for(;t;)n.push(t),t=t.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{let n,o;if(!t)return this;for(n in t)n!==CHILDREN&&(o=SET+Util._capitalize(n),Util._isFunction(this[o])?this[o](t[n]):this._setAttr(n,t[n]))}),this}isListening(){return this._getCache(LISTENING,this._isListening)}_isListening(t){if(!this.listening())return!1;const o=this.getParent();return o&&o!==t&&this!==t?o._isListening(t):!0}isVisible(){return this._getCache(VISIBLE,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const o=this.getParent();return o&&o!==t&&this!==t?o._isVisible(t):!0}shouldDrawHit(t,n=!1){if(t)return this._isVisible(t)&&this._isListening(t);const o=this.getLayer();let u=!1;DD._dragElements.forEach(f=>{f.dragStatus==="dragging"&&(f.node.nodeType==="Stage"||f.node.getLayer()===o)&&(u=!0)});const d=!n&&!Konva$1.hitOnDragEnabled&&(u||Konva$1.isTransforming());return this.isListening()&&this.isVisible()&&!d}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let t=this.getDepth(),n=this,o=0,u,d,f,g;function v(S){for(u=[],d=S.length,f=0;f<d;f++)g=S[f],o++,g.nodeType!==SHAPE&&(u=u.concat(g.getChildren().slice())),g._id===n._id&&(f=d);u.length>0&&u[0].getDepth()<=t&&v(u)}const w=this.getStage();return n.nodeType!==UPPER_STAGE&&w&&v(w.getChildren()),o}getDepth(){let t=0,n=this.parent;for(;n;)t++,n=n.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(TRANSFORM),this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const t=this.getStage();if(!t)return null;const n=t.getPointerPosition();if(!n)return null;const o=this.getAbsoluteTransform().copy();return o.invert(),o.point(n)}getAbsolutePosition(t){let n=!1,o=this.parent;for(;o;){if(o.isCached()){n=!0;break}o=o.parent}n&&!t&&(t=!0);const u=this.getAbsoluteTransform(t).getMatrix(),d=new Transform,f=this.offset();return d.m=u.slice(),d.translate(f.x,f.y),d.getTranslation()}setAbsolutePosition(t){const{x:n,y:o,...u}=this._clearTransform();this.attrs.x=n,this.attrs.y=o,this._clearCache(TRANSFORM);const d=this._getAbsoluteTransform().copy();return d.invert(),d.translate(t.x,t.y),t={x:this.attrs.x+d.getTranslation().x,y:this.attrs.y+d.getTranslation().y},this._setTransform(u),this.setPosition({x:t.x,y:t.y}),this._clearCache(TRANSFORM),this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM),this}_setTransform(t){let n;for(n in t)this.attrs[n]=t[n]}_clearTransform(){const t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){let n=t.x,o=t.y,u=this.x(),d=this.y();return n!==void 0&&(u+=n),o!==void 0&&(d+=o),this.setPosition({x:u,y:d}),this}_eachAncestorReverse(t,n){let o=[],u=this.getParent(),d,f;if(!(n&&n._id===this._id)){for(o.unshift(this);u&&(!n||u._id!==n._id);)o.unshift(u),u=u.parent;for(d=o.length,f=0;f<d;f++)t(o[f])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){if(!this.parent)return Util.warn("Node has no parent. moveToTop function is ignored."),!1;const t=this.index,n=this.parent.getChildren().length;return t<n-1?(this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return Util.warn("Node has no parent. moveUp function is ignored."),!1;const t=this.index,n=this.parent.getChildren().length;return t<n-1?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return Util.warn("Node has no parent. moveDown function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(t){if(!this.parent)return Util.warn("Node has no parent. zIndex parameter is ignored."),this;(t<0||t>=this.parent.children.length)&&Util.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(ABSOLUTE_OPACITY,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let t=this.opacity();const n=this.getParent();return n&&!n._isUnderCache&&(t*=n.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){let t=this.getAttrs(),n,o,u,d,f;const g={attrs:{},className:this.getClassName()};for(n in t)o=t[n],f=Util.isObject(o)&&!Util._isPlainObject(o)&&!Util._isArray(o),!f&&(u=typeof this[n]=="function"&&this[n],delete t[n],d=u?u.call(this):null,t[n]=o,d!==o&&(g.attrs[n]=o));return Util._prepareToStringify(g)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,n,o){const u=[];n&&this._isMatch(t)&&u.push(this);let d=this.parent;for(;d;){if(d===o)return u;d._isMatch(t)&&u.push(d),d=d.parent}return u}isAncestorOf(t){return!1}findAncestor(t,n,o){return this.findAncestors(t,n,o)[0]}_isMatch(t){if(!t)return!1;if(typeof t=="function")return t(this);let n=t.replace(/ /g,"").split(","),o=n.length,u,d;for(u=0;u<o;u++)if(d=n[u],Util.isValidSelector(d)||(Util.warn('Selector "'+d+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),Util.warn("Konva is awesome, right?")),d.charAt(0)==="#"){if(this.id()===d.slice(1))return!0}else if(d.charAt(0)==="."){if(this.hasName(d.slice(1)))return!0}else if(this.className===d||this.nodeType===d)return!0;return!1}getLayer(){const t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(STAGE$1,this._getStage)}_getStage(){const t=this.getParent();return t?t.getStage():null}fire(t,n={},o){return n.target=n.target||this,o?this._fireAndBubble(t,n):this._fire(t,n),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(ABSOLUTE_TRANSFORM,this._getAbsoluteTransform)}_getAbsoluteTransform(t){let n;if(t)return n=new Transform,this._eachAncestorReverse(function(o){const u=o.transformsEnabled();u==="all"?n.multiply(o.getTransform()):u==="position"&&n.translate(o.x()-o.offsetX(),o.y()-o.offsetY())},t),n;{n=this._cache.get(ABSOLUTE_TRANSFORM)||new Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();const o=this.transformsEnabled();if(o==="all")n.multiply(this.getTransform());else if(o==="position"){const u=this.attrs.x||0,d=this.attrs.y||0,f=this.attrs.offsetX||0,g=this.attrs.offsetY||0;n.translate(u-f,d-g)}return n.dirty=!1,n}}getAbsoluteScale(t){let n=this;for(;n;)n._isUnderCache&&(t=n),n=n.getParent();const u=this.getAbsoluteTransform(t).decompose();return{x:u.scaleX,y:u.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(TRANSFORM,this._getTransform)}_getTransform(){var t,n;const o=this._cache.get(TRANSFORM)||new Transform;o.reset();const u=this.x(),d=this.y(),f=Konva$1.getAngle(this.rotation()),g=(t=this.attrs.scaleX)!==null&&t!==void 0?t:1,v=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,w=this.attrs.skewX||0,S=this.attrs.skewY||0,R=this.attrs.offsetX||0,_=this.attrs.offsetY||0;return(u!==0||d!==0)&&o.translate(u,d),f!==0&&o.rotate(f),(w!==0||S!==0)&&o.skew(w,S),(g!==1||v!==1)&&o.scale(g,v),(R!==0||_!==0)&&o.translate(-1*R,-1*_),o.dirty=!1,o}clone(t){let n=Util.cloneObject(this.attrs),o,u,d,f,g;for(o in t)n[o]=t[o];const v=new this.constructor(n);for(o in this.eventListeners)for(u=this.eventListeners[o],d=u.length,f=0;f<d;f++)g=u[f],g.name.indexOf(KONVA)<0&&(v.eventListeners[o]||(v.eventListeners[o]=[]),v.eventListeners[o].push(g));return v}_toKonvaCanvas(t){t=t||{};const n=this.getClientRect(),o=this.getStage(),u=t.x!==void 0?t.x:Math.floor(n.x),d=t.y!==void 0?t.y:Math.floor(n.y),f=t.pixelRatio||1,g=new SceneCanvas({width:t.width||Math.ceil(n.width)||(o?o.width():0),height:t.height||Math.ceil(n.height)||(o?o.height():0),pixelRatio:f}),v=g.getContext(),w=new SceneCanvas({width:g.width/g.pixelRatio+Math.abs(u),height:g.height/g.pixelRatio+Math.abs(d),pixelRatio:g.pixelRatio});return t.imageSmoothingEnabled===!1&&(v._context.imageSmoothingEnabled=!1),v.save(),(u||d)&&v.translate(-1*u,-1*d),this.drawScene(g,void 0,w),v.restore(),g}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){t=t||{};const n=t.mimeType||null,o=t.quality||null,u=this._toKonvaCanvas(t).toDataURL(n,o);return t.callback&&t.callback(u),u}toImage(t){return new Promise((n,o)=>{try{const u=t?.callback;u&&delete t.callback,Util._urlToImage(this.toDataURL(t),function(d){n(d),u?.(d)})}catch(u){o(u)}})}toBlob(t){return new Promise((n,o)=>{try{const u=t?.callback;u&&delete t.callback,this.toCanvas(t).toBlob(d=>{n(d),u?.(d)},t?.mimeType,t?.quality)}catch(u){o(u)}})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Konva$1.dragDistance}_off(t,n,o){let u=this.eventListeners[t],d,f,g;for(d=0;d<u.length;d++)if(f=u[d].name,g=u[d].handler,(f!=="konva"||n==="konva")&&(!n||f===n)&&(!o||o===g)){if(u.splice(d,1),u.length===0){delete this.eventListeners[t];break}d--}}_fireChangeEvent(t,n,o){this._fire(t+CHANGE,{oldVal:n,newVal:o})}addName(t){if(!this.hasName(t)){const n=this.name(),o=n?n+" "+t:t;this.name(o)}return this}hasName(t){if(!t)return!1;const n=this.name();return n?(n||"").split(/\s/g).indexOf(t)!==-1:!1}removeName(t){const n=(this.name()||"").split(/\s/g),o=n.indexOf(t);return o!==-1&&(n.splice(o,1),this.name(n.join(" "))),this}setAttr(t,n){const o=this[SET+Util._capitalize(t)];return Util._isFunction(o)?o.call(this,n):this._setAttr(t,n),this}_requestDraw(){if(Konva$1.autoDrawEnabled){const t=this.getLayer()||this.getStage();t?.batchDraw()}}_setAttr(t,n){const o=this.attrs[t];o===n&&!Util.isObject(n)||(n==null?delete this.attrs[t]:this.attrs[t]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(t,o,n),this._requestDraw())}_setComponentAttr(t,n,o){let u;o!==void 0&&(u=this.attrs[t],u||(this.attrs[t]=this.getAttr(t)),this.attrs[t][n]=o,this._fireChangeEvent(t,u,o))}_fireAndBubble(t,n,o){n&&this.nodeType===SHAPE&&(n.target=this);const u=[MOUSEENTER$1,MOUSELEAVE$1,POINTERENTER$1,POINTERLEAVE$1,TOUCHENTER,TOUCHLEAVE];if(!(u.indexOf(t)!==-1&&(o&&(this===o||this.isAncestorOf&&this.isAncestorOf(o))||this.nodeType==="Stage"&&!o))){this._fire(t,n);const f=u.indexOf(t)!==-1&&o&&o.isAncestorOf&&o.isAncestorOf(this)&&!o.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!f&&(o&&o.parent?this._fireAndBubble.call(this.parent,t,n,o):this._fireAndBubble.call(this.parent,t,n))}}_getProtoListeners(t){var n,o;const{nodeType:u}=this,d=fd.protoListenerMap.get(u)||{};let f=d?.[t];if(f===void 0){f=[];let g=Object.getPrototypeOf(this);for(;g;){const v=(o=(n=g.eventListeners)===null||n===void 0?void 0:n[t])!==null&&o!==void 0?o:[];f.push(...v),g=Object.getPrototypeOf(g)}d[t]=f,fd.protoListenerMap.set(u,d)}return f}_fire(t,n){n=n||{},n.currentTarget=this,n.type=t;const o=this._getProtoListeners(t);if(o)for(let d=0;d<o.length;d++)o[d].handler.call(this,n);const u=this.eventListeners[t];if(u)for(let d=0;d<u.length;d++)u[d].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){const n=t?t.pointerId:void 0,o=this.getStage(),u=this.getAbsolutePosition();if(!o)return;const d=o._getPointerById(n)||o._changedPointerPositions[0]||u;DD._dragElements.set(this._id,{node:this,startPointerPos:d,offset:{x:d.x-u.x,y:d.y-u.y},dragStatus:"ready",pointerId:n})}startDrag(t,n=!0){DD._dragElements.has(this._id)||this._createDragElement(t);const o=DD._dragElements.get(this._id);o.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},n)}_setDragPosition(t,n){const o=this.getStage()._getPointerById(n.pointerId);if(!o)return;let u={x:o.x-n.offset.x,y:o.y-n.offset.y};const d=this.dragBoundFunc();if(d!==void 0){const f=d.call(this,u,t);f?u=f:Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==u.x||this._lastPos.y!==u.y)&&(this.setAbsolutePosition(u),this._requestDraw()),this._lastPos=u}stopDrag(t){const n=DD._dragElements.get(this._id);n&&(n.dragStatus="stopped"),DD._endDragBefore(t),DD._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=DD._dragElements.get(this._id);return t?t.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){if(!(!(t.evt.button!==void 0)||Konva$1.dragButtons.indexOf(t.evt.button)>=0)||this.isDragging())return;let u=!1;DD._dragElements.forEach(d=>{this.isAncestorOf(d.node)&&(u=!0)}),u||this._createDragElement(t)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const n=DD._dragElements.get(this._id),o=n&&n.dragStatus==="dragging",u=n&&n.dragStatus==="ready";o?this.stopDrag():u&&DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const n=this.getStage();if(!n)return!1;const o={x:-t.x,y:-t.y,width:n.width()+2*t.x,height:n.height()+2*t.y};return Util.haveIntersection(o,this.getClientRect())}static create(t,n){return Util._isString(t)&&(t=JSON.parse(t)),this._createNode(t,n)}static _createNode(t,n){let o=fd.prototype.getClassName.call(t),u=t.children,d,f,g;n&&(t.attrs.container=n),Konva$1[o]||(Util.warn('Can not find a node with class name "'+o+'". Fallback to "Shape".'),o="Shape");const v=Konva$1[o];if(d=new v(t.attrs),u)for(f=u.length,g=0;g<f;g++)d.add(fd._createNode(u[g]));return d}};Node$1.protoListenerMap=new Map;Node$1.prototype.nodeType="Node";Node$1.prototype._attrsAffectingSize=[];Node$1.prototype.eventListeners={};Node$1.prototype.on.call(Node$1.prototype,TRANSFORM_CHANGE_STR$1,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(TRANSFORM),this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM)});Node$1.prototype.on.call(Node$1.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(VISIBLE)});Node$1.prototype.on.call(Node$1.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(LISTENING)});Node$1.prototype.on.call(Node$1.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY)});const addGetterSetter=Factory.addGetterSetter;addGetterSetter(Node$1,"zIndex");addGetterSetter(Node$1,"absolutePosition");addGetterSetter(Node$1,"position");addGetterSetter(Node$1,"x",0,getNumberValidator());addGetterSetter(Node$1,"y",0,getNumberValidator());addGetterSetter(Node$1,"globalCompositeOperation","source-over",getStringValidator());addGetterSetter(Node$1,"opacity",1,getNumberValidator());addGetterSetter(Node$1,"name","",getStringValidator());addGetterSetter(Node$1,"id","",getStringValidator());addGetterSetter(Node$1,"rotation",0,getNumberValidator());Factory.addComponentsGetterSetter(Node$1,"scale",["x","y"]);addGetterSetter(Node$1,"scaleX",1,getNumberValidator());addGetterSetter(Node$1,"scaleY",1,getNumberValidator());Factory.addComponentsGetterSetter(Node$1,"skew",["x","y"]);addGetterSetter(Node$1,"skewX",0,getNumberValidator());addGetterSetter(Node$1,"skewY",0,getNumberValidator());Factory.addComponentsGetterSetter(Node$1,"offset",["x","y"]);addGetterSetter(Node$1,"offsetX",0,getNumberValidator());addGetterSetter(Node$1,"offsetY",0,getNumberValidator());addGetterSetter(Node$1,"dragDistance",void 0,getNumberValidator());addGetterSetter(Node$1,"width",0,getNumberValidator());addGetterSetter(Node$1,"height",0,getNumberValidator());addGetterSetter(Node$1,"listening",!0,getBooleanValidator());addGetterSetter(Node$1,"preventDefault",!0,getBooleanValidator());addGetterSetter(Node$1,"filters",void 0,function(e){return this._filterUpToDate=!1,e});addGetterSetter(Node$1,"visible",!0,getBooleanValidator());addGetterSetter(Node$1,"transformsEnabled","all",getStringValidator());addGetterSetter(Node$1,"size");addGetterSetter(Node$1,"dragBoundFunc");addGetterSetter(Node$1,"draggable",!1,getBooleanValidator());Factory.backCompat(Node$1,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class Container extends Node$1{constructor(){super(...arguments),this.children=[]}getChildren(t){const n=this.children||[];return t?n.filter(t):n}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(t.length===0)return this;if(t.length>1){for(let o=0;o<t.length;o++)this.add(t[o]);return this}const n=t[0];return n.getParent()?(n.moveTo(this),this):(this._validateAdd(n),n.index=this.getChildren().length,n.parent=this,n._clearCaches(),this.getChildren().push(n),this._fire("add",{child:n}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){const n=this._generalFind(t,!0);return n.length>0?n[0]:void 0}_generalFind(t,n){const o=[];return this._descendants(u=>{const d=u._isMatch(t);return d&&o.push(u),!!(d&&n)}),o}_descendants(t){let n=!1;const o=this.getChildren();for(const u of o){if(n=t(u),n)return!0;if(u.hasChildren()&&(n=u._descendants(t),n))return!0}return!1}toObject(){const t=Node$1.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(n=>{t.children.push(n.toObject())}),t}isAncestorOf(t){let n=t.getParent();for(;n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(t){const n=Node$1.prototype.clone.call(this,t);return this.getChildren().forEach(function(o){n.add(o.clone())}),n}getAllIntersections(t){const n=[];return this.find("Shape").forEach(o=>{o.isVisible()&&o.intersects(t)&&n.push(o)}),n}_clearSelfAndDescendantCache(t){var n;super._clearSelfAndDescendantCache(t),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(o){o._clearSelfAndDescendantCache(t)}))}_setChildrenIndices(){var t;(t=this.children)===null||t===void 0||t.forEach(function(n,o){n.index=o}),this._requestDraw()}drawScene(t,n,o){const u=this.getLayer(),d=t||u&&u.getCanvas(),f=d&&d.getContext(),g=this._getCanvasCache(),v=g&&g.scene,w=d&&d.isCache;if(!this.isVisible()&&!w)return this;if(v){f.save();const S=this.getAbsoluteTransform(n).getMatrix();f.transform(S[0],S[1],S[2],S[3],S[4],S[5]),this._drawCachedSceneCanvas(f),f.restore()}else this._drawChildren("drawScene",d,n,o);return this}drawHit(t,n){if(!this.shouldDrawHit(n))return this;const o=this.getLayer(),u=t||o&&o.hitCanvas,d=u&&u.getContext(),f=this._getCanvasCache();if(f&&f.hit){d.save();const v=this.getAbsoluteTransform(n).getMatrix();d.transform(v[0],v[1],v[2],v[3],v[4],v[5]),this._drawCachedHitCanvas(d),d.restore()}else this._drawChildren("drawHit",u,n);return this}_drawChildren(t,n,o,u){var d;const f=n&&n.getContext(),g=this.clipWidth(),v=this.clipHeight(),w=this.clipFunc(),S=typeof g=="number"&&typeof v=="number"||w,R=o===this;if(S){f.save();const F=this.getAbsoluteTransform(o);let M=F.getMatrix();f.transform(M[0],M[1],M[2],M[3],M[4],M[5]),f.beginPath();let I;if(w)I=w.call(this,f,this);else{const N=this.clipX(),B=this.clipY();f.rect(N||0,B||0,g,v)}f.clip.apply(f,I),M=F.copy().invert().getMatrix(),f.transform(M[0],M[1],M[2],M[3],M[4],M[5])}const _=!R&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";_&&(f.save(),f._applyGlobalCompositeOperation(this)),(d=this.children)===null||d===void 0||d.forEach(function(F){F[t](n,o,u)}),_&&f.restore(),S&&f.restore()}getClientRect(t={}){var n;const o=t.skipTransform,u=t.relativeTo;let d,f,g,v,w={x:1/0,y:1/0,width:0,height:0};const S=this;(n=this.children)===null||n===void 0||n.forEach(function(F){if(!F.visible())return;const M=F.getClientRect({relativeTo:S,skipShadow:t.skipShadow,skipStroke:t.skipStroke});M.width===0&&M.height===0||(d===void 0?(d=M.x,f=M.y,g=M.x+M.width,v=M.y+M.height):(d=Math.min(d,M.x),f=Math.min(f,M.y),g=Math.max(g,M.x+M.width),v=Math.max(v,M.y+M.height)))});const R=this.find("Shape");let _=!1;for(let F=0;F<R.length;F++)if(R[F]._isVisible(this)){_=!0;break}return _&&d!==void 0?w={x:d,y:f,width:g-d,height:v-f}:w={x:0,y:0,width:0,height:0},o?w:this._transformedRect(w,u)}}Factory.addComponentsGetterSetter(Container,"clip",["x","y","width","height"]);Factory.addGetterSetter(Container,"clipX",void 0,getNumberValidator());Factory.addGetterSetter(Container,"clipY",void 0,getNumberValidator());Factory.addGetterSetter(Container,"clipWidth",void 0,getNumberValidator());Factory.addGetterSetter(Container,"clipHeight",void 0,getNumberValidator());Factory.addGetterSetter(Container,"clipFunc");const Captures=new Map,SUPPORT_POINTER_EVENTS=Konva$1._global.PointerEvent!==void 0;function getCapturedShape(e){return Captures.get(e)}function createEvent(e){return{evt:e,pointerId:e.pointerId}}function hasPointerCapture(e,t){return Captures.get(e)===t}function setPointerCapture(e,t){releaseCapture(e),t.getStage()&&(Captures.set(e,t),SUPPORT_POINTER_EVENTS&&t._fire("gotpointercapture",createEvent(new PointerEvent("gotpointercapture"))))}function releaseCapture(e,t){const n=Captures.get(e);if(!n)return;const o=n.getStage();o&&o.content,Captures.delete(e),SUPPORT_POINTER_EVENTS&&n._fire("lostpointercapture",createEvent(new PointerEvent("lostpointercapture")))}const STAGE="Stage",STRING="string",PX="px",MOUSEOUT="mouseout",MOUSELEAVE="mouseleave",MOUSEOVER="mouseover",MOUSEENTER="mouseenter",MOUSEMOVE="mousemove",MOUSEDOWN="mousedown",MOUSEUP="mouseup",POINTERMOVE="pointermove",POINTERDOWN="pointerdown",POINTERUP="pointerup",POINTERCANCEL="pointercancel",LOSTPOINTERCAPTURE="lostpointercapture",POINTEROUT="pointerout",POINTERLEAVE="pointerleave",POINTEROVER="pointerover",POINTERENTER="pointerenter",CONTEXTMENU="contextmenu",TOUCHSTART="touchstart",TOUCHEND="touchend",TOUCHMOVE="touchmove",TOUCHCANCEL="touchcancel",WHEEL="wheel",MAX_LAYERS_NUMBER=5,EVENTS=[[MOUSEENTER,"_pointerenter"],[MOUSEDOWN,"_pointerdown"],[MOUSEMOVE,"_pointermove"],[MOUSEUP,"_pointerup"],[MOUSELEAVE,"_pointerleave"],[TOUCHSTART,"_pointerdown"],[TOUCHMOVE,"_pointermove"],[TOUCHEND,"_pointerup"],[TOUCHCANCEL,"_pointercancel"],[MOUSEOVER,"_pointerover"],[WHEEL,"_wheel"],[CONTEXTMENU,"_contextmenu"],[POINTERDOWN,"_pointerdown"],[POINTERMOVE,"_pointermove"],[POINTERUP,"_pointerup"],[POINTERCANCEL,"_pointercancel"],[POINTERLEAVE,"_pointerleave"],[LOSTPOINTERCAPTURE,"_lostpointercapture"]],EVENTS_MAP={mouse:{[POINTEROUT]:MOUSEOUT,[POINTERLEAVE]:MOUSELEAVE,[POINTEROVER]:MOUSEOVER,[POINTERENTER]:MOUSEENTER,[POINTERMOVE]:MOUSEMOVE,[POINTERDOWN]:MOUSEDOWN,[POINTERUP]:MOUSEUP,[POINTERCANCEL]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[POINTEROUT]:"touchout",[POINTERLEAVE]:"touchleave",[POINTEROVER]:"touchover",[POINTERENTER]:"touchenter",[POINTERMOVE]:TOUCHMOVE,[POINTERDOWN]:TOUCHSTART,[POINTERUP]:TOUCHEND,[POINTERCANCEL]:TOUCHCANCEL,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[POINTEROUT]:POINTEROUT,[POINTERLEAVE]:POINTERLEAVE,[POINTEROVER]:POINTEROVER,[POINTERENTER]:POINTERENTER,[POINTERMOVE]:POINTERMOVE,[POINTERDOWN]:POINTERDOWN,[POINTERUP]:POINTERUP,[POINTERCANCEL]:POINTERCANCEL,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},getEventType=e=>e.indexOf("pointer")>=0?"pointer":e.indexOf("touch")>=0?"touch":"mouse",getEventsMap=e=>{const t=getEventType(e);if(t==="pointer")return Konva$1.pointerEventsEnabled&&EVENTS_MAP.pointer;if(t==="touch")return EVENTS_MAP.touch;if(t==="mouse")return EVENTS_MAP.mouse};function checkNoClip(e={}){return(e.clipFunc||e.clipWidth||e.clipHeight)&&Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),e}const NO_POINTERS_MESSAGE="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",stages=[];let Stage$1=class extends Container{constructor(t){super(checkNoClip(t)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{checkNoClip(this.attrs)}),this._checkVisibility()}_validateAdd(t){const n=t.getType()==="Layer",o=t.getType()==="FastLayer";n||o||Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const t=this.visible()?"":"none";this.content.style.display=t}setContainer(t){if(typeof t===STRING){let n;if(t.charAt(0)==="."){const o=t.slice(1);t=document.getElementsByClassName(o)[0]}else t.charAt(0)!=="#"?n=t:n=t.slice(1),t=document.getElementById(n);if(!t)throw"Can not find container in document with id "+n}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const t=this.children,n=t.length;for(let o=0;o<n;o++)t[o].clear();return this}clone(t){return t||(t={}),t.container=typeof document<"u"&&document.createElement("div"),Container.prototype.clone.call(this,t)}destroy(){super.destroy();const t=this.content;t&&Util._isInDocument(t)&&this.container().removeChild(t);const n=stages.indexOf(this);return n>-1&&stages.splice(n,1),Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(Util.warn(NO_POINTERS_MESSAGE),null)}_getPointerById(t){return this._pointerPositions.find(n=>n.id===t)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(t){t={...t},t.x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();const n=new SceneCanvas({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),o=n.getContext()._context,u=this.children;return(t.x||t.y)&&o.translate(-1*t.x,-1*t.y),u.forEach(function(d){if(!d.isVisible())return;const f=d._toKonvaCanvas(t);o.drawImage(f._canvas,t.x,t.y,f.getWidth()/f.getPixelRatio(),f.getHeight()/f.getPixelRatio())}),n}getIntersection(t){if(!t)return null;const n=this.children,o=n.length,u=o-1;for(let d=u;d>=0;d--){const f=n[d].getIntersection(t);if(f)return f}return null}_resizeDOM(){const t=this.width(),n=this.height();this.content&&(this.content.style.width=t+PX,this.content.style.height=n+PX),this.bufferCanvas.setSize(t,n),this.bufferHitCanvas.setSize(t,n),this.children.forEach(o=>{o.setSize({width:t,height:n}),o.draw()})}add(t,...n){if(arguments.length>1){for(let u=0;u<arguments.length;u++)this.add(arguments[u]);return this}super.add(t);const o=this.children.length;return o>MAX_LAYERS_NUMBER&&Util.warn("The stage has "+o+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),Konva$1.isBrowser&&this.content.appendChild(t.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(t){return hasPointerCapture(t,this)}setPointerCapture(t){setPointerCapture(t,this)}releaseCapture(t){releaseCapture(t)}getLayers(){return this.children}_bindContentEvents(){Konva$1.isBrowser&&EVENTS.forEach(([t,n])=>{this.content.addEventListener(t,o=>{this[n](o)},{passive:!1})})}_pointerenter(t){this.setPointersPositions(t);const n=getEventsMap(t.type);n&&this._fire(n.pointerenter,{evt:t,target:this,currentTarget:this})}_pointerover(t){this.setPointersPositions(t);const n=getEventsMap(t.type);n&&this._fire(n.pointerover,{evt:t,target:this,currentTarget:this})}_getTargetShape(t){let n=this[t+"targetShape"];return n&&!n.getStage()&&(n=null),n}_pointerleave(t){const n=getEventsMap(t.type),o=getEventType(t.type);if(!n)return;this.setPointersPositions(t);const u=this._getTargetShape(o),d=!(Konva$1.isDragging()||Konva$1.isTransforming())||Konva$1.hitOnDragEnabled;u&&d?(u._fireAndBubble(n.pointerout,{evt:t}),u._fireAndBubble(n.pointerleave,{evt:t}),this._fire(n.pointerleave,{evt:t,target:this,currentTarget:this}),this[o+"targetShape"]=null):d&&(this._fire(n.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(n.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(t){const n=getEventsMap(t.type),o=getEventType(t.type);if(!n)return;this.setPointersPositions(t);let u=!1;this._changedPointerPositions.forEach(d=>{const f=this.getIntersection(d);if(DD.justDragged=!1,Konva$1["_"+o+"ListenClick"]=!0,!f||!f.isListening()){this[o+"ClickStartShape"]=void 0;return}Konva$1.capturePointerEventsEnabled&&f.setPointerCapture(d.id),this[o+"ClickStartShape"]=f,f._fireAndBubble(n.pointerdown,{evt:t,pointerId:d.id}),u=!0;const g=t.type.indexOf("touch")>=0;f.preventDefault()&&t.cancelable&&g&&t.preventDefault()}),u||this._fire(n.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(t){const n=getEventsMap(t.type),o=getEventType(t.type);if(!n)return;const u=t.type.indexOf("touch")>=0||t.pointerType==="touch";if(Konva$1.isDragging()&&DD.node.preventDefault()&&t.cancelable&&u&&t.preventDefault(),this.setPointersPositions(t),!(!(Konva$1.isDragging()||Konva$1.isTransforming())||Konva$1.hitOnDragEnabled))return;const f={};let g=!1;const v=this._getTargetShape(o);this._changedPointerPositions.forEach(w=>{const S=getCapturedShape(w.id)||this.getIntersection(w),R=w.id,_={evt:t,pointerId:R},F=v!==S;if(F&&v&&(v._fireAndBubble(n.pointerout,{..._},S),v._fireAndBubble(n.pointerleave,{..._},S)),S){if(f[S._id])return;f[S._id]=!0}S&&S.isListening()?(g=!0,F&&(S._fireAndBubble(n.pointerover,{..._},v),S._fireAndBubble(n.pointerenter,{..._},v),this[o+"targetShape"]=S),S._fireAndBubble(n.pointermove,{..._})):v&&(this._fire(n.pointerover,{evt:t,target:this,currentTarget:this,pointerId:R}),this[o+"targetShape"]=null)}),g||this._fire(n.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(t){const n=getEventsMap(t.type),o=getEventType(t.type);if(!n)return;this.setPointersPositions(t);const u=this[o+"ClickStartShape"],d=this[o+"ClickEndShape"],f={};let g=!1;this._changedPointerPositions.forEach(v=>{const w=getCapturedShape(v.id)||this.getIntersection(v);if(w){if(w.releaseCapture(v.id),f[w._id])return;f[w._id]=!0}const S=v.id,R={evt:t,pointerId:S};let _=!1;Konva$1["_"+o+"InDblClickWindow"]?(_=!0,clearTimeout(this[o+"DblTimeout"])):DD.justDragged||(Konva$1["_"+o+"InDblClickWindow"]=!0,clearTimeout(this[o+"DblTimeout"])),this[o+"DblTimeout"]=setTimeout(function(){Konva$1["_"+o+"InDblClickWindow"]=!1},Konva$1.dblClickWindow),w&&w.isListening()?(g=!0,this[o+"ClickEndShape"]=w,w._fireAndBubble(n.pointerup,{...R}),Konva$1["_"+o+"ListenClick"]&&u&&u===w&&(w._fireAndBubble(n.pointerclick,{...R}),_&&d&&d===w&&w._fireAndBubble(n.pointerdblclick,{...R}))):(this[o+"ClickEndShape"]=null,g||(this._fire(n.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),g=!0),Konva$1["_"+o+"ListenClick"]&&this._fire(n.pointerclick,{evt:t,target:this,currentTarget:this,pointerId:S}),_&&this._fire(n.pointerdblclick,{evt:t,target:this,currentTarget:this,pointerId:S}))}),g||this._fire(n.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),Konva$1["_"+o+"ListenClick"]=!1,t.cancelable&&o!=="touch"&&o!=="pointer"&&t.preventDefault()}_contextmenu(t){this.setPointersPositions(t);const n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(CONTEXTMENU,{evt:t}):this._fire(CONTEXTMENU,{evt:t,target:this,currentTarget:this})}_wheel(t){this.setPointersPositions(t);const n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(WHEEL,{evt:t}):this._fire(WHEEL,{evt:t,target:this,currentTarget:this})}_pointercancel(t){this.setPointersPositions(t);const n=getCapturedShape(t.pointerId)||this.getIntersection(this.getPointerPosition());n&&n._fireAndBubble(POINTERUP,createEvent(t)),releaseCapture(t.pointerId)}_lostpointercapture(t){releaseCapture(t.pointerId)}setPointersPositions(t){const n=this._getContentPosition();let o=null,u=null;t=t||window.event,t.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,d=>{this._pointerPositions.push({id:d.identifier,x:(d.clientX-n.left)/n.scaleX,y:(d.clientY-n.top)/n.scaleY})}),Array.prototype.forEach.call(t.changedTouches||t.touches,d=>{this._changedPointerPositions.push({id:d.identifier,x:(d.clientX-n.left)/n.scaleX,y:(d.clientY-n.top)/n.scaleY})})):(o=(t.clientX-n.left)/n.scaleX,u=(t.clientY-n.top)/n.scaleY,this.pointerPos={x:o,y:u},this._pointerPositions=[{x:o,y:u,id:Util._getFirstPointerId(t)}],this._changedPointerPositions=[{x:o,y:u,id:Util._getFirstPointerId(t)}])}_setPointerPosition(t){Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!Konva$1.isBrowser)return;const t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}cache(){return Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(t){t.batchDraw()}),this}};Stage$1.prototype.nodeType=STAGE;_registerNode(Stage$1);Factory.addGetterSetter(Stage$1,"container");Konva$1.isBrowser&&document.addEventListener("visibilitychange",()=>{stages.forEach(e=>{e.batchDraw()})});const HAS_SHADOW="hasShadow",SHADOW_RGBA="shadowRGBA",patternImage="patternImage",linearGradient="linearGradient",radialGradient="radialGradient";let dummyContext$1;function getDummyContext$1(){return dummyContext$1||(dummyContext$1=Util.createCanvasElement().getContext("2d"),dummyContext$1)}const shapes={};function _fillFunc$2(e){const t=this.attrs.fillRule;t?e.fill(t):e.fill()}function _strokeFunc$2(e){e.stroke()}function _fillFuncHit(e){const t=this.attrs.fillRule;t?e.fill(t):e.fill()}function _strokeFuncHit(e){e.stroke()}function _clearHasShadowCache(){this._clearCache(HAS_SHADOW)}function _clearGetShadowRGBACache(){this._clearCache(SHADOW_RGBA)}function _clearFillPatternCache(){this._clearCache(patternImage)}function _clearLinearGradientCache(){this._clearCache(linearGradient)}function _clearRadialGradientCache(){this._clearCache(radialGradient)}class Shape extends Node$1{constructor(t){super(t);let n,o=0;for(;n=Util.getHitColor(),!(n&&!(n in shapes));)if(o++,o>=1e4){Util.warn("Failed to find a unique color key for a shape. Konva may work incorrectly. Most likely your browser is using canvas farbling. Consider disabling it."),n=Util.getRandomColor();break}this.colorKey=n,shapes[n]=this}getContext(){return Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(HAS_SHADOW,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(patternImage,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const n=getDummyContext$1().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(n&&n.setTransform){const o=new Transform;o.translate(this.fillPatternX(),this.fillPatternY()),o.rotate(Konva$1.getAngle(this.fillPatternRotation())),o.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),o.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const u=o.getMatrix(),d=typeof DOMMatrix>"u"?{a:u[0],b:u[1],c:u[2],d:u[3],e:u[4],f:u[5]}:new DOMMatrix(u);n.setTransform(d)}return n}}_getLinearGradient(){return this._getCache(linearGradient,this.__getLinearGradient)}__getLinearGradient(){const t=this.fillLinearGradientColorStops();if(t){const n=getDummyContext$1(),o=this.fillLinearGradientStartPoint(),u=this.fillLinearGradientEndPoint(),d=n.createLinearGradient(o.x,o.y,u.x,u.y);for(let f=0;f<t.length;f+=2)d.addColorStop(t[f],t[f+1]);return d}}_getRadialGradient(){return this._getCache(radialGradient,this.__getRadialGradient)}__getRadialGradient(){const t=this.fillRadialGradientColorStops();if(t){const n=getDummyContext$1(),o=this.fillRadialGradientStartPoint(),u=this.fillRadialGradientEndPoint(),d=n.createRadialGradient(o.x,o.y,this.fillRadialGradientStartRadius(),u.x,u.y,this.fillRadialGradientEndRadius());for(let f=0;f<t.length;f+=2)d.addColorStop(t[f],t[f+1]);return d}}getShadowRGBA(){return this._getCache(SHADOW_RGBA,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const t=Util.colorToRGBA(this.shadowColor());if(t)return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const t=this.hitStrokeWidth();return t==="auto"?this.hasStroke():this.strokeEnabled()&&!!t}intersects(t){const n=this.getStage();if(!n)return!1;const o=n.bufferHitCanvas;return o.getContext().clear(),this.drawHit(o,void 0,!0),o.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0}destroy(){return Node$1.prototype.destroy.call(this),delete shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(t){var n;if(!((n=this.attrs.perfectDrawEnabled)!==null&&n!==void 0?n:!0))return!1;const u=t||this.hasFill(),d=this.hasStroke(),f=this.getAbsoluteOpacity()!==1;if(u&&d&&f)return!0;const g=this.hasShadow(),v=this.shadowForStrokeEnabled();return!!(u&&d&&g&&v)}setStrokeHitEnabled(t){Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),t?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}getClientRect(t={}){let n=!1,o=this.getParent();for(;o;){if(o.isCached()){n=!0;break}o=o.getParent()}const u=t.skipTransform,d=t.relativeTo||n&&this.getStage()||void 0,f=this.getSelfRect(),v=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,w=f.width+v,S=f.height+v,R=!t.skipShadow&&this.hasShadow(),_=R?this.shadowOffsetX():0,F=R?this.shadowOffsetY():0,M=w+Math.abs(_),I=S+Math.abs(F),N=R&&this.shadowBlur()||0,B=M+N*2,H=I+N*2,U={width:B,height:H,x:-(v/2+N)+Math.min(_,0)+f.x,y:-(v/2+N)+Math.min(F,0)+f.y};return u?U:this._transformedRect(U,d)}drawScene(t,n,o){const u=this.getLayer(),d=t||u.getCanvas(),f=d.getContext(),g=this._getCanvasCache(),v=this.getSceneFunc(),w=this.hasShadow();let S;const R=n===this;if(!this.isVisible()&&!R)return this;if(g){f.save();const _=this.getAbsoluteTransform(n).getMatrix();return f.transform(_[0],_[1],_[2],_[3],_[4],_[5]),this._drawCachedSceneCanvas(f),f.restore(),this}if(!v)return this;if(f.save(),this._useBufferCanvas()){S=this.getStage();const _=o||S.bufferCanvas,F=_.getContext();o?(F.save(),F.setTransform(1,0,0,1,0,0),F.clearRect(0,0,_.width,_.height),F.restore()):F.clear(),F.save(),F._applyLineJoin(this),F._applyMiterLimit(this);const M=this.getAbsoluteTransform(n).getMatrix();F.transform(M[0],M[1],M[2],M[3],M[4],M[5]),v.call(this,F,this),F.restore();const I=_.pixelRatio;w&&f._applyShadow(this),R||(f._applyOpacity(this),f._applyGlobalCompositeOperation(this)),f.drawImage(_._canvas,_.x||0,_.y||0,_.width/I,_.height/I)}else{if(f._applyLineJoin(this),f._applyMiterLimit(this),!R){const _=this.getAbsoluteTransform(n).getMatrix();f.transform(_[0],_[1],_[2],_[3],_[4],_[5]),f._applyOpacity(this),f._applyGlobalCompositeOperation(this)}w&&f._applyShadow(this),v.call(this,f,this)}return f.restore(),this}drawHit(t,n,o=!1){if(!this.shouldDrawHit(n,o))return this;const u=this.getLayer(),d=t||u.hitCanvas,f=d&&d.getContext(),g=this.hitFunc()||this.sceneFunc(),v=this._getCanvasCache(),w=v&&v.hit;if(this.colorKey||Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),w){f.save();const R=this.getAbsoluteTransform(n).getMatrix();return f.transform(R[0],R[1],R[2],R[3],R[4],R[5]),this._drawCachedHitCanvas(f),f.restore(),this}if(!g)return this;if(f.save(),f._applyLineJoin(this),f._applyMiterLimit(this),!(this===n)){const R=this.getAbsoluteTransform(n).getMatrix();f.transform(R[0],R[1],R[2],R[3],R[4],R[5])}return g.call(this,f,this),f.restore(),this}drawHitFromCache(t=0){const n=this._getCanvasCache(),o=this._getCachedSceneCanvas(),u=n.hit,d=u.getContext(),f=u.getWidth(),g=u.getHeight();d.clear(),d.drawImage(o._canvas,0,0,f,g);try{const v=d.getImageData(0,0,f,g),w=v.data,S=w.length,R=Util._hexToRgb(this.colorKey);for(let _=0;_<S;_+=4)w[_+3]>t?(w[_]=R.r,w[_+1]=R.g,w[_+2]=R.b,w[_+3]=255):w[_+3]=0;d.putImageData(v,0,0)}catch(v){Util.error("Unable to draw hit graph from cached scene canvas. "+v.message)}return this}hasPointerCapture(t){return hasPointerCapture(t,this)}setPointerCapture(t){setPointerCapture(t,this)}releaseCapture(t){releaseCapture(t)}}Shape.prototype._fillFunc=_fillFunc$2;Shape.prototype._strokeFunc=_strokeFunc$2;Shape.prototype._fillFuncHit=_fillFuncHit;Shape.prototype._strokeFuncHit=_strokeFuncHit;Shape.prototype._centroid=!1;Shape.prototype.nodeType="Shape";_registerNode(Shape);Shape.prototype.eventListeners={};Shape.prototype.on.call(Shape.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",_clearHasShadowCache);Shape.prototype.on.call(Shape.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",_clearGetShadowRGBACache);Shape.prototype.on.call(Shape.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",_clearFillPatternCache);Shape.prototype.on.call(Shape.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",_clearLinearGradientCache);Shape.prototype.on.call(Shape.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",_clearRadialGradientCache);Factory.addGetterSetter(Shape,"stroke",void 0,getStringOrGradientValidator());Factory.addGetterSetter(Shape,"strokeWidth",2,getNumberValidator());Factory.addGetterSetter(Shape,"fillAfterStrokeEnabled",!1);Factory.addGetterSetter(Shape,"hitStrokeWidth","auto",getNumberOrAutoValidator());Factory.addGetterSetter(Shape,"strokeHitEnabled",!0,getBooleanValidator());Factory.addGetterSetter(Shape,"perfectDrawEnabled",!0,getBooleanValidator());Factory.addGetterSetter(Shape,"shadowForStrokeEnabled",!0,getBooleanValidator());Factory.addGetterSetter(Shape,"lineJoin");Factory.addGetterSetter(Shape,"lineCap");Factory.addGetterSetter(Shape,"miterLimit");Factory.addGetterSetter(Shape,"sceneFunc");Factory.addGetterSetter(Shape,"hitFunc");Factory.addGetterSetter(Shape,"dash");Factory.addGetterSetter(Shape,"dashOffset",0,getNumberValidator());Factory.addGetterSetter(Shape,"shadowColor",void 0,getStringValidator());Factory.addGetterSetter(Shape,"shadowBlur",0,getNumberValidator());Factory.addGetterSetter(Shape,"shadowOpacity",1,getNumberValidator());Factory.addComponentsGetterSetter(Shape,"shadowOffset",["x","y"]);Factory.addGetterSetter(Shape,"shadowOffsetX",0,getNumberValidator());Factory.addGetterSetter(Shape,"shadowOffsetY",0,getNumberValidator());Factory.addGetterSetter(Shape,"fillPatternImage");Factory.addGetterSetter(Shape,"fill",void 0,getStringOrGradientValidator());Factory.addGetterSetter(Shape,"fillPatternX",0,getNumberValidator());Factory.addGetterSetter(Shape,"fillPatternY",0,getNumberValidator());Factory.addGetterSetter(Shape,"fillLinearGradientColorStops");Factory.addGetterSetter(Shape,"strokeLinearGradientColorStops");Factory.addGetterSetter(Shape,"fillRadialGradientStartRadius",0);Factory.addGetterSetter(Shape,"fillRadialGradientEndRadius",0);Factory.addGetterSetter(Shape,"fillRadialGradientColorStops");Factory.addGetterSetter(Shape,"fillPatternRepeat","repeat");Factory.addGetterSetter(Shape,"fillEnabled",!0);Factory.addGetterSetter(Shape,"strokeEnabled",!0);Factory.addGetterSetter(Shape,"shadowEnabled",!0);Factory.addGetterSetter(Shape,"dashEnabled",!0);Factory.addGetterSetter(Shape,"strokeScaleEnabled",!0);Factory.addGetterSetter(Shape,"fillPriority","color");Factory.addComponentsGetterSetter(Shape,"fillPatternOffset",["x","y"]);Factory.addGetterSetter(Shape,"fillPatternOffsetX",0,getNumberValidator());Factory.addGetterSetter(Shape,"fillPatternOffsetY",0,getNumberValidator());Factory.addComponentsGetterSetter(Shape,"fillPatternScale",["x","y"]);Factory.addGetterSetter(Shape,"fillPatternScaleX",1,getNumberValidator());Factory.addGetterSetter(Shape,"fillPatternScaleY",1,getNumberValidator());Factory.addComponentsGetterSetter(Shape,"fillLinearGradientStartPoint",["x","y"]);Factory.addComponentsGetterSetter(Shape,"strokeLinearGradientStartPoint",["x","y"]);Factory.addGetterSetter(Shape,"fillLinearGradientStartPointX",0);Factory.addGetterSetter(Shape,"strokeLinearGradientStartPointX",0);Factory.addGetterSetter(Shape,"fillLinearGradientStartPointY",0);Factory.addGetterSetter(Shape,"strokeLinearGradientStartPointY",0);Factory.addComponentsGetterSetter(Shape,"fillLinearGradientEndPoint",["x","y"]);Factory.addComponentsGetterSetter(Shape,"strokeLinearGradientEndPoint",["x","y"]);Factory.addGetterSetter(Shape,"fillLinearGradientEndPointX",0);Factory.addGetterSetter(Shape,"strokeLinearGradientEndPointX",0);Factory.addGetterSetter(Shape,"fillLinearGradientEndPointY",0);Factory.addGetterSetter(Shape,"strokeLinearGradientEndPointY",0);Factory.addComponentsGetterSetter(Shape,"fillRadialGradientStartPoint",["x","y"]);Factory.addGetterSetter(Shape,"fillRadialGradientStartPointX",0);Factory.addGetterSetter(Shape,"fillRadialGradientStartPointY",0);Factory.addComponentsGetterSetter(Shape,"fillRadialGradientEndPoint",["x","y"]);Factory.addGetterSetter(Shape,"fillRadialGradientEndPointX",0);Factory.addGetterSetter(Shape,"fillRadialGradientEndPointY",0);Factory.addGetterSetter(Shape,"fillPatternRotation",0);Factory.addGetterSetter(Shape,"fillRule",void 0,getStringValidator());Factory.backCompat(Shape,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const BEFORE_DRAW="beforeDraw",DRAW="draw",INTERSECTION_OFFSETS=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],INTERSECTION_OFFSETS_LEN=INTERSECTION_OFFSETS.length;let Layer$1=class extends Container{constructor(t){super(t),this.canvas=new SceneCanvas,this.hitCanvas=new HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);const n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),t<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[t+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Node$1.prototype.moveToTop.call(this);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!Node$1.prototype.moveUp.call(this))return!1;const n=this.getStage();return!n||!n.content?!1:(n.content.removeChild(this.getNativeCanvasElement()),this.index<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Node$1.prototype.moveDown.call(this)){const t=this.getStage();if(t){const n=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),n[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Node$1.prototype.moveToBottom.call(this)){const t=this.getStage();if(t){const n=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),n[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const t=this.getNativeCanvasElement();return Node$1.prototype.remove.call(this),t&&t.parentNode&&Util._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:n}){return this.canvas.setSize(t,n),this.hitCanvas.setSize(t,n),this._setSmoothEnabled(),this}_validateAdd(t){const n=t.getType();n!=="Group"&&n!=="Shape"&&Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return t={...t},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),Node$1.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;let n=1,o=!1;for(;;){for(let u=0;u<INTERSECTION_OFFSETS_LEN;u++){const d=INTERSECTION_OFFSETS[u],f=this._getIntersection({x:t.x+d.x*n,y:t.y+d.y*n}),g=f.shape;if(g)return g;if(o=!!f.antialiased,!f.antialiased)break}if(o)n+=1;else return null}}_getIntersection(t){const n=this.hitCanvas.pixelRatio,o=this.hitCanvas.context.getImageData(Math.round(t.x*n),Math.round(t.y*n),1,1).data,u=o[3];if(u===255){const d=Util.getHitColorKey(o[0],o[1],o[2]),f=shapes[d];return f?{shape:f}:{antialiased:!0}}else if(u>0)return{antialiased:!0};return{}}drawScene(t,n,o){const u=this.getLayer(),d=t||u&&u.getCanvas();return this._fire(BEFORE_DRAW,{node:this}),this.clearBeforeDraw()&&d.getContext().clear(),Container.prototype.drawScene.call(this,d,n,o),this._fire(DRAW,{node:this}),this}drawHit(t,n){const o=this.getLayer(),u=t||o&&o.hitCanvas;return o&&o.clearBeforeDraw()&&o.getHitCanvas().getContext().clear(),Container.prototype.drawHit.call(this,u,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const t=this.parent;!!this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}destroy(){return Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};Layer$1.prototype.nodeType="Layer";_registerNode(Layer$1);Factory.addGetterSetter(Layer$1,"imageSmoothingEnabled",!0);Factory.addGetterSetter(Layer$1,"clearBeforeDraw",!0);Factory.addGetterSetter(Layer$1,"hitGraphEnabled",!0,getBooleanValidator());class FastLayer extends Layer$1{constructor(t){super(t),this.listening(!1),Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}FastLayer.prototype.nodeType="FastLayer";_registerNode(FastLayer);class Group extends Container{_validateAdd(t){const n=t.getType();n!=="Group"&&n!=="Shape"&&Util.throw("You may only add groups and shapes to groups.")}}Group.prototype.nodeType="Group";_registerNode(Group);const now=(function(){return glob.performance&&glob.performance.now?function(){return glob.performance.now()}:function(){return new Date().getTime()}})();class Animation{constructor(t,n){this.id=Animation.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:now(),frameRate:0},this.func=t,this.setLayers(n)}setLayers(t){let n=[];return t&&(n=Array.isArray(t)?t:[t]),this.layers=n,this}getLayers(){return this.layers}addLayer(t){const n=this.layers,o=n.length;for(let u=0;u<o;u++)if(n[u]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){const n=Animation.animations,o=n.length;for(let u=0;u<o;u++)if(n[u].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=now(),Animation._addAnimation(this),this}stop(){return Animation._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){const n=t.id,o=this.animations,u=o.length;for(let d=0;d<u;d++)if(o[d].id===n){this.animations.splice(d,1);break}}static _runFrames(){const t={},n=this.animations;for(let o=0;o<n.length;o++){const u=n[o],d=u.layers,f=u.func;u._updateFrameObject(now());const g=d.length;let v;if(f?v=f.call(u,u.frame)!==!1:v=!0,!!v)for(let w=0;w<g;w++){const S=d[w];S._id!==void 0&&(t[S._id]=S)}}for(const o in t)t.hasOwnProperty(o)&&t[o].batchDraw()}static _animationLoop(){const t=Animation;t.animations.length?(t._runFrames(),Util.requestAnimFrame(t._animationLoop)):t.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,Util.requestAnimFrame(this._animationLoop))}}Animation.animations=[];Animation.animIdCounter=0;Animation.animRunning=!1;const blacklist={node:1,duration:1,easing:1,onFinish:1,yoyo:1},PAUSED=1,PLAYING=2,REVERSING=3,colorAttrs=["fill","stroke","shadowColor"];let idCounter=0;class TweenEngine{constructor(t,n,o,u,d,f,g){this.prop=t,this.propFunc=n,this.begin=u,this._pos=u,this.duration=f,this._change=0,this.prevPos=0,this.yoyo=g,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=o,this._change=d-this.begin,this.pause()}fire(t){const n=this[t];n&&n()}setTime(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}getTime(){return this._time}setPosition(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}getPosition(t){return t===void 0&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}play(){this.state=PLAYING,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=REVERSING,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const t=this.getTimer()-this._startTime;this.state===PLAYING?this.setTime(t):this.state===REVERSING&&this.setTime(this.duration-t)}pause(){this.state=PAUSED,this.fire("onPause")}getTimer(){return new Date().getTime()}}class Tween{constructor(t){const n=this,o=t.node,u=o._id,d=t.easing||Easings.Linear,f=!!t.yoyo;let g,v;typeof t.duration>"u"?g=.3:t.duration===0?g=.001:g=t.duration,this.node=o,this._id=idCounter++;const w=o.getLayer()||(o instanceof Konva$1.Stage?o.getLayers():null);w||Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new Animation(function(){n.tween.onEnterFrame()},w),this.tween=new TweenEngine(v,function(S){n._tweenFunc(S)},d,0,1,g*1e3,f),this._addListeners(),Tween.attrs[u]||(Tween.attrs[u]={}),Tween.attrs[u][this._id]||(Tween.attrs[u][this._id]={}),Tween.tweens[u]||(Tween.tweens[u]={});for(v in t)blacklist[v]===void 0&&this._addAttr(v,t[v]);this.reset(),this.onFinish=t.onFinish,this.onReset=t.onReset,this.onUpdate=t.onUpdate}_addAttr(t,n){const o=this.node,u=o._id;let d,f,g,v,w;const S=Tween.tweens[u][t];S&&delete Tween.attrs[u][S][t];let R=o.getAttr(t);if(Util._isArray(n))if(d=[],f=Math.max(n.length,R.length),t==="points"&&n.length!==R.length&&(n.length>R.length?(v=R,R=Util._prepareArrayForTween(R,n,o.closed())):(g=n,n=Util._prepareArrayForTween(n,R,o.closed()))),t.indexOf("fill")===0)for(let _=0;_<f;_++)if(_%2===0)d.push(n[_]-R[_]);else{const F=Util.colorToRGBA(R[_]);w=Util.colorToRGBA(n[_]),R[_]=F,d.push({r:w.r-F.r,g:w.g-F.g,b:w.b-F.b,a:w.a-F.a})}else for(let _=0;_<f;_++)d.push(n[_]-R[_]);else colorAttrs.indexOf(t)!==-1?(R=Util.colorToRGBA(R),w=Util.colorToRGBA(n),d={r:w.r-R.r,g:w.g-R.g,b:w.b-R.b,a:w.a-R.a}):d=n-R;Tween.attrs[u][this._id][t]={start:R,diff:d,end:n,trueEnd:g,trueStart:v},Tween.tweens[u][t]=this._id}_tweenFunc(t){const n=this.node,o=Tween.attrs[n._id][this._id];let u,d,f,g,v,w,S,R;for(u in o){if(d=o[u],f=d.start,g=d.diff,R=d.end,Util._isArray(f))if(v=[],S=Math.max(f.length,R.length),u.indexOf("fill")===0)for(w=0;w<S;w++)w%2===0?v.push((f[w]||0)+g[w]*t):v.push("rgba("+Math.round(f[w].r+g[w].r*t)+","+Math.round(f[w].g+g[w].g*t)+","+Math.round(f[w].b+g[w].b*t)+","+(f[w].a+g[w].a*t)+")");else for(w=0;w<S;w++)v.push((f[w]||0)+g[w]*t);else colorAttrs.indexOf(u)!==-1?v="rgba("+Math.round(f.r+g.r*t)+","+Math.round(f.g+g.g*t)+","+Math.round(f.b+g.b*t)+","+(f.a+g.a*t)+")":v=f+g*t;n.setAttr(u,v)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const t=this.node,n=Tween.attrs[t._id][this._id];n.points&&n.points.trueEnd&&t.setAttr("points",n.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const t=this.node,n=Tween.attrs[t._id][this._id];n.points&&n.points.trueStart&&t.points(n.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(t){return this.tween.seek(t*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const t=this.node._id,n=this._id,o=Tween.tweens[t];this.pause(),this.anim&&this.anim.stop();for(const u in o)delete Tween.tweens[t][u];delete Tween.attrs[t][n],Tween.tweens[t]&&(Object.keys(Tween.tweens[t]).length===0&&delete Tween.tweens[t],Object.keys(Tween.attrs[t]).length===0&&delete Tween.attrs[t])}}Tween.attrs={};Tween.tweens={};Node$1.prototype.to=function(e){const t=e.onFinish;e.node=this,e.onFinish=function(){this.destroy(),t&&t()},new Tween(e).play()};const Easings={BackEaseIn(e,t,n,o){return n*(e/=o)*e*((1.70158+1)*e-1.70158)+t},BackEaseOut(e,t,n,o){return n*((e=e/o-1)*e*((1.70158+1)*e+1.70158)+1)+t},BackEaseInOut(e,t,n,o){let u=1.70158;return(e/=o/2)<1?n/2*(e*e*(((u*=1.525)+1)*e-u))+t:n/2*((e-=2)*e*(((u*=1.525)+1)*e+u)+2)+t},ElasticEaseIn(e,t,n,o,u,d){let f=0;return e===0?t:(e/=o)===1?t+n:(d||(d=o*.3),!u||u<Math.abs(n)?(u=n,f=d/4):f=d/(2*Math.PI)*Math.asin(n/u),-(u*Math.pow(2,10*(e-=1))*Math.sin((e*o-f)*(2*Math.PI)/d))+t)},ElasticEaseOut(e,t,n,o,u,d){let f=0;return e===0?t:(e/=o)===1?t+n:(d||(d=o*.3),!u||u<Math.abs(n)?(u=n,f=d/4):f=d/(2*Math.PI)*Math.asin(n/u),u*Math.pow(2,-10*e)*Math.sin((e*o-f)*(2*Math.PI)/d)+n+t)},ElasticEaseInOut(e,t,n,o,u,d){let f=0;return e===0?t:(e/=o/2)===2?t+n:(d||(d=o*(.3*1.5)),!u||u<Math.abs(n)?(u=n,f=d/4):f=d/(2*Math.PI)*Math.asin(n/u),e<1?-.5*(u*Math.pow(2,10*(e-=1))*Math.sin((e*o-f)*(2*Math.PI)/d))+t:u*Math.pow(2,-10*(e-=1))*Math.sin((e*o-f)*(2*Math.PI)/d)*.5+n+t)},BounceEaseOut(e,t,n,o){return(e/=o)<1/2.75?n*(7.5625*e*e)+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},BounceEaseIn(e,t,n,o){return n-Easings.BounceEaseOut(o-e,0,n,o)+t},BounceEaseInOut(e,t,n,o){return e<o/2?Easings.BounceEaseIn(e*2,0,n,o)*.5+t:Easings.BounceEaseOut(e*2-o,0,n,o)*.5+n*.5+t},EaseIn(e,t,n,o){return n*(e/=o)*e+t},EaseOut(e,t,n,o){return-n*(e/=o)*(e-2)+t},EaseInOut(e,t,n,o){return(e/=o/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},StrongEaseIn(e,t,n,o){return n*(e/=o)*e*e*e*e+t},StrongEaseOut(e,t,n,o){return n*((e=e/o-1)*e*e*e*e+1)+t},StrongEaseInOut(e,t,n,o){return(e/=o/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t},Linear(e,t,n,o){return n*e/o+t}},Konva=Util._assign(Konva$1,{Util,Transform,Node:Node$1,Container,Stage:Stage$1,stages,Layer:Layer$1,FastLayer,Group,DD,Shape,shapes,Animation,Tween,Easings,Context,Canvas});class Arc extends Shape{_sceneFunc(t){const n=Konva$1.getAngle(this.angle()),o=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,n,o),t.arc(0,0,this.innerRadius(),n,0,!o),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}getSelfRect(){const t=this.innerRadius(),n=this.outerRadius(),o=this.clockwise(),u=Konva$1.getAngle(o?360-this.angle():this.angle()),d=Math.cos(Math.min(u,Math.PI)),f=1,g=Math.sin(Math.min(Math.max(Math.PI,u),3*Math.PI/2)),v=Math.sin(Math.min(u,Math.PI/2)),w=d*(d>0?t:n),S=f*n,R=g*(g>0?t:n),_=v*(v>0?n:t);return{x:w,y:o?-1*_:R,width:S-w,height:_-R}}}Arc.prototype._centroid=!0;Arc.prototype.className="Arc";Arc.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];_registerNode(Arc);Factory.addGetterSetter(Arc,"innerRadius",0,getNumberValidator());Factory.addGetterSetter(Arc,"outerRadius",0,getNumberValidator());Factory.addGetterSetter(Arc,"angle",0,getNumberValidator());Factory.addGetterSetter(Arc,"clockwise",!1,getBooleanValidator());function getControlPoints(e,t,n,o,u,d,f){const g=Math.sqrt(Math.pow(n-e,2)+Math.pow(o-t,2)),v=Math.sqrt(Math.pow(u-n,2)+Math.pow(d-o,2)),w=f*g/(g+v),S=f*v/(g+v),R=n-w*(u-e),_=o-w*(d-t),F=n+S*(u-e),M=o+S*(d-t);return[R,_,F,M]}function expandPoints(e,t){const n=e.length,o=[];for(let u=2;u<n-2;u+=2){const d=getControlPoints(e[u-2],e[u-1],e[u],e[u+1],e[u+2],e[u+3],t);isNaN(d[0])||(o.push(d[0]),o.push(d[1]),o.push(e[u]),o.push(e[u+1]),o.push(d[2]),o.push(d[3]))}return o}function getBezierExtremaPoints(e){const t=[[e[0],e[2],e[4],e[6]],[e[1],e[3],e[5],e[7]]],n=[];for(const o of t){const u=-3*o[0]+9*o[1]-9*o[2]+3*o[3];if(u!==0){const d=6*o[0]-12*o[1]+6*o[2],f=-3*o[0]+3*o[1],g=d*d-4*u*f;if(g>=0){const v=Math.sqrt(g);n.push((-d+v)/(2*u)),n.push((-d-v)/(2*u))}}}return n.filter(o=>o>0&&o<1).flatMap(o=>t.map(u=>{const d=1-o;return d*d*d*u[0]+3*d*d*o*u[1]+3*d*o*o*u[2]+o*o*o*u[3]}))}let Line$1=class extends Shape{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){const n=this.points(),o=n.length,u=this.tension(),d=this.closed(),f=this.bezier();if(!o)return;let g=0;if(t.beginPath(),t.moveTo(n[0],n[1]),u!==0&&o>4){const v=this.getTensionPoints(),w=v.length;for(g=d?0:4,d||t.quadraticCurveTo(v[0],v[1],v[2],v[3]);g<w-2;)t.bezierCurveTo(v[g++],v[g++],v[g++],v[g++],v[g++],v[g++]);d||t.quadraticCurveTo(v[w-2],v[w-1],n[o-2],n[o-1])}else if(f)for(g=2;g<o;)t.bezierCurveTo(n[g++],n[g++],n[g++],n[g++],n[g++],n[g++]);else for(g=2;g<o;g+=2)t.lineTo(n[g],n[g+1]);d?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():expandPoints(this.points(),this.tension())}_getTensionPointsClosed(){const t=this.points(),n=t.length,o=this.tension(),u=getControlPoints(t[n-2],t[n-1],t[0],t[1],t[2],t[3],o),d=getControlPoints(t[n-4],t[n-3],t[n-2],t[n-1],t[0],t[1],o),f=expandPoints(t,o);return[u[2],u[3]].concat(f).concat([d[0],d[1],t[n-2],t[n-1],d[2],d[3],u[0],u[1],t[0],t[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:this.bezier()?t=[t[0],t[1],...getBezierExtremaPoints(this.points()),t[t.length-2],t[t.length-1]]:t=this.points();let n=t[0],o=t[0],u=t[1],d=t[1],f,g;for(let v=0;v<t.length/2;v++)f=t[v*2],g=t[v*2+1],n=Math.min(n,f),o=Math.max(o,f),u=Math.min(u,g),d=Math.max(d,g);return{x:n,y:u,width:o-n,height:d-u}}};Line$1.prototype.className="Line";Line$1.prototype._attrsAffectingSize=["points","bezier","tension"];_registerNode(Line$1);Factory.addGetterSetter(Line$1,"closed",!1);Factory.addGetterSetter(Line$1,"bezier",!1);Factory.addGetterSetter(Line$1,"tension",0,getNumberValidator());Factory.addGetterSetter(Line$1,"points",[],getNumberArrayValidator());const tValues=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],cValues=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],binomialCoefficients=[[1],[1,1],[1,2,1],[1,3,3,1]],getCubicArcLength=(e,t,n)=>{let o,u;const f=n/2;o=0;for(let g=0;g<20;g++)u=f*tValues[20][g]+f,o+=cValues[20][g]*BFunc(e,t,u);return f*o},getQuadraticArcLength=(e,t,n)=>{n===void 0&&(n=1);const o=e[0]-2*e[1]+e[2],u=t[0]-2*t[1]+t[2],d=2*e[1]-2*e[0],f=2*t[1]-2*t[0],g=4*(o*o+u*u),v=4*(o*d+u*f),w=d*d+f*f;if(g===0)return n*Math.sqrt(Math.pow(e[2]-e[0],2)+Math.pow(t[2]-t[0],2));const S=v/(2*g),R=w/g,_=n+S,F=R-S*S,M=_*_+F>0?Math.sqrt(_*_+F):0,I=S*S+F>0?Math.sqrt(S*S+F):0,N=S+Math.sqrt(S*S+F)!==0?F*Math.log(Math.abs((_+M)/(S+I))):0;return Math.sqrt(g)/2*(_*M-S*I+N)};function BFunc(e,t,n){const o=getDerivative(1,n,e),u=getDerivative(1,n,t),d=o*o+u*u;return Math.sqrt(d)}const getDerivative=(e,t,n)=>{const o=n.length-1;let u,d;if(o===0)return 0;if(e===0){d=0;for(let f=0;f<=o;f++)d+=binomialCoefficients[o][f]*Math.pow(1-t,o-f)*Math.pow(t,f)*n[f];return d}else{u=new Array(o);for(let f=0;f<o;f++)u[f]=o*(n[f+1]-n[f]);return getDerivative(e-1,t,u)}},t2length=(e,t,n)=>{let o=1,u=e/t,d=(e-n(u))/t,f=0;for(;o>.001;){const g=n(u+d),v=Math.abs(e-g)/t;if(v<o)o=v,u+=d;else{const w=n(u-d),S=Math.abs(e-w)/t;S<o?(o=S,u-=d):d/=2}if(f++,f>500)break}return u};class Path extends Shape{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=Path.parsePathData(this.data()),this.pathLength=Path.getPathLength(this.dataArray)}_sceneFunc(t){const n=this.dataArray;t.beginPath();let o=!1;for(let u=0;u<n.length;u++){const d=n[u].command,f=n[u].points;switch(d){case"L":t.lineTo(f[0],f[1]);break;case"M":t.moveTo(f[0],f[1]);break;case"C":t.bezierCurveTo(f[0],f[1],f[2],f[3],f[4],f[5]);break;case"Q":t.quadraticCurveTo(f[0],f[1],f[2],f[3]);break;case"A":const g=f[0],v=f[1],w=f[2],S=f[3],R=f[4],_=f[5],F=f[6],M=f[7],I=w>S?w:S,N=w>S?1:w/S,B=w>S?S/w:1;t.translate(g,v),t.rotate(F),t.scale(N,B),t.arc(0,0,I,R,R+_,1-M),t.scale(1/N,1/B),t.rotate(-F),t.translate(-g,-v);break;case"z":o=!0,t.closePath();break}}!o&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)}getSelfRect(){let t=[];this.dataArray.forEach(function(v){if(v.command==="A"){const w=v.points[4],S=v.points[5],R=v.points[4]+S;let _=Math.PI/180;if(Math.abs(w-R)<_&&(_=Math.abs(w-R)),S<0)for(let F=w-_;F>R;F-=_){const M=Path.getPointOnEllipticalArc(v.points[0],v.points[1],v.points[2],v.points[3],F,0);t.push(M.x,M.y)}else for(let F=w+_;F<R;F+=_){const M=Path.getPointOnEllipticalArc(v.points[0],v.points[1],v.points[2],v.points[3],F,0);t.push(M.x,M.y)}}else if(v.command==="C")for(let w=0;w<=1;w+=.01){const S=Path.getPointOnCubicBezier(w,v.start.x,v.start.y,v.points[0],v.points[1],v.points[2],v.points[3],v.points[4],v.points[5]);t.push(S.x,S.y)}else t=t.concat(v.points)});let n=t[0],o=t[0],u=t[1],d=t[1],f,g;for(let v=0;v<t.length/2;v++)f=t[v*2],g=t[v*2+1],isNaN(f)||(n=Math.min(n,f),o=Math.max(o,f)),isNaN(g)||(u=Math.min(u,g),d=Math.max(d,g));return{x:n,y:u,width:o-n,height:d-u}}getLength(){return this.pathLength}getPointAtLength(t){return Path.getPointAtLengthOfDataArray(t,this.dataArray)}static getLineLength(t,n,o,u){return Math.sqrt((o-t)*(o-t)+(u-n)*(u-n))}static getPathLength(t){let n=0;for(let o=0;o<t.length;++o)n+=t[o].pathLength;return n}static getPointAtLengthOfDataArray(t,n){let o,u=0,d=n.length;if(!d)return null;for(;u<d&&t>n[u].pathLength;)t-=n[u].pathLength,++u;if(u===d)return o=n[u-1].points.slice(-2),{x:o[0],y:o[1]};if(t<.01)return n[u].command==="M"?(o=n[u].points.slice(0,2),{x:o[0],y:o[1]}):{x:n[u].start.x,y:n[u].start.y};const f=n[u],g=f.points;switch(f.command){case"L":return Path.getPointOnLine(t,f.start.x,f.start.y,g[0],g[1]);case"C":return Path.getPointOnCubicBezier(t2length(t,Path.getPathLength(n),I=>getCubicArcLength([f.start.x,g[0],g[2],g[4]],[f.start.y,g[1],g[3],g[5]],I)),f.start.x,f.start.y,g[0],g[1],g[2],g[3],g[4],g[5]);case"Q":return Path.getPointOnQuadraticBezier(t2length(t,Path.getPathLength(n),I=>getQuadraticArcLength([f.start.x,g[0],g[2]],[f.start.y,g[1],g[3]],I)),f.start.x,f.start.y,g[0],g[1],g[2],g[3]);case"A":const v=g[0],w=g[1],S=g[2],R=g[3],_=g[5],F=g[6];let M=g[4];return M+=_*t/f.pathLength,Path.getPointOnEllipticalArc(v,w,S,R,M,F)}return null}static getPointOnLine(t,n,o,u,d,f,g){f=f??n,g=g??o;const v=this.getLineLength(n,o,u,d);if(v<1e-10)return{x:n,y:o};if(u===n)return{x:f,y:g+(d>o?t:-t)};const w=(d-o)/(u-n),S=Math.sqrt(t*t/(1+w*w))*(u<n?-1:1),R=w*S;if(Math.abs(g-o-w*(f-n))<1e-10)return{x:f+S,y:g+R};const _=((f-n)*(u-n)+(g-o)*(d-o))/(v*v),F=n+_*(u-n),M=o+_*(d-o),I=this.getLineLength(f,g,F,M),N=Math.sqrt(t*t-I*I),B=Math.sqrt(N*N/(1+w*w))*(u<n?-1:1),H=w*B;return{x:F+B,y:M+H}}static getPointOnCubicBezier(t,n,o,u,d,f,g,v,w){function S(N){return N*N*N}function R(N){return 3*N*N*(1-N)}function _(N){return 3*N*(1-N)*(1-N)}function F(N){return(1-N)*(1-N)*(1-N)}const M=v*S(t)+f*R(t)+u*_(t)+n*F(t),I=w*S(t)+g*R(t)+d*_(t)+o*F(t);return{x:M,y:I}}static getPointOnQuadraticBezier(t,n,o,u,d,f,g){function v(F){return F*F}function w(F){return 2*F*(1-F)}function S(F){return(1-F)*(1-F)}const R=f*v(t)+u*w(t)+n*S(t),_=g*v(t)+d*w(t)+o*S(t);return{x:R,y:_}}static getPointOnEllipticalArc(t,n,o,u,d,f){const g=Math.cos(f),v=Math.sin(f),w={x:o*Math.cos(d),y:u*Math.sin(d)};return{x:t+(w.x*g-w.y*v),y:n+(w.x*v+w.y*g)}}static parsePathData(t){if(!t)return[];let n=t;const o=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(let R=0;R<o.length;R++)n=n.replace(new RegExp(o[R],"g"),"|"+o[R]);const u=n.split("|"),d=[],f=[];let g=0,v=0;const w=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let S;for(let R=1;R<u.length;R++){let _=u[R],F=_.charAt(0);for(_=_.slice(1),f.length=0;S=w.exec(_);)f.push(S[0]);let M=[],I=F==="A"||F==="a"?0:-1;for(let N=0,B=f.length;N<B;N++){const H=f[N];if(H==="00"){M.push(0,0),I>=0&&(I+=2,I>=7&&(I-=7));continue}if(I>=0){if(I===3){if(/^[01]{2}\d+(?:\.\d+)?$/.test(H)){M.push(parseInt(H[0],10)),M.push(parseInt(H[1],10)),M.push(parseFloat(H.slice(2))),I+=3,I>=7&&(I-=7);continue}if(H==="11"||H==="10"||H==="01"){M.push(parseInt(H[0],10)),M.push(parseInt(H[1],10)),I+=2,I>=7&&(I-=7);continue}if(H==="0"||H==="1"){M.push(parseInt(H,10)),I+=1,I>=7&&(I-=7);continue}}else if(I===4){if(/^[01]\d+(?:\.\d+)?$/.test(H)){M.push(parseInt(H[0],10)),M.push(parseFloat(H.slice(1))),I+=2,I>=7&&(I-=7);continue}if(H==="0"||H==="1"){M.push(parseInt(H,10)),I+=1,I>=7&&(I-=7);continue}}const U=parseFloat(H);isNaN(U)?M.push(0):M.push(U),I+=1,I>=7&&(I-=7)}else{const U=parseFloat(H);isNaN(U)?M.push(0):M.push(U)}}for(;M.length>0&&!isNaN(M[0]);){let N="",B=[];const H=g,U=v;let $,z,j,J,ie,se,fe,de,Ce,be;switch(F){case"l":g+=M.shift(),v+=M.shift(),N="L",B.push(g,v);break;case"L":g=M.shift(),v=M.shift(),B.push(g,v);break;case"m":const xe=M.shift(),Ee=M.shift();if(g+=xe,v+=Ee,N="M",d.length>2&&d[d.length-1].command==="z"){for(let ae=d.length-2;ae>=0;ae--)if(d[ae].command==="M"){g=d[ae].points[0]+xe,v=d[ae].points[1]+Ee;break}}B.push(g,v),F="l";break;case"M":g=M.shift(),v=M.shift(),N="M",B.push(g,v),F="L";break;case"h":g+=M.shift(),N="L",B.push(g,v);break;case"H":g=M.shift(),N="L",B.push(g,v);break;case"v":v+=M.shift(),N="L",B.push(g,v);break;case"V":v=M.shift(),N="L",B.push(g,v);break;case"C":B.push(M.shift(),M.shift(),M.shift(),M.shift()),g=M.shift(),v=M.shift(),B.push(g,v);break;case"c":B.push(g+M.shift(),v+M.shift(),g+M.shift(),v+M.shift()),g+=M.shift(),v+=M.shift(),N="C",B.push(g,v);break;case"S":z=g,j=v,$=d[d.length-1],$.command==="C"&&(z=g+(g-$.points[2]),j=v+(v-$.points[3])),B.push(z,j,M.shift(),M.shift()),g=M.shift(),v=M.shift(),N="C",B.push(g,v);break;case"s":z=g,j=v,$=d[d.length-1],$.command==="C"&&(z=g+(g-$.points[2]),j=v+(v-$.points[3])),B.push(z,j,g+M.shift(),v+M.shift()),g+=M.shift(),v+=M.shift(),N="C",B.push(g,v);break;case"Q":B.push(M.shift(),M.shift()),g=M.shift(),v=M.shift(),B.push(g,v);break;case"q":B.push(g+M.shift(),v+M.shift()),g+=M.shift(),v+=M.shift(),N="Q",B.push(g,v);break;case"T":z=g,j=v,$=d[d.length-1],$.command==="Q"&&(z=g+(g-$.points[0]),j=v+(v-$.points[1])),g=M.shift(),v=M.shift(),N="Q",B.push(z,j,g,v);break;case"t":z=g,j=v,$=d[d.length-1],$.command==="Q"&&(z=g+(g-$.points[0]),j=v+(v-$.points[1])),g+=M.shift(),v+=M.shift(),N="Q",B.push(z,j,g,v);break;case"A":J=M.shift(),ie=M.shift(),se=M.shift(),fe=M.shift(),de=M.shift(),Ce=g,be=v,g=M.shift(),v=M.shift(),N="A",B=this.convertEndpointToCenterParameterization(Ce,be,g,v,fe,de,J,ie,se);break;case"a":J=M.shift(),ie=M.shift(),se=M.shift(),fe=M.shift(),de=M.shift(),Ce=g,be=v,g+=M.shift(),v+=M.shift(),N="A",B=this.convertEndpointToCenterParameterization(Ce,be,g,v,fe,de,J,ie,se);break}d.push({command:N||F,points:B,start:{x:H,y:U},pathLength:this.calcLength(H,U,N||F,B)})}(F==="z"||F==="Z")&&d.push({command:"z",points:[],start:void 0,pathLength:0})}return d}static calcLength(t,n,o,u){let d,f,g,v;const w=Path;switch(o){case"L":return w.getLineLength(t,n,u[0],u[1]);case"C":return getCubicArcLength([t,u[0],u[2],u[4]],[n,u[1],u[3],u[5]],1);case"Q":return getQuadraticArcLength([t,u[0],u[2]],[n,u[1],u[3]],1);case"A":d=0;const S=u[4],R=u[5],_=u[4]+R;let F=Math.PI/180;if(Math.abs(S-_)<F&&(F=Math.abs(S-_)),f=w.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],S,0),R<0)for(v=S-F;v>_;v-=F)g=w.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],v,0),d+=w.getLineLength(f.x,f.y,g.x,g.y),f=g;else for(v=S+F;v<_;v+=F)g=w.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],v,0),d+=w.getLineLength(f.x,f.y,g.x,g.y),f=g;return g=w.getPointOnEllipticalArc(u[0],u[1],u[2],u[3],_,0),d+=w.getLineLength(f.x,f.y,g.x,g.y),d}return 0}static convertEndpointToCenterParameterization(t,n,o,u,d,f,g,v,w){const S=w*(Math.PI/180),R=Math.cos(S)*(t-o)/2+Math.sin(S)*(n-u)/2,_=-1*Math.sin(S)*(t-o)/2+Math.cos(S)*(n-u)/2,F=R*R/(g*g)+_*_/(v*v);F>1&&(g*=Math.sqrt(F),v*=Math.sqrt(F));let M=Math.sqrt((g*g*(v*v)-g*g*(_*_)-v*v*(R*R))/(g*g*(_*_)+v*v*(R*R)));d===f&&(M*=-1),isNaN(M)&&(M=0);const I=M*g*_/v,N=M*-v*R/g,B=(t+o)/2+Math.cos(S)*I-Math.sin(S)*N,H=(n+u)/2+Math.sin(S)*I+Math.cos(S)*N,U=function(fe){return Math.sqrt(fe[0]*fe[0]+fe[1]*fe[1])},$=function(fe,de){return(fe[0]*de[0]+fe[1]*de[1])/(U(fe)*U(de))},z=function(fe,de){return(fe[0]*de[1]<fe[1]*de[0]?-1:1)*Math.acos($(fe,de))},j=z([1,0],[(R-I)/g,(_-N)/v]),J=[(R-I)/g,(_-N)/v],ie=[(-1*R-I)/g,(-1*_-N)/v];let se=z(J,ie);return $(J,ie)<=-1&&(se=Math.PI),$(J,ie)>=1&&(se=0),f===0&&se>0&&(se=se-2*Math.PI),f===1&&se<0&&(se=se+2*Math.PI),[B,H,g,v,j,se,S,f]}}Path.prototype.className="Path";Path.prototype._attrsAffectingSize=["data"];_registerNode(Path);Factory.addGetterSetter(Path,"data");class Arrow extends Line$1{_sceneFunc(t){super._sceneFunc(t);const n=Math.PI*2,o=this.points();let u=o;const d=this.tension()!==0&&o.length>4;d&&(u=this.getTensionPoints());const f=this.pointerLength(),g=o.length;let v,w;if(d){const _=[u[u.length-4],u[u.length-3],u[u.length-2],u[u.length-1],o[g-2],o[g-1]],F=Path.calcLength(u[u.length-4],u[u.length-3],"C",_),M=Path.getPointOnQuadraticBezier(Math.min(1,1-f/F),_[0],_[1],_[2],_[3],_[4],_[5]);v=o[g-2]-M.x,w=o[g-1]-M.y}else v=o[g-2]-o[g-4],w=o[g-1]-o[g-3];const S=(Math.atan2(w,v)+n)%n,R=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(o[g-2],o[g-1]),t.rotate(S),t.moveTo(0,0),t.lineTo(-f,R/2),t.lineTo(-f,-R/2),t.closePath(),t.restore(),this.__fillStroke(t)),this.pointerAtBeginning()&&(t.save(),t.beginPath(),t.translate(o[0],o[1]),d?(v=(u[0]+u[2])/2-o[0],w=(u[1]+u[3])/2-o[1]):(v=o[2]-o[0],w=o[3]-o[1]),t.rotate((Math.atan2(-w,-v)+n)%n),t.moveTo(0,0),t.lineTo(-f,R/2),t.lineTo(-f,-R/2),t.closePath(),t.restore(),this.__fillStroke(t))}__fillStroke(t){const n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),n=this.pointerWidth()/2;return{x:t.x,y:t.y-n,width:t.width,height:t.height+n*2}}}Arrow.prototype.className="Arrow";_registerNode(Arrow);Factory.addGetterSetter(Arrow,"pointerLength",10,getNumberValidator());Factory.addGetterSetter(Arrow,"pointerWidth",10,getNumberValidator());Factory.addGetterSetter(Arrow,"pointerAtBeginning",!1);Factory.addGetterSetter(Arrow,"pointerAtEnding",!0);let Circle$1=class extends Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}};Circle$1.prototype._centroid=!0;Circle$1.prototype.className="Circle";Circle$1.prototype._attrsAffectingSize=["radius"];_registerNode(Circle$1);Factory.addGetterSetter(Circle$1,"radius",0,getNumberValidator());class Ellipse extends Shape{_sceneFunc(t){const n=this.radiusX(),o=this.radiusY();t.beginPath(),t.save(),n!==o&&t.scale(1,o/n),t.arc(0,0,n,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}Ellipse.prototype.className="Ellipse";Ellipse.prototype._centroid=!0;Ellipse.prototype._attrsAffectingSize=["radiusX","radiusY"];_registerNode(Ellipse);Factory.addComponentsGetterSetter(Ellipse,"radius",["x","y"]);Factory.addGetterSetter(Ellipse,"radiusX",0,getNumberValidator());Factory.addGetterSetter(Ellipse,"radiusY",0,getNumberValidator());let Image$2=class Sp extends Shape{constructor(t){super(t),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",n=>{this._removeImageLoad(n.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&t.readyState===4||t&&t.addEventListener&&t.addEventListener("load",this._loadListener)}_removeImageLoad(t){t&&t.removeEventListener&&t.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const t=!!this.cornerRadius(),n=this.hasShadow();return t&&n?!0:super._useBufferCanvas(!0)}_sceneFunc(t){const n=this.getWidth(),o=this.getHeight(),u=this.cornerRadius(),d=this.attrs.image;let f;if(d){const g=this.attrs.cropWidth,v=this.attrs.cropHeight;g&&v?f=[d,this.cropX(),this.cropY(),g,v,0,0,n,o]:f=[d,0,0,n,o]}(this.hasFill()||this.hasStroke()||u)&&(t.beginPath(),u?Util.drawRoundedRectPath(t,n,o,u):t.rect(0,0,n,o),t.closePath(),t.fillStrokeShape(this)),d&&(u&&t.clip(),t.drawImage.apply(t,f))}_hitFunc(t){const n=this.width(),o=this.height(),u=this.cornerRadius();t.beginPath(),u?Util.drawRoundedRectPath(t,n,o,u):t.rect(0,0,n,o),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,n,o;return(o=(t=this.attrs.width)!==null&&t!==void 0?t:(n=this.image())===null||n===void 0?void 0:n.width)!==null&&o!==void 0?o:0}getHeight(){var t,n,o;return(o=(t=this.attrs.height)!==null&&t!==void 0?t:(n=this.image())===null||n===void 0?void 0:n.height)!==null&&o!==void 0?o:0}static fromURL(t,n,o=null){const u=Util.createImageElement();u.onload=function(){const d=new Sp({image:u});n(d)},u.onerror=o,u.crossOrigin="Anonymous",u.src=t}};Image$2.prototype.className="Image";Image$2.prototype._attrsAffectingSize=["image"];_registerNode(Image$2);Factory.addGetterSetter(Image$2,"cornerRadius",0,getNumberOrArrayOfNumbersValidator(4));Factory.addGetterSetter(Image$2,"image");Factory.addComponentsGetterSetter(Image$2,"crop",["x","y","width","height"]);Factory.addGetterSetter(Image$2,"cropX",0,getNumberValidator());Factory.addGetterSetter(Image$2,"cropY",0,getNumberValidator());Factory.addGetterSetter(Image$2,"cropWidth",0,getNumberValidator());Factory.addGetterSetter(Image$2,"cropHeight",0,getNumberValidator());const ATTR_CHANGE_LIST$2=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],CHANGE_KONVA$1="Change.konva",NONE$1="none",UP="up",RIGHT$1="right",DOWN="down",LEFT$1="left",attrChangeListLen$1=ATTR_CHANGE_LIST$2.length;class Label extends Group{constructor(t){super(t),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){let n=this,o;const u=function(){n._sync()};for(o=0;o<attrChangeListLen$1;o++)t.on(ATTR_CHANGE_LIST$2[o]+CHANGE_KONVA$1,u)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let t=this.getText(),n=this.getTag(),o,u,d,f,g,v,w;if(t&&n){switch(o=t.width(),u=t.height(),d=n.pointerDirection(),f=n.pointerWidth(),w=n.pointerHeight(),g=0,v=0,d){case UP:g=o/2,v=-1*w;break;case RIGHT$1:g=o+f,v=u/2;break;case DOWN:g=o/2,v=u+w;break;case LEFT$1:g=-1*f,v=u/2;break}n.setAttrs({x:-1*g,y:-1*v,width:o,height:u}),t.setAttrs({x:-1*g,y:-1*v})}}}Label.prototype.className="Label";_registerNode(Label);class Tag extends Shape{_sceneFunc(t){const n=this.width(),o=this.height(),u=this.pointerDirection(),d=this.pointerWidth(),f=this.pointerHeight(),g=this.cornerRadius();let v=0,w=0,S=0,R=0;typeof g=="number"?v=w=S=R=Math.min(g,n/2,o/2):(v=Math.min(g[0]||0,n/2,o/2),w=Math.min(g[1]||0,n/2,o/2),R=Math.min(g[2]||0,n/2,o/2),S=Math.min(g[3]||0,n/2,o/2)),t.beginPath(),t.moveTo(v,0),u===UP&&(t.lineTo((n-d)/2,0),t.lineTo(n/2,-1*f),t.lineTo((n+d)/2,0)),t.lineTo(n-w,0),t.arc(n-w,w,w,Math.PI*3/2,0,!1),u===RIGHT$1&&(t.lineTo(n,(o-f)/2),t.lineTo(n+d,o/2),t.lineTo(n,(o+f)/2)),t.lineTo(n,o-R),t.arc(n-R,o-R,R,0,Math.PI/2,!1),u===DOWN&&(t.lineTo((n+d)/2,o),t.lineTo(n/2,o+f),t.lineTo((n-d)/2,o)),t.lineTo(S,o),t.arc(S,o-S,S,Math.PI/2,Math.PI,!1),u===LEFT$1&&(t.lineTo(0,(o+f)/2),t.lineTo(-1*d,o/2),t.lineTo(0,(o-f)/2)),t.lineTo(0,v),t.arc(v,v,v,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){let t=0,n=0,o=this.pointerWidth(),u=this.pointerHeight(),d=this.pointerDirection(),f=this.width(),g=this.height();return d===UP?(n-=u,g+=u):d===DOWN?g+=u:d===LEFT$1?(t-=o*1.5,f+=o):d===RIGHT$1&&(f+=o*1.5),{x:t,y:n,width:f,height:g}}}Tag.prototype.className="Tag";_registerNode(Tag);Factory.addGetterSetter(Tag,"pointerDirection",NONE$1);Factory.addGetterSetter(Tag,"pointerWidth",0,getNumberValidator());Factory.addGetterSetter(Tag,"pointerHeight",0,getNumberValidator());Factory.addGetterSetter(Tag,"cornerRadius",0,getNumberOrArrayOfNumbersValidator(4));let Rect$1=class extends Shape{_sceneFunc(t){const n=this.cornerRadius(),o=this.width(),u=this.height();t.beginPath(),n?Util.drawRoundedRectPath(t,o,u,n):t.rect(0,0,o,u),t.closePath(),t.fillStrokeShape(this)}};Rect$1.prototype.className="Rect";_registerNode(Rect$1);Factory.addGetterSetter(Rect$1,"cornerRadius",0,getNumberOrArrayOfNumbersValidator(4));class RegularPolygon extends Shape{_sceneFunc(t){const n=this._getPoints(),o=this.radius(),u=this.sides(),d=this.cornerRadius();if(t.beginPath(),d)Util.drawRoundedPolygonPath(t,n,u,o,d);else{t.moveTo(n[0].x,n[0].y);for(let f=1;f<n.length;f++)t.lineTo(n[f].x,n[f].y)}t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,n=this.attrs.radius||0,o=[];for(let u=0;u<t;u++)o.push({x:n*Math.sin(u*2*Math.PI/t),y:-1*n*Math.cos(u*2*Math.PI/t)});return o}getSelfRect(){const t=this._getPoints();let n=t[0].x,o=t[0].x,u=t[0].y,d=t[0].y;return t.forEach(f=>{n=Math.min(n,f.x),o=Math.max(o,f.x),u=Math.min(u,f.y),d=Math.max(d,f.y)}),{x:n,y:u,width:o-n,height:d-u}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}RegularPolygon.prototype.className="RegularPolygon";RegularPolygon.prototype._centroid=!0;RegularPolygon.prototype._attrsAffectingSize=["radius"];_registerNode(RegularPolygon);Factory.addGetterSetter(RegularPolygon,"radius",0,getNumberValidator());Factory.addGetterSetter(RegularPolygon,"sides",0,getNumberValidator());Factory.addGetterSetter(RegularPolygon,"cornerRadius",0,getNumberOrArrayOfNumbersValidator(4));const PIx2=Math.PI*2;class Ring extends Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,PIx2,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),PIx2,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Ring.prototype.className="Ring";Ring.prototype._centroid=!0;Ring.prototype._attrsAffectingSize=["innerRadius","outerRadius"];_registerNode(Ring);Factory.addGetterSetter(Ring,"innerRadius",0,getNumberValidator());Factory.addGetterSetter(Ring,"outerRadius",0,getNumberValidator());class Sprite extends Shape{constructor(t){super(t),this._updated=!0,this.anim=new Animation(()=>{const n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){const n=this.animation(),o=this.frameIndex(),u=o*4,d=this.animations()[n],f=this.frameOffsets(),g=d[u+0],v=d[u+1],w=d[u+2],S=d[u+3],R=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,w,S),t.closePath(),t.fillStrokeShape(this)),R)if(f){const _=f[n],F=o*2;t.drawImage(R,g,v,w,S,_[F+0],_[F+1],w,S)}else t.drawImage(R,g,v,w,S,0,0,w,S)}_hitFunc(t){const n=this.animation(),o=this.frameIndex(),u=o*4,d=this.animations()[n],f=this.frameOffsets(),g=d[u+2],v=d[u+3];if(t.beginPath(),f){const w=f[n],S=o*2;t.rect(w[S+0],w[S+1],g,v)}else t.rect(0,0,g,v);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const t=this.frameIndex(),n=this.animation(),o=this.animations(),u=o[n],d=u.length/4;t<d-1?this.frameIndex(t+1):this.frameIndex(0)}}Sprite.prototype.className="Sprite";_registerNode(Sprite);Factory.addGetterSetter(Sprite,"animation");Factory.addGetterSetter(Sprite,"animations");Factory.addGetterSetter(Sprite,"frameOffsets");Factory.addGetterSetter(Sprite,"image");Factory.addGetterSetter(Sprite,"frameIndex",0,getNumberValidator());Factory.addGetterSetter(Sprite,"frameRate",17,getNumberValidator());Factory.backCompat(Sprite,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Star extends Shape{_sceneFunc(t){const n=this.innerRadius(),o=this.outerRadius(),u=this.numPoints();t.beginPath(),t.moveTo(0,0-o);for(let d=1;d<u*2;d++){const f=d%2===0?o:n,g=f*Math.sin(d*Math.PI/u),v=-1*f*Math.cos(d*Math.PI/u);t.lineTo(g,v)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Star.prototype.className="Star";Star.prototype._centroid=!0;Star.prototype._attrsAffectingSize=["innerRadius","outerRadius"];_registerNode(Star);Factory.addGetterSetter(Star,"numPoints",5,getNumberValidator());Factory.addGetterSetter(Star,"innerRadius",0,getNumberValidator());Factory.addGetterSetter(Star,"outerRadius",0,getNumberValidator());function stringToArray(e){return[...e].reduce((t,n,o,u)=>{if(new RegExp("\\p{Emoji}","u").test(n)){const d=u[o+1];d&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(d)?(t.push(n+d),u[o+1]=""):t.push(n)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(n+(u[o+1]||""))?t.push(n+u[o+1]):o>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(n)?t[t.length-1]+=n:n&&t.push(n);return t},[])}const AUTO="auto",CENTER="center",INHERIT="inherit",JUSTIFY="justify",CHANGE_KONVA="Change.konva",CONTEXT_2D="2d",DASH="-",LEFT="left",TEXT="text",TEXT_UPPER="Text",TOP="top",BOTTOM="bottom",MIDDLE="middle",NORMAL$1="normal",PX_SPACE="px ",SPACE=" ",RIGHT="right",RTL="rtl",WORD="word",CHAR="char",NONE="none",ELLIPSIS="",ATTR_CHANGE_LIST$1=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],attrChangeListLen=ATTR_CHANGE_LIST$1.length;function normalizeFontFamily(e){return e.split(",").map(t=>{t=t.trim();const n=t.indexOf(" ")>=0,o=t.indexOf('"')>=0||t.indexOf("'")>=0;return n&&!o&&(t=`"${t}"`),t}).join(", ")}let dummyContext;function getDummyContext(){return dummyContext||(dummyContext=Util.createCanvasElement().getContext(CONTEXT_2D),dummyContext)}function _fillFunc$1(e){e.fillText(this._partialText,this._partialTextX,this._partialTextY)}function _strokeFunc$1(e){e.setAttr("miterLimit",2),e.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function checkDefaultFill(e){return e=e||{},!e.fillLinearGradientColorStops&&!e.fillRadialGradientColorStops&&!e.fillPatternImage&&(e.fill=e.fill||"black"),e}let Text$1=class extends Shape{constructor(t){super(checkDefaultFill(t)),this._partialTextX=0,this._partialTextY=0;for(let n=0;n<attrChangeListLen;n++)this.on(ATTR_CHANGE_LIST$1[n]+CHANGE_KONVA,this._setTextData);this._setTextData()}_sceneFunc(t){var n,o;const u=this.textArr,d=u.length;if(!this.text())return;let f=this.padding(),g=this.fontSize(),v=this.lineHeight()*g,w=this.verticalAlign(),S=this.direction(),R=0,_=this.align(),F=this.getWidth(),M=this.letterSpacing(),I=this.charRenderFunc(),N=this.fill(),B=this.textDecoration(),H=this.underlineOffset(),U=B.indexOf("underline")!==-1,$=B.indexOf("line-through")!==-1,z;S=S===INHERIT?t.direction:S;let j=v/2,J=MIDDLE;if(!Konva$1.legacyTextRendering){const ie=this.measureSize("M");J="alphabetic";const se=(n=ie.fontBoundingBoxAscent)!==null&&n!==void 0?n:ie.actualBoundingBoxAscent,fe=(o=ie.fontBoundingBoxDescent)!==null&&o!==void 0?o:ie.actualBoundingBoxDescent;j=(se-fe)/2+v/2}for(S===RTL&&t.setAttr("direction",S),t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",J),t.setAttr("textAlign",LEFT),w===MIDDLE?R=(this.getHeight()-d*v-f*2)/2:w===BOTTOM&&(R=this.getHeight()-d*v-f*2),t.translate(f,R+f),z=0;z<d;z++){let ie=0,se=0;const fe=u[z],de=fe.text,Ce=fe.width,be=fe.lastInParagraph;if(t.save(),_===RIGHT?ie+=F-Ce-f*2:_===CENTER&&(ie+=(F-Ce-f*2)/2),U){t.save(),t.beginPath();const Ee=H??(Konva$1.legacyTextRendering?Math.round(g/2):Math.round(g/4)),ae=ie,oe=j+se+Ee;t.moveTo(ae,oe);const ee=_===JUSTIFY&&!be?F-f*2:Ce;t.lineTo(ae+Math.round(ee),oe),t.lineWidth=g/15;const Z=this._getLinearGradient();t.strokeStyle=Z||N,t.stroke(),t.restore()}const xe=ie;if(S!==RTL&&(M!==0||_===JUSTIFY||I)){const Ee=de.split(" ").length-1,ae=stringToArray(de);for(let oe=0;oe<ae.length;oe++){const ee=ae[oe];if(ee===" "&&!be&&_===JUSTIFY&&(ie+=(F-f*2-Ce)/Ee),this._partialTextX=ie,this._partialTextY=j+se,this._partialText=ee,I){t.save();const Q=u.slice(0,z).reduce((ne,ue)=>ne+stringToArray(ue.text).length,0),K=oe+Q;I({char:ee,index:K,x:ie,y:j+se,lineIndex:z,column:oe,isLastInLine:be,width:this.measureSize(ee).width,context:t})}t.fillStrokeShape(this),I&&t.restore(),ie+=this.measureSize(ee).width+M}}else M!==0&&t.setAttr("letterSpacing",`${M}px`),this._partialTextX=ie,this._partialTextY=j+se,this._partialText=de,t.fillStrokeShape(this);if($){t.save(),t.beginPath();const Ee=Konva$1.legacyTextRendering?0:-Math.round(g/4),ae=xe;t.moveTo(ae,j+se+Ee);const oe=_===JUSTIFY&&!be?F-f*2:Ce;t.lineTo(ae+Math.round(oe),j+se+Ee),t.lineWidth=g/15;const ee=this._getLinearGradient();t.strokeStyle=ee||N,t.stroke(),t.restore()}t.restore(),d>1&&(j+=v)}}_hitFunc(t){const n=this.getWidth(),o=this.getHeight();t.beginPath(),t.rect(0,0,n,o),t.closePath(),t.fillStrokeShape(this)}setText(t){const n=Util._isString(t)?t:t==null?"":t+"";return this._setAttr(TEXT,n),this}getWidth(){return this.attrs.width===AUTO||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===AUTO||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var n,o,u,d,f,g,v,w,S,R,_;let F=getDummyContext(),M=this.fontSize(),I;F.save(),F.font=this._getContextFont(),I=F.measureText(t),F.restore();const N=M/100;return{actualBoundingBoxAscent:(n=I.actualBoundingBoxAscent)!==null&&n!==void 0?n:71.58203125*N,actualBoundingBoxDescent:(o=I.actualBoundingBoxDescent)!==null&&o!==void 0?o:0,actualBoundingBoxLeft:(u=I.actualBoundingBoxLeft)!==null&&u!==void 0?u:-7.421875*N,actualBoundingBoxRight:(d=I.actualBoundingBoxRight)!==null&&d!==void 0?d:75.732421875*N,alphabeticBaseline:(f=I.alphabeticBaseline)!==null&&f!==void 0?f:0,emHeightAscent:(g=I.emHeightAscent)!==null&&g!==void 0?g:100*N,emHeightDescent:(v=I.emHeightDescent)!==null&&v!==void 0?v:-20*N,fontBoundingBoxAscent:(w=I.fontBoundingBoxAscent)!==null&&w!==void 0?w:91*N,fontBoundingBoxDescent:(S=I.fontBoundingBoxDescent)!==null&&S!==void 0?S:21*N,hangingBaseline:(R=I.hangingBaseline)!==null&&R!==void 0?R:72.80000305175781*N,ideographicBaseline:(_=I.ideographicBaseline)!==null&&_!==void 0?_:-21*N,width:I.width,height:M}}_getContextFont(){return this.fontStyle()+SPACE+this.fontVariant()+SPACE+(this.fontSize()+PX_SPACE)+normalizeFontFamily(this.fontFamily())}_addTextLine(t){this.align()===JUSTIFY&&(t=t.trim());const o=this._getTextWidth(t);return this.textArr.push({text:t,width:o,lastInParagraph:!1})}_getTextWidth(t){const n=this.letterSpacing(),o=t.length;return getDummyContext().measureText(t).width+n*o}_setTextData(){let t=this.text().split(`
`),n=+this.fontSize(),o=0,u=this.lineHeight()*n,d=this.attrs.width,f=this.attrs.height,g=d!==AUTO&&d!==void 0,v=f!==AUTO&&f!==void 0,w=this.padding(),S=d-w*2,R=f-w*2,_=0,F=this.wrap(),M=F!==NONE,I=F!==CHAR&&M,N=this.ellipsis();this.textArr=[],getDummyContext().font=this._getContextFont();const B=N?this._getTextWidth(ELLIPSIS):0;for(let H=0,U=t.length;H<U;++H){let $=t[H],z=this._getTextWidth($);if(g&&z>S)for(;$.length>0;){let j=0,J=stringToArray($).length,ie="",se=0;for(;j<J;){const fe=j+J>>>1,de=stringToArray($),Ce=de.slice(0,fe+1).join(""),be=this._getTextWidth(Ce);(N&&v&&_+u>R?be+B:be)<=S?(j=fe+1,ie=Ce,se=be):J=fe}if(ie){if(I){const Ce=stringToArray($),be=stringToArray(ie),xe=Ce[be.length],Ee=xe===SPACE||xe===DASH;let ae;if(Ee&&se<=S)ae=be.length;else{const oe=be.lastIndexOf(SPACE),ee=be.lastIndexOf(DASH);ae=Math.max(oe,ee)+1}ae>0&&(j=ae,ie=Ce.slice(0,j).join(""),se=this._getTextWidth(ie))}if(ie=ie.trimRight(),this._addTextLine(ie),o=Math.max(o,se),_+=u,this._shouldHandleEllipsis(_)){this._tryToAddEllipsisToLastLine();break}if($=stringToArray($).slice(j).join("").trimLeft(),$.length>0&&(z=this._getTextWidth($),z<=S)){this._addTextLine($),_+=u,o=Math.max(o,z);break}}else break}else this._addTextLine($),_+=u,o=Math.max(o,z),this._shouldHandleEllipsis(_)&&H<U-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),v&&_+u>R)break}this.textHeight=n,this.textWidth=o}_shouldHandleEllipsis(t){const n=+this.fontSize(),o=this.lineHeight()*n,u=this.attrs.height,d=u!==AUTO&&u!==void 0,f=this.padding(),g=u-f*2;return!(this.wrap()!==NONE)||d&&t+o>g}_tryToAddEllipsisToLastLine(){const t=this.attrs.width,n=t!==AUTO&&t!==void 0,o=this.padding(),u=t-o*2,d=this.ellipsis(),f=this.textArr[this.textArr.length-1];!f||!d||(n&&(this._getTextWidth(f.text+ELLIPSIS)<u||(f.text=f.text.slice(0,f.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(f.text+ELLIPSIS))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const t=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,n=this.hasShadow();return t&&n?!0:super._useBufferCanvas()}};Text$1.prototype._fillFunc=_fillFunc$1;Text$1.prototype._strokeFunc=_strokeFunc$1;Text$1.prototype.className=TEXT_UPPER;Text$1.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];_registerNode(Text$1);Factory.overWriteSetter(Text$1,"width",getNumberOrAutoValidator());Factory.overWriteSetter(Text$1,"height",getNumberOrAutoValidator());Factory.addGetterSetter(Text$1,"direction",INHERIT);Factory.addGetterSetter(Text$1,"fontFamily","Arial");Factory.addGetterSetter(Text$1,"fontSize",12,getNumberValidator());Factory.addGetterSetter(Text$1,"fontStyle",NORMAL$1);Factory.addGetterSetter(Text$1,"fontVariant",NORMAL$1);Factory.addGetterSetter(Text$1,"padding",0,getNumberValidator());Factory.addGetterSetter(Text$1,"align",LEFT);Factory.addGetterSetter(Text$1,"verticalAlign",TOP);Factory.addGetterSetter(Text$1,"lineHeight",1,getNumberValidator());Factory.addGetterSetter(Text$1,"wrap",WORD);Factory.addGetterSetter(Text$1,"ellipsis",!1,getBooleanValidator());Factory.addGetterSetter(Text$1,"letterSpacing",0,getNumberValidator());Factory.addGetterSetter(Text$1,"text","",getStringValidator());Factory.addGetterSetter(Text$1,"textDecoration","");Factory.addGetterSetter(Text$1,"underlineOffset",void 0,getNumberValidator());Factory.addGetterSetter(Text$1,"charRenderFunc",void 0);const EMPTY_STRING="",NORMAL="normal";function _fillFunc(e){e.fillText(this.partialText,0,0)}function _strokeFunc(e){e.strokeText(this.partialText,0,0)}class TextPath extends Shape{constructor(t){super(t),this.dummyCanvas=Util.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return Path.getPathLength(this.dataArray)}_getPointAtLength(t){if(!this.attrs.data)return null;const n=this.pathLength;return t>n?null:Path.getPointAtLengthOfDataArray(t,this.dataArray)}_readDataAttribute(){this.dataArray=Path.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();const n=this.textDecoration(),o=this.fill(),u=this.fontSize(),d=this.glyphInfo,f=n.indexOf("underline")!==-1,g=n.indexOf("line-through")!==-1;f&&t.beginPath();for(let v=0;v<d.length;v++){t.save();const w=d[v].p0;t.translate(w.x,w.y),t.rotate(d[v].rotation),this.partialText=d[v].text,t.fillStrokeShape(this),f&&(v===0&&t.moveTo(0,u/2+1),t.lineTo(d[v].width,u/2+1)),t.restore()}if(f&&(t.strokeStyle=o,t.lineWidth=u/20,t.stroke()),g){t.beginPath();for(let v=0;v<d.length;v++){t.save();const w=d[v].p0;t.translate(w.x,w.y),t.rotate(d[v].rotation),v===0&&t.moveTo(0,0),t.lineTo(d[v].width,0),t.restore()}t.strokeStyle=o,t.lineWidth=u/20,t.stroke()}t.restore()}_hitFunc(t){t.beginPath();const n=this.glyphInfo;if(n.length>=1){const o=n[0].p0;t.moveTo(o.x,o.y)}for(let o=0;o<n.length;o++){const u=n[o].p1;t.lineTo(u.x,u.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return Text$1.prototype.setText.call(this,t)}_getContextFont(){return Text$1.prototype._getContextFont.call(this)}_getTextSize(t){const o=this.dummyCanvas.getContext("2d");o.save(),o.font=this._getContextFont();const u=o.measureText(t);return o.restore(),{width:u.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const t=stringToArray(this.text()),n=[];let o=0;for(let R=0;R<t.length;R++)n.push({char:t[R],width:this._getTextSize(t[R]).width}),o+=n[R].width;const{height:u}=this._getTextSize(this.attrs.text);if(this.textWidth=o,this.textHeight=u,this.glyphInfo=[],!this.attrs.data)return null;const d=this.letterSpacing(),f=this.align(),g=this.kerningFunc(),v=Math.max(this.textWidth+((this.attrs.text||"").length-1)*d,0);let w=0;f==="center"&&(w=Math.max(0,this.pathLength/2-v/2)),f==="right"&&(w=Math.max(0,this.pathLength-v));let S=w;for(let R=0;R<n.length;R++){const _=this._getPointAtLength(S);if(!_)return;const F=n[R].char;let M=n[R].width+d;if(F===" "&&f==="justify"){const $=this.text().split(" ").length-1;M+=(this.pathLength-v)/$}const I=this._getPointAtLength(S+M);if(!I)return;const N=Path.getLineLength(_.x,_.y,I.x,I.y);let B=0;if(g)try{B=g(n[R-1].char,F)*this.fontSize()}catch{B=0}_.x+=B,I.x+=B,this.textWidth+=B;const H=Path.getPointOnLine(B+N/2,_.x,_.y,I.x,I.y),U=Math.atan2(I.y-_.y,I.x-_.x);this.glyphInfo.push({transposeX:H.x,transposeY:H.y,text:t[R],rotation:U,p0:_,p1:I,width:N}),S+=M}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const t=[];this.glyphInfo.forEach(function(w){t.push(w.p0.x),t.push(w.p0.y),t.push(w.p1.x),t.push(w.p1.y)});let n=t[0]||0,o=t[0]||0,u=t[1]||0,d=t[1]||0,f,g;for(let w=0;w<t.length/2;w++)f=t[w*2],g=t[w*2+1],n=Math.min(n,f),o=Math.max(o,f),u=Math.min(u,g),d=Math.max(d,g);const v=this.fontSize();return{x:n-v/2,y:u-v/2,width:o-n+v,height:d-u+v}}destroy(){return Util.releaseCanvas(this.dummyCanvas),super.destroy()}}TextPath.prototype._fillFunc=_fillFunc;TextPath.prototype._strokeFunc=_strokeFunc;TextPath.prototype._fillFuncHit=_fillFunc;TextPath.prototype._strokeFuncHit=_strokeFunc;TextPath.prototype.className="TextPath";TextPath.prototype._attrsAffectingSize=["text","fontSize","data"];_registerNode(TextPath);Factory.addGetterSetter(TextPath,"data");Factory.addGetterSetter(TextPath,"fontFamily","Arial");Factory.addGetterSetter(TextPath,"fontSize",12,getNumberValidator());Factory.addGetterSetter(TextPath,"fontStyle",NORMAL);Factory.addGetterSetter(TextPath,"align","left");Factory.addGetterSetter(TextPath,"letterSpacing",0,getNumberValidator());Factory.addGetterSetter(TextPath,"textBaseline","middle");Factory.addGetterSetter(TextPath,"fontVariant",NORMAL);Factory.addGetterSetter(TextPath,"text",EMPTY_STRING);Factory.addGetterSetter(TextPath,"textDecoration","");Factory.addGetterSetter(TextPath,"kerningFunc",void 0);const EVENTS_NAME="tr-konva",ATTR_CHANGE_LIST=["resizeEnabledChange","rotateAnchorOffsetChange","rotateAnchorAngleChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(e=>e+`.${EVENTS_NAME}`).join(" "),NODES_RECT="nodesRect",TRANSFORM_CHANGE_STR=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],ANGLES={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},TOUCH_DEVICE="ontouchstart"in Konva$1._global;function getCursor(e,t,n){if(e==="rotater")return n;t+=Util.degToRad(ANGLES[e]||0);const o=(Util.radToDeg(t)%360+360)%360;return Util._inRange(o,315+22.5,360)||Util._inRange(o,0,22.5)?"ns-resize":Util._inRange(o,45-22.5,45+22.5)?"nesw-resize":Util._inRange(o,90-22.5,90+22.5)?"ew-resize":Util._inRange(o,135-22.5,135+22.5)?"nwse-resize":Util._inRange(o,180-22.5,180+22.5)?"ns-resize":Util._inRange(o,225-22.5,225+22.5)?"nesw-resize":Util._inRange(o,270-22.5,270+22.5)?"ew-resize":Util._inRange(o,315-22.5,315+22.5)?"nwse-resize":(Util.error("Transformer has unknown angle for cursor detection: "+o),"pointer")}const ANCHORS_NAMES=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function getCenter(e){return{x:e.x+e.width/2*Math.cos(e.rotation)+e.height/2*Math.sin(-e.rotation),y:e.y+e.height/2*Math.cos(e.rotation)+e.width/2*Math.sin(e.rotation)}}function rotateAroundPoint(e,t,n){const o=n.x+(e.x-n.x)*Math.cos(t)-(e.y-n.y)*Math.sin(t),u=n.y+(e.x-n.x)*Math.sin(t)+(e.y-n.y)*Math.cos(t);return{...e,rotation:e.rotation+t,x:o,y:u}}function rotateAroundCenter(e,t){const n=getCenter(e);return rotateAroundPoint(e,t,n)}function getSnap(e,t,n){let o=t;for(let u=0;u<e.length;u++){const d=Konva$1.getAngle(e[u]),f=Math.abs(d-t)%(Math.PI*2);Math.min(f,Math.PI*2-f)<n&&(o=d)}return o}let activeTransformersCount=0;class Transformer extends Group{constructor(t){super(t),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(ATTR_CHANGE_LIST,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return EVENTS_NAME+this._id}setNodes(t=[]){this._nodes&&this._nodes.length&&this.detach();const n=t.filter(u=>u.isAncestorOf(this)?(Util.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=t=n,t.length===1&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(u=>{const d=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(u._attrsAffectingSize.length){const f=u._attrsAffectingSize.map(g=>g+"Change."+this._getEventNamespace()).join(" ");u.on(f,d)}u.on(TRANSFORM_CHANGE_STR.map(f=>f+`.${this._getEventNamespace()}`).join(" "),d),u.on(`absoluteTransformChange.${this._getEventNamespace()}`,d),this._proxyDrag(u)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(t){let n;t.on(`dragstart.${this._getEventNamespace()}`,o=>{n=t.getAbsolutePosition(),!this.isDragging()&&t!==this.findOne(".back")&&this.startDrag(o,!1)}),t.on(`dragmove.${this._getEventNamespace()}`,o=>{if(!n)return;const u=t.getAbsolutePosition(),d=u.x-n.x,f=u.y-n.y;this.nodes().forEach(g=>{if(g===t||g.isDragging())return;const v=g.getAbsolutePosition();g.setAbsolutePosition({x:v.x+d,y:v.y+f}),g.startDrag(o)}),n=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(NODES_RECT),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(NODES_RECT,this.__getNodeRect)}__getNodeShape(t,n=this.rotation(),o){const u=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),d=t.getAbsoluteScale(o),f=t.getAbsolutePosition(o),g=u.x*d.x-t.offsetX()*d.x,v=u.y*d.y-t.offsetY()*d.y,w=(Konva$1.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),S={x:f.x+g*Math.cos(w)+v*Math.sin(-w),y:f.y+v*Math.cos(w)+g*Math.sin(w),width:u.width*d.x,height:u.height*d.y,rotation:w};return rotateAroundPoint(S,-Konva$1.getAngle(n),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const n=[];this.nodes().map(w=>{const S=w.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),R=[{x:S.x,y:S.y},{x:S.x+S.width,y:S.y},{x:S.x+S.width,y:S.y+S.height},{x:S.x,y:S.y+S.height}],_=w.getAbsoluteTransform();R.forEach(function(F){const M=_.point(F);n.push(M)})});const o=new Transform;o.rotate(-Konva$1.getAngle(this.rotation()));let u=1/0,d=1/0,f=-1/0,g=-1/0;n.forEach(function(w){const S=o.point(w);u===void 0&&(u=f=S.x,d=g=S.y),u=Math.min(u,S.x),d=Math.min(d,S.y),f=Math.max(f,S.x),g=Math.max(g,S.y)}),o.invert();const v=o.point({x:u,y:d});return{x:v.x,y:v.y,width:f-u,height:g-d,rotation:Konva$1.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),ANCHORS_NAMES.forEach(t=>{this._createAnchor(t)}),this._createAnchor("rotater")}_createAnchor(t){const n=new Rect$1({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:TOUCH_DEVICE?10:"auto"}),o=this;n.on("mousedown touchstart",function(u){o._handleMouseDown(u)}),n.on("dragstart",u=>{n.stopDrag(),u.cancelBubble=!0}),n.on("dragend",u=>{u.cancelBubble=!0}),n.on("mouseenter",()=>{const u=Konva$1.getAngle(this.rotation()),d=this.rotateAnchorCursor(),f=getCursor(t,u,d);n.getStage().content&&(n.getStage().content.style.cursor=f),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){const t=new Shape({name:"back",width:0,height:0,sceneFunc(n,o){const u=o.getParent(),d=u.padding(),f=o.width(),g=o.height();if(n.beginPath(),n.rect(-d,-d,f+d*2,g+d*2),u.rotateEnabled()&&u.rotateLineVisible()){const v=u.rotateAnchorAngle(),w=u.rotateAnchorOffset(),S=Util.degToRad(v),R=Math.sin(S),_=-Math.cos(S),F=f/2,M=g/2;let I=1/0;_<0?I=Math.min(I,-M/_):_>0&&(I=Math.min(I,(g-M)/_)),R<0?I=Math.min(I,-F/R):R>0&&(I=Math.min(I,(f-F)/R));const N=F+R*I,B=M+_*I,H=Util._sign(g),U=N+R*w*H,$=B+_*w*H;n.moveTo(N,B),n.lineTo(U,$)}n.fillStrokeShape(o)},hitFunc:(n,o)=>{if(!this.shouldOverdrawWholeArea())return;const u=this.padding();n.beginPath(),n.rect(-u,-u,o.width()+u*2,o.height()+u*2),n.fillStrokeShape(o)}});this.add(t),this._proxyDrag(t),t.on("dragstart",n=>{n.cancelBubble=!0}),t.on("dragmove",n=>{n.cancelBubble=!0}),t.on("dragend",n=>{n.cancelBubble=!0}),this.on("dragmove",n=>{this.update()})}_handleMouseDown(t){if(this._transforming)return;this._movingAnchorName=t.target.name().split(" ")[0];const n=this._getNodeRect(),o=n.width,u=n.height,d=Math.sqrt(Math.pow(o,2)+Math.pow(u,2));this.sin=Math.abs(u/d),this.cos=Math.abs(o/d),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const f=t.target.getAbsolutePosition(),g=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:g.x-f.x,y:g.y-f.y},activeTransformersCount++,this._fire("transformstart",{evt:t.evt,target:this.getNode()}),this._nodes.forEach(v=>{v._fire("transformstart",{evt:t.evt,target:v})})}_handleMouseMove(t){let n,o,u;const d=this.findOne("."+this._movingAnchorName),f=d.getStage();f.setPointersPositions(t);const g=f.getPointerPosition();let v={x:g.x-this._anchorDragOffset.x,y:g.y-this._anchorDragOffset.y};const w=d.getAbsolutePosition();this.anchorDragBoundFunc()&&(v=this.anchorDragBoundFunc()(w,v,t)),d.setAbsolutePosition(v);const S=d.getAbsolutePosition();if(w.x===S.x&&w.y===S.y)return;if(this._movingAnchorName==="rotater"){const H=this._getNodeRect();n=d.x()-H.width/2,o=-d.y()+H.height/2;const U=Konva$1.getAngle(this.rotateAnchorAngle());let $=Math.atan2(-o,n)+Math.PI/2-U;H.height<0&&($-=Math.PI);const j=Konva$1.getAngle(this.rotation())+$,J=Konva$1.getAngle(this.rotationSnapTolerance()),se=getSnap(this.rotationSnaps(),j,J)-H.rotation,fe=rotateAroundCenter(H,se);this._fitNodesInto(fe,t);return}const R=this.shiftBehavior();let _;R==="inverted"?_=this.keepRatio()&&!t.shiftKey:R==="none"?_=this.keepRatio():_=this.keepRatio()||t.shiftKey;let F=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(_){const H=F?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};u=Math.sqrt(Math.pow(H.x-d.x(),2)+Math.pow(H.y-d.y(),2));const U=this.findOne(".top-left").x()>H.x?-1:1,$=this.findOne(".top-left").y()>H.y?-1:1;n=u*this.cos*U,o=u*this.sin*$,this.findOne(".top-left").x(H.x-n),this.findOne(".top-left").y(H.y-o)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(d.y());else if(this._movingAnchorName==="top-right"){if(_){const H=F?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};u=Math.sqrt(Math.pow(d.x()-H.x,2)+Math.pow(H.y-d.y(),2));const U=this.findOne(".top-right").x()<H.x?-1:1,$=this.findOne(".top-right").y()>H.y?-1:1;n=u*this.cos*U,o=u*this.sin*$,this.findOne(".top-right").x(H.x+n),this.findOne(".top-right").y(H.y-o)}var M=d.position();this.findOne(".top-left").y(M.y),this.findOne(".bottom-right").x(M.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(d.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(d.x());else if(this._movingAnchorName==="bottom-left"){if(_){const H=F?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};u=Math.sqrt(Math.pow(H.x-d.x(),2)+Math.pow(d.y()-H.y,2));const U=H.x<d.x()?-1:1,$=d.y()<H.y?-1:1;n=u*this.cos*U,o=u*this.sin*$,d.x(H.x-n),d.y(H.y+o)}M=d.position(),this.findOne(".top-left").x(M.x),this.findOne(".bottom-right").y(M.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(d.y());else if(this._movingAnchorName==="bottom-right"){if(_){const H=F?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};u=Math.sqrt(Math.pow(d.x()-H.x,2)+Math.pow(d.y()-H.y,2));const U=this.findOne(".bottom-right").x()<H.x?-1:1,$=this.findOne(".bottom-right").y()<H.y?-1:1;n=u*this.cos*U,o=u*this.sin*$,this.findOne(".bottom-right").x(H.x+n),this.findOne(".bottom-right").y(H.y+o)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(F=this.centeredScaling()||t.altKey,F){const H=this.findOne(".top-left"),U=this.findOne(".bottom-right"),$=H.x(),z=H.y(),j=this.getWidth()-U.x(),J=this.getHeight()-U.y();U.move({x:-$,y:-z}),H.move({x:j,y:J})}const I=this.findOne(".top-left").getAbsolutePosition();n=I.x,o=I.y;const N=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),B=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:o,width:N,height:B,rotation:Konva$1.getAngle(this.rotation())},t)}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){var n;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const o=this.getNode();activeTransformersCount--,this._fire("transformend",{evt:t,target:o}),(n=this.getLayer())===null||n===void 0||n.batchDraw(),o&&this._nodes.forEach(u=>{var d;u._fire("transformend",{evt:t,target:u}),(d=u.getLayer())===null||d===void 0||d.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(t,n){const o=this._getNodeRect(),u=1;if(Util._inRange(t.width,-this.padding()*2-u,u)){this.update();return}if(Util._inRange(t.height,-this.padding()*2-u,u)){this.update();return}const d=new Transform;if(d.rotate(Konva$1.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const _=d.point({x:-this.padding()*2,y:0});t.x+=_.x,t.y+=_.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=_.x,this._anchorDragOffset.y-=_.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const _=d.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=_.x,this._anchorDragOffset.y-=_.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const _=d.point({x:0,y:-this.padding()*2});t.x+=_.x,t.y+=_.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=_.x,this._anchorDragOffset.y-=_.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const _=d.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=_.x,this._anchorDragOffset.y-=_.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){const _=this.boundBoxFunc()(o,t);_?t=_:Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const f=1e7,g=new Transform;g.translate(o.x,o.y),g.rotate(o.rotation),g.scale(o.width/f,o.height/f);const v=new Transform,w=t.width/f,S=t.height/f;this.flipEnabled()===!1?(v.translate(t.x,t.y),v.rotate(t.rotation),v.translate(t.width<0?t.width:0,t.height<0?t.height:0),v.scale(Math.abs(w),Math.abs(S))):(v.translate(t.x,t.y),v.rotate(t.rotation),v.scale(w,S));const R=v.multiply(g.invert());this._nodes.forEach(_=>{var F;if(!_.getStage())return;const M=_.getParent().getAbsoluteTransform(),I=_.getTransform().copy();I.translate(_.offsetX(),_.offsetY());const N=new Transform;N.multiply(M.copy().invert()).multiply(R).multiply(M).multiply(I);const B=N.decompose();_.setAttrs(B),(F=_.getLayer())===null||F===void 0||F.batchDraw()}),this.rotation(Util._getRotation(t.rotation)),this._nodes.forEach(_=>{this._fire("transform",{evt:n,target:_}),_._fire("transform",{evt:n,target:_})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,n){this.findOne(t).setAttrs(n)}update(){var t;const n=this._getNodeRect();this.rotation(Util._getRotation(n.rotation));const o=n.width,u=n.height,d=this.enabledAnchors(),f=this.resizeEnabled(),g=this.padding(),v=this.anchorSize(),w=this.find("._anchor");w.forEach(j=>{j.setAttrs({width:v,height:v,offsetX:v/2,offsetY:v/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:v/2+g,offsetY:v/2+g,visible:f&&d.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:o/2,y:0,offsetY:v/2+g,visible:f&&d.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:o,y:0,offsetX:v/2-g,offsetY:v/2+g,visible:f&&d.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:u/2,offsetX:v/2+g,visible:f&&d.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:o,y:u/2,offsetX:v/2-g,visible:f&&d.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:u,offsetX:v/2+g,offsetY:v/2-g,visible:f&&d.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:o/2,y:u,offsetY:v/2-g,visible:f&&d.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:o,y:u,offsetX:v/2-g,offsetY:v/2-g,visible:f&&d.indexOf("bottom-right")>=0});const S=this.rotateAnchorAngle(),R=this.rotateAnchorOffset(),_=Util.degToRad(S),F=Math.sin(_),M=-Math.cos(_),I=o/2,N=u/2;let B=1/0;M<0?B=Math.min(B,-N/M):M>0&&(B=Math.min(B,(u-N)/M)),F<0?B=Math.min(B,-I/F):F>0&&(B=Math.min(B,(o-I)/F));const H=I+F*B,U=N+M*B,$=Util._sign(u);this._batchChangeChild(".rotater",{x:H+F*R*$,y:U+M*R*$-g*M,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:o,height:u,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(j=>j.draggable()),x:0,y:0});const z=this.anchorStyleFunc();z&&w.forEach(j=>{z(j)}),(t=this.getLayer())===null||t===void 0||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return Node$1.prototype.toObject.call(this)}clone(t){return Node$1.prototype.clone.call(this,t)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}Transformer.isTransforming=()=>activeTransformersCount>0;function validateAnchors(e){return e instanceof Array||Util.warn("enabledAnchors value should be an array"),e instanceof Array&&e.forEach(function(t){ANCHORS_NAMES.indexOf(t)===-1&&Util.warn("Unknown anchor name: "+t+". Available names are: "+ANCHORS_NAMES.join(", "))}),e||[]}Transformer.prototype.className="Transformer";_registerNode(Transformer);Factory.addGetterSetter(Transformer,"enabledAnchors",ANCHORS_NAMES,validateAnchors);Factory.addGetterSetter(Transformer,"flipEnabled",!0,getBooleanValidator());Factory.addGetterSetter(Transformer,"resizeEnabled",!0);Factory.addGetterSetter(Transformer,"anchorSize",10,getNumberValidator());Factory.addGetterSetter(Transformer,"rotateEnabled",!0);Factory.addGetterSetter(Transformer,"rotateLineVisible",!0);Factory.addGetterSetter(Transformer,"rotationSnaps",[]);Factory.addGetterSetter(Transformer,"rotateAnchorOffset",50,getNumberValidator());Factory.addGetterSetter(Transformer,"rotateAnchorAngle",0,getNumberValidator());Factory.addGetterSetter(Transformer,"rotateAnchorCursor","crosshair");Factory.addGetterSetter(Transformer,"rotationSnapTolerance",5,getNumberValidator());Factory.addGetterSetter(Transformer,"borderEnabled",!0);Factory.addGetterSetter(Transformer,"anchorStroke","rgb(0, 161, 255)");Factory.addGetterSetter(Transformer,"anchorStrokeWidth",1,getNumberValidator());Factory.addGetterSetter(Transformer,"anchorFill","white");Factory.addGetterSetter(Transformer,"anchorCornerRadius",0,getNumberValidator());Factory.addGetterSetter(Transformer,"borderStroke","rgb(0, 161, 255)");Factory.addGetterSetter(Transformer,"borderStrokeWidth",1,getNumberValidator());Factory.addGetterSetter(Transformer,"borderDash");Factory.addGetterSetter(Transformer,"keepRatio",!0);Factory.addGetterSetter(Transformer,"shiftBehavior","default");Factory.addGetterSetter(Transformer,"centeredScaling",!1);Factory.addGetterSetter(Transformer,"ignoreStroke",!1);Factory.addGetterSetter(Transformer,"padding",0,getNumberValidator());Factory.addGetterSetter(Transformer,"nodes");Factory.addGetterSetter(Transformer,"node");Factory.addGetterSetter(Transformer,"boundBoxFunc");Factory.addGetterSetter(Transformer,"anchorDragBoundFunc");Factory.addGetterSetter(Transformer,"anchorStyleFunc");Factory.addGetterSetter(Transformer,"shouldOverdrawWholeArea",!1);Factory.addGetterSetter(Transformer,"useSingleNodeRotation",!0);Factory.backCompat(Transformer,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class Wedge extends Shape{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,Konva$1.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}Wedge.prototype.className="Wedge";Wedge.prototype._centroid=!0;Wedge.prototype._attrsAffectingSize=["radius"];_registerNode(Wedge);Factory.addGetterSetter(Wedge,"radius",0,getNumberValidator());Factory.addGetterSetter(Wedge,"angle",0,getNumberValidator());Factory.addGetterSetter(Wedge,"clockwise",!1);Factory.backCompat(Wedge,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function BlurStack(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const mul_table=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],shg_table=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function filterGaussBlurRGBA(e,t){const n=e.data,o=e.width,u=e.height;let d,f,g,v,w,S,R,_,F,M,I,N,B,H,U,$,z,j,J,ie;const se=t+t+1,fe=o-1,de=u-1,Ce=t+1,be=Ce*(Ce+1)/2,xe=new BlurStack,Ee=mul_table[t],ae=shg_table[t];let oe=null,ee=xe,Z=null,Q=null;for(let K=1;K<se;K++)ee=ee.next=new BlurStack,K===Ce&&(oe=ee);ee.next=xe,g=f=0;for(let K=0;K<u;K++){N=B=H=U=v=w=S=R=0,_=Ce*($=n[f]),F=Ce*(z=n[f+1]),M=Ce*(j=n[f+2]),I=Ce*(J=n[f+3]),v+=be*$,w+=be*z,S+=be*j,R+=be*J,ee=xe;for(let ne=0;ne<Ce;ne++)ee.r=$,ee.g=z,ee.b=j,ee.a=J,ee=ee.next;for(let ne=1;ne<Ce;ne++)d=f+((fe<ne?fe:ne)<<2),v+=(ee.r=$=n[d])*(ie=Ce-ne),w+=(ee.g=z=n[d+1])*ie,S+=(ee.b=j=n[d+2])*ie,R+=(ee.a=J=n[d+3])*ie,N+=$,B+=z,H+=j,U+=J,ee=ee.next;Z=xe,Q=oe;for(let ne=0;ne<o;ne++)n[f+3]=J=R*Ee>>ae,J!==0?(J=255/J,n[f]=(v*Ee>>ae)*J,n[f+1]=(w*Ee>>ae)*J,n[f+2]=(S*Ee>>ae)*J):n[f]=n[f+1]=n[f+2]=0,v-=_,w-=F,S-=M,R-=I,_-=Z.r,F-=Z.g,M-=Z.b,I-=Z.a,d=g+((d=ne+t+1)<fe?d:fe)<<2,N+=Z.r=n[d],B+=Z.g=n[d+1],H+=Z.b=n[d+2],U+=Z.a=n[d+3],v+=N,w+=B,S+=H,R+=U,Z=Z.next,_+=$=Q.r,F+=z=Q.g,M+=j=Q.b,I+=J=Q.a,N-=$,B-=z,H-=j,U-=J,Q=Q.next,f+=4;g+=o}for(let K=0;K<o;K++){B=H=U=N=w=S=R=v=0,f=K<<2,_=Ce*($=n[f]),F=Ce*(z=n[f+1]),M=Ce*(j=n[f+2]),I=Ce*(J=n[f+3]),v+=be*$,w+=be*z,S+=be*j,R+=be*J,ee=xe;for(let ue=0;ue<Ce;ue++)ee.r=$,ee.g=z,ee.b=j,ee.a=J,ee=ee.next;let ne=o;for(let ue=1;ue<=t;ue++)f=ne+K<<2,v+=(ee.r=$=n[f])*(ie=Ce-ue),w+=(ee.g=z=n[f+1])*ie,S+=(ee.b=j=n[f+2])*ie,R+=(ee.a=J=n[f+3])*ie,N+=$,B+=z,H+=j,U+=J,ee=ee.next,ue<de&&(ne+=o);f=K,Z=xe,Q=oe;for(let ue=0;ue<u;ue++)d=f<<2,n[d+3]=J=R*Ee>>ae,J>0?(J=255/J,n[d]=(v*Ee>>ae)*J,n[d+1]=(w*Ee>>ae)*J,n[d+2]=(S*Ee>>ae)*J):n[d]=n[d+1]=n[d+2]=0,v-=_,w-=F,S-=M,R-=I,_-=Z.r,F-=Z.g,M-=Z.b,I-=Z.a,d=K+((d=ue+Ce)<de?d:de)*o<<2,v+=N+=Z.r=n[d],w+=B+=Z.g=n[d+1],S+=H+=Z.b=n[d+2],R+=U+=Z.a=n[d+3],Z=Z.next,_+=$=Q.r,F+=z=Q.g,M+=j=Q.b,I+=J=Q.a,N-=$,B-=z,H-=j,U-=J,Q=Q.next,f+=o}}const Blur=function(t){const n=Math.round(this.blurRadius());n>0&&filterGaussBlurRGBA(t,n)};Factory.addGetterSetter(Node$1,"blurRadius",0,getNumberValidator(),Factory.afterSetFilter);const Brighten=function(e){const t=this.brightness()*255,n=e.data,o=n.length;for(let u=0;u<o;u+=4)n[u]+=t,n[u+1]+=t,n[u+2]+=t};Factory.addGetterSetter(Node$1,"brightness",0,getNumberValidator(),Factory.afterSetFilter);const Brightness=function(e){const t=this.brightness(),n=e.data,o=n.length;for(let u=0;u<o;u+=4)n[u]=Math.min(255,n[u]*t),n[u+1]=Math.min(255,n[u+1]*t),n[u+2]=Math.min(255,n[u+2]*t)},Contrast=function(e){const t=Math.pow((this.contrast()+100)/100,2),n=e.data,o=n.length;let u=150,d=150,f=150;for(let g=0;g<o;g+=4)u=n[g],d=n[g+1],f=n[g+2],u/=255,u-=.5,u*=t,u+=.5,u*=255,d/=255,d-=.5,d*=t,d+=.5,d*=255,f/=255,f-=.5,f*=t,f+=.5,f*=255,u=u<0?0:u>255?255:u,d=d<0?0:d>255?255:d,f=f<0?0:f>255?255:f,n[g]=u,n[g+1]=d,n[g+2]=f};Factory.addGetterSetter(Node$1,"contrast",0,getNumberValidator(),Factory.afterSetFilter);const Emboss=function(e){var t,n,o,u,d,f,g,v,w;const S=e.data,R=e.width,_=e.height,F=Math.min(1,Math.max(0,(n=(t=this.embossStrength)===null||t===void 0?void 0:t.call(this))!==null&&n!==void 0?n:.5)),M=Math.min(1,Math.max(0,(u=(o=this.embossWhiteLevel)===null||o===void 0?void 0:o.call(this))!==null&&u!==void 0?u:.5)),N=(g={"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0}[(f=(d=this.embossDirection)===null||d===void 0?void 0:d.call(this))!==null&&f!==void 0?f:"top-left"])!==null&&g!==void 0?g:315,B=!!((w=(v=this.embossBlend)===null||v===void 0?void 0:v.call(this))!==null&&w!==void 0&&w),H=F*10,U=M*255,$=N*Math.PI/180,z=Math.cos($),j=Math.sin($),J=128/1020*H,ie=new Uint8ClampedArray(S),se=new Float32Array(R*_);for(let xe=0,Ee=0;Ee<S.length;Ee+=4,xe++)se[xe]=.2126*ie[Ee]+.7152*ie[Ee+1]+.0722*ie[Ee+2];const fe=[-1,0,1,-2,0,2,-1,0,1],de=[-1,-2,-1,0,0,0,1,2,1],Ce=[-R-1,-R,-R+1,-1,0,1,R-1,R,R+1],be=xe=>xe<0?0:xe>255?255:xe;for(let xe=1;xe<_-1;xe++)for(let Ee=1;Ee<R-1;Ee++){const ae=xe*R+Ee;let oe=0,ee=0;oe+=se[ae+Ce[0]]*fe[0],ee+=se[ae+Ce[0]]*de[0],oe+=se[ae+Ce[1]]*fe[1],ee+=se[ae+Ce[1]]*de[1],oe+=se[ae+Ce[2]]*fe[2],ee+=se[ae+Ce[2]]*de[2],oe+=se[ae+Ce[3]]*fe[3],ee+=se[ae+Ce[3]]*de[3],oe+=se[ae+Ce[5]]*fe[5],ee+=se[ae+Ce[5]]*de[5],oe+=se[ae+Ce[6]]*fe[6],ee+=se[ae+Ce[6]]*de[6],oe+=se[ae+Ce[7]]*fe[7],ee+=se[ae+Ce[7]]*de[7],oe+=se[ae+Ce[8]]*fe[8],ee+=se[ae+Ce[8]]*de[8];const Z=z*oe+j*ee,Q=be(U+Z*J),K=ae*4;if(B){const ne=Q-U;S[K]=be(ie[K]+ne),S[K+1]=be(ie[K+1]+ne),S[K+2]=be(ie[K+2]+ne),S[K+3]=ie[K+3]}else S[K]=S[K+1]=S[K+2]=Q,S[K+3]=ie[K+3]}for(let xe=0;xe<R;xe++){let Ee=xe*4,ae=((_-1)*R+xe)*4;S[Ee]=ie[Ee],S[Ee+1]=ie[Ee+1],S[Ee+2]=ie[Ee+2],S[Ee+3]=ie[Ee+3],S[ae]=ie[ae],S[ae+1]=ie[ae+1],S[ae+2]=ie[ae+2],S[ae+3]=ie[ae+3]}for(let xe=1;xe<_-1;xe++){let Ee=xe*R*4,ae=(xe*R+(R-1))*4;S[Ee]=ie[Ee],S[Ee+1]=ie[Ee+1],S[Ee+2]=ie[Ee+2],S[Ee+3]=ie[Ee+3],S[ae]=ie[ae],S[ae+1]=ie[ae+1],S[ae+2]=ie[ae+2],S[ae+3]=ie[ae+3]}return e};Factory.addGetterSetter(Node$1,"embossStrength",.5,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"embossWhiteLevel",.5,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"embossDirection","top-left",void 0,Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"embossBlend",!1,void 0,Factory.afterSetFilter);function remap(e,t,n,o,u){const d=n-t,f=u-o;if(d===0)return o+f/2;if(f===0)return o;let g=(e-t)/d;return g=f*g+o,g}const Enhance=function(e){const t=e.data,n=t.length;let o=t[0],u=o,d,f=t[1],g=f,v,w=t[2],S=w,R;const _=this.enhance();if(_===0)return;for(let U=0;U<n;U+=4)d=t[U+0],d<o?o=d:d>u&&(u=d),v=t[U+1],v<f?f=v:v>g&&(g=v),R=t[U+2],R<w?w=R:R>S&&(S=R);u===o&&(u=255,o=0),g===f&&(g=255,f=0),S===w&&(S=255,w=0);let F,M,I,N,B,H;if(_>0)F=u+_*(255-u),M=o-_*(o-0),I=g+_*(255-g),N=f-_*(f-0),B=S+_*(255-S),H=w-_*(w-0);else{const U=(u+o)*.5;F=u+_*(u-U),M=o+_*(o-U);const $=(g+f)*.5;I=g+_*(g-$),N=f+_*(f-$);const z=(S+w)*.5;B=S+_*(S-z),H=w+_*(w-z)}for(let U=0;U<n;U+=4)t[U+0]=remap(t[U+0],o,u,M,F),t[U+1]=remap(t[U+1],f,g,N,I),t[U+2]=remap(t[U+2],w,S,H,B)};Factory.addGetterSetter(Node$1,"enhance",0,getNumberValidator(),Factory.afterSetFilter);const Grayscale=function(e){const t=e.data,n=t.length;for(let o=0;o<n;o+=4){const u=.34*t[o]+.5*t[o+1]+.16*t[o+2];t[o]=u,t[o+1]=u,t[o+2]=u}};Factory.addGetterSetter(Node$1,"hue",0,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"saturation",0,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"luminance",0,getNumberValidator(),Factory.afterSetFilter);const HSL=function(e){const t=e.data,n=t.length,o=1,u=Math.pow(2,this.saturation()),d=Math.abs(this.hue()+360)%360,f=this.luminance()*127,g=o*u*Math.cos(d*Math.PI/180),v=o*u*Math.sin(d*Math.PI/180),w=.299*o+.701*g+.167*v,S=.587*o-.587*g+.33*v,R=.114*o-.114*g-.497*v,_=.299*o-.299*g-.328*v,F=.587*o+.413*g+.035*v,M=.114*o-.114*g+.293*v,I=.299*o-.3*g+1.25*v,N=.587*o-.586*g-1.05*v,B=.114*o+.886*g-.2*v;let H,U,$,z;for(let j=0;j<n;j+=4)H=t[j+0],U=t[j+1],$=t[j+2],z=t[j+3],t[j+0]=w*H+S*U+R*$+f,t[j+1]=_*H+F*U+M*$+f,t[j+2]=I*H+N*U+B*$+f,t[j+3]=z},HSV=function(e){const t=e.data,n=t.length,o=Math.pow(2,this.value()),u=Math.pow(2,this.saturation()),d=Math.abs(this.hue()+360)%360,f=o*u*Math.cos(d*Math.PI/180),g=o*u*Math.sin(d*Math.PI/180),v=.299*o+.701*f+.167*g,w=.587*o-.587*f+.33*g,S=.114*o-.114*f-.497*g,R=.299*o-.299*f-.328*g,_=.587*o+.413*f+.035*g,F=.114*o-.114*f+.293*g,M=.299*o-.3*f+1.25*g,I=.587*o-.586*f-1.05*g,N=.114*o+.886*f-.2*g;for(let B=0;B<n;B+=4){const H=t[B+0],U=t[B+1],$=t[B+2],z=t[B+3];t[B+0]=v*H+w*U+S*$,t[B+1]=R*H+_*U+F*$,t[B+2]=M*H+I*U+N*$,t[B+3]=z}};Factory.addGetterSetter(Node$1,"hue",0,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"saturation",0,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"value",0,getNumberValidator(),Factory.afterSetFilter);const Invert=function(e){const t=e.data,n=t.length;for(let o=0;o<n;o+=4)t[o]=255-t[o],t[o+1]=255-t[o+1],t[o+2]=255-t[o+2]},ToPolar=function(e,t,n){const o=e.data,u=t.data,d=e.width,f=e.height,g=n.polarCenterX||d/2,v=n.polarCenterY||f/2;let w=Math.sqrt(g*g+v*v),S=d-g,R=f-v;const _=Math.sqrt(S*S+R*R);w=_>w?_:w;const F=f,M=d,I=360/M*Math.PI/180;for(let N=0;N<M;N+=1){const B=Math.sin(N*I),H=Math.cos(N*I);for(let U=0;U<F;U+=1){S=Math.floor(g+w*U/F*H),R=Math.floor(v+w*U/F*B);let $=(R*d+S)*4;const z=o[$+0],j=o[$+1],J=o[$+2],ie=o[$+3];$=(N+U*d)*4,u[$+0]=z,u[$+1]=j,u[$+2]=J,u[$+3]=ie}}},FromPolar=function(e,t,n){const o=e.data,u=t.data,d=e.width,f=e.height,g=n.polarCenterX||d/2,v=n.polarCenterY||f/2;let w=Math.sqrt(g*g+v*v),S=d-g,R=f-v;const _=Math.sqrt(S*S+R*R);w=_>w?_:w;const F=f,M=d,I=0;let N,B;for(S=0;S<d;S+=1)for(R=0;R<f;R+=1){const H=S-g,U=R-v,$=Math.sqrt(H*H+U*U)*F/w;let z=(Math.atan2(U,H)*180/Math.PI+360+I)%360;z=z*M/360,N=Math.floor(z),B=Math.floor($);let j=(B*d+N)*4;const J=o[j+0],ie=o[j+1],se=o[j+2],fe=o[j+3];j=(R*d+S)*4,u[j+0]=J,u[j+1]=ie,u[j+2]=se,u[j+3]=fe}},Kaleidoscope=function(e){const t=e.width,n=e.height;let o,u,d,f,g,v,w,S,R,_,F=Math.round(this.kaleidoscopePower());const M=Math.round(this.kaleidoscopeAngle()),I=Math.floor(t*(M%360)/360);if(F<1)return;const N=Util.createCanvasElement();N.width=t,N.height=n;const B=N.getContext("2d").getImageData(0,0,t,n);Util.releaseCanvas(N),ToPolar(e,B,{polarCenterX:t/2,polarCenterY:n/2});let H=t/Math.pow(2,F);for(;H<=8;)H=H*2,F-=1;H=Math.ceil(H);let U=H,$=0,z=U,j=1;for(I+H>t&&($=U,z=0,j=-1),u=0;u<n;u+=1)for(o=$;o!==z;o+=j)d=Math.round(o+I)%t,R=(t*u+d)*4,g=B.data[R+0],v=B.data[R+1],w=B.data[R+2],S=B.data[R+3],_=(t*u+o)*4,B.data[_+0]=g,B.data[_+1]=v,B.data[_+2]=w,B.data[_+3]=S;for(u=0;u<n;u+=1)for(U=Math.floor(H),f=0;f<F;f+=1){for(o=0;o<U+1;o+=1)R=(t*u+o)*4,g=B.data[R+0],v=B.data[R+1],w=B.data[R+2],S=B.data[R+3],_=(t*u+U*2-o-1)*4,B.data[_+0]=g,B.data[_+1]=v,B.data[_+2]=w,B.data[_+3]=S;U*=2}FromPolar(B,e,{})};Factory.addGetterSetter(Node$1,"kaleidoscopePower",2,getNumberValidator(),Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"kaleidoscopeAngle",0,getNumberValidator(),Factory.afterSetFilter);function pixelAt(e,t,n){let o=(n*e.width+t)*4;const u=[];return u.push(e.data[o++],e.data[o++],e.data[o++],e.data[o++]),u}function rgbDistance(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2))}function rgbMean(e){const t=[0,0,0];for(let n=0;n<e.length;n++)t[0]+=e[n][0],t[1]+=e[n][1],t[2]+=e[n][2];return t[0]/=e.length,t[1]/=e.length,t[2]/=e.length,t}function backgroundMask(e,t){const n=pixelAt(e,0,0),o=pixelAt(e,e.width-1,0),u=pixelAt(e,0,e.height-1),d=pixelAt(e,e.width-1,e.height-1),f=t||10;if(rgbDistance(n,o)<f&&rgbDistance(o,d)<f&&rgbDistance(d,u)<f&&rgbDistance(u,n)<f){const g=rgbMean([o,n,d,u]),v=[];for(let w=0;w<e.width*e.height;w++){const S=rgbDistance(g,[e.data[w*4],e.data[w*4+1],e.data[w*4+2]]);v[w]=S<f?0:255}return v}}function applyMask(e,t){for(let n=0;n<e.width*e.height;n++)e.data[4*n+3]=t[n]}function erodeMask(e,t,n){const o=[1,1,1,1,0,1,1,1,1],u=Math.round(Math.sqrt(o.length)),d=Math.floor(u/2),f=[];for(let g=0;g<n;g++)for(let v=0;v<t;v++){const w=g*t+v;let S=0;for(let R=0;R<u;R++)for(let _=0;_<u;_++){const F=g+R-d,M=v+_-d;if(F>=0&&F<n&&M>=0&&M<t){const I=F*t+M,N=o[R*u+_];S+=e[I]*N}}f[w]=S===2040?255:0}return f}function dilateMask(e,t,n){const o=[1,1,1,1,1,1,1,1,1],u=Math.round(Math.sqrt(o.length)),d=Math.floor(u/2),f=[];for(let g=0;g<n;g++)for(let v=0;v<t;v++){const w=g*t+v;let S=0;for(let R=0;R<u;R++)for(let _=0;_<u;_++){const F=g+R-d,M=v+_-d;if(F>=0&&F<n&&M>=0&&M<t){const I=F*t+M,N=o[R*u+_];S+=e[I]*N}}f[w]=S>=1020?255:0}return f}function smoothEdgeMask(e,t,n){const o=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],u=Math.round(Math.sqrt(o.length)),d=Math.floor(u/2),f=[];for(let g=0;g<n;g++)for(let v=0;v<t;v++){const w=g*t+v;let S=0;for(let R=0;R<u;R++)for(let _=0;_<u;_++){const F=g+R-d,M=v+_-d;if(F>=0&&F<n&&M>=0&&M<t){const I=F*t+M,N=o[R*u+_];S+=e[I]*N}}f[w]=S}return f}const Mask=function(e){const t=this.threshold();let n=backgroundMask(e,t);return n&&(n=erodeMask(n,e.width,e.height),n=dilateMask(n,e.width,e.height),n=smoothEdgeMask(n,e.width,e.height),applyMask(e,n)),e};Factory.addGetterSetter(Node$1,"threshold",0,getNumberValidator(),Factory.afterSetFilter);const Noise=function(e){const t=this.noise()*255,n=e.data,o=n.length,u=t/2;for(let d=0;d<o;d+=4)n[d+0]+=u-2*u*Math.random(),n[d+1]+=u-2*u*Math.random(),n[d+2]+=u-2*u*Math.random()};Factory.addGetterSetter(Node$1,"noise",.2,getNumberValidator(),Factory.afterSetFilter);const Pixelate=function(e){let t=Math.ceil(this.pixelSize()),n=e.width,o=e.height,u=Math.ceil(n/t),d=Math.ceil(o/t),f=e.data;if(t<=0){Util.error("pixelSize value can not be <= 0");return}for(let g=0;g<u;g+=1)for(let v=0;v<d;v+=1){let w=0,S=0,R=0,_=0;const F=g*t,M=F+t,I=v*t,N=I+t;let B=0;for(let H=F;H<M;H+=1)if(!(H>=n))for(let U=I;U<N;U+=1){if(U>=o)continue;const $=(n*U+H)*4;w+=f[$+0],S+=f[$+1],R+=f[$+2],_+=f[$+3],B+=1}w=w/B,S=S/B,R=R/B,_=_/B;for(let H=F;H<M;H+=1)if(!(H>=n))for(let U=I;U<N;U+=1){if(U>=o)continue;const $=(n*U+H)*4;f[$+0]=w,f[$+1]=S,f[$+2]=R,f[$+3]=_}}};Factory.addGetterSetter(Node$1,"pixelSize",8,getNumberValidator(),Factory.afterSetFilter);const Posterize=function(e){const t=Math.round(this.levels()*254)+1,n=e.data,o=n.length,u=255/t;for(let d=0;d<o;d+=1)n[d]=Math.floor(n[d]/u)*u};Factory.addGetterSetter(Node$1,"levels",.5,getNumberValidator(),Factory.afterSetFilter);const RGB=function(e){const t=e.data,n=t.length,o=this.red(),u=this.green(),d=this.blue();for(let f=0;f<n;f+=4){const g=(.34*t[f]+.5*t[f+1]+.16*t[f+2])/255;t[f]=g*o,t[f+1]=g*u,t[f+2]=g*d,t[f+3]=t[f+3]}};Factory.addGetterSetter(Node$1,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});Factory.addGetterSetter(Node$1,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});Factory.addGetterSetter(Node$1,"blue",0,RGBComponent,Factory.afterSetFilter);const RGBA=function(e){const t=e.data,n=t.length,o=this.red(),u=this.green(),d=this.blue(),f=this.alpha();for(let g=0;g<n;g+=4){const v=1-f;t[g]=o*f+t[g]*v,t[g+1]=u*f+t[g+1]*v,t[g+2]=d*f+t[g+2]*v}};Factory.addGetterSetter(Node$1,"red",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});Factory.addGetterSetter(Node$1,"green",0,function(e){return this._filterUpToDate=!1,e>255?255:e<0?0:Math.round(e)});Factory.addGetterSetter(Node$1,"blue",0,RGBComponent,Factory.afterSetFilter);Factory.addGetterSetter(Node$1,"alpha",1,function(e){return this._filterUpToDate=!1,e>1?1:e<0?0:e});const Sepia=function(e){const t=e.data,n=t.length;for(let o=0;o<n;o+=4){const u=t[o+0],d=t[o+1],f=t[o+2];t[o+0]=Math.min(255,u*.393+d*.769+f*.189),t[o+1]=Math.min(255,u*.349+d*.686+f*.168),t[o+2]=Math.min(255,u*.272+d*.534+f*.131)}},Solarize=function(e){const n=e.data;for(let o=0;o<n.length;o+=4){const u=n[o],d=n[o+1],f=n[o+2];.2126*u+.7152*d+.0722*f>=128&&(n[o]=255-u,n[o+1]=255-d,n[o+2]=255-f)}return e},Threshold=function(e){const t=this.threshold()*255,n=e.data,o=n.length;for(let u=0;u<o;u+=1)n[u]=n[u]<t?0:255};Factory.addGetterSetter(Node$1,"threshold",.5,getNumberValidator(),Factory.afterSetFilter);Konva.Util._assign(Konva,{Arc,Arrow,Circle:Circle$1,Ellipse,Image:Image$2,Label,Tag,Line:Line$1,Path,Rect:Rect$1,RegularPolygon,Ring,Sprite,Star,Text:Text$1,TextPath,Transformer,Wedge,Filters:{Blur,Brightness,Brighten,Contrast,Emboss,Enhance,Grayscale,HSL,HSV,Invert,Kaleidoscope,Mask,Noise,Pixelate,Posterize,RGB,RGBA,Sepia,Solarize,Threshold}});var reactReconciler={exports:{}},reactReconciler_production={exports:{}};var hasRequiredReactReconciler_production;function requireReactReconciler_production(){return hasRequiredReactReconciler_production||(hasRequiredReactReconciler_production=1,(function(e){e.exports=function(t){function n(A,T,L,G){return new du(A,T,L,G)}function o(){}function u(A){var T="https://react.dev/errors/"+A;if(1<arguments.length){T+="?args[]="+encodeURIComponent(arguments[1]);for(var L=2;L<arguments.length;L++)T+="&args[]="+encodeURIComponent(arguments[L])}return"Minified React error #"+A+"; visit "+T+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(A){var T=A,L=A;if(A.alternate)for(;T.return;)T=T.return;else{A=T;do T=A,(T.flags&4098)!==0&&(L=T.return),A=T.return;while(A)}return T.tag===3?L:null}function f(A){if(d(A)!==A)throw Error(u(188))}function g(A){var T=A.alternate;if(!T){if(T=d(A),T===null)throw Error(u(188));return T!==A?null:A}for(var L=A,G=T;;){var q=L.return;if(q===null)break;var Y=q.alternate;if(Y===null){if(G=q.return,G!==null){L=G;continue}break}if(q.child===Y.child){for(Y=q.child;Y;){if(Y===L)return f(q),A;if(Y===G)return f(q),T;Y=Y.sibling}throw Error(u(188))}if(L.return!==G.return)L=q,G=Y;else{for(var ge=!1,Ae=q.child;Ae;){if(Ae===L){ge=!0,L=q,G=Y;break}if(Ae===G){ge=!0,G=q,L=Y;break}Ae=Ae.sibling}if(!ge){for(Ae=Y.child;Ae;){if(Ae===L){ge=!0,L=Y,G=q;break}if(Ae===G){ge=!0,G=Y,L=q;break}Ae=Ae.sibling}if(!ge)throw Error(u(189))}}if(L.alternate!==G)throw Error(u(190))}if(L.tag!==3)throw Error(u(188));return L.stateNode.current===L?A:T}function v(A){var T=A.tag;if(T===5||T===26||T===27||T===6)return A;for(A=A.child;A!==null;){if(T=v(A),T!==null)return T;A=A.sibling}return null}function w(A){var T=A.tag;if(T===5||T===26||T===27||T===6)return A;for(A=A.child;A!==null;){if(A.tag!==4&&(T=w(A),T!==null))return T;A=A.sibling}return null}function S(A){return A===null||typeof A!="object"?null:(A=ds&&A[ds]||A["@@iterator"],typeof A=="function"?A:null)}function R(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===Hs?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case Co:return"Fragment";case bo:return"Profiler";case So:return"StrictMode";case sc:return"Suspense";case us:return"SuspenseList";case il:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case yo:return"Portal";case tr:return A.displayName||"Context";case nl:return(A._context.displayName||"Context")+".Consumer";case la:var T=A.render;return A=A.displayName,A||(A=T.displayName||T.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case oc:return T=A.displayName||null,T!==null?T:R(A.type)||"Memo";case fi:T=A._payload,A=A._init;try{return R(A(T))}catch{}}return null}function _(A){return{current:A}}function F(A){0>Ao||(A.current=Cc[Ao],Cc[Ao]=null,Ao--)}function M(A,T){Ao++,Cc[Ao]=A.current,A.current=T}function I(A){return A>>>=0,A===0?32:31-(Sc(A)/Oh|0)|0}function N(A){var T=A&42;if(T!==0)return T;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return A&261888;case 262144:case 524288:case 1048576:case 2097152:return A&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function B(A,T,L){var G=A.pendingLanes;if(G===0)return 0;var q=0,Y=A.suspendedLanes,ge=A.pingedLanes;A=A.warmLanes;var Ae=G&134217727;return Ae!==0?(G=Ae&~Y,G!==0?q=N(G):(ge&=Ae,ge!==0?q=N(ge):L||(L=Ae&~A,L!==0&&(q=N(L))))):(Ae=G&~Y,Ae!==0?q=N(Ae):ge!==0?q=N(ge):L||(L=G&~A,L!==0&&(q=N(L)))),q===0?0:T!==0&&T!==q&&(T&Y)===0&&(Y=q&-q,L=T&-T,Y>=L||Y===32&&(L&4194048)!==0)?T:q}function H(A,T){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&T)===0}function U(A,T){switch(A){case 1:case 2:case 4:case 8:case 64:return T+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return T+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $(){var A=ga;return ga<<=1,(ga&62914560)===0&&(ga=4194304),A}function z(A){for(var T=[],L=0;31>L;L++)T.push(A);return T}function j(A,T){A.pendingLanes|=T,T!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function J(A,T,L,G,q,Y){var ge=A.pendingLanes;A.pendingLanes=L,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=L,A.entangledLanes&=L,A.errorRecoveryDisabledLanes&=L,A.shellSuspendCounter=0;var Ae=A.entanglements,ze=A.expirationTimes,Qe=A.hiddenUpdates;for(L=ge&~L;0<L;){var tt=31-_i(L),Je=1<<tt;Ae[tt]=0,ze[tt]=-1;var rt=Qe[tt];if(rt!==null)for(Qe[tt]=null,tt=0;tt<rt.length;tt++){var yt=rt[tt];yt!==null&&(yt.lane&=-536870913)}L&=~Je}G!==0&&ie(A,G,0),Y!==0&&q===0&&A.tag!==0&&(A.suspendedLanes|=Y&~(ge&~T))}function ie(A,T,L){A.pendingLanes|=T,A.suspendedLanes&=~T;var G=31-_i(T);A.entangledLanes|=T,A.entanglements[G]=A.entanglements[G]|1073741824|L&261930}function se(A,T){var L=A.entangledLanes|=T;for(A=A.entanglements;L;){var G=31-_i(L),q=1<<G;q&T|A[G]&T&&(A[G]|=T),L&=~q}}function fe(A,T){var L=T&-T;return L=(L&42)!==0?1:de(L),(L&(A.suspendedLanes|T))!==0?0:L}function de(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function Ce(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function be(A){if(typeof Xu=="function"&&Nh(A),Di&&typeof Di.setStrictMode=="function")try{Di.setStrictMode(_o,A)}catch{}}function xe(A,T){return A===T&&(A!==0||1/A===1/T)||A!==A&&T!==T}function Ee(A){if(Ac===void 0)try{throw Error()}catch(L){var T=L.stack.trim().match(/\n( *(at )?)/);Ac=T&&T[1]||"",Gr=-1<L.stack.indexOf(`
    at`)?" (<anonymous>)":-1<L.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ac+A+Gr}function ae(A,T){if(!A||hl)return"";hl=!0;var L=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var G={DetermineComponentFrameRoot:function(){try{if(T){var Je=function(){throw Error()};if(Object.defineProperty(Je.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Je,[])}catch(yt){var rt=yt}Reflect.construct(A,[],Je)}else{try{Je.call()}catch(yt){rt=yt}A.call(Je.prototype)}}else{try{throw Error()}catch(yt){rt=yt}(Je=A())&&typeof Je.catch=="function"&&Je.catch(function(){})}}catch(yt){if(yt&&rt&&typeof yt.stack=="string")return[yt.stack,rt.stack]}return[null,null]}};G.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var q=Object.getOwnPropertyDescriptor(G.DetermineComponentFrameRoot,"name");q&&q.configurable&&Object.defineProperty(G.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Y=G.DetermineComponentFrameRoot(),ge=Y[0],Ae=Y[1];if(ge&&Ae){var ze=ge.split(`
`),Qe=Ae.split(`
`);for(q=G=0;G<ze.length&&!ze[G].includes("DetermineComponentFrameRoot");)G++;for(;q<Qe.length&&!Qe[q].includes("DetermineComponentFrameRoot");)q++;if(G===ze.length||q===Qe.length)for(G=ze.length-1,q=Qe.length-1;1<=G&&0<=q&&ze[G]!==Qe[q];)q--;for(;1<=G&&0<=q;G--,q--)if(ze[G]!==Qe[q]){if(G!==1||q!==1)do if(G--,q--,0>q||ze[G]!==Qe[q]){var tt=`
`+ze[G].replace(" at new "," at ");return A.displayName&&tt.includes("<anonymous>")&&(tt=tt.replace("<anonymous>",A.displayName)),tt}while(1<=G&&0<=q);break}}}finally{hl=!1,Error.prepareStackTrace=L}return(L=A?A.displayName||A.name:"")?Ee(L):""}function oe(A,T){switch(A.tag){case 26:case 27:case 5:return Ee(A.type);case 16:return Ee("Lazy");case 13:return A.child!==T&&T!==null?Ee("Suspense Fallback"):Ee("Suspense");case 19:return Ee("SuspenseList");case 0:case 15:return ae(A.type,!1);case 11:return ae(A.type.render,!1);case 1:return ae(A.type,!0);case 31:return Ee("Activity");default:return""}}function ee(A){try{var T="",L=null;do T+=oe(A,L),L=A,A=A.return;while(A);return T}catch(G){return`
Error generating stack: `+G.message+`
`+G.stack}}function Z(A,T){if(typeof A=="object"&&A!==null){var L=Qu.get(A);return L!==void 0?L:(T={value:A,source:T,stack:ee(T)},Qu.set(A,T),T)}return{value:A,source:T,stack:ee(T)}}function Q(A,T){ps[Hr++]=fl,ps[Hr++]=Kt,Kt=A,fl=T}function K(A,T,L){rr[zi++]=Zn,rr[zi++]=vr,rr[zi++]=sr,sr=A;var G=Zn;A=vr;var q=32-_i(G)-1;G&=~(1<<q),L+=1;var Y=32-_i(T)+q;if(30<Y){var ge=q-q%5;Y=(G&(1<<ge)-1).toString(32),G>>=ge,q-=ge,Zn=1<<32-_i(T)+q|L<<q|G,vr=Y+A}else Zn=1<<Y|L<<q|G,vr=A}function ne(A){A.return!==null&&(Q(A,1),K(A,1,0))}function ue(A){for(;A===Kt;)Kt=ps[--Hr],ps[Hr]=null,fl=ps[--Hr],ps[Hr]=null;for(;A===sr;)sr=rr[--zi],rr[zi]=null,vr=rr[--zi],rr[zi]=null,Zn=rr[--zi],rr[zi]=null}function ye(A,T){rr[zi++]=Zn,rr[zi++]=vr,rr[zi++]=sr,Zn=T.id,vr=T.overflow,sr=A}function pe(A,T){M(Jn,T),M(gs,A),M(qn,null),A=Kd(T),F(qn),M(qn,A)}function X(){F(qn),F(gs),F(Jn)}function le(A){A.memoizedState!==null&&M(pl,A);var T=qn.current,L=da(T,A.type);T!==L&&(M(gs,A),M(qn,L))}function he(A){gs.current===A&&(F(qn),F(gs)),pl.current===A&&(F(pl),Rn?xo._currentValue=Eo:xo._currentValue2=Eo)}function ce(A){var T=Error(u(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Fe(Z(T,A)),Tc}function me(A,T){if(!on)throw Error(u(175));bh(A.stateNode,A.type,A.memoizedProps,T,A)||ce(A,!0)}function we(A){for(Vn=A.return;Vn;)switch(Vn.tag){case 5:case 31:case 13:mi=!1;return;case 27:case 3:mi=!0;return;default:Vn=Vn.return}}function Se(A){if(!on||A!==Vn)return!1;if(!Mt)return we(A),Mt=!0,!1;var T=A.tag;if(Hn?T!==3&&T!==27&&(T!==5||pa(A.type)&&!gi(A.type,A.memoizedProps))&&an&&ce(A):T!==3&&(T!==5||pa(A.type)&&!gi(A.type,A.memoizedProps))&&an&&ce(A),we(A),T===13){if(!on)throw Error(u(316));if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(u(317));an=Gu(A)}else if(T===31){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(u(317));an=Eh(A)}else an=Hn&&T===27?hh(A.type,an):Vn?dh(A.stateNode):null;return!0}function _e(){on&&(an=Vn=null,Mt=!1)}function We(){var A=Vr;return A!==null&&(Mi===null?Mi=A:Mi.push.apply(Mi,A),Vr=null),A}function Fe(A){Vr===null?Vr=[A]:Vr.push(A)}function Le(A,T,L){Rn?(M(or,T._currentValue),T._currentValue=L):(M(or,T._currentValue2),T._currentValue2=L)}function De(A){var T=or.current;Rn?A._currentValue=T:A._currentValue2=T,F(or)}function Be(A,T,L){for(;A!==null;){var G=A.alternate;if((A.childLanes&T)!==T?(A.childLanes|=T,G!==null&&(G.childLanes|=T)):G!==null&&(G.childLanes&T)!==T&&(G.childLanes|=T),A===L)break;A=A.return}}function $e(A,T,L,G){var q=A.child;for(q!==null&&(q.return=A);q!==null;){var Y=q.dependencies;if(Y!==null){var ge=q.child;Y=Y.firstContext;e:for(;Y!==null;){var Ae=Y;Y=q;for(var ze=0;ze<T.length;ze++)if(Ae.context===T[ze]){Y.lanes|=L,Ae=Y.alternate,Ae!==null&&(Ae.lanes|=L),Be(Y.return,L,A),G||(ge=null);break e}Y=Ae.next}}else if(q.tag===18){if(ge=q.return,ge===null)throw Error(u(341));ge.lanes|=L,Y=ge.alternate,Y!==null&&(Y.lanes|=L),Be(ge,L,A),ge=null}else ge=q.child;if(ge!==null)ge.return=q;else for(ge=q;ge!==null;){if(ge===A){ge=null;break}if(q=ge.sibling,q!==null){q.return=ge.return,ge=q;break}ge=ge.return}q=ge}}function Ze(A,T,L,G){A=null;for(var q=T,Y=!1;q!==null;){if(!Y){if((q.flags&524288)!==0)Y=!0;else if((q.flags&262144)!==0)break}if(q.tag===10){var ge=q.alternate;if(ge===null)throw Error(u(387));if(ge=ge.memoizedProps,ge!==null){var Ae=q.type;Tn(q.pendingProps.value,ge.value)||(A!==null?A.push(Ae):A=[Ae])}}else if(q===pl.current){if(ge=q.alternate,ge===null)throw Error(u(387));ge.memoizedState.memoizedState!==q.memoizedState.memoizedState&&(A!==null?A.push(xo):A=[xo])}q=q.return}A!==null&&$e(T,A,L,G),T.flags|=262144}function Ye(A){for(A=A.firstContext;A!==null;){var T=A.context;if(!Tn(Rn?T._currentValue:T._currentValue2,A.memoizedValue))return!0;A=A.next}return!1}function nt(A){Qt=A,yr=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function it(A){return vt(Qt,A)}function ot(A,T){return Qt===null&&nt(A),vt(A,T)}function vt(A,T){var L=Rn?T._currentValue:T._currentValue2;if(T={context:T,memoizedValue:L,next:null},yr===null){if(A===null)throw Error(u(308));yr=T,A.dependencies={lanes:0,firstContext:T},A.flags|=524288}else yr=yr.next=T;return L}function nn(){return{controller:new kh,data:new Map,refCount:0}}function en(A){A.refCount--,A.refCount===0&&Kn(hf,function(){A.controller.abort()})}function Dt(){}function wt(A){A!==Wt&&A.next===null&&(Wt===null?gl=Wt=A:Wt=Wt.next=A),ar=!0,li||(li=!0,Pe())}function Bn(A,T){if(!_c&&ar){_c=!0;do for(var L=!1,G=gl;G!==null;){if(A!==0){var q=G.pendingLanes;if(q===0)var Y=0;else{var ge=G.suspendedLanes,Ae=G.pingedLanes;Y=(1<<31-_i(42|A)+1)-1,Y&=q&~(ge&~Ae),Y=Y&201326741?Y&201326741|1:Y?Y|2:0}Y!==0&&(L=!0,Ie(G,Y))}else Y=Ft,Y=B(G,G===Rt?Y:0,G.cancelPendingCommit!==null||G.timeoutHandle!==Ti),(Y&3)===0||H(G,Y)||(L=!0,Ie(G,Y));G=G.next}while(L);_c=!1}}function Bo(){wl()}function wl(){ar=li=!1;var A=0;js!==0&&wo()&&(A=js);for(var T=ai(),L=null,G=gl;G!==null;){var q=G.next,Y=bs(G,T);Y===0?(G.next=null,L===null?gl=q:L.next=q,q===null&&(Wt=L)):(L=G,(A!==0||(Y&3)!==0)&&(ar=!0)),G=q}kn!==0&&kn!==5||Bn(A),js!==0&&(js=0)}function bs(A,T){for(var L=A.suspendedLanes,G=A.pingedLanes,q=A.expirationTimes,Y=A.pendingLanes&-62914561;0<Y;){var ge=31-_i(Y),Ae=1<<ge,ze=q[ge];ze===-1?((Ae&L)===0||(Ae&G)!==0)&&(q[ge]=U(Ae,T)):ze<=T&&(A.expiredLanes|=Ae),Y&=~Ae}if(T=Rt,L=Ft,L=B(A,A===T?L:0,A.cancelPendingCommit!==null||A.timeoutHandle!==Ti),G=A.callbackNode,L===0||A===T&&($t===2||$t===9)||A.cancelPendingCommit!==null)return G!==null&&G!==null&&wc(G),A.callbackNode=null,A.callbackPriority=0;if((L&3)===0||H(A,L)){if(T=L&-L,T===A.callbackPriority)return T;switch(G!==null&&wc(G),Ce(L)){case 2:case 8:L=Lh;break;case 32:L=dl;break;case 268435456:L=xc;break;default:L=dl}return G=Xe.bind(null,A),L=ul(L,G),A.callbackPriority=T,A.callbackNode=L,T}return G!==null&&G!==null&&wc(G),A.callbackPriority=2,A.callbackNode=null,2}function Xe(A,T){if(kn!==0&&kn!==5)return A.callbackNode=null,A.callbackPriority=0,null;var L=A.callbackNode;if(Lr()&&A.callbackNode!==L)return null;var G=Ft;return G=B(A,A===Rt?G:0,A.cancelPendingCommit!==null||A.timeoutHandle!==Ti),G===0?null:(mr(A,G,T),bs(A,ai()),A.callbackNode!=null&&A.callbackNode===L?Xe.bind(null,A):null)}function Ie(A,T){if(Lr())return null;mr(A,T,!0)}function Pe(){Eu?xu(function(){(Tt&6)!==0?ul(Ec,Bo):wl()}):ul(Ec,Bo)}function st(){if(js===0){var A=ms;A===0&&(A=bc,bc<<=1,(bc&261888)===0&&(bc=256)),js=A}return js}function Vt(A,T){if(ma===null){var L=ma=[];Zu=0,ms=st(),zn={status:"pending",value:void 0,then:function(G){L.push(G)}}}return Zu++,T.then(Pn,Pn),T}function Pn(){if(--Zu===0&&ma!==null){zn!==null&&(zn.status="fulfilled");var A=ma;ma=null,ms=0,zn=null;for(var T=0;T<A.length;T++)(0,A[T])()}}function Cn(A,T){var L=[],G={status:"pending",value:null,reason:null,then:function(q){L.push(q)}};return A.then(function(){G.status="fulfilled",G.value=T;for(var q=0;q<L.length;q++)(0,L[q])(T)},function(q){for(G.status="rejected",G.reason=q,q=0;q<L.length;q++)(0,L[q])(void 0)}),G}function Fi(){var A=$s.current;return A!==null?A:Rt.pooledCache}function wi(A,T){T===null?M($s,$s.current):M($s,T.pool)}function ni(){var A=Fi();return A===null?null:{parent:Rn?cn._currentValue:cn._currentValue2,pool:A}}function Sn(A,T){if(Tn(A,T))return!0;if(typeof A!="object"||A===null||typeof T!="object"||T===null)return!1;var L=Object.keys(A),G=Object.keys(T);if(L.length!==G.length)return!1;for(G=0;G<L.length;G++){var q=L[G];if(!df.call(T,q)||!Tn(A[q],T[q]))return!1}return!0}function Oi(A){return A=A.status,A==="fulfilled"||A==="rejected"}function fr(A,T,L){switch(L=A[L],L===void 0?A.push(T):L!==T&&(T.then(Dt,Dt),T=L),T.status){case"fulfilled":return T.value;case"rejected":throw A=T.reason,pr(A),A;default:if(typeof T.status=="string")T.then(Dt,Dt);else{if(A=Rt,A!==null&&100<A.shellSuspendCounter)throw Error(u(482));A=T,A.status="pending",A.then(function(G){if(T.status==="pending"){var q=T;q.status="fulfilled",q.value=G}},function(G){if(T.status==="pending"){var q=T;q.status="rejected",q.reason=G}})}switch(T.status){case"fulfilled":return T.value;case"rejected":throw A=T.reason,pr(A),A}throw vi=T,Un}}function Ii(A){try{var T=A._init;return T(A._payload)}catch(L){throw L!==null&&typeof L=="object"&&typeof L.then=="function"?(vi=L,Un):L}}function un(){if(vi===null)throw Error(u(459));var A=vi;return vi=null,A}function pr(A){if(A===Un||A===cr)throw Error(u(483))}function Yr(A){var T=Do;return Do+=1,qs===null&&(qs=[]),fr(qs,A,T)}function br(A,T){T=T.props.ref,A.ref=T!==void 0?T:null}function Xr(A,T){throw T.$$typeof===vo?Error(u(525)):(A=Object.prototype.toString.call(T),Error(u(31,A==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":A)))}function Qr(A){function T(Ge,Oe){if(A){var Ve=Ge.deletions;Ve===null?(Ge.deletions=[Oe],Ge.flags|=16):Ve.push(Oe)}}function L(Ge,Oe){if(!A)return null;for(;Oe!==null;)T(Ge,Oe),Oe=Oe.sibling;return null}function G(Ge){for(var Oe=new Map;Ge!==null;)Ge.key!==null?Oe.set(Ge.key,Ge):Oe.set(Ge.index,Ge),Ge=Ge.sibling;return Oe}function q(Ge,Oe){return Ge=Hi(Ge,Oe),Ge.index=0,Ge.sibling=null,Ge}function Y(Ge,Oe,Ve){return Ge.index=Ve,A?(Ve=Ge.alternate,Ve!==null?(Ve=Ve.index,Ve<Oe?(Ge.flags|=67108866,Oe):Ve):(Ge.flags|=67108866,Oe)):(Ge.flags|=1048576,Oe)}function ge(Ge){return A&&Ge.alternate===null&&(Ge.flags|=67108866),Ge}function Ae(Ge,Oe,Ve,et){return Oe===null||Oe.tag!==6?(Oe=hu(Ve,Ge.mode,et),Oe.return=Ge,Oe):(Oe=q(Oe,Ve),Oe.return=Ge,Oe)}function ze(Ge,Oe,Ve,et){var ht=Ve.type;return ht===Co?tt(Ge,Oe,Ve.props.children,et,Ve.key):Oe!==null&&(Oe.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===fi&&Ii(ht)===Oe.type)?(Oe=q(Oe,Ve.props),br(Oe,Ve),Oe.return=Ge,Oe):(Oe=cs(Ve.type,Ve.key,Ve.props,null,Ge.mode,et),br(Oe,Ve),Oe.return=Ge,Oe)}function Qe(Ge,Oe,Ve,et){return Oe===null||Oe.tag!==4||Oe.stateNode.containerInfo!==Ve.containerInfo||Oe.stateNode.implementation!==Ve.implementation?(Oe=pu(Ve,Ge.mode,et),Oe.return=Ge,Oe):(Oe=q(Oe,Ve.children||[]),Oe.return=Ge,Oe)}function tt(Ge,Oe,Ve,et,ht){return Oe===null||Oe.tag!==7?(Oe=er(Ve,Ge.mode,et,ht),Oe.return=Ge,Oe):(Oe=q(Oe,Ve),Oe.return=Ge,Oe)}function Je(Ge,Oe,Ve){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint")return Oe=hu(""+Oe,Ge.mode,Ve),Oe.return=Ge,Oe;if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case Nr:return Ve=cs(Oe.type,Oe.key,Oe.props,null,Ge.mode,Ve),br(Ve,Oe),Ve.return=Ge,Ve;case yo:return Oe=pu(Oe,Ge.mode,Ve),Oe.return=Ge,Oe;case fi:return Oe=Ii(Oe),Je(Ge,Oe,Ve)}if(Vs(Oe)||S(Oe))return Oe=er(Oe,Ge.mode,Ve,null),Oe.return=Ge,Oe;if(typeof Oe.then=="function")return Je(Ge,Yr(Oe),Ve);if(Oe.$$typeof===tr)return Je(Ge,ot(Ge,Oe),Ve);Xr(Ge,Oe)}return null}function rt(Ge,Oe,Ve,et){var ht=Oe!==null?Oe.key:null;if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number"||typeof Ve=="bigint")return ht!==null?null:Ae(Ge,Oe,""+Ve,et);if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case Nr:return Ve.key===ht?ze(Ge,Oe,Ve,et):null;case yo:return Ve.key===ht?Qe(Ge,Oe,Ve,et):null;case fi:return Ve=Ii(Ve),rt(Ge,Oe,Ve,et)}if(Vs(Ve)||S(Ve))return ht!==null?null:tt(Ge,Oe,Ve,et,null);if(typeof Ve.then=="function")return rt(Ge,Oe,Yr(Ve),et);if(Ve.$$typeof===tr)return rt(Ge,Oe,ot(Ge,Ve),et);Xr(Ge,Ve)}return null}function yt(Ge,Oe,Ve,et,ht){if(typeof et=="string"&&et!==""||typeof et=="number"||typeof et=="bigint")return Ge=Ge.get(Ve)||null,Ae(Oe,Ge,""+et,ht);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case Nr:return Ge=Ge.get(et.key===null?Ve:et.key)||null,ze(Oe,Ge,et,ht);case yo:return Ge=Ge.get(et.key===null?Ve:et.key)||null,Qe(Oe,Ge,et,ht);case fi:return et=Ii(et),yt(Ge,Oe,Ve,et,ht)}if(Vs(et)||S(et))return Ge=Ge.get(Ve)||null,tt(Oe,Ge,et,ht,null);if(typeof et.then=="function")return yt(Ge,Oe,Ve,Yr(et),ht);if(et.$$typeof===tr)return yt(Ge,Oe,Ve,ot(Oe,et),ht);Xr(Oe,et)}return null}function Yn(Ge,Oe,Ve,et){for(var ht=null,yn=null,ft=Oe,kt=Oe=0,Xn=null;ft!==null&&kt<Ve.length;kt++){ft.index>kt?(Xn=ft,ft=null):Xn=ft.sibling;var Ht=rt(Ge,ft,Ve[kt],et);if(Ht===null){ft===null&&(ft=Xn);break}A&&ft&&Ht.alternate===null&&T(Ge,ft),Oe=Y(Ht,Oe,kt),yn===null?ht=Ht:yn.sibling=Ht,yn=Ht,ft=Xn}if(kt===Ve.length)return L(Ge,ft),Mt&&Q(Ge,kt),ht;if(ft===null){for(;kt<Ve.length;kt++)ft=Je(Ge,Ve[kt],et),ft!==null&&(Oe=Y(ft,Oe,kt),yn===null?ht=ft:yn.sibling=ft,yn=ft);return Mt&&Q(Ge,kt),ht}for(ft=G(ft);kt<Ve.length;kt++)Xn=yt(ft,Ge,kt,Ve[kt],et),Xn!==null&&(A&&Xn.alternate!==null&&ft.delete(Xn.key===null?kt:Xn.key),Oe=Y(Xn,Oe,kt),yn===null?ht=Xn:yn.sibling=Xn,yn=Xn);return A&&ft.forEach(function(hr){return T(Ge,hr)}),Mt&&Q(Ge,kt),ht}function xa(Ge,Oe,Ve,et){if(Ve==null)throw Error(u(151));for(var ht=null,yn=null,ft=Oe,kt=Oe=0,Xn=null,Ht=Ve.next();ft!==null&&!Ht.done;kt++,Ht=Ve.next()){ft.index>kt?(Xn=ft,ft=null):Xn=ft.sibling;var hr=rt(Ge,ft,Ht.value,et);if(hr===null){ft===null&&(ft=Xn);break}A&&ft&&hr.alternate===null&&T(Ge,ft),Oe=Y(hr,Oe,kt),yn===null?ht=hr:yn.sibling=hr,yn=hr,ft=Xn}if(Ht.done)return L(Ge,ft),Mt&&Q(Ge,kt),ht;if(ft===null){for(;!Ht.done;kt++,Ht=Ve.next())Ht=Je(Ge,Ht.value,et),Ht!==null&&(Oe=Y(Ht,Oe,kt),yn===null?ht=Ht:yn.sibling=Ht,yn=Ht);return Mt&&Q(Ge,kt),ht}for(ft=G(ft);!Ht.done;kt++,Ht=Ve.next())Ht=yt(ft,Ge,kt,Ht.value,et),Ht!==null&&(A&&Ht.alternate!==null&&ft.delete(Ht.key===null?kt:Ht.key),Oe=Y(Ht,Oe,kt),yn===null?ht=Ht:yn.sibling=Ht,yn=Ht);return A&&ft.forEach(function(ff){return T(Ge,ff)}),Mt&&Q(Ge,kt),ht}function no(Ge,Oe,Ve,et){if(typeof Ve=="object"&&Ve!==null&&Ve.type===Co&&Ve.key===null&&(Ve=Ve.props.children),typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case Nr:e:{for(var ht=Ve.key;Oe!==null;){if(Oe.key===ht){if(ht=Ve.type,ht===Co){if(Oe.tag===7){L(Ge,Oe.sibling),et=q(Oe,Ve.props.children),et.return=Ge,Ge=et;break e}}else if(Oe.elementType===ht||typeof ht=="object"&&ht!==null&&ht.$$typeof===fi&&Ii(ht)===Oe.type){L(Ge,Oe.sibling),et=q(Oe,Ve.props),br(et,Ve),et.return=Ge,Ge=et;break e}L(Ge,Oe);break}else T(Ge,Oe);Oe=Oe.sibling}Ve.type===Co?(et=er(Ve.props.children,Ge.mode,et,Ve.key),et.return=Ge,Ge=et):(et=cs(Ve.type,Ve.key,Ve.props,null,Ge.mode,et),br(et,Ve),et.return=Ge,Ge=et)}return ge(Ge);case yo:e:{for(ht=Ve.key;Oe!==null;){if(Oe.key===ht)if(Oe.tag===4&&Oe.stateNode.containerInfo===Ve.containerInfo&&Oe.stateNode.implementation===Ve.implementation){L(Ge,Oe.sibling),et=q(Oe,Ve.children||[]),et.return=Ge,Ge=et;break e}else{L(Ge,Oe);break}else T(Ge,Oe);Oe=Oe.sibling}et=pu(Ve,Ge.mode,et),et.return=Ge,Ge=et}return ge(Ge);case fi:return Ve=Ii(Ve),no(Ge,Oe,Ve,et)}if(Vs(Ve))return Yn(Ge,Oe,Ve,et);if(S(Ve)){if(ht=S(Ve),typeof ht!="function")throw Error(u(150));return Ve=ht.call(Ve),xa(Ge,Oe,Ve,et)}if(typeof Ve.then=="function")return no(Ge,Oe,Yr(Ve),et);if(Ve.$$typeof===tr)return no(Ge,Oe,ot(Ge,Ve),et);Xr(Ge,Ve)}return typeof Ve=="string"&&Ve!==""||typeof Ve=="number"||typeof Ve=="bigint"?(Ve=""+Ve,Oe!==null&&Oe.tag===6?(L(Ge,Oe.sibling),et=q(Oe,Ve),et.return=Ge,Ge=et):(L(Ge,Oe),et=hu(Ve,Ge.mode,et),et.return=Ge,Ge=et),ge(Ge)):L(Ge,Oe)}return function(Ge,Oe,Ve,et){try{Do=0;var ht=no(Ge,Oe,Ve,et);return qs=null,ht}catch(ft){if(ft===Un||ft===cr)throw ft;var yn=n(29,ft,null,Ge.mode);return yn.lanes=et,yn.return=Ge,yn}finally{}}}function Mn(){for(var A=Ur,T=Po=Ur=0;T<A;){var L=ti[T];ti[T++]=null;var G=ti[T];ti[T++]=null;var q=ti[T];ti[T++]=null;var Y=ti[T];if(ti[T++]=null,G!==null&&q!==null){var ge=G.pending;ge===null?q.next=q:(q.next=ge.next,ge.next=q),G.pending=q}Y!==0&&Zr(L,q,Y)}}function qi(A,T,L,G){ti[Ur++]=A,ti[Ur++]=T,ti[Ur++]=L,ti[Ur++]=G,Po|=G,A.lanes|=G,A=A.alternate,A!==null&&(A.lanes|=G)}function ws(A,T,L,G){return qi(A,T,L,G),Fn(A)}function Es(A,T){return qi(A,null,null,T),Fn(A)}function Zr(A,T,L){A.lanes|=L;var G=A.alternate;G!==null&&(G.lanes|=L);for(var q=!1,Y=A.return;Y!==null;)Y.childLanes|=L,G=Y.alternate,G!==null&&(G.childLanes|=L),Y.tag===22&&(A=Y.stateNode,A===null||A._visibility&1||(q=!0)),A=Y,Y=Y.return;return A.tag===3?(Y=A.stateNode,q&&T!==null&&(q=31-_i(L),A=Y.hiddenUpdates,G=A[q],G===null?A[q]=[T]:G.push(T),T.lane=L|536870912),Y):null}function Fn(A){if(50<Gt)throw Gt=0,bl=null,Error(u(185));for(var T=A.return;T!==null;)A=T,T=A.return;return A.tag===3?A.stateNode:null}function ii(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xs(A,T){A=A.updateQueue,T.updateQueue===A&&(T.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function wr(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function Rs(A,T,L){var G=A.updateQueue;if(G===null)return null;if(G=G.shared,(Tt&2)!==0){var q=G.pending;return q===null?T.next=T:(T.next=q.next,q.next=T),G.pending=T,T=Fn(A),Zr(A,null,L),T}return qi(A,G,T,L),Fn(A)}function Fa(A,T,L){if(T=T.updateQueue,T!==null&&(T=T.shared,(L&4194048)!==0)){var G=T.lanes;G&=A.pendingLanes,L|=G,T.lanes=L,se(A,L)}}function El(A,T){var L=A.updateQueue,G=A.alternate;if(G!==null&&(G=G.updateQueue,L===G)){var q=null,Y=null;if(L=L.firstBaseUpdate,L!==null){do{var ge={lane:L.lane,tag:L.tag,payload:L.payload,callback:null,next:null};Y===null?q=Y=ge:Y=Y.next=ge,L=L.next}while(L!==null);Y===null?q=Y=T:Y=Y.next=T}else q=Y=T;L={baseState:G.baseState,firstBaseUpdate:q,lastBaseUpdate:Y,shared:G.shared,callbacks:G.callbacks},A.updateQueue=L;return}A=L.lastBaseUpdate,A===null?L.firstBaseUpdate=T:A.next=T,L.lastBaseUpdate=T}function Jr(){if(Pc){var A=zn;if(A!==null)throw A}}function io(A,T,L,G){Pc=!1;var q=A.updateQueue;Ui=!1;var Y=q.firstBaseUpdate,ge=q.lastBaseUpdate,Ae=q.shared.pending;if(Ae!==null){q.shared.pending=null;var ze=Ae,Qe=ze.next;ze.next=null,ge===null?Y=Qe:ge.next=Qe,ge=ze;var tt=A.alternate;tt!==null&&(tt=tt.updateQueue,Ae=tt.lastBaseUpdate,Ae!==ge&&(Ae===null?tt.firstBaseUpdate=Qe:Ae.next=Qe,tt.lastBaseUpdate=ze))}if(Y!==null){var Je=q.baseState;ge=0,tt=Qe=ze=null,Ae=Y;do{var rt=Ae.lane&-536870913,yt=rt!==Ae.lane;if(yt?(Ft&rt)===rt:(G&rt)===rt){rt!==0&&rt===ms&&(Pc=!0),tt!==null&&(tt=tt.next={lane:0,tag:Ae.tag,payload:Ae.payload,callback:null,next:null});e:{var Yn=A,xa=Ae;rt=T;var no=L;switch(xa.tag){case 1:if(Yn=xa.payload,typeof Yn=="function"){Je=Yn.call(no,Je,rt);break e}Je=Yn;break e;case 3:Yn.flags=Yn.flags&-65537|128;case 0:if(Yn=xa.payload,rt=typeof Yn=="function"?Yn.call(no,Je,rt):Yn,rt==null)break e;Je=rc({},Je,rt);break e;case 2:Ui=!0}}rt=Ae.callback,rt!==null&&(A.flags|=64,yt&&(A.flags|=8192),yt=q.callbacks,yt===null?q.callbacks=[rt]:yt.push(rt))}else yt={lane:rt,tag:Ae.tag,payload:Ae.payload,callback:Ae.callback,next:null},tt===null?(Qe=tt=yt,ze=Je):tt=tt.next=yt,ge|=rt;if(Ae=Ae.next,Ae===null){if(Ae=q.shared.pending,Ae===null)break;yt=Ae,Ae=yt.next,yt.next=null,q.lastBaseUpdate=yt,q.shared.pending=null}}while(!0);tt===null&&(ze=Je),q.baseState=ze,q.firstBaseUpdate=Qe,q.lastBaseUpdate=tt,Y===null&&(q.shared.lanes=0),ys|=ge,A.lanes=ge,A.memoizedState=Je}}function ro(A,T){if(typeof A!="function")throw Error(u(191,A));A.call(T)}function so(A,T){var L=A.callbacks;if(L!==null)for(A.callbacks=null,A=0;A<L.length;A++)ro(L[A],T)}function Go(A,T){A=jr,M(Ks,A),M(Mo,T),jr=A|T.baseLanes}function As(){M(Ks,jr),M(Mo,Mo.current)}function On(){jr=Ks.current,F(Mo),F(Ks)}function es(A){var T=A.alternate;M(wn,wn.current&1),M(Pi,A),yi===null&&(T===null||Mo.current!==null||T.memoizedState!==null)&&(yi=A)}function xl(A){M(wn,wn.current),M(Pi,A),yi===null&&(yi=A)}function Ts(A){A.tag===22?(M(wn,wn.current),M(Pi,A),yi===null&&(yi=A)):Li()}function Li(){M(wn,wn.current),M(Pi,Pi.current)}function Ni(A){F(Pi),yi===A&&(yi=null),F(wn)}function Oa(A){for(var T=A;T!==null;){if(T.tag===13){var L=T.memoizedState;if(L!==null&&(L=L.dehydrated,L===null||Us(L)||hc(L)))return T}else if(T.tag===19&&(T.memoizedProps.revealOrder==="forwards"||T.memoizedProps.revealOrder==="backwards"||T.memoizedProps.revealOrder==="unstable_legacy-backwards"||T.memoizedProps.revealOrder==="together")){if((T.flags&128)!==0)return T}else if(T.child!==null){T.child.return=T,T=T.child;continue}if(T===A)break;for(;T.sibling===null;){if(T.return===null||T.return===A)return null;T=T.return}T.sibling.return=T.return,T=T.sibling}return null}function dn(){throw Error(u(321))}function kc(A,T){if(T===null)return!1;for(var L=0;L<T.length&&L<A.length;L++)if(!Tn(A[L],T[L]))return!1;return!0}function Ho(A,T,L,G,q,Y){return vs=Y,St=T,T.memoizedState=null,T.updateQueue=null,T.lanes=0,ut.H=A===null||A.memoizedState===null?gn:Wr,Lt=!1,Y=L(G,q),Lt=!1,bt&&(Y=Er(T,L,G,q)),Ia(A),Y}function Ia(A){ut.H=Wi;var T=ct!==null&&ct.next!==null;if(vs=0,mt=ct=St=null,xt=!1,ur=0,Cr=null,T)throw Error(u(300));A===null||tn||(A=A.dependencies,A!==null&&Ye(A)&&(tn=!0))}function Er(A,T,L,G){St=A;var q=0;do{if(bt&&(Cr=null),ur=0,bt=!1,25<=q)throw Error(u(301));if(q+=1,mt=ct=null,A.updateQueue!=null){var Y=A.updateQueue;Y.lastEffect=null,Y.events=null,Y.stores=null,Y.memoCache!=null&&(Y.memoCache.index=0)}ut.H=Ys,Y=T(L,G)}while(bt);return Y}function Ki(){var A=ut.H,T=A.useState()[0];return T=typeof T.then=="function"?si(T):T,A=A.useState()[0],(ct!==null?ct.memoizedState:null)!==A&&(St.flags|=1024),T}function Rl(){var A=ci!==0;return ci=0,A}function Bc(A,T,L){T.updateQueue=A.updateQueue,T.flags&=-2053,A.lanes&=~L}function La(A){if(xt){for(A=A.memoizedState;A!==null;){var T=A.queue;T!==null&&(T.pending=null),A=A.next}xt=!1}vs=0,mt=ct=St=null,bt=!1,ur=ci=0,Cr=null}function ri(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?St.memoizedState=mt=A:mt=mt.next=A,mt}function rn(){if(ct===null){var A=St.alternate;A=A!==null?A.memoizedState:null}else A=ct.next;var T=mt===null?St.memoizedState:mt.next;if(T!==null)mt=T,ct=A;else{if(A===null)throw St.alternate===null?Error(u(467)):Error(u(310));ct=A,A={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},mt===null?St.memoizedState=mt=A:mt=mt.next=A}return mt}function Al(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function si(A){var T=ur;return ur+=1,Cr===null&&(Cr=[]),A=fr(Cr,A,T),T=St,(mt===null?T.memoizedState:mt.next)===null&&(T=T.alternate,ut.H=T===null||T.memoizedState===null?gn:Wr),A}function Vo(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return si(A);if(A.$$typeof===tr)return it(A)}throw Error(u(438,String(A)))}function Tl(A){var T=null,L=St.updateQueue;if(L!==null&&(T=L.memoCache),T==null){var G=St.alternate;G!==null&&(G=G.updateQueue,G!==null&&(G=G.memoCache,G!=null&&(T={data:G.data.map(function(q){return q.slice()}),index:0})))}if(T==null&&(T={data:[],index:0}),L===null&&(L=Al(),St.updateQueue=L),L.memoCache=T,L=T.data[T.index],L===void 0)for(L=T.data[T.index]=Array(A),G=0;G<A;G++)L[G]=mu;return T.index++,L}function gr(A,T){return typeof T=="function"?T(A):T}function ts(A){var T=rn();return _l(T,ct,A)}function _l(A,T,L){var G=A.queue;if(G===null)throw Error(u(311));G.lastRenderedReducer=L;var q=A.baseQueue,Y=G.pending;if(Y!==null){if(q!==null){var ge=q.next;q.next=Y.next,Y.next=ge}T.baseQueue=q=Y,G.pending=null}if(Y=A.baseState,q===null)A.memoizedState=Y;else{T=q.next;var Ae=ge=null,ze=null,Qe=T,tt=!1;do{var Je=Qe.lane&-536870913;if(Je!==Qe.lane?(Ft&Je)===Je:(vs&Je)===Je){var rt=Qe.revertLane;if(rt===0)ze!==null&&(ze=ze.next={lane:0,revertLane:0,gesture:null,action:Qe.action,hasEagerState:Qe.hasEagerState,eagerState:Qe.eagerState,next:null}),Je===ms&&(tt=!0);else if((vs&rt)===rt){Qe=Qe.next,rt===ms&&(tt=!0);continue}else Je={lane:0,revertLane:Qe.revertLane,gesture:null,action:Qe.action,hasEagerState:Qe.hasEagerState,eagerState:Qe.eagerState,next:null},ze===null?(Ae=ze=Je,ge=Y):ze=ze.next=Je,St.lanes|=rt,ys|=rt;Je=Qe.action,Lt&&L(Y,Je),Y=Qe.hasEagerState?Qe.eagerState:L(Y,Je)}else rt={lane:Je,revertLane:Qe.revertLane,gesture:Qe.gesture,action:Qe.action,hasEagerState:Qe.hasEagerState,eagerState:Qe.eagerState,next:null},ze===null?(Ae=ze=rt,ge=Y):ze=ze.next=rt,St.lanes|=Je,ys|=Je;Qe=Qe.next}while(Qe!==null&&Qe!==T);if(ze===null?ge=Y:ze.next=Ae,!Tn(Y,A.memoizedState)&&(tn=!0,tt&&(L=zn,L!==null)))throw L;A.memoizedState=Y,A.baseState=ge,A.baseQueue=ze,G.lastRenderedState=Y}return q===null&&(G.lanes=0),[A.memoizedState,G.dispatch]}function Dl(A){var T=rn(),L=T.queue;if(L===null)throw Error(u(311));L.lastRenderedReducer=A;var G=L.dispatch,q=L.pending,Y=T.memoizedState;if(q!==null){L.pending=null;var ge=q=q.next;do Y=A(Y,ge.action),ge=ge.next;while(ge!==q);Tn(Y,T.memoizedState)||(tn=!0),T.memoizedState=Y,T.baseQueue===null&&(T.baseState=Y),L.lastRenderedState=Y}return[Y,G]}function oo(A,T,L){var G=St,q=rn(),Y=Mt;if(Y){if(L===void 0)throw Error(u(407));L=L()}else L=T();var ge=!Tn((ct||q).memoizedState,L);if(ge&&(q.memoizedState=L,tn=!0),q=q.queue,Wo(Hc.bind(null,G,q,A),[A]),q.getSnapshot!==T||ge||mt!==null&&mt.memoizedState.tag&1){if(G.flags|=2048,ki(9,{destroy:void 0},Gc.bind(null,G,q,L,T),null),Rt===null)throw Error(u(349));Y||(vs&127)!==0||gd(G,T,L)}return L}function gd(A,T,L){A.flags|=16384,A={getSnapshot:T,value:L},T=St.updateQueue,T===null?(T=Al(),St.updateQueue=T,T.stores=[A]):(L=T.stores,L===null?T.stores=[A]:L.push(A))}function Gc(A,T,L,G){T.value=L,T.getSnapshot=G,Pl(T)&&md(A)}function Hc(A,T,L){return L(function(){Pl(T)&&md(A)})}function Pl(A){var T=A.getSnapshot;A=A.value;try{var L=T();return!Tn(A,L)}catch{return!0}}function md(A){var T=Es(A,2);T!==null&&fn(T,A,2)}function Vc(A){var T=ri();if(typeof A=="function"){var L=A;if(A=L(),Lt){be(!0);try{L()}finally{be(!1)}}}return T.memoizedState=T.baseState=A,T.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:A},T}function Na(A,T,L,G){return A.baseState=L,_l(A,ct,typeof G=="function"?G:gr)}function ns(A,T,L,G,q){if(Bl(A))throw Error(u(485));if(A=T.action,A!==null){var Y={payload:q,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ge){Y.listeners.push(ge)}};ut.T!==null?L(!0):Y.isTransition=!1,G(Y),L=T.pending,L===null?(Y.next=T.pending=Y,Ml(T,Y)):(Y.next=L.next,T.pending=L.next=Y)}}function Ml(A,T){var L=T.action,G=T.payload,q=A.state;if(T.isTransition){var Y=ut.T,ge={};ut.T=ge;try{var Ae=L(q,G),ze=ut.S;ze!==null&&ze(ge,Ae),Fl(A,T,Ae)}catch(Qe){_s(A,T,Qe)}finally{Y!==null&&ge.types!==null&&(Y.types=ge.types),ut.T=Y}}else try{Y=L(q,G),Fl(A,T,Y)}catch(Qe){_s(A,T,Qe)}}function Fl(A,T,L){L!==null&&typeof L=="object"&&typeof L.then=="function"?L.then(function(G){ao(A,T,G)},function(G){return _s(A,T,G)}):ao(A,T,L)}function ao(A,T,L){T.status="fulfilled",T.value=L,zc(T),A.state=L,T=A.pending,T!==null&&(L=T.next,L===T?A.pending=null:(L=L.next,T.next=L,Ml(A,L)))}function _s(A,T,L){var G=A.pending;if(A.pending=null,G!==null){G=G.next;do T.status="rejected",T.reason=L,zc(T),T=T.next;while(T!==G)}A.action=null}function zc(A){A=A.listeners;for(var T=0;T<A.length;T++)(0,A[T])()}function Ol(A,T){return T}function Uc(A,T){if(Mt){var L=Rt.formState;if(L!==null){e:{var G=St;if(Mt){if(an){var q=uh(an,mi);if(q){an=dh(q),G=Lu(q);break e}}ce(G)}G=!1}G&&(T=L[0])}}L=ri(),L.memoizedState=L.baseState=T,G={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ol,lastRenderedState:T},L.queue=G,L=wd.bind(null,St,G),G.dispatch=L,G=Vc(!1);var Y=kl.bind(null,St,!1,G.queue);return G=ri(),q={state:T,dispatch:null,action:A,pending:null},G.queue=q,L=ns.bind(null,St,q,Y,L),q.dispatch=L,G.memoizedState=A,[T,L,!1]}function zo(A){var T=rn();return xr(T,ct,A)}function xr(A,T,L){if(T=_l(A,T,Ol)[0],A=ts(gr)[0],typeof T=="object"&&T!==null&&typeof T.then=="function")try{var G=si(T)}catch(ge){throw ge===Un?cr:ge}else G=T;T=rn();var q=T.queue,Y=q.dispatch;return L!==T.memoizedState&&(St.flags|=2048,ki(9,{destroy:void 0},Wc.bind(null,q,L),null)),[G,Y,A]}function Wc(A,T){A.action=T}function Uo(A){var T=rn(),L=ct;if(L!==null)return xr(T,L,A);rn(),T=T.memoizedState,L=rn();var G=L.queue.dispatch;return L.memoizedState=A,[T,G,!1]}function ki(A,T,L,G){return A={tag:A,create:L,deps:G,inst:T,next:null},T=St.updateQueue,T===null&&(T=Al(),St.updateQueue=T),L=T.lastEffect,L===null?T.lastEffect=A.next=A:(G=L.next,L.next=A,A.next=G,T.lastEffect=A),A}function Il(){return rn().memoizedState}function lo(A,T,L,G){var q=ri();St.flags|=A,q.memoizedState=ki(1|T,{destroy:void 0},L,G===void 0?null:G)}function Ba(A,T,L,G){var q=rn();G=G===void 0?null:G;var Y=q.memoizedState.inst;ct!==null&&G!==null&&kc(G,ct.memoizedState.deps)?q.memoizedState=ki(T,Y,L,G):(St.flags|=A,q.memoizedState=ki(1|T,Y,L,G))}function Ga(A,T){lo(8390656,8,A,T)}function Wo(A,T){Ba(2048,8,A,T)}function vd(A){St.flags|=4;var T=St.updateQueue;if(T===null)T=Al(),St.updateQueue=T,T.events=[A];else{var L=T.events;L===null?T.events=[A]:L.push(A)}}function ui(A){var T=rn().memoizedState;return vd({ref:T,nextImpl:A}),function(){if((Tt&2)!==0)throw Error(u(440));return T.impl.apply(void 0,arguments)}}function Ds(A,T){return Ba(4,2,A,T)}function Ha(A,T){return Ba(4,4,A,T)}function jo(A,T){if(typeof T=="function"){A=A();var L=T(A);return function(){typeof L=="function"?L():T(null)}}if(T!=null)return A=A(),T.current=A,function(){T.current=null}}function yd(A,T,L){L=L!=null?L.concat([A]):null,Ba(4,4,jo.bind(null,T,A),L)}function Va(){}function Ll(A,T){var L=rn();T=T===void 0?null:T;var G=L.memoizedState;return T!==null&&kc(T,G[1])?G[0]:(L.memoizedState=[A,T],A)}function $o(A,T){var L=rn();T=T===void 0?null:T;var G=L.memoizedState;if(T!==null&&kc(T,G[1]))return G[0];if(G=A(),Lt){be(!0);try{A()}finally{be(!1)}}return L.memoizedState=[G,T],G}function qo(A,T,L){return L===void 0||(vs&1073741824)!==0&&(Ft&261930)===0?A.memoizedState=T:(A.memoizedState=L,A=os(),St.lanes|=A,ys|=A,L)}function jc(A,T,L,G){return Tn(L,T)?L:Mo.current!==null?(A=qo(A,L,G),Tn(A,T)||(tn=!0),A):(vs&42)===0||(vs&1073741824)!==0&&(Ft&261930)===0?(tn=!0,A.memoizedState=L):(A=os(),St.lanes|=A,ys|=A,T)}function Cd(A,T,L,G,q){var Y=nr();Pt(Y!==0&&8>Y?Y:8);var ge=ut.T,Ae={};ut.T=Ae,kl(A,!1,T,L);try{var ze=q(),Qe=ut.S;if(Qe!==null&&Qe(Ae,ze),ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var tt=Cn(ze,G);za(A,T,tt,sn(A))}else za(A,T,G,sn(A))}catch(Je){za(A,T,{then:function(){},status:"rejected",reason:Je},sn())}finally{Pt(Y),ge!==null&&Ae.types!==null&&(ge.types=Ae.types),ut.T=ge}}function Sd(A){var T=A.memoizedState;if(T!==null)return T;T={memoizedState:Eo,baseState:Eo,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:Eo},next:null};var L={};return T.next={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:L},next:null},A.memoizedState=T,A=A.alternate,A!==null&&(A.memoizedState=T),T}function $c(){return it(xo)}function Nl(){return rn().memoizedState}function bd(){return rn().memoizedState}function ef(A){for(var T=A.return;T!==null;){switch(T.tag){case 24:case 3:var L=sn();A=wr(L);var G=Rs(T,A,L);G!==null&&(fn(G,T,L),Fa(G,T,L)),T={cache:nn()},A.payload=T;return}T=T.return}}function tf(A,T,L){var G=sn();L={lane:G,revertLane:0,gesture:null,action:L,hasEagerState:!1,eagerState:null,next:null},Bl(A)?Ed(T,L):(L=ws(A,T,L,G),L!==null&&(fn(L,A,G),xd(L,T,G)))}function wd(A,T,L){var G=sn();za(A,T,L,G)}function za(A,T,L,G){var q={lane:G,revertLane:0,gesture:null,action:L,hasEagerState:!1,eagerState:null,next:null};if(Bl(A))Ed(T,q);else{var Y=A.alternate;if(A.lanes===0&&(Y===null||Y.lanes===0)&&(Y=T.lastRenderedReducer,Y!==null))try{var ge=T.lastRenderedState,Ae=Y(ge,L);if(q.hasEagerState=!0,q.eagerState=Ae,Tn(Ae,ge))return qi(A,T,q,0),Rt===null&&Mn(),!1}catch{}finally{}if(L=ws(A,T,q,G),L!==null)return fn(L,A,G),xd(L,T,G),!0}return!1}function kl(A,T,L,G){if(G={lane:2,revertLane:st(),gesture:null,action:G,hasEagerState:!1,eagerState:null,next:null},Bl(A)){if(T)throw Error(u(479))}else T=ws(A,L,G,2),T!==null&&fn(T,A,2)}function Bl(A){var T=A.alternate;return A===St||T!==null&&T===St}function Ed(A,T){bt=xt=!0;var L=A.pending;L===null?T.next=T:(T.next=L.next,L.next=T),A.pending=T}function xd(A,T,L){if((L&4194048)!==0){var G=T.lanes;G&=A.pendingLanes,L|=G,T.lanes=L,se(A,L)}}function qc(A,T,L,G){T=A.memoizedState,L=L(G,T),L=L==null?T:rc({},T,L),A.memoizedState=L,A.lanes===0&&(A.updateQueue.baseState=L)}function Gl(A,T,L,G,q,Y,ge){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(G,Y,ge):T.prototype&&T.prototype.isPureReactComponent?!Sn(L,G)||!Sn(q,Y):!0}function Rd(A,T,L,G){A=T.state,typeof T.componentWillReceiveProps=="function"&&T.componentWillReceiveProps(L,G),typeof T.UNSAFE_componentWillReceiveProps=="function"&&T.UNSAFE_componentWillReceiveProps(L,G),T.state!==A&&ml.enqueueReplaceState(T,T.state,null)}function co(A,T){var L=T;if("ref"in T){L={};for(var G in T)G!=="ref"&&(L[G]=T[G])}if(A=A.defaultProps){L===T&&(L=rc({},L));for(var q in A)L[q]===void 0&&(L[q]=A[q])}return L}function Hl(A,T){try{var L=A.onUncaughtError;L(T.value,{componentStack:T.stack})}catch(G){setTimeout(function(){throw G})}}function Kc(A,T,L){try{var G=A.onCaughtError;G(L.value,{componentStack:L.stack,errorBoundary:T.tag===1?T.stateNode:null})}catch(q){setTimeout(function(){throw q})}}function Yc(A,T,L){return L=wr(L),L.tag=3,L.payload={element:null},L.callback=function(){Hl(A,T)},L}function Ad(A){return A=wr(A),A.tag=3,A}function Td(A,T,L,G){var q=L.type.getDerivedStateFromError;if(typeof q=="function"){var Y=G.value;A.payload=function(){return q(Y)},A.callback=function(){Kc(T,L,G)}}var ge=L.stateNode;ge!==null&&typeof ge.componentDidCatch=="function"&&(A.callback=function(){Kc(T,L,G),typeof q!="function"&&(Cs===null?Cs=new Set([this]):Cs.add(this));var Ae=G.stack;this.componentDidCatch(G.value,{componentStack:Ae!==null?Ae:""})})}function nf(A,T,L,G,q){if(L.flags|=32768,G!==null&&typeof G=="object"&&typeof G.then=="function"){if(T=L.alternate,T!==null&&Ze(T,L,q,!0),L=Pi.current,L!==null){switch(L.tag){case 31:case 13:return yi===null?ra():L.alternate===null&&vn===0&&(vn=3),L.flags&=-257,L.flags|=65536,L.lanes=q,G===zr?L.flags|=16384:(T=L.updateQueue,T===null?L.updateQueue=new Set([G]):T.add(G),aa(A,G,q)),!1;case 22:return L.flags|=65536,G===zr?L.flags|=16384:(T=L.updateQueue,T===null?(T={transitions:null,markerInstances:null,retryQueue:new Set([G])},L.updateQueue=T):(L=T.retryQueue,L===null?T.retryQueue=new Set([G]):L.add(G)),aa(A,G,q)),!1}throw Error(u(435,L.tag))}return aa(A,G,q),ra(),!1}if(Mt)return T=Pi.current,T!==null?((T.flags&65536)===0&&(T.flags|=256),T.flags|=65536,T.lanes=q,G!==Tc&&(A=Error(u(422),{cause:G}),Fe(Z(A,L)))):(G!==Tc&&(T=Error(u(423),{cause:G}),Fe(Z(T,L))),A=A.current.alternate,A.flags|=65536,q&=-q,A.lanes|=q,G=Z(G,L),q=Yc(A.stateNode,G,q),El(A,q),vn!==4&&(vn=2)),!1;var Y=Error(u(520),{cause:G});if(Y=Z(Y,L),yl===null?yl=[Y]:yl.push(Y),vn!==4&&(vn=2),T===null)return!0;G=Z(G,L),L=T;do{switch(L.tag){case 3:return L.flags|=65536,A=q&-q,L.lanes|=A,A=Yc(L.stateNode,G,A),El(L,A),!1;case 1:if(T=L.type,Y=L.stateNode,(L.flags&128)===0&&(typeof T.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(Cs===null||!Cs.has(Y))))return L.flags|=65536,q&=-q,L.lanes|=q,q=Ad(q),Td(q,A,L,G),El(L,q),!1}L=L.return}while(L!==null);return!1}function Qn(A,T,L,G){T.child=A===null?Ju(T,null,L,G):ei(T,A.child,L,G)}function _d(A,T,L,G,q){L=L.render;var Y=T.ref;if("ref"in G){var ge={};for(var Ae in G)Ae!=="ref"&&(ge[Ae]=G[Ae])}else ge=G;return nt(T),G=Ho(A,T,L,ge,Y,q),Ae=Rl(),A!==null&&!tn?(Bc(A,T,q),Rr(A,T,q)):(Mt&&Ae&&ne(T),T.flags|=1,Qn(A,T,G,q),T.child)}function Dd(A,T,L,G,q){if(A===null){var Y=L.type;return typeof Y=="function"&&!go(Y)&&Y.defaultProps===void 0&&L.compare===null?(T.tag=15,T.type=Y,Pd(A,T,Y,G,q)):(A=cs(L.type,null,G,T,T.mode,q),A.ref=T.ref,A.return=T,T.child=A)}if(Y=A.child,!Wa(A,q)){var ge=Y.memoizedProps;if(L=L.compare,L=L!==null?L:Sn,L(ge,G)&&A.ref===T.ref)return Rr(A,T,q)}return T.flags|=1,A=Hi(Y,G),A.ref=T.ref,A.return=T,T.child=A}function Pd(A,T,L,G,q){if(A!==null){var Y=A.memoizedProps;if(Sn(Y,G)&&A.ref===T.ref)if(tn=!1,T.pendingProps=G=Y,Wa(A,q))(A.flags&131072)!==0&&(tn=!0);else return T.lanes=A.lanes,Rr(A,T,q)}return zl(A,T,L,G,q)}function Md(A,T,L,G){var q=G.children,Y=A!==null?A.memoizedState:null;if(A===null&&T.stateNode===null&&(T.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),G.mode==="hidden"){if((T.flags&128)!==0){if(Y=Y!==null?Y.baseLanes|L:L,A!==null){for(G=T.child=A.child,q=0;G!==null;)q=q|G.lanes|G.childLanes,G=G.sibling;G=q&~Y}else G=0,T.child=null;return Ko(A,T,Y,L,G)}if((L&536870912)!==0)T.memoizedState={baseLanes:0,cachePool:null},A!==null&&wi(T,Y!==null?Y.cachePool:null),Y!==null?Go(T,Y):As(),Ts(T);else return G=T.lanes=536870912,Ko(A,T,Y!==null?Y.baseLanes|L:L,L,G)}else Y!==null?(wi(T,Y.cachePool),Go(T,Y),Li(),T.memoizedState=null):(A!==null&&wi(T,null),As(),Li());return Qn(A,T,q,L),T.child}function uo(A,T){return A!==null&&A.tag===22||T.stateNode!==null||(T.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),T.sibling}function Ko(A,T,L,G,q){var Y=Fi();return Y=Y===null?null:{parent:Rn?cn._currentValue:cn._currentValue2,pool:Y},T.memoizedState={baseLanes:L,cachePool:Y},A!==null&&wi(T,null),As(),Ts(T),A!==null&&Ze(A,T,G,!0),T.childLanes=q,null}function Vl(A,T){return T=Ps({mode:T.mode,children:T.children},A.mode),T.ref=A.ref,A.child=T,T.return=A,T}function Xc(A,T,L){return ei(T,A.child,null,L),A=Vl(T,T.pendingProps),A.flags|=2,Ni(T),T.memoizedState=null,A}function Fd(A,T,L){var G=T.pendingProps,q=(T.flags&128)!==0;if(T.flags&=-129,A===null){if(Mt){if(G.mode==="hidden")return A=Vl(T,G),T.lanes=536870912,uo(null,A);if(xl(T),(A=an)?(A=ku(A,mi),A!==null&&(T.memoizedState={dehydrated:A,treeContext:sr!==null?{id:Zn,overflow:vr}:null,retryLane:536870912,hydrationErrors:null},L=fu(A),L.return=T,T.child=L,Vn=T,an=null)):A=null,A===null)throw ce(T);return T.lanes=536870912,null}return Vl(T,G)}var Y=A.memoizedState;if(Y!==null){var ge=Y.dehydrated;if(xl(T),q)if(T.flags&256)T.flags&=-257,T=Xc(A,T,L);else if(T.memoizedState!==null)T.child=A.child,T.flags|=128,T=null;else throw Error(u(558));else if(tn||Ze(A,T,L,!1),q=(L&A.childLanes)!==0,tn||q){if(G=Rt,G!==null&&(ge=fe(G,L),ge!==0&&ge!==Y.retryLane))throw Y.retryLane=ge,Es(A,ge),fn(G,A,ge),Ci;ra(),T=Xc(A,T,L)}else A=Y.treeContext,on&&(an=gh(ge),Vn=T,Mt=!0,Vr=null,mi=!1,A!==null&&ye(T,A)),T=Vl(T,G),T.flags|=4096;return T}return A=Hi(A.child,{mode:G.mode,children:G.children}),A.ref=T.ref,T.child=A,A.return=T,A}function Ua(A,T){var L=T.ref;if(L===null)A!==null&&A.ref!==null&&(T.flags|=4194816);else{if(typeof L!="function"&&typeof L!="object")throw Error(u(284));(A===null||A.ref!==L)&&(T.flags|=4194816)}}function zl(A,T,L,G,q){return nt(T),L=Ho(A,T,L,G,void 0,q),G=Rl(),A!==null&&!tn?(Bc(A,T,q),Rr(A,T,q)):(Mt&&G&&ne(T),T.flags|=1,Qn(A,T,L,q),T.child)}function Qc(A,T,L,G,q,Y){return nt(T),T.updateQueue=null,L=Er(T,G,L,q),Ia(A),G=Rl(),A!==null&&!tn?(Bc(A,T,Y),Rr(A,T,Y)):(Mt&&G&&ne(T),T.flags|=1,Qn(A,T,L,Y),T.child)}function ho(A,T,L,G,q){if(nt(T),T.stateNode===null){var Y=Br,ge=L.contextType;typeof ge=="object"&&ge!==null&&(Y=it(ge)),Y=new L(G,Y),T.memoizedState=Y.state!==null&&Y.state!==void 0?Y.state:null,Y.updater=ml,T.stateNode=Y,Y._reactInternals=T,Y=T.stateNode,Y.props=G,Y.state=T.memoizedState,Y.refs={},ii(T),ge=L.contextType,Y.context=typeof ge=="object"&&ge!==null?it(ge):Br,Y.state=T.memoizedState,ge=L.getDerivedStateFromProps,typeof ge=="function"&&(qc(T,L,ge,G),Y.state=T.memoizedState),typeof L.getDerivedStateFromProps=="function"||typeof Y.getSnapshotBeforeUpdate=="function"||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(ge=Y.state,typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount(),ge!==Y.state&&ml.enqueueReplaceState(Y,Y.state,null),io(T,G,Y,q),Jr(),Y.state=T.memoizedState),typeof Y.componentDidMount=="function"&&(T.flags|=4194308),G=!0}else if(A===null){Y=T.stateNode;var Ae=T.memoizedProps,ze=co(L,Ae);Y.props=ze;var Qe=Y.context,tt=L.contextType;ge=Br,typeof tt=="object"&&tt!==null&&(ge=it(tt));var Je=L.getDerivedStateFromProps;tt=typeof Je=="function"||typeof Y.getSnapshotBeforeUpdate=="function",Ae=T.pendingProps!==Ae,tt||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(Ae||Qe!==ge)&&Rd(T,Y,G,ge),Ui=!1;var rt=T.memoizedState;Y.state=rt,io(T,G,Y,q),Jr(),Qe=T.memoizedState,Ae||rt!==Qe||Ui?(typeof Je=="function"&&(qc(T,L,Je,G),Qe=T.memoizedState),(ze=Ui||Gl(T,L,ze,G,rt,Qe,ge))?(tt||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount()),typeof Y.componentDidMount=="function"&&(T.flags|=4194308)):(typeof Y.componentDidMount=="function"&&(T.flags|=4194308),T.memoizedProps=G,T.memoizedState=Qe),Y.props=G,Y.state=Qe,Y.context=ge,G=ze):(typeof Y.componentDidMount=="function"&&(T.flags|=4194308),G=!1)}else{Y=T.stateNode,xs(A,T),ge=T.memoizedProps,tt=co(L,ge),Y.props=tt,Je=T.pendingProps,rt=Y.context,Qe=L.contextType,ze=Br,typeof Qe=="object"&&Qe!==null&&(ze=it(Qe)),Ae=L.getDerivedStateFromProps,(Qe=typeof Ae=="function"||typeof Y.getSnapshotBeforeUpdate=="function")||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(ge!==Je||rt!==ze)&&Rd(T,Y,G,ze),Ui=!1,rt=T.memoizedState,Y.state=rt,io(T,G,Y,q),Jr();var yt=T.memoizedState;ge!==Je||rt!==yt||Ui||A!==null&&A.dependencies!==null&&Ye(A.dependencies)?(typeof Ae=="function"&&(qc(T,L,Ae,G),yt=T.memoizedState),(tt=Ui||Gl(T,L,tt,G,rt,yt,ze)||A!==null&&A.dependencies!==null&&Ye(A.dependencies))?(Qe||typeof Y.UNSAFE_componentWillUpdate!="function"&&typeof Y.componentWillUpdate!="function"||(typeof Y.componentWillUpdate=="function"&&Y.componentWillUpdate(G,yt,ze),typeof Y.UNSAFE_componentWillUpdate=="function"&&Y.UNSAFE_componentWillUpdate(G,yt,ze)),typeof Y.componentDidUpdate=="function"&&(T.flags|=4),typeof Y.getSnapshotBeforeUpdate=="function"&&(T.flags|=1024)):(typeof Y.componentDidUpdate!="function"||ge===A.memoizedProps&&rt===A.memoizedState||(T.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ge===A.memoizedProps&&rt===A.memoizedState||(T.flags|=1024),T.memoizedProps=G,T.memoizedState=yt),Y.props=G,Y.state=yt,Y.context=ze,G=tt):(typeof Y.componentDidUpdate!="function"||ge===A.memoizedProps&&rt===A.memoizedState||(T.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ge===A.memoizedProps&&rt===A.memoizedState||(T.flags|=1024),G=!1)}return Y=G,Ua(A,T),G=(T.flags&128)!==0,Y||G?(Y=T.stateNode,L=G&&typeof L.getDerivedStateFromError!="function"?null:Y.render(),T.flags|=1,A!==null&&G?(T.child=ei(T,A.child,null,q),T.child=ei(T,null,L,q)):Qn(A,T,L,q),T.memoizedState=Y.state,A=T.child):A=Rr(A,T,q),A}function Od(A,T,L,G){return _e(),T.flags|=256,Qn(A,T,L,G),T.child}function Zc(A){return{baseLanes:A,cachePool:ni()}}function Jc(A,T,L){return A=A!==null?A.childLanes&~L:0,T&&(A|=Si),A}function eu(A,T,L){var G=T.pendingProps,q=!1,Y=(T.flags&128)!==0,ge;if((ge=Y)||(ge=A!==null&&A.memoizedState===null?!1:(wn.current&2)!==0),ge&&(q=!0,T.flags&=-129),ge=(T.flags&32)!==0,T.flags&=-33,A===null){if(Mt){if(q?es(T):Li(),(A=an)?(A=Sh(A,mi),A!==null&&(T.memoizedState={dehydrated:A,treeContext:sr!==null?{id:Zn,overflow:vr}:null,retryLane:536870912,hydrationErrors:null},L=fu(A),L.return=T,T.child=L,Vn=T,an=null)):A=null,A===null)throw ce(T);return hc(A)?T.lanes=32:T.lanes=536870912,null}var Ae=G.children;return G=G.fallback,q?(Li(),q=T.mode,Ae=Ps({mode:"hidden",children:Ae},q),G=er(G,q,L,null),Ae.return=T,G.return=T,Ae.sibling=G,T.child=Ae,G=T.child,G.memoizedState=Zc(L),G.childLanes=Jc(A,ge,L),T.memoizedState=Fo,uo(null,G)):(es(T),Ul(T,Ae))}var ze=A.memoizedState;if(ze!==null&&(Ae=ze.dehydrated,Ae!==null)){if(Y)T.flags&256?(es(T),T.flags&=-257,T=fo(A,T,L)):T.memoizedState!==null?(Li(),T.child=A.child,T.flags|=128,T=null):(Li(),Ae=G.fallback,q=T.mode,G=Ps({mode:"visible",children:G.children},q),Ae=er(Ae,q,L,null),Ae.flags|=2,G.return=T,Ae.return=T,G.sibling=Ae,T.child=G,ei(T,A.child,null,L),G=T.child,G.memoizedState=Zc(L),G.childLanes=Jc(A,ge,L),T.memoizedState=Fo,T=uo(null,G));else if(es(T),hc(Ae))ge=fc(Ae).digest,G=Error(u(419)),G.stack="",G.digest=ge,Fe({value:G,source:null,stack:null}),T=fo(A,T,L);else if(tn||Ze(A,T,L,!1),ge=(L&A.childLanes)!==0,tn||ge){if(ge=Rt,ge!==null&&(G=fe(ge,L),G!==0&&G!==ze.retryLane))throw ze.retryLane=G,Es(A,G),fn(ge,A,G),Ci;Us(Ae)||ra(),T=fo(A,T,L)}else Us(Ae)?(T.flags|=192,T.child=A.child,T=null):(A=ze.treeContext,on&&(an=mh(Ae),Vn=T,Mt=!0,Vr=null,mi=!1,A!==null&&ye(T,A)),T=Ul(T,G.children),T.flags|=4096);return T}return q?(Li(),Ae=G.fallback,q=T.mode,ze=A.child,Y=ze.sibling,G=Hi(ze,{mode:"hidden",children:G.children}),G.subtreeFlags=ze.subtreeFlags&65011712,Y!==null?Ae=Hi(Y,Ae):(Ae=er(Ae,q,L,null),Ae.flags|=2),Ae.return=T,G.return=T,G.sibling=Ae,T.child=G,uo(null,G),G=T.child,Ae=A.child.memoizedState,Ae===null?Ae=Zc(L):(q=Ae.cachePool,q!==null?(ze=Rn?cn._currentValue:cn._currentValue2,q=q.parent!==ze?{parent:ze,pool:ze}:q):q=ni(),Ae={baseLanes:Ae.baseLanes|L,cachePool:q}),G.memoizedState=Ae,G.childLanes=Jc(A,ge,L),T.memoizedState=Fo,uo(A.child,G)):(es(T),L=A.child,A=L.sibling,L=Hi(L,{mode:"visible",children:G.children}),L.return=T,L.sibling=null,A!==null&&(ge=T.deletions,ge===null?(T.deletions=[A],T.flags|=16):ge.push(A)),T.child=L,T.memoizedState=null,L)}function Ul(A,T){return T=Ps({mode:"visible",children:T},A.mode),T.return=A,A.child=T}function Ps(A,T){return A=n(22,A,null,T),A.lanes=0,A}function fo(A,T,L){return ei(T,A.child,null,L),A=Ul(T,T.pendingProps.children),A.flags|=2,T.memoizedState=null,A}function Id(A,T,L){A.lanes|=T;var G=A.alternate;G!==null&&(G.lanes|=T),Be(A.return,T,L)}function Yo(A,T,L,G,q,Y){var ge=A.memoizedState;ge===null?A.memoizedState={isBackwards:T,rendering:null,renderingStartTime:0,last:G,tail:L,tailMode:q,treeForkCount:Y}:(ge.isBackwards=T,ge.rendering=null,ge.renderingStartTime=0,ge.last=G,ge.tail=L,ge.tailMode=q,ge.treeForkCount=Y)}function tu(A,T,L){var G=T.pendingProps,q=G.revealOrder,Y=G.tail;G=G.children;var ge=wn.current,Ae=(ge&2)!==0;if(Ae?(ge=ge&1|2,T.flags|=128):ge&=1,M(wn,ge),Qn(A,T,G,L),G=Mt?fl:0,!Ae&&A!==null&&(A.flags&128)!==0)e:for(A=T.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&Id(A,L,T);else if(A.tag===19)Id(A,L,T);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===T)break e;for(;A.sibling===null;){if(A.return===null||A.return===T)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}switch(q){case"forwards":for(L=T.child,q=null;L!==null;)A=L.alternate,A!==null&&Oa(A)===null&&(q=L),L=L.sibling;L=q,L===null?(q=T.child,T.child=null):(q=L.sibling,L.sibling=null),Yo(T,!1,q,L,Y,G);break;case"backwards":case"unstable_legacy-backwards":for(L=null,q=T.child,T.child=null;q!==null;){if(A=q.alternate,A!==null&&Oa(A)===null){T.child=q;break}A=q.sibling,q.sibling=L,L=q,q=A}Yo(T,!0,L,null,Y,G);break;case"together":Yo(T,!1,null,null,void 0,G);break;default:T.memoizedState=null}return T.child}function Rr(A,T,L){if(A!==null&&(T.dependencies=A.dependencies),ys|=T.lanes,(L&T.childLanes)===0)if(A!==null){if(Ze(A,T,L,!1),(L&T.childLanes)===0)return null}else return null;if(A!==null&&T.child!==A.child)throw Error(u(153));if(T.child!==null){for(A=T.child,L=Hi(A,A.pendingProps),T.child=L,L.return=T;A.sibling!==null;)A=A.sibling,L=L.sibling=Hi(A,A.pendingProps),L.return=T;L.sibling=null}return T.child}function Wa(A,T){return(A.lanes&T)!==0?!0:(A=A.dependencies,!!(A!==null&&Ye(A)))}function nu(A,T,L){switch(T.tag){case 3:pe(T,T.stateNode.containerInfo),Le(T,cn,A.memoizedState.cache),_e();break;case 27:case 5:le(T);break;case 4:pe(T,T.stateNode.containerInfo);break;case 10:Le(T,T.type,T.memoizedProps.value);break;case 31:if(T.memoizedState!==null)return T.flags|=128,xl(T),null;break;case 13:var G=T.memoizedState;if(G!==null)return G.dehydrated!==null?(es(T),T.flags|=128,null):(L&T.child.childLanes)!==0?eu(A,T,L):(es(T),A=Rr(A,T,L),A!==null?A.sibling:null);es(T);break;case 19:var q=(A.flags&128)!==0;if(G=(L&T.childLanes)!==0,G||(Ze(A,T,L,!1),G=(L&T.childLanes)!==0),q){if(G)return tu(A,T,L);T.flags|=128}if(q=T.memoizedState,q!==null&&(q.rendering=null,q.tail=null,q.lastEffect=null),M(wn,wn.current),G)break;return null;case 22:return T.lanes=0,Md(A,T,L,T.pendingProps);case 24:Le(T,cn,A.memoizedState.cache)}return Rr(A,T,L)}function iu(A,T,L){if(A!==null)if(A.memoizedProps!==T.pendingProps)tn=!0;else{if(!Wa(A,L)&&(T.flags&128)===0)return tn=!1,nu(A,T,L);tn=(A.flags&131072)!==0}else tn=!1,Mt&&(T.flags&1048576)!==0&&K(T,fl,T.index);switch(T.lanes=0,T.tag){case 16:e:{var G=T.pendingProps;if(A=Ii(T.elementType),T.type=A,typeof A=="function")go(A)?(G=co(A,G),T.tag=1,T=ho(null,T,A,G,L)):(T.tag=0,T=zl(null,T,A,G,L));else{if(A!=null){var q=A.$$typeof;if(q===la){T.tag=11,T=_d(null,T,A,G,L);break e}else if(q===oc){T.tag=14,T=Dd(null,T,A,G,L);break e}}throw T=R(A)||A,Error(u(306,T,""))}}return T;case 0:return zl(A,T,T.type,T.pendingProps,L);case 1:return G=T.type,q=co(G,T.pendingProps),ho(A,T,G,q,L);case 3:e:{if(pe(T,T.stateNode.containerInfo),A===null)throw Error(u(387));var Y=T.pendingProps;q=T.memoizedState,G=q.element,xs(A,T),io(T,Y,null,L);var ge=T.memoizedState;if(Y=ge.cache,Le(T,cn,Y),Y!==q.cache&&$e(T,[cn],L,!0),Jr(),Y=ge.element,on&&q.isDehydrated)if(q={element:Y,isDehydrated:!1,cache:ge.cache},T.updateQueue.baseState=q,T.memoizedState=q,T.flags&256){T=Od(A,T,Y,L);break e}else if(Y!==G){G=Z(Error(u(424)),T),Fe(G),T=Od(A,T,Y,L);break e}else for(on&&(an=ph(T.stateNode.containerInfo),Vn=T,Mt=!0,Vr=null,mi=!0),L=Ju(T,null,Y,L),T.child=L;L;)L.flags=L.flags&-3|4096,L=L.sibling;else{if(_e(),Y===G){T=Rr(A,T,L);break e}Qn(A,T,Y,L)}T=T.child}return T;case 26:if(ir)return Ua(A,T),A===null?(L=zu(T.type,null,T.pendingProps,null))?T.memoizedState=L:Mt||(T.stateNode=vc(T.type,T.pendingProps,Jn.current,T)):T.memoizedState=zu(T.type,A.memoizedProps,T.pendingProps,A.memoizedState),null;case 27:if(Hn)return le(T),A===null&&Hn&&Mt&&(G=T.stateNode=yc(T.type,T.pendingProps,Jn.current,qn.current,!1),Vn=T,mi=!0,an=Nu(T.type,G,an)),Qn(A,T,T.pendingProps.children,L),Ua(A,T),A===null&&(T.flags|=4194304),T.child;case 5:return A===null&&Mt&&(Dh(T.type,T.pendingProps,qn.current),(q=G=an)&&(G=yh(G,T.type,T.pendingProps,mi),G!==null?(T.stateNode=G,Vn=T,an=fh(G),mi=!1,q=!0):q=!1),q||ce(T)),le(T),q=T.type,Y=T.pendingProps,ge=A!==null?A.memoizedProps:null,G=Y.children,gi(q,Y)?G=null:ge!==null&&gi(q,ge)&&(T.flags|=32),T.memoizedState!==null&&(q=Ho(A,T,Ki,null,null,L),Rn?xo._currentValue=q:xo._currentValue2=q),Ua(A,T),Qn(A,T,G,L),T.child;case 6:return A===null&&Mt&&(Vu(T.pendingProps,qn.current),(A=L=an)&&(L=Ch(L,T.pendingProps,mi),L!==null?(T.stateNode=L,Vn=T,an=null,A=!0):A=!1),A||ce(T)),null;case 13:return eu(A,T,L);case 4:return pe(T,T.stateNode.containerInfo),G=T.pendingProps,A===null?T.child=ei(T,null,G,L):Qn(A,T,G,L),T.child;case 11:return _d(A,T,T.type,T.pendingProps,L);case 7:return Qn(A,T,T.pendingProps,L),T.child;case 8:return Qn(A,T,T.pendingProps.children,L),T.child;case 12:return Qn(A,T,T.pendingProps.children,L),T.child;case 10:return G=T.pendingProps,Le(T,T.type,G.value),Qn(A,T,G.children,L),T.child;case 9:return q=T.type._context,G=T.pendingProps.children,nt(T),q=it(q),G=G(q),T.flags|=1,Qn(A,T,G,L),T.child;case 14:return Dd(A,T,T.type,T.pendingProps,L);case 15:return Pd(A,T,T.type,T.pendingProps,L);case 19:return tu(A,T,L);case 31:return Fd(A,T,L);case 22:return Md(A,T,L,T.pendingProps);case 24:return nt(T),G=it(cn),A===null?(q=Fi(),q===null&&(q=Rt,Y=nn(),q.pooledCache=Y,Y.refCount++,Y!==null&&(q.pooledCacheLanes|=L),q=Y),T.memoizedState={parent:G,cache:q},ii(T),Le(T,cn,q)):((A.lanes&L)!==0&&(xs(A,T),io(T,null,null,L),Jr()),q=A.memoizedState,Y=T.memoizedState,q.parent!==G?(q={parent:G,cache:G},T.memoizedState=q,T.lanes===0&&(T.memoizedState=T.updateQueue.baseState=q),Le(T,cn,G)):(G=Y.cache,Le(T,cn,G),G!==q.cache&&$e(T,[cn],L,!0))),Qn(A,T,T.pendingProps.children,L),T.child;case 29:throw T.pendingProps}throw Error(u(156,T.tag))}function Yi(A){A.flags|=4}function ja(A){Vi&&(A.flags|=8)}function Ld(A,T){if(A!==null&&A.child===T.child)return!1;if((T.flags&16)!==0)return!0;for(A=T.child;A!==null;){if((A.flags&8218)!==0||(A.subtreeFlags&8218)!==0)return!0;A=A.sibling}return!1}function ru(A,T,L,G){if(It)for(L=T.child;L!==null;){if(L.tag===5||L.tag===6)sl(A,L.stateNode);else if(!(L.tag===4||Hn&&L.tag===27)&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===T)break;for(;L.sibling===null;){if(L.return===null||L.return===T)return;L=L.return}L.sibling.return=L.return,L=L.sibling}else if(Vi)for(var q=T.child;q!==null;){if(q.tag===5){var Y=q.stateNode;L&&G&&(Y=ch(Y,q.type,q.memoizedProps)),sl(A,Y)}else if(q.tag===6)Y=q.stateNode,L&&G&&(Y=Iu(Y,q.memoizedProps)),sl(A,Y);else if(q.tag!==4){if(q.tag===22&&q.memoizedState!==null)Y=q.child,Y!==null&&(Y.return=q),ru(A,q,!0,!0);else if(q.child!==null){q.child.return=q,q=q.child;continue}}if(q===T)break;for(;q.sibling===null;){if(q.return===null||q.return===T)return;q=q.return}q.sibling.return=q.return,q=q.sibling}}function Nd(A,T,L,G){var q=!1;if(Vi)for(var Y=T.child;Y!==null;){if(Y.tag===5){var ge=Y.stateNode;L&&G&&(ge=ch(ge,Y.type,Y.memoizedProps)),Fu(A,ge)}else if(Y.tag===6)ge=Y.stateNode,L&&G&&(ge=Iu(ge,Y.memoizedProps)),Fu(A,ge);else if(Y.tag!==4){if(Y.tag===22&&Y.memoizedState!==null)q=Y.child,q!==null&&(q.return=Y),Nd(A,Y,!0,!0),q=!0;else if(Y.child!==null){Y.child.return=Y,Y=Y.child;continue}}if(Y===T)break;for(;Y.sibling===null;){if(Y.return===null||Y.return===T)return q;Y=Y.return}Y.sibling.return=Y.return,Y=Y.sibling}return q}function kd(A,T){if(Vi&&Ld(A,T)){A=T.stateNode;var L=A.containerInfo,G=Mu();Nd(G,T,!1,!1),A.pendingChildren=G,Yi(T),lh(L,G)}}function su(A,T,L,G){if(It)A.memoizedProps!==G&&Yi(T);else if(Vi){var q=A.stateNode,Y=A.memoizedProps;if((A=Ld(A,T))||Y!==G){var ge=qn.current;Y=ah(q,L,Y,G,!A,null),Y===q?T.stateNode=q:(ja(T),Ai(Y,L,G,ge)&&Yi(T),T.stateNode=Y,A&&ru(Y,T,!1,!1))}else T.stateNode=q}}function di(A,T,L,G,q){if((A.mode&32)!==0&&(L===null?ol(T,G):fa(T,L,G))){if(A.flags|=16777216,(q&335544128)===q||Su(T,G))if(pn(A.stateNode,T,G))A.flags|=8192;else if(Ot())A.flags|=8192;else throw vi=zr,Dc}else A.flags&=-16777217}function Xo(A,T){if($u(T)){if(A.flags|=16777216,!qu(T))if(Ot())A.flags|=8192;else throw vi=zr,Dc}else A.flags&=-16777217}function $a(A,T){T!==null&&(A.flags|=4),A.flags&16384&&(T=A.tag!==22?$():536870912,A.lanes|=T,wa|=T)}function Qo(A,T){if(!Mt)switch(A.tailMode){case"hidden":T=A.tail;for(var L=null;T!==null;)T.alternate!==null&&(L=T),T=T.sibling;L===null?A.tail=null:L.sibling=null;break;case"collapsed":L=A.tail;for(var G=null;L!==null;)L.alternate!==null&&(G=L),L=L.sibling;G===null?T||A.tail===null?A.tail=null:A.tail.sibling=null:G.sibling=null}}function Yt(A){var T=A.alternate!==null&&A.alternate.child===A.child,L=0,G=0;if(T)for(var q=A.child;q!==null;)L|=q.lanes|q.childLanes,G|=q.subtreeFlags&65011712,G|=q.flags&65011712,q.return=A,q=q.sibling;else for(q=A.child;q!==null;)L|=q.lanes|q.childLanes,G|=q.subtreeFlags,G|=q.flags,q.return=A,q=q.sibling;return A.subtreeFlags|=G,A.childLanes=L,T}function Bd(A,T,L){var G=T.pendingProps;switch(ue(T),T.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(T),null;case 1:return Yt(T),null;case 3:return L=T.stateNode,G=null,A!==null&&(G=A.memoizedState.cache),T.memoizedState.cache!==G&&(T.flags|=2048),De(cn),X(),L.pendingContext&&(L.context=L.pendingContext,L.pendingContext=null),(A===null||A.child===null)&&(Se(T)?Yi(T):A===null||A.memoizedState.isDehydrated&&(T.flags&256)===0||(T.flags|=1024,We())),kd(A,T),Yt(T),null;case 26:if(ir){var q=T.type,Y=T.memoizedState;return A===null?(Yi(T),Y!==null?(Yt(T),Xo(T,Y)):(Yt(T),di(T,q,null,G,L))):Y?Y!==A.memoizedState?(Yi(T),Yt(T),Xo(T,Y)):(Yt(T),T.flags&=-16777217):(Y=A.memoizedProps,It?Y!==G&&Yi(T):su(A,T,q,G),Yt(T),di(T,q,Y,G,L)),null}case 27:if(Hn){if(he(T),L=Jn.current,q=T.type,A!==null&&T.stateNode!=null)It?A.memoizedProps!==G&&Yi(T):su(A,T,q,G);else{if(!G){if(T.stateNode===null)throw Error(u(166));return Yt(T),null}A=qn.current,Se(T)?me(T,A):(A=yc(q,G,L,A,!0),T.stateNode=A,Yi(T))}return Yt(T),null}case 5:if(he(T),q=T.type,A!==null&&T.stateNode!=null)su(A,T,q,G);else{if(!G){if(T.stateNode===null)throw Error(u(166));return Yt(T),null}if(Y=qn.current,Se(T))me(T,Y),Ah(T.stateNode,q,G,Y)&&(T.flags|=64);else{var ge=yu(q,G,Jn.current,Y,T);ja(T),ru(ge,T,!1,!1),T.stateNode=ge,Ai(ge,q,G,Y)&&Yi(T)}}return Yt(T),di(T,T.type,A===null?null:A.memoizedProps,T.pendingProps,L),null;case 6:if(A&&T.stateNode!=null)L=A.memoizedProps,It?L!==G&&Yi(T):Vi&&(L!==G?(A=Jn.current,L=qn.current,ja(T),T.stateNode=hs(G,A,L,T)):T.stateNode=A.stateNode);else{if(typeof G!="string"&&T.stateNode===null)throw Error(u(166));if(A=Jn.current,L=qn.current,Se(T)){if(!on)throw Error(u(176));if(A=T.stateNode,L=T.memoizedProps,G=null,q=Vn,q!==null)switch(q.tag){case 27:case 5:G=q.memoizedProps}lf(A,L,T,G)||ce(T,!0)}else ja(T),T.stateNode=hs(G,A,L,T)}return Yt(T),null;case 31:if(L=T.memoizedState,A===null||A.memoizedState!==null){if(G=Se(T),L!==null){if(A===null){if(!G)throw Error(u(318));if(!on)throw Error(u(556));if(A=T.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(u(557));Bu(A,T)}else _e(),(T.flags&128)===0&&(T.memoizedState=null),T.flags|=4;Yt(T),A=!1}else L=We(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=L),A=!0;if(!A)return T.flags&256?(Ni(T),T):(Ni(T),null);if((T.flags&128)!==0)throw Error(u(558))}return Yt(T),null;case 13:if(G=T.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(q=Se(T),G!==null&&G.dehydrated!==null){if(A===null){if(!q)throw Error(u(318));if(!on)throw Error(u(344));if(q=T.memoizedState,q=q!==null?q.dehydrated:null,!q)throw Error(u(317));wh(q,T)}else _e(),(T.flags&128)===0&&(T.memoizedState=null),T.flags|=4;Yt(T),q=!1}else q=We(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=q),q=!0;if(!q)return T.flags&256?(Ni(T),T):(Ni(T),null)}return Ni(T),(T.flags&128)!==0?(T.lanes=L,T):(L=G!==null,A=A!==null&&A.memoizedState!==null,L&&(G=T.child,q=null,G.alternate!==null&&G.alternate.memoizedState!==null&&G.alternate.memoizedState.cachePool!==null&&(q=G.alternate.memoizedState.cachePool.pool),Y=null,G.memoizedState!==null&&G.memoizedState.cachePool!==null&&(Y=G.memoizedState.cachePool.pool),Y!==q&&(G.flags|=2048)),L!==A&&L&&(T.child.flags|=8192),$a(T,T.updateQueue),Yt(T),null);case 4:return X(),kd(A,T),A===null&&qt(T.stateNode.containerInfo),Yt(T),null;case 10:return De(T.type),Yt(T),null;case 19:if(F(wn),G=T.memoizedState,G===null)return Yt(T),null;if(q=(T.flags&128)!==0,Y=G.rendering,Y===null)if(q)Qo(G,!1);else{if(vn!==0||A!==null&&(A.flags&128)!==0)for(A=T.child;A!==null;){if(Y=Oa(A),Y!==null){for(T.flags|=128,Qo(G,!1),A=Y.updateQueue,T.updateQueue=A,$a(T,A),T.subtreeFlags=0,A=L,L=T.child;L!==null;)tc(L,A),L=L.sibling;return M(wn,wn.current&1|2),Mt&&Q(T,G.treeForkCount),T.child}A=A.sibling}G.tail!==null&&ai()>eo&&(T.flags|=128,q=!0,Qo(G,!1),T.lanes=4194304)}else{if(!q)if(A=Oa(Y),A!==null){if(T.flags|=128,q=!0,A=A.updateQueue,T.updateQueue=A,$a(T,A),Qo(G,!0),G.tail===null&&G.tailMode==="hidden"&&!Y.alternate&&!Mt)return Yt(T),null}else 2*ai()-G.renderingStartTime>eo&&L!==536870912&&(T.flags|=128,q=!0,Qo(G,!1),T.lanes=4194304);G.isBackwards?(Y.sibling=T.child,T.child=Y):(A=G.last,A!==null?A.sibling=Y:T.child=Y,G.last=Y)}return G.tail!==null?(A=G.tail,G.rendering=A,G.tail=A.sibling,G.renderingStartTime=ai(),A.sibling=null,L=wn.current,M(wn,q?L&1|2:L&1),Mt&&Q(T,G.treeForkCount),A):(Yt(T),null);case 22:case 23:return Ni(T),On(),G=T.memoizedState!==null,A!==null?A.memoizedState!==null!==G&&(T.flags|=8192):G&&(T.flags|=8192),G?(L&536870912)!==0&&(T.flags&128)===0&&(Yt(T),T.subtreeFlags&6&&(T.flags|=8192)):Yt(T),L=T.updateQueue,L!==null&&$a(T,L.retryQueue),L=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(L=A.memoizedState.cachePool.pool),G=null,T.memoizedState!==null&&T.memoizedState.cachePool!==null&&(G=T.memoizedState.cachePool.pool),G!==L&&(T.flags|=2048),A!==null&&F($s),null;case 24:return L=null,A!==null&&(L=A.memoizedState.cache),T.memoizedState.cache!==L&&(T.flags|=2048),De(cn),Yt(T),null;case 25:return null;case 30:return null}throw Error(u(156,T.tag))}function ou(A,T){switch(ue(T),T.tag){case 1:return A=T.flags,A&65536?(T.flags=A&-65537|128,T):null;case 3:return De(cn),X(),A=T.flags,(A&65536)!==0&&(A&128)===0?(T.flags=A&-65537|128,T):null;case 26:case 27:case 5:return he(T),null;case 31:if(T.memoizedState!==null){if(Ni(T),T.alternate===null)throw Error(u(340));_e()}return A=T.flags,A&65536?(T.flags=A&-65537|128,T):null;case 13:if(Ni(T),A=T.memoizedState,A!==null&&A.dehydrated!==null){if(T.alternate===null)throw Error(u(340));_e()}return A=T.flags,A&65536?(T.flags=A&-65537|128,T):null;case 19:return F(wn),null;case 4:return X(),null;case 10:return De(T.type),null;case 22:case 23:return Ni(T),On(),A!==null&&F($s),A=T.flags,A&65536?(T.flags=A&-65537|128,T):null;case 24:return De(cn),null;case 25:return null;default:return null}}function Gd(A,T){switch(ue(T),T.tag){case 3:De(cn),X();break;case 26:case 27:case 5:he(T);break;case 4:X();break;case 31:T.memoizedState!==null&&Ni(T);break;case 13:Ni(T);break;case 19:F(wn);break;case 10:De(T.type);break;case 22:case 23:Ni(T),On(),A!==null&&F($s);break;case 24:De(cn)}}function Ar(A,T){try{var L=T.updateQueue,G=L!==null?L.lastEffect:null;if(G!==null){var q=G.next;L=q;do{if((L.tag&A)===A){G=void 0;var Y=L.create,ge=L.inst;G=Y(),ge.destroy=G}L=L.next}while(L!==q)}}catch(Ae){gt(T,T.return,Ae)}}function Tr(A,T,L){try{var G=T.updateQueue,q=G!==null?G.lastEffect:null;if(q!==null){var Y=q.next;G=Y;do{if((G.tag&A)===A){var ge=G.inst,Ae=ge.destroy;if(Ae!==void 0){ge.destroy=void 0,q=T;var ze=L,Qe=Ae;try{Qe()}catch(tt){gt(q,ze,tt)}}}G=G.next}while(G!==Y)}}catch(tt){gt(T,T.return,tt)}}function Zo(A){var T=A.updateQueue;if(T!==null){var L=A.stateNode;try{so(T,L)}catch(G){gt(A,A.return,G)}}}function Wl(A,T,L){L.props=co(A.type,A.memoizedProps),L.state=A.memoizedState;try{L.componentWillUnmount()}catch(G){gt(A,T,G)}}function Jo(A,T){try{var L=A.ref;if(L!==null){switch(A.tag){case 26:case 27:case 5:var G=ua(A.stateNode);break;case 30:G=A.stateNode;break;default:G=A.stateNode}typeof L=="function"?A.refCleanup=L(G):L.current=G}}catch(q){gt(A,T,q)}}function oi(A,T){var L=A.ref,G=A.refCleanup;if(L!==null)if(typeof G=="function")try{G()}catch(q){gt(A,T,q)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof L=="function")try{L(null)}catch(q){gt(A,T,q)}else L.current=null}function po(A){var T=A.type,L=A.memoizedProps,G=A.stateNode;try{Jd(G,T,L,A)}catch(q){gt(A,A.return,q)}}function qa(A,T,L){try{eh(A.stateNode,A.type,L,T,A)}catch(G){gt(A,A.return,G)}}function au(A){return A.tag===5||A.tag===3||(ir?A.tag===26:!1)||(Hn?A.tag===27&&Ro(A.type):!1)||A.tag===4}function rs(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||au(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(Hn&&A.tag===27&&Ro(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function jl(A,T,L){var G=A.tag;if(G===5||G===6)A=A.stateNode,T?nh(L,A,T):Tu(L,A);else if(G!==4&&(Hn&&G===27&&Ro(A.type)&&(L=A.stateNode,T=null),A=A.child,A!==null))for(jl(A,T,L),A=A.sibling;A!==null;)jl(A,T,L),A=A.sibling}function Ka(A,T,L){var G=A.tag;if(G===5||G===6)A=A.stateNode,T?th(L,A,T):Au(L,A);else if(G!==4&&(Hn&&G===27&&Ro(A.type)&&(L=A.stateNode),A=A.child,A!==null))for(Ka(A,T,L),A=A.sibling;A!==null;)Ka(A,T,L),A=A.sibling}function lu(A,T,L){A=A.containerInfo;try{Ou(A,L)}catch(G){gt(T,T.return,G)}}function Hd(A){var T=A.stateNode,L=A.memoizedProps;try{Ln(A.type,L,T,A)}catch(G){gt(A,A.return,G)}}function rf(A,T){for(ac(A.containerInfo),_n=T;_n!==null;)if(A=_n,T=A.child,(A.subtreeFlags&1028)!==0&&T!==null)T.return=A,_n=T;else for(;_n!==null;){A=_n;var L=A.alternate;switch(T=A.flags,A.tag){case 0:if((T&4)!==0&&(T=A.updateQueue,T=T!==null?T.events:null,T!==null))for(var G=0;G<T.length;G++){var q=T[G];q.ref.impl=q.nextImpl}break;case 11:case 15:break;case 1:if((T&1024)!==0&&L!==null){T=void 0,G=A,q=L.memoizedProps,L=L.memoizedState;var Y=G.stateNode;try{var ge=co(G.type,q);T=Y.getSnapshotBeforeUpdate(ge,L),Y.__reactInternalSnapshotBeforeUpdate=T}catch(Ae){gt(G,G.return,Ae)}}break;case 3:(T&1024)!==0&&It&&Pu(A.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((T&1024)!==0)throw Error(u(163))}if(T=A.sibling,T!==null){T.return=A.return,_n=T;break}_n=A.return}}function Vd(A,T,L){var G=L.flags;switch(L.tag){case 0:case 11:case 15:hi(A,L),G&4&&Ar(5,L);break;case 1:if(hi(A,L),G&4)if(A=L.stateNode,T===null)try{A.componentDidMount()}catch(ge){gt(L,L.return,ge)}else{var q=co(L.type,T.memoizedProps);T=T.memoizedState;try{A.componentDidUpdate(q,T,A.__reactInternalSnapshotBeforeUpdate)}catch(ge){gt(L,L.return,ge)}}G&64&&Zo(L),G&512&&Jo(L,L.return);break;case 3:if(hi(A,L),G&64&&(G=L.updateQueue,G!==null)){if(A=null,L.child!==null)switch(L.child.tag){case 27:case 5:A=ua(L.child.stateNode);break;case 1:A=L.child.stateNode}try{so(G,A)}catch(ge){gt(L,L.return,ge)}}break;case 27:Hn&&T===null&&G&4&&Hd(L);case 26:case 5:if(hi(A,L),T===null){if(G&4)po(L);else if(G&64){A=L.type,T=L.memoizedProps,q=L.stateNode;try{xh(q,A,T,L)}catch(ge){gt(L,L.return,ge)}}}G&512&&Jo(L,L.return);break;case 12:hi(A,L);break;case 31:hi(A,L),G&4&&Qi(A,L);break;case 13:hi(A,L),G&4&&Xa(A,L),G&64&&(G=L.memoizedState,G!==null&&(G=G.dehydrated,G!==null&&(L=sf.bind(null,L),pc(G,L))));break;case 22:if(G=L.memoizedState!==null||En,!G){T=T!==null&&T.memoizedState!==null||xn,q=En;var Y=xn;En=G,(xn=T)&&!Y?Ji(A,L,(L.subtreeFlags&8772)!==0):hi(A,L),En=q,xn=Y}break;case 30:break;default:hi(A,L)}}function cu(A){var T=A.alternate;T!==null&&(A.alternate=null,cu(T)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(T=A.stateNode,T!==null&&lc(T)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}function Xi(A,T,L){for(L=L.child;L!==null;)Ya(A,T,L),L=L.sibling}function Ya(A,T,L){if(Di&&typeof Di.onCommitFiberUnmount=="function")try{Di.onCommitFiberUnmount(_o,L)}catch{}switch(L.tag){case 26:if(ir){xn||oi(L,T),Xi(A,T,L),L.memoizedState?Ws(L.memoizedState):L.stateNode&&ju(L.stateNode);break}case 27:if(Hn){xn||oi(L,T);var G=mn,q=Dn;Ro(L.type)&&(mn=L.stateNode,Dn=!1),Xi(A,T,L),$n(L.stateNode),mn=G,Dn=q;break}case 5:xn||oi(L,T);case 6:if(It){if(G=mn,q=Dn,mn=null,Xi(A,T,L),mn=G,Dn=q,mn!==null)if(Dn)try{_u(mn,L.stateNode)}catch(Y){gt(L,T,Y)}else try{ih(mn,L.stateNode)}catch(Y){gt(L,T,Y)}}else Xi(A,T,L);break;case 18:It&&mn!==null&&(Dn?gc(mn,L.stateNode):Hu(mn,L.stateNode));break;case 4:It?(G=mn,q=Dn,mn=L.stateNode.containerInfo,Dn=!0,Xi(A,T,L),mn=G,Dn=q):(Vi&&lu(L.stateNode,L,Mu()),Xi(A,T,L));break;case 0:case 11:case 14:case 15:Tr(2,L,T),xn||Tr(4,L,T),Xi(A,T,L);break;case 1:xn||(oi(L,T),G=L.stateNode,typeof G.componentWillUnmount=="function"&&Wl(L,T,G)),Xi(A,T,L);break;case 21:Xi(A,T,L);break;case 22:xn=(G=xn)||L.memoizedState!==null,Xi(A,T,L),xn=G;break;default:Xi(A,T,L)}}function Qi(A,T){if(on&&T.memoizedState===null&&(A=T.alternate,A!==null&&(A=A.memoizedState,A!==null))){A=A.dehydrated;try{cf(A)}catch(L){gt(T,T.return,L)}}}function Xa(A,T){if(on&&T.memoizedState===null&&(A=T.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{uf(A)}catch(L){gt(T,T.return,L)}}function Zi(A){switch(A.tag){case 31:case 13:case 19:var T=A.stateNode;return T===null&&(T=A.stateNode=new td),T;case 22:return A=A.stateNode,T=A._retryCache,T===null&&(T=A._retryCache=new td),T;default:throw Error(u(435,A.tag))}}function ss(A,T){var L=Zi(A);T.forEach(function(G){if(!L.has(G)){L.add(G);var q=of.bind(null,A,G);G.then(q,q)}})}function Wn(A,T){var L=T.deletions;if(L!==null)for(var G=0;G<L.length;G++){var q=L[G],Y=A,ge=T;if(It){var Ae=ge;e:for(;Ae!==null;){switch(Ae.tag){case 27:if(Hn){if(Ro(Ae.type)){mn=Ae.stateNode,Dn=!1;break e}break}case 5:mn=Ae.stateNode,Dn=!1;break e;case 3:case 4:mn=Ae.stateNode.containerInfo,Dn=!0;break e}Ae=Ae.return}if(mn===null)throw Error(u(160));Ya(Y,ge,q),mn=null,Dn=!1}else Ya(Y,ge,q);Y=q.alternate,Y!==null&&(Y.return=null),q.return=null}if(T.subtreeFlags&13886)for(T=T.child;T!==null;)Qa(T,A),T=T.sibling}function Qa(A,T){var L=A.alternate,G=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:Wn(T,A),jn(A),G&4&&(Tr(3,A,A.return),Ar(3,A),Tr(5,A,A.return));break;case 1:Wn(T,A),jn(A),G&512&&(xn||L===null||oi(L,L.return)),G&64&&En&&(A=A.updateQueue,A!==null&&(G=A.callbacks,G!==null&&(L=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=L===null?G:L.concat(G))));break;case 26:if(ir){var q=jt;if(Wn(T,A),jn(A),G&512&&(xn||L===null||oi(L,L.return)),G&4){G=L!==null?L.memoizedState:null;var Y=A.memoizedState;L===null?Y===null?A.stateNode===null?A.stateNode=Ph(q,A.type,A.memoizedProps,A):Wu(q,A.type,A.stateNode):A.stateNode=Uu(q,Y,A.memoizedProps):G!==Y?(G===null?L.stateNode!==null&&ju(L.stateNode):Ws(G),Y===null?Wu(q,A.type,A.stateNode):Uu(q,Y,A.memoizedProps)):Y===null&&A.stateNode!==null&&qa(A,A.memoizedProps,L.memoizedProps)}break}case 27:if(Hn){Wn(T,A),jn(A),G&512&&(xn||L===null||oi(L,L.return)),L!==null&&G&4&&qa(A,A.memoizedProps,L.memoizedProps);break}case 5:if(Wn(T,A),jn(A),G&512&&(xn||L===null||oi(L,L.return)),It){if(A.flags&32){q=A.stateNode;try{Du(q)}catch(Je){gt(A,A.return,Je)}}G&4&&A.stateNode!=null&&(q=A.memoizedProps,qa(A,q,L!==null?L.memoizedProps:q)),G&1024&&(va=!0)}else Vi&&A.alternate!==null&&(A.alternate.stateNode=A.stateNode);break;case 6:if(Wn(T,A),jn(A),G&4&&It){if(A.stateNode===null)throw Error(u(162));G=A.memoizedProps,L=L!==null?L.memoizedProps:G,q=A.stateNode;try{Zd(q,L,G)}catch(Je){gt(A,A.return,Je)}}break;case 3:if(ir?(Mh(),q=jt,jt=cl(T.containerInfo),Wn(T,A),jt=q):Wn(T,A),jn(A),G&4){if(It&&on&&L!==null&&L.memoizedState.isDehydrated)try{Rh(T.containerInfo)}catch(Je){gt(A,A.return,Je)}if(Vi){G=T.containerInfo,L=T.pendingChildren;try{Ou(G,L)}catch(Je){gt(A,A.return,Je)}}}va&&(va=!1,$l(A));break;case 4:ir?(L=jt,jt=cl(A.stateNode.containerInfo),Wn(T,A),jn(A),jt=L):(Wn(T,A),jn(A)),G&4&&Vi&&lu(A.stateNode,A,A.stateNode.pendingChildren);break;case 12:Wn(T,A),jn(A);break;case 31:Wn(T,A),jn(A),G&4&&(G=A.updateQueue,G!==null&&(A.updateQueue=null,ss(A,G)));break;case 13:Wn(T,A),jn(A),A.child.flags&8192&&A.memoizedState!==null!=(L!==null&&L.memoizedState!==null)&&(Cl=ai()),G&4&&(G=A.updateQueue,G!==null&&(A.updateQueue=null,ss(A,G)));break;case 22:q=A.memoizedState!==null;var ge=L!==null&&L.memoizedState!==null,Ae=En,ze=xn;if(En=Ae||q,xn=ze||ge,Wn(T,A),xn=ze,En=Ae,jn(A),G&8192&&(T=A.stateNode,T._visibility=q?T._visibility&-2:T._visibility|1,q&&(L===null||ge||En||xn||Ms(A)),It)){e:if(L=null,It)for(T=A;;){if(T.tag===5||ir&&T.tag===26){if(L===null){ge=L=T;try{Y=ge.stateNode,q?af(Y):sh(ge.stateNode,ge.memoizedProps)}catch(Je){gt(ge,ge.return,Je)}}}else if(T.tag===6){if(L===null){ge=T;try{var Qe=ge.stateNode;q?rh(Qe):oh(Qe,ge.memoizedProps)}catch(Je){gt(ge,ge.return,Je)}}}else if(T.tag===18){if(L===null){ge=T;try{var tt=ge.stateNode;q?Th(tt):_h(ge.stateNode)}catch(Je){gt(ge,ge.return,Je)}}}else if((T.tag!==22&&T.tag!==23||T.memoizedState===null||T===A)&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===A)break e;for(;T.sibling===null;){if(T.return===null||T.return===A)break e;L===T&&(L=null),T=T.return}L===T&&(L=null),T.sibling.return=T.return,T=T.sibling}}G&4&&(G=A.updateQueue,G!==null&&(L=G.retryQueue,L!==null&&(G.retryQueue=null,ss(A,L))));break;case 19:Wn(T,A),jn(A),G&4&&(G=A.updateQueue,G!==null&&(A.updateQueue=null,ss(A,G)));break;case 30:break;case 21:break;default:Wn(T,A),jn(A)}}function jn(A){var T=A.flags;if(T&2){try{for(var L,G=A.return;G!==null;){if(au(G)){L=G;break}G=G.return}if(It){if(L==null)throw Error(u(160));switch(L.tag){case 27:if(Hn){var q=L.stateNode,Y=rs(A);Ka(A,Y,q);break}case 5:var ge=L.stateNode;L.flags&32&&(Du(ge),L.flags&=-33);var Ae=rs(A);Ka(A,Ae,ge);break;case 3:case 4:var ze=L.stateNode.containerInfo,Qe=rs(A);jl(A,Qe,ze);break;default:throw Error(u(161))}}}catch(tt){gt(A,A.return,tt)}A.flags&=-3}T&4096&&(A.flags&=-4097)}function $l(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var T=A;$l(T),T.tag===5&&T.flags&1024&&wu(T.stateNode),A=A.sibling}}function hi(A,T){if(T.subtreeFlags&8772)for(T=T.child;T!==null;)Vd(A,T.alternate,T),T=T.sibling}function Ms(A){for(A=A.child;A!==null;){var T=A;switch(T.tag){case 0:case 11:case 14:case 15:Tr(4,T,T.return),Ms(T);break;case 1:oi(T,T.return);var L=T.stateNode;typeof L.componentWillUnmount=="function"&&Wl(T,T.return,L),Ms(T);break;case 27:Hn&&$n(T.stateNode);case 26:case 5:oi(T,T.return),Ms(T);break;case 22:T.memoizedState===null&&Ms(T);break;case 30:Ms(T);break;default:Ms(T)}A=A.sibling}}function Ji(A,T,L){for(L=L&&(T.subtreeFlags&8772)!==0,T=T.child;T!==null;){var G=T.alternate,q=A,Y=T,ge=Y.flags;switch(Y.tag){case 0:case 11:case 15:Ji(q,Y,L),Ar(4,Y);break;case 1:if(Ji(q,Y,L),G=Y,q=G.stateNode,typeof q.componentDidMount=="function")try{q.componentDidMount()}catch(Qe){gt(G,G.return,Qe)}if(G=Y,q=G.updateQueue,q!==null){var Ae=G.stateNode;try{var ze=q.shared.hiddenCallbacks;if(ze!==null)for(q.shared.hiddenCallbacks=null,q=0;q<ze.length;q++)ro(ze[q],Ae)}catch(Qe){gt(G,G.return,Qe)}}L&&ge&64&&Zo(Y),Jo(Y,Y.return);break;case 27:Hn&&Hd(Y);case 26:case 5:Ji(q,Y,L),L&&G===null&&ge&4&&po(Y),Jo(Y,Y.return);break;case 12:Ji(q,Y,L);break;case 31:Ji(q,Y,L),L&&ge&4&&Qi(q,Y);break;case 13:Ji(q,Y,L),L&&ge&4&&Xa(q,Y);break;case 22:Y.memoizedState===null&&Ji(q,Y,L),Jo(Y,Y.return);break;case 30:break;default:Ji(q,Y,L)}T=T.sibling}}function Fs(A,T){var L=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(L=A.memoizedState.cachePool.pool),A=null,T.memoizedState!==null&&T.memoizedState.cachePool!==null&&(A=T.memoizedState.cachePool.pool),A!==L&&(A!=null&&A.refCount++,L!=null&&en(L))}function uu(A,T){A=null,T.alternate!==null&&(A=T.alternate.memoizedState.cache),T=T.memoizedState.cache,T!==A&&(T.refCount++,A!=null&&en(A))}function hn(A,T,L,G){if(T.subtreeFlags&10256)for(T=T.child;T!==null;)ql(A,T,L,G),T=T.sibling}function ql(A,T,L,G){var q=T.flags;switch(T.tag){case 0:case 11:case 15:hn(A,T,L,G),q&2048&&Ar(9,T);break;case 1:hn(A,T,L,G);break;case 3:hn(A,T,L,G),q&2048&&(A=null,T.alternate!==null&&(A=T.alternate.memoizedState.cache),T=T.memoizedState.cache,T!==A&&(T.refCount++,A!=null&&en(A)));break;case 12:if(q&2048){hn(A,T,L,G),A=T.stateNode;try{var Y=T.memoizedProps,ge=Y.id,Ae=Y.onPostCommit;typeof Ae=="function"&&Ae(ge,T.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(ze){gt(T,T.return,ze)}}else hn(A,T,L,G);break;case 31:hn(A,T,L,G);break;case 13:hn(A,T,L,G);break;case 23:break;case 22:Y=T.stateNode,ge=T.alternate,T.memoizedState!==null?Y._visibility&2?hn(A,T,L,G):ea(A,T):Y._visibility&2?hn(A,T,L,G):(Y._visibility|=2,Ei(A,T,L,G,(T.subtreeFlags&10256)!==0||!1)),q&2048&&Fs(ge,T);break;case 24:hn(A,T,L,G),q&2048&&uu(T.alternate,T);break;default:hn(A,T,L,G)}}function Ei(A,T,L,G,q){for(q=q&&((T.subtreeFlags&10256)!==0||!1),T=T.child;T!==null;){var Y=A,ge=T,Ae=L,ze=G,Qe=ge.flags;switch(ge.tag){case 0:case 11:case 15:Ei(Y,ge,Ae,ze,q),Ar(8,ge);break;case 23:break;case 22:var tt=ge.stateNode;ge.memoizedState!==null?tt._visibility&2?Ei(Y,ge,Ae,ze,q):ea(Y,ge):(tt._visibility|=2,Ei(Y,ge,Ae,ze,q)),q&&Qe&2048&&Fs(ge.alternate,ge);break;case 24:Ei(Y,ge,Ae,ze,q),q&&Qe&2048&&uu(ge.alternate,ge);break;default:Ei(Y,ge,Ae,ze,q)}T=T.sibling}}function ea(A,T){if(T.subtreeFlags&10256)for(T=T.child;T!==null;){var L=A,G=T,q=G.flags;switch(G.tag){case 22:ea(L,G),q&2048&&Fs(G.alternate,G);break;case 24:ea(L,G),q&2048&&uu(G.alternate,G);break;default:ea(L,G)}T=T.sibling}}function _r(A,T,L){if(A.subtreeFlags&ji)for(A=A.child;A!==null;)Os(A,T,L),A=A.sibling}function Os(A,T,L){switch(A.tag){case 26:if(_r(A,T,L),A.flags&ji)if(A.memoizedState!==null)Fh(L,jt,A.memoizedState,A.memoizedProps);else{var G=A.stateNode,q=A.type;A=A.memoizedProps,((T&335544128)===T||Su(q,A))&&cc(L,G,q,A)}break;case 5:_r(A,T,L),A.flags&ji&&(G=A.stateNode,q=A.type,A=A.memoizedProps,((T&335544128)===T||Su(q,A))&&cc(L,G,q,A));break;case 3:case 4:ir?(G=jt,jt=cl(A.stateNode.containerInfo),_r(A,T,L),jt=G):_r(A,T,L);break;case 22:A.memoizedState===null&&(G=A.alternate,G!==null&&G.memoizedState!==null?(G=ji,ji=16777216,_r(A,T,L),ji=G):_r(A,T,L));break;default:_r(A,T,L)}}function Kl(A){var T=A.alternate;if(T!==null&&(A=T.child,A!==null)){T.child=null;do T=A.sibling,A.sibling=null,A=T;while(A!==null)}}function ta(A){var T=A.deletions;if((A.flags&16)!==0){if(T!==null)for(var L=0;L<T.length;L++){var G=T[L];_n=G,Bi(G,A)}Kl(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)Yl(A),A=A.sibling}function Yl(A){switch(A.tag){case 0:case 11:case 15:ta(A),A.flags&2048&&Tr(9,A,A.return);break;case 3:ta(A);break;case 12:ta(A);break;case 22:var T=A.stateNode;A.memoizedState!==null&&T._visibility&2&&(A.return===null||A.return.tag!==13)?(T._visibility&=-3,Za(A)):ta(A);break;default:ta(A)}}function Za(A){var T=A.deletions;if((A.flags&16)!==0){if(T!==null)for(var L=0;L<T.length;L++){var G=T[L];_n=G,Bi(G,A)}Kl(A)}for(A=A.child;A!==null;){switch(T=A,T.tag){case 0:case 11:case 15:Tr(8,T,T.return),Za(T);break;case 22:L=T.stateNode,L._visibility&2&&(L._visibility&=-3,Za(T));break;default:Za(T)}A=A.sibling}}function Bi(A,T){for(;_n!==null;){var L=_n;switch(L.tag){case 0:case 11:case 15:Tr(8,L,T);break;case 23:case 22:if(L.memoizedState!==null&&L.memoizedState.cachePool!==null){var G=L.memoizedState.cachePool.pool;G!=null&&G.refCount++}break;case 24:en(L.memoizedState.cache)}if(G=L.child,G!==null)G.return=L,_n=G;else e:for(L=A;_n!==null;){G=_n;var q=G.sibling,Y=G.return;if(cu(G),G===L){_n=null;break e}if(q!==null){q.return=Y,_n=q;break e}_n=Y}}}function Is(A){var T=Ct(A);if(T!=null){if(typeof T.memoizedProps["data-testname"]!="string")throw Error(u(364));return T}if(A=An(A),A===null)throw Error(u(362));return A.stateNode.current}function Ls(A,T){var L=A.tag;switch(T.$$typeof){case dr:if(A.type===T.value)return!0;break;case Ca:e:{for(T=T.value,A=[A,0],L=0;L<A.length;){var G=A[L++],q=G.tag,Y=A[L++],ge=T[Y];if(q!==5&&q!==26&&q!==27||!zs(G)){for(;ge!=null&&Ls(G,ge);)Y++,ge=T[Y];if(Y===T.length){T=!0;break e}else for(G=G.child;G!==null;)A.push(G,Y),G=G.sibling}}T=!1}return T;case Sa:if((L===5||L===26||L===27)&&Ru(A.stateNode,T.value))return!0;break;case Xs:if((L===5||L===6||L===26||L===27)&&(A=al(A),A!==null&&0<=A.indexOf(T.value)))return!0;break;case vl:if((L===5||L===26||L===27)&&(A=A.memoizedProps["data-testname"],typeof A=="string"&&A.toLowerCase()===T.value.toLowerCase()))return!0;break;default:throw Error(u(365))}return!1}function na(A){switch(A.$$typeof){case dr:return"<"+(R(A.value)||"Unknown")+">";case Ca:return":has("+(na(A)||"")+")";case Sa:return'[role="'+A.value+'"]';case Xs:return'"'+A.value+'"';case vl:return'[data-testname="'+A.value+'"]';default:throw Error(u(365))}}function ia(A,T){var L=[];A=[A,0];for(var G=0;G<A.length;){var q=A[G++],Y=q.tag,ge=A[G++],Ae=T[ge];if(Y!==5&&Y!==26&&Y!==27||!zs(q)){for(;Ae!=null&&Ls(q,Ae);)ge++,Ae=T[ge];if(ge===T.length)L.push(q);else for(q=q.child;q!==null;)A.push(q,ge),q=q.sibling}}return L}function xi(A,T){if(!Gn)throw Error(u(363));A=Is(A),A=ia(A,T),T=[],A=Array.from(A);for(var L=0;L<A.length;){var G=A[L++],q=G.tag;if(q===5||q===26||q===27)zs(G)||T.push(G.stateNode);else for(G=G.child;G!==null;)A.push(G),G=G.sibling}return T}function sn(){return(Tt&2)!==0&&Ft!==0?Ft&-Ft:ut.T!==null?st():ha()}function os(){if(Si===0)if((Ft&536870912)===0||Mt){var A=To;To<<=1,(To&3932160)===0&&(To=262144),Si=A}else Si=536870912;return A=Pi.current,A!==null&&(A.flags|=32),Si}function fn(A,T,L){(A===Rt&&($t===2||$t===9)||A.cancelPendingCommit!==null)&&(bn(A,0),Pr(A,Ft,Si,!1)),j(A,L),((Tt&2)===0||A!==Rt)&&(A===Rt&&((Tt&2)===0&&(Js|=L),vn===4&&Pr(A,Ft,Si,!1)),wt(A))}function mr(A,T,L){if((Tt&6)!==0)throw Error(u(327));var G=!L&&(T&127)===0&&(T&A.expiredLanes)===0||H(A,T),q=G?Wd(A,T):Mr(A,T,!0),Y=G;do{if(q===0){Qs&&!G&&Pr(A,T,0,!1);break}else{if(L=A.current.alternate,Y&&!zd(L)){q=Mr(A,T,!1),Y=!1;continue}if(q===2){if(Y=T,A.errorRecoveryDisabledLanes&Y)var ge=0;else ge=A.pendingLanes&-536870913,ge=ge!==0?ge:ge&536870912?536870912:0;if(ge!==0){T=ge;e:{var Ae=A;q=yl;var ze=on&&Ae.current.memoizedState.isDehydrated;if(ze&&(bn(Ae,ge).flags|=256),ge=Mr(Ae,ge,!1),ge!==2){if(Zs&&!ze){Ae.errorRecoveryDisabledLanes|=Y,Js|=Y,q=4;break e}Y=Mi,Mi=q,Y!==null&&(Mi===null?Mi=Y:Mi.push.apply(Mi,Y))}q=ge}if(Y=!1,q!==2)continue}}if(q===1){bn(A,0),Pr(A,T,0,!0);break}e:{switch(G=A,Y=q,Y){case 0:case 1:throw Error(u(345));case 4:if((T&4194048)!==T)break;case 6:Pr(G,T,Si,!Sr);break e;case 2:Mi=null;break;case 3:case 5:break;default:throw Error(u(329))}if((T&62914560)===T&&(q=Cl+300-ai(),10<q)){if(Pr(G,T,Si,!Sr),B(G,0,!0)!==0)break e;$r=T,G.timeoutHandle=Cu(Dr.bind(null,G,L,Mi,Sl,Mc,T,Si,Js,wa,Sr,Y,"Throttled",-0,0),q);break e}Dr(G,L,Mi,Sl,Mc,T,Si,Js,wa,Sr,Y,null,-0,0)}}break}while(!0);wt(A)}function Dr(A,T,L,G,q,Y,ge,Ae,ze,Qe,tt,Je,rt,yt){if(A.timeoutHandle=Ti,Je=T.subtreeFlags,Je&8192||(Je&16785408)===16785408){Je=bu(),Os(T,Y,Je);var Yn=(Y&62914560)===Y?Cl-ai():(Y&4194048)===Y?Io-ai():0;if(Yn=Qd(Je,Yn),Yn!==null){$r=Y,A.cancelPendingCommit=Yn(Or.bind(null,A,T,Y,L,G,q,ge,Ae,ze,tt,Je,null,rt,yt)),Pr(A,Y,ge,!Qe);return}}Or(A,T,Y,L,G,q,ge,Ae,ze)}function zd(A){for(var T=A;;){var L=T.tag;if((L===0||L===11||L===15)&&T.flags&16384&&(L=T.updateQueue,L!==null&&(L=L.stores,L!==null)))for(var G=0;G<L.length;G++){var q=L[G],Y=q.getSnapshot;q=q.value;try{if(!Tn(Y(),q))return!1}catch{return!1}}if(L=T.child,T.subtreeFlags&16384&&L!==null)L.return=T,T=L;else{if(T===A)break;for(;T.sibling===null;){if(T.return===null||T.return===A)return!0;T=T.return}T.sibling.return=T.return,T=T.sibling}}return!0}function Pr(A,T,L,G){T&=~ba,T&=~Js,A.suspendedLanes|=T,A.pingedLanes&=~T,G&&(A.warmLanes|=T),G=A.expirationTimes;for(var q=T;0<q;){var Y=31-_i(q),ge=1<<Y;G[Y]=-1,q&=~ge}L!==0&&ie(A,L,T)}function Xl(){return(Tt&6)===0?(Bn(0),!1):!0}function Ql(){if(_t!==null){if($t===0)var A=_t.return;else A=_t,yr=Qt=null,La(A),qs=null,Do=0,A=_t;for(;A!==null;)Gd(A.alternate,A),A=A.return;_t=null}}function bn(A,T){var L=A.timeoutHandle;L!==Ti&&(A.timeoutHandle=Ti,Xd(L)),L=A.cancelPendingCommit,L!==null&&(A.cancelPendingCommit=null,L()),$r=0,Ql(),Rt=A,_t=L=Hi(A.current,null),Ft=T,$t=0,Nn=null,Sr=!1,Qs=H(A,T),Zs=!1,wa=Si=ba=Js=ys=vn=0,Mi=yl=null,Mc=!1,(T&8)!==0&&(T|=T&32);var G=A.entangledLanes;if(G!==0)for(A=A.entanglements,G&=T;0<G;){var q=31-_i(G),Y=1<<q;T|=A[q],G&=~Y}return jr=T,Mn(),L}function Xt(A,T){St=null,ut.H=Wi,T===Un||T===cr?(T=un(),$t=3):T===Dc?(T=un(),$t=4):$t=T===Ci?8:T!==null&&typeof T=="object"&&typeof T.then=="function"?6:1,Nn=T,_t===null&&(vn=1,Hl(A,Z(T,A.current)))}function Ot(){var A=Pi.current;return A===null?!0:(Ft&4194048)===Ft?yi===null:(Ft&62914560)===Ft||(Ft&536870912)!==0?A===yi:!1}function as(){var A=ut.H;return ut.H=Wi,A===null?Wi:A}function Gi(){var A=ut.A;return ut.A=ya,A}function ra(){vn=4,Sr||(Ft&4194048)!==Ft&&Pi.current!==null||(Qs=!0),(ys&134217727)===0&&(Js&134217727)===0||Rt===null||Pr(Rt,Ft,Si,!1)}function Mr(A,T,L){var G=Tt;Tt|=2;var q=as(),Y=Gi();(Rt!==A||Ft!==T)&&(Sl=null,bn(A,T)),T=!1;var ge=vn;e:do try{if($t!==0&&_t!==null){var Ae=_t,ze=Nn;switch($t){case 8:Ql(),ge=6;break e;case 3:case 2:case 9:case 6:Pi.current===null&&(T=!0);var Qe=$t;if($t=0,Nn=null,Fr(A,Ae,ze,Qe),L&&Qs){ge=0;break e}break;default:Qe=$t,$t=0,Nn=null,Fr(A,Ae,ze,Qe)}}Ud(),ge=vn;break}catch(tt){Xt(A,tt)}while(!0);return T&&A.shellSuspendCounter++,yr=Qt=null,Tt=G,ut.H=q,ut.A=Y,_t===null&&(Rt=null,Ft=0,Mn()),ge}function Ud(){for(;_t!==null;)Ns(_t)}function Wd(A,T){var L=Tt;Tt|=2;var G=as(),q=Gi();Rt!==A||Ft!==T?(Sl=null,eo=ai()+500,bn(A,T)):Qs=H(A,T);e:do try{if($t!==0&&_t!==null){T=_t;var Y=Nn;t:switch($t){case 1:$t=0,Nn=null,Fr(A,T,Y,1);break;case 2:case 9:if(Oi(Y)){$t=0,Nn=null,Zl(T);break}T=function(){$t!==2&&$t!==9||Rt!==A||($t=7),wt(A)},Y.then(T,T);break e;case 3:$t=7;break e;case 4:$t=5;break e;case 7:Oi(Y)?($t=0,Nn=null,Zl(T)):($t=0,Nn=null,Fr(A,T,Y,7));break;case 5:var ge=null;switch(_t.tag){case 26:ge=_t.memoizedState;case 5:case 27:var Ae=_t,ze=Ae.type,Qe=Ae.pendingProps;if(ge?qu(ge):pn(Ae.stateNode,ze,Qe)){$t=0,Nn=null;var tt=Ae.sibling;if(tt!==null)_t=tt;else{var Je=Ae.return;Je!==null?(_t=Je,oa(Je)):_t=null}break t}}$t=0,Nn=null,Fr(A,T,Y,5);break;case 6:$t=0,Nn=null,Fr(A,T,Y,6);break;case 8:Ql(),vn=6;break e;default:throw Error(u(462))}}sa();break}catch(rt){Xt(A,rt)}while(!0);return yr=Qt=null,ut.H=G,ut.A=q,Tt=L,_t!==null?0:(Rt=null,Ft=0,Mn(),vn)}function sa(){for(;_t!==null&&!Ih();)Ns(_t)}function Ns(A){var T=iu(A.alternate,A,jr);A.memoizedProps=A.pendingProps,T===null?oa(A):_t=T}function Zl(A){var T=A,L=T.alternate;switch(T.tag){case 15:case 0:T=Qc(L,T,T.pendingProps,T.type,void 0,Ft);break;case 11:T=Qc(L,T,T.pendingProps,T.type.render,T.ref,Ft);break;case 5:La(T);default:Gd(L,T),T=_t=tc(T,jr),T=iu(L,T,jr)}A.memoizedProps=A.pendingProps,T===null?oa(A):_t=T}function Fr(A,T,L,G){yr=Qt=null,La(T),qs=null,Do=0;var q=T.return;try{if(nf(A,q,T,L,Ft)){vn=1,Hl(A,Z(L,A.current)),_t=null;return}}catch(Y){if(q!==null)throw _t=q,Y;vn=1,Hl(A,Z(L,A.current)),_t=null;return}T.flags&32768?(Mt||G===1?A=!0:Qs||(Ft&536870912)!==0?A=!1:(Sr=A=!0,(G===2||G===9||G===3||G===6)&&(G=Pi.current,G!==null&&G.tag===13&&(G.flags|=16384))),ks(T,A)):oa(T)}function oa(A){var T=A;do{if((T.flags&32768)!==0){ks(T,Sr);return}A=T.return;var L=Bd(T.alternate,T,jr);if(L!==null){_t=L;return}if(T=T.sibling,T!==null){_t=T;return}_t=T=A}while(T!==null);vn===0&&(vn=5)}function ks(A,T){do{var L=ou(A.alternate,A);if(L!==null){L.flags&=32767,_t=L;return}if(L=A.return,L!==null&&(L.flags|=32768,L.subtreeFlags=0,L.deletions=null),!T&&(A=A.sibling,A!==null)){_t=A;return}_t=A=L}while(A!==null);vn=6,_t=null}function Or(A,T,L,G,q,Y,ge,Ae,ze){A.cancelPendingCommit=null;do Lr();while(kn!==0);if((Tt&6)!==0)throw Error(u(327));if(T!==null){if(T===A.current)throw Error(u(177));if(Y=T.lanes|T.childLanes,Y|=Po,J(A,L,Y,ge,Ae,ze),A===Rt&&(_t=Rt=null,Ft=0),Lo=T,Ss=A,$r=L,Ea=Y,Fc=q,nd=G,(T.subtreeFlags&10256)!==0||(T.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,In(dl,function(){return Ja(),null})):(A.callbackNode=null,A.callbackPriority=0),G=(T.flags&13878)!==0,(T.subtreeFlags&13878)!==0||G){G=ut.T,ut.T=null,q=nr(),Pt(2),ge=Tt,Tt|=4;try{rf(A,T,L)}finally{Tt=ge,Pt(q),ut.T=G}}kn=1,ls(),Ir(),Jl()}}function ls(){if(kn===1){kn=0;var A=Ss,T=Lo,L=(T.flags&13878)!==0;if((T.subtreeFlags&13878)!==0||L){L=ut.T,ut.T=null;var G=nr();Pt(2);var q=Tt;Tt|=4;try{Qa(T,A),Yd(A.containerInfo)}finally{Tt=q,Pt(G),ut.T=L}}A.current=T,kn=2}}function Ir(){if(kn===2){kn=0;var A=Ss,T=Lo,L=(T.flags&8772)!==0;if((T.subtreeFlags&8772)!==0||L){L=ut.T,ut.T=null;var G=nr();Pt(2);var q=Tt;Tt|=4;try{Vd(A,T.alternate,T)}finally{Tt=q,Pt(G),ut.T=L}}kn=3}}function Jl(){if(kn===4||kn===3){kn=0,Yu();var A=Ss,T=Lo,L=$r,G=nd;(T.subtreeFlags&10256)!==0||(T.flags&10256)!==0?kn=5:(kn=0,Lo=Ss=null,ec(A,A.pendingLanes));var q=A.pendingLanes;if(q===0&&(Cs=null),Ce(L),T=T.stateNode,Di&&typeof Di.onCommitFiberRoot=="function")try{Di.onCommitFiberRoot(_o,T,void 0,(T.current.flags&128)===128)}catch{}if(G!==null){T=ut.T,q=nr(),Pt(2),ut.T=null;try{for(var Y=A.onRecoverableError,ge=0;ge<G.length;ge++){var Ae=G[ge];Y(Ae.value,{componentStack:Ae.stack})}}finally{ut.T=T,Pt(q)}}($r&3)!==0&&Lr(),wt(A),q=A.pendingLanes,(L&261930)!==0&&(q&42)!==0?A===bl?Gt++:(Gt=0,bl=A):Gt=0,on&&ll(),Bn(0)}}function ec(A,T){(A.pooledCacheLanes&=T)===0&&(T=A.pooledCache,T!=null&&(A.pooledCache=null,en(T)))}function Lr(){return ls(),Ir(),Jl(),Ja()}function Ja(){if(kn!==5)return!1;var A=Ss,T=Ea;Ea=0;var L=Ce($r),G=32>L?32:L;L=ut.T;var q=nr();try{Pt(G),ut.T=null,G=Fc,Fc=null;var Y=Ss,ge=$r;if(kn=0,Lo=Ss=null,$r=0,(Tt&6)!==0)throw Error(u(331));var Ae=Tt;if(Tt|=4,Yl(Y.current),ql(Y,Y.current,ge,G),Tt=Ae,Bn(0,!1),Di&&typeof Di.onPostCommitFiberRoot=="function")try{Di.onPostCommitFiberRoot(_o,Y)}catch{}return!0}finally{Pt(q),ut.T=L,ec(A,T)}}function Bs(A,T,L){T=Z(L,T),T=Yc(A.stateNode,T,2),A=Rs(A,T,2),A!==null&&(j(A,2),wt(A))}function gt(A,T,L){if(A.tag===3)Bs(A,A,L);else for(;T!==null;){if(T.tag===3){Bs(T,A,L);break}else if(T.tag===1){var G=T.stateNode;if(typeof T.type.getDerivedStateFromError=="function"||typeof G.componentDidCatch=="function"&&(Cs===null||!Cs.has(G))){A=Z(L,A),L=Ad(2),G=Rs(T,L,2),G!==null&&(Td(L,G,T,A),j(G,2),wt(G));break}}T=T.return}}function aa(A,T,L){var G=A.pingCache;if(G===null){G=A.pingCache=new $i;var q=new Set;G.set(T,q)}else q=G.get(T),q===void 0&&(q=new Set,G.set(T,q));q.has(L)||(Zs=!0,q.add(L),A=jd.bind(null,A,T,L),T.then(A,A))}function jd(A,T,L){var G=A.pingCache;G!==null&&G.delete(T),A.pingedLanes|=A.suspendedLanes&L,A.warmLanes&=~L,Rt===A&&(Ft&L)===L&&(vn===4||vn===3&&(Ft&62914560)===Ft&&300>ai()-Cl?(Tt&2)===0&&bn(A,0):ba|=L,wa===Ft&&(wa=0)),wt(A)}function $d(A,T){T===0&&(T=$()),A=Es(A,T),A!==null&&(j(A,T),wt(A))}function sf(A){var T=A.memoizedState,L=0;T!==null&&(L=T.retryLane),$d(A,L)}function of(A,T){var L=0;switch(A.tag){case 31:case 13:var G=A.stateNode,q=A.memoizedState;q!==null&&(L=q.retryLane);break;case 19:G=A.stateNode;break;case 22:G=A.stateNode._retryCache;break;default:throw Error(u(314))}G!==null&&G.delete(T),$d(A,L)}function In(A,T){return ul(A,T)}function du(A,T,L,G){this.tag=A,this.key=L,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=T,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=G,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function go(A){return A=A.prototype,!(!A||!A.isReactComponent)}function Hi(A,T){var L=A.alternate;return L===null?(L=n(A.tag,T,A.key,A.mode),L.elementType=A.elementType,L.type=A.type,L.stateNode=A.stateNode,L.alternate=A,A.alternate=L):(L.pendingProps=T,L.type=A.type,L.flags=0,L.subtreeFlags=0,L.deletions=null),L.flags=A.flags&65011712,L.childLanes=A.childLanes,L.lanes=A.lanes,L.child=A.child,L.memoizedProps=A.memoizedProps,L.memoizedState=A.memoizedState,L.updateQueue=A.updateQueue,T=A.dependencies,L.dependencies=T===null?null:{lanes:T.lanes,firstContext:T.firstContext},L.sibling=A.sibling,L.index=A.index,L.ref=A.ref,L.refCleanup=A.refCleanup,L}function tc(A,T){A.flags&=65011714;var L=A.alternate;return L===null?(A.childLanes=0,A.lanes=T,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=L.childLanes,A.lanes=L.lanes,A.child=L.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=L.memoizedProps,A.memoizedState=L.memoizedState,A.updateQueue=L.updateQueue,A.type=L.type,T=L.dependencies,A.dependencies=T===null?null:{lanes:T.lanes,firstContext:T.firstContext}),A}function cs(A,T,L,G,q,Y){var ge=0;if(G=A,typeof A=="function")go(A)&&(ge=1);else if(typeof A=="string")ge=ir&&Hn?mc(A,L,qn.current)?26:Ku(A)?27:5:ir?mc(A,L,qn.current)?26:5:Hn&&Ku(A)?27:5;else e:switch(A){case il:return A=n(31,L,T,q),A.elementType=il,A.lanes=Y,A;case Co:return er(L.children,q,Y,T);case So:ge=8,q|=24;break;case bo:return A=n(12,L,T,q|2),A.elementType=bo,A.lanes=Y,A;case sc:return A=n(13,L,T,q),A.elementType=sc,A.lanes=Y,A;case us:return A=n(19,L,T,q),A.elementType=us,A.lanes=Y,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case tr:ge=10;break e;case nl:ge=9;break e;case la:ge=11;break e;case oc:ge=14;break e;case fi:ge=16,G=null;break e}ge=29,L=Error(u(130,A===null?"null":typeof A,"")),G=null}return T=n(ge,L,T,q),T.elementType=A,T.type=G,T.lanes=Y,T}function er(A,T,L,G){return A=n(7,A,G,T),A.lanes=L,A}function hu(A,T,L){return A=n(6,A,null,T),A.lanes=L,A}function fu(A){var T=n(18,null,null,0);return T.stateNode=A,T}function pu(A,T,L){return T=n(4,A.children!==null?A.children:[],A.key,T),T.lanes=L,T.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},T}function qd(A,T,L,G,q,Y,ge,Ae,ze){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ti,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=z(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=z(0),this.hiddenUpdates=z(null),this.identifierPrefix=G,this.onUncaughtError=q,this.onCaughtError=Y,this.onRecoverableError=ge,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ze,this.incompleteTransitions=new Map}function Gs(A,T,L,G,q,Y,ge,Ae,ze,Qe,tt,Je){return A=new qd(A,T,L,ge,ze,Qe,tt,Je,Ae),T=1,Y===!0&&(T|=24),Y=n(3,null,null,T),A.current=Y,Y.stateNode=A,T=nn(),T.refCount++,A.pooledCache=T,T.refCount++,Y.memoizedState={element:G,isDehydrated:L,cache:T},ii(Y),A}function nc(A){return A?(A=Br,A):Br}function el(A){var T=A._reactInternals;if(T===void 0)throw typeof A.render=="function"?Error(u(188)):(A=Object.keys(A).join(","),Error(u(268,A)));return A=g(T),A=A!==null?v(A):null,A===null?null:ua(A.stateNode)}function gu(A,T,L,G,q,Y){q=nc(q),G.context===null?G.context=q:G.pendingContext=q,G=wr(T),G.payload={element:L},Y=Y===void 0?null:Y,Y!==null&&(G.callback=Y),L=Rs(A,G,T),L!==null&&(fn(L,A,T),Fa(L,A,T))}function mo(A,T){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var L=A.retryLane;A.retryLane=L!==0&&L<T?L:T}}function tl(A,T){mo(A,T),(A=A.alternate)&&mo(A,T)}var Et={},ic=requireReact(),Ri=requireScheduler(),rc=Object.assign,vo=Symbol.for("react.element"),Nr=Symbol.for("react.transitional.element"),yo=Symbol.for("react.portal"),Co=Symbol.for("react.fragment"),So=Symbol.for("react.strict_mode"),bo=Symbol.for("react.profiler"),nl=Symbol.for("react.consumer"),tr=Symbol.for("react.context"),la=Symbol.for("react.forward_ref"),sc=Symbol.for("react.suspense"),us=Symbol.for("react.suspense_list"),oc=Symbol.for("react.memo"),fi=Symbol.for("react.lazy"),il=Symbol.for("react.activity"),mu=Symbol.for("react.memo_cache_sentinel"),ds=Symbol.iterator,Hs=Symbol.for("react.client.reference"),Vs=Array.isArray,ut=ic.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,vu=t.rendererVersion,rl=t.rendererPackageName,ca=t.extraDevToolsConfig,ua=t.getPublicInstance,Kd=t.getRootHostContext,da=t.getChildHostContext,ac=t.prepareForCommit,Yd=t.resetAfterCommit,yu=t.createInstance;t.cloneMutableInstance;var sl=t.appendInitialChild,Ai=t.finalizeInitialChildren,gi=t.shouldSetTextContent,hs=t.createTextInstance;t.cloneMutableTextInstance;var Cu=t.scheduleTimeout,Xd=t.cancelTimeout,Ti=t.noTimeout,Rn=t.isPrimaryRenderer;t.warnsIfNotActing;var It=t.supportsMutation,Vi=t.supportsPersistence,on=t.supportsHydration,Ct=t.getInstanceFromNode;t.beforeActiveInstanceBlur;var qt=t.preparePortalMount;t.prepareScopeUpdate,t.getInstanceFromScope;var Pt=t.setCurrentUpdatePriority,nr=t.getCurrentUpdatePriority,ha=t.resolveUpdatePriority;t.trackSchedulerEvent,t.resolveEventType,t.resolveEventTimeStamp;var wo=t.shouldAttemptEagerTransition,lc=t.detachDeletedInstance;t.requestPostPaintCallback;var ol=t.maySuspendCommit,fa=t.maySuspendCommitOnUpdate,Su=t.maySuspendCommitInSyncRender,pn=t.preloadInstance,bu=t.startSuspendingCommit,cc=t.suspendInstance;t.suspendOnActiveViewTransition;var Qd=t.waitForCommitToBeReady;t.getSuspendedCommitReason;var Eo=t.NotPendingTransition,xo=t.HostTransitionContext,wu=t.resetFormInstance;t.bindToConsole;var Eu=t.supportsMicrotasks,xu=t.scheduleMicrotask,Gn=t.supportsTestSelectors,An=t.findFiberRoot,uc=t.getBoundingRect,al=t.getTextContent,zs=t.isHiddenSubtree,Ru=t.matchAccessibilityRole,fs=t.setFocusIfFocusable,dc=t.setupIntersectionObserver,Au=t.appendChild,Tu=t.appendChildToContainer,Zd=t.commitTextUpdate,Jd=t.commitMount,eh=t.commitUpdate,th=t.insertBefore,nh=t.insertInContainerBefore,ih=t.removeChild,_u=t.removeChildFromContainer,Du=t.resetTextContent,af=t.hideInstance,rh=t.hideTextInstance,sh=t.unhideInstance,oh=t.unhideTextInstance;t.cancelViewTransitionName,t.cancelRootViewTransitionName,t.restoreRootViewTransitionName,t.cloneRootViewTransitionContainer,t.removeRootViewTransitionClone,t.measureClonedInstance,t.hasInstanceChanged,t.hasInstanceAffectedParent,t.startViewTransition,t.startGestureTransition,t.stopViewTransition,t.getCurrentGestureOffset,t.createViewTransitionInstance;var Pu=t.clearContainer;t.createFragmentInstance,t.updateFragmentInstanceFiber,t.commitNewChildToFragmentInstance,t.deleteChildFromFragmentInstance;var ah=t.cloneInstance,Mu=t.createContainerChildSet,Fu=t.appendChildToContainerChildSet,lh=t.finalizeContainerChildren,Ou=t.replaceContainerChildren,ch=t.cloneHiddenInstance,Iu=t.cloneHiddenTextInstance,Us=t.isSuspenseInstancePending,hc=t.isSuspenseInstanceFallback,fc=t.getSuspenseInstanceFallbackErrorDetails,pc=t.registerSuspenseInstanceRetry,uh=t.canHydrateFormStateMarker,Lu=t.isFormStateMarkerMatching,dh=t.getNextHydratableSibling,hh=t.getNextHydratableSiblingAfterSingleton,fh=t.getFirstHydratableChild,ph=t.getFirstHydratableChildWithinContainer,gh=t.getFirstHydratableChildWithinActivityInstance,mh=t.getFirstHydratableChildWithinSuspenseInstance,Nu=t.getFirstHydratableChildWithinSingleton,yh=t.canHydrateInstance,Ch=t.canHydrateTextInstance,ku=t.canHydrateActivityInstance,Sh=t.canHydrateSuspenseInstance,bh=t.hydrateInstance,lf=t.hydrateTextInstance,Bu=t.hydrateActivityInstance,wh=t.hydrateSuspenseInstance,Eh=t.getNextHydratableInstanceAfterActivityInstance,Gu=t.getNextHydratableInstanceAfterSuspenseInstance,xh=t.commitHydratedInstance,Rh=t.commitHydratedContainer,cf=t.commitHydratedActivityInstance,uf=t.commitHydratedSuspenseInstance,Ah=t.finalizeHydratedChildren,ll=t.flushHydrationEvents;t.clearActivityBoundary;var Hu=t.clearSuspenseBoundary;t.clearActivityBoundaryFromContainer;var gc=t.clearSuspenseBoundaryFromContainer,Th=t.hideDehydratedBoundary,_h=t.unhideDehydratedBoundary,pa=t.shouldDeleteUnhydratedTailInstances;t.diffHydratedPropsForDevWarnings,t.diffHydratedTextForDevWarnings,t.describeHydratableInstanceForDevWarnings;var Dh=t.validateHydratableInstance,Vu=t.validateHydratableTextInstance,ir=t.supportsResources,mc=t.isHostHoistableType,cl=t.getHoistableRoot,zu=t.getResource,Uu=t.acquireResource,Ws=t.releaseResource,Ph=t.hydrateHoistable,Wu=t.mountHoistable,ju=t.unmountHoistable,vc=t.createHoistableInstance,Mh=t.prepareToCommitHoistables,$u=t.mayResourceSuspendCommit,qu=t.preloadResource,Fh=t.suspendResource,Hn=t.supportsSingletons,yc=t.resolveSingletonInstance,Ln=t.acquireSingletonInstance,$n=t.releaseSingletonInstance,Ku=t.isHostSingletonType,Ro=t.isSingletonScope,Cc=[],Ao=-1,Br={},_i=Math.clz32?Math.clz32:I,Sc=Math.log,Oh=Math.LN2,bc=256,To=262144,ga=4194304,ul=Ri.unstable_scheduleCallback,wc=Ri.unstable_cancelCallback,Ih=Ri.unstable_shouldYield,Yu=Ri.unstable_requestPaint,ai=Ri.unstable_now,Ec=Ri.unstable_ImmediatePriority,Lh=Ri.unstable_UserBlockingPriority,dl=Ri.unstable_NormalPriority,xc=Ri.unstable_IdlePriority,Xu=Ri.log,Nh=Ri.unstable_setDisableYieldValue,_o=null,Di=null,Tn=typeof Object.is=="function"?Object.is:xe,Rc=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var T=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(T))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)},df=Object.prototype.hasOwnProperty,Ac,Gr,hl=!1,Qu=new WeakMap,ps=[],Hr=0,Kt=null,fl=0,rr=[],zi=0,sr=null,Zn=1,vr="",qn=_(null),gs=_(null),Jn=_(null),pl=_(null),Vn=null,an=null,Mt=!1,Vr=null,mi=!1,Tc=Error(u(519)),or=_(null),Qt=null,yr=null,kh=typeof AbortController<"u"?AbortController:function(){var A=[],T=this.signal={aborted:!1,addEventListener:function(L,G){A.push(G)}};this.abort=function(){T.aborted=!0,A.forEach(function(L){return L()})}},Kn=Ri.unstable_scheduleCallback,hf=Ri.unstable_NormalPriority,cn={$$typeof:tr,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},gl=null,Wt=null,li=!1,ar=!1,_c=!1,js=0,ma=null,Zu=0,ms=0,zn=null,lr=ut.S;ut.S=function(A,T){Io=ai(),typeof T=="object"&&T!==null&&typeof T.then=="function"&&Vt(A,T),lr!==null&&lr(A,T)};var $s=_(null),Un=Error(u(460)),Dc=Error(u(474)),cr=Error(u(542)),zr={then:function(){}},vi=null,qs=null,Do=0,ei=Qr(!0),Ju=Qr(!1),ti=[],Ur=0,Po=0,Ui=!1,Pc=!1,Mo=_(null),Ks=_(0),Pi=_(null),yi=null,wn=_(0),vs=0,St=null,ct=null,mt=null,xt=!1,bt=!1,Lt=!1,ci=0,ur=0,Cr=null,ed=0,Wi={readContext:it,use:Vo,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useLayoutEffect:dn,useInsertionEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useSyncExternalStore:dn,useId:dn,useHostTransitionStatus:dn,useFormState:dn,useActionState:dn,useOptimistic:dn,useMemoCache:dn,useCacheRefresh:dn};Wi.useEffectEvent=dn;var gn={readContext:it,use:Vo,useCallback:function(A,T){return ri().memoizedState=[A,T===void 0?null:T],A},useContext:it,useEffect:Ga,useImperativeHandle:function(A,T,L){L=L!=null?L.concat([A]):null,lo(4194308,4,jo.bind(null,T,A),L)},useLayoutEffect:function(A,T){return lo(4194308,4,A,T)},useInsertionEffect:function(A,T){lo(4,2,A,T)},useMemo:function(A,T){var L=ri();T=T===void 0?null:T;var G=A();if(Lt){be(!0);try{A()}finally{be(!1)}}return L.memoizedState=[G,T],G},useReducer:function(A,T,L){var G=ri();if(L!==void 0){var q=L(T);if(Lt){be(!0);try{L(T)}finally{be(!1)}}}else q=T;return G.memoizedState=G.baseState=q,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:q},G.queue=A,A=A.dispatch=tf.bind(null,St,A),[G.memoizedState,A]},useRef:function(A){var T=ri();return A={current:A},T.memoizedState=A},useState:function(A){A=Vc(A);var T=A.queue,L=wd.bind(null,St,T);return T.dispatch=L,[A.memoizedState,L]},useDebugValue:Va,useDeferredValue:function(A,T){var L=ri();return qo(L,A,T)},useTransition:function(){var A=Vc(!1);return A=Cd.bind(null,St,A.queue,!0,!1),ri().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,T,L){var G=St,q=ri();if(Mt){if(L===void 0)throw Error(u(407));L=L()}else{if(L=T(),Rt===null)throw Error(u(349));(Ft&127)!==0||gd(G,T,L)}q.memoizedState=L;var Y={value:L,getSnapshot:T};return q.queue=Y,Ga(Hc.bind(null,G,Y,A),[A]),G.flags|=2048,ki(9,{destroy:void 0},Gc.bind(null,G,Y,L,T),null),L},useId:function(){var A=ri(),T=Rt.identifierPrefix;if(Mt){var L=vr,G=Zn;L=(G&~(1<<32-_i(G)-1)).toString(32)+L,T="_"+T+"R_"+L,L=ci++,0<L&&(T+="H"+L.toString(32)),T+="_"}else L=ed++,T="_"+T+"r_"+L.toString(32)+"_";return A.memoizedState=T},useHostTransitionStatus:$c,useFormState:Uc,useActionState:Uc,useOptimistic:function(A){var T=ri();T.memoizedState=T.baseState=A;var L={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return T.queue=L,T=kl.bind(null,St,!0,L),L.dispatch=T,[A,T]},useMemoCache:Tl,useCacheRefresh:function(){return ri().memoizedState=ef.bind(null,St)},useEffectEvent:function(A){var T=ri(),L={impl:A};return T.memoizedState=L,function(){if((Tt&2)!==0)throw Error(u(440));return L.impl.apply(void 0,arguments)}}},Wr={readContext:it,use:Vo,useCallback:Ll,useContext:it,useEffect:Wo,useImperativeHandle:yd,useInsertionEffect:Ds,useLayoutEffect:Ha,useMemo:$o,useReducer:ts,useRef:Il,useState:function(){return ts(gr)},useDebugValue:Va,useDeferredValue:function(A,T){var L=rn();return jc(L,ct.memoizedState,A,T)},useTransition:function(){var A=ts(gr)[0],T=rn().memoizedState;return[typeof A=="boolean"?A:si(A),T]},useSyncExternalStore:oo,useId:Nl,useHostTransitionStatus:$c,useFormState:zo,useActionState:zo,useOptimistic:function(A,T){var L=rn();return Na(L,ct,A,T)},useMemoCache:Tl,useCacheRefresh:bd};Wr.useEffectEvent=ui;var Ys={readContext:it,use:Vo,useCallback:Ll,useContext:it,useEffect:Wo,useImperativeHandle:yd,useInsertionEffect:Ds,useLayoutEffect:Ha,useMemo:$o,useReducer:Dl,useRef:Il,useState:function(){return Dl(gr)},useDebugValue:Va,useDeferredValue:function(A,T){var L=rn();return ct===null?qo(L,A,T):jc(L,ct.memoizedState,A,T)},useTransition:function(){var A=Dl(gr)[0],T=rn().memoizedState;return[typeof A=="boolean"?A:si(A),T]},useSyncExternalStore:oo,useId:Nl,useHostTransitionStatus:$c,useFormState:Uo,useActionState:Uo,useOptimistic:function(A,T){var L=rn();return ct!==null?Na(L,ct,A,T):(L.baseState=A,[A,L.queue.dispatch])},useMemoCache:Tl,useCacheRefresh:bd};Ys.useEffectEvent=ui;var ml={enqueueSetState:function(A,T,L){A=A._reactInternals;var G=sn(),q=wr(G);q.payload=T,L!=null&&(q.callback=L),T=Rs(A,q,G),T!==null&&(fn(T,A,G),Fa(T,A,G))},enqueueReplaceState:function(A,T,L){A=A._reactInternals;var G=sn(),q=wr(G);q.tag=1,q.payload=T,L!=null&&(q.callback=L),T=Rs(A,q,G),T!==null&&(fn(T,A,G),Fa(T,A,G))},enqueueForceUpdate:function(A,T){A=A._reactInternals;var L=sn(),G=wr(L);G.tag=2,T!=null&&(G.callback=T),T=Rs(A,G,L),T!==null&&(fn(T,A,L),Fa(T,A,L))}},Ci=Error(u(461)),tn=!1,Fo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},En=!1,xn=!1,va=!1,td=typeof WeakSet=="function"?WeakSet:Set,_n=null,mn=null,Dn=!1,jt=null,ji=8192,ya={getCacheForType:function(A){var T=it(cn),L=T.data.get(A);return L===void 0&&(L=A(),T.data.set(A,L)),L},cacheSignal:function(){return it(cn).controller.signal}},dr=0,Ca=1,Sa=2,vl=3,Xs=4;if(typeof Symbol=="function"&&Symbol.for){var Oo=Symbol.for;dr=Oo("selector.component"),Ca=Oo("selector.has_pseudo_class"),Sa=Oo("selector.role"),vl=Oo("selector.test_id"),Xs=Oo("selector.text")}var $i=typeof WeakMap=="function"?WeakMap:Map,Tt=0,Rt=null,_t=null,Ft=0,$t=0,Nn=null,Sr=!1,Qs=!1,Zs=!1,jr=0,vn=0,ys=0,Js=0,ba=0,Si=0,wa=0,yl=null,Mi=null,Mc=!1,Cl=0,Io=0,eo=1/0,Sl=null,Cs=null,kn=0,Ss=null,Lo=null,$r=0,Ea=0,Fc=null,nd=null,Gt=0,bl=null;return Et.attemptContinuousHydration=function(A){if(A.tag===13||A.tag===31){var T=Es(A,67108864);T!==null&&fn(T,A,67108864),tl(A,67108864)}},Et.attemptHydrationAtCurrentPriority=function(A){if(A.tag===13||A.tag===31){var T=sn();T=de(T);var L=Es(A,T);L!==null&&fn(L,A,T),tl(A,T)}},Et.attemptSynchronousHydration=function(A){switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var T=N(A.pendingLanes);if(T!==0){for(A.pendingLanes|=2,A.entangledLanes|=2;T;){var L=1<<31-_i(T);A.entanglements[1]|=L,T&=~L}wt(A),(Tt&6)===0&&(eo=ai()+500,Bn(0))}}break;case 31:case 13:T=Es(A,2),T!==null&&fn(T,A,2),Xl(),tl(A,2)}},Et.batchedUpdates=function(A,T){return A(T)},Et.createComponentSelector=function(A){return{$$typeof:dr,value:A}},Et.createContainer=function(A,T,L,G,q,Y,ge,Ae,ze,Qe){return Gs(A,T,!1,null,L,G,Y,null,ge,Ae,ze,Qe)},Et.createHasPseudoClassSelector=function(A){return{$$typeof:Ca,value:A}},Et.createHydrationContainer=function(A,T,L,G,q,Y,ge,Ae,ze,Qe,tt,Je,rt,yt){return A=Gs(L,G,!0,A,q,Y,Ae,yt,ze,Qe,tt,Je),A.context=nc(null),L=A.current,G=sn(),G=de(G),q=wr(G),q.callback=T??null,Rs(L,q,G),T=G,A.current.lanes=T,j(A,T),wt(A),A},Et.createPortal=function(A,T,L){var G=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yo,key:G==null?null:""+G,children:A,containerInfo:T,implementation:L}},Et.createRoleSelector=function(A){return{$$typeof:Sa,value:A}},Et.createTestNameSelector=function(A){return{$$typeof:vl,value:A}},Et.createTextSelector=function(A){return{$$typeof:Xs,value:A}},Et.defaultOnCaughtError=function(A){console.error(A)},Et.defaultOnRecoverableError=function(A){Rc(A)},Et.defaultOnUncaughtError=function(A){Rc(A)},Et.deferredUpdates=function(A){var T=ut.T,L=nr();try{return Pt(32),ut.T=null,A()}finally{Pt(L),ut.T=T}},Et.discreteUpdates=function(A,T,L,G,q){var Y=ut.T,ge=nr();try{return Pt(2),ut.T=null,A(T,L,G,q)}finally{Pt(ge),ut.T=Y,Tt===0&&(eo=ai()+500)}},Et.findAllNodes=xi,Et.findBoundingRects=function(A,T){if(!Gn)throw Error(u(363));T=xi(A,T),A=[];for(var L=0;L<T.length;L++)A.push(uc(T[L]));for(T=A.length-1;0<T;T--){L=A[T];for(var G=L.x,q=G+L.width,Y=L.y,ge=Y+L.height,Ae=T-1;0<=Ae;Ae--)if(T!==Ae){var ze=A[Ae],Qe=ze.x,tt=Qe+ze.width,Je=ze.y,rt=Je+ze.height;if(G>=Qe&&Y>=Je&&q<=tt&&ge<=rt){A.splice(T,1);break}else if(G!==Qe||L.width!==ze.width||rt<Y||Je>ge){if(!(Y!==Je||L.height!==ze.height||tt<G||Qe>q)){Qe>G&&(ze.width+=Qe-G,ze.x=G),tt<q&&(ze.width=q-Qe),A.splice(T,1);break}}else{Je>Y&&(ze.height+=Je-Y,ze.y=Y),rt<ge&&(ze.height=ge-Je),A.splice(T,1);break}}}return A},Et.findHostInstance=el,Et.findHostInstanceWithNoPortals=function(A){return A=g(A),A=A!==null?w(A):null,A===null?null:ua(A.stateNode)},Et.findHostInstanceWithWarning=function(A){return el(A)},Et.flushPassiveEffects=Lr,Et.flushSyncFromReconciler=function(A){var T=Tt;Tt|=1;var L=ut.T,G=nr();try{if(Pt(2),ut.T=null,A)return A()}finally{Pt(G),ut.T=L,Tt=T,(Tt&6)===0&&Bn(0)}},Et.flushSyncWork=Xl,Et.focusWithin=function(A,T){if(!Gn)throw Error(u(363));for(A=Is(A),T=ia(A,T),T=Array.from(T),A=0;A<T.length;){var L=T[A++],G=L.tag;if(!zs(L)){if((G===5||G===26||G===27)&&fs(L.stateNode))return!0;for(L=L.child;L!==null;)T.push(L),L=L.sibling}}return!1},Et.getFindAllNodesFailureDescription=function(A,T){if(!Gn)throw Error(u(363));var L=0,G=[];A=[Is(A),0];for(var q=0;q<A.length;){var Y=A[q++],ge=Y.tag,Ae=A[q++],ze=T[Ae];if((ge!==5&&ge!==26&&ge!==27||!zs(Y))&&(Ls(Y,ze)&&(G.push(na(ze)),Ae++,Ae>L&&(L=Ae)),Ae<T.length))for(Y=Y.child;Y!==null;)A.push(Y,Ae),Y=Y.sibling}if(L<T.length){for(A=[];L<T.length;L++)A.push(na(T[L]));return`findAllNodes was able to match part of the selector:
  `+(G.join(" > ")+`

No matching component was found for:
  `)+A.join(" > ")}return null},Et.getPublicRootInstance=function(A){if(A=A.current,!A.child)return null;switch(A.child.tag){case 27:case 5:return ua(A.child.stateNode);default:return A.child.stateNode}},Et.injectIntoDevTools=function(){var A={bundleType:0,version:vu,rendererPackageName:rl,currentDispatcherRef:ut,reconcilerVersion:"19.2.0"};if(ca!==null&&(A.rendererConfig=ca),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")A=!1;else{var T=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(T.isDisabled||!T.supportsFiber)A=!0;else{try{_o=T.inject(A),Di=T}catch{}A=!!T.checkDCE}}return A},Et.isAlreadyRendering=function(){return(Tt&6)!==0},Et.observeVisibleRects=function(A,T,L,G){if(!Gn)throw Error(u(363));A=xi(A,T);var q=dc(A,L,G).disconnect;return{disconnect:function(){q()}}},Et.shouldError=function(){return null},Et.shouldSuspend=function(){return!1},Et.startHostTransition=function(A,T,L,G){if(A.tag!==5)throw Error(u(476));var q=Sd(A).queue;Cd(A,q,T,Eo,L===null?o:function(){var Y=Sd(A);return Y.next===null&&(Y=A.alternate.memoizedState),za(A,Y.next.queue,{},sn()),L(G)})},Et.updateContainer=function(A,T,L,G){var q=T.current,Y=sn();return gu(q,Y,A,T,L,G),Y},Et.updateContainerSync=function(A,T,L,G){return gu(T.current,2,A,T,L,G),2},Et},e.exports.default=e.exports,Object.defineProperty(e.exports,"__esModule",{value:!0})})(reactReconciler_production)),reactReconciler_production.exports}var hasRequiredReactReconciler;function requireReactReconciler(){return hasRequiredReactReconciler||(hasRequiredReactReconciler=1,reactReconciler.exports=requireReactReconciler_production()),reactReconciler.exports}var reactReconcilerExports=requireReactReconciler();const ReactFiberReconciler=getDefaultExportFromCjs(reactReconcilerExports);var constants={exports:{}},reactReconcilerConstants_production={};var hasRequiredReactReconcilerConstants_production;function requireReactReconcilerConstants_production(){return hasRequiredReactReconcilerConstants_production||(hasRequiredReactReconcilerConstants_production=1,reactReconcilerConstants_production.ConcurrentRoot=1,reactReconcilerConstants_production.ContinuousEventPriority=8,reactReconcilerConstants_production.DefaultEventPriority=32,reactReconcilerConstants_production.DiscreteEventPriority=2,reactReconcilerConstants_production.IdleEventPriority=268435456,reactReconcilerConstants_production.LegacyRoot=0,reactReconcilerConstants_production.NoEventPriority=0),reactReconcilerConstants_production}var hasRequiredConstants;function requireConstants(){return hasRequiredConstants||(hasRequiredConstants=1,constants.exports=requireReactReconcilerConstants_production()),constants.exports}var constantsExports=requireConstants();const propsToSkip={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let zIndexWarningShowed=!1,dragWarningShowed=!1;const EVENTS_NAMESPACE=".react-konva-event",DRAGGABLE_WARNING=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,Z_INDEX_WARNING=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,EMPTY_PROPS={};function applyNodeProps(e,t,n=EMPTY_PROPS){if(!zIndexWarningShowed&&"zIndex"in t&&(console.warn(Z_INDEX_WARNING),zIndexWarningShowed=!0),!dragWarningShowed&&t.draggable){var o=t.x!==void 0||t.y!==void 0,u=t.onDragEnd||t.onDragMove;o&&!u&&(console.warn(DRAGGABLE_WARNING),dragWarningShowed=!0)}for(var d in n)if(!propsToSkip[d]){var f=d.slice(0,2)==="on",g=n[d]!==t[d];if(f&&g){var v=d.substr(2).toLowerCase();v.substr(0,7)==="content"&&(v="content"+v.substr(7,1).toUpperCase()+v.substr(8)),e.off(v,n[d])}var w=!t.hasOwnProperty(d);w&&e.setAttr(d,void 0)}var S=t._useStrictMode,R={},_=!1;const F={};for(var d in t)if(!propsToSkip[d]){var f=d.slice(0,2)==="on",M=n[d]!==t[d];if(f&&M){var v=d.substr(2).toLowerCase();v.substr(0,7)==="content"&&(v="content"+v.substr(7,1).toUpperCase()+v.substr(8)),t[d]&&(F[v]=t[d])}!f&&(t[d]!==n[d]||S&&t[d]!==e.getAttr(d))&&(_=!0,R[d]=t[d])}_&&(e.setAttrs(R),updatePicture(e));for(var v in F)e.off(v+EVENTS_NAMESPACE),e.on(v+EVENTS_NAMESPACE,F[v])}function updatePicture(e){if(!Konva$1.autoDrawEnabled){var t=e.getLayer()||e.getStage();t&&t.batchDraw()}}var schedulerExports=requireScheduler();const NO_CONTEXT={},UPDATE_SIGNAL={};Konva.Node.prototype._applyProps=applyNodeProps;let currentUpdatePriority=constantsExports.DefaultEventPriority;function appendInitialChild(e,t){if(typeof t=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`);return}e.add(t),updatePicture(e)}function createInstance(e,t,n){let o=Konva[e];o||(console.error(`Konva has no node with the type ${e}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${e}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),o=Konva.Group);const u={},d={};for(var f in t)if(f!=="ref"){var g=f.slice(0,2)==="on";g?d[f]=t[f]:u[f]=t[f]}const v=new o(u);return applyNodeProps(v,d),v}function createTextInstance(e,t,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${e}"`)}function finalizeInitialChildren(e,t,n){return!1}function getPublicInstance(e){return e}function prepareForCommit(){return null}function preparePortalMount(){return null}function prepareUpdate(e,t,n,o){return UPDATE_SIGNAL}function resetAfterCommit(){}function resetTextContent(e){}function shouldDeprioritizeSubtree(e,t){return!1}function getRootHostContext(){return NO_CONTEXT}function getChildHostContext(){return NO_CONTEXT}const scheduleTimeout=setTimeout,cancelTimeout=clearTimeout,supportsMicrotasks=!0,scheduleMicrotask=e=>{e()},noTimeout=-1;function shouldSetTextContent(e,t){return!1}const isPrimaryRenderer=!1,warnsIfNotActing=!1,supportsMutation=!0,supportsPersistence=!1,supportsHydration=!1;function appendChild(e,t){t.parent===e?t.moveToTop():e.add(t),updatePicture(e)}function appendChildToContainer(e,t){t.parent===e?t.moveToTop():e.add(t),updatePicture(e)}function insertBefore(e,t,n){t._remove(),e.add(t),t.setZIndex(n.getZIndex()),updatePicture(e)}function insertInContainerBefore(e,t,n){insertBefore(e,t,n)}function removeChild(e,t){t.destroy(),t.off(EVENTS_NAMESPACE),updatePicture(e)}function removeChildFromContainer(e,t){t.destroy(),t.off(EVENTS_NAMESPACE),updatePicture(e)}function commitTextUpdate(e,t,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function commitMount(e,t,n){}function commitUpdate(e,t,n,o){applyNodeProps(e,o,n)}function hideInstance(e){e.hide(),updatePicture(e)}function hideTextInstance(e){}function unhideInstance(e,t){(t.visible==null||t.visible)&&e.show()}function unhideTextInstance(e,t){}function clearContainer(e){}function detachDeletedInstance(){}function getInstanceFromNode(){return null}function beforeActiveInstanceBlur(){}function afterActiveInstanceBlur(){}function getCurrentEventPriority(){return constantsExports.DefaultEventPriority}function prepareScopeUpdate(){}function getInstanceFromScope(){return null}function setCurrentUpdatePriority(e){currentUpdatePriority=e}function getCurrentUpdatePriority(){return currentUpdatePriority}function resolveUpdatePriority(){return constantsExports.DiscreteEventPriority}function shouldAttemptEagerTransition(){return!1}function trackSchedulerEvent(){}function resolveEventType(){return null}function resolveEventTimeStamp(){return-1.1}function requestPostPaintCallback(){}function maySuspendCommit(){return!1}function preloadInstance(){return!0}function startSuspendingCommit(){}function suspendInstance(){}function waitForCommitToBeReady(){return null}const NotPendingTransition=null,HostTransitionContext=React.createContext(null);function resetFormInstance(){}const HostConfig=Object.freeze(Object.defineProperty({__proto__:null,HostTransitionContext,NotPendingTransition,afterActiveInstanceBlur,appendChild,appendChildToContainer,appendInitialChild,beforeActiveInstanceBlur,cancelTimeout,clearContainer,commitMount,commitTextUpdate,commitUpdate,createInstance,createTextInstance,detachDeletedInstance,finalizeInitialChildren,getChildHostContext,getCurrentEventPriority,getCurrentUpdatePriority,getInstanceFromNode,getInstanceFromScope,getPublicInstance,getRootHostContext,hideInstance,hideTextInstance,idlePriority:schedulerExports.unstable_IdlePriority,insertBefore,insertInContainerBefore,isPrimaryRenderer,maySuspendCommit,noTimeout,now:schedulerExports.unstable_now,preloadInstance,prepareForCommit,preparePortalMount,prepareScopeUpdate,prepareUpdate,removeChild,removeChildFromContainer,requestPostPaintCallback,resetAfterCommit,resetFormInstance,resetTextContent,resolveEventTimeStamp,resolveEventType,resolveUpdatePriority,run:schedulerExports.unstable_runWithPriority,scheduleMicrotask,scheduleTimeout,setCurrentUpdatePriority,shouldAttemptEagerTransition,shouldDeprioritizeSubtree,shouldSetTextContent,startSuspendingCommit,supportsHydration,supportsMicrotasks,supportsMutation,supportsPersistence,suspendInstance,trackSchedulerEvent,unhideInstance,unhideTextInstance,waitForCommitToBeReady,warnsIfNotActing},Symbol.toStringTag,{value:"Module"}));function i(e,t,n){if(!e)return;if(n(e)===!0)return e;let o=e.child;for(;o;){const u=i(o,t,n);if(u)return u;o=o.sibling}}function l(e){try{return Object.defineProperties(e,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return e}}const a=l(reactExports.createContext(null));class m extends reactExports.Component{render(){return reactExports.createElement(a.Provider,{value:this._reactInternals},this.props.children)}}function c(){const e=reactExports.useContext(a);if(e===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=reactExports.useId();return reactExports.useMemo(()=>{for(const n of[e,e?.alternate]){if(!n)continue;const o=i(n,!1,u=>{let d=u.memoizedState;for(;d;){if(d.memoizedState===t)return!0;d=d.next}});if(o)return o}},[e,t])}const p=Symbol.for("react.context"),b=e=>e!==null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===p;function h(){const e=c(),[t]=reactExports.useState(()=>new Map);t.clear();let n=e;for(;n;){const o=n.type;b(o)&&o!==a&&!t.has(o)&&t.set(o,reactExports.use(l(o))),n=n.return}return t}function x(){const e=h();return reactExports.useMemo(()=>Array.from(e.keys()).reduce((t,n)=>o=>reactExports.createElement(t,null,reactExports.createElement(n.Provider,{...o,value:e.get(n)})),t=>reactExports.createElement(m,{...t})),[e])}if(React.version.indexOf("19")===-1)throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");function usePrevious(e){const t=React.useRef({});return React.useLayoutEffect(()=>{t.current=e}),React.useLayoutEffect(()=>()=>{t.current={}},[]),t.current}const useIsReactStrictMode=()=>{const e=React.useRef(0);return React.useMemo(()=>{e.current++},[]),e.current>1},StageWrap=e=>{const t=React.useRef(null),n=React.useRef(null),o=React.useRef(null),u=usePrevious(e),d=x(),f=React.useRef(null),g=S=>{const{forwardedRef:R}=e;R&&(typeof R=="function"?R(S):R.current=S)},v=useIsReactStrictMode(),w=()=>{g(null),KonvaRenderer.updateContainer(null,o.current,null),n.current?.destroy(),n.current=null};return React.useLayoutEffect(()=>(f.current&&(clearTimeout(f.current),f.current=null),n.current?g(n.current):(n.current=new Konva.Stage({width:e.width,height:e.height,container:t.current}),g(n.current),o.current=KonvaRenderer.createContainer(n.current,constantsExports.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),KonvaRenderer.updateContainer(React.createElement(d,{},e.children),o.current,null,()=>{})),()=>{v?f.current=setTimeout(w,0):w()}),[]),React.useLayoutEffect(()=>{g(n.current),applyNodeProps(n.current,e,u),KonvaRenderer.flushSyncFromReconciler(()=>{KonvaRenderer.updateContainer(React.createElement(d,{},e.children),o.current,null)})}),React.createElement("div",{ref:t,id:e.id,accessKey:e.accessKey,className:e.className,role:e.role,style:e.style,tabIndex:e.tabIndex,title:e.title})},Layer="Layer",Rect="Rect",Circle="Circle",Line="Line",Image$1="Image",Text="Text",KonvaRenderer=ReactFiberReconciler(HostConfig),Stage=React.forwardRef((e,t)=>React.createElement(m,{},React.createElement(StageWrap,{...e,forwardedRef:t})));function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,(function(module,exports$1){(function(t,n){module.exports=t.pdfjsLib=n()})(globalThis,()=>(()=>{var __webpack_modules__=[,((e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationReplyType=t.AnnotationPrefix=t.AnnotationMode=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=Z,t.bytesToString=we,t.createValidAbsoluteUrl=K,t.getModificationDate=en,t.getUuid=wl,t.getVerbosityLevel=Ee,t.info=ae,t.isArrayBuffer=vt,t.isArrayEqual=nn,t.isNodeJS=void 0,t.normalizeUnicode=Bo,t.objectFromMap=Fe,t.objectSize=We,t.setVerbosityLevel=xe,t.shadow=ne,t.string32=_e,t.stringToBytes=Se,t.stringToPDFString=nt,t.stringToUTF8String=it,t.unreachable=ee,t.utf8StringToString=ot,t.warn=oe;const n=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");t.isNodeJS=n;const o=[1,0,0,1,0,0];t.IDENTITY_MATRIX=o;const u=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=u;const d=1e7;t.MAX_IMAGE_SIZE_TO_CACHE=d;const f=1.35;t.LINE_FACTOR=f;const g=.35;t.LINE_DESCENT_FACTOR=g;const v=g/f;t.BASELINE_FACTOR=v;const w={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=w;const S={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=S;const R="pdfjs_internal_editor_";t.AnnotationEditorPrefix=R;const _={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};t.AnnotationEditorType=_;const F={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};t.AnnotationEditorParamsType=F;const M={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=M;const I={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=I;const N={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=N;const B={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=B;const H={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=H;const U={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=U;const $={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=$;const z={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=z;const j={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=j;const J={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=J;const ie={O:"PageOpen",C:"PageClose"};t.PageActionEventType=ie;const se={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=se;const fe={NONE:0,BINARY:1};t.CMapCompressionType=fe;const de={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=de;const Ce={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=Ce;let be=se.WARNINGS;function xe(Xe){Number.isInteger(Xe)&&(be=Xe)}function Ee(){return be}function ae(Xe){be>=se.INFOS&&console.log(`Info: ${Xe}`)}function oe(Xe){be>=se.WARNINGS&&console.log(`Warning: ${Xe}`)}function ee(Xe){throw new Error(Xe)}function Z(Xe,Ie){Xe||ee(Ie)}function Q(Xe){switch(Xe?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function K(Xe,Ie=null,Pe=null){if(!Xe)return null;try{if(Pe&&typeof Xe=="string"&&(Pe.addDefaultProtocol&&Xe.startsWith("www.")&&Xe.match(/\./g)?.length>=2&&(Xe=`http://${Xe}`),Pe.tryConvertEncoding))try{Xe=it(Xe)}catch{}const st=Ie?new URL(Xe,Ie):new URL(Xe);if(Q(st))return st}catch{}return null}function ne(Xe,Ie,Pe,st=!1){return Object.defineProperty(Xe,Ie,{value:Pe,enumerable:!st,configurable:!0,writable:!1}),Pe}const ue=(function(){function Ie(Pe,st){this.constructor===Ie&&ee("Cannot initialize BaseException."),this.message=Pe,this.name=st}return Ie.prototype=new Error,Ie.constructor=Ie,Ie})();t.BaseException=ue;class ye extends ue{constructor(Ie,Pe){super(Ie,"PasswordException"),this.code=Pe}}t.PasswordException=ye;class pe extends ue{constructor(Ie,Pe){super(Ie,"UnknownErrorException"),this.details=Pe}}t.UnknownErrorException=pe;class X extends ue{constructor(Ie){super(Ie,"InvalidPDFException")}}t.InvalidPDFException=X;class le extends ue{constructor(Ie){super(Ie,"MissingPDFException")}}t.MissingPDFException=le;class he extends ue{constructor(Ie,Pe){super(Ie,"UnexpectedResponseException"),this.status=Pe}}t.UnexpectedResponseException=he;class ce extends ue{constructor(Ie){super(Ie,"FormatError")}}t.FormatError=ce;class me extends ue{constructor(Ie){super(Ie,"AbortException")}}t.AbortException=me;function we(Xe){(typeof Xe!="object"||Xe?.length===void 0)&&ee("Invalid argument for bytesToString");const Ie=Xe.length,Pe=8192;if(Ie<Pe)return String.fromCharCode.apply(null,Xe);const st=[];for(let Vt=0;Vt<Ie;Vt+=Pe){const Pn=Math.min(Vt+Pe,Ie),Cn=Xe.subarray(Vt,Pn);st.push(String.fromCharCode.apply(null,Cn))}return st.join("")}function Se(Xe){typeof Xe!="string"&&ee("Invalid argument for stringToBytes");const Ie=Xe.length,Pe=new Uint8Array(Ie);for(let st=0;st<Ie;++st)Pe[st]=Xe.charCodeAt(st)&255;return Pe}function _e(Xe){return String.fromCharCode(Xe>>24&255,Xe>>16&255,Xe>>8&255,Xe&255)}function We(Xe){return Object.keys(Xe).length}function Fe(Xe){const Ie=Object.create(null);for(const[Pe,st]of Xe)Ie[Pe]=st;return Ie}function Le(){const Xe=new Uint8Array(4);return Xe[0]=1,new Uint32Array(Xe.buffer,0,1)[0]===1}function De(){try{return new Function(""),!0}catch{return!1}}class Be{static get isLittleEndian(){return ne(this,"isLittleEndian",Le())}static get isEvalSupported(){return ne(this,"isEvalSupported",De())}static get isOffscreenCanvasSupported(){return ne(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?ne(this,"platform",{isWin:!1,isMac:!1}):ne(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){return ne(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}t.FeatureTest=Be;const $e=[...Array(256).keys()].map(Xe=>Xe.toString(16).padStart(2,"0"));class Ze{static makeHexColor(Ie,Pe,st){return`#${$e[Ie]}${$e[Pe]}${$e[st]}`}static scaleMinMax(Ie,Pe){let st;Ie[0]?(Ie[0]<0&&(st=Pe[0],Pe[0]=Pe[1],Pe[1]=st),Pe[0]*=Ie[0],Pe[1]*=Ie[0],Ie[3]<0&&(st=Pe[2],Pe[2]=Pe[3],Pe[3]=st),Pe[2]*=Ie[3],Pe[3]*=Ie[3]):(st=Pe[0],Pe[0]=Pe[2],Pe[2]=st,st=Pe[1],Pe[1]=Pe[3],Pe[3]=st,Ie[1]<0&&(st=Pe[2],Pe[2]=Pe[3],Pe[3]=st),Pe[2]*=Ie[1],Pe[3]*=Ie[1],Ie[2]<0&&(st=Pe[0],Pe[0]=Pe[1],Pe[1]=st),Pe[0]*=Ie[2],Pe[1]*=Ie[2]),Pe[0]+=Ie[4],Pe[1]+=Ie[4],Pe[2]+=Ie[5],Pe[3]+=Ie[5]}static transform(Ie,Pe){return[Ie[0]*Pe[0]+Ie[2]*Pe[1],Ie[1]*Pe[0]+Ie[3]*Pe[1],Ie[0]*Pe[2]+Ie[2]*Pe[3],Ie[1]*Pe[2]+Ie[3]*Pe[3],Ie[0]*Pe[4]+Ie[2]*Pe[5]+Ie[4],Ie[1]*Pe[4]+Ie[3]*Pe[5]+Ie[5]]}static applyTransform(Ie,Pe){const st=Ie[0]*Pe[0]+Ie[1]*Pe[2]+Pe[4],Vt=Ie[0]*Pe[1]+Ie[1]*Pe[3]+Pe[5];return[st,Vt]}static applyInverseTransform(Ie,Pe){const st=Pe[0]*Pe[3]-Pe[1]*Pe[2],Vt=(Ie[0]*Pe[3]-Ie[1]*Pe[2]+Pe[2]*Pe[5]-Pe[4]*Pe[3])/st,Pn=(-Ie[0]*Pe[1]+Ie[1]*Pe[0]+Pe[4]*Pe[1]-Pe[5]*Pe[0])/st;return[Vt,Pn]}static getAxialAlignedBoundingBox(Ie,Pe){const st=this.applyTransform(Ie,Pe),Vt=this.applyTransform(Ie.slice(2,4),Pe),Pn=this.applyTransform([Ie[0],Ie[3]],Pe),Cn=this.applyTransform([Ie[2],Ie[1]],Pe);return[Math.min(st[0],Vt[0],Pn[0],Cn[0]),Math.min(st[1],Vt[1],Pn[1],Cn[1]),Math.max(st[0],Vt[0],Pn[0],Cn[0]),Math.max(st[1],Vt[1],Pn[1],Cn[1])]}static inverseTransform(Ie){const Pe=Ie[0]*Ie[3]-Ie[1]*Ie[2];return[Ie[3]/Pe,-Ie[1]/Pe,-Ie[2]/Pe,Ie[0]/Pe,(Ie[2]*Ie[5]-Ie[4]*Ie[3])/Pe,(Ie[4]*Ie[1]-Ie[5]*Ie[0])/Pe]}static singularValueDecompose2dScale(Ie){const Pe=[Ie[0],Ie[2],Ie[1],Ie[3]],st=Ie[0]*Pe[0]+Ie[1]*Pe[2],Vt=Ie[0]*Pe[1]+Ie[1]*Pe[3],Pn=Ie[2]*Pe[0]+Ie[3]*Pe[2],Cn=Ie[2]*Pe[1]+Ie[3]*Pe[3],Fi=(st+Cn)/2,wi=Math.sqrt((st+Cn)**2-4*(st*Cn-Pn*Vt))/2,ni=Fi+wi||1,Sn=Fi-wi||1;return[Math.sqrt(ni),Math.sqrt(Sn)]}static normalizeRect(Ie){const Pe=Ie.slice(0);return Ie[0]>Ie[2]&&(Pe[0]=Ie[2],Pe[2]=Ie[0]),Ie[1]>Ie[3]&&(Pe[1]=Ie[3],Pe[3]=Ie[1]),Pe}static intersect(Ie,Pe){const st=Math.max(Math.min(Ie[0],Ie[2]),Math.min(Pe[0],Pe[2])),Vt=Math.min(Math.max(Ie[0],Ie[2]),Math.max(Pe[0],Pe[2]));if(st>Vt)return null;const Pn=Math.max(Math.min(Ie[1],Ie[3]),Math.min(Pe[1],Pe[3])),Cn=Math.min(Math.max(Ie[1],Ie[3]),Math.max(Pe[1],Pe[3]));return Pn>Cn?null:[st,Pn,Vt,Cn]}static bezierBoundingBox(Ie,Pe,st,Vt,Pn,Cn,Fi,wi){const ni=[],Sn=[[],[]];let Oi,fr,Ii,un,pr,Yr,br,Xr;for(let ws=0;ws<2;++ws){if(ws===0?(fr=6*Ie-12*st+6*Pn,Oi=-3*Ie+9*st-9*Pn+3*Fi,Ii=3*st-3*Ie):(fr=6*Pe-12*Vt+6*Cn,Oi=-3*Pe+9*Vt-9*Cn+3*wi,Ii=3*Vt-3*Pe),Math.abs(Oi)<1e-12){if(Math.abs(fr)<1e-12)continue;un=-Ii/fr,0<un&&un<1&&ni.push(un);continue}br=fr*fr-4*Ii*Oi,Xr=Math.sqrt(br),!(br<0)&&(pr=(-fr+Xr)/(2*Oi),0<pr&&pr<1&&ni.push(pr),Yr=(-fr-Xr)/(2*Oi),0<Yr&&Yr<1&&ni.push(Yr))}let Qr=ni.length,Mn;const qi=Qr;for(;Qr--;)un=ni[Qr],Mn=1-un,Sn[0][Qr]=Mn*Mn*Mn*Ie+3*Mn*Mn*un*st+3*Mn*un*un*Pn+un*un*un*Fi,Sn[1][Qr]=Mn*Mn*Mn*Pe+3*Mn*Mn*un*Vt+3*Mn*un*un*Cn+un*un*un*wi;return Sn[0][qi]=Ie,Sn[1][qi]=Pe,Sn[0][qi+1]=Fi,Sn[1][qi+1]=wi,Sn[0].length=Sn[1].length=qi+2,[Math.min(...Sn[0]),Math.min(...Sn[1]),Math.max(...Sn[0]),Math.max(...Sn[1])]}}t.Util=Ze;const Ye=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function nt(Xe){if(Xe[0]>=""){let Pe;if(Xe[0]===""&&Xe[1]===""?Pe="utf-16be":Xe[0]===""&&Xe[1]===""?Pe="utf-16le":Xe[0]===""&&Xe[1]===""&&Xe[2]===""&&(Pe="utf-8"),Pe)try{const st=new TextDecoder(Pe,{fatal:!0}),Vt=Se(Xe);return st.decode(Vt)}catch(st){oe(`stringToPDFString: "${st}".`)}}const Ie=[];for(let Pe=0,st=Xe.length;Pe<st;Pe++){const Vt=Ye[Xe.charCodeAt(Pe)];Ie.push(Vt?String.fromCharCode(Vt):Xe.charAt(Pe))}return Ie.join("")}function it(Xe){return decodeURIComponent(escape(Xe))}function ot(Xe){return unescape(encodeURIComponent(Xe))}function vt(Xe){return typeof Xe=="object"&&Xe?.byteLength!==void 0}function nn(Xe,Ie){if(Xe.length!==Ie.length)return!1;for(let Pe=0,st=Xe.length;Pe<st;Pe++)if(Xe[Pe]!==Ie[Pe])return!1;return!0}function en(Xe=new Date){return[Xe.getUTCFullYear().toString(),(Xe.getUTCMonth()+1).toString().padStart(2,"0"),Xe.getUTCDate().toString().padStart(2,"0"),Xe.getUTCHours().toString().padStart(2,"0"),Xe.getUTCMinutes().toString().padStart(2,"0"),Xe.getUTCSeconds().toString().padStart(2,"0")].join("")}class Dt{#e=!1;constructor(){this.promise=new Promise((Ie,Pe)=>{this.resolve=st=>{this.#e=!0,Ie(st)},this.reject=st=>{this.#e=!0,Pe(st)}})}get settled(){return this.#e}}t.PromiseCapability=Dt;let wt=null,Bn=null;function Bo(Xe){return wt||(wt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Bn=new Map([["","t"]])),Xe.replaceAll(wt,(Ie,Pe,st)=>Pe?Pe.normalize("NFKC"):Bn.get(st))}function wl(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const Xe=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(Xe);else for(let Ie=0;Ie<32;Ie++)Xe[Ie]=Math.floor(Math.random()*255);return we(Xe)}const bs="pdfjs_internal_id_";t.AnnotationPrefix=bs}),((__unused_webpack_module,exports$1,__w_pdfjs_require__)=>{Object.defineProperty(exports$1,"__esModule",{value:!0}),exports$1.RenderTask=exports$1.PDFWorkerUtil=exports$1.PDFWorker=exports$1.PDFPageProxy=exports$1.PDFDocumentProxy=exports$1.PDFDocumentLoadingTask=exports$1.PDFDataRangeTransport=exports$1.LoopbackPort=exports$1.DefaultStandardFontDataFactory=exports$1.DefaultFilterFactory=exports$1.DefaultCanvasFactory=exports$1.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports$1,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports$1.build=void 0,exports$1.getDocument=getDocument,exports$1.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports$1.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports$1.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports$1.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports$1.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(e){if(typeof e=="string"||e instanceof URL?e={url:e}:(0,_util.isArrayBuffer)(e)&&(e={data:e}),typeof e!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!e.url&&!e.data&&!e.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const t=new PDFDocumentLoadingTask,{docId:n}=t,o=e.url?getUrlProp(e.url):null,u=e.data?getDataProp(e.data):null,d=e.httpHeaders||null,f=e.withCredentials===!0,g=e.password??null,v=e.range instanceof PDFDataRangeTransport?e.range:null,w=Number.isInteger(e.rangeChunkSize)&&e.rangeChunkSize>0?e.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let S=e.worker instanceof PDFWorker?e.worker:null;const R=e.verbosity,_=typeof e.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(e.docBaseUrl)?e.docBaseUrl:null,F=typeof e.cMapUrl=="string"?e.cMapUrl:null,M=e.cMapPacked!==!1,I=e.CMapReaderFactory||DefaultCMapReaderFactory,N=typeof e.standardFontDataUrl=="string"?e.standardFontDataUrl:null,B=e.StandardFontDataFactory||DefaultStandardFontDataFactory,H=e.stopAtErrors!==!0,U=Number.isInteger(e.maxImageSize)&&e.maxImageSize>-1?e.maxImageSize:-1,$=e.isEvalSupported!==!1,z=typeof e.isOffscreenCanvasSupported=="boolean"?e.isOffscreenCanvasSupported:!_util.isNodeJS,j=Number.isInteger(e.canvasMaxAreaInBytes)?e.canvasMaxAreaInBytes:-1,J=typeof e.disableFontFace=="boolean"?e.disableFontFace:_util.isNodeJS,ie=e.fontExtraProperties===!0,se=e.enableXfa===!0,fe=e.ownerDocument||globalThis.document,de=e.disableRange===!0,Ce=e.disableStream===!0,be=e.disableAutoFetch===!0,xe=e.pdfBug===!0,Ee=v?v.length:e.length??NaN,ae=typeof e.useSystemFonts=="boolean"?e.useSystemFonts:!_util.isNodeJS&&!J,oe=typeof e.useWorkerFetch=="boolean"?e.useWorkerFetch:I===_display_utils.DOMCMapReaderFactory&&B===_display_utils.DOMStandardFontDataFactory&&F&&N&&(0,_display_utils.isValidFetchUrl)(F,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(N,document.baseURI),ee=e.canvasFactory||new DefaultCanvasFactory({ownerDocument:fe}),Z=e.filterFactory||new DefaultFilterFactory({docId:n,ownerDocument:fe}),Q=null;(0,_util.setVerbosityLevel)(R);const K={canvasFactory:ee,filterFactory:Z};if(oe||(K.cMapReaderFactory=new I({baseUrl:F,isCompressed:M}),K.standardFontDataFactory=new B({baseUrl:N})),!S){const ye={verbosity:R,port:_worker_options.GlobalWorkerOptions.workerPort};S=ye.port?PDFWorker.fromPort(ye):new PDFWorker(ye),t._worker=S}const ne={docId:n,apiVersion:"3.11.174",data:u,password:g,disableAutoFetch:be,rangeChunkSize:w,length:Ee,docBaseUrl:_,enableXfa:se,evaluatorOptions:{maxImageSize:U,disableFontFace:J,ignoreErrors:H,isEvalSupported:$,isOffscreenCanvasSupported:z,canvasMaxAreaInBytes:j,fontExtraProperties:ie,useSystemFonts:ae,cMapUrl:oe?F:null,standardFontDataUrl:oe?N:null}},ue={ignoreErrors:H,isEvalSupported:$,disableFontFace:J,fontExtraProperties:ie,enableXfa:se,ownerDocument:fe,disableAutoFetch:be,pdfBug:xe,styleElement:Q};return S.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");const ye=_fetchDocument(S,ne),pe=new Promise(function(X){let le;v?le=new _transport_stream.PDFDataTransportStream({length:Ee,initialData:v.initialData,progressiveDone:v.progressiveDone,contentDispositionFilename:v.contentDispositionFilename,disableRange:de,disableStream:Ce},v):u||(le=(ce=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(ce):(0,_display_utils.isValidFetchUrl)(ce.url)?new _displayFetch_stream.PDFFetchStream(ce):new _displayNetwork.PDFNetworkStream(ce))({url:o,length:Ee,httpHeaders:d,withCredentials:f,rangeChunkSize:w,disableRange:de,disableStream:Ce})),X(le)});return Promise.all([ye,pe]).then(function([X,le]){if(t.destroyed)throw new Error("Loading aborted");const he=new _message_handler.MessageHandler(n,X,S.port),ce=new WorkerTransport(he,t,le,ue,K);t._transport=ce,he.send("Ready",null)})}).catch(t._capability.reject),t}async function _fetchDocument(e,t){if(e.destroyed)throw new Error("Worker was destroyed");const n=await e.messageHandler.sendWithPromise("GetDocRequest",t,t.data?[t.data.buffer]:null);if(e.destroyed)throw new Error("Worker was destroyed");return n}function getUrlProp(e){if(e instanceof URL)return e.href;try{return new URL(e,window.location).href}catch{if(_util.isNodeJS&&typeof e=="string")return e}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(e){if(_util.isNodeJS&&typeof Buffer<"u"&&e instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if(typeof e=="string")return(0,_util.stringToBytes)(e);if(typeof e=="object"&&!isNaN(e?.length)||(0,_util.isArrayBuffer)(e))return new Uint8Array(e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}class PDFDocumentLoadingTask{static#e=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.#e++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports$1.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(t,n,o=!1,u=null){this.length=t,this.initialData=n,this.progressiveDone=o,this.contentDispositionFilename=u,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,n){for(const o of this._rangeListeners)o(t,n)}onDataProgress(t,n){this._readyCapability.promise.then(()=>{for(const o of this._progressListeners)o(t,n)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const n of this._progressiveReadListeners)n(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,n){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports$1.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(t,n){this._pdfInfo=t,this._transport=n,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(o=>{if(!o)return o;const u=[];for(const d in o)u.push(...o[d]);return u}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports$1.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#e=null;#t=!1;constructor(t,n,o,u=!1){this._pageIndex=t,this._pageInfo=n,this._transport=o,this._stats=u?new _display_utils.StatTimer:null,this._pdfBug=u,this.commonObjs=o.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:n=this.rotate,offsetX:o=0,offsetY:u=0,dontFlip:d=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:t,rotation:n,offsetX:o,offsetY:u,dontFlip:d})}getAnnotations({intent:t="display"}={}){const n=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,n.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:n,intent:o="display",annotationMode:u=_util.AnnotationMode.ENABLE,transform:d=null,background:f=null,optionalContentConfigPromise:g=null,annotationCanvasMap:v=null,pageColors:w=null,printAnnotationStorage:S=null}){this._stats?.time("Overall");const R=this._transport.getRenderingIntent(o,u,S);this.#t=!1,this.#i(),g||(g=this._transport.getOptionalContentConfig());let _=this._intentStates.get(R.cacheKey);_||(_=Object.create(null),this._intentStates.set(R.cacheKey,_)),_.streamReaderCancelTimeout&&(clearTimeout(_.streamReaderCancelTimeout),_.streamReaderCancelTimeout=null);const F=!!(R.renderingIntent&_util.RenderingIntentFlag.PRINT);_.displayReadyCapability||(_.displayReadyCapability=new _util.PromiseCapability,_.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(R));const M=B=>{_.renderTasks.delete(I),(this._maybeCleanupAfterRender||F)&&(this.#t=!0),this.#n(!F),B?(I.capability.reject(B),this._abortOperatorList({intentState:_,reason:B instanceof Error?B:new Error(B)})):I.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},I=new InternalRenderTask({callback:M,params:{canvasContext:t,viewport:n,transform:d,background:f},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:v,operatorList:_.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!F,pdfBug:this._pdfBug,pageColors:w});(_.renderTasks||=new Set).add(I);const N=I.task;return Promise.all([_.displayReadyCapability.promise,g]).then(([B,H])=>{if(this.destroyed){M();return}this._stats?.time("Rendering"),I.initializeGraphics({transparency:B,optionalContentConfig:H}),I.operatorListChanged()}).catch(M),N}getOperatorList({intent:t="display",annotationMode:n=_util.AnnotationMode.ENABLE,printAnnotationStorage:o=null}={}){function u(){f.operatorList.lastChunk&&(f.opListReadCapability.resolve(f.operatorList),f.renderTasks.delete(g))}const d=this._transport.getRenderingIntent(t,n,o,!0);let f=this._intentStates.get(d.cacheKey);f||(f=Object.create(null),this._intentStates.set(d.cacheKey,f));let g;return f.opListReadCapability||(g=Object.create(null),g.operatorListChanged=u,f.opListReadCapability=new _util.PromiseCapability,(f.renderTasks||=new Set).add(g),f.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(d)),f.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:n=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:n===!0},{highWaterMark:100,size(u){return u.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(o=>_xfa_text.XfaText.textContent(o));const n=this.streamTextContent(t);return new Promise(function(o,u){function d(){f.read().then(function({value:v,done:w}){if(w){o(g);return}Object.assign(g.styles,v.styles),g.items.push(...v.items),d()},u)}const f=n.getReader(),g={items:[],styles:Object.create(null)};d()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const n of this._intentStates.values())if(this._abortOperatorList({intentState:n,reason:new Error("Page was destroyed."),force:!0}),!n.opListReadCapability)for(const o of n.renderTasks)t.push(o.completed),o.cancel();return this.objs.clear(),this.#t=!1,this.#i(),Promise.all(t)}cleanup(t=!1){this.#t=!0;const n=this.#n(!1);return t&&n&&(this._stats&&=new _display_utils.StatTimer),n}#n(t=!1){if(this.#i(),!this.#t||this.destroyed)return!1;if(t)return this.#e=setTimeout(()=>{this.#e=null,this.#n(!1)},DELAYED_CLEANUP_TIMEOUT),!1;for(const{renderTasks:n,operatorList:o}of this._intentStates.values())if(n.size>0||!o.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#i(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(t,n){const o=this._intentStates.get(n);o&&(this._stats?.timeEnd("Page Request"),o.displayReadyCapability?.resolve(t))}_renderPageChunk(t,n){for(let o=0,u=t.length;o<u;o++)n.operatorList.fnArray.push(t.fnArray[o]),n.operatorList.argsArray.push(t.argsArray[o]);n.operatorList.lastChunk=t.lastChunk,n.operatorList.separateAnnots=t.separateAnnots;for(const o of n.renderTasks)o.operatorListChanged();t.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:t,cacheKey:n,annotationStorageSerializable:o}){const{map:u,transfers:d}=o,g=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:u},d).getReader(),v=this._intentStates.get(n);v.streamReader=g;const w=()=>{g.read().then(({value:S,done:R})=>{if(R){v.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(S,v),w())},S=>{if(v.streamReader=null,!this._transport.destroyed){if(v.operatorList){v.operatorList.lastChunk=!0;for(const R of v.renderTasks)R.operatorListChanged();this.#n(!0)}if(v.displayReadyCapability)v.displayReadyCapability.reject(S);else if(v.opListReadCapability)v.opListReadCapability.reject(S);else throw S}})};w()}_abortOperatorList({intentState:t,reason:n,force:o=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!o){if(t.renderTasks.size>0)return;if(n instanceof _display_utils.RenderingCancelledException){let u=RENDERING_CANCELLED_TIMEOUT;n.extraDelay>0&&n.extraDelay<1e3&&(u+=n.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})},u);return}}if(t.streamReader.cancel(new _util.AbortException(n.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[u,d]of this._intentStates)if(d===t){this._intentStates.delete(u);break}this.cleanup()}}}get stats(){return this._stats}}exports$1.PDFPageProxy=PDFPageProxy;class LoopbackPort{#e=new Set;#t=Promise.resolve();postMessage(t,n){const o={data:structuredClone(t,n?{transfer:n}:null)};this.#t.then(()=>{for(const u of this.#e)u.call(this,o)})}addEventListener(t,n){this.#e.add(n)}removeEventListener(t,n){this.#e.delete(n)}terminate(){this.#e.clear()}}exports$1.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports$1.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const e=document?.currentScript?.src;e&&(PDFWorkerUtil.fallbackWorkerSrc=e.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(e,t){let n;try{if(n=new URL(e),!n.origin||n.origin==="null")return!1}catch{return!1}const o=new URL(t,n);return n.origin===o.origin},PDFWorkerUtil.createCDNWrapper=function(e){const t=`importScripts("${e}");`;return URL.createObjectURL(new Blob([t]))}}class PDFWorker{static#workerPorts;constructor({name:e=null,port:t=null,verbosity:n=(0,_util.getVerbosityLevel)()}={}){if(this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,t){if(PDFWorker.#workerPorts?.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(PDFWorker.#workerPorts||=new WeakMap).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new _message_handler.MessageHandler("main","worker",e),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:e}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,e)||(e=PDFWorkerUtil.createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e),n=new _message_handler.MessageHandler("main","worker",t),o=()=>{t.removeEventListener("error",u),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},u=()=>{this._webWorker||o()};t.addEventListener("error",u),n.on("test",f=>{if(t.removeEventListener("error",u),this.destroyed){o();return}f?(this._messageHandler=n,this._port=t,this._webWorker=t,this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),n.destroy(),t.terminate())}),n.on("ready",f=>{if(t.removeEventListener("error",u),this.destroyed){o();return}try{d()}catch{this._setupFakeWorker()}});const d=()=>{const f=new Uint8Array;n.send("test",f,[f.buffer])};d();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new LoopbackPort;this._port=t;const n=`fake${PDFWorkerUtil.fakeWorkerId++}`,o=new _message_handler.MessageHandler(n+"_worker",n,t);e.setup(o,t);const u=new _message_handler.MessageHandler(n,n+"_worker",t);this._messageHandler=u,this._readyCapability.resolve(),u.send("configure",{verbosity:this.verbosity})}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){if(!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const t=this.#workerPorts?.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new PDFWorker(e)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports$1.PDFWorker=PDFWorker;class WorkerTransport{#e=new Map;#t=new Map;#n=new Map;#i=null;constructor(t,n,o,u,d){this.messageHandler=t,this.loadingTask=n,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:u.ownerDocument,styleElement:u.styleElement}),this._params=u,this.canvasFactory=d.canvasFactory,this.filterFactory=d.filterFactory,this.cMapReaderFactory=d.cMapReaderFactory,this.standardFontDataFactory=d.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=o,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#a(t,n=null){const o=this.#e.get(t);if(o)return o;const u=this.messageHandler.sendWithPromise(t,n);return this.#e.set(t,u),u}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(t,n=_util.AnnotationMode.ENABLE,o=null,u=!1){let d=_util.RenderingIntentFlag.DISPLAY,f=_annotation_storage.SerializableEmpty;switch(t){case"any":d=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":d=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${t}`)}switch(n){case _util.AnnotationMode.DISABLE:d+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:d+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:d+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,f=(d&_util.RenderingIntentFlag.PRINT&&o instanceof _annotation_storage.PrintAnnotationStorage?o:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${n}`)}return u&&(d+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:d,cacheKey:`${d}_${f.hash}`,annotationStorageSerializable:f}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this.#i?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const o of this.#t.values())t.push(o._destroy());this.#t.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:n}=this;t.on("GetReader",(o,u)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=d=>{this._lastProgress={loaded:d.loaded,total:d.total}},u.onPull=()=>{this._fullReader.read().then(function({value:d,done:f}){if(f){u.close();return}(0,_util.assert)(d instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),u.enqueue(new Uint8Array(d),1,[d])}).catch(d=>{u.error(d)})},u.onCancel=d=>{this._fullReader.cancel(d),u.ready.catch(f=>{if(!this.destroyed)throw f})}}),t.on("ReaderHeadersReady",o=>{const u=new _util.PromiseCapability,d=this._fullReader;return d.headersReady.then(()=>{(!d.isStreamingSupported||!d.isRangeSupported)&&(this._lastProgress&&n.onProgress?.(this._lastProgress),d.onProgress=f=>{n.onProgress?.({loaded:f.loaded,total:f.total})}),u.resolve({isStreamingSupported:d.isStreamingSupported,isRangeSupported:d.isRangeSupported,contentLength:d.contentLength})},u.reject),u.promise}),t.on("GetRangeReader",(o,u)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const d=this._networkStream.getRangeReader(o.begin,o.end);if(!d){u.close();return}u.onPull=()=>{d.read().then(function({value:f,done:g}){if(g){u.close();return}(0,_util.assert)(f instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),u.enqueue(new Uint8Array(f),1,[f])}).catch(f=>{u.error(f)})},u.onCancel=f=>{d.cancel(f),u.ready.catch(g=>{if(!this.destroyed)throw g})}}),t.on("GetDoc",({pdfInfo:o})=>{this._numPages=o.numPages,this._htmlForXfa=o.htmlForXfa,delete o.htmlForXfa,n._capability.resolve(new PDFDocumentProxy(o,this))}),t.on("DocException",function(o){let u;switch(o.name){case"PasswordException":u=new _util.PasswordException(o.message,o.code);break;case"InvalidPDFException":u=new _util.InvalidPDFException(o.message);break;case"MissingPDFException":u=new _util.MissingPDFException(o.message);break;case"UnexpectedResponseException":u=new _util.UnexpectedResponseException(o.message,o.status);break;case"UnknownErrorException":u=new _util.UnknownErrorException(o.message,o.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}n._capability.reject(u)}),t.on("PasswordRequest",o=>{if(this.#i=new _util.PromiseCapability,n.onPassword){const u=d=>{d instanceof Error?this.#i.reject(d):this.#i.resolve({password:d})};try{n.onPassword(u,o.code)}catch(d){this.#i.reject(d)}}else this.#i.reject(new _util.PasswordException(o.message,o.code));return this.#i.promise}),t.on("DataLoaded",o=>{n.onProgress?.({loaded:o.length,total:o.length}),this.downloadInfoCapability.resolve(o)}),t.on("StartRenderPage",o=>{if(this.destroyed)return;this.#t.get(o.pageIndex)._startRenderPage(o.transparency,o.cacheKey)}),t.on("commonobj",([o,u,d])=>{if(!this.destroyed&&!this.commonObjs.has(o))switch(u){case"Font":const f=this._params;if("error"in d){const w=d.error;(0,_util.warn)(`Error during font loading: ${w}`),this.commonObjs.resolve(o,w);break}const g=f.pdfBug&&globalThis.FontInspector?.enabled?(w,S)=>globalThis.FontInspector.fontAdded(w,S):null,v=new _font_loader.FontFaceObject(d,{isEvalSupported:f.isEvalSupported,disableFontFace:f.disableFontFace,ignoreErrors:f.ignoreErrors,inspectFont:g});this.fontLoader.bind(v).catch(w=>t.sendWithPromise("FontFallback",{id:o})).finally(()=>{!f.fontExtraProperties&&v.data&&(v.data=null),this.commonObjs.resolve(o,v)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(o,d);break;default:throw new Error(`Got unknown common object type ${u}`)}}),t.on("obj",([o,u,d,f])=>{if(this.destroyed)return;const g=this.#t.get(u);if(!g.objs.has(o))switch(d){case"Image":if(g.objs.resolve(o,f),f){let v;if(f.bitmap){const{width:w,height:S}=f;v=w*S*4}else v=f.data?.length||0;v>_util.MAX_IMAGE_SIZE_TO_CACHE&&(g._maybeCleanupAfterRender=!0)}break;case"Pattern":g.objs.resolve(o,f);break;default:throw new Error(`Got unknown object type ${d}`)}}),t.on("DocProgress",o=>{this.destroyed||n.onProgress?.({loaded:o.loaded,total:o.total})}),t.on("FetchBuiltInCMap",o=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(o):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),t.on("FetchStandardFontData",o=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(o):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfers:n}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},n).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const n=t-1,o=this.#n.get(n);if(o)return o;const u=this.messageHandler.sendWithPromise("GetPage",{pageIndex:n}).then(d=>{if(this.destroyed)throw new Error("Transport destroyed");const f=new PDFPageProxy(n,d,this,this._params.pdfBug);return this.#t.set(n,f),f});return this.#n.set(n,u),u}getPageIndex(t){return typeof t!="object"||t===null||!Number.isInteger(t.num)||t.num<0||!Number.isInteger(t.gen)||t.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen})}getAnnotations(t,n){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:n})}getFieldObjects(){return this.#a("GetFieldObjects")}hasJSActions(){return this.#a("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#a("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(t=>new _optional_content_config.OptionalContentConfig(t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",n=this.#e.get(t);if(n)return n;const o=this.messageHandler.sendWithPromise(t,null).then(u=>({info:u[0],metadata:u[1]?new _metadata.Metadata(u[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(t,o),o}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const n of this.#t.values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:t,enableXfa:n}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:t,enableXfa:n})}}class PDFObjects{#e=Object.create(null);#t(t){return this.#e[t]||={capability:new _util.PromiseCapability,data:null}}get(t,n=null){if(n){const u=this.#t(t);return u.capability.promise.then(()=>n(u.data)),null}const o=this.#e[t];if(!o?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return o.data}has(t){return this.#e[t]?.capability.settled||!1}resolve(t,n=null){const o=this.#t(t);o.data=n,o.capability.resolve()}clear(){for(const t in this.#e){const{data:n}=this.#e[t];n?.bitmap?.close()}this.#e=Object.create(null)}}class RenderTask{#e=null;constructor(t){this.#e=t,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(t=0){this.#e.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#e.operatorList;if(!t)return!1;const{annotationCanvasMap:n}=this.#e;return t.form||t.canvas&&n?.size>0}}exports$1.RenderTask=RenderTask;class InternalRenderTask{static#e=new WeakSet;constructor({callback:t,params:n,objs:o,commonObjs:u,annotationCanvasMap:d,operatorList:f,pageIndex:g,canvasFactory:v,filterFactory:w,useRequestAnimationFrame:S=!1,pdfBug:R=!1,pageColors:_=null}){this.callback=t,this.params=n,this.objs=o,this.commonObjs=u,this.annotationCanvasMap=d,this.operatorListIdx=null,this.operatorList=f,this._pageIndex=g,this.canvasFactory=v,this.filterFactory=w,this._pdfBug=R,this.pageColors=_,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=S===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:n}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:o,viewport:u,transform:d,background:f}=this.params;this.gfx=new _canvas.CanvasGraphics(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:d,viewport:u,transparency:t,background:f}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,n=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback(t||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,n))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback())))}}const version="3.11.174";exports$1.version=version;const build="ce8716743";exports$1.build=build}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SerializableEmpty=t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var o=n(1),u=n(4),d=n(8);const f=Object.freeze({map:null,hash:"",transfers:void 0});t.SerializableEmpty=f;class g{#e=!1;#t=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(S,R){const _=this.#t.get(S);return _===void 0?R:Object.assign(R,_)}getRawValue(S){return this.#t.get(S)}remove(S){if(this.#t.delete(S),this.#t.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const R of this.#t.values())if(R instanceof u.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(S,R){const _=this.#t.get(S);let F=!1;if(_!==void 0)for(const[M,I]of Object.entries(R))_[M]!==I&&(F=!0,_[M]=I);else F=!0,this.#t.set(S,R);F&&this.#n(),R instanceof u.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(R.constructor._type)}has(S){return this.#t.has(S)}getAll(){return this.#t.size>0?(0,o.objectFromMap)(this.#t):null}setAll(S){for(const[R,_]of Object.entries(S))this.setValue(R,_)}get size(){return this.#t.size}#n(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new v(this)}get serializable(){if(this.#t.size===0)return f;const S=new Map,R=new d.MurmurHash3_64,_=[],F=Object.create(null);let M=!1;for(const[I,N]of this.#t){const B=N instanceof u.AnnotationEditor?N.serialize(!1,F):N;B&&(S.set(I,B),R.update(`${I}:${JSON.stringify(B)}`),M||=!!B.bitmap)}if(M)for(const I of S.values())I.bitmap&&_.push(I.bitmap);return S.size>0?{map:S,hash:R.hexdigest(),transfers:_}:f}}t.AnnotationStorage=g;class v extends g{#e;constructor(S){super();const{map:R,hash:_,transfers:F}=S.serializable,M=structuredClone(R,F?{transfer:F}:null);this.#e={map:M,hash:_,transfers:F}}get print(){(0,o.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}}t.PrintAnnotationStorage=v}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var o=n(5),u=n(1),d=n(6);class f{#e="";#t=!1;#n=null;#i=null;#a=null;#o=!1;#s=null;#l=this.focusin.bind(this);#c=this.focusout.bind(this);#r=!1;#f=!1;#d=!1;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#h=!1;#p=f._zIndex++;static _borderLineWidth=-1;static _colorManager=new o.ColorManager;static _zIndex=1;static SMALL_EDITOR_SIZE=0;constructor(w){this.constructor===f&&(0,u.unreachable)("Cannot initialize AnnotationEditor."),this.parent=w.parent,this.id=w.id,this.width=this.height=null,this.pageIndex=w.parent.pageIndex,this.name=w.name,this.div=null,this._uiManager=w.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=w.isCentered,this._structTreeParentId=null;const{rotation:S,rawDims:{pageWidth:R,pageHeight:_,pageX:F,pageY:M}}=this.parent.viewport;this.rotation=S,this.pageRotation=(360+S-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[R,_],this.pageTranslation=[F,M];const[I,N]=this.parentDimensions;this.x=w.x/I,this.y=w.y/N,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,u.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(w){const S=new g({id:w.parent.getNextId(),parent:w.parent,uiManager:w._uiManager});S.annotationElementId=w.annotationElementId,S.deleted=!0,S._uiManager.addToAnnotationStorage(S)}static initialize(w,S=null){if(f._l10nPromise||=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(_=>[_,w.get(_)])),S?.strings)for(const _ of S.strings)f._l10nPromise.set(_,w.get(_));if(f._borderLineWidth!==-1)return;const R=getComputedStyle(document.documentElement);f._borderLineWidth=parseFloat(R.getPropertyValue("--outline-width"))||0}static updateDefaultParams(w,S){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(w){return!1}static paste(w,S){(0,u.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#h}set _isDraggable(w){this.#h=w,this.div?.classList.toggle("draggable",w)}center(){const[w,S]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*S/(w*2),this.y+=this.width*w/(S*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*S/(w*2),this.y-=this.width*w/(S*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(w){this._uiManager.addCommands(w)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#p}setParent(w){w!==null&&(this.pageIndex=w.pageIndex,this.pageDimensions=w.pageDimensions),this.parent=w}focusin(w){this._focusEventsAllowed&&(this.#r?this.#r=!1:this.parent.setSelected(this))}focusout(w){!this._focusEventsAllowed||!this.isAttachedToDOM||w.relatedTarget?.closest(`#${this.id}`)||(w.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(w,S,R,_){const[F,M]=this.parentDimensions;[R,_]=this.screenToPageTranslation(R,_),this.x=(w+R)/F,this.y=(S+_)/M,this.fixAndSetPosition()}#v([w,S],R,_){[R,_]=this.screenToPageTranslation(R,_),this.x+=R/w,this.y+=_/S,this.fixAndSetPosition()}translate(w,S){this.#v(this.parentDimensions,w,S)}translateInPage(w,S){this.#v(this.pageDimensions,w,S),this.div.scrollIntoView({block:"nearest"})}drag(w,S){const[R,_]=this.parentDimensions;if(this.x+=w/R,this.y+=S/_,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:B,y:H}=this.div.getBoundingClientRect();this.parent.findNewParent(this,B,H)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:F,y:M}=this;const[I,N]=this.#m();F+=I,M+=N,this.div.style.left=`${(100*F).toFixed(2)}%`,this.div.style.top=`${(100*M).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}#m(){const[w,S]=this.parentDimensions,{_borderLineWidth:R}=f,_=R/w,F=R/S;switch(this.rotation){case 90:return[-_,F];case 180:return[_,F];case 270:return[_,-F];default:return[-_,-F]}}fixAndSetPosition(){const[w,S]=this.pageDimensions;let{x:R,y:_,width:F,height:M}=this;switch(F*=w,M*=S,R*=w,_*=S,this.rotation){case 0:R=Math.max(0,Math.min(w-F,R)),_=Math.max(0,Math.min(S-M,_));break;case 90:R=Math.max(0,Math.min(w-M,R)),_=Math.min(S,Math.max(F,_));break;case 180:R=Math.min(w,Math.max(F,R)),_=Math.min(S,Math.max(M,_));break;case 270:R=Math.min(w,Math.max(M,R)),_=Math.max(0,Math.min(S-F,_));break}this.x=R/=w,this.y=_/=S;const[I,N]=this.#m();R+=I,_+=N;const{style:B}=this.div;B.left=`${(100*R).toFixed(2)}%`,B.top=`${(100*_).toFixed(2)}%`,this.moveInDOM()}static#g(w,S,R){switch(R){case 90:return[S,-w];case 180:return[-w,-S];case 270:return[-S,w];default:return[w,S]}}screenToPageTranslation(w,S){return f.#g(w,S,this.parentRotation)}pageTranslationToScreen(w,S){return f.#g(w,S,360-this.parentRotation)}#u(w){switch(w){case 90:{const[S,R]=this.pageDimensions;return[0,-S/R,R/S,0]}case 180:return[-1,0,0,-1];case 270:{const[S,R]=this.pageDimensions;return[0,S/R,-R/S,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:w,pageDimensions:[S,R]}=this,_=S*w,F=R*w;return u.FeatureTest.isCSSRoundSupported?[Math.round(_),Math.round(F)]:[_,F]}setDims(w,S){const[R,_]=this.parentDimensions;this.div.style.width=`${(100*w/R).toFixed(2)}%`,this.#o||(this.div.style.height=`${(100*S/_).toFixed(2)}%`),this.#n?.classList.toggle("small",w<f.SMALL_EDITOR_SIZE||S<f.SMALL_EDITOR_SIZE)}fixDims(){const{style:w}=this.div,{height:S,width:R}=w,_=R.endsWith("%"),F=!this.#o&&S.endsWith("%");if(_&&F)return;const[M,I]=this.parentDimensions;_||(w.width=`${(100*parseFloat(R)/M).toFixed(2)}%`),!this.#o&&!F&&(w.height=`${(100*parseFloat(S)/I).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#y(){if(this.#s)return;this.#s=document.createElement("div"),this.#s.classList.add("resizers");const w=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||w.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const S of w){const R=document.createElement("div");this.#s.append(R),R.classList.add("resizer",S),R.addEventListener("pointerdown",this.#E.bind(this,S)),R.addEventListener("contextmenu",d.noContextMenu)}this.div.prepend(this.#s)}#E(w,S){S.preventDefault();const{isMac:R}=u.FeatureTest.platform;if(S.button!==0||S.ctrlKey&&R)return;const _=this.#w.bind(this,w),F=this._isDraggable;this._isDraggable=!1;const M={passive:!0,capture:!0};window.addEventListener("pointermove",_,M);const I=this.x,N=this.y,B=this.width,H=this.height,U=this.parent.div.style.cursor,$=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(S.target).cursor;const z=()=>{this._isDraggable=F,window.removeEventListener("pointerup",z),window.removeEventListener("blur",z),window.removeEventListener("pointermove",_,M),this.parent.div.style.cursor=U,this.div.style.cursor=$;const j=this.x,J=this.y,ie=this.width,se=this.height;j===I&&J===N&&ie===B&&se===H||this.addCommands({cmd:()=>{this.width=ie,this.height=se,this.x=j,this.y=J;const[fe,de]=this.parentDimensions;this.setDims(fe*ie,de*se),this.fixAndSetPosition()},undo:()=>{this.width=B,this.height=H,this.x=I,this.y=N;const[fe,de]=this.parentDimensions;this.setDims(fe*B,de*H),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",z),window.addEventListener("blur",z)}#w(w,S){const[R,_]=this.parentDimensions,F=this.x,M=this.y,I=this.width,N=this.height,B=f.MIN_SIZE/R,H=f.MIN_SIZE/_,U=pe=>Math.round(pe*1e4)/1e4,$=this.#u(this.rotation),z=(pe,X)=>[$[0]*pe+$[2]*X,$[1]*pe+$[3]*X],j=this.#u(360-this.rotation),J=(pe,X)=>[j[0]*pe+j[2]*X,j[1]*pe+j[3]*X];let ie,se,fe=!1,de=!1;switch(w){case"topLeft":fe=!0,ie=(pe,X)=>[0,0],se=(pe,X)=>[pe,X];break;case"topMiddle":ie=(pe,X)=>[pe/2,0],se=(pe,X)=>[pe/2,X];break;case"topRight":fe=!0,ie=(pe,X)=>[pe,0],se=(pe,X)=>[0,X];break;case"middleRight":de=!0,ie=(pe,X)=>[pe,X/2],se=(pe,X)=>[0,X/2];break;case"bottomRight":fe=!0,ie=(pe,X)=>[pe,X],se=(pe,X)=>[0,0];break;case"bottomMiddle":ie=(pe,X)=>[pe/2,X],se=(pe,X)=>[pe/2,0];break;case"bottomLeft":fe=!0,ie=(pe,X)=>[0,X],se=(pe,X)=>[pe,0];break;case"middleLeft":de=!0,ie=(pe,X)=>[0,X/2],se=(pe,X)=>[pe,X/2];break}const Ce=ie(I,N),be=se(I,N);let xe=z(...be);const Ee=U(F+xe[0]),ae=U(M+xe[1]);let oe=1,ee=1,[Z,Q]=this.screenToPageTranslation(S.movementX,S.movementY);if([Z,Q]=J(Z/R,Q/_),fe){const pe=Math.hypot(I,N);oe=ee=Math.max(Math.min(Math.hypot(be[0]-Ce[0]-Z,be[1]-Ce[1]-Q)/pe,1/I,1/N),B/I,H/N)}else de?oe=Math.max(B,Math.min(1,Math.abs(be[0]-Ce[0]-Z)))/I:ee=Math.max(H,Math.min(1,Math.abs(be[1]-Ce[1]-Q)))/N;const K=U(I*oe),ne=U(N*ee);xe=z(...se(K,ne));const ue=Ee-xe[0],ye=ae-xe[1];this.width=K,this.height=ne,this.x=ue,this.y=ye,this.setDims(R*K,_*ne),this.fixAndSetPosition()}async addAltTextButton(){if(this.#n)return;const w=this.#n=document.createElement("button");w.className="altText";const S=await f._l10nPromise.get("editor_alt_text_button_label");w.textContent=S,w.setAttribute("aria-label",S),w.tabIndex="0",w.addEventListener("contextmenu",d.noContextMenu),w.addEventListener("pointerdown",R=>R.stopPropagation()),w.addEventListener("click",R=>{R.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),w.addEventListener("keydown",R=>{R.target===w&&R.key==="Enter"&&(R.preventDefault(),this._uiManager.editAltText(this))}),this.#A(),this.div.append(w),f.SMALL_EDITOR_SIZE||(f.SMALL_EDITOR_SIZE=Math.min(128,Math.round(w.getBoundingClientRect().width*1.4)))}async#A(){const w=this.#n;if(!w)return;if(!this.#e&&!this.#t){w.classList.remove("done"),this.#i?.remove();return}f._l10nPromise.get("editor_alt_text_edit_button_label").then(R=>{w.setAttribute("aria-label",R)});let S=this.#i;if(!S){this.#i=S=document.createElement("span"),S.className="tooltip",S.setAttribute("role","tooltip");const R=S.id=`alt-text-tooltip-${this.id}`;w.setAttribute("aria-describedby",R);const _=100;w.addEventListener("mouseenter",()=>{this.#a=setTimeout(()=>{this.#a=null,this.#i.classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},_)}),w.addEventListener("mouseleave",()=>{clearTimeout(this.#a),this.#a=null,this.#i?.classList.remove("show")})}w.classList.add("done"),S.innerText=this.#t?await f._l10nPromise.get("editor_alt_text_decorative_tooltip"):this.#e,S.parentNode||w.append(S)}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:this.#e,decorative:this.#t}}set altTextData({altText:w,decorative:S}){this.#e===w&&this.#t===S||(this.#e=w,this.#t=S,this.#A())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#l),this.div.addEventListener("focusout",this.#c);const[w,S]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*S/w).toFixed(2)}%`,this.div.style.maxHeight=`${(100*w/S).toFixed(2)}%`);const[R,_]=this.getInitialTranslation();return this.translate(R,_),(0,o.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(w){const{isMac:S}=u.FeatureTest.platform;if(w.button!==0||w.ctrlKey&&S){w.preventDefault();return}this.#r=!0,this.#_(w)}#_(w){if(!this._isDraggable)return;const S=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let R,_;S&&(R={passive:!0,capture:!0},_=M=>{const[I,N]=this.screenToPageTranslation(M.movementX,M.movementY);this._uiManager.dragSelectedEditors(I,N)},window.addEventListener("pointermove",_,R));const F=()=>{if(window.removeEventListener("pointerup",F),window.removeEventListener("blur",F),S&&window.removeEventListener("pointermove",_,R),this.#r=!1,!this._uiManager.endDragSession()){const{isMac:M}=u.FeatureTest.platform;w.ctrlKey&&!M||w.shiftKey||w.metaKey&&M?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",F),window.addEventListener("blur",F)}moveInDOM(){this.parent?.moveEditorInDOM(this)}_setParentAndPosition(w,S,R){w.changeParent(this),this.x=S,this.y=R,this.fixAndSetPosition()}getRect(w,S){const R=this.parentScale,[_,F]=this.pageDimensions,[M,I]=this.pageTranslation,N=w/R,B=S/R,H=this.x*_,U=this.y*F,$=this.width*_,z=this.height*F;switch(this.rotation){case 0:return[H+N+M,F-U-B-z+I,H+N+$+M,F-U-B+I];case 90:return[H+B+M,F-U+N+I,H+B+z+M,F-U+N+$+I];case 180:return[H-N-$+M,F-U+B+I,H-N+M,F-U+B+z+I];case 270:return[H-B-z+M,F-U-N-$+I,H-B+M,F-U-N+I];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(w,S){const[R,_,F,M]=w,I=F-R,N=M-_;switch(this.rotation){case 0:return[R,S-M,I,N];case 90:return[R,S-_,N,I];case 180:return[F,S-_,I,N];case 270:return[F,S-M,N,I];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#d=!0}disableEditMode(){this.#d=!1}isInEditMode(){return this.#d}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#l),this.div?.addEventListener("focusout",this.#c)}serialize(w=!1,S=null){(0,u.unreachable)("An editor must be serializable")}static deserialize(w,S,R){const _=new this.prototype.constructor({parent:S,id:S.getNextId(),uiManager:R});_.rotation=w.rotation;const[F,M]=_.pageDimensions,[I,N,B,H]=_.getRectInCurrentCoords(w.rect,M);return _.x=I/F,_.y=N/M,_.width=B/F,_.height=H/M,_}remove(){this.div.removeEventListener("focusin",this.#l),this.div.removeEventListener("focusout",this.#c),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#n?.remove(),this.#n=null,this.#i=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#y(),this.#s.classList.remove("hidden"))}select(){this.makeResizable(),this.div?.classList.add("selectedEditor")}unselect(){this.#s?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(w,S){}disableEditing(){this.#n&&(this.#n.hidden=!0)}enableEditing(){this.#n&&(this.#n.hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return this.#f}set isEditing(w){this.#f=w,this.parent&&(w?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(w,S){this.#o=!0;const R=w/S,{style:_}=this.div;_.aspectRatio=R,_.height="auto"}static get MIN_SIZE(){return 16}}t.AnnotationEditor=f;class g extends f{constructor(w){super(w),this.annotationElementId=w.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=d,t.opacityToHex=f;var o=n(1),u=n(6);function d(F,M,I){for(const N of I)M.addEventListener(N,F[N].bind(F))}function f(F){return Math.round(Math.min(255,Math.max(1,255*F))).toString(16).padStart(2,"0")}class g{#e=0;getId(){return`${o.AnnotationEditorPrefix}${this.#e++}`}}class v{#e=(0,o.getUuid)();#t=0;#n=null;static get _isSVGFittingCanvas(){const M='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',N=new OffscreenCanvas(1,3).getContext("2d"),B=new Image;B.src=M;const H=B.decode().then(()=>(N.drawImage(B,0,0,1,1,0,0,1,3),new Uint32Array(N.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,o.shadow)(this,"_isSVGFittingCanvas",H)}async#i(M,I){this.#n||=new Map;let N=this.#n.get(M);if(N===null)return null;if(N?.bitmap)return N.refCounter+=1,N;try{N||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let B;if(typeof I=="string"){N.url=I;const H=await fetch(I);if(!H.ok)throw new Error(H.statusText);B=await H.blob()}else B=N.file=I;if(B.type==="image/svg+xml"){const H=v._isSVGFittingCanvas,U=new FileReader,$=new Image,z=new Promise((j,J)=>{$.onload=()=>{N.bitmap=$,N.isSvg=!0,j()},U.onload=async()=>{const ie=N.svgUrl=U.result;$.src=await H?`${ie}#svgView(preserveAspectRatio(none))`:ie},$.onerror=U.onerror=J});U.readAsDataURL(B),await z}else N.bitmap=await createImageBitmap(B);N.refCounter=1}catch(B){console.error(B),N=null}return this.#n.set(M,N),N&&this.#n.set(N.id,N),N}async getFromFile(M){const{lastModified:I,name:N,size:B,type:H}=M;return this.#i(`${I}_${N}_${B}_${H}`,M)}async getFromUrl(M){return this.#i(M,M)}async getFromId(M){this.#n||=new Map;const I=this.#n.get(M);return I?I.bitmap?(I.refCounter+=1,I):I.file?this.getFromFile(I.file):this.getFromUrl(I.url):null}getSvgUrl(M){const I=this.#n.get(M);return I?.isSvg?I.svgUrl:null}deleteId(M){this.#n||=new Map;const I=this.#n.get(M);I&&(I.refCounter-=1,I.refCounter===0&&(I.bitmap=null))}isValidId(M){return M.startsWith(`image_${this.#e}_`)}}class w{#e=[];#t=!1;#n;#i=-1;constructor(M=128){this.#n=M}add({cmd:M,undo:I,mustExec:N,type:B=NaN,overwriteIfSameType:H=!1,keepUndo:U=!1}){if(N&&M(),this.#t)return;const $={cmd:M,undo:I,type:B};if(this.#i===-1){this.#e.length>0&&(this.#e.length=0),this.#i=0,this.#e.push($);return}if(H&&this.#e[this.#i].type===B){U&&($.undo=this.#e[this.#i].undo),this.#e[this.#i]=$;return}const z=this.#i+1;z===this.#n?this.#e.splice(0,1):(this.#i=z,z<this.#e.length&&this.#e.splice(z)),this.#e.push($)}undo(){this.#i!==-1&&(this.#t=!0,this.#e[this.#i].undo(),this.#t=!1,this.#i-=1)}redo(){this.#i<this.#e.length-1&&(this.#i+=1,this.#t=!0,this.#e[this.#i].cmd(),this.#t=!1)}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#e.length-1}destroy(){this.#e=null}}t.CommandManager=w;class S{constructor(M){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:I}=o.FeatureTest.platform;for(const[N,B,H={}]of M)for(const U of N){const $=U.startsWith("mac+");I&&$?(this.callbacks.set(U.slice(4),{callback:B,options:H}),this.allKeys.add(U.split("+").at(-1))):!I&&!$&&(this.callbacks.set(U,{callback:B,options:H}),this.allKeys.add(U.split("+").at(-1)))}}#e(M){M.altKey&&this.buffer.push("alt"),M.ctrlKey&&this.buffer.push("ctrl"),M.metaKey&&this.buffer.push("meta"),M.shiftKey&&this.buffer.push("shift"),this.buffer.push(M.key);const I=this.buffer.join("+");return this.buffer.length=0,I}exec(M,I){if(!this.allKeys.has(I.key))return;const N=this.callbacks.get(this.#e(I));if(!N)return;const{callback:B,options:{bubbles:H=!1,args:U=[],checker:$=null}}=N;$&&!$(M,I)||(B.bind(M,...U)(),H||(I.stopPropagation(),I.preventDefault()))}}t.KeyboardManager=S;class R{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const M=new Map([["CanvasText",null],["Canvas",null]]);return(0,u.getColorValues)(M),(0,o.shadow)(this,"_colors",M)}convert(M){const I=(0,u.getRGB)(M);if(!window.matchMedia("(forced-colors: active)").matches)return I;for(const[N,B]of this._colors)if(B.every((H,U)=>H===I[U]))return R._colorsMapping.get(N);return I}getHexCode(M){const I=this._colors.get(M);return I?o.Util.makeHexColor(...I):M}}t.ColorManager=R;class _{#e=null;#t=new Map;#n=new Map;#i=null;#a=null;#o=new w;#s=0;#l=new Set;#c=null;#r=null;#f=new Set;#d=null;#h=new g;#p=!1;#v=!1;#m=null;#g=o.AnnotationEditorType.NONE;#u=new Set;#y=null;#E=this.blur.bind(this);#w=this.focus.bind(this);#A=this.copy.bind(this);#_=this.cut.bind(this);#I=this.paste.bind(this);#L=this.keydown.bind(this);#N=this.onEditingAction.bind(this);#C=this.onPageChanging.bind(this);#O=this.onScaleChanging.bind(this);#D=this.onRotationChanging.bind(this);#P={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#S=[0,0];#T=null;#x=null;#k=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const M=_.prototype,I=H=>{const{activeElement:U}=document;return U&&H.#x.contains(U)&&H.hasSomethingToControl()},N=this.TRANSLATE_SMALL,B=this.TRANSLATE_BIG;return(0,o.shadow)(this,"_keyboardManager",new S([[["ctrl+a","mac+meta+a"],M.selectAll],[["ctrl+z","mac+meta+z"],M.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],M.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],M.delete],[["Escape","mac+Escape"],M.unselectAll],[["ArrowLeft","mac+ArrowLeft"],M.translateSelectedEditors,{args:[-N,0],checker:I}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],M.translateSelectedEditors,{args:[-B,0],checker:I}],[["ArrowRight","mac+ArrowRight"],M.translateSelectedEditors,{args:[N,0],checker:I}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],M.translateSelectedEditors,{args:[B,0],checker:I}],[["ArrowUp","mac+ArrowUp"],M.translateSelectedEditors,{args:[0,-N],checker:I}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],M.translateSelectedEditors,{args:[0,-B],checker:I}],[["ArrowDown","mac+ArrowDown"],M.translateSelectedEditors,{args:[0,N],checker:I}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],M.translateSelectedEditors,{args:[0,B],checker:I}]]))}constructor(M,I,N,B,H,U){this.#x=M,this.#k=I,this.#i=N,this._eventBus=B,this._eventBus._on("editingaction",this.#N),this._eventBus._on("pagechanging",this.#C),this._eventBus._on("scalechanging",this.#O),this._eventBus._on("rotationchanging",this.#D),this.#a=H.annotationStorage,this.#d=H.filterFactory,this.#y=U,this.viewParameters={realScale:u.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#M(),this.#G(),this._eventBus._off("editingaction",this.#N),this._eventBus._off("pagechanging",this.#C),this._eventBus._off("scalechanging",this.#O),this._eventBus._off("rotationchanging",this.#D);for(const M of this.#n.values())M.destroy();this.#n.clear(),this.#t.clear(),this.#f.clear(),this.#e=null,this.#u.clear(),this.#o.destroy(),this.#i.destroy()}get hcmFilter(){return(0,o.shadow)(this,"hcmFilter",this.#y?this.#d.addHCMFilter(this.#y.foreground,this.#y.background):"none")}get direction(){return(0,o.shadow)(this,"direction",getComputedStyle(this.#x).direction)}editAltText(M){this.#i?.editAltText(this,M)}onPageChanging({pageNumber:M}){this.#s=M-1}focusMainContainer(){this.#x.focus()}findParent(M,I){for(const N of this.#n.values()){const{x:B,y:H,width:U,height:$}=N.div.getBoundingClientRect();if(M>=B&&M<=B+U&&I>=H&&I<=H+$)return N}return null}disableUserSelect(M=!1){this.#k.classList.toggle("noUserSelect",M)}addShouldRescale(M){this.#f.add(M)}removeShouldRescale(M){this.#f.delete(M)}onScaleChanging({scale:M}){this.commitOrRemove(),this.viewParameters.realScale=M*u.PixelsPerInch.PDF_TO_CSS_UNITS;for(const I of this.#f)I.onScaleChanging()}onRotationChanging({pagesRotation:M}){this.commitOrRemove(),this.viewParameters.rotation=M}addToAnnotationStorage(M){!M.isEmpty()&&this.#a&&!this.#a.has(M.id)&&this.#a.setValue(M.id,M)}#B(){window.addEventListener("focus",this.#w),window.addEventListener("blur",this.#E)}#G(){window.removeEventListener("focus",this.#w),window.removeEventListener("blur",this.#E)}blur(){if(!this.hasSelection)return;const{activeElement:M}=document;for(const I of this.#u)if(I.div.contains(M)){this.#m=[I,M],I._focusEventsAllowed=!1;break}}focus(){if(!this.#m)return;const[M,I]=this.#m;this.#m=null,I.addEventListener("focusin",()=>{M._focusEventsAllowed=!0},{once:!0}),I.focus()}#H(){window.addEventListener("keydown",this.#L,{capture:!0})}#M(){window.removeEventListener("keydown",this.#L,{capture:!0})}#F(){document.addEventListener("copy",this.#A),document.addEventListener("cut",this.#_),document.addEventListener("paste",this.#I)}#R(){document.removeEventListener("copy",this.#A),document.removeEventListener("cut",this.#_),document.removeEventListener("paste",this.#I)}addEditListeners(){this.#H(),this.#F()}removeEditListeners(){this.#M(),this.#R()}copy(M){if(M.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const I=[];for(const N of this.#u){const B=N.serialize(!0);B&&I.push(B)}I.length!==0&&M.clipboardData.setData("application/pdfjs",JSON.stringify(I))}cut(M){this.copy(M),this.delete()}paste(M){M.preventDefault();const{clipboardData:I}=M;for(const H of I.items)for(const U of this.#r)if(U.isHandlingMimeForPasting(H.type)){U.paste(H,this.currentLayer);return}let N=I.getData("application/pdfjs");if(!N)return;try{N=JSON.parse(N)}catch(H){(0,o.warn)(`paste: "${H.message}".`);return}if(!Array.isArray(N))return;this.unselectAll();const B=this.currentLayer;try{const H=[];for(const z of N){const j=B.deserialize(z);if(!j)return;H.push(j)}const U=()=>{for(const z of H)this.#U(z);this.#W(H)},$=()=>{for(const z of H)z.remove()};this.addCommands({cmd:U,undo:$,mustExec:!0})}catch(H){(0,o.warn)(`paste: "${H.message}".`)}}keydown(M){this.getActive()?.shouldGetKeyboardEvents()||_._keyboardManager.exec(this,M)}onEditingAction(M){["undo","redo","delete","selectAll"].includes(M.name)&&this[M.name]()}#b(M){Object.entries(M).some(([N,B])=>this.#P[N]!==B)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#P,M)})}#V(M){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:M})}setEditingState(M){M?(this.#B(),this.#H(),this.#F(),this.#b({isEditing:this.#g!==o.AnnotationEditorType.NONE,isEmpty:this.#z(),hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:this.#o.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#G(),this.#M(),this.#R(),this.#b({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(M){if(!this.#r){this.#r=M;for(const I of this.#r)this.#V(I.defaultPropertiesToUpdate)}}getId(){return this.#h.getId()}get currentLayer(){return this.#n.get(this.#s)}getLayer(M){return this.#n.get(M)}get currentPageIndex(){return this.#s}addLayer(M){this.#n.set(M.pageIndex,M),this.#p?M.enable():M.disable()}removeLayer(M){this.#n.delete(M.pageIndex)}updateMode(M,I=null){if(this.#g!==M){if(this.#g=M,M===o.AnnotationEditorType.NONE){this.setEditingState(!1),this.#$();return}this.setEditingState(!0),this.#j(),this.unselectAll();for(const N of this.#n.values())N.updateMode(M);if(I){for(const N of this.#t.values())if(N.annotationElementId===I){this.setSelected(N),N.enterInEditMode();break}}}}updateToolbar(M){M!==this.#g&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:M})}updateParams(M,I){if(this.#r){if(M===o.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(M);return}for(const N of this.#u)N.updateParams(M,I);for(const N of this.#r)N.updateDefaultParams(M,I)}}enableWaiting(M=!1){if(this.#v!==M){this.#v=M;for(const I of this.#n.values())M?I.disableClick():I.enableClick(),I.div.classList.toggle("waiting",M)}}#j(){if(!this.#p){this.#p=!0;for(const M of this.#n.values())M.enable()}}#$(){if(this.unselectAll(),this.#p){this.#p=!1;for(const M of this.#n.values())M.disable()}}getEditors(M){const I=[];for(const N of this.#t.values())N.pageIndex===M&&I.push(N);return I}getEditor(M){return this.#t.get(M)}addEditor(M){this.#t.set(M.id,M)}removeEditor(M){this.#t.delete(M.id),this.unselect(M),(!M.annotationElementId||!this.#l.has(M.annotationElementId))&&this.#a?.remove(M.id)}addDeletedAnnotationElement(M){this.#l.add(M.annotationElementId),M.deleted=!0}isDeletedAnnotationElement(M){return this.#l.has(M)}removeDeletedAnnotationElement(M){this.#l.delete(M.annotationElementId),M.deleted=!1}#U(M){const I=this.#n.get(M.pageIndex);I?I.addOrRebuild(M):this.addEditor(M)}setActiveEditor(M){this.#e!==M&&(this.#e=M,M&&this.#V(M.propertiesToUpdate))}toggleSelected(M){if(this.#u.has(M)){this.#u.delete(M),M.unselect(),this.#b({hasSelectedEditor:this.hasSelection});return}this.#u.add(M),M.select(),this.#V(M.propertiesToUpdate),this.#b({hasSelectedEditor:!0})}setSelected(M){for(const I of this.#u)I!==M&&I.unselect();this.#u.clear(),this.#u.add(M),M.select(),this.#V(M.propertiesToUpdate),this.#b({hasSelectedEditor:!0})}isSelected(M){return this.#u.has(M)}unselect(M){M.unselect(),this.#u.delete(M),this.#b({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#u.size!==0}undo(){this.#o.undo(),this.#b({hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#z()})}redo(){this.#o.redo(),this.#b({hasSomethingToUndo:!0,hasSomethingToRedo:this.#o.hasSomethingToRedo(),isEmpty:this.#z()})}addCommands(M){this.#o.add(M),this.#b({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#z()})}#z(){if(this.#t.size===0)return!0;if(this.#t.size===1)for(const M of this.#t.values())return M.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const M=[...this.#u],I=()=>{for(const B of M)B.remove()},N=()=>{for(const B of M)this.#U(B)};this.addCommands({cmd:I,undo:N,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#W(M){this.#u.clear();for(const I of M)I.isEmpty()||(this.#u.add(I),I.select());this.#b({hasSelectedEditor:!0})}selectAll(){for(const M of this.#u)M.commit();this.#W(this.#t.values())}unselectAll(){if(this.#e){this.#e.commitOrRemove();return}if(this.hasSelection){for(const M of this.#u)M.unselect();this.#u.clear(),this.#b({hasSelectedEditor:!1})}}translateSelectedEditors(M,I,N=!1){if(N||this.commitOrRemove(),!this.hasSelection)return;this.#S[0]+=M,this.#S[1]+=I;const[B,H]=this.#S,U=[...this.#u],$=1e3;this.#T&&clearTimeout(this.#T),this.#T=setTimeout(()=>{this.#T=null,this.#S[0]=this.#S[1]=0,this.addCommands({cmd:()=>{for(const z of U)this.#t.has(z.id)&&z.translateInPage(B,H)},undo:()=>{for(const z of U)this.#t.has(z.id)&&z.translateInPage(-B,-H)},mustExec:!1})},$);for(const z of U)z.translateInPage(M,I)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#c=new Map;for(const M of this.#u)this.#c.set(M,{savedX:M.x,savedY:M.y,savedPageIndex:M.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#c)return!1;this.disableUserSelect(!1);const M=this.#c;this.#c=null;let I=!1;for(const[{x:B,y:H,pageIndex:U},$]of M)$.newX=B,$.newY=H,$.newPageIndex=U,I||=B!==$.savedX||H!==$.savedY||U!==$.savedPageIndex;if(!I)return!1;const N=(B,H,U,$)=>{if(this.#t.has(B.id)){const z=this.#n.get($);z?B._setParentAndPosition(z,H,U):(B.pageIndex=$,B.x=H,B.y=U)}};return this.addCommands({cmd:()=>{for(const[B,{newX:H,newY:U,newPageIndex:$}]of M)N(B,H,U,$)},undo:()=>{for(const[B,{savedX:H,savedY:U,savedPageIndex:$}]of M)N(B,H,U,$)},mustExec:!0}),!0}dragSelectedEditors(M,I){if(this.#c)for(const N of this.#c.keys())N.drag(M,I)}rebuild(M){if(M.parent===null){const I=this.getLayer(M.pageIndex);I?(I.changeParent(M),I.addOrRebuild(M)):(this.addEditor(M),this.addToAnnotationStorage(M),M.rebuild())}else M.parent.addOrRebuild(M)}isActive(M){return this.#e===M}getActive(){return this.#e}getMode(){return this.#g}get imageManager(){return(0,o.shadow)(this,"imageManager",new v)}}t.AnnotationEditorUIManager=_}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=void 0,t.deprecated=J,t.getColorValues=Ce,t.getCurrentTransform=be,t.getCurrentTransformInverse=xe,t.getFilenameFromUrl=B,t.getPdfFilenameFromUrl=H,t.getRGB=de,t.getXfaPageViewport=fe,t.isDataScheme=I,t.isPdfFile=N,t.isValidFetchUrl=$,t.loadScript=j,t.noContextMenu=z,t.setLayerDimensions=Ee;var o=n(7),u=n(1);const d="http://www.w3.org/2000/svg";class f{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}t.PixelsPerInch=f;class g extends o.BaseFilterFactory{#e;#t;#n;#i;#a;#o;#s;#l;#c;#r;#f=0;constructor({docId:oe,ownerDocument:ee=globalThis.document}={}){super(),this.#n=oe,this.#i=ee}get#d(){return this.#e||=new Map}get#h(){if(!this.#t){const oe=this.#i.createElement("div"),{style:ee}=oe;ee.visibility="hidden",ee.contain="strict",ee.width=ee.height=0,ee.position="absolute",ee.top=ee.left=0,ee.zIndex=-1;const Z=this.#i.createElementNS(d,"svg");Z.setAttribute("width",0),Z.setAttribute("height",0),this.#t=this.#i.createElementNS(d,"defs"),oe.append(Z),Z.append(this.#t),this.#i.body.append(oe)}return this.#t}addFilter(oe){if(!oe)return"none";let ee=this.#d.get(oe);if(ee)return ee;let Z,Q,K,ne;if(oe.length===1){const X=oe[0],le=new Array(256);for(let he=0;he<256;he++)le[he]=X[he]/255;ne=Z=Q=K=le.join(",")}else{const[X,le,he]=oe,ce=new Array(256),me=new Array(256),we=new Array(256);for(let Se=0;Se<256;Se++)ce[Se]=X[Se]/255,me[Se]=le[Se]/255,we[Se]=he[Se]/255;Z=ce.join(","),Q=me.join(","),K=we.join(","),ne=`${Z}${Q}${K}`}if(ee=this.#d.get(ne),ee)return this.#d.set(oe,ee),ee;const ue=`g_${this.#n}_transfer_map_${this.#f++}`,ye=`url(#${ue})`;this.#d.set(oe,ye),this.#d.set(ne,ye);const pe=this.#v(ue);return this.#g(Z,Q,K,pe),ye}addHCMFilter(oe,ee){const Z=`${oe}-${ee}`;if(this.#o===Z)return this.#s;if(this.#o=Z,this.#s="none",this.#a?.remove(),!oe||!ee)return this.#s;const Q=this.#u(oe);oe=u.Util.makeHexColor(...Q);const K=this.#u(ee);if(ee=u.Util.makeHexColor(...K),this.#h.style.color="",oe==="#000000"&&ee==="#ffffff"||oe===ee)return this.#s;const ne=new Array(256);for(let le=0;le<=255;le++){const he=le/255;ne[le]=he<=.03928?he/12.92:((he+.055)/1.055)**2.4}const ue=ne.join(","),ye=`g_${this.#n}_hcm_filter`,pe=this.#l=this.#v(ye);this.#g(ue,ue,ue,pe),this.#p(pe);const X=(le,he)=>{const ce=Q[le]/255,me=K[le]/255,we=new Array(he+1);for(let Se=0;Se<=he;Se++)we[Se]=ce+Se/he*(me-ce);return we.join(",")};return this.#g(X(0,5),X(1,5),X(2,5),pe),this.#s=`url(#${ye})`,this.#s}addHighlightHCMFilter(oe,ee,Z,Q){const K=`${oe}-${ee}-${Z}-${Q}`;if(this.#c===K)return this.#r;if(this.#c=K,this.#r="none",this.#l?.remove(),!oe||!ee)return this.#r;const[ne,ue]=[oe,ee].map(this.#u.bind(this));let ye=Math.round(.2126*ne[0]+.7152*ne[1]+.0722*ne[2]),pe=Math.round(.2126*ue[0]+.7152*ue[1]+.0722*ue[2]),[X,le]=[Z,Q].map(this.#u.bind(this));pe<ye&&([ye,pe,X,le]=[pe,ye,le,X]),this.#h.style.color="";const he=(we,Se,_e)=>{const We=new Array(256),Fe=(pe-ye)/_e,Le=we/255,De=(Se-we)/(255*_e);let Be=0;for(let $e=0;$e<=_e;$e++){const Ze=Math.round(ye+$e*Fe),Ye=Le+$e*De;for(let nt=Be;nt<=Ze;nt++)We[nt]=Ye;Be=Ze+1}for(let $e=Be;$e<256;$e++)We[$e]=We[Be-1];return We.join(",")},ce=`g_${this.#n}_hcm_highlight_filter`,me=this.#l=this.#v(ce);return this.#p(me),this.#g(he(X[0],le[0],5),he(X[1],le[1],5),he(X[2],le[2],5),me),this.#r=`url(#${ce})`,this.#r}destroy(oe=!1){oe&&(this.#s||this.#r)||(this.#t&&(this.#t.parentNode.parentNode.remove(),this.#t=null),this.#e&&(this.#e.clear(),this.#e=null),this.#f=0)}#p(oe){const ee=this.#i.createElementNS(d,"feColorMatrix");ee.setAttribute("type","matrix"),ee.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),oe.append(ee)}#v(oe){const ee=this.#i.createElementNS(d,"filter");return ee.setAttribute("color-interpolation-filters","sRGB"),ee.setAttribute("id",oe),this.#h.append(ee),ee}#m(oe,ee,Z){const Q=this.#i.createElementNS(d,ee);Q.setAttribute("type","discrete"),Q.setAttribute("tableValues",Z),oe.append(Q)}#g(oe,ee,Z,Q){const K=this.#i.createElementNS(d,"feComponentTransfer");Q.append(K),this.#m(K,"feFuncR",oe),this.#m(K,"feFuncG",ee),this.#m(K,"feFuncB",Z)}#u(oe){return this.#h.style.color=oe,de(getComputedStyle(this.#h).getPropertyValue("color"))}}t.DOMFilterFactory=g;class v extends o.BaseCanvasFactory{constructor({ownerDocument:oe=globalThis.document}={}){super(),this._document=oe}_createCanvas(oe,ee){const Z=this._document.createElement("canvas");return Z.width=oe,Z.height=ee,Z}}t.DOMCanvasFactory=v;async function w(ae,oe=!1){if($(ae,document.baseURI)){const ee=await fetch(ae);if(!ee.ok)throw new Error(ee.statusText);return oe?new Uint8Array(await ee.arrayBuffer()):(0,u.stringToBytes)(await ee.text())}return new Promise((ee,Z)=>{const Q=new XMLHttpRequest;Q.open("GET",ae,!0),oe&&(Q.responseType="arraybuffer"),Q.onreadystatechange=()=>{if(Q.readyState===XMLHttpRequest.DONE){if(Q.status===200||Q.status===0){let K;if(oe&&Q.response?K=new Uint8Array(Q.response):!oe&&Q.responseText&&(K=(0,u.stringToBytes)(Q.responseText)),K){ee(K);return}}Z(new Error(Q.statusText))}},Q.send(null)})}class S extends o.BaseCMapReaderFactory{_fetchData(oe,ee){return w(oe,this.isCompressed).then(Z=>({cMapData:Z,compressionType:ee}))}}t.DOMCMapReaderFactory=S;class R extends o.BaseStandardFontDataFactory{_fetchData(oe){return w(oe,!0)}}t.DOMStandardFontDataFactory=R;class _ extends o.BaseSVGFactory{_createSVG(oe){return document.createElementNS(d,oe)}}t.DOMSVGFactory=_;class F{constructor({viewBox:oe,scale:ee,rotation:Z,offsetX:Q=0,offsetY:K=0,dontFlip:ne=!1}){this.viewBox=oe,this.scale=ee,this.rotation=Z,this.offsetX=Q,this.offsetY=K;const ue=(oe[2]+oe[0])/2,ye=(oe[3]+oe[1])/2;let pe,X,le,he;switch(Z%=360,Z<0&&(Z+=360),Z){case 180:pe=-1,X=0,le=0,he=1;break;case 90:pe=0,X=1,le=1,he=0;break;case 270:pe=0,X=-1,le=-1,he=0;break;case 0:pe=1,X=0,le=0,he=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}ne&&(le=-le,he=-he);let ce,me,we,Se;pe===0?(ce=Math.abs(ye-oe[1])*ee+Q,me=Math.abs(ue-oe[0])*ee+K,we=(oe[3]-oe[1])*ee,Se=(oe[2]-oe[0])*ee):(ce=Math.abs(ue-oe[0])*ee+Q,me=Math.abs(ye-oe[1])*ee+K,we=(oe[2]-oe[0])*ee,Se=(oe[3]-oe[1])*ee),this.transform=[pe*ee,X*ee,le*ee,he*ee,ce-pe*ee*ue-le*ee*ye,me-X*ee*ue-he*ee*ye],this.width=we,this.height=Se}get rawDims(){const{viewBox:oe}=this;return(0,u.shadow)(this,"rawDims",{pageWidth:oe[2]-oe[0],pageHeight:oe[3]-oe[1],pageX:oe[0],pageY:oe[1]})}clone({scale:oe=this.scale,rotation:ee=this.rotation,offsetX:Z=this.offsetX,offsetY:Q=this.offsetY,dontFlip:K=!1}={}){return new F({viewBox:this.viewBox.slice(),scale:oe,rotation:ee,offsetX:Z,offsetY:Q,dontFlip:K})}convertToViewportPoint(oe,ee){return u.Util.applyTransform([oe,ee],this.transform)}convertToViewportRectangle(oe){const ee=u.Util.applyTransform([oe[0],oe[1]],this.transform),Z=u.Util.applyTransform([oe[2],oe[3]],this.transform);return[ee[0],ee[1],Z[0],Z[1]]}convertToPdfPoint(oe,ee){return u.Util.applyInverseTransform([oe,ee],this.transform)}}t.PageViewport=F;class M extends u.BaseException{constructor(oe,ee=0){super(oe,"RenderingCancelledException"),this.extraDelay=ee}}t.RenderingCancelledException=M;function I(ae){const oe=ae.length;let ee=0;for(;ee<oe&&ae[ee].trim()==="";)ee++;return ae.substring(ee,ee+5).toLowerCase()==="data:"}function N(ae){return typeof ae=="string"&&/\.pdf$/i.test(ae)}function B(ae,oe=!1){return oe||([ae]=ae.split(/[#?]/,1)),ae.substring(ae.lastIndexOf("/")+1)}function H(ae,oe="document.pdf"){if(typeof ae!="string")return oe;if(I(ae))return(0,u.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),oe;const ee=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Z=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Q=ee.exec(ae);let K=Z.exec(Q[1])||Z.exec(Q[2])||Z.exec(Q[3]);if(K&&(K=K[0],K.includes("%")))try{K=Z.exec(decodeURIComponent(K))[0]}catch{}return K||oe}class U{started=Object.create(null);times=[];time(oe){oe in this.started&&(0,u.warn)(`Timer is already running for ${oe}`),this.started[oe]=Date.now()}timeEnd(oe){oe in this.started||(0,u.warn)(`Timer has not been started for ${oe}`),this.times.push({name:oe,start:this.started[oe],end:Date.now()}),delete this.started[oe]}toString(){const oe=[];let ee=0;for(const{name:Z}of this.times)ee=Math.max(Z.length,ee);for(const{name:Z,start:Q,end:K}of this.times)oe.push(`${Z.padEnd(ee)} ${K-Q}ms
`);return oe.join("")}}t.StatTimer=U;function $(ae,oe){try{const{protocol:ee}=oe?new URL(ae,oe):new URL(ae);return ee==="http:"||ee==="https:"}catch{return!1}}function z(ae){ae.preventDefault()}function j(ae,oe=!1){return new Promise((ee,Z)=>{const Q=document.createElement("script");Q.src=ae,Q.onload=function(K){oe&&Q.remove(),ee(K)},Q.onerror=function(){Z(new Error(`Cannot load script at: ${Q.src}`))},(document.head||document.documentElement).append(Q)})}function J(ae){console.log("Deprecated API usage: "+ae)}let ie;class se{static toDateObject(oe){if(!oe||typeof oe!="string")return null;ie||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const ee=ie.exec(oe);if(!ee)return null;const Z=parseInt(ee[1],10);let Q=parseInt(ee[2],10);Q=Q>=1&&Q<=12?Q-1:0;let K=parseInt(ee[3],10);K=K>=1&&K<=31?K:1;let ne=parseInt(ee[4],10);ne=ne>=0&&ne<=23?ne:0;let ue=parseInt(ee[5],10);ue=ue>=0&&ue<=59?ue:0;let ye=parseInt(ee[6],10);ye=ye>=0&&ye<=59?ye:0;const pe=ee[7]||"Z";let X=parseInt(ee[8],10);X=X>=0&&X<=23?X:0;let le=parseInt(ee[9],10)||0;return le=le>=0&&le<=59?le:0,pe==="-"?(ne+=X,ue+=le):pe==="+"&&(ne-=X,ue-=le),new Date(Date.UTC(Z,Q,K,ne,ue,ye))}}t.PDFDateString=se;function fe(ae,{scale:oe=1,rotation:ee=0}){const{width:Z,height:Q}=ae.attributes.style,K=[0,0,parseInt(Z),parseInt(Q)];return new F({viewBox:K,scale:oe,rotation:ee})}function de(ae){if(ae.startsWith("#")){const oe=parseInt(ae.slice(1),16);return[(oe&16711680)>>16,(oe&65280)>>8,oe&255]}return ae.startsWith("rgb(")?ae.slice(4,-1).split(",").map(oe=>parseInt(oe)):ae.startsWith("rgba(")?ae.slice(5,-1).split(",").map(oe=>parseInt(oe)).slice(0,3):((0,u.warn)(`Not a valid color format: "${ae}"`),[0,0,0])}function Ce(ae){const oe=document.createElement("span");oe.style.visibility="hidden",document.body.append(oe);for(const ee of ae.keys()){oe.style.color=ee;const Z=window.getComputedStyle(oe).color;ae.set(ee,de(Z))}oe.remove()}function be(ae){const{a:oe,b:ee,c:Z,d:Q,e:K,f:ne}=ae.getTransform();return[oe,ee,Z,Q,K,ne]}function xe(ae){const{a:oe,b:ee,c:Z,d:Q,e:K,f:ne}=ae.getTransform().invertSelf();return[oe,ee,Z,Q,K,ne]}function Ee(ae,oe,ee=!1,Z=!0){if(oe instanceof F){const{pageWidth:Q,pageHeight:K}=oe.rawDims,{style:ne}=ae,ue=u.FeatureTest.isCSSRoundSupported,ye=`var(--scale-factor) * ${Q}px`,pe=`var(--scale-factor) * ${K}px`,X=ue?`round(${ye}, 1px)`:`calc(${ye})`,le=ue?`round(${pe}, 1px)`:`calc(${pe})`;!ee||oe.rotation%180===0?(ne.width=X,ne.height=le):(ne.width=le,ne.height=X)}Z&&ae.setAttribute("data-main-rotation",oe.rotation)}}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var o=n(1);class u{constructor(){this.constructor===u&&(0,o.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(S){return"none"}addHCMFilter(S,R){return"none"}addHighlightHCMFilter(S,R,_,F){return"none"}destroy(S=!1){}}t.BaseFilterFactory=u;class d{constructor(){this.constructor===d&&(0,o.unreachable)("Cannot initialize BaseCanvasFactory.")}create(S,R){if(S<=0||R<=0)throw new Error("Invalid canvas size");const _=this._createCanvas(S,R);return{canvas:_,context:_.getContext("2d")}}reset(S,R,_){if(!S.canvas)throw new Error("Canvas is not specified");if(R<=0||_<=0)throw new Error("Invalid canvas size");S.canvas.width=R,S.canvas.height=_}destroy(S){if(!S.canvas)throw new Error("Canvas is not specified");S.canvas.width=0,S.canvas.height=0,S.canvas=null,S.context=null}_createCanvas(S,R){(0,o.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=d;class f{constructor({baseUrl:S=null,isCompressed:R=!0}){this.constructor===f&&(0,o.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=S,this.isCompressed=R}async fetch({name:S}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!S)throw new Error("CMap name must be specified.");const R=this.baseUrl+S+(this.isCompressed?".bcmap":""),_=this.isCompressed?o.CMapCompressionType.BINARY:o.CMapCompressionType.NONE;return this._fetchData(R,_).catch(F=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${R}`)})}_fetchData(S,R){(0,o.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=f;class g{constructor({baseUrl:S=null}){this.constructor===g&&(0,o.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=S}async fetch({filename:S}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!S)throw new Error("Font filename must be specified.");const R=`${this.baseUrl}${S}`;return this._fetchData(R).catch(_=>{throw new Error(`Unable to load font data at: ${R}`)})}_fetchData(S){(0,o.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=g;class v{constructor(){this.constructor===v&&(0,o.unreachable)("Cannot initialize BaseSVGFactory.")}create(S,R,_=!1){if(S<=0||R<=0)throw new Error("Invalid SVG dimensions");const F=this._createSVG("svg:svg");return F.setAttribute("version","1.1"),_||(F.setAttribute("width",`${S}px`),F.setAttribute("height",`${R}px`)),F.setAttribute("preserveAspectRatio","none"),F.setAttribute("viewBox",`0 0 ${S} ${R}`),F}createElement(S){if(typeof S!="string")throw new Error("Invalid SVG element type");return this._createSVG(S)}_createSVG(S){(0,o.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=v}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var o=n(1);const u=3285377520,d=4294901760,f=65535;class g{constructor(w){this.h1=w?w&4294967295:u,this.h2=w?w&4294967295:u}update(w){let S,R;if(typeof w=="string"){S=new Uint8Array(w.length*2),R=0;for(let J=0,ie=w.length;J<ie;J++){const se=w.charCodeAt(J);se<=255?S[R++]=se:(S[R++]=se>>>8,S[R++]=se&255)}}else if((0,o.isArrayBuffer)(w))S=w.slice(),R=S.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const _=R>>2,F=R-_*4,M=new Uint32Array(S.buffer,0,_);let I=0,N=0,B=this.h1,H=this.h2;const U=3432918353,$=461845907,z=U&f,j=$&f;for(let J=0;J<_;J++)J&1?(I=M[J],I=I*U&d|I*z&f,I=I<<15|I>>>17,I=I*$&d|I*j&f,B^=I,B=B<<13|B>>>19,B=B*5+3864292196):(N=M[J],N=N*U&d|N*z&f,N=N<<15|N>>>17,N=N*$&d|N*j&f,H^=N,H=H<<13|H>>>19,H=H*5+3864292196);switch(I=0,F){case 3:I^=S[_*4+2]<<16;case 2:I^=S[_*4+1]<<8;case 1:I^=S[_*4],I=I*U&d|I*z&f,I=I<<15|I>>>17,I=I*$&d|I*j&f,_&1?B^=I:H^=I}this.h1=B,this.h2=H}hexdigest(){let w=this.h1,S=this.h2;return w^=S>>>1,w=w*3981806797&d|w*36045&f,S=S*4283543511&d|((S<<16|w>>>16)*2950163797&d)>>>16,w^=S>>>1,w=w*444984403&d|w*60499&f,S=S*3301882366&d|((S<<16|w>>>16)*3120437893&d)>>>16,w^=S>>>1,(w>>>0).toString(16).padStart(8,"0")+(S>>>0).toString(16).padStart(8,"0")}}t.MurmurHash3_64=g}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var o=n(1);class u{#e=new Set;constructor({ownerDocument:g=globalThis.document,styleElement:v=null}){this._document=g,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(g){this.nativeFontFaces.add(g),this._document.fonts.add(g)}removeNativeFontFace(g){this.nativeFontFaces.delete(g),this._document.fonts.delete(g)}insertRule(g){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const v=this.styleElement.sheet;v.insertRule(g,v.cssRules.length)}clear(){for(const g of this.nativeFontFaces)this._document.fonts.delete(g);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(g){if(!(!g||this.#e.has(g.loadedName))){if((0,o.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:v,src:w,style:S}=g,R=new FontFace(v,w,S);this.addNativeFontFace(R);try{await R.load(),this.#e.add(v)}catch{(0,o.warn)(`Cannot load system font: ${g.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(R)}return}(0,o.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(g){if(g.attached||g.missingFile&&!g.systemFontInfo)return;if(g.attached=!0,g.systemFontInfo){await this.loadSystemFont(g.systemFontInfo);return}if(this.isFontLoadingAPISupported){const w=g.createNativeFontFace();if(w){this.addNativeFontFace(w);try{await w.loaded}catch(S){throw(0,o.warn)(`Failed to load font '${w.family}': '${S}'.`),g.disableFontFace=!0,S}}return}const v=g.createFontFaceRule();if(v){if(this.insertRule(v),this.isSyncFontLoadingSupported)return;await new Promise(w=>{const S=this._queueLoadingCallback(w);this._prepareFontLoadEvent(g,S)})}}get isFontLoadingAPISupported(){const g=!!this._document?.fonts;return(0,o.shadow)(this,"isFontLoadingAPISupported",g)}get isSyncFontLoadingSupported(){let g=!1;return(o.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(g=!0),(0,o.shadow)(this,"isSyncFontLoadingSupported",g)}_queueLoadingCallback(g){function v(){for((0,o.assert)(!S.done,"completeRequest() cannot be called twice."),S.done=!0;w.length>0&&w[0].done;){const R=w.shift();setTimeout(R.callback,0)}}const{loadingRequests:w}=this,S={done:!1,complete:v,callback:g};return w.push(S),S}get _loadTestFont(){const g=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,o.shadow)(this,"_loadTestFont",g)}_prepareFontLoadEvent(g,v){function w(fe,de){return fe.charCodeAt(de)<<24|fe.charCodeAt(de+1)<<16|fe.charCodeAt(de+2)<<8|fe.charCodeAt(de+3)&255}function S(fe,de,Ce,be){const xe=fe.substring(0,de),Ee=fe.substring(de+Ce);return xe+be+Ee}let R,_;const F=this._document.createElement("canvas");F.width=1,F.height=1;const M=F.getContext("2d");let I=0;function N(fe,de){if(++I>30){(0,o.warn)("Load test font never loaded."),de();return}if(M.font="30px "+fe,M.fillText(".",0,20),M.getImageData(0,0,1,1).data[3]>0){de();return}setTimeout(N.bind(null,fe,de))}const B=`lt${Date.now()}${this.loadTestFontId++}`;let H=this._loadTestFont;H=S(H,976,B.length,B);const $=16,z=1482184792;let j=w(H,$);for(R=0,_=B.length-3;R<_;R+=4)j=j-z+w(B,R)|0;R<B.length&&(j=j-z+w(B+"XXX",R)|0),H=S(H,$,4,(0,o.string32)(j));const J=`url(data:font/opentype;base64,${btoa(H)});`,ie=`@font-face {font-family:"${B}";src:${J}}`;this.insertRule(ie);const se=this._document.createElement("div");se.style.visibility="hidden",se.style.width=se.style.height="10px",se.style.position="absolute",se.style.top=se.style.left="0px";for(const fe of[g.loadedName,B]){const de=this._document.createElement("span");de.textContent="Hi",de.style.fontFamily=fe,se.append(de)}this._document.body.append(se),N(B,()=>{se.remove(),v.complete()})}}t.FontLoader=u;class d{constructor(g,{isEvalSupported:v=!0,disableFontFace:w=!1,ignoreErrors:S=!1,inspectFont:R=null}){this.compiledGlyphs=Object.create(null);for(const _ in g)this[_]=g[_];this.isEvalSupported=v!==!1,this.disableFontFace=w===!0,this.ignoreErrors=S===!0,this._inspectFont=R}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let g;if(!this.cssFontInfo)g=new FontFace(this.loadedName,this.data,{});else{const v={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(v.style=`oblique ${this.cssFontInfo.italicAngle}deg`),g=new FontFace(this.cssFontInfo.fontFamily,this.data,v)}return this._inspectFont?.(this),g}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const g=(0,o.bytesToString)(this.data),v=`url(data:${this.mimetype};base64,${btoa(g)});`;let w;if(!this.cssFontInfo)w=`@font-face {font-family:"${this.loadedName}";src:${v}}`;else{let S=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(S+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),w=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${S}src:${v}}`}return this._inspectFont?.(this,v),w}getPathGenerator(g,v){if(this.compiledGlyphs[v]!==void 0)return this.compiledGlyphs[v];let w;try{w=g.get(this.loadedName+"_path_"+v)}catch(S){if(!this.ignoreErrors)throw S;return(0,o.warn)(`getPathGenerator - ignoring character: "${S}".`),this.compiledGlyphs[v]=function(R,_){}}if(this.isEvalSupported&&o.FeatureTest.isEvalSupported){const S=[];for(const R of w){const _=R.args!==void 0?R.args.join(","):"";S.push("c.",R.cmd,"(",_,`);
`)}return this.compiledGlyphs[v]=new Function("c","size",S.join(""))}return this.compiledGlyphs[v]=function(S,R){for(const _ of w)_.cmd==="scale"&&(_.args=[R,-R]),S[_.cmd].apply(S,_.args)}}}t.FontFaceObject=d}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var o=n(7);n(1);const u=function(w){return new Promise((S,R)=>{require$$5.readFile(w,(F,M)=>{if(F||!M){R(new Error(F));return}S(new Uint8Array(M))})})};class d extends o.BaseFilterFactory{}t.NodeFilterFactory=d;class f extends o.BaseCanvasFactory{_createCanvas(S,R){return require$$5.createCanvas(S,R)}}t.NodeCanvasFactory=f;class g extends o.BaseCMapReaderFactory{_fetchData(S,R){return u(S).then(_=>({cMapData:_,compressionType:R}))}}t.NodeCMapReaderFactory=g;class v extends o.BaseStandardFontDataFactory{_fetchData(S){return u(S)}}t.NodeStandardFontDataFactory=v}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var o=n(1),u=n(6),d=n(12),f=n(13);const g=16,v=100,w=4096,S=15,R=10,_=1e3,F=16;function M(ee,Z){if(ee._removeMirroring)throw new Error("Context is already forwarding operations.");ee.__originalSave=ee.save,ee.__originalRestore=ee.restore,ee.__originalRotate=ee.rotate,ee.__originalScale=ee.scale,ee.__originalTranslate=ee.translate,ee.__originalTransform=ee.transform,ee.__originalSetTransform=ee.setTransform,ee.__originalResetTransform=ee.resetTransform,ee.__originalClip=ee.clip,ee.__originalMoveTo=ee.moveTo,ee.__originalLineTo=ee.lineTo,ee.__originalBezierCurveTo=ee.bezierCurveTo,ee.__originalRect=ee.rect,ee.__originalClosePath=ee.closePath,ee.__originalBeginPath=ee.beginPath,ee._removeMirroring=()=>{ee.save=ee.__originalSave,ee.restore=ee.__originalRestore,ee.rotate=ee.__originalRotate,ee.scale=ee.__originalScale,ee.translate=ee.__originalTranslate,ee.transform=ee.__originalTransform,ee.setTransform=ee.__originalSetTransform,ee.resetTransform=ee.__originalResetTransform,ee.clip=ee.__originalClip,ee.moveTo=ee.__originalMoveTo,ee.lineTo=ee.__originalLineTo,ee.bezierCurveTo=ee.__originalBezierCurveTo,ee.rect=ee.__originalRect,ee.closePath=ee.__originalClosePath,ee.beginPath=ee.__originalBeginPath,delete ee._removeMirroring},ee.save=function(){Z.save(),this.__originalSave()},ee.restore=function(){Z.restore(),this.__originalRestore()},ee.translate=function(K,ne){Z.translate(K,ne),this.__originalTranslate(K,ne)},ee.scale=function(K,ne){Z.scale(K,ne),this.__originalScale(K,ne)},ee.transform=function(K,ne,ue,ye,pe,X){Z.transform(K,ne,ue,ye,pe,X),this.__originalTransform(K,ne,ue,ye,pe,X)},ee.setTransform=function(K,ne,ue,ye,pe,X){Z.setTransform(K,ne,ue,ye,pe,X),this.__originalSetTransform(K,ne,ue,ye,pe,X)},ee.resetTransform=function(){Z.resetTransform(),this.__originalResetTransform()},ee.rotate=function(K){Z.rotate(K),this.__originalRotate(K)},ee.clip=function(K){Z.clip(K),this.__originalClip(K)},ee.moveTo=function(Q,K){Z.moveTo(Q,K),this.__originalMoveTo(Q,K)},ee.lineTo=function(Q,K){Z.lineTo(Q,K),this.__originalLineTo(Q,K)},ee.bezierCurveTo=function(Q,K,ne,ue,ye,pe){Z.bezierCurveTo(Q,K,ne,ue,ye,pe),this.__originalBezierCurveTo(Q,K,ne,ue,ye,pe)},ee.rect=function(Q,K,ne,ue){Z.rect(Q,K,ne,ue),this.__originalRect(Q,K,ne,ue)},ee.closePath=function(){Z.closePath(),this.__originalClosePath()},ee.beginPath=function(){Z.beginPath(),this.__originalBeginPath()}}class I{constructor(Z){this.canvasFactory=Z,this.cache=Object.create(null)}getCanvas(Z,Q,K){let ne;return this.cache[Z]!==void 0?(ne=this.cache[Z],this.canvasFactory.reset(ne,Q,K)):(ne=this.canvasFactory.create(Q,K),this.cache[Z]=ne),ne}delete(Z){delete this.cache[Z]}clear(){for(const Z in this.cache){const Q=this.cache[Z];this.canvasFactory.destroy(Q),delete this.cache[Z]}}}function N(ee,Z,Q,K,ne,ue,ye,pe,X,le){const[he,ce,me,we,Se,_e]=(0,u.getCurrentTransform)(ee);if(ce===0&&me===0){const Le=ye*he+Se,De=Math.round(Le),Be=pe*we+_e,$e=Math.round(Be),Ze=(ye+X)*he+Se,Ye=Math.abs(Math.round(Ze)-De)||1,nt=(pe+le)*we+_e,it=Math.abs(Math.round(nt)-$e)||1;return ee.setTransform(Math.sign(he),0,0,Math.sign(we),De,$e),ee.drawImage(Z,Q,K,ne,ue,0,0,Ye,it),ee.setTransform(he,ce,me,we,Se,_e),[Ye,it]}if(he===0&&we===0){const Le=pe*me+Se,De=Math.round(Le),Be=ye*ce+_e,$e=Math.round(Be),Ze=(pe+le)*me+Se,Ye=Math.abs(Math.round(Ze)-De)||1,nt=(ye+X)*ce+_e,it=Math.abs(Math.round(nt)-$e)||1;return ee.setTransform(0,Math.sign(ce),Math.sign(me),0,De,$e),ee.drawImage(Z,Q,K,ne,ue,0,0,it,Ye),ee.setTransform(he,ce,me,we,Se,_e),[it,Ye]}ee.drawImage(Z,Q,K,ne,ue,ye,pe,X,le);const We=Math.hypot(he,ce),Fe=Math.hypot(me,we);return[We*X,Fe*le]}function B(ee){const{width:Z,height:Q}=ee;if(Z>_||Q>_)return null;const K=1e3,ne=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),ue=Z+1;let ye=new Uint8Array(ue*(Q+1)),pe,X,le;const he=Z+7&-8;let ce=new Uint8Array(he*Q),me=0;for(const Fe of ee.data){let Le=128;for(;Le>0;)ce[me++]=Fe&Le?0:255,Le>>=1}let we=0;for(me=0,ce[me]!==0&&(ye[0]=1,++we),X=1;X<Z;X++)ce[me]!==ce[me+1]&&(ye[X]=ce[me]?2:1,++we),me++;for(ce[me]!==0&&(ye[X]=2,++we),pe=1;pe<Q;pe++){me=pe*he,le=pe*ue,ce[me-he]!==ce[me]&&(ye[le]=ce[me]?1:8,++we);let Fe=(ce[me]?4:0)+(ce[me-he]?8:0);for(X=1;X<Z;X++)Fe=(Fe>>2)+(ce[me+1]?4:0)+(ce[me-he+1]?8:0),ne[Fe]&&(ye[le+X]=ne[Fe],++we),me++;if(ce[me-he]!==ce[me]&&(ye[le+X]=ce[me]?2:4,++we),we>K)return null}for(me=he*(Q-1),le=pe*ue,ce[me]!==0&&(ye[le]=8,++we),X=1;X<Z;X++)ce[me]!==ce[me+1]&&(ye[le+X]=ce[me]?4:8,++we),me++;if(ce[me]!==0&&(ye[le+X]=4,++we),we>K)return null;const Se=new Int32Array([0,ue,-1,0,-ue,0,0,0,1]),_e=new Path2D;for(pe=0;we&&pe<=Q;pe++){let Fe=pe*ue;const Le=Fe+Z;for(;Fe<Le&&!ye[Fe];)Fe++;if(Fe===Le)continue;_e.moveTo(Fe%ue,pe);const De=Fe;let Be=ye[Fe];do{const $e=Se[Be];do Fe+=$e;while(!ye[Fe]);const Ze=ye[Fe];Ze!==5&&Ze!==10?(Be=Ze,ye[Fe]=0):(Be=Ze&51*Be>>4,ye[Fe]&=Be>>2|Be<<2),_e.lineTo(Fe%ue,Fe/ue|0),ye[Fe]||--we}while(De!==Fe);--pe}return ce=null,ye=null,function(Fe){Fe.save(),Fe.scale(1/Z,-1/Q),Fe.translate(0,-Q),Fe.fill(_e),Fe.beginPath(),Fe.restore()}}class H{constructor(Z,Q){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=o.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=o.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,Z,Q])}clone(){const Z=Object.create(this);return Z.clipBox=this.clipBox.slice(),Z}setCurrentPoint(Z,Q){this.x=Z,this.y=Q}updatePathMinMax(Z,Q,K){[Q,K]=o.Util.applyTransform([Q,K],Z),this.minX=Math.min(this.minX,Q),this.minY=Math.min(this.minY,K),this.maxX=Math.max(this.maxX,Q),this.maxY=Math.max(this.maxY,K)}updateRectMinMax(Z,Q){const K=o.Util.applyTransform(Q,Z),ne=o.Util.applyTransform(Q.slice(2),Z);this.minX=Math.min(this.minX,K[0],ne[0]),this.minY=Math.min(this.minY,K[1],ne[1]),this.maxX=Math.max(this.maxX,K[0],ne[0]),this.maxY=Math.max(this.maxY,K[1],ne[1])}updateScalingPathMinMax(Z,Q){o.Util.scaleMinMax(Z,Q),this.minX=Math.min(this.minX,Q[0]),this.maxX=Math.max(this.maxX,Q[1]),this.minY=Math.min(this.minY,Q[2]),this.maxY=Math.max(this.maxY,Q[3])}updateCurvePathMinMax(Z,Q,K,ne,ue,ye,pe,X,le,he){const ce=o.Util.bezierBoundingBox(Q,K,ne,ue,ye,pe,X,le);if(he){he[0]=Math.min(he[0],ce[0],ce[2]),he[1]=Math.max(he[1],ce[0],ce[2]),he[2]=Math.min(he[2],ce[1],ce[3]),he[3]=Math.max(he[3],ce[1],ce[3]);return}this.updateRectMinMax(Z,ce)}getPathBoundingBox(Z=d.PathType.FILL,Q=null){const K=[this.minX,this.minY,this.maxX,this.maxY];if(Z===d.PathType.STROKE){Q||(0,o.unreachable)("Stroke bounding box must include transform.");const ne=o.Util.singularValueDecompose2dScale(Q),ue=ne[0]*this.lineWidth/2,ye=ne[1]*this.lineWidth/2;K[0]-=ue,K[1]-=ye,K[2]+=ue,K[3]+=ye}return K}updateClipFromPath(){const Z=o.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(Z||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(Z){this.clipBox=Z,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(Z=d.PathType.FILL,Q=null){return o.Util.intersect(this.clipBox,this.getPathBoundingBox(Z,Q))}}function U(ee,Z){if(typeof ImageData<"u"&&Z instanceof ImageData){ee.putImageData(Z,0,0);return}const Q=Z.height,K=Z.width,ne=Q%F,ue=(Q-ne)/F,ye=ne===0?ue:ue+1,pe=ee.createImageData(K,F);let X=0,le;const he=Z.data,ce=pe.data;let me,we,Se,_e;if(Z.kind===o.ImageKind.GRAYSCALE_1BPP){const We=he.byteLength,Fe=new Uint32Array(ce.buffer,0,ce.byteLength>>2),Le=Fe.length,De=K+7>>3,Be=4294967295,$e=o.FeatureTest.isLittleEndian?4278190080:255;for(me=0;me<ye;me++){for(Se=me<ue?F:ne,le=0,we=0;we<Se;we++){const Ze=We-X;let Ye=0;const nt=Ze>De?K:Ze*8-7,it=nt&-8;let ot=0,vt=0;for(;Ye<it;Ye+=8)vt=he[X++],Fe[le++]=vt&128?Be:$e,Fe[le++]=vt&64?Be:$e,Fe[le++]=vt&32?Be:$e,Fe[le++]=vt&16?Be:$e,Fe[le++]=vt&8?Be:$e,Fe[le++]=vt&4?Be:$e,Fe[le++]=vt&2?Be:$e,Fe[le++]=vt&1?Be:$e;for(;Ye<nt;Ye++)ot===0&&(vt=he[X++],ot=128),Fe[le++]=vt&ot?Be:$e,ot>>=1}for(;le<Le;)Fe[le++]=0;ee.putImageData(pe,0,me*F)}}else if(Z.kind===o.ImageKind.RGBA_32BPP){for(we=0,_e=K*F*4,me=0;me<ue;me++)ce.set(he.subarray(X,X+_e)),X+=_e,ee.putImageData(pe,0,we),we+=F;me<ye&&(_e=K*ne*4,ce.set(he.subarray(X,X+_e)),ee.putImageData(pe,0,we))}else if(Z.kind===o.ImageKind.RGB_24BPP)for(Se=F,_e=K*Se,me=0;me<ye;me++){for(me>=ue&&(Se=ne,_e=K*Se),le=0,we=_e;we--;)ce[le++]=he[X++],ce[le++]=he[X++],ce[le++]=he[X++],ce[le++]=255;ee.putImageData(pe,0,me*F)}else throw new Error(`bad image kind: ${Z.kind}`)}function $(ee,Z){if(Z.bitmap){ee.drawImage(Z.bitmap,0,0);return}const Q=Z.height,K=Z.width,ne=Q%F,ue=(Q-ne)/F,ye=ne===0?ue:ue+1,pe=ee.createImageData(K,F);let X=0;const le=Z.data,he=pe.data;for(let ce=0;ce<ye;ce++){const me=ce<ue?F:ne;({srcPos:X}=(0,f.convertBlackAndWhiteToRGBA)({src:le,srcPos:X,dest:he,width:K,height:me,nonBlackColor:0})),ee.putImageData(pe,0,ce*F)}}function z(ee,Z){const Q=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const K of Q)ee[K]!==void 0&&(Z[K]=ee[K]);ee.setLineDash!==void 0&&(Z.setLineDash(ee.getLineDash()),Z.lineDashOffset=ee.lineDashOffset)}function j(ee){if(ee.strokeStyle=ee.fillStyle="#000000",ee.fillRule="nonzero",ee.globalAlpha=1,ee.lineWidth=1,ee.lineCap="butt",ee.lineJoin="miter",ee.miterLimit=10,ee.globalCompositeOperation="source-over",ee.font="10px sans-serif",ee.setLineDash!==void 0&&(ee.setLineDash([]),ee.lineDashOffset=0),!o.isNodeJS){const{filter:Z}=ee;Z!=="none"&&Z!==""&&(ee.filter="none")}}function J(ee,Z,Q,K){const ne=ee.length;for(let ue=3;ue<ne;ue+=4){const ye=ee[ue];if(ye===0)ee[ue-3]=Z,ee[ue-2]=Q,ee[ue-1]=K;else if(ye<255){const pe=255-ye;ee[ue-3]=ee[ue-3]*ye+Z*pe>>8,ee[ue-2]=ee[ue-2]*ye+Q*pe>>8,ee[ue-1]=ee[ue-1]*ye+K*pe>>8}}}function ie(ee,Z,Q){const K=ee.length,ne=1/255;for(let ue=3;ue<K;ue+=4){const ye=Q?Q[ee[ue]]:ee[ue];Z[ue]=Z[ue]*ye*ne|0}}function se(ee,Z,Q){const K=ee.length;for(let ne=3;ne<K;ne+=4){const ue=ee[ne-3]*77+ee[ne-2]*152+ee[ne-1]*28;Z[ne]=Q?Z[ne]*Q[ue>>8]>>8:Z[ne]*ue>>16}}function fe(ee,Z,Q,K,ne,ue,ye,pe,X,le,he){const ce=!!ue,me=ce?ue[0]:0,we=ce?ue[1]:0,Se=ce?ue[2]:0,_e=ne==="Luminosity"?se:ie,Fe=Math.min(K,Math.ceil(1048576/Q));for(let Le=0;Le<K;Le+=Fe){const De=Math.min(Fe,K-Le),Be=ee.getImageData(pe-le,Le+(X-he),Q,De),$e=Z.getImageData(pe,Le+X,Q,De);ce&&J(Be.data,me,we,Se),_e(Be.data,$e.data,ye),Z.putImageData($e,pe,Le+X)}}function de(ee,Z,Q,K){const ne=K[0],ue=K[1],ye=K[2]-ne,pe=K[3]-ue;ye===0||pe===0||(fe(Z.context,Q,ye,pe,Z.subtype,Z.backdrop,Z.transferMap,ne,ue,Z.offsetX,Z.offsetY),ee.save(),ee.globalAlpha=1,ee.globalCompositeOperation="source-over",ee.setTransform(1,0,0,1,0,0),ee.drawImage(Q.canvas,0,0),ee.restore())}function Ce(ee,Z){const Q=o.Util.singularValueDecompose2dScale(ee);Q[0]=Math.fround(Q[0]),Q[1]=Math.fround(Q[1]);const K=Math.fround((globalThis.devicePixelRatio||1)*u.PixelsPerInch.PDF_TO_CSS_UNITS);return Z!==void 0?Z:Q[0]<=K||Q[1]<=K}const be=["butt","round","square"],xe=["miter","round","bevel"],Ee={},ae={};class oe{constructor(Z,Q,K,ne,ue,{optionalContentConfig:ye,markedContentStack:pe=null},X,le){this.ctx=Z,this.current=new H(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=Q,this.objs=K,this.canvasFactory=ne,this.filterFactory=ue,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=pe||[],this.optionalContentConfig=ye,this.cachedCanvases=new I(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=X,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=le,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(Z,Q=null){return typeof Z=="string"?Z.startsWith("g_")?this.commonObjs.get(Z):this.objs.get(Z):Q}beginDrawing({transform:Z,viewport:Q,transparency:K=!1,background:ne=null}){const ue=this.ctx.canvas.width,ye=this.ctx.canvas.height,pe=this.ctx.fillStyle;if(this.ctx.fillStyle=ne||"#ffffff",this.ctx.fillRect(0,0,ue,ye),this.ctx.fillStyle=pe,K){const X=this.cachedCanvases.getCanvas("transparent",ue,ye);this.compositeCtx=this.ctx,this.transparentCanvas=X.canvas,this.ctx=X.context,this.ctx.save(),this.ctx.transform(...(0,u.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),j(this.ctx),Z&&(this.ctx.transform(...Z),this.outputScaleX=Z[0],this.outputScaleY=Z[0]),this.ctx.transform(...Q.transform),this.viewportScale=Q.scale,this.baseTransform=(0,u.getCurrentTransform)(this.ctx)}executeOperatorList(Z,Q,K,ne){const ue=Z.argsArray,ye=Z.fnArray;let pe=Q||0;const X=ue.length;if(X===pe)return pe;const le=X-pe>R&&typeof K=="function",he=le?Date.now()+S:0;let ce=0;const me=this.commonObjs,we=this.objs;let Se;for(;;){if(ne!==void 0&&pe===ne.nextBreakPoint)return ne.breakIt(pe,K),pe;if(Se=ye[pe],Se!==o.OPS.dependency)this[Se].apply(this,ue[pe]);else for(const _e of ue[pe]){const We=_e.startsWith("g_")?me:we;if(!We.has(_e))return We.get(_e,K),pe}if(pe++,pe===X)return pe;if(le&&++ce>R){if(Date.now()>he)return K(),pe;ce=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const Z of this._cachedBitmapsMap.values()){for(const Q of Z.values())typeof HTMLCanvasElement<"u"&&Q instanceof HTMLCanvasElement&&(Q.width=Q.height=0);Z.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const Z=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(Z!=="none"){const Q=this.ctx.filter;this.ctx.filter=Z,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=Q}}}_scaleImage(Z,Q){const K=Z.width,ne=Z.height;let ue=Math.max(Math.hypot(Q[0],Q[1]),1),ye=Math.max(Math.hypot(Q[2],Q[3]),1),pe=K,X=ne,le="prescale1",he,ce;for(;ue>2&&pe>1||ye>2&&X>1;){let me=pe,we=X;ue>2&&pe>1&&(me=pe>=16384?Math.floor(pe/2)-1||1:Math.ceil(pe/2),ue/=pe/me),ye>2&&X>1&&(we=X>=16384?Math.floor(X/2)-1||1:Math.ceil(X)/2,ye/=X/we),he=this.cachedCanvases.getCanvas(le,me,we),ce=he.context,ce.clearRect(0,0,me,we),ce.drawImage(Z,0,0,pe,X,0,0,me,we),Z=he.canvas,pe=me,X=we,le=le==="prescale1"?"prescale2":"prescale1"}return{img:Z,paintWidth:pe,paintHeight:X}}_createMaskCanvas(Z){const Q=this.ctx,{width:K,height:ne}=Z,ue=this.current.fillColor,ye=this.current.patternFill,pe=(0,u.getCurrentTransform)(Q);let X,le,he,ce;if((Z.bitmap||Z.data)&&Z.count>1){const Ye=Z.bitmap||Z.data.buffer;le=JSON.stringify(ye?pe:[pe.slice(0,4),ue]),X=this._cachedBitmapsMap.get(Ye),X||(X=new Map,this._cachedBitmapsMap.set(Ye,X));const nt=X.get(le);if(nt&&!ye){const it=Math.round(Math.min(pe[0],pe[2])+pe[4]),ot=Math.round(Math.min(pe[1],pe[3])+pe[5]);return{canvas:nt,offsetX:it,offsetY:ot}}he=nt}he||(ce=this.cachedCanvases.getCanvas("maskCanvas",K,ne),$(ce.context,Z));let me=o.Util.transform(pe,[1/K,0,0,-1/ne,0,0]);me=o.Util.transform(me,[1,0,0,1,0,-ne]);const we=o.Util.applyTransform([0,0],me),Se=o.Util.applyTransform([K,ne],me),_e=o.Util.normalizeRect([we[0],we[1],Se[0],Se[1]]),We=Math.round(_e[2]-_e[0])||1,Fe=Math.round(_e[3]-_e[1])||1,Le=this.cachedCanvases.getCanvas("fillCanvas",We,Fe),De=Le.context,Be=Math.min(we[0],Se[0]),$e=Math.min(we[1],Se[1]);De.translate(-Be,-$e),De.transform(...me),he||(he=this._scaleImage(ce.canvas,(0,u.getCurrentTransformInverse)(De)),he=he.img,X&&ye&&X.set(le,he)),De.imageSmoothingEnabled=Ce((0,u.getCurrentTransform)(De),Z.interpolate),N(De,he,0,0,he.width,he.height,0,0,K,ne),De.globalCompositeOperation="source-in";const Ze=o.Util.transform((0,u.getCurrentTransformInverse)(De),[1,0,0,1,-Be,-$e]);return De.fillStyle=ye?ue.getPattern(Q,this,Ze,d.PathType.FILL):ue,De.fillRect(0,0,K,ne),X&&!ye&&(this.cachedCanvases.delete("fillCanvas"),X.set(le,Le.canvas)),{canvas:Le.canvas,offsetX:Math.round(Be),offsetY:Math.round($e)}}setLineWidth(Z){Z!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=Z,this.ctx.lineWidth=Z}setLineCap(Z){this.ctx.lineCap=be[Z]}setLineJoin(Z){this.ctx.lineJoin=xe[Z]}setMiterLimit(Z){this.ctx.miterLimit=Z}setDash(Z,Q){const K=this.ctx;K.setLineDash!==void 0&&(K.setLineDash(Z),K.lineDashOffset=Q)}setRenderingIntent(Z){}setFlatness(Z){}setGState(Z){for(const[Q,K]of Z)switch(Q){case"LW":this.setLineWidth(K);break;case"LC":this.setLineCap(K);break;case"LJ":this.setLineJoin(K);break;case"ML":this.setMiterLimit(K);break;case"D":this.setDash(K[0],K[1]);break;case"RI":this.setRenderingIntent(K);break;case"FL":this.setFlatness(K);break;case"Font":this.setFont(K[0],K[1]);break;case"CA":this.current.strokeAlpha=K;break;case"ca":this.current.fillAlpha=K,this.ctx.globalAlpha=K;break;case"BM":this.ctx.globalCompositeOperation=K;break;case"SMask":this.current.activeSMask=K?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(K);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const Z=this.inSMaskMode;this.current.activeSMask&&!Z?this.beginSMaskMode():!this.current.activeSMask&&Z&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const Z=this.ctx.canvas.width,Q=this.ctx.canvas.height,K="smaskGroupAt"+this.groupLevel,ne=this.cachedCanvases.getCanvas(K,Z,Q);this.suspendedCtx=this.ctx,this.ctx=ne.context;const ue=this.ctx;ue.setTransform(...(0,u.getCurrentTransform)(this.suspendedCtx)),z(this.suspendedCtx,ue),M(ue,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),z(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(Z){if(!this.current.activeSMask)return;Z?(Z[0]=Math.floor(Z[0]),Z[1]=Math.floor(Z[1]),Z[2]=Math.ceil(Z[2]),Z[3]=Math.ceil(Z[3])):Z=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const Q=this.current.activeSMask,K=this.suspendedCtx;de(K,Q,this.ctx,Z),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(z(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const Z=this.current;this.stateStack.push(Z),this.current=Z.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),z(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(Z,Q,K,ne,ue,ye){this.ctx.transform(Z,Q,K,ne,ue,ye),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(Z,Q,K){const ne=this.ctx,ue=this.current;let ye=ue.x,pe=ue.y,X,le;const he=(0,u.getCurrentTransform)(ne),ce=he[0]===0&&he[3]===0||he[1]===0&&he[2]===0,me=ce?K.slice(0):null;for(let we=0,Se=0,_e=Z.length;we<_e;we++)switch(Z[we]|0){case o.OPS.rectangle:ye=Q[Se++],pe=Q[Se++];const We=Q[Se++],Fe=Q[Se++],Le=ye+We,De=pe+Fe;ne.moveTo(ye,pe),We===0||Fe===0?ne.lineTo(Le,De):(ne.lineTo(Le,pe),ne.lineTo(Le,De),ne.lineTo(ye,De)),ce||ue.updateRectMinMax(he,[ye,pe,Le,De]),ne.closePath();break;case o.OPS.moveTo:ye=Q[Se++],pe=Q[Se++],ne.moveTo(ye,pe),ce||ue.updatePathMinMax(he,ye,pe);break;case o.OPS.lineTo:ye=Q[Se++],pe=Q[Se++],ne.lineTo(ye,pe),ce||ue.updatePathMinMax(he,ye,pe);break;case o.OPS.curveTo:X=ye,le=pe,ye=Q[Se+4],pe=Q[Se+5],ne.bezierCurveTo(Q[Se],Q[Se+1],Q[Se+2],Q[Se+3],ye,pe),ue.updateCurvePathMinMax(he,X,le,Q[Se],Q[Se+1],Q[Se+2],Q[Se+3],ye,pe,me),Se+=6;break;case o.OPS.curveTo2:X=ye,le=pe,ne.bezierCurveTo(ye,pe,Q[Se],Q[Se+1],Q[Se+2],Q[Se+3]),ue.updateCurvePathMinMax(he,X,le,ye,pe,Q[Se],Q[Se+1],Q[Se+2],Q[Se+3],me),ye=Q[Se+2],pe=Q[Se+3],Se+=4;break;case o.OPS.curveTo3:X=ye,le=pe,ye=Q[Se+2],pe=Q[Se+3],ne.bezierCurveTo(Q[Se],Q[Se+1],ye,pe,ye,pe),ue.updateCurvePathMinMax(he,X,le,Q[Se],Q[Se+1],ye,pe,ye,pe,me),Se+=4;break;case o.OPS.closePath:ne.closePath();break}ce&&ue.updateScalingPathMinMax(he,me),ue.setCurrentPoint(ye,pe)}closePath(){this.ctx.closePath()}stroke(Z=!0){const Q=this.ctx,K=this.current.strokeColor;Q.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof K=="object"&&K?.getPattern?(Q.save(),Q.strokeStyle=K.getPattern(Q,this,(0,u.getCurrentTransformInverse)(Q),d.PathType.STROKE),this.rescaleAndStroke(!1),Q.restore()):this.rescaleAndStroke(!0)),Z&&this.consumePath(this.current.getClippedPathBoundingBox()),Q.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(Z=!0){const Q=this.ctx,K=this.current.fillColor,ne=this.current.patternFill;let ue=!1;ne&&(Q.save(),Q.fillStyle=K.getPattern(Q,this,(0,u.getCurrentTransformInverse)(Q),d.PathType.FILL),ue=!0);const ye=this.current.getClippedPathBoundingBox();this.contentVisible&&ye!==null&&(this.pendingEOFill?(Q.fill("evenodd"),this.pendingEOFill=!1):Q.fill()),ue&&Q.restore(),Z&&this.consumePath(ye)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Ee}eoClip(){this.pendingClip=ae}beginText(){this.current.textMatrix=o.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const Z=this.pendingTextPaths,Q=this.ctx;if(Z===void 0){Q.beginPath();return}Q.save(),Q.beginPath();for(const K of Z)Q.setTransform(...K.transform),Q.translate(K.x,K.y),K.addToPath(Q,K.fontSize);Q.restore(),Q.clip(),Q.beginPath(),delete this.pendingTextPaths}setCharSpacing(Z){this.current.charSpacing=Z}setWordSpacing(Z){this.current.wordSpacing=Z}setHScale(Z){this.current.textHScale=Z/100}setLeading(Z){this.current.leading=-Z}setFont(Z,Q){const K=this.commonObjs.get(Z),ne=this.current;if(!K)throw new Error(`Can't find font for ${Z}`);if(ne.fontMatrix=K.fontMatrix||o.FONT_IDENTITY_MATRIX,(ne.fontMatrix[0]===0||ne.fontMatrix[3]===0)&&(0,o.warn)("Invalid font matrix for font "+Z),Q<0?(Q=-Q,ne.fontDirection=-1):ne.fontDirection=1,this.current.font=K,this.current.fontSize=Q,K.isType3Font)return;const ue=K.loadedName||"sans-serif",ye=K.systemFontInfo?.css||`"${ue}", ${K.fallbackName}`;let pe="normal";K.black?pe="900":K.bold&&(pe="bold");const X=K.italic?"italic":"normal";let le=Q;Q<g?le=g:Q>v&&(le=v),this.current.fontSizeScale=Q/le,this.ctx.font=`${X} ${pe} ${le}px ${ye}`}setTextRenderingMode(Z){this.current.textRenderingMode=Z}setTextRise(Z){this.current.textRise=Z}moveText(Z,Q){this.current.x=this.current.lineX+=Z,this.current.y=this.current.lineY+=Q}setLeadingMoveText(Z,Q){this.setLeading(-Q),this.moveText(Z,Q)}setTextMatrix(Z,Q,K,ne,ue,ye){this.current.textMatrix=[Z,Q,K,ne,ue,ye],this.current.textMatrixScale=Math.hypot(Z,Q),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(Z,Q,K,ne){const ue=this.ctx,ye=this.current,pe=ye.font,X=ye.textRenderingMode,le=ye.fontSize/ye.fontSizeScale,he=X&o.TextRenderingMode.FILL_STROKE_MASK,ce=!!(X&o.TextRenderingMode.ADD_TO_PATH_FLAG),me=ye.patternFill&&!pe.missingFile;let we;(pe.disableFontFace||ce||me)&&(we=pe.getPathGenerator(this.commonObjs,Z)),pe.disableFontFace||me?(ue.save(),ue.translate(Q,K),ue.beginPath(),we(ue,le),ne&&ue.setTransform(...ne),(he===o.TextRenderingMode.FILL||he===o.TextRenderingMode.FILL_STROKE)&&ue.fill(),(he===o.TextRenderingMode.STROKE||he===o.TextRenderingMode.FILL_STROKE)&&ue.stroke(),ue.restore()):((he===o.TextRenderingMode.FILL||he===o.TextRenderingMode.FILL_STROKE)&&ue.fillText(Z,Q,K),(he===o.TextRenderingMode.STROKE||he===o.TextRenderingMode.FILL_STROKE)&&ue.strokeText(Z,Q,K)),ce&&(this.pendingTextPaths||=[]).push({transform:(0,u.getCurrentTransform)(ue),x:Q,y:K,fontSize:le,addToPath:we})}get isFontSubpixelAAEnabled(){const{context:Z}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);Z.scale(1.5,1),Z.fillText("I",0,10);const Q=Z.getImageData(0,0,10,10).data;let K=!1;for(let ne=3;ne<Q.length;ne+=4)if(Q[ne]>0&&Q[ne]<255){K=!0;break}return(0,o.shadow)(this,"isFontSubpixelAAEnabled",K)}showText(Z){const Q=this.current,K=Q.font;if(K.isType3Font)return this.showType3Text(Z);const ne=Q.fontSize;if(ne===0)return;const ue=this.ctx,ye=Q.fontSizeScale,pe=Q.charSpacing,X=Q.wordSpacing,le=Q.fontDirection,he=Q.textHScale*le,ce=Z.length,me=K.vertical,we=me?1:-1,Se=K.defaultVMetrics,_e=ne*Q.fontMatrix[0],We=Q.textRenderingMode===o.TextRenderingMode.FILL&&!K.disableFontFace&&!Q.patternFill;ue.save(),ue.transform(...Q.textMatrix),ue.translate(Q.x,Q.y+Q.textRise),le>0?ue.scale(he,-1):ue.scale(he,1);let Fe;if(Q.patternFill){ue.save();const Ze=Q.fillColor.getPattern(ue,this,(0,u.getCurrentTransformInverse)(ue),d.PathType.FILL);Fe=(0,u.getCurrentTransform)(ue),ue.restore(),ue.fillStyle=Ze}let Le=Q.lineWidth;const De=Q.textMatrixScale;if(De===0||Le===0){const Ze=Q.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;(Ze===o.TextRenderingMode.STROKE||Ze===o.TextRenderingMode.FILL_STROKE)&&(Le=this.getSinglePixelWidth())}else Le/=De;if(ye!==1&&(ue.scale(ye,ye),Le/=ye),ue.lineWidth=Le,K.isInvalidPDFjsFont){const Ze=[];let Ye=0;for(const nt of Z)Ze.push(nt.unicode),Ye+=nt.width;ue.fillText(Ze.join(""),0,0),Q.x+=Ye*_e*he,ue.restore(),this.compose();return}let Be=0,$e;for($e=0;$e<ce;++$e){const Ze=Z[$e];if(typeof Ze=="number"){Be+=we*Ze*ne/1e3;continue}let Ye=!1;const nt=(Ze.isSpace?X:0)+pe,it=Ze.fontChar,ot=Ze.accent;let vt,nn,en=Ze.width;if(me){const wt=Ze.vmetric||Se,Bn=-(Ze.vmetric?wt[1]:en*.5)*_e,Bo=wt[2]*_e;en=wt?-wt[0]:en,vt=Bn/ye,nn=(Be+Bo)/ye}else vt=Be/ye,nn=0;if(K.remeasure&&en>0){const wt=ue.measureText(it).width*1e3/ne*ye;if(en<wt&&this.isFontSubpixelAAEnabled){const Bn=en/wt;Ye=!0,ue.save(),ue.scale(Bn,1),vt/=Bn}else en!==wt&&(vt+=(en-wt)/2e3*ne/ye)}if(this.contentVisible&&(Ze.isInFont||K.missingFile)){if(We&&!ot)ue.fillText(it,vt,nn);else if(this.paintChar(it,vt,nn,Fe),ot){const wt=vt+ne*ot.offset.x/ye,Bn=nn-ne*ot.offset.y/ye;this.paintChar(ot.fontChar,wt,Bn,Fe)}}const Dt=me?en*_e-nt*le:en*_e+nt*le;Be+=Dt,Ye&&ue.restore()}me?Q.y-=Be:Q.x+=Be*he,ue.restore(),this.compose()}showType3Text(Z){const Q=this.ctx,K=this.current,ne=K.font,ue=K.fontSize,ye=K.fontDirection,pe=ne.vertical?1:-1,X=K.charSpacing,le=K.wordSpacing,he=K.textHScale*ye,ce=K.fontMatrix||o.FONT_IDENTITY_MATRIX,me=Z.length,we=K.textRenderingMode===o.TextRenderingMode.INVISIBLE;let Se,_e,We,Fe;if(!(we||ue===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,Q.save(),Q.transform(...K.textMatrix),Q.translate(K.x,K.y),Q.scale(he,ye),Se=0;Se<me;++Se){if(_e=Z[Se],typeof _e=="number"){Fe=pe*_e*ue/1e3,this.ctx.translate(Fe,0),K.x+=Fe*he;continue}const Le=(_e.isSpace?le:0)+X,De=ne.charProcOperatorList[_e.operatorListId];if(!De){(0,o.warn)(`Type3 character "${_e.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=_e,this.save(),Q.scale(ue,ue),Q.transform(...ce),this.executeOperatorList(De),this.restore()),We=o.Util.applyTransform([_e.width,0],ce)[0]*ue+Le,Q.translate(We,0),K.x+=We*he}Q.restore(),this.processingType3=null}}setCharWidth(Z,Q){}setCharWidthAndBounds(Z,Q,K,ne,ue,ye){this.ctx.rect(K,ne,ue-K,ye-ne),this.ctx.clip(),this.endPath()}getColorN_Pattern(Z){let Q;if(Z[0]==="TilingPattern"){const K=Z[1],ne=this.baseTransform||(0,u.getCurrentTransform)(this.ctx),ue={createCanvasGraphics:ye=>new oe(ye,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};Q=new d.TilingPattern(Z,K,this.ctx,ue,ne)}else Q=this._getPattern(Z[1],Z[2]);return Q}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(Z,Q,K){const ne=o.Util.makeHexColor(Z,Q,K);this.ctx.strokeStyle=ne,this.current.strokeColor=ne}setFillRGBColor(Z,Q,K){const ne=o.Util.makeHexColor(Z,Q,K);this.ctx.fillStyle=ne,this.current.fillColor=ne,this.current.patternFill=!1}_getPattern(Z,Q=null){let K;return this.cachedPatterns.has(Z)?K=this.cachedPatterns.get(Z):(K=(0,d.getShadingPattern)(this.getObject(Z)),this.cachedPatterns.set(Z,K)),Q&&(K.matrix=Q),K}shadingFill(Z){if(!this.contentVisible)return;const Q=this.ctx;this.save();const K=this._getPattern(Z);Q.fillStyle=K.getPattern(Q,this,(0,u.getCurrentTransformInverse)(Q),d.PathType.SHADING);const ne=(0,u.getCurrentTransformInverse)(Q);if(ne){const{width:ue,height:ye}=Q.canvas,[pe,X,le,he]=o.Util.getAxialAlignedBoundingBox([0,0,ue,ye],ne);this.ctx.fillRect(pe,X,le-pe,he-X)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,o.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,o.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(Z,Q){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(Z)&&Z.length===6&&this.transform(...Z),this.baseTransform=(0,u.getCurrentTransform)(this.ctx),Q)){const K=Q[2]-Q[0],ne=Q[3]-Q[1];this.ctx.rect(Q[0],Q[1],K,ne),this.current.updateRectMinMax((0,u.getCurrentTransform)(this.ctx),Q),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(Z){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const Q=this.ctx;Z.isolated||(0,o.info)("TODO: Support non-isolated groups."),Z.knockout&&(0,o.warn)("Knockout groups not supported.");const K=(0,u.getCurrentTransform)(Q);if(Z.matrix&&Q.transform(...Z.matrix),!Z.bbox)throw new Error("Bounding box is required.");let ne=o.Util.getAxialAlignedBoundingBox(Z.bbox,(0,u.getCurrentTransform)(Q));const ue=[0,0,Q.canvas.width,Q.canvas.height];ne=o.Util.intersect(ne,ue)||[0,0,0,0];const ye=Math.floor(ne[0]),pe=Math.floor(ne[1]);let X=Math.max(Math.ceil(ne[2])-ye,1),le=Math.max(Math.ceil(ne[3])-pe,1),he=1,ce=1;X>w&&(he=X/w,X=w),le>w&&(ce=le/w,le=w),this.current.startNewPathAndClipBox([0,0,X,le]);let me="groupAt"+this.groupLevel;Z.smask&&(me+="_smask_"+this.smaskCounter++%2);const we=this.cachedCanvases.getCanvas(me,X,le),Se=we.context;Se.scale(1/he,1/ce),Se.translate(-ye,-pe),Se.transform(...K),Z.smask?this.smaskStack.push({canvas:we.canvas,context:Se,offsetX:ye,offsetY:pe,scaleX:he,scaleY:ce,subtype:Z.smask.subtype,backdrop:Z.smask.backdrop,transferMap:Z.smask.transferMap||null,startTransformInverse:null}):(Q.setTransform(1,0,0,1,0,0),Q.translate(ye,pe),Q.scale(he,ce),Q.save()),z(Q,Se),this.ctx=Se,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(Q),this.groupLevel++}endGroup(Z){if(!this.contentVisible)return;this.groupLevel--;const Q=this.ctx,K=this.groupStack.pop();if(this.ctx=K,this.ctx.imageSmoothingEnabled=!1,Z.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const ne=(0,u.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...ne);const ue=o.Util.getAxialAlignedBoundingBox([0,0,Q.canvas.width,Q.canvas.height],ne);this.ctx.drawImage(Q.canvas,0,0),this.ctx.restore(),this.compose(ue)}}beginAnnotation(Z,Q,K,ne,ue){if(this.#e(),j(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(Q)&&Q.length===4){const ye=Q[2]-Q[0],pe=Q[3]-Q[1];if(ue&&this.annotationCanvasMap){K=K.slice(),K[4]-=Q[0],K[5]-=Q[1],Q=Q.slice(),Q[0]=Q[1]=0,Q[2]=ye,Q[3]=pe;const[X,le]=o.Util.singularValueDecompose2dScale((0,u.getCurrentTransform)(this.ctx)),{viewportScale:he}=this,ce=Math.ceil(ye*this.outputScaleX*he),me=Math.ceil(pe*this.outputScaleY*he);this.annotationCanvas=this.canvasFactory.create(ce,me);const{canvas:we,context:Se}=this.annotationCanvas;this.annotationCanvasMap.set(Z,we),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Se,this.ctx.save(),this.ctx.setTransform(X,0,0,-le,0,pe*le),j(this.ctx)}else j(this.ctx),this.ctx.rect(Q[0],Q[1],ye,pe),this.ctx.clip(),this.endPath()}this.current=new H(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...K),this.transform(...ne)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(Z){if(!this.contentVisible)return;const Q=Z.count;Z=this.getObject(Z.data,Z),Z.count=Q;const K=this.ctx,ne=this.processingType3;if(ne&&(ne.compiled===void 0&&(ne.compiled=B(Z)),ne.compiled)){ne.compiled(K);return}const ue=this._createMaskCanvas(Z),ye=ue.canvas;K.save(),K.setTransform(1,0,0,1,0,0),K.drawImage(ye,ue.offsetX,ue.offsetY),K.restore(),this.compose()}paintImageMaskXObjectRepeat(Z,Q,K=0,ne=0,ue,ye){if(!this.contentVisible)return;Z=this.getObject(Z.data,Z);const pe=this.ctx;pe.save();const X=(0,u.getCurrentTransform)(pe);pe.transform(Q,K,ne,ue,0,0);const le=this._createMaskCanvas(Z);pe.setTransform(1,0,0,1,le.offsetX-X[4],le.offsetY-X[5]);for(let he=0,ce=ye.length;he<ce;he+=2){const me=o.Util.transform(X,[Q,K,ne,ue,ye[he],ye[he+1]]),[we,Se]=o.Util.applyTransform([0,0],me);pe.drawImage(le.canvas,we,Se)}pe.restore(),this.compose()}paintImageMaskXObjectGroup(Z){if(!this.contentVisible)return;const Q=this.ctx,K=this.current.fillColor,ne=this.current.patternFill;for(const ue of Z){const{data:ye,width:pe,height:X,transform:le}=ue,he=this.cachedCanvases.getCanvas("maskCanvas",pe,X),ce=he.context;ce.save();const me=this.getObject(ye,ue);$(ce,me),ce.globalCompositeOperation="source-in",ce.fillStyle=ne?K.getPattern(ce,this,(0,u.getCurrentTransformInverse)(Q),d.PathType.FILL):K,ce.fillRect(0,0,pe,X),ce.restore(),Q.save(),Q.transform(...le),Q.scale(1,-1),N(Q,he.canvas,0,0,pe,X,0,-1,1,1),Q.restore()}this.compose()}paintImageXObject(Z){if(!this.contentVisible)return;const Q=this.getObject(Z);if(!Q){(0,o.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(Q)}paintImageXObjectRepeat(Z,Q,K,ne){if(!this.contentVisible)return;const ue=this.getObject(Z);if(!ue){(0,o.warn)("Dependent image isn't ready yet");return}const ye=ue.width,pe=ue.height,X=[];for(let le=0,he=ne.length;le<he;le+=2)X.push({transform:[Q,0,0,K,ne[le],ne[le+1]],x:0,y:0,w:ye,h:pe});this.paintInlineImageXObjectGroup(ue,X)}applyTransferMapsToCanvas(Z){return this.current.transferMaps!=="none"&&(Z.filter=this.current.transferMaps,Z.drawImage(Z.canvas,0,0),Z.filter="none"),Z.canvas}applyTransferMapsToBitmap(Z){if(this.current.transferMaps==="none")return Z.bitmap;const{bitmap:Q,width:K,height:ne}=Z,ue=this.cachedCanvases.getCanvas("inlineImage",K,ne),ye=ue.context;return ye.filter=this.current.transferMaps,ye.drawImage(Q,0,0),ye.filter="none",ue.canvas}paintInlineImageXObject(Z){if(!this.contentVisible)return;const Q=Z.width,K=Z.height,ne=this.ctx;if(this.save(),!o.isNodeJS){const{filter:pe}=ne;pe!=="none"&&pe!==""&&(ne.filter="none")}ne.scale(1/Q,-1/K);let ue;if(Z.bitmap)ue=this.applyTransferMapsToBitmap(Z);else if(typeof HTMLElement=="function"&&Z instanceof HTMLElement||!Z.data)ue=Z;else{const X=this.cachedCanvases.getCanvas("inlineImage",Q,K).context;U(X,Z),ue=this.applyTransferMapsToCanvas(X)}const ye=this._scaleImage(ue,(0,u.getCurrentTransformInverse)(ne));ne.imageSmoothingEnabled=Ce((0,u.getCurrentTransform)(ne),Z.interpolate),N(ne,ye.img,0,0,ye.paintWidth,ye.paintHeight,0,-K,Q,K),this.compose(),this.restore()}paintInlineImageXObjectGroup(Z,Q){if(!this.contentVisible)return;const K=this.ctx;let ne;if(Z.bitmap)ne=Z.bitmap;else{const ue=Z.width,ye=Z.height,X=this.cachedCanvases.getCanvas("inlineImage",ue,ye).context;U(X,Z),ne=this.applyTransferMapsToCanvas(X)}for(const ue of Q)K.save(),K.transform(...ue.transform),K.scale(1,-1),N(K,ne,ue.x,ue.y,ue.w,ue.h,0,-1,1,1),K.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(Z){}markPointProps(Z,Q){}beginMarkedContent(Z){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(Z,Q){Z==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(Q)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(Z){const Q=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(Z);const K=this.ctx;this.pendingClip&&(Q||(this.pendingClip===ae?K.clip("evenodd"):K.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),K.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const Z=(0,u.getCurrentTransform)(this.ctx);if(Z[1]===0&&Z[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(Z[0]),Math.abs(Z[3]));else{const Q=Math.abs(Z[0]*Z[3]-Z[2]*Z[1]),K=Math.hypot(Z[0],Z[2]),ne=Math.hypot(Z[1],Z[3]);this._cachedGetSinglePixelWidth=Math.max(K,ne)/Q}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:Z}=this.current,{a:Q,b:K,c:ne,d:ue}=this.ctx.getTransform();let ye,pe;if(K===0&&ne===0){const X=Math.abs(Q),le=Math.abs(ue);if(X===le)if(Z===0)ye=pe=1/X;else{const he=X*Z;ye=pe=he<1?1/he:1}else if(Z===0)ye=1/X,pe=1/le;else{const he=X*Z,ce=le*Z;ye=he<1?1/he:1,pe=ce<1?1/ce:1}}else{const X=Math.abs(Q*ue-K*ne),le=Math.hypot(Q,K),he=Math.hypot(ne,ue);if(Z===0)ye=he/X,pe=le/X;else{const ce=Z*X;ye=he>ce?he/ce:1,pe=le>ce?le/ce:1}}this._cachedScaleForStroking[0]=ye,this._cachedScaleForStroking[1]=pe}return this._cachedScaleForStroking}rescaleAndStroke(Z){const{ctx:Q}=this,{lineWidth:K}=this.current,[ne,ue]=this.getScaleForStroking();if(Q.lineWidth=K||1,ne===1&&ue===1){Q.stroke();return}const ye=Q.getLineDash();if(Z&&Q.save(),Q.scale(ne,ue),ye.length>0){const pe=Math.max(ne,ue);Q.setLineDash(ye.map(X=>X/pe)),Q.lineDashOffset/=pe}Q.stroke(),Z&&Q.restore()}isContentVisible(){for(let Z=this.markedContentStack.length-1;Z>=0;Z--)if(!this.markedContentStack[Z].visible)return!1;return!0}}t.CanvasGraphics=oe;for(const ee in o.OPS)oe.prototype[ee]!==void 0&&(oe.prototype[o.OPS[ee]]=oe.prototype[ee])}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=F;var o=n(1),u=n(6);const d={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=d;function f(N,B){if(!B)return;const H=B[2]-B[0],U=B[3]-B[1],$=new Path2D;$.rect(B[0],B[1],H,U),N.clip($)}class g{constructor(){this.constructor===g&&(0,o.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,o.unreachable)("Abstract method `getPattern` called.")}}class v extends g{constructor(B){super(),this._type=B[1],this._bbox=B[2],this._colorStops=B[3],this._p0=B[4],this._p1=B[5],this._r0=B[6],this._r1=B[7],this.matrix=null}_createGradient(B){let H;this._type==="axial"?H=B.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(H=B.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const U of this._colorStops)H.addColorStop(U[0],U[1]);return H}getPattern(B,H,U,$){let z;if($===d.STROKE||$===d.FILL){const j=H.current.getClippedPathBoundingBox($,(0,u.getCurrentTransform)(B))||[0,0,0,0],J=Math.ceil(j[2]-j[0])||1,ie=Math.ceil(j[3]-j[1])||1,se=H.cachedCanvases.getCanvas("pattern",J,ie,!0),fe=se.context;fe.clearRect(0,0,fe.canvas.width,fe.canvas.height),fe.beginPath(),fe.rect(0,0,fe.canvas.width,fe.canvas.height),fe.translate(-j[0],-j[1]),U=o.Util.transform(U,[1,0,0,1,j[0],j[1]]),fe.transform(...H.baseTransform),this.matrix&&fe.transform(...this.matrix),f(fe,this._bbox),fe.fillStyle=this._createGradient(fe),fe.fill(),z=B.createPattern(se.canvas,"no-repeat");const de=new DOMMatrix(U);z.setTransform(de)}else f(B,this._bbox),z=this._createGradient(B);return z}}function w(N,B,H,U,$,z,j,J){const ie=B.coords,se=B.colors,fe=N.data,de=N.width*4;let Ce;ie[H+1]>ie[U+1]&&(Ce=H,H=U,U=Ce,Ce=z,z=j,j=Ce),ie[U+1]>ie[$+1]&&(Ce=U,U=$,$=Ce,Ce=j,j=J,J=Ce),ie[H+1]>ie[U+1]&&(Ce=H,H=U,U=Ce,Ce=z,z=j,j=Ce);const be=(ie[H]+B.offsetX)*B.scaleX,xe=(ie[H+1]+B.offsetY)*B.scaleY,Ee=(ie[U]+B.offsetX)*B.scaleX,ae=(ie[U+1]+B.offsetY)*B.scaleY,oe=(ie[$]+B.offsetX)*B.scaleX,ee=(ie[$+1]+B.offsetY)*B.scaleY;if(xe>=ee)return;const Z=se[z],Q=se[z+1],K=se[z+2],ne=se[j],ue=se[j+1],ye=se[j+2],pe=se[J],X=se[J+1],le=se[J+2],he=Math.round(xe),ce=Math.round(ee);let me,we,Se,_e,We,Fe,Le,De;for(let Be=he;Be<=ce;Be++){if(Be<ae){const it=Be<xe?0:(xe-Be)/(xe-ae);me=be-(be-Ee)*it,we=Z-(Z-ne)*it,Se=Q-(Q-ue)*it,_e=K-(K-ye)*it}else{let it;Be>ee?it=1:ae===ee?it=0:it=(ae-Be)/(ae-ee),me=Ee-(Ee-oe)*it,we=ne-(ne-pe)*it,Se=ue-(ue-X)*it,_e=ye-(ye-le)*it}let $e;Be<xe?$e=0:Be>ee?$e=1:$e=(xe-Be)/(xe-ee),We=be-(be-oe)*$e,Fe=Z-(Z-pe)*$e,Le=Q-(Q-X)*$e,De=K-(K-le)*$e;const Ze=Math.round(Math.min(me,We)),Ye=Math.round(Math.max(me,We));let nt=de*Be+Ze*4;for(let it=Ze;it<=Ye;it++)$e=(me-it)/(me-We),$e<0?$e=0:$e>1&&($e=1),fe[nt++]=we-(we-Fe)*$e|0,fe[nt++]=Se-(Se-Le)*$e|0,fe[nt++]=_e-(_e-De)*$e|0,fe[nt++]=255}}function S(N,B,H){const U=B.coords,$=B.colors;let z,j;switch(B.type){case"lattice":const J=B.verticesPerRow,ie=Math.floor(U.length/J)-1,se=J-1;for(z=0;z<ie;z++){let fe=z*J;for(let de=0;de<se;de++,fe++)w(N,H,U[fe],U[fe+1],U[fe+J],$[fe],$[fe+1],$[fe+J]),w(N,H,U[fe+J+1],U[fe+1],U[fe+J],$[fe+J+1],$[fe+1],$[fe+J])}break;case"triangles":for(z=0,j=U.length;z<j;z+=3)w(N,H,U[z],U[z+1],U[z+2],$[z],$[z+1],$[z+2]);break;default:throw new Error("illegal figure")}}class R extends g{constructor(B){super(),this._coords=B[2],this._colors=B[3],this._figures=B[4],this._bounds=B[5],this._bbox=B[7],this._background=B[8],this.matrix=null}_createMeshCanvas(B,H,U){const J=Math.floor(this._bounds[0]),ie=Math.floor(this._bounds[1]),se=Math.ceil(this._bounds[2])-J,fe=Math.ceil(this._bounds[3])-ie,de=Math.min(Math.ceil(Math.abs(se*B[0]*1.1)),3e3),Ce=Math.min(Math.ceil(Math.abs(fe*B[1]*1.1)),3e3),be=se/de,xe=fe/Ce,Ee={coords:this._coords,colors:this._colors,offsetX:-J,offsetY:-ie,scaleX:1/be,scaleY:1/xe},ae=de+4,oe=Ce+4,ee=U.getCanvas("mesh",ae,oe,!1),Z=ee.context,Q=Z.createImageData(de,Ce);if(H){const ne=Q.data;for(let ue=0,ye=ne.length;ue<ye;ue+=4)ne[ue]=H[0],ne[ue+1]=H[1],ne[ue+2]=H[2],ne[ue+3]=255}for(const ne of this._figures)S(Q,ne,Ee);return Z.putImageData(Q,2,2),{canvas:ee.canvas,offsetX:J-2*be,offsetY:ie-2*xe,scaleX:be,scaleY:xe}}getPattern(B,H,U,$){f(B,this._bbox);let z;if($===d.SHADING)z=o.Util.singularValueDecompose2dScale((0,u.getCurrentTransform)(B));else if(z=o.Util.singularValueDecompose2dScale(H.baseTransform),this.matrix){const J=o.Util.singularValueDecompose2dScale(this.matrix);z=[z[0]*J[0],z[1]*J[1]]}const j=this._createMeshCanvas(z,$===d.SHADING?null:this._background,H.cachedCanvases);return $!==d.SHADING&&(B.setTransform(...H.baseTransform),this.matrix&&B.transform(...this.matrix)),B.translate(j.offsetX,j.offsetY),B.scale(j.scaleX,j.scaleY),B.createPattern(j.canvas,"no-repeat")}}class _ extends g{getPattern(){return"hotpink"}}function F(N){switch(N[0]){case"RadialAxial":return new v(N);case"Mesh":return new R(N);case"Dummy":return new _}throw new Error(`Unknown IR type: ${N[0]}`)}const M={COLORED:1,UNCOLORED:2};class I{static MAX_PATTERN_SIZE=3e3;constructor(B,H,U,$,z){this.operatorList=B[2],this.matrix=B[3]||[1,0,0,1,0,0],this.bbox=B[4],this.xstep=B[5],this.ystep=B[6],this.paintType=B[7],this.tilingType=B[8],this.color=H,this.ctx=U,this.canvasGraphicsFactory=$,this.baseTransform=z}createPatternCanvas(B){const H=this.operatorList,U=this.bbox,$=this.xstep,z=this.ystep,j=this.paintType,J=this.tilingType,ie=this.color,se=this.canvasGraphicsFactory;(0,o.info)("TilingType: "+J);const fe=U[0],de=U[1],Ce=U[2],be=U[3],xe=o.Util.singularValueDecompose2dScale(this.matrix),Ee=o.Util.singularValueDecompose2dScale(this.baseTransform),ae=[xe[0]*Ee[0],xe[1]*Ee[1]],oe=this.getSizeAndScale($,this.ctx.canvas.width,ae[0]),ee=this.getSizeAndScale(z,this.ctx.canvas.height,ae[1]),Z=B.cachedCanvases.getCanvas("pattern",oe.size,ee.size,!0),Q=Z.context,K=se.createCanvasGraphics(Q);K.groupLevel=B.groupLevel,this.setFillAndStrokeStyleToContext(K,j,ie);let ne=fe,ue=de,ye=Ce,pe=be;return fe<0&&(ne=0,ye+=Math.abs(fe)),de<0&&(ue=0,pe+=Math.abs(de)),Q.translate(-(oe.scale*ne),-(ee.scale*ue)),K.transform(oe.scale,0,0,ee.scale,0,0),Q.save(),this.clipBbox(K,ne,ue,ye,pe),K.baseTransform=(0,u.getCurrentTransform)(K.ctx),K.executeOperatorList(H),K.endDrawing(),{canvas:Z.canvas,scaleX:oe.scale,scaleY:ee.scale,offsetX:ne,offsetY:ue}}getSizeAndScale(B,H,U){B=Math.abs(B);const $=Math.max(I.MAX_PATTERN_SIZE,H);let z=Math.ceil(B*U);return z>=$?z=$:U=z/B,{scale:U,size:z}}clipBbox(B,H,U,$,z){const j=$-H,J=z-U;B.ctx.rect(H,U,j,J),B.current.updateRectMinMax((0,u.getCurrentTransform)(B.ctx),[H,U,$,z]),B.clip(),B.endPath()}setFillAndStrokeStyleToContext(B,H,U){const $=B.ctx,z=B.current;switch(H){case M.COLORED:const j=this.ctx;$.fillStyle=j.fillStyle,$.strokeStyle=j.strokeStyle,z.fillColor=j.fillStyle,z.strokeColor=j.strokeStyle;break;case M.UNCOLORED:const J=o.Util.makeHexColor(U[0],U[1],U[2]);$.fillStyle=J,$.strokeStyle=J,z.fillColor=J,z.strokeColor=J;break;default:throw new o.FormatError(`Unsupported paint type: ${H}`)}}getPattern(B,H,U,$){let z=U;$!==d.SHADING&&(z=o.Util.transform(z,H.baseTransform),this.matrix&&(z=o.Util.transform(z,this.matrix)));const j=this.createPatternCanvas(H);let J=new DOMMatrix(z);J=J.translate(j.offsetX,j.offsetY),J=J.scale(1/j.scaleX,1/j.scaleY);const ie=B.createPattern(j.canvas,"repeat");return ie.setTransform(J),ie}}t.TilingPattern=I}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=d,t.convertToRGBA=u,t.grayToRGBA=g;var o=n(1);function u(v){switch(v.kind){case o.ImageKind.GRAYSCALE_1BPP:return d(v);case o.ImageKind.RGB_24BPP:return f(v)}return null}function d({src:v,srcPos:w=0,dest:S,width:R,height:_,nonBlackColor:F=4294967295,inverseDecode:M=!1}){const I=o.FeatureTest.isLittleEndian?4278190080:255,[N,B]=M?[F,I]:[I,F],H=R>>3,U=R&7,$=v.length;S=new Uint32Array(S.buffer);let z=0;for(let j=0;j<_;j++){for(const ie=w+H;w<ie;w++){const se=w<$?v[w]:255;S[z++]=se&128?B:N,S[z++]=se&64?B:N,S[z++]=se&32?B:N,S[z++]=se&16?B:N,S[z++]=se&8?B:N,S[z++]=se&4?B:N,S[z++]=se&2?B:N,S[z++]=se&1?B:N}if(U===0)continue;const J=w<$?v[w++]:255;for(let ie=0;ie<U;ie++)S[z++]=J&1<<7-ie?B:N}return{srcPos:w,destPos:z}}function f({src:v,srcPos:w=0,dest:S,destPos:R=0,width:_,height:F}){let M=0;const I=v.length>>2,N=new Uint32Array(v.buffer,w,I);if(o.FeatureTest.isLittleEndian){for(;M<I-2;M+=3,R+=4){const B=N[M],H=N[M+1],U=N[M+2];S[R]=B|4278190080,S[R+1]=B>>>24|H<<8|4278190080,S[R+2]=H>>>16|U<<16|4278190080,S[R+3]=U>>>8|4278190080}for(let B=M*4,H=v.length;B<H;B+=3)S[R++]=v[B]|v[B+1]<<8|v[B+2]<<16|4278190080}else{for(;M<I-2;M+=3,R+=4){const B=N[M],H=N[M+1],U=N[M+2];S[R]=B|255,S[R+1]=B<<24|H>>>8|255,S[R+2]=H<<16|U>>>16|255,S[R+3]=U<<8|255}for(let B=M*4,H=v.length;B<H;B+=3)S[R++]=v[B]<<24|v[B+1]<<16|v[B+2]<<8|255}return{srcPos:w,destPos:R}}function g(v,w){if(o.FeatureTest.isLittleEndian)for(let S=0,R=v.length;S<R;S++)w[S]=v[S]*65793|4278190080;else for(let S=0,R=v.length;S<R;S++)w[S]=v[S]*16843008|255}}),((e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const n=Object.create(null);t.GlobalWorkerOptions=n,n.workerPort=null,n.workerSrc=""}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var o=n(1);const u={DATA:1,ERROR:2},d={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function f(v){switch(v instanceof Error||typeof v=="object"&&v!==null||(0,o.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),v.name){case"AbortException":return new o.AbortException(v.message);case"MissingPDFException":return new o.MissingPDFException(v.message);case"PasswordException":return new o.PasswordException(v.message,v.code);case"UnexpectedResponseException":return new o.UnexpectedResponseException(v.message,v.status);case"UnknownErrorException":return new o.UnknownErrorException(v.message,v.details);default:return new o.UnknownErrorException(v.message,v.toString())}}class g{constructor(w,S,R){this.sourceName=w,this.targetName=S,this.comObj=R,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=_=>{const F=_.data;if(F.targetName!==this.sourceName)return;if(F.stream){this.#t(F);return}if(F.callback){const I=F.callbackId,N=this.callbackCapabilities[I];if(!N)throw new Error(`Cannot resolve callback ${I}`);if(delete this.callbackCapabilities[I],F.callback===u.DATA)N.resolve(F.data);else if(F.callback===u.ERROR)N.reject(f(F.reason));else throw new Error("Unexpected callback case");return}const M=this.actionHandler[F.action];if(!M)throw new Error(`Unknown action from worker: ${F.action}`);if(F.callbackId){const I=this.sourceName,N=F.sourceName;new Promise(function(B){B(M(F.data))}).then(function(B){R.postMessage({sourceName:I,targetName:N,callback:u.DATA,callbackId:F.callbackId,data:B})},function(B){R.postMessage({sourceName:I,targetName:N,callback:u.ERROR,callbackId:F.callbackId,reason:f(B)})});return}if(F.streamId){this.#e(F);return}M(F.data)},R.addEventListener("message",this._onComObjOnMessage)}on(w,S){const R=this.actionHandler;if(R[w])throw new Error(`There is already an actionName called "${w}"`);R[w]=S}send(w,S,R){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:w,data:S},R)}sendWithPromise(w,S,R){const _=this.callbackId++,F=new o.PromiseCapability;this.callbackCapabilities[_]=F;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:w,callbackId:_,data:S},R)}catch(M){F.reject(M)}return F.promise}sendWithStream(w,S,R,_){const F=this.streamId++,M=this.sourceName,I=this.targetName,N=this.comObj;return new ReadableStream({start:B=>{const H=new o.PromiseCapability;return this.streamControllers[F]={controller:B,startCall:H,pullCall:null,cancelCall:null,isClosed:!1},N.postMessage({sourceName:M,targetName:I,action:w,streamId:F,data:S,desiredSize:B.desiredSize},_),H.promise},pull:B=>{const H=new o.PromiseCapability;return this.streamControllers[F].pullCall=H,N.postMessage({sourceName:M,targetName:I,stream:d.PULL,streamId:F,desiredSize:B.desiredSize}),H.promise},cancel:B=>{(0,o.assert)(B instanceof Error,"cancel must have a valid reason");const H=new o.PromiseCapability;return this.streamControllers[F].cancelCall=H,this.streamControllers[F].isClosed=!0,N.postMessage({sourceName:M,targetName:I,stream:d.CANCEL,streamId:F,reason:f(B)}),H.promise}},R)}#e(w){const S=w.streamId,R=this.sourceName,_=w.sourceName,F=this.comObj,M=this,I=this.actionHandler[w.action],N={enqueue(B,H=1,U){if(this.isCancelled)return;const $=this.desiredSize;this.desiredSize-=H,$>0&&this.desiredSize<=0&&(this.sinkCapability=new o.PromiseCapability,this.ready=this.sinkCapability.promise),F.postMessage({sourceName:R,targetName:_,stream:d.ENQUEUE,streamId:S,chunk:B},U)},close(){this.isCancelled||(this.isCancelled=!0,F.postMessage({sourceName:R,targetName:_,stream:d.CLOSE,streamId:S}),delete M.streamSinks[S])},error(B){(0,o.assert)(B instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,F.postMessage({sourceName:R,targetName:_,stream:d.ERROR,streamId:S,reason:f(B)}))},sinkCapability:new o.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:w.desiredSize,ready:null};N.sinkCapability.resolve(),N.ready=N.sinkCapability.promise,this.streamSinks[S]=N,new Promise(function(B){B(I(w.data,N))}).then(function(){F.postMessage({sourceName:R,targetName:_,stream:d.START_COMPLETE,streamId:S,success:!0})},function(B){F.postMessage({sourceName:R,targetName:_,stream:d.START_COMPLETE,streamId:S,reason:f(B)})})}#t(w){const S=w.streamId,R=this.sourceName,_=w.sourceName,F=this.comObj,M=this.streamControllers[S],I=this.streamSinks[S];switch(w.stream){case d.START_COMPLETE:w.success?M.startCall.resolve():M.startCall.reject(f(w.reason));break;case d.PULL_COMPLETE:w.success?M.pullCall.resolve():M.pullCall.reject(f(w.reason));break;case d.PULL:if(!I){F.postMessage({sourceName:R,targetName:_,stream:d.PULL_COMPLETE,streamId:S,success:!0});break}I.desiredSize<=0&&w.desiredSize>0&&I.sinkCapability.resolve(),I.desiredSize=w.desiredSize,new Promise(function(N){N(I.onPull?.())}).then(function(){F.postMessage({sourceName:R,targetName:_,stream:d.PULL_COMPLETE,streamId:S,success:!0})},function(N){F.postMessage({sourceName:R,targetName:_,stream:d.PULL_COMPLETE,streamId:S,reason:f(N)})});break;case d.ENQUEUE:if((0,o.assert)(M,"enqueue should have stream controller"),M.isClosed)break;M.controller.enqueue(w.chunk);break;case d.CLOSE:if((0,o.assert)(M,"close should have stream controller"),M.isClosed)break;M.isClosed=!0,M.controller.close(),this.#n(M,S);break;case d.ERROR:(0,o.assert)(M,"error should have stream controller"),M.controller.error(f(w.reason)),this.#n(M,S);break;case d.CANCEL_COMPLETE:w.success?M.cancelCall.resolve():M.cancelCall.reject(f(w.reason)),this.#n(M,S);break;case d.CANCEL:if(!I)break;new Promise(function(N){N(I.onCancel?.(f(w.reason)))}).then(function(){F.postMessage({sourceName:R,targetName:_,stream:d.CANCEL_COMPLETE,streamId:S,success:!0})},function(N){F.postMessage({sourceName:R,targetName:_,stream:d.CANCEL_COMPLETE,streamId:S,reason:f(N)})}),I.sinkCapability.reject(f(w.reason)),I.isCancelled=!0,delete this.streamSinks[S];break;default:throw new Error("Unexpected stream case")}}async#n(w,S){await Promise.allSettled([w.startCall?.promise,w.pullCall?.promise,w.cancelCall?.promise]),delete this.streamControllers[S]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}t.MessageHandler=g}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var o=n(1);class u{#e;#t;constructor({parsedData:f,rawData:g}){this.#e=f,this.#t=g}getRaw(){return this.#t}get(f){return this.#e.get(f)??null}getAll(){return(0,o.objectFromMap)(this.#e)}has(f){return this.#e.has(f)}}t.Metadata=u}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var o=n(1),u=n(8);const d=Symbol("INTERNAL");class f{#e=!0;constructor(w,S){this.name=w,this.intent=S}get visible(){return this.#e}_setVisible(w,S){w!==d&&(0,o.unreachable)("Internal method `_setVisible` called."),this.#e=S}}class g{#e=null;#t=new Map;#n=null;#i=null;constructor(w){if(this.name=null,this.creator=null,w!==null){this.name=w.name,this.creator=w.creator,this.#i=w.order;for(const S of w.groups)this.#t.set(S.id,new f(S.name,S.intent));if(w.baseState==="OFF")for(const S of this.#t.values())S._setVisible(d,!1);for(const S of w.on)this.#t.get(S)._setVisible(d,!0);for(const S of w.off)this.#t.get(S)._setVisible(d,!1);this.#n=this.getHash()}}#a(w){const S=w.length;if(S<2)return!0;const R=w[0];for(let _=1;_<S;_++){const F=w[_];let M;if(Array.isArray(F))M=this.#a(F);else if(this.#t.has(F))M=this.#t.get(F).visible;else return(0,o.warn)(`Optional content group not found: ${F}`),!0;switch(R){case"And":if(!M)return!1;break;case"Or":if(M)return!0;break;case"Not":return!M;default:return!0}}return R==="And"}isVisible(w){if(this.#t.size===0)return!0;if(!w)return(0,o.warn)("Optional content group not defined."),!0;if(w.type==="OCG")return this.#t.has(w.id)?this.#t.get(w.id).visible:((0,o.warn)(`Optional content group not found: ${w.id}`),!0);if(w.type==="OCMD"){if(w.expression)return this.#a(w.expression);if(!w.policy||w.policy==="AnyOn"){for(const S of w.ids){if(!this.#t.has(S))return(0,o.warn)(`Optional content group not found: ${S}`),!0;if(this.#t.get(S).visible)return!0}return!1}else if(w.policy==="AllOn"){for(const S of w.ids){if(!this.#t.has(S))return(0,o.warn)(`Optional content group not found: ${S}`),!0;if(!this.#t.get(S).visible)return!1}return!0}else if(w.policy==="AnyOff"){for(const S of w.ids){if(!this.#t.has(S))return(0,o.warn)(`Optional content group not found: ${S}`),!0;if(!this.#t.get(S).visible)return!0}return!1}else if(w.policy==="AllOff"){for(const S of w.ids){if(!this.#t.has(S))return(0,o.warn)(`Optional content group not found: ${S}`),!0;if(this.#t.get(S).visible)return!1}return!0}return(0,o.warn)(`Unknown optional content policy ${w.policy}.`),!0}return(0,o.warn)(`Unknown group type ${w.type}.`),!0}setVisibility(w,S=!0){if(!this.#t.has(w)){(0,o.warn)(`Optional content group not found: ${w}`);return}this.#t.get(w)._setVisible(d,!!S),this.#e=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#i?this.#i.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?(0,o.objectFromMap)(this.#t):null}getGroup(w){return this.#t.get(w)||null}getHash(){if(this.#e!==null)return this.#e;const w=new u.MurmurHash3_64;for(const[S,R]of this.#t)w.update(`${S}:${R.visible}`);return this.#e=w.hexdigest()}}t.OptionalContentConfig=g}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var o=n(1),u=n(6);class d{constructor({length:w,initialData:S,progressiveDone:R=!1,contentDispositionFilename:_=null,disableRange:F=!1,disableStream:M=!1},I){if((0,o.assert)(I,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=R,this._contentDispositionFilename=_,S?.length>0){const N=S instanceof Uint8Array&&S.byteLength===S.buffer.byteLength?S.buffer:new Uint8Array(S).buffer;this._queuedChunks.push(N)}this._pdfDataRangeTransport=I,this._isStreamingSupported=!M,this._isRangeSupported=!F,this._contentLength=w,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((N,B)=>{this._onReceiveData({begin:N,chunk:B})}),this._pdfDataRangeTransport.addProgressListener((N,B)=>{this._onProgress({loaded:N,total:B})}),this._pdfDataRangeTransport.addProgressiveReadListener(N=>{this._onReceiveData({chunk:N})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:w,chunk:S}){const R=S instanceof Uint8Array&&S.byteLength===S.buffer.byteLength?S.buffer:new Uint8Array(S).buffer;if(w===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(R):this._queuedChunks.push(R);else{const _=this._rangeReaders.some(function(F){return F._begin!==w?!1:(F._enqueue(R),!0)});(0,o.assert)(_,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(w){w.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:w.loaded}):this._fullRequestReader?.onProgress?.({loaded:w.loaded,total:w.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(w){const S=this._rangeReaders.indexOf(w);S>=0&&this._rangeReaders.splice(S,1)}getFullReader(){(0,o.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const w=this._queuedChunks;return this._queuedChunks=null,new f(this,w,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(w,S){if(S<=this._progressiveDataLength)return null;const R=new g(this,w,S);return this._pdfDataRangeTransport.requestDataRange(w,S),this._rangeReaders.push(R),R}cancelAllRequests(w){this._fullRequestReader?.cancel(w);for(const S of this._rangeReaders.slice(0))S.cancel(w);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=d;class f{constructor(w,S,R=!1,_=null){this._stream=w,this._done=R||!1,this._filename=(0,u.isPdfFile)(_)?_:null,this._queuedChunks=S||[],this._loaded=0;for(const F of this._queuedChunks)this._loaded+=F.byteLength;this._requests=[],this._headersReady=Promise.resolve(),w._fullRequestReader=this,this.onProgress=null}_enqueue(w){this._done||(this._requests.length>0?this._requests.shift().resolve({value:w,done:!1}):this._queuedChunks.push(w),this._loaded+=w.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const w=new o.PromiseCapability;return this._requests.push(w),w.promise}cancel(w){this._done=!0;for(const S of this._requests)S.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class g{constructor(w,S,R){this._stream=w,this._begin=S,this._end=R,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(w){if(!this._done){if(this._requests.length===0)this._queuedChunk=w;else{this._requests.shift().resolve({value:w,done:!1});for(const R of this._requests)R.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const S=this._queuedChunk;return this._queuedChunk=null,{value:S,done:!1}}if(this._done)return{value:void 0,done:!0};const w=new o.PromiseCapability;return this._requests.push(w),w.promise}cancel(w){this._done=!0;for(const S of this._requests)S.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var o=n(1),u=n(20);function d(R,_,F){return{method:"GET",headers:R,signal:F.signal,mode:"cors",credentials:_?"include":"same-origin",redirect:"follow"}}function f(R){const _=new Headers;for(const F in R){const M=R[F];M!==void 0&&_.append(F,M)}return _}function g(R){return R instanceof Uint8Array?R.buffer:R instanceof ArrayBuffer?R:((0,o.warn)(`getArrayBuffer - unexpected data format: ${R}`),new Uint8Array(R).buffer)}class v{constructor(_){this.source=_,this.isHttp=/^https?:/i.test(_.url),this.httpHeaders=this.isHttp&&_.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new w(this),this._fullRequestReader}getRangeReader(_,F){if(F<=this._progressiveDataLength)return null;const M=new S(this,_,F);return this._rangeRequestReaders.push(M),M}cancelAllRequests(_){this._fullRequestReader?.cancel(_);for(const F of this._rangeRequestReaders.slice(0))F.cancel(_)}}t.PDFFetchStream=v;class w{constructor(_){this._stream=_,this._reader=null,this._loaded=0,this._filename=null;const F=_.source;this._withCredentials=F.withCredentials||!1,this._contentLength=F.length,this._headersCapability=new o.PromiseCapability,this._disableRange=F.disableRange||!1,this._rangeChunkSize=F.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!F.disableStream,this._isRangeSupported=!F.disableRange,this._headers=f(this._stream.httpHeaders);const M=F.url;fetch(M,d(this._headers,this._withCredentials,this._abortController)).then(I=>{if(!(0,u.validateResponseStatus)(I.status))throw(0,u.createResponseStatusError)(I.status,M);this._reader=I.body.getReader(),this._headersCapability.resolve();const N=U=>I.headers.get(U),{allowRangeRequests:B,suggestedLength:H}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:N,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=B,this._contentLength=H||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(N),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new o.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:_,done:F}=await this._reader.read();return F?{value:_,done:F}:(this._loaded+=_.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:g(_),done:!1})}cancel(_){this._reader?.cancel(_),this._abortController.abort()}}class S{constructor(_,F,M){this._stream=_,this._reader=null,this._loaded=0;const I=_.source;this._withCredentials=I.withCredentials||!1,this._readCapability=new o.PromiseCapability,this._isStreamingSupported=!I.disableStream,this._abortController=new AbortController,this._headers=f(this._stream.httpHeaders),this._headers.append("Range",`bytes=${F}-${M-1}`);const N=I.url;fetch(N,d(this._headers,this._withCredentials,this._abortController)).then(B=>{if(!(0,u.validateResponseStatus)(B.status))throw(0,u.createResponseStatusError)(B.status,N);this._readCapability.resolve(),this._reader=B.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:_,done:F}=await this._reader.read();return F?{value:_,done:F}:(this._loaded+=_.byteLength,this.onProgress?.({loaded:this._loaded}),{value:g(_),done:!1})}cancel(_){this._reader?.cancel(_),this._abortController.abort()}}}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=v,t.extractFilenameFromHeader=g,t.validateRangeRequestCapabilities=f,t.validateResponseStatus=w;var o=n(1),u=n(21),d=n(6);function f({getResponseHeader:S,isHttp:R,rangeChunkSize:_,disableRange:F}){const M={allowRangeRequests:!1,suggestedLength:void 0},I=parseInt(S("Content-Length"),10);return!Number.isInteger(I)||(M.suggestedLength=I,I<=2*_)||F||!R||S("Accept-Ranges")!=="bytes"||(S("Content-Encoding")||"identity")!=="identity"||(M.allowRangeRequests=!0),M}function g(S){const R=S("Content-Disposition");if(R){let _=(0,u.getFilenameFromContentDispositionHeader)(R);if(_.includes("%"))try{_=decodeURIComponent(_)}catch{}if((0,d.isPdfFile)(_))return _}return null}function v(S,R){return S===404||S===0&&R.startsWith("file:")?new o.MissingPDFException('Missing PDF "'+R+'".'):new o.UnexpectedResponseException(`Unexpected server response (${S}) while retrieving PDF "${R}".`,S)}function w(S){return S===200||S===206}}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=u;var o=n(1);function u(d){let f=!0,g=v("filename\\*","i").exec(d);if(g){g=g[1];let I=_(g);return I=unescape(I),I=F(I),I=M(I),S(I)}if(g=R(d),g){const I=M(g);return S(I)}if(g=v("filename","i").exec(d),g){g=g[1];let I=_(g);return I=M(I),S(I)}function v(I,N){return new RegExp("(?:^|;)\\s*"+I+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',N)}function w(I,N){if(I){if(!/^[\x00-\xFF]+$/.test(N))return N;try{const B=new TextDecoder(I,{fatal:!0}),H=(0,o.stringToBytes)(N);N=B.decode(H),f=!1}catch{}}return N}function S(I){return f&&/[\x80-\xff]/.test(I)&&(I=w("utf-8",I),f&&(I=w("iso-8859-1",I))),I}function R(I){const N=[];let B;const H=v("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(B=H.exec(I))!==null;){let[,$,z,j]=B;if($=parseInt($,10),$ in N){if($===0)break;continue}N[$]=[z,j]}const U=[];for(let $=0;$<N.length&&$ in N;++$){let[z,j]=N[$];j=_(j),z&&(j=unescape(j),$===0&&(j=F(j))),U.push(j)}return U.join("")}function _(I){if(I.startsWith('"')){const N=I.slice(1).split('\\"');for(let B=0;B<N.length;++B){const H=N[B].indexOf('"');H!==-1&&(N[B]=N[B].slice(0,H),N.length=B+1),N[B]=N[B].replaceAll(/\\(.)/g,"$1")}I=N.join('"')}return I}function F(I){const N=I.indexOf("'");if(N===-1)return I;const B=I.slice(0,N),U=I.slice(N+1).replace(/^[^']*'/,"");return w(B,U)}function M(I){return!I.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(I)?I:I.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(N,B,H,U){if(H==="q"||H==="Q")return U=U.replaceAll("_"," "),U=U.replaceAll(/=([0-9a-fA-F]{2})/g,function($,z){return String.fromCharCode(parseInt(z,16))}),w(B,U);try{U=atob(U)}catch{}return w(B,U)})}return""}}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var o=n(1),u=n(20);const d=200,f=206;function g(_){const F=_.response;return typeof F!="string"?F:(0,o.stringToBytes)(F).buffer}class v{constructor(F,M={}){this.url=F,this.isHttp=/^https?:/i.test(F),this.httpHeaders=this.isHttp&&M.httpHeaders||Object.create(null),this.withCredentials=M.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(F,M,I){const N={begin:F,end:M};for(const B in I)N[B]=I[B];return this.request(N)}requestFull(F){return this.request(F)}request(F){const M=new XMLHttpRequest,I=this.currXhrId++,N=this.pendingRequests[I]={xhr:M};M.open("GET",this.url),M.withCredentials=this.withCredentials;for(const B in this.httpHeaders){const H=this.httpHeaders[B];H!==void 0&&M.setRequestHeader(B,H)}return this.isHttp&&"begin"in F&&"end"in F?(M.setRequestHeader("Range",`bytes=${F.begin}-${F.end-1}`),N.expectedStatus=f):N.expectedStatus=d,M.responseType="arraybuffer",F.onError&&(M.onerror=function(B){F.onError(M.status)}),M.onreadystatechange=this.onStateChange.bind(this,I),M.onprogress=this.onProgress.bind(this,I),N.onHeadersReceived=F.onHeadersReceived,N.onDone=F.onDone,N.onError=F.onError,N.onProgress=F.onProgress,M.send(null),I}onProgress(F,M){const I=this.pendingRequests[F];I&&I.onProgress?.(M)}onStateChange(F,M){const I=this.pendingRequests[F];if(!I)return;const N=I.xhr;if(N.readyState>=2&&I.onHeadersReceived&&(I.onHeadersReceived(),delete I.onHeadersReceived),N.readyState!==4||!(F in this.pendingRequests))return;if(delete this.pendingRequests[F],N.status===0&&this.isHttp){I.onError?.(N.status);return}const B=N.status||d;if(!(B===d&&I.expectedStatus===f)&&B!==I.expectedStatus){I.onError?.(N.status);return}const U=g(N);if(B===f){const $=N.getResponseHeader("Content-Range"),z=/bytes (\d+)-(\d+)\/(\d+)/.exec($);I.onDone({begin:parseInt(z[1],10),chunk:U})}else U?I.onDone({begin:0,chunk:U}):I.onError?.(N.status)}getRequestXhr(F){return this.pendingRequests[F].xhr}isPendingRequest(F){return F in this.pendingRequests}abortRequest(F){const M=this.pendingRequests[F].xhr;delete this.pendingRequests[F],M.abort()}}class w{constructor(F){this._source=F,this._manager=new v(F.url,{httpHeaders:F.httpHeaders,withCredentials:F.withCredentials}),this._rangeChunkSize=F.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(F){const M=this._rangeRequestReaders.indexOf(F);M>=0&&this._rangeRequestReaders.splice(M,1)}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new S(this._manager,this._source),this._fullRequestReader}getRangeReader(F,M){const I=new R(this._manager,F,M);return I.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(I),I}cancelAllRequests(F){this._fullRequestReader?.cancel(F);for(const M of this._rangeRequestReaders.slice(0))M.cancel(F)}}t.PDFNetworkStream=w;class S{constructor(F,M){this._manager=F;const I={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=M.url,this._fullRequestId=F.requestFull(I),this._headersReceivedCapability=new o.PromiseCapability,this._disableRange=M.disableRange||!1,this._contentLength=M.length,this._rangeChunkSize=M.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const F=this._fullRequestId,M=this._manager.getRequestXhr(F),I=H=>M.getResponseHeader(H),{allowRangeRequests:N,suggestedLength:B}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:I,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});N&&(this._isRangeSupported=!0),this._contentLength=B||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(I),this._isRangeSupported&&this._manager.abortRequest(F),this._headersReceivedCapability.resolve()}_onDone(F){if(F&&(this._requests.length>0?this._requests.shift().resolve({value:F.chunk,done:!1}):this._cachedChunks.push(F.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const M of this._requests)M.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(F){this._storedError=(0,u.createResponseStatusError)(F,this._url),this._headersReceivedCapability.reject(this._storedError);for(const M of this._requests)M.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(F){this.onProgress?.({loaded:F.loaded,total:F.lengthComputable?F.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const F=new o.PromiseCapability;return this._requests.push(F),F.promise}cancel(F){this._done=!0,this._headersReceivedCapability.reject(F);for(const M of this._requests)M.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class R{constructor(F,M,I){this._manager=F;const N={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=F.url,this._requestId=F.requestRange(M,I,N),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(F){const M=F.chunk;this._requests.length>0?this._requests.shift().resolve({value:M,done:!1}):this._queuedChunk=M,this._done=!0;for(const I of this._requests)I.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(F){this._storedError=(0,u.createResponseStatusError)(F,this._url);for(const M of this._requests)M.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(F){this.isStreamingSupported||this.onProgress?.({loaded:F.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const M=this._queuedChunk;return this._queuedChunk=null,{value:M,done:!1}}if(this._done)return{value:void 0,done:!0};const F=new o.PromiseCapability;return this._requests.push(F),F.promise}cancel(F){this._done=!0;for(const M of this._requests)M.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var o=n(1),u=n(20);const d=/^file:\/\/\/[a-zA-Z]:\//;function f(I){const N=require$$5,B=N.parse(I);return B.protocol==="file:"||B.host?B:/^[a-z]:[/\\]/i.test(I)?N.parse(`file:///${I}`):(B.host||(B.protocol="file:"),B)}class g{constructor(N){this.source=N,this.url=f(N.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&N.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new F(this):new R(this),this._fullRequestReader}getRangeReader(N,B){if(B<=this._progressiveDataLength)return null;const H=this.isFsUrl?new M(this,N,B):new _(this,N,B);return this._rangeRequestReaders.push(H),H}cancelAllRequests(N){this._fullRequestReader?.cancel(N);for(const B of this._rangeRequestReaders.slice(0))B.cancel(N)}}t.PDFNodeStream=g;class v{constructor(N){this._url=N.url,this._done=!1,this._storedError=null,this.onProgress=null;const B=N.source;this._contentLength=B.length,this._loaded=0,this._filename=null,this._disableRange=B.disableRange||!1,this._rangeChunkSize=B.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!B.disableStream,this._isRangeSupported=!B.disableRange,this._readableStream=null,this._readCapability=new o.PromiseCapability,this._headersCapability=new o.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const N=this._readableStream.read();return N===null?(this._readCapability=new o.PromiseCapability,this.read()):(this._loaded+=N.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(N).buffer,done:!1})}cancel(N){if(!this._readableStream){this._error(N);return}this._readableStream.destroy(N)}_error(N){this._storedError=N,this._readCapability.resolve()}_setReadableStream(N){this._readableStream=N,N.on("readable",()=>{this._readCapability.resolve()}),N.on("end",()=>{N.destroy(),this._done=!0,this._readCapability.resolve()}),N.on("error",B=>{this._error(B)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new o.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class w{constructor(N){this._url=N.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new o.PromiseCapability;const B=N.source;this._isStreamingSupported=!B.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const N=this._readableStream.read();return N===null?(this._readCapability=new o.PromiseCapability,this.read()):(this._loaded+=N.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(N).buffer,done:!1})}cancel(N){if(!this._readableStream){this._error(N);return}this._readableStream.destroy(N)}_error(N){this._storedError=N,this._readCapability.resolve()}_setReadableStream(N){this._readableStream=N,N.on("readable",()=>{this._readCapability.resolve()}),N.on("end",()=>{N.destroy(),this._done=!0,this._readCapability.resolve()}),N.on("error",B=>{this._error(B)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function S(I,N){return{protocol:I.protocol,auth:I.auth,host:I.hostname,port:I.port,path:I.path,method:"GET",headers:N}}class R extends v{constructor(N){super(N);const B=H=>{if(H.statusCode===404){const j=new o.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=j,this._headersCapability.reject(j);return}this._headersCapability.resolve(),this._setReadableStream(H);const U=j=>this._readableStream.headers[j.toLowerCase()],{allowRangeRequests:$,suggestedLength:z}=(0,u.validateRangeRequestCapabilities)({getResponseHeader:U,isHttp:N.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=$,this._contentLength=z||this._contentLength,this._filename=(0,u.extractFilenameFromHeader)(U)};if(this._request=null,this._url.protocol==="http:"){const H=require$$5;this._request=H.request(S(this._url,N.httpHeaders),B)}else{const H=require$$5;this._request=H.request(S(this._url,N.httpHeaders),B)}this._request.on("error",H=>{this._storedError=H,this._headersCapability.reject(H)}),this._request.end()}}class _ extends w{constructor(N,B,H){super(N),this._httpHeaders={};for(const $ in N.httpHeaders){const z=N.httpHeaders[$];z!==void 0&&(this._httpHeaders[$]=z)}this._httpHeaders.Range=`bytes=${B}-${H-1}`;const U=$=>{if($.statusCode===404){const z=new o.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=z;return}this._setReadableStream($)};if(this._request=null,this._url.protocol==="http:"){const $=require$$5;this._request=$.request(S(this._url,this._httpHeaders),U)}else{const $=require$$5;this._request=$.request(S(this._url,this._httpHeaders),U)}this._request.on("error",$=>{this._storedError=$}),this._request.end()}}class F extends v{constructor(N){super(N);let B=decodeURIComponent(this._url.path);d.test(this._url.href)&&(B=B.replace(/^\//,""));const H=require$$5;H.lstat(B,(U,$)=>{if(U){U.code==="ENOENT"&&(U=new o.MissingPDFException(`Missing PDF "${B}".`)),this._storedError=U,this._headersCapability.reject(U);return}this._contentLength=$.size,this._setReadableStream(H.createReadStream(B)),this._headersCapability.resolve()})}}class M extends w{constructor(N,B,H){super(N);let U=decodeURIComponent(this._url.path);d.test(this._url.href)&&(U=U.replace(/^\//,""));const $=require$$5;this._setReadableStream($.createReadStream(U,{start:B,end:H-1}))}}}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var o=n(6),u=n(1);const d={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},f="http://www.w3.org/XML/1998/namespace",g="http://www.w3.org/1999/xlink",v=["butt","round","square"],w=["miter","round","bevel"],S=function($,z="",j=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!j)return URL.createObjectURL(new Blob([$],{type:z}));const J="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let ie=`data:${z};base64,`;for(let se=0,fe=$.length;se<fe;se+=3){const de=$[se]&255,Ce=$[se+1]&255,be=$[se+2]&255,xe=de>>2,Ee=(de&3)<<4|Ce>>4,ae=se+1<fe?(Ce&15)<<2|be>>6:64,oe=se+2<fe?be&63:64;ie+=J[xe]+J[Ee]+J[ae]+J[oe]}return ie},R=(function(){const $=new Uint8Array([137,80,78,71,13,10,26,10]),z=12,j=new Int32Array(256);for(let be=0;be<256;be++){let xe=be;for(let Ee=0;Ee<8;Ee++)xe=xe&1?3988292384^xe>>1&2147483647:xe>>1&2147483647;j[be]=xe}function J(be,xe,Ee){let ae=-1;for(let oe=xe;oe<Ee;oe++){const ee=(ae^be[oe])&255,Z=j[ee];ae=ae>>>8^Z}return ae^-1}function ie(be,xe,Ee,ae){let oe=ae;const ee=xe.length;Ee[oe]=ee>>24&255,Ee[oe+1]=ee>>16&255,Ee[oe+2]=ee>>8&255,Ee[oe+3]=ee&255,oe+=4,Ee[oe]=be.charCodeAt(0)&255,Ee[oe+1]=be.charCodeAt(1)&255,Ee[oe+2]=be.charCodeAt(2)&255,Ee[oe+3]=be.charCodeAt(3)&255,oe+=4,Ee.set(xe,oe),oe+=xe.length;const Z=J(Ee,ae+4,oe);Ee[oe]=Z>>24&255,Ee[oe+1]=Z>>16&255,Ee[oe+2]=Z>>8&255,Ee[oe+3]=Z&255}function se(be,xe,Ee){let ae=1,oe=0;for(let ee=xe;ee<Ee;++ee)ae=(ae+(be[ee]&255))%65521,oe=(oe+ae)%65521;return oe<<16|ae}function fe(be){if(!u.isNodeJS)return de(be);try{const xe=parseInt(process.versions.node)>=8?be:Buffer.from(be),Ee=require$$5.deflateSync(xe,{level:9});return Ee instanceof Uint8Array?Ee:new Uint8Array(Ee)}catch(xe){(0,u.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+xe)}return de(be)}function de(be){let xe=be.length;const Ee=65535,ae=Math.ceil(xe/Ee),oe=new Uint8Array(2+xe+ae*5+4);let ee=0;oe[ee++]=120,oe[ee++]=156;let Z=0;for(;xe>Ee;)oe[ee++]=0,oe[ee++]=255,oe[ee++]=255,oe[ee++]=0,oe[ee++]=0,oe.set(be.subarray(Z,Z+Ee),ee),ee+=Ee,Z+=Ee,xe-=Ee;oe[ee++]=1,oe[ee++]=xe&255,oe[ee++]=xe>>8&255,oe[ee++]=~xe&65535&255,oe[ee++]=(~xe&65535)>>8&255,oe.set(be.subarray(Z),ee),ee+=be.length-Z;const Q=se(be,0,be.length);return oe[ee++]=Q>>24&255,oe[ee++]=Q>>16&255,oe[ee++]=Q>>8&255,oe[ee++]=Q&255,oe}function Ce(be,xe,Ee,ae){const oe=be.width,ee=be.height;let Z,Q,K;const ne=be.data;switch(xe){case u.ImageKind.GRAYSCALE_1BPP:Q=0,Z=1,K=oe+7>>3;break;case u.ImageKind.RGB_24BPP:Q=2,Z=8,K=oe*3;break;case u.ImageKind.RGBA_32BPP:Q=6,Z=8,K=oe*4;break;default:throw new Error("invalid format")}const ue=new Uint8Array((1+K)*ee);let ye=0,pe=0;for(let we=0;we<ee;++we)ue[ye++]=0,ue.set(ne.subarray(pe,pe+K),ye),pe+=K,ye+=K;if(xe===u.ImageKind.GRAYSCALE_1BPP&&ae){ye=0;for(let we=0;we<ee;we++){ye++;for(let Se=0;Se<K;Se++)ue[ye++]^=255}}const X=new Uint8Array([oe>>24&255,oe>>16&255,oe>>8&255,oe&255,ee>>24&255,ee>>16&255,ee>>8&255,ee&255,Z,Q,0,0,0]),le=fe(ue),he=$.length+z*3+X.length+le.length,ce=new Uint8Array(he);let me=0;return ce.set($,me),me+=$.length,ie("IHDR",X,ce,me),me+=z+X.length,ie("IDATA",le,ce,me),me+=z+le.length,ie("IEND",new Uint8Array(0),ce,me),S(ce,"image/png",Ee)}return function(xe,Ee,ae){const oe=xe.kind===void 0?u.ImageKind.GRAYSCALE_1BPP:xe.kind;return Ce(xe,oe,Ee,ae)}})();class _{constructor(){this.fontSizeScale=1,this.fontWeight=d.fontWeight,this.fontSize=0,this.textMatrix=u.IDENTITY_MATRIX,this.fontMatrix=u.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=u.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=d.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(z,j){this.x=z,this.y=j}}function F($){let z=[];const j=[];for(const J of $){if(J.fn==="save"){z.push({fnId:92,fn:"group",items:[]}),j.push(z),z=z.at(-1).items;continue}J.fn==="restore"?z=j.pop():z.push(J)}return z}function M($){if(Number.isInteger($))return $.toString();const z=$.toFixed(10);let j=z.length-1;if(z[j]!=="0")return z;do j--;while(z[j]==="0");return z.substring(0,z[j]==="."?j:j+1)}function I($){if($[4]===0&&$[5]===0){if($[1]===0&&$[2]===0)return $[0]===1&&$[3]===1?"":`scale(${M($[0])} ${M($[3])})`;if($[0]===$[3]&&$[1]===-$[2]){const z=Math.acos($[0])*180/Math.PI;return`rotate(${M(z)})`}}else if($[0]===1&&$[1]===0&&$[2]===0&&$[3]===1)return`translate(${M($[4])} ${M($[5])})`;return`matrix(${M($[0])} ${M($[1])} ${M($[2])} ${M($[3])} ${M($[4])} ${M($[5])})`}let N=0,B=0,H=0;class U{constructor(z,j,J=!1){(0,o.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new o.DOMSVGFactory,this.current=new _,this.transformMatrix=u.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=z,this.objs=j,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!J,this._operatorIdMapping=[];for(const ie in u.OPS)this._operatorIdMapping[u.OPS[ie]]=ie}getObject(z,j=null){return typeof z=="string"?z.startsWith("g_")?this.commonObjs.get(z):this.objs.get(z):j}save(){this.transformStack.push(this.transformMatrix);const z=this.current;this.extraStack.push(z),this.current=z.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(z){this.save(),this.executeOpTree(z),this.restore()}loadDependencies(z){const j=z.fnArray,J=z.argsArray;for(let ie=0,se=j.length;ie<se;ie++)if(j[ie]===u.OPS.dependency)for(const fe of J[ie]){const de=fe.startsWith("g_")?this.commonObjs:this.objs,Ce=new Promise(be=>{de.get(fe,be)});this.current.dependencies.push(Ce)}return Promise.all(this.current.dependencies)}transform(z,j,J,ie,se,fe){const de=[z,j,J,ie,se,fe];this.transformMatrix=u.Util.transform(this.transformMatrix,de),this.tgrp=null}getSVG(z,j){this.viewport=j;const J=this._initialize(j);return this.loadDependencies(z).then(()=>(this.transformMatrix=u.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(z)),J))}convertOpList(z){const j=this._operatorIdMapping,J=z.argsArray,ie=z.fnArray,se=[];for(let fe=0,de=ie.length;fe<de;fe++){const Ce=ie[fe];se.push({fnId:Ce,fn:j[Ce],args:J[fe]})}return F(se)}executeOpTree(z){for(const j of z){const J=j.fn,ie=j.fnId,se=j.args;switch(ie|0){case u.OPS.beginText:this.beginText();break;case u.OPS.dependency:break;case u.OPS.setLeading:this.setLeading(se);break;case u.OPS.setLeadingMoveText:this.setLeadingMoveText(se[0],se[1]);break;case u.OPS.setFont:this.setFont(se);break;case u.OPS.showText:this.showText(se[0]);break;case u.OPS.showSpacedText:this.showText(se[0]);break;case u.OPS.endText:this.endText();break;case u.OPS.moveText:this.moveText(se[0],se[1]);break;case u.OPS.setCharSpacing:this.setCharSpacing(se[0]);break;case u.OPS.setWordSpacing:this.setWordSpacing(se[0]);break;case u.OPS.setHScale:this.setHScale(se[0]);break;case u.OPS.setTextMatrix:this.setTextMatrix(se[0],se[1],se[2],se[3],se[4],se[5]);break;case u.OPS.setTextRise:this.setTextRise(se[0]);break;case u.OPS.setTextRenderingMode:this.setTextRenderingMode(se[0]);break;case u.OPS.setLineWidth:this.setLineWidth(se[0]);break;case u.OPS.setLineJoin:this.setLineJoin(se[0]);break;case u.OPS.setLineCap:this.setLineCap(se[0]);break;case u.OPS.setMiterLimit:this.setMiterLimit(se[0]);break;case u.OPS.setFillRGBColor:this.setFillRGBColor(se[0],se[1],se[2]);break;case u.OPS.setStrokeRGBColor:this.setStrokeRGBColor(se[0],se[1],se[2]);break;case u.OPS.setStrokeColorN:this.setStrokeColorN(se);break;case u.OPS.setFillColorN:this.setFillColorN(se);break;case u.OPS.shadingFill:this.shadingFill(se[0]);break;case u.OPS.setDash:this.setDash(se[0],se[1]);break;case u.OPS.setRenderingIntent:this.setRenderingIntent(se[0]);break;case u.OPS.setFlatness:this.setFlatness(se[0]);break;case u.OPS.setGState:this.setGState(se[0]);break;case u.OPS.fill:this.fill();break;case u.OPS.eoFill:this.eoFill();break;case u.OPS.stroke:this.stroke();break;case u.OPS.fillStroke:this.fillStroke();break;case u.OPS.eoFillStroke:this.eoFillStroke();break;case u.OPS.clip:this.clip("nonzero");break;case u.OPS.eoClip:this.clip("evenodd");break;case u.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case u.OPS.paintImageXObject:this.paintImageXObject(se[0]);break;case u.OPS.paintInlineImageXObject:this.paintInlineImageXObject(se[0]);break;case u.OPS.paintImageMaskXObject:this.paintImageMaskXObject(se[0]);break;case u.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(se[0],se[1]);break;case u.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case u.OPS.closePath:this.closePath();break;case u.OPS.closeStroke:this.closeStroke();break;case u.OPS.closeFillStroke:this.closeFillStroke();break;case u.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case u.OPS.nextLine:this.nextLine();break;case u.OPS.transform:this.transform(se[0],se[1],se[2],se[3],se[4],se[5]);break;case u.OPS.constructPath:this.constructPath(se[0],se[1]);break;case u.OPS.endPath:this.endPath();break;case 92:this.group(j.items);break;default:(0,u.warn)(`Unimplemented operator ${J}`);break}}}setWordSpacing(z){this.current.wordSpacing=z}setCharSpacing(z){this.current.charSpacing=z}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(z,j,J,ie,se,fe){const de=this.current;de.textMatrix=de.lineMatrix=[z,j,J,ie,se,fe],de.textMatrixScale=Math.hypot(z,j),de.x=de.lineX=0,de.y=de.lineY=0,de.xcoords=[],de.ycoords=[],de.tspan=this.svgFactory.createElement("svg:tspan"),de.tspan.setAttributeNS(null,"font-family",de.fontFamily),de.tspan.setAttributeNS(null,"font-size",`${M(de.fontSize)}px`),de.tspan.setAttributeNS(null,"y",M(-de.y)),de.txtElement=this.svgFactory.createElement("svg:text"),de.txtElement.append(de.tspan)}beginText(){const z=this.current;z.x=z.lineX=0,z.y=z.lineY=0,z.textMatrix=u.IDENTITY_MATRIX,z.lineMatrix=u.IDENTITY_MATRIX,z.textMatrixScale=1,z.tspan=this.svgFactory.createElement("svg:tspan"),z.txtElement=this.svgFactory.createElement("svg:text"),z.txtgrp=this.svgFactory.createElement("svg:g"),z.xcoords=[],z.ycoords=[]}moveText(z,j){const J=this.current;J.x=J.lineX+=z,J.y=J.lineY+=j,J.xcoords=[],J.ycoords=[],J.tspan=this.svgFactory.createElement("svg:tspan"),J.tspan.setAttributeNS(null,"font-family",J.fontFamily),J.tspan.setAttributeNS(null,"font-size",`${M(J.fontSize)}px`),J.tspan.setAttributeNS(null,"y",M(-J.y))}showText(z){const j=this.current,J=j.font,ie=j.fontSize;if(ie===0)return;const se=j.fontSizeScale,fe=j.charSpacing,de=j.wordSpacing,Ce=j.fontDirection,be=j.textHScale*Ce,xe=J.vertical,Ee=xe?1:-1,ae=J.defaultVMetrics,oe=ie*j.fontMatrix[0];let ee=0;for(const K of z){if(K===null){ee+=Ce*de;continue}else if(typeof K=="number"){ee+=Ee*K*ie/1e3;continue}const ne=(K.isSpace?de:0)+fe,ue=K.fontChar;let ye,pe,X=K.width;if(xe){let he;const ce=K.vmetric||ae;he=K.vmetric?ce[1]:X*.5,he=-he*oe;const me=ce[2]*oe;X=ce?-ce[0]:X,ye=he/se,pe=(ee+me)/se}else ye=ee/se,pe=0;(K.isInFont||J.missingFile)&&(j.xcoords.push(j.x+ye),xe&&j.ycoords.push(-j.y+pe),j.tspan.textContent+=ue);const le=xe?X*oe-ne*Ce:X*oe+ne*Ce;ee+=le}j.tspan.setAttributeNS(null,"x",j.xcoords.map(M).join(" ")),xe?j.tspan.setAttributeNS(null,"y",j.ycoords.map(M).join(" ")):j.tspan.setAttributeNS(null,"y",M(-j.y)),xe?j.y-=ee:j.x+=ee*be,j.tspan.setAttributeNS(null,"font-family",j.fontFamily),j.tspan.setAttributeNS(null,"font-size",`${M(j.fontSize)}px`),j.fontStyle!==d.fontStyle&&j.tspan.setAttributeNS(null,"font-style",j.fontStyle),j.fontWeight!==d.fontWeight&&j.tspan.setAttributeNS(null,"font-weight",j.fontWeight);const Z=j.textRenderingMode&u.TextRenderingMode.FILL_STROKE_MASK;if(Z===u.TextRenderingMode.FILL||Z===u.TextRenderingMode.FILL_STROKE?(j.fillColor!==d.fillColor&&j.tspan.setAttributeNS(null,"fill",j.fillColor),j.fillAlpha<1&&j.tspan.setAttributeNS(null,"fill-opacity",j.fillAlpha)):j.textRenderingMode===u.TextRenderingMode.ADD_TO_PATH?j.tspan.setAttributeNS(null,"fill","transparent"):j.tspan.setAttributeNS(null,"fill","none"),Z===u.TextRenderingMode.STROKE||Z===u.TextRenderingMode.FILL_STROKE){const K=1/(j.textMatrixScale||1);this._setStrokeAttributes(j.tspan,K)}let Q=j.textMatrix;j.textRise!==0&&(Q=Q.slice(),Q[5]+=j.textRise),j.txtElement.setAttributeNS(null,"transform",`${I(Q)} scale(${M(be)}, -1)`),j.txtElement.setAttributeNS(f,"xml:space","preserve"),j.txtElement.append(j.tspan),j.txtgrp.append(j.txtElement),this._ensureTransformGroup().append(j.txtElement)}setLeadingMoveText(z,j){this.setLeading(-j),this.moveText(z,j)}addFontStyle(z){if(!z.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const j=S(z.data,z.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${z.loadedName}"; src: url(${j}); }
`}setFont(z){const j=this.current,J=this.commonObjs.get(z[0]);let ie=z[1];j.font=J,this.embedFonts&&!J.missingFile&&!this.embeddedFonts[J.loadedName]&&(this.addFontStyle(J),this.embeddedFonts[J.loadedName]=J),j.fontMatrix=J.fontMatrix||u.FONT_IDENTITY_MATRIX;let se="normal";J.black?se="900":J.bold&&(se="bold");const fe=J.italic?"italic":"normal";ie<0?(ie=-ie,j.fontDirection=-1):j.fontDirection=1,j.fontSize=ie,j.fontFamily=J.loadedName,j.fontWeight=se,j.fontStyle=fe,j.tspan=this.svgFactory.createElement("svg:tspan"),j.tspan.setAttributeNS(null,"y",M(-j.y)),j.xcoords=[],j.ycoords=[]}endText(){const z=this.current;z.textRenderingMode&u.TextRenderingMode.ADD_TO_PATH_FLAG&&z.txtElement?.hasChildNodes()&&(z.element=z.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(z){z>0&&(this.current.lineWidth=z)}setLineCap(z){this.current.lineCap=v[z]}setLineJoin(z){this.current.lineJoin=w[z]}setMiterLimit(z){this.current.miterLimit=z}setStrokeAlpha(z){this.current.strokeAlpha=z}setStrokeRGBColor(z,j,J){this.current.strokeColor=u.Util.makeHexColor(z,j,J)}setFillAlpha(z){this.current.fillAlpha=z}setFillRGBColor(z,j,J){this.current.fillColor=u.Util.makeHexColor(z,j,J),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(z){this.current.strokeColor=this._makeColorN_Pattern(z)}setFillColorN(z){this.current.fillColor=this._makeColorN_Pattern(z)}shadingFill(z){const{width:j,height:J}=this.viewport,ie=u.Util.inverseTransform(this.transformMatrix),[se,fe,de,Ce]=u.Util.getAxialAlignedBoundingBox([0,0,j,J],ie),be=this.svgFactory.createElement("svg:rect");be.setAttributeNS(null,"x",se),be.setAttributeNS(null,"y",fe),be.setAttributeNS(null,"width",de-se),be.setAttributeNS(null,"height",Ce-fe),be.setAttributeNS(null,"fill",this._makeShadingPattern(z)),this.current.fillAlpha<1&&be.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(be)}_makeColorN_Pattern(z){return z[0]==="TilingPattern"?this._makeTilingPattern(z):this._makeShadingPattern(z)}_makeTilingPattern(z){const j=z[1],J=z[2],ie=z[3]||u.IDENTITY_MATRIX,[se,fe,de,Ce]=z[4],be=z[5],xe=z[6],Ee=z[7],ae=`shading${H++}`,[oe,ee,Z,Q]=u.Util.normalizeRect([...u.Util.applyTransform([se,fe],ie),...u.Util.applyTransform([de,Ce],ie)]),[K,ne]=u.Util.singularValueDecompose2dScale(ie),ue=be*K,ye=xe*ne,pe=this.svgFactory.createElement("svg:pattern");pe.setAttributeNS(null,"id",ae),pe.setAttributeNS(null,"patternUnits","userSpaceOnUse"),pe.setAttributeNS(null,"width",ue),pe.setAttributeNS(null,"height",ye),pe.setAttributeNS(null,"x",`${oe}`),pe.setAttributeNS(null,"y",`${ee}`);const X=this.svg,le=this.transformMatrix,he=this.current.fillColor,ce=this.current.strokeColor,me=this.svgFactory.create(Z-oe,Q-ee);if(this.svg=me,this.transformMatrix=ie,Ee===2){const we=u.Util.makeHexColor(...j);this.current.fillColor=we,this.current.strokeColor=we}return this.executeOpTree(this.convertOpList(J)),this.svg=X,this.transformMatrix=le,this.current.fillColor=he,this.current.strokeColor=ce,pe.append(me.childNodes[0]),this.defs.append(pe),`url(#${ae})`}_makeShadingPattern(z){switch(typeof z=="string"&&(z=this.objs.get(z)),z[0]){case"RadialAxial":const j=`shading${H++}`,J=z[3];let ie;switch(z[1]){case"axial":const se=z[4],fe=z[5];ie=this.svgFactory.createElement("svg:linearGradient"),ie.setAttributeNS(null,"id",j),ie.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),ie.setAttributeNS(null,"x1",se[0]),ie.setAttributeNS(null,"y1",se[1]),ie.setAttributeNS(null,"x2",fe[0]),ie.setAttributeNS(null,"y2",fe[1]);break;case"radial":const de=z[4],Ce=z[5],be=z[6],xe=z[7];ie=this.svgFactory.createElement("svg:radialGradient"),ie.setAttributeNS(null,"id",j),ie.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),ie.setAttributeNS(null,"cx",Ce[0]),ie.setAttributeNS(null,"cy",Ce[1]),ie.setAttributeNS(null,"r",xe),ie.setAttributeNS(null,"fx",de[0]),ie.setAttributeNS(null,"fy",de[1]),ie.setAttributeNS(null,"fr",be);break;default:throw new Error(`Unknown RadialAxial type: ${z[1]}`)}for(const se of J){const fe=this.svgFactory.createElement("svg:stop");fe.setAttributeNS(null,"offset",se[0]),fe.setAttributeNS(null,"stop-color",se[1]),ie.append(fe)}return this.defs.append(ie),`url(#${j})`;case"Mesh":return(0,u.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${z[0]}`)}}setDash(z,j){this.current.dashArray=z,this.current.dashPhase=j}constructPath(z,j){const J=this.current;let ie=J.x,se=J.y,fe=[],de=0;for(const Ce of z)switch(Ce|0){case u.OPS.rectangle:ie=j[de++],se=j[de++];const be=j[de++],xe=j[de++],Ee=ie+be,ae=se+xe;fe.push("M",M(ie),M(se),"L",M(Ee),M(se),"L",M(Ee),M(ae),"L",M(ie),M(ae),"Z");break;case u.OPS.moveTo:ie=j[de++],se=j[de++],fe.push("M",M(ie),M(se));break;case u.OPS.lineTo:ie=j[de++],se=j[de++],fe.push("L",M(ie),M(se));break;case u.OPS.curveTo:ie=j[de+4],se=j[de+5],fe.push("C",M(j[de]),M(j[de+1]),M(j[de+2]),M(j[de+3]),M(ie),M(se)),de+=6;break;case u.OPS.curveTo2:fe.push("C",M(ie),M(se),M(j[de]),M(j[de+1]),M(j[de+2]),M(j[de+3])),ie=j[de+2],se=j[de+3],de+=4;break;case u.OPS.curveTo3:ie=j[de+2],se=j[de+3],fe.push("C",M(j[de]),M(j[de+1]),M(ie),M(se),M(ie),M(se)),de+=4;break;case u.OPS.closePath:fe.push("Z");break}fe=fe.join(" "),J.path&&z.length>0&&z[0]!==u.OPS.rectangle&&z[0]!==u.OPS.moveTo?fe=J.path.getAttributeNS(null,"d")+fe:(J.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(J.path)),J.path.setAttributeNS(null,"d",fe),J.path.setAttributeNS(null,"fill","none"),J.element=J.path,J.setCurrentPoint(ie,se)}endPath(){const z=this.current;if(z.path=null,!this.pendingClip)return;if(!z.element){this.pendingClip=null;return}const j=`clippath${N++}`,J=this.svgFactory.createElement("svg:clipPath");J.setAttributeNS(null,"id",j),J.setAttributeNS(null,"transform",I(this.transformMatrix));const ie=z.element.cloneNode(!0);if(this.pendingClip==="evenodd"?ie.setAttributeNS(null,"clip-rule","evenodd"):ie.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,J.append(ie),this.defs.append(J),z.activeClipUrl){z.clipGroup=null;for(const se of this.extraStack)se.clipGroup=null;J.setAttributeNS(null,"clip-path",z.activeClipUrl)}z.activeClipUrl=`url(#${j})`,this.tgrp=null}clip(z){this.pendingClip=z}closePath(){const z=this.current;if(z.path){const j=`${z.path.getAttributeNS(null,"d")}Z`;z.path.setAttributeNS(null,"d",j)}}setLeading(z){this.current.leading=-z}setTextRise(z){this.current.textRise=z}setTextRenderingMode(z){this.current.textRenderingMode=z}setHScale(z){this.current.textHScale=z/100}setRenderingIntent(z){}setFlatness(z){}setGState(z){for(const[j,J]of z)switch(j){case"LW":this.setLineWidth(J);break;case"LC":this.setLineCap(J);break;case"LJ":this.setLineJoin(J);break;case"ML":this.setMiterLimit(J);break;case"D":this.setDash(J[0],J[1]);break;case"RI":this.setRenderingIntent(J);break;case"FL":this.setFlatness(J);break;case"Font":this.setFont(J);break;case"CA":this.setStrokeAlpha(J);break;case"ca":this.setFillAlpha(J);break;default:(0,u.warn)(`Unimplemented graphic state operator ${j}`);break}}fill(){const z=this.current;z.element&&(z.element.setAttributeNS(null,"fill",z.fillColor),z.element.setAttributeNS(null,"fill-opacity",z.fillAlpha),this.endPath())}stroke(){const z=this.current;z.element&&(this._setStrokeAttributes(z.element),z.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(z,j=1){const J=this.current;let ie=J.dashArray;j!==1&&ie.length>0&&(ie=ie.map(function(se){return j*se})),z.setAttributeNS(null,"stroke",J.strokeColor),z.setAttributeNS(null,"stroke-opacity",J.strokeAlpha),z.setAttributeNS(null,"stroke-miterlimit",M(J.miterLimit)),z.setAttributeNS(null,"stroke-linecap",J.lineCap),z.setAttributeNS(null,"stroke-linejoin",J.lineJoin),z.setAttributeNS(null,"stroke-width",M(j*J.lineWidth)+"px"),z.setAttributeNS(null,"stroke-dasharray",ie.map(M).join(" ")),z.setAttributeNS(null,"stroke-dashoffset",M(j*J.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const z=this.svgFactory.createElement("svg:rect");z.setAttributeNS(null,"x","0"),z.setAttributeNS(null,"y","0"),z.setAttributeNS(null,"width","1px"),z.setAttributeNS(null,"height","1px"),z.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(z)}paintImageXObject(z){const j=this.getObject(z);if(!j){(0,u.warn)(`Dependent image with object ID ${z} is not ready yet`);return}this.paintInlineImageXObject(j)}paintInlineImageXObject(z,j){const J=z.width,ie=z.height,se=R(z,this.forceDataSchema,!!j),fe=this.svgFactory.createElement("svg:rect");fe.setAttributeNS(null,"x","0"),fe.setAttributeNS(null,"y","0"),fe.setAttributeNS(null,"width",M(J)),fe.setAttributeNS(null,"height",M(ie)),this.current.element=fe,this.clip("nonzero");const de=this.svgFactory.createElement("svg:image");de.setAttributeNS(g,"xlink:href",se),de.setAttributeNS(null,"x","0"),de.setAttributeNS(null,"y",M(-ie)),de.setAttributeNS(null,"width",M(J)+"px"),de.setAttributeNS(null,"height",M(ie)+"px"),de.setAttributeNS(null,"transform",`scale(${M(1/J)} ${M(-1/ie)})`),j?j.append(de):this._ensureTransformGroup().append(de)}paintImageMaskXObject(z){const j=this.getObject(z.data,z);if(j.bitmap){(0,u.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const J=this.current,ie=j.width,se=j.height,fe=J.fillColor;J.maskId=`mask${B++}`;const de=this.svgFactory.createElement("svg:mask");de.setAttributeNS(null,"id",J.maskId);const Ce=this.svgFactory.createElement("svg:rect");Ce.setAttributeNS(null,"x","0"),Ce.setAttributeNS(null,"y","0"),Ce.setAttributeNS(null,"width",M(ie)),Ce.setAttributeNS(null,"height",M(se)),Ce.setAttributeNS(null,"fill",fe),Ce.setAttributeNS(null,"mask",`url(#${J.maskId})`),this.defs.append(de),this._ensureTransformGroup().append(Ce),this.paintInlineImageXObject(j,de)}paintFormXObjectBegin(z,j){if(Array.isArray(z)&&z.length===6&&this.transform(z[0],z[1],z[2],z[3],z[4],z[5]),j){const J=j[2]-j[0],ie=j[3]-j[1],se=this.svgFactory.createElement("svg:rect");se.setAttributeNS(null,"x",j[0]),se.setAttributeNS(null,"y",j[1]),se.setAttributeNS(null,"width",M(J)),se.setAttributeNS(null,"height",M(ie)),this.current.element=se,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(z){const j=this.svgFactory.create(z.width,z.height),J=this.svgFactory.createElement("svg:defs");j.append(J),this.defs=J;const ie=this.svgFactory.createElement("svg:g");return ie.setAttributeNS(null,"transform",I(z.transform)),j.append(ie),this.svg=ie,j}_ensureClipGroup(){if(!this.current.clipGroup){const z=this.svgFactory.createElement("svg:g");z.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(z),this.current.clipGroup=z}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",I(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}t.SVGGraphics=U}),((e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class n{static textContent(u){const d=[],f={items:d,styles:Object.create(null)};function g(v){if(!v)return;let w=null;const S=v.name;if(S==="#text")w=v.value;else if(n.shouldBuildText(S))v?.attributes?.textContent?w=v.attributes.textContent:v.value&&(w=v.value);else return;if(w!==null&&d.push({str:w}),!!v.children)for(const R of v.children)g(R)}return g(u),f}static shouldBuildText(u){return!(u==="textarea"||u==="input"||u==="option"||u==="select")}}t.XfaText=n}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=I,t.updateTextLayer=N;var o=n(1),u=n(6);const d=1e5,f=30,g=.8,v=new Map;function w(B,H){let U;if(H&&o.FeatureTest.isOffscreenCanvasSupported)U=new OffscreenCanvas(B,B).getContext("2d",{alpha:!1});else{const $=document.createElement("canvas");$.width=$.height=B,U=$.getContext("2d",{alpha:!1})}return U}function S(B,H){const U=v.get(B);if(U)return U;const $=w(f,H);$.font=`${f}px ${B}`;const z=$.measureText("");let j=z.fontBoundingBoxAscent,J=Math.abs(z.fontBoundingBoxDescent);if(j){const se=j/(j+J);return v.set(B,se),$.canvas.width=$.canvas.height=0,se}$.strokeStyle="red",$.clearRect(0,0,f,f),$.strokeText("g",0,0);let ie=$.getImageData(0,0,f,f).data;J=0;for(let se=ie.length-1-3;se>=0;se-=4)if(ie[se]>0){J=Math.ceil(se/4/f);break}$.clearRect(0,0,f,f),$.strokeText("A",0,f),ie=$.getImageData(0,0,f,f).data,j=0;for(let se=0,fe=ie.length;se<fe;se+=4)if(ie[se]>0){j=f-Math.floor(se/4/f);break}if($.canvas.width=$.canvas.height=0,j){const se=j/(j+J);return v.set(B,se),se}return v.set(B,g),g}function R(B,H,U){const $=document.createElement("span"),z={angle:0,canvasWidth:0,hasText:H.str!=="",hasEOL:H.hasEOL,fontSize:0};B._textDivs.push($);const j=o.Util.transform(B._transform,H.transform);let J=Math.atan2(j[1],j[0]);const ie=U[H.fontName];ie.vertical&&(J+=Math.PI/2);const se=Math.hypot(j[2],j[3]),fe=se*S(ie.fontFamily,B._isOffscreenCanvasSupported);let de,Ce;J===0?(de=j[4],Ce=j[5]-fe):(de=j[4]+fe*Math.sin(J),Ce=j[5]-fe*Math.cos(J));const be="calc(var(--scale-factor)*",xe=$.style;B._container===B._rootContainer?(xe.left=`${(100*de/B._pageWidth).toFixed(2)}%`,xe.top=`${(100*Ce/B._pageHeight).toFixed(2)}%`):(xe.left=`${be}${de.toFixed(2)}px)`,xe.top=`${be}${Ce.toFixed(2)}px)`),xe.fontSize=`${be}${se.toFixed(2)}px)`,xe.fontFamily=ie.fontFamily,z.fontSize=se,$.setAttribute("role","presentation"),$.textContent=H.str,$.dir=H.dir,B._fontInspectorEnabled&&($.dataset.fontName=H.fontName),J!==0&&(z.angle=J*(180/Math.PI));let Ee=!1;if(H.str.length>1)Ee=!0;else if(H.str!==" "&&H.transform[0]!==H.transform[3]){const ae=Math.abs(H.transform[0]),oe=Math.abs(H.transform[3]);ae!==oe&&Math.max(ae,oe)/Math.min(ae,oe)>1.5&&(Ee=!0)}Ee&&(z.canvasWidth=ie.vertical?H.height:H.width),B._textDivProperties.set($,z),B._isReadableStream&&B._layoutText($)}function _(B){const{div:H,scale:U,properties:$,ctx:z,prevFontSize:j,prevFontFamily:J}=B,{style:ie}=H;let se="";if($.canvasWidth!==0&&$.hasText){const{fontFamily:fe}=ie,{canvasWidth:de,fontSize:Ce}=$;(j!==Ce||J!==fe)&&(z.font=`${Ce*U}px ${fe}`,B.prevFontSize=Ce,B.prevFontFamily=fe);const{width:be}=z.measureText(H.textContent);be>0&&(se=`scaleX(${de*U/be})`)}$.angle!==0&&(se=`rotate(${$.angle}deg) ${se}`),se.length>0&&(ie.transform=se)}function F(B){if(B._canceled)return;const H=B._textDivs,U=B._capability;if(H.length>d){U.resolve();return}if(!B._isReadableStream)for(const z of H)B._layoutText(z);U.resolve()}class M{constructor({textContentSource:H,container:U,viewport:$,textDivs:z,textDivProperties:j,textContentItemsStr:J,isOffscreenCanvasSupported:ie}){this._textContentSource=H,this._isReadableStream=H instanceof ReadableStream,this._container=this._rootContainer=U,this._textDivs=z||[],this._textContentItemsStr=J||[],this._isOffscreenCanvasSupported=ie,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=j||new WeakMap,this._canceled=!1,this._capability=new o.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:$.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:w(0,ie)};const{pageWidth:se,pageHeight:fe,pageX:de,pageY:Ce}=$.rawDims;this._transform=[1,0,0,-1,-de,Ce+fe],this._pageWidth=se,this._pageHeight=fe,(0,u.setLayerDimensions)(U,$),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new o.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new o.AbortException("TextLayer task cancelled."))}_processItems(H,U){for(const $ of H){if($.str===void 0){if($.type==="beginMarkedContentProps"||$.type==="beginMarkedContent"){const z=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),$.id!==null&&this._container.setAttribute("id",`${$.id}`),z.append(this._container)}else $.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push($.str),R(this,$,U)}}_layoutText(H){const U=this._layoutTextParams.properties=this._textDivProperties.get(H);if(this._layoutTextParams.div=H,_(this._layoutTextParams),U.hasText&&this._container.append(H),U.hasEOL){const $=document.createElement("br");$.setAttribute("role","presentation"),this._container.append($)}}_render(){const H=new o.PromiseCapability;let U=Object.create(null);if(this._isReadableStream){const $=()=>{this._reader.read().then(({value:z,done:j})=>{if(j){H.resolve();return}Object.assign(U,z.styles),this._processItems(z.items,U),$()},H.reject)};this._reader=this._textContentSource.getReader(),$()}else if(this._textContentSource){const{items:$,styles:z}=this._textContentSource;this._processItems($,z),H.resolve()}else throw new Error('No "textContentSource" parameter specified.');H.promise.then(()=>{U=null,F(this)},this._capability.reject)}}t.TextLayerRenderTask=M;function I(B){!B.textContentSource&&(B.textContent||B.textContentStream)&&((0,u.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),B.textContentSource=B.textContent||B.textContentStream);const{container:H,viewport:U}=B,$=getComputedStyle(H),z=$.getPropertyValue("visibility"),j=parseFloat($.getPropertyValue("--scale-factor"));z==="visible"&&(!j||Math.abs(j-U.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const J=new M(B);return J._render(),J}function N({container:B,viewport:H,textDivs:U,textDivProperties:$,isOffscreenCanvasSupported:z,mustRotate:j=!0,mustRescale:J=!0}){if(j&&(0,u.setLayerDimensions)(B,{rotation:H.rotation}),J){const ie=w(0,z),fe={prevFontSize:null,prevFontFamily:null,div:null,scale:H.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:ie};for(const de of U)fe.properties=$.get(de),fe.div=de,_(fe)}}}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var o=n(1),u=n(4),d=n(28),f=n(33),g=n(6),v=n(34);class w{#e;#t=!1;#n=null;#i=this.pointerup.bind(this);#a=this.pointerdown.bind(this);#o=new Map;#s=!1;#l=!1;#c=!1;#r;static _initialized=!1;constructor({uiManager:R,pageIndex:_,div:F,accessibilityManager:M,annotationLayer:I,viewport:N,l10n:B}){const H=[d.FreeTextEditor,f.InkEditor,v.StampEditor];if(!w._initialized){w._initialized=!0;for(const U of H)U.initialize(B)}R.registerEditorTypes(H),this.#r=R,this.pageIndex=_,this.div=F,this.#e=M,this.#n=I,this.viewport=N,this.#r.addLayer(this)}get isEmpty(){return this.#o.size===0}updateToolbar(R){this.#r.updateToolbar(R)}updateMode(R=this.#r.getMode()){this.#p(),R===o.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),R!==o.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",R===o.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",R===o.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",R===o.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(R){if(!R&&this.#r.getMode()!==o.AnnotationEditorType.INK)return;if(!R){for(const F of this.#o.values())if(F.isEmpty()){F.setInBackground();return}}this.#d({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(R){this.#r.setEditingState(R)}addCommands(R){this.#r.addCommands(R)}enable(){this.div.style.pointerEvents="auto";const R=new Set;for(const F of this.#o.values())F.enableEditing(),F.annotationElementId&&R.add(F.annotationElementId);if(!this.#n)return;const _=this.#n.getEditableAnnotations();for(const F of _){if(F.hide(),this.#r.isDeletedAnnotationElement(F.data.id)||R.has(F.data.id))continue;const M=this.deserialize(F);M&&(this.addOrRebuild(M),M.enableEditing())}}disable(){this.#c=!0,this.div.style.pointerEvents="none";const R=new Set;for(const _ of this.#o.values()){if(_.disableEditing(),!_.annotationElementId||_.serialize()!==null){R.add(_.annotationElementId);continue}this.getEditableAnnotation(_.annotationElementId)?.show(),_.remove()}if(this.#n){const _=this.#n.getEditableAnnotations();for(const F of _){const{id:M}=F.data;R.has(M)||this.#r.isDeletedAnnotationElement(M)||F.show()}}this.#p(),this.isEmpty&&(this.div.hidden=!0),this.#c=!1}getEditableAnnotation(R){return this.#n?.getEditableAnnotation(R)||null}setActiveEditor(R){this.#r.getActive()!==R&&this.#r.setActiveEditor(R)}enableClick(){this.div.addEventListener("pointerdown",this.#a),this.div.addEventListener("pointerup",this.#i)}disableClick(){this.div.removeEventListener("pointerdown",this.#a),this.div.removeEventListener("pointerup",this.#i)}attach(R){this.#o.set(R.id,R);const{annotationElementId:_}=R;_&&this.#r.isDeletedAnnotationElement(_)&&this.#r.removeDeletedAnnotationElement(R)}detach(R){this.#o.delete(R.id),this.#e?.removePointerInTextLayer(R.contentDiv),!this.#c&&R.annotationElementId&&this.#r.addDeletedAnnotationElement(R)}remove(R){this.detach(R),this.#r.removeEditor(R),R.div.contains(document.activeElement)&&setTimeout(()=>{this.#r.focusMainContainer()},0),R.div.remove(),R.isAttachedToDOM=!1,this.#l||this.addInkEditorIfNeeded(!1)}changeParent(R){R.parent!==this&&(R.annotationElementId&&(this.#r.addDeletedAnnotationElement(R.annotationElementId),u.AnnotationEditor.deleteAnnotationElement(R),R.annotationElementId=null),this.attach(R),R.parent?.detach(R),R.setParent(this),R.div&&R.isAttachedToDOM&&(R.div.remove(),this.div.append(R.div)))}add(R){if(this.changeParent(R),this.#r.addEditor(R),this.attach(R),!R.isAttachedToDOM){const _=R.render();this.div.append(_),R.isAttachedToDOM=!0}R.fixAndSetPosition(),R.onceAdded(),this.#r.addToAnnotationStorage(R)}moveEditorInDOM(R){if(!R.isAttachedToDOM)return;const{activeElement:_}=document;R.div.contains(_)&&(R._focusEventsAllowed=!1,setTimeout(()=>{R.div.contains(document.activeElement)?R._focusEventsAllowed=!0:(R.div.addEventListener("focusin",()=>{R._focusEventsAllowed=!0},{once:!0}),_.focus())},0)),R._structTreeParentId=this.#e?.moveElementInDOM(this.div,R.div,R.contentDiv,!0)}addOrRebuild(R){R.needsToBeRebuilt()?R.rebuild():this.add(R)}addUndoableEditor(R){const _=()=>R._uiManager.rebuild(R),F=()=>{R.remove()};this.addCommands({cmd:_,undo:F,mustExec:!1})}getNextId(){return this.#r.getId()}#f(R){switch(this.#r.getMode()){case o.AnnotationEditorType.FREETEXT:return new d.FreeTextEditor(R);case o.AnnotationEditorType.INK:return new f.InkEditor(R);case o.AnnotationEditorType.STAMP:return new v.StampEditor(R)}return null}pasteEditor(R,_){this.#r.updateToolbar(R),this.#r.updateMode(R);const{offsetX:F,offsetY:M}=this.#h(),I=this.getNextId(),N=this.#f({parent:this,id:I,x:F,y:M,uiManager:this.#r,isCentered:!0,..._});N&&this.add(N)}deserialize(R){switch(R.annotationType??R.annotationEditorType){case o.AnnotationEditorType.FREETEXT:return d.FreeTextEditor.deserialize(R,this,this.#r);case o.AnnotationEditorType.INK:return f.InkEditor.deserialize(R,this,this.#r);case o.AnnotationEditorType.STAMP:return v.StampEditor.deserialize(R,this,this.#r)}return null}#d(R,_){const F=this.getNextId(),M=this.#f({parent:this,id:F,x:R.offsetX,y:R.offsetY,uiManager:this.#r,isCentered:_});return M&&this.add(M),M}#h(){const{x:R,y:_,width:F,height:M}=this.div.getBoundingClientRect(),I=Math.max(0,R),N=Math.max(0,_),B=Math.min(window.innerWidth,R+F),H=Math.min(window.innerHeight,_+M),U=(I+B)/2-R,$=(N+H)/2-_,[z,j]=this.viewport.rotation%180===0?[U,$]:[$,U];return{offsetX:z,offsetY:j}}addNewEditor(){this.#d(this.#h(),!0)}setSelected(R){this.#r.setSelected(R)}toggleSelected(R){this.#r.toggleSelected(R)}isSelected(R){return this.#r.isSelected(R)}unselect(R){this.#r.unselect(R)}pointerup(R){const{isMac:_}=o.FeatureTest.platform;if(!(R.button!==0||R.ctrlKey&&_)&&R.target===this.div&&this.#s){if(this.#s=!1,!this.#t){this.#t=!0;return}if(this.#r.getMode()===o.AnnotationEditorType.STAMP){this.#r.unselectAll();return}this.#d(R,!1)}}pointerdown(R){if(this.#s){this.#s=!1;return}const{isMac:_}=o.FeatureTest.platform;if(R.button!==0||R.ctrlKey&&_||R.target!==this.div)return;this.#s=!0;const F=this.#r.getActive();this.#t=!F||F.isEmpty()}findNewParent(R,_,F){const M=this.#r.findParent(_,F);return M===null||M===this?!1:(M.changeParent(R),!0)}destroy(){this.#r.getActive()?.parent===this&&(this.#r.commitOrRemove(),this.#r.setActiveEditor(null));for(const R of this.#o.values())this.#e?.removePointerInTextLayer(R.contentDiv),R.setParent(null),R.isAttachedToDOM=!1,R.div.remove();this.div=null,this.#o.clear(),this.#r.removeLayer(this)}#p(){this.#l=!0;for(const R of this.#o.values())R.isEmpty()&&R.remove();this.#l=!1}render({viewport:R}){this.viewport=R,(0,g.setLayerDimensions)(this.div,R);for(const _ of this.#r.getEditors(this.pageIndex))this.add(_);this.updateMode()}update({viewport:R}){this.#r.commitOrRemove(),this.viewport=R,(0,g.setLayerDimensions)(this.div,{rotation:R.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:R,pageHeight:_}=this.viewport.rawDims;return[R,_]}}t.AnnotationEditorLayer=w}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var o=n(1),u=n(5),d=n(4),f=n(29);class g extends d.AnnotationEditor{#e=this.editorDivBlur.bind(this);#t=this.editorDivFocus.bind(this);#n=this.editorDivInput.bind(this);#i=this.editorDivKeydown.bind(this);#a;#o="";#s=`${this.id}-editor`;#l;#c=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const w=g.prototype,S=F=>F.isEmpty(),R=u.AnnotationEditorUIManager.TRANSLATE_SMALL,_=u.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,o.shadow)(this,"_keyboardManager",new u.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],w.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],w.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],w._translateEmpty,{args:[-R,0],checker:S}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],w._translateEmpty,{args:[-_,0],checker:S}],[["ArrowRight","mac+ArrowRight"],w._translateEmpty,{args:[R,0],checker:S}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],w._translateEmpty,{args:[_,0],checker:S}],[["ArrowUp","mac+ArrowUp"],w._translateEmpty,{args:[0,-R],checker:S}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],w._translateEmpty,{args:[0,-_],checker:S}],[["ArrowDown","mac+ArrowDown"],w._translateEmpty,{args:[0,R],checker:S}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],w._translateEmpty,{args:[0,_],checker:S}]]))}static _type="freetext";constructor(w){super({...w,name:"freeTextEditor"}),this.#a=w.color||g._defaultColor||d.AnnotationEditor._defaultLineColor,this.#l=w.fontSize||g._defaultFontSize}static initialize(w){d.AnnotationEditor.initialize(w,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const S=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(S.getPropertyValue("--freetext-padding"))}static updateDefaultParams(w,S){switch(w){case o.AnnotationEditorParamsType.FREETEXT_SIZE:g._defaultFontSize=S;break;case o.AnnotationEditorParamsType.FREETEXT_COLOR:g._defaultColor=S;break}}updateParams(w,S){switch(w){case o.AnnotationEditorParamsType.FREETEXT_SIZE:this.#r(S);break;case o.AnnotationEditorParamsType.FREETEXT_COLOR:this.#f(S);break}}static get defaultPropertiesToUpdate(){return[[o.AnnotationEditorParamsType.FREETEXT_SIZE,g._defaultFontSize],[o.AnnotationEditorParamsType.FREETEXT_COLOR,g._defaultColor||d.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[o.AnnotationEditorParamsType.FREETEXT_SIZE,this.#l],[o.AnnotationEditorParamsType.FREETEXT_COLOR,this.#a]]}#r(w){const S=_=>{this.editorDiv.style.fontSize=`calc(${_}px * var(--scale-factor))`,this.translate(0,-(_-this.#l)*this.parentScale),this.#l=_,this.#h()},R=this.#l;this.addCommands({cmd:()=>{S(w)},undo:()=>{S(R)},mustExec:!0,type:o.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#f(w){const S=this.#a;this.addCommands({cmd:()=>{this.#a=this.editorDiv.style.color=w},undo:()=>{this.#a=this.editorDiv.style.color=S},mustExec:!0,type:o.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(w,S){this._uiManager.translateSelectedEditors(w,S,!0)}getInitialTranslation(){const w=this.parentScale;return[-g._internalPadding*w,-(g._internalPadding+this.#l)*w]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(o.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#i),this.editorDiv.addEventListener("focus",this.#t),this.editorDiv.addEventListener("blur",this.#e),this.editorDiv.addEventListener("input",this.#n))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#s),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#i),this.editorDiv.removeEventListener("focus",this.#t),this.editorDiv.removeEventListener("blur",this.#e),this.editorDiv.removeEventListener("input",this.#n),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(w){this._focusEventsAllowed&&(super.focusin(w),w.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){if(this.width){this.#m();return}this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}#d(){const w=this.editorDiv.getElementsByTagName("div");if(w.length===0)return this.editorDiv.innerText;const S=[];for(const R of w)S.push(R.innerText.replace(/\r\n?|\n/,""));return S.join(`
`)}#h(){const[w,S]=this.parentDimensions;let R;if(this.isAttachedToDOM)R=this.div.getBoundingClientRect();else{const{currentLayer:_,div:F}=this,M=F.style.display;F.style.display="hidden",_.div.append(this.div),R=F.getBoundingClientRect(),F.remove(),F.style.display=M}this.rotation%180===this.parentRotation%180?(this.width=R.width/w,this.height=R.height/S):(this.width=R.height/w,this.height=R.width/S),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const w=this.#o,S=this.#o=this.#d().trimEnd();if(w===S)return;const R=_=>{if(this.#o=_,!_){this.remove();return}this.#p(),this._uiManager.rebuild(this),this.#h()};this.addCommands({cmd:()=>{R(S)},undo:()=>{R(w)},mustExec:!1}),this.#h()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(w){this.enterInEditMode()}keydown(w){w.target===this.div&&w.key==="Enter"&&(this.enterInEditMode(),w.preventDefault())}editorDivKeydown(w){g._keyboardManager.exec(this,w)}editorDivFocus(w){this.isEditing=!0}editorDivBlur(w){this.isEditing=!1}editorDivInput(w){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let w,S;this.width&&(w=this.x,S=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#s),this.enableEditing(),d.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(_=>this.editorDiv?.setAttribute("aria-label",_)),d.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(_=>this.editorDiv?.setAttribute("default-content",_)),this.editorDiv.contentEditable=!0;const{style:R}=this.editorDiv;if(R.fontSize=`calc(${this.#l}px * var(--scale-factor))`,R.color=this.#a,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,u.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[_,F]=this.parentDimensions;if(this.annotationElementId){const{position:M}=this.#c;let[I,N]=this.getInitialTranslation();[I,N]=this.pageTranslationToScreen(I,N);const[B,H]=this.pageDimensions,[U,$]=this.pageTranslation;let z,j;switch(this.rotation){case 0:z=w+(M[0]-U)/B,j=S+this.height-(M[1]-$)/H;break;case 90:z=w+(M[0]-U)/B,j=S-(M[1]-$)/H,[I,N]=[N,-I];break;case 180:z=w-this.width+(M[0]-U)/B,j=S-(M[1]-$)/H,[I,N]=[-I,-N];break;case 270:z=w+(M[0]-U-this.height*H)/B,j=S+(M[1]-$-this.width*B)/H,[I,N]=[-N,I];break}this.setAt(z*_,j*F,I,N)}else this.setAt(w*_,S*F,this.width*_,this.height*F);this.#p(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#p(){if(this.editorDiv.replaceChildren(),!!this.#o)for(const w of this.#o.split(`
`)){const S=document.createElement("div");S.append(w?document.createTextNode(w):document.createElement("br")),this.editorDiv.append(S)}}get contentDiv(){return this.editorDiv}static deserialize(w,S,R){let _=null;if(w instanceof f.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:M,fontColor:I},rect:N,rotation:B,id:H},textContent:U,textPosition:$,parent:{page:{pageNumber:z}}}=w;if(!U||U.length===0)return null;_=w={annotationType:o.AnnotationEditorType.FREETEXT,color:Array.from(I),fontSize:M,value:U.join(`
`),position:$,pageIndex:z-1,rect:N,rotation:B,id:H,deleted:!1}}const F=super.deserialize(w,S,R);return F.#l=w.fontSize,F.#a=o.Util.makeHexColor(...w.color),F.#o=w.value,F.annotationElementId=w.id||null,F.#c=_,F}serialize(w=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const S=g._internalPadding*this.parentScale,R=this.getRect(S,S),_=d.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#a),F={annotationType:o.AnnotationEditorType.FREETEXT,color:_,fontSize:this.#l,value:this.#o,pageIndex:this.pageIndex,rect:R,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return w?F:this.annotationElementId&&!this.#v(F)?null:(F.id=this.annotationElementId,F)}#v(w){const{value:S,fontSize:R,color:_,rect:F,pageIndex:M}=this.#c;return w.value!==S||w.fontSize!==R||w.rect.some((I,N)=>Math.abs(I-F[N])>=1)||w.color.some((I,N)=>I!==_[N])||w.pageIndex!==M}#m(w=!1){if(!this.annotationElementId)return;if(this.#h(),!w&&(this.width===0||this.height===0)){setTimeout(()=>this.#m(!0),0);return}const S=g._internalPadding*this.parentScale;this.#c.rect=this.getRect(S,S)}}t.FreeTextEditor=g}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StampAnnotationElement=t.InkAnnotationElement=t.FreeTextAnnotationElement=t.AnnotationLayer=void 0;var o=n(1),u=n(6),d=n(3),f=n(30),g=n(31),v=n(32);const w=1e3,S=9,R=new WeakSet;function _(pe){return{width:pe[2]-pe[0],height:pe[3]-pe[1]}}class F{static create(X){switch(X.data.annotationType){case o.AnnotationType.LINK:return new I(X);case o.AnnotationType.TEXT:return new N(X);case o.AnnotationType.WIDGET:switch(X.data.fieldType){case"Tx":return new H(X);case"Btn":return X.data.radioButton?new z(X):X.data.checkBox?new $(X):new j(X);case"Ch":return new J(X);case"Sig":return new U(X)}return new B(X);case o.AnnotationType.POPUP:return new ie(X);case o.AnnotationType.FREETEXT:return new fe(X);case o.AnnotationType.LINE:return new de(X);case o.AnnotationType.SQUARE:return new Ce(X);case o.AnnotationType.CIRCLE:return new be(X);case o.AnnotationType.POLYLINE:return new xe(X);case o.AnnotationType.CARET:return new ae(X);case o.AnnotationType.INK:return new oe(X);case o.AnnotationType.POLYGON:return new Ee(X);case o.AnnotationType.HIGHLIGHT:return new ee(X);case o.AnnotationType.UNDERLINE:return new Z(X);case o.AnnotationType.SQUIGGLY:return new Q(X);case o.AnnotationType.STRIKEOUT:return new K(X);case o.AnnotationType.STAMP:return new ne(X);case o.AnnotationType.FILEATTACHMENT:return new ue(X);default:return new M(X)}}}class M{#e=!1;constructor(X,{isRenderable:le=!1,ignoreBorder:he=!1,createQuadrilaterals:ce=!1}={}){this.isRenderable=le,this.data=X.data,this.layer=X.layer,this.linkService=X.linkService,this.downloadManager=X.downloadManager,this.imageResourcesPath=X.imageResourcesPath,this.renderForms=X.renderForms,this.svgFactory=X.svgFactory,this.annotationStorage=X.annotationStorage,this.enableScripting=X.enableScripting,this.hasJSActions=X.hasJSActions,this._fieldObjects=X.fieldObjects,this.parent=X.parent,le&&(this.container=this._createContainer(he)),ce&&this._createQuadrilaterals()}static _hasPopupData({titleObj:X,contentsObj:le,richText:he}){return!!(X?.str||le?.str||he?.str)}get hasPopupData(){return M._hasPopupData(this.data)}_createContainer(X){const{data:le,parent:{page:he,viewport:ce}}=this,me=document.createElement("section");me.setAttribute("data-annotation-id",le.id),this instanceof B||(me.tabIndex=w),me.style.zIndex=this.parent.zIndex++,this.data.popupRef&&me.setAttribute("aria-haspopup","dialog"),le.noRotate&&me.classList.add("norotate");const{pageWidth:we,pageHeight:Se,pageX:_e,pageY:We}=ce.rawDims;if(!le.rect||this instanceof ie){const{rotation:$e}=le;return!le.hasOwnCanvas&&$e!==0&&this.setRotation($e,me),me}const{width:Fe,height:Le}=_(le.rect),De=o.Util.normalizeRect([le.rect[0],he.view[3]-le.rect[1]+he.view[1],le.rect[2],he.view[3]-le.rect[3]+he.view[1]]);if(!X&&le.borderStyle.width>0){me.style.borderWidth=`${le.borderStyle.width}px`;const $e=le.borderStyle.horizontalCornerRadius,Ze=le.borderStyle.verticalCornerRadius;if($e>0||Ze>0){const nt=`calc(${$e}px * var(--scale-factor)) / calc(${Ze}px * var(--scale-factor))`;me.style.borderRadius=nt}else if(this instanceof z){const nt=`calc(${Fe}px * var(--scale-factor)) / calc(${Le}px * var(--scale-factor))`;me.style.borderRadius=nt}switch(le.borderStyle.style){case o.AnnotationBorderStyleType.SOLID:me.style.borderStyle="solid";break;case o.AnnotationBorderStyleType.DASHED:me.style.borderStyle="dashed";break;case o.AnnotationBorderStyleType.BEVELED:(0,o.warn)("Unimplemented border style: beveled");break;case o.AnnotationBorderStyleType.INSET:(0,o.warn)("Unimplemented border style: inset");break;case o.AnnotationBorderStyleType.UNDERLINE:me.style.borderBottomStyle="solid";break}const Ye=le.borderColor||null;Ye?(this.#e=!0,me.style.borderColor=o.Util.makeHexColor(Ye[0]|0,Ye[1]|0,Ye[2]|0)):me.style.borderWidth=0}me.style.left=`${100*(De[0]-_e)/we}%`,me.style.top=`${100*(De[1]-We)/Se}%`;const{rotation:Be}=le;return le.hasOwnCanvas||Be===0?(me.style.width=`${100*Fe/we}%`,me.style.height=`${100*Le/Se}%`):this.setRotation(Be,me),me}setRotation(X,le=this.container){if(!this.data.rect)return;const{pageWidth:he,pageHeight:ce}=this.parent.viewport.rawDims,{width:me,height:we}=_(this.data.rect);let Se,_e;X%180===0?(Se=100*me/he,_e=100*we/ce):(Se=100*we/he,_e=100*me/ce),le.style.width=`${Se}%`,le.style.height=`${_e}%`,le.setAttribute("data-main-rotation",(360-X)%360)}get _commonActions(){const X=(le,he,ce)=>{const me=ce.detail[le],we=me[0],Se=me.slice(1);ce.target.style[he]=f.ColorConverters[`${we}_HTML`](Se),this.annotationStorage.setValue(this.data.id,{[he]:f.ColorConverters[`${we}_rgb`](Se)})};return(0,o.shadow)(this,"_commonActions",{display:le=>{const{display:he}=le.detail,ce=he%2===1;this.container.style.visibility=ce?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:ce,noPrint:he===1||he===2})},print:le=>{this.annotationStorage.setValue(this.data.id,{noPrint:!le.detail.print})},hidden:le=>{const{hidden:he}=le.detail;this.container.style.visibility=he?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:he,noView:he})},focus:le=>{setTimeout(()=>le.target.focus({preventScroll:!1}),0)},userName:le=>{le.target.title=le.detail.userName},readonly:le=>{le.target.disabled=le.detail.readonly},required:le=>{this._setRequired(le.target,le.detail.required)},bgColor:le=>{X("bgColor","backgroundColor",le)},fillColor:le=>{X("fillColor","backgroundColor",le)},fgColor:le=>{X("fgColor","color",le)},textColor:le=>{X("textColor","color",le)},borderColor:le=>{X("borderColor","borderColor",le)},strokeColor:le=>{X("strokeColor","borderColor",le)},rotation:le=>{const he=le.detail.rotation;this.setRotation(he),this.annotationStorage.setValue(this.data.id,{rotation:he})}})}_dispatchEventFromSandbox(X,le){const he=this._commonActions;for(const ce of Object.keys(le.detail))(X[ce]||he[ce])?.(le)}_setDefaultPropertiesFromJS(X){if(!this.enableScripting)return;const le=this.annotationStorage.getRawValue(this.data.id);if(!le)return;const he=this._commonActions;for(const[ce,me]of Object.entries(le)){const we=he[ce];if(we){const Se={detail:{[ce]:me},target:X};we(Se),delete le[ce]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:X}=this.data;if(!X)return;const[le,he,ce,me]=this.data.rect;if(X.length===1){const[,{x:Ze,y:Ye},{x:nt,y:it}]=X[0];if(ce===Ze&&me===Ye&&le===nt&&he===it)return}const{style:we}=this.container;let Se;if(this.#e){const{borderColor:Ze,borderWidth:Ye}=we;we.borderWidth=0,Se=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Ze}" stroke-width="${Ye}">`],this.container.classList.add("hasBorder")}const _e=ce-le,We=me-he,{svgFactory:Fe}=this,Le=Fe.createElement("svg");Le.classList.add("quadrilateralsContainer"),Le.setAttribute("width",0),Le.setAttribute("height",0);const De=Fe.createElement("defs");Le.append(De);const Be=Fe.createElement("clipPath"),$e=`clippath_${this.data.id}`;Be.setAttribute("id",$e),Be.setAttribute("clipPathUnits","objectBoundingBox"),De.append(Be);for(const[,{x:Ze,y:Ye},{x:nt,y:it}]of X){const ot=Fe.createElement("rect"),vt=(nt-le)/_e,nn=(me-Ye)/We,en=(Ze-nt)/_e,Dt=(Ye-it)/We;ot.setAttribute("x",vt),ot.setAttribute("y",nn),ot.setAttribute("width",en),ot.setAttribute("height",Dt),Be.append(ot),Se?.push(`<rect vector-effect="non-scaling-stroke" x="${vt}" y="${nn}" width="${en}" height="${Dt}"/>`)}this.#e&&(Se.push("</g></svg>')"),we.backgroundImage=Se.join("")),this.container.append(Le),this.container.style.clipPath=`url(#${$e})`}_createPopup(){const{container:X,data:le}=this;X.setAttribute("aria-haspopup","dialog");const he=new ie({data:{color:le.color,titleObj:le.titleObj,modificationDate:le.modificationDate,contentsObj:le.contentsObj,richText:le.richText,parentRect:le.rect,borderStyle:0,id:`popup_${le.id}`,rotation:le.rotation},parent:this.parent,elements:[this]});this.parent.div.append(he.render())}render(){(0,o.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(X,le=null){const he=[];if(this._fieldObjects){const ce=this._fieldObjects[X];if(ce)for(const{page:me,id:we,exportValues:Se}of ce){if(me===-1||we===le)continue;const _e=typeof Se=="string"?Se:null,We=document.querySelector(`[data-element-id="${we}"]`);if(We&&!R.has(We)){(0,o.warn)(`_getElementsByName - element not allowed: ${we}`);continue}he.push({id:we,exportValue:_e,domElement:We})}return he}for(const ce of document.getElementsByName(X)){const{exportValue:me}=ce,we=ce.getAttribute("data-element-id");we!==le&&R.has(ce)&&he.push({id:we,exportValue:me,domElement:ce})}return he}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const X=this.getElementsToTriggerPopup();if(Array.isArray(X))for(const le of X)le.classList.add("highlightArea");else X.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:X,data:{id:le}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:X,editId:le})})}}class I extends M{constructor(X,le=null){super(X,{isRenderable:!0,ignoreBorder:!!le?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=X.data.isTooltipOnly}render(){const{data:X,linkService:le}=this,he=document.createElement("a");he.setAttribute("data-element-id",X.id);let ce=!1;return X.url?(le.addLinkAttributes(he,X.url,X.newWindow),ce=!0):X.action?(this._bindNamedAction(he,X.action),ce=!0):X.attachment?(this._bindAttachment(he,X.attachment),ce=!0):X.setOCGState?(this.#t(he,X.setOCGState),ce=!0):X.dest?(this._bindLink(he,X.dest),ce=!0):(X.actions&&(X.actions.Action||X.actions["Mouse Up"]||X.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(he,X),ce=!0),X.resetForm?(this._bindResetFormAction(he,X.resetForm),ce=!0):this.isTooltipOnly&&!ce&&(this._bindLink(he,""),ce=!0)),this.container.classList.add("linkAnnotation"),ce&&this.container.append(he),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(X,le){X.href=this.linkService.getDestinationHash(le),X.onclick=()=>(le&&this.linkService.goToDestination(le),!1),(le||le==="")&&this.#e()}_bindNamedAction(X,le){X.href=this.linkService.getAnchorUrl(""),X.onclick=()=>(this.linkService.executeNamedAction(le),!1),this.#e()}_bindAttachment(X,le){X.href=this.linkService.getAnchorUrl(""),X.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,le.content,le.filename),!1),this.#e()}#t(X,le){X.href=this.linkService.getAnchorUrl(""),X.onclick=()=>(this.linkService.executeSetOCGState(le),!1),this.#e()}_bindJSAction(X,le){X.href=this.linkService.getAnchorUrl("");const he=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const ce of Object.keys(le.actions)){const me=he.get(ce);me&&(X[me]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:le.id,name:ce}}),!1))}X.onclick||(X.onclick=()=>!1),this.#e()}_bindResetFormAction(X,le){const he=X.onclick;if(he||(X.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){(0,o.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),he||(X.onclick=()=>!1);return}X.onclick=()=>{he?.();const{fields:ce,refs:me,include:we}=le,Se=[];if(ce.length!==0||me.length!==0){const Fe=new Set(me);for(const Le of ce){const De=this._fieldObjects[Le]||[];for(const{id:Be}of De)Fe.add(Be)}for(const Le of Object.values(this._fieldObjects))for(const De of Le)Fe.has(De.id)===we&&Se.push(De)}else for(const Fe of Object.values(this._fieldObjects))Se.push(...Fe);const _e=this.annotationStorage,We=[];for(const Fe of Se){const{id:Le}=Fe;switch(We.push(Le),Fe.type){case"text":{const Be=Fe.defaultValue||"";_e.setValue(Le,{value:Be});break}case"checkbox":case"radiobutton":{const Be=Fe.defaultValue===Fe.exportValues;_e.setValue(Le,{value:Be});break}case"combobox":case"listbox":{const Be=Fe.defaultValue||"";_e.setValue(Le,{value:Be});break}default:continue}const De=document.querySelector(`[data-element-id="${Le}"]`);if(De){if(!R.has(De)){(0,o.warn)(`_bindResetFormAction - element not allowed: ${Le}`);continue}}else continue;De.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:We,name:"ResetForm"}}),!1}}}class N extends M{constructor(X){super(X,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const X=document.createElement("img");return X.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",X.alt="[{{type}} Annotation]",X.dataset.l10nId="text_annotation_type",X.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(X),this.container}}class B extends M{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(X){this.data.hasOwnCanvas&&(X.previousSibling?.nodeName==="CANVAS"&&(X.previousSibling.hidden=!0),X.hidden=!1)}_getKeyModifier(X){const{isWin:le,isMac:he}=o.FeatureTest.platform;return le&&X.ctrlKey||he&&X.metaKey}_setEventListener(X,le,he,ce,me){he.includes("mouse")?X.addEventListener(he,we=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ce,value:me(we),shift:we.shiftKey,modifier:this._getKeyModifier(we)}})}):X.addEventListener(he,we=>{if(he==="blur"){if(!le.focused||!we.relatedTarget)return;le.focused=!1}else if(he==="focus"){if(le.focused)return;le.focused=!0}me&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:ce,value:me(we)}})})}_setEventListeners(X,le,he,ce){for(const[me,we]of he)(we==="Action"||this.data.actions?.[we])&&((we==="Focus"||we==="Blur")&&(le||={focused:!1}),this._setEventListener(X,le,me,we,ce),we==="Focus"&&!this.data.actions?.Blur?this._setEventListener(X,le,"blur","Blur",null):we==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(X,le,"focus","Focus",null))}_setBackgroundColor(X){const le=this.data.backgroundColor||null;X.style.backgroundColor=le===null?"transparent":o.Util.makeHexColor(le[0],le[1],le[2])}_setTextStyle(X){const le=["left","center","right"],{fontColor:he}=this.data.defaultAppearanceData,ce=this.data.defaultAppearanceData.fontSize||S,me=X.style;let we;const Se=2,_e=We=>Math.round(10*We)/10;if(this.data.multiLine){const We=Math.abs(this.data.rect[3]-this.data.rect[1]-Se),Fe=Math.round(We/(o.LINE_FACTOR*ce))||1,Le=We/Fe;we=Math.min(ce,_e(Le/o.LINE_FACTOR))}else{const We=Math.abs(this.data.rect[3]-this.data.rect[1]-Se);we=Math.min(ce,_e(We/o.LINE_FACTOR))}me.fontSize=`calc(${we}px * var(--scale-factor))`,me.color=o.Util.makeHexColor(he[0],he[1],he[2]),this.data.textAlignment!==null&&(me.textAlign=le[this.data.textAlignment])}_setRequired(X,le){le?X.setAttribute("required",!0):X.removeAttribute("required"),X.setAttribute("aria-required",le)}}class H extends B{constructor(X){const le=X.renderForms||!X.data.hasAppearance&&!!X.data.fieldValue;super(X,{isRenderable:le})}setPropertyOnSiblings(X,le,he,ce){const me=this.annotationStorage;for(const we of this._getElementsByName(X.name,X.id))we.domElement&&(we.domElement[le]=he),me.setValue(we.id,{[ce]:he})}render(){const X=this.annotationStorage,le=this.data.id;this.container.classList.add("textWidgetAnnotation");let he=null;if(this.renderForms){const ce=X.getValue(le,{value:this.data.fieldValue});let me=ce.value||"";const we=X.getValue(le,{charLimit:this.data.maxLen}).charLimit;we&&me.length>we&&(me=me.slice(0,we));let Se=ce.formattedValue||this.data.textContent?.join(`
`)||null;Se&&this.data.comb&&(Se=Se.replaceAll(/\s+/g,""));const _e={userValue:me,formattedValue:Se,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(he=document.createElement("textarea"),he.textContent=Se??me,this.data.doNotScroll&&(he.style.overflowY="hidden")):(he=document.createElement("input"),he.type="text",he.setAttribute("value",Se??me),this.data.doNotScroll&&(he.style.overflowX="hidden")),this.data.hasOwnCanvas&&(he.hidden=!0),R.add(he),he.setAttribute("data-element-id",le),he.disabled=this.data.readOnly,he.name=this.data.fieldName,he.tabIndex=w,this._setRequired(he,this.data.required),we&&(he.maxLength=we),he.addEventListener("input",Fe=>{X.setValue(le,{value:Fe.target.value}),this.setPropertyOnSiblings(he,"value",Fe.target.value,"value"),_e.formattedValue=null}),he.addEventListener("resetform",Fe=>{const Le=this.data.defaultFieldValue??"";he.value=_e.userValue=Le,_e.formattedValue=null});let We=Fe=>{const{formattedValue:Le}=_e;Le!=null&&(Fe.target.value=Le),Fe.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){he.addEventListener("focus",Le=>{if(_e.focused)return;const{target:De}=Le;_e.userValue&&(De.value=_e.userValue),_e.lastCommittedValue=De.value,_e.commitKey=1,_e.focused=!0}),he.addEventListener("updatefromsandbox",Le=>{this.showElementAndHideCanvas(Le.target);const De={value(Be){_e.userValue=Be.detail.value??"",X.setValue(le,{value:_e.userValue.toString()}),Be.target.value=_e.userValue},formattedValue(Be){const{formattedValue:$e}=Be.detail;_e.formattedValue=$e,$e!=null&&Be.target!==document.activeElement&&(Be.target.value=$e),X.setValue(le,{formattedValue:$e})},selRange(Be){Be.target.setSelectionRange(...Be.detail.selRange)},charLimit:Be=>{const{charLimit:$e}=Be.detail,{target:Ze}=Be;if($e===0){Ze.removeAttribute("maxLength");return}Ze.setAttribute("maxLength",$e);let Ye=_e.userValue;!Ye||Ye.length<=$e||(Ye=Ye.slice(0,$e),Ze.value=_e.userValue=Ye,X.setValue(le,{value:Ye}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:le,name:"Keystroke",value:Ye,willCommit:!0,commitKey:1,selStart:Ze.selectionStart,selEnd:Ze.selectionEnd}}))}};this._dispatchEventFromSandbox(De,Le)}),he.addEventListener("keydown",Le=>{_e.commitKey=1;let De=-1;if(Le.key==="Escape"?De=0:Le.key==="Enter"&&!this.data.multiLine?De=2:Le.key==="Tab"&&(_e.commitKey=3),De===-1)return;const{value:Be}=Le.target;_e.lastCommittedValue!==Be&&(_e.lastCommittedValue=Be,_e.userValue=Be,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:le,name:"Keystroke",value:Be,willCommit:!0,commitKey:De,selStart:Le.target.selectionStart,selEnd:Le.target.selectionEnd}}))});const Fe=We;We=null,he.addEventListener("blur",Le=>{if(!_e.focused||!Le.relatedTarget)return;_e.focused=!1;const{value:De}=Le.target;_e.userValue=De,_e.lastCommittedValue!==De&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:le,name:"Keystroke",value:De,willCommit:!0,commitKey:_e.commitKey,selStart:Le.target.selectionStart,selEnd:Le.target.selectionEnd}}),Fe(Le)}),this.data.actions?.Keystroke&&he.addEventListener("beforeinput",Le=>{_e.lastCommittedValue=null;const{data:De,target:Be}=Le,{value:$e,selectionStart:Ze,selectionEnd:Ye}=Be;let nt=Ze,it=Ye;switch(Le.inputType){case"deleteWordBackward":{const ot=$e.substring(0,Ze).match(/\w*[^\w]*$/);ot&&(nt-=ot[0].length);break}case"deleteWordForward":{const ot=$e.substring(Ze).match(/^[^\w]*\w*/);ot&&(it+=ot[0].length);break}case"deleteContentBackward":Ze===Ye&&(nt-=1);break;case"deleteContentForward":Ze===Ye&&(it+=1);break}Le.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:le,name:"Keystroke",value:$e,change:De||"",willCommit:!1,selStart:nt,selEnd:it}})}),this._setEventListeners(he,_e,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Le=>Le.target.value)}if(We&&he.addEventListener("blur",We),this.data.comb){const Le=(this.data.rect[2]-this.data.rect[0])/we;he.classList.add("comb"),he.style.letterSpacing=`calc(${Le}px * var(--scale-factor) - 1ch)`}}else he=document.createElement("div"),he.textContent=this.data.fieldValue,he.style.verticalAlign="middle",he.style.display="table-cell";return this._setTextStyle(he),this._setBackgroundColor(he),this._setDefaultPropertiesFromJS(he),this.container.append(he),this.container}}class U extends B{constructor(X){super(X,{isRenderable:!!X.data.hasOwnCanvas})}}class $ extends B{constructor(X){super(X,{isRenderable:X.renderForms})}render(){const X=this.annotationStorage,le=this.data,he=le.id;let ce=X.getValue(he,{value:le.exportValue===le.fieldValue}).value;typeof ce=="string"&&(ce=ce!=="Off",X.setValue(he,{value:ce})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const me=document.createElement("input");return R.add(me),me.setAttribute("data-element-id",he),me.disabled=le.readOnly,this._setRequired(me,this.data.required),me.type="checkbox",me.name=le.fieldName,ce&&me.setAttribute("checked",!0),me.setAttribute("exportValue",le.exportValue),me.tabIndex=w,me.addEventListener("change",we=>{const{name:Se,checked:_e}=we.target;for(const We of this._getElementsByName(Se,he)){const Fe=_e&&We.exportValue===le.exportValue;We.domElement&&(We.domElement.checked=Fe),X.setValue(We.id,{value:Fe})}X.setValue(he,{value:_e})}),me.addEventListener("resetform",we=>{const Se=le.defaultFieldValue||"Off";we.target.checked=Se===le.exportValue}),this.enableScripting&&this.hasJSActions&&(me.addEventListener("updatefromsandbox",we=>{const Se={value(_e){_e.target.checked=_e.detail.value!=="Off",X.setValue(he,{value:_e.target.checked})}};this._dispatchEventFromSandbox(Se,we)}),this._setEventListeners(me,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],we=>we.target.checked)),this._setBackgroundColor(me),this._setDefaultPropertiesFromJS(me),this.container.append(me),this.container}}class z extends B{constructor(X){super(X,{isRenderable:X.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const X=this.annotationStorage,le=this.data,he=le.id;let ce=X.getValue(he,{value:le.fieldValue===le.buttonValue}).value;typeof ce=="string"&&(ce=ce!==le.buttonValue,X.setValue(he,{value:ce}));const me=document.createElement("input");if(R.add(me),me.setAttribute("data-element-id",he),me.disabled=le.readOnly,this._setRequired(me,this.data.required),me.type="radio",me.name=le.fieldName,ce&&me.setAttribute("checked",!0),me.tabIndex=w,me.addEventListener("change",we=>{const{name:Se,checked:_e}=we.target;for(const We of this._getElementsByName(Se,he))X.setValue(We.id,{value:!1});X.setValue(he,{value:_e})}),me.addEventListener("resetform",we=>{const Se=le.defaultFieldValue;we.target.checked=Se!=null&&Se===le.buttonValue}),this.enableScripting&&this.hasJSActions){const we=le.buttonValue;me.addEventListener("updatefromsandbox",Se=>{const _e={value:We=>{const Fe=we===We.detail.value;for(const Le of this._getElementsByName(We.target.name)){const De=Fe&&Le.id===he;Le.domElement&&(Le.domElement.checked=De),X.setValue(Le.id,{value:De})}}};this._dispatchEventFromSandbox(_e,Se)}),this._setEventListeners(me,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Se=>Se.target.checked)}return this._setBackgroundColor(me),this._setDefaultPropertiesFromJS(me),this.container.append(me),this.container}}class j extends I{constructor(X){super(X,{ignoreBorder:X.data.hasAppearance})}render(){const X=super.render();X.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(X.title=this.data.alternativeText);const le=X.lastChild;return this.enableScripting&&this.hasJSActions&&le&&(this._setDefaultPropertiesFromJS(le),le.addEventListener("updatefromsandbox",he=>{this._dispatchEventFromSandbox({},he)})),X}}class J extends B{constructor(X){super(X,{isRenderable:X.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const X=this.annotationStorage,le=this.data.id,he=X.getValue(le,{value:this.data.fieldValue}),ce=document.createElement("select");R.add(ce),ce.setAttribute("data-element-id",le),ce.disabled=this.data.readOnly,this._setRequired(ce,this.data.required),ce.name=this.data.fieldName,ce.tabIndex=w;let me=this.data.combo&&this.data.options.length>0;this.data.combo||(ce.size=this.data.options.length,this.data.multiSelect&&(ce.multiple=!0)),ce.addEventListener("resetform",Fe=>{const Le=this.data.defaultFieldValue;for(const De of ce.options)De.selected=De.value===Le});for(const Fe of this.data.options){const Le=document.createElement("option");Le.textContent=Fe.displayValue,Le.value=Fe.exportValue,he.value.includes(Fe.exportValue)&&(Le.setAttribute("selected",!0),me=!1),ce.append(Le)}let we=null;if(me){const Fe=document.createElement("option");Fe.value=" ",Fe.setAttribute("hidden",!0),Fe.setAttribute("selected",!0),ce.prepend(Fe),we=()=>{Fe.remove(),ce.removeEventListener("input",we),we=null},ce.addEventListener("input",we)}const Se=Fe=>{const Le=Fe?"value":"textContent",{options:De,multiple:Be}=ce;return Be?Array.prototype.filter.call(De,$e=>$e.selected).map($e=>$e[Le]):De.selectedIndex===-1?null:De[De.selectedIndex][Le]};let _e=Se(!1);const We=Fe=>{const Le=Fe.target.options;return Array.prototype.map.call(Le,De=>({displayValue:De.textContent,exportValue:De.value}))};return this.enableScripting&&this.hasJSActions?(ce.addEventListener("updatefromsandbox",Fe=>{const Le={value(De){we?.();const Be=De.detail.value,$e=new Set(Array.isArray(Be)?Be:[Be]);for(const Ze of ce.options)Ze.selected=$e.has(Ze.value);X.setValue(le,{value:Se(!0)}),_e=Se(!1)},multipleSelection(De){ce.multiple=!0},remove(De){const Be=ce.options,$e=De.detail.remove;Be[$e].selected=!1,ce.remove($e),Be.length>0&&Array.prototype.findIndex.call(Be,Ye=>Ye.selected)===-1&&(Be[0].selected=!0),X.setValue(le,{value:Se(!0),items:We(De)}),_e=Se(!1)},clear(De){for(;ce.length!==0;)ce.remove(0);X.setValue(le,{value:null,items:[]}),_e=Se(!1)},insert(De){const{index:Be,displayValue:$e,exportValue:Ze}=De.detail.insert,Ye=ce.children[Be],nt=document.createElement("option");nt.textContent=$e,nt.value=Ze,Ye?Ye.before(nt):ce.append(nt),X.setValue(le,{value:Se(!0),items:We(De)}),_e=Se(!1)},items(De){const{items:Be}=De.detail;for(;ce.length!==0;)ce.remove(0);for(const $e of Be){const{displayValue:Ze,exportValue:Ye}=$e,nt=document.createElement("option");nt.textContent=Ze,nt.value=Ye,ce.append(nt)}ce.options.length>0&&(ce.options[0].selected=!0),X.setValue(le,{value:Se(!0),items:We(De)}),_e=Se(!1)},indices(De){const Be=new Set(De.detail.indices);for(const $e of De.target.options)$e.selected=Be.has($e.index);X.setValue(le,{value:Se(!0)}),_e=Se(!1)},editable(De){De.target.disabled=!De.detail.editable}};this._dispatchEventFromSandbox(Le,Fe)}),ce.addEventListener("input",Fe=>{const Le=Se(!0);X.setValue(le,{value:Le}),Fe.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:le,name:"Keystroke",value:_e,changeEx:Le,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(ce,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Fe=>Fe.target.value)):ce.addEventListener("input",function(Fe){X.setValue(le,{value:Se(!0)})}),this.data.combo&&this._setTextStyle(ce),this._setBackgroundColor(ce),this._setDefaultPropertiesFromJS(ce),this.container.append(ce),this.container}}class ie extends M{constructor(X){const{data:le,elements:he}=X;super(X,{isRenderable:M._hasPopupData(le)}),this.elements=he}render(){this.container.classList.add("popupAnnotation");const X=new se({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),le=[];for(const he of this.elements)he.popup=X,le.push(he.data.id),he.addHighlightArea();return this.container.setAttribute("aria-controls",le.map(he=>`${o.AnnotationPrefix}${he}`).join(",")),this.container}}class se{#e=null;#t=this.#u.bind(this);#n=this.#w.bind(this);#i=this.#E.bind(this);#a=this.#y.bind(this);#o=null;#s=null;#l=null;#c=null;#r=null;#f=null;#d=!1;#h=null;#p=null;#v=null;#m=null;#g=!1;constructor({container:X,color:le,elements:he,titleObj:ce,modificationDate:me,contentsObj:we,richText:Se,parent:_e,rect:We,parentRect:Fe,open:Le}){this.#s=X,this.#m=ce,this.#l=we,this.#v=Se,this.#r=_e,this.#o=le,this.#p=We,this.#f=Fe,this.#c=he;const De=u.PDFDateString.toDateObject(me);De&&(this.#e=_e.l10n.get("annotation_date_string",{date:De.toLocaleDateString(),time:De.toLocaleTimeString()})),this.trigger=he.flatMap(Be=>Be.getElementsToTriggerPopup());for(const Be of this.trigger)Be.addEventListener("click",this.#a),Be.addEventListener("mouseenter",this.#i),Be.addEventListener("mouseleave",this.#n),Be.classList.add("popupTriggerArea");for(const Be of he)Be.container?.addEventListener("keydown",this.#t);this.#s.hidden=!0,Le&&this.#y()}render(){if(this.#h)return;const{page:{view:X},viewport:{rawDims:{pageWidth:le,pageHeight:he,pageX:ce,pageY:me}}}=this.#r,we=this.#h=document.createElement("div");if(we.className="popup",this.#o){const ot=we.style.outlineColor=o.Util.makeHexColor(...this.#o);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?we.style.backgroundColor=`color-mix(in srgb, ${ot} 30%, white)`:we.style.backgroundColor=o.Util.makeHexColor(...this.#o.map(nn=>Math.floor(.7*(255-nn)+nn)))}const Se=document.createElement("span");Se.className="header";const _e=document.createElement("h1");if(Se.append(_e),{dir:_e.dir,str:_e.textContent}=this.#m,we.append(Se),this.#e){const ot=document.createElement("span");ot.classList.add("popupDate"),this.#e.then(vt=>{ot.textContent=vt}),Se.append(ot)}const We=this.#l,Fe=this.#v;if(Fe?.str&&(!We?.str||We.str===Fe.str))v.XfaLayer.render({xfaHtml:Fe.html,intent:"richText",div:we}),we.lastChild.classList.add("richText","popupContent");else{const ot=this._formatContents(We);we.append(ot)}let Le=!!this.#f,De=Le?this.#f:this.#p;for(const ot of this.#c)if(!De||o.Util.intersect(ot.data.rect,De)!==null){De=ot.data.rect,Le=!0;break}const Be=o.Util.normalizeRect([De[0],X[3]-De[1]+X[1],De[2],X[3]-De[3]+X[1]]),Ze=Le?De[2]-De[0]+5:0,Ye=Be[0]+Ze,nt=Be[1],{style:it}=this.#s;it.left=`${100*(Ye-ce)/le}%`,it.top=`${100*(nt-me)/he}%`,this.#s.append(we)}_formatContents({str:X,dir:le}){const he=document.createElement("p");he.classList.add("popupContent"),he.dir=le;const ce=X.split(/(?:\r\n?|\n)/);for(let me=0,we=ce.length;me<we;++me){const Se=ce[me];he.append(document.createTextNode(Se)),me<we-1&&he.append(document.createElement("br"))}return he}#u(X){X.altKey||X.shiftKey||X.ctrlKey||X.metaKey||(X.key==="Enter"||X.key==="Escape"&&this.#d)&&this.#y()}#y(){this.#d=!this.#d,this.#d?(this.#E(),this.#s.addEventListener("click",this.#a),this.#s.addEventListener("keydown",this.#t)):(this.#w(),this.#s.removeEventListener("click",this.#a),this.#s.removeEventListener("keydown",this.#t))}#E(){this.#h||this.render(),this.isVisible?this.#d&&this.#s.classList.add("focused"):(this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#w(){this.#s.classList.remove("focused"),!(this.#d||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#g=this.isVisible,this.#g&&(this.#s.hidden=!0)}maybeShow(){this.#g&&(this.#g=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}}class fe extends M{constructor(X){super(X,{isRenderable:!0,ignoreBorder:!0}),this.textContent=X.data.textContent,this.textPosition=X.data.textPosition,this.annotationEditorType=o.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const X=document.createElement("div");X.classList.add("annotationTextContent"),X.setAttribute("role","comment");for(const le of this.textContent){const he=document.createElement("span");he.textContent=le,X.append(he)}this.container.append(X)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}t.FreeTextAnnotationElement=fe;class de extends M{#e=null;constructor(X){super(X,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const X=this.data,{width:le,height:he}=_(X.rect),ce=this.svgFactory.create(le,he,!0),me=this.#e=this.svgFactory.createElement("svg:line");return me.setAttribute("x1",X.rect[2]-X.lineCoordinates[0]),me.setAttribute("y1",X.rect[3]-X.lineCoordinates[1]),me.setAttribute("x2",X.rect[2]-X.lineCoordinates[2]),me.setAttribute("y2",X.rect[3]-X.lineCoordinates[3]),me.setAttribute("stroke-width",X.borderStyle.width||1),me.setAttribute("stroke","transparent"),me.setAttribute("fill","transparent"),ce.append(me),this.container.append(ce),!X.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Ce extends M{#e=null;constructor(X){super(X,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const X=this.data,{width:le,height:he}=_(X.rect),ce=this.svgFactory.create(le,he,!0),me=X.borderStyle.width,we=this.#e=this.svgFactory.createElement("svg:rect");return we.setAttribute("x",me/2),we.setAttribute("y",me/2),we.setAttribute("width",le-me),we.setAttribute("height",he-me),we.setAttribute("stroke-width",me||1),we.setAttribute("stroke","transparent"),we.setAttribute("fill","transparent"),ce.append(we),this.container.append(ce),!X.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class be extends M{#e=null;constructor(X){super(X,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const X=this.data,{width:le,height:he}=_(X.rect),ce=this.svgFactory.create(le,he,!0),me=X.borderStyle.width,we=this.#e=this.svgFactory.createElement("svg:ellipse");return we.setAttribute("cx",le/2),we.setAttribute("cy",he/2),we.setAttribute("rx",le/2-me/2),we.setAttribute("ry",he/2-me/2),we.setAttribute("stroke-width",me||1),we.setAttribute("stroke","transparent"),we.setAttribute("fill","transparent"),ce.append(we),this.container.append(ce),!X.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class xe extends M{#e=null;constructor(X){super(X,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const X=this.data,{width:le,height:he}=_(X.rect),ce=this.svgFactory.create(le,he,!0);let me=[];for(const Se of X.vertices){const _e=Se.x-X.rect[0],We=X.rect[3]-Se.y;me.push(_e+","+We)}me=me.join(" ");const we=this.#e=this.svgFactory.createElement(this.svgElementName);return we.setAttribute("points",me),we.setAttribute("stroke-width",X.borderStyle.width||1),we.setAttribute("stroke","transparent"),we.setAttribute("fill","transparent"),ce.append(we),this.container.append(ce),!X.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Ee extends xe{constructor(X){super(X),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class ae extends M{constructor(X){super(X,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class oe extends M{#e=[];constructor(X){super(X,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=o.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const X=this.data,{width:le,height:he}=_(X.rect),ce=this.svgFactory.create(le,he,!0);for(const me of X.inkLists){let we=[];for(const _e of me){const We=_e.x-X.rect[0],Fe=X.rect[3]-_e.y;we.push(`${We},${Fe}`)}we=we.join(" ");const Se=this.svgFactory.createElement(this.svgElementName);this.#e.push(Se),Se.setAttribute("points",we),Se.setAttribute("stroke-width",X.borderStyle.width||1),Se.setAttribute("stroke","transparent"),Se.setAttribute("fill","transparent"),!X.popupRef&&this.hasPopupData&&this._createPopup(),ce.append(Se)}return this.container.append(ce),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}t.InkAnnotationElement=oe;class ee extends M{constructor(X){super(X,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Z extends M{constructor(X){super(X,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Q extends M{constructor(X){super(X,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class K extends M{constructor(X){super(X,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class ne extends M{constructor(X){super(X,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}t.StampAnnotationElement=ne;class ue extends M{#e=null;constructor(X){super(X,{isRenderable:!0});const{filename:le,content:he}=this.data.file;this.filename=(0,u.getFilenameFromUrl)(le,!0),this.content=he,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:le,content:he})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:X,data:le}=this;let he;le.hasAppearance||le.fillAlpha===0?he=document.createElement("div"):(he=document.createElement("img"),he.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(le.name)?"paperclip":"pushpin"}.svg`,le.fillAlpha&&le.fillAlpha<1&&(he.style=`filter: opacity(${Math.round(le.fillAlpha*100)}%);`)),he.addEventListener("dblclick",this.#t.bind(this)),this.#e=he;const{isMac:ce}=o.FeatureTest.platform;return X.addEventListener("keydown",me=>{me.key==="Enter"&&(ce?me.metaKey:me.ctrlKey)&&this.#t()}),!le.popupRef&&this.hasPopupData?this._createPopup():he.classList.add("popupTriggerArea"),X.append(he),X}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class ye{#e=null;#t=null;#n=new Map;constructor({div:X,accessibilityManager:le,annotationCanvasMap:he,l10n:ce,page:me,viewport:we}){this.div=X,this.#e=le,this.#t=he,this.l10n=ce,this.page=me,this.viewport=we,this.zIndex=0,this.l10n||=g.NullL10n}#i(X,le){const he=X.firstChild||X;he.id=`${o.AnnotationPrefix}${le}`,this.div.append(X),this.#e?.moveElementInDOM(this.div,X,he,!1)}async render(X){const{annotations:le}=X,he=this.div;(0,u.setLayerDimensions)(he,this.viewport);const ce=new Map,me={data:null,layer:he,linkService:X.linkService,downloadManager:X.downloadManager,imageResourcesPath:X.imageResourcesPath||"",renderForms:X.renderForms!==!1,svgFactory:new u.DOMSVGFactory,annotationStorage:X.annotationStorage||new d.AnnotationStorage,enableScripting:X.enableScripting===!0,hasJSActions:X.hasJSActions,fieldObjects:X.fieldObjects,parent:this,elements:null};for(const we of le){if(we.noHTML)continue;const Se=we.annotationType===o.AnnotationType.POPUP;if(Se){const Fe=ce.get(we.id);if(!Fe)continue;me.elements=Fe}else{const{width:Fe,height:Le}=_(we.rect);if(Fe<=0||Le<=0)continue}me.data=we;const _e=F.create(me);if(!_e.isRenderable)continue;if(!Se&&we.popupRef){const Fe=ce.get(we.popupRef);Fe?Fe.push(_e):ce.set(we.popupRef,[_e])}_e.annotationEditorType>0&&this.#n.set(_e.data.id,_e);const We=_e.render();we.hidden&&(We.style.visibility="hidden"),this.#i(We,we.id)}this.#a(),await this.l10n.translate(he)}update({viewport:X}){const le=this.div;this.viewport=X,(0,u.setLayerDimensions)(le,{rotation:X.rotation}),this.#a(),le.hidden=!1}#a(){if(!this.#t)return;const X=this.div;for(const[le,he]of this.#t){const ce=X.querySelector(`[data-annotation-id="${le}"]`);if(!ce)continue;const{firstChild:me}=ce;me?me.nodeName==="CANVAS"?me.replaceWith(he):me.before(he):ce.append(he)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(X){return this.#n.get(X)}}t.AnnotationLayer=ye}),((e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function n(d){return Math.floor(Math.max(0,Math.min(1,d))*255).toString(16).padStart(2,"0")}function o(d){return Math.max(0,Math.min(255,255*d))}class u{static CMYK_G([f,g,v,w]){return["G",1-Math.min(1,.3*f+.59*v+.11*g+w)]}static G_CMYK([f]){return["CMYK",0,0,0,1-f]}static G_RGB([f]){return["RGB",f,f,f]}static G_rgb([f]){return f=o(f),[f,f,f]}static G_HTML([f]){const g=n(f);return`#${g}${g}${g}`}static RGB_G([f,g,v]){return["G",.3*f+.59*g+.11*v]}static RGB_rgb(f){return f.map(o)}static RGB_HTML(f){return`#${f.map(n).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([f,g,v,w]){return["RGB",1-Math.min(1,f+w),1-Math.min(1,v+w),1-Math.min(1,g+w)]}static CMYK_rgb([f,g,v,w]){return[o(1-Math.min(1,f+w)),o(1-Math.min(1,v+w)),o(1-Math.min(1,g+w))]}static CMYK_HTML(f){const g=this.CMYK_RGB(f).slice(1);return this.RGB_HTML(g)}static RGB_CMYK([f,g,v]){const w=1-f,S=1-g,R=1-v,_=Math.min(w,S,R);return["CMYK",w,S,R,_]}}t.ColorConverters=u}),((e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NullL10n=void 0,t.getL10nFallback=o;const n={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};n.print_progress_percent="{{progress}}%";function o(f,g){switch(f){case"find_match_count":f=`find_match_count[${g.total===1?"one":"other"}]`;break;case"find_match_count_limit":f=`find_match_count_limit[${g.limit===1?"one":"other"}]`;break}return n[f]||""}function u(f,g){return g?f.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(v,w)=>w in g?g[w]:"{{"+w+"}}"):f}const d={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(f,g=null,v=o(f,g)){return u(v,g)},async translate(f){}};t.NullL10n=d}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var o=n(25);class u{static setupStorage(f,g,v,w,S){const R=w.getValue(g,{value:null});switch(v.name){case"textarea":if(R.value!==null&&(f.textContent=R.value),S==="print")break;f.addEventListener("input",_=>{w.setValue(g,{value:_.target.value})});break;case"input":if(v.attributes.type==="radio"||v.attributes.type==="checkbox"){if(R.value===v.attributes.xfaOn?f.setAttribute("checked",!0):R.value===v.attributes.xfaOff&&f.removeAttribute("checked"),S==="print")break;f.addEventListener("change",_=>{w.setValue(g,{value:_.target.checked?_.target.getAttribute("xfaOn"):_.target.getAttribute("xfaOff")})})}else{if(R.value!==null&&f.setAttribute("value",R.value),S==="print")break;f.addEventListener("input",_=>{w.setValue(g,{value:_.target.value})})}break;case"select":if(R.value!==null){f.setAttribute("value",R.value);for(const _ of v.children)_.attributes.value===R.value?_.attributes.selected=!0:_.attributes.hasOwnProperty("selected")&&delete _.attributes.selected}f.addEventListener("input",_=>{const F=_.target.options,M=F.selectedIndex===-1?"":F[F.selectedIndex].value;w.setValue(g,{value:M})});break}}static setAttributes({html:f,element:g,storage:v=null,intent:w,linkService:S}){const{attributes:R}=g,_=f instanceof HTMLAnchorElement;R.type==="radio"&&(R.name=`${R.name}-${w}`);for(const[F,M]of Object.entries(R))if(M!=null)switch(F){case"class":M.length&&f.setAttribute(F,M.join(" "));break;case"dataId":break;case"id":f.setAttribute("data-element-id",M);break;case"style":Object.assign(f.style,M);break;case"textContent":f.textContent=M;break;default:(!_||F!=="href"&&F!=="newWindow")&&f.setAttribute(F,M)}_&&S.addLinkAttributes(f,R.href,R.newWindow),v&&R.dataId&&this.setupStorage(f,R.dataId,g,v)}static render(f){const g=f.annotationStorage,v=f.linkService,w=f.xfaHtml,S=f.intent||"display",R=document.createElement(w.name);w.attributes&&this.setAttributes({html:R,element:w,intent:S,linkService:v});const _=[[w,-1,R]],F=f.div;if(F.append(R),f.viewport){const I=`matrix(${f.viewport.transform.join(",")})`;F.style.transform=I}S!=="richText"&&F.setAttribute("class","xfaLayer xfaFont");const M=[];for(;_.length>0;){const[I,N,B]=_.at(-1);if(N+1===I.children.length){_.pop();continue}const H=I.children[++_.at(-1)[1]];if(H===null)continue;const{name:U}=H;if(U==="#text"){const z=document.createTextNode(H.value);M.push(z),B.append(z);continue}const $=H?.attributes?.xmlns?document.createElementNS(H.attributes.xmlns,U):document.createElement(U);if(B.append($),H.attributes&&this.setAttributes({html:$,element:H,storage:g,intent:S,linkService:v}),H.children&&H.children.length>0)_.push([H,-1,$]);else if(H.value){const z=document.createTextNode(H.value);o.XfaText.shouldBuildText(U)&&M.push(z),$.append(z)}}for(const I of F.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))I.setAttribute("readOnly",!0);return{textDivs:M}}static update(f){const g=`matrix(${f.viewport.transform.join(",")})`;f.div.style.transform=g,f.div.hidden=!1}}t.XfaLayer=u}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0;var o=n(1),u=n(4),d=n(29),f=n(6),g=n(5);class v extends u.AnnotationEditor{#e=0;#t=0;#n=this.canvasPointermove.bind(this);#i=this.canvasPointerleave.bind(this);#a=this.canvasPointerup.bind(this);#o=this.canvasPointerdown.bind(this);#s=new Path2D;#l=!1;#c=!1;#r=!1;#f=null;#d=0;#h=0;#p=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";constructor(S){super({...S,name:"inkEditor"}),this.color=S.color||null,this.thickness=S.thickness||null,this.opacity=S.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(S){u.AnnotationEditor.initialize(S,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(S,R){switch(S){case o.AnnotationEditorParamsType.INK_THICKNESS:v._defaultThickness=R;break;case o.AnnotationEditorParamsType.INK_COLOR:v._defaultColor=R;break;case o.AnnotationEditorParamsType.INK_OPACITY:v._defaultOpacity=R/100;break}}updateParams(S,R){switch(S){case o.AnnotationEditorParamsType.INK_THICKNESS:this.#v(R);break;case o.AnnotationEditorParamsType.INK_COLOR:this.#m(R);break;case o.AnnotationEditorParamsType.INK_OPACITY:this.#g(R);break}}static get defaultPropertiesToUpdate(){return[[o.AnnotationEditorParamsType.INK_THICKNESS,v._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,v._defaultColor||u.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round(v._defaultOpacity*100)]]}get propertiesToUpdate(){return[[o.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||v._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,this.color||v._defaultColor||u.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??v._defaultOpacity))]]}#v(S){const R=this.thickness;this.addCommands({cmd:()=>{this.thickness=S,this.#R()},undo:()=>{this.thickness=R,this.#R()},mustExec:!0,type:o.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#m(S){const R=this.color;this.addCommands({cmd:()=>{this.color=S,this.#C()},undo:()=>{this.color=R,this.#C()},mustExec:!0,type:o.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#g(S){S/=100;const R=this.opacity;this.addCommands({cmd:()=>{this.opacity=S,this.#C()},undo:()=>{this.opacity=R,this.#C()},mustExec:!0,type:o.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#D(),this.#P()),this.isAttachedToDOM||(this.parent.add(this),this.#S()),this.#R()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#f.disconnect(),this.#f=null,super.remove())}setParent(S){!this.parent&&S?this._uiManager.removeShouldRescale(this):this.parent&&S===null&&this._uiManager.addShouldRescale(this),super.setParent(S)}onScaleChanging(){const[S,R]=this.parentDimensions,_=this.width*S,F=this.height*R;this.setDimensions(_,F)}enableEditMode(){this.#l||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#o))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#o))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#u(){const{parentRotation:S,parentDimensions:[R,_]}=this;switch(S){case 90:return[0,_,_,R];case 180:return[R,_,R,_];case 270:return[R,0,_,R];default:return[0,0,R,_]}}#y(){const{ctx:S,color:R,opacity:_,thickness:F,parentScale:M,scaleFactor:I}=this;S.lineWidth=F*M/I,S.lineCap="round",S.lineJoin="round",S.miterLimit=10,S.strokeStyle=`${R}${(0,g.opacityToHex)(_)}`}#E(S,R){this.canvas.addEventListener("contextmenu",f.noContextMenu),this.canvas.addEventListener("pointerleave",this.#i),this.canvas.addEventListener("pointermove",this.#n),this.canvas.addEventListener("pointerup",this.#a),this.canvas.removeEventListener("pointerdown",this.#o),this.isEditing=!0,this.#r||(this.#r=!0,this.#S(),this.thickness||=v._defaultThickness,this.color||=v._defaultColor||u.AnnotationEditor._defaultLineColor,this.opacity??=v._defaultOpacity),this.currentPath.push([S,R]),this.#c=!1,this.#y(),this.#p=()=>{this.#I(),this.#p&&window.requestAnimationFrame(this.#p)},window.requestAnimationFrame(this.#p)}#w(S,R){const[_,F]=this.currentPath.at(-1);if(this.currentPath.length>1&&S===_&&R===F)return;const M=this.currentPath;let I=this.#s;if(M.push([S,R]),this.#c=!0,M.length<=2){I.moveTo(...M[0]),I.lineTo(S,R);return}M.length===3&&(this.#s=I=new Path2D,I.moveTo(...M[0])),this.#L(I,...M.at(-3),...M.at(-2),S,R)}#A(){if(this.currentPath.length===0)return;const S=this.currentPath.at(-1);this.#s.lineTo(...S)}#_(S,R){this.#p=null,S=Math.min(Math.max(S,0),this.canvas.width),R=Math.min(Math.max(R,0),this.canvas.height),this.#w(S,R),this.#A();let _;if(this.currentPath.length!==1)_=this.#N();else{const B=[S,R];_=[[B,B.slice(),B.slice(),B]]}const F=this.#s,M=this.currentPath;this.currentPath=[],this.#s=new Path2D;const I=()=>{this.allRawPaths.push(M),this.paths.push(_),this.bezierPath2D.push(F),this.rebuild()},N=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#D(),this.#P()),this.#R())};this.addCommands({cmd:I,undo:N,mustExec:!0})}#I(){if(!this.#c)return;this.#c=!1;const S=Math.ceil(this.thickness*this.parentScale),R=this.currentPath.slice(-3),_=R.map(I=>I[0]),F=R.map(I=>I[1]);Math.min(..._)-S,Math.max(..._)+S,Math.min(...F)-S,Math.max(...F)+S;const{ctx:M}=this;M.save(),M.clearRect(0,0,this.canvas.width,this.canvas.height);for(const I of this.bezierPath2D)M.stroke(I);M.stroke(this.#s),M.restore()}#L(S,R,_,F,M,I,N){const B=(R+F)/2,H=(_+M)/2,U=(F+I)/2,$=(M+N)/2;S.bezierCurveTo(B+2*(F-B)/3,H+2*(M-H)/3,U+2*(F-U)/3,$+2*(M-$)/3,U,$)}#N(){const S=this.currentPath;if(S.length<=2)return[[S[0],S[0],S.at(-1),S.at(-1)]];const R=[];let _,[F,M]=S[0];for(_=1;_<S.length-2;_++){const[z,j]=S[_],[J,ie]=S[_+1],se=(z+J)/2,fe=(j+ie)/2,de=[F+2*(z-F)/3,M+2*(j-M)/3],Ce=[se+2*(z-se)/3,fe+2*(j-fe)/3];R.push([[F,M],de,Ce,[se,fe]]),[F,M]=[se,fe]}const[I,N]=S[_],[B,H]=S[_+1],U=[F+2*(I-F)/3,M+2*(N-M)/3],$=[B+2*(I-B)/3,H+2*(N-H)/3];return R.push([[F,M],U,$,[B,H]]),R}#C(){if(this.isEmpty()){this.#x();return}this.#y();const{canvas:S,ctx:R}=this;R.setTransform(1,0,0,1,0,0),R.clearRect(0,0,S.width,S.height),this.#x();for(const _ of this.bezierPath2D)R.stroke(_)}commit(){this.#l||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#l=!0,this.div.classList.add("disabled"),this.#R(!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(S){this._focusEventsAllowed&&(super.focusin(S),this.enableEditMode())}canvasPointerdown(S){S.button!==0||!this.isInEditMode()||this.#l||(this.setInForeground(),S.preventDefault(),S.type!=="mouse"&&this.div.focus(),this.#E(S.offsetX,S.offsetY))}canvasPointermove(S){S.preventDefault(),this.#w(S.offsetX,S.offsetY)}canvasPointerup(S){S.preventDefault(),this.#O(S)}canvasPointerleave(S){this.#O(S)}#O(S){this.canvas.removeEventListener("pointerleave",this.#i),this.canvas.removeEventListener("pointermove",this.#n),this.canvas.removeEventListener("pointerup",this.#a),this.canvas.addEventListener("pointerdown",this.#o),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",f.noContextMenu)},10),this.#_(S.offsetX,S.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#D(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",u.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(S=>this.canvas?.setAttribute("aria-label",S)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#P(){this.#f=new ResizeObserver(S=>{const R=S[0].contentRect;R.width&&R.height&&this.setDimensions(R.width,R.height)}),this.#f.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#l}render(){if(this.div)return this.div;let S,R;this.width&&(S=this.x,R=this.y),super.render(),u.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(N=>this.div?.setAttribute("aria-label",N));const[_,F,M,I]=this.#u();if(this.setAt(_,F,0,0),this.setDims(M,I),this.#D(),this.width){const[N,B]=this.parentDimensions;this.setAspectRatio(this.width*N,this.height*B),this.setAt(S*N,R*B,this.width*N,this.height*B),this.#r=!0,this.#S(),this.setDims(this.width*N,this.height*B),this.#C(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#P(),this.div}#S(){if(!this.#r)return;const[S,R]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*S),this.canvas.height=Math.ceil(this.height*R),this.#x()}setDimensions(S,R){const _=Math.round(S),F=Math.round(R);if(this.#d===_&&this.#h===F)return;this.#d=_,this.#h=F,this.canvas.style.visibility="hidden";const[M,I]=this.parentDimensions;this.width=S/M,this.height=R/I,this.fixAndSetPosition(),this.#l&&this.#T(S,R),this.#S(),this.#C(),this.canvas.style.visibility="visible",this.fixDims()}#T(S,R){const _=this.#F(),F=(S-_)/this.#t,M=(R-_)/this.#e;this.scaleFactor=Math.min(F,M)}#x(){const S=this.#F()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+S,this.translationY*this.scaleFactor+S)}static#k(S){const R=new Path2D;for(let _=0,F=S.length;_<F;_++){const[M,I,N,B]=S[_];_===0&&R.moveTo(...M),R.bezierCurveTo(I[0],I[1],N[0],N[1],B[0],B[1])}return R}static#B(S,R,_){const[F,M,I,N]=R;switch(_){case 0:for(let B=0,H=S.length;B<H;B+=2)S[B]+=F,S[B+1]=N-S[B+1];break;case 90:for(let B=0,H=S.length;B<H;B+=2){const U=S[B];S[B]=S[B+1]+F,S[B+1]=U+M}break;case 180:for(let B=0,H=S.length;B<H;B+=2)S[B]=I-S[B],S[B+1]+=M;break;case 270:for(let B=0,H=S.length;B<H;B+=2){const U=S[B];S[B]=I-S[B+1],S[B+1]=N-U}break;default:throw new Error("Invalid rotation")}return S}static#G(S,R,_){const[F,M,I,N]=R;switch(_){case 0:for(let B=0,H=S.length;B<H;B+=2)S[B]-=F,S[B+1]=N-S[B+1];break;case 90:for(let B=0,H=S.length;B<H;B+=2){const U=S[B];S[B]=S[B+1]-M,S[B+1]=U-F}break;case 180:for(let B=0,H=S.length;B<H;B+=2)S[B]=I-S[B],S[B+1]-=M;break;case 270:for(let B=0,H=S.length;B<H;B+=2){const U=S[B];S[B]=N-S[B+1],S[B+1]=I-U}break;default:throw new Error("Invalid rotation")}return S}#H(S,R,_,F){const M=[],I=this.thickness/2,N=S*R+I,B=S*_+I;for(const H of this.paths){const U=[],$=[];for(let z=0,j=H.length;z<j;z++){const[J,ie,se,fe]=H[z],de=S*J[0]+N,Ce=S*J[1]+B,be=S*ie[0]+N,xe=S*ie[1]+B,Ee=S*se[0]+N,ae=S*se[1]+B,oe=S*fe[0]+N,ee=S*fe[1]+B;z===0&&(U.push(de,Ce),$.push(de,Ce)),U.push(be,xe,Ee,ae,oe,ee),$.push(be,xe),z===j-1&&$.push(oe,ee)}M.push({bezier:v.#B(U,F,this.rotation),points:v.#B($,F,this.rotation)})}return M}#M(){let S=1/0,R=-1/0,_=1/0,F=-1/0;for(const M of this.paths)for(const[I,N,B,H]of M){const U=o.Util.bezierBoundingBox(...I,...N,...B,...H);S=Math.min(S,U[0]),_=Math.min(_,U[1]),R=Math.max(R,U[2]),F=Math.max(F,U[3])}return[S,_,R,F]}#F(){return this.#l?Math.ceil(this.thickness*this.parentScale):0}#R(S=!1){if(this.isEmpty())return;if(!this.#l){this.#C();return}const R=this.#M(),_=this.#F();this.#t=Math.max(u.AnnotationEditor.MIN_SIZE,R[2]-R[0]),this.#e=Math.max(u.AnnotationEditor.MIN_SIZE,R[3]-R[1]);const F=Math.ceil(_+this.#t*this.scaleFactor),M=Math.ceil(_+this.#e*this.scaleFactor),[I,N]=this.parentDimensions;this.width=F/I,this.height=M/N,this.setAspectRatio(F,M);const B=this.translationX,H=this.translationY;this.translationX=-R[0],this.translationY=-R[1],this.#S(),this.#C(),this.#d=F,this.#h=M,this.setDims(F,M);const U=S?_/this.scaleFactor/2:0;this.translate(B-this.translationX-U,H-this.translationY-U)}static deserialize(S,R,_){if(S instanceof d.InkAnnotationElement)return null;const F=super.deserialize(S,R,_);F.thickness=S.thickness,F.color=o.Util.makeHexColor(...S.color),F.opacity=S.opacity;const[M,I]=F.pageDimensions,N=F.width*M,B=F.height*I,H=F.parentScale,U=S.thickness/2;F.#l=!0,F.#d=Math.round(N),F.#h=Math.round(B);const{paths:$,rect:z,rotation:j}=S;for(let{bezier:ie}of $){ie=v.#G(ie,z,j);const se=[];F.paths.push(se);let fe=H*(ie[0]-U),de=H*(ie[1]-U);for(let be=2,xe=ie.length;be<xe;be+=6){const Ee=H*(ie[be]-U),ae=H*(ie[be+1]-U),oe=H*(ie[be+2]-U),ee=H*(ie[be+3]-U),Z=H*(ie[be+4]-U),Q=H*(ie[be+5]-U);se.push([[fe,de],[Ee,ae],[oe,ee],[Z,Q]]),fe=Z,de=Q}const Ce=this.#k(se);F.bezierPath2D.push(Ce)}const J=F.#M();return F.#t=Math.max(u.AnnotationEditor.MIN_SIZE,J[2]-J[0]),F.#e=Math.max(u.AnnotationEditor.MIN_SIZE,J[3]-J[1]),F.#T(N,B),F}serialize(){if(this.isEmpty())return null;const S=this.getRect(0,0),R=u.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:o.AnnotationEditorType.INK,color:R,thickness:this.thickness,opacity:this.opacity,paths:this.#H(this.scaleFactor/this.parentScale,this.translationX,this.translationY,S),pageIndex:this.pageIndex,rect:S,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}t.InkEditor=v}),((e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StampEditor=void 0;var o=n(1),u=n(4),d=n(6),f=n(29);class g extends u.AnnotationEditor{#e=null;#t=null;#n=null;#i=null;#a=null;#o=null;#s=null;#l=null;#c=!1;#r=!1;static _type="stamp";constructor(w){super({...w,name:"stampEditor"}),this.#i=w.bitmapUrl,this.#a=w.bitmapFile}static initialize(w){u.AnnotationEditor.initialize(w)}static get supportedTypes(){const w=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,o.shadow)(this,"supportedTypes",w.map(S=>`image/${S}`))}static get supportedTypesStr(){return(0,o.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(w){return this.supportedTypes.includes(w)}static paste(w,S){S.pasteEditor(o.AnnotationEditorType.STAMP,{bitmapFile:w.getAsFile()})}#f(w,S=!1){if(!w){this.remove();return}this.#e=w.bitmap,S||(this.#t=w.id,this.#c=w.isSvg),this.#p()}#d(){this.#n=null,this._uiManager.enableWaiting(!1),this.#o&&this.div.focus()}#h(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(S=>this.#f(S,!0)).finally(()=>this.#d());return}if(this.#i){const S=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(S).then(R=>this.#f(R)).finally(()=>this.#d());return}if(this.#a){const S=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(S).then(R=>this.#f(R)).finally(()=>this.#d());return}const w=document.createElement("input");w.type="file",w.accept=g.supportedTypesStr,this.#n=new Promise(S=>{w.addEventListener("change",async()=>{if(!w.files||w.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const R=await this._uiManager.imageManager.getFromFile(w.files[0]);this.#f(R)}S()}),w.addEventListener("cancel",()=>{this.remove(),S()})}).finally(()=>this.#d()),w.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#o?.remove(),this.#o=null,this.#s?.disconnect(),this.#s=null),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#h();return}super.rebuild(),this.div!==null&&(this.#t&&this.#h(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#i||this.#a)}get isResizable(){return!0}render(){if(this.div)return this.div;let w,S;if(this.width&&(w=this.x,S=this.y),super.render(),this.div.hidden=!0,this.#e?this.#p():this.#h(),this.width){const[R,_]=this.parentDimensions;this.setAt(w*R,S*_,this.width*R,this.height*_)}return this.div}#p(){const{div:w}=this;let{width:S,height:R}=this.#e;const[_,F]=this.pageDimensions,M=.75;if(this.width)S=this.width*_,R=this.height*F;else if(S>M*_||R>M*F){const H=Math.min(M*_/S,M*F/R);S*=H,R*=H}const[I,N]=this.parentDimensions;this.setDims(S*I/_,R*N/F),this._uiManager.enableWaiting(!1);const B=this.#o=document.createElement("canvas");w.append(B),w.hidden=!1,this.#g(S,R),this.#y(),this.#r||(this.parent.addUndoableEditor(this),this.#r=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()}#v(w,S){const[R,_]=this.parentDimensions;this.width=w/R,this.height=S/_,this.setDims(w,S),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#l!==null&&clearTimeout(this.#l);const F=200;this.#l=setTimeout(()=>{this.#l=null,this.#g(w,S)},F)}#m(w,S){const{width:R,height:_}=this.#e;let F=R,M=_,I=this.#e;for(;F>2*w||M>2*S;){const N=F,B=M;F>2*w&&(F=F>=16384?Math.floor(F/2)-1:Math.ceil(F/2)),M>2*S&&(M=M>=16384?Math.floor(M/2)-1:Math.ceil(M/2));const H=new OffscreenCanvas(F,M);H.getContext("2d").drawImage(I,0,0,N,B,0,0,F,M),I=H.transferToImageBitmap()}return I}#g(w,S){w=Math.ceil(w),S=Math.ceil(S);const R=this.#o;if(!R||R.width===w&&R.height===S)return;R.width=w,R.height=S;const _=this.#c?this.#e:this.#m(w,S),F=R.getContext("2d");F.filter=this._uiManager.hcmFilter,F.drawImage(_,0,0,_.width,_.height,0,0,w,S)}#u(w){if(w){if(this.#c){const _=this._uiManager.imageManager.getSvgUrl(this.#t);if(_)return _}const S=document.createElement("canvas");return{width:S.width,height:S.height}=this.#e,S.getContext("2d").drawImage(this.#e,0,0),S.toDataURL()}if(this.#c){const[S,R]=this.pageDimensions,_=Math.round(this.width*S*d.PixelsPerInch.PDF_TO_CSS_UNITS),F=Math.round(this.height*R*d.PixelsPerInch.PDF_TO_CSS_UNITS),M=new OffscreenCanvas(_,F);return M.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,_,F),M.transferToImageBitmap()}return structuredClone(this.#e)}#y(){this.#s=new ResizeObserver(w=>{const S=w[0].contentRect;S.width&&S.height&&this.#v(S.width,S.height)}),this.#s.observe(this.div)}static deserialize(w,S,R){if(w instanceof f.StampAnnotationElement)return null;const _=super.deserialize(w,S,R),{rect:F,bitmapUrl:M,bitmapId:I,isSvg:N,accessibilityData:B}=w;I&&R.imageManager.isValidId(I)?_.#t=I:_.#i=M,_.#c=N;const[H,U]=_.pageDimensions;return _.width=(F[2]-F[0])/H,_.height=(F[3]-F[1])/U,B&&(_.altTextData=B),_}serialize(w=!1,S=null){if(this.isEmpty())return null;const R={annotationType:o.AnnotationEditorType.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#c,structTreeParentId:this._structTreeParentId};if(w)return R.bitmapUrl=this.#u(!0),R.accessibilityData=this.altTextData,R;const{decorative:_,altText:F}=this.altTextData;if(!_&&F&&(R.accessibilityData={type:"Figure",alt:F}),S===null)return R;S.stamps||=new Map;const M=this.#c?(R.rect[2]-R.rect[0])*(R.rect[3]-R.rect[1]):null;if(!S.stamps.has(this.#t))S.stamps.set(this.#t,{area:M,serialized:R}),R.bitmap=this.#u(!1);else if(this.#c){const I=S.stamps.get(this.#t);M>I.area&&(I.area=M,I.serialized.bitmap.close(),I.serialized.bitmap=this.#u(!1))}return R}}t.StampEditor=g})],__webpack_module_cache__={};function __w_pdfjs_require__(e){var t=__webpack_module_cache__[e];if(t!==void 0)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__w_pdfjs_require__),n.exports}var __webpack_exports__={};return(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return d.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return f.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return g.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(e,"DOMSVGFactory",{enumerable:!0,get:function(){return o.DOMSVGFactory}}),Object.defineProperty(e,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return v.GlobalWorkerOptions}}),Object.defineProperty(e,"ImageKind",{enumerable:!0,get:function(){return t.ImageKind}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return n.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return o.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return n.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return o.PixelsPerInch}}),Object.defineProperty(e,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return o.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return n.SVGGraphics}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return w.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return n.build}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return n.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return o.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return o.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return o.getXfaPageViewport}}),Object.defineProperty(e,"isDataScheme",{enumerable:!0,get:function(){return o.isDataScheme}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return o.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return o.loadScript}}),Object.defineProperty(e,"noContextMenu",{enumerable:!0,get:function(){return o.noContextMenu}}),Object.defineProperty(e,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return u.renderTextLayer}}),Object.defineProperty(e,"setLayerDimensions",{enumerable:!0,get:function(){return o.setLayerDimensions}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(e,"updateTextLayer",{enumerable:!0,get:function(){return u.updateTextLayer}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return n.version}});var t=__w_pdfjs_require__(1),n=__w_pdfjs_require__(2),o=__w_pdfjs_require__(6),u=__w_pdfjs_require__(26),d=__w_pdfjs_require__(27),f=__w_pdfjs_require__(5),g=__w_pdfjs_require__(29),v=__w_pdfjs_require__(14),w=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf)),pdf.exports}var pdfExports=requirePdf();function _last(e){if(e?.length)return e[e.length-1]}function _areEqual(e,t,n){if(e===t)return!0;if(!e||!t)return e==null&&t==null;const o=e.length;if(o!==t.length)return!1;for(let u=0;u<o;u++)if(e[u]!==t[u]&&!n?.(e[u],t[u]))return!1;return!0}function _forAll(e,t){if(e){for(const n of e)if(t(n))return!0}}function _removeFromArray(e,t){const n=e.indexOf(t);n>=0&&e.splice(n,1)}function _removeAllFromArray(e,t){let n=0,o=0;for(;n<e.length;n++)t.includes(e[n])||(e[o]=e[n],o++);for(;o<e.length;)e.pop()}function _moveInArray(e,t,n){for(let o=0;o<t.length;o++)_removeFromArray(e,t[o]);for(let o=t.length-1;o>=0;o--)e.splice(n,0,t[o])}var _makeNull=e=>e==null||e===""?null:e;function _exists(e){return e!=null&&e!==""}function _missing(e){return!_exists(e)}var _toStringOrNull=e=>e!=null&&typeof e.toString=="function"?e.toString():null,_jsonEquals=(e,t)=>{const n=e?JSON.stringify(e):null,o=t?JSON.stringify(t):null;return n===o},_defaultComparator=(e,t,n=!1)=>e==null?t==null?0:-1:t==null?1:(typeof e=="object"&&e.toNumber&&(e=e.toNumber()),typeof t=="object"&&t.toNumber&&(t=t.toNumber()),!n||typeof e!="string"?e>t?1:e<t?-1:0:e.localeCompare(t)),LocalEventService=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,n){const o=t?this.allAsyncListeners:this.allSyncListeners;let u=o.get(e);return!u&&n&&(u=new Set,o.set(e,u)),u}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,n=!1){this.getListeners(e,n,!0).add(t)}removeEventListener(e,t,n=!1){const o=this.getListeners(e,n,!1);o&&(o.delete(t),o.size===0&&(n?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){this.getGlobalListeners(t).add(e)}removeGlobalListener(e,t=!1){this.getGlobalListeners(t).delete(e)}dispatchEvent(e){this.dispatchToListeners(e,!0),this.dispatchToListeners(e,!1),this.firedEvents[e.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){const n=e.type;if(t&&"event"in e){const g=e.event;g instanceof Event&&(e.eventPath=g.composedPath())}const{frameworkOverrides:o}=this,u=g=>{const v=o?()=>o.wrapIncoming(g):g;t?this.dispatchAsync(v):v()},d=this.getListeners(n,t,!1);if((d?.size??0)>0){const g=new Set(d);for(const v of g)d?.has(v)&&u(()=>v(e))}const f=this.getGlobalListeners(t);if(f.size>0){const g=new Set(f);for(const v of g)u(()=>v(n,e))}}getGlobalListeners(e){return e?this.globalAsyncListeners:this.globalSyncListeners}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){const t=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)},n=this.frameworkOverrides;n?n.wrapIncoming(t):t(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[];for(const t of e)t()}},reUnescapedHtml=/[&<>"']/g,HTML_ESCAPES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function _toString(e){return e?.toString().toString()??null}function _escapeString(e){return _toString(e)?.replace(reUnescapedHtml,t=>HTML_ESCAPES[t])??null}function _isExpressionString(e){return typeof e=="string"&&e.startsWith("=")&&e.length>1}function _camelCaseToHumanText(e){if(!e||e==null)return null;const t=/([a-z])([A-Z])/g,n=/([A-Z]+)([A-Z])([a-z])/g;return e.replace(t,"$1 $2").replace(n,"$1 $2$3").replace(/\./g," ").split(" ").map(u=>u.substring(0,1).toUpperCase()+(u.length>1?u.substring(1,u.length):"")).join(" ")}function _getRootNode(e){return e.eRootDiv.getRootNode()}function _getActiveDomElement(e){return _getRootNode(e).activeElement}function _getDocument(e){const{gos:t,eRootDiv:n}=e;let o=null;const u=t.get("getDocument");return u&&_exists(u)?o=u():n&&(o=n.ownerDocument),o&&_exists(o)?o:document}function _isNothingFocused(e){const t=_getActiveDomElement(e);return t===null||t===_getDocument(e).body}function _getWindow(e){return _getDocument(e).defaultView||window}function _getPageBody(e){let t=null,n=null;try{t=_getDocument(e).fullscreenElement}catch{}finally{t||(t=_getRootNode(e));const o=t.querySelector("body");o?n=o:t instanceof ShadowRoot?n=t:t instanceof Document?n=t?.documentElement:n=t}return n}function _getBodyWidth(e){return _getPageBody(e)?.clientWidth??(window.innerWidth||-1)}function _getBodyHeight(e){return _getPageBody(e)?.clientHeight??(window.innerHeight||-1)}function _toggleAriaAttribute(e,t,n){n==null||typeof n=="string"&&n==""?_removeAriaAttribute(e,t):_setAriaAttribute(e,t,n)}function _setAriaAttribute(e,t,n){e.setAttribute(_ariaAttributeName(t),n.toString())}function _removeAriaAttribute(e,t){e.removeAttribute(_ariaAttributeName(t))}function _ariaAttributeName(e){return`aria-${e}`}function _setAriaRole(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function _getAriaSortState(e){const t=e?.direction;return t==="asc"?"ascending":t==="desc"?"descending":t==="mixed"?"other":"none"}function _getAriaLabel(e){return e.getAttribute("aria-label")}function _setAriaLabel(e,t){_toggleAriaAttribute(e,"label",t)}function _setAriaLabelledBy(e,t){_toggleAriaAttribute(e,"labelledby",t)}function _setAriaLive(e,t){_toggleAriaAttribute(e,"live",t)}function _setAriaAtomic(e,t){_toggleAriaAttribute(e,"atomic",t)}function _setAriaRelevant(e,t){_toggleAriaAttribute(e,"relevant",t)}function _setAriaInvalid(e,t){_toggleAriaAttribute(e,"invalid",t)}function _setAriaDisabled(e,t){_toggleAriaAttribute(e,"disabled",t)}function _setAriaHidden(e,t){_toggleAriaAttribute(e,"hidden",t)}function _setAriaExpanded(e,t){_setAriaAttribute(e,"expanded",t)}function _setAriaSetSize(e,t){_setAriaAttribute(e,"setsize",t)}function _setAriaPosInSet(e,t){_setAriaAttribute(e,"posinset",t)}function _setAriaRowCount(e,t){_setAriaAttribute(e,"rowcount",t)}function _setAriaRowIndex(e,t){_setAriaAttribute(e,"rowindex",t)}function _setAriaRowSpan(e,t){_setAriaAttribute(e,"rowspan",t)}function _setAriaColCount(e,t){_setAriaAttribute(e,"colcount",t)}function _setAriaColIndex(e,t){_setAriaAttribute(e,"colindex",t)}function _setAriaColSpan(e,t){_setAriaAttribute(e,"colspan",t)}function _setAriaSort(e,t){_setAriaAttribute(e,"sort",t)}function _removeAriaSort(e){_removeAriaAttribute(e,"sort")}function _setAriaSelected(e,t){_toggleAriaAttribute(e,"selected",t)}function _setAriaControls(e,t){_toggleAriaAttribute(e,"controls",t)}function _setAriaControlsAndLabel(e,t){_setAriaControls(e,t.id),_setAriaLabelledBy(t,e.id)}function _setAriaOwns(e,t){_toggleAriaAttribute(e,"owns",t)}function _getAriaCheckboxStateName(e,t){return t===void 0?e("ariaIndeterminate","indeterminate"):t===!0?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}var FOCUSABLE_SELECTOR="[tabindex], input, select, button, textarea, [href]",FOCUSABLE_EXCLUDE="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function _isFocusableFormField(e){return!e||!e.matches("input, select, button, textarea")||!e.matches(FOCUSABLE_EXCLUDE)?!1:_isVisible(e)}function _setDisplayed(e,t,n={}){const{skipAriaHidden:o}=n;e.classList.toggle("ag-hidden",!t),o||_setAriaHidden(e,!t)}function _setVisible(e,t,n={}){const{skipAriaHidden:o}=n;e.classList.toggle("ag-invisible",!t),o||_setAriaHidden(e,!t)}function _setDisabled(e,t){const n="disabled",o=t?d=>d.setAttribute(n,""):d=>d.removeAttribute(n);o(e);const u=e.querySelectorAll("input")??[];for(const d of u)o(d)}function _isElementChildOfClass(e,t,n){let o=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,typeof n=="number"){if(++o>n)break}else if(e===n)break}return!1}function _getElementSize(e){const{height:t,width:n,borderTopWidth:o,borderRightWidth:u,borderBottomWidth:d,borderLeftWidth:f,paddingTop:g,paddingRight:v,paddingBottom:w,paddingLeft:S,marginTop:R,marginRight:_,marginBottom:F,marginLeft:M,boxSizing:I}=window.getComputedStyle(e),N=Number.parseFloat;return{height:N(t||"0"),width:N(n||"0"),borderTopWidth:N(o||"0"),borderRightWidth:N(u||"0"),borderBottomWidth:N(d||"0"),borderLeftWidth:N(f||"0"),paddingTop:N(g||"0"),paddingRight:N(v||"0"),paddingBottom:N(w||"0"),paddingLeft:N(S||"0"),marginTop:N(R||"0"),marginRight:N(_||"0"),marginBottom:N(F||"0"),marginLeft:N(M||"0"),boxSizing:I}}function _getInnerHeight(e){const t=_getElementSize(e);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom-t.borderTopWidth-t.borderBottomWidth:t.height}function _getInnerWidth(e){const t=_getElementSize(e);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight-t.borderLeftWidth-t.borderRightWidth:t.width}function _getAbsoluteHeight(e){const{height:t,marginBottom:n,marginTop:o}=_getElementSize(e);return Math.floor(t+n+o)}function _getAbsoluteWidth(e){const{width:t,marginLeft:n,marginRight:o}=_getElementSize(e);return Math.floor(t+n+o)}function _getElementRectWithOffset(e){const t=e.getBoundingClientRect(),{borderTopWidth:n,borderLeftWidth:o,borderRightWidth:u,borderBottomWidth:d}=_getElementSize(e);return{top:t.top+(n||0),left:t.left+(o||0),right:t.right+(u||0),bottom:t.bottom+(d||0)}}function _getScrollLeft(e,t){let n=e.scrollLeft;return t&&(n=Math.abs(n)),n}function _setScrollLeft(e,t,n){n&&(t*=-1),e.scrollLeft=t}function _clearElement(e){for(;e?.firstChild;)e.firstChild.remove()}function _removeFromParent(e){e?.parentNode&&e.remove()}function _isInDOM(e){return!!e.offsetParent}function _isVisible(e){return e.checkVisibility?e.checkVisibility({checkVisibilityCSS:!0}):!(!_isInDOM(e)||window.getComputedStyle(e).visibility!=="visible")}function _loadTemplate(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function _isElementOverflowingCallback(e){return()=>{const t=e();return t?_isHorizontalScrollShowing(t)||_isVerticalScrollShowing(t):!0}}function _isHorizontalScrollShowing(e){return e.clientWidth<e.scrollWidth}function _isVerticalScrollShowing(e){return e.clientHeight<e.scrollHeight}function _setElementWidth(e,t){t==="flex"?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):_setFixedWidth(e,t)}function _setFixedWidth(e,t){t=_formatSize(t),e.style.width=t,e.style.maxWidth=t,e.style.minWidth=t}function _setFixedHeight(e,t){t=_formatSize(t),e.style.height=t,e.style.maxHeight=t,e.style.minHeight=t}function _formatSize(e){return typeof e=="number"?`${e}px`:e}function _isNodeOrElement(e){return e instanceof Node||e instanceof HTMLElement}function _addOrRemoveAttribute(e,t,n){n==null||n===""?e.removeAttribute(t):e.setAttribute(t,n.toString())}function _placeCaretAtEnd(e,t){if(!t.isContentEditable)return;const n=_getWindow(e).getSelection();if(!n)return;const o=_getDocument(e).createRange();o.selectNodeContents(t),o.collapse(!1),n.removeAllRanges(),n.addRange(o)}function _observeResize(e,t,n){const u=_getWindow(e).ResizeObserver,d=u?new u(n):null;return d?.observe(t),()=>d?.disconnect()}function _requestAnimationFrame(e,t){const n=_getWindow(e);n.requestAnimationFrame?n.requestAnimationFrame(t):n.webkitRequestAnimationFrame?n.webkitRequestAnimationFrame(t):n.setTimeout(t,0)}var DataRefAttribute="data-ref",whitespaceNode;function getWhitespaceNode(){return whitespaceNode??(whitespaceNode=document.createTextNode(" ")),whitespaceNode.cloneNode()}function _createAgElement(e){const{attrs:t,children:n,cls:o,ref:u,role:d,tag:f}=e,g=document.createElement(f);if(o&&(g.className=o),u&&g.setAttribute(DataRefAttribute,u),d&&g.setAttribute("role",d),t)for(const v of Object.keys(t))g.setAttribute(v,t[v]);if(n)if(typeof n=="string")g.textContent=n;else{let v=!0;for(const w of n)w&&(typeof w=="string"?(g.appendChild(document.createTextNode(w)),v=!1):typeof w=="function"?g.appendChild(w()):(v&&(g.appendChild(getWhitespaceNode()),v=!1),g.append(_createAgElement(w)),g.appendChild(getWhitespaceNode())))}return g}var PASSIVE_EVENTS=["touchstart","touchend","touchmove","touchcancel","scroll"],NON_PASSIVE_EVENTS=["wheel"],supports={},_isEventSupported=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return n=>{if(typeof supports[n]=="boolean")return supports[n];const o=document.createElement(e[n]||"div");return n="on"+n,supports[n]=n in o}})();function _isElementInEventPath(e,t){return!t||!e?!1:_getEventPath(t).indexOf(e)>=0}function _createEventPath(e){const t=[];let n=e.target;for(;n;)t.push(n),n=n.parentElement;return t}function _getEventPath(e){const t=e;return t.path?t.path:t.composedPath?t.composedPath():_createEventPath(t)}function _addSafePassiveEventListener(e,t,n){const o=getPassiveStateForEvent(t);let u;o!=null&&(u={passive:o}),e.addEventListener(t,n,u)}var getPassiveStateForEvent=e=>{const t=PASSIVE_EVENTS.includes(e),n=NON_PASSIVE_EVENTS.includes(e);if(t)return!0;if(n)return!1};function _areEventsNear(e,t,n){if(n===0)return!1;const o=Math.abs(e.clientX-t.clientX),u=Math.abs(e.clientY-t.clientY);return Math.max(o,u)<=n}var _getFirstActiveTouch=(e,t)=>{const n=e.identifier;for(let o=0,u=t.length;o<u;++o){const d=t[o];if(d.identifier===n)return d}return null};function _isEventFromThisInstance(e,t){return e.gos.isElementInThisInstance(t.target)}function _anchorElementToMouseMoveEvent(e,t,n){const u=e.getBoundingClientRect().height,d=_getBodyWidth(n)-2,f=_getBodyHeight(n)-2;if(!e.offsetParent)return;const v=_getElementRectWithOffset(e.offsetParent),{clientY:w,clientX:S}=t;let R=w-v.top-u/2,_=S-v.left-10;const F=_getDocument(n),M=F.defaultView||window,I=M.pageYOffset||F.documentElement.scrollTop,N=M.pageXOffset||F.documentElement.scrollLeft;d>0&&_+e.clientWidth>d+N&&(_=d+N-e.clientWidth),_<0&&(_=0),f>0&&R+e.clientHeight>f+I&&(R=f+I-e.clientHeight),R<0&&(R=0),e.style.left=`${_}px`,e.style.top=`${R}px`}var addTempEventHandlers=(e,...t)=>{for(const n of t){const[o,u,d,f]=n;o.addEventListener(u,d,f),e.push(n)}},clearTempEventHandlers=e=>{if(e){for(const[t,n,o,u]of e)t.removeEventListener(n,o,u);e.length=0}},preventEventDefault=e=>{e.cancelable&&e.preventDefault()};function defaultLocaleTextFunc(e,t){return t}function _getLocaleTextFunc(e){return e?.getLocaleTextFunc()??defaultLocaleTextFunc}function _translate(e,t,n,o){const u=t[n];return e.getLocaleTextFunc()(n,typeof u=="function"?u(o):u,o)}function _getLocaleTextFromFunc(e){return(t,n,o)=>e({key:t,defaultValue:n,variableValues:o})}function _getLocaleTextFromMap(e){return(t,n,o)=>{let u=e?.[t];if(u&&o?.length){let d=0;for(;!(d>=o.length||u.indexOf("${variable}")===-1);)u=u.replace("${variable}",o[d++])}return u??n}}var AgBeanStub=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.beans=e,this.stubContext=e.context,this.eventSvc=e.eventSvc,this.gos=e.gos}destroy(){const{destroyFunctions:e}=this;for(let t=0;t<e.length;t++)e[t]();e.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,n){this.localEventService||(this.localEventService=new LocalEventService),this.localEventService.addEventListener(e,t,n)}removeEventListener(e,t,n){this.localEventService?.removeEventListener(e,t,n)}dispatchLocalEvent(e){this.localEventService?.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventSvc,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){const n=[];for(const o of Object.keys(t)){const u=t[o];u&&n.push(this._setupListener(e,o,u))}return n}_setupListener(e,t,n){if(this.destroyed)return()=>null;let o;if(isAgEventEmitter(e))e.__addEventListener(t,n),o=()=>(e.__removeEventListener(t,n),null);else{const u=isEventService(e);e instanceof HTMLElement?_addSafePassiveEventListener(e,t,n):u?e.addListener(t,n):e.addEventListener(t,n),o=u?()=>(e.removeListener(t,n),null):()=>(e.removeEventListener(t,n),null)}return this.destroyFunctions.push(o),()=>(o(),this.destroyFunctions=this.destroyFunctions.filter(u=>u!==o),null)}setupPropertyListener(e,t){const{gos:n}=this;n.addPropertyEventListener(e,t);const o=()=>(n.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(o),()=>(o(),this.destroyFunctions=this.destroyFunctions.filter(u=>u!==o),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupPropertyListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const n=e.join("-")+this.propertyListenerId++,o=u=>{if(u.changeSet){if(u.changeSet&&u.changeSet.id===this.lastChangeSetIdLookup[n])return;this.lastChangeSetIdLookup[n]=u.changeSet.id}const d={type:"propertyChanged",changeSet:u.changeSet,source:u.source};t(d)};for(const u of e)this.setupPropertyListener(u,o)}getLocaleTextFunc(){return _getLocaleTextFunc(this.beans.localeSvc)}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createOptionalManagedBean(e,t){return e?this.createManagedBean(e,t):void 0}createManagedBean(e,t){const n=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),n}createBean(e,t,n){return(t||this.stubContext).createBean(e,n)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}};function isAgEventEmitter(e){return e.__addEventListener!==void 0}function isEventService(e){return e.eventServiceType==="global"}var BeanStub=class extends AgBeanStub{},doOnceSet=new Set,_doOnce=(e,t)=>{doOnceSet.has(t)||(doOnceSet.add(t),e())};_doOnce._set=doOnceSet;var batchedCallsSetTimeout={pending:!1,funcs:[]},batchedCallsRaf={pending:!1,funcs:[]};function _batchCall(e,t="setTimeout",n){const o=t==="raf"?batchedCallsRaf:batchedCallsSetTimeout;if(o.funcs.push(e),o.pending)return;o.pending=!0;const u=()=>{const d=o.funcs.slice();o.funcs.length=0,o.pending=!1;for(const f of d)f()};t==="raf"?_requestAnimationFrame(n,u):window.setTimeout(u,0)}function _debounce(e,t,n){let o;return function(...u){const d=this;return window.clearTimeout(o),o=window.setTimeout(function(){e.isAlive()&&t.apply(d,u)},n),o}}function _throttle(e,t){let n=0;return function(...o){const u=this,d=Date.now();d-n<t||(n=d,e.apply(u,o))}}function _waitUntil(e,t,n,o=100){const u=Date.now();let d=null,f=!1;const g=()=>{d!=null&&(window.clearInterval(d),d=null)};e.addDestroyFunc(g);const v=()=>{const w=Date.now()-u>o;(t()||w)&&(n(),f=!0,g())};v(),f||(d=window.setInterval(v,10))}var SKIP_JS_BUILTINS=new Set(["__proto__","constructor","prototype"]);function _iterateObject(e,t){if(e!=null){if(Array.isArray(e)){for(let n=0;n<e.length;n++)t(n.toString(),e[n]);return}for(const n of Object.keys(e).filter(o=>!SKIP_JS_BUILTINS.has(o)))t(n,e[n])}}function _mergeDeep(e,t,n=!0,o=!1){_exists(t)&&_iterateObject(t,(u,d)=>{let f=e[u];f!==d&&(o&&f==null&&d!=null&&typeof d=="object"&&d.constructor===Object&&(f={},e[u]=f),_isNonNullObject(d)&&_isNonNullObject(f)&&!Array.isArray(f)?_mergeDeep(f,d,n,o):(n||d!==void 0)&&(e[u]=d))})}function _isNonNullObject(e){return typeof e=="object"&&e!==null}var _GlobalGridOptions=class ko{static applyGlobalGridOptions(t){if(!ko.gridOptions)return{...t};let n={};return _mergeDeep(n,ko.gridOptions,!0,!0),ko.mergeStrategy==="deep"?_mergeDeep(n,t,!0,!0):n={...n,...t},ko.gridOptions.context&&(n.context=ko.gridOptions.context),t.context&&(ko.mergeStrategy==="deep"&&n.context&&_mergeDeep(t.context,n.context,!0,!0),n.context=t.context),n}static applyGlobalGridOption(t,n){if(ko.mergeStrategy==="deep"){const o=_getGlobalGridOption(t);if(o&&typeof o=="object"&&typeof n=="object")return ko.applyGlobalGridOptions({[t]:n})[t]}return n}};_GlobalGridOptions.gridOptions=void 0;_GlobalGridOptions.mergeStrategy="shallow";var GlobalGridOptions=_GlobalGridOptions;function _getGlobalGridOption(e){return GlobalGridOptions.gridOptions?.[e]}var GRID_OPTION_DEFAULTS={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipSwitchShowDelay:200,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,cellFlashDuration:500,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,refreshAfterGroupEdit:!1,rowDragInsertDelay:500,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1,enableFilterHandlers:!1},BASE_URL="https://www.ag-grid.com";function _logIfDebug(e,t,...n){e.get("debug")&&console.log("AG Grid: "+t,...n)}function _warnOnce(e,...t){_doOnce(()=>console.warn("AG Grid: "+e,...t),e+t?.join(""))}function _errorOnce(e,...t){_doOnce(()=>console.error("AG Grid: "+e,...t),e+t?.join(""))}var allRegisteredModules=new Set,globalModulesMap={},gridModulesMap={},currentModuleVersion,userHasRegistered=!1,areGridScopedModules=!1,isUmd=!1;function isValidModuleVersion(e){const[t,n]=e.version.split(".")||[],[o,u]=currentModuleVersion.split(".")||[];return t===o&&n===u}function runVersionChecks(e){currentModuleVersion||(currentModuleVersion=e.version);const t=o=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${o} Please update all modules to the same version.`;e.version?isValidModuleVersion(e)||_errorOnce(t(`'${e.moduleName}' is version ${e.version} but the other modules are version ${currentModuleVersion}.`)):_errorOnce(t(`'${e.moduleName}' is incompatible.`));const n=e.validate?.();n&&!n.isValid&&_errorOnce(`${n.message}`)}function _registerModule(e,t,n=!1){n||(userHasRegistered=!0),runVersionChecks(e);const o=e.rowModels??["all"];allRegisteredModules.add(e);let u;t!==void 0?(areGridScopedModules=!0,gridModulesMap[t]===void 0&&(gridModulesMap[t]={}),u=gridModulesMap[t]):u=globalModulesMap;for(const d of o)u[d]===void 0&&(u[d]={}),u[d][e.moduleName]=e;if(e.dependsOn)for(const d of e.dependsOn)_registerModule(d,t,n)}function _unRegisterGridModules(e){delete gridModulesMap[e]}function _isModuleRegistered(e,t,n){const o=u=>!!globalModulesMap[u]?.[e]||!!gridModulesMap[t]?.[u]?.[e];return o(n)||o("all")}function _areModulesGridScoped(){return areGridScopedModules}function _getRegisteredModules(e,t){const n=gridModulesMap[e]??{};return[...Object.values(globalModulesMap.all??{}),...Object.values(n.all??{}),...Object.values(globalModulesMap[t]??{}),...Object.values(n[t]??{})]}function _getAllRegisteredModules(){return new Set(allRegisteredModules)}function _getGridRegisteredModules(e,t){const n=gridModulesMap[e]??{};return[...Object.values(n.all??{}),...Object.values(n[t]??{})]}function _hasUserRegistered(){return userHasRegistered}function _isUmd(){return isUmd}var ModuleRegistry=class{static register(e){_registerModule(e,void 0)}static registerModules(e){for(const t of e)_registerModule(t,void 0)}};function _findEnterpriseCoreModule(e){for(const t of e){if("setLicenseKey"in t)return t;if(t.dependsOn){const n=_findEnterpriseCoreModule(t.dependsOn);if(n)return n}}}var VERSION="35.1.0",MAX_URL_LENGTH=2e3,MIN_PARAM_LENGTH=100,VERSION_PARAM_NAME="_version_",getConsoleMessage=null,baseDocLink=`${BASE_URL}/javascript-data-grid`;function provideValidationServiceLogger(e){getConsoleMessage=e}function setValidationDocLink(e){baseDocLink=e}function getErrorParts(e,t,n){return getConsoleMessage?.(e,t)??[minifiedLog(e,t,n)]}function getMsgOrDefault(e,t,n,o,u){e(`${o?"warning":"error"} #${t}`,...getErrorParts(t,n,u))}function stringifyObject(e){if(!e)return String(e);const t={};for(const n of Object.keys(e))typeof e[n]!="object"&&typeof e[n]!="function"&&(t[n]=e[n]);return JSON.stringify(t)}function stringifyValue(e){let t=e;return e instanceof Error?t=e.toString():typeof e=="object"&&(t=stringifyObject(e)),t}function toStringWithNullUndefined(e){return e===void 0?"undefined":e===null?"null":e}function getParamsUrl(e,t){return`${e}?${t.toString()}`}function truncateUrl(e,t,n){const o=Array.from(t.entries()).sort((d,f)=>f[1].length-d[1].length);let u=getParamsUrl(e,t);for(const[d,f]of o){if(d===VERSION_PARAM_NAME)continue;const g=u.length-n;if(g<=0)break;const v="...",w=g+v.length,S=f.length-w>MIN_PARAM_LENGTH?f.slice(0,f.length-w)+v:f.slice(0,MIN_PARAM_LENGTH)+v;t.set(d,S),u=getParamsUrl(e,t)}return u}function getErrorLink(e,t){const n=new URLSearchParams;if(n.append(VERSION_PARAM_NAME,VERSION),t)for(const d of Object.keys(t))n.append(d,stringifyValue(t[d]));const o=`${baseDocLink}/errors/${e}`,u=getParamsUrl(o,n);return u.length<=MAX_URL_LENGTH?u:truncateUrl(o,n,MAX_URL_LENGTH)}var minifiedLog=(e,t,n)=>{const o=getErrorLink(e,t);return`${`${n?n+` 
`:""}Visit ${o}`}${n?"":` 
  Alternatively register the ValidationModule to see the full message in the console.`}`};function _warn(...e){getMsgOrDefault(_warnOnce,e[0],e[1],!0)}function _error(...e){getMsgOrDefault(_errorOnce,e[0],e[1],!1)}function _logPreInitErr(e,t,n){getMsgOrDefault(_errorOnce,e,t,!1,n)}function getErrMsg(e,t){const n=t[0];return`error #${n} `+getErrorParts(n,t[1],e).join(" ")}function _errMsg(...e){return getErrMsg(void 0,e)}function isRowModelType(e,t){return e.get("rowModelType")===t}function _isClientSideRowModel(e,t){return isRowModelType(e,"clientSide")}function _isServerSideRowModel(e,t){return isRowModelType(e,"serverSide")}function _isDomLayout(e,t){return e.get("domLayout")===t}function _isRowSelection(e){return _getRowSelectionMode(e)!==void 0}function _isGetRowHeightFunction(e){return typeof e.get("getRowHeight")=="function"}function _shouldMaintainColumnOrder(e,t){return t?!e.get("enableStrictPivotColumnOrder"):e.get("maintainColumnOrder")}function _isRowNumbers({gos:e,formula:t}){const n=e.get("rowNumbers");return n||!!t?.active&&n!==!1}function _getRowHeightForNode(e,t,n=!1,o){const{gos:u,environment:d}=e;if(o==null&&(o=d.getDefaultRowHeight()),_isGetRowHeightFunction(u)){if(n)return{height:o,estimated:!0};const v={node:t,data:t.data},w=u.getCallback("getRowHeight")(v);if(isNumeric(w))return w===0&&_warn(23),{height:Math.max(1,w),estimated:!1}}if(t.detail&&u.get("masterDetail"))return getMasterDetailRowHeight(u);const f=u.get("rowHeight");return{height:f&&isNumeric(f)?f:o,estimated:!1}}function getMasterDetailRowHeight(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};const t=e.get("detailRowHeight");return isNumeric(t)?{height:t,estimated:!1}:{height:300,estimated:!1}}function _getRowHeightAsNumber(e){const{environment:t,gos:n}=e,o=n.get("rowHeight");if(!o||_missing(o))return t.getDefaultRowHeight();const u=t.refreshRowHeightVariable();return u!==-1?u:(_warn(24),t.getDefaultRowHeight())}function isNumeric(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)}function _getDomData(e,t,n){const o=t[e.getDomDataKey()];return o?o[n]:void 0}function _setDomData(e,t,n,o){const u=e.getDomDataKey();let d=t[u];_missing(d)&&(d={},t[u]=d),d[n]=o}function _isAnimateRows(e){return e.get("ensureDomOrder")?!1:e.get("animateRows")}function _isGroupRowsSticky(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||_isDomLayout(e,"print"))}function _isColumnsSortingCoupledToGroup(e){return!e.get("autoGroupColumnDef")?.comparator&&!e.get("treeData")}function _getGroupAggFiltering(e){const t=e.get("groupAggFiltering");if(typeof t=="function")return e.getCallback("groupAggFiltering");if(t===!0)return()=>!0}function _getGrandTotalRow(e){return e.get("grandTotalRow")}function _isGroupUseEntireRow(e,t){return t?!1:e.get("groupDisplayType")==="groupRows"}function _isFullWidthGroupRow(e,t,n){return!!t.group&&!t.footer&&_isGroupUseEntireRow(e,n)}function _getRowIdCallback(e){const t=e.getCallback("getRowId");return t===void 0?t:n=>{let o=t(n);return typeof o!="string"&&(_doOnce(()=>_warn(25,{id:o}),"getRowIdString"),o=String(o)),o}}function _canSkipShowingRowGroup(e,t){const n=e.get("groupHideParentOfSingleChild");return!!(n===!0||n==="leafGroupsOnly"&&t.leafGroup||e.get("groupRemoveSingleChildren")||e.get("groupRemoveLowestSingleChildren")&&t.leafGroup)}function _getMaxConcurrentDatasourceRequests(e){const t=e.get("maxConcurrentDatasourceRequests");return t>0?t:void 0}function _getCheckboxes(e){return e?.checkboxes??!0}function _getHeaderCheckbox(e){return e?.mode==="multiRow"&&(e.headerCheckbox??!0)}function _getCheckboxLocation(e){if(typeof e=="object")return e.checkboxLocation??"selectionColumn"}function _getHideDisabledCheckboxes(e){return e?.hideDisabledCheckboxes??!1}function _isUsingNewRowSelectionAPI(e){return typeof e.get("rowSelection")!="string"}function _isCellSelectionEnabled(e){const t=e.get("cellSelection");return t!==void 0?!!t:e.get("enableRangeSelection")}function _getEnableColumnSelection(e){const t=e.get("cellSelection")??!1;return(typeof t=="object"&&t.enableColumnSelection)??!1}function _getEnableClickSelection(e){const t=e.get("rowSelection")??"single";if(typeof t=="string"){const n=e.get("suppressRowClickSelection"),o=e.get("suppressRowDeselection");return n&&o?!1:n?"enableDeselection":o?"enableSelection":!0}return t.mode==="singleRow"||t.mode==="multiRow"?t.enableClickSelection??!1:!1}function _getEnableSelection(e){const t=_getEnableClickSelection(e);return t===!0||t==="enableSelection"}function _getEnableDeselection(e){const t=_getEnableClickSelection(e);return t===!0||t==="enableDeselection"}function _getIsRowSelectable(e){const t=e.get("rowSelection");return typeof t=="string"?e.get("isRowSelectable"):t?.isRowSelectable}function _getRowSelectionMode(e){const t="beanName"in e&&e.beanName==="gos"?e.get("rowSelection"):e.rowSelection;if(typeof t=="string")switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}switch(t?.mode){case"multiRow":case"singleRow":return t.mode;default:return}}function _isMultiRowSelection(e){return _getRowSelectionMode(e)==="multiRow"}function _getEnableSelectionWithoutKeys(e){const t=e.get("rowSelection");return typeof t=="string"?e.get("rowMultiSelectWithClick"):t?.enableSelectionWithoutKeys??!1}function _getGroupSelection(e){const t=e.get("rowSelection");if(typeof t=="string"){const n=e.get("groupSelectsChildren"),o=e.get("groupSelectsFiltered");return n&&o?"filteredDescendants":n?"descendants":"self"}return t?.mode==="multiRow"?t.groupSelects:void 0}function _getSelectAll(e,t=!0){const n=e.get("rowSelection");return typeof n!="object"?t?"all":void 0:n.mode==="multiRow"?n.selectAll:"all"}function _getCtrlASelectsRows(e){const t=e.get("rowSelection");return typeof t=="string"?!1:t?.mode==="multiRow"?t.ctrlASelectsRows??!1:!1}function _getGroupSelectsDescendants(e){const t=_getGroupSelection(e);return t==="descendants"||t==="filteredDescendants"}function _getMasterSelects(e){const t=e.get("rowSelection");return typeof t=="object"&&t.masterSelects||"self"}function _isSetFilterByDefault(e){return e.isModuleRegistered("SetFilter")&&!e.get("suppressSetFilterByDefault")}function _isLegacyMenuEnabled(e){return e.get("columnMenu")==="legacy"}function _isColumnMenuAnchoringEnabled(e){return!_isLegacyMenuEnabled(e)}function _getCallbackForEvent(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substring(1)}function _combineAttributesAndGridOptions(e,t,n){typeof e!="object"&&(e={});const o={...e};for(const u of n){const d=t[u];typeof d<"u"&&(o[u]=d)}return o}function _processOnChange(e,t){if(!e)return;const n={};let o=!1;for(const f of Object.keys(e))n[f]=e[f],o=!0;if(!o)return;const u={type:"gridOptionsChanged",options:n};t.dispatchEvent(u);const d={type:"componentStateChanged",...n};t.dispatchEvent(d)}function _addGridCommonParams(e,t){return e.addCommon(t)}function _getGridOption(e,t){return e[t]??e.gridOptions?.[t]??_getGlobalGridOption(t)??GRID_OPTION_DEFAULTS[t]}function _interpretAsRightClick({gos:e},t){return t.button===2||t.ctrlKey&&e.get("allowContextMenuWithControlKey")}var COL_DEF_DEFAULTS={resizable:!0,sortable:!0},instanceIdSequence=0;function getNextColInstanceId(){return instanceIdSequence++}function isColumn(e){return e instanceof AgColumn}var DEFAULT_SORTING_ORDER=["asc","desc",null],DEFAULT_ABSOLUTE_SORTING_ORDER=[{type:"absolute",direction:"asc"},{type:"absolute",direction:"desc"},null],AgColumn=class extends BeanStub{constructor(e,t,n,o){super(),this.colDef=e,this.userProvidedColDef=t,this.colId=n,this.primary=o,this.isColumn=!0,this.instanceId=getNextColInstanceId(),this.autoHeaderHeight=null,this.sortDef=_getSortDefFromInput(),this._wasSortExplicitlyRemoved=!1,this.moving=!1,this.resizing=!1,this.menuVisible=!1,this.formulaRef=null,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.colEventSvc=new LocalEventService,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.flex=null,this.colIdSanitised=_escapeString(n)}destroy(){super.destroy(),this.beans.rowSpanSvc?.deregister(this)}getInstanceId(){return this.instanceId}initState(){const{colDef:e,beans:{sortSvc:t,pinnedCols:n,colFlex:o}}=this;t?.initCol(this);const u=e.hide;u!==void 0?this.visible=!u:this.visible=!e.initialHide,n?.initCol(this),o?.initCol(this)}setColDef(e,t,n){const o=e.spanRows!==this.colDef.spanRows;this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),o&&(this.beans.rowSpanSvc?.deregister(this),this.initRowSpan()),this.dispatchColEvent("colDefChanged",n)}getUserProvidedColDef(){return this.userProvidedColDef}getParent(){return this.parent}getOriginalParent(){return this.originalParent}postConstruct(){this.initState(),this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip(),this.initRowSpan(),this.addPivotListener()}initDotNotation(){const{gos:e,colDef:{field:t,tooltipField:n}}=this,o=e.get("suppressFieldDotNotation");this.fieldContainsDots=_exists(t)&&t.includes(".")&&!o,this.tooltipFieldContainsDots=_exists(n)&&n.includes(".")&&!o}initMinAndMaxWidths(){const e=this.colDef;this.minWidth=e.minWidth??this.beans.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.beans.tooltipSvc?.initCol(this)}initRowSpan(){this.colDef.spanRows&&this.beans.rowSpanSvc?.register(this)}addPivotListener(){const e=this.beans.pivotColDefSvc,t=this.colDef.pivotValueColumn;!e||!t||this.addManagedListeners(t,{colDefChanged:n=>{const o=e.recreateColDef(this.colDef);this.setColDef(o,o,n.source)}})}resetActualWidth(e){const t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){const t=e.width??e.initialWidth??200;return Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){return this.beans.showRowGroupCols?.isRowGroupDisplayed(this,e)??!1}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}__addEventListener(e,t){this.colEventSvc.addEventListener(e,t)}__removeEventListener(e,t){this.colEventSvc.removeEventListener(e,t)}addEventListener(e,t){this.frameworkEventListenerService=this.beans.frameworkOverrides.createLocalEventListenerWrapper?.(this.frameworkEventListenerService,this.colEventSvc);const n=this.frameworkEventListenerService?.wrap(e,t)??t;this.colEventSvc.addEventListener(e,n)}removeEventListener(e,t){const n=this.frameworkEventListenerService?.unwrap(e,t)??t;this.colEventSvc.removeEventListener(e,n)}createColumnFunctionCallbackParams(e){return _addGridCommonParams(this.gos,{node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){return this.beans.cellNavigation?.isSuppressNavigable(this,e)??!1}isCellEditable(e){return this.beans.editSvc?.isCellEditable({rowNode:e,column:this})??!1}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){return this.beans.selectionSvc?.isCellCheckboxSelection(this,e)??!1}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?.suppressPaste??null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??COL_DEF_DEFAULTS[e]}isColumnFunc(e,t){if(typeof t=="boolean")return t;if(typeof t=="function"){const n=this.createColumnFunctionCallbackParams(e);return t(n)}return!1}createColumnEvent(e,t){return _addGridCommonParams(this.gos,{type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sortDef.direction}getSortDef(){return this.sortDef.direction?this.sortDef:null}getColDefAllowedSortTypes(){const e=[],{sort:t,initialSort:n}=this.colDef,o=t===null?t:_normalizeSortType(t?.type),u=n===null?n:_normalizeSortType(n?.type);return o&&e.push(o),u&&e.push(u),e}getSortingOrder(){const e=this.getColDefAllowedSortTypes().includes("absolute")?DEFAULT_ABSOLUTE_SORTING_ORDER:DEFAULT_SORTING_ORDER;return(this.colDef.sortingOrder??this.gos.get("sortingOrder")??e).map(t=>_getSortDefFromInput(t))}getAvailableSortTypes(){const e=this.getSortingOrder().reduce((t,n)=>(n.direction&&t.push(n.type),t),this.getColDefAllowedSortTypes());return new Set(e)}get wasSortExplicitlyRemoved(){return this._wasSortExplicitlyRemoved}setSortDef(e,t=!1){t||(this._wasSortExplicitlyRemoved=!e.direction),this.sortDef=e}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.getSort()==="asc"}isSortDescending(){return this.getSort()==="desc"}isSortNone(){return _missing(this.getSort())}isSorting(){return _exists(this.getSort())}getSortIndex(){return this.sortIndex}isMenuVisible(){return this.menuVisible}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchColEvent("leftChanged",t))}isFilterActive(){return this.filterActive}isHovered(){return _warn(261),!!this.beans.colHover?.isHovered(this)}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.dispatchColEvent("firstRightPinnedChanged",t))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.dispatchColEvent("lastLeftPinnedChanged",t))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,t){const n=e===!0;this.visible!==n&&(this.visible=n,this.dispatchColEvent("visibleChanged",t)),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getFirstRealParent(){let e=this.getOriginalParent();for(;e?.isPadding();)e=e.getOriginalParent();return e}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e?.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const t=e.getPaddingLevel()+1;let n=!0;for(;e;){if(!e.isPadding()){n=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:n}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return _addGridCommonParams(this.gos,{node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(_missing(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),n=this.colDef.colSpan(t);return Math.max(n,1)}getRowSpan(e){if(_missing(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),n=this.colDef.rowSpan(t);return Math.max(n,1)}setActualWidth(e,t,n=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex!=null&&t!=="flex"&&t!=="gridInitializing"&&(this.flex=null),n||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.dispatchColEvent("widthChanged",e)}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex}isRowGroupActive(){return this.rowGroupActive}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}isAllowFormula(){return this.colDef.allowFormula===!0}dispatchColEvent(e,t,n){const o=this.createColumnEvent(e,t);n&&_mergeDeep(o,n),this.colEventSvc.dispatchEvent(o)}dispatchStateUpdatedEvent(e){this.colEventSvc.dispatchEvent({type:"columnStateUpdated",key:e})}};function _getSortDefFromInput(e){return _isSortDefValid(e)?{direction:e.direction,type:e.type}:{direction:_normalizeSortDirection(e),type:_normalizeSortType(e)}}function _isSortDirectionValid(e){return e==="asc"||e==="desc"||e===null}function _isSortTypeValid(e){return e==="default"||e==="absolute"}function _isSortDefValid(e){if(!e||typeof e!="object")return!1;const t=e;return _isSortTypeValid(t.type)&&_isSortDirectionValid(t.direction)}function _areSortDefsEqual(e,t){return e?t?e.type===t.type&&e.direction===t.direction:e?e.direction===null:!0:t?t.direction===null:!0}function _normalizeSortDirection(e){return _isSortDirectionValid(e)?e:null}function _normalizeSortType(e){return _isSortTypeValid(e)?e:"default"}function _getDisplaySortForColumn(e,t){const n=t.sortSvc.getDisplaySortForColumn(e),o=_normalizeSortType(n?.type),u=_normalizeSortDirection(n?.direction),d=e.getAvailableSortTypes(),f=d.has("default"),g=d.has("absolute");return{isDefaultSortAllowed:f,isAbsoluteSortAllowed:g,isAbsoluteSort:o==="absolute",isDefaultSort:o==="default",isAscending:u==="asc",isDescending:u==="desc",direction:u}}function isProvidedColumnGroup(e){return e instanceof AgProvidedColumnGroup}var AgProvidedColumnGroup=class extends BeanStub{constructor(e,t,n,o){super(),this.colGroupDef=e,this.groupId=t,this.padding=n,this.level=o,this.isColumn=!1,this.expandable=!1,this.instanceId=getNextColInstanceId(),this.expandableListenerRemoveCallback=null,this.expanded=!!e?.openByDefault}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}forEachLeafColumn(e){if(this.children)for(const t of this.children)isColumn(t)?e(t):isProvidedColumnGroup(t)&&t.forEachLeafColumn(e)}addLeafColumns(e){if(this.children)for(const t of this.children)isColumn(t)?e.push(t):isProvidedColumnGroup(t)&&t.addLeafColumns(e)}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);for(const t of this.getLeafColumns())t.__addEventListener("visibleChanged",e);this.expandableListenerRemoveCallback=()=>{for(const t of this.getLeafColumns())t.__removeEventListener("visibleChanged",e);this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,n=!1;const o=this.findChildrenRemovingPadding();for(let d=0,f=o.length;d<f;d++){const g=o[d];if(!g.isVisible())continue;const v=g.getColumnGroupShow();v==="open"?(e=!0,n=!0):v==="closed"?(t=!0,n=!0):(e=!0,t=!0)}const u=e&&t&&n;this.expandable!==u&&(this.expandable=u,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const e=[],t=n=>{for(const o of n)isProvidedColumnGroup(o)&&o.isPadding()?t(o.children):e.push(o)};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},DefaultColumnTypes={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};function createMergedColGroupDef(e,t,n){const o={},u=e.gos;return Object.assign(o,u.get("defaultColGroupDef")),Object.assign(o,t),u.validateColDef(o,n),o}var ColumnKeyCreator=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=_toStringOrNull(e);let n=0;for(;;){let o=e??t;if(o?n!==0&&(o+="_"+n):o=n,!this.existingKeys[o]){const u=String(o);return e&&n>0&&_warn(273,{providedId:e,usedId:u}),this.existingKeys[u]=!0,u}n++}}},GROUP_AUTO_COLUMN_ID="ag-Grid-AutoColumn",SELECTION_COLUMN_ID="ag-Grid-SelectionColumn",ROW_NUMBERS_COLUMN_ID="ag-Grid-RowNumbersColumn";function _getColumnsFromTree(e){const t=[],n=o=>{for(let u=0;u<o.length;u++){const d=o[u];isColumn(d)?t.push(d):isProvidedColumnGroup(d)&&n(d.getChildren())}};return n(e),t}function getWidthOfColsInList(e){return e.reduce((t,n)=>t+n.getActualWidth(),0)}function _destroyColumnTree(e,t,n){const o={};if(!t)return;depthFirstOriginalTreeSearch(null,t,d=>{o[d.getInstanceId()]=d}),n&&depthFirstOriginalTreeSearch(null,n,d=>{o[d.getInstanceId()]=null});const u=Object.values(o).filter(d=>d!=null);e.context.destroyBeans(u)}function isColumnGroupAutoCol(e){return e.getId().startsWith(GROUP_AUTO_COLUMN_ID)}function isColumnSelectionCol(e){return(typeof e=="string"?e:"getColId"in e?e.getColId():e.colId)?.startsWith(SELECTION_COLUMN_ID)??!1}function isRowNumberCol(e){return(typeof e=="string"?e:"getColId"in e?e.getColId():e.colId)?.startsWith(ROW_NUMBERS_COLUMN_ID)??!1}function isSpecialCol(e){return isColumnSelectionCol(e)||isRowNumberCol(e)}function convertColumnTypes(e){let t=[];return e instanceof Array?t=e:typeof e=="string"&&(t=e.split(",")),t}function _areColIdsEqual(e,t){return _areEqual(e,t,(n,o)=>n.getColId()===o.getColId())}function _updateColsMap(e){e.map={};for(const t of e.list)e.map[t.getId()]=t}function _convertColumnEventSourceType(e){return e==="optionsUpdated"?"gridOptionsChanged":e}function _columnsMatch(e,t){return e===t||e.colId==t||e.getColDef()===t}var getValueFactory=(e,t)=>(n,o)=>{const u={value1:void 0,value2:void 0};let d=!1;return e&&(e[n]!==void 0&&(u.value1=e[n],d=!0),_exists(o)&&e[o]!==void 0&&(u.value2=e[o],d=!0)),!d&&t&&(t[n]!==void 0&&(u.value1=t[n]),_exists(o)&&t[o]!==void 0&&(u.value2=t[o])),u};function _getColumnStateFromColDef(e,t){const n={...e,sort:void 0,colId:t},o=_getSortDefFromColDef(e);return o&&(n.sort=o.direction,n.sortType=o.type),n}function _getSortDefFromColDef(e){const{sort:t,initialSort:n}=e,o=_isSortDefValid(t)||_isSortDirectionValid(t),u=_isSortDefValid(n)||_isSortDirectionValid(n);return o?_getSortDefFromInput(t):u?_getSortDefFromInput(n):null}var depthFirstCallback=(e,t)=>{isProvidedColumnGroup(e)&&e.setupExpandable(),e.originalParent=t};function _createColumnTree(e,t=null,n,o,u){const d=new ColumnKeyCreator,{existingCols:f,existingGroups:g,existingColKeys:v}=extractExistingTreeData(o);d.addExistingKeys(v);const w=_recursivelyCreateColumns(e,t,0,n,f,d,g,u),{colGroupSvc:S}=e,R=S?.findMaxDepth(w,0)??0,_=S?S.balanceColumnTree(w,0,R,d):w;return depthFirstOriginalTreeSearch(null,_,depthFirstCallback),{columnTree:_,treeDepth:R}}function extractExistingTreeData(e){const t=[],n=[],o=[];return e&&depthFirstOriginalTreeSearch(null,e,u=>{if(isProvidedColumnGroup(u)){const d=u;n.push(d)}else{const d=u;o.push(d.getId()),t.push(d)}}),{existingCols:t,existingGroups:n,existingColKeys:o}}function _recursivelyCreateColumns(e,t,n,o,u,d,f,g){if(!t)return[];const{colGroupSvc:v}=e,w=new Array(t.length);for(let S=0;S<w.length;S++){const R=t[S];v&&isColumnGroupDef(R)?w[S]=v.createProvidedColumnGroup(o,R,n,u,d,f,g):w[S]=createColumn(e,o,R,u,d,g)}return w}function createColumn(e,t,n,o,u,d){const f=findExistingColumn(n,o);f&&o?.splice(f.idx,1);let g=f?.column;if(g){const v=_addColumnDefaultAndTypes(e,n,g.getColId());g.setColDef(v,n,d),_updateColumnState(e,g,v,d)}else{const v=u.getUniqueKey(n.colId,n.field),w=_addColumnDefaultAndTypes(e,n,v);g=new AgColumn(w,n,v,t),e.context.createBean(g)}return e.dataTypeSvc?.addColumnListeners(g),g}function updateSomeColumnState(e,t,n,o,u,d,f,g){const{sortSvc:v,pinnedCols:w,colFlex:S}=e;n!==void 0&&t.setVisible(!n,g),v&&(v.updateColSort(t,o,g),u!==void 0&&v.setColSortIndex(t,u)),d!==void 0&&w?.setColPinned(t,d),f!==void 0&&S?.setColFlex(t,f)}function _updateColumnState(e,t,n,o){updateSomeColumnState(e,t,n.hide,n.sort,n.sortIndex,n.pinned,n.flex,o);const u=t.getFlex();if(!(u!=null&&u>0))if(n.width!=null)t.setActualWidth(n.width,o);else{const d=t.getActualWidth();t.setActualWidth(d,o)}}function findExistingColumn(e,t){if(t)for(let n=0;n<t.length;n++){const o=t[n].getUserProvidedColDef();if(!o)continue;if(e.colId!=null){if(t[n].getId()===e.colId)return{idx:n,column:t[n]};continue}if(e.field!=null){if(o.field===e.field)return{idx:n,column:t[n]};continue}if(o===e)return{idx:n,column:t[n]}}}function _addColumnDefaultAndTypes(e,t,n,o){const{gos:u,dataTypeSvc:d}=e,f={},g=u.get("defaultColDef");_mergeDeep(f,g,!1,!0);const v=updateColDefAndGetColumnType(e,f,t,n);v&&assignColumnTypes(e,v,f);const w=f.cellDataType;_mergeDeep(f,t,!1,!0),w!==void 0&&(f.cellDataType=w);const S=u.get("autoGroupColumnDef"),R=_isColumnsSortingCoupledToGroup(u);return t.rowGroup&&S&&R&&_mergeDeep(f,{sort:S.sort,initialSort:S.initialSort},!1,!0),d?.postProcess(f),d?.validateColDef(f),u.validateColDef(f,n,o),f}function updateColDefAndGetColumnType(e,t,n,o){const u=e.dataTypeSvc?.updateColDefAndGetColumnType(t,n,o),d=n.type??u??t.type;return t.type=d,d?convertColumnTypes(d):void 0}function assignColumnTypes(e,t,n){if(!t.length)return;const o=Object.assign({},DefaultColumnTypes),u=e.gos.get("columnTypes")||{};for(const d of Object.keys(u)){const f=u[d];d in o?_warn(34,{key:d}):(f.type&&_warn(35),o[d]=f)}for(const d of t){const f=o[d.trim()];f?_mergeDeep(n,f,!1,!0):_warn(36,{t:d})}}function isColumnGroupDef(e){return e.children!==void 0}function depthFirstOriginalTreeSearch(e,t,n){if(t)for(let o=0;o<t.length;o++){const u=t[o];isProvidedColumnGroup(u)&&depthFirstOriginalTreeSearch(u,u.getChildren(),n),n(u,e)}}function placeLockedColumns(e,t){const n=[],o=[],u=[];return e.forEach(f=>{const g=f.getColDef().lockPosition;g==="right"?u.push(f):g==="left"||g===!0?n.push(f):o.push(f)}),t.get("enableRtl")?[...u,...o,...n]:[...n,...o,...u]}function doesMovePassMarryChildren(e,t){let n=!0;return depthFirstOriginalTreeSearch(null,t,o=>{if(!isProvidedColumnGroup(o))return;const u=o;if(!u.getColGroupDef()?.marryChildren)return;const g=[];for(const _ of u.getLeafColumns()){const F=e.indexOf(_);g.push(F)}const v=Math.max.apply(Math,g),w=Math.min.apply(Math,g),S=v-w,R=u.getLeafColumns().length-1;S>R&&(n=!1)}),n}function getCommonValue(e,t){if(!e||e.length==0)return;const n=t(e[0]);for(let o=1;o<e.length;o++)if(n!==t(e[o]))return;return n}function dispatchColumnPinnedEvent(e,t,n){if(!t.length)return;const o=t.length===1?t[0]:null,u=getCommonValue(t,d=>d.getPinned());e.dispatchEvent({type:"columnPinned",pinned:u??null,columns:t,column:o,source:n})}function dispatchColumnVisibleEvent(e,t,n){if(!t.length)return;const o=t.length===1?t[0]:null,u=getCommonValue(t,d=>d.isVisible());e.dispatchEvent({type:"columnVisible",visible:u,columns:t,column:o,source:n})}function dispatchColumnChangedEvent(e,t,n,o){e.dispatchEvent({type:t,columns:n,column:n&&n.length==1?n[0]:null,source:o})}function dispatchColumnResizedEvent(e,t,n,o,u=null){t?.length&&e.dispatchEvent({type:"columnResized",columns:t,column:t.length===1?t[0]:null,flexColumns:u,finished:n,source:o})}function _applyColumnState(e,t,n){const{colModel:o,rowGroupColsSvc:u,pivotColsSvc:d,autoColSvc:f,selectionColSvc:g,colAnimation:v,visibleCols:w,pivotResultCols:S,environment:R,valueColsSvc:_,eventSvc:F,gos:M}=e,I=o.getColDefCols()??[],N=g?.getColumns();if(!I.length&&!N?.length)return!1;if(t?.state&&!t.state.forEach)return _warn(32),!1;const B=(z,j,J,ie,se)=>{if(!z)return;const fe=getValueFactory(j,t.defaultState),de=fe("flex").value1,Ce=fe("sort").value1,be=fe("sortType").value1,xe=_isSortDirectionValid(Ce)||_isSortTypeValid(be),Ee=_normalizeSortType(be),ae=_normalizeSortDirection(Ce),oe=xe?{type:Ee,direction:ae}:void 0;if(updateSomeColumnState(e,z,fe("hide").value1,oe,fe("sortIndex").value1,fe("pinned").value1,de,n),de==null){const ee=fe("width").value1;if(ee!=null){const Z=z.getColDef().minWidth??R.getDefaultColumnMinWidth();Z!=null&&ee>=Z&&z.setActualWidth(ee,n)}}se||!z.isPrimary()||(_?.syncColumnWithState(z,n,fe),u?.syncColumnWithState(z,n,fe,J),d?.syncColumnWithState(z,n,fe,ie))},H=(z,j,J)=>{const ie=_compareColumnStatesAndDispatchEvents(e,n),se=j.slice(),fe={},de={},Ce=[],be=[],xe=[];let Ee=0;const ae=u?.columns.slice()??[],oe=d?.columns.slice()??[];for(const Q of z){const K=Q.colId;if(K.startsWith(GROUP_AUTO_COLUMN_ID)){Ce.push(Q),xe.push(Q);continue}if(isColumnSelectionCol(K)){be.push(Q),xe.push(Q);continue}const ue=J(K);ue?(B(ue,Q,fe,de,!1),_removeFromArray(se,ue)):(xe.push(Q),Ee+=1)}const ee=Q=>B(Q,null,fe,de,!1);se.forEach(ee),u?.sortColumns(comparatorByIndex.bind(u,fe,ae)),d?.sortColumns(comparatorByIndex.bind(d,de,oe)),o.refreshCols(!1,n);const Z=(Q,K,ne=[])=>{for(const ue of K){const ye=Q(ue.colId);_removeFromArray(ne,ye),B(ye,ue,null,null,!0)}ne.forEach(ee)};return Z(Q=>f?.getColumn(Q)??null,Ce,f?.getColumns()?.slice()),Z(Q=>g?.getColumn(Q)??null,be,g?.getColumns()?.slice()),orderLiveColsLikeState(t,o,M),w.refresh(n),F.dispatchEvent({type:"columnEverythingChanged",source:n}),ie(),{unmatchedAndAutoStates:xe,unmatchedCount:Ee}};v?.start();let{unmatchedAndAutoStates:U,unmatchedCount:$}=H(t.state||[],I,z=>o.getColDefCol(z));if(U.length>0||_exists(t.defaultState)){const z=S?.getPivotResultCols()?.list??[];$=H(U,z,j=>S?.getPivotResultCol(j)??null).unmatchedCount}return v?.finish(),$===0}function _resetColumnState(e,t){const{colModel:n,autoColSvc:o,selectionColSvc:u,eventSvc:d,gos:f}=e,g=n.getColDefCols();if(!g?.length)return;const v=n.getColDefColTree(),w=_getColumnsFromTree(v),S=[];let R=1e3,_=1e3;const F=H=>{const U=getColumnStateFromColDef(H);_missing(U.rowGroupIndex)&&U.rowGroup&&(U.rowGroupIndex=R++),_missing(U.pivotIndex)&&U.pivot&&(U.pivotIndex=_++),S.push(U)};o?.getColumns()?.forEach(F),u?.getColumns()?.forEach(F),w?.forEach(F),_applyColumnState(e,{state:S},t);const M=o?.getColumns()??[],B=[...u?.getColumns()??[],...M,...g].map(H=>({colId:H.colId}));_applyColumnState(e,{state:B,applyOrder:!0},t),d.dispatchEvent(_addGridCommonParams(f,{type:"columnsReset",source:t}))}function _compareColumnStatesAndDispatchEvents(e,t){const{rowGroupColsSvc:n,pivotColsSvc:o,valueColsSvc:u,colModel:d,sortSvc:f,eventSvc:g}=e,v={rowGroupColumns:n?.columns.slice()??[],pivotColumns:o?.columns.slice()??[],valueColumns:u?.columns.slice()??[]},w=_getColumnState(e),S={};for(const R of w)S[R.colId]=R;return()=>{const R=(j,J,ie,se)=>{const fe=J.map(se),de=ie.map(se);if(_areEqual(fe,de))return;const be=new Set(J);for(const Ee of ie)be.delete(Ee)||be.add(Ee);const xe=[...be];g.dispatchEvent({type:j,columns:xe,column:xe.length===1?xe[0]:null,source:t})},_=j=>{const J=[];return d.forAllCols(ie=>{const se=S[ie.getColId()];se&&j(se,ie)&&J.push(ie)}),J},F=j=>j.getColId();R("columnRowGroupChanged",v.rowGroupColumns,n?.columns??[],F),R("columnPivotChanged",v.pivotColumns,o?.columns??[],F);const I=_((j,J)=>{const ie=j.aggFunc!=null,se=ie!=J.isValueActive(),fe=ie&&j.aggFunc!=J.getAggFunc();return se||fe});I.length>0&&dispatchColumnChangedEvent(g,"columnValueChanged",I,t),dispatchColumnResizedEvent(g,_((j,J)=>j.width!=J.getActualWidth()),!0,t),dispatchColumnPinnedEvent(g,_((j,J)=>j.pinned!=J.getPinned()),t),dispatchColumnVisibleEvent(g,_((j,J)=>j.hide==J.isVisible()),t);const $=_((j,J)=>!_areSortDefsEqual(J.getSortDef(),{type:_normalizeSortType(j.sortType),direction:_normalizeSortDirection(j.sort)})||j.sortIndex!=J.getSortIndex());$.length>0&&f?.dispatchSortChangedEvents(t,$);const z=_getColumnState(e);normaliseColumnMovedEventForColumnState(w,z,t,d,g)}}function _getColumnState(e){const{colModel:t,rowGroupColsSvc:n,pivotColsSvc:o}=e,u=t.getColDefCols();if(_missing(u)||!t.isAlive())return[];const d=n?.columns,f=o?.columns,g=[],v=S=>{const R=S.isRowGroupActive()&&d?d.indexOf(S):null,_=S.isPivotActive()&&f?f.indexOf(S):null,F=S.isValueActive()?S.getAggFunc():null,M=S.getSortIndex()!=null?S.getSortIndex():null;g.push({colId:S.getColId(),width:S.getActualWidth(),hide:!S.isVisible(),pinned:S.getPinned(),sort:S.getSort(),sortType:S.getSortDef()?.type,sortIndex:M,aggFunc:F,rowGroup:S.isRowGroupActive(),rowGroupIndex:R,pivot:S.isPivotActive(),pivotIndex:_,flex:S.getFlex()??null})};t.forAllCols(S=>v(S));const w=new Map(t.getCols().map((S,R)=>[S.getColId(),R]));return g.sort((S,R)=>{const _=w.has(S.colId)?w.get(S.colId):-1,F=w.has(R.colId)?w.get(R.colId):-1;return _-F}),g}function getColumnStateFromColDef(e){const t=(N,B)=>N??B??null,n=e.getColDef(),o=_getSortDefFromInput(t(n.sort,n.initialSort)),u=o.direction,d=o.type,f=t(n.sortIndex,n.initialSortIndex),g=t(n.hide,n.initialHide),v=t(n.pinned,n.initialPinned),w=t(n.width,n.initialWidth),S=t(n.flex,n.initialFlex);let R=t(n.rowGroupIndex,n.initialRowGroupIndex),_=t(n.rowGroup,n.initialRowGroup);R==null&&!_&&(R=null,_=null);let F=t(n.pivotIndex,n.initialPivotIndex),M=t(n.pivot,n.initialPivot);F==null&&!M&&(F=null,M=null);const I=t(n.aggFunc,n.initialAggFunc);return{colId:e.getColId(),sort:u,sortType:d,sortIndex:f,hide:g,pinned:v,width:w,flex:S,rowGroup:_,rowGroupIndex:R,pivot:M,pivotIndex:F,aggFunc:I}}function orderLiveColsLikeState(e,t,n){if(!e.applyOrder||!e.state)return;const o=[];for(const u of e.state)u.colId!=null&&o.push(u.colId);sortColsLikeKeys(t.cols,o,t,n)}function sortColsLikeKeys(e,t,n,o){if(e==null)return;let u=[];const d={};for(const g of t){if(d[g])continue;const v=e.map[g];v&&(u.push(v),d[g]=!0)}let f=0;for(const g of e.list){const v=g.getColId();if(d[v]!=null)continue;v.startsWith(GROUP_AUTO_COLUMN_ID)?u.splice(f++,0,g):u.push(g)}if(u=placeLockedColumns(u,o),!doesMovePassMarryChildren(u,n.getColTree())){_warn(39);return}e.list=u}function normaliseColumnMovedEventForColumnState(e,t,n,o,u){const d={};for(const S of t)d[S.colId]=S;const f={};for(const S of e)d[S.colId]&&(f[S.colId]=!0);const g=e.filter(S=>f[S.colId]),v=t.filter(S=>f[S.colId]),w=[];v.forEach((S,R)=>{const _=g?.[R];if(_&&_.colId!==S.colId){const F=o.getCol(_.colId);F&&w.push(F)}}),w.length&&u.dispatchEvent({type:"columnMoved",columns:w,column:w.length===1?w[0]:null,finished:!0,source:n})}var comparatorByIndex=(e,t,n,o)=>{const u=e[n.getId()],d=e[o.getId()],f=u!=null,g=d!=null;if(f&&g)return u-d;if(f)return-1;if(g)return 1;const v=t.indexOf(n),w=t.indexOf(o),S=v>=0,R=w>=0;return S&&R?v-w:S?-1:1};function createUniqueColumnGroupId(e,t){return e+"_"+t}function isColumnGroup(e){return e instanceof AgColumnGroup}var AgColumnGroup=class extends BeanStub{constructor(e,t,n,o){super(),this.providedColumnGroup=e,this.groupId=t,this.partId=n,this.pinned=o,this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null,this.colIdSanitised=_escapeString(this.getUniqueId())}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}getUniqueId(){return createUniqueColumnGroupId(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(t=>t.isMoving())}checkLeft(){for(const e of this.displayedChildren)isColumnGroup(e)&&e.checkLeft();if(this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const t=_last(this.displayedChildren).getLeft();this.setLeft(t)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;for(const t of this.displayedChildren??[])e+=t.getActualWidth();return e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;for(const t of this.displayedChildren)t.isResizable()&&(e=!0);return e}getMinWidth(){let e=0;for(const t of this.displayedChildren)e+=t.getMinWidth();return e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){return!!this.getColGroupDef()?.autoHeaderHeight}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){for(const t of this.displayedChildren??[])isColumn(t)?e.push(t):isColumnGroup(t)&&t.addDisplayedLeafColumns(e)}addLeafColumns(e){for(const t of this.children??[])isColumn(t)?e.push(t):isColumnGroup(t)&&t.addLeafColumns(e)}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return!this.isPadding()||!e?.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e?.isPadding();)e=e.getParent();if(!(e?e.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}for(const n of this.children??[]){if(isColumnGroup(n)&&!n.displayedChildren?.length)continue;switch(n.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(n);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(n);break;default:this.displayedChildren.push(n);break}}this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},KeyCode={BACKSPACE:"Backspace",TAB:"Tab",ENTER:"Enter",ESCAPE:"Escape",SPACE:" ",LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown",DELETE:"Delete",F2:"F2",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",PAGE_HOME:"Home",PAGE_END:"End",A:"KeyA",C:"KeyC",D:"KeyD",V:"KeyV",X:"KeyX",Y:"KeyY",Z:"KeyZ"},A_KEYCODE=65,C_KEYCODE=67,V_KEYCODE=86,D_KEYCODE=68,Z_KEYCODE=90,Y_KEYCODE=89;function _normaliseQwertyAzerty(e){const{keyCode:t}=e;let n;switch(t){case A_KEYCODE:n=KeyCode.A;break;case C_KEYCODE:n=KeyCode.C;break;case V_KEYCODE:n=KeyCode.V;break;case D_KEYCODE:n=KeyCode.D;break;case Z_KEYCODE:n=KeyCode.Z;break;case Y_KEYCODE:n=KeyCode.Y;break;default:n=e.code}return n}function _wrapInterval(e,t){return new AgPromise(n=>{n(window.setInterval(e,t))})}var AgPromise=class pd{constructor(t){this.status=0,this.resolution=null,this.waiters=[],t(n=>this.onDone(n),n=>this.onReject(n))}static all(t){return t.length?new pd(n=>{let o=t.length;const u=new Array(o);t.forEach((d,f)=>{d.then(g=>{u[f]=g,o--,o===0&&n(u)})})}):pd.resolve()}static resolve(t=null){return new pd(n=>n(t))}then(t){return new pd(n=>{this.status===1?n(t(this.resolution)):this.waiters.push(o=>n(t(o)))})}onDone(t){this.status=1,this.resolution=t;for(const n of this.waiters)n(t)}onReject(t){}},RefPlaceholder=null;function _isComponent(e){return typeof e?.getGui=="function"}function _createElement(e){return _createAgElement(e)}function _createIcon(e,t,n){const o=_createIconNoSpan(e,t,n);if(o){const{className:d}=o;if(typeof d=="string"&&d.includes("ag-icon")||typeof d=="object"&&d["ag-icon"])return o}const u=_createElement({tag:"span"});return u.appendChild(o),u}function _createIconNoSpan(e,t,n){let o=null;e==="smallDown"?_warn(262):e==="smallLeft"?_warn(263):e==="smallRight"&&_warn(264);const u=n?.getColDef().icons;if(u&&(o=u[e]),t.gos&&!o){const d=t.gos.get("icons");d&&(o=d[e])}if(o){let d;if(typeof o=="function")d=o();else if(typeof o=="string")d=o;else{_warn(38,{iconName:e});return}if(typeof d=="string")return _loadTemplate(d);if(_isNodeOrElement(d))return d;_warn(133,{iconName:e});return}else{const d=t.registry.getIcon(e);return d||t.validation?.validateIcon(e),_createElement({tag:"span",cls:`ag-icon ag-icon-${d??e}`,role:"presentation",attrs:{unselectable:"on"}})}}var CssClassManager=class{constructor(e){this.cssClassStates={},this.getGui=e}toggleCss(e,t){if(!e)return;if(e.includes(" ")){const o=(e||"").split(" ");if(o.length>1){for(const u of o)this.toggleCss(u,t);return}}this.cssClassStates[e]!==t&&e.length&&(this.getGui()?.classList.toggle(e,t),this.cssClassStates[e]=t)}},compIdSequence=0,AgComponentStub=class extends AgBeanStub{constructor(e,t){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=compIdSequence++,this.cssManager=new CssClassManager(()=>this.eGui),this.componentSelectors=new Map((t??[]).map(n=>[n.selector,n])),e&&this.setTemplate(e)}preConstruct(){this.wireTemplate(this.getGui()),this.addGlobalCss()}wireTemplate(e,t){e&&this.gos&&(this.applyElementsToComponent(e),this.createChildComponentsFromTags(e,t))}getCompId(){return this.compId}getDataRefAttribute(e){return e.getAttribute?e.getAttribute(DataRefAttribute):null}applyElementsToComponent(e,t,n,o=null){if(t===void 0&&(t=this.getDataRefAttribute(e)),t){const u=this[t];if(u===RefPlaceholder)this[t]=o??e;else{const d=n?.[t];if(!this.suppressDataRefValidation&&!d)throw new Error(`data-ref: ${t} on ${this.constructor.name} with ${u}`)}}}createChildComponentsFromTags(e,t){const n=[];for(const o of e.childNodes??[])n.push(o);for(const o of n){if(!(o instanceof HTMLElement))continue;const u=this.createComponentFromElement(o,d=>{const f=d.getGui();if(f)for(const g of o.attributes??[])f.setAttribute(g.name,g.value)},t);if(u){if(u.addItems&&o.children.length){this.createChildComponentsFromTags(o,t);const d=Array.prototype.slice.call(o.children);u.addItems(d)}this.swapComponentForNode(u,e,o)}else o.childNodes&&this.createChildComponentsFromTags(o,t)}}createComponentFromElement(e,t,n){const o=e.nodeName,u=this.getDataRefAttribute(e),d=o.indexOf("AG-")===0,f=d?this.componentSelectors.get(o):null;let g=null;if(f){const v=n&&u?n[u]:void 0;g=new f.component(v),g.setParentComponent(this),this.createBean(g,null,t)}else if(d)throw new Error(`selector: ${o}`);return this.applyElementsToComponent(e,u,n,g),g}swapComponentForNode(e,t,n){const o=e.getGui();t.replaceChild(o,n),t.insertBefore(document.createComment(n.nodeName),o),this.addDestroyFunc(this.destroyBean.bind(this,e))}activateTabIndex(e,t){const n=t??this.gos.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui());for(const o of e)o.setAttribute("tabindex",n.toString())}setTemplate(e,t,n){let o;typeof e=="string"||e==null?o=_loadTemplate(e):o=_createAgElement(e),this.setTemplateFromElement(o,t,n)}setTemplateFromElement(e,t,n,o=!1){if(this.eGui=e,this.suppressDataRefValidation=o,t)for(let u=0;u<t.length;u++){const d=t[u];this.componentSelectors.set(d.selector,d)}this.wireTemplate(e,n)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}getContainerAndElement(e,t){let n=t;return e==null?null:(n||(n=this.eGui),_isNodeOrElement(e)?{element:e,parent:n}:{element:e.getGui(),parent:n})}prependChild(e,t){const{element:n,parent:o}=this.getContainerAndElement(e,t)||{};!n||!o||o.prepend(n)}appendChild(e,t){const{element:n,parent:o}=this.getContainerAndElement(e,t)||{};!n||!o||o.appendChild(n)}isDisplayed(){return this.displayed}setVisible(e,t={}){if(e!==this.visible){this.visible=e;const{skipAriaHidden:n}=t;_setVisible(this.eGui,e,{skipAriaHidden:n})}}setDisplayed(e,t={}){if(e!==this.displayed){this.displayed=e;const{skipAriaHidden:n}=t;_setDisplayed(this.eGui,e,{skipAriaHidden:n});const o={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(o)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),super.destroy()}addGuiEventListener(e,t,n){this.eGui.addEventListener(e,t,n),this.addDestroyFunc(()=>this.eGui.removeEventListener(e,t))}addCss(e){this.cssManager.toggleCss(e,!0)}removeCss(e){this.cssManager.toggleCss(e,!1)}toggleCss(e,t){this.cssManager.toggleCss(e,t)}registerCSS(e){this.css===globalCssAdded?(this.css=[e],this.addGlobalCss()):(this.css||(this.css=[]),this.css.push(e))}addGlobalCss(){if(Array.isArray(this.css)){const e="component-"+Object.getPrototypeOf(this)?.constructor?.name;for(const t of this.css??[])this.beans.environment.addGlobalCSS(t,e)}this.css=globalCssAdded}},globalCssAdded=Symbol(),Component=class extends AgComponentStub{},dragAndDropImageComponentCSS=".ag-dnd-ghost{align-items:center;background-color:var(--ag-drag-and-drop-image-background-color);border:var(--ag-drag-and-drop-image-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-drag-and-drop-image-shadow);color:var(--ag-text-color);cursor:move;display:flex;font-weight:500;gap:var(--ag-cell-widget-spacing);height:var(--ag-header-height);overflow:hidden;padding-left:var(--ag-cell-horizontal-padding);padding-right:var(--ag-cell-horizontal-padding);text-overflow:ellipsis;transform:translateY(calc(var(--ag-spacing)*2));white-space:nowrap}.ag-dnd-ghost-not-allowed{border:var(--ag-drag-and-drop-image-not-allowed-border)}",DragAndDropElement={tag:"div",children:[{tag:"div",ref:"eGhost",cls:"ag-dnd-ghost ag-unselectable",children:[{tag:"span",ref:"eIcon",cls:"ag-dnd-ghost-icon ag-shake-left-to-right"},{tag:"div",ref:"eLabel",cls:"ag-dnd-ghost-label"}]}]},DragAndDropImageComponent=class extends Component{constructor(){super(),this.dragSource=null,this.eIcon=RefPlaceholder,this.eLabel=RefPlaceholder,this.eGhost=RefPlaceholder,this.registerCSS(dragAndDropImageComponentCSS)}postConstruct(){const e=t=>_createIcon(t,this.beans,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate(DragAndDropElement),this.beans.environment.applyThemeClasses(this.eGhost)}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t){const{eGhost:n,eIcon:o,dragSource:u,dropIconMap:d,gos:f}=this;_clearElement(o);let g=null;e||(e=u?.getDefaultIconName?u.getDefaultIconName():"notAllowed"),g=d[e],n.classList.toggle("ag-dnd-ghost-not-allowed",e==="notAllowed"),o.classList.toggle("ag-shake-left-to-right",t),!(g===d.hide&&f.get("suppressDragLeaveHidesColumns"))&&g&&o.appendChild(g)}setLabel(e){this.eLabel.textContent=e}},BaseDragAndDropService=class extends AgBeanStub{constructor(){super(...arguments),this.beanName="dragAndDrop",this.dragSourceAndParamsList=[],this.dragItem=null,this.dragInitialSourcePointerOffsetX=0,this.dragInitialSourcePointerOffsetY=0,this.lastMouseEvent=null,this.lastDraggingEvent=null,this.dragSource=null,this.dragImageCompPromise=null,this.dragImageComp=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0,this.dropTargets=[],this.externalDropZoneCount=0,this.lastDropTarget=null}addDragSource(e,t=!1){const n={capturePointer:!0,dragSource:e,eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:o=>this.onDragStart(e,o),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push(n),this.beans.dragSvc.addDragSource(n)}setDragImageCompIcon(e,t=!1){const n=this.dragImageComp;n&&(t||this.dragImageLastIcon!==e)&&(this.dragImageLastIcon=e,n.setIcon(e,t))}removeDragSource(e){const{dragSourceAndParamsList:t,beans:n}=this;for(let o=0,u=t.length;o<u;o++)if(t[o].dragSource===e){const d=t[o];n.dragSvc?.removeDragSource(d),t.splice(o,1);break}}destroy(){const{dragSourceAndParamsList:e,dropTargets:t,beans:n}=this,o=n.dragSvc;for(const u of e)o?.removeDragSource(u);e.length=0,t.length=0,this.externalDropZoneCount=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){const e=this.lastMouseEvent;e&&this.onDragging(e,!0)}onDragStart(e,t){this.lastMouseEvent=t,this.dragSource=e,this.dragItem=e.getDragItem();const n=e.eElement.getBoundingClientRect();this.dragInitialSourcePointerOffsetX=t.clientX-n.left,this.dragInitialSourcePointerOffsetY=t.clientY-n.top,e.onDragStarted?.(),this.createAndUpdateDragImageComp(e)}onDragStop(e){const{dragSource:t,lastDropTarget:n}=this;if(t?.onDragStopped?.(),n){const o=this.dropTargetEvent(n,e,!1);n.onDragStop?.(o)}this.clearDragAndDropProperties()}onDragCancel(){const{dragSource:e,lastDropTarget:t,lastMouseEvent:n}=this;if(e?.onDragCancelled?.(),t&&n){const o=this.dropTargetEvent(t,n,!1);t.onDragCancel?.(o)}this.clearDragAndDropProperties()}onDragging(e,t=!1){this.positionDragImageComp(e);const n=this.findCurrentDropTarget(e),{lastDropTarget:o,dragSource:u,dragItem:d}=this;let f=!1;if(n!==o){if(f=!0,o){const g=this.dropTargetEvent(o,e,t);o.onDragLeave?.(g)}if(o!==null&&!n?this.handleExit(u,d):o===null&&n&&this.handleEnter(u,d),n){const g=this.dropTargetEvent(n,e,t);n.onDragEnter?.(g)}this.lastDropTarget=n}else if(n){const g=this.dropTargetEvent(n,e,t);n.onDragging?.(g),g?.changed&&(f=!0)}this.lastMouseEvent=e,f&&this.updateDragImageComp()}clearDragAndDropProperties(){this.removeDragImageComp(this.dragImageComp),this.dragImageCompPromise=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0,this.lastMouseEvent=null,this.lastDraggingEvent=null,this.lastDropTarget=null,this.dragItem=null,this.dragInitialSourcePointerOffsetX=0,this.dragInitialSourcePointerOffsetY=0,this.dragSource=null}getAllContainersFromDropTarget(e){const t=e.getContainer(),n=e.getSecondaryContainers?.(),o=n?.length;if(!o)return[[t]];const u=new Array(o+1);u[0]=[t];for(let d=0;d<o;++d)u[d+1]=n[d];return u}isMouseOnDropTarget(e,t){const n=this.getAllContainersFromDropTarget(t);let o=!1;const u=(g,v)=>{for(const w of v){const{width:S,height:R,left:_,right:F,top:M,bottom:I}=w.getBoundingClientRect();if(S===0||R===0)return!1;const N=g.clientX>=_&&g.clientX<F,B=g.clientY>=M&&g.clientY<I;if(!N||!B)return!1}return!0};for(const g of n)if(u(e,g)){o=!0;break}const{eElement:d,type:f}=this.dragSource;return t.targetContainsSource&&!t.getContainer().contains(d)?!1:o&&t.isInterestedIn(f,d)}findCurrentDropTarget(e){const t=[],n=this.dropTargets;for(let f=0,g=n.length;f<g;++f){const v=n[f];this.isMouseOnDropTarget(e,v)&&t.push(v)}const o=t.length;if(o===0)return null;if(o===1)return t[0];const d=_getRootNode(this.beans).elementsFromPoint(e.clientX,e.clientY);for(let f=0,g=d.length;f<g;++f){const v=d[f];for(let w=0,S=t.length;w<S;w++){const R=t[w],_=this.getAllContainersFromDropTarget(R);let F=!1;for(let M=0,I=_.length;M<I&&!F;M++){const N=_[M];for(let B=0,H=N.length;B<H;B++)if(N[B]===v){F=!0;break}}if(F)return R}}return null}addDropTarget(e){this.dropTargets.push(e),e.external&&this.externalDropZoneCount++}removeDropTarget(e){const t=e.getContainer(),n=this.dropTargets;let o=0;for(let u=0,d=n.length;u<d;++u){const f=n[u];if(f.getContainer()===t){f.external&&--this.externalDropZoneCount;continue}o!==u&&(n[o]=f),++o}n.length=o}hasExternalDropZones(){return this.externalDropZoneCount>0}findExternalZone(e){const t=this.dropTargets;for(let n=0,o=t.length;n<o;++n){const u=t[n];if(u.external&&u.getContainer()===e)return u}return null}dropTargetEvent(e,t,n){const{dragSource:o,dragItem:u,lastDraggingEvent:d,lastMouseEvent:f,dragInitialSourcePointerOffsetX:g,dragInitialSourcePointerOffsetY:v}=this,w=e.getContainer(),S=w.getBoundingClientRect(),{clientX:R,clientY:_}=t,F=R-(f?.clientX||0),M=_-(f?.clientY||0),I=this.createEvent({event:t,x:R-S.left,y:_-S.top,vDirection:M>0?"down":M<0?"up":null,hDirection:F<0?"left":F>0?"right":null,initialSourcePointerOffsetX:g,initialSourcePointerOffsetY:v,dragSource:o,fromNudge:n,dragItem:u,dropZoneTarget:w,dropTarget:d?.dropTarget??null,changed:!!d?.changed});return this.lastDraggingEvent=I,I}positionDragImageComp(e){const t=this.dragImageComp?.getGui();t&&_anchorElementToMouseMoveEvent(t,e,this.beans)}removeDragImageComp(e){this.dragImageComp===e&&(this.dragImageComp=null),e&&(e.getGui()?.remove(),this.destroyBean(e))}createAndUpdateDragImageComp(e){const t=this.createDragImageComp(e)??null;this.dragImageCompPromise=t,t?.then(n=>{const o=this.lastMouseEvent;if(t!==this.dragImageCompPromise||!o||!this.isAlive()){this.destroyBean(n);return}this.dragImageCompPromise=null,this.dragImageLastIcon=void 0,this.dragImageLastLabel=void 0;const u=this.dragImageComp;u!==n&&(this.dragImageComp=n,this.removeDragImageComp(u)),n&&(this.appendDragImageComp(n),this.updateDragImageComp(),this.positionDragImageComp(o))})}appendDragImageComp(e){const t=e.getGui(),n=t.style;n.position="absolute",n.zIndex="9999",this.beans.dragSvc?.hasPointerCapture()&&(n.pointerEvents="none"),this.gos.setInstanceDomData(t),this.beans.environment.applyThemeClasses(t),n.top="20px",n.left="20px";const o=_getPageBody(this.beans);o?o.appendChild(t):this.warnNoBody()}updateDragImageComp(){const{dragImageComp:e,dragSource:t,lastDropTarget:n,lastDraggingEvent:o,dragImageLastLabel:u}=this;if(!e)return;this.setDragImageCompIcon(n?.getIconName?.(o)??null);let d=t?.dragItemName;typeof d=="function"&&(d=d(o)),d||(d=""),u!==d&&(this.dragImageLastLabel=d,e.setLabel(d))}};function isColumnFilterComp(e){return typeof e=="object"&&!!e.component}function doesImplementIComponent(e){return e?e.prototype&&"getGui"in e.prototype:!1}function _getUserCompKeys(e,t,n,o){const{name:u}=n;let d,f,g,v,w,S;if(t){const R=t,_=R[u+"Selector"],F=_?_(o):null,M=I=>{typeof I=="string"?d=I:I!=null&&I!==!0&&(e.isFrameworkComponent(I)?g=I:f=I)};F?(M(F.component),v=F.params,w=F.popup,S=F.popupPosition):M(R[u])}return{compName:d,jsComp:f,fwComp:g,paramsFromSelector:v,popupFromSelector:w,popupPositionFromSelector:S}}var UserComponentFactory=class extends BeanStub{constructor(){super(...arguments),this.beanName="userCompFactory"}wireBeans(e){this.agCompUtils=e.agCompUtils,this.registry=e.registry,this.frameworkCompWrapper=e.frameworkCompWrapper,this.gridOptions=e.gridOptions}getCompDetailsFromGridOptions(e,t,n,o=!1){return this.getCompDetails(this.gridOptions,e,t,n,o)}getCompDetails(e,t,n,o,u=!1){const{name:d,cellRenderer:f}=t;let{compName:g,jsComp:v,fwComp:w,paramsFromSelector:S,popupFromSelector:R,popupPositionFromSelector:_}=_getUserCompKeys(this.beans.frameworkOverrides,e,t,o),F,M;const I=U=>{const $=this.registry.getUserComponent(d,U);$&&(v=$.componentFromFramework?void 0:$.component,w=$.componentFromFramework?$.component:void 0,F=$.params,M=$.processParams)};if(g!=null&&I(g),v==null&&w==null&&n!=null&&I(n),v&&f&&!doesImplementIComponent(v)&&(v=this.agCompUtils?.adaptFunction(t,v)),!v&&!w){const{validation:U}=this.beans;u&&(g!==n||!n)?g?U?.isProvidedUserComp(g)||_error(50,{compName:g}):n?U||_error(260,{...this.gos.getModuleErrorParams(),propName:d,compName:n}):_error(216,{name:d}):n&&!U&&_error(146,{comp:n});return}const N=this.mergeParams(e,t,o,S,F,M),B=v==null,H=v??w;return{componentFromFramework:B,componentClass:H,params:N,type:t,popupFromSelector:R,popupPositionFromSelector:_,newAgStackInstance:()=>this.newAgStackInstance(H,B,N,t)}}newAgStackInstance(e,t,n,o){const u=!t;let d;u?d=new e:d=this.frameworkCompWrapper.wrap(e,o.mandatoryMethods,o.optionalMethods,o),this.createBean(d);const f=d.init?.(n);return f==null?AgPromise.resolve(d):f.then(()=>d)}mergeParams(e,t,n,o=null,u,d){const f={...n,...u},v=e?.[t.name+"Params"];if(typeof v=="function"){const w=v(n);_mergeDeep(f,w)}else typeof v=="object"&&_mergeDeep(f,v);return _mergeDeep(f,o),d?d(f):f}},DateComponent={name:"dateComponent",mandatoryMethods:["getDate","setDate"],optionalMethods:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","refresh"]},DragAndDropImageComponent2={name:"dragAndDropImageComponent",mandatoryMethods:["setIcon","setLabel"]},HeaderComponent={name:"headerComponent",optionalMethods:["refresh"]},InnerHeaderComponent={name:"innerHeaderComponent"},InnerHeaderGroupComponent={name:"innerHeaderGroupComponent"},HeaderGroupComponent={name:"headerGroupComponent"},CellRendererComponent={name:"cellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},LoadingCellRendererComponent={name:"loadingCellRenderer",cellRenderer:!0},CellEditorComponent={name:"cellEditor",mandatoryMethods:["getValue"],optionalMethods:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},TooltipComponent={name:"tooltipComponent"},FilterComponent={name:"filter",mandatoryMethods:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethods:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},FloatingFilterComponent={name:"floatingFilterComponent",mandatoryMethods:["onParentModelChanged"],optionalMethods:["afterGuiAttached","refresh"]},FullWidth={name:"fullWidthCellRenderer",optionalMethods:["refresh","afterGuiAttached"],cellRenderer:!0},FullWidthLoading={name:"loadingCellRenderer",cellRenderer:!0},FullWidthGroup={name:"groupRowRenderer",optionalMethods:["afterGuiAttached"],cellRenderer:!0},FullWidthDetail={name:"detailCellRenderer",optionalMethods:["refresh"],cellRenderer:!0};function _getDragAndDropImageCompDetails(e,t){return e.getCompDetailsFromGridOptions(DragAndDropImageComponent2,"agDragAndDropImage",t,!0)}function _getHeaderCompDetails(e,t,n){return e.getCompDetails(t,HeaderComponent,"agColumnHeader",n)}function _getInnerHeaderCompDetails(e,t,n){return e.getCompDetails(t,InnerHeaderComponent,void 0,n)}function _getHeaderGroupCompDetails(e,t){const n=t.columnGroup.getColGroupDef();return e.getCompDetails(n,HeaderGroupComponent,"agColumnGroupHeader",t)}function _getInnerHeaderGroupCompDetails(e,t,n){return e.getCompDetails(t,InnerHeaderGroupComponent,void 0,n)}function _getFullWidthCellRendererDetails(e,t){return e.getCompDetailsFromGridOptions(FullWidth,void 0,t,!0)}function _getFullWidthLoadingCellRendererDetails(e,t){return e.getCompDetailsFromGridOptions(FullWidthLoading,"agLoadingCellRenderer",t,!0)}function _getFullWidthGroupCellRendererDetails(e,t){return e.getCompDetailsFromGridOptions(FullWidthGroup,"agGroupRowRenderer",t,!0)}function _getFullWidthDetailCellRendererDetails(e,t){return e.getCompDetailsFromGridOptions(FullWidthDetail,"agDetailCellRenderer",t,!0)}function _getCellRendererDetails(e,t,n){return e.getCompDetails(t,CellRendererComponent,void 0,n)}function _getLoadingCellRendererDetails(e,t,n){return e.getCompDetails(t,LoadingCellRendererComponent,"agSkeletonCellRenderer",n,!0)}function _getCellEditorDetails(e,t,n){return e.getCompDetails(t,CellEditorComponent,"agCellEditor",n,!0)}function _getFilterDetails(e,t,n,o){const u=t.filter;return isColumnFilterComp(u)&&(t={filter:u.component,filterParams:t.filterParams}),e.getCompDetails(t,FilterComponent,o,n,!0)}function _getDateCompDetails(e,t,n){return e.getCompDetails(t,DateComponent,"agDateInput",n,!0)}function _getTooltipCompDetails(e,t){return e.getCompDetails(t.colDef,TooltipComponent,"agTooltipComponent",t,!0)}function _getFloatingFilterCompDetails(e,t,n,o){return e.getCompDetails(t,FloatingFilterComponent,o,n)}function _getFilterCompKeys(e,t){return _getUserCompKeys(e,t,FilterComponent)}function _mergeFilterParamsWithApplicationProvidedParams(e,t,n){return e.mergeParams(t,FilterComponent,n)}var DragAndDropService=class extends BaseDragAndDropService{createEvent(e){return _addGridCommonParams(this.gos,e)}createDragImageComp(e){const{gos:t,beans:n}=this;return _getDragAndDropImageCompDetails(n.userCompFactory,_addGridCommonParams(t,{dragSource:e}))?.newAgStackInstance()}handleEnter(e,t){e?.onGridEnter?.(t)}handleExit(e,t){e?.onGridExit?.(t)}warnNoBody(){_warn(54)}isDropZoneWithinThisGrid(e){return this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody.contains(e.dropZoneTarget)}registerGridDropTarget(e,t){const n={getContainer:e,isInterestedIn:o=>o===1||o===0,getIconName:()=>"notAllowed"};this.addDropTarget(n),t.addDestroyFunc(()=>this.removeDropTarget(n))}};function getElement(e){return{tag:"div",cls:e}}var FilterButtonComp=class extends Component{constructor(e){const{className:t="ag-filter-apply-panel"}=e??{};super(getElement(t)),this.listeners=[],this.validationMessage=null,this.className=t}updateButtons(e,t){const n=this.buttons;if(this.buttons=e,n===e)return;const o=this.getGui();_clearElement(o);let u;this.destroyListeners();const d=document.createDocumentFragment(),f=this.className,g=({type:w,label:S})=>{const R=B=>{this.dispatchLocalEvent({type:w,event:B})};["apply","clear","reset","cancel"].includes(w)||_warn(75);const _=w==="apply",M=_createElement({tag:"button",attrs:{type:_&&t?"submit":"button"},ref:`${w}FilterButton`,cls:`ag-button ag-standard-button ${f}-button${_?" "+f+"-apply-button":""}`,children:S});this.activateTabIndex([M]),_&&(u=M);const I=B=>{B.key===KeyCode.ENTER&&(B.preventDefault(),R(B))},N=this.listeners;M.addEventListener("click",R),N.push(()=>M.removeEventListener("click",R)),M.addEventListener("keydown",I),N.push(()=>M.removeEventListener("keydown",I)),d.append(M)};for(const w of e)g(w);this.eApply=u;const v=this.validationTooltipFeature;u&&!v?this.validationTooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{getGui:()=>this.eApply,getLocation:()=>"advancedFilter",getTooltipShowDelayOverride:()=>1e3})):!u&&v&&(this.validationTooltipFeature=this.destroyBean(v)),o.append(d)}getApplyButton(){return this.eApply}updateValidity(e,t=null){const n=this.eApply;n&&(_setDisabled(n,!e),this.validationMessage=t,this.validationTooltipFeature?.setTooltipAndRefresh(this.validationMessage))}destroyListeners(){for(const e of this.listeners)e();this.listeners=[]}destroy(){this.destroyListeners(),super.destroy()}},FILTER_LOCALE_TEXT={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",bigintFilter:"BigInt Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd",filterSummaryInactive:"is (All)",filterSummaryContains:"contains",filterSummaryNotContains:"does not contain",filterSummaryTextEquals:"equals",filterSummaryTextNotEqual:"does not equal",filterSummaryStartsWith:"begins with",filterSummaryEndsWith:"ends with",filterSummaryBlank:"is blank",filterSummaryNotBlank:"is not blank",filterSummaryEquals:"=",filterSummaryNotEqual:"!=",filterSummaryGreaterThan:">",filterSummaryGreaterThanOrEqual:">=",filterSummaryLessThan:"<",filterSummaryLessThanOrEqual:"<=",filterSummaryInRange:"between",yesterday:"Yesterday",today:"Today",tomorrow:"Tomorrow",last7Days:"Last 7 Days",lastWeek:"Last Week",thisWeek:"This Week",nextWeek:"Next Week",last30Days:"Last 30 Days",lastMonth:"Last Month",thisMonth:"This Month",nextMonth:"Next Month",last90Days:"Last 90 Days",lastQuarter:"Last Quarter",thisQuarter:"This Quarter",nextQuarter:"Next Quarter",lastYear:"Last Year",thisYear:"This Year",yearToDate:"Year To Date",nextYear:"Next Year",last6Months:"Last 6 Months",last12Months:"Last 12 Months",last24Months:"Last 24 Months",filterSummaryInRangeValues:e=>`(${e[0]}, ${e[1]})`,filterSummaryTextQuote:e=>`"${e[0]}"`,minDateValidation:e=>`Date must be after ${e[0]}`,maxDateValidation:e=>`Date must be before ${e[0]}`,strictMinValueValidation:e=>`Must be greater than ${e[0]}`,strictMaxValueValidation:e=>`Must be less than ${e[0]}`};function translateForFilter(e,t,n){return _translate(e,FILTER_LOCALE_TEXT,t,n)}function getDebounceMs(e,t){const{debounceMs:n}=e;return _isUseApplyButton(e)?(n!=null&&_warn(71),0):n??t}function _isUseApplyButton(e){return(e.buttons?.indexOf("apply")??-1)>=0}function getPlaceholderText(e,t,n,o){let u=translateForFilter(e,n);if(typeof t=="function"){const d=translateForFilter(e,o);u=t({filterOptionKey:o,filterOption:d,placeholder:u})}else typeof t=="string"&&(u=t);return u}var FilterWrapperComp=class extends Component{constructor(e,t,n,o,u,d){super(),this.column=e,this.wrapper=t,this.eventParent=n,this.updateModel=o,this.isGlobalButtons=u,this.enableGlobalButtonCheck=d,this.hidePopup=null,this.applyActive=!1}postConstruct(){const{comp:e,params:t}=this.wrapper,n=t,o=n.useForm,u=o?"form":"div";this.setTemplate({tag:u,cls:"ag-filter-wrapper"}),o&&this.addManagedElementListeners(this.getGui(),{submit:d=>{d?.preventDefault()},keydown:this.handleKeyDown.bind(this)}),this.appendChild(e.getGui()),this.params=n,this.resetButtonsPanel(n),this.addManagedListeners(this.eventParent,{filterParamsChanged:({column:d,params:f})=>{d===this.column&&this.resetButtonsPanel(f,this.params)},filterStateChanged:({column:d,state:f})=>{d===this.column&&this.eButtons?.updateValidity(f.valid!==!1)},filterAction:({column:d,action:f,event:g})=>{d===this.column&&this.afterAction(f,g)},...this.enableGlobalButtonCheck?{filterGlobalButtons:({isGlobal:d})=>{if(d!==this.isGlobalButtons){this.isGlobalButtons=d;const f=this.params;this.resetButtonsPanel(f,f,!0)}}}:void 0})}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup)}resetButtonsPanel(e,t,n){const{buttons:o,readOnly:u}=t??{},{buttons:d,readOnly:f,useForm:g}=e;if(!n&&u===f&&_jsonEquals(o,d))return;const v=d&&d.length>0&&!e.readOnly&&!this.isGlobalButtons;let w=this.eButtons;if(v){const S=d.map(R=>{const _=`${R}Filter`;return{type:R,label:translateForFilter(this,_)}});if(this.applyActive=_isUseApplyButton(this.params),!w){w=this.createBean(new FilterButtonComp),this.appendChild(w.getGui());const R=this.column,_=F=>({event:M})=>{this.updateModel(R,F,{fromButtons:!0}),this.afterAction(F,M)};w?.addManagedListeners(w,{apply:_("apply"),clear:_("clear"),reset:_("reset"),cancel:_("cancel")}),this.eButtons=w}w.updateButtons(S,g)}else this.applyActive=!1,w&&(_removeFromParent(w.getGui()),this.eButtons=this.destroyBean(w))}close(e){const t=this.hidePopup;if(!t)return;const n=e,o=n?.key;let u;(o===KeyCode.ENTER||o===KeyCode.SPACE)&&(u={keyboardEvent:n}),t(u),this.hidePopup=null}afterAction(e,t){const{params:n,applyActive:o}=this,u=n?.closeOnApply;switch(e){case"apply":{t?.preventDefault(),u&&o&&this.close(t);break}case"reset":{u&&o&&this.close();break}case"cancel":{u&&this.close(t);break}}}handleKeyDown(e){!e.defaultPrevented&&e.key===KeyCode.ENTER&&this.applyActive&&(this.updateModel(this.column,"apply",{fromButtons:!0}),this.afterAction("apply",e))}destroy(){this.hidePopup=null,this.eButtons=this.destroyBean(this.eButtons)}},legacyFilterCSS=":where(.ag-menu:not(.ag-tabs) .ag-filter)>:not(.ag-filter-wrapper){min-width:180px}",FilterElement={tag:"div",cls:"ag-filter"},FilterComp=class extends Component{constructor(e,t,n){super(FilterElement),this.column=e,this.source=t,this.enableGlobalButtonCheck=n,this.wrapper=null}postConstruct(){this.beans.colFilter?.activeFilterComps.add(this),this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return this.wrapper!=null}getFilter(){return this.wrapper?.then(e=>e.comp)??null}afterInit(){return this.wrapper?.then(()=>{})??AgPromise.resolve()}afterGuiAttached(e){this.afterGuiAttachedParams=e,this.wrapper?.then(t=>{this.comp?.afterGuiAttached(e),t?.comp?.afterGuiAttached?.(e)})}afterGuiDetached(){this.wrapper?.then(e=>{e?.comp?.afterGuiDetached?.()})}createFilter(e){const{column:t,source:n,beans:{colFilter:o}}=this,u=o.getFilterUiForDisplay(t)??null;this.wrapper=u,u?.then(d=>{if(!d)return;const{isHandler:f,comp:g}=d;let v;if(f){const w=!!this.enableGlobalButtonCheck,S=this.createBean(new FilterWrapperComp(t,d,o,o.updateModel.bind(o),w&&o.isGlobalButtons,w));this.comp=S,v=S.getGui()}else this.registerCSS(legacyFilterCSS),v=g.getGui(),_exists(v)||_warn(69,{guiFromFilter:v});this.appendChild(v),e?this.eventSvc.dispatchEvent({type:"filterOpened",column:t,source:n,eGui:this.getGui()}):g.afterGuiAttached?.(this.afterGuiAttachedParams)})}onFilterDestroyed(e){const{source:t,column:n}=e;(t==="api"||t==="paramsUpdated")&&n.getId()===this.column.getId()&&this.beans.colModel.getColDefCol(this.column)&&(_clearElement(this.getGui()),this.comp=this.destroyBean(this.comp),this.createFilter())}destroy(){this.beans.colFilter?.activeFilterComps.delete(this),this.eventSvc.dispatchEvent({type:"filterClosed",column:this.column}),this.wrapper=null,this.comp=this.destroyBean(this.comp),this.afterGuiAttachedParams=void 0,super.destroy()}};function isCombinedFilterModel(e){return!!e.operator}var RESIZE_CONTAINER_STYLE="ag-resizer-wrapper",makeDiv=(e,t)=>({tag:"div",ref:`${e}Resizer`,cls:`ag-resizer ag-resizer-${t}`}),RESIZE_TEMPLATE={tag:"div",cls:RESIZE_CONTAINER_STYLE,children:[makeDiv("eTopLeft","topLeft"),makeDiv("eTop","top"),makeDiv("eTopRight","topRight"),makeDiv("eRight","right"),makeDiv("eBottomRight","bottomRight"),makeDiv("eBottom","bottom"),makeDiv("eBottomLeft","bottomLeft"),makeDiv("eLeft","left")]},AgPositionableFeature=class extends AgBeanStub{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config={popup:!1,...t}}wireBeans(e){this.popupSvc=e.popupSvc,this.dragSvc=e.dragSvc}center(e){const{clientHeight:t,clientWidth:n}=this.offsetParent,o=n/2-this.getWidth()/2,u=t/2-this.getHeight()/2;this.offsetElement(o,u,e)}initialisePosition(e){if(this.positioned)return;const{centered:t,forcePopupParentAsOffsetParent:n,minWidth:o,width:u,minHeight:d,height:f,x:g,y:v}=this.config;this.offsetParent||this.setOffsetParent();let w=0,S=0;const R=_isVisible(this.element);if(R){const _=this.findBoundaryElement(),F=window.getComputedStyle(_);if(F.minWidth!=null){const M=_.offsetWidth-this.element.offsetWidth;S=Number.parseInt(F.minWidth,10)-M}if(F.minHeight!=null){const M=_.offsetHeight-this.element.offsetHeight;w=Number.parseInt(F.minHeight,10)-M}}if(this.minHeight=d||w,this.minWidth=o||S,u&&this.setWidth(u),f&&this.setHeight(f),(!u||!f)&&this.refreshSize(),t)this.center(e);else if(g||v)this.offsetElement(g,v,e);else if(R&&n){let _=this.boundaryEl,F=!0;if(_||(_=this.findBoundaryElement(),F=!1),_){const M=Number.parseFloat(_.style.top),I=Number.parseFloat(_.style.left);F?this.offsetElement(Number.isNaN(I)?0:I,Number.isNaN(M)?0:M,e):this.setPosition(I,M)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;const n=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragSvc?.addDragSource(n),this.moveElementDragListener=n):(this.dragSvc?.removeDragSource(n),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}for(const t of Object.keys(e)){const n=!!e[t],o=this.getResizerElement(t),u={dragStartPixels:0,eElement:o,onDragStart:d=>this.onResizeStart(d,t),onDragging:this.onResize.bind(this),onDragStop:d=>this.onResizeEnd(d,t)};(n||!this.isAlive()&&!n)&&(n?(this.dragSvc?.addDragSource(u),this.resizeListeners.push(u),o.style.pointerEvents="all"):o.style.pointerEvents="none",this.resizable[t]=n)}}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,n=this.element;let o=!1;if(typeof e=="string"&&e.includes("%"))_setFixedHeight(n,e),e=_getAbsoluteHeight(n),o=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const u=this.getAvailableHeight();u&&e>u&&(e=u)}this.getHeight()!==e&&(o?(n.style.maxHeight="unset",n.style.minHeight="unset"):t?_setFixedHeight(n,e):(n.style.height=`${e}px`,n.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:Number.parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:n}=this.offsetParent;if(!n)return null;const o=this.element.getBoundingClientRect(),u=this.offsetParent.getBoundingClientRect(),d=e?this.position.y:o.top,f=e?0:u.top;let g=0;if(t){const w=this.element.parentElement;if(w){const{bottom:S}=w.getBoundingClientRect();g=S-o.bottom}}return n+f-d-g}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:n}=this.config;let o=!1;if(typeof e=="string"&&e.includes("%"))_setFixedWidth(t,e),e=_getAbsoluteWidth(t),o=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:u}=this.offsetParent,d=n?this.position.x:this.element.getBoundingClientRect().left;u&&e+d>u&&(e=u-d)}this.getWidth()!==e&&(o?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?_setFixedWidth(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:Number.parseFloat(e)))}offsetElement(e=0,t=0,n){const{forcePopupParentAsOffsetParent:o}=this.config,u=o?this.boundaryEl:this.element;u&&(this.popupSvc?.positionPopup({ePopup:u,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t}),postProcessCallback:n}),this.setPosition(Number.parseFloat(u.style.left),Number.parseFloat(u.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;const t=()=>{const n=this.getAvailableHeight();this.element.style.setProperty("max-height",`${n}px`)};e&&this.popupSvc?(this.resizeObserverSubscriber?.(),this.resizeObserverSubscriber=_observeResize(this.beans,this.popupSvc?.getPopupParent(),t)):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:n,isTop:o,anywhereWithin:u,topBuffer:d}=e,f=t.clientX-this.dragStartPosition.x,g=t.clientY-this.dragStartPosition.y,v=this.shouldSkipX(t,!!n,!!u,f)?0:f,w=this.shouldSkipY(t,!!o,d,g)?0:g;return{movementX:v,movementY:w}}shouldSkipX(e,t,n,o){const u=this.element.getBoundingClientRect(),d=this.offsetParent.getBoundingClientRect(),f=this.boundaryEl.getBoundingClientRect(),g=this.config.popup?this.position.x:u.left;let v=g<=0&&d.left>=e.clientX||d.right<=e.clientX&&d.right<=f.right;return v?!0:(t?v=o<0&&e.clientX>g+d.left||o>0&&e.clientX<g+d.left:n?v=o<0&&e.clientX>f.right||o>0&&e.clientX<g+d.left:v=o<0&&e.clientX>f.right||o>0&&e.clientX<f.right,v)}shouldSkipY(e,t,n=0,o){const u=this.element.getBoundingClientRect(),d=this.offsetParent.getBoundingClientRect(),f=this.boundaryEl.getBoundingClientRect(),g=this.config.popup?this.position.y:u.top;let v=g<=0&&d.top>=e.clientY||d.bottom<=e.clientY&&d.bottom<=f.bottom;return v?!0:(t?v=o<0&&e.clientY>g+d.top+n||o>0&&e.clientY<g+d.top:v=o<0&&e.clientY>f.bottom||o>0&&e.clientY<f.bottom,v)}createResizeMap(){const e=t=>({element:this.element.querySelector(`[data-ref=${t}Resizer]`)});this.resizerMap={topLeft:e("eTopLeft"),top:e("eTop"),topRight:e("eTopRight"),right:e("eRight"),bottomRight:e("eBottomRight"),bottom:e("eBottom"),bottomLeft:e("eBottomLeft"),left:e("eLeft")}}addResizers(){if(this.resizersAdded)return;const e=this.element;e&&(e.appendChild(_createAgElement(RESIZE_TEMPLATE)),this.createResizeMap(),this.resizersAdded=!0)}removeResizers(){this.resizerMap=void 0,this.element.querySelector(`.${RESIZE_CONTAINER_STYLE}`)?.remove(),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:n,forcePopupParentAsOffsetParent:o}=this.config;!n&&!o&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(n=>!n.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,n=0;for(const o of e){const u=!!o.style.flex&&o.style.flex!=="0 0 auto";if(o===this.element)continue;let d=this.minHeight||0,f=this.minWidth||0;if(u){const g=window.getComputedStyle(o);g.minHeight&&(d=Number.parseInt(g.minHeight,10)),g.minWidth&&(f=Number.parseInt(g.minWidth,10))}else d=o.offsetHeight,f=o.offsetWidth;t+=d,n+=f}return{height:t,width:n}}applySizeToSiblings(e){let t=null;const n=this.getSiblings();if(n){for(let o=0;o<n.length;o++){const u=n[o];u!==t&&(e?u.style.height=`${u.offsetHeight}px`:u.style.width=`${u.offsetWidth}px`,u.style.flex="0 0 auto",u===this.element&&(t=n[o+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:n}=this.config,{isTop:o,isRight:u,isBottom:d,isLeft:f}=this.currentResizer,g=u||f,v=d||o,{movementX:w,movementY:S}=this.calculateMouseMovement({e,isLeft:f,isTop:o}),R=this.position.x,_=this.position.y;let F=0,M=0;if(g&&w){const I=f?-1:1,N=this.getWidth(),B=N+w*I;let H=!1;f&&(F=N-B,(R+F<=0||B<=this.minWidth)&&(H=!0,F=0)),H||this.setWidth(B)}if(v&&S){const I=o?-1:1,N=this.getHeight(),B=N+S*I;let H=!1;o?(M=N-B,(_+M<=0||B<=this.minHeight)&&(H=!0,M=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&N<B&&this.getMinSizeOfSiblings().height+B>this.element.parentElement.offsetHeight&&(H=!0),H||this.setHeight(B)}this.updateDragStartPosition(e.clientX,e.clientY),((t||n)&&F||M)&&this.offsetElement(R+F,_+M)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:n}=this.position;let o;this.config.calculateTopBuffer&&(o=this.config.calculateTopBuffer());const{movementX:u,movementY:d}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:o});this.offsetElement(t+u,n+d),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent&&this.popupSvc?this.offsetParent=this.popupSvc.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){const e=this.resizeListeners.pop();this.dragSvc?.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragSvc?.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},PositionableFeature=class extends AgPositionableFeature{},isSafari,isFirefox,isMacOs,isIOS,invisibleScrollbar,browserScrollbarWidth,maxDivHeight;function _isBrowserSafari(){return isSafari===void 0&&(isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),isSafari}function _isBrowserFirefox(){return isFirefox===void 0&&(isFirefox=/(firefox)/i.test(navigator.userAgent)),isFirefox}function _isMacOsUserAgent(){return isMacOs===void 0&&(isMacOs=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),isMacOs}function _isIOSUserAgent(){return isIOS===void 0&&(isIOS=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),isIOS}function _getTabIndex(e){if(!e)return null;const t=e.tabIndex,n=e.getAttribute("tabIndex");return t===-1&&(n===null||n===""&&!_isBrowserFirefox())?null:t.toString()}function _getMaxDivHeight(){if(maxDivHeight!==void 0)return maxDivHeight;if(!document.body)return-1;let e=1e6;const t=_isBrowserFirefox()?6e6:1e9,n=document.createElement("div");for(document.body.appendChild(n);;){const o=e*2;if(n.style.height=o+"px",o>t||n.clientHeight!==o)break;e=o}return n.remove(),maxDivHeight=e,e}function _getScrollbarWidth(){return browserScrollbarWidth==null&&initScrollbarWidthAndVisibility(),browserScrollbarWidth}function initScrollbarWidthAndVisibility(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let n=t.offsetWidth-t.clientWidth;n===0&&t.clientWidth===0&&(n=null),t.parentNode&&t.remove(),n!=null&&(browserScrollbarWidth=n,invisibleScrollbar=n===0)}function _isInvisibleScrollbar(){return invisibleScrollbar==null&&initScrollbarWidthAndVisibility(),invisibleScrollbar}var keyboardModeActive=!1,instanceCount=0;function addKeyboardModeEvents(e){instanceCount>0||(e.addEventListener("keydown",toggleKeyboardMode),e.addEventListener("mousedown",toggleKeyboardMode))}function removeKeyboardModeEvents(e){instanceCount>0||(e.removeEventListener("keydown",toggleKeyboardMode),e.removeEventListener("mousedown",toggleKeyboardMode))}function toggleKeyboardMode(e){const t=keyboardModeActive,n=e.type==="keydown";n&&(e.ctrlKey||e.metaKey||e.altKey)||t!==n&&(keyboardModeActive=n)}function _registerKeyboardFocusEvents(e){const t=_getDocument(e);return addKeyboardModeEvents(t),instanceCount++,()=>{instanceCount--,removeKeyboardModeEvents(t)}}function _isKeyboardMode(){return keyboardModeActive}function _findFocusableElements(e,t,n=!1){const o=FOCUSABLE_SELECTOR;let u=FOCUSABLE_EXCLUDE;t&&(u+=", "+t),n&&(u+=', [tabindex="-1"]');const d=Array.prototype.slice.apply(e.querySelectorAll(o)).filter(v=>_isVisible(v)),f=Array.prototype.slice.apply(e.querySelectorAll(u));return f.length?((v,w)=>v.filter(S=>w.indexOf(S)===-1))(d,f):d}function _focusInto(e,t=!1,n=!1,o=!1){const u=_findFocusableElements(e,o?".ag-tab-guard":null,n),d=t?_last(u):u[0];return d?(d.focus({preventScroll:!0}),!0):!1}function _findNextFocusableElement(e,t,n,o){const u=_findFocusableElements(t,n?':not([tabindex="-1"])':null),d=_getActiveDomElement(e);let f;n?f=u.findIndex(v=>v.contains(d)):f=u.indexOf(d);const g=f+(o?-1:1);return g<0||g>=u.length?null:u[g]}function _findTabbableParent(e,t=5){let n=0;for(;e&&_getTabIndex(e)===null&&++n<=t;)e=e.parentElement;return _getTabIndex(e)===null?null:e}var FOCUS_MANAGED_CLASS="ag-focus-managed",AgManagedFocusFeature=class extends AgBeanStub{constructor(e,t={isStopPropagation:()=>!1,stopPropagation:()=>{}},n={}){super(),this.eFocusable=e,this.stopPropagationCallbacks=t,this.callbacks=n,this.callbacks={shouldStopEventPropagation:()=>!1,onTabKeyDown:o=>{if(o.defaultPrevented)return;const u=_findNextFocusableElement(this.beans,this.eFocusable,!1,o.shiftKey);u&&(u.focus(),o.preventDefault())},...n}}postConstruct(){const{eFocusable:e,callbacks:{onFocusIn:t,onFocusOut:n}}=this;e.classList.add(FOCUS_MANAGED_CLASS),this.addKeyDownListeners(e),t&&this.addManagedElementListeners(e,{focusin:t}),n&&this.addManagedElementListeners(e,{focusout:n})}addKeyDownListeners(e){this.addManagedElementListeners(e,{keydown:t=>{if(t.defaultPrevented||this.stopPropagationCallbacks.isStopPropagation(t))return;const{callbacks:n}=this;if(n.shouldStopEventPropagation(t)){this.stopPropagationCallbacks.stopPropagation(t);return}t.key===KeyCode.TAB?n.onTabKeyDown(t):n.handleKeyDown&&n.handleKeyDown(t)}})}},AG_GRID_STOP_PROPAGATION="__ag_Grid_Stop_Propagation";function _stopPropagationForAgGrid(e){e[AG_GRID_STOP_PROPAGATION]=!0}function _isStopPropagationForAgGrid(e){return e[AG_GRID_STOP_PROPAGATION]===!0}var STOP_PROPAGATION_CALLBACKS={isStopPropagation:_isStopPropagationForAgGrid,stopPropagation:_stopPropagationForAgGrid},ManagedFocusFeature=class extends AgManagedFocusFeature{constructor(e,t){super(e,STOP_PROPAGATION_CALLBACKS,t)}},ProvidedFilter=class extends Component{constructor(e,t){super(),this.filterNameKey=e,this.cssIdentifier=t,this.applyActive=!1,this.debouncePending=!1,this.defaultDebounceMs=0}postConstruct(){const e={tag:"div",cls:`ag-filter-body-wrapper ag-${this.cssIdentifier}-body-wrapper`,children:[this.createBodyTemplate()]};this.setTemplate(e,this.getAgComponents()),this.createManagedBean(new ManagedFocusFeature(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=this.createBean(new PositionableFeature(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}))}handleKeyDown(e){}init(e){const t=e;this.setParams(t),this.setModelIntoUi(t.state.model,!0).then(()=>this.updateUiVisibility())}areStatesEqual(e,t){return e===t}refresh(e){const t=e,n=this.params;this.params=t;const{source:o,state:u,additionalEventAttributes:d}=t;o==="colDef"&&this.updateParams(t,n);const f=this.state;this.state=u;const g=d?.fromAction;return(g&&g!=="apply"||u.model!==f.model||!this.areStatesEqual(u.state,f.state))&&this.setModelIntoUi(u.model),!0}setParams(e){this.params=e,this.state=e.state,this.commonUpdateParams(e)}updateParams(e,t){this.commonUpdateParams(e,t)}commonUpdateParams(e,t){this.applyActive=_isUseApplyButton(e),this.setupApplyDebounced()}doesFilterPass(e){_warn(283);const{getHandler:t,model:n,column:o}=this.params;return t().doesFilterPass({...e,model:n,handlerParams:this.beans.colFilter.getHandlerParams(o)})}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return _warn(284),this.params.model!=null}setupApplyDebounced(){const e=getDebounceMs(this.params,this.defaultDebounceMs),t=_debounce(this,this.checkApplyDebounce.bind(this),e);this.applyDebounced=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.doApplyModel())}getModel(){return _warn(285),this.params.model}setModel(e){_warn(286);const{beans:t,params:n}=this;return t.colFilter.setModelForColumnLegacy(n.column,e)}applyModel(e="api"){return this.doApplyModel()}canApply(e){return!0}doApplyModel(e){const{params:t,state:{valid:n=!0,model:o}}=this;if(!n)return!1;const u=!this.areModelsEqual(t.model,o);return u&&t.onAction("apply",e),u}onNewRowsLoaded(){}onUiChanged(e,t=!1){this.updateUiVisibility();const n=this.getModelFromUi(),o={model:n,state:this.getState(),valid:this.canApply(n)};this.state=o;const{params:u,gos:d,eventSvc:f,applyActive:g}=this;u.onStateChange(o),u.onUiChange(this.getUiChangeEventParams()),d.get("enableFilterHandlers")||f.dispatchEvent({type:"filterModified",column:u.column,filterInstance:this}),o.valid&&(e??(e=g?void 0:"debounce"),e==="immediately"?this.doApplyModel({afterFloatingFilter:t,afterDataChange:!1}):e==="debounce"&&this.applyDebounced())}getState(){}getUiChangeEventParams(){}afterGuiAttached(e){this.lastContainerType=e?.container,this.refreshFilterResizer(e?.container)}refreshFilterResizer(e){const{positionableFeature:t,gos:n}=this;if(!t)return;const o=e==="floatingFilter"||e==="columnFilter";o?(t.restoreLastSize(),t.setResizable(n.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(t.removeSizeFromEl(),t.setResizable(!1)),t.constrainSizeToAvailableHeight(o)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature?.constrainSizeToAvailableHeight(!1)}destroy(){this.positionableFeature=this.destroyBean(this.positionableFeature),super.destroy()}translate(e,t){return translateForFilter(this,e,t)}getPositionableElement(){return this.getGui()}areModelsEqual(e,t){return e===t||e==null&&t==null?!0:e==null||t==null?!1:this.areNonNullModelsEqual(e,t)}};function _createCellId(e){const{rowIndex:t,rowPinned:n,column:o}=e;return`${t}.${n??"null"}.${o.getId()}`}function _areCellsEqual(e,t){const n=e.column===t.column,o=e.rowPinned===t.rowPinned,u=e.rowIndex===t.rowIndex;return n&&o&&u}function _isRowBefore(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(_exists(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}function _isSameRow(e,t){return!e&&!t?!0:!e||!t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}function _getFirstRow(e){let t=0,n;const{pinnedRowModel:o,rowModel:u,pageBounds:d}=e;return o?.getPinnedTopRowCount()?n="top":u.getRowCount()?(n=null,t=d.getFirstRow()):o?.getPinnedBottomRowCount()&&(n="bottom"),n===void 0?null:{rowIndex:t,rowPinned:n}}function _getLastRow(e){let t,n=null;const{pinnedRowModel:o,pageBounds:u}=e,d=o?.getPinnedBottomRowCount(),f=o?.getPinnedTopRowCount();return d?(n="bottom",t=d-1):e.rowModel.getRowCount()?t=u.getLastRow():f&&(n="top",t=f-1),t===void 0?null:{rowIndex:t,rowPinned:n}}function _getRowNode(e,t){switch(t.rowPinned){case"top":return e.pinnedRowModel?.getPinnedTopRow(t.rowIndex);case"bottom":return e.pinnedRowModel?.getPinnedBottomRow(t.rowIndex);default:return e.rowModel.getRow(t.rowIndex)}}function _getCellByPosition(e,t){const n=e.spannedRowRenderer?.getCellByPosition(t);if(n)return n;const o=e.rowRenderer.getRowByPosition(t);return o?o.getCellCtrl(t.column):null}function _getRowById(e,t,n){const{rowModel:o,pinnedRowModel:u}=e;let d;return d??(d=o?.getRowNode(t)),n?d??(d=u?.getPinnedRowById(t,n)):(d??(d=u?.getPinnedRowById(t,"top")),d??(d=u?.getPinnedRowById(t,"bottom"))),d}function _getRowAbove(e,t,n=!1){const{rowIndex:o,rowPinned:u}=t,{pageBounds:d,pinnedRowModel:f,rowModel:g}=e;if(o===0)return u==="top"?null:u==="bottom"&&g.isRowsToRender()?{rowIndex:d.getLastRow(),rowPinned:null}:f?.isRowsToRender("top")?{rowIndex:f.getPinnedTopRowCount()-1,rowPinned:"top"}:null;if(n){const v=u?void 0:g.getRow(o);return getNextStickyPosition(e,v,!0)??{rowIndex:o-1,rowPinned:u}}return{rowIndex:o-1,rowPinned:u}}function _getRowBelow(e,t,n=!1){const{rowIndex:o,rowPinned:u}=t,{pageBounds:d,pinnedRowModel:f,rowModel:g}=e;if(isLastRowInContainer(e,t))return u==="bottom"?null:u==="top"&&g.isRowsToRender()?{rowIndex:d.getFirstRow(),rowPinned:null}:f?.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;if(n){const v=u?void 0:g.getRow(o);return getNextStickyPosition(e,v)??{rowIndex:o+1,rowPinned:u}}return{rowIndex:o+1,rowPinned:u}}function getNextStickyPosition(e,t,n=!1){const{gos:o,rowRenderer:u}=e;if(!t?.sticky||!_isGroupRowsSticky(o))return;const d=u.getStickyTopRowCtrls(),f=u.getStickyBottomRowCtrls(),g=!f.some(R=>R.rowNode.rowIndex===t.rowIndex),v=g?d:f,w=(n?-1:1)*(g?-1:1);let S;for(let R=0;R<v.length;R++)if(v[R].rowNode.rowIndex===t.rowIndex){S=v[R+w];break}return S?{rowIndex:S.rowNode.rowIndex,rowPinned:null}:void 0}function isLastRowInContainer(e,t){const{rowPinned:n,rowIndex:o}=t,{pinnedRowModel:u,pageBounds:d}=e;return n==="top"?(u?.getPinnedTopRowCount()??0)-1<=o:n==="bottom"?(u?.getPinnedBottomRowCount()??0)-1<=o:d.getLastRow()<=o}function _addFocusableContainerListener(e,t,n){t.addManagedElementListeners(n,{keydown:o=>{if(!o.defaultPrevented&&o.key===KeyCode.TAB){const u=o.shiftKey;_findNextFocusableElement(e,n,!1,u)||_focusNextGridCoreContainer(e,u)&&o.preventDefault()}}})}function _focusGridInnerElement(e,t){return e.ctrlsSvc.get("gridCtrl").focusInnerElement(t)}function _isHeaderFocusSuppressed(e){return e.gos.get("suppressHeaderFocus")||!!e.overlays?.exclusive}function _isCellFocusSuppressed(e){return e.gos.get("suppressCellFocus")||!!e.overlays?.exclusive}function _focusNextGridCoreContainer(e,t,n=!1){const o=e.ctrlsSvc.get("gridCtrl");return!n&&o.focusNextInnerContainer(t)?!0:((n||!t&&!o.isDetailGrid())&&o.forceFocusOutOfContainer(t),!1)}function _attemptToRestoreCellFocus(e,t){const n=e.focusSvc,o=n.getFocusedCell();if(o&&t&&_areCellsEqual(o,t)){const{rowIndex:u,rowPinned:d,column:f}=t;_isNothingFocused(e)&&n.setFocusedCell({rowIndex:u,column:f,rowPinned:d,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!_isKeyboardMode()})}}function getFocusHeaderRowCount(e){return e.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0}function getGroupRowsHeight(e){const t=[],n=e.ctrlsSvc.getHeaderRowContainerCtrls();for(const o of n){if(!o)continue;const u=o.getGroupRowCount()||0;for(let d=0;d<u;d++){const f=o.getGroupRowCtrlAtIndex(d),g=t[d];if(f){const v=getColumnGroupHeaderRowHeight(e,f);(g==null||v>g)&&(t[d]=v)}}}return t}function getColumnGroupHeaderRowHeight(e,t){let o=e.colModel.isPivotMode()?getPivotGroupHeaderHeight(e):getGroupHeaderHeight(e);const u=t.getHeaderCellCtrls();for(const d of u){const{column:f}=d,g=f.getAutoHeaderHeight();g!=null&&g>o&&f.isAutoHeaderHeight()&&(o=g)}return o}function getColumnHeaderRowHeight(e){let n=e.colModel.isPivotMode()?getPivotHeaderHeight(e):getHeaderHeight(e);return e.colModel.forAllCols(o=>{const u=o.getAutoHeaderHeight();u!=null&&u>n&&o.isAutoHeaderHeight()&&(n=u)}),n}function getHeaderHeight(e){return e.gos.get("headerHeight")??e.environment.getDefaultHeaderHeight()}function getFloatingFiltersHeight(e){return e.gos.get("floatingFiltersHeight")??getHeaderHeight(e)}function getGroupHeaderHeight(e){return e.gos.get("groupHeaderHeight")??getHeaderHeight(e)}function getPivotHeaderHeight(e){return e.gos.get("pivotHeaderHeight")??getHeaderHeight(e)}function getPivotGroupHeaderHeight(e){return e.gos.get("pivotGroupHeaderHeight")??getGroupHeaderHeight(e)}function isHeaderPositionEqual(e,t){return e.headerRowIndex===t.headerRowIndex&&e.column===t.column}var GridHeaderCtrl=class extends BeanStub{setComp(e,t,n){this.comp=e,this.eGui=t;const{beans:o}=this,{headerNavigation:u,touchSvc:d,ctrlsSvc:f}=o;u&&this.createManagedBean(new ManagedFocusFeature(n,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this,o),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this,o)}),this.onPivotModeChanged(o),this.setupHeaderHeight();const g=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:g}),d?.mockHeaderContextMenu(this,g),f.register("gridHeaderCtrl",this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({headerRowsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>_requestAnimationFrame(this.beans,()=>e()),stylesChanged:e,advancedFilterEnabledChanged:e})}setHeaderHeight(){const{beans:e}=this;let t=0;const n=getGroupRowsHeight(e).reduce((f,g)=>f+g,0),o=getColumnHeaderRowHeight(e);e.filterManager?.hasFloatingFilters()&&(t+=getFloatingFiltersHeight(e)),t+=n,t+=o;const u=e.environment.getHeaderRowBorderWidth(),d=t+u;if(this.headerHeightWithBorder!==d){this.headerHeightWithBorder=d;const f=`${d}px`;this.comp.setHeightAndMinHeight(f)}this.headerHeight!==t&&(this.headerHeight=t,this.eventSvc.dispatchEvent({type:"headerHeightChanged"}))}onPivotModeChanged(e){const t=e.colModel.isPivotMode();this.comp.toggleCss("ag-pivot-on",t),this.comp.toggleCss("ag-pivot-off",!t)}onDisplayedColumnsChanged(e){const n=e.visibleCols.allCols.some(o=>o.isSpanHeaderHeight());this.comp.toggleCss("ag-header-allow-overflow",n)}onTabKeyDown(e){const t=this.gos.get("enableRtl"),n=e.shiftKey,o=n!==t?"LEFT":"RIGHT",{beans:u}=this,{headerNavigation:d,focusSvc:f}=u;(d.navigateHorizontally(o,!0,e)||!n&&f.focusOverlay(!1)||_focusNextGridCoreContainer(u,n,!0))&&e.preventDefault()}handleKeyDown(e){let t=null;const{headerNavigation:n}=this.beans;switch(e.key){case KeyCode.LEFT:t="LEFT";case KeyCode.RIGHT:{_exists(t)||(t="RIGHT"),n.navigateHorizontally(t,!1,e)&&e.preventDefault();break}case KeyCode.UP:t="UP";case KeyCode.DOWN:{_exists(t)||(t="DOWN"),n.navigateVertically(t,e)&&e.preventDefault();break}default:return}}onFocusOut(e){const{relatedTarget:t}=e,{eGui:n,beans:o}=this;!t&&n.contains(_getActiveDomElement(o))||n.contains(t)||(o.focusSvc.focusedHeader=null)}onHeaderContextMenu(e,t,n){const{menuSvc:o,ctrlsSvc:u}=this.beans;if(!e&&!n||!o?.isHeaderContextMenuEnabled())return;const{target:d}=e??t;(d===this.eGui||d===u.getHeaderRowContainerCtrl()?.eViewport)&&o.showHeaderContextMenu(void 0,e,n)}},CenterWidthFeature=class extends BeanStub{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){const e=_isDomLayout(this.gos,"print"),{visibleCols:t,scrollVisibleSvc:n}=this.beans,o=t.bodyWidth,u=t.getColsLeftWidth(),d=t.getDisplayedColumnsRightWidth();let f;e?f=o+u+d:(f=o,this.addSpacer&&(this.gos.get("enableRtl")?u:d)===0&&n.verticalScrollShowing&&(f+=n.getScrollbarWidth())),this.callback(f)}},EmptyBean=class extends BeanStub{};function setupCompBean(e,t,n){return n&&e.addDestroyFunc(()=>t.destroyBean(n)),n??e}var SetLeftFeature=class extends BeanStub{constructor(e,t,n,o){super(),this.columnOrGroup=e,this.eCell=t,this.colsSpanning=o,this.columnOrGroup=e,this.ariaEl=t.querySelector("[role=columnheader]")||t,this.beans=n}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){const{beans:e,colsSpanning:t}=this;return e.gos.get("enableRtl")&&t?_last(t):this.columnOrGroup}postConstruct(){const e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){const{gos:e,colAnimation:t}=this.beans,n=e.get("suppressColumnMoveAnimation"),o=_exists(this.columnOrGroup.getOldLeft());t?.isActive()&&o&&!n?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=this.modifyLeftForPrintLayout(e,e.getOldLeft()),n=this.modifyLeftForPrintLayout(e,e.getLeft());this.setLeft(t),this.actualLeft=n,this.beans.colAnimation.executeNextVMTurn(()=>{this.actualLeft===n&&this.setLeft(n)})}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){const{gos:n,visibleCols:o}=this.beans;if(!_isDomLayout(n,"print")||e.getPinned()==="left")return t;const d=o.getColsLeftWidth();if(e.getPinned()==="right"){const f=o.bodyWidth;return d+f+t}return d+t}setLeft(e){if(_exists(e)&&(this.eCell.style.left=`${e}px`),isColumnGroup(this.columnOrGroup)){const t=this.columnOrGroup.getLeafColumns();if(!t.length)return;t.length>1&&_setAriaColSpan(this.ariaEl,t.length)}}},CSS_FIRST_COLUMN="ag-column-first",CSS_LAST_COLUMN="ag-column-last";function _getHeaderClassesFromColDef(e,t,n,o){return _missing(e)?[]:getColumnClassesFromCollDef(e.headerClass,e,t,n,o)}function refreshFirstAndLastStyles(e,t,n){e.toggleCss(CSS_FIRST_COLUMN,n.isColAtEdge(t,"first")),e.toggleCss(CSS_LAST_COLUMN,n.isColAtEdge(t,"last"))}function getClassParams(e,t,n,o){return _addGridCommonParams(t,{colDef:e,column:n,columnGroup:o})}function getColumnClassesFromCollDef(e,t,n,o,u){if(_missing(e))return[];let d;if(typeof e=="function"){const f=getClassParams(t,n,o,u);d=e(f)}else d=e;return typeof d=="string"?[d]:Array.isArray(d)?[...d]:[]}var instanceIdSequence2=0,DOM_DATA_KEY_HEADER_CTRL="headerCtrl",AbstractHeaderCellCtrl=class extends BeanStub{constructor(e,t){super(),this.column=e,this.rowCtrl=t,this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.reAttemptToFocus=!1,this.instanceId=e.getUniqueId()+"-"+instanceIdSequence2++}postConstruct(){const e=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],e),this.addManagedEventListeners({overlayExclusiveChanged:e})}setComp(e,t,n,o,u){t.setAttribute("col-id",this.column.colIdSanitised),this.wireComp(e,t,n,o,u),this.reAttemptToFocus&&(this.reAttemptToFocus=!1,this.focus(this.lastFocusEvent??void 0))}shouldStopEventPropagation(e){const{headerRowIndex:t,column:n}=this.beans.focusSvc.focusedHeader,o=n.getDefinition(),u=o?.suppressHeaderKeyboardEvent;if(!_exists(u))return!1;const d=_addGridCommonParams(this.gos,{colDef:o,column:n,headerRowIndex:t,event:e});return!!u(d)}getWrapperHasFocus(){return _getActiveDomElement(this.beans)===this.eGui}setGui(e,t){this.eGui=e,this.addDomData(t),t.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),t.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}refreshHeaderStyles(){const e=this.column.getDefinition();if(!e)return;const{headerStyle:t}=e;let n;if(typeof t=="function"){const o=this.getHeaderClassParams();n=t(o)}else n=t;n&&this.comp.setUserStyles(n)}onGuiFocus(){this.eventSvc.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(e){const{wrapperElement:t,checkMeasuringCallback:n,compBean:o}=e,{beans:u}=this,d=R=>{if(!this.isAlive()||!o.isAlive())return;const{paddingTop:_,paddingBottom:F,borderBottomWidth:M,borderTopWidth:I}=_getElementSize(this.eGui),N=_+F+M+I,H=t.offsetHeight+N;if(R<5){const $=!_getDocument(u)?.contains(t),z=H==0;if($||z){_batchCall(()=>d(R+1),"raf",u);return}}this.setColHeaderHeight(this.column,H)};let f=!1,g;const v=()=>{const R=this.column.isAutoHeaderHeight();R&&!f&&w(),!R&&f&&S()},w=()=>{f=!0,this.comp.toggleCss("ag-header-cell-auto-height",!0),d(0),g=_observeResize(this.beans,t,()=>d(0))},S=()=>{f=!1,g&&g(),this.comp.toggleCss("ag-header-cell-auto-height",!1),g=void 0};v(),o.addDestroyFunc(()=>S()),o.addManagedListeners(this.column,{widthChanged:()=>f&&d(0)}),o.addManagedEventListeners({sortChanged:()=>{f&&window.setTimeout(()=>d(0))}}),n&&n(v)}onDisplayedColumnsChanged(){const{comp:e,column:t,beans:n,eGui:o}=this;!e||!t||!o||(refreshFirstAndLastStyles(e,t,n.visibleCols),_setAriaColIndex(o,n.visibleCols.getAriaColIndex(t)))}addResizeAndMoveKeyboardListeners(e){e.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){const e=_isHeaderFocusSuppressed(this.beans);this.eGui&&_addOrRemoveAttribute(this.eGui,"tabindex",e?null:"-1")}onGuiKeyDown(e){const t=_getActiveDomElement(this.beans),n=e.key===KeyCode.LEFT||e.key===KeyCode.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),t!==this.eGui||!e.shiftKey&&!e.altKey&&!e.ctrlKey&&!e.metaKey)return;if((this.isResizing||n)&&(e.preventDefault(),e.stopImmediatePropagation()),(e.ctrlKey||e.metaKey)&&_normaliseQwertyAzerty(e)===KeyCode.C)return this.beans.clipboardSvc?.copyToClipboard();if(!n)return;const d=e.key===KeyCode.LEFT!==this.gos.get("enableRtl")?"left":"right";if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const f=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(f,e.shiftKey),this.resizeFeature?.toggleColumnResizing(!0)}else this.moveHeader(d)}moveHeader(e){this.beans.colMoves?.moveHeader(e,this.eGui,this.column,this.rowCtrl.pinned,this)}getViewportAdjustedResizeDiff(e){const t=this.getResizeDiff(e),{pinnedCols:n}=this.beans;return n?n.getHeaderResizeDiff(t,this.column):t}getResizeDiff(e){const{gos:t,column:n}=this;let o=e.key===KeyCode.LEFT!==t.get("enableRtl");const u=n.getPinned(),d=t.get("enableRtl");return u&&d!==(u==="right")&&(o=!o),(o?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{this.resizeFeature?.toggleColumnResizing(!1)},150))}handleKeyDown(e){const t=this.getWrapperHasFocus();switch(e.key){case KeyCode.PAGE_DOWN:case KeyCode.PAGE_UP:case KeyCode.PAGE_HOME:case KeyCode.PAGE_END:t&&e.preventDefault()}}addDomData(e){const t=DOM_DATA_KEY_HEADER_CTRL,{eGui:n,gos:o}=this;_setDomData(o,n,t,this),e.addDestroyFunc(()=>_setDomData(o,n,t,null))}focus(e){if(!this.isAlive())return!1;const{eGui:t}=this;return t?(this.lastFocusEvent=e||null,t.focus()):this.reAttemptToFocus=!0,!0}focusThis(){this.beans.focusSvc.focusedHeader={headerRowIndex:this.rowCtrl.rowIndex,column:this.column}}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop?.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,t,n){const o=e??t,{menuSvc:u,gos:d}=this.beans;d.get("preventDefaultOnContextMenu")&&o.preventDefault(),u?.isHeaderContextMenuEnabled(n)&&u.showHeaderContextMenu(n,e,t),this.dispatchColumnMouseEvent("columnHeaderContextMenu",n)}dispatchColumnMouseEvent(e,t){this.eventSvc.dispatchEvent({type:e,column:t})}setColHeaderHeight(e,t){if(!e.setAutoHeaderHeight(t))return;const{eventSvc:n}=this;e.isColumn?n.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"}):n.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.rowCtrl=null}},HeaderCellCtrl=class extends AbstractHeaderCellCtrl{constructor(){super(...arguments),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map}wireComp(e,t,n,o,u){this.comp=e;const{rowCtrl:d,column:f,beans:g}=this,{colResize:v,context:w,colHover:S,rangeSvc:R}=g,_=setupCompBean(this,w,u);this.setGui(t,_),this.updateState(),this.setupWidth(_),this.setupMovingCss(_),this.setupMenuClass(_),this.setupSortableClass(_),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:o,checkMeasuringCallback:M=>this.setRefreshFunction("measuring",M),compBean:_}),this.addColumnHoverListener(_),this.setupFilterClass(_),this.setupStylesFromColDef(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(_),this.setupSelectAll(_),this.setupUserComp(),this.refreshAria(),v?this.resizeFeature=_.createManagedBean(v.createResizeFeature(d.pinned,f,n,e,this)):_setDisplayed(n,!1),S?.createHoverFeature(_,[f],t),R?.createRangeHighlightFeature(_,f,e),_.createManagedBean(new SetLeftFeature(f,t,g)),_.createManagedBean(new ManagedFocusFeature(t,{shouldStopEventPropagation:M=>this.shouldStopEventPropagation(M),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(_),_.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader","enableAdvancedFilter"],()=>this.refresh()),_.addManagedListeners(f,{colDefChanged:()=>this.refresh(),formulaRefChanged:()=>this.refresh(),headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});const F=()=>this.checkDisplayName();_.addManagedEventListeners({columnValueChanged:F,columnRowGroupChanged:F,columnPivotChanged:F,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),_.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(e,t){this.beans.colResize?.resizeHeader(this.column,e,t)}getHeaderClassParams(){const{column:e,beans:t}=this,n=e.colDef;return _addGridCommonParams(t.gos,{colDef:n,column:e,floatingFilter:!1})}setupUserComp(){const e=this.lookupUserCompDetails();e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){const e=this.createParams(),t=this.column.getColDef();return _getHeaderCompDetails(this.beans.userCompFactory,t,e)}createParams(){const{menuSvc:e,sortSvc:t,colFilter:n,gos:o}=this.beans;return _addGridCommonParams(o,{column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&!!e?.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!!n&&(!this.openFilterEnabled||_isLegacyMenuEnabled(this.gos)),showColumnMenu:(d,f)=>{e?.showColumnMenu({column:this.column,buttonElement:d,positionBy:"button",onClosedCallback:f})},showColumnMenuAfterMouseClick:(d,f)=>{e?.showColumnMenu({column:this.column,mouseEvent:d,positionBy:"mouse",onClosedCallback:f})},showFilter:d=>{e?.showFilterMenu({column:this.column,buttonElement:d,containerType:"columnFilter",positionBy:"button"})},progressSort:d=>{t?.progressSort(this.column,!!d,"uiColumnSorted")},setSort:(d,f)=>{t?.setSortForColumn(this.column,_getSortDefFromInput(d),!!f,"uiColumnSorted")},eGridHeader:this.eGui,setTooltip:(d,f)=>{o.assertModuleRegistered("Tooltip",3),this.setupTooltip(d,f)}})}setupSelectAll(e){const{selectionSvc:t}=this.beans;t&&(this.selectAllFeature=e.createOptionalManagedBean(t.createSelectAllFeature(this.column)),this.selectAllFeature?.setComp(this),e.addManagedPropertyListener("rowSelection",()=>{const n=t.createSelectAllFeature(this.column);n&&!this.selectAllFeature?(this.selectAllFeature=e.createManagedBean(n),this.selectAllFeature?.setComp(this),this.comp.refreshSelectAllGui()):this.selectAllFeature&&!n&&(this.comp.removeSelectAllGui(),this.selectAllFeature=this.destroyBean(this.selectAllFeature))}))}getSelectAllGui(){return this.selectAllFeature?.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===KeyCode.SPACE?this.selectAllFeature?.onSpaceKeyDown(e):e.key===KeyCode.ENTER?this.onEnterKeyDown(e):e.key===KeyCode.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){const{column:t,gos:n,sortable:o,beans:u}=this;let d=!1;(e.ctrlKey||e.metaKey)&&(d=this.showMenuOnKeyPress(e,!0)),d||(!e.altKey&&_getEnableColumnSelection(n)?u.rangeSvc?.handleColumnSelection(t,e):o&&u.sortSvc?.progressSort(t,e.shiftKey,"uiColumnSorted"))}showMenuOnKeyPress(e,t){const n=this.comp.getUserCompInstance();return isHeaderComp(n)&&n.onMenuKeyboardShortcut(t)?(e.preventDefault(),!0):!1}onFocusIn(e){this.eGui.contains(e.relatedTarget)||(this.focusThis(),this.announceAriaDescription()),_isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(e){this.eGui.contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t){this.tooltipFeature=this.beans.tooltipSvc?.setupHeaderTooltip(this.tooltipFeature,this,e,t)}setupStylesFromColDef(){this.setRefreshFunction("headerStyles",this.refreshHeaderStyles.bind(this)),this.refreshHeaderStyles()}setupClassesFromColDef(){const e=()=>{const t=this.column.getColDef(),n=_getHeaderClassesFromColDef(t,this.gos,this.column,null),o=this.userHeaderClasses;this.userHeaderClasses=new Set(n);for(const u of n)o.has(u)?o.delete(u):this.comp.toggleCss(u,!0);for(const u of o)this.comp.toggleCss(u,!1)};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){this.dragSourceElement=e,this.removeDragSource(),!(!e||!this.draggable)&&(this.dragSource=this.beans.colMoves?.setDragSourceForHeader(e,this.column,this.displayName)??null)}updateState(){const{menuSvc:e}=this.beans;this.menuEnabled=!!e?.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=!!e?.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria();for(const e of Object.values(this.refreshFunctions))e()}refreshHeaderComp(){const e=this.lookupUserCompDetails();if(!e)return;(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==e.componentClass?this.attemptHeaderCompRefresh(e.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.beans.colNames.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){const t=()=>{const n=this.column.getActualWidth();this.comp.setWidth(`${n}px`)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){const t=()=>{this.comp.toggleCss("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){const t=()=>{this.comp?.toggleCss("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){const t=()=>{this.comp.toggleCss("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){const t=()=>{const n=this.column.isFilterActive();this.comp.toggleCss("ag-header-cell-filtered",n),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){const e=()=>{const t=!!this.column.getColDef().wrapHeaderText;this.comp.toggleCss("ag-header-cell-wrap-text",t)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){const e=this.column.getHighlighted(),t=e===0,n=e===1;this.comp.toggleCss("ag-header-highlight-before",t),this.comp.toggleCss("ag-header-highlight-after",n)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:e,column:t,comp:n,beans:o}=this,u=getGroupRowsHeight(this.beans),d=u.reduce((_,F)=>_+F,0)===0;if(n.toggleCss("ag-header-parent-hidden",d),!t.isSpanHeaderHeight()){e.style.removeProperty("top"),e.style.removeProperty("height"),n.toggleCss("ag-header-span-height",!1),n.toggleCss("ag-header-span-total",!1);return}const{numberOfParents:f,isSpanningTotal:g}=this.column.getColumnGroupPaddingInfo();n.toggleCss("ag-header-span-height",f>0);const v=getColumnHeaderRowHeight(o);if(f===0){n.toggleCss("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${v}px`);return}n.toggleCss("ag-header-span-total",g);const w=(this.column.getFirstRealParent()?.getLevel()??-1)+1,S=u.length-w;let R=0;for(let _=0;_<S;_++)R+=u[u.length-1-_];e.style.setProperty("top",`${-R}px`),e.style.setProperty("height",`${v+R}px`)}refreshAriaSort(){let e=null;const{beans:t,column:n,comp:o,sortable:u}=this;if(u){const d=this.getLocaleTextFunc(),f=t.sortSvc?.getDisplaySortForColumn(n)??null;o.setAriaSort(_getAriaSortState(f)),e=d("ariaSortableColumn","Press ENTER to sort")}else o.setAriaSort();this.setAriaDescriptionProperty("sort",e)}refreshAriaMenu(){let e=null;this.menuEnabled&&(e=this.getLocaleTextFunc()("ariaMenuColumn","Press ALT DOWN to open column menu")),this.setAriaDescriptionProperty("menu",e)}refreshAriaFilterButton(){let e=null;const{openFilterEnabled:t,gos:n}=this;t&&!_isLegacyMenuEnabled(n)&&(e=this.getLocaleTextFunc()("ariaFilterColumn","Press CTRL ENTER to open filter")),this.setAriaDescriptionProperty("filterButton",e)}refreshAriaFiltered(){let e=null;this.column.isFilterActive()&&(e=this.getLocaleTextFunc()("ariaColumnFiltered","Column Filtered")),this.setAriaDescriptionProperty("filter",e)}refreshAriaCellSelection(){let e=null;const{gos:t,column:n,beans:o}=this;if(_getEnableColumnSelection(t)){const d=this.getLocaleTextFunc(),f=o.rangeSvc?.isColumnInAnyRange(n);e=d("ariaColumnCellSelection",`Press CTRL+SPACE to ${f?"de":""}select all visible cells in this column`)}this.setAriaDescriptionProperty("cellSelection",e)}setAriaDescriptionProperty(e,t){const n=this.ariaDescriptionProperties;t!=null?n.set(e,t):n.delete(e)}announceAriaDescription(){const{beans:e,eGui:t,ariaDescriptionProperties:n}=this;if(!t.contains(_getActiveDomElement(e)))return;const o=Array.from(n.keys()).sort((u,d)=>u==="filter"?-1:d.charCodeAt(0)-u.charCodeAt(0)).map(u=>n.get(u)).join(". ");e.ariaAnnounce?.announceValue(o,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered(),this.refreshAriaCellSelection()}addColumnHoverListener(e){this.beans.colHover?.addHeaderColumnHoverListener(e,this.comp,this.column)}addActiveHeaderMouseListeners(e){const t=u=>this.handleMouseOverChange(u.type==="mouseenter"),n=()=>{this.setActiveHeader(!0),this.dispatchColumnMouseEvent("columnHeaderClicked",this.column)},o=u=>this.handleContextMenuMouseEvent(u,void 0,this.column);e.addManagedListeners(this.eGui,{mouseenter:t,mouseleave:t,click:n,contextmenu:o})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.toggleCss("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return isHeaderComp(t)?t.getAnchorElementForMenu(e):this.eGui}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function isHeaderComp(e){return typeof e?.getAnchorElementForMenu=="function"&&typeof e.onMenuKeyboardShortcut=="function"}var instanceIdSequence3=0,HeaderRowCtrl=class extends BeanStub{constructor(e,t,n){super(),this.rowIndex=e,this.pinned=t,this.type=n,this.instanceId=instanceIdSequence3++,this.comp=null,this.allCtrls=[];let o="ag-header-row-column";n==="group"?o="ag-header-row-group":n==="filter"&&(o="ag-header-row-filter"),this.headerRowClass=`ag-header-row ${o}`}setRowIndex(e){this.rowIndex=e,this.comp?.setRowIndex(this.getAriaRowIndex()),this.onRowHeightChanged()}postConstruct(){this.isPrintLayout=_isDomLayout(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return this.comp?this.allCtrls.every(e=>e.eGui!=null):!1}setComp(e,t,n=!0){this.comp=e,t=setupCompBean(this,this.beans.context,t),n&&(this.setRowIndex(this.rowIndex),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){const t=this.onRowHeightChanged.bind(this),n=this.onDisplayedColumnsChanged.bind(this);e.addManagedEventListeners({columnResized:this.setWidth.bind(this),displayedColumnsChanged:n,virtualColumnsChanged:o=>this.onVirtualColumnsChanged(o.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,stylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",n),e.addManagedPropertyListener("ensureDomOrder",o=>this.isEnsureDomOrder=o.currentValue),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}onDisplayedColumnsChanged(){this.isPrintLayout=_isDomLayout(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}setWidth(){if(!this.comp)return;const e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){const{visibleCols:e}=this.beans;return this.isPrintLayout?this.pinned!=null?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){if(!this.comp)return;const{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){let e=0;const t=getGroupRowsHeight(this.beans);for(let u=0;u<t.length;u++){if(u===this.rowIndex&&this.type==="group")return{topOffset:e,rowHeight:t[u]};e+=t[u]}const n=getColumnHeaderRowHeight(this.beans);if(this.type==="column")return{topOffset:e,rowHeight:n};e+=n;const o=getFloatingFiltersHeight(this.beans);return{topOffset:e,rowHeight:o}}onVirtualColumnsChanged(e=!1){if(!this.comp)return;const t=this.getUpdatedHeaderCtrls(),n=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,n,e)}getUpdatedHeaderCtrls(){const e=this.ctrlsById;this.ctrlsById=new Map;const t=this.getColumnsInViewport();for(const o of t)this.recycleAndCreateHeaderCtrls(o,this.ctrlsById,e);const n=o=>{const{focusSvc:u,visibleCols:d}=this.beans;return u.isHeaderWrapperFocused(o)?d.isVisible(o.column):!1};if(e)for(const[o,u]of e)n(u)?this.ctrlsById.set(o,u):this.destroyBean(u);return this.allCtrls=Array.from(this.ctrlsById.values()),this.allCtrls}getHeaderCellCtrls(){return this.allCtrls}recycleAndCreateHeaderCtrls(e,t,n){if(e.isEmptyGroup())return;const o=e.getUniqueId();let u;if(n&&(u=n.get(o),n.delete(o)),u&&u.column!=e&&(this.destroyBean(u),u=void 0),u==null)switch(this.type){case"filter":{u=this.createBean(this.beans.registry.createDynamicBean("headerFilterCellCtrl",!0,e,this));break}case"group":u=this.createBean(this.beans.registry.createDynamicBean("headerGroupCellCtrl",!0,e,this));break;default:u=this.createBean(new HeaderCellCtrl(e,this));break}t.set(o,u)}getColumnsInViewport(){if(!this.isPrintLayout)return this.getComponentsToRender();if(this.pinned)return[];const e=[];for(const t of["left",null,"right"])e.push(...this.getComponentsToRender(t));return e}getComponentsToRender(e=this.pinned){return this.type==="group"?this.beans.colViewport.getHeadersToRender(e,this.rowIndex):this.beans.colViewport.getColumnHeadersToRender(e)}focusHeader(e,t){const n=this.allCtrls.find(u=>u.column==e);return n?n.focus(t):!1}destroy(){this.allCtrls=this.destroyBeans(this.allCtrls),this.ctrlsById=void 0,this.comp=null,super.destroy()}},HeaderRowContainerCtrl=class extends BeanStub{constructor(e){super(),this.pinned=e,this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[]}setComp(e,t){this.comp=e,this.eViewport=t;const{pinnedCols:n,ctrlsSvc:o,colModel:u,colMoves:d}=this.beans;this.setupCenterWidth(),n?.setupHeaderPinnedWidth(this),this.setupDragAndDrop(d,this.eViewport);const f=this.refresh.bind(this,!0);this.addManagedEventListeners({displayedColumnsChanged:f,advancedFilterEnabledChanged:f});const g=`${typeof this.pinned=="string"?this.pinned:"center"}Header`;o.register(g,this),u.ready&&this.refresh()}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){const{focusSvc:t,filterManager:n,visibleCols:o}=this.beans;let u=0;const d=t.getFocusHeaderToUseAfterRefresh(),f=()=>{const R=o.headerGroupRowCount;u=R,e||(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls));const _=this.groupsRowCtrls.length;if(_!==R){if(_>R){for(let F=R;F<_;F++)this.destroyBean(this.groupsRowCtrls[F]);this.groupsRowCtrls.length=R;return}for(let F=_;F<R;F++){const M=this.createBean(new HeaderRowCtrl(F,this.pinned,"group"));this.groupsRowCtrls.push(M)}}},g=()=>{const R=u++;if(this.hidden){this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl);return}this.columnsRowCtrl==null||!e?(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.columnsRowCtrl=this.createBean(new HeaderRowCtrl(R,this.pinned,"column"))):this.columnsRowCtrl.rowIndex!==R&&this.columnsRowCtrl.setRowIndex(R)},v=()=>{this.includeFloatingFilter=!!n?.hasFloatingFilters()&&!this.hidden;const R=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){R();return}e||R();const _=u++;this.filtersRowCtrl?this.filtersRowCtrl.rowIndex!==_&&this.filtersRowCtrl.setRowIndex(_):this.filtersRowCtrl=this.createBean(new HeaderRowCtrl(_,this.pinned,"filter"))},w=this.getAllCtrls();f(),g(),v();const S=this.getAllCtrls();this.comp.setCtrls(S),this.restoreFocusOnHeader(t,d),w.length!==S.length&&this.beans.eventSvc.dispatchEvent({type:"headerRowsChanged"})}getHeaderCtrlForColumn(e){const t=n=>n?.getHeaderCellCtrls().find(o=>o.column===e);if(isColumn(e))return t(this.columnsRowCtrl);if(this.groupsRowCtrls.length!==0)for(let n=0;n<this.groupsRowCtrls.length;n++){const o=t(this.groupsRowCtrls[n]);if(o)return o}}getHtmlElementForColumnHeader(e){return this.getHeaderCtrlForColumn(e)?.eGui??null}getRowType(e){return this.getAllCtrls()[e]?.type}focusHeader(e,t,n){const u=this.getAllCtrls()[e];return u?u.focusHeader(t,n):!1}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}destroy(){this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl),this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl),this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls),super.destroy()}setupDragAndDrop(e,t){const n=e?.createBodyDropTarget(this.pinned,t);n&&this.createManagedBean(n)}restoreFocusOnHeader(e,t){if(!t)return;const{column:n}=t;n.getPinned()==this.pinned&&e.focusHeaderPosition({headerPosition:t,scroll:!1})}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new CenterWidthFeature(e=>this.comp.setCenterWidth(`${e}px`),!0))}},AgPopupComponent=class extends AgComponentStub{isPopup(){return!0}setParentComponent(e){e.addCss("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;e?.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},AgAbstractCellEditor=class extends AgPopupComponent{constructor(){super(...arguments),this.errorMessages=null}init(e){this.params=e,this.initialiseEditor(e),this.eEditor.onValueChange(()=>e.validate())}destroy(){this.eEditor.destroy(),this.errorMessages=null,super.destroy()}};function expireValueCache(e){e.valueCache?.expire()}function getCellValue(e,t){const{colKey:n,rowNode:o,useFormatter:u,from:d="edit"}=t,f=e.colModel.getColDefCol(n)??e.colModel.getCol(n);if(!f)return null;const g=e.valueSvc.getValueForDisplay({column:f,node:o,includeValueFormatted:u,from:d});return u?g.valueFormatted??_toString(g.value):g.value}var OverlayComponent=class extends Component{constructor(){super()}},ExportingOverlayElement={tag:"div",cls:"ag-overlay-exporting-center",children:[{tag:"span",ref:"eExportingIcon",cls:"ag-loading-icon"},{tag:"span",ref:"eExportingText",cls:"ag-exporting-text"}]},ExportingOverlayComponent=class extends OverlayComponent{constructor(){super(...arguments),this.eExportingIcon=RefPlaceholder,this.eExportingText=RefPlaceholder}init(e){const{beans:t}=this;this.setTemplate(ExportingOverlayElement);const n=_createIconNoSpan("overlayExporting",t,null);n&&this.eExportingIcon.appendChild(n);const o=e.exporting?.overlayText??this.getLocaleTextFunc()("exportingOoo","Exporting...");this.eExportingText.textContent=o,t.ariaAnnounce.announceValue(o,"overlay")}},LoadingOverlayElement={tag:"div",cls:"ag-overlay-loading-center",children:[{tag:"span",ref:"eLoadingIcon",cls:"ag-loading-icon"},{tag:"span",ref:"eLoadingText",cls:"ag-loading-text"}]},LoadingOverlayComponent=class extends OverlayComponent{constructor(){super(...arguments),this.eLoadingIcon=RefPlaceholder,this.eLoadingText=RefPlaceholder}init(e){const{beans:t,gos:n}=this,o=_makeNull(n.get("overlayLoadingTemplate")?.trim());if(this.setTemplate(o??LoadingOverlayElement),!o){const u=_createIconNoSpan("overlayLoading",t,null);u&&this.eLoadingIcon.appendChild(u);const d=e.loading?.overlayText??this.getLocaleTextFunc()("loadingOoo","Loading...");this.eLoadingText.textContent=d,t.ariaAnnounce.announceValue(d,"overlay")}}},NoMatchingRowsOverlayElement={tag:"span",cls:"ag-overlay-no-matching-rows-center"},NoMatchingRowsOverlayComponent=class extends OverlayComponent{init(e){const{beans:t}=this;this.setTemplate(NoMatchingRowsOverlayElement);const n=e.noMatchingRows?.overlayText??this.getLocaleTextFunc()("noMatchingRows","No Matching Rows");this.getGui().textContent=n,t.ariaAnnounce.announceValue(n,"overlay")}},NoRowsOverlayElement={tag:"span",cls:"ag-overlay-no-rows-center"},NoRowsOverlayComponent=class extends OverlayComponent{init(e){const{beans:t,gos:n}=this,o=_makeNull(n.get("overlayNoRowsTemplate")?.trim());if(this.setTemplate(o??NoRowsOverlayElement),!o){const u=e.noRows?.overlayText??this.getLocaleTextFunc()("noRowsToShow","No Rows To Show");this.getGui().textContent=u,t.ariaAnnounce.announceValue(u,"overlay")}}},agAbstractLabelCSS=".ag-label{white-space:nowrap}:where(.ag-ltr) .ag-label{margin-right:var(--ag-spacing)}:where(.ag-rtl) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-label-align-right) .ag-label{order:1}:where(.ag-ltr) :where(.ag-label-align-right) .ag-label{margin-left:var(--ag-spacing)}:where(.ag-rtl) :where(.ag-label-align-right) .ag-label{margin-right:var(--ag-spacing)}:where(.ag-label-align-right){.ag-label,.ag-wrapper{flex:none}}.ag-label-align-top{align-items:flex-start;flex-direction:column}:where(.ag-label-align-top){.ag-label,.ag-wrapper{align-self:stretch}}.ag-label-ellipsis{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:where(.ag-label-align-top) .ag-label{margin-bottom:calc(var(--ag-spacing)*.5)}",AgAbstractLabel=class extends AgComponentStub{constructor(e,t,n){super(t,n),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{},this.registerCSS(agAbstractLabelCSS)}postConstruct(){this.addCss("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:n,labelAlignment:o,disabled:u,labelEllipsis:d}=this.config;u!=null&&this.setDisabled(u),e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),n!=null&&this.setLabelWidth(n),d!=null&&this.setLabelEllipsis(d),this.setLabelAlignment(o||this.labelAlignment),this.refreshLabel()}refreshLabel(){const{label:e,eLabel:t}=this;_clearElement(t),typeof e=="string"?t.innerText=e+this.labelSeparator:e&&t.appendChild(e),e===""?(_setDisplayed(t,!1),_setAriaRole(t,"presentation")):(_setDisplayed(t,!0),_setAriaRole(t,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){const e=this.eLabel;return e.id=e.id||`ag-${this.getCompId()}-label`,e.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){const n=this.getGui().classList;return n.toggle("ag-label-align-left",e==="left"),n.toggle("ag-label-align-right",e==="right"),n.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(_setElementWidth(this.eLabel,e),this)}setDisabled(e){e=!!e;const t=this.getGui();return _setDisabled(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},AgAbstractField=class extends AgAbstractLabel{constructor(e,t,n,o){super(e,t,n),this.className=o}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:n,ariaLabel:o}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),n!=null&&this.onValueChange(n),o!=null&&this.setAriaLabel(o),this.className&&this.addCss(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId(),n=this.getLabel();n==null||n==""||_getAriaLabel(e)!==null?_setAriaLabelledBy(e,""):_setAriaLabelledBy(e,t??"")}setAriaLabel(e){return _setAriaLabel(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return _setFixedWidth(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}};function buildTemplate(e){return{tag:"div",role:"presentation",children:[{tag:"div",ref:"eLabel",cls:"ag-input-field-label"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-input-wrapper",role:"presentation",children:[{tag:e,ref:"eInput",cls:"ag-input-field-input"}]}]}}var AgAbstractInputField=class extends AgAbstractField{constructor(e,t,n="text",o="input"){super(e,e?.template??buildTemplate(o),[],t),this.inputType=n,this.displayFieldTag=o,this.eLabel=RefPlaceholder,this.eWrapper=RefPlaceholder,this.eInput=RefPlaceholder}postConstruct(){super.postConstruct(),this.setInputType(this.inputType);const{eLabel:e,eWrapper:t,eInput:n,className:o}=this;e.classList.add(`${o}-label`),t.classList.add(`${o}-input-wrapper`),n.classList.add(`${o}-input`),this.addCss("ag-input-field"),n.id=n.id||`ag-${this.getCompId()}-input`;const{inputName:u,inputWidth:d,inputPlaceholder:f,autoComplete:g,tabIndex:v}=this.config;u!=null&&this.setInputName(u),d!=null&&this.setInputWidth(d),f!=null&&this.setInputPlaceholder(f),g!=null&&this.setAutoComplete(g),this.addInputListeners(),this.activateTabIndex([n],v)}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(e){this.displayFieldTag==="input"&&(this.inputType=e,_addOrRemoveAttribute(this.eInput,"type",e))}getInputElement(){return this.eInput}getWrapperElement(){return this.eWrapper}setInputWidth(e){return _setElementWidth(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){const t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return _addOrRemoveAttribute(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return _setAriaLabel(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return _setDisabled(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)_addOrRemoveAttribute(this.eInput,"autocomplete",null);else{const t=typeof e=="string"?e:"off";_addOrRemoveAttribute(this.eInput,"autocomplete",t)}return this}},AgCheckbox=class extends AgAbstractInputField{constructor(e,t="ag-checkbox",n="checkbox"){super(e,t,n),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t,name:n}=this.config;typeof e=="boolean"&&this.setReadOnly(e),typeof t=="boolean"&&this.setPassive(t),n!=null&&this.setName(n)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){const t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){if(this.isSelected()===e)return;this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0;const n=this.eInput;n.checked=e,n.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue)}dispatchChange(e,t,n){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:n});const o=this.getInputElement();this.eventSvc.dispatchEvent({type:"checkboxChanged",id:o.id,name:o.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),n=this.selected=e.target.checked;this.refreshSelectedClass(n),this.dispatchChange(n,t,e)}refreshSelectedClass(e){const t=this.eWrapper.classList;t.toggle("ag-checked",e===!0),t.toggle("ag-indeterminate",e==null)}},AgCheckboxSelector={selector:"AG-CHECKBOX",component:AgCheckbox},checkboxCellRendererCSS=".ag-checkbox-cell{height:100%}",CheckboxCellRendererElement={tag:"div",cls:"ag-cell-wrapper ag-checkbox-cell",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},CheckboxCellRenderer=class extends Component{constructor(){super(CheckboxCellRendererElement,[AgCheckboxSelector]),this.eCheckbox=RefPlaceholder,this.registerCSS(checkboxCellRendererCSS)}init(e){this.refresh(e);const{eCheckbox:t,beans:n}=this,o=t.getInputElement();o.setAttribute("tabindex","-1"),_setAriaLive(o,"polite"),this.addManagedListeners(o,{click:u=>{if(_stopPropagationForAgGrid(u),t.isDisabled())return;const d=t.getValue();this.onCheckboxChanged(d)},dblclick:u=>{_stopPropagationForAgGrid(u)}}),this.addManagedElementListeners(e.eGridCell,{keydown:u=>{if(u.key===KeyCode.SPACE&&!t.isDisabled()){e.eGridCell===_getActiveDomElement(n)&&t.toggle();const d=t.getValue();this.onCheckboxChanged(d),u.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){let t,n=!0;const{value:o,column:u,node:d}=e;if(d.group&&u)if(typeof o=="boolean")t=o;else{const R=u.getColId();R.startsWith(GROUP_AUTO_COLUMN_ID)?t=o==null||o===""?void 0:o==="true":d.aggData&&d.aggData[R]!==void 0||d.sourceRowIndex>=0?t=o??void 0:n=!1}else t=o??void 0;const{eCheckbox:f}=this;if(!n){f.setDisplayed(!1);return}f.setValue(t);const g=e.disabled??!u?.isCellEditable(d);f.setDisabled(g);const v=this.getLocaleTextFunc(),w=_getAriaCheckboxStateName(v,t),S=g?w:`${v("ariaToggleCellValue","Press SPACE to toggle cell value")} (${w})`;f.setInputAriaLabel(S)}onCheckboxChanged(e){const{params:t}=this,{column:n,node:o,value:u}=t,{editSvc:d}=this.beans;if(!n)return;const f={rowNode:o,column:n};d?.dispatchCellEvent(f,null,"cellEditingStarted",{value:u});const g=o.setDataValue(n,e,"ui");d?.dispatchCellEvent(f,null,"cellEditingStopped",{oldValue:u,newValue:e,valueChanged:g}),g||this.updateCheckbox(t)}};function _getClientSideRowModel(e){const t=e.rowModel;return t.getType()==="clientSide"?t:void 0}function _getInfiniteRowModel(e){const t=e.rowModel;return t.getType()==="infinite"?t:void 0}function _getServerSideRowModel(e){const t=e.rowModel;return t.getType()==="serverSide"?t:void 0}var ROW_ID_PREFIX_ROW_GROUP="row-group-",ROW_ID_PREFIX_TOP_PINNED="t-",ROW_ID_PREFIX_BOTTOM_PINNED="b-",OBJECT_ID_SEQUENCE=0,RowNode=class{constructor(e){this.id=void 0,this.destroyed=!1,this._groupData=void 0,this.master=!1,this.detail=void 0,this.rowIndex=null,this.field=null,this.rowGroupColumn=null,this.key=null,this.sourceRowIndex=-1,this._leafs=void 0,this.childrenMapped=null,this.treeParent=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=OBJECT_ID_SEQUENCE++,this.alreadyRendered=!1,this.formulaRowIndex=null,this.hovered=!1,this.__selected=!1,this.beans=e}get groupData(){const e=this._groupData;return e!==void 0?e:this.footer?this.sibling?.groupData:this.beans.groupStage?.loadGroupData(this)??null}set groupData(e){this._groupData=e}get allLeafChildren(){const e=this._leafs;return e===void 0?this.beans.groupStage?.loadLeafs?.(this)??null:e}set allLeafChildren(e){this._leafs=e}setData(e){this.setDataCommon(e,!1)}updateData(e){this.setDataCommon(e,!0)}setDataCommon(e,t){const{valueCache:n,eventSvc:o}=this.beans,u=this.data;this.data=e,n?.onDataChanged(),this.updateDataOnDetailNode(),this.resetQuickFilterAggregateText();const d=this.createDataChangedEvent(e,u,t);if(this.__localEventService?.dispatchEvent(d),this.sibling){this.sibling.data=e;const g=this.sibling.createDataChangedEvent(e,u,t);this.sibling.__localEventService?.dispatchEvent(g)}o.dispatchEvent({type:"rowNodeDataChanged",node:this});const f=this.pinnedSibling;f&&(f.data=e,f.__localEventService?.dispatchEvent(f.createDataChangedEvent(e,u,t)),o.dispatchEvent({type:"rowNodeDataChanged",node:f}))}updateDataOnDetailNode(){const e=this.detailNode;e&&(e.data=this.data)}createDataChangedEvent(e,t,n){return{type:"dataChanged",node:this,oldData:t,newData:e,update:n}}getRowIndexString(){return this.rowIndex==null?(_error(13),null):this.rowPinned==="top"?ROW_ID_PREFIX_TOP_PINNED+this.rowIndex:this.rowPinned==="bottom"?ROW_ID_PREFIX_BOTTOM_PINNED+this.rowIndex:this.rowIndex.toString()}setDataAndId(e,t){const{selectionSvc:n}=this.beans,o=n?.createDaemonNode?.(this),u=this.data;this.data=e,this.updateDataOnDetailNode(),this.setId(t),n&&(n.updateRowSelectable(this),n.syncInRowNode(this,o));const d=this.createDataChangedEvent(e,u,!1);this.__localEventService?.dispatchEvent(d)}setId(e){const t=_getRowIdCallback(this.beans.gos);if(t)if(this.data){const n=this.parent?.getRoute()??[];this.id=t({data:this.data,parentKeys:n.length>0?n:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(ROW_ID_PREFIX_ROW_GROUP)&&_error(14,{groupPrefix:ROW_ID_PREFIX_ROW_GROUP})}else this.id=void 0;else this.id=e}setRowTop(e){if(this.oldRowTop=this.rowTop,this.rowTop===e)return;this.rowTop=e,this.dispatchRowEvent("topChanged");const t=e!==null;this.displayed!==t&&(this.displayed=t,this.dispatchRowEvent("displayedChanged"))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(e){this.hovered=e}isHovered(){return this.hovered}setRowHeight(e,t=!1){this.rowHeight=e,this.rowHeightEstimated=t,this.dispatchRowEvent("heightChanged")}setExpanded(e,t,n){this.beans.expansionSvc?.setExpanded(this,e,t,n)}setDataValue(e,t,n){const{colModel:o,valueSvc:u,gos:d,editSvc:f}=this.beans;if(e==null)return!1;let g=o.getCol(e)??o.getColDefCol(e);if(!g)return!1;if(!this.group){const S=g.getColDef();S.pivotValueColumn&&(g=S.pivotValueColumn)}const v=u.getValueForDisplay({column:g,node:this,from:"data"}).value;if(d.get("readOnlyEdit")){const{beans:{eventSvc:S},data:R,rowIndex:_,rowPinned:F}=this;return S.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:_,rowPinned:F,column:g,colDef:g.colDef,data:R,node:this,oldValue:v,newValue:t,value:t,source:n}),!1}if(f&&!f.committing){const S=f.setDataValue({rowNode:this,column:g},t,n);if(S!=null)return S}const w=u.setValue(this,g,t,n);return this.dispatchCellChangedEvent(g,t,v),w&&this.pinnedSibling?.dispatchCellChangedEvent(g,t,v),w}getDataValue(e){const{colModel:t,valueSvc:n,formula:o}=this.beans;if(e==null)return;const u=t.getCol(e)??t.getColDefCol(e);if(!u)return;let d=n.getValue(u,this,"data");return o&&u.isAllowFormula()&&o.isFormula(d)&&(d=o.resolveValue(u,this)),d}updateHasChildren(){let e=this.group&&!this.footer||!!this.childrenAfterGroup?.length;const{rowChildrenSvc:t}=this.beans;t&&(e=t.getHasChildrenValue(this)),e!==this.__hasChildren&&(this.__hasChildren=!!e,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(e,t,n){const o={type:"cellChanged",node:this,column:e,newValue:t,oldValue:n};this.__localEventService?.dispatchEvent(o)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.beans.expansionSvc?.isExpandable(this)??!1}isSelected(){if(this.footer)return this.sibling.isSelected();const e=this.rowPinned&&this.pinnedSibling;return e?e.isSelected():this.__selected}depthFirstSearch(e){const t=this.childrenAfterGroup;if(t)for(let n=0,o=t.length;n<o;++n)t[n].depthFirstSearch(e);e(this)}getAggregatedChildren(e){const t=this.beans;return t.aggStage?.getAggregatedChildren(this,t.colModel.getCol(e))??[]}dispatchRowEvent(e){this.__localEventService?.dispatchEvent({type:e,node:this})}setSelected(e,t=!1,n="api"){this.beans.selectionSvc?.setNodesSelected({nodes:[this],newValue:e,clearSelection:t,source:n})}isRowPinned(){return!!this.rowPinned}__addEventListener(e,t){(this.__localEventService??(this.__localEventService=new LocalEventService)).addEventListener(e,t)}__removeEventListener(e,t){this.removeLocalListener(e,t)}addEventListener(e,t){this.beans.validation?.checkRowEvents(e);const n=this.__localEventService??(this.__localEventService=new LocalEventService);this.frameworkEventListenerService=this.beans.frameworkOverrides.createLocalEventListenerWrapper?.(this.frameworkEventListenerService,n);const o=this.frameworkEventListenerService?.wrap(e,t)??t;n.addEventListener(e,o)}removeEventListener(e,t){const n=this.frameworkEventListenerService?.unwrap(e,t)??t;this.removeLocalListener(e,n)}removeLocalListener(e,t){const n=this.__localEventService;n&&(n.removeEventListener(e,t),n.noRegisteredListenersExist()&&(this.__localEventService=null))}isFullWidthCell(){if(_warn(61),this.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this}):!1}getRoute(){if(this.level===-1)return[];if(this.key==null)return;const e=[];let t=this;for(;t?.key!=null;)e.push(t.key),t=t.parent;return e.reverse()}setRowIndex(e){this.rowIndex!==e&&(this.rowIndex=e,this.dispatchRowEvent("rowIndexChanged"))}setAllChildrenCount(e){this.allChildrenCount!==e&&(this.allChildrenCount=e,this.dispatchRowEvent("allChildrenCountChanged"))}setUiLevel(e){this.uiLevel!==e&&(this.uiLevel=e,this.dispatchRowEvent("uiLevelChanged"))}getFirstChild(){const e=this.childStore;return e?e.getFirstNode():this.childrenAfterSort?.[0]??null}_destroy(e){if(this.destroyed)return!1;this.destroyed=!0;const t=this.pinnedSibling;if(t?.rowPinned&&!this.rowPinned&&this.beans.pinnedRowModel?.pinRow(t,null),e?this.clearRowTopAndRowIndex():(this.setRowTop(null),this.setRowIndex(null)),!this.footer){const n=this.detailNode;n&&n._destroy(e);const o=this.sibling;o&&o._destroy(e)}return!0}};function _createGlobalRowEvent(e,t,n){return _addGridCommonParams(t,{type:n,node:e,data:e.data,rowIndex:e.rowIndex,rowPinned:e.rowPinned})}var IGNORED_SIBLING_PROPERTIES=new Set(["__autoHeights","__checkAutoHeightsDebounced","__localEventService","__objectId","_groupData","_leafs","childStore","groupValue","oldRowTop","sticky","treeNodeFlags","treeParent"]),_createRowNodeSibling=(e,t)=>{const n=new RowNode(t);for(const o of Object.keys(e))IGNORED_SIBLING_PROPERTIES.has(o)||(n[o]=e[o]);return n.oldRowTop=null,n},_prevOrNextDisplayedRow=(e,t,n)=>{if(!n)return;let o=n.rowIndex;if(o==null)return;o+=t;const u=e.getRowCount();for(;o>=0&&o<u;){const d=e.getRow(o);if(!d||!d.footer&&!d.detail)return d;o+=t}},PinnedRows=class{constructor(e,t){this.beans=e,this.floating=t,this.all=new Set,this.visible=new Set,this.order=[],this.queued=new Set}size(){return this.visible.size}add(e){const{all:t,visible:n,order:o}=this;t.has(e)||(t.add(e),n.add(e),o.push(e),this.sort())}delete(e){this.all.delete(e),this.visible.delete(e),this.queued.delete(e.id),_removeFromArray(this.order,e)}has(e){return this.visible.has(e)}forEach(e){this.order.forEach(e)}getByIndex(e){return this.order[e]}getById(e){for(const t of this.visible)if(t.id==e)return t}clear(){const{all:e,visible:t,order:n,queued:o}=this;e.clear(),o.clear(),t.clear(),n.length=0}sort(){const{sortSvc:e,rowNodeSorter:t,gos:n}=this.beans,o=e?.getSortOptions()??[],u=this.order,d=_removeGrandTotalRow(u);if(u.sort((g,v)=>t?.compareRowNodes(o,g,v)||(g.pinnedSibling?.rowIndex??0)-(v.pinnedSibling?.rowIndex??0)),!d)return;const f=_getGrandTotalRow(n);f==="bottom"||f==="pinnedBottom"?this.order.push(d):this.order.unshift(d)}hide(e){const{all:t,visible:n}=this,o=n.size;return t.forEach(u=>e(u)?n.delete(u):n.add(u)),this.order=Array.from(n),this.sort(),o!=n.size}queue(e){this.queued.add(e)}unqueue(e){this.queued.delete(e)}forEachQueued(e){this.queued.forEach(e)}};function _isDisplayedAfterFilterCSRM(e){if(e.level===-1)return!0;const t=e.parent;return t?.childrenAfterSort?.some(n=>n==e)?_isDisplayedAfterFilterCSRM(t):!1}function _shouldHidePinnedRows(e,t){const{gos:n,rowModel:o,filterManager:u}=e;return _isServerSideRowModel(n)?!o.getRowNode(t.id):u?.isAnyFilterPresent()?!_isDisplayedAfterFilterCSRM(t):n.get("pivotMode")?!t.group:!1}function _isNodeGrandTotal(e){return!!e.footer&&e.level===-1}function _isPinnedNodeGrandTotal(e){return!!e.pinnedSibling&&_isNodeGrandTotal(e.pinnedSibling)}function _removeGrandTotalRow(e){const t=e.findIndex(_isPinnedNodeGrandTotal);if(t>-1)return e.splice(t,1)?.[0]}var ManualPinnedRowModel=class extends BeanStub{constructor(){super(...arguments),this.csrm=null}postConstruct(){const{gos:e,beans:t}=this;this.top=new PinnedRows(t,"top"),this.bottom=new PinnedRows(t,"bottom"),this.csrm=_getClientSideRowModel(t)??null;const n=u=>_shouldHidePinnedRows(t,u.pinnedSibling),o=()=>{const u=e.get("isRowPinned");u&&e.get("enableRowPinning")&&t.rowModel.forEachNode(d=>this.pinRow(d,u(d)),!0),this.refreshRowPositions(),this.dispatchRowPinnedEvents()};this.addManagedEventListeners({stylesChanged:this.onGridStylesChanges.bind(this),modelUpdated:({keepRenderedRows:u})=>{this.tryToEmptyQueues(),this.pinGrandTotalRow();let d=!1;this.forContainers(g=>{d||(d=g.hide(n))});const f=this.refreshRowPositions();(!u||f||d)&&this.dispatchRowPinnedEvents()},columnRowGroupChanged:()=>{this.forContainers(removeGroupRows),this.refreshRowPositions()},rowNodeDataChanged:({node:u})=>{(e.get("isRowPinnable")?.(u)??!0)||this.pinRow(u,null)},firstDataRendered:o}),this.addManagedPropertyListener("pivotMode",()=>{this.forContainers(u=>u.hide(n)),this.dispatchRowPinnedEvents()}),this.addManagedPropertyListener("grandTotalRow",({currentValue:u})=>{this._grandTotalPinned=u==="pinnedBottom"?"bottom":u==="pinnedTop"?"top":null}),this.addManagedPropertyListener("isRowPinned",o)}destroy(){this.reset(!1),super.destroy()}reset(e=!0){this.forContainers(t=>{const n=[];t.forEach(o=>n.push(o)),n.forEach(o=>this.pinRow(o,null)),t.clear()}),e&&this.dispatchRowPinnedEvents()}pinRow(e,t,n){if(t!=null&&e.destroyed)return;if(e.footer){const f=e.level;if(f>-1)return;if(f===-1){this._grandTotalPinned=t,this.csrm?.reMapRows();return}}const o=e.rowPinned??e.pinnedSibling?.rowPinned;if(o!=null&&t!=null&&t!=o){const f=e.rowPinned?e:e.pinnedSibling,g=e.rowPinned?e.pinnedSibling:e;this.pinRow(f,null,n),this.pinRow(g,t,n);return}const d=n&&getSpannedRows(this.beans,e,n);if(d){d.forEach(f=>this.pinRow(f,t));return}if(t==null){const f=e.rowPinned?e:e.pinnedSibling,g=this.findPinnedRowNode(f);if(!g)return;g.delete(f);const v=f.pinnedSibling;_destroyRowNodeSibling(f),this.refreshRowPositions(t),this.dispatchRowPinnedEvents(v)}else{const f=_createPinnedSibling(this.beans,e,t),g=this.getContainer(t);g.add(f),_shouldHidePinnedRows(this.beans,e)&&g.hide(v=>_shouldHidePinnedRows(this.beans,v.pinnedSibling)),this.refreshRowPositions(t),this.dispatchRowPinnedEvents(e)}}isManual(){return!0}isEmpty(e){return this.getContainer(e).size()===0}isRowsToRender(e){return!this.isEmpty(e)}ensureRowHeightsValid(){let e=!1,t=0;const n=o=>{if(o.rowHeightEstimated){const u=_getRowHeightForNode(this.beans,o);o.setRowTop(t),o.setRowHeight(u.height),t+=u.height,e=!0}};return this.bottom.forEach(n),t=0,this.top.forEach(n),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}getPinnedTopTotalHeight(){return getTotalHeight(this.top)}getPinnedBottomTotalHeight(){return getTotalHeight(this.bottom)}getPinnedTopRowCount(){return this.top.size()}getPinnedBottomRowCount(){return this.bottom.size()}getPinnedTopRow(e){return this.top.getByIndex(e)}getPinnedBottomRow(e){return this.bottom.getByIndex(e)}getPinnedRowById(e,t){return this.getContainer(t).getById(e)}forEachPinnedRow(e,t){this.getContainer(e).forEach(t)}getPinnedState(){const e=t=>{const n=[];return this.forEachPinnedRow(t,o=>{const u=o.pinnedSibling?.id;u!=null&&n.push(u)}),n};return{top:e("top"),bottom:e("bottom")}}setPinnedState(e){this.forContainers((t,n)=>{for(const o of e[n]){const u=this.beans.rowModel.getRowNode(o);u?this.pinRow(u,n):t.queue(o)}})}getGrandTotalPinned(){return this._grandTotalPinned}setGrandTotalPinned(e){this._grandTotalPinned=e}tryToEmptyQueues(){this.forContainers((e,t)=>{const n=new Set;e.forEachQueued(o=>{const u=this.beans.rowModel.getRowNode(o);u&&n.add(u)});for(const o of n)e.unqueue(o.id),this.pinRow(o,t)})}pinGrandTotalRow(){const{csrm:e,beans:t,_grandTotalPinned:n}=this;if(!e)return;const o=e.rootNode?.sibling;if(!o)return;const u=o.pinnedSibling,d=u&&this.findPinnedRowNode(u);if(n){if(d&&d.floating!==n&&(_destroyRowNodeSibling(u),d.delete(u)),!d||d.floating!==n){const f=_createPinnedSibling(t,o,n);this.getContainer(n).add(f)}}else{if(!d)return;_destroyRowNodeSibling(u),d.delete(u)}}onGridStylesChanges(e){e.rowHeightChanged&&this.forContainers(t=>t.forEach(n=>n.setRowHeight(n.rowHeight,!0)))}getContainer(e){return e==="top"?this.top:this.bottom}findPinnedRowNode(e){if(this.top.has(e))return this.top;if(this.bottom.has(e))return this.bottom}refreshRowPositions(e){const t=o=>refreshRowPositions(this.beans,o);if(e)return t(this.getContainer(e));let n=!1;return this.forContainers(o=>{const u=t(o);n||(n=u)}),n}forContainers(e){e(this.top,"top"),e(this.bottom,"bottom")}dispatchRowPinnedEvents(e){this.eventSvc.dispatchEvent({type:"pinnedRowsChanged"}),e?.dispatchRowEvent("rowPinned")}};function refreshRowPositions(e,t){let n=0,o=!1;return t.forEach((u,d)=>{if(o||(o=u.rowTop!==n),u.setRowTop(n),u.rowHeightEstimated||u.rowHeight==null){const f=_getRowHeightForNode(e,u).height;o||(o=u.rowHeight!==f),u.setRowHeight(f)}u.setRowIndex(d),n+=u.rowHeight}),o}function _createPinnedSibling(e,t,n){if(t.pinnedSibling)return t.pinnedSibling;const o=_createRowNodeSibling(t,e);o.setRowTop(null),o.setRowIndex(null),o.rowPinned=n;const u=n==="top"?ROW_ID_PREFIX_TOP_PINNED:ROW_ID_PREFIX_BOTTOM_PINNED;return o.id=`${u}${n}-${t.id}`,o.pinnedSibling=t,t.pinnedSibling=o,o}function _destroyRowNodeSibling(e){if(!e.pinnedSibling)return;e.rowPinned=null,e._destroy(!1);const t=e.pinnedSibling;e.pinnedSibling=void 0,t&&(t.pinnedSibling=void 0,t.rowPinned=null)}function removeGroupRows(e){const t=new Set;e.forEach(n=>{n.group&&t.add(n)}),t.forEach(n=>e.delete(n))}function getSpannedRows(e,t,n){const{rowSpanSvc:o}=e,u=(n&&o?.isCellSpanning(n,t))??!1;if(n&&u)return o?.getCellSpan(n,t)?.spannedNodes}function getTotalHeight(e){const t=e.size();if(t===0)return 0;const n=e.getByIndex(t-1);return n===void 0?0:n.rowTop+n.rowHeight}var StaticPinnedRowModel=class extends BeanStub{constructor(){super(...arguments),this.nextId=0,this.pinnedTopRows={cache:{},order:[]},this.pinnedBottomRows={cache:{},order:[]}}postConstruct(){const e=this.gos;this.setPinnedRowData(e.get("pinnedTopRowData"),"top"),this.setPinnedRowData(e.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",t=>this.setPinnedRowData(t.currentValue,"top")),this.addManagedPropertyListener("pinnedBottomRowData",t=>this.setPinnedRowData(t.currentValue,"bottom")),this.addManagedEventListeners({stylesChanged:this.onGridStylesChanges.bind(this)})}reset(){}isEmpty(e){return this.getCache(e).order.length===0}isRowsToRender(e){return!this.isEmpty(e)}isManual(){return!1}pinRow(e,t){}onGridStylesChanges(e){if(e.rowHeightChanged){const t=n=>{n.setRowHeight(n.rowHeight,!0)};forEach(this.pinnedBottomRows,t),forEach(this.pinnedTopRows,t)}}ensureRowHeightsValid(){let e=!1,t=0;const n=o=>{if(o.rowHeightEstimated){const u=_getRowHeightForNode(this.beans,o);o.setRowTop(t),o.setRowHeight(u.height),t+=u.height,e=!0}};return forEach(this.pinnedBottomRows,n),t=0,forEach(this.pinnedTopRows,n),this.eventSvc.dispatchEvent({type:"pinnedHeightChanged"}),e}setPinnedRowData(e,t){this.updateNodesFromRowData(e,t),this.eventSvc.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(e,t){const n=this.getCache(t);if(e===void 0){n.order.length=0,n.cache={};return}const o=_getRowIdCallback(this.gos),u=t==="top"?ROW_ID_PREFIX_TOP_PINNED:ROW_ID_PREFIX_BOTTOM_PINNED,d=new Set(n.order),f=[],g=new Set;let v=0,w=-1;for(const S of e){const R=o?.({data:S,level:0,rowPinned:t})??u+this.nextId++;if(g.has(R)){_warn(96,{id:R,data:S});continue}w++,g.add(R),f.push(R);const _=getById(n,R);if(_!==void 0)_.data!==S&&_.updateData(S),v+=this.setRowTopAndRowIndex(_,v,w),d.delete(R);else{const F=new RowNode(this.beans);F.id=R,F.data=S,F.rowPinned=t,v+=this.setRowTopAndRowIndex(F,v,w),n.cache[R]=F,n.order.push(R)}}for(const S of d)getById(n,S)?.clearRowTopAndRowIndex(),delete n.cache[S];n.order=f}setRowTopAndRowIndex(e,t,n){return e.setRowTop(t),e.setRowHeight(_getRowHeightForNode(this.beans,e).height),e.setRowIndex(n),e.rowHeight}getPinnedTopTotalHeight(){return getTotalHeight2(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return getTotalHeight2(this.pinnedBottomRows)}getPinnedTopRowCount(){return getSize(this.pinnedTopRows)}getPinnedBottomRowCount(){return getSize(this.pinnedBottomRows)}getPinnedTopRow(e){return getByIndex(this.pinnedTopRows,e)}getPinnedBottomRow(e){return getByIndex(this.pinnedBottomRows,e)}getPinnedRowById(e,t){return getById(this.getCache(t),e)}forEachPinnedRow(e,t){return forEach(this.getCache(e),t)}getCache(e){return e==="top"?this.pinnedTopRows:this.pinnedBottomRows}getPinnedState(){return{top:[],bottom:[]}}setPinnedState(){}getGrandTotalPinned(){}setGrandTotalPinned(){}};function getTotalHeight2(e){const t=getSize(e);if(t===0)return 0;const n=getByIndex(e,t-1);return n===void 0?0:n.rowTop+n.rowHeight}function getById(e,t){return e.cache[t]}function getByIndex(e,t){return getById(e,e.order[t])}function forEach(e,t){e.order.forEach((n,o)=>{const u=getById(e,n);u&&t(u,o)})}function getSize(e){return e.order.length}var PinnedRowModel=class extends BeanStub{constructor(){super(...arguments),this.beanName="pinnedRowModel"}postConstruct(){const{gos:e}=this,t=()=>{const n=e.get("enableRowPinning"),o=_getGrandTotalRow(e),d=!!n||(o==="pinnedBottom"||o==="pinnedTop"),f=d?this.inner instanceof StaticPinnedRowModel:this.inner instanceof ManualPinnedRowModel;this.inner&&f&&this.destroyBean(this.inner),(f||!this.inner)&&(this.inner=this.createManagedBean(d?new ManualPinnedRowModel:new StaticPinnedRowModel))};this.addManagedPropertyListeners(["enableRowPinning","grandTotalRow"],t),t()}reset(){return this.inner.reset()}isEmpty(e){return this.inner.isEmpty(e)}isManual(){return this.inner.isManual()}isRowsToRender(e){return this.inner.isRowsToRender(e)}pinRow(e,t,n){return this.inner.pinRow(e,t,n)}ensureRowHeightsValid(){return this.inner.ensureRowHeightsValid()}getPinnedRowById(e,t){return this.inner.getPinnedRowById(e,t)}getPinnedTopTotalHeight(){return this.inner.getPinnedTopTotalHeight()}getPinnedBottomTotalHeight(){return this.inner.getPinnedBottomTotalHeight()}getPinnedTopRowCount(){return this.inner.getPinnedTopRowCount()}getPinnedBottomRowCount(){return this.inner.getPinnedBottomRowCount()}getPinnedTopRow(e){return this.inner.getPinnedTopRow(e)}getPinnedBottomRow(e){return this.inner.getPinnedBottomRow(e)}forEachPinnedRow(e,t){return this.inner.forEachPinnedRow(e,t)}getPinnedState(){return this.inner.getPinnedState()}setPinnedState(e){return this.inner.setPinnedState(e)}setGrandTotalPinned(e){return this.inner.setGrandTotalPinned(e)}getGrandTotalPinned(){return this.inner.getGrandTotalPinned()}},DOUBLE_TAP_MILLISECONDS=500,LONG_PRESS_MILLISECONDS=550,handledTouchEvents,addHandledTouchEvent=e=>{if(!handledTouchEvents)handledTouchEvents=new WeakSet;else if(handledTouchEvents.has(e))return!1;return handledTouchEvents.add(e),!0},TouchListener=class{constructor(e,t=!1){this.eElement=e,this.preventClick=t,this.startListener=null,this.handlers=[],this.eventSvc=void 0,this.touchStart=null,this.lastTapTime=null,this.longPressTimer=0,this.moved=!1}addEventListener(e,t){let n=this.eventSvc;if(!n){if(n===null)return;this.eventSvc=n=new LocalEventService;const o=this.onTouchStart.bind(this);this.startListener=o,this.eElement.addEventListener("touchstart",o,{passive:!0})}n.addEventListener(e,t)}removeEventListener(e,t){this.eventSvc?.removeEventListener(e,t)}onTouchStart(e){if(this.touchStart||!addHandledTouchEvent(e))return;const t=e.touches[0];this.touchStart=t;const n=this.handlers;if(!n.length){const o=this.eElement,u=o.ownerDocument,d=this.onTouchMove.bind(this),f=this.onTouchEnd.bind(this),g=this.onTouchCancel.bind(this),v={passive:!0},w={passive:!1};addTempEventHandlers(n,[o,"touchmove",d,v],[u,"touchcancel",g,v],[u,"touchend",f,w],[u,"contextmenu",preventEventDefault,w])}this.clearLongPress(),this.longPressTimer=window.setTimeout(()=>{this.longPressTimer=0,this.touchStart===t&&!this.moved&&(this.moved=!0,this.eventSvc?.dispatchEvent({type:"longTap",touchStart:t,touchEvent:e}))},LONG_PRESS_MILLISECONDS)}onTouchMove(e){const{moved:t,touchStart:n}=this;if(!t&&n){const o=_getFirstActiveTouch(n,e.touches);o&&!_areEventsNear(o,n,4)&&(this.clearLongPress(),this.moved=!0)}}onTouchEnd(e){const t=this.touchStart;!t||!_getFirstActiveTouch(t,e.changedTouches)||(this.moved||(this.eventSvc?.dispatchEvent({type:"tap",touchStart:t}),this.checkDoubleTap(t)),this.preventClick&&preventEventDefault(e),this.cancel())}onTouchCancel(e){const t=this.touchStart;!t||!_getFirstActiveTouch(t,e.changedTouches)||(this.lastTapTime=null,this.cancel())}checkDoubleTap(e){let t=Date.now();const n=this.lastTapTime;n&&t-n>DOUBLE_TAP_MILLISECONDS&&(this.eventSvc?.dispatchEvent({type:"doubleTap",touchStart:e}),t=null),this.lastTapTime=t}cancel(){this.clearLongPress(),clearTempEventHandlers(this.handlers),this.touchStart=null}clearLongPress(){window.clearTimeout(this.longPressTimer),this.longPressTimer=0,this.moved=!1}destroy(){const e=this.startListener;e&&(this.startListener=null,this.eElement.removeEventListener("touchstart",e)),this.cancel(),this.eElement=null,this.eventSvc=null}},contextId=1,AgContext=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,this.instanceId=contextId++,e?.beanClasses&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){this.id=e.id,this.beans.context=this,this.destroyCallback=e.destroyCallback;for(const t of Object.keys(e.providedBeanInstances))this.beans[t]=e.providedBeanInstances[t];for(const t of e.beanClasses){const n=new t;n.beanName?this.beans[n.beanName]=n:console.error(`Bean ${t.name} is missing beanName`),this.createdBeans.push(n)}for(const t of e.derivedBeans??[]){const{beanName:n,bean:o}=t(this);this.beans[n]=o,this.createdBeans.push(o)}e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){return this.initBeans([e],t),e}initBeans(e,t){const n=this.beans;for(const o of e)o.preWireBeans?.(n),o.wireBeans?.(n);for(const o of e)o.preConstruct?.();t&&e.forEach(t);for(const o of e)o.postConstruct?.()}getBeans(){return this.beans}getBean(e){return this.beans[e]}getId(){return this.id}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[],this.destroyCallback?.()}destroyBean(e){e?.destroy?.()}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}};function createGridApi(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionSvc").api}}var orderedCoreBeans=["licenseManager","environment","eventSvc","gos","paginationAutoPageSizeSvc","apiFunctionSvc","gridApi","registry","agCompUtils","userCompFactory","rowContainerHeight","horizontalResizeSvc","localeSvc","pinnedRowModel","dragSvc","colGroupSvc","visibleCols","popupSvc","selectionSvc","colFilter","quickFilter","filterManager","colModel","headerNavigation","pageBounds","pagination","pageBoundsListener","rowSpanSvc","stickyRowSvc","rowRenderer","expressionSvc","alignedGridsSvc","navigation","valueCache","valueSvc","autoWidthCalc","filterMenuFactory","dragAndDrop","focusSvc","cellNavigation","cellStyles","scrollVisibleSvc","sortSvc","colHover","colAnimation","autoColSvc","selectionColSvc","changeDetectionSvc","animationFrameSvc","undoRedo","colDefFactory","rowStyleSvc","rowNodeBlockLoader","rowNodeSorter","ctrlsSvc","pinnedCols","dataTypeSvc","syncSvc","overlays","stateSvc","expansionSvc","apiEventSvc","ariaAnnounce","menuSvc","colMoves","colAutosize","colFlex","colResize","pivotColsSvc","valueColsSvc","rowGroupColsSvc","colNames","colViewport","pivotResultCols","showRowGroupCols","validation"],beanNamePosition=Object.fromEntries(orderedCoreBeans.map((e,t)=>[e,t]));function gridBeanInitComparator(e,t){const n=(e.beanName?beanNamePosition[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER,o=(t.beanName?beanNamePosition[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return n-o}function gridBeanDestroyComparator(e,t){return e?.beanName==="gridDestroySvc"?-1:t?.beanName==="gridDestroySvc"?1:0}var LayoutCssClasses={AUTO_HEIGHT:"ag-layout-auto-height",NORMAL:"ag-layout-normal",PRINT:"ag-layout-print"},LayoutFeature=class extends BeanStub{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.gos.get("domLayout"),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},n=t.autoHeight?LayoutCssClasses.AUTO_HEIGHT:t.print?LayoutCssClasses.PRINT:LayoutCssClasses.NORMAL;this.view.updateLayoutClasses(n,t)}},AbstractFakeScrollComp=class extends Component{constructor(e,t){super(),this.direction=t,this.eViewport=RefPlaceholder,this.eContainer=RefPlaceholder,this.hideTimeout=0,this.setTemplate(e)}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.toggleCss("ag-apple-scrollbar",_isMacOsUserAgent()||_isIOSUserAgent())}destroy(){super.destroy(),window.clearTimeout(this.hideTimeout)}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=_isInvisibleScrollbar(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=this.getGui(),t=()=>this.toggleCss("ag-scrollbar-active",!0),n=()=>this.toggleCss("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:n,touchend:n})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),_requestAnimationFrame(this.beans,()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=0),this.toggleCss("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.toggleCss("ag-scrollbar-scrolling",!1),this.hideTimeout=0},400)}})}attemptSettingScrollPosition(e){const t=this.eViewport;_waitUntil(this,()=>_isVisible(t),()=>this.setScrollPosition(e),100)}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}},FakeHScrollElement={tag:"div",cls:"ag-body-horizontal-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eLeftSpacer",cls:"ag-horizontal-left-spacer"},{tag:"div",ref:"eViewport",cls:"ag-body-horizontal-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-horizontal-scroll-container"}]},{tag:"div",ref:"eRightSpacer",cls:"ag-horizontal-right-spacer"}]},FakeHScrollComp=class extends AbstractFakeScrollComp{constructor(){super(FakeHScrollElement,"horizontal"),this.eLeftSpacer=RefPlaceholder,this.eRightSpacer=RefPlaceholder,this.setScrollVisibleDebounce=0}wireBeans(e){this.visibleCols=e.visibleCols,this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.refreshCompBottom.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.beans.ctrlsSvc.register("fakeHScrollComp",this),this.createManagedBean(new CenterWidthFeature(t=>this.eContainer.style.width=`${t}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}destroy(){window.clearTimeout(this.setScrollVisibleDebounce),super.destroy()}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}refreshCompBottom(){if(!this.invisibleScrollbar)return;const e=this.beans.pinnedRowModel?.getPinnedBottomTotalHeight()??0;this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleSvc.verticalScrollShowing;let t=this.visibleCols.getDisplayedColumnsRightWidth();const n=!this.enableRtl&&e,o=this.scrollVisibleSvc.getScrollbarWidth();n&&(t+=o),_setFixedWidth(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=o);let u=this.visibleCols.getColsLeftWidth();this.enableRtl&&e&&(u+=o),_setFixedWidth(this.eLeftSpacer,u),this.eLeftSpacer.classList.toggle("ag-scroller-corner",u<=o)}setScrollVisible(){const e=this.scrollVisibleSvc.horizontalScrollShowing,t=this.invisibleScrollbar,n=this.gos.get("suppressHorizontalScroll"),o=e&&this.scrollVisibleSvc.getScrollbarWidth()||0,d=n?0:o===0&&t?16:o,f=()=>{this.setScrollVisibleDebounce=0,this.toggleCss("ag-scrollbar-invisible",t),_setFixedHeight(this.getGui(),d),_setFixedHeight(this.eViewport,d),_setFixedHeight(this.eContainer,d),d||this.eContainer.style.setProperty("min-height","1px"),this.setVisible(e,{skipAriaHidden:!0})};window.clearTimeout(this.setScrollVisibleDebounce),e?this.setScrollVisibleDebounce=window.setTimeout(f,100):f()}getScrollPosition(){return _getScrollLeft(this.eViewport,this.enableRtl)}setScrollPosition(e){_isVisible(this.eViewport)||this.attemptSettingScrollPosition(e),_setScrollLeft(this.eViewport,e,this.enableRtl)}},SetHeightFeature=class extends BeanStub{constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this,this.beans.rowContainerHeight)})}onHeightChanged(e){const t=e.uiContainerHeight,n=t!=null?`${t}px`:"";this.eContainer.style.height=n,this.eViewport&&(this.eViewport.style.height=n)}},FakeVScrollElement={tag:"div",cls:"ag-body-vertical-scroll",attrs:{"aria-hidden":"true"},children:[{tag:"div",ref:"eViewport",cls:"ag-body-vertical-scroll-viewport",children:[{tag:"div",ref:"eContainer",cls:"ag-body-vertical-scroll-container"}]}]},FakeVScrollComp=class extends AbstractFakeScrollComp{constructor(){super(FakeVScrollElement,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new SetHeightFeature(this.eContainer));const{ctrlsSvc:e}=this.beans;e.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this,e)})}setScrollVisible(){const{scrollVisibleSvc:e}=this.beans,t=e.verticalScrollShowing,n=this.invisibleScrollbar,o=t&&e.getScrollbarWidth()||0,u=o===0&&n?16:o;this.toggleCss("ag-scrollbar-invisible",n),_setFixedWidth(this.getGui(),u),_setFixedWidth(this.eViewport,u),_setFixedWidth(this.eContainer,u),this.setDisplayed(t,{skipAriaHidden:!0})}onRowContainerHeightChanged(e){const n=e.getGridBodyCtrl().eBodyViewport,o=this.getScrollPosition(),u=n.scrollTop;o!=u&&this.setScrollPosition(u,!0)}getScrollPosition(){return this.eViewport.scrollTop}setScrollPosition(e,t){!t&&!_isVisible(this.eViewport)&&this.attemptSettingScrollPosition(e),this.eViewport.scrollTop=e}},VIEWPORT="Viewport",FAKE_V_SCROLLBAR="fakeVScrollComp",HORIZONTAL_SOURCES=["fakeHScrollComp","centerHeader","topCenter","bottomCenter","stickyTopCenter","stickyBottomCenter"],SCROLL_DEBOUNCE_TIMEOUT=100,SCROLL_END_TIMEOUT=150,GridBodyScrollFeature=class extends BeanStub{constructor(e){super(),this.clearRetryListenerFncs=[],this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.lastIsHorizontalScrollShowing=!1,this.scrollTimer=0,this.isScrollActive=!1,this.isVerticalPositionInvalidated=!0,this.isHorizontalPositionInvalidated=!0,this.eBodyViewport=e,this.resetLastHScrollDebounced=_debounce(this,()=>this.lastScrollSource[1]=null,SCROLL_END_TIMEOUT),this.resetLastVScrollDebounced=_debounce(this,()=>this.lastScrollSource[0]=null,SCROLL_END_TIMEOUT)}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.animationFrameSvc=e.animationFrameSvc,this.visibleCols=e.visibleCols}destroy(){super.destroy(),this.clearRetryListenerFncs=[],window.clearTimeout(this.scrollTimer)}postConstruct(){this.enableRtl=this.gos.get("enableRtl");const e=this.invalidateVerticalScroll.bind(this),t=this.invalidateHorizontalScroll.bind(this);this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),bodyHeightChanged:e,scrollGapChanged:t}),this.addManagedElementListeners(this.eBodyViewport,{scroll:e}),this.ctrlsSvc.whenReady(this,n=>{this.centerRowsCtrl=n.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}invalidateHorizontalScroll(){this.isHorizontalPositionInvalidated=!0}invalidateVerticalScroll(){this.isVerticalPositionInvalidated=!0}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.eViewport,{scroll:this.onHScroll.bind(this,VIEWPORT)});for(const e of HORIZONTAL_SOURCES){const t=this.ctrlsSvc.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){const e=this.ctrlsSvc.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),n=t?_debounce(this,this.onVScroll.bind(this,VIEWPORT),SCROLL_DEBOUNCE_TIMEOUT):this.onVScroll.bind(this,VIEWPORT),o=t?_debounce(this,this.onVScroll.bind(this,FAKE_V_SCROLLBAR),SCROLL_DEBOUNCE_TIMEOUT):this.onVScroll.bind(this,FAKE_V_SCROLLBAR);this.addManagedElementListeners(this.eBodyViewport,{scroll:n}),this.registerScrollPartner(e,o)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){this.centerRowsCtrl!=null&&(e===void 0&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(const t of[...HORIZONTAL_SOURCES,VIEWPORT]){if(this.lastScrollSource[1]===t)continue;const n=this.getViewportForSource(t);_setScrollLeft(n,e,this.enableRtl)}}getViewportForSource(e){return e===VIEWPORT?this.centerRowsCtrl.eViewport:this.ctrlsSvc.get(e).eViewport}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(t===0?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;const t=this.centerRowsCtrl.eViewport,{scrollLeft:n}=t;if(this.shouldBlockScrollUpdate(1,n,!0))return;const o=_getScrollLeft(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(o),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;if(e===VIEWPORT?t=this.eBodyViewport.scrollTop:t=this.ctrlsSvc.get("fakeVScrollComp").getScrollPosition(),this.shouldBlockScrollUpdate(0,t,!0))return;const{animationFrameSvc:n}=this;n?.setScrollTop(t),this.nextScrollTop=t,e===VIEWPORT?this.ctrlsSvc.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,n?.active?n.schedule():this.scrollGridIfNeeded(!0),this.resetLastVScrollDebounced()}doHorizontalScroll(e){const t=this.ctrlsSvc.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}isScrolling(){return this.isScrollActive}fireScrollEvent(e){const t={type:"bodyScroll",direction:e===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.isScrollActive=!0,this.eventSvc.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=window.setTimeout(()=>{this.scrollTimer=0,this.isScrollActive=!1,this.eventSvc.dispatchEvent({...t,type:"bodyScrollEnd"})},SCROLL_END_TIMEOUT)}shouldBlockScrollUpdate(e,t,n=!1){return n&&!_isIOSUserAgent()?!1:e===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){const t=_getInnerHeight(this.eBodyViewport),{scrollHeight:n}=this.eBodyViewport;return e<0||e+t>n}shouldBlockHorizontalScroll(e){const t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:n}=this.centerRowsCtrl.eViewport;if(this.enableRtl){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>n}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){const e=this.scrollLeft;let t=!1;for(const n of HORIZONTAL_SOURCES)if(this.getViewportForSource(n).scrollLeft!==e){t=!0;break}t&&this.onHScroll(VIEWPORT)}scrollGridIfNeeded(e=!1){const t=this.scrollTop!=this.nextScrollTop;return t&&(this.scrollTop=this.nextScrollTop,e&&this.invalidateVerticalScroll(),this.redrawRowsAfterScroll()),t}setHorizontalScrollPosition(e,t=!1){const o=this.centerRowsCtrl.eViewport.scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(this.enableRtl?e=e>0?0:o:e=Math.min(Math.max(e,0),o)),_setScrollLeft(this.centerRowsCtrl.eViewport,Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.invalidateVerticalScroll(),this.eBodyViewport.scrollTop=e}getVScrollPosition(){if(!this.isVerticalPositionInvalidated){const{lastOffsetHeight:n,lastScrollTop:o}=this;return{top:o,bottom:o+n}}this.isVerticalPositionInvalidated=!1;const{scrollTop:e,offsetHeight:t}=this.eBodyViewport;return this.lastScrollTop=e,this.lastOffsetHeight=t,{top:e,bottom:e+t}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.isHorizontalPositionInvalidated&&(this.lastIsHorizontalScrollShowing=this.centerRowsCtrl.isHorizontalScrollShowing(),this.isHorizontalPositionInvalidated=!1),this.lastIsHorizontalScrollShowing}scrollHorizontally(e){const t=this.centerRowsCtrl.eViewport.scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.eViewport.scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){const{rowModel:n}=this.beans,o=n.getRowCount();let u=-1;for(let d=0;d<o;d++){const f=n.getRow(d);if(typeof e=="function"){if(f&&e(f)){u=d;break}}else if(e===f||e===f.data){u=d;break}}u>=0&&this.ensureIndexVisible(u,t)}ensureIndexVisible(e,t,n=0){if(_isDomLayout(this.gos,"print"))return;const{rowModel:o}=this.beans,u=o.getRowCount();if(typeof e!="number"||e<0||e>=u){_warn(88,{index:e});return}this.clearRetryListeners();const{frameworkOverrides:d,pageBounds:f,rowContainerHeight:g,rowRenderer:v}=this.beans;d.wrapIncoming(()=>{const w=this.ctrlsSvc.getGridBodyCtrl(),S=o.getRow(e);let R,_,F=0;this.invalidateVerticalScroll();do{const{stickyTopHeight:M,stickyBottomHeight:I}=w,N=S.rowTop,B=S.rowHeight,H=f.getPixelOffset(),U=S.rowTop-H,$=U+S.rowHeight,z=this.getVScrollPosition(),j=g.divStretchOffset,J=z.top+j,ie=z.bottom+j,se=ie-J,fe=g.getScrollPositionForPixel(U),de=g.getScrollPositionForPixel($-se),Ce=Math.min((fe+de)/2,U),be=J+M>U,xe=ie-I<$;let Ee=null;t==="top"?Ee=fe-M:t==="bottom"?Ee=de+I:t==="middle"?Ee=Ce:be?Ee=fe-M:xe&&(de-fe>se?Ee=fe-M:Ee=de+I),Ee!==null&&(this.setVerticalScrollPosition(Ee),v.redraw({afterScroll:!0})),R=N!==S.rowTop||B!==S.rowHeight,_=M!==w.stickyTopHeight||I!==w.stickyBottomHeight,F++}while((R||_)&&F<10);if(this.animationFrameSvc?.flushAllFrames(),n<10&&(S?.stub||!this.beans.rowAutoHeight?.areRowsMeasured())){const M=this.getVScrollPosition().top;this.clearRetryListenerFncs=this.addManagedEventListeners({bodyScroll:()=>{const I=this.getVScrollPosition().top;M!==I&&this.clearRetryListeners()},modelUpdated:()=>{this.clearRetryListeners(),!(e>=o.getRowCount())&&this.ensureIndexVisible(e,t,n+1)}})}})}clearRetryListeners(){for(const e of this.clearRetryListenerFncs)e();this.clearRetryListenerFncs=[]}ensureColumnVisible(e,t="auto"){const{colModel:n,frameworkOverrides:o}=this.beans,u=n.getCol(e);if(!u||u.isPinned()||!this.visibleCols.isColDisplayed(u))return;const d=this.getPositionedHorizontalScroll(u,t);o.wrapIncoming(()=>{d!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(d),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameSvc?.flushAllFrames()})}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:n,columnAfterEnd:o}=this.isColumnOutsideViewport(e),u=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),d=this.centerRowsCtrl.getCenterWidth(),f=this.enableRtl;let g=(f?n:o)||u,v=f?o:n;t!=="auto"&&(g=t==="start",v=t==="end");const w=t==="middle";if(g||v||w){const{colLeft:S,colMiddle:R,colRight:_}=this.getColumnBounds(e);return w?R-d/2:g?f?_:S:f?S-d:_-d}return null}isColumnOutsideViewport(e){const{start:t,end:n}=this.getViewportBounds(),{colLeft:o,colRight:u}=this.getColumnBounds(e),d=this.enableRtl,f=d?t>u:n<u,g=d?n<o:t>o;return{columnBeforeStart:f,columnAfterEnd:g}}getColumnBounds(e){const t=this.enableRtl,n=this.visibleCols.bodyWidth,o=e.getActualWidth(),u=e.getLeft(),d=t?-1:1,f=t?n-u:u,g=f+o*d,v=f+o/2*d;return{colLeft:f,colMiddle:v,colRight:g}}getViewportBounds(){const e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft(),n=t,o=e+t;return{start:n,end:o,width:e}}},AXES={horizontal:{overflow:e=>e.scrollWidth-e.clientWidth,scrollSize:e=>e.scrollWidth,clientSize:e=>e.clientWidth,opposite:"vertical"},vertical:{overflow:e=>e.scrollHeight-e.clientHeight,scrollSize:e=>e.scrollHeight,clientSize:e=>e.clientHeight,opposite:"horizontal"}};function _shouldShowHorizontalScroll(e,t,n=_getScrollbarWidth()||0,o,u){return shouldShowScroll(e,t,"horizontal",n,o,u)}function _shouldShowVerticalScroll(e,t,n=_getScrollbarWidth()||0,o,u){return shouldShowScroll(e,t,"vertical",n,o,u)}function shouldShowScroll(e,t,n,o,u,d){const f=AXES[n],g=AXES[f.opposite],v=u?_isVisible(u):!0,w=d?_isVisible(d):!0,S=f.overflow(e);if(S<=0)return!1;if(!t||o===0)return!0;const R=g.overflow(t);if(R<=0)return!0;if(S<=o){if(v&&w&&isScrollbarCausedByOppositeAxis({candidateOverflow:R,candidateScrollSize:g.scrollSize(t),candidateClientSize:g.clientSize(t),scrollbarWidth:o}))return!1;const _=f.clientSize(e)+o;return f.scrollSize(e)<=_}return!0}function isScrollbarCausedByOppositeAxis({candidateOverflow:e,candidateScrollSize:t,candidateClientSize:n,scrollbarWidth:o}){if(e<=0||e>o)return!1;const u=n+o;return t>n&&t<=u}var ViewportSizeFeature=class extends BeanStub{constructor(e){super(),this.centerContainerCtrl=e}wireBeans(e){this.scrollVisibleSvc=e.scrollVisibleSvc}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const{beans:e,centerContainerCtrl:t,gridBodyCtrl:n}=this,o=()=>{_requestAnimationFrame(e,()=>{this.onCenterViewportResized()})};t.registerViewportResizeListener(o),n.registerBodyViewportResizeListener(o)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleSvc.updateScrollGap(),this.centerContainerCtrl.isViewportInTheDOMTree()){const{pinnedCols:e,colFlex:t}=this.beans;e?.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const n=this.centerContainerCtrl.getCenterWidth();n!==this.centerWidth&&(this.centerWidth=n,t?.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.scrollFeature.checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=this.gridBodyCtrl.eBodyViewport,t=_getInnerHeight(e);this.bodyHeight!==t&&(this.bodyHeight=t,this.eventSvc.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){if(!this.isAlive())return;const e={horizontalScrollShowing:this.centerContainerCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleSvc.setScrollsVisible(e)}onHorizontalViewportChanged(){const{centerContainerCtrl:e,beans:t}=this,n=e.getCenterWidth(),o=e.getViewportScrollLeft();t.colViewport.setScrollPosition(n,o)}};function _isEventFromPrintableCharacter(e){return e.altKey||e.ctrlKey||e.metaKey?!1:e.key?.length===1}function _suppressCellMouseEvent(e,t,n,o){const u=t.getColDef().cellRendererParams?.suppressMouseEventHandling;return suppressMouseEvent(e,t,n,o,u)}function _suppressFullWidthMouseEvent(e,t,n,o){const u=t?.suppressMouseEventHandling;return suppressMouseEvent(e,void 0,n,o,u)}function suppressMouseEvent(e,t,n,o,u){return u?u(_addGridCommonParams(e,{column:t,node:n,event:o})):!1}function _getCtrlForEventTarget(e,t,n){let o=t;for(;o;){const u=_getDomData(e,o,n);if(u)return u;o=o.parentElement}return null}var DOM_DATA_KEY_CELL_CTRL="cellCtrl";function _getCellCtrlForEventTarget(e,t){return _getCtrlForEventTarget(e,t,DOM_DATA_KEY_CELL_CTRL)}var DOM_DATA_KEY_ROW_CTRL="renderedRow";function _getRowCtrlForEventTarget(e,t){return _getCtrlForEventTarget(e,t,DOM_DATA_KEY_ROW_CTRL)}function _isUserSuppressingKeyboardEvent(e,t,n,o,u){const d=o?o.getColDef().suppressKeyboardEvent:void 0;if(!d)return!1;const f=_addGridCommonParams(e,{event:t,editing:u,column:o,node:n,data:n.data,colDef:o.getColDef()});return!!(d&&d(f))}function _selectAllCells(e){const{pinnedRowModel:t,rowModel:n,rangeSvc:o,visibleCols:u}=e;if(!o||u.allCols.length===0)return;const d=t?.isEmpty("top")??!0,f=t?.isEmpty("bottom")??!0,g=d?null:"top";let v,w;f?(v=null,w=n.getRowCount()-1):(v="bottom",w=t?.getPinnedBottomRowCount()??-1),o.setCellRange({rowStartIndex:0,rowStartPinned:g,rowEndIndex:w,rowEndPinned:v})}var RowContainerEventsFeature=class extends BeanStub{constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.beans.touchSvc?.mockRowContextMenu(this),this.editSvc=this.beans.editSvc}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){let e="mousedown";_isEventSupported("pointerdown")?e="pointerdown":_isEventSupported("touchstart")&&(e="touchstart");const t=["dblclick","contextmenu","mouseover","mouseout","click",e];for(const n of t){const o=this.processMouseEvent.bind(this,n);this.addManagedElementListeners(this.element,{[n]:o})}}processMouseEvent(e,t){if(!_isEventFromThisInstance(this.beans,t)||_isStopPropagationForAgGrid(t))return;const{cellCtrl:n,rowCtrl:o}=this.getControlsForEventTarget(t.target);e==="contextmenu"?(n?.column&&n.dispatchCellContextMenuEvent(t),this.beans.contextMenuSvc?.handleContextMenuMouseEvent(t,void 0,o,n)):(n&&n.onMouseEvent(e,t),o&&o.onMouseEvent(e,t))}getControlsForEventTarget(e){const{gos:t}=this;return{cellCtrl:_getCellCtrlForEventTarget(t,e),rowCtrl:_getRowCtrlForEventTarget(t,e)}}processKeyboardEvent(e,t){const{cellCtrl:n,rowCtrl:o}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(n?this.processCellKeyboardEvent(n,e,t):o?.isFullWidth()&&this.processFullWidthRowKeyboardEvent(o,e,t))}processCellKeyboardEvent(e,t,n){const o=this.editSvc?.isEditing(e,{withOpenEditor:!0})??!1;!_isUserSuppressingKeyboardEvent(this.gos,n,e.rowNode,e.column,o)&&t==="keydown"&&(!o&&this.beans.navigation?.handlePageScrollingKey(n)||e.onKeyDown(n),this.doGridOperations(n,o),_isEventFromPrintableCharacter(n)&&e.processCharacter(n)),t==="keydown"&&this.eventSvc.dispatchEvent(e.createEvent(n,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,n){const{rowNode:o}=e,{focusSvc:u,navigation:d}=this.beans,g=u.getFocusedCell()?.column;if(!_isUserSuppressingKeyboardEvent(this.gos,n,o,g,!1)){const w=n.key;if(t==="keydown")switch(w){case KeyCode.PAGE_HOME:case KeyCode.PAGE_END:case KeyCode.PAGE_UP:case KeyCode.PAGE_DOWN:d?.handlePageScrollingKey(n,!0);break;case KeyCode.LEFT:case KeyCode.RIGHT:if(!this.gos.get("embedFullWidthRows"))break;case KeyCode.UP:case KeyCode.DOWN:e.onKeyboardNavigate(n);break;case KeyCode.TAB:e.onTabKeyDown(n);break}}t==="keydown"&&this.eventSvc.dispatchEvent(e.createRowEvent("cellKeyDown",n))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!_isEventFromThisInstance(this.beans,e))return;const n=_normaliseQwertyAzerty(e),{clipboardSvc:o,undoRedo:u}=this.beans;if(n===KeyCode.A)return this.onCtrlAndA(e);if(n===KeyCode.C)return this.onCtrlAndC(o,e);if(n===KeyCode.D)return this.onCtrlAndD(o,e);if(n===KeyCode.V)return this.onCtrlAndV(o,e);if(n===KeyCode.X)return this.onCtrlAndX(o,e);if(n===KeyCode.Y)return this.onCtrlAndY(u);if(n===KeyCode.Z)return this.onCtrlAndZ(u,e)}onCtrlAndA(e){const{beans:{rowModel:t,rangeSvc:n,selectionSvc:o},gos:u}=this;n&&_isCellSelectionEnabled(u)&&!_getCtrlASelectsRows(u)&&t.isRowsToRender()?_selectAllCells(this.beans):o&&o.selectAllRowNodes({source:"keyboardSelectAll",selectAll:_getSelectAll(u)}),e.preventDefault()}onCtrlAndC(e,t){if(!e||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:n}=this.getControlsForEventTarget(t.target);this.editSvc?.isEditing(n,{withOpenEditor:!0})||(t.preventDefault(),e.copyToClipboard())}onCtrlAndX(e,t){if(!e||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:n}=this.getControlsForEventTarget(t.target);this.editSvc?.isEditing(n,{withOpenEditor:!0})||(t.preventDefault(),e.cutToClipboard(void 0,"ui"))}onCtrlAndV(e,t){const{cellCtrl:n}=this.getControlsForEventTarget(t.target);this.editSvc?.isEditing(n,{withOpenEditor:!0})||e&&!this.gos.get("suppressClipboardPaste")&&e.pasteFromClipboard()}onCtrlAndD(e,t){e&&!this.gos.get("suppressClipboardPaste")&&e.copyRangeDown(),t.preventDefault()}onCtrlAndZ(e,t){!this.gos.get("undoRedoCellEditing")||!e||(t.preventDefault(),t.shiftKey?e.redo("ui"):e.undo("ui"))}onCtrlAndY(e){e?.redo("ui")}},getTopRowCtrls=e=>e.topRowCtrls,getStickyTopRowCtrls=e=>e.getStickyTopRowCtrls(),getStickyBottomRowCtrls=e=>e.getStickyBottomRowCtrls(),getBottomRowCtrls=e=>e.bottomRowCtrls,getCentreRowCtrls=e=>e.allRowCtrls,getSpannedTopRowCtrls=e=>e.getCtrls("top"),getSpannedCenterRowCtrls=e=>e.getCtrls("center"),getSpannedBottomRowCtrls=e=>e.getCtrls("bottom"),ContainerCssClasses={center:{type:"center",name:"center-cols",getRowCtrls:getCentreRowCtrls,getSpannedRowCtrls:getSpannedCenterRowCtrls},left:{type:"left",name:"pinned-left-cols",pinnedType:"left",getRowCtrls:getCentreRowCtrls,getSpannedRowCtrls:getSpannedCenterRowCtrls},right:{type:"right",name:"pinned-right-cols",pinnedType:"right",getRowCtrls:getCentreRowCtrls,getSpannedRowCtrls:getSpannedCenterRowCtrls},fullWidth:{type:"fullWidth",name:"full-width",fullWidth:!0,getRowCtrls:getCentreRowCtrls},topCenter:{type:"center",name:"floating-top",getRowCtrls:getTopRowCtrls,getSpannedRowCtrls:getSpannedTopRowCtrls},topLeft:{type:"left",name:"pinned-left-floating",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:getTopRowCtrls,getSpannedRowCtrls:getSpannedTopRowCtrls},topRight:{type:"right",name:"pinned-right-floating",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:getTopRowCtrls,getSpannedRowCtrls:getSpannedTopRowCtrls},topFullWidth:{type:"fullWidth",name:"floating-top-full-width",fullWidth:!0,getRowCtrls:getTopRowCtrls},stickyTopCenter:{type:"center",name:"sticky-top",getRowCtrls:getStickyTopRowCtrls},stickyTopLeft:{type:"left",name:"pinned-left-sticky-top",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:getStickyTopRowCtrls},stickyTopRight:{type:"right",name:"pinned-right-sticky-top",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:getStickyTopRowCtrls},stickyTopFullWidth:{type:"fullWidth",name:"sticky-top-full-width",fullWidth:!0,getRowCtrls:getStickyTopRowCtrls},stickyBottomCenter:{type:"center",name:"sticky-bottom",getRowCtrls:getStickyBottomRowCtrls},stickyBottomLeft:{type:"left",name:"pinned-left-sticky-bottom",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:getStickyBottomRowCtrls},stickyBottomRight:{type:"right",name:"pinned-right-sticky-bottom",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:getStickyBottomRowCtrls},stickyBottomFullWidth:{type:"fullWidth",name:"sticky-bottom-full-width",fullWidth:!0,getRowCtrls:getStickyBottomRowCtrls},bottomCenter:{type:"center",name:"floating-bottom",getRowCtrls:getBottomRowCtrls,getSpannedRowCtrls:getSpannedBottomRowCtrls},bottomLeft:{type:"left",name:"pinned-left-floating-bottom",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:getBottomRowCtrls,getSpannedRowCtrls:getSpannedBottomRowCtrls},bottomRight:{type:"right",name:"pinned-right-floating-bottom",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:getBottomRowCtrls,getSpannedRowCtrls:getSpannedBottomRowCtrls},bottomFullWidth:{type:"fullWidth",name:"floating-bottom-full-width",fullWidth:!0,getRowCtrls:getBottomRowCtrls}};function _getRowViewportClass(e){return`ag-${_getRowContainerOptions(e).name}-viewport`}function _getRowContainerClass(e){const t=_getRowContainerOptions(e);return t.container??`ag-${t.name}-container`}function _getRowSpanContainerClass(e){return`ag-${_getRowContainerOptions(e).name}-spanned-cells-container`}function _getRowContainerOptions(e){return ContainerCssClasses[e]}var allTopNoFW=["topCenter","topLeft","topRight"],allBottomNoFW=["bottomCenter","bottomLeft","bottomRight"],allMiddleNoFW=["center","left","right"],allMiddle=["center","left","right","fullWidth"],allCenter=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],allLeft=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],allRight=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],allStickyTopNoFW=["stickyTopCenter","stickyTopLeft","stickyTopRight"],allStickyBottomNoFW=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],allStickyContainers=[...allStickyTopNoFW,"stickyTopFullWidth",...allStickyBottomNoFW,"stickyBottomFullWidth"],allNoFW=[...allTopNoFW,...allBottomNoFW,...allMiddleNoFW,...allStickyTopNoFW,...allStickyBottomNoFW],RowContainerCtrl=class extends BeanStub{constructor(e){super(),this.name=e,this.visible=!0,this.EMPTY_CTRLS=[],this.options=_getRowContainerOptions(e)}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new ViewportSizeFeature(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.beans.ctrlsSvc.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}setComp(e,t,n,o){this.comp=e,this.eContainer=t,this.eSpannedContainer=n,this.eViewport=o,this.createManagedBean(new RowContainerEventsFeature(this.eViewport??this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();const{pinnedCols:u,rangeSvc:d}=this.beans,f=()=>this.onPinnedWidthChanged();this.forContainers(allLeft,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(u?.createPinnedWidthFeature(!0,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:f})}),this.forContainers(allRight,()=>{this.pinnedWidthFeature=this.createOptionalManagedBean(u?.createPinnedWidthFeature(!1,this.eContainer,this.eSpannedContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:f})}),this.forContainers(allMiddle,()=>this.createManagedBean(new SetHeightFeature(this.eContainer,this.name==="center"?o:void 0))),d&&this.forContainers(allNoFW,()=>this.createManagedBean(d.createDragListenerFeature(this.eContainer))),this.forContainers(allCenter,()=>this.createManagedBean(new CenterWidthFeature(g=>this.comp.setContainerWidth(`${g}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.eViewport,{scroll:e})}addListeners(){const{spannedRowRenderer:e,gos:t}=this.beans,n=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({displayedColumnsChanged:n,displayedColumnsWidthChanged:n,displayedRowsChanged:o=>this.onDisplayedRowsChanged(o.afterScroll)}),n(),this.onDisplayedRowsChanged(),e&&this.options.getSpannedRowCtrls&&t.get("enableCellSpan")&&this.addManagedListeners(e,{spannedRowsUpdated:()=>{const o=this.options.getSpannedRowCtrls(e);o&&this.comp.setSpannedRowCtrls(o,!1)}})}listenOnDomOrder(){if(allStickyContainers.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}const t=()=>{const n=this.gos.get("ensureDomOrder"),o=_isDomLayout(this.gos,"print");this.comp.setDomOrder(n||o)};this.addManagedPropertyListener("domLayout",t),t()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const{dragSvc:e}=this.beans;if(!e)return;const t=n=>{e.dragging&&n.cancelable&&n.preventDefault()};this.eContainer.addEventListener("touchmove",t,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",t))}onHorizontalViewportChanged(e=!1){const t=this.getCenterWidth(),n=this.getCenterViewportScrollLeft();this.beans.colViewport.setScrollPosition(t,n,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return _getInnerWidth(this.eViewport)}getCenterViewportScrollLeft(){return _getScrollLeft(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=_observeResize(this.beans,this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return _isInDOM(this.eViewport)}getViewportScrollLeft(){return _getScrollLeft(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){const{beans:e,gos:t,eViewport:n}=this,o=t.get("alwaysShowHorizontalScroll"),{ctrlsSvc:u}=e,d=u.getGridBodyCtrl()?.eBodyViewport,f=u.get("fakeHScrollComp")?.getGui(),g=u.get("fakeVScrollComp")?.getGui();return o||_shouldShowHorizontalScroll(n,d,void 0,f,g)}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){_setScrollLeft(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){const t=this.options.getRowCtrls(this.beans.rowRenderer);if(!this.visible||t.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}const n=_isDomLayout(this.gos,"print"),u=this.gos.get("embedFullWidthRows")||n,d=t.filter(f=>{const g=f.isFullWidth();return this.options.fullWidth?!u&&g:u||!g});this.comp.setRowCtrls({rowCtrls:d,useFlushSync:e})}},CSS_CLASS_FORCE_VERTICAL_SCROLL="ag-force-vertical-scroll",CSS_CLASS_CELL_SELECTABLE="ag-selectable",CSS_CLASS_COLUMN_MOVING="ag-column-moving",GridBodyCtrl=class extends BeanStub{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colModel=e.colModel,this.scrollVisibleSvc=e.scrollVisibleSvc,this.pinnedRowModel=e.pinnedRowModel,this.filterManager=e.filterManager,this.rowGroupColsSvc=e.rowGroupColsSvc}setComp(e,t,n,o,u,d,f){this.comp=e,this.eGridBody=t,this.eBodyViewport=n,this.eTop=o,this.eBottom=u,this.eStickyTop=d,this.eStickyBottom=f,this.eCenterColsViewport=n.querySelector(`.${_getRowViewportClass("center")}`),this.eFullWidthContainer=n.querySelector(`.${_getRowContainerClass("fullWidth")}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",g=>this.setCellTextSelection(g.currentValue)),this.createManagedBean(new LayoutFeature(this.comp)),this.scrollFeature=this.createManagedBean(new GridBodyScrollFeature(n)),this.beans.rowDragSvc?.setupRowDrag(n,this),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([o,n,u,d,f]),this.setGridRootRole(),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),this.filterManager?.setupAdvFilterHeaderComp(o),this.ctrlsSvc.register("gridBodyCtrl",this)}addEventListeners(){const e=this.setFloatingHeights.bind(this),t=this.setGridRootRole.bind(this),n=this.toggleRowResizeStyles.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.updateScrollingClasses.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,pinnedRowsChanged:e,headerHeightChanged:this.setStickyTopOffsetTop.bind(this),columnRowGroupChanged:t,columnPivotChanged:t,rowResizeStarted:n,rowResizeEnded:n}),this.addManagedPropertyListener("treeData",t)}toggleRowResizeStyles(e){const t=e.type==="rowResizeStarted";this.eBodyViewport.classList.toggle("ag-prevent-animation",t)}onGridColumnsChanged(){const e=this.beans.colModel.getCols();this.comp.setColumnCount(e.length)}onScrollVisibilityChanged(){const{scrollVisibleSvc:e}=this,t=e.verticalScrollShowing;this.setVerticalScrollPaddingVisible(t),this.setStickyWidth(t),this.setStickyBottomOffsetBottom();const n=t&&e.getScrollbarWidth()||0,o=_isInvisibleScrollbar()?16:0,u=`calc(100% + ${n+o}px)`;_requestAnimationFrame(this.beans,()=>this.comp.setBodyViewportWidth(u)),this.updateScrollingClasses()}setGridRootRole(){const{rowGroupColsSvc:e,colModel:t,gos:n}=this;let o=n.get("treeData");if(!o){const u=t.isPivotMode();o=(e?e.columns.length:0)>=(u?2:1)}this.comp.setGridRootRole(o?"treegrid":"grid")}addFocusListeners(e){for(const t of e)this.addManagedElementListeners(t,{focusin:n=>{const{target:o}=n,u=_isElementChildOfClass(o,"ag-root",t);t.classList.toggle("ag-has-focus",!u)},focusout:n=>{const{target:o,relatedTarget:u}=n,d=t.contains(u),f=_isElementChildOfClass(u,"ag-root",t);_isElementChildOfClass(o,"ag-root",t)||(!d||f)&&t.classList.remove("ag-has-focus")}})}setColumnMovingCss(e){this.comp.setColumnMovingCss(CSS_CLASS_COLUMN_MOVING,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(CSS_CLASS_CELL_SELECTABLE,e)}updateScrollingClasses(){const{eGridBody:{classList:e},scrollVisibleSvc:t}=this;e.toggle("ag-body-vertical-content-no-gap",!t.verticalScrollGap),e.toggle("ag-body-horizontal-content-no-gap",!t.horizontalScrollGap)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){this.beans.editSvc?.addStopEditingWhenGridLosesFocus([this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom])}updateRowCount(){const e=(this.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0)+(this.filterManager?.getHeaderRowCount()??0),{rowModel:t}=this.beans,n=t.isLastRowIndexKnown()?t.getRowCount():-1,o=n===-1?-1:e+n;this.comp.setRowCount(o)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const{gos:e,comp:t,ctrlsSvc:n}=this,o=e.get("alwaysShowVerticalScroll"),u=o?CSS_CLASS_FORCE_VERTICAL_SCROLL:null,d=_isDomLayout(e,"normal");t.setAlwaysVerticalScrollClass(u,o);const f=n.get("center")?.eViewport,g=n.get("fakeHScrollComp")?.getGui(),v=n.get("fakeVScrollComp")?.getGui();return o||d&&_shouldShowVerticalScroll(this.eBodyViewport,f,void 0,v,g)}setupRowAnimationCssClass(){const{rowContainerHeight:e,environment:t}=this.beans;let n=t.sizesMeasured;const o=()=>{const u=n&&_isAnimateRows(this.gos)&&!e.stretching,d=u?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(d,u)};o(),this.addManagedEventListeners({heightScaleChanged:o}),this.addManagedPropertyListener("animateRows",o),this.addManagedEventListeners({stylesChanged:()=>{!n&&t.sizesMeasured&&(n=!0,o())}})}addBodyViewportListener(){const{eBodyViewport:e,eStickyTop:t,eStickyBottom:n,eTop:o,eBottom:u,beans:{popupSvc:d,touchSvc:f}}=this,g=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(e,{contextmenu:g}),f?.mockBodyContextMenu(this,g),this.addManagedElementListeners(e,{wheel:this.onBodyViewportWheel.bind(this,d)});const v=this.onStickyWheel.bind(this);for(const S of[t,n,o,u])this.addManagedElementListeners(S,{wheel:v});const w=this.onHorizontalWheel.bind(this);for(const S of["left","right","topLeft","topRight","bottomLeft","bottomRight"])this.addManagedElementListeners(this.ctrlsSvc.get(S).eContainer,{wheel:w});this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){const{deltaX:t,deltaY:n,shiftKey:o}=e;(o||Math.abs(t)>Math.abs(n))&&_isEventFromThisInstance(this.beans,e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){const{deltaY:t}=e;this.scrollVertically(t)>0&&e.preventDefault()}onHorizontalWheel(e){const{deltaX:t,deltaY:n,shiftKey:o}=e;(o||Math.abs(t)>Math.abs(n))&&this.scrollGridBodyToMatchEvent(e)}scrollGridBodyToMatchEvent(e){const{deltaX:t,deltaY:n}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||n})}onBodyViewportContextMenu(e,t,n){if(!e&&!n)return;this.gos.get("preventDefaultOnContextMenu")&&(e||n).preventDefault();const{target:o}=e||t;(o===this.eBodyViewport||o===this.ctrlsSvc.get("center").eViewport)&&this.beans.contextMenuSvc?.showContextMenu({mouseEvent:e,touchEvent:n,value:null,anchorToElement:this.eGridBody,source:"ui"})}onBodyViewportWheel(e,t){this.gos.get("suppressScrollWhenPopupsAreOpen")&&e?.hasAnchoredPopup()&&t.preventDefault()}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.scrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}setFloatingHeights(){const{pinnedRowModel:e,beans:{environment:t}}=this,n=e?.getPinnedTopTotalHeight(),o=e?.getPinnedBottomTotalHeight(),u=t.getPinnedRowBorderWidth(),d=t.getRowBorderWidth(),f=u-d,g=n?f+n:0,v=o?f+o:0;this.comp.setTopHeight(g),this.comp.setBottomHeight(v),this.comp.setTopInvisible(g<=0),this.comp.setBottomInvisible(v<=0),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}setStickyWidth(e){if(!e)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{const t=this.scrollVisibleSvc.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${t}px)`)}}setStickyTopOffsetTop(){const t=this.ctrlsSvc.get("gridHeaderCtrl").headerHeight+(this.filterManager?.getHeaderHeight()??0),n=this.pinnedRowModel?.getPinnedTopTotalHeight()??0;let o=0;t>0&&(o+=t),n>0&&(o+=n),o>0&&(o+=1),this.comp.setStickyTopTop(`${o}px`)}setStickyBottomOffsetBottom(){const{pinnedRowModel:e,scrollVisibleSvc:t,comp:n}=this,o=e?.getPinnedBottomTotalHeight()??0,d=t.horizontalScrollShowing&&t.getScrollbarWidth()||0,f=o+d;n.setStickyBottomBottom(`${f}px`)}},TabGuardClassNames={TAB_GUARD:"ag-tab-guard",TAB_GUARD_TOP:"ag-tab-guard-top",TAB_GUARD_BOTTOM:"ag-tab-guard-bottom"},AgTabGuardCtrl=class extends AgBeanStub{constructor(e,t){super(),this.stopPropagationCallbacks=t,this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp:n,eTopGuard:o,eBottomGuard:u,focusTrapActive:d,forceFocusOutWhenTabGuardsAreEmpty:f,isFocusableContainer:g,focusInnerElement:v,onFocusIn:w,onFocusOut:S,shouldStopEventPropagation:R,onTabKeyDown:_,handleKeyDown:F,isEmpty:M,eFocusableElement:I}=e;this.comp=n,this.eTopGuard=o,this.eBottomGuard=u,this.providedFocusInnerElement=v,this.eFocusableElement=I,this.focusTrapActive=!!d,this.forceFocusOutWhenTabGuardsAreEmpty=!!f,this.isFocusableContainer=!!g,this.providedFocusIn=w,this.providedFocusOut=S,this.providedShouldStopEventPropagation=R,this.providedOnTabKeyDown=_,this.providedHandleKeyDown=F,this.providedIsEmpty=M}postConstruct(){this.createManagedBean(new AgManagedFocusFeature(this.eFocusableElement,this.stopPropagationCallbacks,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards();for(const e of[this.eTopGuard,this.eBottomGuard])this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)})}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&(this.providedIsEmpty?this.providedIsEmpty():_findFocusableElements(this.eFocusableElement,".ag-tab-guard").length===0)){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;const t=e.target===this.eBottomGuard;!(this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t))&&this.forceFocusOutWhenTabGuardsAreEmpty&&this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard)}findNextElementOutsideAndFocus(e){const t=_getDocument(this.beans),n=_findFocusableElements(t.body,null,!0),o=n.indexOf(e?this.eTopGuard:this.eBottomGuard);if(o===-1)return;let u,d;e?(u=0,d=o):(u=o+1,d=n.length);const f=n.slice(u,d),g=this.gos.get("tabIndex");f.sort((v,w)=>{const S=Number.parseInt(v.getAttribute("tabindex")||"0"),R=Number.parseInt(w.getAttribute("tabindex")||"0");return R===g?1:S===g?-1:S===0?1:R===0?-1:S-R}),f[e?f.length-1:0]?.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const n=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),n&&(n.focus(),e.preventDefault())}focusInnerElement(e=!1){const t=_findFocusableElements(this.eFocusableElement);return this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(-1,1)),t.length?(t[e?t.length-1:0].focus({preventScroll:!0}),!0):!1}getNextFocusableElement(e){return _findNextFocusableElement(this.beans,this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},AgTabGuardFeature=class extends AgBeanStub{constructor(e,t){super(),this.comp=e,this.stopPropagationCallbacks=t}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();const{eTopGuard:t,eBottomGuard:n,eFocusableElement:o,stopPropagationCallbacks:u}=this,d=[t,n],f={setTabIndex:B=>{for(const H of d)B==null?H.removeAttribute("tabindex"):H.setAttribute("tabindex",B)}};this.addTabGuards(t,n);const{focusTrapActive:g=!1,onFocusIn:v,onFocusOut:w,focusInnerElement:S,handleKeyDown:R,onTabKeyDown:_,shouldStopEventPropagation:F,isEmpty:M,forceFocusOutWhenTabGuardsAreEmpty:I,isFocusableContainer:N}=e;this.tabGuardCtrl=this.createManagedBean(new AgTabGuardCtrl({comp:f,focusTrapActive:g,eTopGuard:t,eBottomGuard:n,eFocusableElement:o,onFocusIn:v,onFocusOut:w,focusInnerElement:S,handleKeyDown:R,onTabKeyDown:_,shouldStopEventPropagation:F,isEmpty:M,forceFocusOutWhenTabGuardsAreEmpty:I,isFocusableContainer:N},u))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){const t=_getDocument(this.beans).createElement("div"),n=e==="top"?TabGuardClassNames.TAB_GUARD_TOP:TabGuardClassNames.TAB_GUARD_BOTTOM;return t.classList.add(TabGuardClassNames.TAB_GUARD,n),_setAriaRole(t,"presentation"),t}addTabGuards(e,t){const n=this.eFocusableElement;n.prepend(e),n.append(t)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];_clearElement(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,n){_isNodeOrElement(t)||(t=t.getGui());const{eBottomGuard:o}=this;o?o.before(t):e(t,n)}destroy(){const{eTopGuard:e,eBottomGuard:t}=this;_removeFromParent(e),_removeFromParent(t),super.destroy()}},AgTabGuardComp=class extends AgComponentStub{initialiseTabGuard(e,t){this.tabGuardFeature=this.createManagedBean(new AgTabGuardFeature(this,t)),this.tabGuardFeature.initialiseTabGuard(e)}forceFocusOutOfContainer(e=!1){this.tabGuardFeature.forceFocusOutOfContainer(e)}appendChild(e,t){this.tabGuardFeature.appendChild(super.appendChild.bind(this),e,t)}},TabGuardComp$1=class extends AgTabGuardComp{initialiseTabGuard(t){super.initialiseTabGuard(t,STOP_PROPAGATION_CALLBACKS)}},GridCtrl=class extends BeanStub{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}setComp(e,t,n){this.view=e,this.eGridHostDiv=t,this.eGui=n,this.eGui.setAttribute("grid-id",this.beans.context.getId());const{dragAndDrop:o,ctrlsSvc:u}=this.beans;o?.registerGridDropTarget(()=>this.eGui,this),this.createManagedBean(new LayoutFeature(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr");const d=_observeResize(this.beans,this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>d()),u.register("gridCtrl",this)}isDetailGrid(){return _findTabbableParent(this.getGui())?.getAttribute("row-id")?.startsWith("detail")||!1}getOptionalSelectors(){const e=this.beans;return{paginationSelector:e.pagination?.getPaginationSelector(),gridHeaderDropZonesSelector:e.registry?.getSelector("AG-GRID-HEADER-DROP-ZONES"),sideBarSelector:e.sideBar?.getSelector(),statusBarSelector:e.registry?.getSelector("AG-STATUS-BAR"),watermarkSelector:e.licenseManager?.getWatermarkSelector()}}onGridSizeChanged(){this.eventSvc.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){const{view:t}=this;if(e===!1)t.setCursor(null);else{const n=e===1?"ew-resize":"ns-resize";t.setCursor(n)}}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.getFocusableContainers(),{indexWithFocus:n,nextIndex:o}=this.getNextFocusableIndex(t,e);if(o<0||o>=t.length)return!1;if(o===0){if(n>0){const{visibleCols:u,focusSvc:d}=this.beans,f=u.allCols,g=_last(f);if(d.focusGridView({column:g,backwards:!0}))return!0}return!1}return this.focusContainer(t[o],e)}focusInnerElement(e){if(this.gos.getCallback("focusGridInnerElement")?.({fromBottom:!!e}))return!0;const n=this.getFocusableContainers(),{focusSvc:o,visibleCols:u}=this.beans,d=u.allCols;if(e){if(n.length>1)return this.focusContainer(_last(n),e);const f=_last(d);if(o.focusGridView({column:f,backwards:e}))return!0}if(this.gos.get("headerHeight")===0||_isHeaderFocusSuppressed(this.beans)){if(o.focusGridView({column:d[0],backwards:e}))return!0;for(let f=1;f<n.length;f++)if(_focusInto(n[f].getGui(),e))return!0;return!1}return o.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){const t=this.view.getFocusableContainers(),{nextIndex:n}=this.getNextFocusableIndex(t,e),o=t[n];o?this.focusContainer(o):this.forceFocusOutOfContainer(e)}isFocusable(){const e=this.beans;return!_isCellFocusSuppressed(e)||!_isHeaderFocusSuppressed(e)||!!e.sideBar?.comp?.isDisplayed()}getNextFocusableIndex(e,t){const n=_getActiveDomElement(this.beans),o=e.findIndex(d=>d.getGui().contains(n)),u=o+(t?-1:1);return{indexWithFocus:o,nextIndex:u}}focusContainer(e,t){e.setAllowFocus?.(!0);const n=_focusInto(e.getGui(),t,!1,!0);return e.setAllowFocus?.(!1),n}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},mod=(e,t)=>{for(const n of Object.keys(t))t[n]=e;return t},gridApiFunctionsMap={dispatchEvent:"CommunityCore",...mod("CommunityCore",{destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,isModuleRegistered:0}),...mod("GridState",{getState:0,setState:0}),...mod("SharedRowSelection",{setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0}),...mod("RowApi",{redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRowIndex:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0}),...mod("ScrollApi",{getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0}),...mod("KeyboardNavigation",{getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0}),...mod("EventApi",{addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0}),...mod("ValueCache",{expireValueCache:0}),...mod("CellApi",{getCellValue:0}),...mod("SharedMenu",{showColumnMenu:0,hidePopupMenu:0}),...mod("Sort",{onSortChanged:0}),...mod("PinnedRow",{getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,forEachPinnedRow:0}),...mod("Overlay",{showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0}),...mod("RenderApi",{setGridAriaProperty:0,refreshCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0}),...mod("HighlightChanges",{flashCells:0}),...mod("RowDrag",{addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getRowDropPositionIndicator:0,setRowDropPositionIndicator:0}),...mod("ColumnApi",{getColumnDefs:0,getColumnDef:0,getDisplayNameForColumn:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnsVisible:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0}),...mod("ColumnAutoSize",{sizeColumnsToFit:0,autoSizeColumns:0,autoSizeAllColumns:0}),...mod("ColumnGroup",{setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumnGroup:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0}),...mod("ColumnMove",{moveColumnByIndex:0,moveColumns:0}),...mod("ColumnResize",{setColumnWidths:0}),...mod("ColumnHover",{isColumnHovered:0}),...mod("EditCore",{getCellEditorInstances:0,getEditingCells:0,getEditRowValues:0,stopEditing:0,startEditingCell:0,isEditing:0,validateEdit:0}),...mod("BatchEdit",{startBatchEdit:0,cancelBatchEdit:0,commitBatchEdit:0,isBatchEditing:0}),...mod("UndoRedoEdit",{undoCellEditing:0,redoCellEditing:0,getCurrentUndoSize:0,getCurrentRedoSize:0}),...mod("FilterCore",{isAnyFilterPresent:0,onFilterChanged:0}),...mod("ColumnFilter",{isColumnFilterPresent:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,hideColumnFilter:0,getColumnFilterHandler:0,doFilterAction:0}),...mod("QuickFilter",{isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0}),...mod("Find",{findGetActiveMatch:0,findGetTotalMatches:0,findGoTo:0,findNext:0,findPrevious:0,findGetNumMatches:0,findGetParts:0,findClearActive:0,findRefresh:0}),...mod("Pagination",{paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0}),...mod("CsrmSsrmSharedApi",{expandAll:0,collapseAll:0}),...mod("SsrmInfiniteSharedApi",{setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0}),...mod("ClientSideRowModelApi",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0,onRowHeightChanged:0,resetRowHeights:0}),...mod("CsvExport",{getDataAsCsv:0,exportDataAsCsv:0}),...mod("InfiniteRowModel",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0}),...mod("AdvancedFilter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0}),...mod("IntegratedCharts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0}),...mod("Clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0}),...mod("ExcelExport",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0}),...mod("SharedMasterDetail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0}),...mod("ContextMenu",{showContextMenu:0}),...mod("ColumnMenu",{showColumnChooser:0,hideColumnChooser:0}),...mod("CellSelection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0}),...mod("SharedRowGrouping",{setRowGroupColumns:0,removeRowGroupColumns:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0}),...mod("SharedAggregation",{addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0}),...mod("SharedPivot",{isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumns:0,addValueColumns:0,setPivotColumns:0,removePivotColumns:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0}),...mod("ServerSideRowModelApi",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0,onRowHeightChanged:0,resetRowHeights:0}),...mod("SideBar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0}),...mod("StatusBar",{getStatusPanel:0}),...mod("AiToolkit",{getStructuredSchema:0})},defaultFns={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},dispatchEvent=(e,t)=>e.eventSvc.dispatchEvent(t),GridApiClass=class{};Reflect.defineProperty(GridApiClass,"name",{value:"GridApi"});var ApiFunctionService=class extends BeanStub{constructor(){super(),this.beanName="apiFunctionSvc",this.api=new GridApiClass,this.fns={...defaultFns,dispatchEvent},this.preDestroyLink="";const{api:e}=this;for(const t of Object.keys(gridApiFunctionsMap))e[t]=this.makeApi(t)[t]}postConstruct(){this.preDestroyLink=this.beans.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){const{fns:n,beans:o}=this;n!==defaultFns&&(n[e]=o?.validation?.validateApiFunction(e,t)??t)}makeApi(e){return{[e]:(...t)=>{const{beans:n,fns:{[e]:o}}=this;return o?o(n,...t):this.apiNotFound(e)}}}apiNotFound(e){const{beans:t,gos:n,preDestroyLink:o}=this;if(!t)_warn(26,{fnName:e,preDestroyLink:o});else{const u=gridApiFunctionsMap[e];n.assertModuleRegistered(u,`api.${e}`)&&_warn(27,{fnName:e,module:u})}}destroy(){super.destroy(),this.fns=defaultFns,this.beans=null}};function getGridId(e){return e.context.getId()}function destroy(e){e.gridDestroySvc.destroy()}function isDestroyed(e){return e.gridDestroySvc.destroyCalled}function getGridOption(e,t){return e.gos.get(t)}function setGridOption(e,t,n){updateGridOptions(e,{[t]:n})}function updateGridOptions(e,t){e.gos.updateGridOptions({options:t})}function isModuleRegistered(e,t){const n=t.replace(/Module$/,"");return e.gos.isModuleRegistered(n)}var DndSourceElement={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{draggable:"true"}},DndSourceComp=class extends Component{constructor(e,t,n){super(DndSourceElement),this.rowNode=e,this.column=t,this.eCell=n}postConstruct(){this.getGui().appendChild(_createIconNoSpan("rowDrag",this.beans,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const{rowNode:t,column:n,eCell:o,gos:u}=this,d=n.getColDef().dndSourceOnRowDrag,f=e.dataTransfer;if(f.setDragImage(o,0,0),d){const g=_addGridCommonParams(u,{rowNode:t,dragEvent:e});d(g)}else try{const g=JSON.stringify(t.data);f.setData("application/json",g),f.setData("text/plain",g)}catch{}}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}};function addRowDropZone(e,t){e.rowDragSvc?.rowDragFeature?.addRowDropZone(t)}function removeRowDropZone(e,t){const n=e.dragAndDrop?.findExternalZone(t.getContainer());n&&e.dragAndDrop?.removeDropTarget(n)}function getRowDropZoneParams(e,t){return e.rowDragSvc?.rowDragFeature?.getRowDropZone(t)}function getRowDropPositionIndicator(e){const t=e.rowDropHighlightSvc;return t?{row:t.row,dropIndicatorPosition:t.position}:{row:null,dropIndicatorPosition:"none"}}function setRowDropPositionIndicator(e,t){const n=e.rowDropHighlightSvc;if(!n)return;const o=t?.row;let u=t?.dropIndicatorPosition;u!=="above"&&u!=="below"&&u!=="inside"&&(u="none");const d=o?.rowIndex;d==null||u==="none"?n.clear():n.set(o,u)}var tryPointerCapture=(e,t)=>{if(t!=null&&e?.setPointerCapture)try{return e.setPointerCapture(t),e.hasPointerCapture(t)}catch{}return!1},capturePointer=(e,t)=>{if(typeof PointerEvent>"u"||!(t instanceof PointerEvent))return null;const n=t.pointerId;if(!tryPointerCapture(e,n))return null;const o={eElement:e,pointerId:n,onLost(u){pointerLostHandler(o,u)}};return e.addEventListener("lostpointercapture",o.onLost),o},releasePointerCapture=e=>{if(!e)return;removeLostHandler(e);const{eElement:t,pointerId:n}=e;if(t){try{t.releasePointerCapture(n)}catch{}e.eElement=null}},removeLostHandler=e=>{const{eElement:t,onLost:n}=e;t&&n&&(t.removeEventListener("lostpointercapture",n),e.onLost=null)},pointerLostHandler=(e,t)=>{removeLostHandler(e);const{eElement:n,pointerId:o}=e;n&&t.pointerId===o&&tryPointerCapture(n,o)},activePointerDrags,handledDragEvents,PASSIVE_TRUE={passive:!0},PASSIVE_FALSE={passive:!1},addHandledDragEvent=e=>{if(!handledDragEvents)handledDragEvents=new WeakSet;else if(handledDragEvents.has(e))return!1;return handledDragEvents.add(e),!0},BaseDragService=class extends AgBeanStub{constructor(){super(...arguments),this.beanName="dragSvc",this.dragging=!1,this.drag=null,this.dragSources=[]}get startTarget(){return this.drag?.start.target??null}isPointer(){return!!activePointerDrags?.has(_getRootNode(this.beans))}hasPointerCapture(){const e=this.drag?.pointerCapture;return!!(e&&this.beans.eRootDiv.hasPointerCapture?.(e.pointerId))}destroy(){this.drag&&this.cancelDrag();const e=this.dragSources;for(const t of e)destroyDragSourceEntry(t);e.length=0,super.destroy()}removeDragSource(e){const t=this.dragSources;for(let n=0,o=t.length;n<o;++n){const u=t[n];if(u.params===e){t.splice(n,1),destroyDragSourceEntry(u);break}}}addDragSource(e){if(!this.isAlive())return;const{eElement:t,includeTouch:n}=e,o=[];let u;if(n){const w=t.style;w&&(u=w.touchAction,w.touchAction="none")}const d={handlers:o,params:e,oldTouchAction:u};this.dragSources.push(d),addTempEventHandlers(o,[t,"pointerdown",w=>this.onPointerDown(e,w),PASSIVE_FALSE],[t,"mousedown",w=>this.onMouseDown(e,w)]);const v=this.gos.get("suppressTouch");n&&!v&&addTempEventHandlers(o,[t,"touchstart",S=>this.onTouchStart(e,S),PASSIVE_FALSE])}cancelDrag(e){const t=this.drag;e??(e=t?.eElement),e&&this.eventSvc.dispatchEvent({type:"dragCancelled",target:e}),t?.params.onDragCancel?.(),this.destroyDrag()}shouldPreventMouseEvent(e){const t=e.type;return(t==="mousemove"||t==="pointermove")&&e.cancelable&&_isEventFromThisInstance(this.beans,e)&&!_isFocusableFormField(getEventTargetElement(e))}initDrag(e,...t){this.drag=e;const n=this.beans,o=g=>this.onScroll(g),u=g=>this.onKeyDown(g),d=_getRootNode(n),f=_getDocument(n);addTempEventHandlers(e.handlers,[d,"contextmenu",preventEventDefault],[d,"keydown",u],[f,"scroll",o,{capture:!0}],[f.defaultView||window,"scroll",o],...t)}destroyDrag(){this.dragging=!1;const e=this.drag;if(e){const t=e.rootEl;activePointerDrags?.get(t)===e&&activePointerDrags.delete(t),this.drag=null,releasePointerCapture(e.pointerCapture),clearTempEventHandlers(e.handlers)}}onPointerDown(e,t){if(this.isPointer())return;const n=this.beans;if(handledDragEvents?.has(t))return;const o=t.pointerType;if(o==="touch"&&(n.gos.get("suppressTouch")||!e.includeTouch||(e.stopPropagationForTouch&&t.stopPropagation(),_isFocusableFormField(getEventTargetElement(t))))||!t.isPrimary||o==="mouse"&&t.button!==0)return;this.destroyDrag();const u=_getRootNode(n),d=e.eElement,f=t.pointerId,g=new Dragging(u,e,t,f);activePointerDrags??(activePointerDrags=new WeakMap),activePointerDrags.set(u,g);const v=_=>{_.pointerId===f&&this.onMouseOrPointerMove(_)},w=_=>{_.pointerId===f&&this.onMouseOrPointerUp(_)},S=_=>{_.pointerId===f&&addHandledDragEvent(_)&&this.cancelDrag()},R=_=>this.draggingPreventDefault(_);this.initDrag(g,[u,"pointerup",w],[u,"pointercancel",S],[u,"pointermove",v,PASSIVE_FALSE],[u,"touchmove",R,PASSIVE_FALSE],[d,"mousemove",R,PASSIVE_FALSE]),e.dragStartPixels===0?this.onMouseOrPointerMove(t):addHandledDragEvent(t)}onTouchStart(e,t){if(this.gos.get("suppressTouch")||!e.includeTouch||!addHandledDragEvent(t)||_isFocusableFormField(getEventTargetElement(t)))return;if(e.stopPropagationForTouch&&t.stopPropagation(),this.isPointer()){this.dragging&&preventEventDefault(t);return}this.destroyDrag();const o=this.beans,u=_getRootNode(o),d=new Dragging(u,e,t.touches[0]),f=_=>this.onTouchMove(_),g=_=>this.onTouchUp(_),v=_=>this.onTouchCancel(_),w=_=>this.draggingPreventDefault(_),S=_getRootNode(o),R=t.target??e.eElement;this.initDrag(d,[R,"touchmove",f,PASSIVE_TRUE],[R,"touchend",g,PASSIVE_TRUE],[R,"touchcancel",v,PASSIVE_TRUE],[S,"touchmove",w,PASSIVE_FALSE],[S,"touchend",g,PASSIVE_FALSE],[S,"touchcancel",v,PASSIVE_FALSE]),e.dragStartPixels===0&&this.onMove(d.start)}draggingPreventDefault(e){this.dragging&&preventEventDefault(e)}onMouseDown(e,t){if(t.button!==0||handledDragEvents?.has(t)||this.isPointer())return;const n=this.beans;this.destroyDrag();const o=new Dragging(_getRootNode(n),e,t),u=g=>this.onMouseOrPointerMove(g),d=g=>this.onMouseOrPointerUp(g),f=_getRootNode(n);this.initDrag(o,[f,"mousemove",u],[f,"mouseup",d]),e.dragStartPixels===0?this.onMouseOrPointerMove(t):addHandledDragEvent(t)}onScroll(e){if(!addHandledDragEvent(e))return;const t=this.drag,n=t?.lastDrag;n&&this.dragging&&t.params?.onDragging?.(n)}onMouseOrPointerMove(e){addHandledDragEvent(e)&&(_isBrowserSafari()&&_getDocument(this.beans).getSelection()?.removeAllRanges(),this.shouldPreventMouseEvent(e)&&preventEventDefault(e),this.onMove(e))}onTouchCancel(e){const t=this.drag;!t||!addHandledDragEvent(e)||_getFirstActiveTouch(t.start,e.changedTouches)&&this.cancelDrag()}onTouchMove(e){const t=this.drag;if(!t||!addHandledDragEvent(e))return;const n=_getFirstActiveTouch(t.start,e.touches);n&&(this.onMove(n),this.draggingPreventDefault(e))}onMove(e){const t=this.drag;if(!t)return;t.lastDrag=e;const n=t.params;if(!this.dragging){const o=t.start,d=n.dragStartPixels??4;if(_areEventsNear(e,o,d)||(this.dragging=!0,n.capturePointer&&(t.pointerCapture=capturePointer(this.beans.eRootDiv,e)),this.eventSvc.dispatchEvent({type:"dragStarted",target:n.eElement}),n.onDragStart?.(o),this.drag!==t)||(n.onDragging?.(o),this.drag!==t))return}n.onDragging?.(e)}onTouchUp(e){const t=this.drag;t&&addHandledDragEvent(e)&&this.onUp(_getFirstActiveTouch(t.start,e.changedTouches))}onMouseOrPointerUp(e){addHandledDragEvent(e)&&this.onUp(e)}onUp(e){const t=this.drag;t&&(e||(e=t.lastDrag),e&&this.dragging&&(this.dragging=!1,t.params.onDragStop?.(e),this.eventSvc.dispatchEvent({type:"dragStopped",target:t.params.eElement})),this.destroyDrag())}onKeyDown(e){e.key===KeyCode.ESCAPE&&this.cancelDrag()}},destroyDragSourceEntry=e=>{clearTempEventHandlers(e.handlers);const t=e.oldTouchAction;if(t!=null){const n=e.params.eElement.style;n&&(n.touchAction=t)}},Dragging=class{constructor(e,t,n,o=null){this.rootEl=e,this.params=t,this.start=n,this.pointerId=o,this.handlers=[],this.lastDrag=null,this.pointerCapture=null,this.eElement=t.eElement}},getEventTargetElement=e=>{const t=e.target;return t instanceof Element?t:null},DragService=class extends BaseDragService{shouldPreventMouseEvent(e){return this.gos.get("enableCellTextSelection")&&super.shouldPreventMouseEvent(e)}},HorizontalResizeService=class extends BeanStub{constructor(){super(...arguments),this.beanName="horizontalResizeSvc"}addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0},{dragSvc:n}=this.beans;return n.addDragSource(t),()=>n.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const n=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(n)}setResizeIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(1),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.beans.ctrlsSvc.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},RowDragElement={tag:"div",cls:"ag-drag-handle ag-row-drag",attrs:{"aria-hidden":"true"}},SKIP_ARIA_HIDDEN={skipAriaHidden:!0},RowDragComp=class extends Component{constructor(e,t,n,o,u,d=!1){super(),this.cellValueFn=e,this.rowNode=t,this.column=n,this.customGui=o,this.dragStartPixels=u,this.alwaysVisible=d,this.dragSource=null,this.disabled=!1}isCustomGui(){return this.customGui!=null}postConstruct(){const{beans:e,customGui:t}=this;t?this.setDragElement(t,this.dragStartPixels):(this.setTemplate(RowDragElement),this.getGui().appendChild(_createIconNoSpan("rowDrag",e,null)),this.addDragSource()),this.alwaysVisible||this.initCellDrag()}initCellDrag(){const{beans:e,rowNode:t}=this,n=this.refreshVisibility.bind(this);this.addManagedListeners(e.eventSvc,{rowDragVisibilityChanged:n}),this.addManagedListeners(t,{dataChanged:n,cellChanged:n}),this.refreshVisibility()}setDragElement(e,t){this.setTemplateFromElement(e,void 0,void 0,!0),this.addDragSource(t)}refreshVisibility(){if(this.alwaysVisible)return;const{beans:e,column:t,rowNode:n}=this,{gos:o,dragAndDrop:u,rowDragSvc:d}=e,f=d?.visibility;let v=!(f==="suppress"||f==="hidden"&&!u?.hasExternalDropZones()),w=v;if(v&&!this.isCustomGui()&&t){const S=t.getColDef().rowDrag;if(S===!1)v=!1;else{const R=typeof S=="function";w=t.isRowDrag(n),v=R||w}}v&&w&&n.footer&&o.get("rowDragManaged")&&(w=!1,v=!0),w&&(w=v),v||this.setDisplayed(v,SKIP_ARIA_HIDDEN),w||this.setVisible(w,SKIP_ARIA_HIDDEN),this.setDisabled(!w||f==="disabled"&&!u?.hasExternalDropZones()),v&&this.setDisplayed(v,SKIP_ARIA_HIDDEN),w&&this.setVisible(w,SKIP_ARIA_HIDDEN)}setDisabled(e){e!==this.disabled&&(this.disabled=e,this.getGui()?.classList?.toggle("ag-drag-handle-disabled",e))}getSelectedNodes(){const e=this.rowNode;if(!this.gos.get("rowDragMultiRow"))return[e];const n=this.beans.selectionSvc?.getSelectedNodes()??[];return n.indexOf(e)!==-1?n:[e]}getDragItem(){const{column:e,rowNode:t}=this;return{rowNode:t,rowNodes:this.getSelectedNodes(),columns:e?[e]:void 0,defaultTextValue:this.cellValueFn()}}addDragSource(e=4){if(this.dragSource&&this.removeDragSource(),this.gos.get("rowDragManaged")&&this.rowNode.footer)return;const t=this.getGui();if(this.gos.get("enableCellTextSelection")){this.removeMouseDownListener();const o=_isEventSupported("pointerdown")?{pointerdown:preventEventDefault}:{mousedown:preventEventDefault};this.mouseDownListener=this.addManagedElementListeners(t,o)[0]}const n=this.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:o=>this.getDragItemName(o,n),getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDrop.addDragSource(this.dragSource,!0)}getDragItemName(e,t){const n=e?.dragItem||this.getDragItem(),o=(e?.dropTarget?.rows.length??n.rowNodes?.length)||1,u=this.column?.getColDef()?.rowDragText??this.gos.get("rowDragText");if(u)return u(n,o);if(o!==1)return`${o} ${t("rowDragRows","rows")}`;const d=this.cellValueFn();return d||`1 ${t("rowDragRow","rows")}`}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDrop.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},AutoScrollService=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.includes("x"),this.scrollVertically=e.scrollAxis.includes("y"),this.scrollByTick=e.scrollByTick??20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}get scrolling(){return this.tickingInterval!==null}check(e,t=!1){const n=t||this.shouldSkipVerticalScroll();if(n&&this.shouldSkipHorizontalScroll())return;const o=this.scrollContainer.getBoundingClientRect(),u=this.scrollByTick;this.tickLeft=e.clientX<o.left+u,this.tickRight=e.clientX>o.right-u,this.tickUp=e.clientY<o.top+u&&!n,this.tickDown=e.clientY>o.bottom-u&&!n,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;const e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){const t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){const t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},ChangedRowNodes=class{constructor(){this.reordered=!1,this.removals=[],this.updates=new Set,this.adds=new Set}},_csrmFirstLeaf=e=>{let t=e.childrenAfterGroup;for(;t?.length;){const n=t[0];if(n.sourceRowIndex>=0)return n;t=n.childrenAfterGroup}},_csrmReorderAllLeafs=(e,t,n,o)=>{if(!t.size||!e)return!1;let u=!1;const d=e.length??0;let f=-1;n&&(f=n.sourceRowIndex,n=f<0?_csrmFirstLeaf(n):null,n&&(f=n.sourceRowIndex)),f<0||f>=d?f=d:o||++f;let g=f,v=Math.min(f,d-1);for(const R of t){const _=R.sourceRowIndex;_<g&&(g=_),_>v&&(v=_)}let w=g;for(let R=g;R<f;++R){const _=e[R];t.has(_)||(_.sourceRowIndex!==w&&(_.sourceRowIndex=w,e[w]=_,u=!0),++w)}let S=v;for(let R=v;R>=f;--R){const _=e[R];t.has(_)||(_.sourceRowIndex!==S&&(_.sourceRowIndex=S,e[S]=_,u=!0),--S)}for(const R of t)R.sourceRowIndex!==w&&(R.sourceRowIndex=w,e[w]=R,u=!0),++w;return u};function _getCellPositionForEvent(e,t){return _getCellCtrlForEventTarget(e,t.target)?.getFocusedCellPosition()??null}function _getNormalisedMousePosition(e,t){const n=_isDomLayout(e.gos,"normal"),o=t;let u,d;o.clientX!=null||o.clientY!=null?(u=o.clientX,d=o.clientY):(u=o.x,d=o.y);const{pageFirstPixel:f}=e.pageBounds.getCurrentPagePixelRange();if(d+=f,n){const g=e.ctrlsSvc.getScrollFeature(),v=g.getVScrollPosition(),w=g.getHScrollPosition();u+=w.left,d+=v.top}return{x:u,y:d}}var ChangedPath=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}depthFirstSearchChangedPath(e,t){const{rowNode:n,children:o}=e;if(o)for(let u=0;u<o.length;++u)this.depthFirstSearchChangedPath(o[u],t);t(n)}depthFirstSearchEverything(e,t,n){const o=e.childrenAfterGroup;if(o)for(let u=0,d=o.length;u<d;++u){const f=o[u];f.childrenAfterGroup?this.depthFirstSearchEverything(f,t,n):n&&t(f)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,n=!1){this.active&&!n?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,n=0;for(;!this.mapToItems[t.id];){const o={rowNode:t,children:null};this.mapToItems[t.id]=o,n++,t=t.parent}return n}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let n=e;for(;n;){this.nodeIdsToColumns[n.id]||(this.nodeIdsToColumns[n.id]={});for(const o of t)this.nodeIdsToColumns[n.id][o.getId()]=!0;n=n.parent}}linkPathItems(e,t){let n=e;for(let o=0;o<t;o++){const u=this.mapToItems[n.id],d=this.mapToItems[n.parent.id];d.children||(d.children=[]),d.children.push(u),n=n.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const n=this.createPathItems(e);this.linkPathItems(e,n),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const n=this.nodeIdsToColumns[e.id];return t.filter(u=>n[u.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const n=this.nodeIdsToColumns[e.id];return t.filter(u=>!n[u.getId()])}},POINTER_INSIDE_THRESHOLD=.25,RowDragFeature=class extends BeanStub{constructor(e){super(),this.eContainer=e,this.lastDraggingEvent=null,this.autoScroll=null,this.autoScrollChanged=!1,this.autoScrollChanging=!1,this.autoScrollOldV=null}postConstruct(){const e=this.beans;e.ctrlsSvc.whenReady(this,t=>{const n=()=>t.gridBodyCtrl.scrollFeature.getVScrollPosition().top,o=new AutoScrollService({scrollContainer:t.gridBodyCtrl.eBodyViewport,scrollAxis:"y",getVerticalPosition:n,setVerticalPosition:u=>t.gridBodyCtrl.scrollFeature.setVerticalScrollPosition(u),onScrollCallback:()=>{const u=n();if(this.autoScrollOldV!==u){this.autoScrollOldV=u,this.autoScrollChanging=!0;return}const d=this.autoScrollChanging;this.autoScrollChanged=d,this.autoScrollChanging=!1,d&&(e.dragAndDrop?.nudge(),this.autoScrollChanged=!1)}});this.autoScroll=o,this.clearAutoScroll()})}destroy(){super.destroy(),this.clearAutoScroll(),this.autoScroll=null,this.lastDraggingEvent=null,this.eContainer=null}getContainer(){return this.eContainer}isInterestedIn(e){return e===2}getIconName(e){return e?.dropTarget?.allowed===!1||this.beans.rowDragSvc.visibility!=="visible"?"notAllowed":"move"}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){const n=this.beans.selectionSvc?.getSelectedNodes();if(n&&n.indexOf(t)>=0)return n.slice().sort(compareRowIndex)}return[t]}onDragEnter(e){this.dragging(e,!0)}onDragging(e){this.dragging(e,!1)}dragging(e,t){const{lastDraggingEvent:n,beans:o}=this;if(t){const g=this.getRowNodes(e);e.dragItem.rowNodes=g,setRowNodesDragging(g,!0)}this.lastDraggingEvent=e;const u=e.fromNudge,d=this.makeRowsDrop(n,e,u,!1);o.rowDropHighlightSvc?.fromDrag(e),t&&this.dispatchGridEvent("rowDragEnter",e),this.dispatchGridEvent("rowDragMove",e);const f=this.autoScroll;d?.rowDragManaged&&d.moved&&d.allowed&&d.sameGrid&&!d.suppressMoveWhenRowDragging&&(!u&&!f?.scrolling||this.autoScrollChanged)&&this.dropRows(d),f?.check(e.event)}isFromThisGrid(e){return e.dragSource.dragSourceDomDataKey===this.gos.getDomDataKey()}makeRowsDrop(e,t,n,o){const{beans:u,gos:d}=this,f=this.newRowsDrop(t,o),g=u.rowModel;if(t.dropTarget=f,t.changed=!1,!f)return null;let{sameGrid:v,rootNode:w,source:S,target:R}=f;R??(R=g.getRow(g.getRowCount()-1)??null);const _=this.beans.groupEditSvc,F=!!_?.canSetParent(f);let M=null;if(R?.footer){const N=_prevOrNextDisplayedRow(g,-1,R)??_prevOrNextDisplayedRow(g,1,R);F&&(M=R.sibling??w),R=N??null}R?.detail&&(R=R.parent),f.moved&&(f.moved=S!==R);let I=.5;if(R&&(v&&f.moved&&(M||!F)?I=S.rowIndex>R.rowIndex?-.5:.5:I=(f.y-R.rowTop-R.rowHeight/2)/R.rowHeight||0),!F&&v&&R&&f.moved&&_isClientSideRowModel(d)){const N=deltaDraggingTarget(g,f);N&&(I=S.rowIndex>N.rowIndex?-.5:.5,R=N,f.moved&&(f.moved=S!==R))}return f.target=R,f.newParent=M,f.pointerPos=computePointerPos(R,f.y),f.yDelta=I,_?.fixRowsDrop(f,F,n,I),this.validateRowsDrop(f,F,o),t.changed||(t.changed=rowsDropChanged(e?.dropTarget,f)),f}newRowsDrop(e,t){const{beans:n,gos:o}=this,u=n.rowModel.rootNode,d=_isClientSideRowModel(o)?o.get("rowDragManaged"):!1,f=o.get("suppressMoveWhenRowDragging"),g=this.isFromThisGrid(e);let{rowNode:v,rowNodes:w}=e.dragItem;if(w||(w=v?[v]:[]),v||(v=w[0]),!v||!u)return null;const S=this.beans.dragAndDrop.isDropZoneWithinThisGrid(e);let R=!0;d&&(!w.length||n.rowDragSvc.visibility!=="visible"||(f||!g)&&!S)&&(R=!1);const _=_getNormalisedMousePosition(n,e).y,F=this.getOverNode(_);return{api:n.gridApi,context:n.gridOptions.context,draggingEvent:e,rowDragManaged:d,suppressMoveWhenRowDragging:f,sameGrid:g,withinGrid:S,treeData:!1,rootNode:u,moved:v!==F,y:_,overNode:F,overIndex:F?.rowIndex??-1,pointerPos:"none",position:"none",source:v,target:F??null,newParent:null,rows:w,allowed:R,highlight:!t&&d&&f&&(S||!g),yDelta:0,inside:!1,droppedManaged:!1}}validateRowsDrop(e,t,n){const{source:o,target:u,yDelta:d,inside:f,moved:g,rowDragManaged:v,suppressMoveWhenRowDragging:w}=e;e.moved&&(e.moved=o!==u);const{position:S,fallbackPosition:R}=this.computeDropPosition(g,f,d);e.position=S,t||(e.newParent=null),this.enforceSuppressMoveWhenRowDragging(e,w,"initial");const _=(!v||e.allowed)&&this.gos.get("isRowValidDropPosition");_&&this.applyDropValidator(e,t,n,v,_),v&&(e.rows=this.filterRows(e)),this.beans.groupEditSvc?.clearNewSameParent(e,t),this.enforceSuppressMoveWhenRowDragging(e,w,"final"),e.position==="inside"&&(!e.allowed||!e.newParent)&&(e.position=R)}computeDropPosition(e,t,n){const o=n<0?"above":"below";return e?{position:t?"inside":o,fallbackPosition:o}:{position:"none",fallbackPosition:o}}enforceSuppressMoveWhenRowDragging(e,t,n){if(t){if(n==="initial"){e.moved||(e.allowed=!1);return}(!e.rows.length||e.position==="none")&&(e.allowed=!1)}}applyDropValidator(e,t,n,o,u){this.beans.groupEditSvc?.clearNewSameParent(e,t);const d=u(e);if(!d){e.allowed=!1;return}if(typeof d!="object")return;d.rows!==void 0&&(e.rows=d.rows??[]),t&&d.newParent!==void 0&&(e.newParent=d.newParent),d.target!==void 0&&(e.target=d.target),d.position&&(e.position=d.position),d.allowed!==void 0?e.allowed=d.allowed:o||(e.allowed=!0);const f=e.draggingEvent;d.changed&&f&&(f.changed=!0),!n&&d.highlight!==void 0&&(e.highlight=d.highlight)}addRowDropZone(e){if(!e.getContainer()){_warn(55);return}const t=this.beans.dragAndDrop;if(t.findExternalZone(e.getContainer())){_warn(56);return}const n=e.fromGrid?e:{getContainer:e.getContainer,onDragEnter:e.onDragEnter&&(u=>e.onDragEnter(this.rowDragEvent("rowDragEnter",u))),onDragLeave:e.onDragLeave&&(u=>e.onDragLeave(this.rowDragEvent("rowDragLeave",u))),onDragging:e.onDragging&&(u=>e.onDragging(this.rowDragEvent("rowDragMove",u))),onDragStop:e.onDragStop&&(u=>e.onDragStop(this.rowDragEvent("rowDragEnd",u))),onDragCancel:e.onDragCancel&&(u=>e.onDragCancel(this.rowDragEvent("rowDragCancel",u)))},o={isInterestedIn:u=>u===2,getIconName:()=>"move",external:!0,...n};t.addDropTarget(o),this.addDestroyFunc(()=>t.removeDropTarget(o))}getRowDropZone(e){return{getContainer:this.getContainer.bind(this),onDragEnter:n=>{this.onDragEnter(n),e?.onDragEnter?.(this.rowDragEvent("rowDragEnter",n))},onDragLeave:n=>{this.onDragLeave(n),e?.onDragLeave?.(this.rowDragEvent("rowDragLeave",n))},onDragging:n=>{this.onDragging(n),e?.onDragging?.(this.rowDragEvent("rowDragMove",n))},onDragStop:n=>{this.onDragStop(n),e?.onDragStop?.(this.rowDragEvent("rowDragEnd",n))},onDragCancel:n=>{this.onDragCancel(n),e?.onDragCancel?.(this.rowDragEvent("rowDragCancel",n))},fromGrid:!0}}getOverNode(e){const{pageBounds:t,rowModel:n}=this.beans,u=e>t.getCurrentPagePixelRange().pageLastPixel?-1:n.getRowIndexAtPixel(e);return u>=0?n.getRow(u):void 0}rowDragEvent(e,t){const n=this.beans,{dragItem:o,dropTarget:u,event:d,vDirection:f}=t,g=u?.rootNode===n.rowModel.rootNode,v=g?u.y:_getNormalisedMousePosition(n,t).y,w=g?u.overNode:this.getOverNode(v),S=g?u.overIndex:w?.rowIndex??-1;return{api:n.gridApi,context:n.gridOptions.context,type:e,event:d,node:o.rowNode,nodes:o.rowNodes,overIndex:S,overNode:w,y:v,vDirection:f,rowsDrop:u}}dispatchGridEvent(e,t){const n=this.rowDragEvent(e,t);this.eventSvc.dispatchEvent(n)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e,!1)}onDragStop(e){const t=this.lastDraggingEvent?.dropTarget??null,n=this.makeRowsDrop(this.lastDraggingEvent,e,!1,!0);this.dispatchGridEvent("rowDragEnd",e),n?.allowed&&n.rowDragManaged&&(!t?.droppedManaged||rowsDropChanged(t,n))&&this.dropRows(n),this.stopDragging(e,!0)}onDragCancel(e){this.dispatchGridEvent("rowDragCancel",e),this.stopDragging(e,!0)}stopDragging(e,t){this.clearAutoScroll(),this.beans.groupEditSvc?.stopDragging(t),this.beans.rowDropHighlightSvc?.fromDrag(null),setRowNodesDragging(e.dragItem.rowNodes,!1),this.lastDraggingEvent=null}clearAutoScroll(){this.autoScroll?.ensureCleared(),this.autoScrollChanged=!1,this.autoScrollChanging=!1,this.autoScrollOldV=null}dropRows(e){return e.droppedManaged=!0,e.sameGrid?this.csrmMoveRows(e):this.csrmAddRows(e)}csrmAddRows({position:e,target:t,rows:n}){const o=_getRowIdCallback(this.gos),u=this.beans.rowModel,d=n.filter(({data:g,rowPinned:v})=>!u.getRowNode(o?.({data:g,level:0,rowPinned:v})??g.id)).map(({data:g})=>g);if(d.length===0)return!1;let f;if(t){const g=t.sourceRowIndex>=0?t:_csrmFirstLeaf(t);g&&(f=g.sourceRowIndex+(e==="above"?0:1))}return u.updateRowData({add:d,addIndex:f}),!0}filterRows(e){const{groupEditSvc:t}=this.beans,{rows:n,sameGrid:o}=e;let u;for(let d=0,f=n.length;d<f;++d){let g=!0;const v=n[d];(!v||v.footer||o&&v.destroyed&&!v.group||!this.csrmGetLeaf(v))&&(g=!1),g&&t&&!t.canDropRow(v,e)&&(g=!1),g?u?.push(v):u??(u=n.slice(0,d))}return u??n}csrmMoveRows(e){const t=this.beans.groupEditSvc;return t?.isGroupingDrop(e)?t.dropGroupEdit(e):this.csrmMoveRowsReorder(e)}csrmMoveRowsReorder({position:e,target:t,rows:n,newParent:o,rootNode:u}){let d=!1;const f=new Set;for(const _ of n){o&&_.parent!==o&&(_.treeParent=o,d=!0);const F=this.csrmGetLeaf(_);F&&f.add(F)}if(!d&&f.size===0)return!1;const g=this.beans.focusSvc,v=g.getFocusedCell(),w=v&&_getCellByPosition(this.beans,v);if(f.size&&_csrmReorderAllLeafs(u._leafs,f,t,e==="above")&&(d=!0),!d)return!1;const S=this.beans.rowModel,R=new ChangedRowNodes;return R.reordered=!0,S.refreshModel({step:"group",keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame"),changedPath:new ChangedPath(!1,u),changedRowNodes:R}),w?w.focusCell():g.clearFocusedCell(),!0}csrmGetLeaf(e){if(e.sourceRowIndex>=0)return e.destroyed?void 0:e;const t=this.beans.groupEditSvc;return t?t.csrmFirstLeaf(e):_csrmFirstLeaf(e)}},rowsDropChanged=(e,t)=>e!==t&&(!e||e.sameGrid!==t.sameGrid||e.allowed!==t.allowed||e.position!==t.position||e.target!==t.target||e.source!==t.source||e.newParent!==t.newParent||!_areEqual(e.rows,t.rows)),compareRowIndex=({rowIndex:e},{rowIndex:t})=>e!==null&&t!==null?e-t:0,setRowNodesDragging=(e,t)=>{for(let n=0,o=e?.length||0;n<o;++n){const u=e[n];u.dragging!==t&&(u.dragging=t,u.dispatchRowEvent("draggingChanged"))}},deltaDraggingTarget=(e,t)=>{let n=null,o=t.target;if(o&&t.rows.indexOf(o)<0)return null;const u=t.source;if(!o||!u)return null;let d=o.rowIndex-u.rowIndex;const f=d<0?-1:1;d=t.suppressMoveWhenRowDragging?Math.abs(d):1;const g=new Set(t.rows);do{const v=_prevOrNextDisplayedRow(e,f,o);if(!v)break;g.has(v)||(n=v,--d),o=v}while(d>0);return n},computePointerPos=(e,t)=>{const n=e?.rowTop,o=e?.rowHeight??0;if(n==null||!o||o<=0)return"none";const u=t-n,d=o*POINTER_INSIDE_THRESHOLD;return u<=d?"above":u>=o-d?"below":"inside"},RowDragService=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowDragSvc",this.rowDragFeature=null,this.visibility="suppress"}setupRowDrag(e,t){const n=t.createManagedBean(new RowDragFeature(e)),o=this.beans.dragAndDrop;o.addDropTarget(n),t.addDestroyFunc(()=>o.removeDropTarget(n)),this.rowDragFeature=n;const u=()=>this.refreshVisibility();this.addManagedPropertyListeners(["rowDragManaged","suppressRowDrag","refreshAfterGroupEdit"],u),this.addManagedEventListeners({newColumnsLoaded:u,columnRowGroupChanged:u,columnPivotModeChanged:u,sortChanged:u,filterChanged:u}),this.visibility=this.computeVisibility()}createRowDragComp(e,t,n,o,u,d){return new RowDragComp(e,t,n,o,u,d)}createRowDragCompForRow(e,t){if(_isCellSelectionEnabled(this.gos))return;const n=this.getLocaleTextFunc();return this.createRowDragComp(()=>`1 ${n("rowDragRow","row")}`,e,void 0,t,void 0,!0)}createRowDragCompForCell(e,t,n,o,u,d){const f=this.gos;return f.get("rowDragManaged")&&(!_isClientSideRowModel(f)||f.get("pagination"))?void 0:this.createRowDragComp(n,e,t,o,u,d)}cancelRowDrag(){this.rowDragFeature?.lastDraggingEvent&&this.beans.dragSvc?.cancelDrag()}computeVisibility(){const e=this.beans,t=e.gos;if(t.get("suppressRowDrag"))return"suppress";if(!t.get("rowDragManaged"))return"visible";const o=e.colModel.isPivotMode();return(o||e.rowGroupColsSvc?.columns?.length)&&!t.get("refreshAfterGroupEdit")?"hidden":o||e.filterManager?.isAnyFilterPresent()||e.sortSvc?.isSortActive()?"disabled":"visible"}refreshVisibility(){const e=this.visibility,t=this.computeVisibility();e!==t&&(this.visibility=t,this.eventSvc?.dispatchEvent({type:"rowDragVisibilityChanged"}))}},RowDropHighlightService=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowDropHighlightSvc",this.uiLevel=0,this.dragging=!1,this.row=null,this.position="none"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this)})}onModelUpdated(){const e=this.row,t=this.dragging;!e||e?.rowIndex===null||this.position==="none"?this.clear():this.set(e,this.position),this.dragging=t}destroy(){this.clear(),super.destroy()}clear(){const e=this.row;this.dragging=!1,e&&(this.uiLevel=0,this.position="none",this.row=null,e.dispatchRowEvent("rowHighlightChanged"))}set(e,t){const n=e!==this.row,o=e.uiLevel,u=t!==this.position,d=o!==this.uiLevel;this.dragging=!1,(n||u||d)&&(n&&this.clear(),this.uiLevel=o,this.position=t,this.row=e,e.dispatchRowEvent("rowHighlightChanged"))}fromDrag(e){const t=e?.dropTarget;if(t){const{highlight:n,target:o,position:u}=t;if(n&&o&&u!=="none"){this.set(o,u),this.dragging=!0;return}}this.dragging&&this.clear()}},DragModule={moduleName:"Drag",version:VERSION,beans:[DragService]},DragAndDropModule={moduleName:"DragAndDrop",version:VERSION,dynamicBeans:{dndSourceComp:DndSourceComp},icons:{rowDrag:"grip"}},SharedDragAndDropModule={moduleName:"SharedDragAndDrop",version:VERSION,beans:[DragAndDropService],dependsOn:[DragModule],userComponents:{agDragAndDropImage:DragAndDropImageComponent},icons:{columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",rowDrag:"grip"}},RowDragModule={moduleName:"RowDrag",version:VERSION,beans:[RowDropHighlightService,RowDragService],apiFunctions:{addRowDropZone,removeRowDropZone,getRowDropZoneParams,getRowDropPositionIndicator,setRowDropPositionIndicator},dependsOn:[SharedDragAndDropModule]},HorizontalResizeModule={moduleName:"HorizontalResize",version:VERSION,beans:[HorizontalResizeService],dependsOn:[DragModule]},columnMovingCSS=":where(.ag-ltr) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:left .2s}.ag-header-group-cell{transition:left .2s,width .2s}}:where(.ag-rtl) :where(.ag-column-moving){.ag-cell,.ag-header-cell,.ag-spanned-cell-wrapper{transition:right .2s}.ag-header-group-cell{transition:right .2s,width .2s}}",ColumnAnimationService=class extends BeanStub{constructor(){super(...arguments),this.beanName="colAnimation",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){if(this.active)return;const{gos:e}=this;e.get("suppressColumnMoveAnimation")||e.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount,{gridBodyCtrl:t}=this;t.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&t.setColumnMovingCss(!1)})}flush(e,t){const{executeNextFuncs:n,executeLaterFuncs:o}=this;if(n.length===0&&o.length===0){e(),t();return}const u=d=>{for(;d.length;){const f=d.pop();f&&f()}};this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e(),u(n)},0),window.setTimeout(()=>{t(),u(o)},200)})}};function moveColumnByIndex(e,t,n){e.colMoves?.moveColumnByIndex(t,n,"api")}function moveColumns(e,t,n){e.colMoves?.moveColumns(t,n,"api")}var BodyDropPivotTarget=class extends BeanStub{constructor(e){super(),this.pinned=e,this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[]}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const t=e.dragItem.columns;if(t)for(const n of t)n.isPrimary()&&(n.isAnyFunctionActive()||(n.isAllowValue()?this.columnsToAggregate.push(n):n.isAllowRowGroup()?this.columnsToGroup.push(n):n.isAllowPivot()&&this.columnsToPivot.push(n)))}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){const{valueColsSvc:t,rowGroupColsSvc:n,pivotColsSvc:o}=this.beans;this.columnsToAggregate.length>0&&t?.addColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&n?.addColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&o?.addColumns(this.columnsToPivot,"toolPanelDragAndDrop")}onDragCancel(){this.clearColumnsList()}};function sortColsLikeCols(e,t){!t||t.length<=1||t.filter(o=>e.indexOf(o)<0).length>0||t.sort((o,u)=>{const d=e.indexOf(o),f=e.indexOf(u);return d-f})}function getColsToMove(e){const t=[...e];for(const n of e){let o=null,u=n.getParent();for(;u!=null&&u.getDisplayedLeafColumns().length===1;)o=u,u=u.getParent();if(o!=null){const f=!!o.getColGroupDef()?.marryChildren?o.getProvidedColumnGroup().getLeafColumns():o.getLeafColumns();for(const g of f)t.includes(g)||t.push(g)}}return t}function getLowestFragMove(e,t,n,o){const u=o.allCols;let d=null,f=null;for(let g=0;g<e.length;g++){const v=e[g],w=n.getProposedColumnOrder(t,v);if(!n.doesOrderPassRules(w))continue;const S=w.filter(_=>u.includes(_));if(f===null)f=S;else if(!_areEqual(S,f))break;const R=groupFragCount(w);(d===null||R<d.fragCount)&&(d={move:v,fragCount:R})}return d}function getBestColumnMoveIndexFromXPosition(e){const{isFromHeader:t,fromLeft:n,xPosition:o,fromEnter:u,fakeEvent:d,pinned:f,gos:g,colModel:v,colMoves:w,visibleCols:S}=e;let{allMovingColumns:R}=e;t&&(R=getColsToMove(R));const _=R.slice();sortColsLikeCols(v.getCols(),_);const F=calculateValidMoves({movingCols:_,draggingRight:n,xPosition:o,pinned:f,gos:g,colModel:v,visibleCols:S}),M=calculateOldIndex(_,v);if(F.length===0)return;const I=F[0];if(M!==null&&(t||!u)&&!d&&(!n&&I>=M||n&&I<=M))return;const B=getLowestFragMove(F,_,w,S);if(!B)return;const H=B.move;if(!(H>v.getCols().length-_.length))return{columns:_,toIndex:H}}function attemptMoveColumns(e){const{columns:t,toIndex:n}=getBestColumnMoveIndexFromXPosition(e)||{},{finished:o,colMoves:u}=e;return!t||n==null?null:(u.moveColumns(t,n,"uiColumnMoved",o),o?null:{columns:t,toIndex:n})}function calculateOldIndex(e,t){const n=t.getCols(),o=e.map(v=>n.indexOf(v)).sort((v,w)=>v-w),u=o[0];return _last(o)-u!==o.length-1?null:u}function groupFragCount(e){function t(o){const u=[];let d=o.getOriginalParent();for(;d!=null;)u.push(d),d=d.getOriginalParent();return u}let n=0;for(let o=0;o<e.length-1;o++){let u=t(e[o]),d=t(e[o+1]);[u,d]=u.length>d.length?[u,d]:[d,u];for(const f of u)d.indexOf(f)===-1&&n++}return n}function getDisplayedColumns(e,t){switch(t){case"left":return e.leftCols;case"right":return e.rightCols;default:return e.centerCols}}function calculateValidMoves(e){const{movingCols:t,draggingRight:n,xPosition:o,pinned:u,gos:d,colModel:f,visibleCols:g}=e;if(d.get("suppressMovableColumns")||t.some(U=>U.getColDef().suppressMovable))return[];const w=getDisplayedColumns(g,u),S=f.getCols(),R=w.filter(U=>t.includes(U)),_=w.filter(U=>!t.includes(U)),F=S.filter(U=>!t.includes(U));let M=0,I=o;if(n){let U=0;for(const $ of R)U+=$.getActualWidth();I-=U}if(I>0){for(let U=0;U<_.length;U++){const $=_[U];if(I-=$.getActualWidth(),I<0)break;M++}n&&M++}let N;if(M>0){const U=_[M-1];N=F.indexOf(U)+1}else N=F.indexOf(_[0]),N===-1&&(N=0);const B=[N],H=(U,$)=>U-$;if(n){let U=N+1;const $=S.length-1;for(;U<=$;)B.push(U),U++;B.sort(H)}else{let U=N;const $=S.length-1;let z=S[U];for(;U<=$&&w.indexOf(z)<0;)U++,B.push(U),z=S[U];U=N-1;const j=0;for(;U>=j;)B.push(U),U--;B.sort(H).reverse()}return B}function normaliseX(e){const{pinned:t,fromKeyboard:n,gos:o,ctrlsSvc:u,useHeaderRow:d,skipScrollPadding:f}=e;let g=u.getHeaderRowContainerCtrl(t)?.eViewport,{x:v}=e;return g?(n&&(v-=g.getBoundingClientRect().left),o.get("enableRtl")&&(d&&(g=g.querySelector(".ag-header-row")),v=g.clientWidth-v),t==null&&!f&&(v+=u.get("center").getCenterViewportScrollLeft()),v):0}function setColumnsMoving(e,t){for(const n of e)n.moving=t,n.dispatchColEvent("movingChanged","uiColumnMoved")}var MOVE_FAIL_THRESHOLD=7,SCROLL_MOVE_WIDTH=100,SCROLL_GAP_NEEDED_BEFORE_MOVE=SCROLL_MOVE_WIDTH/2,SCROLL_ACCELERATION_RATE=5,SCROLL_TIME_INTERVAL=100,MoveColumnFeature=class extends BeanStub{constructor(e){super(),this.pinned=e,this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.isCenterContainer=!_exists(e)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){const{pinned:e,lastDraggingEvent:t}=this,{dragItem:n}=t||{},o=n?.columns??[];for(const u of o){const d=u.getPinned();if(u.getColDef().lockPinned){if(d==e)return"move";continue}const f=n?.containerType;if(f===e||!e)return"move";if(e&&(!d||f!==e))return"pinned"}return"notAllowed"}onDragEnter(e){const t=e.dragItem,n=t.columns;if(e.dragSource.type===0)this.setColumnsVisible(n,!0,"uiColumnDragged");else{const u=t.visibleState,d=(n||[]).filter(f=>u[f.getId()]&&!f.isVisible());this.setColumnsVisible(d,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(n,this.pinned),this.onDragging(e,!0,!0)}onDragging(e=this.lastDraggingEvent,t=!1,n=!1,o=!1){const{gos:u,ctrlsSvc:d}=this.beans,f=u.get("suppressMoveWhenColumnDragging");if(o&&!f){this.finishColumnMoving();return}if(this.lastDraggingEvent=e,!e||!o&&_missing(e.hDirection))return;const g=normaliseX({x:e.x,pinned:this.pinned,gos:u,ctrlsSvc:d});t||this.checkCenterForScrolling(g),f?this.handleColumnDragWhileSuppressingMovement(e,t,n,g,o):this.handleColumnDragWhileAllowingMovement(e,t,n,g,o)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.updateDragItemContainerType(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,n){if(!e?.length)return;const o=e.filter(u=>!u.getColDef().lockVisible);o.length&&this.beans.colModel.setColsVisible(o,t,n)}finishColumnMoving(){this.clearHighlighted();const e=this.lastMovedInfo;if(!e)return;const{columns:t,toIndex:n}=e;this.beans.colMoves.moveColumns(t,n,"uiColumnMoved",!0)}updateDragItemContainerType(){const{lastDraggingEvent:e}=this;if(this.gos.get("suppressMoveWhenColumnDragging")||!e)return;const t=e.dragItem;t&&(t.containerType=this.pinned)}handleColumnDragWhileSuppressingMovement(e,t,n,o,u){const d=this.getAllMovingColumns(e,!0);if(u){const f=this.isAttemptingToPin(d);f&&this.attemptToPinColumns(d,void 0,!0);const{fromLeft:g,xPosition:v}=this.getNormalisedXPositionInfo(d,f)||{};if(g==null||v==null){this.finishColumnMoving();return}this.moveColumnsAfterHighlight({allMovingColumns:d,xPosition:v,fromEnter:t,fakeEvent:n,fromLeft:g})}else{if(!this.beans.dragAndDrop.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(d,o)}}handleColumnDragWhileAllowingMovement(e,t,n,o,u){const d=this.getAllMovingColumns(e),f=this.normaliseDirection(e.hDirection)==="right",g=e.dragSource.type===1,v=this.getMoveColumnParams({allMovingColumns:d,isFromHeader:g,xPosition:o,fromLeft:f,fromEnter:t,fakeEvent:n}),w=attemptMoveColumns({...v,finished:u});w&&(this.lastMovedInfo=w)}getAllMovingColumns(e,t=!1){const n=e.dragSource.getDragItem();let o=null;t?(o=n.columnsInSplit,o||(o=n.columns)):o=n.columns;const u=d=>d.getColDef().lockPinned?d.getPinned()==this.pinned:!0;return o?o.filter(u):[]}getMoveColumnParams(e){const{allMovingColumns:t,isFromHeader:n,xPosition:o,fromLeft:u,fromEnter:d,fakeEvent:f}=e,{gos:g,colModel:v,colMoves:w,visibleCols:S}=this.beans;return{allMovingColumns:t,isFromHeader:n,fromLeft:u,xPosition:o,pinned:this.pinned,fromEnter:d,fakeEvent:f,gos:g,colModel:v,colMoves:w,visibleCols:S}}highlightHoveredColumn(e,t){const{gos:n,colModel:o}=this.beans,u=n.get("enableRtl"),d=o.getCols().filter(S=>S.isVisible()&&S.getPinned()===this.pinned);let f=null,g=null,v=null;for(const S of d){if(g=S.getActualWidth(),f=this.getNormalisedColumnLeft(S,0,u),f!=null){const R=f+g;if(f<=t&&R>=t){v=S;break}}f=null,g=null}if(v)e.indexOf(v)!==-1&&(v=null);else{for(let S=d.length-1;S>=0;S--){const R=d[S],_=d[S].getParent();if(!_){v=R;break}const F=_?.getDisplayedLeafColumns();if(F.length){v=_last(F);break}}if(!v)return;f=this.getNormalisedColumnLeft(v,0,u),g=v.getActualWidth()}if(v==null||f==null||g==null){this.lastHighlightedColumn?.column!==v&&this.clearHighlighted();return}let w;if(t-f<g/2){const S=d.indexOf(v);S===0?w=0:(w=1,v=d[S-1])}else w=1;(this.lastHighlightedColumn?.column!==v||this.lastHighlightedColumn?.position!==w)&&this.clearHighlighted(),setColumnHighlighted(v,w),this.lastHighlightedColumn={column:v,position:w}}getNormalisedXPositionInfo(e,t){const{gos:n,visibleCols:o}=this.beans,u=n.get("enableRtl"),{firstMovingCol:d,column:f,position:g}=this.getColumnMoveAndTargetInfo(e,t,u);if(!d||!f||g==null)return;const v=o.allCols,w=v.indexOf(d),S=v.indexOf(f),R=g===0,_=w<S||w===S&&!R;let F=0;if(R?_&&(F-=1):_||(F+=1),S+F===w)return;const M=v[S+F];if(!M)return;const I=this.getNormalisedColumnLeft(M,20,u);return{fromLeft:_,xPosition:I}}getColumnMoveAndTargetInfo(e,t,n){const o=this.lastHighlightedColumn||{},{firstMovingCol:u,lastMovingCol:d}=findFirstAndLastMovingColumns(e);if(!u||!d||o.column||!t)return{firstMovingCol:u,...o};const g=this.getPinDirection()==="left";return{firstMovingCol:u,position:g?1:0,column:g!==n?u:d}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case"left":return"right";case"right":return"left"}return e}getNormalisedColumnLeft(e,t,n){const{gos:o,ctrlsSvc:u}=this.beans,d=e.getLeft();if(d==null)return null;const f=e.getActualWidth();return normaliseX({x:n?d+f-t:d+t,pinned:e.getPinned(),useHeaderRow:n,skipScrollPadding:!0,gos:o,ctrlsSvc:u})}isAttemptingToPin(e){const t=this.needToMoveLeft||this.needToMoveRight,n=this.failedMoveAttempts>MOVE_FAIL_THRESHOLD;return t&&n||e.some(o=>o.getPinned()!==this.pinned)}moveColumnsAfterHighlight(e){const{allMovingColumns:t,xPosition:n,fromEnter:o,fakeEvent:u,fromLeft:d}=e,f=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:n,fromLeft:d,fromEnter:o,fakeEvent:u}),{columns:g,toIndex:v}=getBestColumnMoveIndexFromXPosition(f)||{};g&&v!=null&&(this.lastMovedInfo={columns:g,toIndex:v}),this.finishColumnMoving()}clearHighlighted(){const{lastHighlightedColumn:e}=this;e&&(setColumnHighlighted(e.column,null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;const t=this.beans.ctrlsSvc.get("center"),n=t.getCenterViewportScrollLeft(),o=n+t.getCenterWidth();let u,d;this.gos.get("enableRtl")?(u=e<n+SCROLL_GAP_NEEDED_BEFORE_MOVE,d=e>o-SCROLL_GAP_NEEDED_BEFORE_MOVE):(d=e<n+SCROLL_GAP_NEEDED_BEFORE_MOVE,u=e>o-SCROLL_GAP_NEEDED_BEFORE_MOVE),this.needToMoveRight=u,this.needToMoveLeft=d,d||u?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),SCROLL_TIME_INTERVAL),this.beans.dragAndDrop.setDragImageCompIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,this.beans.dragAndDrop.setDragImageCompIcon(this.getIconName()))}moveInterval(){let e;this.intervalCount++,e=10+this.intervalCount*SCROLL_ACCELERATION_RATE,e>SCROLL_MOVE_WIDTH&&(e=SCROLL_MOVE_WIDTH);let t=null;const n=this.gridBodyCon.scrollFeature;if(this.needToMoveLeft?t=n.scrollHorizontally(-e):this.needToMoveRight&&(t=n.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;const{pinnedCols:o,dragAndDrop:u,gos:d}=this.beans;if(this.failedMoveAttempts<=MOVE_FAIL_THRESHOLD+1||!o)return;if(u.setDragImageCompIcon("pinned"),!d.get("suppressMoveWhenColumnDragging")){const f=this.lastDraggingEvent?.dragItem.columns;this.attemptToPinColumns(f,void 0,!0)}}}getPinDirection(){if(this.needToMoveLeft||this.pinned==="left")return"left";if(this.needToMoveRight||this.pinned==="right")return"right"}attemptToPinColumns(e,t,n=!1){const o=(e||[]).filter(f=>!f.getColDef().lockPinned);if(!o.length)return 0;n&&(t=this.getPinDirection());const{pinnedCols:u,dragAndDrop:d}=this.beans;return u?.setColsPinned(o,t,"uiColumnDragged"),n&&d.nudge(),o.length}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}};function setColumnHighlighted(e,t){e.highlighted!==t&&(e.highlighted=t,e.dispatchColEvent("headerHighlightChanged","uiColumnMoved"))}function findFirstAndLastMovingColumns(e){const t=e.length;let n,o;for(let u=0;u<t;u++){if(!n){const d=e[u];d.getLeft()!=null&&(n=d)}if(!o){const d=e[t-1-u];d.getLeft()!=null&&(o=d)}if(n&&o)break}return{firstMovingCol:n,lastMovingCol:o}}var BodyDropTarget=class extends BeanStub{constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){const{ctrlsSvc:e,dragAndDrop:t}=this.beans,n=this.pinned;e.whenReady(this,o=>{let u;const d=o.gridBodyCtrl.eBodyViewport;switch(n){case"left":u=[[d,o.left.eContainer],[o.bottomLeft.eContainer],[o.topLeft.eContainer]];break;case"right":u=[[d,o.right.eContainer],[o.bottomRight.eContainer],[o.topRight.eContainer]];break;default:u=[[d,o.center.eViewport],[o.bottomCenter.eViewport],[o.topCenter.eViewport]];break}this.eSecondaryContainers=u}),this.moveColumnFeature=this.createManagedBean(new MoveColumnFeature(n)),this.bodyDropPivotTarget=this.createManagedBean(new BodyDropPivotTarget(n)),t.addDropTarget(this),this.addDestroyFunc(()=>t.removeDropTarget(this))}isInterestedIn(e){return e===1||e===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.beans.colModel.isPivotMode()&&e.dragSource.type===0}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}},ColumnMoveService=class extends BeanStub{constructor(){super(...arguments),this.beanName="colMoves"}moveColumnByIndex(e,t,n){const o=this.beans.colModel.getCols();if(!o)return;const u=o[e];this.moveColumns([u],t,n)}moveColumns(e,t,n,o=!0){const{colModel:u,colAnimation:d,visibleCols:f,eventSvc:g}=this.beans,v=u.getCols();if(!v)return;if(t>v.length-e.length){_warn(30,{toIndex:t});return}d?.start();const w=u.getColsForKeys(e);this.doesMovePassRules(w,t)&&(_moveInArray(u.getCols(),w,t),f.refresh(n),g.dispatchEvent({type:"columnMoved",columns:w,column:w.length===1?w[0]:null,toIndex:t,finished:o,source:n})),d?.finish()}doesMovePassRules(e,t){const n=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(n)}doesOrderPassRules(e){const{colModel:t,gos:n}=this.beans;return!(!doesMovePassMarryChildren(e,t.getColTree())||!(u=>{const d=w=>w?w==="left"||w===!0?-1:1:0,f=n.get("enableRtl");let g=f?1:-1,v=!0;for(const w of u){const S=d(w.getColDef().lockPosition);f?S>g&&(v=!1):S<g&&(v=!1),g=S}return v})(e))}getProposedColumnOrder(e,t){const o=this.beans.colModel.getCols().slice();return _moveInArray(o,e,t),o}createBodyDropTarget(e,t){return new BodyDropTarget(e,t)}moveHeader(e,t,n,o,u){const{ctrlsSvc:d,gos:f,colModel:g,visibleCols:v,focusSvc:w}=this.beans,S=t.getBoundingClientRect(),R=S.left,_=isColumnGroup(n),F=_?S.width:n.getActualWidth(),M=e==="left"!==f.get("enableRtl"),I=normaliseX({x:M?R-20:R+F+20,pinned:o,fromKeyboard:!0,gos:f,ctrlsSvc:d}),N=w.focusedHeader;attemptMoveColumns({allMovingColumns:_?n.getLeafColumns():[n],isFromHeader:!0,fromLeft:e==="right",xPosition:I,pinned:o,fromEnter:!1,fakeEvent:!1,gos:f,colModel:g,colMoves:this,visibleCols:v,finished:!0});let B;if(_){const H=n.getDisplayedLeafColumns();B=M?H[0]:_last(H)}else B=n;if(d.getScrollFeature().ensureColumnVisible(B,"auto"),(!u.isAlive()||f.get("ensureDomOrder"))&&N){let H;if(_){const U=n.getGroupId(),$=n.getLeafColumns();if(!$.length)return;const z=$[0].getParent();if(!z)return;H=findGroupWidthId(z,U)}else H=n;H&&w.focusHeaderPosition({headerPosition:{...N,column:H}})}}setDragSourceForHeader(e,t,n){const{gos:o,colModel:u,dragAndDrop:d,visibleCols:f}=this.beans;let g=!o.get("suppressDragLeaveHidesColumns");const v=isColumnGroup(t),w=v?t.getProvidedColumnGroup().getLeafColumns():[t],R={type:1,eElement:e,getDefaultIconName:()=>g?"hide":"notAllowed",getDragItem:v?()=>createDragItemForGroup(t,f.allCols):()=>createDragItem(t),dragItemName:n,onDragStarted:()=>{g=!o.get("suppressDragLeaveHidesColumns"),setColumnsMoving(w,!0)},onDragStopped:()=>setColumnsMoving(w,!1),onDragCancelled:()=>setColumnsMoving(w,!1),onGridEnter:_=>{if(g){const{columns:F=[],visibleState:M}=_??{},I=v?B=>!M||M[B.getColId()]:()=>!0,N=F.filter(B=>!B.getColDef().lockVisible&&I(B));u.setColsVisible(N,!0,"uiColumnMoved")}},onGridExit:_=>{if(g){const F=_?.columns?.filter(M=>!M.getColDef().lockVisible)||[];u.setColsVisible(F,!1,"uiColumnMoved")}}};return d.addDragSource(R,!0),R}};function findGroupWidthId(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}}function createDragItem(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t,containerType:e.pinned}}function createDragItemForGroup(e,t){const n=e.getProvidedColumnGroup().getLeafColumns(),o={};for(const g of n)o[g.getId()]=g.isVisible();const u=[];for(const g of t)n.indexOf(g)>=0&&(u.push(g),_removeFromArray(n,g));for(const g of n)u.push(g);const d=[],f=e.getLeafColumns();for(const g of u)f.indexOf(g)!==-1&&d.push(g);return{columns:u,columnsInSplit:d,visibleState:o,containerType:d[0]?.pinned}}var ColumnMoveModule={moduleName:"ColumnMove",version:VERSION,beans:[ColumnMoveService,ColumnAnimationService],apiFunctions:{moveColumnByIndex,moveColumns},dependsOn:[SharedDragAndDropModule],css:[columnMovingCSS]},AutoWidthCalculator=class extends BeanStub{constructor(){super(...arguments),this.beanName="autoWidthCalc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){const n=this.getHeaderCellForColumn(e);if(!n)return-1;const o=this.beans.rowRenderer.getAllCellsNotSpanningForColumn(e);return t||o.push(n),this.getPreferredWidthForElements(o)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.getPreferredWidthForElements([t]):-1}getPreferredWidthForElements(e,t){const n=document.createElement("form");n.style.position="fixed";const o=this.centerRowContainerCtrl.eContainer;for(const d of e)this.cloneItemIntoDummy(d,n);o.appendChild(n);const u=Math.ceil(n.getBoundingClientRect().width);return n.remove(),t=t??this.gos.get("autoSizePadding"),u+t}getHeaderCellForColumn(e){let t=null;for(const n of this.beans.ctrlsSvc.getHeaderRowContainerCtrls()){const o=n.getHtmlElementForColumnHeader(e);o!=null&&(t=o)}return t}cloneItemIntoDummy(e,t){const n=e.cloneNode(!0);n.style.width="",n.style.position="static",n.style.left="";const o=document.createElement("div"),u=o.classList;["ag-header-cell","ag-header-group-cell"].some(g=>n.classList.contains(g))?(u.add("ag-header","ag-header-row"),o.style.position="static"):u.add("ag-row");let f=e.parentElement;for(;f;){if(["ag-header-row","ag-row"].some(v=>f.classList.contains(v))){for(let v=0;v<f.classList.length;v++){const w=f.classList[v];w!="ag-row-position-absolute"&&u.add(w)}break}f=f.parentElement}o.appendChild(n),t.appendChild(o)}},AutoWidthModule={moduleName:"AutoWidth",version:VERSION,beans:[AutoWidthCalculator]};function setColumnWidths(e,t,n=!0,o="api"){e.colResize?.setColumnWidths(t,!1,n,o)}var GroupResizeFeature=class extends BeanStub{constructor(e,t,n,o){super(),this.comp=e,this.eResize=t,this.pinned=n,this.columnGroup=o}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}const{horizontalResizeSvc:e,gos:t,colAutosize:n}=this.beans,o=e.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});this.addDestroyFunc(o),!t.get("suppressAutoSize")&&n&&this.addDestroyFunc(n.addColumnGroupResize(this.eResize,this.columnGroup,()=>this.resizeLeafColumnsToFit("uiColumnResized")))}onResizeStart(e){const{columnsToResize:t,resizeStartWidth:n,resizeRatios:o,groupAfterColumns:u,groupAfterStartWidth:d,groupAfterRatios:f}=this.getInitialValues(e);this.resizeCols=t,this.resizeStartWidth=n,this.resizeRatios=o,this.resizeTakeFromCols=u,this.resizeTakeFromStartWidth=d,this.resizeTakeFromRatios=f,this.toggleColumnResizing(!0)}onResizing(e,t,n="uiColumnResized"){const o=this.normaliseDragChange(t),u=this.resizeStartWidth+o;this.resizeColumnsFromLocalValues(u,n,e)}getInitialValues(e){const t=v=>v.reduce((w,S)=>w+S.getActualWidth(),0),n=(v,w)=>v.map(S=>S.getActualWidth()/w),o=this.getColumnsToResize(),u=t(o),d=n(o,u),f={columnsToResize:o,resizeStartWidth:u,resizeRatios:d};let g=null;if(e&&(g=this.beans.colGroupSvc?.getGroupAtDirection(this.columnGroup,"After")??null),g){const v=g.getDisplayedLeafColumns(),w=f.groupAfterColumns=v.filter(R=>R.isResizable()),S=f.groupAfterStartWidth=t(w);f.groupAfterRatios=n(w,S)}else f.groupAfterColumns=void 0,f.groupAfterStartWidth=void 0,f.groupAfterRatios=void 0;return f}resizeLeafColumnsToFit(e){const t=this.beans.autoWidthCalc.getPreferredWidthForColumnGroup(this.columnGroup),n=this.getInitialValues();t>n.resizeStartWidth&&this.resizeColumns(n,t,e,!0)}resizeColumnsFromLocalValues(e,t,n=!0){if(!this.resizeCols||!this.resizeRatios)return;const o={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols,groupAfterStartWidth:this.resizeTakeFromStartWidth,groupAfterRatios:this.resizeTakeFromRatios};this.resizeColumns(o,e,t,n)}resizeColumns(e,t,n,o=!0){const{columnsToResize:u,resizeStartWidth:d,resizeRatios:f,groupAfterColumns:g,groupAfterStartWidth:v,groupAfterRatios:w}=e,S=[];if(S.push({columns:u,ratios:f,width:t}),g){const R=t-d;S.push({columns:g,ratios:w,width:v-R})}this.beans.colResize?.resizeColumnSets({resizeSets:S,finished:o,source:n}),o&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.toggleCss("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}destroy(){super.destroy(),this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}},ResizeFeature=class extends BeanStub{constructor(e,t,n,o,u){super(),this.pinned=e,this.column=t,this.eResize=n,this.comp=o,this.ctrl=u}postConstruct(){const e=[];let t,n;const o=()=>{if(_setDisplayed(this.eResize,t),!t)return;const{horizontalResizeSvc:f,colAutosize:g}=this.beans,v=f.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});e.push(v),n&&g&&e.push(g.addColumnAutosizeListeners(this.eResize,this.column))},u=()=>{for(const f of e)f();e.length=0},d=()=>{const f=this.column.isResizable(),g=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(f!==t||g!==n)&&(t=f,n=g,u(),o())};d(),this.addDestroyFunc(u),this.ctrl.setRefreshFunction("resize",d)}onResizing(e,t){const{column:n,lastResizeAmount:o,resizeStartWidth:u,beans:d}=this,f=this.normaliseResizeAmount(t),g=u+f,v=[{key:n,newWidth:g}],{pinnedCols:w,ctrlsSvc:S,colResize:R}=d;if(this.column.getPinned()){const _=w?.leftWidth??0,F=w?.rightWidth??0,M=_getInnerWidth(S.getGridBodyCtrl().eBodyViewport)-50;if(_+F+(f-o)>M)return}this.lastResizeAmount=f,R?.setColumnWidths(v,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.column.resizing=e,this.comp.toggleCss("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const n=this.pinned!=="left",o=this.pinned==="right";return this.gos.get("enableRtl")?n&&(t*=-1):o&&(t*=-1),t}},ColumnResizeService=class extends BeanStub{constructor(){super(...arguments),this.beanName="colResize"}setColumnWidths(e,t,n,o){const u=[],{colModel:d,gos:f,visibleCols:g}=this.beans;for(const v of e){const w=d.getColDefCol(v.key)||d.getCol(v.key);if(!w)continue;if(u.push({width:v.newWidth,ratios:[1],columns:[w]}),f.get("colResizeDefault")==="shift"&&(t=!t),t){const R=g.getColAfter(w);if(!R)continue;const _=w.getActualWidth()-v.newWidth,F=R.getActualWidth()+_;u.push({width:F,ratios:[1],columns:[R]})}}u.length!==0&&this.resizeColumnSets({resizeSets:u,finished:n,source:o})}resizeColumnSets(e){const{resizeSets:t,finished:n,source:o}=e;if(!(!t||t.every(S=>checkMinAndMaxWidthsForSet(S)))){if(n){const S=t&&t.length>0?t[0].columns:null;dispatchColumnResizedEvent(this.eventSvc,S,n,o)}return}const d=[],f=[];for(const S of t){const{width:R,columns:_,ratios:F}=S,M={},I={};for(const H of _)f.push(H);let N=!0,B=0;for(;N;){if(B++,B>1e3){_error(31);break}N=!1;const H=[];let U=0,$=R;_.forEach((j,J)=>{if(I[j.getId()])$-=M[j.getId()];else{H.push(j);const se=F[J];U+=se}});const z=1/U;H.forEach((j,J)=>{const ie=J===H.length-1;let se;ie?se=$:(se=Math.round(F[J]*R*z),$-=se);const fe=j.getMinWidth(),de=j.getMaxWidth();se<fe?(se=fe,I[j.getId()]=!0,N=!0):de>0&&se>de&&(se=de,I[j.getId()]=!0,N=!0),M[j.getId()]=se})}for(const H of _){const U=M[H.getId()];H.getActualWidth()!==U&&(H.setActualWidth(U,o),d.push(H))}}const g=d.length>0;let v=[];if(g){const{colFlex:S,visibleCols:R,colViewport:_}=this.beans;v=S?.refreshFlexedColumns({resizingCols:f,skipSetLeft:!0})??[],R.setLeftValues(o),R.updateBodyWidths(),_.checkViewportColumns()}const w=f.concat(v);(g||n)&&dispatchColumnResizedEvent(this.eventSvc,w,n,o,v)}resizeHeader(e,t,n){if(!e.isResizable())return;const o=e.getActualWidth(),u=e.getMinWidth(),d=e.getMaxWidth(),f=Math.min(Math.max(o+t,u),d);this.setColumnWidths([{key:e,newWidth:f}],n,!0,"uiColumnResized")}createResizeFeature(e,t,n,o,u){return new ResizeFeature(e,t,n,o,u)}createGroupResizeFeature(e,t,n,o){return new GroupResizeFeature(e,t,n,o)}};function checkMinAndMaxWidthsForSet(e){const{columns:t,width:n}=e;let o=0,u=0,d=!0;for(const v of t){const w=v.getMinWidth();o+=w||0;const S=v.getMaxWidth();S>0?u+=S:d=!1}const f=n>=o,g=!d||n<=u;return f&&g}var ColumnResizeModule={moduleName:"ColumnResize",version:VERSION,beans:[ColumnResizeService],apiFunctions:{setColumnWidths},dependsOn:[HorizontalResizeModule,AutoWidthModule]},GroupWidthFeature=class extends BeanStub{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);for(const t of this.columnGroup.getLeafColumns())t.__addEventListener("widthChanged",e),t.__addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.__removeEventListener("widthChanged",e),t.__removeEventListener("visibleChanged",e)})}removeListenersOnChildrenColumns(){for(const e of this.removeChildListenersFuncs)e();this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.toggleCss("ag-hidden",e===0)}},HeaderGroupCellCtrl=class extends AbstractHeaderCellCtrl{constructor(){super(...arguments),this.onSuppressColMoveChange=()=>{!this.isAlive()||this.isSuppressMoving()?this.removeDragSource():this.dragSource||this.setDragSource(this.eGui)}}wireComp(e,t,n,o,u){const{column:d,beans:f}=this,{context:g,colNames:v,colHover:w,rangeSvc:S,colResize:R}=f;this.comp=e,u=setupCompBean(this,g,u),this.setGui(t,u),this.displayName=v.getDisplayNameForColumnGroup(d,"header"),this.refreshHeaderStyles(),this.addClasses(),this.setupMovingCss(u),this.setupExpandable(u),this.setupTooltip(),this.refreshAnnouncement(),this.setupAutoHeight({wrapperElement:o,compBean:u}),this.setupUserComp(),this.addHeaderMouseListeners(u,o),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();const _=this.rowCtrl.pinned,F=d.getProvidedColumnGroup().getLeafColumns();w?.createHoverFeature(u,F,t),S?.createRangeHighlightFeature(u,d,e),u.createManagedBean(new SetLeftFeature(d,t,f)),u.createManagedBean(new GroupWidthFeature(e,d)),R?this.resizeFeature=u.createManagedBean(R.createGroupResizeFeature(e,n,_,d)):e.setResizableDisplayed(!1),u.createManagedBean(new ManagedFocusFeature(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(u,F),this.addManagedEventListeners({cellSelectionChanged:()=>this.refreshAnnouncement()}),u.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(u),u.addDestroyFunc(()=>this.clearComponent())}getHeaderClassParams(){const{column:e,beans:t}=this,n=e.getDefinition();return _addGridCommonParams(t.gos,{colDef:n,columnGroup:e,floatingFilter:!1})}refreshMaxHeaderHeight(){const{gos:e,comp:t}=this,n=e.get("groupHeaderHeight");n!=null?n===0?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(n):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(const n of t)e.addManagedListeners(n,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,n)})}onLeafColumnHighlightChanged(e){const t=this.column.getDisplayedLeafColumns(),n=t[0]===e,o=_last(t)===e;if(!n&&!o)return;const u=e.getHighlighted(),d=!!this.rowCtrl.getHeaderCellCtrls().find(v=>v.column.isMoving());let f=!1,g=!1;if(d){const v=this.beans.gos.get("enableRtl"),w=u===1,S=u===0;n&&(v?g=w:f=S),o&&(v?f=S:g=w)}this.comp.toggleCss("ag-header-highlight-before",f),this.comp.toggleCss("ag-header-highlight-after",g)}resizeHeader(e,t){const{resizeFeature:n}=this;if(!n)return;const o=n.getInitialValues(t);n.resizeColumns(o,o.resizeStartWidth+e,"uiColumnResized",!0)}resizeLeafColumnsToFit(e){this.resizeFeature?.resizeLeafColumnsToFit(e)}setupUserComp(){const{colGroupSvc:e,userCompFactory:t,gos:n,enterpriseMenuFactory:o}=this.beans,u=this.column,d=u.getProvidedColumnGroup(),f=_addGridCommonParams(n,{displayName:this.displayName,columnGroup:u,setExpanded:v=>{e.setColumnGroupOpened(d,v,"gridInitializing")},setTooltip:(v,w)=>{n.assertModuleRegistered("Tooltip",3),this.setupTooltip(v,w)},showColumnMenu:(v,w)=>o?.showMenuAfterButtonClick(d,v,"columnMenu",w),showColumnMenuAfterMouseClick:(v,w)=>o?.showMenuAfterMouseEvent(d,v,"columnMenu",w),eGridHeader:this.eGui}),g=_getHeaderGroupCompDetails(t,f);g&&this.comp.setUserCompDetails(g)}addHeaderMouseListeners(e,t){const{column:n,comp:o,beans:{rangeSvc:u},gos:d}=this,f=S=>this.handleMouseOverChange(S.type==="mouseenter"),g=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",n.getProvidedColumnGroup()),v=S=>this.handleContextMenuMouseEvent(S,void 0,n.getProvidedColumnGroup());e.addManagedListeners(this.eGui,{mouseenter:f,mouseleave:f,click:g,contextmenu:v}),o.toggleCss("ag-header-group-cell-selectable",_getEnableColumnSelection(d));const w=u?.createHeaderGroupCellMouseListenerFeature(this.column,t);w&&this.createManagedBean(w)}handleMouseOverChange(e){this.eventSvc.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t){this.tooltipFeature=this.beans.tooltipSvc?.setupHeaderGroupTooltip(this.tooltipFeature,this,e,t)}setupExpandable(e){const t=this.column.getProvidedColumnGroup();this.refreshExpanded();const n=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:n,expandableChanged:n})}refreshExpanded(){const{column:e}=this;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0),this.refreshHeaderStyles()}addClasses(){const{column:e}=this,t=e.getColGroupDef(),n=_getHeaderClassesFromColDef(t,this.gos,null,e);e.isPadding()?(n.push("ag-header-group-cell-no-group"),e.getLeafColumns().every(u=>u.isSpanHeaderHeight())&&n.push("ag-header-span-height")):(n.push("ag-header-group-cell-with-group"),t?.wrapHeaderText&&n.push("ag-header-cell-wrap-text"));for(const o of n)this.comp.toggleCss(o,!0)}setupMovingCss(e){const{column:t}=this,o=t.getProvidedColumnGroup().getLeafColumns(),u=()=>this.comp.toggleCss("ag-header-cell-moving",t.isMoving());for(const d of o)e.addManagedListeners(d,{movingChanged:u});u()}onFocusIn(e){this.eGui.contains(e.relatedTarget)||(this.focusThis(),this.announceAriaDescription())}handleKeyDown(e){if(super.handleKeyDown(e),!this.getWrapperHasFocus())return;const{column:n,expandable:o,gos:u,beans:d}=this,f=_getEnableColumnSelection(u);if(e.key==KeyCode.ENTER){if(f&&!e.altKey)d.rangeSvc?.handleColumnSelection(n,e);else if(o){const g=!n.isExpanded();d.colGroupSvc.setColumnGroupOpened(n.getProvidedColumnGroup(),g,"uiColumnExpanded")}}}refreshAnnouncement(){let e;const{gos:t,column:n,beans:o}=this;if(_getEnableColumnSelection(t)){const d=this.getLocaleTextFunc(),f=o.rangeSvc?.isColumnInAnyRange(n);e=d("ariaColumnCellSelection",`Press CTRL+SPACE to ${f?"de":""}select all visible cells in this column group`)}this.ariaAnnouncement=e}announceAriaDescription(){const{beans:e,eGui:t,ariaAnnouncement:n}=this;!n||!t.contains(_getActiveDomElement(e))||e.ariaAnnounce?.announceValue(n,"columnHeader")}setDragSource(e){!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),e&&(this.dragSource=this.beans.colMoves?.setDragSourceForHeader(e,this.column,this.displayName)??null))}isSuppressMoving(){return this.gos.get("suppressMovableColumns")||this.column.getLeafColumns().some(e=>e.getColDef().suppressMovable||e.getColDef().lockPosition)}destroy(){this.tooltipFeature=this.destroyBean(this.tooltipFeature),super.destroy()}};function setColumnGroupOpened(e,t,n){e.colGroupSvc?.setColumnGroupOpened(t,n,"api")}function getColumnGroup(e,t,n){return e.colGroupSvc?.getColumnGroup(t,n)??null}function getProvidedColumnGroup(e,t){return e.colGroupSvc?.getProvidedColGroup(t)??null}function getDisplayNameForColumnGroup(e,t,n){return e.colNames.getDisplayNameForColumnGroup(t,n)||""}function getColumnGroupState(e){return e.colGroupSvc?.getColumnGroupState()??[]}function setColumnGroupState(e,t){e.colGroupSvc?.setColumnGroupState(t,"api")}function resetColumnGroupState(e){e.colGroupSvc?.resetColumnGroupState("api")}function getLeftDisplayedColumnGroups(e){return e.visibleCols.treeLeft}function getCenterDisplayedColumnGroups(e){return e.visibleCols.treeCenter}function getRightDisplayedColumnGroups(e){return e.visibleCols.treeRight}function getAllDisplayedColumnGroups(e){return e.visibleCols.getAllTrees()}var GroupInstanceIdCreator=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let n;return typeof t!="number"?n=0:n=t+1,this.existingIds[e]=n,n}};function _removeAllFromUnorderedArray(e,t){for(let n=0;n<t.length;n++){const o=e.indexOf(t[n]);o>=0&&(e[o]=e[e.length-1],e.pop())}}var VisibleColsService=class extends BeanStub{constructor(){super(...arguments),this.beanName="visibleCols",this.colsAndGroupsMap={},this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.headerGroupRowCount=0,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.isBodyWidthDirty=!0}refresh(e,t=!1){const{colFlex:n,colModel:o,colGroupSvc:u,colViewport:d,selectionColSvc:f}=this.beans;t||this.buildTrees(o,u),u?.updateOpenClosedVisibility(),this.leftCols=pickDisplayedCols(this.treeLeft),this.centerCols=pickDisplayedCols(this.treeCenter),this.rightCols=pickDisplayedCols(this.treeRight),f?.refreshVisibility(this.leftCols,this.centerCols,this.rightCols),this.joinColsAriaOrder(o),this.joinCols(),this.headerGroupRowCount=this.getHeaderRowCount(),this.setLeftValues(e),this.autoHeightCols=this.allCols.filter(g=>g.isAutoHeight()),n?.refreshFlexedColumns(),this.updateBodyWidths(),this.setFirstRightAndLastLeftPinned(o,this.leftCols,this.rightCols,e),d.checkViewportColumns(!1),this.eventSvc.dispatchEvent({type:"displayedColumnsChanged",source:e})}getHeaderRowCount(){if(!this.gos.get("hidePaddedHeaderRows"))return this.beans.colModel.cols.treeDepth;let e=0;for(const t of this.allCols){let n=t.getParent();for(;n;){if(!n.isPadding()){const o=n.getProvidedColumnGroup().getLevel()+1;o>e&&(e=o);break}n=n.getParent()}}return e}updateBodyWidths(){const e=getWidthOfColsInList(this.centerCols),t=getWidthOfColsInList(this.leftCols),n=getWidthOfColsInList(this.rightCols);this.isBodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==n)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=n,this.eventSvc.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventSvc.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e,t,n,o){let u,d;this.gos.get("enableRtl")?(u=t?t[0]:null,d=n?_last(n):null):(u=t?_last(t):null,d=n?n[0]:null);for(const f of e.getCols())f.setLastLeftPinned(f===u,o),f.setFirstRightPinned(f===d,o)}buildTrees(e,t){const n=e.getColsToShow(),o=n.filter(v=>v.getPinned()=="left"),u=n.filter(v=>v.getPinned()=="right"),d=n.filter(v=>v.getPinned()!="left"&&v.getPinned()!="right"),f=new GroupInstanceIdCreator,g=v=>t?t.createColumnGroups(v):v.columns;this.treeLeft=g({columns:o,idCreator:f,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=g({columns:u,idCreator:f,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=g({columns:d,idCreator:f,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.leftCols=[],this.rightCols=[],this.centerCols=[],this.allCols=[],this.ariaOrderColumns=[]}joinColsAriaOrder(e){const t=e.getCols(),n=[],o=[],u=[];for(const d of t){const f=d.getPinned();f?f===!0||f==="left"?n.push(d):u.push(d):o.push(d)}this.ariaOrderColumns=n.concat(o).concat(u)}getAriaColIndex(e){let t;return isColumnGroup(e)?t=e.getLeafColumns()[0]:t=e,this.ariaOrderColumns.indexOf(t)+1}setLeftValuesOfGroups(){for(const e of[this.treeLeft,this.treeRight,this.treeCenter])for(const t of e)isColumnGroup(t)&&t.checkLeft()}setLeftValuesOfCols(e){const{colModel:t}=this.beans;if(!t.getColDefCols())return;const o=t.getCols().slice(0),u=this.gos.get("enableRtl");for(const d of[this.leftCols,this.rightCols,this.centerCols]){if(u){let f=getWidthOfColsInList(d);for(const g of d)f-=g.getActualWidth(),g.setLeft(f,e)}else{let f=0;for(const g of d)g.setLeft(f,e),f+=g.getActualWidth()}_removeAllFromUnorderedArray(o,d)}for(const d of o)d.setLeft(null,e)}joinCols(){this.gos.get("enableRtl")?this.allCols=this.rightCols.concat(this.centerCols).concat(this.leftCols):this.allCols=this.leftCols.concat(this.centerCols).concat(this.rightCols)}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}isColDisplayed(e){return this.allCols.indexOf(e)>=0}getLeftColsForRow(e){const{leftCols:t,beans:{colModel:n}}=this;return n.colSpanActive?this.getColsForRow(e,t):t}getRightColsForRow(e){const{rightCols:t,beans:{colModel:n}}=this;return n.colSpanActive?this.getColsForRow(e,t):t}getColsForRow(e,t,n,o){const u=[];let d=null;for(let f=0;f<t.length;f++){const g=t[f],v=t.length-f,w=Math.min(g.getColSpan(e),v),S=[g];if(w>1){const _=w-1;for(let F=1;F<=_;F++)S.push(t[f+F]);f+=_}let R;if(n){R=!1;for(const _ of S)n(_)&&(R=!0)}else R=!0;R&&(u.length===0&&d&&(o&&o(g))&&u.push(d),u.push(g)),d=g}return u}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getColBefore(e){const t=this.allCols,n=t.indexOf(e);return n>0?t[n-1]:null}isPinningLeft(){return this.leftCols.length>0}isPinningRight(){return this.rightCols.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const e=t=>{this.colsAndGroupsMap[t.getUniqueId()]=t};depthFirstAllColumnTreeSearch(this.treeCenter,!1,e),depthFirstAllColumnTreeSearch(this.treeLeft,!1,e),depthFirstAllColumnTreeSearch(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}getFirstColumn(){const e=this.gos.get("enableRtl"),t=["leftCols","centerCols","rightCols"];e&&t.reverse();for(let n=0;n<t.length;n++){const o=this[t[n]];if(o.length)return e?_last(o):o[0]}return null}getColAfter(e){const t=this.allCols,n=t.indexOf(e);return n<t.length-1?t[n+1]:null}getColsLeftWidth(){return getWidthOfColsInList(this.leftCols)}getDisplayedColumnsRightWidth(){return getWidthOfColsInList(this.rightCols)}isColAtEdge(e,t){const n=this.allCols;if(!n.length)return!1;const o=t==="first";let u;if(isColumnGroup(e)){const d=e.getDisplayedLeafColumns();if(!d.length)return!1;u=o?d[0]:_last(d)}else u=e;return(o?n[0]:_last(n))===u}};function depthFirstAllColumnTreeSearch(e,t,n){if(e)for(let o=0;o<e.length;o++){const u=e[o];if(isColumnGroup(u)){const d=t?u.getDisplayedChildren():u.getChildren();depthFirstAllColumnTreeSearch(d,t,n)}n(u)}}function pickDisplayedCols(e){const t=[];return depthFirstAllColumnTreeSearch(e,!0,n=>{isColumn(n)&&t.push(n)}),t}var ColumnGroupService=class extends BeanStub{constructor(){super(...arguments),this.beanName="colGroupSvc"}getColumnGroupState(){const e=[],t=this.beans.colModel.getColTree();return depthFirstOriginalTreeSearch(null,t,n=>{isProvidedColumnGroup(n)&&e.push({groupId:n.getGroupId(),open:n.isExpanded()})}),e}resetColumnGroupState(e){const t=this.beans.colModel.getColDefColTree();if(!t)return;const n=[];depthFirstOriginalTreeSearch(null,t,o=>{if(isProvidedColumnGroup(o)){const u=o.getColGroupDef(),d={groupId:o.getGroupId(),open:u?u.openByDefault:void 0};n.push(d)}}),this.setColumnGroupState(n,e)}setColumnGroupState(e,t){const{colModel:n,colAnimation:o,visibleCols:u,eventSvc:d}=this.beans;if(!n.getColTree().length)return;o?.start();const g=[];for(const v of e){const w=v.groupId,S=v.open,R=this.getProvidedColGroup(w);R&&R.isExpanded()!==S&&(R.setExpanded(S),g.push(R))}u.refresh(t,!0),g.length&&d.dispatchEvent({type:"columnGroupOpened",columnGroup:g.length===1?g[0]:void 0,columnGroups:g}),o?.finish()}setColumnGroupOpened(e,t,n){let o;isProvidedColumnGroup(e)?o=e.getId():o=e||"",this.setColumnGroupState([{groupId:o,open:t}],n)}getProvidedColGroup(e){let t=null;return depthFirstOriginalTreeSearch(null,this.beans.colModel.getColTree(),n=>{isProvidedColumnGroup(n)&&n.getId()===e&&(t=n)}),t}getGroupAtDirection(e,t){const n=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),o=e.getDisplayedLeafColumns(),u=t==="After"?_last(o):o[0],d=`getCol${t}`;for(;;){const f=this.beans.visibleCols[d](u);if(!f)return null;const g=this.getColGroupAtLevel(f,n);if(g!==e)return g}}getColGroupAtLevel(e,t){let n=e.getParent(),o,u;for(;o=n.getProvidedColumnGroup().getLevel(),u=n.getPaddingLevel(),!(o+u<=t);)n=n.getParent();return n}updateOpenClosedVisibility(){const e=this.beans.visibleCols.getAllTrees();depthFirstAllColumnTreeSearch(e,!1,t=>{isColumnGroup(t)&&t.calculateDisplayedColumns()})}getColumnGroup(e,t){if(!e)return null;if(isColumnGroup(e))return e;const n=this.beans.visibleCols.getAllTrees(),o=typeof t=="number";let u=null;return depthFirstAllColumnTreeSearch(n,!1,d=>{if(isColumnGroup(d)){const f=d;let g;o?g=e===f.getGroupId()&&t===f.getPartId():g=e===f.getGroupId(),g&&(u=f)}}),u}createColumnGroups(e){const{columns:t,idCreator:n,pinned:o,oldDisplayedGroups:u,isStandaloneStructure:d}=e,f=this.mapOldGroupsById(u),g=[];let v=t;for(;v.length;){const w=v;v=[];let S=0;const R=_=>{const F=S;S=_;const M=w[F],N=(isColumnGroup(M)?M.getProvidedColumnGroup():M).getOriginalParent();if(N==null){for(let H=F;H<_;H++)g.push(w[H]);return}const B=this.createColumnGroup(N,n,f,o,d);for(let H=F;H<_;H++)B.addChild(w[H]);v.push(B)};for(let _=1;_<w.length;_++){const F=w[_],I=(isColumnGroup(F)?F.getProvidedColumnGroup():F).getOriginalParent(),N=w[S],H=(isColumnGroup(N)?N.getProvidedColumnGroup():N).getOriginalParent();I!==H&&R(_)}S<w.length&&R(w.length)}return d||this.setupParentsIntoCols(g,null),g}createProvidedColumnGroup(e,t,n,o,u,d,f){const g=u.getUniqueKey(t.groupId||null,null),v=createMergedColGroupDef(this.beans,t,g),w=new AgProvidedColumnGroup(v,g,!1,n);this.createBean(w);const S=this.findExistingGroup(t,d);S&&d.splice(S.idx,1);const R=S?.group;R&&w.setExpanded(R.isExpanded());const _=_recursivelyCreateColumns(this.beans,v.children,n+1,e,o,u,d,f);return w.setChildren(_),w}balanceColumnTree(e,t,n,o){const u=[];for(let d=0;d<e.length;d++){const f=e[d];if(isProvidedColumnGroup(f)){const g=f,v=this.balanceColumnTree(g.getChildren(),t+1,n,o);g.setChildren(v),u.push(g)}else{let g,v;for(let w=t;w<n;w++){const S=o.getUniqueKey(null,null),R=createMergedColGroupDef(this.beans,null,S),_=new AgProvidedColumnGroup(R,S,!0,w);this.createBean(_),v&&v.setChildren([_]),v=_,g||(g=v)}if(g&&v)if(u.push(g),e.some(S=>isProvidedColumnGroup(S))){v.setChildren([f]);continue}else{v.setChildren(e);break}u.push(f)}}return u}findDepth(e){let t=0,n=e;for(;n?.[0]&&isProvidedColumnGroup(n[0]);)t++,n=n[0].getChildren();return t}findMaxDepth(e,t){let n=t;for(let o=0;o<e.length;o++){const u=e[o];if(isProvidedColumnGroup(u)){const d=u,f=this.findMaxDepth(d.getChildren(),t+1);n<f&&(n=f)}}return n}balanceTreeForAutoCols(e,t){const n=[];for(const o of e){let u=o;for(let d=t-1;d>=0;d--){const f=new AgProvidedColumnGroup(null,`FAKE_PATH_${o.getId()}_${d}`,!0,d);this.createBean(f),f.setChildren([u]),u.originalParent=f,u=f}t===0&&(o.originalParent=null),n.push(u)}return n}findExistingGroup(e,t){if(e.groupId!=null)for(let o=0;o<t.length;o++){const u=t[o];if(u.getColGroupDef()&&u.getId()===e.groupId)return{idx:o,group:u}}}createColumnGroup(e,t,n,o,u){const d=e.getGroupId(),f=t.getInstanceIdForKey(d),g=createUniqueColumnGroupId(d,f);let v=n[g];return v&&v.getProvidedColumnGroup()!==e&&(v=null),_exists(v)?v.reset():(v=new AgColumnGroup(e,d,f,o),u||this.createBean(v)),v}mapOldGroupsById(e){const t={},n=o=>{for(const u of o)if(isColumnGroup(u)){const d=u;t[u.getUniqueId()]=d,n(d.getChildren())}};return e&&n(e),t}setupParentsIntoCols(e,t){for(const n of e??[])if(n.parent!==t&&(this.beans.colViewport.colsWithinViewportHash=""),n.parent=t,isColumnGroup(n)){const o=n;this.setupParentsIntoCols(o.getChildren(),o)}}},ColumnGroupModule={moduleName:"ColumnGroup",version:VERSION,dynamicBeans:{headerGroupCellCtrl:HeaderGroupCellCtrl},beans:[ColumnGroupService],apiFunctions:{getAllDisplayedColumnGroups,getCenterDisplayedColumnGroups,getColumnGroup,getColumnGroupState,getDisplayNameForColumnGroup,getLeftDisplayedColumnGroups,getProvidedColumnGroup,getRightDisplayedColumnGroups,resetColumnGroupState,setColumnGroupOpened,setColumnGroupState}},ColumnModel=class extends BeanStub{constructor(){super(...arguments),this.beanName="colModel",this.pivotMode=!1,this.ready=!1,this.changeEventsDispatching=!1}postConstruct(){this.pivotMode=this.gos.get("pivotMode"),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents","rowNumbers","hidePaddedHeaderRows"],e=>this.refreshAll(_convertColumnEventSourceType(e.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],this.recreateColumnDefs.bind(this)),this.addManagedPropertyListener("pivotMode",e=>this.setPivotMode(this.gos.get("pivotMode"),_convertColumnEventSourceType(e.source)))}createColsFromColDefs(e){const{beans:t}=this,{valueCache:n,colAutosize:o,rowGroupColsSvc:u,pivotColsSvc:d,valueColsSvc:f,visibleCols:g,eventSvc:v,groupHierarchyColSvc:w}=t,S=this.colDefs?_compareColumnStatesAndDispatchEvents(t,e):void 0;n?.expire();const R=this.colDefCols?.list,_=this.colDefCols?.tree,F=_createColumnTree(t,this.colDefs,!0,_,e);_destroyColumnTree(t,this.colDefCols?.tree,F.columnTree);const M=F.columnTree,I=F.treeDepth,N=_getColumnsFromTree(M),B={};for(const H of N)B[H.getId()]=H;this.colDefCols={tree:M,treeDepth:I,list:N,map:B},this.createColumnsForService([w],this.colDefCols,e),u?.extractCols(e,R),d?.extractCols(e,R),f?.extractCols(e,R),this.ready=!0,this.changeEventsDispatching=!0,this.refreshCols(!0,e),this.changeEventsDispatching=!1,g.refresh(e),v.dispatchEvent({type:"columnEverythingChanged",source:e}),S&&(this.changeEventsDispatching=!0,S(),this.changeEventsDispatching=!1),v.dispatchEvent({type:"newColumnsLoaded",source:e}),e==="gridInitializing"&&o?.applyAutosizeStrategy()}refreshCols(e,t){if(!this.colDefCols)return;const n=this.cols?.tree;this.saveColOrder();const{autoColSvc:o,selectionColSvc:u,rowNumbersSvc:d,quickFilter:f,pivotResultCols:g,showRowGroupCols:v,rowAutoHeight:w,visibleCols:S,colViewport:R,eventSvc:_,formula:F}=this.beans,M=this.selectCols(g,this.colDefCols);F?.setFormulasActive(M),this.createColumnsForService([o,u,d],M,t);const I=_shouldMaintainColumnOrder(this.gos,this.showingPivotResult);(!e||I)&&this.restoreColOrder(M),this.positionLockedCols(M),v?.refresh(),f?.refreshCols(),this.setColSpanActive(),w?.setAutoHeightActive(M),S.clear(),R.clear(),_areEqual(n,this.cols.tree)||_.dispatchEvent({type:"gridColumnsChanged"})}createColumnsForService(e,t,n){for(const o of e)o&&(o.createColumns(t,u=>{this.lastOrder=u(this.lastOrder),this.lastPivotOrder=u(this.lastPivotOrder)},n),o.addColumns(t))}selectCols(e,t){const n=e?.getPivotResultCols()??null;this.showingPivotResult=n!=null;const{map:o,list:u,tree:d,treeDepth:f}=n??t;return this.cols={list:u.slice(),map:{...o},tree:d.slice(),treeDepth:f},n&&(n.list.some(v=>this.cols?.map[v.getColId()]!==void 0)||(this.lastPivotOrder=null)),this.cols}getColsToShow(){if(!this.cols)return[];const{beans:e,showingPivotResult:t,cols:n}=this,{valueColsSvc:o,selectionColSvc:u}=e,d=this.isPivotMode()&&!t,f=u?.isSelectionColumnEnabled(),g=_isRowNumbers(e),v=o?.columns;return n.list.filter(S=>{const R=isColumnGroupAutoCol(S);if(d){const _=v?.includes(S);return R||_||f&&isColumnSelectionCol(S)||g&&isRowNumberCol(S)}else return R||S.isVisible()})}refreshAll(e){this.ready&&(this.refreshCols(!1,e),this.beans.visibleCols.refresh(e))}setColsVisible(e,t=!1,n){_applyColumnState(this.beans,{state:e.map(o=>({colId:typeof o=="string"?o:o.getColId(),hide:!t}))},n)}restoreColOrder(e){const t=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!t)return;const n=t.filter(R=>e.map[R.getId()]!=null);if(n.length===0)return;if(n.length===e.list.length){e.list=n;return}const o=R=>{const _=R.getOriginalParent();return _?_.getChildren().length>1?!0:o(_):!1};if(!n.some(R=>o(R))){const R=new Set(n);for(const _ of e.list)R.has(_)||n.push(_);e.list=n;return}const u=new Map;for(let R=0;R<n.length;R++){const _=n[R];u.set(_,R)}const d=e.list.filter(R=>!u.has(R));if(d.length===0){e.list=n;return}const f=(R,_)=>{const F=_?_.getOriginalParent():R.getOriginalParent();if(!F)return null;let M=null,I=null;for(const N of F.getChildren())if(!(N===_||N===R)){if(N instanceof AgColumn){const B=u.get(N);if(B==null)continue;(M==null||M<B)&&(M=B,I=N);continue}N.forEachLeafColumn(B=>{const H=u.get(B);H!=null&&(M==null||M<H)&&(M=H,I=B)})}return I??f(R,F)},g=[],v=new Map;for(const R of d){const _=f(R,null);if(_==null){g.push(R);continue}const F=v.get(_);F===void 0?v.set(_,R):Array.isArray(F)?F.push(R):v.set(_,[F,R])}const w=new Array(e.list.length);let S=w.length-1;for(let R=g.length-1;R>=0;R--)w[S--]=g[R];for(let R=n.length-1;R>=0;R--){const _=n[R],F=v.get(_);if(F)if(Array.isArray(F))for(let M=F.length-1;M>=0;M--){const I=F[M];w[S--]=I}else w[S--]=F;w[S--]=_}e.list=w}positionLockedCols(e){e.list=placeLockedColumns(e.list,this.gos)}saveColOrder(){this.showingPivotResult?this.lastPivotOrder=this.cols?.list??null:this.lastOrder=this.cols?.list??null}getColumnDefs(e){return this.colDefCols&&this.beans.colDefFactory?.getColumnDefs(this.colDefCols.list,this.showingPivotResult,this.lastOrder,this.cols?.list??[],e)}setColSpanActive(){this.colSpanActive=!!this.cols?.list.some(e=>e.getColDef().colSpan!=null)}isPivotMode(){return this.pivotMode}setPivotMode(e,t){if(e===this.pivotMode||(this.pivotMode=e,!this.ready))return;this.refreshCols(!1,t);const{visibleCols:n,eventSvc:o}=this.beans;n.refresh(t),o.dispatchEvent({type:"columnPivotModeChanged"})}isPivotActive(){const e=this.beans.pivotColsSvc?.columns;return this.pivotMode&&!!e?.length}recreateColumnDefs(e){if(!this.cols)return;this.beans.autoColSvc?.updateColumns(e);const t=_convertColumnEventSourceType(e.source);this.createColsFromColDefs(t)}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){_destroyColumnTree(this.beans,this.colDefCols?.tree),super.destroy()}getColTree(){return this.cols?.tree??[]}getColDefColTree(){return this.colDefCols?.tree??[]}getColDefCols(){return this.colDefCols?.list??null}getCols(){return this.cols?.list??[]}forAllCols(e){const{pivotResultCols:t,autoColSvc:n,selectionColSvc:o,groupHierarchyColSvc:u}=this.beans;_forAll(this.colDefCols?.list,e)||_forAll(n?.columns?.list,e)||_forAll(o?.columns?.list,e)||_forAll(u?.columns?.list,e)||_forAll(t?.getPivotResultCols()?.list,e)}getColsForKeys(e){return e?e.map(t=>this.getCol(t)).filter(t=>t!=null):[]}getColDefCol(e){return this.colDefCols?.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return e==null?null:this.getColFromCollection(e,this.cols)}getColById(e){return this.cols?.map[e]??null}getColFromCollection(e,t){if(t==null)return null;const{map:n,list:o}=t;if(typeof e=="string"&&n[e])return n[e];for(let g=0;g<o.length;g++)if(_columnsMatch(o[g],e))return o[g];const{autoColSvc:u,selectionColSvc:d,groupHierarchyColSvc:f}=this.beans;return u?.getColumn(e)??d?.getColumn(e)??f?.getColumn(e)??null}},SkeletonCellRendererElement={tag:"div",cls:"ag-skeleton-container"},SkeletonCellRenderer$1=class extends Component{constructor(){super(SkeletonCellRendererElement)}init(t){const n=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",n),this.addDestroyFunc(()=>_setAriaLabelledBy(t.eParentOfValue)),_setAriaLabelledBy(t.eParentOfValue,n),t.deferRender?this.setupLoading(t):t.node.failedLoad?this.setupFailed():this.setupLoading(t)}setupFailed(){const t=this.getLocaleTextFunc();this.getGui().textContent=t("loadingError","ERR");const n=t("ariaSkeletonCellLoadingFailed","Row failed to load");_setAriaLabel(this.getGui(),n)}setupLoading(t){const n=_createElement({tag:"div",cls:"ag-skeleton-effect"}),o=t.node.rowIndex;if(o!=null){const f=75+25*(o%2===0?Math.sin(o):Math.cos(o));n.style.width=`${f}%`}this.getGui().appendChild(n);const u=this.getLocaleTextFunc(),d=t.deferRender?u("ariaDeferSkeletonCellLoading","Cell is loading"):u("ariaSkeletonCellLoading","Row data is loading");_setAriaLabel(this.getGui(),d)}refresh(t){return!1}},CheckboxCellRendererModule={moduleName:"CheckboxCellRenderer",version:VERSION,userComponents:{agCheckboxCellRenderer:CheckboxCellRenderer}},SkeletonCellRendererModule={moduleName:"SkeletonCellRenderer",version:VERSION,userComponents:{agSkeletonCellRenderer:SkeletonCellRenderer$1}};function getColumnDef(e,t){const n=e.colModel.getColDefCol(t);return n?n.getColDef():null}function getColumnDefs(e){return e.colModel.getColumnDefs(!0)}function getDisplayNameForColumn(e,t,n){return e.colNames.getDisplayNameForColumn(t,n)||""}function getColumn(e,t){return e.colModel.getColDefCol(t)}function getColumns(e){return e.colModel.getColDefCols()}function applyColumnState(e,t){return _applyColumnState(e,t,"api")}function getColumnState(e){return _getColumnState(e)}function resetColumnState(e){_resetColumnState(e,"api")}function isPinning(e){return e.visibleCols.isPinningLeft()||e.visibleCols.isPinningRight()}function isPinningLeft(e){return e.visibleCols.isPinningLeft()}function isPinningRight(e){return e.visibleCols.isPinningRight()}function getDisplayedColAfter(e,t){return e.visibleCols.getColAfter(t)}function getDisplayedColBefore(e,t){return e.visibleCols.getColBefore(t)}function setColumnsVisible(e,t,n){e.colModel.setColsVisible(t,n,"api")}function setColumnsPinned(e,t,n){e.pinnedCols?.setColsPinned(t,n,"api")}function getAllGridColumns(e){return e.colModel.getCols()}function getDisplayedLeftColumns(e){return e.visibleCols.leftCols}function getDisplayedCenterColumns(e){return e.visibleCols.centerCols}function getDisplayedRightColumns(e){return e.visibleCols.rightCols}function getAllDisplayedColumns(e){return e.visibleCols.allCols}function getAllDisplayedVirtualColumns(e){return e.colViewport.getViewportColumns()}function _deepCloneDefinition(e,t){if(!e)return;const n=e,o={};for(const u of Object.keys(n)){if(t&&t.indexOf(u)>=0||SKIP_JS_BUILTINS.has(u))continue;const d=n[u];typeof d=="object"&&d!==null&&d.constructor===Object?o[u]=_deepCloneDefinition(d):o[u]=d}return o}var ColumnDefFactory=class extends BeanStub{constructor(){super(...arguments),this.beanName="colDefFactory"}wireBeans(e){this.rowGroupColsSvc=e.rowGroupColsSvc,this.pivotColsSvc=e.pivotColsSvc}getColumnDefs(e,t,n,o,u=!1){const d=e.slice();t?d.sort((v,w)=>n.indexOf(v)-n.indexOf(w)):(n||u)&&d.sort((v,w)=>o.indexOf(v)-o.indexOf(w));const f=this.rowGroupColsSvc?.columns,g=this.pivotColsSvc?.columns;return this.buildColumnDefs(d,f,g)}buildColumnDefs(e,t=[],n=[]){const o=[],u={};for(const d of e){const f=this.createDefFromColumn(d,t,n);let g=!0,v=f,w=d.getOriginalParent(),S=null;for(;w;){let R=null;if(w.isPadding()){w=w.getOriginalParent();continue}const _=u[w.getGroupId()];if(_){_.children.push(v),g=!1;break}if(R=this.createDefFromGroup(w),R&&(R.children=[v],u[R.groupId]=R,v=R,w=w.getOriginalParent()),w!=null&&S===w){g=!1;break}S=w}g&&o.push(v)}return o}createDefFromGroup(e){const t=_deepCloneDefinition(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,n){const o=_deepCloneDefinition(e.getColDef());return o.colId=e.getColId(),o.width=e.getActualWidth(),o.rowGroup=e.isRowGroupActive(),o.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,o.pivot=e.isPivotActive(),o.pivotIndex=e.isPivotActive()?n.indexOf(e):null,o.aggFunc=e.isValueActive()?e.getAggFunc():null,o.hide=e.isVisible()?void 0:!0,o.pinned=e.isPinned()?e.getPinned():null,o.sort=e.getSortDef(),o.sortIndex=e.getSortIndex()!=null?e.getSortIndex():null,o}},ColumnFlexService=class extends BeanStub{constructor(){super(...arguments),this.beanName="colFlex",this.columnsHidden=!1}refreshFlexedColumns(e={}){const t=e.source??"flex";e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth);const n=this.flexViewportWidth,{visibleCols:o,colDelayRenderSvc:u}=this.beans,d=o.centerCols;let f=-1;if(e.resizingCols){const I=new Set(e.resizingCols);for(let N=d.length-1;N>=0;N--)if(I.has(d[N])){f=N;break}}let g=!1;const v=d.map((I,N)=>{const B=I.getFlex(),H=B!=null&&B>0&&N>f;return g||(g=H),{col:I,isFlex:H,flex:Math.max(0,B??0),initialSize:I.getActualWidth(),min:I.getMinWidth(),max:I.getMaxWidth(),targetSize:0}});if(g?(u?.hideColumns("colFlex"),this.columnsHidden=!0):this.columnsHidden&&this.revealColumns(u),!n||!g)return[];let w=v.length,S=v.reduce((I,N)=>I+N.flex,0),R=n;const _=(I,N)=>{I.frozenSize=N,I.col.setActualWidth(N,t),R-=N,S-=I.flex,w-=1},F=I=>I.frozenSize!=null;for(const I of v)I.isFlex||_(I,I.initialSize);for(;w>0;){const I=Math.round(S<1?R*S:R);let N,B=0,H=0;for(const z of v){if(F(z))continue;N=z,H+=I*(z.flex/S);const j=H-B,J=Math.round(j);z.targetSize=J,B+=J}N&&(N.targetSize+=I-B);let U=0;for(const z of v){if(F(z))continue;const j=z.targetSize,J=Math.min(Math.max(j,z.min),z.max);U+=J-j,z.violationType=J===j?void 0:J<j?"max":"min",z.targetSize=J}const $=U===0?"all":U>0?"min":"max";for(const z of v)F(z)||($==="all"||z.violationType===$)&&_(z,z.targetSize)}e.skipSetLeft||o.setLeftValues(t),e.updateBodyWidths&&o.updateBodyWidths();const M=v.filter(I=>I.isFlex&&!I.violationType).map(I=>I.col);if(e.fireResizedEvent){const I=v.filter(B=>B.initialSize!==B.frozenSize).map(B=>B.col),N=v.filter(B=>B.flex).map(B=>B.col);dispatchColumnResizedEvent(this.eventSvc,I,!0,t,N)}return this.revealColumns(u),M}revealColumns(e){this.columnsHidden&&(e?.revealColumns("colFlex"),this.columnsHidden=!1)}initCol(e){const{flex:t,initialFlex:n}=e.colDef;t!==void 0?e.flex=t:n!==void 0&&(e.flex=n)}setColFlex(e,t){e.flex=t??null,e.dispatchStateUpdatedEvent("flex")}},_parseBigIntOrNull=e=>{if(typeof e=="bigint")return e;let t;if(typeof e=="number")t=e;else if(typeof e=="string"&&(t=e.trim(),t===""||(t.endsWith("n")&&(t=t.slice(0,-1)),!/^[+-]?\d+$/.test(t))))return null;if(t==null)return null;try{return BigInt(t)}catch{return null}},DATE_TIME_SEPARATOR="T",DATE_TIME_SEPARATOR_REGEXP=new RegExp(`[${DATE_TIME_SEPARATOR} ]`),DATE_TIME_REGEXP=new RegExp(`^\\d{4}-\\d{2}-\\d{2}(${DATE_TIME_SEPARATOR}\\d{2}:\\d{2}:\\d{2}\\D?)?`);function _padStartWidthZeros(e,t){return e.toString().padStart(t,"0")}function _serialiseDate(e,t=!0,n=DATE_TIME_SEPARATOR){if(!e)return null;let o=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(u=>_padStartWidthZeros(u,2)).join("-");return t&&(o+=n+[e.getHours(),e.getMinutes(),e.getSeconds()].map(u=>_padStartWidthZeros(u,2)).join(":")),o}function _getDateParts(e,t=!0){return e?t?[String(e.getFullYear()),String(e.getMonth()+1),_padStartWidthZeros(e.getDate(),2),_padStartWidthZeros(e.getHours(),2),`:${_padStartWidthZeros(e.getMinutes(),2)}`,`:${_padStartWidthZeros(e.getSeconds(),2)}`]:[e.getFullYear(),e.getMonth()+1,_padStartWidthZeros(e.getDate(),2)].map(String):null}var calculateOrdinal=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"},MONTHS=["January","February","March","April","May","June","July","August","September","October","November","December"],DAYS=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function _dateToFormattedString(e,t){if(t==null)return _serialiseDate(e,!1);const n=_padStartWidthZeros(e.getFullYear(),4),o={YYYY:()=>n.slice(n.length-4,n.length),YY:()=>n.slice(n.length-2,n.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>MONTHS[e.getMonth()],MMM:()=>MONTHS[e.getMonth()].slice(0,3),MM:()=>_padStartWidthZeros(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${calculateOrdinal(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${calculateOrdinal(e.getDate())}`,DD:()=>_padStartWidthZeros(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>DAYS[e.getDay()],ddd:()=>DAYS[e.getDay()].slice(0,3),dd:()=>DAYS[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${calculateOrdinal(e.getDay())}`,d:()=>`${e.getDay()}`},u=new RegExp(Object.keys(o).join("|"),"g");return t.replace(u,d=>d in o?o[d]():d)}function _isValidDate(e,t=!1){return!!_parseDateTimeFromString(e,t)}function _isValidDateTime(e){return _isValidDate(e,!0)}function _parseDateTimeFromString(e,t=!1,n){if(!e||!n&&!DATE_TIME_REGEXP.test(e))return null;const[o,u]=e.split(DATE_TIME_SEPARATOR_REGEXP);if(!o)return null;const d=o.split("-").map(F=>Number.parseInt(F,10));if(d.filter(F=>!isNaN(F)).length!==3)return null;const[f,g,v]=d,w=new Date(f,g-1,v);if(w.getFullYear()!==f||w.getMonth()!==g-1||w.getDate()!==v||!u&&t)return null;if(!u||u==="00:00:00")return w;const[S,R,_]=u.split(":").map(F=>Number.parseInt(F,10));if(S>=0&&S<24)w.setHours(S);else if(t)return null;if(R>=0&&R<60)w.setMinutes(R);else if(t)return null;if(_>=0&&_<60)w.setSeconds(_);else if(t)return null;return w}function _getValueUsingField(e,t,n){if(!t||!e)return;if(!n)return e[t];const o=t.split(".");let u=e;for(let d=0;d<o.length;d++){if(u==null)return;u=u[o[d]]}return u}var SORTED_CELL_DATA_TYPES_FOR_MATCHING=["dateTimeString","dateString","text","number","bigint","boolean","date"],DataTypeService=class extends BeanStub{constructor(){super(...arguments),this.beanName="dataTypeSvc",this.dataTypeDefinitions={},this.isPendingInference=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[],this.columnDefinitionPropsPerDataType={number(){return{cellEditor:"agNumberCellEditor"}},bigint({filterModuleBean:e}){return e?{cellEditor:"agTextCellEditor"}:{cellEditor:"agTextCellEditor",comparator:{default:bigintComparator,absolute:bigintAbsoluteComparator}}},boolean(){return{cellEditor:"agCheckboxCellEditor",cellRenderer:"agCheckboxCellRenderer",getFindText:()=>null,suppressKeyboardEvent:({node:e,event:t,column:n})=>t.key===KeyCode.SPACE&&n.isCellEditable(e)}},date({formatValue:e}){return{cellEditor:"agDateCellEditor",keyCreator:e}},dateString({formatValue:e}){return{cellEditor:"agDateStringCellEditor",keyCreator:e}},dateTime(e){return this.date(e)},dateTimeString(e){return this.dateString(e)},object({formatValue:e,colModel:t,colId:n}){return{cellEditorParams:{useFormatter:!0},comparator:(o,u)=>{const d=t.getColDefCol(n),f=d?.getColDef();if(!d||!f)return 0;const g=o==null?"":e({column:d,node:null,value:o}),v=u==null?"":e({column:d,node:null,value:u});return g===v?0:g>v?1:-1},keyCreator:e}},text(){return{}}}}wireBeans(e){this.colModel=e.colModel}postConstruct(){this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.colModel.recreateColumnDefs(e)})}processDataTypeDefinitions(){const e=this.getDefaultDataTypes(),t={},n={},o=S=>R=>{const{column:_,node:F,value:M}=R;let I=_.getColDef().valueFormatter;return I===S.groupSafeValueFormatter&&(I=S.valueFormatter),this.beans.valueSvc.formatValue(_,F,M,I)};for(const S of Object.keys(e)){const R=e[S],_={...R,groupSafeValueFormatter:createGroupSafeValueFormatter(R,this.gos)};t[S]=_,n[S]=o(_)}const u=this.gos.get("dataTypeDefinitions")??{},d={};for(const S of Object.keys(u)){const R=u[S],_=this.processDataTypeDefinition(R,u,[S],e);_&&(t[S]=_,R.dataTypeMatcher&&(d[S]=R.dataTypeMatcher),n[S]=o(_))}const{valueParser:f,valueFormatter:g}=e.object,{valueParser:v,valueFormatter:w}=t.object;this.hasObjectValueParser=v!==f,this.hasObjectValueFormatter=w!==g,this.formatValueFuncs=n,this.dataTypeDefinitions=t,this.dataTypeMatchers=this.sortKeysInMatchers(d,e)}sortKeysInMatchers(e,t){const n={...e};for(const o of SORTED_CELL_DATA_TYPES_FOR_MATCHING)delete n[o],n[o]=e[o]??t[o].dataTypeMatcher;return n}processDataTypeDefinition(e,t,n,o){let u;const d=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let f=o[d];const g=t[d];if(f&&g&&(f=g),!validateDataTypeDefinition(e,f,d))return;u=mergeDataTypeDefinitions(f,e)}else{if(n.includes(d)){_warn(44);return}const f=t[d];if(!validateDataTypeDefinition(e,f,d))return;const g=this.processDataTypeDefinition(f,t,[...n,d],o);if(!g)return;u=mergeDataTypeDefinitions(g,e)}return{...u,groupSafeValueFormatter:createGroupSafeValueFormatter(u,this.gos)}}updateColDefAndGetColumnType(e,t,n){let{cellDataType:o}=t;o===void 0&&(o=e.cellDataType);const{field:u}=t;if((o==null||o===!0)&&(o=this.canInferCellDataType(e,t)?this.inferCellDataType(u,n):!1),this.addFormulaCellEditorToColDef(e,t),!o){e.cellDataType=!1;return}const d=this.dataTypeDefinitions[o];if(!d){_warn(47,{cellDataType:o});return}return e.cellDataType=o,d.groupSafeValueFormatter&&(e.valueFormatter=d.groupSafeValueFormatter),d.valueParser&&(e.valueParser=d.valueParser),d.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,o,d,n),d.columnTypes}addFormulaCellEditorToColDef(e,t){!(t.allowFormula??e.allowFormula)||t.cellEditor||(e.cellEditor="agFormulaCellEditor")}addColumnListeners(e){if(!this.isPendingInference)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const n=o=>{t.add(o.key)};e.__addEventListener("columnStateUpdated",n),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.__removeEventListener("columnStateUpdated",n))}canInferCellDataType(e,t){const{gos:n}=this;if(!_isClientSideRowModel(n))return!1;const o={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(doColDefPropsPreventInference(t,o))return!1;const u=t.type===null?e.type:t.type;if(u){const d=n.get("columnTypes")??{};if(convertColumnTypes(u).some(g=>{const v=d[g.trim()];return v&&doColDefPropsPreventInference(v,o)}))return!1}return!doColDefPropsPreventInference(e,o)}inferCellDataType(e,t){if(!e)return;let n;const o=this.getInitialData();if(o){const d=e.includes(".")&&!this.gos.get("suppressFieldDotNotation");n=_getValueUsingField(o,e,d)}else this.initWaitForRowData(t);return n==null?void 0:Object.keys(this.dataTypeMatchers).find(d=>this.dataTypeMatchers[d](n))??"object"}getInitialData(){const e=this.gos.get("rowData");if(e?.length)return e[0];if(this.initialData)return this.initialData;{const t=this.beans.rowModel.rootNode?._leafs;if(t?.length)return t[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isPendingInference)return;this.isPendingInference=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions,{colAutosize:n,eventSvc:o}=this.beans;t&&n&&(n.shouldQueueResizeOperations=!0);const[u]=this.addManagedEventListeners({rowDataUpdateStarted:d=>{const{firstRowData:f}=d;f&&(u?.(),this.isPendingInference=!1,this.processColumnsPendingInference(f,t),this.columnStateUpdatesPendingInference={},t&&n?.processResizeOperations(),o.dispatchEvent({type:"dataTypesInferred"}))}})}processColumnsPendingInference(e,t){this.initialData=e;const n=[];this.destroyColumnStateUpdateListeners();const o={},u={};for(const d of Object.keys(this.columnStateUpdatesPendingInference)){const f=this.columnStateUpdatesPendingInference[d],g=this.colModel.getCol(d);if(!g)continue;const v=g.getColDef();if(!this.resetColDefIntoCol(g,"cellDataTypeInferred"))continue;const w=g.getColDef();if(t&&w.type&&w.type!==v.type){const S=getUpdatedColumnState(g,f);S.rowGroup&&S.rowGroupIndex==null&&(o[d]=S),S.pivot&&S.pivotIndex==null&&(u[d]=S),n.push(S)}}t&&n.push(...this.generateColumnStateForRowGroupAndPivotIndexes(o,u)),n.length&&_applyColumnState(this.beans,{state:n},"cellDataTypeInferred"),this.initialData=null}generateColumnStateForRowGroupAndPivotIndexes(e,t){const n={},{rowGroupColsSvc:o,pivotColsSvc:u}=this.beans;return o?.restoreColumnOrder(n,e),u?.restoreColumnOrder(n,t),Object.values(n)}resetColDefIntoCol(e,t){const n=e.getUserProvidedColDef();if(!n)return!1;const o=_addColumnDefaultAndTypes(this.beans,n,e.getColId());return e.setColDef(o,n,t),!0}getDateStringTypeDefinition(e){const{dateString:t}=this.dataTypeDefinitions;return e?this.getDataTypeDefinition(e)??t:t}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDateIncludesTimeFlag(e){return e==="dateTime"||e==="dateTimeString"}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){return this.getDataTypeDefinition(e)?.baseDataType}checkType(e,t){if(t==null)return!0;const n=this.getDataTypeDefinition(e)?.dataTypeMatcher;return!n||e.getColDef().allowFormula&&this.beans.formula?.isFormula(t)?!0:n(t)}validateColDef(e){const t=n=>_warn(48,{property:n});if(e.cellDataType==="object"){const{object:n}=this.dataTypeDefinitions;e.valueFormatter===n.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&t("Formatter"),e.editable&&e.valueParser===n.valueParser&&!this.hasObjectValueParser&&t("Parser")}}postProcess(e){const t=e.cellDataType;if(!t||typeof t!="string")return;const{dataTypeDefinitions:n,beans:o,formatValueFuncs:u}=this,d=n[t];d&&o.colFilter?.setColDefPropsForDataType(e,d,u[t])}getFormatValue(e){return this.formatValueFuncs[e]}isColPendingInference(e){return this.isPendingInference&&!!this.columnStateUpdatesPendingInference[e]}setColDefPropertiesForBaseDataType(e,t,n,o){const u=this.formatValueFuncs[t],d=this.columnDefinitionPropsPerDataType[n.baseDataType]({colDef:e,cellDataType:t,colModel:this.colModel,dataTypeDefinition:n,colId:o,formatValue:u,filterModuleBean:this.beans.filterManager});e.cellEditor==="agFormulaCellEditor"&&d.cellEditor!==e.cellEditor&&(d.cellEditor=e.cellEditor),Object.assign(e,d)}getDateObjectTypeDef(e){const t=this.getLocaleTextFunc(),n=this.getDateIncludesTimeFlag(e);return{baseDataType:e,valueParser:o=>_parseDateTimeFromString(o.newValue&&String(o.newValue)),valueFormatter:o=>o.value==null?"":!(o.value instanceof Date)||isNaN(o.value.getTime())?t("invalidDate","Invalid Date"):_serialiseDate(o.value,n)??"",dataTypeMatcher:o=>o instanceof Date}}getDateStringTypeDef(e){const t=this.getDateIncludesTimeFlag(e);return{baseDataType:e,dateParser:n=>_parseDateTimeFromString(n)??void 0,dateFormatter:n=>_serialiseDate(n??null,t)??void 0,valueParser:n=>_isValidDate(String(n.newValue))?n.newValue:null,valueFormatter:n=>_isValidDate(String(n.value))?String(n.value):"",dataTypeMatcher:n=>typeof n=="string"&&_isValidDate(n)}}getDefaultDataTypes(){const e=this.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:t=>t.newValue?.trim?.()===""?null:Number(t.newValue),valueFormatter:t=>t.value==null?"":typeof t.value!="number"||isNaN(t.value)?e("invalidNumber","Invalid Number"):String(t.value),dataTypeMatcher:t=>typeof t=="number"},bigint:{baseDataType:"bigint",valueParser:t=>{const{newValue:n}=t;return n==null||typeof n=="string"&&n.trim()===""?null:_parseBigIntOrNull(n)},valueFormatter:t=>t.value==null?"":typeof t.value!="bigint"?e("invalidBigInt","Invalid BigInt"):String(t.value),dataTypeMatcher:t=>typeof t=="bigint"},text:{baseDataType:"text",valueParser:t=>t.newValue===""?null:_toStringOrNull(t.newValue),dataTypeMatcher:t=>typeof t=="string"},boolean:{baseDataType:"boolean",valueParser:t=>t.newValue==null?t.newValue:t.newValue?.trim?.()===""?null:String(t.newValue).toLowerCase()==="true",valueFormatter:t=>t.value==null?"":String(t.value),dataTypeMatcher:t=>typeof t=="boolean"},date:this.getDateObjectTypeDef("date"),dateString:this.getDateStringTypeDef("dateString"),dateTime:this.getDateObjectTypeDef("dateTime"),dateTimeString:{...this.getDateStringTypeDef("dateTimeString"),dataTypeMatcher:t=>typeof t=="string"&&_isValidDateTime(t)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:t=>_toStringOrNull(t.value)??""}}}destroyColumnStateUpdateListeners(){for(const e of this.columnStateUpdateListenerDestroyFuncs)e();this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}};function mergeDataTypeDefinitions(e,t){const n={...e,...t};return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(n.columnTypes=[...convertColumnTypes(e.columnTypes),...convertColumnTypes(t.columnTypes)]),n}function validateDataTypeDefinition(e,t,n){return t?t.baseDataType!==e.baseDataType?(_warn(46),!1):!0:(_warn(45,{parentCellDataType:n}),!1)}var isNumberOrBigintType=e=>typeof e=="bigint"||typeof e=="number",isNumberOrBigintBaseDataType=e=>e==="number"||e==="bigint";function createGroupSafeValueFormatter(e,t){if(e.valueFormatter)return n=>{const{node:o,colDef:u,column:d,value:f}=n;if(o?.group){const g=(u.pivotValueColumn??d).getAggFunc();if(g){if(g==="first"||g==="last")return e.valueFormatter(n);const{baseDataType:v}=e;if(isNumberOrBigintBaseDataType(v)&&g!=="count"){if(isNumberOrBigintType(f))return e.valueFormatter(n);if(f==null)return;if(typeof f=="object"){if(typeof f.toNumber=="function")return e.valueFormatter({...n,value:f.toNumber()});if("value"in f)return e.valueFormatter({...n,value:f.value})}}return}}else if(t.get("groupHideOpenParents")&&n.column.isRowGroupActive()&&typeof n.value=="string"&&!e.dataTypeMatcher?.(n.value))return;return e.valueFormatter(n)}}function doesColDefPropPreventInference(e,t,n,o){if(!t[n])return!1;const u=e[n];return u===null?(t[n]=!1,!1):o===void 0?!!u:u===o}function bigintComparator(e,t){if(e==null)return t==null?0:-1;if(t==null)return 1;const n=_parseBigIntOrNull(e),o=_parseBigIntOrNull(t);return n!=null&&o!=null?n===o?0:n>o?1:-1:0}function bigintAbsoluteComparator(e,t){if(e==null)return t==null?0:-1;if(t==null)return 1;const n=toAbsoluteBigInt(e),o=toAbsoluteBigInt(t);return n!=null&&o!=null?n===o?0:n>o?1:-1:0}function toAbsoluteBigInt(e){const t=_parseBigIntOrNull(e);return t==null?null:t<0n?-t:t}function doColDefPropsPreventInference(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([n,o])=>doesColDefPropPreventInference(e,t,n,o))}function getUpdatedColumnState(e,t){const n=getColumnStateFromColDef(e);for(const o of t)delete n[o],o==="rowGroup"?delete n.rowGroupIndex:o==="pivot"&&delete n.pivotIndex;return n}var DataTypeModule={moduleName:"DataType",version:VERSION,beans:[DataTypeService],dependsOn:[CheckboxCellRendererModule]},ColumnFlexModule={moduleName:"ColumnFlex",version:VERSION,beans:[ColumnFlexService]},ColumnApiModule={moduleName:"ColumnApi",version:VERSION,beans:[ColumnDefFactory],apiFunctions:{getColumnDef,getDisplayNameForColumn,getColumn,getColumns,applyColumnState,getColumnState,resetColumnState,isPinning,isPinningLeft,isPinningRight,getDisplayedColAfter,getDisplayedColBefore,setColumnsVisible,setColumnsPinned,getAllGridColumns,getDisplayedLeftColumns,getDisplayedCenterColumns,getDisplayedRightColumns,getAllDisplayedColumns,getAllDisplayedVirtualColumns,getColumnDefs}},ColumnNameService=class extends BeanStub{constructor(){super(...arguments),this.beanName="colNames"}getDisplayNameForColumn(e,t,n=!1){if(!e)return null;const o=this.getHeaderName(e.getColDef(),e,null,null,t),{aggColNameSvc:u}=this.beans;return n&&u?u.getHeaderName(e,o):o}getDisplayNameForProvidedColumnGroup(e,t,n){const o=t?.getColGroupDef();return o?this.getHeaderName(o,null,e,t,n):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,n,o,u){const d=e.headerValueGetter;if(d){const f=_addGridCommonParams(this.gos,{colDef:e,column:t,columnGroup:n,providedColumnGroup:o,location:u});return typeof d=="function"?d(f):typeof d=="string"?this.beans.expressionSvc?.evaluate(d,f)??null:""}else{if(e.headerName!=null)return e.headerName;if(e.field)return _camelCaseToHumanText(e.field)}return""}},ColumnViewportService=class extends BeanStub{constructor(){super(...arguments),this.beanName="colViewport",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.columnsToRenderLeft=[],this.columnsToRenderRight=[],this.columnsToRenderCenter=[]}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}getScrollPosition(){return this.scrollPosition}setScrollPosition(e,t,n=!1){const{visibleCols:o}=this,u=o.isBodyWidthDirty;if(!(e===this.scrollWidth&&t===this.scrollPosition&&!u)){if(this.scrollWidth=e,this.scrollPosition=t,o.isBodyWidthDirty=!0,this.gos.get("enableRtl")){const f=o.bodyWidth;this.viewportLeft=f-t-e,this.viewportRight=f-t}else this.viewportLeft=t,this.viewportRight=e+t;this.colModel.ready&&this.checkViewportColumns(n)}}getColumnHeadersToRender(e){switch(e){case"left":return this.columnsToRenderLeft;case"right":return this.columnsToRenderRight;default:return this.columnsToRenderCenter}}getHeadersToRender(e,t){let n;switch(e){case"left":n=this.rowsOfHeadersToRenderLeft[t];break;case"right":n=this.rowsOfHeadersToRenderRight[t];break;default:n=this.rowsOfHeadersToRenderCenter[t];break}return n??[]}extractViewportColumns(){const e=this.visibleCols.centerCols;this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()||isAnyParentAutoHeaderHeight(e)?!0:this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,n=t+e.getActualWidth(),o=this.viewportLeft-200,u=this.viewportRight+200,d=t<o&&n<o,f=t>u&&n>u;return!d&&!f}getViewportColumns(){const{leftCols:e,rightCols:t}=this.visibleCols;return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.colModel.colSpanActive)return this.colsWithinViewport;const t=d=>{const f=d.getLeft();return _exists(f)&&f>this.viewportLeft},n=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),{visibleCols:o}=this,u=o.centerCols;return o.getColsForRow(e,u,n,t)}checkViewportColumns(e=!1){this.extractViewport()&&this.eventSvc.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}calculateHeaderRows(){const{leftCols:e,rightCols:t}=this.visibleCols;this.columnsToRenderLeft=e,this.columnsToRenderRight=t,this.columnsToRenderCenter=this.colsWithinViewport;const n=o=>{const u=new Set,d={};for(const f of o){let g=f.getParent();const v=f.isSpanHeaderHeight();for(;g&&!u.has(g);){if(v&&g.isPadding()){g=g.getParent();continue}const S=g.getProvidedColumnGroup().getLevel();d[S]??(d[S]=[]),d[S].push(g),u.add(g),g=g.getParent()}}return d};this.rowsOfHeadersToRenderLeft=n(e),this.rowsOfHeadersToRenderRight=n(t),this.rowsOfHeadersToRenderCenter=n(this.headerColsWithinViewport)}extractViewport(){const e=o=>`${o.getId()}-${o.getPinned()||"normal"}`;this.extractViewportColumns();const t=this.getViewportColumns().map(e).join("#"),n=this.colsWithinViewportHash!==t;return n&&(this.colsWithinViewportHash=t,this.calculateHeaderRows()),n}};function isAnyParentAutoHeaderHeight(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}var AgComponentUtils=class extends BeanStub{constructor(){super(...arguments),this.beanName="agCompUtils"}adaptFunction(e,t){if(!e.cellRenderer)return null;class n{refresh(){return!1}getGui(){return this.eGui}init(u){const d=t(u),f=typeof d;if(f==="string"||f==="number"||f==="boolean"){this.eGui=_loadTemplate("<span>"+d+"</span>");return}if(d==null){this.eGui=_createElement({tag:"span"});return}this.eGui=d}}return n}},CellRendererFunctionModule={moduleName:"CellRendererFunction",version:VERSION,beans:[AgComponentUtils]},BaseRegistry=class extends AgBeanStub{constructor(){super(...arguments),this.beanName="registry"}registerDynamicBeans(e){if(e){this.dynamicBeans??(this.dynamicBeans={});for(const t of Object.keys(e))this.dynamicBeans[t]=e[t]}}createDynamicBean(e,t,...n){if(!this.dynamicBeans)throw new Error(this.getDynamicError(e,!0));const o=this.dynamicBeans[e];if(o==null){if(t)throw new Error(this.getDynamicError(e,!1));return}return new o(...n)}};function isComponentMetaFunc(e){return typeof e=="object"&&!!e.getComp}var Registry=class extends BaseRegistry{constructor(){super(...arguments),this.agGridDefaults={},this.agGridDefaultOverrides={},this.jsComps={},this.selectors={},this.icons={}}postConstruct(){const e=this.gos.get("components");if(e!=null)for(const t of Object.keys(e))this.jsComps[t]=e[t]}registerModule(e){const{icons:t,userComponents:n,dynamicBeans:o,selectors:u}=e;if(n){const d=(f,g,v,w)=>{this.agGridDefaults[f]=g,(v||w)&&(this.agGridDefaultOverrides[f]={params:v,processParams:w})};for(const f of Object.keys(n)){let g=n[f];if(isComponentMetaFunc(g)&&(g=g.getComp(this.beans)),typeof g=="object"){const{classImp:v,params:w,processParams:S}=g;d(f,v,w,S)}else d(f,g)}}this.registerDynamicBeans(o);for(const d of u??[])this.selectors[d.selector]=d;if(t)for(const d of Object.keys(t))this.icons[d]=t[d]}getUserComponent(e,t){const n=(g,v,w,S)=>({componentFromFramework:v,component:g,params:w,processParams:S}),{frameworkOverrides:o}=this.beans,u=o.frameworkComponent(t,this.gos.get("components"));if(u!=null)return n(u,!0);const d=this.jsComps[t];if(d){const g=o.isFrameworkComponent(d);return n(d,g)}const f=this.agGridDefaults[t];if(f){const g=this.agGridDefaultOverrides[t];return n(f,!1,g?.params,g?.processParams)}return this.beans.validation?.missingUserComponent(e,t,this.agGridDefaults,this.jsComps),null}getSelector(e){return this.selectors[e]}getIcon(e){return this.icons[e]}getDynamicError(e,t){return t?_errMsg(279,{name:e}):this.beans.validation?.missingDynamicBean(e)??_errMsg(256)}},NUM_CTRLS=23,CtrlsService=class extends BeanStub{constructor(){super(...arguments),this.beanName="ctrlsSvc",this.params={},this.ready=!1,this.readyCallbacks=[]}postConstruct(){this.addEventListener("ready",()=>{if(this.updateReady(),this.ready){for(const e of this.readyCallbacks)e(this.params);this.readyCallbacks.length=0}},this.beans.frameworkOverrides.runWhenReadyAsync?.()??!1)}updateReady(){const e=Object.values(this.params);this.ready=e.length===NUM_CTRLS&&e.every(t=>t?.isAlive()??!1)}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc(()=>{const n=this.readyCallbacks.indexOf(t);n>=0&&this.readyCallbacks.splice(n,1)})}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc(()=>{this.updateReady()})}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader:e,centerHeader:t,rightHeader:n}=this.params;return[e,n,t]}getHeaderRowContainerCtrl(e){const t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}getScrollFeature(){return this.getGridBodyCtrl().scrollFeature}},sharedCSS=':where([class^=ag-]),:where([class^=ag-]):after,:where([class^=ag-]):before{box-sizing:border-box}:where([class^=ag-]):where(button){color:inherit}:where([class^=ag-]):where(div,span,label):focus-visible{box-shadow:inset var(--ag-focus-shadow);outline:none;&:where(.invalid){box-shadow:inset var(--ag-focus-error-shadow)}}:where([class^=ag-]) ::-ms-clear{display:none}.ag-hidden{display:none!important}.ag-invisible{visibility:hidden!important}.ag-tab-guard{display:block;height:0;position:absolute;width:0}.ag-tab-guard-top{top:1px}.ag-tab-guard-bottom{bottom:1px}.ag-measurement-container{height:0;overflow:hidden;visibility:hidden;width:0}.ag-measurement-element-border{display:inline-block}.ag-measurement-element-border:before{border-left:var(--ag-internal-measurement-border);content:"";display:block}.ag-popup-child{top:0;z-index:5}.ag-popup-child:where(:not(.ag-tooltip-custom)){box-shadow:var(--ag-popup-shadow)}.ag-input-wrapper,.ag-picker-field-wrapper{align-items:center;display:flex;flex:1 1 auto;line-height:normal;position:relative}.ag-input-field{align-items:center;display:flex;flex-direction:row}.ag-input-field-input:where(:not([type=checkbox],[type=radio])){flex:1 1 auto;min-width:0;width:100%}.ag-chart,.ag-dnd-ghost,.ag-external,.ag-popup,.ag-root-wrapper{cursor:default;line-height:normal;white-space:normal;-webkit-font-smoothing:antialiased;background-color:var(--ag-background-color);color:var(--ag-text-color);color-scheme:var(--ag-browser-color-scheme);font-family:var(--ag-font-family);font-size:var(--ag-font-size);--ag-indentation-level:0}:where(.ag-icon):before{align-items:center;background-color:currentcolor;color:inherit;content:"";display:flex;font-family:inherit;font-size:var(--ag-icon-size);font-style:normal;font-variant:normal;height:var(--ag-icon-size);justify-content:center;line-height:var(--ag-icon-size);-webkit-mask-size:contain;mask-size:contain;text-transform:none;width:var(--ag-icon-size)}.ag-icon{background-position:50%;background-repeat:no-repeat;background-size:contain;color:var(--ag-icon-color);display:block;height:var(--ag-icon-size);position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:var(--ag-icon-size)}.ag-disabled .ag-icon,[disabled] .ag-icon{opacity:.5}.ag-icon-grip.ag-disabled,.ag-icon-grip[disabled]{opacity:.35}.ag-resizer{pointer-events:none;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:1}:where(.ag-resizer){&.ag-resizer-topLeft{cursor:nwse-resize;height:5px;left:0;top:0;width:5px}&.ag-resizer-top{cursor:ns-resize;height:5px;left:5px;right:5px;top:0}&.ag-resizer-topRight{cursor:nesw-resize;height:5px;right:0;top:0;width:5px}&.ag-resizer-right{bottom:5px;cursor:ew-resize;right:0;top:5px;width:5px}&.ag-resizer-bottomRight{bottom:0;cursor:nwse-resize;height:5px;right:0;width:5px}&.ag-resizer-bottom{bottom:0;cursor:ns-resize;height:5px;left:5px;right:5px}&.ag-resizer-bottomLeft{bottom:0;cursor:nesw-resize;height:5px;left:0;width:5px}&.ag-resizer-left{bottom:5px;cursor:ew-resize;left:0;top:5px;width:5px}}.ag-menu{background-color:var(--ag-menu-background-color);border:var(--ag-menu-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-menu-shadow);color:var(--ag-menu-text-color);max-height:100%;overflow-y:auto;position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}',IS_SSR=typeof window!="object"||!window?.document?.fonts?.forEach,FORCE_LEGACY_THEMES=!1,_injectGlobalCSS=(e,t,n,o,u,d,f=!1)=>{if(IS_SSR||FORCE_LEGACY_THEMES)return;o&&(e=`@layer ${CSS.escape(o).replaceAll("\\.",".")} { ${e} }`);let g=injectionState.map.get(t);if(g||(g=[],injectionState.map.set(t,g)),g.some(R=>R.css===e))return;const v=document.createElement("style");d&&v.setAttribute("nonce",d),v.dataset.agGlobalCss=n,v.textContent=e;const w={css:e,el:v,priority:u,isParams:f};let S;for(const R of g){if(R.priority>u)break;S=R}if(S){S.el.after(v);const R=g.indexOf(S);g.splice(R+1,0,w)}else t.nodeName==="STYLE"?t.after(v):t.insertBefore(v,t.querySelector(":not(title, meta)")),g.push(w)},_injectCoreAndModuleCSS=(e,t,n,o)=>{_injectGlobalCSS(sharedCSS,e,"shared",t,0,n),o?.forEach((u,d)=>u.forEach(f=>_injectGlobalCSS(f,e,d,t,0,n)))},_useParamsCss=(e,t,n,o,u,d)=>{if(IS_SSR||FORCE_LEGACY_THEMES)return;const f=injectionState.grids.get(e);f?f.paramsCss=t:injectionState.grids.set(e,{styleContainer:o,paramsCss:t}),removeStaleParamsCss(o),t&&n&&_injectGlobalCSS(t,o,n,u,2,d,!0)},_unregisterInstanceUsingThemingAPI=e=>{const t=injectionState.grids.get(e)?.styleContainer;if(!t)return;injectionState.grids.delete(e),Array.from(injectionState.grids.values()).some(o=>o.styleContainer===t)?removeStaleParamsCss(t):(removeStaleParamsCss(t,!0),injectionState.map.delete(t))},removeStaleParamsCss=(e,t=!1)=>{const n=new Set;for(const u of injectionState.grids.values())u.styleContainer===e&&n.add(u.paramsCss);const o=injectionState.map.get(e)??[];for(let u=o.length-1;u>=0;u--)(t||o[u].isParams&&!n.has(o[u].css))&&(o[u].el.remove(),o.splice(u,1))},_a,injectionState=(_a=typeof window=="object"?window:{}).agStyleInjectionState??(_a.agStyleInjectionState={map:new WeakMap,grids:new Map}),createPart=e=>new PartImpl(e),defaultModeName="$default",partCounter=0,PartImpl=class{constructor({feature:e,params:t,modeParams:n={},css:o,cssImports:u}){this.feature=e,this.css=o,this.cssImports=u,this.modeParams={[defaultModeName]:{...n[defaultModeName]??{},...t??{}},...n}}use(e,t,n){let o=this._inject;if(o==null){let{css:u}=this;if(u){const d=`ag-theme-${this.feature??"part"}-${++partCounter}`;typeof u=="function"&&(u=u()),u=`:where(.${d}) {
${u}
}
`;for(const f of this.cssImports??[])u=`@import url(${JSON.stringify(f)});
${u}`;o={css:u,class:d}}else o=!1;this._inject=o}return o&&e&&_injectGlobalCSS(o.css,e,o.class,t,1,n),o?o.class:!1}},kebabCase=e=>e.replace(/[A-Z]|\d+/g,t=>`-${t}`).toLowerCase(),paramToVariableName=e=>`--ag-${kebabCase(e)}`,paramToVariableExpression=e=>`var(${paramToVariableName(e)})`,clamp=(e,t,n)=>Math.max(t,Math.min(n,e)),memoize=e=>{const t=new Map;return n=>{const o=n;return t.has(o)||t.set(o,e(n)),t.get(o)}},accentMix=e=>({ref:"accentColor",mix:e}),foregroundMix=e=>({ref:"foregroundColor",mix:e}),foregroundBackgroundMix=e=>({ref:"foregroundColor",mix:e,onto:"backgroundColor"}),foregroundHeaderBackgroundMix=e=>({ref:"foregroundColor",mix:e,onto:"headerBackgroundColor"}),backgroundColor={ref:"backgroundColor"},foregroundColor={ref:"foregroundColor"},accentColor={ref:"accentColor"},defaultLightColorSchemeParams={backgroundColor:"#fff",foregroundColor:"#181d1f",borderColor:foregroundMix(.15),chromeBackgroundColor:foregroundBackgroundMix(.02),browserColorScheme:"light"},sharedDefaults={...defaultLightColorSchemeParams,textColor:foregroundColor,accentColor:"#2196f3",invalidColor:"#e02525",fontFamily:["-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu","Cantarell","Helvetica Neue","sans-serif"],subtleTextColor:{ref:"textColor",mix:.5},borderWidth:1,borderRadius:4,spacing:8,fontSize:14,focusShadow:{spread:3,color:accentMix(.5)},focusErrorShadow:{spread:3,color:{ref:"invalidColor",onto:"backgroundColor",mix:.5}},popupShadow:"0 0 16px #00000026",cardShadow:"0 1px 4px 1px #00000018",dropdownShadow:{ref:"cardShadow"},listItemHeight:{calc:"max(iconSize, dataFontSize) + widgetVerticalSpacing"},dragAndDropImageBackgroundColor:backgroundColor,dragAndDropImageBorder:!0,dragAndDropImageNotAllowedBorder:{color:{ref:"invalidColor",onto:"dragAndDropImageBackgroundColor",mix:.5}},dragAndDropImageShadow:{ref:"popupShadow"},iconSize:16,iconColor:"inherit",toggleButtonWidth:28,toggleButtonHeight:18,toggleButtonOnBackgroundColor:accentColor,toggleButtonOffBackgroundColor:foregroundBackgroundMix(.3),toggleButtonSwitchBackgroundColor:backgroundColor,toggleButtonSwitchInset:2,tooltipBackgroundColor:{ref:"chromeBackgroundColor"},tooltipErrorBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.1},tooltipTextColor:{ref:"textColor"},tooltipErrorTextColor:{ref:"invalidColor"},tooltipBorder:!0,tooltipErrorBorder:{color:{ref:"invalidColor",onto:"backgroundColor",mix:.25}},panelBackgroundColor:backgroundColor,panelTitleBarHeight:{ref:"headerHeight"},panelTitleBarBackgroundColor:{ref:"headerBackgroundColor"},panelTitleBarIconColor:{ref:"headerTextColor"},panelTitleBarTextColor:{ref:"headerTextColor"},panelTitleBarFontFamily:{ref:"headerFontFamily"},panelTitleBarFontSize:{ref:"headerFontSize"},panelTitleBarFontWeight:{ref:"headerFontWeight"},panelTitleBarBorder:!0,dialogShadow:{ref:"popupShadow"},dialogBorder:{color:foregroundMix(.2)},widgetContainerHorizontalPadding:{calc:"spacing * 1.5"},widgetContainerVerticalPadding:{calc:"spacing * 1.5"},widgetHorizontalSpacing:{calc:"spacing * 1.5"},widgetVerticalSpacing:{ref:"spacing"},dataFontSize:{ref:"fontSize"},headerBackgroundColor:{ref:"chromeBackgroundColor"},headerFontFamily:{ref:"fontFamily"},headerFontSize:{ref:"fontSize"},headerFontWeight:500,headerTextColor:{ref:"textColor"},headerHeight:{calc:"max(iconSize, dataFontSize) + spacing * 4 * headerVerticalPaddingScale"},headerVerticalPaddingScale:1,menuBorder:{color:foregroundMix(.2)},menuBackgroundColor:foregroundBackgroundMix(.03),menuTextColor:foregroundBackgroundMix(.95),menuShadow:{ref:"popupShadow"},menuSeparatorColor:{ref:"borderColor"}},paramTypes=["colorScheme","color","length","scale","borderStyle","border","shadow","image","fontFamily","fontWeight","duration"],getParamType=memoize(e=>(e=e.toLowerCase(),paramTypes.find(t=>e.endsWith(t.toLowerCase()))??"length")),literalToCSS=e=>typeof e=="object"&&e?.ref?paramToVariableExpression(e.ref):typeof e=="string"?e:typeof e=="number"?String(e):!1,colorValueToCss=e=>{if(typeof e=="string")return e;if(typeof e=="object"&&e&&"ref"in e){const t=paramToVariableExpression(e.ref);return e.mix==null?t:`color-mix(in srgb, ${e.onto?paramToVariableExpression(e.onto):"transparent"}, ${t} ${clamp(e.mix*100,0,100)}%)`}return!1},colorSchemeValueToCss=literalToCSS,lengthValueToCss=e=>typeof e=="string"?e:typeof e=="number"?`${e}px`:typeof e=="object"&&e&&"calc"in e?`calc(${e.calc.replace(/ ?[*/+] ?/g," $& ").replace(/-?\b[a-z][a-z0-9]*\b(?![-(])/gi,n=>n[0]==="-"?n:" "+paramToVariableExpression(n)+" ")})`:typeof e=="object"&&e&&"ref"in e?paramToVariableExpression(e.ref):!1,scaleValueToCss=literalToCSS,borderValueToCss=(e,t)=>typeof e=="string"?e:e===!0?borderValueToCss({},t):e===!1?t==="columnBorder"?borderValueToCss({color:"transparent"},t):"none":typeof e=="object"&&e&&"ref"in e?paramToVariableExpression(e.ref):borderStyleValueToCss(e.style??"solid")+" "+lengthValueToCss(e.width??{ref:"borderWidth"})+" "+colorValueToCss(e.color??{ref:"borderColor"}),shadowValueParamsToCss=e=>[lengthValueToCss(e.offsetX??0),lengthValueToCss(e.offsetY??0),lengthValueToCss(e.radius??0),lengthValueToCss(e.spread??0),colorValueToCss(e.color??{ref:"foregroundColor"}),...e.inset?["inset"]:[]].join(" "),shadowValueToCss=e=>typeof e=="string"?e:e===!1?"none":typeof e=="object"&&e&&"ref"in e?paramToVariableExpression(e.ref):Array.isArray(e)?e.map(shadowValueParamsToCss).join(", "):shadowValueParamsToCss(e),borderStyleValueToCss=literalToCSS,fontFamilyValueToCss=e=>typeof e=="string"?e.includes(",")?e:quoteUnsafeChars(e):typeof e=="object"&&e&&"googleFont"in e?fontFamilyValueToCss(e.googleFont):typeof e=="object"&&e&&"ref"in e?paramToVariableExpression(e.ref):Array.isArray(e)?e.map(t=>(typeof t=="object"&&"googleFont"in t&&(t=t.googleFont),quoteUnsafeChars(t))).join(", "):!1,quoteUnsafeChars=e=>/^[\w-]+$|\w\(/.test(e)?e:JSON.stringify(e),fontWeightValueToCss=literalToCSS,imageValueToCss=e=>typeof e=="string"?e:typeof e=="object"&&e&&"url"in e?`url(${JSON.stringify(e.url)})`:typeof e=="object"&&e&&"svg"in e?imageValueToCss({url:`data:image/svg+xml,${encodeURIComponent(e.svg)}`}):typeof e=="object"&&e&&"ref"in e?paramToVariableExpression(e.ref):!1,durationValueToCss=(e,t,n)=>typeof e=="string"?e:typeof e=="number"?(e>=10&&n.warn(104,{value:e,param:t}),`${e}s`):typeof e=="object"&&e&&"ref"in e?paramToVariableExpression(e.ref):!1,paramValidators={color:colorValueToCss,colorScheme:colorSchemeValueToCss,length:lengthValueToCss,scale:scaleValueToCss,border:borderValueToCss,borderStyle:borderStyleValueToCss,shadow:shadowValueToCss,image:imageValueToCss,fontFamily:fontFamilyValueToCss,fontWeight:fontWeightValueToCss,duration:durationValueToCss},paramValueToCss=(e,t,n)=>{const o=getParamType(e);return paramValidators[o](t,e,n)},paramsId=0,createSharedTheme=(e,t)=>new ThemeImpl({themeLogger:e,overridePrefix:t}),ThemeImpl=class bp{constructor(t,n=[]){this.params=t,this.parts=n}withPart(t){return typeof t=="function"&&(t=t()),t instanceof PartImpl?new bp(this.params,[...this.parts,t]):(this.params.themeLogger.preInitErr(259,"Invalid part",{part:t}),this)}withoutPart(t){return this.withPart(createPart({feature:t}))}withParams(t,n=defaultModeName){return this.withPart(createPart({modeParams:{[n]:t}}))}_startUse({styleContainer:t,cssLayer:n,nonce:o,loadThemeGoogleFonts:u,moduleCss:d}){if(IS_SSR)return;uninstallLegacyCSS(),_injectCoreAndModuleCSS(t,n,o,d);const f=getGoogleFontsUsed(this);if(f.length>0)for(const g of f)u&&loadGoogleFont(g,o);for(const g of this.parts)g.use(t,n,o)}_getCssClass(){return this._cssClassCache??(this._cssClassCache=deduplicatePartsByFeature(this.parts).map(t=>t.use(void 0,void 0,void 0)).filter(Boolean).concat(this._getParamsClassName()).join(" "))}_getParamsClassName(){return this._paramsClassName??(this._paramsClassName=`ag-theme-params-${++paramsId}`)}_getModeParams(){let t=this._paramsCache;if(!t){const n={[defaultModeName]:{...sharedDefaults}};for(const o of deduplicatePartsByFeature(this.parts))for(const u of Object.keys(o.modeParams)){const d=o.modeParams[u];if(d){const f=n[u]??(n[u]={}),g=new Set;for(const v of Object.keys(d)){const w=d[v];w!==void 0&&(f[v]=w,g.add(v))}if(u===defaultModeName)for(const v of Object.keys(n)){const w=n[v];if(v!==defaultModeName)for(const S of g)delete w[S]}}}this._paramsCache=t=n}return t}_getParamsCss(){if(!this._paramsCssCache){let t="",n="";const o=this._getModeParams(),{overridePrefix:u,themeLogger:d}=this.params,f=u?`--ag-${u}-`:void 0;for(const w of Object.keys(o)){const S=o[w];if(w!==defaultModeName){const _=`:where([data-ag-theme-mode="${typeof CSS=="object"?CSS.escape(w):w}"]) & {
`;t+=_,n+=_}for(const R of Object.keys(S).sort()){const _=S[R],F=paramValueToCss(R,_,d);if(F===!1)d.error(107,{key:R,value:_});else{const M=paramToVariableName(R),I=f?M.replace("--ag-",f):M,N=M.replace("--ag-","--ag-inherited-");t+=`	${M}: var(${N}, ${F});
`,n+=`	${N}: var(${I});
`}}w!==defaultModeName&&(t+=`}
`,n+=`}
`)}const g=`:where(.${this._getParamsClassName()})`;let v=`${g} {
${t}}
`;v+=`:has(> ${g}):not(${g}) {
${n}}
`,this._paramsCssCache=v}return this._paramsCssCache}},deduplicatePartsByFeature=e=>{const t=new Map;for(const o of e)t.set(o.feature,o);const n=[];for(const o of e)(!o.feature||t.get(o.feature)===o)&&n.push(o);return n},getGoogleFontsUsed=e=>{const t=new Set,n=d=>{if(Array.isArray(d))d.forEach(n);else{const f=d?.googleFont;typeof f=="string"&&t.add(f)}};return Object.values(e._getModeParams()).flatMap(d=>Object.values(d)).forEach(n),Array.from(t).sort()},uninstalledLegacyCSS=!1,uninstallLegacyCSS=()=>{if(!uninstalledLegacyCSS){uninstalledLegacyCSS=!0;for(const e of Array.from(document.head.querySelectorAll('style[data-ag-scope="legacy"]')))e.remove()}},loadGoogleFont=async(e,t)=>{const n=`@import url('https://${googleFontsDomain}/css2?family=${encodeURIComponent(e)}:wght@100;200;300;400;500;600;700;800;900&display=swap');
`;_injectGlobalCSS(n,document.head,`googleFont:${e}`,void 0,0,t)},googleFontsDomain="fonts.googleapis.com",LIST_ITEM_HEIGHT={changeKey:"listItemHeight",type:"length",defaultValue:24},BaseEnvironment=class extends AgBeanStub{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.sizesMeasured=!1,this.globalCSS=[]}wireBeans(e){this.eRootDiv=e.eRootDiv}postConstruct(){const{gos:e,eRootDiv:t}=this;e.setInstanceDomData(t);const n=e.get("themeStyleContainer"),o=typeof ShadowRoot<"u",u=o&&t.getRootNode()instanceof ShadowRoot;this.eStyleContainer=(typeof n=="function"?n():n)??(u?t:document.head),!n&&!u&&o&&warnOnAttachToShadowRoot(t,this.shadowRootError.bind(this),this.addDestroyFunc.bind(this)),this.cssLayer=e.get("themeCssLayer"),this.styleNonce=e.get("styleNonce"),this.addManagedPropertyListener("theme",()=>this.handleThemeChange()),this.handleThemeChange(),this.getSizeEl(LIST_ITEM_HEIGHT),this.initVariables(),this.addDestroyFunc(()=>_unregisterInstanceUsingThemingAPI(this)),this.mutationObserver=new MutationObserver(()=>{this.fireStylesChangedEvent("theme")}),this.addDestroyFunc(()=>this.mutationObserver.disconnect())}applyThemeClasses(e,t=[]){const{theme:n}=this,o=n?n._getCssClass():this.applyLegacyThemeClasses();for(const u of Array.from(e.classList))u.startsWith("ag-theme-")&&e.classList.remove(u);if(o){const u=e.className;e.className=`${u}${u?" ":""}${o}${t?.length?" "+t.join(" "):""}`}}applyLegacyThemeClasses(){let e="";this.mutationObserver.disconnect();let t=this.eRootDiv;for(;t;){let n=!1;for(const o of Array.from(t.classList))o.startsWith("ag-theme-")&&(n=!0,e=e?`${e} ${o}`:o);n&&this.mutationObserver.observe(t,{attributes:!0,attributeFilter:["class"]}),t=t.parentElement}return e}addGlobalCSS(e,t){this.theme?_injectGlobalCSS(e,this.eStyleContainer,t,this.cssLayer,0,this.styleNonce):this.globalCSS.push([e,t])}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(LIST_ITEM_HEIGHT)}getCSSVariablePixelValue(e){const t=this.lastKnownValues.get(e);if(t!=null)return t;const n=this.measureSizeEl(e);return n==="detached"||n==="no-styles"?(e.cacheDefault&&this.lastKnownValues.set(e,e.defaultValue),e.defaultValue):(this.lastKnownValues.set(e,n),n)}measureSizeEl(e){const t=this.getSizeEl(e);if(t.offsetParent==null)return"detached";const n=t.offsetWidth;return n===NO_VALUE_SENTINEL?"no-styles":(this.sizesMeasured=!0,n)}getMeasurementContainer(){let e=this.eMeasurementContainer;return e||(e=this.eMeasurementContainer=_createAgElement({tag:"div",cls:"ag-measurement-container"}),this.eRootDiv.appendChild(e)),e}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;const n=this.getMeasurementContainer();t=_createAgElement({tag:"div"});const o=this.setSizeElStyles(t,e);n.appendChild(t),this.sizeEls.set(e,t);const{type:u,noWarn:d}=e;if(u!=="length"&&u!=="border")return t;let f=this.measureSizeEl(e);f==="no-styles"&&!d&&this.varError(o,e.defaultValue);const g=_observeResize(this.beans,t,()=>{const v=this.measureSizeEl(e);v==="detached"||v==="no-styles"||(this.lastKnownValues.set(e,v),v!==f&&(f=v,this.fireStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>g()),t}setSizeElStyles(e,t){const{changeKey:n,type:o}=t;let u=paramToVariableName(n);return o==="border"?(u.endsWith("-width")&&(u=u.slice(0,-6)),e.className="ag-measurement-element-border",e.style.setProperty("--ag-internal-measurement-border",`var(${u}, solid ${NO_VALUE_SENTINEL}px)`)):e.style.width=`var(${u}, ${NO_VALUE_SENTINEL}px)`,u}handleThemeChange(){const{gos:e,theme:t}=this,n=e.get("theme");let o;if(n==="legacy")o=void 0;else{const u=n??this.getDefaultTheme();u instanceof ThemeImpl?o=u:this.themeError(u)}o!==t&&this.handleNewTheme(o),this.postProcessThemeChange(o,n)}handleNewTheme(e){const{gos:t,eRootDiv:n,globalCSS:o}=this,u=this.getAdditionalCss();if(e){_injectCoreAndModuleCSS(this.eStyleContainer,this.cssLayer,this.styleNonce,u);for(const[d,f]of o)_injectGlobalCSS(d,this.eStyleContainer,f,this.cssLayer,0,this.styleNonce);o.length=0}this.theme=e,e?._startUse({loadThemeGoogleFonts:t.get("loadThemeGoogleFonts"),styleContainer:this.eStyleContainer,cssLayer:this.cssLayer,nonce:this.styleNonce,moduleCss:u}),_useParamsCss(this,e?._getParamsCss()??null,e?._getParamsClassName()??null,this.eStyleContainer,this.cssLayer,this.styleNonce),this.applyThemeClasses(n),this.fireStylesChangedEvent("theme")}fireStylesChangedEvent(e){this.eventSvc.dispatchEvent({type:"stylesChanged",[`${e}Changed`]:!0})}},NO_VALUE_SENTINEL=15538,warnOnAttachToShadowRoot=(e,t,n)=>{let o=60;const u=setInterval(()=>{typeof ShadowRoot<"u"&&e.getRootNode()instanceof ShadowRoot&&(t(),clearInterval(u)),(_isInDOM(e)||--o<0)&&clearInterval(u)},1e3);n(()=>clearInterval(u))},coreCSS='.ag-aria-description-container{border:0;z-index:9999;clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px}.ag-unselectable{-webkit-user-select:none;-moz-user-select:none;user-select:none}.ag-selectable{-webkit-user-select:text;-moz-user-select:text;user-select:text}.ag-shake-left-to-right{animation-direction:alternate;animation-duration:.2s;animation-iteration-count:infinite;animation-name:ag-shake-left-to-right}@keyframes ag-shake-left-to-right{0%{padding-left:6px;padding-right:2px}to{padding-left:2px;padding-right:6px}}.ag-body-horizontal-scroll-viewport,.ag-body-vertical-scroll-viewport,.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{flex:1 1 auto;height:100%;min-width:0;overflow:hidden;position:relative}.ag-viewport{position:relative}.ag-spanning-container{position:absolute;top:0;z-index:1}.ag-body-viewport,.ag-center-cols-viewport,.ag-floating-bottom-viewport,.ag-floating-top-viewport,.ag-header-viewport,.ag-sticky-bottom-viewport,.ag-sticky-top-viewport{overflow-x:auto;-ms-overflow-style:none!important;scrollbar-width:none!important}.ag-body-viewport::-webkit-scrollbar,.ag-center-cols-viewport::-webkit-scrollbar,.ag-floating-bottom-viewport::-webkit-scrollbar,.ag-floating-top-viewport::-webkit-scrollbar,.ag-header-viewport::-webkit-scrollbar,.ag-sticky-bottom-viewport::-webkit-scrollbar,.ag-sticky-top-viewport::-webkit-scrollbar{display:none!important}.ag-body-viewport{display:flex;overflow-x:hidden;&:where(.ag-layout-normal){overflow-y:auto;-webkit-overflow-scrolling:touch}}.ag-floating-bottom-container,.ag-floating-top-container,.ag-sticky-bottom-container,.ag-sticky-top-container{min-height:1px}.ag-center-cols-viewport{min-height:100%;width:100%}.ag-body-horizontal-scroll-viewport{overflow-x:scroll}.ag-body-vertical-scroll-viewport{overflow-y:scroll}.ag-body-container,.ag-body-horizontal-scroll-container,.ag-body-vertical-scroll-container,.ag-center-cols-container,.ag-floating-bottom-container,.ag-floating-bottom-full-width-container,.ag-floating-top-container,.ag-full-width-container,.ag-header-container,.ag-pinned-left-cols-container,.ag-pinned-left-sticky-bottom,.ag-pinned-right-cols-container,.ag-pinned-right-sticky-bottom,.ag-sticky-bottom-container,.ag-sticky-top-container{position:relative}.ag-floating-bottom-container,.ag-floating-top-container,.ag-header-container,.ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top,.ag-sticky-bottom-container,.ag-sticky-top-container{height:100%;white-space:nowrap}.ag-center-cols-container,.ag-pinned-right-cols-container{display:block}.ag-body-horizontal-scroll-container{height:100%}.ag-body-vertical-scroll-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container,.ag-full-width-container,.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{pointer-events:none;position:absolute;top:0}:where(.ag-ltr) .ag-floating-bottom-full-width-container,:where(.ag-ltr) .ag-floating-top-full-width-container,:where(.ag-ltr) .ag-full-width-container,:where(.ag-ltr) .ag-sticky-bottom-full-width-container,:where(.ag-ltr) .ag-sticky-top-full-width-container{left:0}:where(.ag-rtl) .ag-floating-bottom-full-width-container,:where(.ag-rtl) .ag-floating-top-full-width-container,:where(.ag-rtl) .ag-full-width-container,:where(.ag-rtl) .ag-sticky-bottom-full-width-container,:where(.ag-rtl) .ag-sticky-top-full-width-container{right:0}.ag-full-width-container{width:100%}.ag-floating-bottom-full-width-container,.ag-floating-top-full-width-container{display:inline-block;height:100%;overflow:hidden;width:100%}.ag-body{display:flex;flex:1 1 auto;flex-direction:row!important;min-height:0;position:relative}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:flex;min-height:0;min-width:0;position:relative;&:where(.ag-scrollbar-invisible){bottom:0;position:absolute;&:where(.ag-apple-scrollbar){opacity:0;transition:opacity .4s;visibility:hidden;&:where(.ag-scrollbar-active),&:where(.ag-scrollbar-scrolling){opacity:1;visibility:visible}}}}.ag-body-horizontal-scroll{width:100%;&:where(.ag-scrollbar-invisible){left:0;right:0}}.ag-body-vertical-scroll{height:100%;&:where(.ag-scrollbar-invisible){top:0;z-index:10}}:where(.ag-ltr) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){right:0}}:where(.ag-rtl) .ag-body-vertical-scroll{&:where(.ag-scrollbar-invisible){left:0}}.ag-force-vertical-scroll{overflow-y:scroll!important}.ag-horizontal-left-spacer,.ag-horizontal-right-spacer{height:100%;min-width:0;overflow-x:scroll;&:where(.ag-scroller-corner){overflow-x:hidden}}:where(.ag-row-animation) .ag-row{transition:transform .4s,top .4s,opacity .2s;&:where(.ag-after-created){transition:transform .4s,top .4s,height .4s,opacity .2s}}:where(.ag-row-animation.ag-prevent-animation) .ag-row{transition:none!important;&:where(.ag-row.ag-after-created){transition:none!important}}:where(.ag-row-no-animation) .ag-row{transition:none}.ag-row-loading{align-items:center;display:flex}.ag-row-position-absolute{position:absolute}.ag-row-position-relative{position:relative}.ag-full-width-row{overflow:hidden;pointer-events:all}.ag-row-inline-editing{z-index:1}.ag-row-dragging{z-index:2}.ag-stub-cell{align-items:center;display:flex}.ag-cell{display:inline-block;height:100%;position:absolute;white-space:nowrap;&:focus-visible{box-shadow:none}}.ag-cell-value{flex:1 1 auto}.ag-cell-value:not(.ag-allow-overflow),.ag-group-value{overflow:hidden;text-overflow:ellipsis}.ag-cell-wrap-text{white-space:normal;word-break:break-word}:where(.ag-cell) .ag-icon{display:inline-block;vertical-align:middle}.ag-floating-top{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-top:not(.ag-invisible)){border-bottom:var(--ag-pinned-row-border)}.ag-floating-bottom{display:flex;overflow:hidden;position:relative;white-space:nowrap;width:100%}:where(.ag-floating-bottom:not(.ag-invisible)){border-top:var(--ag-pinned-row-border)}.ag-sticky-bottom,.ag-sticky-top{background-color:var(--ag-data-background-color);display:flex;height:0;overflow:hidden;position:absolute;width:100%;z-index:1}.ag-sticky-bottom{box-sizing:content-box!important;:where(.ag-pinned-left-sticky-bottom),:where(.ag-pinned-right-sticky-bottom),:where(.ag-sticky-bottom-container){border-top:var(--ag-row-border);box-sizing:border-box}}.ag-opacity-zero{opacity:0!important}.ag-cell-label-container{align-items:center;display:flex;flex-direction:row-reverse;height:100%;justify-content:space-between;width:100%}:where(.ag-right-aligned-header){.ag-cell-label-container{flex-direction:row}.ag-header-cell-text{text-align:end}}.ag-column-group-icons{display:block;:where(.ag-column-group-closed-icon),:where(.ag-column-group-opened-icon){cursor:pointer}}:where(.ag-ltr){direction:ltr;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row}}:where(.ag-rtl){direction:rtl;text-align:right;.ag-body,.ag-body-horizontal-scroll,.ag-body-viewport,.ag-floating-bottom,.ag-floating-top,.ag-header,.ag-sticky-bottom,.ag-sticky-top{flex-direction:row-reverse}.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{display:block}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(180deg)}}:where(.ag-rtl){.ag-icon-contracted,.ag-icon-expanded,.ag-icon-tree-closed{transform:rotate(-180deg)}}:where(.ag-ltr) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-left:var(--ag-row-group-indent-size)}:where(.ag-rtl) .ag-row:not(.ag-row-level-0) .ag-pivot-leaf-group{margin-right:var(--ag-row-group-indent-size)}:where(.ag-ltr) .ag-row-group-leaf-indent{margin-left:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}:where(.ag-rtl) .ag-row-group-leaf-indent{margin-right:calc(var(--ag-cell-widget-spacing) + var(--ag-icon-size))}.ag-value-change-delta{padding:0 2px}.ag-value-change-delta-up{color:var(--ag-value-change-delta-up-color)}.ag-value-change-delta-down{color:var(--ag-value-change-delta-down-color)}.ag-value-change-value{background-color:transparent;border-radius:1px;padding-left:1px;padding-right:1px;transition:background-color 1s}.ag-value-change-value-highlight{background-color:var(--ag-value-change-value-highlight-background-color);transition:background-color .1s}.ag-cell-data-changed{background-color:var(--ag-value-change-value-highlight-background-color)!important}.ag-cell-data-changed-animation{background-color:transparent}.ag-cell-highlight{background-color:var(--ag-range-selection-highlight-color)!important}.ag-row,.ag-spanned-row{color:var(--ag-cell-text-color);font-family:var(--ag-cell-font-family);font-size:var(--ag-data-font-size);white-space:nowrap;--ag-internal-content-line-height:calc(min(var(--ag-row-height), var(--ag-line-height, 1000px)) - var(--ag-internal-row-border-width, 1px) - 2px)}.ag-row{background-color:var(--ag-data-background-color);border-bottom:var(--ag-row-border);height:var(--ag-row-height);width:100%;&.ag-row-editing-invalid{background-color:var(--ag-full-row-edit-invalid-background-color)}}:where(.ag-body-vertical-content-no-gap>div>div>div,.ag-body-vertical-content-no-gap>div>div>div>div)>.ag-row-last{border-bottom-color:transparent}.ag-group-contracted,.ag-group-expanded{cursor:pointer}.ag-cell,.ag-full-width-row .ag-cell-wrapper.ag-row-group{border:1px solid transparent;line-height:var(--ag-internal-content-line-height);-webkit-font-smoothing:subpixel-antialiased}:where(.ag-ltr) .ag-cell{border-right:var(--ag-column-border)}:where(.ag-rtl) .ag-cell{border-left:var(--ag-column-border)}.ag-spanned-cell-wrapper{background-color:var(--ag-data-background-color);position:absolute}.ag-spanned-cell-wrapper>.ag-spanned-cell{display:block;position:relative}:where(.ag-ltr) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-right-color:transparent}:where(.ag-rtl) :where(.ag-body-horizontal-content-no-gap) .ag-column-last{border-left-color:transparent}.ag-cell-wrapper{align-items:center;display:flex;>:where(:not(.ag-cell-value,.ag-group-value)){align-items:center;display:flex;height:var(--ag-internal-content-line-height)}&:where(.ag-row-group){align-items:flex-start}:where(.ag-full-width-row) &:where(.ag-row-group){align-items:center;height:100%}}:where(.ag-ltr) .ag-cell-wrapper{padding-left:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-rtl) .ag-cell-wrapper{padding-right:calc(var(--ag-indentation-level)*var(--ag-row-group-indent-size))}:where(.ag-cell-wrap-text:not(.ag-cell-auto-height)) .ag-cell-wrapper{align-items:normal;height:100%;:where(.ag-cell-value){height:100%}}:where(.ag-ltr) .ag-row>.ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}:where(.ag-rtl) .ag-row>.ag-cell-wrapper.ag-row-group{padding-right:calc(var(--ag-cell-horizontal-padding) + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-cell-focus:not(.ag-cell-range-selected):focus-within,.ag-cell-range-single-cell,.ag-cell-range-single-cell.ag-cell-range-handle,.ag-context-menu-open .ag-cell-focus:not(.ag-cell-range-selected),.ag-context-menu-open .ag-full-width-row.ag-row-focus .ag-cell-wrapper.ag-row-group,.ag-full-width-row.ag-row-focus:focus .ag-cell-wrapper.ag-row-group{border:1px solid;border-color:var(--ag-range-selection-border-color);border-style:var(--ag-range-selection-border-style);outline:initial}.ag-full-width-row.ag-row-focus:focus{box-shadow:none}:where(.ag-ltr) .ag-group-contracted,:where(.ag-ltr) .ag-group-expanded,:where(.ag-ltr) .ag-row-drag,:where(.ag-ltr) .ag-selection-checkbox{margin-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-group-contracted,:where(.ag-rtl) .ag-group-expanded,:where(.ag-rtl) .ag-row-drag,:where(.ag-rtl) .ag-selection-checkbox{margin-left:var(--ag-cell-widget-spacing)}.ag-drag-handle-disabled{opacity:.35;pointer-events:none}:where(.ag-ltr) .ag-group-child-count{margin-left:3px}:where(.ag-rtl) .ag-group-child-count{margin-right:3px}.ag-row-highlight-above:after,.ag-row-highlight-below:after,.ag-row-highlight-inside:after{background-color:var(--ag-row-drag-indicator-color);border-radius:calc(var(--ag-row-drag-indicator-width)/2);content:"";height:var(--ag-row-drag-indicator-width);pointer-events:none;position:absolute;width:calc(100% - 1px)}:where(.ag-ltr) .ag-row-highlight-above:after,:where(.ag-ltr) .ag-row-highlight-below:after,:where(.ag-ltr) .ag-row-highlight-inside:after{left:1px}:where(.ag-rtl) .ag-row-highlight-above:after,:where(.ag-rtl) .ag-row-highlight-below:after,:where(.ag-rtl) .ag-row-highlight-inside:after{right:1px}.ag-row-highlight-above:after{top:0}.ag-row-highlight-below:after{bottom:0}.ag-row-highlight-indent:after{display:block;width:auto}:where(.ag-ltr) .ag-row-highlight-indent:after{left:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size));right:1px}:where(.ag-rtl) .ag-row-highlight-indent:after{left:1px;right:calc((var(--ag-cell-widget-spacing) + var(--ag-icon-size))*2 + var(--ag-cell-horizontal-padding) + var(--ag-row-highlight-level)*var(--ag-row-group-indent-size))}.ag-row-highlight-inside:after{background-color:var(--ag-selected-row-background-color);border:1px solid var(--ag-range-selection-border-color);display:block;height:auto;inset:0;width:auto}.ag-body,.ag-floating-bottom,.ag-floating-top{background-color:var(--ag-data-background-color)}.ag-row-odd{background-color:var(--ag-odd-row-background-color)}.ag-row-selected:before{background-color:var(--ag-selected-row-background-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-full-width-row.ag-row-group:before,.ag-row-hover:not(.ag-full-width-row):before{background-color:var(--ag-row-hover-color);content:"";display:block;inset:0;pointer-events:none;position:absolute}.ag-row-hover.ag-row-selected:before{background-color:var(--ag-row-hover-color);background-image:linear-gradient(var(--ag-selected-row-background-color),var(--ag-selected-row-background-color))}.ag-row.ag-full-width-row.ag-row-group>*{position:relative}.ag-column-hover{background-color:var(--ag-column-hover-color)}.ag-header-range-highlight{background-color:var(--ag-range-header-highlight-color)}.ag-right-aligned-cell{font-variant-numeric:tabular-nums}:where(.ag-ltr) .ag-right-aligned-cell{text-align:right}:where(.ag-rtl) .ag-right-aligned-cell{text-align:left}.ag-right-aligned-cell .ag-cell-value,.ag-right-aligned-cell .ag-group-value{margin-left:auto}:where(.ag-ltr) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-ltr) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level));padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}:where(.ag-rtl) .ag-cell:not(.ag-cell-inline-editing),:where(.ag-rtl) .ag-full-width-row .ag-cell-wrapper.ag-row-group{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px + var(--ag-row-group-indent-size)*var(--ag-indentation-level))}.ag-row>.ag-cell-wrapper{padding-left:calc(var(--ag-cell-horizontal-padding) - 1px);padding-right:calc(var(--ag-cell-horizontal-padding) - 1px)}.ag-row-dragging{cursor:move;opacity:.5}.ag-details-row{background-color:var(--ag-data-background-color);padding:calc(var(--ag-spacing)*3.75)}.ag-layout-auto-height,.ag-layout-print{.ag-center-cols-container,.ag-center-cols-viewport{min-height:150px}}.ag-overlay-exporting-wrapper,.ag-overlay-loading-wrapper,.ag-overlay-modal-wrapper{background-color:var(--ag-modal-overlay-background-color)}.ag-skeleton-container{align-content:center;height:100%;width:100%}.ag-skeleton-effect{animation:ag-skeleton-loading 1.5s ease-in-out .5s infinite;background-color:var(--ag-row-loading-skeleton-effect-color);border-radius:.25rem;height:1em;width:100%}:where(.ag-ltr) .ag-right-aligned-cell .ag-skeleton-effect{margin-left:auto}:where(.ag-rtl) .ag-right-aligned-cell .ag-skeleton-effect{margin-right:auto}@keyframes ag-skeleton-loading{0%{background-color:var(--ag-row-loading-skeleton-effect-color)}50%{background-color:color-mix(in srgb,transparent,var(--ag-row-loading-skeleton-effect-color) 40%)}to{background-color:var(--ag-row-loading-skeleton-effect-color)}}.ag-loading{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-loading{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-loading{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-ltr) .ag-loading-icon{padding-right:var(--ag-cell-widget-spacing)}:where(.ag-rtl) .ag-loading-icon{padding-left:var(--ag-cell-widget-spacing)}.ag-icon-loading{animation-duration:1s;animation-iteration-count:infinite;animation-name:spin;animation-timing-function:linear}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.ag-header{background-color:var(--ag-header-background-color);border-bottom:var(--ag-header-row-border);color:var(--ag-header-text-color);display:flex;font-family:var(--ag-header-font-family);font-size:var(--ag-header-font-size);font-weight:var(--ag-header-font-weight);overflow:hidden;white-space:nowrap;width:100%}.ag-header-row{height:var(--ag-header-height);position:absolute}.ag-floating-filter-button-button,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,:where(.ag-header-cell-sortable) .ag-header-cell-label,:where(.ag-header-group-cell-selectable) .ag-header-cell-comp-wrapper{cursor:pointer}:where(.ag-ltr) .ag-header-expand-icon{margin-left:4px}:where(.ag-rtl) .ag-header-expand-icon{margin-right:4px}.ag-header-row:where(:not(:first-child)){:where(.ag-header-cell:not(.ag-header-span-height.ag-header-span-total,.ag-header-parent-hidden)),:where(.ag-header-group-cell.ag-header-group-cell-with-group){border-top:var(--ag-header-row-border)}}.ag-header-row:where(:not(.ag-header-row-column-group)){overflow:hidden}:where(.ag-header.ag-header-allow-overflow) .ag-header-row{overflow:visible}.ag-header-cell{display:inline-flex;overflow:hidden}.ag-header-group-cell{contain:paint;display:flex}.ag-header-cell,.ag-header-group-cell{align-items:center;gap:var(--ag-cell-widget-spacing);height:100%;padding:0 var(--ag-cell-horizontal-padding);position:absolute}@property --ag-internal-moving-color{syntax:"<color>";inherits:false;initial-value:transparent}@property --ag-internal-hover-color{syntax:"<color>";inherits:false;initial-value:transparent}.ag-header-cell:where(:not(.ag-floating-filter)):before,.ag-header-group-cell:before{background-image:linear-gradient(var(--ag-internal-hover-color),var(--ag-internal-hover-color)),linear-gradient(var(--ag-internal-moving-color),var(--ag-internal-moving-color));content:"";inset:0;position:absolute;--ag-internal-moving-color:transparent;--ag-internal-hover-color:transparent;transition:--ag-internal-moving-color var(--ag-header-cell-background-transition-duration),--ag-internal-hover-color var(--ag-header-cell-background-transition-duration)}.ag-header-cell:where(:not(.ag-floating-filter)):where(:hover):before,.ag-header-group-cell:where(:hover):before{--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}.ag-header-cell:where(:not(.ag-floating-filter)):where(.ag-header-cell-moving):before,.ag-header-group-cell:where(.ag-header-cell-moving):before{--ag-internal-moving-color:var(--ag-header-cell-moving-background-color);--ag-internal-hover-color:var(--ag-header-cell-hover-background-color)}:where(.ag-header-cell:not(.ag-floating-filter)>*,.ag-header-group-cell>*){position:relative;z-index:1}.ag-header-cell-menu-button:where(:not(.ag-header-menu-always-show)){opacity:0;transition:opacity .2s}.ag-header-cell-filter-button,:where(.ag-header-cell.ag-header-active) .ag-header-cell-menu-button{opacity:1}.ag-header-cell-label,.ag-header-group-cell-label{align-items:center;align-self:stretch;display:flex;flex:1 1 auto;overflow:hidden;padding:5px 0}:where(.ag-ltr) .ag-sort-indicator-icon{padding-left:var(--ag-spacing)}:where(.ag-rtl) .ag-sort-indicator-icon{padding-right:var(--ag-spacing)}.ag-header-cell-label{text-overflow:ellipsis}.ag-header-group-cell-label.ag-sticky-label{flex:none;max-width:100%;overflow:visible;position:sticky}:where(.ag-ltr) .ag-header-group-cell-label.ag-sticky-label{left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-header-group-cell-label.ag-sticky-label{right:var(--ag-cell-horizontal-padding)}.ag-header-cell-text,.ag-header-group-text{overflow:hidden;text-overflow:ellipsis}.ag-header-cell-text{word-break:break-word}.ag-header-cell-comp-wrapper{width:100%}:where(.ag-header-group-cell) .ag-header-cell-comp-wrapper{display:flex}:where(.ag-header-cell:not(.ag-header-cell-auto-height)) .ag-header-cell-comp-wrapper{align-items:center;display:flex;height:100%}.ag-header-cell-wrap-text .ag-header-cell-comp-wrapper{white-space:normal}.ag-header-cell-comp-wrapper-limited-height>*{overflow:hidden}:where(.ag-right-aligned-header) .ag-header-cell-label{flex-direction:row-reverse}:where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-col-ref{color:var(--ag-subtle-text-color)}}:where(.ag-ltr) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-col-ref{margin-right:var(--ag-spacing)}.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell:not(.ag-right-aligned-header)){.ag-header-col-ref{margin-left:var(--ag-spacing)}.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-header-cell.ag-right-aligned-header){.ag-header-col-ref{color:var(--ag-subtle-text-color)}}:where(.ag-ltr) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-col-ref{margin-left:var(--ag-spacing)}.ag-header-label-icon,.ag-header-menu-icon{margin-right:var(--ag-spacing)}}:where(.ag-rtl) :where(.ag-header-cell.ag-right-aligned-header){.ag-header-col-ref{margin-right:var(--ag-spacing)}.ag-header-label-icon,.ag-header-menu-icon{margin-left:var(--ag-spacing)}}.ag-header-cell:after,.ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{content:"";height:var(--ag-header-column-border-height);position:absolute;top:calc(50% - var(--ag-header-column-border-height)*.5);z-index:1}:where(.ag-ltr) .ag-header-cell:after,:where(.ag-ltr) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-right:var(--ag-header-column-border);right:0}:where(.ag-rtl) .ag-header-cell:after,:where(.ag-rtl) .ag-header-group-cell:where(:not(.ag-header-span-height.ag-header-group-cell-no-group)):after{border-left:var(--ag-header-column-border);left:0}.ag-header-highlight-after:after,.ag-header-highlight-before:after{background-color:var(--ag-column-drag-indicator-color);border-radius:calc(var(--ag-column-drag-indicator-width)/2);content:"";height:100%;position:absolute;top:0;width:var(--ag-column-drag-indicator-width)}:where(.ag-ltr) .ag-header-highlight-before:after{left:0}:where(.ag-rtl) .ag-header-highlight-before:after{right:0}:where(.ag-ltr) .ag-header-highlight-after:after{right:0;:where(.ag-pinned-left-header) &{right:1px}}:where(.ag-rtl) .ag-header-highlight-after:after{left:0;:where(.ag-pinned-left-header) &{left:1px}}.ag-header-cell-resize{align-items:center;cursor:ew-resize;display:flex;height:100%;position:absolute;top:0;width:8px;z-index:2}:where(.ag-ltr) .ag-header-cell-resize{right:-3px}:where(.ag-rtl) .ag-header-cell-resize{left:-3px}.ag-header-cell-resize:after{background-color:var(--ag-header-column-resize-handle-color);content:"";height:var(--ag-header-column-resize-handle-height);position:absolute;top:calc(50% - var(--ag-header-column-resize-handle-height)*.5);width:var(--ag-header-column-resize-handle-width);z-index:1}:where(.ag-ltr) .ag-header-cell-resize:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}:where(.ag-rtl) .ag-header-cell-resize:after{right:calc(50% - var(--ag-header-column-resize-handle-width))}:where(.ag-header-cell.ag-header-span-height) .ag-header-cell-resize:after{height:calc(100% - var(--ag-spacing)*4);top:calc(var(--ag-spacing)*2)}.ag-header-group-cell-no-group:where(.ag-header-span-height){display:none}.ag-sort-indicator-container{display:flex;gap:var(--ag-spacing)}.ag-layout-print{&.ag-body{display:block;height:unset}&.ag-root-wrapper{container-type:normal;display:inline-block}.ag-body-horizontal-scroll,.ag-body-vertical-scroll{display:none}&.ag-force-vertical-scroll{overflow-y:visible!important}}@media print{.ag-root-wrapper.ag-layout-print{container-type:normal;display:table;.ag-body-horizontal-scroll-viewport,.ag-body-viewport,.ag-center-cols-container,.ag-center-cols-viewport,.ag-root,.ag-root-wrapper-body,.ag-virtual-list-viewport{display:block!important;height:auto!important;overflow:hidden!important}.ag-cell,.ag-row{-moz-column-break-inside:avoid;break-inside:avoid}}}ag-grid,ag-grid-angular{display:block}.ag-root-wrapper{border:var(--ag-wrapper-border);border-radius:var(--ag-wrapper-border-radius);container-type:inline-size;display:flex;flex-direction:column;overflow:hidden;position:relative;&.ag-layout-normal{height:100%}}.ag-root-wrapper-body{display:flex;flex-direction:row;&.ag-layout-normal{flex:1 1 auto;height:0;min-height:0}}.ag-root{display:flex;flex-direction:column;position:relative;&.ag-layout-auto-height,&.ag-layout-normal{flex:1 1 auto;overflow:hidden;width:0}&.ag-layout-normal{height:100%}}.ag-drag-handle{color:var(--ag-drag-handle-color);cursor:grab;:where(.ag-icon){color:var(--ag-drag-handle-color)}}.ag-chart-menu-icon,.ag-chart-settings-next,.ag-chart-settings-prev,.ag-column-group-icons,.ag-column-select-header-icon,.ag-filter-toolpanel-expand,.ag-floating-filter-button-button,.ag-group-title-bar-icon,.ag-header-cell-filter-button,.ag-header-cell-menu-button,.ag-header-expand-icon,.ag-panel-title-bar-button,.ag-panel-title-bar-button-icon,.ag-set-filter-group-icons,:where(.ag-group-contracted) .ag-icon,:where(.ag-group-expanded) .ag-icon{background-color:var(--ag-icon-button-background-color);border-radius:var(--ag-icon-button-border-radius);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-background-color);color:var(--ag-icon-button-color)}.ag-chart-menu-icon:hover,.ag-chart-settings-next:hover,.ag-chart-settings-prev:hover,.ag-column-group-icons:hover,.ag-column-select-header-icon:hover,.ag-filter-toolpanel-expand:hover,.ag-floating-filter-button-button:hover,.ag-group-title-bar-icon:hover,.ag-header-cell-filter-button:hover,.ag-header-cell-menu-button:hover,.ag-header-expand-icon:hover,.ag-panel-title-bar-button-icon:hover,.ag-panel-title-bar-button:hover,.ag-set-filter-group-icons:hover,:where(.ag-group-contracted) .ag-icon:hover,:where(.ag-group-expanded) .ag-icon:hover{background-color:var(--ag-icon-button-hover-background-color);box-shadow:0 0 0 var(--ag-icon-button-background-spread) var(--ag-icon-button-hover-background-color);color:var(--ag-icon-button-hover-color)}:where(.ag-filter-active),:where(.ag-filter-toolpanel-group-instance-header-icon),:where(.ag-filter-toolpanel-instance-header-icon){position:relative}:where(.ag-filter-active):after,:where(.ag-filter-toolpanel-group-instance-header-icon):after,:where(.ag-filter-toolpanel-instance-header-icon):after{background-color:var(--ag-icon-button-active-indicator-color);border-radius:50%;content:"";height:6px;position:absolute;top:-1px;width:6px}:where(.ag-ltr) :where(.ag-filter-active):after,:where(.ag-ltr) :where(.ag-filter-toolpanel-group-instance-header-icon):after,:where(.ag-ltr) :where(.ag-filter-toolpanel-instance-header-icon):after{right:-1px}:where(.ag-rtl) :where(.ag-filter-active):after,:where(.ag-rtl) :where(.ag-filter-toolpanel-group-instance-header-icon):after,:where(.ag-rtl) :where(.ag-filter-toolpanel-instance-header-icon):after{left:-1px}.ag-filter-active{background-image:linear-gradient(var(--ag-icon-button-active-background-color),var(--ag-icon-button-active-background-color));border-radius:1px;outline:solid var(--ag-icon-button-background-spread) var(--ag-icon-button-active-background-color);:where(.ag-icon-filter){clip-path:path("M8,0C8,4.415 11.585,8 16,8L16,16L0,16L0,0L8,0Z");color:var(--ag-icon-button-active-color)}}',coreDefaults={wrapperBorder:!0,rowBorder:!0,headerRowBorder:!0,footerRowBorder:{ref:"rowBorder"},columnBorder:{style:"solid",width:1,color:"transparent"},headerColumnBorder:!1,headerColumnBorderHeight:"100%",pinnedColumnBorder:!0,pinnedRowBorder:!0,sidePanelBorder:!0,sideBarPanelWidth:250,sideBarBackgroundColor:{ref:"chromeBackgroundColor"},sideButtonBarBackgroundColor:{ref:"sideBarBackgroundColor"},sideButtonBarTopPadding:0,sideButtonSelectedUnderlineWidth:2,sideButtonSelectedUnderlineColor:"transparent",sideButtonSelectedUnderlineTransitionDuration:0,sideButtonBackgroundColor:"transparent",sideButtonTextColor:{ref:"textColor"},sideButtonHoverBackgroundColor:{ref:"sideButtonBackgroundColor"},sideButtonHoverTextColor:{ref:"sideButtonTextColor"},sideButtonSelectedBackgroundColor:backgroundColor,sideButtonSelectedTextColor:{ref:"sideButtonTextColor"},sideButtonBorder:"solid 1px transparent",sideButtonSelectedBorder:!0,sideButtonLeftPadding:{ref:"spacing"},sideButtonRightPadding:{ref:"spacing"},sideButtonVerticalPadding:{calc:"spacing * 3"},cellFontFamily:{ref:"fontFamily"},headerCellHoverBackgroundColor:"transparent",headerCellMovingBackgroundColor:{ref:"headerCellHoverBackgroundColor"},headerCellBackgroundTransitionDuration:"0.2s",cellTextColor:{ref:"textColor"},rangeSelectionBorderStyle:"solid",rangeSelectionBorderColor:accentColor,rangeSelectionBackgroundColor:accentMix(.2),rangeSelectionChartBackgroundColor:"#0058FF1A",rangeSelectionChartCategoryBackgroundColor:"#00FF841A",rangeSelectionHighlightColor:accentMix(.5),rangeHeaderHighlightColor:foregroundHeaderBackgroundMix(.08),rowNumbersSelectedColor:accentMix(.5),rowHoverColor:accentMix(.08),columnHoverColor:accentMix(.05),selectedRowBackgroundColor:accentMix(.12),modalOverlayBackgroundColor:{ref:"backgroundColor",mix:.66},dataBackgroundColor:backgroundColor,oddRowBackgroundColor:{ref:"dataBackgroundColor"},wrapperBorderRadius:8,cellHorizontalPadding:{calc:"spacing * 2 * cellHorizontalPaddingScale"},cellWidgetSpacing:{calc:"spacing * 1.5"},cellHorizontalPaddingScale:1,rowGroupIndentSize:{calc:"cellWidgetSpacing + iconSize"},valueChangeDeltaUpColor:"#43a047",valueChangeDeltaDownColor:"#e53935",valueChangeValueHighlightBackgroundColor:"#16a08580",rowHeight:{calc:"max(iconSize, dataFontSize) + spacing * 3.25 * rowVerticalPaddingScale"},rowVerticalPaddingScale:1,paginationPanelHeight:{ref:"rowHeight",calc:"max(rowHeight, 22px)"},dragHandleColor:foregroundMix(.7),headerColumnResizeHandleHeight:"30%",headerColumnResizeHandleWidth:2,headerColumnResizeHandleColor:{ref:"borderColor"},iconButtonColor:{ref:"iconColor"},iconButtonBackgroundColor:"transparent",iconButtonBackgroundSpread:4,iconButtonBorderRadius:1,iconButtonHoverColor:{ref:"iconButtonColor"},iconButtonHoverBackgroundColor:foregroundMix(.1),iconButtonActiveColor:accentColor,iconButtonActiveBackgroundColor:accentMix(.28),iconButtonActiveIndicatorColor:accentColor,setFilterIndentSize:{ref:"iconSize"},chartMenuPanelWidth:260,chartMenuLabelColor:foregroundMix(.8),cellEditingBorder:{color:accentColor},cellEditingShadow:{ref:"cardShadow"},fullRowEditInvalidBackgroundColor:{ref:"invalidColor",onto:"backgroundColor",mix:.25},columnSelectIndentSize:{ref:"iconSize"},toolPanelSeparatorBorder:!0,columnDropCellBackgroundColor:foregroundMix(.07),columnDropCellTextColor:{ref:"textColor"},columnDropCellDragHandleColor:{ref:"textColor"},columnDropCellBorder:{color:foregroundMix(.13)},selectCellBackgroundColor:foregroundMix(.07),selectCellBorder:{color:foregroundMix(.13)},advancedFilterBuilderButtonBarBorder:!0,advancedFilterBuilderIndentSize:{calc:"spacing * 2 + iconSize"},advancedFilterBuilderJoinPillColor:"#f08e8d",advancedFilterBuilderColumnPillColor:"#a6e194",advancedFilterBuilderOptionPillColor:"#f3c08b",advancedFilterBuilderValuePillColor:"#85c0e4",filterPanelApplyButtonColor:backgroundColor,filterPanelApplyButtonBackgroundColor:accentColor,filterPanelCardSubtleColor:{ref:"textColor",mix:.7},filterPanelCardSubtleHoverColor:{ref:"textColor"},findMatchColor:foregroundColor,findMatchBackgroundColor:"#ffff00",findActiveMatchColor:foregroundColor,findActiveMatchBackgroundColor:"#ffa500",filterToolPanelGroupIndent:{ref:"spacing"},rowLoadingSkeletonEffectColor:foregroundMix(.15),statusBarLabelColor:foregroundColor,statusBarLabelFontWeight:500,statusBarValueColor:foregroundColor,statusBarValueFontWeight:500,pinnedSourceRowTextColor:{ref:"textColor"},pinnedSourceRowBackgroundColor:{ref:"dataBackgroundColor"},pinnedSourceRowFontWeight:600,pinnedRowFontWeight:600,pinnedRowBackgroundColor:{ref:"dataBackgroundColor"},pinnedRowTextColor:{ref:"textColor"},rowDragIndicatorColor:{ref:"rangeSelectionBorderColor"},rowDragIndicatorWidth:2,columnDragIndicatorColor:{ref:"accentColor"},columnDragIndicatorWidth:2},batchEditStyleDefaultCSS=".ag-cell-batch-edit{background-color:var(--ag-cell-batch-edit-background-color);color:var(--ag-cell-batch-edit-text-color);display:inherit}.ag-row-batch-edit{background-color:var(--ag-row-batch-edit-background-color);color:var(--ag-row-batch-edit-text-color)}",baseParams={cellBatchEditBackgroundColor:"rgba(220 181 139 / 16%)",cellBatchEditTextColor:"#422f00",rowBatchEditBackgroundColor:{ref:"cellBatchEditBackgroundColor"},rowBatchEditTextColor:{ref:"cellBatchEditTextColor"}},baseDarkBatchEditParams={...baseParams,cellBatchEditTextColor:"#f3d0b3"},makeBatchEditStyleBaseTreeShakeable=()=>createPart({feature:"batchEditStyle",params:baseParams,css:batchEditStyleDefaultCSS}),batchEditStyleBase=makeBatchEditStyleBaseTreeShakeable(),buttonStyleBaseCSS=":where(.ag-button){background:none;border:none;color:inherit;cursor:pointer;font-family:inherit;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;margin:0;padding:0;text-indent:inherit;text-shadow:inherit;text-transform:inherit;word-spacing:inherit;&:disabled{cursor:default}&:focus-visible{box-shadow:var(--ag-focus-shadow);outline:none}}.ag-standard-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:var(--ag-button-background-color);border:var(--ag-button-border);border-radius:var(--ag-button-border-radius);color:var(--ag-button-text-color);cursor:pointer;font-weight:var(--ag-button-font-weight);padding:var(--ag-button-vertical-padding) var(--ag-button-horizontal-padding);&:active{background-color:var(--ag-button-active-background-color);border:var(--ag-button-active-border);color:var(--ag-button-active-text-color)}&:disabled{background-color:var(--ag-button-disabled-background-color);border:var(--ag-button-disabled-border);color:var(--ag-button-disabled-text-color)}}.ag-standard-button:hover{background-color:var(--ag-button-hover-background-color);border:var(--ag-button-hover-border);color:var(--ag-button-hover-text-color)}",baseParams2={buttonTextColor:"inherit",buttonFontWeight:"normal",buttonBackgroundColor:"transparent",buttonBorder:!1,buttonBorderRadius:{ref:"borderRadius"},buttonHorizontalPadding:{calc:"spacing * 2"},buttonVerticalPadding:{ref:"spacing"},buttonHoverTextColor:{ref:"buttonTextColor"},buttonHoverBackgroundColor:{ref:"buttonBackgroundColor"},buttonHoverBorder:{ref:"buttonBorder"},buttonActiveTextColor:{ref:"buttonHoverTextColor"},buttonActiveBackgroundColor:{ref:"buttonHoverBackgroundColor"},buttonActiveBorder:{ref:"buttonHoverBorder"},buttonDisabledTextColor:{ref:"inputDisabledTextColor"},buttonDisabledBackgroundColor:{ref:"inputDisabledBackgroundColor"},buttonDisabledBorder:{ref:"inputDisabledBorder"}},makeButtonStyleQuartzTreeShakeable=()=>createPart({feature:"buttonStyle",params:{...baseParams2,buttonBackgroundColor:backgroundColor,buttonBorder:!0,buttonHoverBackgroundColor:{ref:"rowHoverColor"},buttonActiveBorder:{color:accentColor}},css:buttonStyleBaseCSS}),buttonStyleQuartz=makeButtonStyleQuartzTreeShakeable(),columnDropStyleBorderedCSS=".ag-column-drop-vertical-empty-message{align-items:center;border:dashed var(--ag-border-width);border-color:var(--ag-border-color);display:flex;inset:0;justify-content:center;margin:calc(var(--ag-spacing)*1.5) calc(var(--ag-spacing)*2);overflow:hidden;padding:calc(var(--ag-spacing)*2);position:absolute}",makeColumnDropStyleBorderedTreeShakeable=()=>createPart({feature:"columnDropStyle",css:columnDropStyleBorderedCSS}),columnDropStyleBordered=makeColumnDropStyleBorderedTreeShakeable(),baseParams3={formulaToken1Color:"#3269c6",formulaToken1BackgroundColor:{ref:"formulaToken1Color",mix:.08},formulaToken1Border:{color:{ref:"formulaToken1Color"}},formulaToken2Color:"#c0343f",formulaToken2BackgroundColor:{ref:"formulaToken2Color",mix:.06},formulaToken2Border:{color:{ref:"formulaToken2Color"}},formulaToken3Color:"#8156b8",formulaToken3BackgroundColor:{ref:"formulaToken3Color",mix:.08},formulaToken3Border:{color:{ref:"formulaToken3Color"}},formulaToken4Color:"#007c1f",formulaToken4BackgroundColor:{ref:"formulaToken4Color",mix:.06},formulaToken4Border:{color:{ref:"formulaToken4Color"}},formulaToken5Color:"#b03e85",formulaToken5BackgroundColor:{ref:"formulaToken5Color",mix:.08},formulaToken5Border:{color:{ref:"formulaToken5Color"}},formulaToken6Color:"#b74900",formulaToken6BackgroundColor:{ref:"formulaToken6Color",mix:.06},formulaToken6Border:{color:{ref:"formulaToken6Color"}},formulaToken7Color:"#247492",formulaToken7BackgroundColor:{ref:"formulaToken7Color",mix:.08},formulaToken7Border:{color:{ref:"formulaToken7Color"}}},makeBatchEditStyleBaseTreeShakeable2=()=>createPart({feature:"formulaStyle",params:baseParams3}),formulaStyleBase=makeBatchEditStyleBaseTreeShakeable2(),gridThemeLogger={warn:(...e)=>{_warn(e[0],e[1])},error:(...e)=>{_error(e[0],e[1])},preInitErr:(...e)=>{_logPreInitErr(e[0],e[2],e[1])}},createTheme=()=>createSharedTheme(gridThemeLogger).withParams(coreDefaults).withPart(buttonStyleQuartz).withPart(columnDropStyleBordered).withPart(batchEditStyleBase).withPart(formulaStyleBase),checkboxStyleDefaultCSS='.ag-checkbox-input-wrapper,.ag-radio-button-input-wrapper{background-color:var(--ag-checkbox-unchecked-background-color);border:solid var(--ag-checkbox-border-width) var(--ag-checkbox-unchecked-border-color);flex:none;height:var(--ag-icon-size);position:relative;width:var(--ag-icon-size);&:where(.ag-checked){background-color:var(--ag-checkbox-checked-background-color);border-color:var(--ag-checkbox-checked-border-color)}&:where(.ag-checked):after{background-color:var(--ag-checkbox-checked-shape-color)}&:where(.ag-disabled){filter:grayscale();opacity:.5}}.ag-checkbox-input,.ag-radio-button-input{-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;display:block;height:var(--ag-icon-size);margin:0;opacity:0;width:var(--ag-icon-size)}.ag-checkbox-input-wrapper:after,.ag-radio-button-input-wrapper:after{content:"";display:block;inset:0;-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;pointer-events:none;position:absolute}.ag-checkbox-input-wrapper:where(:focus-within,:active),.ag-radio-button-input-wrapper:where(:focus-within,:active){box-shadow:var(--ag-focus-shadow)}.ag-checkbox-input-wrapper{border-radius:var(--ag-checkbox-border-radius);&:where(.ag-checked):after{-webkit-mask-image:var(--ag-checkbox-checked-shape-image);mask-image:var(--ag-checkbox-checked-shape-image)}&:where(.ag-indeterminate){background-color:var(--ag-checkbox-indeterminate-background-color);border-color:var(--ag-checkbox-indeterminate-border-color)}&:where(.ag-indeterminate):after{background-color:var(--ag-checkbox-indeterminate-shape-color);-webkit-mask-image:var(--ag-checkbox-indeterminate-shape-image);mask-image:var(--ag-checkbox-indeterminate-shape-image)}}.ag-cell-editing-error .ag-checkbox-input-wrapper:focus-within{box-shadow:var(--ag-focus-error-shadow)}.ag-radio-button-input-wrapper{border-radius:100%;&:where(.ag-checked):after{-webkit-mask-image:var(--ag-radio-checked-shape-image);mask-image:var(--ag-radio-checked-shape-image)}}',makeCheckboxStyleDefaultTreeShakeable=()=>createPart({feature:"checkboxStyle",params:{checkboxBorderWidth:1,checkboxBorderRadius:{ref:"borderRadius"},checkboxUncheckedBackgroundColor:backgroundColor,checkboxUncheckedBorderColor:foregroundBackgroundMix(.3),checkboxCheckedBackgroundColor:accentColor,checkboxCheckedBorderColor:{ref:"checkboxCheckedBackgroundColor"},checkboxCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="7" fill="none"><path stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75" d="M1 3.5 3.5 6l5-5"/></svg>'},checkboxCheckedShapeColor:backgroundColor,checkboxIndeterminateBackgroundColor:foregroundBackgroundMix(.3),checkboxIndeterminateBorderColor:{ref:"checkboxIndeterminateBackgroundColor"},checkboxIndeterminateShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="10" height="2" fill="none"><rect width="10" height="2" fill="#000" rx="1"/></svg>'},checkboxIndeterminateShapeColor:backgroundColor,radioCheckedShapeImage:{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="6" height="6" fill="none"><circle cx="3" cy="3" r="3" fill="#000"/></svg>'}},css:checkboxStyleDefaultCSS}),checkboxStyleDefault=makeCheckboxStyleDefaultTreeShakeable(),darkParams=()=>({...defaultLightColorSchemeParams,...baseDarkBatchEditParams,backgroundColor:"hsl(217, 0%, 17%)",foregroundColor:"#FFF",chromeBackgroundColor:foregroundBackgroundMix(.05),rowHoverColor:accentMix(.15),selectedRowBackgroundColor:accentMix(.2),menuBackgroundColor:foregroundBackgroundMix(.1),browserColorScheme:"dark",popupShadow:"0 0px 20px #000A",cardShadow:"0 1px 4px 1px #000A",advancedFilterBuilderJoinPillColor:"#7a3a37",advancedFilterBuilderColumnPillColor:"#355f2d",advancedFilterBuilderOptionPillColor:"#5a3168",advancedFilterBuilderValuePillColor:"#374c86",filterPanelApplyButtonColor:foregroundColor,findMatchColor:backgroundColor,findActiveMatchColor:backgroundColor,checkboxUncheckedBorderColor:foregroundBackgroundMix(.4),toggleButtonOffBackgroundColor:foregroundBackgroundMix(.4),rowBatchEditBackgroundColor:foregroundBackgroundMix(.1),formulaToken1Color:"#4da3e5",formulaToken2Color:"#f55864",formulaToken3Color:"#b688f2",formulaToken4Color:"#24bb4a",formulaToken5Color:"#e772ba",formulaToken6Color:"#f69b5f",formulaToken7Color:"#a3e6ff"}),darkBlueParams=()=>({...darkParams(),backgroundColor:"#1f2836"}),makeColorSchemeVariableTreeShakeable=()=>createPart({feature:"colorScheme",params:defaultLightColorSchemeParams,modeParams:{light:defaultLightColorSchemeParams,dark:darkParams(),"dark-blue":darkBlueParams()}}),colorSchemeVariable=makeColorSchemeVariableTreeShakeable(),iconNameToSvgFragment={aggregation:'<path d="M18 7V4H6l6 8-6 8h12v-3"/>',arrows:'<polyline points="5 9 2 12 5 15"/><polyline points="9 5 12 2 15 5"/><polyline points="15 19 12 22 9 19"/><polyline points="19 9 22 12 19 15"/><line x1="2" x2="22" y1="12" y2="12"/><line x1="12" x2="12" y1="2" y2="22"/>',asc:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>',cancel:'<path d="m18 6-12 12"/><path d="m6 6 12 12"/>',chart:'<line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/>',"color-picker":'<path d="m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z"/><path d="m5 2 5 5"/><path d="M2 13h15"/><path d="M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z"/>',columns:'<path d="M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18"/>',contracted:'<path d="m9 18 6-6-6-6"/>',copy:'<rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/>',cross:'<path d="M18 6 6 18"/><path d="m6 6 12 12"/>',csv:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',cut:'<circle cx="6" cy="6" r="3"/><path d="M8.12 8.12 12 12"/><path d="M20 4 8.12 15.88"/><circle cx="6" cy="18" r="3"/><path d="M14.8 14.8 20 20"/>',desc:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',down:'<path d="M12 5v14"/><path d="m19 12-7 7-7-7"/>',excel:'<path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><path d="M8 13h2"/><path d="M8 17h2"/><path d="M14 13h2"/><path d="M14 17h2"/>',expanded:'<path d="m15 18-6-6 6-6"/>',eye:'<path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/>',"eye-slash":'<path d="M9.88 9.88a3 3 0 1 0 4.24 4.24"/><path d="M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"/><path d="M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"/><line x1="2" x2="22" y1="2" y2="22"/>',filter:'<path d="M3 6h18"/><path d="M7 12h10"/><path d="M10 18h4"/>',first:'<path d="m17 18-6-6 6-6"/><path d="M7 6v12"/>',grip:'<circle cx="5" cy="8" r="0.5"/><circle cx="12" cy="8" r="0.5"/><circle cx="19" cy="8" r="0.5"/><circle cx="5" cy="16" r="0.5"/><circle cx="12" cy="16" r="0.5"/><circle cx="19" cy="16" r="0.5"/><g stroke="none" fill="currentColor"><circle cx="5" cy="8" r="1"/><circle cx="12" cy="8" r="1"/><circle cx="19" cy="8" r="1"/><circle cx="5" cy="16" r="1"/><circle cx="12" cy="16" r="1"/><circle cx="19" cy="16" r="1"/></g>',group:'<path d="M16 12H3"/><path d="M16 18H3"/><path d="M10 6H3"/><path d="M21 18V8a2 2 0 0 0-2-2h-5"/><path d="m16 8-2-2 2-2"/>',last:'<path d="m7 18 6-6-6-6"/><path d="M17 6v12"/>',left:'<path d="m12 19-7-7 7-7"/><path d="M19 12H5"/>',linked:'<path d="M9 17H7A5 5 0 0 1 7 7h2"/><path d="M15 7h2a5 5 0 1 1 0 10h-2"/><line x1="8" x2="16" y1="12" y2="12"/>',loading:'<line x1="12" x2="12" y1="2" y2="6"/><line x1="12" x2="12" y1="18" y2="22"/><line x1="4.93" x2="7.76" y1="4.93" y2="7.76"/><line x1="16.24" x2="19.07" y1="16.24" y2="19.07"/><line x1="2" x2="6" y1="12" y2="12"/><line x1="18" x2="22" y1="12" y2="12"/><line x1="4.93" x2="7.76" y1="19.07" y2="16.24"/><line x1="16.24" x2="19.07" y1="7.76" y2="4.93"/>',maximize:'<polyline points="15 3 21 3 21 9"/><polyline points="9 21 3 21 3 15"/><line x1="21" x2="14" y1="3" y2="10"/><line x1="3" x2="10" y1="21" y2="14"/>',menu:'<line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/>',"menu-alt":'<circle cx="12" cy="5" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="12" r="0.75" fill="#D9D9D9"/><circle cx="12" cy="19" r="0.75" fill="#D9D9D9"/>',minimize:'<polyline points="4 14 10 14 10 20"/><polyline points="20 10 14 10 14 4"/><line x1="14" x2="21" y1="10" y2="3"/><line x1="3" x2="10" y1="21" y2="14"/>',minus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/>',next:'<path d="m9 18 6-6-6-6"/>',none:'<path d="m7 15 5 5 5-5"/><path d="m7 9 5-5 5 5"/>',"not-allowed":'<circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/>',paste:'<path d="M15 2H9a1 1 0 0 0-1 1v2c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V3c0-.6-.4-1-1-1Z"/><path d="M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2M16 4h2a2 2 0 0 1 2 2v2M11 14h10"/><path d="m17 10 4 4-4 4"/>',pin:'<line x1="12" x2="12" y1="17" y2="22"/><path d="M5 17h14v-1.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V6h1a2 2 0 0 0 0-4H8a2 2 0 0 0 0 4h1v4.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24Z"/>',pivot:'<path d="M15 3v18"/><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M21 9H3"/><path d="M21 15H3"/>',plus:'<circle cx="12" cy="12" r="10"/><path d="M8 12h8"/><path d="M12 8v8"/>',previous:'<path d="m15 18-6-6 6-6"/>',right:'<path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>',save:'<path d="M12 17V3"/><path d="m6 11 6 6 6-6"/><path d="M19 21H5"/>',settings:'<path d="M20 7h-9"/><path d="M14 17H5"/><circle cx="17" cy="17" r="3"/><circle cx="7" cy="7" r="3"/>',"small-left":'<path d="m15 18-6-6 6-6"/>',"small-right":'<path d="m9 18 6-6-6-6"/>',tick:'<path d="M20 6 9 17l-5-5"/>',"tree-closed":'<path d="m9 18 6-6-6-6"/>',"tree-indeterminate":'<path d="M5 12h14"/>',"tree-open":'<path d="m6 9 6 6 6-6"/>',unlinked:'<path d="M9 17H7A5 5 0 0 1 7 7"/><path d="M15 7h2a5 5 0 0 1 4 8"/><line x1="8" x2="12" y1="12" y2="12"/><line x1="2" x2="22" y1="2" y2="22"/>',up:'<path d="m5 12 7-7 7 7"/><path d="M12 19V5"/>'},iconNameToFullSvg={aasc:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M13.2012 8.07928C13.6346 8.0793 14.0128 8.15365 14.3359 8.30193C14.6609 8.45018 14.9141 8.65595 15.0947 8.9201C15.2754 9.18439 15.3683 9.49109 15.374 9.83904H14.1904C14.1676 9.60898 14.0695 9.4303 13.8965 9.30291C13.7235 9.1756 13.4889 9.1115 13.1924 9.1115C12.9909 9.1115 12.8204 9.1404 12.6816 9.19744C12.543 9.25255 12.4364 9.32917 12.3623 9.42791C12.2901 9.52678 12.2539 9.63933 12.2539 9.76482C12.2501 9.8692 12.272 9.9604 12.3193 10.0383C12.3688 10.1162 12.4369 10.1843 12.5225 10.2414C12.6079 10.2964 12.7064 10.3451 12.8184 10.3869C12.9304 10.4268 13.0505 10.4609 13.1777 10.4894L13.7031 10.6144C13.9578 10.6715 14.1914 10.7479 14.4043 10.8429C14.6173 10.938 14.8021 11.0547 14.958 11.1935C15.1138 11.3323 15.2348 11.4957 15.3203 11.6838C15.4077 11.8719 15.4522 12.088 15.4541 12.3312C15.4522 12.6885 15.3611 12.9986 15.1807 13.2609C15.0019 13.5214 14.7427 13.7248 14.4043 13.8693C14.0678 14.0118 13.6617 14.0832 13.1865 14.0832C12.7153 14.0832 12.3048 14.0107 11.9551 13.8664C11.6071 13.7219 11.3345 13.5071 11.1387 13.2238C10.9449 12.9387 10.8435 12.5862 10.834 12.1662H12.0283C12.0416 12.362 12.0984 12.5252 12.1973 12.6564C12.298 12.7857 12.4323 12.8838 12.5996 12.9504C12.7688 13.0149 12.96 13.047 13.1729 13.047C13.3817 13.047 13.563 13.0169 13.7168 12.9562C13.8727 12.8954 13.9935 12.8106 14.0791 12.7023C14.1647 12.5939 14.208 12.469 14.208 12.3283C14.2079 12.1974 14.1686 12.0875 14.0908 11.9982C14.0148 11.9089 13.9022 11.8324 13.7539 11.7697C13.6076 11.707 13.4276 11.6501 13.2148 11.5988L12.5791 11.4387C12.0869 11.3189 11.6982 11.1318 11.4131 10.8771C11.128 10.6224 10.9855 10.2793 10.9873 9.84783C10.9854 9.49418 11.0804 9.18439 11.2705 8.9201C11.4625 8.65603 11.7261 8.45015 12.0605 8.30193C12.3951 8.15369 12.7754 8.07928 13.2012 8.07928Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M5.8125 14.0002H4.48926L4.05664 12.6681H1.94824L1.51465 14.0002H0.19043L2.20703 8.15935H3.79883L5.8125 14.0002ZM2.26172 11.7043H3.74316L3.02539 9.49334H2.98047L2.26172 11.7043Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M8.45215 8.15935C8.88165 8.15935 9.24031 8.22251 9.52734 8.34978C9.81445 8.47717 10.0303 8.65477 10.1748 8.88103C10.3192 9.10536 10.3916 9.36368 10.3916 9.65642C10.3916 9.88452 10.3461 10.085 10.2549 10.258C10.1637 10.4289 10.0384 10.5696 9.87891 10.6799C9.72117 10.7882 9.54024 10.8657 9.33691 10.9113V10.9679C9.55917 10.9775 9.76716 11.0406 9.96094 11.1564C10.1568 11.2724 10.3158 11.4356 10.4375 11.6447C10.5591 11.8519 10.6201 12.099 10.6201 12.3859C10.6201 12.6958 10.5427 12.9727 10.3887 13.216C10.2366 13.4573 10.0113 13.6486 9.71289 13.7892C9.41443 13.9299 9.04655 14.0002 8.60938 14.0002H6.11426V8.15935H8.45215ZM7.34863 12.9904H8.35547C8.69943 12.9904 8.95057 12.9252 9.1084 12.7941C9.26621 12.661 9.34473 12.4834 9.34473 12.2629C9.34468 12.1014 9.30643 11.9587 9.22852 11.8351C9.15056 11.7116 9.03903 11.6145 8.89453 11.5441C8.75195 11.4738 8.58148 11.4387 8.38379 11.4387H7.34863V12.9904ZM7.34863 10.6037H8.26465C8.43369 10.6036 8.58376 10.5737 8.71484 10.5148C8.84793 10.454 8.95227 10.3683 9.02832 10.258C9.10628 10.1477 9.14551 10.0155 9.14551 9.8615C9.14546 9.65055 9.07008 9.48001 8.91992 9.35076C8.77165 9.22169 8.56064 9.15741 8.28711 9.1574H7.34863V10.6037Z" fill="black"/><path d="M7.16602 0.377127C7.44584 0.189493 7.82551 0.20905 8.08496 0.442557L11.418 3.44256C11.7257 3.71966 11.7507 4.19428 11.4736 4.50213C11.1966 4.80961 10.7228 4.83441 10.415 4.55779L7.60938 2.03338L5.11328 4.53045C4.82042 4.82326 4.34562 4.82322 4.05273 4.53045C3.75986 4.23757 3.75989 3.7628 4.05273 3.4699L7.05273 0.4699L7.16602 0.377127Z" fill="black"/></svg>',adesc:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10.3867 11.4697C10.6796 11.1771 11.1544 11.1769 11.4473 11.4697C11.7399 11.7626 11.7399 12.2374 11.4473 12.5303L8.44727 15.5303L8.33398 15.623C8.05425 15.8106 7.67449 15.7909 7.41504 15.5576L4.08203 12.5576C3.77415 12.2805 3.74927 11.8059 4.02637 11.498C4.30342 11.1907 4.77722 11.1657 5.08496 11.4424L7.89062 13.9668L10.3867 11.4697Z" fill="black"/><path d="M13.2012 3.0791C13.6346 3.07912 14.0128 3.1535 14.3359 3.30176C14.6611 3.45006 14.9141 3.65661 15.0947 3.9209C15.2752 4.18513 15.3683 4.49104 15.374 4.83887H14.1904C14.1676 4.60882 14.0695 4.43012 13.8965 4.30273C13.7235 4.17546 13.4889 4.11133 13.1924 4.11133C12.9909 4.11133 12.8204 4.14023 12.6816 4.19727C12.5431 4.25236 12.4364 4.32902 12.3623 4.42773C12.2901 4.52659 12.2539 4.63919 12.2539 4.76465C12.2501 4.86901 12.272 4.96023 12.3193 5.03809C12.3688 5.11604 12.4369 5.18417 12.5225 5.24121C12.6079 5.29623 12.7064 5.34496 12.8184 5.38672C12.9304 5.42661 13.0505 5.46075 13.1777 5.48926L13.7031 5.61426C13.9578 5.67128 14.1914 5.74776 14.4043 5.84277C14.6172 5.93784 14.8021 6.05457 14.958 6.19336C15.1139 6.33216 15.2348 6.49633 15.3203 6.68457C15.4076 6.8727 15.4522 7.08885 15.4541 7.33203C15.4521 7.68929 15.3612 7.99944 15.1807 8.26172C15.0019 8.52216 14.7427 8.72465 14.4043 8.86914C14.0678 9.01165 13.6617 9.08301 13.1865 9.08301C12.7153 9.08299 12.3048 9.01057 11.9551 8.86621C11.6072 8.72173 11.3345 8.50786 11.1387 8.22461C10.9447 7.9394 10.8435 7.58622 10.834 7.16602H12.0283C12.0416 7.36176 12.0985 7.52509 12.1973 7.65625C12.298 7.78554 12.4323 7.88365 12.5996 7.9502C12.7688 8.01477 12.96 8.04785 13.1729 8.04785C13.3817 8.04781 13.5629 8.01678 13.7168 7.95605C13.8727 7.89522 13.9935 7.81051 14.0791 7.70215C14.1646 7.59387 14.2079 7.46965 14.208 7.3291C14.208 7.19796 14.1687 7.08739 14.0908 6.99805C14.0148 6.90868 13.9022 6.83228 13.7539 6.76953C13.6076 6.70685 13.4276 6.64993 13.2148 6.59863L12.5791 6.43848C12.0868 6.31871 11.6982 6.13163 11.4131 5.87695C11.1279 5.62221 10.9855 5.27916 10.9873 4.84766C10.9854 4.49404 11.0804 4.18517 11.2705 3.9209C11.4625 3.65661 11.7259 3.45006 12.0605 3.30176C12.3951 3.15353 12.7754 3.0791 13.2012 3.0791Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M5.8125 9H4.48926L4.05664 7.66797H1.94824L1.51465 9H0.19043L2.20703 3.15918H3.79883L5.8125 9ZM2.26172 6.7041H3.74316L3.02539 4.49414H2.98047L2.26172 6.7041Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M8.45215 3.15918C8.88181 3.15918 9.24025 3.22322 9.52734 3.35059C9.81445 3.47798 10.0303 3.6546 10.1748 3.88086C10.3193 4.10518 10.3916 4.36351 10.3916 4.65625C10.3916 4.88432 10.3461 5.08484 10.2549 5.25781C10.1636 5.4289 10.0386 5.57039 9.87891 5.68066C9.72118 5.78898 9.54022 5.86549 9.33691 5.91113V5.96875C9.55913 5.9783 9.76719 6.04044 9.96094 6.15625C10.1568 6.27223 10.3158 6.43538 10.4375 6.64453C10.5591 6.85173 10.6201 7.09875 10.6201 7.38574C10.6201 7.69567 10.5427 7.97245 10.3887 8.21582C10.2366 8.45719 10.0113 8.64841 9.71289 8.78906C9.41442 8.9297 9.04658 8.99999 8.60938 9H6.11426V3.15918H8.45215ZM7.34863 7.99023H8.35547C8.69948 7.99023 8.95057 7.92504 9.1084 7.79395C9.26621 7.66085 9.34473 7.48325 9.34473 7.2627C9.34466 7.10125 9.3064 6.95844 9.22852 6.83496C9.15056 6.71143 9.03899 6.61427 8.89453 6.54395C8.75196 6.47365 8.58145 6.43848 8.38379 6.43848H7.34863V7.99023ZM7.34863 5.60352H8.26465C8.43369 5.60347 8.58376 5.57354 8.71484 5.51465C8.84791 5.45381 8.95228 5.36807 9.02832 5.25781C9.10623 5.14755 9.14551 5.01529 9.14551 4.86133C9.14542 4.65046 9.07002 4.48078 8.91992 4.35156C8.77163 4.22228 8.56087 4.15724 8.28711 4.15723H7.34863V5.60352Z" fill="black"/></svg>',"chevron-down":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 6L8 10L4 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-left":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 12L6 8L10 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-right":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 12L10 8L6 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"chevron-up":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4 10L8 6L12 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>',"column-arrow":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 32 32"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 26C0 28.2092 1.79086 30 4 30H14C16.2091 30 18 28.2092 18 26V15H25.8786L24.4394 16.4393C23.8536 17.0251 23.8536 17.9749 24.4394 18.5607C25.0252 19.1464 25.9748 19.1464 26.5606 18.5607L30.5606 14.5607C31.1464 13.9749 31.1464 13.0251 30.5606 12.4393L26.5606 8.43934C25.9748 7.85356 25.0252 7.85356 24.4394 8.43934C23.8536 9.02512 23.8536 9.97488 24.4394 10.5607L25.8786 12H18V6C18 3.79086 16.2091 2 14 2H4C1.79086 2 0 3.79086 0 6V26ZM14 5H10.5V12H15V6C15 5.44772 14.5523 5 14 5ZM4 5H7.5V12H3V6C3 5.44772 3.44772 5 4 5ZM10.5 15H15V26C15 26.5522 14.5523 27 14 27H10.5V15ZM4 27H7.5V15H3V26C3 26.5522 3.44772 27 4 27Z" fill="currentColor"/></svg>',edit:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 10.6262V12.5012H5.375L10.905 6.97122L9.03 5.09622L3.5 10.6262ZM12.355 5.52122C12.4014 5.47497 12.4381 5.42002 12.4632 5.35953C12.4883 5.29905 12.5012 5.23421 12.5012 5.16872C12.5012 5.10324 12.4883 5.0384 12.4632 4.97791C12.4381 4.91742 12.4014 4.86248 12.355 4.81622L11.185 3.64622C11.1387 3.59987 11.0838 3.5631 11.0233 3.53801C10.9628 3.51291 10.898 3.5 10.8325 3.5C10.767 3.5 10.7022 3.51291 10.6417 3.53801C10.5812 3.5631 10.5263 3.59987 10.48 3.64622L9.565 4.56122L11.44 6.43622L12.355 5.52122Z" fill="currentColor"/></svg>',"filter-add":'<svg width="16" height="16" viewBox="0 0 16 16" class="ag-icon" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.12126 7.75L10.8517 7.75" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M6.65934 11.748L9.32778 11.748" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M12.2943 1.04872V6.19184M14.9886 3.74341H9.68478" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><path d="M8.25488 3C8.04799 3.18323 7.91706 3.45099 7.91699 3.74902C7.91713 4.04868 8.04988 4.31681 8.25879 4.5H2C1.58579 4.5 1.25 4.16421 1.25 3.75C1.25 3.33579 1.58579 3 2 3H8.25488Z" fill="currentColor"/></svg>',"pinned-bottom":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M3.47 12.28A.75.75 0 0 1 4 11h8a.75.75 0 0 1 0 1.5H4a.75.75 0 0 1-.53-.22ZM12.731 5.256a.75.75 0 0 1-.2.524l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 1 1 1.06-1.06l2.72 2.72V2a.75.75 0 0 1 1.5 0v5.44l2.72-2.72a.75.75 0 0 1 1.26.536Z"/></svg>',"pinned-top":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" viewBox="0 0 16 16"><path fill="currentColor" d="M12.53 3.72A.75.75 0 0 1 12 5H4a.75.75 0 0 1 0-1.5h8a.75.75 0 0 1 .53.22ZM3.269 10.744a.75.75 0 0 1 .2-.524l4-4a.75.75 0 0 1 1.06 0l4 4a.75.75 0 1 1-1.06 1.06L8.75 8.56V14a.75.75 0 0 1-1.5 0V8.56l-2.72 2.72a.75.75 0 0 1-1.26-.536Z"/></svg>',"small-down":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 10.667 16 21.334l8.667-10.667H7.334Z"/></svg>',"small-up":'<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="black" stroke="none" viewBox="0 0 32 32"><path d="M7.334 21.333 16 10.666l8.667 10.667H7.334Z"/></svg>',"un-pin":'<svg xmlns="http://www.w3.org/2000/svg" fill="none" class="ag-icon" viewBox="0 0 16 16"><path fill="currentColor" d="M8 11a.75.75 0 0 0-.75.75v3.333a.75.75 0 1 0 1.5 0V11.75A.75.75 0 0 0 8 11Z"/><path fill="currentColor" d="M13.11 1.436a.75.75 0 0 0-1.22-.872l-10 14a.75.75 0 1 0 1.22.872L5.207 12.5h7.376a.75.75 0 0 0 .75-.75v-1.174a2.08 2.08 0 0 0-1.153-1.863l-1.185-.599-.005-.002a.58.58 0 0 1-.323-.522V5.165a2.083 2.083 0 0 0 1.854-2.904l.589-.825Zm-3.943 5.52v.634a2.08 2.08 0 0 0 1.153 1.863l1.185.6.005.002a.58.58 0 0 1 .323.522V11H6.28l2.887-4.044ZM9.277 1H5.25a2.084 2.084 0 0 0-.083 4.165v1.676l1.5-2.132v-.292a.75.75 0 0 0-.75-.75H5.25a.584.584 0 0 1 0-1.167h2.972L9.277 1Z"/></svg>'},getQuartzIconsCss=(e={})=>{let t="";for(const n of[...Object.keys(iconNameToSvgFragment),...Object.keys(iconNameToFullSvg)]){const o=quartzIconSvg(n,e.strokeWidth);t+=`.ag-icon-${n}::before { mask-image: url('data:image/svg+xml,${encodeURIComponent(o)}'); }
`}return t},quartzIconSvg=(e,t=1.5)=>{const n=iconNameToFullSvg[e];if(n)return n;const o=iconNameToSvgFragment[e];if(!o)throw new Error(`Missing icon data for ${e}`);return`<svg xmlns="http://www.w3.org/2000/svg" class="ag-icon" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke="black" stroke-width="${t}" viewBox="0 0 24 24"><style>* { vector-effect: non-scaling-stroke; }</style>`+o+"</svg>"},iconSetQuartz=(e={})=>createPart({feature:"iconSet",css:()=>getQuartzIconsCss(e)}),iconSetQuartzRegular=iconSetQuartz(),inputStyleBaseCSS=':where(.ag-input-field-input[type=number]:not(.ag-number-field-input-stepper)){-webkit-appearance:textfield;-moz-appearance:textfield;appearance:textfield;&::-webkit-inner-spin-button,&::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none;margin:0}}.ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){background-color:var(--ag-input-background-color);border:var(--ag-input-border);border-radius:var(--ag-input-border-radius);color:var(--ag-input-text-color);font-family:inherit;font-size:inherit;line-height:inherit;margin:0;min-height:var(--ag-input-height);padding:0;&:where(:disabled){background-color:var(--ag-input-disabled-background-color);border:var(--ag-input-disabled-border);color:var(--ag-input-disabled-text-color)}&:where(:focus){background-color:var(--ag-input-focus-background-color);border:var(--ag-input-focus-border);box-shadow:var(--ag-input-focus-shadow);color:var(--ag-input-focus-text-color);outline:none}&:where(:invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}&::-moz-placeholder{color:var(--ag-input-placeholder-text-color)}&::placeholder{color:var(--ag-input-placeholder-text-color)}}:where(.ag-ltr) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-left:var(--ag-input-padding-start)}:where(.ag-rtl) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding-right:var(--ag-input-padding-start)}&:where(.ag-ltr,.ag-rtl) .ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){padding:0 var(--ag-input-padding-start)}:where(.ag-column-select-header-filter-wrapper),:where(.ag-filter-add-select),:where(.ag-filter-filter),:where(.ag-filter-toolpanel-search),:where(.ag-floating-filter-search-icon),:where(.ag-mini-filter){.ag-input-wrapper:before{background-color:currentcolor;color:var(--ag-input-icon-color);content:"";display:block;height:12px;-webkit-mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");mask-image:url("data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iMS41Ij48cGF0aCBkPSJNNS4zIDlhMy43IDMuNyAwIDEgMCAwLTcuNSAzLjcgMy43IDAgMCAwIDAgNy41Wk0xMC41IDEwLjUgOC4zIDguMiIvPjwvc3ZnPg==");-webkit-mask-position:center;mask-position:center;-webkit-mask-repeat:no-repeat;mask-repeat:no-repeat;opacity:.5;position:absolute;width:12px}}:where(.ag-ltr) :where(.ag-column-select-header-filter-wrapper),:where(.ag-ltr) :where(.ag-filter-add-select),:where(.ag-ltr) :where(.ag-filter-filter),:where(.ag-ltr) :where(.ag-filter-toolpanel-search),:where(.ag-ltr) :where(.ag-floating-filter-search-icon),:where(.ag-ltr) :where(.ag-mini-filter){.ag-input-wrapper:before{margin-left:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-left:calc(var(--ag-spacing)*1.5 + 12px)}}:where(.ag-rtl) :where(.ag-column-select-header-filter-wrapper),:where(.ag-rtl) :where(.ag-filter-add-select),:where(.ag-rtl) :where(.ag-filter-filter),:where(.ag-rtl) :where(.ag-filter-toolpanel-search),:where(.ag-rtl) :where(.ag-floating-filter-search-icon),:where(.ag-rtl) :where(.ag-mini-filter){.ag-input-wrapper:before{margin-right:var(--ag-spacing)}.ag-number-field-input,.ag-text-field-input{padding-right:calc(var(--ag-spacing)*1.5 + 12px)}}',inputStyleBorderedCSS=".ag-input-field-input:where(input:not([type]),input[type=text],input[type=number],input[type=tel],input[type=date],input[type=datetime-local],textarea){&:focus{box-shadow:var(--ag-focus-shadow);&:where(.invalid),&:where(:invalid){box-shadow:var(--ag-focus-error-shadow)}}}",baseParams4={inputBackgroundColor:"transparent",inputBorder:!1,inputBorderRadius:0,inputTextColor:{ref:"textColor"},inputPlaceholderTextColor:{ref:"inputTextColor",mix:.5},inputPaddingStart:0,inputHeight:{calc:"max(iconSize, fontSize) + spacing * 2"},inputFocusBackgroundColor:{ref:"inputBackgroundColor"},inputFocusBorder:{ref:"inputBorder"},inputFocusShadow:"none",inputFocusTextColor:{ref:"inputTextColor"},inputDisabledBackgroundColor:{ref:"inputBackgroundColor"},inputDisabledBorder:{ref:"inputBorder"},inputDisabledTextColor:{ref:"inputTextColor"},inputInvalidBackgroundColor:{ref:"inputBackgroundColor"},inputInvalidBorder:{ref:"inputBorder"},inputInvalidTextColor:{ref:"inputTextColor"},inputIconColor:{ref:"inputTextColor"},pickerButtonBorder:!1,pickerButtonFocusBorder:{ref:"inputFocusBorder"},pickerButtonBackgroundColor:{ref:"backgroundColor"},pickerButtonFocusBackgroundColor:{ref:"backgroundColor"},pickerListBorder:!1,pickerListBackgroundColor:{ref:"backgroundColor"},colorPickerThumbSize:18,colorPickerTrackSize:12,colorPickerThumbBorderWidth:3,colorPickerTrackBorderRadius:12,colorPickerColorBorderRadius:4},makeInputStyleBorderedTreeShakeable=()=>createPart({feature:"inputStyle",params:{...baseParams4,inputBackgroundColor:backgroundColor,inputBorder:!0,inputBorderRadius:{ref:"borderRadius"},inputPaddingStart:{ref:"spacing"},inputFocusBorder:{color:accentColor},inputFocusShadow:{ref:"focusShadow"},inputDisabledBackgroundColor:foregroundBackgroundMix(.06),inputDisabledTextColor:{ref:"textColor",mix:.5},inputInvalidBorder:{color:{ref:"invalidColor"}},pickerButtonBorder:!0,pickerListBorder:!0},css:()=>inputStyleBaseCSS+inputStyleBorderedCSS}),inputStyleBordered=makeInputStyleBorderedTreeShakeable(),tabStyleBaseCSS='.ag-tabs-header{background-color:var(--ag-tab-bar-background-color);border-bottom:var(--ag-tab-bar-border);display:flex;flex:1;gap:var(--ag-tab-spacing);padding:var(--ag-tab-bar-top-padding) var(--ag-tab-bar-horizontal-padding) 0}.ag-tabs-header-wrapper{display:flex}.ag-tabs-close-button-wrapper{align-items:center;border:0;display:flex;padding:var(--ag-spacing)}:where(.ag-ltr) .ag-tabs-close-button-wrapper{border-right:solid var(--ag-border-width) var(--ag-border-color)}:where(.ag-rtl) .ag-tabs-close-button-wrapper{border-left:solid var(--ag-border-width) var(--ag-border-color)}.ag-tabs-close-button{background-color:unset;border:0;cursor:pointer;padding:0}.ag-tab{align-items:center;background-color:var(--ag-tab-background-color);border-left:var(--ag-tab-selected-border-width) solid transparent;border-right:var(--ag-tab-selected-border-width) solid transparent;color:var(--ag-tab-text-color);cursor:pointer;display:flex;flex:1;justify-content:center;padding:var(--ag-tab-top-padding) var(--ag-tab-horizontal-padding) var(--ag-tab-bottom-padding);position:relative}.ag-tab:hover{background-color:var(--ag-tab-hover-background-color);color:var(--ag-tab-hover-text-color)}.ag-tab.ag-tab-selected{background-color:var(--ag-tab-selected-background-color);color:var(--ag-tab-selected-text-color)}:where(.ag-ltr) .ag-tab.ag-tab-selected:where(:not(:first-of-type)){border-left-color:var(--ag-tab-selected-border-color)}:where(.ag-rtl) .ag-tab.ag-tab-selected:where(:not(:first-of-type)){border-right-color:var(--ag-tab-selected-border-color)}:where(.ag-ltr) .ag-tab.ag-tab-selected:where(:not(:last-of-type)){border-right-color:var(--ag-tab-selected-border-color)}:where(.ag-rtl) .ag-tab.ag-tab-selected:where(:not(:last-of-type)){border-left-color:var(--ag-tab-selected-border-color)}.ag-tab:after{background-color:var(--ag-tab-selected-underline-color);bottom:0;content:"";display:block;height:var(--ag-tab-selected-underline-width);left:0;opacity:0;position:absolute;right:0;transition:opacity var(--ag-tab-selected-underline-transition-duration)}.ag-tab.ag-tab-selected:after{opacity:1}',baseParams5={tabBarBackgroundColor:"transparent",tabBarHorizontalPadding:0,tabBarTopPadding:0,tabBackgroundColor:"transparent",tabTextColor:{ref:"textColor"},tabHorizontalPadding:{ref:"spacing"},tabTopPadding:{ref:"spacing"},tabBottomPadding:{ref:"spacing"},tabSpacing:"0",tabHoverBackgroundColor:{ref:"tabBackgroundColor"},tabHoverTextColor:{ref:"tabTextColor"},tabSelectedBackgroundColor:{ref:"tabBackgroundColor"},tabSelectedTextColor:{ref:"tabTextColor"},tabSelectedBorderWidth:{ref:"borderWidth"},tabSelectedBorderColor:"transparent",tabSelectedUnderlineColor:"transparent",tabSelectedUnderlineWidth:0,tabSelectedUnderlineTransitionDuration:0,tabBarBorder:!1},makeTabStyleQuartzTreeShakeable=()=>createPart({feature:"tabStyle",params:{...baseParams5,tabBarBorder:!0,tabBarBackgroundColor:foregroundMix(.05),tabTextColor:{ref:"textColor",mix:.7},tabSelectedTextColor:{ref:"textColor"},tabHoverTextColor:{ref:"textColor"},tabSelectedBorderColor:{ref:"borderColor"},tabSelectedBackgroundColor:backgroundColor},css:tabStyleBaseCSS}),tabStyleQuartz=makeTabStyleQuartzTreeShakeable(),themeQuartzParams=()=>({fontFamily:[{googleFont:"IBM Plex Sans"},"-apple-system","BlinkMacSystemFont","Segoe UI","Roboto","Oxygen-Sans","Ubuntu"]}),makeThemeQuartzTreeShakeable=()=>createTheme().withPart(checkboxStyleDefault).withPart(colorSchemeVariable).withPart(iconSetQuartzRegular).withPart(tabStyleQuartz).withPart(inputStyleBordered).withPart(columnDropStyleBordered).withParams(themeQuartzParams()),themeQuartz=makeThemeQuartzTreeShakeable(),cssVariable=(e,t,n,o,u)=>({changeKey:e,type:t,defaultValue:n,noWarn:o,cacheDefault:u}),CELL_HORIZONTAL_PADDING=cssVariable("cellHorizontalPadding","length",16),INDENTATION_LEVEL=cssVariable("indentationLevel","length",0,!0,!0),ROW_GROUP_INDENT_SIZE=cssVariable("rowGroupIndentSize","length",0),ROW_HEIGHT=cssVariable("rowHeight","length",42),HEADER_HEIGHT=cssVariable("headerHeight","length",48),ROW_BORDER_WIDTH=cssVariable("rowBorderWidth","border",1),PINNED_BORDER_WIDTH=cssVariable("pinnedRowBorderWidth","border",1),HEADER_ROW_BORDER_WIDTH=cssVariable("headerRowBorderWidth","border",1);function _addAdditionalCss(e,t){for(const n of t.sort((o,u)=>o.moduleName.localeCompare(u.moduleName))){const o=n.css;o&&e.set(`module-${n.moduleName}`,o)}}var Environment=class extends BaseEnvironment{initVariables(){this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.getSizeEl(ROW_HEIGHT),this.getSizeEl(HEADER_HEIGHT),this.getSizeEl(ROW_BORDER_WIDTH),this.getSizeEl(PINNED_BORDER_WIDTH),this.refreshRowBorderWidthVariable()}getPinnedRowBorderWidth(){return this.getCSSVariablePixelValue(PINNED_BORDER_WIDTH)}getRowBorderWidth(){return this.getCSSVariablePixelValue(ROW_BORDER_WIDTH)}getHeaderRowBorderWidth(){return this.getCSSVariablePixelValue(HEADER_ROW_BORDER_WIDTH)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(ROW_HEIGHT)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(HEADER_HEIGHT)}getDefaultCellHorizontalPadding(){return this.getCSSVariablePixelValue(CELL_HORIZONTAL_PADDING)}getCellPaddingLeft(){const e=this.getDefaultCellHorizontalPadding(),t=this.getCSSVariablePixelValue(INDENTATION_LEVEL),n=this.getCSSVariablePixelValue(ROW_GROUP_INDENT_SIZE);return e-1+n*t}getCellPadding(){const e=this.getDefaultCellHorizontalPadding()-1;return this.getCellPaddingLeft()+e}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}refreshRowHeightVariable(){const{eRootDiv:e}=this,t=e.style.getPropertyValue("--ag-line-height").trim(),n=this.gos.get("rowHeight");if(n==null||isNaN(n)||!isFinite(n))return t!==null&&e.style.setProperty("--ag-line-height",null),-1;const o=`${n}px`;return t!=o?(e.style.setProperty("--ag-line-height",o),n):t!=""?Number.parseFloat(t):-1}fireStylesChangedEvent(e){e==="rowBorderWidth"&&this.refreshRowBorderWidthVariable(),super.fireStylesChangedEvent(e)}refreshRowBorderWidthVariable(){const e=this.getCSSVariablePixelValue(ROW_BORDER_WIDTH);this.eRootDiv.style.setProperty("--ag-internal-row-border-width",`${e}px`)}postProcessThemeChange(e,t){e&&getComputedStyle(this.getMeasurementContainer()).getPropertyValue("--ag-legacy-styles-loaded")&&_error(t?106:239)}getAdditionalCss(){const e=new Map;return e.set("core",[coreCSS]),_addAdditionalCss(e,Array.from(_getAllRegisteredModules())),e}getDefaultTheme(){return themeQuartz}varError(e,t){_warn(9,{variable:{cssName:e,defaultValue:t}})}themeError(e){_error(240,{theme:e})}shadowRootError(){_error(293)}},BaseEventService=class extends AgBeanStub{constructor(){super(...arguments),this.beanName="eventSvc",this.eventServiceType="global",this.globalSvc=new LocalEventService}addListener(e,t,n){this.globalSvc.addEventListener(e,t,n)}removeListener(e,t,n){this.globalSvc.removeEventListener(e,t,n)}addGlobalListener(e,t=!1){this.globalSvc.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalSvc.removeGlobalListener(e,t)}dispatchEvent(e){this.globalSvc.dispatchEvent(this.gos.addCommon(e))}dispatchEventOnce(e){this.globalSvc.dispatchEventOnce(this.gos.addCommon(e))}},EventService=class extends BaseEventService{postConstruct(){const{globalListener:e,globalSyncListener:t}=this.beans;e&&this.addGlobalListener(e,!0),t&&this.addGlobalListener(t,!1)}};function getHeaderIndexToFocus(e,t,n){const o=e.visibleCols.headerGroupRowCount;if(n>=o)return{column:t,headerRowIndex:n};let u=t.getParent();for(;u&&u.getProvidedColumnGroup().getLevel()>n;)u=u.getParent();const d=t.isSpanHeaderHeight();return!u||d&&u.isPadding()?{column:t,headerRowIndex:o}:{column:u,headerRowIndex:u.getProvidedColumnGroup().getLevel()}}var HeaderNavigationService=class extends BeanStub{constructor(){super(...arguments),this.beanName="headerNavigation",this.currentHeaderRowWithoutSpan=-1}postConstruct(){const e=this.beans;e.ctrlsSvc.whenReady(this,n=>{this.gridBodyCon=n.gridBodyCtrl});const t=_getDocument(e);this.addManagedElementListeners(t,{mousedown:()=>{this.currentHeaderRowWithoutSpan=-1}})}getHeaderPositionForColumn(e,t){let n;const{colModel:o,colGroupSvc:u,ctrlsSvc:d}=this.beans;if(typeof e=="string"?(n=o.getCol(e),n||(n=u?.getColumnGroup(e)??null)):n=e,!n)return null;const g=d.getHeaderRowContainerCtrl()?.getAllCtrls(),v=_last(g||[]).type==="filter",w=getFocusHeaderRowCount(this.beans)-1;let S=-1,R=n;for(;R;)S++,R=R.getParent();let _=S;return t&&v&&_===w-1&&_++,_===-1?null:{headerRowIndex:_,column:n}}navigateVertically(e,t){const{focusSvc:n,visibleCols:o}=this.beans,{focusedHeader:u}=n;if(!u)return!1;const{headerRowIndex:d}=u,f=u.column,g=getFocusHeaderRowCount(this.beans),v=this.getHeaderRowType(d),w=o.headerGroupRowCount;let{headerRowIndex:S,column:R,headerRowIndexWithoutSpan:_}=e==="UP"?getColumnVisibleParent(v,f,d):getColumnVisibleChild(f,d,w),F=!1;return S<0&&(S=0,R=f,F=!0),S>=g?(S=-1,this.currentHeaderRowWithoutSpan=-1):_!==void 0&&(this.currentHeaderRowWithoutSpan=_),!F&&!R?!1:n.focusHeaderPosition({headerPosition:{headerRowIndex:S,column:R},allowUserOverride:!0,event:t})}navigateHorizontally(e,t=!1,n){const{focusSvc:o,gos:u}=this.beans,d={...o.focusedHeader};let f,g;this.currentHeaderRowWithoutSpan!==-1?d.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=d.headerRowIndex,e==="LEFT"!==u.get("enableRtl")?(g="Before",f=this.findHeader(d,g)):(g="After",f=this.findHeader(d,g));const v=u.getCallback("tabToNextHeader");if(t&&v){const w=o.focusHeaderPositionFromUserFunc({userFunc:v,headerPosition:f,direction:g});if(w){const{headerRowIndex:S}=o.focusedHeader||{};S!=null&&S!=d.headerRowIndex&&(this.currentHeaderRowWithoutSpan=S)}return w}return f||!t?o.focusHeaderPosition({headerPosition:f,direction:g,fromTab:t,allowUserOverride:!0,event:n}):this.focusNextHeaderRow(d,g,n)}focusNextHeaderRow(e,t,n){const o=this.beans,u=e.headerRowIndex;let d=null,f;const g=getFocusHeaderRowCount(o),v=this.beans.visibleCols.allCols;if(t==="Before"){if(u<=0)return!1;d=_last(v),f=u-1,this.currentHeaderRowWithoutSpan-=1}else d=v[0],f=u+1,this.currentHeaderRowWithoutSpan<g?this.currentHeaderRowWithoutSpan+=1:this.currentHeaderRowWithoutSpan=-1;let{column:w,headerRowIndex:S}=getHeaderIndexToFocus(this.beans,d,f);return S>=g&&(S=-1),o.focusSvc.focusHeaderPosition({headerPosition:{column:w,headerRowIndex:S},direction:t,fromTab:!0,allowUserOverride:!0,event:n})}scrollToColumn(e,t="After"){if(e.getPinned())return;let n;if(isColumnGroup(e)){const o=e.getDisplayedLeafColumns();n=t==="Before"?_last(o):o[0]}else n=e;this.gridBodyCon.scrollFeature.ensureColumnVisible(n)}findHeader(e,t){const{colGroupSvc:n,visibleCols:o}=this.beans;let u=e.column;if(u instanceof AgColumnGroup){const v=u.getDisplayedLeafColumns();u=t==="Before"?v[0]:v[v.length-1]}const d=t==="Before"?o.getColBefore(u):o.getColAfter(u);if(!d)return;const f=o.headerGroupRowCount;if(e.headerRowIndex>=f)return{headerRowIndex:e.headerRowIndex,column:d};const g=n?.getColGroupAtLevel(d,e.headerRowIndex);return g?g.isPadding()&&d.isSpanHeaderHeight()?{headerRowIndex:o.headerGroupRowCount,column:d}:{headerRowIndex:e.headerRowIndex,column:g??d}:{headerRowIndex:d instanceof AgColumn&&d.isSpanHeaderHeight()?o.headerGroupRowCount:e.headerRowIndex,column:d}}getHeaderRowType(e){const t=this.beans.ctrlsSvc.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}};function getColumnVisibleParent(e,t,n){const o=n-1;if(e!=="filter"){const u=t instanceof AgColumn&&t.isSpanHeaderHeight();let d=t.getParent();for(;d&&(d.getProvidedColumnGroup().getLevel()>o||u&&d.isPadding());)d=d.getParent();if(d)return u?{column:d,headerRowIndex:d.getProvidedColumnGroup().getLevel(),headerRowIndexWithoutSpan:o}:{column:d,headerRowIndex:o,headerRowIndexWithoutSpan:o}}return{column:t,headerRowIndex:o,headerRowIndexWithoutSpan:o}}function getColumnVisibleChild(e,t,n){const o=t+1,u={column:e,headerRowIndex:o,headerRowIndexWithoutSpan:o};if(e instanceof AgColumnGroup){if(o>=n)return{column:e.getDisplayedLeafColumns()[0],headerRowIndex:n,headerRowIndexWithoutSpan:o};let f=e.getDisplayedChildren()[0];if(f instanceof AgColumnGroup&&f.isPadding()){const v=f.getDisplayedLeafColumns()[0];v.isSpanHeaderHeight()&&(f=v)}u.column=f,f instanceof AgColumn&&f.isSpanHeaderHeight()&&(u.headerRowIndex=n,u.headerRowIndexWithoutSpan=o)}return u}var FocusService=class extends BeanStub{constructor(){super(...arguments),this.beanName="focusSvc",this.focusFallbackTimeout=null,this.needsFocusRestored=!1}wireBeans(e){this.colModel=e.colModel,this.visibleCols=e.visibleCols,this.rowRenderer=e.rowRenderer,this.navigation=e.navigation,this.filterManager=e.filterManager,this.overlays=e.overlays}postConstruct(){const e=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:e,columnRowGroupChanged:e}),this.addDestroyFunc(_registerKeyboardFocusEvents(this.beans))}attemptToRecoverFocus(){this.needsFocusRestored=!0,this.focusFallbackTimeout!=null&&clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=window.setTimeout(this.setFocusRecovered.bind(this),100)}setFocusRecovered(){this.needsFocusRestored=!1,this.focusFallbackTimeout!=null&&(clearTimeout(this.focusFallbackTimeout),this.focusFallbackTimeout=null)}shouldTakeFocus(){return this.gos.get("suppressFocusAfterRefresh")?(this.setFocusRecovered(),!1):this.needsFocusRestored?(this.setFocusRecovered(),!0):this.doesRowOrCellHaveBrowserFocus()}onColumnEverythingChanged(){if(!this.focusedCell)return;const e=this.focusedCell.column,t=this.colModel.getCol(e.getId());e!==t&&this.clearFocusedCell()}getFocusCellToUseAfterRefresh(){const{gos:e,focusedCell:t}=this;return e.get("suppressFocusAfterRefresh")||e.get("suppressCellFocus")||!t||!this.doesRowOrCellHaveBrowserFocus()?null:t}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeader||!this.isDomDataPresentInHierarchy(_getActiveDomElement(this.beans),DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeader}doesRowOrCellHaveBrowserFocus(){const e=_getActiveDomElement(this.beans);return this.isDomDataPresentInHierarchy(e,DOM_DATA_KEY_CELL_CTRL,!0)?!0:this.isDomDataPresentInHierarchy(e,DOM_DATA_KEY_ROW_CTRL,!0)}isDomDataPresentInHierarchy(e,t,n){let o=e;for(;o;){const u=_getDomData(this.gos,o,t);if(u)return u.destroyed&&n?(this.attemptToRecoverFocus(),!1):!0;o=o.parentNode}return!1}getFocusedCell(){return this.focusedCell}getFocusEventParams(e){const{rowIndex:t,rowPinned:n,column:o}=e,u={rowIndex:t,rowPinned:n,column:o,isFullWidthCell:!1},d=this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:n});return d&&(u.isFullWidthCell=d.isFullWidth()),u}clearFocusedCell(){if(this.focusedCell==null)return;const e=this.getFocusEventParams(this.focusedCell);this.focusedCell=null,this.eventSvc.dispatchEvent({type:"cellFocusCleared",...e})}setFocusedCell(e){this.setFocusRecovered();const{column:t,rowIndex:n,rowPinned:o,forceBrowserFocus:u=!1,preventScrollOnBrowserFocus:d=!1,sourceEvent:f}=e,g=this.colModel.getCol(t);if(!g){this.focusedCell=null;return}this.focusedCell={rowIndex:n,rowPinned:_makeNull(o),column:g};const v=this.getFocusEventParams(this.focusedCell);this.eventSvc.dispatchEvent({type:"cellFocused",...v,...this.previousCellFocusParams&&{previousParams:this.previousCellFocusParams},forceBrowserFocus:u,preventScrollOnBrowserFocus:d,sourceEvent:f}),this.previousCellFocusParams=v}isCellFocused(e){return this.focusedCell==null?!1:_areCellsEqual(e,this.focusedCell)}isHeaderWrapperFocused(e){if(this.focusedHeader==null)return!1;const{column:t,rowCtrl:{rowIndex:n,pinned:o}}=e,{column:u,headerRowIndex:d}=this.focusedHeader;return t===u&&n===d&&o==u.getPinned()}focusHeaderPosition(e){if(this.setFocusRecovered(),_isHeaderFocusSuppressed(this.beans))return!1;const{direction:t,fromTab:n,allowUserOverride:o,event:u,fromCell:d,rowWithoutSpanValue:f,scroll:g=!0}=e;let{headerPosition:v}=e;if(d&&this.filterManager?.isAdvFilterHeaderActive())return this.focusAdvancedFilter(v);if(o){const w=this.focusedHeader,S=getFocusHeaderRowCount(this.beans);if(n){const R=this.gos.getCallback("tabToNextHeader");R&&(v=this.getHeaderPositionFromUserFunc({userFunc:R,direction:t,currentPosition:w,headerPosition:v,headerRowCount:S}))}else{const R=this.gos.getCallback("navigateToNextHeader");if(R&&u){const _={key:u.key,previousHeaderPosition:w,nextHeaderPosition:v,headerRowCount:S,event:u};v=R(_)}}}return v?this.focusProvidedHeaderPosition({headerPosition:v,direction:t,event:u,fromCell:d,rowWithoutSpanValue:f,scroll:g}):!1}focusHeaderPositionFromUserFunc(e){if(_isHeaderFocusSuppressed(this.beans))return!1;const{userFunc:t,headerPosition:n,direction:o,event:u}=e,d=this.focusedHeader,f=getFocusHeaderRowCount(this.beans),g=this.getHeaderPositionFromUserFunc({userFunc:t,direction:o,currentPosition:d,headerPosition:n,headerRowCount:f});return!!g&&this.focusProvidedHeaderPosition({headerPosition:g,direction:o,event:u})}getHeaderPositionFromUserFunc(e){const{userFunc:t,direction:n,currentPosition:o,headerPosition:u,headerRowCount:d}=e,g=t({backwards:n==="Before",previousHeaderPosition:o,nextHeaderPosition:u,headerRowCount:d});return g===!0?o:g===!1?null:g}focusProvidedHeaderPosition(e){const{headerPosition:t,direction:n,fromCell:o,rowWithoutSpanValue:u,event:d,scroll:f=!0}=e,{column:g,headerRowIndex:v}=t,{filterManager:w,ctrlsSvc:S,headerNavigation:R}=this.beans;if(this.focusedHeader&&isHeaderPositionEqual(e.headerPosition,this.focusedHeader))return!1;if(v===-1)return w?.isAdvFilterHeaderActive()?this.focusAdvancedFilter(t):this.focusGridView({column:g,event:d});f&&R?.scrollToColumn(g,n);const F=S.getHeaderRowContainerCtrl(g.getPinned())?.focusHeader(t.headerRowIndex,g,d)||!1;return R&&F&&(u!=null||o)&&(R.currentHeaderRowWithoutSpan=u??-1),F}focusFirstHeader(){if(this.overlays?.exclusive&&this.focusOverlay())return!0;const e=this.visibleCols.allCols[0];if(!e)return!1;const t=getHeaderIndexToFocus(this.beans,e,0);return this.focusHeaderPosition({headerPosition:t,rowWithoutSpanValue:0})}focusLastHeader(e){if(this.overlays?.exclusive&&this.focusOverlay(!0))return!0;const t=getFocusHeaderRowCount(this.beans)-1,n=_last(this.visibleCols.allCols);return this.focusHeaderPosition({headerPosition:{headerRowIndex:t,column:n},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){return this.filterManager?.isAdvFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCell}isRowFocused(e,t){return this.focusedCell==null?!1:this.focusedCell.rowIndex===e&&this.focusedCell.rowPinned===_makeNull(t)}focusOverlay(e){const t=this.overlays?.isVisible()&&this.overlays.eWrapper?.getGui();return!!t&&_focusInto(t,e)}focusGridView(e){const{backwards:t=!1,canFocusOverlay:n=!0,event:o}=e;if(this.overlays?.exclusive)return n&&this.focusOverlay(t);if(_isCellFocusSuppressed(this.beans))return t&&!_isHeaderFocusSuppressed(this.beans)?this.focusLastHeader():n&&this.focusOverlay(t)?!0:t?!1:_focusNextGridCoreContainer(this.beans,t);const u=t?_getLastRow(this.beans):_getFirstRow(this.beans);if(u){const d=e.column??this.focusedHeader?.column,{rowIndex:f,rowPinned:g}=u,v=_getRowNode(this.beans,u);if(!d||!v||f==null)return!1;if(d.isSuppressNavigable(v)){const w=this.gos.get("enableRtl");let S;return!o||o.key===KeyCode.TAB?S=w?KeyCode.LEFT:KeyCode.RIGHT:S=o.key,this.beans.navigation?.navigateToNextCell(null,S,{rowIndex:f,column:d,rowPinned:g||null},!0),!0}return this.navigation?.ensureCellVisible({rowIndex:f,column:d,rowPinned:g}),t&&this.rowRenderer.getRowByPosition(u)?.isFullWidth()&&this.navigation?.tryToFocusFullWidthRow(u,t)||(this.setFocusedCell({rowIndex:f,column:d,rowPinned:_makeNull(g),forceBrowserFocus:!0}),this.beans.rangeSvc?.setRangeToCell({rowIndex:f,rowPinned:g,column:d})),!0}return!!(n&&this.focusOverlay(t)||t&&this.focusLastHeader())}focusAdvancedFilter(e){return this.advFilterFocusColumn=e?.column,this.beans.advancedFilter?.getCtrl().focusHeaderComp()??!1}focusNextFromAdvancedFilter(e,t){const n=(t?void 0:this.advFilterFocusColumn)??this.visibleCols.allCols?.[0];return e?this.focusHeaderPosition({headerPosition:{column:n,headerRowIndex:getFocusHeaderRowCount(this.beans)-1}}):this.focusGridView({column:n})}clearAdvancedFilterColumn(){this.advFilterFocusColumn=void 0}},ScrollVisibleService=class extends BeanStub{constructor(){super(...arguments),this.beanName="scrollVisibleSvc"}wireBeans(e){this.ctrlsSvc=e.ctrlsSvc,this.colAnimation=e.colAnimation}postConstruct(){const{gos:e}=this;this.horizontalScrollShowing=e.get("alwaysShowHorizontalScroll")===!0,this.verticalScrollShowing=e.get("alwaysShowVerticalScroll")===!0,this.getScrollbarWidth();const t=this.updateScrollVisible.bind(this);this.addManagedEventListeners({displayedColumnsChanged:t,displayedColumnsWidthChanged:t,newColumnsLoaded:t})}updateScrollVisible(){const{colAnimation:e}=this;e?.isActive()?e.executeLaterVMTurn(()=>{e.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){const e=this.ctrlsSvc.get("center");if(!e||this.colAnimation?.isActive())return;const t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.verticalScrollShowing};this.setScrollsVisible(t),this.updateScrollGap()}updateScrollGap(){const e=this.ctrlsSvc.get("center"),t=e.hasHorizontalScrollGap(),n=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==n)&&(this.horizontalScrollGap=t,this.verticalScrollGap=n,this.eventSvc.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventSvc.dispatchEvent({type:"scrollVisibilityChanged"}))}getScrollbarWidth(){if(this.scrollbarWidth==null){const e=this.gos.get("scrollbarWidth"),n=typeof e=="number"&&e>=0?e:_getScrollbarWidth();n!=null&&(this.scrollbarWidth=n,this.eventSvc.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},GridDestroyService=class extends BeanStub{constructor(){super(...arguments),this.beanName="gridDestroySvc",this.destroyCalled=!1}destroy(){if(this.destroyCalled)return;const{stateSvc:e,ctrlsSvc:t,context:n}=this.beans;this.eventSvc.dispatchEvent({type:"gridPreDestroyed",state:e?.getState()??{}}),this.destroyCalled=!0,t.get("gridCtrl")?.destroyGridUi(),n.destroy(),super.destroy()}},_PUBLIC_EVENTS=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","pinnedRowsChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterUiChanged","filterOpened","floatingFilterUiChanged","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel","findChanged","rowResizeStarted","rowResizeEnded","columnsReset","bulkEditingStarted","bulkEditingStopped","batchEditingStarted","batchEditingStopped"],ALWAYS_SYNC_GLOBAL_EVENTS=new Set(["gridPreDestroyed","fillStart","pasteStart"]),_PUBLIC_EVENT_HANDLERS_MAP=_PUBLIC_EVENTS.reduce((e,t)=>(e[t]=_getCallbackForEvent(t),e),{}),USER_COMP_MODULES={agSetColumnFilter:"SetFilter",agSetColumnFloatingFilter:"SetFilter",agMultiColumnFilter:"MultiFilter",agMultiColumnFloatingFilter:"MultiFilter",agGroupColumnFilter:"GroupFilter",agGroupColumnFloatingFilter:"GroupFilter",agGroupCellRenderer:"GroupCellRenderer",agGroupRowRenderer:"GroupCellRenderer",agRichSelect:"RichSelect",agRichSelectCellEditor:"RichSelect",agDetailCellRenderer:"SharedMasterDetail",agSparklineCellRenderer:"Sparklines",agDragAndDropImage:"SharedDragAndDrop",agColumnHeader:"ColumnHeaderComp",agColumnGroupHeader:"ColumnGroupHeaderComp",agSortIndicator:"Sort",agAnimateShowChangeCellRenderer:"HighlightChanges",agAnimateSlideCellRenderer:"HighlightChanges",agLoadingCellRenderer:"LoadingCellRenderer",agSkeletonCellRenderer:"SkeletonCellRenderer",agCheckboxCellRenderer:"CheckboxCellRenderer",agLoadingOverlay:"Overlay",agExportingOverlay:"Overlay",agNoRowsOverlay:"Overlay",agNoMatchingRowsOverlay:"Overlay",agTooltipComponent:"Tooltip",agReadOnlyFloatingFilter:"CustomFilter",agTextColumnFilter:"TextFilter",agNumberColumnFilter:"NumberFilter",agBigIntColumnFilter:"BigIntFilter",agDateColumnFilter:"DateFilter",agDateInput:"DateFilter",agTextColumnFloatingFilter:"TextFilter",agNumberColumnFloatingFilter:"NumberFilter",agBigIntColumnFloatingFilter:"BigIntFilter",agDateColumnFloatingFilter:"DateFilter",agFormulaCellEditor:"Formula",agCellEditor:"TextEditor",agSelectCellEditor:"SelectEditor",agTextCellEditor:"TextEditor",agNumberCellEditor:"NumberEditor",agDateCellEditor:"DateEditor",agDateStringCellEditor:"DateEditor",agCheckboxCellEditor:"CheckboxEditor",agLargeTextCellEditor:"LargeTextEditor",agMenuItem:"MenuItem",agColumnsToolPanel:"ColumnsToolPanel",agFiltersToolPanel:"FiltersToolPanel",agNewFiltersToolPanel:"NewFiltersToolPanel",agAggregationComponent:"StatusBar",agSelectedRowCountComponent:"StatusBar",agTotalRowCountComponent:"StatusBar",agFilteredRowCountComponent:"StatusBar",agTotalAndFilteredRowCountComponent:"StatusBar",agFindCellRenderer:"Find"};function quote(e){return`"${e}"`}var COLUMN_DEFINITION_DEPRECATIONS=()=>({checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."},rowGroupingHierarchy:{version:"34.3",message:"Use `colDef.groupHierarchy` instead."}}),COLUMN_DEFINITION_MOD_VALIDATIONS={allowFormula:"Formula",aggFunc:"SharedAggregation",autoHeight:"RowAutoHeight",cellClass:"CellStyle",cellClassRules:"CellStyle",cellEditor:({cellEditor:e,editable:t,...n})=>{const o=n.groupRowEditable;return!!t||!!o?typeof e=="string"?USER_COMP_MODULES[e]??"CustomEditor":"CustomEditor":null},cellRenderer:({cellRenderer:e})=>typeof e!="string"?null:USER_COMP_MODULES[e],cellStyle:"CellStyle",columnChooserParams:"ColumnMenu",contextMenuItems:"ContextMenu",dndSource:"DragAndDrop",dndSourceOnRowDrag:"DragAndDrop",editable:({editable:e,cellEditor:t})=>e&&!t?"TextEditor":null,enableCellChangeFlash:"HighlightChanges",enablePivot:"SharedPivot",enableRowGroup:"SharedRowGrouping",enableValue:"SharedAggregation",filter:({filter:e})=>e&&typeof e!="string"&&typeof e!="boolean"?"CustomFilter":typeof e=="string"?USER_COMP_MODULES[e]??"ColumnFilter":"ColumnFilter",floatingFilter:"ColumnFilter",getQuickFilterText:"QuickFilter",headerTooltip:"Tooltip",headerTooltipValueGetter:"Tooltip",mainMenuItems:"ColumnMenu",menuTabs:e=>{const t=["columnsMenuTab","generalMenuTab"];return e.menuTabs?.some(n=>t.includes(n))?"ColumnMenu":null},pivot:"SharedPivot",pivotIndex:"SharedPivot",rowDrag:"RowDrag",rowGroup:"SharedRowGrouping",rowGroupIndex:"SharedRowGrouping",tooltipField:"Tooltip",tooltipValueGetter:"Tooltip",tooltipComponentSelector:"Tooltip",spanRows:"CellSpan",groupHierarchy:"SharedRowGrouping"},COLUMN_DEFINITION_VALIDATIONS=()=>({autoHeight:{supportedRowModels:["clientSide","serverSide"],validate:(t,{paginationAutoPageSize:n})=>n?"colDef.autoHeight is not supported with paginationAutoPageSize.":null},allowFormula:{supportedRowModels:["clientSide"]},cellRendererParams:{validate:t=>(t.rowGroup!=null||t.rowGroupIndex!=null||t.cellRenderer==="agGroupCellRenderer")&&"checkbox"in t.cellRendererParams?'Since v33.0, `cellRendererParams.checkbox` has been deprecated. Use `rowSelection.checkboxLocation = "autoGroupColumn"` instead.':null},flex:{validate:(t,n)=>n.autoSizeStrategy?"colDef.flex is not supported with gridOptions.autoSizeStrategy":null},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(t,{rowSelection:n})=>n==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(t,{rowSelection:n})=>n==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(t,{rowSelection:n})=>n==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerValueGetter:{validate:t=>{const n=t.headerValueGetter;return typeof n=="function"||typeof n=="string"?null:"headerValueGetter must be a function or a valid string expression"}},icons:{validate:({icons:t})=>{if(t){if(t.smallDown)return _errMsg(262);if(t.smallLeft)return _errMsg(263);if(t.smallRight)return _errMsg(264)}return null}},sort:{validate:t=>_isSortDefValid(t.sort)||_isSortDirectionValid(t.sort)?null:`sort must be of type (SortDirection | SortDef), currently it is ${typeof t.sort=="object"?JSON.stringify(t.sort):toStringWithNullUndefined(t.sort)}`},initialSort:{validate:t=>_isSortDefValid(t.initialSort)||_isSortDirectionValid(t.initialSort)?null:`initialSort must be of non-null type (SortDirection | SortDef), currently it is ${typeof t.initialSort=="object"?JSON.stringify(t.initialSort):toStringWithNullUndefined(t.initialSort)}`},sortingOrder:{validate:t=>{const n=t.sortingOrder;if(Array.isArray(n)&&n.length>0){const o=n.filter(u=>!(_isSortDefValid(u)||_isSortDirectionValid(u)));if(o.length>0)return`sortingOrder must be an array of type non-null (SortDirection | SortDef)[], incorrect items are: [${o.map(u=>typeof u=="string"||u==null?toStringWithNullUndefined(u):JSON.stringify(u)).join(", ")}]`}else if(!Array.isArray(n)||!n.length)return`sortingOrder must be an array with at least one element, currently it is [${n}]`;return null}},type:{validate:t=>{const n=t.type;return n instanceof Array?n.some(u=>typeof u!="string")?"if colDef.type is supplied an array it should be of type 'string[]'":null:typeof n=="string"?null:"colDef.type should be of type 'string' | 'string[]'"}},rowSpan:{validate:(t,{suppressRowTransform:n})=>n?null:"colDef.rowSpan requires suppressRowTransform to be enabled."},spanRows:{dependencies:{editable:{required:[!1,void 0]},rowDrag:{required:[!1,void 0]},colSpan:{required:[void 0]},rowSpan:{required:[void 0]}},validate:(t,{rowSelection:n,cellSelection:o,suppressRowTransform:u,enableCellSpan:d,rowDragEntireRow:f,enableCellTextSelection:g})=>typeof n=="object"&&n?.mode==="singleRow"&&n?.enableClickSelection?"colDef.spanRows is not supported with rowSelection.clickSelection":o?"colDef.spanRows is not supported with cellSelection.":u?"colDef.spanRows is not supported with suppressRowTransform.":d?f?"colDef.spanRows is not supported with rowDragEntireRow.":g?"colDef.spanRows is not supported with enableCellTextSelection.":null:"colDef.spanRows requires enableCellSpan to be enabled."},groupHierarchy:{validate(t,{groupHierarchyConfig:n={}},o){const u=new Set(["year","quarter","month","formattedMonth","day","hour","minute","second"]),d=[];for(const f of t.groupHierarchy??[]){if(typeof f=="object"){o.validation?.validateColDef(f);continue}!u.has(f)&&!(f in n)&&d.push(quote(f))}if(d.length>0){const f=`The following parts of colDef.groupHierarchy are not recognised: ${d.join(", ")}.`,g=`Choose one of ${[...u].map(quote).join(", ")}, or define your own parts in gridOptions.groupHierarchyConfig.`;return`${f}
${g}`}return null}}}),colDefPropertyMap={headerName:void 0,columnGroupShow:void 0,headerStyle:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,headerTooltipValueGetter:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,groupRowEditable:void 0,groupRowValueSetter:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,spanRows:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,tooltipComponentSelector:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0,dateComponent:void 0,dateComponentParams:void 0,getFindText:void 0,rowGroupingHierarchy:void 0,groupHierarchy:void 0,allowFormula:void 0},ALL_PROPERTIES=()=>Object.keys(colDefPropertyMap),COL_DEF_VALIDATORS=()=>({objectName:"colDef",allProperties:ALL_PROPERTIES(),docsUrl:"column-properties/",deprecations:COLUMN_DEFINITION_DEPRECATIONS(),validations:COLUMN_DEFINITION_VALIDATIONS()}),STRING_GRID_OPTIONS=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","treeDataChildrenField","treeDataParentIdField","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","invalidEditValueMode","grandTotalRow","themeCssLayer","findSearchValue","styleNonce","renderingMode"],OBJECT_GRID_OPTIONS=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","overlayComponentParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","activeOverlayParams","popupParent","themeStyleContainer","statusBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterParent","advancedFilterBuilderParams","advancedFilterParams","formulaDataSource","formulaFuncs","initialState","autoSizeStrategy","selectionColumnDef","findOptions","filterHandlers","groupHierarchyConfig"],ARRAY_GRID_OPTIONS=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector","suppressOverlays"],_NUMBER_GRID_OPTIONS=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipSwitchShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns","rowDragInsertDelay"],OTHER_GRID_OPTIONS=["theme","rowSelection"],_BOOLEAN_MIXED_GRID_OPTIONS=["cellSelection","sideBar","rowNumbers","suppressGroupChangesColumnVisibility","groupAggFiltering","suppressStickyTotalRow","groupHideParentOfSingleChild","enableRowPinning"],_BOOLEAN_GRID_OPTIONS=["loadThemeGoogleFonts","suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","allowContextMenuWithControlKey","suppressContextMenu","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","enableCellSpan","suppressClickEdit","rowDragEntireRow","rowDragManaged","refreshAfterGroupEdit","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault","enableFilterHandlers","suppressStartEditOnTab","hidePaddedHeaderRows","ssrmExpandAllAffectsAllRows","animateColumnResizing"],_FUNCTION_GRID_OPTIONS=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","overlayComponent","loadingOverlayComponent","noRowsOverlayComponent","overlayComponentSelector","activeOverlay","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getFullRowEditValidationErrors","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","loadingCellRendererSelector","getRowId","chartMenuItems","groupTotalRow","alwaysPassFilter","isRowPinnable","isRowPinned","isRowValidDropPosition"],_GET_ALL_GRID_OPTIONS=()=>[...ARRAY_GRID_OPTIONS,...OBJECT_GRID_OPTIONS,...STRING_GRID_OPTIONS,..._NUMBER_GRID_OPTIONS,..._FUNCTION_GRID_OPTIONS,..._BOOLEAN_GRID_OPTIONS,..._BOOLEAN_MIXED_GRID_OPTIONS,...OTHER_GRID_OPTIONS],GRID_OPTION_DEPRECATIONS=()=>({suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."},groupRemoveSingleChildren:{version:"33",message:"Use `groupHideParentOfSingleChild` instead."},groupRemoveLowestSingleChildren:{version:"33",message:'Use `groupHideParentOfSingleChild: "leafGroupsOnly"` instead.'},suppressRowGroupHidesColumns:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressHideOnGroup"` instead.'},suppressMakeColumnVisibleAfterUnGroup:{version:"33",message:'Use `suppressGroupChangesColumnVisibility: "suppressShowOnUngroup"` instead.'},unSortIcon:{version:"33",message:"Use `defaultColDef.unSortIcon` instead."},sortingOrder:{version:"33",message:"Use `defaultColDef.sortingOrder` instead."},suppressPropertyNamesCheck:{version:"33",message:"`gridOptions` and `columnDefs` both have a `context` property that should be used for arbitrary user data. This means that column definitions and gridOptions should only contain valid properties making this property redundant."},suppressAdvancedFilterEval:{version:"34",message:"Advanced filter no longer uses function evaluation, so this option has no effect."}});function toConstrainedNum(e,t,n){return typeof t=="number"||t==null?t==null||t>=n?null:`${e}: value should be greater than or equal to ${n}`:`${e}: value should be a number`}var GRID_OPTIONS_MODULES={alignedGrids:"AlignedGrids",allowContextMenuWithControlKey:"ContextMenu",autoSizeStrategy:"ColumnAutoSize",cellSelection:"CellSelection",columnHoverHighlight:"ColumnHover",datasource:"InfiniteRowModel",doesExternalFilterPass:"ExternalFilter",editType:"EditCore",invalidEditValueMode:"EditCore",enableAdvancedFilter:"AdvancedFilter",enableCellSpan:"CellSpan",enableCharts:"IntegratedCharts",enableRangeSelection:"CellSelection",enableRowPinning:"PinnedRow",findSearchValue:"Find",getFullRowEditValidationErrors:"EditCore",getContextMenuItems:"ContextMenu",getLocaleText:"Locale",getMainMenuItems:"ColumnMenu",getRowClass:"RowStyle",getRowStyle:"RowStyle",groupTotalRow:"SharedRowGrouping",grandTotalRow:"ClientSideRowModelHierarchy",initialState:"GridState",isExternalFilterPresent:"ExternalFilter",isRowPinnable:"PinnedRow",isRowPinned:"PinnedRow",localeText:"Locale",masterDetail:"SharedMasterDetail",pagination:"Pagination",pinnedBottomRowData:"PinnedRow",pinnedTopRowData:"PinnedRow",pivotMode:"SharedPivot",pivotPanelShow:"RowGroupingPanel",quickFilterText:"QuickFilter",rowClass:"RowStyle",rowClassRules:"RowStyle",rowData:"ClientSideRowModel",rowDragManaged:"RowDrag",refreshAfterGroupEdit:["RowGrouping","TreeData"],rowGroupPanelShow:"RowGroupingPanel",rowNumbers:"RowNumbers",rowSelection:"SharedRowSelection",rowStyle:"RowStyle",serverSideDatasource:"ServerSideRowModel",sideBar:"SideBar",statusBar:"StatusBar",treeData:"SharedTreeData",undoRedoCellEditing:"UndoRedoEdit",valueCache:"ValueCache",viewportDatasource:"ViewportRowModel"},GRID_OPTION_VALIDATIONS=()=>{const e={autoSizePadding:{validate({autoSizePadding:n}){return toConstrainedNum("autoSizePadding",n,0)}},cacheBlockSize:{supportedRowModels:["serverSide","infinite"],validate({cacheBlockSize:n}){return toConstrainedNum("cacheBlockSize",n,1)}},cacheOverflowSize:{validate({cacheOverflowSize:n}){return toConstrainedNum("cacheOverflowSize",n,1)}},datasource:{supportedRowModels:["infinite"]},domLayout:{validate:n=>{const o=n.domLayout,u=["autoHeight","normal","print"];return o&&!u.includes(o)?`domLayout must be one of [${u.join()}], currently it's ${o}`:null}},enableFillHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeHandle:{dependencies:{enableRangeSelection:{required:[!0]}}},enableRangeSelection:{dependencies:{rowDragEntireRow:{required:[!1,void 0]}}},enableRowPinning:{supportedRowModels:["clientSide"],validate({enableRowPinning:n,pinnedTopRowData:o,pinnedBottomRowData:u}){return n&&(o||u)?"Manual row pinning cannot be used together with pinned row data. Either set `enableRowPinning` to `false`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":null}},isRowPinnable:{supportedRowModels:["clientSide"],validate({enableRowPinning:n,isRowPinnable:o,pinnedTopRowData:u,pinnedBottomRowData:d}){return o&&(u||d)?"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinnable`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":!n&&o?"`isRowPinnable` requires `enableRowPinning` to be set.":null}},isRowPinned:{supportedRowModels:["clientSide"],validate({enableRowPinning:n,isRowPinned:o,pinnedTopRowData:u,pinnedBottomRowData:d}){return o&&(u||d)?"Manual row pinning cannot be used together with pinned row data. Either remove `isRowPinned`, or remove `pinnedTopRowData` and `pinnedBottomRowData`.":!n&&o?"`isRowPinned` requires `enableRowPinning` to be set.":null}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:{required:[void 0,"bottom"]},treeData:{required:[void 0,!1],reason:"Tree Data has values at the group level so it doesn't make sense to hide them."}}},groupHideParentOfSingleChild:{dependencies:{groupHideOpenParents:{required:[void 0,!1]}}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveSingleChildren:{required:[void 0,!1]}}},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:{required:[void 0,!1]},groupRemoveLowestSingleChildren:{required:[void 0,!1]}}},groupSelectsChildren:{dependencies:{rowSelection:{required:["multiple"]}}},groupHierarchyConfig:{validate({groupHierarchyConfig:n={}},o,u){for(const d of Object.keys(n))u.validation?.validateColDef(n[d]);return null}},icons:{validate:({icons:n})=>{if(n){if(n.smallDown)return _errMsg(262);if(n.smallLeft)return _errMsg(263);if(n.smallRight)return _errMsg(264)}return null}},infiniteInitialRowCount:{validate({infiniteInitialRowCount:n}){return toConstrainedNum("infiniteInitialRowCount",n,1)}},initialGroupOrderComparator:{supportedRowModels:["clientSide"]},ssrmExpandAllAffectsAllRows:{validate:n=>{if(typeof n.ssrmExpandAllAffectsAllRows=="boolean"){if(n.rowModelType!=="serverSide")return"'ssrmExpandAllAffectsAllRows' is only supported with the Server Side Row Model.";if(n.ssrmExpandAllAffectsAllRows&&typeof n.getRowId!="function")return"'getRowId' callback must be provided for Server Side Row Model grouping to work correctly."}return null}},keepDetailRowsCount:{validate({keepDetailRowsCount:n}){return toConstrainedNum("keepDetailRowsCount",n,1)}},paginationPageSize:{validate({paginationPageSize:n}){return toConstrainedNum("paginationPageSize",n,1)}},paginationPageSizeSelector:{validate:n=>{const o=n.paginationPageSizeSelector;return typeof o=="boolean"||o==null||o.length?null:`'paginationPageSizeSelector' cannot be an empty array.
                    If you want to hide the page size selector, set paginationPageSizeSelector to false.`}},pivotMode:{dependencies:{treeData:{required:[!1,void 0],reason:"Pivot Mode is not supported with Tree Data."}}},quickFilterText:{supportedRowModels:["clientSide"]},rowBuffer:{validate({rowBuffer:n}){return toConstrainedNum("rowBuffer",n,0)}},rowClass:{validate:n=>typeof n.rowClass=="function"?"rowClass should not be a function, please use getRowClass instead":null},rowData:{supportedRowModels:["clientSide"]},rowDragManaged:{supportedRowModels:["clientSide"],dependencies:{pagination:{required:[!1,void 0]}}},rowSelection:{validate({rowSelection:n}){return n&&typeof n=="string"?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':n&&typeof n!="object"?"Expected `RowSelectionOptions` object for the `rowSelection` property.":n&&n.mode!=="multiRow"&&n.mode!=="singleRow"?`Selection mode "${n.mode}" is invalid. Use one of 'singleRow' or 'multiRow'.`:null}},rowStyle:{validate:n=>{const o=n.rowStyle;return o&&typeof o=="function"?"rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead":null}},serverSideDatasource:{supportedRowModels:["serverSide"]},serverSideInitialRowCount:{supportedRowModels:["serverSide"],validate({serverSideInitialRowCount:n}){return toConstrainedNum("serverSideInitialRowCount",n,1)}},serverSideOnlyRefreshFilteredGroups:{supportedRowModels:["serverSide"]},serverSideSortAllLevels:{supportedRowModels:["serverSide"]},sortingOrder:{validate:n=>{const o=n.sortingOrder;if(Array.isArray(o)&&o.length>0){const u=o.filter(d=>!_getSortDefFromInput(d));if(u.length>0)return`sortingOrder must be an array of type (SortDirection | SortDef)[], incorrect items are: ${u.map(d=>typeof d=="string"||d==null?toStringWithNullUndefined(d):JSON.stringify(d))}]`}else if(!Array.isArray(o)||!o.length)return`sortingOrder must be an array with at least one element, currently it's ${o}`;return null}},tooltipHideDelay:{validate:n=>n.tooltipHideDelay&&n.tooltipHideDelay<0?"tooltipHideDelay should not be lower than 0":null},tooltipShowDelay:{validate:n=>n.tooltipShowDelay&&n.tooltipShowDelay<0?"tooltipShowDelay should not be lower than 0":null},tooltipSwitchShowDelay:{validate:n=>n.tooltipSwitchShowDelay&&n.tooltipSwitchShowDelay<0?"tooltipSwitchShowDelay should not be lower than 0":null},treeData:{supportedRowModels:["clientSide","serverSide"],validate:n=>{const o=n.rowModelType??"clientSide";switch(o){case"clientSide":{const{treeDataChildrenField:u,treeDataParentIdField:d,getDataPath:f,getRowId:g}=n;if(!u&&!d&&!f)return"treeData requires either 'treeDataChildrenField' or 'treeDataParentIdField' or 'getDataPath' in the clientSide row model.";if(u){if(f)return"Cannot use both 'treeDataChildrenField' and 'getDataPath' at the same time.";if(d)return"Cannot use both 'treeDataChildrenField' and 'treeDataParentIdField' at the same time."}if(d){if(!g)return"getRowId callback not provided, tree data with parent id cannot be built.";if(f)return"Cannot use both 'treeDataParentIdField' and 'getDataPath' at the same time."}return null}case"serverSide":{const u=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${o} row model.`;return n.isServerSideGroup&&n.getServerSideGroupKey?null:u}}return null}},viewportDatasource:{supportedRowModels:["viewport"]},viewportRowModelBufferSize:{validate({viewportRowModelBufferSize:n}){return toConstrainedNum("viewportRowModelBufferSize",n,0)}},viewportRowModelPageSize:{validate({viewportRowModelPageSize:n}){return toConstrainedNum("viewportRowModelPageSize",n,1)}},rowDragEntireRow:{dependencies:{cellSelection:{required:[void 0]}}},autoGroupColumnDef:{validate({autoGroupColumnDef:n,showOpenedGroup:o}){return n?.field&&o?"autoGroupColumnDef.field and showOpenedGroup are not supported when used together.":n?.valueGetter&&o?"autoGroupColumnDef.valueGetter and showOpenedGroup are not supported when used together.":null}},renderingMode:{validate:n=>{const o=n.renderingMode,u=["default","legacy"];return o&&!u.includes(o)?`renderingMode must be one of [${u.join()}], currently it's ${o}`:null}},autoSizeStrategy:{validate:({autoSizeStrategy:n})=>{if(!n)return null;const o=["fitCellContents","fitGridWidth","fitProvidedWidth"],u=n.type;return u!=="fitCellContents"&&u!=="fitGridWidth"&&u!=="fitProvidedWidth"?`Invalid Auto-size strategy. \`autoSizeStrategy\` must be one of ${o.map(d=>'"'+d+'"').join(", ")}, currently it's ${u}`:u==="fitProvidedWidth"&&typeof n.width!="number"?`When using the 'fitProvidedWidth' auto-size strategy, must provide a numeric \`width\`. You provided ${n.width}`:null}}},t={};for(const n of _BOOLEAN_GRID_OPTIONS)t[n]={expectedType:"boolean"};for(const n of _NUMBER_GRID_OPTIONS)t[n]={expectedType:"number"};return _mergeDeep(t,e),t},GRID_OPTIONS_VALIDATORS=()=>({objectName:"gridOptions",allProperties:[..._GET_ALL_GRID_OPTIONS(),...Object.values(_PUBLIC_EVENT_HANDLERS_MAP)],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:GRID_OPTION_DEPRECATIONS(),validations:GRID_OPTION_VALIDATIONS()}),changeSetId=0,gridInstanceSequence=0,GRID_DOM_KEY="__ag_grid_instance",GridOptionsService=class extends BeanStub{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.instanceId=gridInstanceSequence++,this.gridReadyFired=!1,this.queueEvents=[],this.propEventSvc=new LocalEventService,this.globalEventHandlerFactory=e=>(t,n)=>{if(!this.isAlive())return;const o=ALWAYS_SYNC_GLOBAL_EVENTS.has(t);if(o&&!e||!o&&e||!isPublicEventHandler(t))return;const u=(d,f)=>{const g=_PUBLIC_EVENT_HANDLERS_MAP[d],v=this.gridOptions[g];typeof v=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>v(f))};if(this.gridReadyFired)u(t,n);else if(t==="gridReady"){u(t,n),this.gridReadyFired=!0;for(const d of this.queueEvents)u(d.eventName,d.event);this.queueEvents=[]}else this.queueEvents.push({eventName:t,event:n})}}wireBeans(e){this.gridOptions=e.gridOptions,this.validation=e.validation,this.api=e.gridApi,this.gridId=e.context.getId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){this.validateGridOptions(this.gridOptions),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory().bind(this),!0),this.eventSvc.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propEventSvc.setFrameworkOverrides(this.beans.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:e})=>{this.updateGridOptions({options:e,force:!0,source:"optionsUpdated"})}})}destroy(){super.destroy(),this.queueEvents=[]}get(e){return this.gridOptions[e]??GRID_OPTION_DEFAULTS[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return _exists(this.gridOptions[e])}mergeGridCommonParams(e){return e&&(n=>e(this.addCommon(n)))}updateGridOptions({options:e,force:t,source:n="api"}){const o={id:changeSetId++,properties:[]},u=[],{gridOptions:d,validation:f}=this;for(const g of Object.keys(e)){const v=GlobalGridOptions.applyGlobalGridOption(g,e[g]);f?.warnOnInitialPropertyUpdate(n,g);const w=t||typeof v=="object"&&n==="api",S=d[g];if(w||S!==v){d[g]=v;const R={type:g,currentValue:v,previousValue:S,changeSet:o,source:n};u.push(R)}}this.validateGridOptions(this.gridOptions),o.properties=u.map(g=>g.type);for(const g of u)_logIfDebug(this,`Updated property ${g.type} from`,g.previousValue," to ",g.currentValue),this.propEventSvc.dispatchEvent(g)}addPropertyEventListener(e,t){this.propEventSvc.addEventListener(e,t)}removePropertyEventListener(e,t){this.propEventSvc.removeEventListener(e,t)}getDomDataKey(){return this.domDataKey}addCommon(e){return e.api=this.api,e.context=this.gridOptionsContext,e}validateOptions(e,t){for(const n of Object.keys(e)){const o=e[n];if(o==null||o===!1)continue;let u=t[n];typeof u=="function"&&(u=u(e,this.gridOptions,this.beans)),u&&this.assertModuleRegistered(u,n)}}validateGridOptions(e){this.validateOptions(e,GRID_OPTIONS_MODULES),this.validation?.processGridOptions(e)}validateColDef(e,t,n){(n||!this.beans.dataTypeSvc?.isColPendingInference(t))&&(this.validateOptions(e,COLUMN_DEFINITION_MOD_VALIDATIONS),this.validation?.validateColDef(e))}assertModuleRegistered(e,t){const n=Array.isArray(e)?e.some(o=>this.isModuleRegistered(o)):this.isModuleRegistered(e);return n||_error(200,{...this.getModuleErrorParams(),moduleName:e,reasonOrId:t}),n}getModuleErrorParams(){return{gridId:this.gridId,gridScoped:_areModulesGridScoped(),rowModelType:this.get("rowModelType"),isUmd:_isUmd()}}isModuleRegistered(e){return _isModuleRegistered(e,this.gridId,this.get("rowModelType"))}setInstanceDomData(e){e[GRID_DOM_KEY]=this.instanceId}isElementInThisInstance(e){let t=e;for(;t;){const n=t[GRID_DOM_KEY];if(_exists(n))return n===this.instanceId;t=t.parentElement}return!1}};function isPublicEventHandler(e){return!!_PUBLIC_EVENT_HANDLERS_MAP[e]}var HeaderCellMouseListenerFeature=class extends BeanStub{constructor(e,t){super(),this.column=e,this.eGui=t,this.lastMovingChanged=0}postConstruct(){this.addManagedElementListeners(this.eGui,{click:e=>e&&this.onClick(e)}),this.addManagedListeners(this.column,{movingChanged:()=>{this.lastMovingChanged=Date.now()}})}onClick(e){const{sortSvc:t,rangeSvc:n,gos:o}=this.beans;if(!(_getEnableColumnSelection(o)?e.altKey:!0))n?.handleColumnSelection(this.column,e);else if(this.column.isSortable()){const d=this.column.isMoving(),g=Date.now()-this.lastMovingChanged<50;d||g||t?.progressSortFromEvent(this.column,e)}}};function getHeaderCompElementParams(e,t){const n={"aria-hidden":"true"};return{tag:"div",cls:"ag-cell-label-container",role:"presentation",children:[{tag:"span",ref:"eMenu",cls:"ag-header-icon ag-header-cell-menu-button",attrs:n},{tag:"span",ref:"eFilterButton",cls:"ag-header-icon ag-header-cell-filter-button",attrs:n},{tag:"div",ref:"eLabel",cls:"ag-header-cell-label",role:"presentation",children:[e?{tag:"span",ref:"eColRef",cls:"ag-header-col-ref"}:null,{tag:"span",ref:"eText",cls:"ag-header-cell-text"},{tag:"span",ref:"eFilter",cls:"ag-header-icon ag-header-label-icon ag-filter-icon",attrs:n},t?{tag:"ag-sort-indicator",ref:"eSortIndicator"}:null]}]}}var HeaderComp=class extends Component{constructor(){super(...arguments),this.eFilter=RefPlaceholder,this.eFilterButton=RefPlaceholder,this.eSortIndicator=RefPlaceholder,this.eMenu=RefPlaceholder,this.eLabel=RefPlaceholder,this.eText=RefPlaceholder,this.eColRef=RefPlaceholder,this.eSortOrder=RefPlaceholder,this.eSortAsc=RefPlaceholder,this.eSortDesc=RefPlaceholder,this.eSortMixed=RefPlaceholder,this.eSortNone=RefPlaceholder,this.eSortAbsoluteAsc=RefPlaceholder,this.eSortAbsoluteDesc=RefPlaceholder,this.isLoadingInnerComponent=!1}refresh(e){const t=this.params;if(this.params=e,this.workOutTemplate(e,!!this.beans?.sortSvc)!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||e.enableSorting!=this.currentSort||e.column.formulaRef!=this.currentRef||this.currentSuppressMenuHide!=null&&this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||t.enableFilterButton!=e.enableFilterButton||t.enableFilterIcon!=e.enableFilterIcon)return!1;if(this.innerHeaderComponent){const n={...e};_mergeDeep(n,e.innerHeaderComponentParams),this.innerHeaderComponent.refresh?.(n)}else this.setDisplayName(e);return!0}workOutTemplate(e,t){const{formula:n}=this.beans,o=e.template;return o?o?.trim?o.trim():o:getHeaderCompElementParams(!!n?.active,t)}init(e){this.params=e;const{sortSvc:t,touchSvc:n,rowNumbersSvc:o,userCompFactory:u}=this.beans,d=t?.getSortIndicatorSelector();this.currentTemplate=this.workOutTemplate(e,!!d),this.setTemplate(this.currentTemplate,d?[d]:void 0),this.eLabel&&(this.mouseListener??(this.mouseListener=this.createManagedBean(new HeaderCellMouseListenerFeature(e.column,this.eLabel)))),n?.setupForHeader(this),this.setMenu(),this.setupSort(),this.setupColumnRefIndicator(),o?.setupForHeader(this),this.setupFilterIcon(),this.setupFilterButton(),this.workOutInnerHeaderComponent(u,e),this.setDisplayName(e)}workOutInnerHeaderComponent(e,t){const n=_getInnerHeaderCompDetails(e,t,t);n&&(this.isLoadingInnerComponent=!0,n.newAgStackInstance().then(o=>{this.isLoadingInnerComponent=!1,o&&(this.isAlive()?(this.innerHeaderComponent=o,this.eText&&this.eText.appendChild(o.getGui())):this.destroyBean(o))}))}setDisplayName(e){const{displayName:t}=e,n=this.currentDisplayName;this.currentDisplayName=t,!(!this.eText||n===t||this.innerHeaderComponent||this.isLoadingInnerComponent)&&(this.eText.textContent=_toString(t))}addInIcon(e,t,n){const o=_createIconNoSpan(e,this.beans,n);o&&t.appendChild(o)}workOutShowMenu(){return this.params.enableMenu&&!!this.beans.menuSvc?.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return!!this.beans.menuSvc?.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){_removeFromParent(this.eMenu),this.eMenu=void 0;return}const{gos:e,eMenu:t,params:n}=this,o=_isLegacyMenuEnabled(e);this.addInIcon(o?"menu":"menuAlt",t,n.column),t.classList.toggle("ag-header-menu-icon",!o);const u=this.shouldSuppressMenuHide();this.currentSuppressMenuHide=u,this.addManagedElementListeners(t,{click:()=>this.showColumnMenu(this.eMenu)}),this.toggleMenuAlwaysShow(u)}toggleMenuAlwaysShow(e){this.eMenu?.classList.toggle("ag-header-menu-always-show",e)}showColumnMenu(e){const{currentSuppressMenuHide:t,params:n}=this;t||this.toggleMenuAlwaysShow(!0),n.showColumnMenu(e,()=>{t||this.toggleMenuAlwaysShow(!1)})}onMenuKeyboardShortcut(e){const{params:t,gos:n,beans:o,eMenu:u,eFilterButton:d}=this,f=t.column,g=_isLegacyMenuEnabled(n);if(e&&!g){if(o.menuSvc?.isFilterMenuInHeaderEnabled(f))return t.showFilter(d??u??this.getGui()),!0}else if(t.enableMenu)return this.showColumnMenu(u??d??this.getGui()),!0;return!1}setupSort(){const{sortSvc:e}=this.beans;if(!e)return;const{enableSorting:t,column:n}=this.params;if(this.currentSort=t,!this.eSortIndicator){this.eSortIndicator=this.createBean(e.createSortIndicator(!0));const{eSortIndicator:o,eSortOrder:u,eSortAsc:d,eSortDesc:f,eSortMixed:g,eSortNone:v,eSortAbsoluteAsc:w,eSortAbsoluteDesc:S}=this;o.attachCustomElements(u,d,f,g,v,w,S)}this.eSortIndicator.setupSort(n),this.currentSort&&e.setupHeader(this,n)}setupColumnRefIndicator(){const{eColRef:e,beans:{editModelSvc:t},params:n}=this;e&&(this.currentRef=n.column.formulaRef,e.textContent=this.currentRef,_setDisplayed(e,!1),this.addManagedEventListeners({cellEditingStarted:()=>{const o=t?.getEditPositions(),u=!!this.currentRef&&!!o?.some(d=>d.column.isAllowFormula());_setDisplayed(e,u)},cellEditingStopped:()=>{_setDisplayed(e,!1)}}))}setupFilterIcon(){const{eFilter:e,params:t}=this;if(!e)return;const n=()=>{const o=t.column.isFilterActive();_setDisplayed(e,o,{skipAriaHidden:!0})};this.configureFilter(t.enableFilterIcon,e,n,"filterActive")}setupFilterButton(){const{eFilterButton:e,params:t}=this;if(!e)return;this.configureFilter(t.enableFilterButton,e,this.onFilterChangedButton.bind(this),"filter")?this.addManagedElementListeners(e,{click:()=>t.showFilter(e)}):this.eFilterButton=void 0}configureFilter(e,t,n,o){if(!e)return _removeFromParent(t),!1;const u=this.params.column;return this.addInIcon(o,t,u),this.addManagedListeners(u,{filterChanged:n}),n(),!0}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){const{eFilterButton:t,eMenu:n}=this;return e?t??n??this.getGui():n??t??this.getGui()}destroy(){super.destroy(),this.innerHeaderComponent=this.destroyBean(this.innerHeaderComponent),this.mouseListener=this.destroyBean(this.mouseListener)}},GroupStickyLabelFeature=class extends BeanStub{constructor(e,t){super(),this.eLabel=e,this.columnGroup=t,this.isSticky=!1,this.left=null,this.right=null}postConstruct(){const{columnGroup:e,beans:t}=this,{ctrlsSvc:n}=t;n.whenReady(this,()=>{const o=this.refreshPosition.bind(this);e.getPinned()==null&&this.addManagedEventListeners({bodyScroll:u=>{u.direction==="horizontal"&&this.updateSticky(u.left)}}),this.addManagedListeners(e,{leftChanged:o,displayedChildrenChanged:o}),this.addManagedEventListeners({columnResized:o}),this.refreshPosition()})}refreshPosition(){const{columnGroup:e,beans:t}=this,n=e.getLeft(),o=e.getActualWidth();if(n==null||o===0){this.left=null,this.right=null,this.setSticky(!1);return}this.left=n,this.right=n+o;const u=t.colViewport.getScrollPosition();u!=null&&this.updateSticky(u)}updateSticky(e){const{beans:t,left:n,right:o}=this;if(n==null||o==null){this.setSticky(!1);return}const{gos:u,visibleCols:d}=t,g=u.get("enableRtl")?d.bodyWidth-e:e;this.setSticky(n<g&&o>g)}setSticky(e){const{isSticky:t,eLabel:n}=this;t!==e&&(this.isSticky=e,n.classList.toggle("ag-sticky-label",e))}},HeaderGroupCompElement={tag:"div",cls:"ag-header-group-cell-label",role:"presentation",children:[{tag:"span",ref:"agLabel",cls:"ag-header-group-text",role:"presentation"},{tag:"span",ref:"agOpened",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"},{tag:"span",ref:"agClosed",cls:"ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"}]},HeaderGroupComp=class extends Component{constructor(){super(HeaderGroupCompElement),this.agOpened=RefPlaceholder,this.agClosed=RefPlaceholder,this.agLabel=RefPlaceholder,this.isLoadingInnerComponent=!1}init(e){const{userCompFactory:t,touchSvc:n}=this.beans;this.params=e,this.checkWarnings(),this.workOutInnerHeaderGroupComponent(t,e),this.setupLabel(e),this.addGroupExpandIcon(e),this.setupExpandIcons(),n?.setupForHeaderGroup(this)}checkWarnings(){this.params.template&&_warn(89)}workOutInnerHeaderGroupComponent(e,t){const n=_getInnerHeaderGroupCompDetails(e,t,t);n&&(this.isLoadingInnerComponent=!0,n.newAgStackInstance().then(o=>{this.isLoadingInnerComponent=!1,o&&(this.isAlive()?(this.innerHeaderGroupComponent=o,this.agLabel.appendChild(o.getGui())):this.destroyBean(o))}))}setupExpandIcons(){const{agOpened:e,agClosed:t,params:{columnGroup:n},beans:{colGroupSvc:o}}=this;this.addInIcon("columnGroupOpened",e),this.addInIcon("columnGroupClosed",t);const u=v=>{if(_isStopPropagationForAgGrid(v))return;const w=!n.isExpanded();o.setColumnGroupOpened(n.getProvidedColumnGroup(),w,"uiColumnExpanded")};this.addTouchAndClickListeners(t,u),this.addTouchAndClickListeners(e,u);const d=v=>{_stopPropagationForAgGrid(v)};this.addManagedElementListeners(t,{dblclick:d}),this.addManagedElementListeners(e,{dblclick:d}),this.addManagedElementListeners(this.getGui(),{dblclick:u}),this.updateIconVisibility();const f=n.getProvidedColumnGroup(),g=this.updateIconVisibility.bind(this);this.addManagedListeners(f,{expandedChanged:g,expandableChanged:g})}addTouchAndClickListeners(e,t){this.beans.touchSvc?.setupForHeaderGroupElement(this,e,t),this.addManagedElementListeners(e,{click:t})}updateIconVisibility(){const{agOpened:e,agClosed:t,params:{columnGroup:n}}=this;if(n.isExpandable()){const o=n.isExpanded();_setDisplayed(e,o),_setDisplayed(t,!o)}else _setDisplayed(e,!1),_setDisplayed(t,!1)}addInIcon(e,t){const n=_createIconNoSpan(e,this.beans,null);n&&t.appendChild(n)}addGroupExpandIcon(e){if(!e.columnGroup.isExpandable()){const{agOpened:t,agClosed:n}=this;_setDisplayed(t,!1),_setDisplayed(n,!1)}}setupLabel(e){const{displayName:t,columnGroup:n}=e,{innerHeaderGroupComponent:o,isLoadingInnerComponent:u}=this,d=o||u;_exists(t)&&!d&&(this.agLabel.textContent=_toString(t)),n.getColGroupDef()?.suppressStickyLabel||this.createManagedBean(new GroupStickyLabelFeature(this.getGui(),n))}destroy(){super.destroy(),this.innerHeaderGroupComponent&&(this.destroyBean(this.innerHeaderGroupComponent),this.innerHeaderGroupComponent=void 0)}},ColumnHeaderCompModule={moduleName:"ColumnHeaderComp",version:VERSION,userComponents:{agColumnHeader:HeaderComp},icons:{menu:"menu",menuAlt:"menu-alt"}},ColumnGroupHeaderCompModule={moduleName:"ColumnGroupHeaderComp",version:VERSION,userComponents:{agColumnGroupHeader:HeaderGroupComp},icons:{columnGroupOpened:"expanded",columnGroupClosed:"contracted"}},AnimationFrameService=class extends BeanStub{constructor(){super(...arguments),this.beanName="animationFrameSvc",this.p1={list:[],sorted:!1},this.p2={list:[],sorted:!1},this.f1={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastScrollTop=0,this.taskCount=0}setScrollTop(e){this.scrollGoingDown=e>=this.lastScrollTop,e===0&&(this.scrollGoingDown=!0),this.lastScrollTop=e}postConstruct(){this.active=!this.gos.get("suppressAnimationFrame"),this.batchFrameworkComps=this.beans.frameworkOverrides.batchFrameworkComps}verify(){this.active===!1&&_warn(92)}createTask(e,t,n,o,u=!1){this.verify();let d=n;o&&this.batchFrameworkComps&&(d="f1");const f={task:e,index:t,createOrder:++this.taskCount,deferred:u};this.addTaskToList(this[d],f),this.schedule()}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort((n,o)=>n.deferred!==o.deferred?n.deferred?-1:1:n.index!==o.index?t*(o.index-n.index):o.createOrder-n.createOrder),e.sorted=!0}addDestroyTask(e){this.verify(),this.destroyTasks.push(e),this.schedule()}executeFrame(e){const{p1:t,p2:n,f1:o,destroyTasks:u,beans:d}=this,{ctrlsSvc:f,frameworkOverrides:g}=d,v=t.list,w=n.list,S=o.list,R=Date.now();let _=0;const F=e<=0,M=f.getScrollFeature();for(;F||_<e;){if(!M.scrollGridIfNeeded()){let N;if(v.length)this.sortTaskList(t),N=v.pop().task;else if(w.length)this.sortTaskList(n),N=w.pop().task;else if(S.length)g.wrapOutgoing(()=>{for(;(F||_<e)&&!M.scrollGridIfNeeded();){if(S.length)this.sortTaskList(o),N=S.pop().task,N();else break;_=Date.now()-R}}),N=()=>{};else if(u.length)N=u.pop();else break;N()}_=Date.now()-R}v.length||w.length||S.length||u.length?this.requestFrame():this.ticking=!1}flushAllFrames(){this.active&&this.executeFrame(-1)}schedule(){this.active&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);_requestAnimationFrame(this.beans,e)}isQueueEmpty(){return!this.ticking}},AnimationFrameModule={moduleName:"AnimationFrame",version:VERSION,beans:[AnimationFrameService]},IconService=class extends BeanStub{constructor(){super(...arguments),this.beanName="iconSvc"}createIconNoSpan(e,t){return _createIconNoSpan(e,this.beans,t?.column)}},TouchService=class extends BeanStub{constructor(){super(...arguments),this.beanName="touchSvc"}mockBodyContextMenu(e,t){this.mockContextMenu(e,e.eBodyViewport,t)}mockHeaderContextMenu(e,t){this.mockContextMenu(e,e.eGui,t)}mockRowContextMenu(e){if(!_isIOSUserAgent())return;const t=(n,o,u)=>{const{rowCtrl:d,cellCtrl:f}=e.getControlsForEventTarget(u?.target??null);f?.column&&f.dispatchCellContextMenuEvent(u??null),this.beans.contextMenuSvc?.handleContextMenuMouseEvent(void 0,u,d,f)};this.mockContextMenu(e,e.element,t)}handleCellDoubleClick(e,t){return(()=>{if(!_isIOSUserAgent()||_isEventSupported("dblclick"))return!1;const o=Date.now(),u=o-e.lastIPadMouseClickEvent<200;return e.lastIPadMouseClickEvent=o,u})()?(e.onCellDoubleClicked(t),t.preventDefault(),!0):!1}setupForHeader(e){const{gos:t,sortSvc:n,menuSvc:o}=this.beans;if(t.get("suppressTouch"))return;const{params:u,eMenu:d,eFilterButton:f}=e,g=new TouchListener(e.getGui(),!0);e.addDestroyFunc(()=>g.destroy());const v=e.shouldSuppressMenuHide(),w=v&&_exists(d)&&u.enableMenu;let S=g;if(w&&(S=new TouchListener(d,!0),e.addDestroyFunc(()=>S.destroy())),u.enableMenu||o?.isHeaderContextMenuEnabled(u.column)){const R=w?"tap":"longTap",_=F=>u.showColumnMenuAfterMouseClick(F.touchStart);e.addManagedListeners(S,{[R]:_}),e.addManagedListeners(g,{longTap:_})}if(u.enableSorting){const R=_=>{const F=_.touchStart.target;v&&(d?.contains(F)||f?.contains(F))||n?.progressSort(u.column,!1,"uiColumnSorted")};e.addManagedListeners(g,{tap:R})}if(u.enableFilterButton&&f){const R=new TouchListener(f,!0);e.addManagedListeners(R,{tap:()=>u.showFilter(f)}),e.addDestroyFunc(()=>R.destroy())}}setupForHeaderGroup(e){const t=e.params;if(this.beans.menuSvc?.isHeaderContextMenuEnabled(t.columnGroup.getProvidedColumnGroup())){const n=new TouchListener(t.eGridHeader,!0),o=u=>t.showColumnMenuAfterMouseClick(u.touchStart);e.addManagedListeners(n,{longTap:o}),e.addDestroyFunc(()=>n.destroy())}}setupForHeaderGroupElement(e,t,n){const o=new TouchListener(t,!0);e.addManagedListeners(o,{tap:n}),e.addDestroyFunc(()=>o.destroy())}mockContextMenu(e,t,n){if(!_isIOSUserAgent())return;const o=new TouchListener(t),u=d=>{_isEventFromThisInstance(this.beans,d.touchEvent)&&n(void 0,d.touchStart,d.touchEvent)};e.addManagedListeners(o,{longTap:u}),e.addDestroyFunc(()=>o.destroy())}},TouchModule={moduleName:"Touch",version:VERSION,beans:[TouchService]},CellNavigationService=class extends BeanStub{constructor(){super(...arguments),this.beanName="cellNavigation"}wireBeans(e){this.rowSpanSvc=e.rowSpanSvc}getNextCellToFocus(e,t,n=!1){return n?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const n=e===KeyCode.UP,o=e===KeyCode.DOWN,u=e===KeyCode.LEFT;let d,f;const{pageBounds:g,gos:v,visibleCols:w,pinnedRowModel:S}=this.beans,{rowPinned:R}=t;if(n||o)R&&S?n?f=0:f=R==="top"?S.getPinnedTopRowCount()-1:S.getPinnedBottomRowCount()-1:f=n?g.getFirstRow():g.getLastRow(),d=t.column;else{const _=v.get("enableRtl");f=t.rowIndex,d=(u!==_?w.allCols:[...w.allCols].reverse()).find(M=>this.isCellGoodToFocusOn({rowIndex:f,rowPinned:null,column:M}))}return d?{rowIndex:f,rowPinned:R,column:d}:null}getNextCellToFocusWithoutCtrlPressed(e,t){let n=t,o=!1;for(;!o;){switch(e){case KeyCode.UP:n=this.getCellAbove(n);break;case KeyCode.DOWN:n=this.getCellBelow(n);break;case KeyCode.RIGHT:n=this.gos.get("enableRtl")?this.getCellToLeft(n):this.getCellToRight(n);break;case KeyCode.LEFT:n=this.gos.get("enableRtl")?this.getCellToRight(n):this.getCellToLeft(n);break;default:n=null,_warn(8,{key:e});break}n?o=this.isCellGoodToFocusOn(n):o=!0}return n}isCellGoodToFocusOn(e){const t=e.column;let n;const{pinnedRowModel:o,rowModel:u}=this.beans;switch(e.rowPinned){case"top":n=o?.getPinnedTopRow(e.rowIndex);break;case"bottom":n=o?.getPinnedBottomRow(e.rowIndex);break;default:n=u.getRow(e.rowIndex);break}return n?!this.isSuppressNavigable(t,n):!1}getCellToLeft(e){if(!e)return null;const t=this.beans.visibleCols.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.beans.visibleCols.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellBelow(e){if(!e)return null;const t=this.rowSpanSvc?.getCellEnd(e)??e,n=_getRowBelow(this.beans,t,!0);return n?{rowIndex:n.rowIndex,column:e.column,rowPinned:n.rowPinned}:null}getCellAbove(e){if(!e)return null;const t=this.rowSpanSvc?.getCellStart(e)??e,n=_getRowAbove(this.beans,{rowIndex:t.rowIndex,rowPinned:t.rowPinned},!0);return n?{rowIndex:n.rowIndex,column:e.column,rowPinned:n.rowPinned}:null}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){const{visibleCols:t,pagination:n}=this.beans,o=t.allCols;let u=e.rowIndex,d=e.rowPinned,f=t.getColAfter(e.column);if(!f){f=o[0];const g=_getRowBelow(this.beans,e,!0);if(_missing(g)||!g.rowPinned&&!(n?.isRowInPage(g.rowIndex)??!0))return null;u=g?g.rowIndex:null,d=g?g.rowPinned:null}return{rowIndex:u,column:f,rowPinned:d}}getNextTabbedCellBackwards(e){const{beans:t}=this,{visibleCols:n,pagination:o}=t,u=n.allCols;let d=e.rowIndex,f=e.rowPinned,g=n.getColBefore(e.column);if(!g){g=_last(u);const v=_getRowAbove(t,{rowIndex:e.rowIndex,rowPinned:e.rowPinned},!0);if(_missing(v)||!v.rowPinned&&!(o?.isRowInPage(v.rowIndex)??!0))return null;d=v?v.rowIndex:null,f=v?v.rowPinned:null}return{rowIndex:d,column:g,rowPinned:f}}isSuppressNavigable(e,t){const{suppressNavigable:n}=e.colDef;if(typeof n=="boolean")return n;if(typeof n=="function"){const o=e.createColumnFunctionCallbackParams(t);return n(o)}return!1}};function getFocusedCell(e){return e.focusSvc.getFocusedCell()}function clearFocusedCell(e){return e.focusSvc.clearFocusedCell()}function setFocusedCell(e,t,n,o){e.focusSvc.setFocusedCell({rowIndex:t,column:n,rowPinned:o,forceBrowserFocus:!0})}function tabToNextCell(e,t){return e.navigation?.tabToNextCell(!1,t)??!1}function tabToPreviousCell(e,t){return e.navigation?.tabToNextCell(!0,t)??!1}function setFocusedHeader(e,t,n=!1){const o=e.headerNavigation?.getHeaderPositionForColumn(t,n);o&&e.focusSvc.focusHeaderPosition({headerPosition:o})}function _unwrapUserComp(e){const t=e;return t?.getFrameworkComponentInstance!=null?t.getFrameworkComponentInstance():e}var EditModelService=class extends BeanStub{constructor(){super(...arguments),this.beanName="editModelSvc",this.edits=new Map,this.cellValidations=new EditCellValidationModel,this.rowValidations=new EditRowValidationModel,this.suspendEdits=!1}suspend(e){this.suspendEdits=e}removeEdits({rowNode:e,column:t}){if(!this.hasEdits({rowNode:e})||!e)return;const n=this.getEditRow(e);t?n.delete(t):n.clear(),n.size===0&&this.edits.delete(e)}getEditRow(e,t={}){if(this.suspendEdits||this.edits.size===0)return;const n=e&&this.edits.get(e);if(n)return n;if(t.checkSiblings){const o=e.pinnedSibling;if(o)return this.getEditRow(o)}}getEditRowDataValue(e,{checkSiblings:t}={}){if(!e||this.edits.size===0)return;const n=this.getEditRow(e),o=e.pinnedSibling,u=t&&o&&this.getEditRow(o);if(!n&&!u)return;const d={...e.data},f=(g,v)=>g.forEach(({pendingValue:w},S)=>{w!==UNEDITED&&(v[S.getColId()]=w)});return n&&f(n,d),u&&f(u,d),d}getEdit(e={},t){const{rowNode:n,column:o}=e,u=this.edits;if(this.suspendEdits||u.size===0||!n||!o)return;const d=u.get(n)?.get(o);if(d)return d;if(t?.checkSiblings){const f=n.pinnedSibling;if(f)return u.get(f)?.get(o)}}getEditMap(e=!0){if(this.suspendEdits||this.edits.size===0)return new Map;if(!e)return this.edits;const t=new Map;return this.edits.forEach((n,o)=>{const u=new Map;n.forEach(({editorState:d,...f},g)=>u.set(g,{...f})),t.set(o,u)}),t}setEditMap(e){this.edits.clear(),e.forEach((t,n)=>{const o=new Map;t.forEach((u,d)=>o.set(d,{...u})),this.edits.set(n,o)})}setEdit(e,t){const n=this.edits;(n.size===0||!n.has(e.rowNode))&&n.set(e.rowNode,new Map);const o=this.getEdit(e),u={editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0},...o,...t};return this.getEditRow(e.rowNode).set(e.column,u),u}clearEditValue(e){const{rowNode:t,column:n}=e;if(!t)return;const o=d=>{d.editorValue=void 0,d.pendingValue=d.sourceValue,d.state="changed"};if(!n){this.getEditRow(t)?.forEach(o);return}const u=this.getEdit(e);u&&o(u)}getState(e){if(!this.suspendEdits)return this.getEdit(e)?.state}getEditPositions(e){if(this.suspendEdits||(e??this.edits).size===0)return[];const t=[];return(e??this.edits).forEach((n,o)=>{for(const u of n.keys()){const{editorState:d,...f}=n.get(u);t.push({rowNode:o,column:u,...f})}}),t}hasRowEdits(e,t){return this.suspendEdits||this.edits.size===0?!1:!!this.getEditRow(e,t)}hasEdits(e={},t={}){if(this.suspendEdits||this.edits.size===0)return!1;const{rowNode:n,column:o}=e,{withOpenEditor:u}=t;if(n){const d=this.getEditRow(n,t);return d?o?u?this.getEdit(e)?.state==="editing":d.has(o):d.size!==0?u?Array.from(d.values()).some(({state:f})=>f==="editing"):!0:!1:!1}return u?this.getEditPositions().some(({state:d})=>d==="editing"):this.edits.size>0}start(e){const t=this.getEditRow(e.rowNode)??new Map,{rowNode:n,column:o}=e;o&&!t.has(o)&&t.set(o,{editorValue:void 0,pendingValue:UNEDITED,sourceValue:this.beans.valueSvc.getValue(o,n,"data"),state:"editing",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}}),this.edits.set(n,t)}stop(e,t,n){if(this.hasEdits(e))if(t){const o=this.getEditRow(e.rowNode)?.get(e.column);o&&(o.pendingValue===UNEDITED||o.pendingValue===o.sourceValue)?this.removeEdits(e):o&&n&&(o.editorValue=void 0)}else this.removeEdits(e)}clear(){for(const e of this.edits.values())e.clear();this.edits.clear()}getCellValidationModel(){return this.cellValidations}getRowValidationModel(){return this.rowValidations}setCellValidationModel(e){this.cellValidations=e}setRowValidationModel(e){this.rowValidations=e}destroy(){super.destroy(),this.clear()}},EditCellValidationModel=class{constructor(){this.cellValidations=new Map}getCellValidation(e){const{rowNode:t,column:n}=e||{};return this.cellValidations?.get(t)?.get(n)}hasCellValidation(e){return!e?.rowNode||!e.column?this.cellValidations.size>0:!!this.getCellValidation(e)}setCellValidation(e,t){const{rowNode:n,column:o}=e;this.cellValidations.has(n)||this.cellValidations.set(n,new Map),this.cellValidations.get(n).set(o,t)}clearCellValidation(e){const{rowNode:t,column:n}=e;this.cellValidations.get(t)?.delete(n)}setCellValidationMap(e){this.cellValidations=e}getCellValidationMap(){return this.cellValidations}clearCellValidationMap(){this.cellValidations.clear()}},EditRowValidationModel=class{constructor(){this.rowValidations=new Map}getRowValidation(e){const{rowNode:t}=e||{};return this.rowValidations.get(t)}hasRowValidation(e){return e?.rowNode?!!this.getRowValidation(e):this.rowValidations.size>0}setRowValidation({rowNode:e},t){this.rowValidations.set(e,t)}clearRowValidation({rowNode:e}){this.rowValidations.delete(e)}setRowValidationMap(e){this.rowValidations=e}getRowValidationMap(){return this.rowValidations}clearRowValidationMap(){this.rowValidations.clear()}};function _getRowCtrl(e,t={}){const{rowIndex:n,rowId:o,rowCtrl:u,rowPinned:d}=t;if(u)return u;const{rowModel:f,rowRenderer:g}=e;let{rowNode:v}=t;return v||(o?v=_getRowById(e,o,d):n!=null&&(v=f.getRow(n))),g.getRowCtrls(v?[v]:[])?.[0]}function _getCellCtrl(e,t={}){const{cellCtrl:n,colId:o,columnId:u,column:d}=t;if(n)return n;const f=e.colModel.getCol(o??u??_getColId(d)),g=t.rowCtrl??_getRowCtrl(e,t),v=g?.getCellCtrl(f)??void 0;if(v)return v;const w=t.rowNode??g?.rowNode;if(w)return e.rowRenderer.getCellCtrls([w],[f])?.[0]}function _stopEditing(e){const{editSvc:t}=e;t?.isBatchEditing()?(_syncFromEditors(e,{persist:!0}),_destroyEditors(e)):t?.stopEditing(void 0,{source:"api"})}function _addStopEditingWhenGridLosesFocus(e,t,n){const{gos:o,popupSvc:u}=t;if(!o.get("stopEditingWhenCellsLoseFocus"))return;const d=f=>{const g=f.relatedTarget;if(_getTabIndex(g)===null){_stopEditing(t);return}let v=n.some(w=>w.contains(g))&&o.isElementInThisInstance(g);v||(v=!!u&&(u.getActivePopups().some(w=>w.contains(g))||u.isElementWithinCustomPopup(g))),v||_stopEditing(t)};for(const f of n)e.addManagedElementListeners(f,{focusout:d})}function _getColId(e){if(e)return typeof e=="string"?e:e.getColId()}var UNEDITED=Symbol("unedited"),getCellEditorInstances=(e,t={})=>{const n=e.rowRenderer.getCellCtrls(t.rowNodes,t.columns),o=new Array(n.length);let u=0;for(let d=0,f=n.length;d<f;++d){const v=n[d].comp?.getCellEditor();v&&(o[u++]=_unwrapUserComp(v))}return o.length=u,o};function _setupEditors(e,t,n,o,u,d){t.length===0&&n?.rowNode&&n?.column&&_setupEditor(e,n,{key:o,event:u,cellStartedEdit:d});const{valueSvc:f,editSvc:g,editModelSvc:v}=e,{rowNode:w,column:S}=n??{};for(const R of t){const{rowNode:_,column:F}=R,M=_getCellCtrl(e,R);if(!M){if(_&&F){const N=f.getValue(F,_,"data"),U=(n?.rowNode===_&&n?.column===F&&o||void 0)??g?.getCellDataValue(R)??f.getValueForDisplay({column:F,node:_,from:"edit"})?.value??N??UNEDITED;v?.setEdit(R,{pendingValue:getNormalisedFormula(e,U,!1,F),sourceValue:N,state:"editing"})}continue}const I=d&&w===M.rowNode&&M.column===S;_setupEditor(e,{rowNode:w,column:M.column},{key:I?o:null,event:I?u:null,cellStartedEdit:I&&d})}}function _sourceAndPendingDiffer({pendingValue:e,sourceValue:t}){return e===UNEDITED&&(e=t),e!==t}function _filterChangedEdits(e){const t=new Map;for(const[n,o]of e){const u=new Map;for(const[d,f]of o)_sourceAndPendingDiffer(f)&&u.set(d,f);u.size>0&&t.set(n,u)}return t}function _setupEditor(e,t,n){const{key:o,event:u,cellStartedEdit:d,silent:f}=n??{},{editModelSvc:g,editSvc:v,gos:w,userCompFactory:S}=e,R=_getCellCtrl(e,t),_=R?.comp?.getCellEditor(),F=_createEditorParams(e,t,o,d&&!f),M=g?.getEdit(t),I=F.value??M?.sourceValue;if(_){g?.setEdit(t,{editorValue:getNormalisedFormula(e,I,!0,t.column),state:"editing"}),_.refresh?.(F);return}const N=t.column.getColDef(),B=_getCellEditorDetails(S,N,F);if(!B)return;const{popupFromSelector:H,popupPositionFromSelector:U}=B,$=H??!!N.cellEditorPopup,z=U??N.cellEditorPopupPosition;if(checkAndPreventDefault(B.params,u),!R)return;const{rangeFeature:j,rowCtrl:J,comp:ie,onEditorAttachedFuncs:se}=R;g?.setEdit(t,{editorValue:getNormalisedFormula(e,I,!0,t.column),state:"editing"}),R.editCompDetails=B,se.push(()=>j?.unsetComp()),ie?.setEditDetails(B,$,z,w.get("reactiveCustomComponents")),J?.refreshRow({suppressFlash:!0});const fe=g?.getEdit(t);!f&&!fe?.editorState?.cellStartedEditing&&(v?.dispatchCellEvent(t,u,"cellEditingStarted",{value:I}),g?.setEdit(t,{editorState:{cellStartedEditing:!0}}))}function _valueFromEditor(e,t,n){const o={editorValueExists:!1};if(_hasValidationRules(e)&&(t.getValidationErrors?.()?.length??0)>0||n?.isCancelling)return o;if(n?.isStopping){const d=t?.isCancelAfterEnd?.();if(d)return{...o,isCancelAfterEnd:d}}return{editorValue:t.getValue(),editorValueExists:!0}}function _createEditorParams(e,t,n,o){const{valueSvc:u,gos:d,editSvc:f}=e,g=e.gos.get("enableGroupEdit"),v=_getCellCtrl(e,t),w=t.rowNode?.rowIndex??void 0,S=f?.isBatchEditing(),R=e.colModel.getCol(t.column.getId()),{rowNode:_,column:F}=t,M=v.comp?.getCellEditor(),I=f?.getCellDataValue(t),N=I===void 0?M?_valueFromEditor(e,M)?.editorValue:void 0:I,B=N===UNEDITED?u.getValueForDisplay({column:R,node:_,from:"edit"})?.value:N;let H=g?N:B;return F.isAllowFormula()&&e.formula?.isFormula(H)&&(H=e.formula?.normaliseFormula(H,!0)??H),_addGridCommonParams(d,{value:H,eventKey:n??null,column:F,colDef:F.getColDef(),rowIndex:w,node:_,data:_.data,cellStartedEdit:!!o,onKeyDown:v?.onKeyDown.bind(v),stopEditing:U=>{f.stopEditing(t,{source:S?"ui":"api",suppressNavigateAfterEdit:U}),_destroyEditor(e,t,{})},eGridCell:v?.eGui,parseValue:U=>u.parseValue(R,_,U,v?.value),formatValue:v?.formatValue.bind(v),validate:()=>{f?.validateEdit()}})}function _purgeUnchangedEdits(e,t){const{editModelSvc:n}=e;n?.getEditMap().forEach((o,u)=>{o.forEach((d,f)=>{!t&&(d.state==="editing"||d.pendingValue===UNEDITED)||!_sourceAndPendingDiffer(d)&&(d.state!=="editing"||t)&&n?.removeEdits({rowNode:u,column:f})})})}function _refreshEditorOnColDefChanged(e,t){const n=t.comp?.getCellEditor();if(!n?.refresh)return;const{eventKey:o,cellStartedEdit:u}=t.editCompDetails.params,{column:d}=t,f=_createEditorParams(e,t,o,u),g=d.getColDef(),v=_getCellEditorDetails(e.userCompFactory,g,f);n.refresh(checkAndPreventDefault(v.params,o))}function checkAndPreventDefault(e,t){return t instanceof KeyboardEvent&&e.column.getColDef().cellEditor==="agNumberCellEditor"?e.suppressPreventDefault=["-","+",".","e"].includes(t?.key??"")||e.suppressPreventDefault:t?.preventDefault?.(),e}function _syncFromEditors(e,t){for(const n of e.editModelSvc?.getEditPositions()??[]){const o=_getCellCtrl(e,n);if(!o)continue;const u=o.comp?.getCellEditor();if(!u)continue;const{editorValue:d,editorValueExists:f,isCancelAfterEnd:g}=_valueFromEditor(e,u,t);g&&e.editModelSvc?.setEdit(n,{editorState:{isCancelAfterEnd:g}}),_syncFromEditor(e,n,d,void 0,!f,t)}}function _syncFromEditor(e,t,n,o,u,d){const{editModelSvc:f,valueSvc:g}=e;if(!f)return;const{rowNode:v,column:w}=t;if(!(v&&w))return;let S=f.getEdit(t);if(S?.sourceValue===void 0){const R=S?getNormalisedFormula(e,S.editorValue,!1,w):UNEDITED,_={sourceValue:g.getValue(w,v,"data"),pendingValue:R};d?.persist&&(_.state="changed"),S=f.setEdit(t,_)}f.setEdit(t,{editorValue:u?getNormalisedFormula(e,S.sourceValue,!0,w):n}),d?.persist&&_persistEditorValue(e,t)}function getNormalisedFormula(e,t,n,o){const{formula:u}=e;return o.isAllowFormula()&&u?.isFormula(t)?u?.normaliseFormula(t,n)??t:t}function _persistEditorValue(e,t){const{editModelSvc:n}=e,o=n?.getEdit(t),d={pendingValue:getNormalisedFormula(e,o?.editorValue,!1,t.column)};!o?.editorState?.cellStoppedEditing&&o?.state!=="editing"&&(d.state="changed"),n?.setEdit(t,d)}function _destroyEditors(e,t,n={}){if(t||(t=e.editModelSvc?.getEditPositions()),t)for(const o of t)_destroyEditor(e,o,n)}function _destroyEditor(e,t,n,o=_getCellCtrl(e,t)){const u=e.editModelSvc,d=u?.getEdit(t);let f;if(d&&d.state!=="editing"&&d.editorState?.cellStoppedEditing?f=d.state:f="changed",!o){d&&u?.setEdit(t,{state:f});return}const g=o.comp,v=g?.getCellEditor();if(g&&!v){if(o?.refreshCell(),d){u?.setEdit(t,{state:f});const S=e.gos.get("enableGroupEdit")?_enabledGroupEditStoppedArgs(d,n?.cancel):{valueChanged:!1,newValue:void 0,oldValue:d.sourceValue};dispatchEditingStopped(e,t,S,n)}return}if(_hasValidationRules(e)){const S=d&&v?.getValidationErrors?.(),R=u?.getCellValidationModel();S?.length?R?.setCellValidation(t,{errorMessages:S}):R?.clearCellValidation(t)}d&&u?.setEdit(t,{state:f}),g?.setEditDetails(),g?.refreshEditStyles(!1,!1),o?.refreshCell({force:!0,suppressFlash:!0});const w=u?.getEdit(t);if(w&&w.state!=="editing"){const S=n?.cancel,R=e.gos.get("enableGroupEdit")?_enabledGroupEditStoppedArgs(w,S):_cellEditStoppedArgs(w,d,S);dispatchEditingStopped(e,t,R,n)}}function _enabledGroupEditStoppedArgs(e,t){const{sourceValue:n,pendingValue:o}=e;let u;return!t&&o!==UNEDITED&&(u=o),{valueChanged:!t&&_sourceAndPendingDiffer(e),newValue:u,oldValue:n,value:n}}function _cellEditStoppedArgs(e,t,n){if(n||e.editorState.isCancelAfterEnd)return{valueChanged:!1,newValue:void 0,oldValue:e.sourceValue};let o=e.editorValue;return(o==null||o===UNEDITED)&&(o=t?.pendingValue),o===UNEDITED&&(o=void 0),{valueChanged:_sourceAndPendingDiffer(e),newValue:o,oldValue:e.sourceValue}}function dispatchEditingStopped(e,t,n,{silent:o,event:u}={}){const{editSvc:d,editModelSvc:f}=e,g=f?.getEdit(t),{editorState:v}=g||{},{isCancelBeforeStart:w}=v||{};!o&&!w&&(d?.dispatchCellEvent(t,u,"cellEditingStopped",n),f?.setEdit(t,{editorState:{cellStoppedEditing:!0}}))}function _columnDefsRequireValidation(e){if(!e)return!1;for(let t=0,n=e.length;t<n;++t){const o=e[t],u=o.cellEditorParams;if(!(!u||!o.editable&&!o.groupRowEditable)&&(u.minLength!==void 0||u.maxLength!==void 0||u.getValidationErrors!==void 0||u.min!==void 0||u.max!==void 0))return!0}return!1}function _editorsRequireValidation(e){const t=e.rowRenderer.getCellCtrls();for(let n=0,o=t.length;n<o;++n){const d=t[n].comp?.getCellEditor();if(d){const f=_unwrapUserComp(d);if(f.getValidationElement||f.getValidationErrors)return!0}}return!1}function _hasValidationRules(e){return!!e.gos.get("getFullRowEditValidationErrors")||_columnDefsRequireValidation(e.colModel.getColumnDefs())||_editorsRequireValidation(e)}function _populateModelValidationErrors(e,t){if(!(t||_hasValidationRules(e)))return;const n=new EditCellValidationModel,{ariaAnnounce:o,localeSvc:u,editModelSvc:d,gos:f}=e,g=f.get("editType")==="fullRow",w=_getLocaleTextFunc(u)("ariaValidationErrorPrefix","Cell Editor Validation"),S=new Set;for(const R of e.rowRenderer.getCellCtrls()){const _=R.comp?.getCellEditor();if(!_)continue;const F=_unwrapUserComp(_),{rowNode:M,column:I}=R,N=F.getValidationErrors?.()??[],B=F.getValidationElement?.(!1)||!F.isPopup?.()&&R.eGui;if(B){const H=N!=null&&N.length>0,U=H?N.join(". "):"";_setAriaInvalid(B,H),H&&o.announceValue(`${w} ${N}`,"editorValidation"),B instanceof HTMLInputElement?B.setCustomValidity(U):B.classList.toggle("invalid",H)}N?.length>0&&n.setCellValidation({rowNode:M,column:I},{errorMessages:N}),S.add(R.rowCtrl)}if(_syncFromEditors(e,{persist:!1}),d?.setCellValidationModel(n),g){const R=_generateRowValidationErrors(e);d?.setRowValidationModel(R)}for(const R of S.values()){R.rowEditStyleFeature?.applyRowStyles();for(const _ of R.getAllCellCtrls())_.tooltipFeature?.refreshTooltip(!0),_.editorTooltipFeature?.refreshTooltip(!0),_.editStyleFeature?.applyCellStyles?.()}}var _generateRowValidationErrors=e=>{const t=new EditRowValidationModel,n=e.gos.get("getFullRowEditValidationErrors"),o=e.editModelSvc?.getEditMap();if(!o)return t;for(const u of o.keys()){const d=o.get(u);if(!d)continue;const f=[],{rowIndex:g,rowPinned:v}=u;for(const S of d.keys()){const R=d.get(S);if(!R)continue;const{editorValue:_,pendingValue:F,sourceValue:M}=R,I=_??(F===UNEDITED?void 0:F)??M;f.push({column:S,colId:S.getColId(),rowIndex:g,rowPinned:v,oldValue:M,newValue:I})}const w=n?.({editorsState:f})??[];w.length>0&&t.setRowValidation({rowNode:u},{errorMessages:w})}return t};function _validateEdit(e){_populateModelValidationErrors(e,!0);const t=e.editModelSvc?.getCellValidationModel().getCellValidationMap();if(!t)return null;const n=[];return t.forEach((o,u)=>{o.forEach(({errorMessages:d},f)=>{n.push({column:f,rowIndex:u.rowIndex,rowPinned:u.rowPinned,messages:d??null})})}),n}function _isManualPinnedRow(e){return!!(e.rowPinned&&e.pinnedSibling)}function _getNodesInRangeForSelection(e,t,n,o){const u=t==="top";if(!n)return _getNodesInRangeForSelection(e,t,u?e.getPinnedTopRow(0):e.getPinnedBottomRow(0),o);if(!o){const v=u?e.getPinnedTopRowCount():e.getPinnedBottomRowCount();return _getNodesInRangeForSelection(e,t,n,u?e.getPinnedTopRow(v-1):e.getPinnedBottomRow(v-1))}let d=!1,f=!1;const g=[];return e.forEachPinnedRow(t,v=>{if(v===n&&!d){d=!0,g.push(v);return}if(d&&v===o){f=!0,g.push(v);return}d&&!f&&g.push(v)}),g}function _createCellEvent(e,t,n,{rowNode:o,column:u},d){return _addGridCommonParams(e.gos,{type:n,node:o,data:o.data,value:d,column:u,colDef:u.getColDef(),rowPinned:o.rowPinned,event:t,rowIndex:o.rowIndex})}function _isDeleteKey(e,t=!1){return e===KeyCode.DELETE?!0:!t&&e===KeyCode.BACKSPACE?_isMacOsUserAgent():!1}var CellKeyboardListenerFeature=class extends BeanStub{constructor(e,t,n,o){super(),this.cellCtrl=e,this.rowNode=n,this.rowCtrl=o,this.beans=t}init(){this.eGui=this.cellCtrl.eGui}onKeyDown(e){const t=e.key;switch(t){case KeyCode.ENTER:this.onEnterKeyDown(e);break;case KeyCode.F2:this.onF2KeyDown(e);break;case KeyCode.ESCAPE:this.onEscapeKeyDown(e);break;case KeyCode.TAB:this.onTabKeyDown(e);break;case KeyCode.BACKSPACE:case KeyCode.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case KeyCode.DOWN:case KeyCode.UP:case KeyCode.RIGHT:case KeyCode.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){const{cellCtrl:n,beans:o}=this;if(!o.editSvc?.isEditing(n,{withOpenEditor:!0})){if(e.shiftKey&&n.isRangeSelectionEnabled())this.onShiftRangeSelect(e);else{const u=n.getFocusedCellPosition();o.navigation?.navigateToNextCell(e,t,u,!0)}e.preventDefault()}}onShiftRangeSelect(e){const{rangeSvc:t,navigation:n}=this.beans;if(!t)return;const o=t.extendLatestRangeInDirection(e);o&&(e.key===KeyCode.LEFT||e.key===KeyCode.RIGHT?n?.ensureColumnVisible(o.column):n?.ensureRowVisible(o.rowIndex))}onTabKeyDown(e){this.beans.navigation?.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){const{cellCtrl:n,beans:o,rowNode:u}=this,{gos:d,rangeSvc:f,eventSvc:g,editSvc:v}=o;if(g.dispatchEvent({type:"keyShortcutChangedCellStart"}),_isDeleteKey(e,d.get("enableCellEditingOnBackspace"))&&!v?.isEditing(n,{withOpenEditor:!0})){if(f&&_isCellSelectionEnabled(d))f.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(n.isCellEditable()){const w=o.valueSvc.getDeleteValue(n.column,u);u.setDataValue(n.column,w,"cellClear")}}else v?.isEditing(n,{withOpenEditor:!0})||o.editSvc?.startEditing(n,{startedEdit:!0,event:t});g.dispatchEvent({type:"keyShortcutChangedCellEnd"})}onEnterKeyDown(e){const{cellCtrl:t,beans:n}=this,{editSvc:o,navigation:u}=n,d=o?.isEditing(t,{withOpenEditor:!0}),f=t.rowNode,g=o?.isRowEditing(f,{withOpenEditor:!0}),v=w=>{o?.startEditing(w,{startedEdit:!0,event:e,source:"edit"})&&e.preventDefault()};if(d||g){if(this.isCtrlEnter(e)){o?.applyBulkEdit(t,n?.rangeSvc?.getCellRanges()||[]);return}if(_populateModelValidationErrors(n),o?.checkNavWithValidation(void 0,e)==="block-stop")return;o?.isEditing(t,{withOpenEditor:!0})?o?.stopEditing(t,{event:e,source:"edit"}):g&&!t.isCellEditable()?o?.stopEditing({rowNode:f},{event:e,source:"edit"}):v(t)}else if(n.gos.get("enterNavigatesVertically")){const w=e.shiftKey?KeyCode.UP:KeyCode.DOWN;u?.navigateToNextCell(null,w,t.cellPosition,!1)}else{if(o?.hasValidationErrors())return;o?.hasValidationErrors(t)&&o.revertSingleCellEdit(t,!0),v(t)}}isCtrlEnter(e){return(e.ctrlKey||e.metaKey)&&e.key===KeyCode.ENTER}onF2KeyDown(e){const{cellCtrl:t,beans:{editSvc:n}}=this;n?.isEditing()&&(_populateModelValidationErrors(this.beans),n?.checkNavWithValidation(void 0,e)==="block-stop")||n?.startEditing(t,{startedEdit:!0,event:e})}onEscapeKeyDown(e){const{cellCtrl:t,beans:{editSvc:n}}=this;n?.checkNavWithValidation(t,e)==="block-stop"&&n.revertSingleCellEdit(t),setTimeout(()=>{n?.stopEditing(t,{event:e,cancel:!0})})}processCharacter(e){const n=e.target!==this.eGui,{beans:{editSvc:o},cellCtrl:u}=this;if(n||o?.isEditing(u,{withOpenEditor:!0}))return;if(e.key===KeyCode.SPACE)this.onSpaceKeyDown(e);else if(o?.isCellEditable(u,"ui")){if(o?.hasValidationErrors()&&!o?.hasValidationErrors(u))return;o?.startEditing(u,{startedEdit:!0,event:e,source:"api",editable:!0}),!u.editCompDetails?.params?.suppressPreventDefault&&e.preventDefault()}}onSpaceKeyDown(e){const{gos:t,editSvc:n}=this.beans,{rowNode:o}=this.cellCtrl;!n?.isEditing(this.cellCtrl,{withOpenEditor:!0})&&_isRowSelection(t)&&this.beans.selectionSvc?.handleSelectionEvent(e,o,"spaceKey"),e.preventDefault()}},CellMouseListenerFeature=class extends BeanStub{constructor(e,t,n){super(),this.cellCtrl=e,this.column=n,this.beans=t}onMouseEvent(e,t){if(!_isStopPropagationForAgGrid(t))switch(e){case"click":this.onCellClicked(t);break;case"pointerdown":case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){if(this.beans.touchSvc?.handleCellDoubleClick(this,e))return;const{eventSvc:t,rangeSvc:n,editSvc:o,editModelSvc:u,frameworkOverrides:d,gos:f}=this.beans,g=e.ctrlKey||e.metaKey,{cellCtrl:v}=this,{column:w,cellPosition:S,rowNode:R}=v,_=_suppressCellMouseEvent(f,w,R,e);n&&g&&!_&&n.getCellRangeCount(S)>1&&n.intersectLastRange(!0);const F=v.createEvent(e,"cellClicked");F.isEventHandlingSuppressed=_,t.dispatchEvent(F);const M=w.getColDef();if(M.onCellClicked&&window.setTimeout(()=>{d.wrapOutgoing(()=>{M.onCellClicked(F)})},0),!_&&u?.getState(v)!=="editing"){const I=o?.isEditing(),N=o?.isRangeSelectionEnabledWhileEditing(),B=u?.getCellValidationModel().getCellValidationMap().size??0,H=u?.getRowValidationModel().getRowValidationMap().size??0;if(I&&(N||B>0||H>0))return;o?.shouldStartEditing(v,e)?o?.startEditing(v,{event:e}):o?.shouldStopEditing(v,e)&&(this.beans.gos.get("editType")==="fullRow"?o?.stopEditing(v,{event:e,source:"edit"}):o?.stopEditing(void 0,{event:e,source:"edit"}))}}onCellDoubleClicked(e){const{column:t,beans:n,cellCtrl:o}=this,{eventSvc:u,frameworkOverrides:d,editSvc:f,editModelSvc:g,gos:v}=n,w=_suppressCellMouseEvent(v,o.column,o.rowNode,e),S=t.getColDef(),R=o.createEvent(e,"cellDoubleClicked");if(R.isEventHandlingSuppressed=w,u.dispatchEvent(R),typeof S.onCellDoubleClicked=="function"&&window.setTimeout(()=>{d.wrapOutgoing(()=>{S.onCellDoubleClicked(R)})},0),!w&&f?.shouldStartEditing(o,e)&&g?.getState(o)!=="editing"){const _=f?.isEditing(),F=f?.isRangeSelectionEnabledWhileEditing(),M=g?.getCellValidationModel().getCellValidationMap().size??0,I=g?.getRowValidationModel().getRowValidationMap().size??0;if(_&&(F||M>0||I>0))return;f?.startEditing(o,{event:e})}}onMouseDown(e){const{shiftKey:t}=e,n=e.target,{cellCtrl:o,beans:u}=this,{eventSvc:d,rangeSvc:f,rowNumbersSvc:g,focusSvc:v,gos:w,editSvc:S}=u,{column:R,rowNode:_,cellPosition:F}=o,M=_suppressCellMouseEvent(w,R,_,e),I=()=>{const U=o.createEvent(e,"cellMouseDown");U.isEventHandlingSuppressed=M,d.dispatchEvent(U)};if(M){I();return}if(this.isRightClickInExistingRange(e))return;const N=f&&!f.isEmpty(),B=this.containsWidget(n),H=isRowNumberCol(R);if(!(g&&H&&!g.handleMouseDownOnCell(F,e))){if(!t||!N){const U=S?.isEditing(o),z=w.get("enableCellTextSelection")&&e.defaultPrevented,j=(_isBrowserSafari()||z)&&!U&&!_isFocusableFormField(n)&&!B;o.focusCell(j,e)}if(t&&N&&!v.isCellFocused(F)){e.preventDefault();const U=v.getFocusedCell();if(U){const{column:$,rowIndex:z,rowPinned:j}=U,J=!!S?.isRangeSelectionEnabledWhileEditing?.();S?.isEditing(U)&&!J&&S?.stopEditing(U),J||v.setFocusedCell({column:$,rowIndex:z,rowPinned:j,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,sourceEvent:e})}}B||(f?.handleCellMouseDown(e,F),I())}}isRightClickInExistingRange(e){const{rangeSvc:t}=this.beans;if(t){const n=t.isCellInAnyRange(this.cellCtrl.cellPosition),o=_interpretAsRightClick(this.beans,e);if(n&&o)return!0}return!1}containsWidget(e){return _isElementChildOfClass(e,"ag-selection-checkbox",3)||_isElementChildOfClass(e,"ag-drag-handle",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:n}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),n?.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;const{eventSvc:t,colHover:n}=this.beans;t.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),n?.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.eGui,n=t.contains(e.target),o=t.contains(e.relatedTarget);return n&&o}},CellPositionFeature=class extends BeanStub{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.column,this.rowNode=e.rowNode}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventSvc,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}init(){this.eSetLeft=this.cellCtrl.getRootElement(),this.eContent=this.cellCtrl.eGui;const e=this.cellCtrl.getCellSpan();if(e||(this.setupColSpan(),this.setupRowSpan()),this.onLeftChanged(),this.onWidthChanged(),e||this._legacyApplyRowSpan(),e){const t=this.refreshSpanHeight.bind(this,e);t(),this.addManagedListeners(this.beans.eventSvc,{paginationChanged:t,recalculateRowBounds:t,pinnedHeightChanged:t})}}refreshSpanHeight(e){const t=e.getCellHeight();t!=null&&(this.eContent.style.height=`${t}px`)}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this._legacyApplyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();_areEqual(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventSvc,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eContent)return;const e=this.getCellWidth();this.eContent.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const{column:e,rowNode:t}=this,n=e.getColSpan(t),o=[];if(n===1)o.push(e);else{let u=e;const d=e.getPinned();for(let f=0;u&&f<n&&(o.push(u),u=this.beans.visibleCols.getColAfter(u),!(!u||_missing(u)||d!==u.getPinned()));f++);}return o}onLeftChanged(){if(!this.eSetLeft)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eSetLeft.style.left=e+"px"}getCellLeft(){let e;return this.beans.gos.get("enableRtl")&&this.colsSpanning?e=_last(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.printLayout||this.column.getPinned()==="left")return e;const{visibleCols:t}=this.beans,n=t.getColsLeftWidth();if(this.column.getPinned()==="right"){const o=t.bodyWidth;return n+o+(e||0)}return n+(e||0)}_legacyApplyRowSpan(e){if(this.rowSpan===1&&!e)return;const n=_getRowHeightAsNumber(this.beans)*this.rowSpan;this.eContent.style.height=`${n}px`,this.eContent.style.zIndex="1"}destroy(){super.destroy()}},CSS_CELL="ag-cell",CSS_AUTO_HEIGHT="ag-cell-auto-height",CSS_NORMAL_HEIGHT="ag-cell-normal-height",CSS_CELL_FOCUS="ag-cell-focus",CSS_CELL_FIRST_RIGHT_PINNED="ag-cell-first-right-pinned",CSS_CELL_LAST_LEFT_PINNED="ag-cell-last-left-pinned",CSS_CELL_NOT_INLINE_EDITING="ag-cell-not-inline-editing",CSS_CELL_WRAP_TEXT="ag-cell-wrap-text",instanceIdSequence4=0,CellCtrl=class extends BeanStub{constructor(e,t,n,o){super(),this.column=e,this.rowNode=t,this.rowCtrl=o,this.rangeFeature=void 0,this.rowResizeFeature=void 0,this.positionFeature=void 0,this.customStyleFeature=void 0,this.editStyleFeature=void 0,this.mouseListener=void 0,this.keyboardListener=void 0,this.suppressRefreshCell=!1,this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.focusEventWhileNotReady=null,this.hasBeenFocused=!1,this.hasEdit=!1,this.tooltipFeature=void 0,this.editorTooltipFeature=void 0,this.beans=n,this.gos=n.gos,this.editSvc=n.editSvc,this.hasEdit=!!n.editSvc;const{colId:u}=e;this.instanceId=u+"-"+instanceIdSequence4++,this.createCellPosition(),this.updateAndFormatValue(!1)}addFeatures(){const{beans:e}=this;this.positionFeature=new CellPositionFeature(this,e),this.customStyleFeature=e.cellStyles?.createCellCustomStyleFeature(this),this.editStyleFeature=e.editSvc?.createCellStyleFeature(this),this.mouseListener=new CellMouseListenerFeature(this,e,this.column),this.keyboardListener=new CellKeyboardListenerFeature(this,e,this.rowNode,this.rowCtrl),this.enableTooltipFeature();const{rangeSvc:t}=e;t&&_isCellSelectionEnabled(e.gos)&&(this.rangeFeature=t.createCellRangeFeature(this)),isRowNumberCol(this.column)&&(this.rowResizeFeature=this.beans.rowNumbersSvc.createRowNumbersRowResizerFeature(this))}isCellSpanning(){return!1}getCellSpan(){}removeFeatures(){const e=this.beans.context;this.positionFeature=e.destroyBean(this.positionFeature),this.editorTooltipFeature=e.destroyBean(this.editorTooltipFeature),this.customStyleFeature=e.destroyBean(this.customStyleFeature),this.editStyleFeature=e.destroyBean(this.editStyleFeature),this.mouseListener=e.destroyBean(this.mouseListener),this.keyboardListener=e.destroyBean(this.keyboardListener),this.rangeFeature=e.destroyBean(this.rangeFeature),this.rowResizeFeature=e.destroyBean(this.rowResizeFeature),this.disableTooltipFeature()}enableTooltipFeature(e,t){this.tooltipFeature=this.beans.tooltipSvc?.enableCellTooltipFeature(this,e,t)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}enableEditorTooltipFeature(e){this.editorTooltipFeature&&this.disableEditorTooltipFeature(),this.editorTooltipFeature=this.beans.tooltipSvc?.setupCellEditorTooltip(this,e),_populateModelValidationErrors(this.beans)}disableEditorTooltipFeature(){this.editorTooltipFeature=this.beans.context.destroyBean(this.editorTooltipFeature)}setComp(e,t,n,o,u,d,f){this.comp=e,this.eGui=t,this.printLayout=u,f??(f=this),this.addDomData(f),this.addFeatures(),f.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.setupFocus(),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(o,f),this.refreshFirstAndLastStyles(),this.checkFormulaError(),this.refreshAriaColIndex(),this.positionFeature?.init(),this.customStyleFeature?.setComp(e),this.editStyleFeature?.setComp(e),this.tooltipFeature?.refreshTooltip(),this.keyboardListener?.init(),this.rangeFeature?.setComp(e),this.rowResizeFeature?.refreshRowResizer();const g=d?this.isCellEditable():void 0,v=!g&&this.hasEdit&&this.editSvc?.isEditing(this,{withOpenEditor:!0});if(g||v?this.editSvc?.startEditing(this,{startedEdit:!1,source:"api",silent:!0,continueEditing:!0,editable:g}):this.showValue(!1,!0),this.onCompAttachedFuncs.length){for(const w of this.onCompAttachedFuncs)w();this.onCompAttachedFuncs=[]}}checkFormulaError(){const e=!!this.beans.formula?.getFormulaError(this.column,this.rowNode);this.eGui.classList.toggle("formula-error",e)}setupAutoHeight(e,t){this.isAutoHeight=this.beans.rowAutoHeight?.setupCellAutoHeight(this,e,t)??!1}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){const e=this.column.getColDef();return e.cellRenderer!=null||e.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}getDeferLoadingCellRenderer(){const{beans:e,column:t}=this,{userCompFactory:n,ctrlsSvc:o,eventSvc:u}=e,d=t.getColDef(),f=this.createCellRendererParams();f.deferRender=!0;const g=_getLoadingCellRendererDetails(n,d,f);if(o.getGridBodyCtrl()?.scrollFeature?.isScrolling()){let v;const w=new AgPromise(R=>{v=R}),[S]=this.addManagedListeners(u,{bodyScrollEnd:()=>{v(),S()}});return{loadingComp:g,onReady:w}}return{loadingComp:g,onReady:AgPromise.resolve()}}showValue(e,t){const{beans:n,column:o,rowNode:u,rangeFeature:d}=this,{userCompFactory:f}=n;let g=this.getValueToDisplay(),v;const w=u.stub&&u.groupData?.[o.getId()]==null,S=o.getColDef();if(w||this.isCellRenderer()){const R=this.createCellRendererParams();!w||isRowNumberCol(o)?v=_getCellRendererDetails(f,S,R):v=_getLoadingCellRendererDetails(f,S,R)}if(!v&&!w&&n.findSvc?.isMatch(u,o)){const R=this.createCellRendererParams();v=_getCellRendererDetails(f,{...o.getColDef(),cellRenderer:"agFindCellRenderer"},R)}if(this.hasEdit&&this.editSvc.isBatchEditing()&&this.editSvc.isRowEditing(u,{checkSiblings:!0})){const R=this.editSvc.prepDetailsDuringBatch(this,{compDetails:v,valueToDisplay:g});R&&(R.compDetails?v=R.compDetails:R.valueToDisplay&&(g=R.valueToDisplay))}this.comp.setRenderDetails(v,g,e),this.customRowDragComp?.refreshVisibility(),!t&&d&&_requestAnimationFrame(n,()=>d?.refreshRangeStyleAndHandle()),this.rowResizeFeature?.refreshRowResizer()}setupControlComps(){const e=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(e),!0),this.includeRowDrag=this.isIncludeControl(e.rowDrag),this.includeDndSource=this.isIncludeControl(e.dndSource),this.comp.setIncludeSelection(this.includeSelection),this.comp.setIncludeDndSource(this.includeDndSource),this.comp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}getCellValueClass(){const e="ag-cell-value",t=this.column.getColDef().cellRenderer==="agCheckboxCellRenderer";let n="";return t&&(n=" ag-allow-overflow"),`${e}${n}`}isIncludeControl(e,t=!1){return(this.rowNode.rowPinned==null||t&&_isManualPinnedRow(this.rowNode))&&!!e}isCheckboxSelection(e){const{rowSelection:t,groupDisplayType:n}=this.beans.gridOptions,o=_getCheckboxLocation(t),u=isColumnSelectionCol(this.column);return n==="custom"&&o!=="selectionColumn"&&u?!1:e.checkboxSelection||u&&typeof t=="object"&&_getCheckboxes(t)}refreshShouldDestroy(){const e=this.column.getColDef(),t=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(e),!0),n=this.includeRowDrag!=this.isIncludeControl(e.rowDrag),o=this.includeDndSource!=this.isIncludeControl(e.dndSource),u=this.isAutoHeight!=this.column.isAutoHeight();return t||n||o||u}onPopupEditorClosed(){const{editSvc:e}=this.beans;e?.isEditing(this,{withOpenEditor:!0})&&e?.stopEditing(this,{source:e?.isBatchEditing()?"ui":"api"})}stopEditing(e=!1){const{editSvc:t}=this.beans;return t?.stopEditing(this,{cancel:e,source:t?.isBatchEditing()?"ui":"api"})??!1}createCellRendererParams(){const{value:e,valueFormatted:t,column:n,rowNode:o,comp:u,eGui:d,beans:{valueSvc:f,gos:g,editSvc:v}}=this;return _addGridCommonParams(g,{value:e,valueFormatted:t,getValue:()=>f.getValueForDisplay({column:n,node:o,from:"edit"}).value,setValue:S=>v?.setDataValue({rowNode:o,column:n},S)||o.setDataValue(n,S),formatValue:this.formatValue.bind(this),data:o.data,node:o,pinned:n.getPinned(),colDef:n.getColDef(),column:n,refreshCell:this.refreshCell.bind(this),eGridCell:d,eParentOfValue:u.getParentOfValue(),registerRowDragger:(S,R,_,F)=>this.registerRowDragger(S,R,F),setTooltip:(S,R)=>{g.assertModuleRegistered("Tooltip",3),this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(S,R),this.tooltipFeature?.refreshTooltip()}})}onCellChanged(e){e.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(e){if(this.refreshShouldDestroy()?this.rowCtrl?.recreateCell(this):this.refreshCell(e),this.hasEdit&&this.editCompDetails){const{editSvc:t,comp:n}=this;!n?.getCellEditor()&&t.isEditing(this,{withOpenEditor:!0})&&t.startEditing(this,{startedEdit:!1,source:"api",silent:!0})}}refreshCell({force:e,suppressFlash:t,newData:n}={}){const{editStyleFeature:o,customStyleFeature:u,rowCtrl:{rowEditStyleFeature:d},beans:{cellFlashSvc:f,filterManager:g},column:v,comp:w,suppressRefreshCell:S,tooltipFeature:R}=this;if(S)return;const{field:_,valueGetter:F,showRowGroup:M,enableCellChangeFlash:I}=v.getColDef(),N=_==null&&F==null&&M==null,B=e||N||n,H=!!w,U=this.updateAndFormatValue(H),$=B||U;if(H){if($){this.showValue(!!n,!1);const z=g?.isSuppressFlashingCellsBecauseFiltering();!t&&!z&&I&&f?.flashCell(this),o?.applyCellStyles?.(),u?.applyUserStyles(),u?.applyClassesFromColDef(),d?.applyRowStyles(),this.checkFormulaError()}R?.refreshTooltip(),u?.applyCellClassRules()}}isCellEditable(){return this.column.isCellEditable(this.rowNode)}formatValue(e){return this.callValueFormatter(e)??e}callValueFormatter(e){return this.beans.valueSvc.formatValue(this.column,this.rowNode,e)}updateAndFormatValue(e){const t=this.value,n=this.valueFormatted,{value:o,valueFormatted:u}=this.beans.valueSvc.getValueForDisplay({column:this.column,node:this.rowNode,includeValueFormatted:!0,from:"edit"});return this.value=o,this.valueFormatted=u,e?!this.valuesAreEqual(t,this.value)||this.valueFormatted!=n:!0}valuesAreEqual(e,t){const n=this.column.getColDef();return n.equals?n.equals(e,t):e===t}addDomData(e){const t=this.eGui;_setDomData(this.beans.gos,t,DOM_DATA_KEY_CELL_CTRL,this),e.addDestroyFunc(()=>_setDomData(this.beans.gos,t,DOM_DATA_KEY_CELL_CTRL,null))}createEvent(e,t){const{rowNode:n,column:o,value:u,beans:d}=this;return _createCellEvent(d,e,t,{rowNode:n,column:o},u)}processCharacter(e){this.keyboardListener?.processCharacter(e)}onKeyDown(e){this.keyboardListener?.onKeyDown(e)}onMouseEvent(e,t){this.mouseListener?.onMouseEvent(e,t)}getColSpanningList(){return this.positionFeature?.getColSpanningList()??[]}onLeftChanged(){this.comp&&this.positionFeature?.onLeftChanged()}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{comp:e,column:t,beans:n}=this;refreshFirstAndLastStyles(e,t,n.visibleCols)}refreshAriaColIndex(){const e=this.beans.visibleCols.getAriaColIndex(this.column);_setAriaColIndex(this.eGui,e)}onWidthChanged(){return this.positionFeature?.onWidthChanged()}getRowPosition(){const{rowIndex:e,rowPinned:t}=this.cellPosition;return{rowIndex:e,rowPinned:t}}updateRangeBordersIfRangeCount(){this.comp&&this.rangeFeature?.updateRangeBordersIfRangeCount()}onCellSelectionChanged(){this.comp&&this.rangeFeature?.onCellSelectionChanged()}isRangeSelectionEnabled(){return this.rangeFeature!=null}focusCell(e=!1,t){const n=this.editSvc?.allowedFocusTargetOnValidation(this);n&&n!==this||this.beans.focusSvc.setFocusedCell({...this.getFocusedCellPosition(),forceBrowserFocus:e,sourceEvent:t})}restoreFocus(e=!1){const{beans:{editSvc:t,focusSvc:n},comp:o}=this;if(!o||t?.isEditing(this)||!this.isCellFocused()||!n.shouldTakeFocus())return;const u=()=>{if(!this.isAlive())return;const d=o.getFocusableElement();this.isCellFocused()&&d.focus({preventScroll:!0})};if(e){setTimeout(u,0);return}u()}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.restoreFocus(),this.rangeFeature?.onCellSelectionChanged(),this.rowResizeFeature?.refreshRowResizer()}onSuppressCellFocusChanged(e){const t=this.eGui;t&&(isRowNumberCol(this.column)&&(e=!0),_addOrRemoveAttribute(t,"tabindex",e?void 0:-1))}onFirstRightPinnedChanged(){if(!this.comp)return;const e=this.column.isFirstRightPinned();this.comp.toggleCss(CSS_CELL_FIRST_RIGHT_PINNED,e)}onLastLeftPinnedChanged(){if(!this.comp)return;const e=this.column.isLastLeftPinned();this.comp.toggleCss(CSS_CELL_LAST_LEFT_PINNED,e)}checkCellFocused(){return this.beans.focusSvc.isCellFocused(this.cellPosition)}isCellFocused(){const e=this.checkCellFocused();return this.hasBeenFocused||(this.hasBeenFocused=e),e}setupFocus(){this.restoreFocus(!0),this.onCellFocused(this.focusEventWhileNotReady??void 0)}onCellFocused(e){const{beans:t}=this;if(_isCellFocusSuppressed(t))return;if(!this.comp){e&&(this.focusEventWhileNotReady=e);return}const n=this.isCellFocused(),o=t.editSvc?.isEditing(this)??!1;if(this.comp.toggleCss(CSS_CELL_FOCUS,n),n&&(e?.forceBrowserFocus||!this.hasBrowserFocus()&&this.beans.focusSvc.shouldTakeFocus())){let u=this.comp.getFocusableElement();if(o){const f=_findFocusableElements(u,null,!0);f.length&&(u=f[0])}const d=e?e.preventScrollOnBrowserFocus:!0;u.focus({preventScroll:d}),_placeCaretAtEnd(t,u)}n&&this.focusEventWhileNotReady&&(this.focusEventWhileNotReady=null),n&&e&&this.rowCtrl.announceDescription()}createCellPosition(){const{rowIndex:e,rowPinned:t}=this.rowNode;this.cellPosition={rowIndex:e,rowPinned:_makeNull(t),column:this.column}}applyStaticCssClasses(){const{comp:e}=this;e.toggleCss(CSS_CELL,!0),e.toggleCss(CSS_CELL_NOT_INLINE_EDITING,!0);const t=this.column.isAutoHeight()==!0;e.toggleCss(CSS_AUTO_HEIGHT,t),e.toggleCss(CSS_NORMAL_HEIGHT,!t)}onColumnHover(){this.beans.colHover?.onCellColumnHover(this.column,this.comp)}onColDefChanged(){this.comp&&(this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editSvc?.isEditing(this)?this.editSvc?.handleColDefChanged(this):this.refreshOrDestroyCell({force:!0,suppressFlash:!0}))}setWrapText(){const e=this.column.getColDef().wrapText==!0;this.comp.toggleCss(CSS_CELL_WRAP_TEXT,e)}dispatchCellContextMenuEvent(e){const t=this.column.getColDef(),n=this.createEvent(e,"cellContextMenu"),{beans:o}=this;o.eventSvc.dispatchEvent(n),t.onCellContextMenu&&window.setTimeout(()=>{o.frameworkOverrides.wrapOutgoing(()=>{t.onCellContextMenu(n)})},0)}getCellRenderer(){return this.comp?.getCellRenderer()??null}destroy(){this.onCompAttachedFuncs=[],this.onEditorAttachedFuncs=[],this.isCellFocused()&&this.hasBrowserFocus()&&this.beans.focusSvc.attemptToRecoverFocus(),super.destroy()}hasBrowserFocus(){return this.eGui?.contains(_getActiveDomElement(this.beans))??!1}createSelectionCheckbox(){const e=this.beans.selectionSvc?.createCheckboxSelectionComponent();if(e)return this.beans.context.createBean(e),e.init({rowNode:this.rowNode,column:this.column}),e}createDndSource(){const e=this.beans.registry.createDynamicBean("dndSourceComp",!1,this.rowNode,this.column,this.eGui);return e&&this.beans.context.createBean(e),e}registerRowDragger(e,t,n){if(this.customRowDragComp){this.customRowDragComp.setDragElement(e,t);return}const o=this.createRowDragComp(e,t,n);o&&(this.customRowDragComp=o,this.addDestroyFunc(()=>{this.beans.context.destroyBean(o),this.customRowDragComp=null}),o.refreshVisibility())}createRowDragComp(e,t,n){const o=this.beans.rowDragSvc?.createRowDragCompForCell(this.rowNode,this.column,()=>this.value,e,t,n);if(o)return this.beans.context.createBean(o),o}cellEditorAttached(){for(const e of this.onEditorAttachedFuncs)e();this.onEditorAttachedFuncs=[]}setFocusedCellPosition(e){}getFocusedCellPosition(){return this.cellPosition}refreshAriaRowIndex(){}getRootElement(){return this.eGui}};function processClassRules(e,t,n,o,u,d){if(n==null&&t==null)return;const f={},g={},v=(w,S)=>{for(const R of w.split(" "))R.trim()!=""&&S(R)};if(n){const w=Object.keys(n);for(let S=0;S<w.length;S++){const R=w[S],_=n[R];let F;typeof _=="string"?F=e?e.evaluate(_,o):!0:typeof _=="function"&&(F=_(o)),v(R,M=>{F?f[M]=!0:g[M]=!0})}}if(t&&d)for(const w of Object.keys(t))v(w,S=>{f[S]||(g[S]=!0)});d&&Object.keys(g).forEach(d),Object.keys(f).forEach(u)}function calculateRowLevel(e){if(e.group)return e.level;const t=e.parent;return t?t.level+1:0}var RowStyleService=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowStyleSvc"}processClassesFromGridOptions(e,t){const n=this.gos,o=f=>{if(typeof f=="string")e.push(f);else if(Array.isArray(f))for(const g of f)e.push(g)},u=n.get("rowClass");u&&o(u);const d=n.getCallback("getRowClass");if(d){const f={data:t.data,node:t,rowIndex:t.rowIndex},g=d(f);o(g)}}preProcessRowClassRules(e,t){this.processRowClassRules(t,n=>{e.push(n)},()=>{})}processRowClassRules(e,t,n){const{gos:o,expressionSvc:u}=this.beans,d=_addGridCommonParams(o,{data:e.data,node:e,rowIndex:e.rowIndex});processClassRules(u,void 0,o.get("rowClassRules"),d,t,n)}processStylesFromGridOptions(e){const t=this.gos,n=t.get("rowStyle"),o=t.getCallback("getRowStyle");let u;if(o){const d={data:e.data,node:e,rowIndex:e.rowIndex};u=o(d)}if(u||n)return Object.assign({},n,u)}},instanceIdSequence5=0,RowCtrl=class extends BeanStub{constructor(e,t,n,o,u){super(),this.rowNode=e,this.useAnimationFrameForCreate=o,this.printLayout=u,this.focusEventWhileNotReady=null,this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKey=null,this.beans=t,this.gos=t.gos,this.paginationPage=t.pagination?.getCurrentPage()??0,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=e.id+"-"+instanceIdSequence5++,this.rowId=_escapeString(e.id),this.initRowBusinessKey(),this.rowFocused=t.focusSvc.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(n),this.rowStyles=this.processStylesFromGridOptions(),this.rowEditStyleFeature=t.editSvc?.createRowStyleFeature(this),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;const e=this.businessKeyForNodeFunc(this.rowNode);this.businessKey=_escapeString(e)}updateGui(e,t){e==="left"?this.leftGui=t:e==="right"?this.rightGui=t:e==="fullWidth"?this.fullWidthGui=t:this.centerGui=t}setComp(e,t,n,o){const{context:u,rowRenderer:d}=this.beans;o=setupCompBean(this,u,o);const f={rowComp:e,element:t,containerType:n,compBean:o};this.allRowGuis.push(f),this.updateGui(n,f),this.initialiseRowComp(f);const g=this.rowNode,v=this.rowType==="FullWidthLoading"||g.stub,w=!g.data&&this.beans.rowModel.getType()==="infinite";!v&&!w&&!g.rowPinned&&d.dispatchFirstDataRenderedEvent(),this.setupFocus()}unsetComp(e){this.allRowGuis=this.allRowGuis.filter(t=>t.containerType!==e),this.updateGui(e,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(e){const t=e?"none":"";for(const n of this.allRowGuis)n.element.style.display=t}initialiseRowComp(e){const t=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(e),this.onRowHeightChanged(e),this.updateRowIndexes(e),this.setFocusedClasses(e),this.setStylesFromGridOptions(!1,e),_isRowSelection(t)&&this.rowNode.selectable&&this.onRowSelected(e),this.updateColumnLists(!this.useAnimationFrameForCreate);const n=e.rowComp,o=this.getInitialRowClasses(e.containerType);for(const u of o)n.toggleCss(u,!0);this.executeSlideAndFadeAnimations(e),this.rowNode.group&&_setAriaExpanded(e.element,this.rowNode.expanded==!0),this.setRowCompRowId(n),this.setRowCompRowBusinessKey(n),_setDomData(t,e.element,DOM_DATA_KEY_ROW_CTRL,this),e.compBean.addDestroyFunc(()=>_setDomData(t,e.element,DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameSvc.createTask(this.addHoverFunctionality.bind(this,e),this.rowNode.rowIndex,"p2",!1):this.addHoverFunctionality(e),this.isFullWidth()&&this.setupFullWidth(e),t.get("rowDragEntireRow")&&this.addRowDraggerToRow(e),this.useAnimationFrameForCreate&&this.beans.animationFrameSvc.addDestroyTask(()=>{this.isAlive()&&e.rowComp.toggleCss("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(e){this.businessKey!=null&&e.setRowBusinessKey(this.businessKey)}setRowCompRowId(e){const t=_escapeString(this.rowNode.id);this.rowId=t,t!=null&&e.setRowId(t)}executeSlideAndFadeAnimations(e){const{containerType:t}=e;this.slideInAnimation[t]&&(_batchCall(()=>{this.onTopChanged()}),this.slideInAnimation[t]=!1),this.fadeInAnimation[t]&&(_batchCall(()=>{e.rowComp.toggleCss("ag-opacity-zero",!1)}),this.fadeInAnimation[t]=!1)}addRowDraggerToRow(e){const t=this.beans.rowDragSvc?.createRowDragCompForRow(this.rowNode,e.element);if(!t)return;const n=this.createBean(t,this.beans.context);this.rowDragComps.push(n),e.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(o=>o!==n),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,this.beans.context),this.destroyBean(n,this.beans.context)})}setupFullWidth(e){const t=this.getPinnedForContainer(e.containerType),n=this.createFullWidthCompDetails(e.element,t);e.rowComp.showFullWidth(n)}getFullWidthCellRenderers(){return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(e=>e?.rowComp?.getFullWidthCellRenderer()):[this.fullWidthGui?.rowComp?.getFullWidthCellRenderer()]}executeProcessRowPostCreateFunc(){const e=this.gos.getCallback("processRowPostCreate");if(!e||!this.areAllContainersReady())return;const t={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};e(t)}areAllContainersReady(){const{leftGui:e,centerGui:t,rightGui:n,beans:{visibleCols:o}}=this,u=!!e||!o.isPinningLeft(),d=!!t,f=!!n||!o.isPinningRight();return u&&d&&f}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;const e=this.beans.gos.getCallback("isFullWidthRow");return e?e({rowNode:this.rowNode}):!1}setRowType(){const{rowNode:e,gos:t,beans:{colModel:n}}=this,o=e.stub&&!t.get("suppressServerSideFullWidthLoadingRow")&&!t.get("groupHideOpenParents"),u=this.isNodeFullWidthCell(),d=t.get("masterDetail")&&e.detail,f=n.isPivotMode(),g=_isFullWidthGroupRow(t,e,f);o?this.rowType="FullWidthLoading":d?this.rowType="FullWidthDetail":u?this.rowType="FullWidth":g?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(e=!1,t=!1){if(this.isFullWidth())return;const{animationFrameSvc:n}=this.beans;if(!n?.active||e||this.printLayout){this.updateColumnListsImpl(t);return}this.updateColumnListsPending||(n.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"p1",!1),this.updateColumnListsPending=!0)}getNewCellCtrl(e){if(!this.beans.rowSpanSvc?.isCellSpanning(e,this.rowNode))return new CellCtrl(e,this.rowNode,this.beans,this)}isCorrectCtrlForSpan(e){return!this.beans.rowSpanSvc?.isCellSpanning(e.column,this.rowNode)}createCellCtrls(e,t,n=null){const o={list:[],map:{}},u=(w,S,R)=>{R!=null?o.list.splice(R,0,S):o.list.push(S),o.map[w]=S},d=[];for(const w of t){const S=w.getInstanceId();let R=e.map[S];R&&!this.isCorrectCtrlForSpan(R)&&(R.destroy(),R=void 0),R||(R=this.getNewCellCtrl(w)),R&&u(S,R)}for(const w of e.list){const S=w.column.getInstanceId();if(o.map[S]!=null)continue;!this.isCellEligibleToBeRemoved(w,n)?d.push([S,w]):w.destroy()}if(d.length)for(const[w,S]of d){const R=o.list.findIndex(F=>F.column.getLeft()>S.column.getLeft()),_=R===-1?void 0:Math.max(R-1,0);u(w,S,_)}const{focusSvc:f,visibleCols:g}=this.beans,v=f.getFocusedCell();if(v&&v.column.getPinned()==n){const w=v.column.getInstanceId();if(!o.map[w]&&g.allCols.includes(v.column)){const R=this.createFocusedCellCtrl();if(R){const _=o.list.findIndex(M=>M.column.getLeft()>R.column.getLeft()),F=_===-1?void 0:Math.max(_-1,0);u(w,R,F)}}}return o}createFocusedCellCtrl(){const{focusSvc:e,rowSpanSvc:t}=this.beans,n=e.getFocusedCell();if(!n)return;const o=t?.getCellSpan(n.column,this.rowNode);if(o){if(o.firstNode!==this.rowNode||!o.doesSpanContain(n))return}else if(!e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned))return;return this.getNewCellCtrl(n.column)}updateColumnListsImpl(e){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(e)}setCellCtrls(e){for(const t of this.allRowGuis){const n=this.getCellCtrlsForContainer(t.containerType);t.rowComp.setCellCtrls(n,e)}}getCellCtrlsForContainer(e){switch(e){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const e=this.beans.colViewport,t=this.beans.visibleCols;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.allCols),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const n=e.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,n);const o=t.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,o,"left");const u=t.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,u,"right")}}isCellEligibleToBeRemoved(e,t){const{column:u}=e;if(u.getPinned()!=t||!this.isCorrectCtrlForSpan(e))return!0;const{visibleCols:d,editSvc:f}=this.beans,g=f?.isEditing(e),v=e.isCellFocused();return g||v?!(d.allCols.indexOf(u)>=0):!0}getDomOrder(){return this.gos.get("ensureDomOrder")||_isDomLayout(this.gos,"print")}listenOnDomOrder(e){const t=()=>{e.rowComp.setDomOrder(this.getDomOrder())};e.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],t)}setAnimateFlags(e){if(this.rowNode.sticky||!e)return;const t=_exists(this.rowNode.oldRowTop),{visibleCols:n}=this.beans,o=n.isPinningLeft(),u=n.isPinningRight();if(t){const{slideInAnimation:d}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){d.fullWidth=!0;return}d.center=!0,d.left=o,d.right=u}else{const{fadeInAnimation:d}=this;if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){d.fullWidth=!0;return}d.center=!0,d.left=o,d.right=u}}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){const e=(f,g)=>f?f.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(f.element,g).params):!0,t=e(this.fullWidthGui,null),n=e(this.centerGui,null),o=e(this.leftGui,"left"),u=e(this.rightGui,"right");return t&&n&&o&&u}addListeners(){const{beans:e,gos:t,rowNode:n}=this,{expansionSvc:o,eventSvc:u,context:d,rowSpanSvc:f}=e;this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),...o?.getRowExpandedListeners(this)??{}}),n.detail&&this.addManagedListeners(n.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(n,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this),rowPinned:this.onRowPinned.bind(this)}),this.addManagedListeners(u,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),f&&this.addManagedListeners(f,{spannedCellsUpdated:({pinned:g})=>{g&&!n.rowPinned||this.updateColumnLists()}}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,d),this.tooltipFeature=this.destroyBean(this.tooltipFeature,d),this.rowEditStyleFeature=this.destroyBean(this.rowEditStyleFeature,d)}),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",()=>{if(t.get("rowDragEntireRow")){for(const v of this.allRowGuis)this.addRowDraggerToRow(v);return}this.rowDragComps=this.destroyBeans(this.rowDragComps,d)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{for(const e of this.getAllCellCtrls())e.onRowIndexChanged()},cellChanged:e=>{for(const t of this.getAllCellCtrls())t.onCellChanged(e)}})}onRowPinned(){for(const e of this.allRowGuis)e.rowComp.toggleCss("ag-row-pinned-source",!!this.rowNode.pinnedSibling)}onRowNodeDataChanged(e){this.refreshRow({suppressFlash:!e.update,newData:!e.update})}refreshRow(e){if(this.isFullWidth()!==!!this.isNodeFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}for(const n of this.getAllCellCtrls())n.refreshCell(e);for(const n of this.allRowGuis)this.setRowCompRowId(n.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(n.rowComp);this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.rowEditStyleFeature?.applyRowStyles(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const e=this.beans.rowDropHighlightSvc,t=e?.row===this.rowNode?e.position:"none",n=t==="above",o=t==="inside",u=t==="below",d=t!=="none",f=n||u,g=this.rowNode.uiLevel,v=f&&g>0,w=v?g.toString():"0";for(const S of this.allRowGuis){const R=S.rowComp;R.toggleCss("ag-row-highlight-above",n),R.toggleCss("ag-row-highlight-inside",o),R.toggleCss("ag-row-highlight-below",u),R.toggleCss("ag-row-highlight-indent",v),d?S.element.style.setProperty("--ag-row-highlight-level",w):S.element.style.removeProperty("--ag-row-highlight-level")}}postProcessRowDragging(){const e=this.rowNode.dragging;for(const t of this.allRowGuis)t.rowComp.toggleCss("ag-row-dragging",e)}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.rowAutoHeight?.requestCheckAutoHeight()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:_makeNull(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(e){const t=this.findFullWidthInfoForEvent(e);if(!t)return;const{rowGui:n,column:o}=t;if(!(n.element===e.target))return;const f=this.rowNode,{focusSvc:g,navigation:v}=this.beans,w=g.getFocusedCell(),S={rowIndex:f.rowIndex,rowPinned:f.rowPinned,column:w?.column??o};v?.navigateToNextCell(e,e.key,S,!0),e.preventDefault()}onTabKeyDown(e){if(e.defaultPrevented||_isStopPropagationForAgGrid(e))return;const t=this.allRowGuis.find(g=>g.element.contains(e.target)),n=t?t.element:null,o=n===e.target,u=_getActiveDomElement(this.beans);let d=!1;n&&u&&(d=n.contains(u)&&u.classList.contains("ag-cell"));let f=null;!o&&!d&&(f=_findNextFocusableElement(this.beans,n,!1,e.shiftKey)),(this.isFullWidth()&&o||!f)&&this.beans.navigation?.onTabKeyDown(this,e)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){const e=this.allRowGuis.find(t=>_isVisible(t.element))?.element;return e?e.getBoundingClientRect().top:0}onSuppressCellFocusChanged(e){const t=this.isFullWidth()&&e?void 0:this.gos.get("tabIndex");for(const n of this.allRowGuis)_addOrRemoveAttribute(n.element,"tabindex",t)}setupFocus(){this.isFullWidth()&&(this.restoreFullWidthFocus(!0),this.onFullWidthRowFocused(this.focusEventWhileNotReady??void 0))}restoreFullWidthFocus(e=!1){const{focusSvc:t,editSvc:n}=this.beans;if(n?.isEditing(this)||!t.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned)||!t.shouldTakeFocus())return;const o=this.getFullWidthRowGuiForFocus();if(!o)return;const u=()=>{this.isAlive()&&t.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned)&&o.element.focus({preventScroll:!0})};if(e){setTimeout(u,0);return}u()}getFullWidthRowGuiForFocus(e){if(this.fullWidthGui)return this.fullWidthGui;const t=this.beans.focusSvc.getFocusedCell(),n=this.beans.colModel.getCol(e?.column??t?.column);if(!n)return;const o=n?.pinned;return o==="right"?this.rightGui:o==="left"?this.leftGui:this.centerGui}setFullWidthRowFocusedClass(e,t){this.forEachGui(void 0,n=>{n.element.classList.toggle("ag-full-width-focus",t&&n===e)})}onFullWidthRowFocused(e){const{focusSvc:t}=this.beans;if(!(this.isFullWidth()&&t.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned))){this.setFullWidthRowFocusedClass(void 0,!1);return}const o=this.getFullWidthRowGuiForFocus(e);if(!o){e&&(this.focusEventWhileNotReady=e),this.setFullWidthRowFocusedClass(void 0,!1);return}this.setFullWidthRowFocusedClass(o,!0),this.focusEventWhileNotReady=null,e?.forceBrowserFocus&&o.element.focus({preventScroll:!0})}recreateCell(e){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,e),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,e),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,e),e.destroy(),this.updateColumnLists()}removeCellCtrl(e,t){const n={list:[],map:{}};for(const o of e.list)o!==t&&(n.list.push(o),n.map[o.column.getInstanceId()]=o);return n}onMouseEvent(e,t){switch(e){case"dblclick":this.onRowDblClick(t);break;case"click":this.onRowClick(t);break;case"pointerdown":case"touchstart":case"mousedown":this.onRowMouseDown(t);break}}createRowEvent(e,t){const{rowNode:n}=this;return _addGridCommonParams(this.gos,{type:e,node:n,data:n.data,rowIndex:n.rowIndex,rowPinned:n.rowPinned,event:t})}createRowEventWithSource(e,t){const n=this.createRowEvent(e,t);return n.source=this,n}onRowDblClick(e){if(_isStopPropagationForAgGrid(e))return;const t=this.createRowEventWithSource("rowDoubleClicked",e);t.isEventHandlingSuppressed=this.isSuppressMouseEvent(e),this.beans.eventSvc.dispatchEvent(t)}findFullWidthInfoForEvent(e){if(!e)return;const t=this.findFullWidthRowGui(e.target),n=this.getColumnForFullWidth(t);if(!(!t||!n))return{rowGui:t,column:n}}findFullWidthRowGui(e){return this.allRowGuis.find(t=>t.element.contains(e))}getColumnForFullWidth(e){const{visibleCols:t}=this.beans;switch(e?.containerType){case"center":return t.centerCols[0];case"left":return t.leftCols[0];case"right":return t.rightCols[0];default:return t.allCols[0]}}onRowMouseDown(e){if(this.lastMouseDownOnDragger=_isElementChildOfClass(e.target,"ag-row-drag",3),!this.isFullWidth()||this.isSuppressMouseEvent(e))return;const{rangeSvc:t,focusSvc:n}=this.beans;t?.removeAllCellRanges();const o=this.findFullWidthInfoForEvent(e);if(!o)return;const{rowGui:u,column:d}=o,f=u.element,g=e.target,v=this.rowNode;let w=e.defaultPrevented||_isBrowserSafari();f&&f.contains(g)&&_isFocusableFormField(g)&&(w=!1),n.setFocusedCell({rowIndex:v.rowIndex,column:d,rowPinned:v.rowPinned,forceBrowserFocus:w})}isSuppressMouseEvent(e){const{gos:t,rowNode:n}=this;if(this.isFullWidth()){const u=this.findFullWidthRowGui(e.target);return _suppressFullWidthMouseEvent(t,u?.rowComp.getFullWidthCellRendererParams(),n,e)}const o=_getCellCtrlForEventTarget(t,e.target);return o!=null&&_suppressCellMouseEvent(t,o.column,n,e)}onRowClick(e){if(_isStopPropagationForAgGrid(e)||this.lastMouseDownOnDragger)return;const n=this.isSuppressMouseEvent(e),{eventSvc:o,selectionSvc:u}=this.beans,d=this.createRowEventWithSource("rowClicked",e);d.isEventHandlingSuppressed=n,o.dispatchEvent(d),!n&&u?.handleSelectionEvent(e,this.rowNode,"rowClicked")}setupDetailRowAutoHeight(e){this.rowType==="FullWidthDetail"&&this.beans.masterDetailSvc?.setupDetailRowAutoHeight(this,e)}createFullWidthCompDetails(e,t){const{gos:n,rowNode:o}=this,u=_addGridCommonParams(n,{fullWidth:!0,data:o.data,node:o,value:o.key,valueFormatted:o.key,eGridCell:e,eParentOfValue:e,pinned:t,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(f,g,v,w)=>this.addFullWidthRowDragging(f,g,v,w),setTooltip:(f,g)=>{n.assertModuleRegistered("Tooltip",3),this.setupFullWidthRowTooltip(f,g)}}),d=this.beans.userCompFactory;switch(this.rowType){case"FullWidthDetail":return _getFullWidthDetailCellRendererDetails(d,u);case"FullWidthGroup":{const{value:f,valueFormatted:g}=this.beans.valueSvc.getValueForDisplay({node:this.rowNode,includeValueFormatted:!0,from:"edit"});return u.value=f,u.valueFormatted=g,_getFullWidthGroupCellRendererDetails(d,u)}case"FullWidthLoading":return _getFullWidthLoadingCellRendererDetails(d,u);default:return _getFullWidthCellRendererDetails(d,u)}}setupFullWidthRowTooltip(e,t){this.fullWidthGui&&(this.tooltipFeature=this.beans.tooltipSvc?.setupFullWidthRowTooltip(this.tooltipFeature,this,e,t))}addFullWidthRowDragging(e,t,n="",o){const{rowDragSvc:u,context:d}=this.beans;if(!u||!this.isFullWidth())return;const f=u.createRowDragComp(()=>n,this.rowNode,void 0,e,t,o);this.createBean(f,d),this.addDestroyFunc(()=>{this.destroyBean(f,d)})}onUiLevelChanged(){const e=calculateRowLevel(this.rowNode);if(this.rowLevel!=e){const t="ag-row-level-"+e,n="ag-row-level-"+this.rowLevel;for(const o of this.allRowGuis)o.rowComp.toggleCss(t,!0),o.rowComp.toggleCss(n,!1)}this.rowLevel=e}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBounds.getLastRow()}refreshFirstAndLastRowStyles(){const e=this.isFirstRowOnPage(),t=this.isLastRowOnPage();if(this.firstRowOnPage!==e){this.firstRowOnPage=e;for(const n of this.allRowGuis)n.rowComp.toggleCss("ag-row-first",e)}if(this.lastRowOnPage!==t){this.lastRowOnPage=t;for(const n of this.allRowGuis)n.rowComp.toggleCss("ag-row-last",t)}}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){const e=[];if(this.beans.rowStyleSvc?.processClassesFromGridOptions(e,this.rowNode),!!e.length)for(const t of e)for(const n of this.allRowGuis)n.rowComp.toggleCss(t,!0)}postProcessRowClassRules(){this.beans.rowStyleSvc?.processRowClassRules(this.rowNode,e=>{for(const t of this.allRowGuis)t.rowComp.toggleCss(e,!0)},e=>{for(const t of this.allRowGuis)t.rowComp.toggleCss(e,!1)})}setStylesFromGridOptions(e,t){e&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(t,n=>n.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(e){return e==="left"||e==="right"?e:null}getInitialRowClasses(e){const t=this.getPinnedForContainer(e),n=this.isFullWidth(),{rowNode:o,beans:u}=this,d=[];d.push("ag-row"),d.push(this.rowFocused?"ag-row-focus":"ag-row-no-focus"),this.fadeInAnimation[e]&&d.push("ag-opacity-zero"),d.push(o.rowIndex%2===0?"ag-row-even":"ag-row-odd"),o.isRowPinned()&&(d.push("ag-row-pinned"),u.pinnedRowModel?.isManual()&&d.push("ag-row-pinned-manual")),!o.isRowPinned()&&o.pinnedSibling&&d.push("ag-row-pinned-source"),o.isSelected()&&d.push("ag-row-selected"),o.footer&&d.push("ag-row-footer"),d.push("ag-row-level-"+this.rowLevel),o.stub&&d.push("ag-row-loading"),n&&d.push("ag-full-width-row"),u.expansionSvc?.addExpandedCss(d,o),o.dragging&&d.push("ag-row-dragging");const{rowStyleSvc:f}=u;return f&&(f.processClassesFromGridOptions(d,o),f.preProcessRowClassRules(d,o)),d.push(this.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),this.isFirstRowOnPage()&&d.push("ag-row-first"),this.isLastRowOnPage()&&d.push("ag-row-last"),n&&(t==="left"&&d.push("ag-cell-last-left-pinned"),t==="right"&&d.push("ag-cell-first-right-pinned")),d}processStylesFromGridOptions(){return this.beans.rowStyleSvc?.processStylesFromGridOptions(this.rowNode)??this.emptyStyle}onRowSelected(e){this.beans.selectionSvc?.onRowCtrlSelected(this,t=>{(t===this.centerGui||t===this.fullWidthGui)&&this.announceDescription()},e)}announceDescription(){this.beans.selectionSvc?.announceAriaRowSelection(this.rowNode)}addHoverFunctionality(e){if(!this.active)return;const{element:t,compBean:n}=e,{rowNode:o,beans:u,gos:d}=this;n.addManagedListeners(t,{pointerenter:f=>{f.pointerType==="mouse"&&o.dispatchRowEvent("mouseEnter")},pointerleave:f=>{f.pointerType==="mouse"&&o.dispatchRowEvent("mouseLeave")}}),n.addManagedListeners(o,{mouseEnter:()=>{!u.dragSvc?.dragging&&!d.get("suppressRowHoverHighlight")&&(t.classList.add("ag-row-hover"),o.setHovered(!0))},mouseLeave:()=>{this.resetHoveredStatus(t)}})}resetHoveredStatus(e){const t=e?[e]:this.allRowGuis.map(n=>n.element);for(const n of t)n.classList.remove("ag-row-hover");this.rowNode.setHovered(!1)}roundRowTopToBounds(e){const t=this.beans.ctrlsSvc.getScrollFeature().getApproximateVScollPosition(),n=this.applyPaginationOffset(t.top,!0)-100,o=this.applyPaginationOffset(t.bottom,!0)+100;return Math.min(Math.max(n,e),o)}forEachGui(e,t){if(e)t(e);else for(const n of this.allRowGuis)t(n)}isRowRendered(){return this.allRowGuis.length>0}onRowHeightChanged(e){if(this.rowNode.rowHeight==null)return;const t=this.rowNode.rowHeight,n=this.beans.environment.getDefaultRowHeight(),u=_isGetRowHeightFunction(this.gos)?_getRowHeightForNode(this.beans,this.rowNode).height:void 0,d=u?`${Math.min(n,u)-2}px`:void 0;this.forEachGui(e,f=>{f.element.style.height=`${t}px`,d&&f.element.style.setProperty("--ag-line-height",d)})}destroyFirstPass(e=!1){this.active=!1;const{rowNode:t}=this;if(!e&&_isAnimateRows(this.gos)&&!t.sticky)if(t.rowTop!=null){const u=this.roundRowTopToBounds(t.rowTop);this.setRowTop(u)}else for(const u of this.allRowGuis)u.rowComp.toggleCss("ag-opacity-zero",!0);this.fullWidthGui?.element.contains(_getActiveDomElement(this.beans))&&this.beans.focusSvc.attemptToRecoverFocus(),t.setHovered(!1);const n=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(n),this.beans.eventSvc.dispatchEvent(n),super.destroy()}destroySecondPass(){this.allRowGuis.length=0;const e=t=>{for(const n of t.list)n.destroy();return{list:[],map:{}}};this.centerCellCtrls=e(this.centerCellCtrls),this.leftCellCtrls=e(this.leftCellCtrls),this.rightCellCtrls=e(this.rightCellCtrls)}setFocusedClasses(e){this.forEachGui(e,t=>{t.rowComp.toggleCss("ag-row-focus",this.rowFocused),t.rowComp.toggleCss("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const{focusSvc:e}=this.beans,t=e.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses())}onPaginationChanged(){const e=this.beans.pagination?.getCurrentPage()??0;this.paginationPage!==e&&(this.paginationPage=e,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(e,t=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return e;const n=this.beans.pageBounds.getPixelOffset();return e+n*(t?1:-1)}setRowTop(e){if(!this.printLayout&&_exists(e)){const t=this.applyPaginationOffset(e),u=`${this.rowNode.isRowPinned()||this.rowNode.sticky?t:this.beans.rowContainerHeight.getRealPixelPosition(t)}px`;this.setRowTopStyle(u)}}getInitialRowTop(e){return this.suppressRowTransform?this.getInitialRowTopShared(e):void 0}getInitialTransform(e){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(e)})`}getInitialRowTopShared(e){if(this.printLayout)return"";const t=this.rowNode;let n;if(t.sticky)n=t.stickyRowTop;else{const o=this.slideInAnimation[e]?this.roundRowTopToBounds(t.oldRowTop):t.rowTop,u=this.applyPaginationOffset(o);n=t.isRowPinned()?u:this.beans.rowContainerHeight.getRealPixelPosition(u)}return n+"px"}setRowTopStyle(e){for(const t of this.allRowGuis)this.suppressRowTransform?t.rowComp.setTop(e):t.rowComp.setTransform(`translateY(${e})`)}getCellCtrl(e,t=!1){let n=null;for(const o of this.getAllCellCtrls())o.column==e&&(n=o);if(n!=null||t)return n;for(const o of this.getAllCellCtrls())o?.getColSpanningList().indexOf(e)>=0&&(n=o);return n}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}updateRowIndexes(e){const t=this.rowNode.getRowIndexString();if(t===null)return;const n=(this.beans.ctrlsSvc.getHeaderRowContainerCtrl()?.getRowCount()??0)+(this.beans.filterManager?.getHeaderRowCount()??0),o=this.rowNode.rowIndex%2===0,u=n+this.rowNode.rowIndex+1;this.forEachGui(e,d=>{d.rowComp.setRowIndex(t),d.rowComp.toggleCss("ag-row-even",o),d.rowComp.toggleCss("ag-row-odd",!o),_setAriaRowIndex(d.element,u)})}},NavigationService=class extends BeanStub{constructor(){super(),this.beanName="navigation",this.onPageDown=_throttle(this.onPageDown,100),this.onPageUp=_throttle(this.onPageUp,100)}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){const n=e.key,o=e.altKey,u=e.ctrlKey||e.metaKey,d=!!this.beans.rangeSvc&&e.shiftKey,f=_getCellPositionForEvent(this.gos,e);let g=!1;switch(n){case KeyCode.PAGE_HOME:case KeyCode.PAGE_END:!u&&!o&&(this.onHomeOrEndKey(n),g=!0);break;case KeyCode.LEFT:case KeyCode.RIGHT:case KeyCode.UP:case KeyCode.DOWN:if(!f)return!1;u&&!o&&!d&&(this.onCtrlUpDownLeftRight(n,f),g=!0);break;case KeyCode.PAGE_DOWN:case KeyCode.PAGE_UP:!u&&!o&&(g=this.handlePageUpDown(n,f,t));break}return g&&e.preventDefault(),g}handlePageUpDown(e,t,n){return n&&(t=this.beans.focusSvc.getFocusedCell()),t?(e===KeyCode.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo({scrollIndex:e,scrollType:t,scrollColumn:n,focusIndex:o,focusColumn:u,isAsync:d,rowPinned:f}){const{scrollFeature:g}=this.gridBodyCon;_exists(n)&&!n.isPinned()&&g.ensureColumnVisible(n),_exists(e)&&g.ensureIndexVisible(e,t),d||g.ensureIndexVisible(o);const{focusSvc:v,rangeSvc:w}=this.beans;v.setFocusedCell({rowIndex:o,column:u,rowPinned:f,forceBrowserFocus:!0}),w?.setRangeToCell({rowIndex:o,rowPinned:f,column:u})}onPageDown(e){const t=this.beans,n=getVScroll(t),o=this.getViewportHeight(),{pageBounds:u,rowModel:d,rowAutoHeight:f}=t,g=u.getPixelOffset(),v=n.top+o,w=d.getRowIndexAtPixel(v+g);f?.active?this.navigateToNextPageWithAutoHeight(e,w):this.navigateToNextPage(e,w)}onPageUp(e){const t=this.beans,n=getVScroll(t),{pageBounds:o,rowModel:u,rowAutoHeight:d}=t,f=o.getPixelOffset(),g=n.top,v=u.getRowIndexAtPixel(g+f);d?.active?this.navigateToNextPageWithAutoHeight(e,v,!0):this.navigateToNextPage(e,v,!0)}navigateToNextPage(e,t,n=!1){const{pageBounds:o,rowModel:u}=this.beans,d=this.getViewportHeight(),f=o.getFirstRow(),g=o.getLastRow(),v=o.getPixelOffset(),w=u.getRow(e.rowIndex),S=n?w?.rowHeight-d-v:d-v,R=w?.rowTop+S;let _=u.getRowIndexAtPixel(R+v);if(_===e.rowIndex){const M=n?-1:1;t=_=e.rowIndex+M}let F;n?(F="bottom",_<f&&(_=f),t<f&&(t=f)):(F="top",_>g&&(_=g),t>g&&(t=g)),this.isRowTallerThanView(u.getRow(_))&&(t=_,F="top"),this.navigateTo({scrollIndex:t,scrollType:F,scrollColumn:null,focusIndex:_,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,n=!1){this.navigateTo({scrollIndex:t,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{const o=this.getNextFocusIndexForAutoHeight(e,n);this.navigateTo({scrollIndex:t,scrollType:n?"bottom":"top",scrollColumn:null,focusIndex:o,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){const n=t?-1:1,o=this.getViewportHeight(),{pageBounds:u,rowModel:d}=this.beans,f=u.getLastRow();let g=0,v=e.rowIndex;for(;v>=0&&v<=f;){const w=d.getRow(v);if(w){const S=w.rowHeight??0;if(g+S>o)break;g+=S}v+=n}return Math.max(0,Math.min(v,f))}getViewportHeight(){const e=this.beans,t=getVScroll(e),n=this.beans.scrollVisibleSvc.getScrollbarWidth();let o=t.bottom-t.top;return e.ctrlsSvc.get("center").isHorizontalScrollShowing()&&(o-=n),o}isRowTallerThanView(e){if(!e)return!1;const t=e.rowHeight;return typeof t!="number"?!1:t>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const n=this.beans.cellNavigation.getNextCellToFocus(e,t,!0),o=this.getNormalisedPosition(n),{rowIndex:u,rowPinned:d,column:f}=o??n,g=f;this.navigateTo({scrollIndex:u,scrollType:null,scrollColumn:g,focusIndex:u,focusColumn:g,rowPinned:d})}onHomeOrEndKey(e){const t=e===KeyCode.PAGE_HOME,{visibleCols:n,pageBounds:o,rowModel:u}=this.beans,d=n.allCols,f=t?o.getFirstRow():o.getLastRow(),g=u.getRow(f);if(!g)return;const v=(t?d:[...d].reverse()).find(w=>!w.isSuppressNavigable(g));v&&this.navigateTo({scrollIndex:f,scrollType:null,scrollColumn:v,focusIndex:f,focusColumn:v})}onTabKeyDown(e,t){const n=t.shiftKey,o=this.tabToNextCellCommon(e,n,t),u=this.beans,{ctrlsSvc:d,pageBounds:f,focusSvc:g,gos:v}=u;if(o!==!1){o?t.preventDefault():o===null&&d.get("gridCtrl").allowFocusForNextCoreContainer(n);return}if(n){const{rowIndex:w,rowPinned:S}=e.getRowPosition();(S?w===0:w===f.getFirstRow())&&(v.get("headerHeight")===0||_isHeaderFocusSuppressed(u)?_focusNextGridCoreContainer(u,!0,!0):(t.preventDefault(),g.focusPreviousFromFirstCell(t)))}else e instanceof CellCtrl&&e.focusCell(!0),(g.focusOverlay(!1)||_focusNextGridCoreContainer(u,n))&&t.preventDefault()}tabToNextCell(e,t){const n=this.beans,{focusSvc:o,rowRenderer:u}=n,d=o.getFocusedCell();if(!d)return!1;let f=_getCellByPosition(n,d);return!f&&(f=u.getRowByPosition(d),!f?.isFullWidth())?!1:!!this.tabToNextCellCommon(f,e,t,"api")}tabToNextCellCommon(e,t,n,o="ui"){const{editSvc:u,focusSvc:d}=this.beans;let f;const g=e instanceof CellCtrl?e:e.getAllCellCtrls()?.[0];return u?.isEditing()?f=u?.moveToNextCell(g,t,n,o):f=this.moveToNextCellNotEditing(e,t,n),f===null?f:f||!!d.focusedHeader}moveToNextCellNotEditing(e,t,n){const o=this.beans.visibleCols.allCols;let u;if(e instanceof RowCtrl){if(u={...e.getRowPosition(),column:t?o[0]:_last(o)},this.gos.get("embedFullWidthRows")&&n){const f=e.findFullWidthInfoForEvent(n);f&&(u.column=f.column)}}else u=e.getFocusedCellPosition();const d=this.findNextCellToFocusOn(u,{backwards:t,startEditing:!1});if(d===!1)return null;if(d instanceof CellCtrl)d.focusCell(!0);else if(d)return this.tryToFocusFullWidthRow(d,t);return _exists(d)}findNextCellToFocusOn(e,{backwards:t,startEditing:n,skipToNextEditableCell:o}){let u=e;const d=this.beans,{cellNavigation:f,gos:g,focusSvc:v,rowRenderer:w,rangeSvc:S}=d;for(;;){e!==u&&(e=u),t||(u=this.getLastCellOfColSpan(u)),u=f.getNextTabbedCell(u,t);const R=g.getCallback("tabToNextCell");if(_exists(R)){const I=R({backwards:t,editing:n,previousCellPosition:e,nextCellPosition:u||null});if(I===!0)u=e;else{if(I===!1)return!1;u={rowIndex:I.rowIndex,column:I.column,rowPinned:I.rowPinned}}}if(!u)return null;if(u.rowIndex<0){const M=getFocusHeaderRowCount(d);return v.focusHeaderPosition({headerPosition:{headerRowIndex:M+u.rowIndex,column:u.column},fromCell:!0}),null}const _=g.get("editType")==="fullRow";if(n&&(!_||o)&&!this.isCellEditable(u))continue;this.ensureCellVisible(u);const F=_getCellByPosition(d,u);if(!F){const M=w.getRowByPosition(u);if(!M||!M.isFullWidth()||n)continue;return{...M.getRowPosition(),column:u?.column}}if(!f.isSuppressNavigable(F.column,F.rowNode))return F.setFocusedCellPosition(u),S?.setRangeToCell(u),F}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}lookupRowNodeForCell({rowIndex:e,rowPinned:t}){const{pinnedRowModel:n,rowModel:o}=this.beans;return t==="top"?n?.getPinnedTopRow(e):t==="bottom"?n?.getPinnedBottomRow(e):o.getRow(e)}navigateToNextCell(e,t,n,o){let u=n,d=!1;const f=this.beans,{cellNavigation:g,focusSvc:v,gos:w}=f;for(;u&&(u===n||!this.isValidNavigateCell(u));)w.get("enableRtl")?t===KeyCode.LEFT&&(u=this.getLastCellOfColSpan(u)):t===KeyCode.RIGHT&&(u=this.getLastCellOfColSpan(u)),u=g.getNextCellToFocus(t,u),d=_missing(u);if(d&&e&&e.key===KeyCode.UP&&(u={rowIndex:-1,rowPinned:null,column:n.column}),o){const R=w.getCallback("navigateToNextCell");if(_exists(R)){const F=R({key:t,previousCellPosition:n,nextCellPosition:u||null,event:e});_exists(F)?u={rowPinned:F.rowPinned,rowIndex:F.rowIndex,column:F.column}:u=null}}if(!u)return;if(u.rowIndex<0){const R=getFocusHeaderRowCount(f);v.focusHeaderPosition({headerPosition:{headerRowIndex:R+u.rowIndex,column:n.column},event:e||void 0,fromCell:!0});return}const S=this.getNormalisedPosition(u);S?this.focusPosition(S):this.tryToFocusFullWidthRow(u)}getNormalisedPosition(e){if(!!this.beans.spannedRowRenderer?.getCellByPosition(e))return e;this.ensureCellVisible(e);const n=_getCellByPosition(this.beans,e);return n?(e=n.getFocusedCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){const{visibleCols:n,rowRenderer:o,focusSvc:u,eventSvc:d}=this.beans,f=n.allCols;if(!o.getRowByPosition(e)?.isFullWidth())return!1;const v=u.getFocusedCell(),w={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?_last(f):f[0])};this.focusPosition(w);const S=t??(v!=null&&_isRowBefore(w,v));return d.dispatchEvent({type:"fullWidthRowFocused",rowIndex:w.rowIndex,rowPinned:w.rowPinned,column:w.column,isFullWidthCell:!0,fromBelow:S}),!0}focusPosition(e){const{focusSvc:t,rangeSvc:n}=this.beans;t.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),n?.setRangeToCell(e)}isValidNavigateCell(e){return!!_getRowNode(this.beans,e)}getLastCellOfColSpan(e){const t=_getCellByPosition(this.beans,e);if(!t)return e;const n=t.getColSpanningList();return n.length===1?e:{rowIndex:e.rowIndex,column:_last(n),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=_isGroupRowsSticky(this.gos),n=this.beans.rowModel.getRow(e.rowIndex),o=t&&n?.sticky,{scrollFeature:u}=this.gridBodyCon;!o&&_missing(e.rowPinned)&&u.ensureIndexVisible(e.rowIndex),e.column.isPinned()||u.ensureColumnVisible(e.column)}ensureColumnVisible(e){const t=this.gridBodyCon.scrollFeature;e.isPinned()||t.ensureColumnVisible(e)}ensureRowVisible(e){this.gridBodyCon.scrollFeature.ensureIndexVisible(e)}};function getVScroll(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}var KeyboardNavigationModule={moduleName:"KeyboardNavigation",version:VERSION,beans:[NavigationService,CellNavigationService,HeaderNavigationService],apiFunctions:{getFocusedCell,clearFocusedCell,setFocusedCell,setFocusedHeader,tabToNextCell,tabToPreviousCell}},PageBoundsListener=class extends BeanStub{constructor(){super(...arguments),this.beanName="pageBoundsListener"}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventSvc.dispatchEvent({type:"paginationChanged",animate:e?.animate??!1,newData:e?.newData??!1,newPage:e?.newPage??!1,newPageSize:e?.newPageSize??!1,keepRenderedRows:e?.keepRenderedRows??!1})}calculatePages(){const{pageBounds:e,pagination:t,rowModel:n}=this.beans;t?t.calculatePages():e.calculateBounds(0,n.getRowCount()-1)}},PageBoundsService=class extends BeanStub{constructor(){super(...arguments),this.beanName="pageBounds",this.pixelOffset=0}getFirstRow(){return this.topRowBounds?.rowIndex??-1}getLastRow(){return this.bottomRowBounds?.rowIndex??-1}getCurrentPageHeight(){const{topRowBounds:e,bottomRowBounds:t}=this;return!e||!t?0:Math.max(t.rowTop+t.rowHeight-e.rowTop,0)}getCurrentPagePixelRange(){const{topRowBounds:e,bottomRowBounds:t}=this,n=e?.rowTop??0,o=t?t.rowTop+t.rowHeight:0;return{pageFirstPixel:n,pageLastPixel:o}}calculateBounds(e,t){const{rowModel:n}=this.beans,o=n.getRowBounds(e);o&&(o.rowIndex=e),this.topRowBounds=o;const u=n.getRowBounds(t);u&&(u.rowIndex=t),this.bottomRowBounds=u,this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){const e=this.topRowBounds?.rowTop??0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventSvc.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},pinnedColumnModuleCSS=".ag-pinned-left-floating-bottom,.ag-pinned-left-floating-top,.ag-pinned-right-floating-bottom,.ag-pinned-right-floating-top{min-width:0;overflow:hidden;position:relative}.ag-pinned-left-sticky-top,.ag-pinned-right-sticky-top{height:100%;overflow:hidden;position:relative}.ag-sticky-bottom-full-width-container,.ag-sticky-top-full-width-container{height:100%;overflow:hidden;width:100%}.ag-pinned-left-header,.ag-pinned-right-header{display:inline-block;height:100%;overflow:hidden;position:relative}.ag-body-horizontal-scroll:not(.ag-scrollbar-invisible){.ag-horizontal-left-spacer:not(.ag-scroller-corner){border-right:var(--ag-pinned-column-border)}.ag-horizontal-right-spacer:not(.ag-scroller-corner){border-left:var(--ag-pinned-column-border)}}.ag-pinned-right-header{border-left:var(--ag-pinned-column-border)}.ag-pinned-left-header{border-right:var(--ag-pinned-column-border)}.ag-cell.ag-cell-first-right-pinned:not(.ag-cell-range-left,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-left:var(--ag-pinned-column-border)}.ag-cell.ag-cell-last-left-pinned:not(.ag-cell-range-right,.ag-cell-range-single-cell,.ag-cell-focus:not(.ag-cell-range-selected):focus-within){border-right:var(--ag-pinned-column-border)}.ag-pinned-left-header .ag-header-cell-resize:after{left:calc(50% - var(--ag-header-column-resize-handle-width))}.ag-pinned-right-header .ag-header-cell-resize:after{left:50%}.ag-pinned-left-header .ag-header-cell-resize{right:-3px}.ag-pinned-right-header .ag-header-cell-resize{left:-3px}",SetPinnedWidthFeature=class extends BeanStub{constructor(e,t){super(),this.isLeft=e,this.elements=t,this.getWidth=e?()=>this.beans.pinnedCols.leftWidth:()=>this.beans.pinnedCols.rightWidth}postConstruct(){this.addManagedEventListeners({[`${this.isLeft?"left":"right"}PinnedWidthChanged`]:this.onPinnedWidthChanged.bind(this)})}onPinnedWidthChanged(){const e=this.getWidth(),t=e>0;for(const n of this.elements)n&&(_setDisplayed(n,t),_setFixedWidth(n,e))}},PinnedColumnService=class extends BeanStub{constructor(){super(...arguments),this.beanName="pinnedCols"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,t=>{this.gridBodyCtrl=t.gridBodyCtrl});const e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const{gos:e,visibleCols:t,eventSvc:n}=this.beans,o=_isDomLayout(e,"print"),u=o?0:t.getColsLeftWidth(),d=o?0:t.getDisplayedColumnsRightWidth();u!=this.leftWidth&&(this.leftWidth=u,n.dispatchEvent({type:"leftPinnedWidthChanged"})),d!=this.rightWidth&&(this.rightWidth=d,n.dispatchEvent({type:"rightPinnedWidthChanged"}))}keepPinnedColumnsNarrowerThanViewport(){const e=this.gridBodyCtrl.eBodyViewport,t=_getInnerWidth(e);if(t<=50)return;const n=this.getPinnedColumnsOverflowingViewport(t-50),o=this.gos.getCallback("processUnpinnedColumns"),{columns:u,hasLockedPinned:d}=n;let f=u;!f.length&&!d||(o&&(f=o({columns:f,viewportWidth:t})),f?.length&&(f=f.filter(g=>!isRowNumberCol(g)),this.setColsPinned(f,null,"viewportSizeFeature")))}createPinnedWidthFeature(e,...t){return new SetPinnedWidthFeature(e,t)}setColsPinned(e,t,n){const{colModel:o,colAnimation:u,visibleCols:d,gos:f}=this.beans;if(!o.cols||!e?.length)return;if(_isDomLayout(f,"print")){_warn(37);return}u?.start();let g;t===!0||t==="left"?g="left":t==="right"?g="right":g=null;const v=[];for(const w of e){if(!w)continue;const S=o.getCol(w);S&&S.getPinned()!==g&&(this.setColPinned(S,g),v.push(S))}v.length&&(d.refresh(n),dispatchColumnPinnedEvent(this.eventSvc,v,n)),u?.finish()}initCol(e){const{pinned:t,initialPinned:n}=e.colDef;t!==void 0?this.setColPinned(e,t):this.setColPinned(e,n)}setColPinned(e,t){t===!0||t==="left"?e.pinned="left":t==="right"?e.pinned="right":e.pinned=null,e.dispatchStateUpdatedEvent("pinned")}setupHeaderPinnedWidth(e){const{scrollVisibleSvc:t}=this.beans;if(e.pinned==null)return;const n=e.pinned==="left",o=e.pinned==="right";e.hidden=!0;const u=()=>{const d=n?this.leftWidth:this.rightWidth;if(d==null)return;const f=d==0,g=e.hidden!==f,v=this.gos.get("enableRtl"),w=t.getScrollbarWidth(),R=t.verticalScrollShowing&&(v&&n||!v&&o)?d+w:d;e.comp.setPinnedContainerWidth(`${R}px`),e.comp.setDisplayed(!f),g&&(e.hidden=f,e.refresh())};e.addManagedEventListeners({leftPinnedWidthChanged:u,rightPinnedWidthChanged:u,scrollVisibilityChanged:u,scrollbarWidthChanged:u})}getHeaderResizeDiff(e,t){if(t.getPinned()){const{leftWidth:o,rightWidth:u}=this,d=_getInnerWidth(this.beans.ctrlsSvc.getGridBodyCtrl().eBodyViewport)-50;if(o+u+e>d)if(d>o+u)e=d-o-u;else return 0}return e}getPinnedColumnsOverflowingViewport(e){const t=this.rightWidth??0,n=this.leftWidth??0,o=t+n;let u=!1;if(o<e)return{columns:[],hasLockedPinned:u};const{visibleCols:d}=this.beans,f=[...d.leftCols],g=[...d.rightCols];let v=0,w=0;const S=0,R=[];let _=o-S-e;for(;(w<f.length||v<g.length)&&_>0;){if(v<g.length){const F=g[v++];if(F.colDef.lockPinned){u=!0;continue}_-=F.getActualWidth(),R.push(F)}if(w<f.length&&_>0){const F=f[w++];if(F.colDef.lockPinned){u=!0;continue}_-=F.getActualWidth(),R.push(F)}}return{columns:R,hasLockedPinned:u}}},PinnedColumnModule={moduleName:"PinnedColumn",version:VERSION,beans:[PinnedColumnService],css:[pinnedColumnModuleCSS]},BaseAriaAnnouncementService=class extends AgBeanStub{constructor(){super(),this.beanName="ariaAnnounce",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.lastAnnouncement="",this.updateAnnouncement=_debounce(this,this.updateAnnouncement.bind(this),200)}postConstruct(){const e=this.beans,t=_getDocument(e),n=this.descriptionContainer=t.createElement("div");n.classList.add("ag-aria-description-container"),_setAriaLive(n,"polite"),_setAriaRelevant(n,"additions text"),_setAriaAtomic(n,!0),e.eRootDiv.appendChild(n)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;const e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{this.handleAnnouncementUpdate(e)},50)}handleAnnouncementUpdate(e){if(!this.isAlive()||!this.descriptionContainer)return;let t=e;if(t==null||t.replace(/[ .]/g,"")==""){this.lastAnnouncement="";return}this.lastAnnouncement===t&&(t=`${t}`),this.lastAnnouncement=t,this.descriptionContainer.textContent=t}destroy(){super.destroy();const{descriptionContainer:e}=this;e&&(_clearElement(e),e.remove()),this.descriptionContainer=null,this.pendingAnnouncements.clear()}},AriaAnnouncementService=class extends BaseAriaAnnouncementService{},AriaModule={moduleName:"Aria",version:VERSION,beans:[AriaAnnouncementService]},columnDelayRenderCSS=":where(.ag-delay-render){.ag-cell,.ag-header-cell,.ag-header-group-cell,.ag-row,.ag-spanned-cell-wrapper{visibility:hidden}}",HideClass="ag-delay-render",ColumnDelayRenderService=class extends BeanStub{constructor(){super(...arguments),this.beanName="colDelayRenderSvc",this.hideRequested=!1,this.alreadyRevealed=!1,this.timesRetried=0,this.requesters=new Set}hideColumns(e){this.alreadyRevealed||this.requesters.has(e)||(this.requesters.add(e),this.hideRequested||(this.beans.ctrlsSvc.whenReady(this,t=>{t.gridBodyCtrl.eGridBody.classList.add(HideClass)}),this.hideRequested=!0))}revealColumns(e){if(this.alreadyRevealed||!this.isAlive()||(this.requesters.delete(e),this.requesters.size>0))return;const{renderStatus:t,ctrlsSvc:n}=this.beans;if(t){if(!t.areHeaderCellsRendered()&&this.timesRetried<5){this.timesRetried++,setTimeout(()=>this.revealColumns(e));return}this.timesRetried=0}n.getGridBodyCtrl().eGridBody.classList.remove(HideClass),this.alreadyRevealed=!0}},ColumnDelayRenderModule={moduleName:"ColumnDelayRender",version:VERSION,beans:[ColumnDelayRenderService],css:[columnDelayRenderCSS]};function showLoadingOverlay(e){e.overlays?.showLoadingOverlay()}function showNoRowsOverlay(e){e.overlays?.showNoRowsOverlay()}function hideOverlay(e){e.overlays?.hideOverlay()}var overlayWrapperComponentCSS=".ag-overlay{inset:0;pointer-events:none;position:absolute;z-index:2}.ag-overlay-panel,.ag-overlay-wrapper{display:flex;height:100%;width:100%}.ag-overlay-wrapper{align-items:center;flex:none;justify-content:center;text-align:center}.ag-overlay-exporting-wrapper,.ag-overlay-loading-wrapper,.ag-overlay-modal-wrapper{pointer-events:all}.ag-overlay-exporting-center,.ag-overlay-loading-center{background:var(--ag-background-color);border:solid var(--ag-border-width) var(--ag-border-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-popup-shadow);display:flex;padding:var(--ag-spacing)}",OverlayWrapperElement={tag:"div",cls:"ag-overlay",role:"presentation",children:[{tag:"div",cls:"ag-overlay-panel",role:"presentation",children:[{tag:"div",ref:"eOverlayWrapper",cls:"ag-overlay-wrapper",role:"presentation"}]}]},OverlayWrapperComponent=class extends Component{constructor(){super(OverlayWrapperElement),this.eOverlayWrapper=RefPlaceholder,this.activeOverlay=null,this.activePromise=null,this.activeCssClass=null,this.elToFocusAfter=null,this.overlayExclusive=!1,this.oldWrapperPadding=null,this.registerCSS(overlayWrapperComponentCSS)}handleKeyDown(e){if(e.key!==KeyCode.TAB||e.defaultPrevented||_isStopPropagationForAgGrid(e))return;const{beans:t,eOverlayWrapper:n}=this;if(n&&_findNextFocusableElement(t,n,!1,e.shiftKey))return;let u=!1;e.shiftKey?u=t.focusSvc.focusGridView({column:_last(t.visibleCols.allCols),backwards:!0,canFocusOverlay:!1}):u=_focusNextGridCoreContainer(t,!1),u&&e.preventDefault()}updateLayoutClasses(e,t){const n=this.eOverlayWrapper;if(!n)return;const o=n.classList,{AUTO_HEIGHT:u,NORMAL:d,PRINT:f}=LayoutCssClasses;o.toggle(u,t.autoHeight),o.toggle(d,t.normal),o.toggle(f,t.print)}postConstruct(){this.createManagedBean(new LayoutFeature(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.beans.overlays.setWrapperComp(this,!1),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)}),this.addManagedEventListeners({gridSizeChanged:this.refreshWrapperPadding.bind(this)})}setWrapperTypeClass(e){const t=this.eOverlayWrapper?.classList;if(!t){this.activeCssClass=null;return}this.activeCssClass&&t.toggle(this.activeCssClass,!1),this.activeCssClass=e,t.toggle(e,!0)}showOverlay(e,t,n){if(this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,this.overlayExclusive=n,!e)return this.refreshWrapperPadding(),AgPromise.resolve();if(this.setWrapperTypeClass(t),this.setDisplayed(!0,{skipAriaHidden:!0}),this.refreshWrapperPadding(),n&&this.isGridFocused()){const o=_getActiveDomElement(this.beans);o&&!_isNothingFocused(this.beans)&&(this.elToFocusAfter=o)}return e.then(o=>{const u=this.eOverlayWrapper;if(!u){this.destroyBean(o);return}if(this.activePromise!==e){this.activeOverlay!==o&&(this.destroyBean(o),o=null);return}this.activePromise=null,o&&(this.activeOverlay!==o&&(u.appendChild(o.getGui()),this.activeOverlay=o),n&&this.isGridFocused()&&_focusInto(u))}),e}refreshWrapperPadding(){if(!this.eOverlayWrapper){this.oldWrapperPadding=null;return}const e=!!this.activeOverlay||!!this.activePromise;let t=0;e&&!this.overlayExclusive&&(t=this.beans.ctrlsSvc.get("gridHeaderCtrl")?.headerHeight||0),t!==this.oldWrapperPadding&&(this.oldWrapperPadding=t,this.eOverlayWrapper.style.setProperty("padding-top",`${t}px`))}destroyActiveOverlay(){this.activePromise=null;const e=this.activeOverlay;if(!e){this.overlayExclusive=!1,this.elToFocusAfter=null,this.refreshWrapperPadding();return}let t=this.elToFocusAfter;this.elToFocusAfter=null,this.activeOverlay=null,this.overlayExclusive=!1,t&&!this.isGridFocused()&&(t=null),this.destroyBean(e);const n=this.eOverlayWrapper;n&&_clearElement(n),t?.focus?.({preventScroll:!0}),this.refreshWrapperPadding()}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}isGridFocused(){const e=_getActiveDomElement(this.beans);return!!e&&this.beans.eGridDiv.contains(e)}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.beans.overlays.setWrapperComp(this,!0),super.destroy(),this.eOverlayWrapper=null}},OverlayWrapperSelector={selector:"AG-OVERLAY-WRAPPER",component:OverlayWrapperComponent},overlayCompTypeOptionalMethods=["refresh"],overlayCompType=e=>({name:e,optionalMethods:overlayCompTypeOptionalMethods}),LoadingOverlayDef={id:"agLoadingOverlay",overlayType:"loading",comp:overlayCompType("loadingOverlayComponent"),wrapperCls:"ag-overlay-loading-wrapper",exclusive:!0,compKey:"loadingOverlayComponent",paramsKey:"loadingOverlayComponentParams",isSuppressed:e=>{const t=e.get("loading");return t===!1||e.get("suppressLoadingOverlay")===!0&&t!==!0}},NoRowsOverlayDef={id:"agNoRowsOverlay",overlayType:"noRows",comp:overlayCompType("noRowsOverlayComponent"),wrapperCls:"ag-overlay-no-rows-wrapper",compKey:"noRowsOverlayComponent",paramsKey:"noRowsOverlayComponentParams",isSuppressed:e=>e.get("suppressNoRowsOverlay")},NoMatchingRowsOverlayDef={id:"agNoMatchingRowsOverlay",overlayType:"noMatchingRows",comp:overlayCompType("noMatchingRowsOverlayComponent"),wrapperCls:"ag-overlay-no-matching-rows-wrapper"},ExportingOverlayDef={id:"agExportingOverlay",overlayType:"exporting",comp:overlayCompType("exportingOverlayComponent"),wrapperCls:"ag-overlay-exporting-wrapper",exclusive:!0},CustomOverlayDef={id:"activeOverlay",comp:overlayCompType("activeOverlay"),wrapperCls:"ag-overlay-modal-wrapper",exclusive:!0},getActiveOverlayDef=e=>e?{agLoadingOverlay:LoadingOverlayDef,agNoRowsOverlay:NoRowsOverlayDef,agNoMatchingRowsOverlay:NoMatchingRowsOverlayDef,agExportingOverlay:ExportingOverlayDef}[e]??CustomOverlayDef:null,getOverlayDefForType=e=>e?{loading:LoadingOverlayDef,noRows:NoRowsOverlayDef,noMatchingRows:NoMatchingRowsOverlayDef,exporting:ExportingOverlayDef}[e]:null,OverlayService=class extends BeanStub{constructor(){super(...arguments),this.beanName="overlays",this.eWrapper=void 0,this.exclusive=!1,this.oldExclusive=!1,this.currentDef=null,this.showInitialOverlay=!0,this.userForcedNoRows=!1,this.exportsInProgress=0,this.newColumnsLoadedCleanup=null}postConstruct(){const e=this.gos;this.showInitialOverlay=_isClientSideRowModel(e);const t=()=>{this.userForcedNoRows||this.updateOverlay(!1)},[n,o,u,d]=this.addManagedEventListeners({newColumnsLoaded:t,rowCountReady:()=>{this.disableInitialOverlay(),t(),o()},rowDataUpdated:t,modelUpdated:t});this.newColumnsLoadedCleanup=n,this.addManagedPropertyListeners(["loading","activeOverlay","activeOverlayParams","overlayComponentParams","loadingOverlayComponentParams","noRowsOverlayComponentParams"],f=>this.onPropChange(new Set(f.changeSet?.properties)))}destroy(){this.doHideOverlay(),super.destroy(),this.eWrapper=void 0}setWrapperComp(e,t){this.isAlive()&&(t?this.eWrapper===e&&(this.eWrapper=void 0):this.eWrapper=e,this.updateOverlay(!1))}isVisible(){return!!this.currentDef}showLoadingOverlay(){this.showInitialOverlay=!1;const e=this.gos;if(!this.eWrapper||e.get("activeOverlay")||this.isDisabled(LoadingOverlayDef))return;const t=e.get("loading");!t&&t!==void 0||this.doShowOverlay(LoadingOverlayDef)}showNoRowsOverlay(){this.showInitialOverlay=!1;const e=this.gos;!this.eWrapper||e.get("activeOverlay")||e.get("loading")||this.isDisabled(NoRowsOverlayDef)||(this.userForcedNoRows=!0,this.doShowOverlay(NoRowsOverlayDef))}async showExportOverlay(e){const{gos:t,beans:n}=this;if(!this.eWrapper||t.get("activeOverlay")||t.get("loading")||this.isDisabled(ExportingOverlayDef)||this.userForcedNoRows&&this.currentDef===NoRowsOverlayDef){e();return}const o=this.getDesiredDefWithOverride(ExportingOverlayDef);if(!o){e();return}this.exportsInProgress++,this.focusedCell=n.focusSvc.getFocusedCell(),await this.doShowOverlay(o),await new Promise(d=>setTimeout(()=>d()));const u=Date.now();try{e()}finally{const d=Date.now()-u,f=Math.max(0,300-d),g=()=>{this.exportsInProgress--,this.exportsInProgress===0&&(this.updateOverlay(!1),_attemptToRestoreCellFocus(n,this.focusedCell),this.focusedCell=null)};f>0?setTimeout(()=>g(),f):g()}}hideOverlay(){const e=this.gos;this.showInitialOverlay=!1;const t=this.userForcedNoRows;if(this.userForcedNoRows=!1,e.get("loading")){_warn(99);return}if(e.get("activeOverlay")){_warn(296);return}if(this.currentDef===NoMatchingRowsOverlayDef){_warn(297);return}this.doHideOverlay(),t&&this.getOverlayDef()!==NoRowsOverlayDef&&this.updateOverlay(!1)}getOverlayWrapperSelector(){return OverlayWrapperSelector}getOverlayWrapperCompClass(){return OverlayWrapperComponent}onPropChange(e){const t=e.has("activeOverlay");if((t||e.has("loading"))&&this.updateOverlay(t))return;const n=this.currentDef,o=this.eWrapper?.activeOverlay;if(o&&n){const u=e.has("activeOverlayParams");if(n===CustomOverlayDef)u&&o.refresh?.(this.makeCompParams(!0));else{const d=n.paramsKey;(e.has("overlayComponentParams")||d&&e.has(d))&&o.refresh?.(this.makeCompParams(!1,d,n.overlayType))}}}updateOverlay(e){const t=this.eWrapper;if(!t)return this.currentDef=null,!1;const n=this.getDesiredDefWithOverride(),o=this.currentDef,u=n===CustomOverlayDef&&e;return n!==o?n?(this.doShowOverlay(n),!0):(this.disableInitialOverlay(),this.doHideOverlay()):u&&n?(t.hideOverlay(),this.doShowOverlay(n),!0):(n||this.disableInitialOverlay(),!1)}getDesiredDefWithOverride(e){const{gos:t}=this;let n=getActiveOverlayDef(t.get("activeOverlay"));return n||(n=e??this.getOverlayDef(),n&&this.isDisabled(n)&&(n=null)),n}getOverlayDef(){const{gos:e,beans:t}=this,{rowModel:n}=t,o=e.get("loading");if(o!==void 0){if(this.disableInitialOverlay(),o)return LoadingOverlayDef}else if(this.showInitialOverlay){if(!this.isDisabled(LoadingOverlayDef)&&(!e.get("columnDefs")||!e.get("rowData")))return LoadingOverlayDef;this.disableInitialOverlay()}else this.disableInitialOverlay();const d=n.getOverlayType();return getOverlayDefForType(d)}disableInitialOverlay(){this.showInitialOverlay=!1,this.newColumnsLoadedCleanup?.(),this.newColumnsLoadedCleanup=null}doShowOverlay(e){const{gos:t,beans:n}=this,{userCompFactory:o}=n;this.currentDef=e;const u=e!==CustomOverlayDef,d=!!e.exclusive;this.exclusive=d;let f;(e.paramsKey&&t.get(e.paramsKey)||e.compKey&&t.get(e.compKey))&&(f=e.paramsKey);let g;u&&(t.get("overlayComponent")||t.get("overlayComponentSelector"))&&(g=o.getCompDetailsFromGridOptions({name:"overlayComponent",optionalMethods:["refresh"]},void 0,this.makeCompParams(!1,e.paramsKey,e.overlayType))),g??(g=o.getCompDetailsFromGridOptions(e.comp,u?e.id:void 0,this.makeCompParams(!u,f,e.overlayType),!1));const v=g?.newAgStackInstance()??null,w=this.eWrapper?this.eWrapper.showOverlay(v,e.wrapperCls,d):AgPromise.resolve();return this.eWrapper?.refreshWrapperPadding(),this.setExclusive(d),w}makeCompParams(e,t,n){const{gos:o}=this,u=e?o.get("activeOverlayParams"):{...o.get("overlayComponentParams"),...t&&o.get(t)||null,overlayType:n};return _addGridCommonParams(o,u??{})}doHideOverlay(){let e=!1;this.currentDef&&(this.currentDef=null,e=!0),this.exclusive=!1;const t=this.eWrapper;return t&&(t.hideOverlay(),t.refreshWrapperPadding(),this.setExclusive(!1)),e}setExclusive(e){this.oldExclusive!==e&&(this.oldExclusive=e,this.eventSvc.dispatchEvent({type:"overlayExclusiveChanged"}))}isDisabled(e){const{gos:t}=this;return e.overlayType&&t.get("suppressOverlays")?.includes(e.overlayType)||e.isSuppressed?.(t)===!0}},OverlayModule={moduleName:"Overlay",version:VERSION,userComponents:{agLoadingOverlay:LoadingOverlayComponent,agNoRowsOverlay:NoRowsOverlayComponent,agNoMatchingRowsOverlay:NoMatchingRowsOverlayComponent,agExportingOverlay:ExportingOverlayComponent},apiFunctions:{showLoadingOverlay,showNoRowsOverlay,hideOverlay},icons:{overlayLoading:"loading",overlayExporting:"loading"},beans:[OverlayService]},RowContainerHeightService=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowContainerHeight",this.scrollY=0,this.uiBodyHeight=0}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=_getMaxDivHeight(),_logIfDebug(this.gos,"RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}updateOffset(){if(!this.stretching)return;const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition().top,t=this.getUiBodyHeight();(e!==this.scrollY||t!==this.uiBodyHeight)&&(this.scrollY=e,this.uiBodyHeight=t,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;_logIfDebug(this.gos,`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventSvc.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventSvc.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const e=this.beans.ctrlsSvc.getScrollFeature().getVScrollPosition();return e.bottom-e.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=this.modelHeight-this.getUiBodyHeight(),n=e/t;return this.maxScrollY*n}},ROW_ANIMATION_TIMEOUT=400,RowRenderer=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{for(const d of this.getAllCellCtrls())d.onCellSelectionChanged()},t=()=>{for(const d of this.getAllCellCtrls())d.updateRangeBordersIfRangeCount()},n=()=>{this.eventSvc.addListener("cellSelectionChanged",e),this.eventSvc.addListener("columnMoved",t),this.eventSvc.addListener("columnPinned",t),this.eventSvc.addListener("columnVisible",t)},o=()=>{this.eventSvc.removeListener("cellSelectionChanged",e),this.eventSvc.removeListener("columnMoved",t),this.eventSvc.removeListener("columnPinned",t),this.eventSvc.removeListener("columnVisible",t)};this.addDestroyFunc(()=>o()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{_isCellSelectionEnabled(this.gos)?n():o()}),_isCellSelectionEnabled(this.gos)&&n()}}wireBeans(e){this.pageBounds=e.pageBounds,this.colModel=e.colModel,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusSvc=e.focusSvc,this.rowContainerHeight=e.rowContainerHeight,this.ctrlsSvc=e.ctrlsSvc,this.editSvc=e.editSvc}postConstruct(){this.ctrlsSvc.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),pinnedRowsChanged:this.onPinnedRowsChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",o=>this.onSuppressCellFocusChanged(o.currentValue)),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.addManagedPropertyListener("cellSelection",({currentValue:o,previousValue:u})=>{(!u&&o||u&&!o)&&this.redrawRows()});const{stickyRowSvc:e,gos:t,showRowGroupCols:n}=this.beans;if(n&&this.addManagedPropertyListener("showOpenedGroup",()=>{const o=n.columns;o.length&&this.refreshCells({columns:o,force:!0})}),e)this.stickyRowFeature=e.createStickyRowFeature(this,this.createRowCon.bind(this),this.destroyRowCtrls.bind(this));else{const o=this.gridBodyCtrl;o.setStickyTopHeight(0),o.setStickyBottomHeight(0)}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=_isDomLayout(t,"print"),this.embedFullWidthRows=this.printLayout||t.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new RowCtrlCache(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?.stickyTopRowCtrls??[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?.stickyBottomRowCtrls??[]}updateAllRowCtrls(){const e=Object.values(this.rowCtrlsByRowIndex),t=Object.values(this.zombieRowCtrls),n=this.cachedRowCtrls?.getEntries()??[];t.length>0||n.length>0?this.allRowCtrls=[...e,...t,...n]:this.allRowCtrls=e}isCellBeingRendered(e,t){const n=this.rowCtrlsByRowIndex[e];return!t||!n?!!n:n.isFullWidth()?!0:!!this.beans.spannedRowRenderer?.getCellByPosition({rowIndex:e,column:t,rowPinned:null})||!!n.getCellCtrl(t)||!n.isRowRendered()}updateCellFocus(e){for(const t of this.getAllCellCtrls())t.onCellFocused(e);for(const t of this.getFullWidthRowCtrls())t.onFullWidthRowFocused(e)}onCellFocusChanged(e){if(e?.rowIndex!=null&&!e.rowPinned){const t=this.beans.colModel.getCol(e.column)??void 0;this.isCellBeingRendered(e.rowIndex,t)||this.redraw()}this.updateCellFocus(e)}onSuppressCellFocusChanged(e){for(const t of this.getAllCellCtrls())t.onSuppressCellFocusChanged(e);for(const t of this.getFullWidthRowCtrls())t.onSuppressCellFocusChanged(e)}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>this.onCellFocusChanged(e),cellFocusCleared:()=>this.updateCellFocus(),flashCells:e=>{const{cellFlashSvc:t}=this.beans;if(t)for(const n of this.getAllCellCtrls())t.onFlashCells(n,e)},columnHoverChanged:()=>{for(const e of this.getAllCellCtrls())e.onColumnHover()},displayedColumnsChanged:()=>{for(const e of this.getAllCellCtrls())e.onDisplayedColumnsChanged()},displayedColumnsWidthChanged:()=>{if(this.printLayout)for(const e of this.getAllCellCtrls())e.onLeftChanged()}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){for(const e of this.destroyFuncsForColumnListeners)e();this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners();const e=this.colModel.getCols();for(const t of e){const n=v=>{for(const w of this.getAllCellCtrls())w.column===t&&v(w)},o=()=>{n(v=>v.onLeftChanged())},u=()=>{n(v=>v.onWidthChanged())},d=()=>{n(v=>v.onFirstRightPinnedChanged())},f=()=>{n(v=>v.onLastLeftPinnedChanged())},g=()=>{n(v=>v.onColDefChanged())};t.__addEventListener("leftChanged",o),t.__addEventListener("widthChanged",u),t.__addEventListener("firstRightPinnedChanged",d),t.__addEventListener("lastLeftPinnedChanged",f),t.__addEventListener("colDefChanged",g),this.destroyFuncsForColumnListeners.push(()=>{t.__removeEventListener("leftChanged",o),t.__removeEventListener("widthChanged",u),t.__removeEventListener("firstRightPinnedChanged",d),t.__removeEventListener("lastLeftPinnedChanged",f),t.__removeEventListener("colDefChanged",g)})}}onDomLayoutChanged(){const e=_isDomLayout(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),n=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,n&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsNotSpanningForColumn(e){const t=[];for(const n of this.getAllRowCtrls()){const o=n.getCellCtrl(e,!0)?.eGui;o&&t.push(o)}return t}refreshFloatingRowComps(e=!0){this.refreshFloatingRows(this.topRowCtrls,"top",e),this.refreshFloatingRows(this.bottomRowCtrls,"bottom",e)}refreshFloatingRows(e,t,n){const{pinnedRowModel:o,beans:u,printLayout:d}=this,f=Object.fromEntries(e.map(v=>[v.rowNode.id,v]));o?.forEachPinnedRow(t,(v,w)=>{const S=e[w];S&&o.getPinnedRowById(S.rowNode.id,t)===void 0&&(S.destroyFirstPass(),S.destroySecondPass()),v.id in f&&n?(e[w]=f[v.id],delete f[v.id]):e[w]=new RowCtrl(v,u,!1,!1,d)});const g=(t==="top"?o?.getPinnedTopRowCount():o?.getPinnedBottomRowCount())??0;e.length=g}onPinnedRowDataChanged(){const e={recycleRows:!0};this.redrawAfterModelUpdate(e)}onPinnedRowsChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}redrawRow(e,t=!1){if(e.sticky)this.stickyRowFeature?.refreshStickyNode(e);else if(this.cachedRowCtrls?.has(e)){this.cachedRowCtrls.removeRow(e);return}else{const n=o=>{const u=o[e.rowIndex];u&&u.rowNode===e&&(u.destroyFirstPass(),u.destroySecondPass(),o[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":n(this.topRowCtrls);break;case"bottom":n(this.bottomRowCtrls);break;default:n(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){const{editSvc:t}=this.beans;if(t?.isEditing()&&(t.isBatchEditing()?t.cleanupEditors():t.stopEditing(void 0,{source:"api"})),e!=null){for(const o of e??[])this.redrawRow(o,!0);this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();const t=this.beans.focusSvc?.getFocusCellToUseAfterRefresh();this.updateContainerHeights(),this.scrollToTopIfNewData(e);const n=!e.domLayoutChanged&&!!e.recycleRows,o=e.animate&&_isAnimateRows(this.gos),u=n?this.getRowsToRecycle():null;n||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender();const{stickyRowFeature:d,gos:f}=this;if(d){d.checkStickyRows();const g=d.extraTopHeight+d.extraBottomHeight;g&&this.updateContainerHeights(g)}this.recycleRows(u,o),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(f.get("enableRowPinning")?n:void 0),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){const t=e.newData||e.newPage,n=this.gos.get("suppressScrollOnNewData");t&&!n&&(this.gridBodyCtrl.scrollFeature.scrollToTop(),this.stickyRowFeature?.resetOffsets())}updateContainerHeights(e=0){const{rowContainerHeight:t}=this;if(this.printLayout){t.setModelHeight(null);return}let n=this.pageBounds.getCurrentPageHeight();n===0&&(n=1),t.setModelHeight(n+e)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error(_errMsg(252));this.refreshInProgress=!0,this.beans.frameworkOverrides.getLockOnRefresh?.()}releaseLockOnRefresh(){this.refreshInProgress=!1,this.beans.frameworkOverrides.releaseLockOnRefresh?.()}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){if(!e)return;const t=this.beans.focusSvc,n=this.findPositionToFocus(e);if(!n){t.focusHeaderPosition({headerPosition:{headerRowIndex:getFocusHeaderRowCount(this.beans)-1,column:e.column}});return}if(e.rowIndex!==n.rowIndex||e.rowPinned!=n.rowPinned){t.setFocusedCell({...n,preventScrollOnBrowserFocus:!0,forceBrowserFocus:!0});return}t.doesRowOrCellHaveBrowserFocus()||this.updateCellFocus(_addGridCommonParams(this.gos,{...n,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))}findPositionToFocus(e){const{pagination:t,pageBounds:n}=this.beans;let o=e;for(o.rowPinned==null&&t&&n&&!t.isRowInPage(o.rowIndex)&&(o={rowPinned:null,rowIndex:n.getFirstRow()});o;){if(o.rowPinned==null&&n)if(o.rowIndex<n.getFirstRow()){if(o=_getRowAbove(this.beans,{rowPinned:null,rowIndex:0}),!o)return null}else o.rowIndex>n.getLastRow()&&(o={rowPinned:null,rowIndex:n.getLastRow()});const u=this.getRowByPosition(o);if(u?.isAlive())return{...u.getRowPosition(),column:e.column};o=_getRowAbove(this.beans,o)}return null}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),n=t.length;for(let o=0;o<n;o++){const u=t[o].getAllCellCtrls(),d=u.length;for(let f=0;f<d;f++)e.push(u[f])}return e}getAllRowCtrls(){const{spannedRowRenderer:e}=this.beans,t=this.getStickyTopRowCtrls(),n=this.getStickyBottomRowCtrls();return[...this.topRowCtrls,...this.bottomRowCtrls,...t,...n,...e?.getCtrls("top")??[],...e?.getCtrls("bottom")??[],...e?.getCtrls("center")??[],...Object.values(this.rowCtrlsByRowIndex)]}addRenderedRowListener(e,t,n){const o=this.rowCtrlsByRowIndex[t];o&&o.addEventListener(e,n)}refreshCells({rowNodes:e,columns:t,force:n,suppressFlash:o}={}){const u={force:n,newData:!1,suppressFlash:o};for(const d of this.getCellCtrls(e,t))d.refreshOrDestroyCell(u);this.refreshFullWidth(e)}refreshRows(e={}){for(const t of this.getRowCtrls(e.rowNodes))t.refreshRow(e);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=!1;for(const n of this.getRowCtrls(e)){if(!n.isFullWidth())continue;n.refreshFullWidth()||(t=!0,this.redrawRow(n.rowNode,!0))}t&&this.dispatchDisplayedRowsChanged(!1)}getRowCtrls(e){const t=mapRowNodes(e),n=this.getAllRowCtrls();return!e||!t?n:n.filter(o=>{const u=o.rowNode;return isRowInMap(u,t)})}getCellCtrls(e,t){let n;_exists(t)&&(n={},t.forEach(u=>{const d=this.colModel.getCol(u);_exists(d)&&(n[d.getId()]=!0)}));const o=[];for(const u of this.getRowCtrls(e))for(const d of u.getAllCellCtrls()){const f=d.column.getId();n&&!n[f]||o.push(d)}return o}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(e=!1){const t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t,e),this.stickyRowFeature?.destroyStickyCtrls()}getRowsToRecycle(){const e=[];for(const n of Object.keys(this.rowCtrlsByRowIndex))this.rowCtrlsByRowIndex[n].rowNode.id==null&&e.push(n);this.removeRowCtrls(e);const t={};for(const n of Object.values(this.rowCtrlsByRowIndex)){const o=n.rowNode;t[o.id]=n}return this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){for(const n of e){const o=this.rowCtrlsByRowIndex[n];o&&(o.destroyFirstPass(t),o.destroySecondPass()),delete this.rowCtrlsByRowIndex[n]}}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){const{focusSvc:t,animationFrameSvc:n}=this.beans,{afterScroll:o}=e;let u;const d=this.stickyRowFeature;d&&(u=t?.getFocusCellToUseAfterRefresh()||void 0);const f=this.firstRenderedRow,g=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let v=!1;if(d){v=d.checkStickyRows();const S=d.extraTopHeight+d.extraBottomHeight;S&&this.updateContainerHeights(S)}const w=this.firstRenderedRow!==f||this.lastRenderedRow!==g;if(!(o&&!v&&!w)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,o),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(o&&!v),u!=null)){const S=t?.getFocusCellToUseAfterRefresh();u!=null&&S==null&&(n?.flushAllFrames(),this.restoreFocusedCell(u))}}removeRowCompsNotToDraw(e,t){const n={};for(const d of e)n[d]=!0;const u=Object.keys(this.rowCtrlsByRowIndex).filter(d=>!n[d]);this.removeRowCtrls(u,t)}calculateIndexesToDraw(e){const t=[];for(let f=this.firstRenderedRow;f<=this.lastRenderedRow;f++)t.push(f);const n=this.beans.pagination,o=this.beans.focusSvc?.getFocusedCell()?.rowIndex;o!=null&&(o<this.firstRenderedRow||o>this.lastRenderedRow)&&(!n||n.isRowInPage(o))&&o<this.rowModel.getRowCount()&&t.push(o);const u=f=>{const g=f.rowNode.rowIndex;g==null||g===o||(g<this.firstRenderedRow||g>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(f)&&t.push(g)};for(const f of Object.values(this.rowCtrlsByRowIndex))u(f);if(e)for(const f of Object.values(e))u(f);t.sort((f,g)=>f-g);const d=[];for(let f=0;f<t.length;f++){const g=t[f],v=this.rowModel.getRow(g);v&&!v.sticky&&d.push(g)}return d}recycleRows(e,t=!1,n=!1){const o=this.calculateIndexesToDraw(e);(this.printLayout||n)&&(t=!1),this.removeRowCompsNotToDraw(o,!t);for(const u of o)this.createOrUpdateRowCtrl(u,e,t,n);if(e){const{animationFrameSvc:u}=this.beans;u?.active&&n&&!this.printLayout?u.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)}this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){this.eventSvc.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){const{visibleCols:e}=this.beans,t=e.isPinningLeft(),n=e.isPinningRight();(this.pinningLeft!==t||n!==this.pinningRight)&&(this.pinningLeft=t,this.pinningRight=n,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];for(const t of this.getFullWidthRowCtrls()){const n=t.rowNode.rowIndex;e.push(n.toString())}this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=mapRowNodes(e);return this.getAllRowCtrls().filter(n=>{if(!n.isFullWidth())return!1;const o=n.rowNode;return!(t!=null&&!isRowInMap(o,t))})}createOrUpdateRowCtrl(e,t,n,o){let u,d=this.rowCtrlsByRowIndex[e];if(d||(u=this.rowModel.getRow(e),_exists(u)&&_exists(t)&&t[u.id]&&u.alreadyRendered&&(d=t[u.id],t[u.id]=null)),!d)if(u||(u=this.rowModel.getRow(e)),_exists(u))d=this.createRowCon(u,n,o);else return;u&&(u.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=d}destroyRowCtrls(e,t){const n=[];if(e){for(const o of Object.values(e))if(o){if(this.cachedRowCtrls&&o.isCacheable()){this.cachedRowCtrls.addRow(o);continue}if(o.destroyFirstPass(!t),t){const u=o.instanceId;this.zombieRowCtrls[u]=o,n.push(()=>{o.destroySecondPass(),delete this.zombieRowCtrls[u]})}else o.destroySecondPass()}}t&&(n.push(()=>{this.isAlive()&&(this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged())}),window.setTimeout(()=>{for(const o of n)o()},ROW_ANIMATION_TIMEOUT))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){const e=this.getRowBuffer(),t=_getRowHeightAsNumber(this.beans);return e*t}workOutFirstAndLastRowsToRender(){const{rowContainerHeight:e,pageBounds:t,rowModel:n}=this;e.updateOffset();let o,u;if(!n.isRowsToRender())o=0,u=-1;else if(this.printLayout)this.beans.environment.refreshRowHeightVariable(),o=t.getFirstRow(),u=t.getLastRow();else{const S=this.getRowBufferInPixels(),R=this.ctrlsSvc.getScrollFeature(),_=this.gos.get("suppressRowVirtualisation");let F=!1,M,I;do{const $=t.getPixelOffset(),{pageFirstPixel:z,pageLastPixel:j}=t.getCurrentPagePixelRange(),J=e.divStretchOffset,ie=R.getVScrollPosition(),se=ie.top,fe=ie.bottom;_?(M=z+J,I=j+J):(M=Math.max(se+$-S,z)+J,I=Math.min(fe+$+S,j)+J),this.firstVisibleVPixel=Math.max(se+$,z)+J,this.lastVisibleVPixel=Math.min(fe+$,j)+J,F=this.ensureAllRowsInRangeHaveHeightsCalculated(M,I)}while(F);let N=n.getRowIndexAtPixel(M),B=n.getRowIndexAtPixel(I);const H=t.getFirstRow(),U=t.getLastRow();N<H&&(N=H),B>U&&(B=U),o=N,u=B}const d=_isDomLayout(this.gos,"normal"),f=this.gos.get("suppressMaxRenderedRowRestriction"),g=Math.max(this.getRowBuffer(),500);d&&!f&&u-o>g&&(u=o+g);const v=o!==this.firstRenderedRow,w=u!==this.lastRenderedRow;(v||w)&&(this.firstRenderedRow=o,this.lastRenderedRow=u,this.eventSvc.dispatchEvent({type:"viewportChanged",firstRow:o,lastRow:u}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,_requestAnimationFrame(this.beans,()=>{this.beans.eventSvc.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){const n=this.pinnedRowModel?.ensureRowHeightsValid(),o=this.stickyRowFeature?.ensureRowHeightsValid(),{pageBounds:u,rowModel:d}=this,f=d.ensureRowHeightsValid(e,t,u.getFirstRow(),u.getLastRow());return(f||o)&&this.eventSvc.dispatchEvent({type:"recalculateRowBounds"}),o||f||n?(this.updateContainerHeights(),!0):!1}doNotUnVirtualiseRow(e){const o=e.rowNode,u=this.focusSvc.isRowFocused(o.rowIndex,o.rowPinned),d=this.editSvc?.isEditing(e),f=o.detail;return u||d||f?!!this.isRowPresent(o):!1}isRowPresent(e){return this.rowModel.isRowPresent(e)?this.beans.pagination?.isRowInPage(e.rowIndex)??!0:!1}createRowCon(e,t,n){const o=this.cachedRowCtrls?.getRow(e)??null;if(o)return o;const u=n&&!this.printLayout&&!!this.beans.animationFrameSvc?.active;return new RowCtrl(e,this.beans,t,u,this.printLayout)}getRenderedNodes(){const e=Object.values(this.rowCtrlsByRowIndex).map(o=>o.rowNode),t=this.getStickyTopRowCtrls().map(o=>o.rowNode),n=this.getStickyBottomRowCtrls().map(o=>o.rowNode);return[...t,...e,...n]}getRowByPosition(e){let t;const{rowIndex:n}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[n];break;case"bottom":t=this.bottomRowCtrls[n];break;default:t=this.rowCtrlsByRowIndex[n],t||(t=this.getStickyTopRowCtrls().find(o=>o.rowNode.rowIndex===n)||null,t||(t=this.getStickyBottomRowCtrls().find(o=>o.rowNode.rowIndex===n)||null));break}return t}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;const o=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!o}},RowCtrlCache=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.rowNode.id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if(e?.id==null)return null;const t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.rowNode!=e?null:t):null}has(e){return this.entriesMap[e.id]!=null}removeRow(e){const t=e.id,n=this.entriesMap[t];delete this.entriesMap[t],_removeFromArray(this.entriesList,n)}removeFromCache(e){const t=e.rowNode.id;delete this.entriesMap[t],_removeFromArray(this.entriesList,e)}getEntries(){return this.entriesList}};function mapRowNodes(e){if(!e)return;const t={top:{},bottom:{},normal:{}};for(const n of e){const o=n.id;switch(n.rowPinned){case"top":t.top[o]=n;break;case"bottom":t.bottom[o]=n;break;default:t.normal[o]=n;break}}return t}function isRowInMap(e,t){const n=e.id;switch(e.rowPinned){case"top":return t.top[n]!=null;case"bottom":return t.bottom[n]!=null;default:return t.normal[n]!=null}}var RowNodeSorter=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowNodeSorter",this.accentedSort=!1,this.primaryColumnsSortGroups=!1,this.pivotActive=!1}postConstruct(){this.firstLeaf=_isClientSideRowModel(this.gos)?_csrmFirstLeaf:defaultGetLeaf,this.addManagedPropertyListeners(["accentedSort","autoGroupColumnDef","treeData"],this.updateOptions.bind(this));const e=this.updatePivotModeState.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,columnPivotChanged:e}),this.updateOptions(),e()}updateOptions(){this.accentedSort=!!this.gos.get("accentedSort"),this.primaryColumnsSortGroups=_isColumnsSortingCoupledToGroup(this.gos)}updatePivotModeState(){this.pivotActive=this.beans.colModel.isPivotActive()}doFullSortInPlace(e,t){return e.sort((n,o)=>this.compareRowNodes(t,n,o))}compareRowNodes(e,t,n){if(t===n)return 0;const o=this.accentedSort;for(let u=0,d=e.length;u<d;++u){const f=e[u],g=f.sort==="desc";let v=this.getValue(t,f.column),w=this.getValue(n,f.column),S;const R=this.getComparator(f,t);if(R?S=R(v,w,t,n,g):(f.type==="absolute"&&(v=absoluteValueTransformer(v),w=absoluteValueTransformer(w)),S=_defaultComparator(v,w,o)),S)return f.sort==="asc"?S:-S}return 0}getComparator(e,t){const n=e.column.getColDef(),o=this.getComparatorFromColDef(n,e);if(o)return o;if(!n.showRowGroup)return;const u=!t.group&&n.field;if(!u)return;const d=this.beans.colModel.getColDefCol(u);if(d)return this.getComparatorFromColDef(d.getColDef(),e)}getComparatorFromColDef(e,t){const n=e.comparator;if(n!=null)return typeof n=="object"?n[_normalizeSortType(t.type)]:n}getValue(e,t){const n=this.beans;if(this.primaryColumnsSortGroups){if(e.rowGroupColumn===t)return this.getGroupDataValue(e,t);if(e.group&&t.getColDef().showRowGroup)return}const o=n.valueSvc.getValue(t,e,"data");if(t.isAllowFormula()){const u=n.formula;if(u?.isFormula(o))return u.resolveValue(t,e)}return o}getGroupDataValue(e,t){if(_isGroupUseEntireRow(this.gos,this.pivotActive)){const o=this.firstLeaf(e);return o&&this.beans.valueSvc.getValue(t,o,"data")}const n=this.beans.showRowGroupCols?.getShowRowGroupCol(t.getId());return n?e.groupData?.[n.getId()]:void 0}},defaultGetLeaf=e=>{if(e.data)return e;let t=e.childrenAfterGroup;for(;t?.length;){const n=t[0];if(n.data)return n;t=n.childrenAfterGroup}},absoluteValueTransformer=e=>{if(!e)return e;if(typeof e=="bigint")return e<0n?-e:e;const t=Number(e);return isNaN(t)?e:Math.abs(t)};function onSortChanged(e){e.sortSvc?.onSortChanged("api")}var makeIconParams=(e,t)=>({tag:"span",ref:`eSort${e}`,cls:`ag-sort-indicator-icon ag-sort-${t} ag-hidden`,attrs:{"aria-hidden":"true"}}),SortIndicatorElement={tag:"span",cls:"ag-sort-indicator-container",children:[makeIconParams("Order","order"),makeIconParams("Asc","ascending-icon"),makeIconParams("Desc","descending-icon"),makeIconParams("Mixed","mixed-icon"),makeIconParams("AbsoluteAsc","absolute-ascending-icon"),makeIconParams("AbsoluteDesc","absolute-descending-icon"),makeIconParams("None","none-icon")]},SortIndicatorComp=class extends Component{constructor(e){super(),this.eSortOrder=RefPlaceholder,this.eSortAsc=RefPlaceholder,this.eSortDesc=RefPlaceholder,this.eSortMixed=RefPlaceholder,this.eSortNone=RefPlaceholder,this.eSortAbsoluteAsc=RefPlaceholder,this.eSortAbsoluteDesc=RefPlaceholder,e||this.setTemplate(SortIndicatorElement)}attachCustomElements(e,t,n,o,u,d,f){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=n,this.eSortMixed=o,this.eSortNone=u,this.eSortAbsoluteAsc=d,this.eSortAbsoluteDesc=f}setupSort(e,t=!1){if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!e.isSortable()&&!e.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e),this.addInIcon("sortAbsoluteAscending",this.eSortAbsoluteAsc,e),this.addInIcon("sortAbsoluteDescending",this.eSortAbsoluteDesc,e);const n=this.updateIcons.bind(this),o=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",n),this.addManagedEventListeners({newColumnsLoaded:n,sortChanged:o,columnRowGroupChanged:o}),this.onSortChanged()}addInIcon(e,t,n){if(t==null)return;const o=_createIconNoSpan(e,this.beans,n);o&&t.appendChild(o)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const{eSortAsc:e,eSortDesc:t,eSortAbsoluteAsc:n,eSortAbsoluteDesc:o,eSortNone:u,column:d,gos:f,beans:g}=this,{isDefaultSortAllowed:v,isAbsoluteSortAllowed:w,isAbsoluteSort:S,isDefaultSort:R,isAscending:_,isDescending:F,direction:M}=_getDisplaySortForColumn(d,g);if(e&&_setDisplayed(e,_&&R&&v,{skipAriaHidden:!0}),t&&_setDisplayed(t,F&&R&&v,{skipAriaHidden:!0}),u){const I=!d.getColDef().unSortIcon&&!f.get("unSortIcon");_setDisplayed(u,!I&&!M,{skipAriaHidden:!0})}n&&_setDisplayed(n,_&&S&&w,{skipAriaHidden:!0}),o&&_setDisplayed(o,F&&S&&w,{skipAriaHidden:!0})}setupMultiSortIndicator(){const{eSortMixed:e,column:t,gos:n}=this;this.addInIcon("sortUnSort",e,t);const o=t.getColDef().showRowGroup;_isColumnsSortingCoupledToGroup(n)&&o&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){const{eSortMixed:e,beans:t,column:n}=this;if(e){const o=t.sortSvc.getDisplaySortForColumn(n)?.direction==="mixed";_setDisplayed(e,o,{skipAriaHidden:!0})}}updateSortOrder(){const{eSortOrder:e,column:t,beans:{sortSvc:n}}=this;if(!e)return;const o=n.getColumnsWithSortingOrdered(),u=n.getDisplaySortIndexForColumn(t)??-1,d=o.some(g=>n.getDisplaySortIndexForColumn(g)??!1),f=u>=0&&d;_setDisplayed(e,f,{skipAriaHidden:!0}),u>=0?e.textContent=(u+1).toString():_clearElement(e)}},SortIndicatorSelector={selector:"AG-SORT-INDICATOR",component:SortIndicatorComp},SortService=class extends BeanStub{constructor(){super(...arguments),this.beanName="sortSvc"}progressSort(e,t,n){const o=this.getNextSortDirection(e);this.setSortForColumn(e,o,t,n)}progressSortFromEvent(e,t){const o=this.gos.get("multiSortKey")==="ctrl"?t.ctrlKey||t.metaKey:t.shiftKey;this.progressSort(e,o,"uiColumnSorted")}setSortForColumn(e,t,n,o){const{gos:u,showRowGroupCols:d}=this.beans,f=_isColumnsSortingCoupledToGroup(u);let g=[e];if(f&&e.getColDef().showRowGroup){const R=d?.getSourceColumnsForGroupColumn?.(e)?.filter(_=>_.isSortable());R&&(g=[e,...R])}for(const S of g)this.setColSort(S,t,o);const v=(n||u.get("alwaysMultiSort"))&&!u.get("suppressMultiSort"),w=[];if(!v){const S=this.clearSortBarTheseColumns(g,o);w.push(...S)}this.updateSortIndex(e),w.push(...g),this.dispatchSortChangedEvents(o,w)}updateSortIndex(e){const{gos:t,colModel:n,showRowGroupCols:o}=this.beans,u=_isColumnsSortingCoupledToGroup(t),d=o?.getShowRowGroupCol(e.getId()),f=u&&d||e,g=this.getColumnsWithSortingOrdered();n.forAllCols(S=>this.setColSortIndex(S,null));const v=g.filter(S=>u&&S.getColDef().showRowGroup?!1:S!==f);(f.getSortDef()?[...v,f]:v).forEach((S,R)=>this.setColSortIndex(S,R))}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){let e=!1;return this.beans.colModel.forAllCols(t=>{if(t.getSortDef())return e=!0,!0}),e}dispatchSortChangedEvents(e,t){const n={type:"sortChanged",source:e};t&&(n.columns=t),this.eventSvc.dispatchEvent(n)}clearSortBarTheseColumns(e,t){const n=[];return this.beans.colModel.forAllCols(o=>{e.includes(o)||(o.getSortDef()&&n.push(o),this.setColSort(o,void 0,t))}),n}getNextSortDirection(e){const t=e.getSortingOrder(),n=e.getSortDef();let u=t.findIndex(d=>_areSortDefsEqual(d,n))+1;return u>=t.length&&(u=0),_getSortDefFromInput(t[u])}getIndexedSortMap(){const{gos:e,colModel:t,showRowGroupCols:n,rowGroupColsSvc:o}=this.beans;let u=[];if(t.forAllCols(w=>{w.getSortDef()&&u.push(w)}),t.isPivotMode()){const w=_isColumnsSortingCoupledToGroup(e);u=u.filter(S=>{const R=!!S.getAggFunc(),_=!S.isPrimary(),F=w?n?.getShowRowGroupCol(S.getId()):S.getColDef().showRowGroup;return R||_||F})}const d=o?.columns.filter(w=>!!w.getSortDef())??[],f={};u.forEach((w,S)=>f[w.getId()]=S),u.sort((w,S)=>{const R=w.getSortIndex(),_=S.getSortIndex();if(R!=null&&_!=null)return R-_;if(R==null&&_==null){const F=f[w.getId()],M=f[S.getId()];return F>M?1:-1}else return _==null?-1:1});const g=_isColumnsSortingCoupledToGroup(e)&&!!d.length;g&&(u=[...new Set(u.map(w=>n?.getShowRowGroupCol(w.getId())??w))]);const v=new Map;if(u.forEach((w,S)=>v.set(w,S)),g)for(const w of d){const S=n.getShowRowGroupCol(w.getId());v.set(w,v.get(S))}return v}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([,e],[,t])=>e-t).map(([e])=>e)}collectSortItems(e=!1){const t=[],n=this.getColumnsWithSortingOrdered();for(const o of n){const u=o.getSortDef()?.direction;if(!u)continue;const d=_normalizeSortType(o.getSortDef()?.type),f={sort:u,type:d};e?f.colId=o.getId():f.column=o,t.push(f)}return t}getSortModel(){return this.collectSortItems(!0)}getSortOptions(){return this.collectSortItems()}canColumnDisplayMixedSort(e){const t=_isColumnsSortingCoupledToGroup(this.gos),n=!!e.getColDef().showRowGroup;return t&&n}getDisplaySortForColumn(e){const t=this.beans.showRowGroupCols?.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!t?.length)return e.getSortDef();const o=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...t]:t,u=o[0].getSortDef();return o.every(f=>_areSortDefsEqual(f.getSortDef(),u))?u:{type:_normalizeSortType(e.getSortDef()?.type),direction:"mixed"}}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}setupHeader(e,t){const n=()=>{const{type:o,direction:u}=_getSortDefFromInput(t.getSortDef());if(e.toggleCss("ag-header-cell-sorted-asc",u==="asc"),e.toggleCss("ag-header-cell-sorted-desc",u==="desc"),e.toggleCss("ag-header-cell-sorted-abs-asc",o==="absolute"&&u==="asc"),e.toggleCss("ag-header-cell-sorted-abs-desc",o==="absolute"&&u==="desc"),e.toggleCss("ag-header-cell-sorted-none",!u),t.getColDef().showRowGroup){const g=!this.beans.showRowGroupCols?.getSourceColumnsForGroupColumn(t)?.every(v=>u==v.getSortDef()?.direction);e.toggleCss("ag-header-cell-sorted-mixed",g)}};e.addManagedEventListeners({sortChanged:n,columnPinned:n,columnRowGroupChanged:n,displayedColumnsChanged:n})}initCol(e){const{sortIndex:t,initialSortIndex:n}=e.colDef,o=_getSortDefFromColDef(e.colDef);o&&e.setSortDef(o,!0),t!==void 0?t!==null&&(e.sortIndex=t):n!==null&&(e.sortIndex=n)}updateColSort(e,t,n){t!==void 0&&this.setColSort(e,_getSortDefFromInput(t),n)}setColSort(e,t,n){_areSortDefsEqual(e.getSortDef(),t)||(e.setSortDef(_getSortDefFromInput(t),t===void 0),e.dispatchColEvent("sortChanged",n)),e.dispatchStateUpdatedEvent("sort")}setColSortIndex(e,t){e.sortIndex=t,e.dispatchStateUpdatedEvent("sortIndex")}createSortIndicator(e){return new SortIndicatorComp(e)}getSortIndicatorSelector(){return SortIndicatorSelector}},SortModule={moduleName:"Sort",version:VERSION,beans:[SortService,RowNodeSorter],apiFunctions:{onSortChanged},userComponents:{agSortIndicator:SortIndicatorComp},icons:{sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",sortAbsoluteAscending:"aasc",sortAbsoluteDescending:"adesc"}},SyncService=class extends BeanStub{constructor(){super(...arguments),this.beanName="syncSvc",this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.beans.ctrlsSvc.whenReady(this,()=>{const e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){const{colModel:t,rowModel:n}=this.beans;t.setColumnDefs(e??[],"gridInitializing"),n.start()}gridReady(){const{eventSvc:e,gos:t}=this;e.dispatchEvent({type:"gridReady"}),_logIfDebug(t,`initialised successfully, enterprise = ${t.isModuleRegistered("EnterpriseCore")}`)}setColumnDefs(e){const t=this.gos.get("columnDefs");if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.beans.colModel.setColumnDefs(t,_convertColumnEventSourceType(e.source))}}},SOURCE_PASTE="paste",ChangeDetectionService=class extends BeanStub{constructor(){super(...arguments),this.beanName="changeDetectionSvc",this.clientSideRowModel=null}postConstruct(){const{gos:e,rowModel:t}=this.beans;_isClientSideRowModel(e)&&(this.clientSideRowModel=t),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){const{gos:t,rowRenderer:n}=this.beans;if(e.source===SOURCE_PASTE||t.get("suppressChangeDetection"))return;const o=e.node,u=[o],d=this.clientSideRowModel,f=d?.rootNode;if(f&&!o.isRowPinned()){const g=t.get("aggregateOnlyChangedColumns"),v=new ChangedPath(g,f);v.addParentNode(o.parent,[e.column]),d.doAggregate(v),v.forEachChangedNodeDepthFirst(w=>{u.push(w),w.sibling&&u.push(w.sibling)})}n.refreshCells({rowNodes:u})}},ExpressionService=class extends BeanStub{constructor(){super(...arguments),this.beanName="expressionSvc",this.cache={}}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);_error(15,{expression:e})}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(n){return _error(16,{expression:e,params:t,e:n}),null}}createExpressionFunction(e){const t=this.cache;if(t[e])return t[e];const n=this.createFunctionBody(e),o=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",n);return t[e]=o,o}createFunctionBody(e){return e.includes("return")?e:"return "+e+";"}},ValueCache=class extends BeanStub{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){const e=this.gos;this.active=e.get("valueCache"),this.neverExpires=e.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,n){if(this.active){const o=this.cacheVersion;e.__cacheVersion!==o&&(e.__cacheVersion=o,e.__cacheData={}),e.__cacheData[t]=n}}getValue(e,t){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[t]}},ValueCacheModule={moduleName:"ValueCache",version:VERSION,beans:[ValueCache],apiFunctions:{expireValueCache}},ExpressionModule={moduleName:"Expression",version:VERSION,beans:[ExpressionService]},ChangeDetectionModule={moduleName:"ChangeDetection",version:VERSION,beans:[ChangeDetectionService]},CellApiModule={moduleName:"CellApi",version:VERSION,apiFunctions:{getCellValue}},ValueService=class extends BeanStub{constructor(){super(...arguments),this.beanName="valueSvc",this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionSvc=e.expressionSvc,this.colModel=e.colModel,this.valueCache=e.valueCache,this.dataTypeSvc=e.dataTypeSvc,this.editSvc=e.editSvc,this.formulaDataSvc=e.formulaDataSvc}postConstruct(){this.initialised||this.init()}init(){const{gos:e,valueCache:t}=this;this.executeValueGetter=t?this.executeValueGetterWithValueCache.bind(this):this.executeValueGetterWithoutValueCache.bind(this),this.isSsrm=_isServerSideRowModel(e),this.cellExpressions=e.get("enableCellExpressions"),this.isTreeData=e.get("treeData"),this.initialised=!0;const n=o=>this.callColumnCellValueChangedHandler(o);this.eventSvc.addListener("cellValueChanged",n,!0),this.addDestroyFunc(()=>this.eventSvc.removeListener("cellValueChanged",n,!0)),this.addManagedPropertyListener("treeData",o=>this.isTreeData=o.currentValue)}getValueForDisplay(e){const t=this.beans,n=e.column,o=e.node,u=t.showRowGroupColValueSvc,d=!n&&o.group,f=n?.colDef.showRowGroup,g=!this.isTreeData||o.footer;if(u&&g&&(d||f)){const _=u.getGroupValue(o,n,this.displayIgnoresAggData(o));return _==null?{value:null,valueFormatted:null}:{value:_.value,valueFormatted:e.includeValueFormatted?u.formatAndPrefixGroupColValue(_,n,e.exporting):null}}if(!n)return{value:o.key,valueFormatted:null};let v=this.getValue(n,o,e.from,this.displayIgnoresAggData(o)),w=v;const S=t.formula;n.isAllowFormula()&&S?.isFormula(v)&&(e.useRawFormula?(v=S.normaliseFormula(v,!0),w=S.resolveValue(n,o)):(v=S.resolveValue(n,o),w=v));const R=e.includeValueFormatted&&!(e.exporting&&n.colDef.useValueFormatterForExport===!1);return{value:v,valueFormatted:R?this.formatValue(n,o,w):null}}getValue(e,t,n,o=!1){if(this.initialised||this.init(),!t)return;const u=e.getColDef();if(!t.group){const v=u.pivotValueColumn;v&&(e=v)}const d=this.editSvc?.getPendingEditValue(t,e,n);if(d!==void 0)return d;const f=u.showRowGroup;if(typeof f=="string"&&(this.beans.rowGroupColsSvc?.getColumnIndex(f)??-1)>t.level)return null;let g=this.resolveValue(e,t,o);if(this.cellExpressions&&_isExpressionString(g)){const v=g.substring(1);g=this.executeValueGetter(v,t.data,e,t)}return g}getFormulaFromDataSource(e,t){const n=this.formulaDataSvc;if(!n?.hasDataSource()||!e.isAllowFormula())return;const o=n.getFormula({column:e,rowNode:t});return _isExpressionString(o)?o:void 0}displayIgnoresAggData(e){return!e.group||!e.expanded||e.footer||e.leafGroup&&this.colModel.isPivotMode()?!1:!!e.sibling&&!this.gos.get("groupSuppressBlankHeader")}resolveValue(e,t,n){const o=e.getColDef(),u=e.getColId(),d=this.isTreeData,f=this.getFormulaFromDataSource(e,t);if(f!==void 0)return f;const g=!n&&t.aggData&&t.aggData[u]!==void 0;if(d&&g)return t.aggData[u];const v=t.data,w=o.field;if(d&&o.valueGetter)return this.executeValueGetter(o.valueGetter,v,e,t);if(d&&w&&v)return _getValueUsingField(v,w,e.isFieldContainsDots());const S=t.groupData;if(S&&u in S)return t.groupData[u];if(g)return t.aggData[u];const _=o.showRowGroup,F=typeof _!="string"||!t.group,M=this.isSsrm&&n&&!!o.aggFunc,I=this.isSsrm&&t.footer&&t.field&&(_===!0||_===t.field);if(o.valueGetter&&!M)return F?this.executeValueGetter(o.valueGetter,v,e,t):void 0;if(I)return _getValueUsingField(v,t.field,e.isFieldContainsDots());if(w&&v&&!M)return F?_getValueUsingField(v,w,e.isFieldContainsDots()):void 0}parseValue(e,t,n,o){const u=e.getColDef();if(u.allowFormula&&this.beans.formula?.isFormula(n))return n;const d=u.valueParser;if(_exists(d)){const f=_addGridCommonParams(this.gos,{node:t,data:t?.data,oldValue:o,newValue:n,colDef:u,column:e});return typeof d=="function"?d(f):this.expressionSvc?.evaluate(d,f)}return n}getDeleteValue(e,t){return _exists(e.getColDef().valueParser)?this.parseValue(e,t,"",this.getValueForDisplay({column:e,node:t,from:"edit"}).value)??null:null}formatValue(e,t,n,o,u=!0){const{expressionSvc:d}=this.beans;let f=null,g;const v=e.getColDef();if(o?g=o:u&&(g=v.valueFormatter),g){const w=t?t.data:null,S=_addGridCommonParams(this.gos,{value:n,node:t,data:w,colDef:v,column:e});typeof g=="function"?f=g(S):f=d?d.evaluate(g,S):null}else if(v.refData)return v.refData[n]||"";return f==null&&Array.isArray(n)&&(f=n.join(", ")),f}setValue(e,t,n,o){const u=t.getColDef();if(!e.data&&this.canCreateRowNodeData(e,u)&&(e.data={}),!this.isSetValueSupported({column:t,newValue:n,colDef:u}))return!1;const d=this.getValue(t,e,"data"),f=_addGridCommonParams(this.gos,{node:e,data:e.data,oldValue:d,newValue:n,colDef:u,column:t}),g=e.group?u.groupRowValueSetter:void 0;let v=!1,w=!1;if(e.data){const S=this.handleExternalFormulaChange({column:t,eventSource:o,newValue:n,setterParams:f,rowNode:e});if(S!==null)return S;v=this.computeValueChange({column:t,rowNode:e,newValue:n,params:f,rowData:e.data,valueSetter:u.valueSetter,field:u.field})??!0}return g&&(w=g(_addGridCommonParams(this.gos,{node:e,data:e.data,oldValue:d,newValue:n,colDef:u,column:t,eventSource:o,valueChanged:v||n!==d,aggregatedChildren:this.beans.aggStage?.getAggregatedChildren(e,t)??[]}))??!0),!v&&!w?!1:this.finishValueChange(e,t,f,o)}canCreateRowNodeData(e,t){return e.group?!(t.groupRowValueSetter!=null||t.groupRowEditable!=null||t.pivotValueColumn):!0}finishValueChange(e,t,n,o){e.resetQuickFilterAggregateText(),this.valueCache?.onDataChanged();const u=this.getValue(t,e,"data");return this.dispatchCellValueChangedEvent(e,n,u,o),e.pinnedSibling&&this.dispatchCellValueChangedEvent(e.pinnedSibling,n,u,o),!0}isSetValueSupported(e){const{column:t,newValue:n,colDef:o}=e,{field:u,valueSetter:d}=o,f=this.beans.formula,g=t.isAllowFormula()&&f?.isFormula(n),v=!!this.formulaDataSvc?.hasDataSource();return _missing(u)&&_missing(d)&&!(v&&g)?(_warn(17),!1):this.dataTypeSvc&&!this.dataTypeSvc.checkType(t,n)?(_warn(135),!1):!0}handleExternalFormulaChange(e){const{column:t,rowNode:n,newValue:o,eventSource:u,setterParams:d}=e,f=this.beans.formula,g=this.formulaDataSvc;if(!g?.hasDataSource()||!t.isAllowFormula())return null;const v=f?.isFormula(o),w=g.getFormula({column:t,rowNode:n});if(v){if(!(w!==o))return!1;g.setFormula({column:t,rowNode:n,formula:o});const R=f?.resolveValue(t,n),_=t.getColDef();if(_exists(_.valueSetter)||!_missing(_.field)){const F={...d,newValue:R};this.computeValueChange({column:t,rowNode:n,newValue:R,params:F,rowData:n.data,valueSetter:_.valueSetter,field:_.field})}return this.finishValueChange(n,t,d,u)}return w!==void 0&&g.setFormula({column:t,rowNode:n,formula:void 0}),null}computeValueChange(e){const{valueSetter:t,params:n,rowData:o,field:u,column:d,newValue:f}=e;return _exists(t)?typeof t=="function"?t(n):this.expressionSvc?.evaluate(t,n):!!o&&this.setValueUsingField(o,u,f,d.isFieldContainsDots())}dispatchCellValueChangedEvent(e,t,n,o){this.eventSvc.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:t.column,colDef:t.colDef,data:e.data,node:e,oldValue:t.oldValue,newValue:n,value:n,source:o})}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;typeof t=="function"&&this.beans.frameworkOverrides.wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,n,o){if(!t)return!1;let u=!1;if(!o)u=e[t]===n,u||(e[t]=n);else{const d=t.split(".");let f=e;for(;d.length>0&&f;){const g=d.shift();d.length===0?(u=f[g]===n,u||(f[g]=n)):f=f[g]}}return!u}executeValueGetterWithValueCache(e,t,n,o){const u=n.getColId(),d=this.valueCache.getValue(o,u);if(d!==void 0)return d;const f=this.executeValueGetterWithoutValueCache(e,t,n,o);return this.valueCache.setValue(o,u,f),f}executeValueGetterWithoutValueCache(e,t,n,o){const u=_addGridCommonParams(this.gos,{data:t,node:o,column:n,colDef:n.getColDef(),getValue:f=>this.getValueCallback(o,f)});let d;return typeof e=="function"?d=e(u):d=this.expressionSvc?.evaluate(e,u),d}getValueCallback(e,t){const n=this.colModel.getColDefCol(t);return n?this.getValue(n,e,"data"):null}getKeyForNode(e,t){const n=this.getValue(e,t,"data"),o=e.getColDef().keyCreator;let u=n;if(o){const d=_addGridCommonParams(this.gos,{value:n,colDef:e.getColDef(),column:e,node:t,data:t.data});u=o(d)}return typeof u=="string"||u==null||(u=String(u),u==="[object Object]"&&_warn(121)),u}},CommunityCoreModule={moduleName:"CommunityCore",version:VERSION,beans:[GridDestroyService,ApiFunctionService,Registry,UserComponentFactory,RowContainerHeightService,VisibleColsService,EventService,GridOptionsService,ColumnModel,PageBoundsService,PageBoundsListener,RowRenderer,ValueService,FocusService,Environment,ScrollVisibleService,CtrlsService,SyncService,ColumnNameService,ColumnViewportService,IconService],icons:{selectOpen:"small-down",smallDown:"small-down",colorPicker:"color-picker",smallUp:"small-up",checkboxChecked:"small-up",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off",smallLeft:"small-left",smallRight:"small-right"},apiFunctions:{getGridId,destroy,isDestroyed,getGridOption,setGridOption,updateGridOptions,isModuleRegistered},dependsOn:[DataTypeModule,ColumnMoveModule,ColumnResizeModule,SortModule,ColumnHeaderCompModule,ColumnGroupModule,ColumnGroupHeaderCompModule,OverlayModule,ChangeDetectionModule,AnimationFrameModule,KeyboardNavigationModule,PinnedColumnModule,AriaModule,TouchModule,CellRendererFunctionModule,ColumnFlexModule,ExpressionModule,SkeletonCellRendererModule,ColumnDelayRenderModule]};function _fuzzySuggestions(e){const{inputValue:t,allSuggestions:n,hideIrrelevant:o,filterByPercentageOfBestMatch:u}=e;let d=(n??[]).map((v,w)=>({value:v,relevance:_getLevenshteinSimilarityDistance(t,v),idx:w}));if(d.sort((v,w)=>v.relevance-w.relevance),o&&(d=d.filter(v=>v.relevance<Math.max(v.value.length,t.length))),d.length>0&&u&&u>0){const w=d[0].relevance*u;d=d.filter(S=>w-S.relevance<0)}const f=[],g=[];for(const v of d)f.push(v.value),g.push(v.idx);return{values:f,indices:g}}function _getLevenshteinSimilarityDistance(e,t){const n=e.length,o=t.length;if(o===0)return n||0;let u=e.toLocaleLowerCase(),d=t.toLocaleLowerCase(),f;e.length<t.length&&(f=d,d=u,u=f,f=t,t=e,e=f);let g=new Uint16Array(o+1),v=new Uint16Array(o+1);for(let R=0;R<=o;R++)g[R]=R;let w=0;const S=n/2-10;for(let R=1;R<=n;R++){const _=e[R-1],F=u[R-1];v[0]=R;for(let M=1;M<=o;M++){const I=t[M-1],N=d[M-1];if(F!==N){const B=v[M-1],H=g[M],U=g[M-1];let $=B<H?B:H;U<$&&($=U),v[M]=$+1|0;continue}if(w++,_===I&&w++,R>1&&M>1){const B=e[R-2],H=u[R-2],U=t[M-2],$=d[M-2];H===$&&(w++,B===U&&w++)}R<S&&w++,v[M]=g[M-1]}f=g,g=v,v=f}return g[o]/(w+1)}var ENTERPRISE_MODULE_NAMES={AdvancedFilter:1,AiToolkit:1,AllEnterprise:1,BatchEdit:1,CellSelection:1,Clipboard:1,ColumnMenu:1,ColumnsToolPanel:1,ContextMenu:1,ExcelExport:1,FiltersToolPanel:1,Find:1,GridCharts:1,IntegratedCharts:1,GroupFilter:1,MasterDetail:1,Menu:1,MultiFilter:1,NewFiltersToolPanel:1,Pivot:1,RangeSelection:1,RichSelect:1,RowNumbers:1,RowGrouping:1,RowGroupingPanel:1,ServerSideRowModelApi:1,ServerSideRowModel:1,SetFilter:1,SideBar:1,Sparklines:1,StatusBar:1,TreeData:1,ViewportRowModel:1,Formula:1},ALL_COLUMN_FILTERS=["TextFilter","NumberFilter","BigIntFilter","DateFilter","SetFilter","MultiFilter","GroupFilter","CustomFilter"],RESOLVABLE_MODULE_NAMES={EditCore:["TextEditor","NumberEditor","DateEditor","CheckboxEditor","LargeTextEditor","SelectEditor","RichSelect","CustomEditor"],CheckboxCellRenderer:["AllCommunity"],ClientSideRowModelHierarchy:["RowGrouping","Pivot","TreeData"],ColumnFilter:ALL_COLUMN_FILTERS,ColumnGroupHeaderComp:["AllCommunity"],ColumnGroup:["AllCommunity"],ColumnHeaderComp:["AllCommunity"],ColumnMove:["AllCommunity"],ColumnResize:["AllCommunity"],CommunityCore:["AllCommunity"],CsrmSsrmSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],RowModelSharedApi:["ClientSideRowModelApi","ServerSideRowModelApi"],EnterpriseCore:["AllEnterprise"],FilterCore:[...ALL_COLUMN_FILTERS,"QuickFilter","ExternalFilter","AdvancedFilter"],GroupCellRenderer:["RowGrouping","Pivot","TreeData","MasterDetail","ServerSideRowModel"],KeyboardNavigation:["AllCommunity"],LoadingCellRenderer:["ServerSideRowModel"],MenuCore:["ColumnMenu","ContextMenu"],MenuItem:["ColumnMenu","ContextMenu","MultiFilter","IntegratedCharts","ColumnsToolPanel"],Overlay:["AllCommunity"],PinnedColumn:["AllCommunity"],SharedAggregation:["RowGrouping","Pivot","TreeData","ServerSideRowModel"],SharedDragAndDrop:["AllCommunity"],SharedMasterDetail:["MasterDetail","ServerSideRowModel"],SharedMenu:[...ALL_COLUMN_FILTERS,"ColumnMenu","ContextMenu"],SharedPivot:["Pivot","ServerSideRowModel"],SharedRowGrouping:["RowGrouping","ServerSideRowModel"],SharedRowSelection:["RowSelection","ServerSideRowModel"],SkeletonCellRenderer:["ServerSideRowModel"],Sort:["AllCommunity"],SsrmInfiniteSharedApi:["InfiniteRowModel","ServerSideRowModelApi"],SharedTreeData:["TreeData","ServerSideRowModel"]},MODULES_FOR_ROW_MODELS={InfiniteRowModel:"infinite",ClientSideRowModelApi:"clientSide",ClientSideRowModel:"clientSide",ServerSideRowModelApi:"serverSide",ServerSideRowModel:"serverSide",ViewportRowModel:"viewport"};function resolveModuleNames(e,t){const n=[];for(const o of Array.isArray(e)?e:[e]){const u=RESOLVABLE_MODULE_NAMES[o];if(u)for(const d of u){const f=MODULES_FOR_ROW_MODELS[d];(!f||f===t)&&n.push(d)}else n.push(o)}return n}var NoModulesRegisteredError=()=>`No AG Grid modules are registered! It is recommended to start with all Community features via the AllCommunityModule:
                    
    import { ModuleRegistry, AllCommunityModule } from 'ag-grid-community';
    
    ModuleRegistry.registerModules([ AllCommunityModule ]);
    `,moduleImportMsg=e=>{const t=e.map(o=>`import { ${convertToUserModuleName(o)} } from '${ENTERPRISE_MODULE_NAMES[o]?"ag-grid-enterprise":"ag-grid-community"}';`);return e.some(o=>o==="IntegratedCharts"||o==="Sparklines")&&t.push("import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';"),`import { ModuleRegistry } from 'ag-grid-community'; 
${t.join(` 
`)} 

ModuleRegistry.registerModules([ ${e.map(o=>convertToUserModuleName(o,!0)).join(", ")} ]); 

For more info see: ${baseDocLink}/modules/`};function convertToUserModuleName(e,t=!1){return t&&(e==="IntegratedCharts"||e==="Sparklines")?`${e}Module.with(AgChartsEnterpriseModule)`:`${e}Module`}function umdMissingModule(e,t){const n=t.filter(d=>d==="IntegratedCharts"||d==="Sparklines");let o="";return!globalThis?.agCharts&&n.length>0?o=`Unable to use ${e} as either the ag-charts-community or ag-charts-enterprise script needs to be included alongside ag-grid-enterprise.
`:t.some(d=>ENTERPRISE_MODULE_NAMES[d])&&(o=o+`Unable to use ${e} as that requires the ag-grid-enterprise script to be included.
`),o}function missingRowModelTypeError({moduleName:e,rowModelType:t}){return`To use the ${e}Module you must set the gridOption "rowModelType='${t}'"`}var missingModule=({reasonOrId:e,moduleName:t,gridScoped:n,gridId:o,rowModelType:u,additionalText:d,isUmd:f})=>{const g=resolveModuleNames(t,u),v=typeof e=="string"?e:MISSING_MODULE_REASONS[e];if(f)return umdMissingModule(v,g);const w=g.filter(_=>_==="IntegratedCharts"||_==="Sparklines"),S=w.length>0?`${w.map(_=>convertToUserModuleName(_)).join()} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.`:"";return`${`Unable to use ${v} as ${g.length>1?"one of "+g.map(_=>convertToUserModuleName(_)).join(", "):convertToUserModuleName(g[0])} is not registered${n?" for gridId: "+o:""}. ${S} Check if you have registered the module:
`}
${moduleImportMsg(g)}`+(d?` 

${d}`:"")},missingChartsWithModule=e=>`${e} must be initialised with an AG Charts module. One of 'AgChartsCommunityModule' / 'AgChartsEnterpriseModule'.

import { AgChartsEnterpriseModule } from 'ag-charts-enterprise';
import { ModuleRegistry } from 'ag-grid-community';
import { ${e} } from 'ag-grid-enterprise';
    
ModuleRegistry.registerModules([${e}.with(AgChartsEnterpriseModule)]);
    `,clipboardApiError=e=>`AG Grid: Unable to use the Clipboard API (navigator.clipboard.${e}()). The reason why it could not be used has been logged in the previous line. For this reason the grid has defaulted to using a workaround which doesn't perform as well. Either fix why Clipboard API is blocked, OR stop this message from appearing by setting grid property suppressClipboardApi=true (which will default the grid to using the workaround rather than the API.`,AG_GRID_ERRORS={1:()=>"`rowData` must be an array",2:({nodeId:e})=>`Duplicate node id '${e}' detected from getRowId callback, this could cause issues in your grid.`,3:()=>"Calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.",4:({id:e})=>`Could not find row id=${e}, data item was not found for this id`,5:({data:e})=>["Could not find data item as object was not found.",e," Consider using getRowId to help the Grid find matching row data"],6:()=>"'groupHideOpenParents' only works when specifying specific columns for 'colDef.showRowGroup'",7:()=>"Pivoting is not supported with aligned grids as it may produce different columns in each grid.",8:({key:e})=>`Unknown key for navigation ${e}`,9:({variable:e})=>`No value for ${e?.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e?.defaultValue} will be used and updated when styles load.`,10:({eventType:e})=>`As of v33, the '${e}' event is deprecated. Use the global 'modelUpdated' event to determine when row children have changed.`,11:()=>"No gridOptions provided to createGrid",12:({colKey:e})=>["column ",e," not found"],13:()=>"Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid.",14:({groupPrefix:e})=>`Row IDs cannot start with ${e}, this is a reserved prefix for AG Grid's row grouping feature.`,15:({expression:e})=>["value should be either a string or a function",e],16:({expression:e,params:t,e:n})=>["Processing of the expression failed","Expression = ",e,"Params = ",t,"Exception = ",n],17:()=>"you need either field or valueSetter set on colDef for editing to work",18:()=>"alignedGrids contains an undefined option.",19:()=>"alignedGrids - No api found on the linked grid.",20:()=>`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`,21:()=>"pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.",22:({key:e})=>`${e} is an initial property and cannot be updated.`,23:()=>"The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead.",24:()=>"row height must be a number if not using standard row model",25:({id:e})=>["The getRowId callback must return a string. The ID ",e," is being cast to a string."],26:({fnName:e,preDestroyLink:t})=>`Grid API function ${e}() cannot be called as the grid has been destroyed.
 Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
 To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${t}`,27:({fnName:e,module:t})=>`API function '${e}' not registered to module '${t}'`,28:()=>"setRowCount cannot be used while using row grouping.",29:()=>"tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?",30:({toIndex:e})=>["tried to insert columns in invalid location, toIndex = ",e,"remember that you should not count the moving columns when calculating the new index"],31:()=>"infinite loop in resizeColumnSets",32:()=>"applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state.",33:()=>"stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON.",34:({key:e})=>`the column type '${e}' is a default column type and cannot be overridden.`,35:()=>"Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type.",36:({t:e})=>"colDef.type '"+e+"' does not correspond to defined gridOptions.columnTypes",37:()=>"Changing the column pinning status is not allowed with domLayout='print'",38:({iconName:e})=>`provided icon '${e}' needs to be a string or a function`,39:()=>"Applying column order broke a group where columns should be married together. Applying new order has been discarded.",40:({e,method:t})=>`${e}
${clipboardApiError(t)}`,41:()=>"Browser did not allow document.execCommand('copy'). Ensure 'api.copySelectedRowsToClipboard() is invoked via a user event, i.e. button click, otherwise the browser will prevent it for security reasons.",42:()=>"Browser does not support document.execCommand('copy') for clipboard operations",43:({iconName:e})=>`As of v33, icon '${e}' is deprecated. Use the icon CSS name instead.`,44:()=>'Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.',45:({parentCellDataType:e})=>`The data type definition ${e} does not exist.`,46:()=>'The "baseDataType" property of a data type definition must match that of its parent.',47:({cellDataType:e})=>`Missing data type definition - "${e}"`,48:({property:e})=>`Cell data type is "object" but no Value ${e} has been provided. Please either provide an object data type definition with a Value ${e}, or set "colDef.value${e}"`,49:({methodName:e})=>`Framework component is missing the method ${e}()`,50:({compName:e})=>`Could not find component ${e}, did you forget to configure this component?`,51:()=>"Export cancelled. Export is not allowed as per your configuration.",52:()=>"There is no `window` associated with the current `document`",53:()=>"unknown value type during csv conversion",54:()=>"Could not find document body, it is needed for drag and drop and context menu.",55:()=>"addRowDropZone - A container target needs to be provided",56:()=>"addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.",57:()=>"unable to show popup filter, filter instantiation failed",58:()=>"no values found for select cellEditor",59:()=>"cannot select pinned rows",60:()=>"cannot select node until it has finished loading",61:()=>"since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option.",62:({colId:e})=>`setFilterModel() - no column found for colId: ${e}`,63:({colId:e})=>`setFilterModel() - unable to fully apply model, filtering disabled for colId: ${e}`,64:({colId:e})=>`setFilterModel() - unable to fully apply model, unable to create filter for colId: ${e}`,65:()=>"filter missing setModel method, which is needed for setFilterModel",66:()=>"filter API missing getModel method, which is needed for getFilterModel",67:()=>"Filter is missing isFilterActive() method",68:()=>"Column Filter API methods have been disabled as Advanced Filters are enabled.",69:({guiFromFilter:e})=>`getGui method from filter returned ${e}; it should be a DOM element.`,70:({newFilter:e})=>`Grid option quickFilterText only supports string inputs, received: ${typeof e}`,71:()=>"debounceMs is ignored when apply button is present",72:({keys:e})=>["ignoring FilterOptionDef as it doesn't contain one of ",e],73:()=>"invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'",74:()=>"no filter options for filter",75:()=>"Unknown button type specified",76:({filterModelType:e})=>['Unexpected type of filter "',e,'", it looks like the filter was configured with incorrect Filter Options'],77:()=>"Filter model is missing 'conditions'",78:()=>'Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.',79:()=>'"filterParams.maxNumConditions" must be greater than or equal to zero.',80:()=>'"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.',81:()=>'"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".',82:({param:e})=>`DateFilter ${e} is not a number`,83:()=>"DateFilter minValidYear should be <= maxValidYear",84:()=>"DateFilter minValidDate should be <= maxValidDate",85:()=>"DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored.",86:()=>"DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored.",87:()=>"DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.",88:({index:e})=>`Invalid row index for ensureIndexVisible: ${e}`,89:()=>"A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)",90:()=>"datasource is missing getRows method",91:()=>"Filter is missing method doesFilterPass",92:()=>"AnimationFrameService called but animation frames are off",93:()=>"cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`",94:({paginationPageSizeOption:e,pageSizeSet:t,pageSizesSet:n,pageSizeOptions:o})=>`'paginationPageSize=${e}'${t?"":" (default value)"}, but ${e} is not included in${n?"":" the default"} paginationPageSizeSelector=[${o?.join(", ")}].`,95:({paginationPageSizeOption:e,paginationPageSizeSelector:t})=>`Either set '${t}' to an array that includes ${e} or to 'false' to disable the page size selector.`,96:({id:e,data:t})=>["Duplicate ID",e,"found for pinned row with data",t,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter."],97:({colId:e})=>`cellEditor for column ${e} is missing getGui() method`,98:()=>"popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.",99:()=>"Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.",101:({propertyName:e,componentName:t,agGridDefaults:n,jsComps:o})=>{const u=[],d=[...Object.keys(n??[]).filter(g=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(g)),...Object.keys(o??[]).filter(g=>!!o[g])],f=_fuzzySuggestions({inputValue:t,allSuggestions:d,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return u.push(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.
`),f.length>0&&u.push(`         Did you mean: [${f.slice(0,3)}]?
`),u.push("If using a custom component check it has been registered correctly."),u},102:()=>"selectAll: 'filtered' only works when gridOptions.rowModelType='clientSide'",103:()=>"Invalid selection state. When using client-side row model, the state must conform to `string[]`.",104:({value:e,param:t})=>`Numeric value ${e} passed to ${t} param will be interpreted as ${e} seconds. If this is intentional use "${e}s" to silence this warning.`,105:({e})=>["chart rendering failed",e],106:()=>`Theming API and Legacy Themes are both used in the same page. A Theming API theme has been provided to the 'theme' grid option, but the file (ag-grid.css) is also included and will cause styling issues. Remove ag-grid.css from the page. See the migration guide: ${baseDocLink}/theming-migration/`,107:({key:e,value:t})=>`Invalid value for theme param ${e} - ${t}`,108:({e})=>["chart update failed",e],109:({inputValue:e,allSuggestions:t})=>{const n=_fuzzySuggestions({inputValue:e,allSuggestions:t,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;return[`Could not find '${e}' aggregate function. It was configured as "aggFunc: '${e}'" but it wasn't found in the list of registered aggregations.`,n.length>0?`         Did you mean: [${n.slice(0,3)}]?`:"","If using a custom aggregation function check it has been registered correctly."].join(`
`)},110:()=>"groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup",111:()=>"Invalid selection state. When `groupSelects` is enabled, the state must conform to `IServerSideGroupSelectionState`.",113:()=>"Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values",114:({component:e})=>`Could not find component with name of ${e}. Is it in Vue.components?`,116:()=>"Invalid selection state. The state must conform to `IServerSideSelectionState`.",117:()=>"selectAll must be of boolean type.",118:()=>"Infinite scrolling must be enabled in order to set the row count.",119:()=>"Unable to instantiate filter",120:()=>"MultiFloatingFilterComp expects MultiFilter as its parent",121:()=>"a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (see AG Grid docs) or b) to toString() on the object to return a key",122:()=>"could not find the document, document is empty",123:()=>"Advanced Filter is only supported with the Client-Side Row Model or Server-Side Row Model.",124:()=>"No active charts to update.",125:({chartId:e})=>`Unable to update chart. No active chart found with ID: ${e}.`,126:()=>"unable to restore chart as no chart model is provided",127:({allRange:e})=>`unable to create chart as ${e?"there are no columns in the grid":"no range is selected"}.`,128:({feature:e})=>`${e} is only available if using 'multiRow' selection mode.`,129:({feature:e,rowModel:t})=>`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${t}.`,130:()=>'cannot multi select unless selection mode is "multiRow"',132:()=>"Row selection features are not available unless `rowSelection` is enabled.",133:({iconName:e})=>`icon '${e}' function should return back a string or a dom object`,134:({iconName:e})=>`Did not find icon '${e}'`,135:()=>"Data type of the new value does not match the cell data type of the column",136:()=>"Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.",137:({type:e,currentChartType:t})=>`Unable to update chart as a '${e}' update type is not permitted on a ${t}.`,138:({chartType:e})=>`invalid chart type supplied: ${e}`,139:({customThemeName:e})=>`a custom chart theme with the name ${e} has been supplied but not added to the 'chartThemes' list`,140:({name:e})=>`no stock theme exists with the name '${e}' and no custom chart theme with that name was supplied to 'customChartThemes'`,141:()=>"cross filtering with row grouping is not supported.",142:()=>"cross filtering is only supported in the client side row model.",143:({panel:e})=>`'${e}' is not a valid Chart Tool Panel name`,144:({type:e})=>`Invalid charts data panel group name supplied: '${e}'`,145:({group:e})=>`As of v32, only one charts customize panel group can be expanded at a time. '${e}' will not be expanded.`,146:({comp:e})=>`Unable to instantiate component '${e}' as its module hasn't been loaded. Add 'ValidationModule' to see which module is required.`,147:({group:e})=>`Invalid charts customize panel group name supplied: '${e}'`,148:({group:e})=>`invalid chartGroupsDef config '${e}'`,149:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,150:()=>"'seriesChartTypes' are required when the 'customCombo' chart type is specified.",151:({chartType:e})=>`invalid chartType '${e}' supplied in 'seriesChartTypes', converting to 'line' instead.`,152:({colId:e})=>`no 'seriesChartType' found for colId = '${e}', defaulting to 'line'.`,153:({chartDataType:e})=>`unexpected chartDataType value '${e}' supplied, instead use 'category', 'series' or 'excluded'`,154:({colId:e})=>`cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: ${e}`,155:({option:e})=>`'${e}' is not a valid Chart Toolbar Option`,156:({panel:e})=>`Invalid panel in chartToolPanelsDef.panels: '${e}'`,157:({unrecognisedGroupIds:e})=>["unable to find group(s) for supplied groupIds:",e],158:()=>"can not expand a column item that does not represent a column group header",159:()=>"Invalid params supplied to createExcelFileForExcel() - `ExcelExportParams.data` is empty.",160:()=>"Export cancelled. Export is not allowed as per your configuration.",161:()=>"The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'",162:({id:e,dataType:t})=>`Unrecognized data type for excel export [${e}.dataType=${t}]`,163:({featureName:e})=>`Excel table export does not work with ${e}. The exported Excel file will not contain any Excel tables.
 Please turn off ${e} to enable Excel table exports.`,164:()=>"Unable to add data table to Excel sheet: A table already exists.",165:()=>"Unable to add data table to Excel sheet: Missing required parameters.",166:({unrecognisedGroupIds:e})=>["unable to find groups for these supplied groupIds:",e],167:({unrecognisedColIds:e})=>["unable to find columns for these supplied colIds:",e],168:()=>"detailCellRendererParams.template should be function or string",169:()=>'Reference to eDetailGrid was missing from the details template. Please add data-ref="eDetailGrid" to the template.',170:({providedStrategy:e})=>`invalid cellRendererParams.refreshStrategy = ${e} supplied, defaulting to refreshStrategy = 'rows'.`,171:()=>"could not find detail grid options for master detail, please set gridOptions.detailCellRendererParams.detailGridOptions",172:()=>"could not find getDetailRowData for master / detail, please set gridOptions.detailCellRendererParams.getDetailRowData",173:({group:e})=>`invalid chartGroupsDef config '${e}'`,174:({group:e,chartType:t})=>`invalid chartGroupsDef config '${e}.${t}'`,175:({menuTabName:e,itemsToConsider:t})=>[`Trying to render an invalid menu item '${e}'. Check that your 'menuTabs' contains one of `,t],176:({key:e})=>`unknown menu item type ${e}`,177:()=>"valid values for cellSelection.handle.direction are 'x', 'y' and 'xy'. Default to 'xy'.",178:({colId:e})=>`column ${e} is not visible`,179:()=>"totalValueGetter should be either a function or a string (expression)",180:()=>"agRichSelectCellEditor requires cellEditorParams.values to be set",181:()=>"agRichSelectCellEditor cannot have `multiSelect` and `allowTyping` set to `true`. AllowTyping has been turned off.",182:()=>'you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data',183:()=>"Group Column Filter only works on group columns. Please use a different filter.",184:({parentGroupData:e,childNodeData:t})=>["duplicate group keys for row data, keys should be unique",[e,t]],185:({data:e})=>["getDataPath() should not return an empty path",[e]],186:({rowId:e,rowData:t,duplicateRowsData:n})=>["duplicate group keys for row data, keys should be unique",e,t,...n??[]],187:({rowId:e,firstData:t,secondData:n})=>[`Duplicate node id ${e}. Row IDs are provided via the getRowId() callback. Please modify the getRowId() callback code to provide unique row id values.`,"first instance",t,"second instance",n],188:e=>`getRowId callback must be provided for Server Side Row Model ${e?.feature||"selection"} to work correctly.`,189:({startRow:e})=>`invalid value ${e} for startRow, the value should be >= 0`,190:({rowGroupId:e,data:t})=>["null and undefined values are not allowed for server side row model keys",e?`column = ${e}`:"","data is ",t],194:({method:e})=>`calling gridApi.${e}() is only possible when using rowModelType=\`clientSide\`.`,195:({justCurrentPage:e})=>`selecting just ${e?"current page":"filtered"} only works when gridOptions.rowModelType='clientSide'`,196:({key:e})=>`Provided ids must be of string type. Invalid id provided: ${e}`,197:()=>"`toggledNodes` must be an array of string ids.",199:()=>"getSelectedNodes and getSelectedRows functions cannot be used with select all functionality with the server-side row model. Use `api.getServerSideSelectionState()` instead.",200:missingModule,201:({rowModelType:e})=>`Could not find row model for rowModelType = ${e}`,202:()=>"`getSelectedNodes` and `getSelectedRows` functions cannot be used with `groupSelectsChildren` and the server-side row model. Use `api.getServerSideSelectionState()` instead.",203:()=>"Server Side Row Model does not support Dynamic Row Height and Cache Purging. Either a) remove getRowHeight() callback or b) remove maxBlocksInCache property. Purging has been disabled.",204:()=>"Server Side Row Model does not support Auto Row Height and Cache Purging. Either a) remove colDef.autoHeight or b) remove maxBlocksInCache property. Purging has been disabled.",205:({duplicateIdText:e})=>`Unable to display rows as duplicate row ids (${e}) were returned by the getRowId callback. Please modify the getRowId callback to provide unique ids.`,206:()=>"getRowId callback must be implemented for transactions to work. Transaction was ignored.",207:()=>'The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.',208:()=>"Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects.",209:()=>`Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects. See ${baseDocLink}/filter-set-filter-list/#filter-value-types`,210:()=>"Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects?",211:()=>"property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date.",212:()=>"please review all your toolPanel components, it seems like at least one of them doesn't have an id",213:()=>"Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled.",214:({key:e})=>`unable to lookup Tool Panel as invalid key supplied: ${e}`,215:({key:e,defaultByKey:t})=>`the key ${e} is not a valid key for specifying a tool panel, valid keys are: ${Object.keys(t??{}).join(",")}`,216:({name:e})=>`Missing component for '${e}'`,217:({invalidColIds:e})=>["unable to find grid columns for the supplied colDef(s):",e],218:({property:e,defaultOffset:t})=>`${e} must be a number, the value you provided is not a valid number. Using the default of ${t}px.`,219:({property:e})=>`Property ${e} does not exist on the target object.`,220:({lineDash:e})=>`'${e}' is not a valid 'lineDash' option.`,221:()=>"agAggregationComponent should only be used with the client and server side row model.",222:()=>"agFilteredRowCountComponent should only be used with the client side row model.",223:()=>"agSelectedRowCountComponent should only be used with the client and server side row model.",224:()=>"agTotalAndFilteredRowCountComponent should only be used with the client side row model.",225:()=>"agTotalRowCountComponent should only be used with the client side row model.",226:()=>"viewport is missing init method.",227:()=>"menu item icon must be DOM node or string",228:({menuItemOrString:e})=>`unrecognised menu item ${e}`,230:()=>"detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://www.ag-grid.com/react-data-grid/master-detail-custom-detail/",231:()=>"As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.",232:()=>"Using both rowData and v-model. rowData will be ignored.",233:({methodName:e})=>`Framework component is missing the method ${e}()`,234:()=>'Group Column Filter does not work with the colDef property "field". This property will be ignored.',235:()=>'Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.',236:()=>'Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.',237:()=>"Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter.",238:()=>"setRowCount can only accept a positive row count.",239:()=>'Theming API and CSS File Themes are both used in the same page. In v33 we released the Theming API as the new default method of styling the grid. See the migration docs https://www.ag-grid.com/react-data-grid/theming-migration/. Because no value was provided to the `theme` grid option it defaulted to themeQuartz. But the file (ag-grid.css) is also included and will cause styling issues. Either pass the string "legacy" to the theme grid option to use v32 style themes, or remove ag-grid.css from the page to use Theming API.',240:({theme:e})=>`theme grid option must be a Theming API theme object or the string "legacy", received: ${e}`,243:()=>"Failed to deserialize state - each provided state object must be an object.",244:()=>"Failed to deserialize state - `selectAllChildren` must be a boolean value or undefined.",245:()=>"Failed to deserialize state - `toggledNodes` must be an array.",246:()=>"Failed to deserialize state - Every `toggledNode` requires an associated string id.",247:()=>`Row selection state could not be parsed due to invalid data. Ensure all child state has toggledNodes or does not conform with the parent rule. 
Please rebuild the selection state and reapply it.`,248:()=>"SetFloatingFilter expects SetFilter as its parent",249:()=>"Must supply a Value Formatter in Set Filter params when using a Key Creator",250:()=>"Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.",251:({chartType:e})=>`AG Grid: Unable to create chart as an invalid chartType = '${e}' was supplied.`,252:()=>`cannot get grid to draw rows when it is in the middle of drawing rows. 
Your code probably called a grid API method while the grid was in the render stage. 
To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). 
To see what part of your code that caused the refresh check this stacktrace.`,253:({version:e})=>["Illegal version string: ",e],254:()=>"Cannot create chart: no chart themes available.",255:({point:e})=>`Lone surrogate U+${e?.toString(16).toUpperCase()} is not a scalar value`,256:()=>"Unable to initialise. See validation error, or load ValidationModule if missing.",257:()=>missingChartsWithModule("IntegratedChartsModule"),258:()=>missingChartsWithModule("SparklinesModule"),259:({part:e})=>`the argument to theme.withPart must be a Theming API part object, received: ${e}`,260:({propName:e,compName:t,gridScoped:n,gridId:o,rowModelType:u})=>missingModule({reasonOrId:`AG Grid '${e}' component: ${t}`,moduleName:USER_COMP_MODULES[t],gridId:o,gridScoped:n,rowModelType:u}),261:()=>"As of v33, `column.isHovered()` is deprecated. Use `api.isColumnHovered(column)` instead.",262:()=>'As of v33, icon key "smallDown" is deprecated. Use "advancedFilterBuilderSelect" for Advanced Filter Builder dropdown, "selectOpen" for Select cell editor and dropdowns (e.g. Integrated Charts menu), "richSelectOpen" for Rich Select cell editor.',263:()=>'As of v33, icon key "smallLeft" is deprecated. Use "panelDelimiterRtl" for Row Group Panel / Pivot Panel, "subMenuOpenRtl" for sub-menus.',264:()=>'As of v33, icon key "smallRight" is deprecated. Use "panelDelimiter" for Row Group Panel / Pivot Panel, "subMenuOpen" for sub-menus.',265:({colId:e})=>`Unable to infer chart data type for column '${e}' if first data entry is null. Please specify "chartDataType", or a "cellDataType" in the column definition. For more information, see ${baseDocLink}/integrated-charts-range-chart#coldefchartdatatype .`,266:()=>'As of v33.1, using "keyCreator" with the Rich Select Editor has been deprecated. It now requires the "formatValue" callback to convert complex data to strings.',267:()=>"Detail grids can not use a different theme to the master grid, the `theme` detail grid option will be ignored.",268:()=>"Transactions aren't supported with tree data when using treeDataChildrenField",269:()=>"When `masterSelects: 'detail'`, detail grids must be configured with multi-row selection",270:({id:e,parentId:t})=>`Cycle detected for row with id='${e}' and parent id='${t}'. Resetting the parent for row with id='${e}' and showing it as a root-level node.`,271:({id:e,parentId:t})=>`Parent row not found for row with id='${e}' and parent id='${t}'. Showing row with id='${e}' as a root-level node.`,272:()=>NoModulesRegisteredError(),273:({providedId:e,usedId:t})=>`Provided column id '${e}' was already in use, ensure all column and group ids are unique. Using '${t}' instead.`,274:({prop:e})=>{let t=`Since v33, ${e} has been deprecated.`;switch(e){case"maxComponentCreationTimeMs":t+=" This property is no longer required and so will be removed in a future version.";break;case"setGridApi":t+=" This method is not called by AG Grid. To access the GridApi see: https://ag-grid.com/react-data-grid/grid-interface/#grid-api ";break;case"children":t+=" For multiple versions AgGridReact does not support children.";break}return t},275:missingRowModelTypeError,276:()=>"Row Numbers Row Resizer cannot be used when Grid Columns have `autoHeight` enabled.",277:({colId:e})=>`'enableFilterHandlers' is set to true, but column '${e}' does not have 'filter.doesFilterPass' or 'filter.handler' set.`,278:({colId:e})=>`Unable to create filter handler for column '${e}'`,279:e=>{},280:({colId:e})=>`'name' must be provided for custom filter components for column '${e}`,281:({colId:e})=>`Filter for column '${e}' does not have 'filterParams.buttons', but the new Filters Tool Panel has buttons configured. Either configure buttons for the filter, or disable buttons on the Filters Tool Panel.`,282:()=>"New filter tool panel requires `enableFilterHandlers: true`.",283:()=>"As of v34, use the same method on the filter handler (`api.getColumnFilterHandler(colKey)`) instead.",284:()=>"As of v34, filters are active when they have a model. Use `api.getColumnFilterModel()` instead.",285:()=>"As of v34, use (`api.getColumnFilterModel()`) instead.",286:()=>"As of v34, use (`api.setColumnFilterModel()`) instead.",287:()=>"`api.doFilterAction()` requires `enableFilterHandlers = true",288:()=>"`api.getColumnFilterModel(key, true)` requires `enableFilterHandlers = true",289:({rowModelType:e})=>`Row Model '${e}' is not supported with Batch Editing`,290:({rowIndex:e,rowPinned:t})=>`Row with index '${e}' and pinned state '${t}' not found`,291:()=>"License Key being set multiple times with different values. This can result in an incorrect license key being used,",292:({colId:e})=>`The Multi Filter for column '${e}' has buttons configured against the child filters. When 'enableFilterHandlers=true', buttons must instead be provided against the parent Multi Filter params. The child filter buttons will be ignored.`,293:()=>"The grid was initialised detached from the DOM and was then inserted into a Shadow Root. Theme styles are probably broken. Pass the themeStyleContainer grid option to let the grid know where in the document to insert theme CSS.",294:()=>"When using the `agRichSelectCellEditor` setting `filterListAsync = true` requires `allowTyping = true` and the `values()` callback must return a Promise of filtered values.",295:({blockedService:e})=>`colDef.allowFormula is not supported with ${e}. Formulas has been turned off.`,296:()=>"Since v35, `api.hideOverlay()` does not hide the overlay when `activeOverlay` is set. Set `activeOverlay=null` instead.",297:()=>'`api.hideOverlay()` does not hide the no matching rows overlay as it is only controlled by grid state. Set `suppressOverlays=["noMatchingRows"] to not show it.'};function getError(e,t){const n=AG_GRID_ERRORS[e];if(!n)return[`Missing error text for error id ${e}!`];const o=n(t),d=`
See ${getErrorLink(e,t)}`;return Array.isArray(o)?o.concat(d):[o,d]}var MISSING_MODULE_REASONS={1:"Charting Aggregation",2:"pivotResultFields",3:"setTooltip"},VanillaFrameworkOverrides=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.batchFrameworkComps=!1,this.wrapIncoming=t=>t(),this.wrapOutgoing=t=>t(),this.baseDocLink=`${BASE_URL}/${this.frameworkName}-data-grid`,setValidationDocLink(this.baseDocLink)}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return this.baseDocLink+(e?"/"+e:"")}},_gridApiCache=new WeakMap,_gridElementCache=new WeakMap,nextGridId=1,GridCoreCreator=class{create(e,t,n,o,u,d){const f=GlobalGridOptions.applyGlobalGridOptions(t),g=f.gridId??String(nextGridId++),v=this.getRegisteredModules(u,g,f.rowModelType),w=this.createBeansList(f.rowModelType,v,g),S=this.createProvidedBeans(e,f,u);if(!w)return;const _={providedBeanInstances:S,beanClasses:w,id:g,beanInitComparator:gridBeanInitComparator,beanDestroyComparator:gridBeanDestroyComparator,derivedBeans:[createGridApi],destroyCallback:()=>{_gridElementCache.delete(M),_gridApiCache.delete(e),_unRegisterGridModules(g),d?.()}},F=new AgContext(_);this.registerModuleFeatures(F,v),n(F),F.getBean("syncSvc").start(),o?.(F);const M=F.getBean("gridApi");return _gridApiCache.set(e,M),_gridElementCache.set(M,e),M}getRegisteredModules(e,t,n){return _registerModule(CommunityCoreModule,void 0,!0),e?.modules?.forEach(o=>_registerModule(o,t)),_getRegisteredModules(t,getDefaultRowModelType(n))}registerModuleFeatures(e,t){const n=e.getBean("registry"),o=e.getBean("apiFunctionSvc");for(const u of t){n.registerModule(u);const d=u.apiFunctions;if(d){const f=Object.keys(d);for(const g of f)o?.addFunction(g,d[g])}}}createProvidedBeans(e,t,n){let o=n?n.frameworkOverrides:null;_missing(o)&&(o=new VanillaFrameworkOverrides);const u={gridOptions:t,eGridDiv:e,eRootDiv:e,globalListener:n?n.globalListener:null,globalSyncListener:n?n.globalSyncListener:null,frameworkOverrides:o};return n?.providedBeanInstances&&Object.assign(u,n.providedBeanInstances),u}createBeansList(e,t,n){const o={clientSide:"ClientSideRowModel",infinite:"InfiniteRowModel",serverSide:"ServerSideRowModel",viewport:"ViewportRowModel"},u=getDefaultRowModelType(e),d=o[u];if(!d){_logPreInitErr(201,{rowModelType:u},`Unknown rowModelType ${u}.`);return}if(!_hasUserRegistered()){_logPreInitErr(272,void 0,NoModulesRegisteredError());return}if(!e){const g=Object.entries(o).filter(([v,w])=>_isModuleRegistered(w,n,v));if(g.length==1){const[v,w]=g[0];if(v!==u){const S={moduleName:w,rowModelType:v};_logPreInitErr(275,S,missingRowModelTypeError(S));return}}}if(!_isModuleRegistered(d,n,u)){const g=_isUmd(),v=`rowModelType = '${u}'`,w=`Missing module ${d}Module for rowModelType ${u}.`;_logPreInitErr(200,{reasonOrId:v,moduleName:d,gridScoped:_areModulesGridScoped(),gridId:n,rowModelType:u,isUmd:g},w);return}const f=new Set;for(const g of t)for(const v of g.beans??[])f.add(v);return Array.from(f)}};function getDefaultRowModelType(e){return e??"clientSide"}function convertColumnState(e,t=!1){const n=[],o=[],u=[],d=[],f=[],g=[],v=[],w=[],S=[];let R=0;for(let _=0;_<e.length;_++){const{colId:F,sort:M,sortType:I,sortIndex:N,rowGroup:B,rowGroupIndex:H,aggFunc:U,pivot:$,pivotIndex:z,pinned:j,hide:J,width:ie,flex:se}=e[_];S.push(F),M&&(n[N??R++]={colId:F,sort:M,type:I}),B&&(o[H??0]=F),typeof U=="string"&&u.push({colId:F,aggFunc:U}),$&&(d[z??0]=F),j&&(j==="right"?g:f).push(F),J&&v.push(F),(se!=null||ie)&&w.push({colId:F,flex:se??void 0,width:ie===null?void 0:ie})}return{sort:n.length?{sortModel:_removeEmptyValues(n)}:void 0,rowGroup:o.length?{groupColIds:_removeEmptyValues(o)}:void 0,aggregation:u.length?{aggregationModel:u}:void 0,pivot:d.length||t?{pivotMode:t,pivotColIds:_removeEmptyValues(d)}:void 0,columnPinning:f.length||g.length?{leftColIds:f,rightColIds:g}:void 0,columnVisibility:v.length?{hiddenColIds:v}:void 0,columnSizing:w.length?{columnSizingModel:w}:void 0,columnOrder:S.length?{orderedColIds:S}:void 0}}function _removeEmptyValues(e){return e.filter(t=>t!=null)}function _convertColumnGroupState(e){const t=[];for(const{groupId:n,open:o}of e)o&&t.push(n);return t.length?{openColumnGroupIds:t}:void 0}var AlignedGridsService=class extends BeanStub{constructor(){super(...arguments),this.beanName="alignedGridsSvc",this.consuming=!1}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[];const t=typeof e=="function";return typeof e=="function"&&(e=e()),e.map(o=>{if(!o){_error(18),t||_error(20);return}if(this.isGridApi(o))return o;const u=o;return"current"in u?u.current?.api:(u.api||_error(19),u.api)}).filter(o=>!!o&&!o.isDestroyed())}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){const e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:t})=>this.onColumnEvent(t),alignedGridScroll:({event:t})=>this.onScrollEvent(t)})}fireEvent(e){if(!this.consuming)for(const t of this.getAlignedGridApis())t.isDestroyed()||t.dispatchEvent(e)}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent({type:"alignedGridColumn",event:e})}fireScrollEvent(e){e.direction==="horizontal"&&this.fireEvent({type:"alignedGridScroll",event:e})}onScrollEvent(e){this.onEvent(()=>{this.beans.ctrlsSvc.getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}extractDataFromEvent(e,t){const n=[];return e.columns?e.columns.forEach(o=>{n.push(t(o))}):e.column&&n.push(t(e.column)),n}getMasterColumns(e){return this.extractDataFromEvent(e,t=>t)}getColumnIds(e){return this.extractDataFromEvent(e,t=>t.getColId())}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":{this.processColumnEvent(e);break}case"columnGroupOpened":{this.processGroupOpenedEvent(e);break}case"columnPivotChanged":_warn(21);break}})}processGroupOpenedEvent(e){const{colGroupSvc:t}=this.beans;if(t)for(const n of e.columnGroups){let o=null;n&&(o=t.getProvidedColGroup(n.getGroupId())),!(n&&!o)&&t.setColumnGroupOpened(o,n.isExpanded(),"alignedGridChanged")}}processColumnEvent(e){const t=e.column;let n=null;const o=this.beans,{colResize:u,ctrlsSvc:d,colModel:f}=o;if(t&&(n=f.getColDefCol(t.getColId())),t&&!n)return;const g=this.getMasterColumns(e);switch(e.type){case"columnMoved":{const R=e.api.getColumnState().map(_=>({colId:_.colId}));_applyColumnState(o,{state:R,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{const R=e.api.getColumnState().map(_=>({colId:_.colId,hide:_.hide}));_applyColumnState(o,{state:R},"alignedGridChanged")}break;case"columnPinned":{const R=e.api.getColumnState().map(_=>({colId:_.colId,pinned:_.pinned}));_applyColumnState(o,{state:R},"alignedGridChanged")}break;case"columnResized":{const S=e,R={};for(const _ of g)R[_.getId()]={key:_.getColId(),newWidth:_.getActualWidth()};for(const _ of S.flexColumns??[])R[_.getId()]&&delete R[_.getId()];u?.setColumnWidths(Object.values(R),!1,S.finished,"alignedGridChanged");break}}const w=d.getGridBodyCtrl().isVerticalScrollShowing();for(const S of this.getAlignedGridApis())S.setGridOption("alwaysShowVerticalScroll",w)}},AlignedGridsModule={moduleName:"AlignedGrids",version:VERSION,beans:[AlignedGridsService],dependsOn:[ColumnApiModule]};function redrawRows(e,t={}){const n=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.redrawRows(n))}function setRowNodeExpanded(e,t,n,o,u){t&&(o&&t.parent&&t.parent.level!==-1&&setRowNodeExpanded(e,t.parent,n,o,u),t.setExpanded(n,void 0,u))}function getRowNode(e,t){return e.rowModel.getRowNode(t)}function addRenderedRowListener(e,t,n,o){e.rowRenderer.addRenderedRowListener(t,n,o)}function getRenderedNodes(e){return e.rowRenderer.getRenderedNodes()}function forEachNode(e,t,n){e.rowModel.forEachNode(t,n)}function getFirstDisplayedRowIndex(e){return e.rowRenderer.firstRenderedRow}function getLastDisplayedRowIndex(e){return e.rowRenderer.lastRenderedRow}function getDisplayedRowAtIndex(e,t){return e.rowModel.getRow(t)}function getDisplayedRowCount(e){return e.rowModel.getRowCount()}function getVerticalPixelRange(e){return e.ctrlsSvc.getScrollFeature().getVScrollPosition()}function getHorizontalPixelRange(e){return e.ctrlsSvc.getScrollFeature().getHScrollPosition()}function ensureColumnVisible(e,t,n="auto"){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureColumnVisible(t,n),"ensureVisible")}function ensureIndexVisible(e,t,n){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureIndexVisible(t,n),"ensureVisible")}function ensureNodeVisible(e,t,n=null){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsSvc.getScrollFeature().ensureNodeVisible(t,n),"ensureVisible")}var RowApiModule={moduleName:"RowApi",version:VERSION,apiFunctions:{redrawRows,setRowNodeExpanded,getRowNode,addRenderedRowListener,getRenderedNodes,forEachNode,getFirstDisplayedRowIndex,getLastDisplayedRowIndex,getDisplayedRowAtIndex,getDisplayedRowCount}},ScrollApiModule={moduleName:"ScrollApi",version:VERSION,apiFunctions:{getVerticalPixelRange,getHorizontalPixelRange,ensureColumnVisible,ensureIndexVisible,ensureNodeVisible}};function expandAll(e){e.expansionSvc?.expandAll(!0)}function collapseAll(e){e.expansionSvc?.expandAll(!1)}function onRowHeightChanged(e){e.rowModel?.onRowHeightChanged()}function resetRowHeights(e){if(e.rowAutoHeight?.active){_warn(3);return}e.rowModel?.resetRowHeights()}function setRowCount(e,t,n){const o=_getServerSideRowModel(e);if(o){if(e.rowGroupColsSvc?.columns.length===0){if(t<0){_error(238);return}o.setRowCount(t,n);return}_error(28);return}_getInfiniteRowModel(e)?.setRowCount(t,n)}function getCacheBlockState(e){return _isServerSideRowModel(e.gos)?e.rowModel.getBlockStates():e.rowNodeBlockLoader?.getBlockState()??{}}function isLastRowIndexKnown(e){return e.rowModel.isLastRowIndexKnown()}var CsrmSsrmSharedApiModule={moduleName:"CsrmSsrmSharedApi",version:VERSION,apiFunctions:{expandAll,collapseAll}},RowModelSharedApiModule={moduleName:"RowModelSharedApi",version:VERSION,apiFunctions:{onRowHeightChanged,resetRowHeights}},SsrmInfiniteSharedApiModule={moduleName:"SsrmInfiniteSharedApi",version:VERSION,apiFunctions:{setRowCount,getCacheBlockState,isLastRowIndexKnown}},ClientSideNodeManager=class extends BeanStub{constructor(e){super(),this.rootNode=e,this.nextId=0,this.allNodesMap={},initRootNode(e)}getRowNode(e){return this.allNodesMap[e]}setNewRowData(e){this.dispatchRowDataUpdateStarted(e),this.destroyAllNodes();const t=initRootNode(this.rootNode),n=new Array(e.length);t._leafs=n;let o=0;const u=this.beans.groupStage?.getNestedDataGetter(),d=u?new Set:null,f=(g,v)=>{const w=g.level+1;for(let S=0,R=v.length;S<R;++S){const _=v[S];if(!_)continue;const F=this.createRowNode(_,w,o);if(n[o++]=F,d&&!d.has(_)){d.add(_),F.treeParent=g;const M=u(_);M&&f(F,M)}}};f(t,e),n.length=o}destroyAllNodes(){const{selectionSvc:e,pinnedRowModel:t,groupStage:n}=this.beans;e?.reset("rowDataChanged"),t?.isManual()&&t.reset(),n?.clearNonLeafs();const o=this.rootNode._leafs;if(o)for(let u=0,d=o.length;u<d;++u)o[u]._destroy(!1);this.allNodesMap=Object.create(null),this.nextId=0}setImmutableRowData(e,t){const{rootNode:n,gos:o}=this;this.dispatchRowDataUpdateStarted(t);const u=_getRowIdCallback(o),d=e.changedRowNodes,{adds:f,updates:g}=d,v=new Set,w=[],S=this.beans.groupStage?.getNestedDataGetter();let R=o.get("suppressMaintainUnsortedOrder")?void 0:!1,_=-1,F=!1;const M=(B,H)=>{if(!R&&R!==void 0){const U=B.sourceRowIndex;R=U<=_,_=U}B.data!==H&&(B.updateData(H),f.has(B)||g.add(B),!B.selectable&&B.isSelected()&&w.push(B))},I=(B,H,U)=>{for(let $=0,z=H.length;$<z;++$){const j=H[$];if(!j)continue;let J=this.getRowNode(u({data:j,level:U}));if(J?(M(J,j),F||(F=!!S&&J.treeParent!==B)):(J=this.createRowNode(j,U),f.add(J)),!S||v.has(J)){v.add(J);continue}v.add(J),J.treeParent=B;const ie=S(j);ie&&I(J,ie,U+1)}};I(n,t,0);const N=this.deleteUnusedNodes(v,d,w,!!e.animate)||R||f.size>0;if(N){const B=n._leafs??(n._leafs=[]);R===void 0?updateRootLeafsKeepOrder(B,v,d):updateRootLeafsOrdered(B,v)&&(d.reordered=!0)}(N||F||g.size)&&(e.rowDataUpdated=!0,this.deselect(w))}deleteUnusedNodes(e,{removals:t},n,o){const u=this.rootNode._leafs;for(let d=0,f=u.length;d<f;d++){const g=u[d];e.has(g)||this.destroyNode(g,o)&&(t.push(g),g.isSelected()&&n.push(g))}return t.length>0}updateRowData(e,t,n){if(this.dispatchRowDataUpdateStarted(e.add),this.beans.groupStage?.getNestedDataGetter())return _warn(268),{remove:[],update:[],add:[]};const o=[],u=_getRowIdCallback(this.gos),d=this.executeRemove(u,e,t,o,n),f=this.executeUpdate(u,e,t,o),g=this.executeAdd(e,t);return this.deselect(o),{remove:d,update:f,add:g}}executeRemove(e,{remove:t},{adds:n,updates:o,removals:u},d,f){const g=this.rootNode._leafs,v=g?.length,w=t?.length;if(!w||!v)return[];let S=0,R=v,_=0;const F=new Array(w);for(let M=0;M<w;++M){const I=this.lookupNode(e,t[M]);if(!I)continue;const N=I.sourceRowIndex;N<R&&(R=N),N>_&&(_=N),F[S++]=I,this.destroyNode(I,f)&&(I.isSelected()&&d.push(I),n.delete(I)||(o.delete(I),u.push(I)))}return F.length=S,S&&filterRemovedRowNodes(g,R,_),F}executeUpdate(e,{update:t},{adds:n,updates:o},u){const d=t?.length;if(!d)return[];const f=new Array(d);let g=0;for(let v=0;v<d;v++){const w=t[v],S=this.lookupNode(e,w);S&&(S.updateData(w),!S.selectable&&S.isSelected()&&u.push(S),f[g++]=S,n.has(S)||o.add(S))}return f.length=g,f}executeAdd(e,t){var n;const o=(n=this.rootNode)._leafs??(n._leafs=[]),u=o.length,d=e.add,f=d?.length;if(!f)return[];const g=u+f;let v=this.sanitizeAddIndex(o,e.addIndex);if(v<u){for(let R=u-1,_=g-1;R>=v;--R){const F=o[R];F.sourceRowIndex=_,o[_--]=F}t.reordered=!0}o.length=g;const w=new Array(f),S=t.adds;for(let R=0;R<f;R++){const _=this.createRowNode(d[R],0,v);S.add(_),o[v]=_,w[R]=_,v++}return w}dispatchRowDataUpdateStarted(e){this.eventSvc.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:e?.length?e[0]:null})}deselect(e){const t="rowDataChanged",n=this.beans.selectionSvc;e.length&&n?.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),n?.updateGroupsFromChildrenSelections?.(t),e.length&&this.eventSvc.dispatchEvent({type:"selectionChanged",source:t,selectedNodes:n?.getSelectedNodes()??null,serverSideState:null})}createRowNode(e,t,n){const o=new RowNode(this.beans);o.parent=this.rootNode,o.level=t,o.group=!1,o.expanded=!1,n!=null&&(o.sourceRowIndex=n),o.setDataAndId(e,String(this.nextId++));const u=o.id,d=this.allNodesMap;return d[u]&&_warn(2,{nodeId:u}),d[u]=o,o}destroyNode(e,t){if(!e._destroy(t))return!1;const n=e.id,o=this.allNodesMap;return o[n]===e&&delete o[n],!0}lookupNode(e,t){if(!e)return lookupNodeByData(this.rootNode._leafs,t);const n=e({data:t,level:0}),o=this.allNodesMap[n];return o||(_error(4,{id:n}),null)}sanitizeAddIndex(e,t){const n=e.length;if(typeof t!="number"||t<0||t>=n||Number.isNaN(t))return n;t=Math.ceil(t);const o=this.gos;return t>0&&o.get("treeData")&&o.get("getDataPath")&&(t=adjustAddIndexForDataPath(e,t)),t}},adjustAddIndexForDataPath=(e,t)=>{for(let n=0,o=e.length;n<o;n++)if(e[n]?.rowIndex==t-1)return n+1;return t},initRootNode=e=>{e.group=!0,e.level=-1,e.id="ROOT_NODE_ID",e._leafs?.length!==0&&(e._leafs=[]);const t=[],n=[],o=[],u=[];e.childrenAfterGroup=t,e.childrenAfterSort=n,e.childrenAfterAggFilter=o,e.childrenAfterFilter=u;const d=e.sibling;return d&&(d.childrenAfterGroup=t,d.childrenAfterSort=n,d.childrenAfterAggFilter=o,d.childrenAfterFilter=u,d.childrenMapped=e.childrenMapped),e.updateHasChildren(),e},lookupNodeByData=(e,t)=>{if(e)for(let n=0,o=e.length;n<o;n++){const u=e[n];if(u.data===t)return u}return _error(5,{data:t}),null},filterRemovedRowNodes=(e,t,n)=>{t=Math.max(0,t);for(let o=t,u=e.length;o<u;++o){const d=e[o];o<=n&&d.destroyed||(d.sourceRowIndex=t,e[t++]=d)}e.length=t},updateRootLeafsOrdered=(e,t)=>{const n=t.size;e.length=n;let o=0,u=!1,d=!1;for(const f of t){const g=f.sourceRowIndex;g===o?d||(d=u):(g>=0?d=!0:u=!0,f.sourceRowIndex=o,e[o]=f),++o}return d},updateRootLeafsKeepOrder=(e,t,{adds:n})=>{const o=e.length,u=t.size;u>o&&(e.length=u);let d=0;for(let f=0;f<o;++f){const g=e[f];g.destroyed||(d!==f&&(g.sourceRowIndex=d,e[d]=g),++d)}for(const f of n)f.sourceRowIndex<0&&(f.sourceRowIndex=d,e[d++]=f);e.length=d};function updateRowNodeAfterFilter(e){const t=e.sibling;t&&(t.childrenAfterFilter=e.childrenAfterFilter)}var FilterStage=class extends BeanStub{constructor(){super(...arguments),this.beanName="filterStage",this.step="filter",this.refreshProps=["excludeChildrenWhenTreeDataFiltering"]}wireBeans(e){this.filterManager=e.filterManager}execute(e){const t=!!this.filterManager?.isChildFilterPresent();this.beans.formula?.active?this.softFilter(t,e):this.filterNodes(t,e)}filterNodes(e,t){const n=(o,u)=>{o.hasChildren()&&e&&!u?o.childrenAfterFilter=o.childrenAfterGroup.filter(d=>{const f=d.childrenAfterFilter&&d.childrenAfterFilter.length>0,g=d.data&&this.filterManager.doesRowPassFilter({rowNode:d});return f||g}):o.childrenAfterFilter=o.childrenAfterGroup,updateRowNodeAfterFilter(o)};if(this.doingTreeDataFiltering()){const o=(d,f)=>{if(d.childrenAfterGroup)for(let g=0;g<d.childrenAfterGroup.length;g++){const v=d.childrenAfterGroup[g],w=f||this.filterManager.doesRowPassFilter({rowNode:v});v.childrenAfterGroup?o(d.childrenAfterGroup[g],w):n(v,w)}n(d,f)},u=d=>o(d,!1);t.executeFromRootNode(u)}else{const o=u=>n(u,!1);t.forEachChangedNodeDepthFirst(o,!0)}}softFilter(e,t){const n=o=>{if(o.childrenAfterFilter=o.childrenAfterGroup,o.hasChildren())for(const u of o.childrenAfterGroup)u.softFiltered=e&&!(u.data&&this.filterManager.doesRowPassFilter({rowNode:u}));updateRowNodeAfterFilter(o)};t.forEachChangedNodeDepthFirst(n,!0)}doingTreeDataFiltering(){const{gos:e}=this;return e.get("treeData")&&!e.get("excludeChildrenWhenTreeDataFiltering")}},MIN_DELTA_SORT_ROWS=4,doDeltaSort=(e,t,n,o,u)=>{const d=t.childrenAfterSort,f=t.childrenAfterAggFilter;if(!f)return d&&d.length>0?d:[];const g=f.length;if(g<=1)return d?.length===g&&(g===0||d[0]===f[0])?d:f.slice();if(!d||g<=MIN_DELTA_SORT_ROWS)return e.doFullSortInPlace(f.slice(),u);const v=new Map,{updates:w,adds:S}=n,R=[];for(let F=0;F<g;++F){const M=f[F];w.has(M)||S.has(M)||!o.canSkip(M)?(v.set(M,~F),R.push(M)):v.set(M,F)}const _=R.length;return _===0?g===d.length?d:filterRemovedNodes(d,v,R):(R.sort((F,M)=>e.compareRowNodes(u,F,M)||~v.get(F)-~v.get(M)),_===g?R:mergeDeltaSortedArrays(e,u,R,d,v,g))},mergeDeltaSortedArrays=(e,t,n,o,u,d)=>{const f=new Array(d);let g=0,v=n[g],w,S=-1,R=0,_=0;const F=n.length,M=o.length;for(;;){if(S<0){if(R>=M)break;if(w=o[R++],S=u.get(w)??-1,S<0)continue}if((e.compareRowNodes(t,v,w)||~u.get(v)-S)<0){if(f[_++]=v,++g>=F)break;v=n[g]}else f[_++]=w,S=-1}for(;g<F;)f[_++]=n[g++];if(S<0)return f;for(f[_++]=w;R<M;){const I=o[R++];u.get(I)>=0&&(f[_++]=I)}return f},filterRemovedNodes=(e,t,n)=>{let o=0;n.length=t.size;for(let u=0,d=e.length;u<d;++u){const f=e[u];t.has(f)&&(n[o++]=f)}return n.length=o,n},updateRowNodeAfterSort=e=>{const t=e.childrenAfterSort,n=e.sibling;if(n&&(n.childrenAfterSort=t),!!t)for(let o=0,u=t.length-1;o<=u;o++){const d=t[o],f=o===0,g=o===u;d.firstChild!==f&&(d.firstChild=f,d.dispatchRowEvent("firstChildChanged")),d.lastChild!==g&&(d.lastChild=g,d.dispatchRowEvent("lastChildChanged")),d.childIndex!==o&&(d.childIndex=o,d.dispatchRowEvent("childIndexChanged"))}},SortStage=class extends BeanStub{constructor(){super(...arguments),this.beanName="sortStage",this.step="sort",this.refreshProps=["postSortRows","groupDisplayType","accentedSort"]}execute(e,t){const n=this.beans.sortSvc.getSortOptions(),o=n.length>0&&!!t&&this.gos.get("deltaSort"),{gos:u,colModel:d,rowGroupColsSvc:f,rowNodeSorter:g,rowRenderer:v,showRowGroupCols:w}=this.beans,S=u.get("groupMaintainOrder"),R=d.getCols().some(H=>H.isRowGroupActive()),_=f?.columns,F=d.isPivotMode(),M=u.getCallback("postSortRows");let I=!1,N;const B=H=>{const U=F&&H.leafGroup;let $=S&&R&&!H.leafGroup;$&&(N??(N=this.shouldSortContainsGroupCols(n)),$&&($=!N));let z=null;if($){let j=!1;if(_){const J=H.level+1;J<_.length&&(j=_[J].wasSortExplicitlyRemoved)}j||(z=preserveGroupOrder(H))}else!n.length||U||(o&&t?z=doDeltaSort(g,H,t,e,n):z=g.doFullSortInPlace(H.childrenAfterAggFilter.slice(),n));if(z||(z=H.childrenAfterAggFilter?.slice()??[]),I||(I=H.childrenAfterSort?.[0]!==z[0]),H.childrenAfterSort=z,updateRowNodeAfterSort(H),M){const j={nodes:H.childrenAfterSort};M(j)}};if(e?.forEachChangedNodeDepthFirst(B),I&&u.get("groupHideOpenParents")){const H=w?.columns;H?.length&&v.refreshCells({columns:H,force:!0})}}shouldSortContainsGroupCols(e){const t=e.length;if(!t)return!1;if(_isColumnsSortingCoupledToGroup(this.gos)){for(let n=0;n<t;++n){const o=e[n].column;if(o.isPrimary()&&o.isRowGroupActive())return!0}return!1}for(let n=0;n<t;++n)if(e[n].column.getColDef().showRowGroup)return!0;return!1}},preserveGroupOrder=e=>{const t=e.childrenAfterSort,n=e.childrenAfterAggFilter,o=t?.length,u=n?.length;if(!o||!u)return null;const d=new Array(u),f=new Set;for(let v=0;v<u;++v)f.add(n[v]);let g=0;for(let v=0;v<o;++v){const w=t[v];f.delete(w)&&(d[g++]=w)}if(f.size===0&&g===o)return t;for(const v of f)d[g++]=v;return d.length=g,d},ClientSideRowModel=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowModel",this.rootNode=null,this.rowCountReady=!1,this.nodeManager=void 0,this.rowsToDisplay=[],this.formulaRows=[],this.stages=null,this.asyncTransactions=null,this.asyncTransactionsTimer=0,this.started=!1,this.refreshingData=!1,this.rowDataUpdatedPending=!1,this.refreshingModel=!1,this.pendingNewData=!1,this.noKeepRenderedRows=!1,this.noKeepUndoRedoStack=!1,this.noAnimate=!1,this.rowNodesCountReady=!1,this.stagesRefreshProps=new Map,this.onRowHeightChanged_debounced=_debounce(this,this.onRowHeightChanged.bind(this),100)}postConstruct(){const e=this.beans,t=new RowNode(e);this.rootNode=t,this.nodeManager=this.createBean(new ClientSideNodeManager(t));const n=()=>{this.beans.groupStage?.invalidateGroupCols(),this.refreshModel({step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:!this.gos.get("suppressAnimationFrame")})};this.addManagedEventListeners({newColumnsLoaded:n,columnRowGroupChanged:n,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:()=>this.refreshModel({step:"pivot"}),columnPivotModeChanged:()=>this.refreshModel({step:"group"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),stylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this),rowExpansionStateChanged:this.onRowGroupOpened.bind(this)}),this.addPropertyListeners()}addPropertyListeners(){const{beans:e,stagesRefreshProps:t}=this,n=[e.groupStage,e.filterStage,e.pivotStage,e.aggStage,e.sortStage,e.filterAggStage,e.flattenStage].filter(o=>!!o);this.stages=n;for(let o=n.length-1;o>=0;--o){const u=n[o];for(const d of u.refreshProps)t.set(d,o)}this.addManagedPropertyListeners([...t.keys(),"rowData"],o=>{const u=o.changeSet?.properties;u&&this.onPropChange(u)}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.started=!0,this.rowNodesCountReady?this.refreshModel({step:"group",rowDataUpdated:!0,newData:!0}):this.setInitialData()}setInitialData(){this.gos.get("rowData")&&this.onPropChange(["rowData"])}ensureRowHeightsValid(e,t,n,o){let u,d=!1;do{u=!1;const f=this.getRowIndexAtPixel(e),g=this.getRowIndexAtPixel(t),v=Math.max(f,n),w=Math.min(g,o);for(let S=v;S<=w;S++){const R=this.getRow(S);if(R.rowHeightEstimated){const _=_getRowHeightForNode(this.beans,R);R.setRowHeight(_.height),u=!0,d=!0}}u&&this.setRowTopAndRowIndex()}while(u);return d}onPropChange(e){const{nodeManager:t,gos:n,beans:o}=this,u=o.groupStage;if(!t)return;const d=new Set(e),f=u?.onPropChange(d);let g;d.has("rowData")?g=n.get("rowData"):f&&(g=u?.extractData()),g&&!Array.isArray(g)&&(g=null,_warn(1));const v={step:"nothing",changedProps:d};if(g){const S=!f&&!this.isEmpty()&&g.length>0&&n.exists("getRowId")&&!n.get("resetRowDataOnUpdate");this.refreshingData=!0,S?(v.keepRenderedRows=!0,v.animate=!n.get("suppressAnimationFrame"),v.changedRowNodes=new ChangedRowNodes,t.setImmutableRowData(v,g)):(v.rowDataUpdated=!0,v.newData=!0,t.setNewRowData(g),this.rowNodesCountReady=!0)}const w=v.rowDataUpdated?"group":this.getRefreshedStage(e);w&&(v.step=w,this.refreshModel(v))}getRefreshedStage(e){const{stages:t,stagesRefreshProps:n}=this;if(!t)return null;const o=t.length;let u=o;for(let d=0,f=e.length;d<f&&u;++d)u=Math.min(u,n.get(e[d])??u);return u<o?t[u].step:null}setRowTopAndRowIndex(e){const{beans:t,rowsToDisplay:n}=this,o=t.environment.getDefaultRowHeight();let u=0;const d=_isDomLayout(this.gos,"normal");for(let f=0,g=n.length;f<g;++f){const v=n[f],w=v.id;if(w!=null&&e?.add(w),v.rowHeight==null){const S=_getRowHeightForNode(t,v,d,o);v.setRowHeight(S.height,S.estimated)}v.setRowTop(u),v.setRowIndex(f),u+=v.rowHeight}if(this.beans.formula?.active){const f=this.formulaRows;for(let g=0,v=f.length;g<v;++g){const w=f[g];w.formulaRowIndex=g}}}clearRowTopAndRowIndex(e,t){const n=e.active,o=f=>{f?.id!=null&&!t.has(f.id)&&f.clearRowTopAndRowIndex()},u=f=>{o(f),o(f.detailNode),o(f.sibling);const g=f.childrenAfterGroup;if(!f.hasChildren()||!g)return;const v=f.level==-1;if(!(n&&!v&&!f.expanded))for(let S=0,R=g.length;S<R;++S)u(g[S])},d=this.rootNode;d&&u(d)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay.length}getTopLevelRowCount(){const{rootNode:e,rowsToDisplay:t}=this;if(!e||!t.length)return 0;if(t[0]===e)return 1;const o=e.sibling?.displayed?1:0;return(e.childrenAfterSort?.length??0)+o}getTopLevelRowDisplayedIndex(e){const{beans:t,rootNode:n,rowsToDisplay:o}=this;if(!n||!o.length||o[0]===n)return e;const d=n.childrenAfterSort,f=v=>{let w=d[v];if(this.gos.get("groupHideOpenParents"))for(;w.expanded&&w.childrenAfterSort&&w.childrenAfterSort.length>0;)w=w.childrenAfterSort[0];return w.rowIndex},g=t.footerSvc;return g?g?.getTopDisplayIndex(o,e,d,f):f(e)}getTopLevelIndexFromDisplayedIndex(e){const{rootNode:t,rowsToDisplay:n}=this;if(!t||!n.length||n[0]===t)return e;let u=this.getRow(e);u.footer&&(u=u.sibling);let d=u.parent;for(;d&&d!==t;)u=d,d=u.parent;const f=t.childrenAfterSort?.indexOf(u)??-1;return f>=0?f:e}getRowBounds(e){const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){this.refreshModel({step:"map",keepRenderedRows:!0,animate:_isAnimateRows(this.gos)})}onFilterChanged({afterDataChange:e,columns:t}){if(!e){const o=t.length===0||t.some(u=>u.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:o,keepRenderedRows:!0,animate:_isAnimateRows(this.gos)})}}onSortChanged(){this.refreshModel({step:"sort",keepRenderedRows:!0,animate:_isAnimateRows(this.gos)})}getType(){return"clientSide"}onValueChanged(){this.refreshModel({step:this.beans.colModel.isPivotActive()?"pivot":"aggregate"})}createChangePath(e){const t=new ChangedPath(!1,this.rootNode);return t.active=e,t}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction"))return!1;const{changedRowNodes:t,newData:n,rowDataUpdated:o}=e;return!(!t||n||!o||t.removals.length||t.adds.size)}reMapRows(){if(this.refreshingModel||this.refreshingData){this.noKeepRenderedRows=!0,this.noKeepUndoRedoStack=!0,this.noAnimate=!0;return}this.refreshModel({step:"map",keepRenderedRows:!1,keepUndoRedoStack:!1,animate:!1})}refreshModel(e){const{nodeManager:t,eventSvc:n,started:o}=this;if(!t)return;const u=!!e.rowDataUpdated,d=e.changedPath??(e.changedPath=this.createChangePath(!e.newData&&u));if(o&&u&&n.dispatchEvent({type:"rowDataUpdated"}),this.deferRefresh(e)){this.setPendingRefreshFlags(e),this.rowDataUpdatedPending||(this.rowDataUpdatedPending=u);return}this.rowDataUpdatedPending&&(this.rowDataUpdatedPending=!1,e.step="group"),this.updateRefreshParams(e);let f=!1;this.refreshingModel=!0;try{this.executeRefresh(e,d,u),f=!0}finally{this.refreshingData=!1,this.refreshingModel=!1,f||this.setPendingRefreshFlags(e)}this.clearPendingRefreshFlags(),n.dispatchEvent({type:"modelUpdated",animate:e.animate,keepRenderedRows:e.keepRenderedRows,newData:e.newData,newPage:!1,keepUndoRedoStack:e.keepUndoRedoStack})}executeRefresh(e,t,n){const{beans:o}=this;switch(o.masterDetailSvc?.refreshModel(e),n&&e.step!=="group"&&o.colFilter?.refreshModel(),e.step){case"group":this.doGrouping(e);case"filter":this.doFilter(t);case"pivot":this.doPivot(t);case"aggregate":this.doAggregate(t);case"filter_aggregates":this.doFilterAggregates(t);case"sort":this.doSort(t,e.changedRowNodes);case"map":this.doRowsToDisplay()}const u=new Set;this.setRowTopAndRowIndex(u),this.clearRowTopAndRowIndex(t,u),this.updateRefreshParams(e)}deferRefresh(e){return this.refreshingModel||this.beans.colModel.changeEventsDispatching?!0:this.isSuppressModelUpdateAfterUpdateTransaction(e)?(this.started&&(this.refreshingData=!1),!0):!this.started}setPendingRefreshFlags(e){this.pendingNewData||(this.pendingNewData=!!e.newData),this.noKeepRenderedRows||(this.noKeepRenderedRows=!e.keepRenderedRows),this.noKeepUndoRedoStack||(this.noKeepUndoRedoStack=!e.keepUndoRedoStack),this.noAnimate||(this.noAnimate=!e.animate)}clearPendingRefreshFlags(){this.pendingNewData=!1,this.noKeepRenderedRows=!1,this.noKeepUndoRedoStack=!1,this.noAnimate=!1}updateRefreshParams(e){e.newData=this.pendingNewData||!!e.newData,e.keepRenderedRows=!this.noKeepRenderedRows&&!!e.keepRenderedRows,e.keepUndoRedoStack=!this.noKeepUndoRedoStack&&!!e.keepUndoRedoStack,e.animate=!this.noAnimate&&!!e.animate}isEmpty(){return!this.rootNode?._leafs?.length||!this.beans.colModel?.ready}isRowsToRender(){return this.rowsToDisplay.length>0}getOverlayType(){const{beans:e,gos:t}=this;if(this.rootNode?._leafs?.length){if(e.filterManager?.isAnyFilterPresent()&&this.getRowCount()===0)return"noMatchingRows"}else if(this.rowCountReady||(t.get("rowData")?.length??0)==0)return"noRows";return null}getNodesInRangeForSelection(e,t){let n=!1,o=!1;const u=[],d=_getGroupSelectsDescendants(this.gos);return this.forEachNodeAfterFilterAndSort(f=>{if(o)return;if(n&&(f===t||f===e)&&(o=!0,d&&f.group)){addAllLeafs(u,f);return}if(!n){if(f!==t&&f!==e)return;n=!0,t===e&&(o=!0)}(!f.group||!d)&&u.push(f)}),u}getTopLevelNodes(){return this.rootNode?.childrenAfterGroup??null}getRow(e){return this.rowsToDisplay[e]}getFormulaRow(e){return this.formulaRows[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){const t=this.rowsToDisplay,n=t.length;if(this.isEmpty()||n===0)return-1;let o=0,u=n-1;if(e<=0)return 0;if(t[u].rowTop<=e)return u;let f=-1,g=-1;for(;;){const v=Math.floor((o+u)/2),w=t[v];if(this.isRowInPixel(w,e)||(w.rowTop<e?o=v+1:w.rowTop>e&&(u=v-1),f===o&&g===u))return v;f=o,g=u}}isRowInPixel(e,t){const n=e.rowTop,o=n+e.rowHeight;return n<=t&&o>t}forEachLeafNode(e){const t=this.rootNode?._leafs;if(t)for(let n=0,o=t.length;n<o;++n)e(t[n],n)}forEachNode(e,t=!1){this.depthFirstSearchRowNodes(e,t)}forEachDisplayedNode(e){const t=this.rowsToDisplay;for(let n=0,o=t.length;n<o;++n)e(t[n],n)}forEachNodeAfterFilter(e,t=!1){this.depthFirstSearchRowNodes(e,t,n=>n.childrenAfterAggFilter)}forEachNodeAfterFilterAndSort(e,t=!1){this.depthFirstSearchRowNodes(e,t,n=>n.childrenAfterSort)}forEachPivotNode(e,t,n){const{colModel:o,rowGroupColsSvc:u}=this.beans;if(!o.isPivotMode())return;if(!u?.columns.length){e(this.rootNode,0);return}const d=n?"childrenAfterSort":"childrenAfterGroup";this.depthFirstSearchRowNodes(e,t,f=>f.leafGroup?null:f[d])}depthFirstSearchRowNodes(e,t=!1,n=d=>d.childrenAfterGroup,o=this.rootNode,u=0){let d=u;if(!o)return d;const f=o===this.rootNode;if(f||e(o,d++),o.hasChildren()&&!o.footer){const g=n(o);if(g){const v=this.beans.footerSvc;d=v?.addTotalRows(d,o,e,t,f,"top")??d;for(const w of g)d=this.depthFirstSearchRowNodes(e,t,n,w,d);return v?.addTotalRows(d,o,e,t,f,"bottom")??d}}return d}doAggregate(e){this.rootNode&&this.beans.aggStage?.execute(e)}doFilterAggregates(e){const t=this.rootNode,n=this.beans.filterAggStage;if(n){n.execute(e);return}t.childrenAfterAggFilter=t.childrenAfterFilter}doSort(e,t){const n=this.beans.sortStage;if(n){n.execute(e,t);return}e.forEachChangedNodeDepthFirst(o=>{o.childrenAfterSort=o.childrenAfterAggFilter.slice(0),updateRowNodeAfterSort(o)})}doGrouping(e){const t=this.rootNode;if(!t)return;const o=this.beans.groupStage?.execute(e);if(o===void 0){const u=t._leafs;t.childrenAfterGroup=u,t.updateHasChildren();const d=t.sibling;d&&(d.childrenAfterGroup=u)}(o||e.rowDataUpdated)&&this.beans.colFilter?.refreshModel(),!this.rowCountReady&&this.rowNodesCountReady&&(this.rowCountReady=!0,this.eventSvc.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){const t=this.beans.filterStage;if(t){t.execute(e);return}e.forEachChangedNodeDepthFirst(n=>{n.childrenAfterFilter=n.childrenAfterGroup,updateRowNodeAfterFilter(n)},!0)}doPivot(e){this.beans.pivotStage?.execute(e)}getRowNode(e){const t=this.nodeManager?.getRowNode(e);return typeof t=="object"?t:this.beans.groupStage?.getNonLeaf(e)}batchUpdateRowData(e,t){if(!this.asyncTransactionsTimer){this.asyncTransactions=[];const n=this.gos.get("asyncTransactionWaitMillis");this.asyncTransactionsTimer=setTimeout(()=>this.executeBatchUpdateRowData(),n)}this.asyncTransactions.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){const e=this.asyncTransactionsTimer;e&&(clearTimeout(e),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){const{nodeManager:e,beans:t,eventSvc:n,asyncTransactions:o}=this;if(!e)return;t.valueCache?.onDataChanged();const u=[],d=[],f=new ChangedRowNodes,g=!this.gos.get("suppressAnimationFrame");for(const{rowDataTransaction:v,callback:w}of o??[]){this.rowNodesCountReady=!0,this.refreshingData=!0;const S=e.updateRowData(v,f,g);u.push(S),w&&d.push(w.bind(null,S))}this.commitTransactions(f,g),d.length>0&&setTimeout(()=>{for(let v=0,w=d.length;v<w;v++)d[v]()},0),u.length>0&&n.dispatchEvent({type:"asyncTransactionsFlushed",results:u}),this.asyncTransactionsTimer=0,this.asyncTransactions=null}updateRowData(e){const t=this.nodeManager;if(!t)return null;this.beans.valueCache?.onDataChanged(),this.rowNodesCountReady=!0;const n=new ChangedRowNodes,o=!this.gos.get("suppressAnimationFrame");this.refreshingData=!0;const u=t.updateRowData(e,n,o);return this.commitTransactions(n,o),u}commitTransactions(e,t){this.refreshModel({step:"group",rowDataUpdated:!0,keepRenderedRows:!0,animate:t,changedRowNodes:e,changedPath:this.createChangePath(!0)})}doRowsToDisplay(){const{rootNode:e,beans:t}=this;if(t.formula?.active){const u=e?.childrenAfterSort??[];this.formulaRows=u,this.rowsToDisplay=u.filter(d=>!d.softFiltered);for(const d of this.rowsToDisplay)d.setUiLevel(0);return}const n=t.flattenStage;if(n){this.rowsToDisplay=n.execute();return}const o=this.rootNode.childrenAfterSort??[];for(const u of o)u.setUiLevel(0);this.rowsToDisplay=o}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepUndoRedoStack:!0})}resetRowHeights(){const e=this.rootNode;if(!e)return;const t=this.resetRowHeightsForAllRowNodes();e.setRowHeight(e.rowHeight,!0);const n=e.sibling;n?.setRowHeight(n.rowHeight,!0),t&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);const n=t.detailNode;n?.setRowHeight(n.rowHeight,!0);const o=t.sibling;o?.setRowHeight(o.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){e.rowHeightChanged&&!this.beans.rowAutoHeight?.active&&this.resetRowHeights()}onGridReady(){this.started||this.setInitialData()}destroy(){super.destroy(),this.nodeManager=this.destroyBean(this.nodeManager),this.started=!1,this.rootNode=null,this.rowsToDisplay=[],this.asyncTransactions=null,this.stages=null,this.stagesRefreshProps.clear(),clearTimeout(this.asyncTransactionsTimer)}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}},addAllLeafs=(e,t)=>{const n=t.childrenAfterGroup;if(n)for(let o=0,u=n.length;o<u;++o){const d=n[o];d.data&&e.push(d),d.group&&addAllLeafs(e,d)}};function onGroupExpandedOrCollapsed(e){e.expansionSvc?.onGroupExpandedOrCollapsed()}function refreshClientSideRowModel(e,t){const n=_getClientSideRowModel(e);n&&((!t||t==="everything")&&(t="group"),n.refreshModel({step:t,keepRenderedRows:!0,animate:!e.gos.get("suppressAnimationFrame")}))}function isRowDataEmpty(e){return _getClientSideRowModel(e)?.isEmpty()??!0}function forEachLeafNode(e,t){_getClientSideRowModel(e)?.forEachLeafNode(t)}function forEachNodeAfterFilter(e,t){_getClientSideRowModel(e)?.forEachNodeAfterFilter(t)}function forEachNodeAfterFilterAndSort(e,t){_getClientSideRowModel(e)?.forEachNodeAfterFilterAndSort(t)}function applyTransaction(e,t){return e.frameworkOverrides.wrapIncoming(()=>_getClientSideRowModel(e)?.updateRowData(t))}function applyTransactionAsync(e,t,n){e.frameworkOverrides.wrapIncoming(()=>_getClientSideRowModel(e)?.batchUpdateRowData(t,n))}function flushAsyncTransactions(e){e.frameworkOverrides.wrapIncoming(()=>_getClientSideRowModel(e)?.flushAsyncTransactions())}function getBestCostNodeSelection(e){return e.selectionSvc?.getBestCostNodeSelection()}var ClientSideRowModelModule={moduleName:"ClientSideRowModel",version:VERSION,rowModels:["clientSide"],beans:[ClientSideRowModel,SortStage],dependsOn:[SortModule]},ClientSideRowModelApiModule={moduleName:"ClientSideRowModelApi",version:VERSION,apiFunctions:{onGroupExpandedOrCollapsed,refreshClientSideRowModel,isRowDataEmpty,forEachLeafNode,forEachNodeAfterFilter,forEachNodeAfterFilterAndSort,applyTransaction,applyTransactionAsync,flushAsyncTransactions,getBestCostNodeSelection,resetRowHeights,onRowHeightChanged},dependsOn:[CsrmSsrmSharedApiModule,RowModelSharedApiModule]},columnAutoSizeCSS=":where(.ag-ltr) :where(.ag-animate-autosize){.ag-cell,.ag-header-cell,.ag-header-group-cell{transition:width .2s ease-in-out,left .2s ease-in-out}}:where(.ag-rtl) :where(.ag-animate-autosize){.ag-cell,.ag-header-cell,.ag-header-group-cell{transition:width .2s ease-in-out,right .2s ease-in-out}}";function sizeColumnsToFit(e,t){typeof t=="number"?e.colAutosize?.sizeColumnsToFit(t,"api"):e.colAutosize?.sizeColumnsToFitGridBody(t)}function autoSizeColumns({colAutosize:e,visibleCols:t},n,o){Array.isArray(n)?e?.autoSizeCols({colKeys:n,skipHeader:o,source:"api"}):e?.autoSizeCols({...n,colKeys:n.colIds??t.allCols,source:"api"})}function autoSizeAllColumns(e,t){t&&typeof t=="object"?autoSizeColumns(e,t):e.colAutosize?.autoSizeAllColumns({source:"api",skipHeader:t})}var ColumnAutosizeService=class extends BeanStub{constructor(){super(...arguments),this.beanName="colAutosize",this.timesDelayed=0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}postConstruct(){const{gos:e}=this,t=e.get("autoSizeStrategy");if(t){let n=!1;const o=t.type;if(o==="fitGridWidth"||o==="fitProvidedWidth")n=!0;else if(o==="fitCellContents"){this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered(t)});const u=e.get("rowData");n=u!=null&&u.length>0&&_isClientSideRowModel(e)}n&&this.beans.colDelayRenderSvc?.hideColumns(o)}}autoSizeCols(e){const{eventSvc:t,visibleCols:n,colModel:o}=this.beans;setWidthAnimation(this.beans,!0),this.innerAutoSizeCols(e).then(u=>{const d=S=>dispatchColumnResizedEvent(t,Array.from(S),!0,"autosizeColumns");if(!e.scaleUpToFitGridWidth)return setWidthAnimation(this.beans,!1),d(u);const f=getAvailableWidth(this.beans),g=S=>n.leftCols.some(R=>_columnsMatch(R,S)),v=S=>n.rightCols.some(R=>_columnsMatch(R,S)),w=e.colKeys.filter(S=>!o.getCol(S)?.getColDef().suppressAutoSize&&!isRowNumberCol(S)&&!g(S)&&!v(S));this.sizeColumnsToFit(f,e.source,!0,{defaultMaxWidth:e.defaultMaxWidth,defaultMinWidth:e.defaultMinWidth,columnLimits:e.columnLimits?.map(S=>({...S,key:S.colId})),colKeys:w,onlyScaleUp:!0,animate:!1}),setWidthAnimation(this.beans,!1),d(u)})}innerAutoSizeCols(e){return new Promise((t,n)=>{if(this.shouldQueueResizeOperations)return this.pushResizeOperation(()=>this.innerAutoSizeCols(e).then(t,n));const{colKeys:o,skipHeader:u,skipHeaderGroups:d,stopAtGroup:f,defaultMaxWidth:g,defaultMinWidth:v,columnLimits:w=[],source:S="api"}=e,{animationFrameSvc:R,renderStatus:_,colModel:F,autoWidthCalc:M,visibleCols:I}=this.beans;if(R?.flushAllFrames(),this.timesDelayed<5&&_&&(!_.areHeaderCellsRendered()||!_.areCellsRendered())){this.timesDelayed++,setTimeout(()=>{this.isAlive()&&this.innerAutoSizeCols(e).then(t,n)});return}this.timesDelayed=0;const N=new Set;let B=-1;const H=Object.fromEntries(w.map(({colId:z,...j})=>[z,j])),U=u??this.gos.get("skipHeaderOnAutoSize"),$=d??U;for(;B!==0;){B=0;const z=[];for(const j of o){if(!j||isSpecialCol(j))continue;const J=F.getCol(j);if(!J||N.has(J)||J.getColDef().suppressAutoSize)continue;const ie=M.getPreferredWidthForColumn(J,U);if(ie>0){const se=H[J.colId]??{};se.minWidth??(se.minWidth=v),se.maxWidth??(se.maxWidth=g);const fe=normaliseColumnWidth(J,ie,se);J.setActualWidth(fe,S),N.add(J),B++}z.push(J)}z.length&&I.refresh(S)}$||this.autoSizeColumnGroupsByColumns(o,S,f),t(N)})}autoSizeColumn(e,t,n){this.autoSizeCols({colKeys:[e],skipHeader:n,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,n){const{colModel:o,ctrlsSvc:u}=this.beans,d=new Set,f=o.getColsForKeys(e);for(const v of f){let w=v.getParent();for(;w&&w!=n;)w.isPadding()||d.add(w),w=w.getParent()}let g;for(const v of d){for(const w of u.getHeaderRowContainerCtrls())if(g=w.getHeaderCtrlForColumn(v),g)break;g?.resizeLeafColumnsToFit(t)}}autoSizeAllColumns(e){if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.autoSizeAllColumns(e));return}this.autoSizeCols({colKeys:this.beans.visibleCols.allCols,...e})}addColumnAutosizeListeners(e,t){const n=this.gos.get("skipHeaderOnAutoSize"),o=()=>{this.autoSizeColumn(t,"uiColumnResized",n)};e.addEventListener("dblclick",o);const u=new TouchListener(e);return u.addEventListener("doubleTap",o),()=>{e.removeEventListener("dblclick",o),u.destroy()}}addColumnGroupResize(e,t,n){const o=this.gos.get("skipHeaderOnAutoSize"),u=()=>{const d=[],f=t.getDisplayedLeafColumns();for(const g of f)g.getColDef().suppressAutoSize||d.push(g.getColId());d.length>0&&this.autoSizeCols({colKeys:d,skipHeader:o,stopAtGroup:t,source:"uiColumnResized"}),n()};return e.addEventListener("dblclick",u),()=>e.removeEventListener("dblclick",u)}sizeColumnsToFitGridBody(e,t){if(!this.isAlive())return;const n=getAvailableWidth(this.beans);if(n>0){this.sizeColumnsToFit(n,"sizeColumnsToFit",!1,e);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFitGridBody(e,-1)},500):_warn(29)}sizeColumnsToFit(e,t="sizeColumnsToFit",n,o){if(this.shouldQueueResizeOperations){this.pushResizeOperation(()=>this.sizeColumnsToFit(e,t,n,o));return}const{beans:u}=this,d=o?.animate??!0;d&&setWidthAnimation(u,!0);const f={};for(const{key:B,...H}of o?.columnLimits??[])f[typeof B=="string"?B:B.getColId()]=H;const g=u.visibleCols.allCols;if(e<=0||!g.length)return;const v=getWidthOfColsInList(g);if(o?.onlyScaleUp&&v>e||e===v&&g.every(H=>{if(H.colDef.suppressSizeToFit)return!0;const U=f?.[H.getId()],$=U?.minWidth??o?.defaultMinWidth,z=U?.maxWidth??o?.defaultMaxWidth,j=H.getActualWidth();return($==null||j>=$)&&(z==null||j<=z)}))return;const S=[],R=[];for(const B of g){const H=o?.colKeys?.some(U=>_columnsMatch(B,U))??!0;B.getColDef().suppressSizeToFit||!H?R.push(B):S.push(B)}const _=S.slice(0);let F=!1;const M=B=>{_removeFromArray(S,B),R.push(B)},I={};for(const B of S){o?.onlyScaleUp&&(I[B.getColId()]=B.getActualWidth()),B.resetActualWidth(t);const H=f?.[B.getId()],U=H?.minWidth??o?.defaultMinWidth??-1/0,$=H?.maxWidth??o?.defaultMaxWidth??1/0,z=B.getActualWidth(),j=Math.max(Math.min(z,$),U);j!=z&&B.setActualWidth(j,t,!0)}for(;!F;){F=!0;const B=e-getWidthOfColsInList(R);if(B<=0)for(const H of S){const U=f?.[H.getId()]?.minWidth??o?.defaultMinWidth??H.minWidth;H.setActualWidth(U,t,!0)}else{const H=B/getWidthOfColsInList(S);let U=B;for(let $=S.length-1;$>=0;$--){const z=S[$],j=z.getColId(),J=I[j],ie=f?.[j],se=ie?.minWidth??o?.defaultMinWidth??J,fe=ie?.maxWidth??o?.defaultMaxWidth,de=Math.max(se??-1/0,z.getMinWidth()),Ce=Math.min(fe??1/0,z.getMaxWidth());let be=Math.round(z.getActualWidth()*H);be<de?(be=de,M(z),F=!1):be>Ce?(be=Ce,M(z),F=!1):$===0&&(be=U),z.setActualWidth(be,t,!0),U-=be}}}for(const B of _)B.fireColumnWidthChangedEvent(t);const N=u.visibleCols;N.setLeftValues(t),N.updateBodyWidths(),!n&&(dispatchColumnResizedEvent(this.eventSvc,_,!0,t),d&&setWidthAnimation(u,!1))}applyAutosizeStrategy(){const{gos:e,colDelayRenderSvc:t}=this.beans,n=e.get("autoSizeStrategy");n?.type!=="fitGridWidth"&&n?.type!=="fitProvidedWidth"||setTimeout(()=>{if(!this.isAlive())return;const o=n.type;if(o==="fitGridWidth"){const{columnLimits:u,defaultMinWidth:d,defaultMaxWidth:f}=n,g=u?.map(({colId:v,minWidth:w,maxWidth:S})=>({key:v,minWidth:w,maxWidth:S}));this.sizeColumnsToFitGridBody({defaultMinWidth:d,defaultMaxWidth:f,columnLimits:g})}else o==="fitProvidedWidth"&&this.sizeColumnsToFit(n.width,"sizeColumnsToFit");t?.revealColumns(o)})}onFirstDataRendered({colIds:e,...t}){setTimeout(()=>{if(!this.isAlive())return;const n="autosizeColumns";e?this.autoSizeCols({...t,source:n,colKeys:e}):this.autoSizeAllColumns({...t,source:n}),this.beans.colDelayRenderSvc?.revealColumns(t.type)})}processResizeOperations(){this.shouldQueueResizeOperations=!1;for(const e of this.resizeOperationQueue)e();this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}destroy(){this.resizeOperationQueue.length=0,super.destroy()}};function normaliseColumnWidth(e,t,n={}){const o=n.minWidth??e.getMinWidth();t<o&&(t=o);const u=n.maxWidth??e.getMaxWidth();return t>u&&(t=u),t}function getAvailableWidth({ctrlsSvc:e,scrollVisibleSvc:t}){const n=e.getGridBodyCtrl(),u=n.isVerticalScrollShowing()?t.getScrollbarWidth():0;return _getInnerWidth(n.eGridBody)-u}var WIDTH_ANIMATION_CLASS="ag-animate-autosize";function setWidthAnimation({ctrlsSvc:e,gos:t},n){if(!t.get("animateColumnResizing")||t.get("enableRtl")||!e.isAlive())return;const o=e.getGridBodyCtrl().eGridBody.classList;n?o.add(WIDTH_ANIMATION_CLASS):o.remove(WIDTH_ANIMATION_CLASS)}var ColumnAutoSizeModule={moduleName:"ColumnAutoSize",version:VERSION,beans:[ColumnAutosizeService],apiFunctions:{sizeColumnsToFit,autoSizeColumns,autoSizeAllColumns},dependsOn:[AutoWidthModule],css:[columnAutoSizeCSS]};function isColumnHovered(e,t){return!!e.colHover?.isHovered(t)}var HoverFeature=class extends BeanStub{constructor(e,t){super(),this.columns=e,this.element=t,this.destroyManagedListeners=[],this.enableFeature=n=>{const{beans:o,gos:u,element:d,columns:f}=this,g=o.colHover;if(n??!!u.get("columnHoverHighlight"))this.destroyManagedListeners=this.addManagedElementListeners(d,{mouseover:g.setMouseOver.bind(g,f),mouseout:g.clearMouseOver.bind(g)});else{for(const w of this.destroyManagedListeners)w();this.destroyManagedListeners=[]}}}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",({currentValue:e})=>{this.enableFeature(e)}),this.enableFeature()}destroy(){super.destroy(),this.destroyManagedListeners=null}},CSS_COLUMN_HOVER="ag-column-hover",ColumnHoverService=class extends BeanStub{constructor(){super(...arguments),this.beanName="colHover"}postConstruct(){this.addManagedPropertyListener("columnHoverHighlight",({currentValue:e})=>{e||this.clearMouseOver()})}setMouseOver(e){this.updateState(e)}clearMouseOver(){this.updateState(null)}isHovered(e){if(!this.gos.get("columnHoverHighlight"))return!1;const t=this.selectedColumns;return!!t&&t.indexOf(e)>=0}addHeaderColumnHoverListener(e,t,n){const o=()=>{const u=this.isHovered(n);t.toggleCss("ag-column-hover",u)};e.addManagedEventListeners({columnHoverChanged:o}),o()}onCellColumnHover(e,t){if(!t)return;const n=this.isHovered(e);t.toggleCss(CSS_COLUMN_HOVER,n)}addHeaderFilterColumnHoverListener(e,t,n,o){this.createHoverFeature(e,[n],o);const u=()=>{const d=this.isHovered(n);t.toggleCss("ag-column-hover",d)};e.addManagedEventListeners({columnHoverChanged:u}),u()}createHoverFeature(e,t,n){e.createManagedBean(new HoverFeature(t,n))}updateState(e){this.selectedColumns=e,this.eventSvc.dispatchEvent({type:"columnHoverChanged"})}},ColumnHoverModule={moduleName:"ColumnHover",version:VERSION,beans:[ColumnHoverService],apiFunctions:{isColumnHovered}},GridSerializer=class extends BeanStub{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleCols=e.visibleCols,this.colModel=e.colModel,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel}serialize(e,t={}){const{allColumns:n,columnKeys:o,skipRowGroups:u,exportRowNumbers:d}=t,f=this.getColumnsToExport({allColumns:n,skipRowGroups:u,columnKeys:o,exportRowNumbers:d});return[this.prepareSession(f),this.prependContent(t),this.exportColumnGroups(t,f),this.exportHeaders(t,f),this.processPinnedTopRows(t,f),this.processRows(t,f),this.processPinnedBottomRows(t,f),this.appendContent(t)].reduce((g,v)=>v(g),e).parse()}processRow(e,t,n,o){const u=t.shouldRowBeSkipped||(()=>!1),f=t.rowPositions!=null||!!t.onlySelected,g=this.gos.get("groupHideOpenParents")&&!f,v=this.colModel.isPivotMode()?o.leafGroup:!o.group,w=!!o.footer,S=o.allChildrenCount===1&&o.childrenAfterGroup?.length===1&&_canSkipShowingRowGroup(this.gos,o);if(!v&&!w&&(t.skipRowGroups||S||g)||t.onlySelected&&!o.isSelected()||t.skipPinnedTop&&o.rowPinned==="top"||t.skipPinnedBottom&&o.rowPinned==="bottom"||o.stub||o.level===-1&&!v&&!w||u(_addGridCommonParams(this.gos,{node:o})))return;const F=e.onNewBodyRow(o);if(n.forEach((M,I)=>{F.onColumn(M,I,o)}),t.getCustomContentBelowRow){const M=t.getCustomContentBelowRow(_addGridCommonParams(this.gos,{node:o}));M&&e.addCustomContent(M)}}appendContent(e){return t=>{const n=e.appendContent;return n&&t.addCustomContent(n),t}}prependContent(e){return t=>{const n=e.prependContent;return n&&t.addCustomContent(n),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return n=>{if(!e.skipColumnGroupHeaders){const o=new GroupInstanceIdCreator,{colGroupSvc:u}=this.beans,d=u?u.createColumnGroups({columns:t,idCreator:o,pinned:null,isStandaloneStructure:!0}):t;this.recursivelyAddHeaderGroups(d,n,e.processGroupHeaderCallback)}return n}}exportHeaders(e,t){return n=>{if(!e.skipColumnHeaders){const o=n.onNewHeaderRow();t.forEach((u,d)=>{o.onColumn(u,d,void 0)})}return n}}processPinnedTopRows(e,t){return n=>{const o=this.processRow.bind(this,n,e,t);return e.rowPositions?e.rowPositions.filter(u=>u.rowPinned==="top").sort((u,d)=>u.rowIndex-d.rowIndex).map(u=>this.pinnedRowModel?.getPinnedTopRow(u.rowIndex)).forEach(o):this.pinnedRowModel?.isManual()||this.pinnedRowModel?.forEachPinnedRow("top",o),n}}processRows(e,t){return n=>{const o=this.rowModel,u=_isClientSideRowModel(this.gos),d=_isServerSideRowModel(this.gos),f=!u&&e.onlySelected,g=this.processRow.bind(this,n,e,t),{exportedRows:v="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter(w=>w.rowPinned==null).sort((w,S)=>w.rowIndex-S.rowIndex).map(w=>o.getRow(w.rowIndex)).forEach(g);else if(this.colModel.isPivotMode())u?o.forEachPivotNode(g,!0,v==="filteredAndSorted"):d?o.forEachNodeAfterFilterAndSort(g,!0):o.forEachNode(g);else if(e.onlySelectedAllPages||f){const w=this.beans.selectionSvc?.getSelectedNodes()??[];this.replicateSortedOrder(w),w.forEach(g)}else v==="all"?o.forEachNode(g):u||d?o.forEachNodeAfterFilterAndSort(g,!0):o.forEachNode(g);return n}}replicateSortedOrder(e){const{sortSvc:t,rowNodeSorter:n}=this.beans;if(!t||!n)return;const o=t.getSortOptions(),u=(d,f)=>d.rowIndex!=null&&f.rowIndex!=null?d.rowIndex-f.rowIndex:d.level===f.level?d.parent?.id===f.parent?.id?n.compareRowNodes(o,d,f)||(d.rowIndex??-1)-(f.rowIndex??-1):u(d.parent,f.parent):d.level>f.level?u(d.parent,f):u(d,f.parent);e.sort(u)}processPinnedBottomRows(e,t){return n=>{const o=this.processRow.bind(this,n,e,t);return e.rowPositions?e.rowPositions.filter(u=>u.rowPinned==="bottom").sort((u,d)=>u.rowIndex-d.rowIndex).map(u=>this.pinnedRowModel?.getPinnedBottomRow(u.rowIndex)).forEach(o):this.pinnedRowModel?.isManual()||this.pinnedRowModel?.forEachPinnedRow("bottom",o),n}}getColumnsToExport(e){const{allColumns:t=!1,skipRowGroups:n=!1,exportRowNumbers:o=!1,columnKeys:u}=e,{colModel:d,gos:f,visibleCols:g}=this,v=d.isPivotMode(),w=_=>isColumnSelectionCol(_)?!1:!isRowNumberCol(_)||o;if(u?.length)return d.getColsForKeys(u).filter(w);const S=f.get("treeData");let R=[];return t&&!v?R=d.getCols():R=g.allCols,R=R.filter(_=>w(_)&&(n&&!S?!isColumnGroupAutoCol(_):!0)),R}recursivelyAddHeaderGroups(e,t,n){const o=[];for(const u of e){const d=u;if(d.getChildren)for(const f of d.getChildren()??[])o.push(f)}e.length>0&&isColumnGroup(e[0])&&this.doAddHeaderHeader(t,e,n),o&&o.length>0&&this.recursivelyAddHeaderGroups(o,t,n)}doAddHeaderHeader(e,t,n){const o=e.onNewHeaderGroupingRow();let u=0;for(const d of t){const f=d;let g;n?g=n(_addGridCommonParams(this.gos,{columnGroup:f})):g=this.beans.colNames.getDisplayNameForColumnGroup(f,"header");const w=(f.isExpandable()?f.getLeafColumns():[]).reduce((S,R,_,F)=>{let M=_last(S);return R.getColumnGroupShow()==="open"?(!M||M[1]!=null)&&(M=[_],S.push(M)):M&&M[1]==null&&(M[1]=_-1),_===F.length-1&&M&&M[1]==null&&(M[1]=_),S},[]);o.onColumn(f,g||"",u++,f.getLeafColumns().length-1,w)}}},SharedExportModule={moduleName:"SharedExport",version:VERSION,beans:[GridSerializer]},BaseCreator=class extends BeanStub{getFileName(e){const t=this.getDefaultFileExtension();return e?.length||(e=this.getDefaultFileName()),e.includes(".")?e:`${e}.${t}`}getData(e){return this.beans.gridSerializer.serialize(this.createSerializingSession(e),e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}};function _downloadFile(e,t){const n=document.defaultView||window;if(!n){_warn(52);return}const o=document.createElement("a"),u=n.URL.createObjectURL(t);o.setAttribute("href",u),o.setAttribute("download",e),o.style.display="none",document.body.appendChild(o),o.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:n})),o.remove(),n.setTimeout(()=>{n.URL.revokeObjectURL(u)},0)}var BaseGridSerializingSession=class{constructor(e){this.valueFrom="data";const{colModel:t,rowGroupColsSvc:n,colNames:o,valueSvc:u,gos:d,processCellCallback:f,processHeaderCallback:g,processGroupHeaderCallback:v,processRowGroupCallback:w,valueFrom:S}=e;this.colModel=t,this.rowGroupColsSvc=n,this.colNames=o,this.valueSvc=u,this.gos=d,this.processCellCallback=f,this.processHeaderCallback=g,this.processGroupHeaderCallback=v,this.processRowGroupCallback=w,S&&(this.valueFrom=S)}prepare(e){}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e){const{column:t,node:n,currentColumnIndex:o,accumulatedRowIndex:u,type:d,useRawFormula:f}=e,g=o===0&&_isFullWidthGroupRow(this.gos,n,this.colModel.isPivotMode());if(this.processRowGroupCallback&&(this.gos.get("treeData")||n.group)&&(t.isRowGroupDisplayed(n.rowGroupColumn?.getColId()??"")||g))return{value:this.processRowGroupCallback(_addGridCommonParams(this.gos,{column:t,node:n}))??""};if(this.processCellCallback)return{value:this.processCellCallback(_addGridCommonParams(this.gos,{accumulatedRowIndex:u,column:t,node:n,value:this.valueSvc.getValueForDisplay({column:t,node:n,from:this.valueFrom}).value,type:d,parseValue:M=>this.valueSvc.parseValue(t,n,M,this.valueSvc.getValue(t,n,this.valueFrom)),formatValue:M=>this.valueSvc.formatValue(t,n,M)??M}))??""};const v=this.gos.get("treeData"),w=this.valueSvc,S=n.level===-1&&n.footer,R=t.colDef.showRowGroup===!0&&(n.group||v);if(!S&&(g||R)){let M="",I=n;for(;I&&I.level!==-1;){const{value:N,valueFormatted:B}=w.getValueForDisplay({column:g?void 0:t,node:I,includeValueFormatted:!0,exporting:!0,from:this.valueFrom});M=` -> ${B??N??""}${M}`,I=I.parent}return{value:M,valueFormatted:M}}const{value:_,valueFormatted:F}=w.getValueForDisplay({column:t,node:n,includeValueFormatted:!0,exporting:!0,useRawFormula:f,from:this.valueFrom});return{value:_??"",valueFormatted:F}}getHeaderName(e,t){return e?e(_addGridCommonParams(this.gos,{column:t})):this.colNames.getDisplayNameForColumn(t,"csv",!0)}},LINE_SEPARATOR=`\r
`,CsvSerializingSession=class extends BaseGridSerializingSession{constructor(e){super(e),this.config=e,this.isFirstLine=!0,this.result="";const{suppressQuotes:t,columnSeparator:n}=e;this.suppressQuotes=t,this.columnSeparator=n}addCustomContent(e){e&&(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,LINE_SEPARATOR),this.result+=e):e.forEach(t=>{this.beginNewLine(),t.forEach((n,o)=>{o!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(n.data.value||""),n.mergeAcross&&this.appendEmptyCells(n.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,n,o){n!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(o)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,n){t!=0&&(this.result+=this.columnSeparator);const o=this.extractRowCellValue({column:e,node:n,currentColumnIndex:t,accumulatedRowIndex:t,type:"csv",useRawFormula:!1});this.result+=this.putInQuotes(o.valueFormatted??o.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(e==null)return'""';let t;return typeof e=="string"?t=e:typeof e.toString=="function"?t=e.toString():(_warn(53),t=""),'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=LINE_SEPARATOR),this.isFirstLine=!1}},CsvCreator=class extends BaseCreator{constructor(){super(...arguments),this.beanName="csvCreator"}getMergedParams(e){const t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed()){_warn(51);return}const t=()=>{const o=this.getMergedParams(e),u=this.getData(o),d=new Blob(["\uFEFF",u],{type:"text/plain"}),f=o.fileName,g=typeof f=="function"?f(_addGridCommonParams(this.gos,{})):f;_downloadFile(this.getFileName(g),d)},{overlays:n}=this.beans;n?n.showExportOverlay(t):t()}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){const n=t?Object.assign({},e):this.getMergedParams(e);return this.getData(n)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){const{colModel:t,colNames:n,rowGroupColsSvc:o,valueSvc:u,gos:d}=this.beans,{processCellCallback:f,processHeaderCallback:g,processGroupHeaderCallback:v,processRowGroupCallback:w,suppressQuotes:S,columnSeparator:R,valueFrom:_}=e;return new CsvSerializingSession({colModel:t,colNames:n,valueSvc:u,gos:d,processCellCallback:f||void 0,processHeaderCallback:g||void 0,processGroupHeaderCallback:v||void 0,processRowGroupCallback:w||void 0,suppressQuotes:S||!1,columnSeparator:R||",",rowGroupColsSvc:o,valueFrom:_})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};function getDataAsCsv(e,t){return e.csvCreator?.getDataAsCsv(t)}function exportDataAsCsv(e,t){e.csvCreator?.exportDataAsCsv(t)}var CsvExportModule={moduleName:"CsvExport",version:VERSION,beans:[CsvCreator],apiFunctions:{getDataAsCsv,exportDataAsCsv},dependsOn:[SharedExportModule]},AgTooltipFeature=class extends AgBeanStub{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}postConstruct(){this.refreshTooltip()}setBrowserTooltip(e,t){const n="title",o=this.ctrl.getGui();o&&(e!=null&&(e!=""||t)?o.setAttribute(n,e):o.removeAttribute(n))}updateTooltipText(){const{getTooltipValue:e}=this.ctrl;e&&(this.tooltip=e())}createTooltipFeatureIfNeeded(){if(this.tooltipManager==null){const e=this.beans.registry.createDynamicBean("tooltipStateManager",!0,this.ctrl,()=>this.tooltip);e&&(this.tooltipManager=this.createBean(e,this.beans.context))}}attemptToShowTooltip(){this.tooltipManager?.prepareToShowTooltip()}attemptToHideTooltip(){this.tooltipManager?.hideTooltip()}setTooltipAndRefresh(e){this.tooltip=e,this.refreshTooltip()}refreshTooltip(e){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)):(this.setBrowserTooltip(e?"":null,e),this.createTooltipFeatureIfNeeded())}destroy(){this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context),super.destroy()}},SHOW_SWITCH_TOOLTIP_DIFF=1e3,FADE_OUT_TOOLTIP_TIMEOUT=1e3,INTERACTIVE_HIDE_DELAY=100,lastTooltipHideTime,isLocked=!1,BaseTooltipStateManager=class extends AgBeanStub{constructor(e,t){super(),this.tooltipCtrl=e,this.getTooltipValue=t,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(e){this.popupSvc=e.popupSvc}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const e=this.tooltipCtrl.getGui();this.tooltipTrigger===0&&this.addManagedListeners(e,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===1&&this.addManagedListeners(e,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(e,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(e,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(e){const t=this.gos.get(e);return Math.max(200,t)}getTooltipDelay(e){return this.tooltipCtrl[`getTooltip${e}DelayOverride`]?.()??this.getGridOptionsTooltipDelay(`tooltip${e}Delay`)}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const e=this.gos.get("tooltipTrigger");return!e||e==="hover"?0:1}onMouseEnter(e){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!_isIOSUserAgent()&&(isLocked?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(e)},INTERACTIVE_HIDE_DELAY):this.prepareToShowTooltip(e))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){const t=e.relatedTarget,n=this.tooltipCtrl.getGui(),o=this.tooltipComp?.getGui();this.isInteractingWithTooltip||n.contains(t)||this.interactionEnabled&&o?.contains(t)||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(e){if(this.state!=0||isLocked)return;let t=0;e&&(t=this.isLastTooltipHiddenRecently()?this.getTooltipDelay("SwitchShow"):this.getTooltipDelay("Show")),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),t),this.state=1}isLastTooltipHiddenRecently(){return Date.now()-lastTooltipHideTime<SHOW_SWITCH_TOOLTIP_DIFF}setToDoNothing(e){!e&&this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.clearEventHandlers(),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){const e=this.getTooltipValue(),t=this.tooltipCtrl;if(!_exists(e)||t.shouldDisplayTooltip&&!t.shouldDisplayTooltip()){this.setToDoNothing();return}const n=this.gos.addCommon({location:t.getLocation?.()??"UNKNOWN",value:e,hideTooltipCallback:()=>this.hideTooltip(!0),...t.getAdditionalParams?.()});this.state=2,this.tooltipInstanceCount++;const o=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.createTooltipComp(n,o)}hideTooltip(e){!e&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),lastTooltipHideTime=Date.now()),this.eventSvc.dispatchEvent({type:"tooltipHide",parentGui:this.tooltipCtrl.getGui()}),e&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(e,t){if(this.state!==2||this.tooltipInstanceCount!==e){this.destroyBean(t);return}const o=t.getGui();this.tooltipComp=t,o.classList.contains("ag-tooltip")||o.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&o.classList.add("ag-tooltip-animate"),this.interactionEnabled&&o.classList.add("ag-tooltip-interactive");const u=this.getLocaleTextFunc(),d=this.popupSvc?.addPopup({eChild:o,ariaLabel:u("ariaLabelTooltip","Tooltip")});if(d&&(this.tooltipPopupDestroyFunc=d.hideFunc),this.positionTooltip(),this.tooltipTrigger===1){const f=()=>this.setToDoNothing();[this.onBodyScrollEventCallback]=this.addManagedEventListeners({bodyScroll:f}),this.setEventHandlers(f)}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(o,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners(_getDocument(this.beans),{keydown:f=>{o.contains(f?.target)||this.onKeyDown()}}),this.tooltipTrigger===1&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(o,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventSvc.dispatchEvent({type:"tooltipShow",tooltipGui:o,parentGui:this.tooltipCtrl.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){const e=this.tooltipComp?.getGui(),t=_getActiveDomElement(this.beans);return!!e&&e.contains(t)}onTooltipFocusOut(e){const t=this.tooltipCtrl.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,t.contains(e.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupSvc?.positionPopupUnderMouseEvent({...e,mouseEvent:this.lastMouseEvent}):this.popupSvc?.positionPopupByComponent({...e,eventSource:this.tooltipCtrl.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5})}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const e=this.tooltipPopupDestroyFunc,t=this.tooltipComp,n=this.tooltipTrigger===0?FADE_OUT_TOOLTIP_TIMEOUT:0;window.setTimeout(()=>{e(),this.destroyBean(t)},n),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){for(const e of[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener])e&&e();this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},INTERACTIVE_HIDE_DELAY)}unlockService(){isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("Hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}},AgHighlightTooltipFeature=class extends AgTooltipFeature{constructor(e,t,n){super(e,n),this.highlightTracker=t,this.onHighlight=this.onHighlight.bind(this)}postConstruct(){super.postConstruct(),this.wireHighlightListeners()}wireHighlightListeners(){this.addManagedPropertyListener("tooltipTrigger",({currentValue:e})=>{this.setTooltipMode(e)}),this.setTooltipMode(this.gos.get("tooltipTrigger")),this.highlightTracker.addEventListener("itemHighlighted",this.onHighlight)}onHighlight(e){this.tooltipMode===1&&(e.highlighted?this.attemptToShowTooltip():this.attemptToHideTooltip())}setTooltipMode(e="focus"){this.tooltipMode=e==="focus"?1:0}destroy(){this.highlightTracker.removeEventListener("itemHighlighted",this.onHighlight),super.destroy()}},AgTooltipComponent=class extends AgPopupComponent{constructor(){super({tag:"div",cls:"ag-tooltip"})}init(e){const{value:t}=e,n=this.getGui();n.textContent=_toString(t);const o=e.location.replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase();n.classList.add(`ag-${o}-tooltip`)}},tooltipCSS=".ag-tooltip{background-color:var(--ag-tooltip-background-color);border:var(--ag-tooltip-border);border-radius:var(--ag-border-radius);color:var(--ag-tooltip-text-color);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;white-space:normal;z-index:99999;&:where(.ag-cell-editor-tooltip),&:where(.ag-cell-formula-tooltip){background-color:var(--ag-tooltip-error-background-color);border:var(--ag-tooltip-error-border);color:var(--ag-tooltip-error-text-color);font-weight:500}}.ag-tooltip-custom{position:absolute;z-index:99999}.ag-tooltip-custom:where(:not(.ag-tooltip-interactive)),.ag-tooltip:where(:not(.ag-tooltip-interactive)){pointer-events:none}.ag-tooltip-animate{transition:opacity 1s;&:where(.ag-tooltip-hiding){opacity:0}}",instanceIdSeq=0,WAIT_FOR_POPUP_CONTENT_RESIZE=200,BasePopupService=class extends AgBeanStub{constructor(){super(...arguments),this.beanName="popupSvc",this.popupList=[]}postConstruct(){this.addManagedEventListeners({stylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){const e=this.gos.get("popupParent");return e||this.getDefaultPopupParent()}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:n,nudgeY:o,skipObserver:u}=e;this.positionPopup({ePopup:t,nudgeX:n,nudgeY:o,keepWithinBounds:!0,skipObserver:u,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.additionalParams,e.type,e.ePopup,null,e.mouseEvent)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const{ePopup:t,nudgeX:n,nudgeY:o,keepWithinBounds:u,eventSource:d,alignSide:f="left",position:g="over",type:v}=e,w=d.getBoundingClientRect(),S=this.getParentRect();this.setAlignedTo(d,t);const R=()=>{let _=w.left-S.left;f==="right"&&(_-=t.offsetWidth-w.width);let F;return g==="over"?(F=w.top-S.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),this.shouldRenderUnderOrAbove(t,w,S,e.nudgeY||0)==="under"?F=w.top-S.top+w.height:F=w.top-t.offsetHeight-(o||0)*2-S.top),{x:_,y:F}};this.positionPopup({ePopup:t,nudgeX:n,nudgeY:o,keepWithinBounds:u,updatePosition:R,postProcessCallback:()=>this.callPostProcessPopup(e.additionalParams,v,t,d,null)})}positionPopupForMenu(e){const{eventSource:t,ePopup:n,event:o}=e,u=t.getBoundingClientRect(),d=this.getParentRect();this.setAlignedTo(t,n);let f=!1;const g=()=>{const v=this.keepXYWithinBounds(n,u.top-d.top,0),w=n.clientWidth>0?n.clientWidth:200;f||(n.style.minWidth=`${w}px`,f=!0);const R=d.right-d.left-w;let _;return this.gos.get("enableRtl")?(_=M(),_<0&&(_=F(),this.setAlignedStyles(n,"left")),_>R&&(_=0,this.setAlignedStyles(n,"right"))):(_=F(),_>R&&(_=M(),this.setAlignedStyles(n,"right")),_<0&&(_=0,this.setAlignedStyles(n,"left"))),{x:_,y:v};function F(){return u.right-d.left-2}function M(){return u.left-d.left-w}};this.positionPopup({ePopup:n,keepWithinBounds:!0,updatePosition:g,postProcessCallback:()=>this.callPostProcessPopup(e.additionalParams,"subMenu",n,t,o instanceof MouseEvent?o:void 0)})}shouldRenderUnderOrAbove(e,t,n,o){const u=n.bottom-t.bottom,d=t.top-n.top,f=e.offsetHeight+o;return u>f?"under":d>f||d>u?"above":"under"}setAlignedStyles(e,t){const n=this.getPopupIndex(e);if(n===-1)return;const o=this.popupList[n],{alignedToElement:u}=o;if(!u)return;const d=["right","left","over","above","under"];for(const f of d)u.classList.remove(`ag-has-popup-positioned-${f}`),e.classList.remove(`ag-popup-positioned-${f}`);t&&(u.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}setAlignedTo(e,t){const n=this.getPopupIndex(t);if(n!==-1){const o=this.popupList[n];o.alignedToElement=e}}positionPopup(e){const{ePopup:t,keepWithinBounds:n,nudgeX:o,nudgeY:u,skipObserver:d,updatePosition:f}=e,g={width:0,height:0},v=(w=!1)=>{let{x:S,y:R}=f();w&&t.clientWidth===g.width&&t.clientHeight===g.height||(g.width=t.clientWidth,g.height=t.clientHeight,o&&(S+=o),u&&(R+=u),n&&(S=this.keepXYWithinBounds(t,S,1),R=this.keepXYWithinBounds(t,R,0)),t.style.left=`${S}px`,t.style.top=`${R}px`,e.postProcessCallback&&e.postProcessCallback())};if(v(),!d){const w=_observeResize(this.beans,t,()=>v(!0));setTimeout(()=>w(),WAIT_FOR_POPUP_CONTENT_RESIZE)}}getParentRect(){const e=_getDocument(this.beans);let t=this.getPopupParent();return t===e.body?t=e.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent),_getElementRectWithOffset(t)}keepXYWithinBounds(e,t,n){const o=n===0,u=o?"clientHeight":"clientWidth",d=o?"top":"left",f=o?"height":"width",g=o?"scrollTop":"scrollLeft",v=_getDocument(this.beans),w=v.documentElement,S=this.getPopupParent(),R=e.getBoundingClientRect(),_=S.getBoundingClientRect(),F=v.documentElement.getBoundingClientRect(),M=S===v.body,I=Math.ceil(R[f]);let B=M?(o?_getAbsoluteHeight:_getAbsoluteWidth)(w)+w[g]:S[u];M&&(B-=Math.abs(F[d]-_[d]));const H=B-I;return Math.min(Math.max(t,0),Math.max(H,0))}addPopup(e){const{eChild:t,ariaLabel:n,ariaOwns:o,alwaysOnTop:u,positionCallback:d,anchorToElement:f}=e,g=this.getPopupIndex(t);if(g!==-1)return{hideFunc:this.popupList[g].hideFunc};this.initialisePopupPosition(t);const v=this.createPopupWrapper(t,!!u,n,o),w=this.addEventListenersToPopup({...e,wrapperEl:v});return d&&d(),this.addPopupToPopupList(t,v,w,f),{hideFunc:w}}initialisePopupPosition(e){const n=this.getPopupParent().getBoundingClientRect();_exists(e.style.top)||(e.style.top=`${n.top*-1}px`),_exists(e.style.left)||(e.style.left=`${n.left*-1}px`)}createPopupWrapper(e,t,n,o){const u=this.getPopupParent(),{environment:d,gos:f}=this.beans,g=_createAgElement({tag:"div"});return d.applyThemeClasses(g),g.classList.add("ag-popup"),e.classList.add(f.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||_setAriaRole(e,"dialog"),n?_setAriaLabel(e,n):o&&(e.id||(e.id=`popup-component-${instanceIdSeq}`),_setAriaOwns(o,e.id)),g.appendChild(e),u.appendChild(g),t?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),g}addEventListenersToPopup(e){const t=this.beans,n=_getDocument(t),{wrapperEl:o,eChild:u,closedCallback:d,afterGuiAttached:f,closeOnEsc:g,modal:v,ariaOwns:w}=e;let S=!1;const R=I=>{if(!o.contains(_getActiveDomElement(t)))return;I.key===KeyCode.ESCAPE&&!this.isStopPropagation(I)&&M({keyboardEvent:I})},_=I=>M({mouseEvent:I}),F=I=>M({touchEvent:I}),M=(I={})=>{const{mouseEvent:N,touchEvent:B,keyboardEvent:H,forceHide:U}=I;!U&&(this.isEventFromCurrentPopup({mouseEvent:N,touchEvent:B},u)||S)||(S=!0,o.remove(),n.removeEventListener("keydown",R),n.removeEventListener("mousedown",_),n.removeEventListener("touchstart",F),n.removeEventListener("contextmenu",_),this.eventSvc.removeListener("dragStarted",_),d&&d(N||B||H),this.removePopupFromPopupList(u,w))};return f&&f({hidePopup:M}),window.setTimeout(()=>{g&&n.addEventListener("keydown",R),v&&(n.addEventListener("mousedown",_),this.eventSvc.addListener("dragStarted",_),n.addEventListener("touchstart",F),n.addEventListener("contextmenu",_))},0),M}addPopupToPopupList(e,t,n,o){this.popupList.push({element:e,wrapper:t,hideFunc:n,instanceId:instanceIdSeq,isAnchored:!!o}),o&&this.setPopupPositionRelatedToElement(e,o),instanceIdSeq=instanceIdSeq+1}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){const n=this.getPopupIndex(e);if(n===-1)return;const o=this.popupList[n];if(o.stopAnchoringPromise&&o.stopAnchoringPromise.then(d=>d&&d()),o.stopAnchoringPromise=void 0,o.isAnchored=!1,!t)return;const u=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:o.hideFunc});return o.stopAnchoringPromise=u,o.isAnchored=!0,u}removePopupFromPopupList(e,t){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),t&&_setAriaOwns(t,null),this.popupList=this.popupList.filter(n=>n.element!==e)}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),n=t.getBoundingClientRect(),{element:o,ePopup:u}=e,d=o.getBoundingClientRect(),f=R=>Number.parseInt(R.substring(0,R.length-1),10),g=(R,_)=>{const F=n[R]-d[R],M=f(u.style[R]);return{initialDiff:F,lastDiff:F,initial:M,last:M,direction:_}},v=g("top",0),w=g("left",1),S=this.beans.frameworkOverrides;return new AgPromise(R=>{S.wrapIncoming(()=>{_wrapInterval(()=>{const _=t.getBoundingClientRect(),F=o.getBoundingClientRect();if(F.top==0&&F.left==0&&F.height==0&&F.width==0){e.hidePopup();return}const I=(N,B)=>{const H=f(u.style[B]);N.last!==H&&(N.initial=H,N.last=H);const U=_[B]-F[B];if(U!=N.lastDiff){const $=this.keepXYWithinBounds(u,N.initial+N.initialDiff-U,N.direction);u.style[B]=`${$}px`,N.last=$}N.lastDiff=U};I(v,"top"),I(w,"left")},200).then(_=>{R(()=>{_!=null&&window.clearInterval(_)})})},"popupPositioning")})}isEventFromCurrentPopup(e,t){const{mouseEvent:n,touchEvent:o}=e,u=n||o;if(!u)return!1;const d=this.getPopupIndex(t);if(d===-1)return!1;for(let f=d;f<this.popupList.length;f++){const g=this.popupList[f];if(_isElementInEventPath(g.element,u))return!0}return this.isElementWithinCustomPopup(u.target)}isElementWithinCustomPopup(e){const t=_getDocument(this.beans);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const n=this.getWrapper(e);n&&(n.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(n))}bringPopupToFront(e){const t=this.getPopupParent(),n=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),o=n.length,u=this.getWrapper(e);if(!u||o<=1||!t.contains(e))return;const d=[],f=[];for(const _ of n)_!==u&&(_.classList.contains("ag-always-on-top")?f.push(_):d.push(_));const g=[],v=f.length,R=u.classList.contains("ag-always-on-top")||!v?[...d,...f,u]:[...d,u,...f];for(let _=0;_<=o;_++){const F=R[_];if(n[_]===R[_]||F===u)continue;const M=F.querySelectorAll("div");for(const I of M)I.scrollTop!==0&&g.push([I,I.scrollTop]);_===0?t.prepend(F):R[_-1].after(F)}for(;g.length;){const _=g.pop();_[0].scrollTop=_[1]}}handleThemeChange(e){if(e.themeChanged){const t=this.beans.environment;for(const n of this.popupList)t.applyThemeClasses(n.wrapper)}}},PopupService=class extends BasePopupService{getDefaultPopupParent(){return this.beans.ctrlsSvc.get("gridCtrl").getGui()}callPostProcessPopup(e,t,n,o,u){const d=this.gos.getCallback("postProcessPopup");if(d){const{column:f,rowNode:g}=e??{};d({column:f,rowNode:g,ePopup:n,type:t,eventSource:o,mouseEvent:u})}}getActivePopups(){return this.popupList.map(e=>e.element)}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isStopPropagation(e){return _isStopPropagationForAgGrid(e)}},PopupModule={moduleName:"Popup",version:VERSION,beans:[PopupService]};function _isShowTooltipWhenTruncated(e){return e.get("tooltipShowMode")==="whenTruncated"}var getErrorTooltipMessage=(e,t)=>{const n=e;return typeof n.getTranslatedMessage=="function"?n.getTranslatedMessage(t):e.message},getEditErrorsForPosition=(e,t,n)=>{const{editModelSvc:o}=e,u=o?.getCellValidationModel()?.getCellValidation(t)?.errorMessages,d=o?.getRowValidationModel().getRowValidation(t)?.errorMessages,f=u||d;return f?.length?f.join(n("tooltipValidationErrorSeparator",". ")):void 0},getCellTruncationCheck=(e,t)=>{if(_isShowTooltipWhenTruncated(e.gos)){if(t.isCellRenderer()){const o=t.column.getColDef();return!!o.showRowGroup||o.cellRenderer==="agGroupCellRenderer"?_isElementOverflowingCallback(()=>{const d=t.eGui;return d.querySelector(".ag-group-value")||d.querySelector(".ag-cell-value")||d}):void 0}return _isElementOverflowingCallback(()=>{const o=t.eGui;return o.children.length===0?o:o.querySelector(".ag-cell-value")})}},buildCellTooltipDisplayFunctions=(e,t,n)=>{const{editSvc:o}=e,{column:u}=t,d=getCellTruncationCheck(e,t),f=()=>o?.isEditing(t)?!1:d?u.isTooltipEnabled()?d():!1:!0;return{shouldDisplayDefault:f,shouldDisplayColumnTooltip:f,shouldDisplayCustomTooltip:n??f}},resolveCellTooltip=({beans:e,ctrl:t,value:n,displayFunctions:o,translate:u})=>{const{editSvc:d,formula:f,gos:g}=e,{column:v,rowNode:w}=t;if(f?.active&&v.isAllowFormula()){const N=f.getFormulaError(v,w);if(N)return{value:getErrorTooltipMessage(N,u),location:"cellFormula",shouldDisplay:()=>!!f?.getFormulaError(v,w)}}if(!!!d?.isEditing(t)){const N=getEditErrorsForPosition(e,t,u);if(N)return{value:N,location:"cellEditor",shouldDisplay:()=>!d?.isEditing(t)&&!!getEditErrorsForPosition(e,t,u)}}const{shouldDisplayCustomTooltip:R,shouldDisplayColumnTooltip:_}=o;if(n!=null)return{value:n,location:"cell",shouldDisplay:R};const F=v.getColDef(),M=w.data;if(F.tooltipField&&_exists(M))return{value:_getValueUsingField(M,F.tooltipField,v.isTooltipFieldContainsDots()),location:"cell",shouldDisplay:_};const I=F.tooltipValueGetter;return I?{value:I(_addGridCommonParams(g,{location:"cell",colDef:v.getColDef(),column:v,rowIndex:t.cellPosition.rowIndex,node:w,data:w.data,value:t.value,valueFormatted:t.valueFormatted})),location:"cell",shouldDisplay:_}:null},TooltipService=class extends BeanStub{constructor(){super(...arguments),this.beanName="tooltipSvc"}setupHeaderTooltip(e,t,n,o){e&&t.destroyBean(e);const u=this.gos,d=_isShowTooltipWhenTruncated(u),{column:f,eGui:g}=t,v=f.getColDef();!o&&d&&!v.headerComponent&&(o=_isElementOverflowingCallback(()=>g.querySelector(".ag-header-cell-text")));const w="header",R=this.beans.colNames.getDisplayNameForColumn(f,"header",!0),_=n??R,F={getGui:()=>g,getLocation:()=>w,getTooltipValue:()=>n??v?.headerTooltipValueGetter?.(_addGridCommonParams(u,{location:w,colDef:v,column:f,value:_,valueFormatted:R}))??v?.headerTooltip,shouldDisplayTooltip:o,getAdditionalParams:()=>({column:f,colDef:f.getColDef()})};let M=this.createTooltipFeature(F);return M&&(M=t.createBean(M),t.setRefreshFunction("tooltip",()=>M.refreshTooltip())),M}setupHeaderGroupTooltip(e,t,n,o){e&&t.destroyBean(e);const u=this.gos,d=_isShowTooltipWhenTruncated(u),{column:f,eGui:g}=t,v=f.getColGroupDef();!o&&d&&!v?.headerGroupComponent&&(o=_isElementOverflowingCallback(()=>g.querySelector(".ag-header-group-text")));const w="headerGroup",R=this.beans.colNames.getDisplayNameForColumnGroup(f,"header"),_=n??R,F={getGui:()=>g,getLocation:()=>w,getTooltipValue:()=>n??v?.headerTooltipValueGetter?.(_addGridCommonParams(u,{location:w,colDef:v,column:f,value:_,valueFormatted:R}))??v?.headerTooltip,shouldDisplayTooltip:o,getAdditionalParams:()=>{const I={column:f};return v&&(I.colDef=v),I}},M=this.createTooltipFeature(F);return M&&t.createBean(M)}enableCellTooltipFeature(e,t,n){const{beans:o}=this,{column:u,rowNode:d}=e,f=buildCellTooltipDisplayFunctions(o,e,n),g=this.getLocaleTextFunc();let v=null;const w=()=>(v=resolveCellTooltip({beans:o,ctrl:e,value:t,displayFunctions:f,translate:g}),v),R={getGui:()=>e.eGui,getLocation:()=>v?.location??"cell",getTooltipValue:()=>w()?.value,shouldDisplayTooltip:()=>{const _=v??w();return _?_.shouldDisplay?_.shouldDisplay():!0:!1},getAdditionalParams:()=>({column:u,colDef:u.getColDef(),rowIndex:e.cellPosition.rowIndex,node:d,data:d.data,valueFormatted:e.valueFormatted})};return this.createTooltipFeature(R,o)}setupFullWidthRowTooltip(e,t,n,o){const u={getGui:()=>t.getFullWidthElement(),getTooltipValue:()=>n,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:o},d=this.beans,f=d.context;e&&t.destroyBean(e,f);const g=this.createTooltipFeature(u,d);if(g)return t.createBean(g,f)}setupCellEditorTooltip(e,t){const{beans:n}=this,{context:o}=n,u=t.getValidationElement?.(!0)||!t.isPopup?.()&&e.eGui;if(!u)return;const d={getGui:()=>u,getTooltipValue:()=>getEditErrorsForPosition(n,e,this.getLocaleTextFunc()),getLocation:()=>"cellEditor",shouldDisplayTooltip:()=>{const{editModelSvc:g}=n,v=g?.getRowValidationModel()?.getRowValidationMap(),w=g?.getCellValidationModel()?.getCellValidationMap(),S=!!v&&v.size>0,R=!!w&&w.size>0;return S||R}},f=this.createTooltipFeature(d,n);if(f)return e.createBean(f,o)}initCol(e){const{colDef:t}=e;e.tooltipEnabled=_exists(t.tooltipField)||_exists(t.tooltipValueGetter)||_exists(t.tooltipComponent)}createTooltipFeature(e,t){return this.beans.registry.createDynamicBean("tooltipFeature",!1,e,t)}},TooltipStateManager=class extends BaseTooltipStateManager{createTooltipComp(e,t){_getTooltipCompDetails(this.beans.userCompFactory,e)?.newAgStackInstance().then(t)}setEventHandlers(e){[this.onColumnMovedEventCallback]=this.addManagedEventListeners({columnMoved:e})}clearEventHandlers(){this.onColumnMovedEventCallback?.(),this.onColumnMovedEventCallback=void 0}},TooltipModule={moduleName:"Tooltip",version:VERSION,beans:[TooltipService],dynamicBeans:{tooltipFeature:AgTooltipFeature,highlightTooltipFeature:AgHighlightTooltipFeature,tooltipStateManager:TooltipStateManager},userComponents:{agTooltipComponent:AgTooltipComponent},dependsOn:[PopupModule],css:[tooltipCSS]},UndoRedoAction=class{constructor(e){this.cellValueChanges=e}},RangeUndoRedoAction=class extends UndoRedoAction{constructor(e,t,n,o){super(e),this.initialRange=t,this.finalRange=n,this.ranges=o}},DEFAULT_STACK_SIZE=10,UndoRedoStack=class{constructor(e){this.actionStack=[],this.maxStackSize=e||DEFAULT_STACK_SIZE,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},UndoRedoService=class extends BeanStub{constructor(){super(...arguments),this.beanName="undoRedo",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.batchEditing=!1,this.bulkEditing=!1,this.onCellValueChanged=e=>{const t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},n=this.activeCellEdit!==null&&_areCellsEqual(this.activeCellEdit,t),o=this.activeRowEdit!==null&&_isSameRow(this.activeRowEdit,t);if(!(n||o||this.isPasting||this.isRangeInAction))return;const{rowPinned:d,rowIndex:f,column:g,oldValue:v,value:w}=e,S={rowPinned:d,rowIndex:f,columnId:g.getColId(),newValue:w,oldValue:v};this.cellValueChanges.push(S)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}postConstruct(){const{gos:e,ctrlsSvc:t}=this.beans;if(!e.get("undoRedoCellEditing"))return;const n=e.get("undoRedoCellEditingLimit");if(n<=0)return;this.undoStack=new UndoRedoStack(n),this.redoStack=new UndoRedoStack(n),this.addListeners();const o=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:u=>{u.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:o,newColumnsLoaded:o,columnGroupOpened:o,columnRowGroupChanged:o,columnMoved:o,columnPinned:o,columnVisible:o,rowDragEnd:o}),t.whenReady(this,u=>{this.gridBodyCtrl=u.gridBodyCtrl})}getCurrentUndoStackSize(){return this.undoStack?.getCurrentStackSize()??0}getCurrentRedoStackSize(){return this.redoStack?.getCurrentStackSize()??0}undo(e){const{eventSvc:t,undoStack:n,redoStack:o}=this;t.dispatchEvent({type:"undoStarted",source:e});const u=this.undoRedo(n,o,"initialRange","oldValue","undo");t.dispatchEvent({type:"undoEnded",source:e,operationPerformed:u})}redo(e){const{eventSvc:t,undoStack:n,redoStack:o}=this;t.dispatchEvent({type:"redoStarted",source:e});const u=this.undoRedo(o,n,"finalRange","newValue","redo");t.dispatchEvent({type:"redoEnded",source:e,operationPerformed:u})}undoRedo(e,t,n,o,u){if(!e)return!1;const d=e.pop();return d?.cellValueChanges?(this.processAction(d,f=>f[o],u),d instanceof RangeUndoRedoAction?this.processRange(d.ranges||[d[n]]):this.processCell(d.cellValueChanges),t.push(d),!0):!1}processAction(e,t,n){for(const o of e.cellValueChanges){const{rowIndex:u,rowPinned:d,columnId:f}=o,g={rowIndex:u,rowPinned:d},v=_getRowNode(this.beans,g);v.displayed&&v.setDataValue(f,t(o),n)}}processRange(e){let t;const n=this.beans.rangeSvc;n.removeAllCellRanges(!0),e.forEach((o,u)=>{if(!o)return;const d=o.startRow,f=o.endRow;u===e.length-1&&(t={rowPinned:d.rowPinned,rowIndex:d.rowIndex,columnId:o.startColumn.getColId()},this.setLastFocusedCell(t));const g={rowStartIndex:d.rowIndex,rowStartPinned:d.rowPinned,rowEndIndex:f.rowIndex,rowEndPinned:f.rowPinned,columnStart:o.startColumn,columns:o.columns};n.addCellRange(g)})}processCell(e){const t=e[0],{rowIndex:n,rowPinned:o}=t,u={rowIndex:n,rowPinned:o},d=_getRowNode(this.beans,u),f={rowPinned:t.rowPinned,rowIndex:d.rowIndex,columnId:t.columnId};this.setLastFocusedCell(f)}setLastFocusedCell(e){const{rowIndex:t,columnId:n,rowPinned:o}=e,{colModel:u,focusSvc:d,rangeSvc:f}=this.beans,g=u.getCol(n);if(!g)return;const{scrollFeature:v}=this.gridBodyCtrl;v.ensureIndexVisible(t),v.ensureColumnVisible(g);const w={rowIndex:t,column:g,rowPinned:o};d.setFocusedCell({...w,forceBrowserFocus:!0}),f?.setRangeToCell(w)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{const e=new UndoRedoAction(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const n=new UndoRedoAction(this.cellValueChanges);this.pushActionsToUndoStack(n)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{const e=new UndoRedoAction(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{const t=new RangeUndoRedoAction(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;const{rangeSvc:t,gos:n}=this.beans;t&&_isCellSelectionEnabled(n)?e=new RangeUndoRedoAction(this.cellValueChanges,void 0,void 0,[...t.getCellRanges()]):e=new UndoRedoAction(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1},batchEditingStarted:()=>this.startBigChange("batchEditing"),batchEditingStopped:({changes:e})=>this.stopBigChange("batchEditing",e),bulkEditingStarted:()=>this.startBigChange("bulkEditing"),bulkEditingStopped:({changes:e})=>this.stopBigChange("bulkEditing",e)})}startBigChange(e){this.updateBigChange(e,!0)}updateBigChange(e,t){e==="bulkEditing"?this.bulkEditing=t:this.batchEditing=t}stopBigChange(e,t){if(e==="bulkEditing"&&!this.bulkEditing||e==="batchEditing"&&!this.batchEditing||(this.updateBigChange(e,!1),t?.length===0))return;const n=new UndoRedoAction(t??[]);this.pushActionsToUndoStack(n),this.cellValueChanges=[]}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}},cellEditingCSS=".ag-cell-inline-editing{border:var(--ag-cell-editing-border)!important;border-radius:var(--ag-border-radius);box-shadow:var(--ag-cell-editing-shadow);padding:0;z-index:1;.ag-cell-edit-wrapper,.ag-cell-editor,.ag-cell-wrapper,:where(.ag-cell-editor) .ag-input-field-input,:where(.ag-cell-editor) .ag-wrapper{height:100%;line-height:normal;min-height:100%;width:100%}&.ag-cell-editing-error{border-color:var(--ag-invalid-color)!important}}:where(.ag-popup-editor) .ag-large-text{background-color:var(--ag-background-color);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);padding:0}.ag-large-text-input{display:block;height:auto;padding:var(--ag-cell-horizontal-padding)}:where(.ag-rtl .ag-large-text-input) .ag-text-area-input{resize:none}:where(.ag-ltr) .ag-checkbox-edit{padding-left:var(--ag-cell-horizontal-padding)}:where(.ag-rtl) .ag-checkbox-edit{padding-right:var(--ag-cell-horizontal-padding)}:where(.ag-row.ag-row-editing-invalid .ag-cell-inline-editing){opacity:.8}.ag-popup-editor{position:absolute;-webkit-user-select:none;-moz-user-select:none;user-select:none}",CheckboxCellEditorElement={tag:"div",cls:"ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit",children:[{tag:"ag-checkbox",ref:"eEditor",role:"presentation"}]},CheckboxCellEditor=class extends AgAbstractCellEditor{constructor(){super(CheckboxCellEditorElement,[AgCheckboxSelector]),this.eEditor=RefPlaceholder}initialiseEditor(e){const t=e.value??void 0,n=this.eEditor;n.setValue(t),n.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListeners(n,{fieldValueChanged:u=>this.setAriaLabel(u.selected)})}getValue(){return this.eEditor.getValue()}focusIn(){this.eEditor.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const t=this.getLocaleTextFunc(),n=_getAriaCheckboxStateName(t,e),o=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eEditor.setInputAriaLabel(`${o} (${n})`)}getValidationElement(e){return e?this.params.eGridCell:this.eEditor.getInputElement()}getValidationErrors(){const{params:e}=this,{getValidationErrors:t}=e,n=this.getValue();return t?t({value:n,internalErrors:null,cellEditorParams:e}):null}},AgInputTextField=class extends AgAbstractInputField{constructor(e,t="ag-text-field",n="text"){super(e,t,n)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){const n=this.eInput;return n.value!==e&&(n.value=_exists(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}setCustomValidity(e){const t=this.eInput,n=e.length>0;t.setCustomValidity(e),n&&t.reportValidity(),_setAriaInvalid(t,n)}preventDisallowedCharacters(){const e=new RegExp(`[${this.config.allowedCharPattern}]`),t=n=>{_isEventFromPrintableCharacter(n)&&n.key&&!e.test(n.key)&&n.preventDefault()};this.addManagedListeners(this.eInput,{keydown:t,paste:n=>{n.clipboardData?.getData("text")?.split("").some(u=>!e.test(u))&&n.preventDefault()}})}},AgInputTextFieldSelector={selector:"AG-INPUT-TEXT-FIELD",component:AgInputTextField},AgInputDateField=class extends AgInputTextField{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();const e=_isBrowserSafari();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){_getActiveDomElement(this.beans)===this.eInput&&e.preventDefault()}setMin(e){const t=e instanceof Date?_serialiseDate(e??null,!!this.includeTime)??void 0:e;return this.min===t?this:(this.min=t,_addOrRemoveAttribute(this.eInput,"min",t),this)}setMax(e){const t=e instanceof Date?_serialiseDate(e??null,!!this.includeTime)??void 0:e;return this.max===t?this:(this.max=t,_addOrRemoveAttribute(this.eInput,"max",t),this)}setStep(e){return this.step===e?this:(this.step=e,_addOrRemoveAttribute(this.eInput,"step",e),this)}setIncludeTime(e){return this.includeTime===e?this:(this.includeTime=e,super.setInputType(e?"datetime-local":"date"),e&&this.setStep(1),this)}getDate(){if(this.eInput.validity.valid)return _parseDateTimeFromString(this.getValue())??void 0}setDate(e,t){this.setValue(_serialiseDate(e??null,this.includeTime),t)}},AgInputDateFieldSelector={selector:"AG-INPUT-DATE-FIELD",component:AgInputDateField},SimpleCellEditor=class extends AgAbstractCellEditor{constructor(e){super(),this.cellEditorInput=e,this.eEditor=RefPlaceholder}initialiseEditor(e){const{cellEditorInput:t}=this;this.setTemplate({tag:"div",cls:"ag-cell-edit-wrapper",children:[t.getTemplate()]},t.getAgComponents());const{eEditor:n}=this,{cellStartedEdit:o,eventKey:u,suppressPreventDefault:d}=e;n.getInputElement().setAttribute("title",""),t.init(n,e);let f,g=!0;o?(this.focusAfterAttached=!0,u===KeyCode.BACKSPACE||u===KeyCode.DELETE?f="":u&&u.length===1?d?g=!1:f=u:(f=t.getStartValue(),u!==KeyCode.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,f=t.getStartValue()),g&&f!=null&&n.setStartValue(f),this.addGuiEventListener("keydown",v=>{const{key:w}=v;(w===KeyCode.PAGE_UP||w===KeyCode.PAGE_DOWN)&&v.preventDefault()})}afterGuiAttached(){const e=this.getLocaleTextFunc(),t=this.eEditor;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;_isBrowserSafari()||t.getFocusableElement().focus();const n=t.getInputElement();this.highlightAllOnFocus?n.select():this.cellEditorInput.setCaret?.()}focusIn(){const{eEditor:e}=this,t=e.getFocusableElement(),n=e.getInputElement();t.focus(),n.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}getValidationElement(){return this.eEditor.getInputElement()}getValidationErrors(){return this.cellEditorInput.getValidationErrors()}},DateCellElement={tag:"ag-input-date-field",ref:"eEditor",cls:"ag-cell-editor"},DateCellEditorInput=class{constructor(e,t){this.getDataTypeService=e,this.getLocaleTextFunc=t}getTemplate(){return DateCellElement}getAgComponents(){return[AgInputDateFieldSelector]}init(e,t){this.eEditor=e,this.params=t;const{min:n,max:o,step:u,colDef:d}=t;n!=null&&e.setMin(n),o!=null&&e.setMax(o),u!=null&&e.setStep(u),this.includeTime=t.includeTime??this.getDataTypeService()?.getDateIncludesTimeFlag?.(d.cellDataType),this.includeTime!=null&&e.setIncludeTime(this.includeTime)}getValidationErrors(){const t=this.eEditor.getInputElement().valueAsDate,{params:n}=this,{min:o,max:u,getValidationErrors:d}=n;let f=[];const g=this.getLocaleTextFunc();if(t instanceof Date&&!isNaN(t.getTime())){if(o){const v=o instanceof Date?o:new Date(o);if(t<v){const w=v.toLocaleDateString();f.push(g("minDateValidation",`Date must be after ${w}`,[w]))}}if(u){const v=u instanceof Date?u:new Date(u);if(t>v){const w=v.toLocaleDateString();f.push(g("maxDateValidation",`Date must be before ${w}`,[w]))}}}return f.length||(f=null),d?d({value:t,cellEditorParams:n,internalErrors:f}):f}getValue(){const{eEditor:e,params:t}=this,n=e.getDate();return!_exists(n)&&!_exists(t.value)?t.value:n??null}getStartValue(){const{value:e}=this.params;if(e instanceof Date)return _serialiseDate(e,this.includeTime??!1)}},DateCellEditor=class extends SimpleCellEditor{constructor(){super(new DateCellEditorInput(()=>this.beans.dataTypeSvc,()=>this.getLocaleTextFunc()))}},DateStringCellElement={tag:"ag-input-date-field",ref:"eEditor",cls:"ag-cell-editor"},DateStringCellEditorInput=class{constructor(e,t){this.getDataTypeService=e,this.getLocaleTextFunc=t}getTemplate(){return DateStringCellElement}getAgComponents(){return[AgInputDateFieldSelector]}init(e,t){this.eEditor=e,this.params=t;const{min:n,max:o,step:u,colDef:d}=t;n!=null&&e.setMin(n),o!=null&&e.setMax(o),u!=null&&e.setStep(u),this.includeTime=t.includeTime??this.getDataTypeService()?.getDateIncludesTimeFlag?.(d.cellDataType),this.includeTime!=null&&e.setIncludeTime(this.includeTime)}getValidationErrors(){const{eEditor:e,params:t}=this,n=e.getInputElement().value,o=this.formatDate(this.parseDate(n??void 0)),{min:u,max:d,getValidationErrors:f}=t;let g=[];if(o){const v=new Date(o),w=this.getLocaleTextFunc();if(u){const S=new Date(u);if(v<S){const R=S.toLocaleDateString();g.push(w("minDateValidation",`Date must be after ${R}`,[R]))}}if(d){const S=new Date(d);if(v>S){const R=S.toLocaleDateString();g.push(w("maxDateValidation",`Date must be before ${R}`,[R]))}}}return g.length||(g=null),f?f({value:this.getValue(),cellEditorParams:t,internalErrors:g}):g}getValue(){const{params:e,eEditor:t}=this,n=this.formatDate(t.getDate());return!_exists(n)&&!_exists(e.value)?e.value:e.parseValue(n??"")}getStartValue(){return _serialiseDate(this.parseDate(this.params.value??void 0)??null,this.includeTime??!1)}parseDate(e){const t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):_parseDateTimeFromString(e)??void 0}formatDate(e){const t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):_serialiseDate(e??null,this.includeTime??!1)??void 0}},DateStringCellEditor=class extends SimpleCellEditor{constructor(){super(new DateStringCellEditorInput(()=>this.beans.dataTypeSvc,()=>this.getLocaleTextFunc()))}},AgInputTextArea=class extends AgAbstractInputField{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){const n=super.setValue(e,t);return this.eInput.value=e,n}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}},AgInputTextAreaSelector={selector:"AG-INPUT-TEXT-AREA",component:AgInputTextArea},LargeTextCellElement={tag:"div",cls:"ag-large-text",children:[{tag:"ag-input-text-area",ref:"eEditor",cls:"ag-large-text-input"}]},LargeTextCellEditor=class extends AgAbstractCellEditor{constructor(){super(LargeTextCellElement,[AgInputTextAreaSelector]),this.eEditor=RefPlaceholder}initialiseEditor(e){const{eEditor:t}=this,{cellStartedEdit:n,eventKey:o,maxLength:u,cols:d,rows:f}=e;this.focusAfterAttached=n,t.getInputElement().setAttribute("title",""),t.setMaxLength(u||200).setCols(d||60).setRows(f||10);let g;n?(this.focusAfterAttached=!0,o===KeyCode.BACKSPACE||o===KeyCode.DELETE?g="":o&&o.length===1?g=o:(g=this.getStartValue(e),o!==KeyCode.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,g=this.getStartValue(e)),g!=null&&t.setValue(g,!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}getStartValue(e){const{value:t}=e;return t?.toString()??t}onKeyDown(e){const t=e.key;(t===KeyCode.LEFT||t===KeyCode.UP||t===KeyCode.RIGHT||t===KeyCode.DOWN||e.shiftKey&&t===KeyCode.ENTER)&&e.stopPropagation()}afterGuiAttached(){const{eEditor:e,focusAfterAttached:t,highlightAllOnFocus:n}=this,o=this.getLocaleTextFunc();e.setInputAriaLabel(o("ariaInputEditor","Input Editor")),t&&(e.getFocusableElement().focus(),n&&e.getInputElement().select())}getValue(){const{eEditor:e,params:t}=this,{value:n}=t,o=e.getValue();return!_exists(o)&&!_exists(n)?n:t.parseValue(o)}getValidationElement(){return this.eEditor.getInputElement()}getValidationErrors(){const{params:e}=this,{maxLength:t,getValidationErrors:n}=e,o=this.getLocaleTextFunc(),u=this.getValue();let d=[];return typeof u=="string"&&t!=null&&u.length>t&&d.push(o("maxLengthValidation",`Must be ${t} characters or fewer.`,[String(t)])),d.length||(d=null),n?n({value:u,internalErrors:d,cellEditorParams:e}):d}},AgInputNumberField=class extends AgInputTextField{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct();const e=this.eInput;this.addManagedListeners(e,{blur:()=>{const d=Number.parseFloat(e.value),f=isNaN(d)?"":this.normalizeValue(d.toString());this.value!==f&&this.setValue(f)},wheel:this.onWheel.bind(this)}),e.step="any";const{precision:t,min:n,max:o,step:u}=this.config;typeof t=="number"&&this.setPrecision(t),typeof n=="number"&&this.setMin(n),typeof o=="number"&&this.setMax(o),typeof u=="number"&&this.setStep(u)}onWheel(e){_getActiveDomElement(this.beans)===this.eInput&&e.preventDefault()}normalizeValue(e){return e===""?"":(this.precision!=null&&(e=this.adjustPrecision(e)),e)}adjustPrecision(e,t){const n=this.precision;if(n==null)return e;if(t){const u=Number.parseFloat(e).toFixed(n);return Number.parseFloat(u).toString()}const o=String(e).split(".");if(o.length>1){if(o[1].length<=n)return e;if(n>0)return`${o[0]}.${o[1].slice(0,n)}`}return o[0]}setMin(e){return this.min===e?this:(this.min=e,_addOrRemoveAttribute(this.eInput,"min",e),this)}setMax(e){return this.max===e?this:(this.max=e,_addOrRemoveAttribute(this.eInput,"max",e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,_addOrRemoveAttribute(this.eInput,"step",e),this)}setValue(e,t){return this.setValueOrInputValue(n=>super.setValue(n,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},e)}setValueOrInputValue(e,t,n){if(_exists(n)){let o=this.isScientificNotation(n);if(o&&this.eInput.validity.valid)return e(n);if(!o){n=this.adjustPrecision(n);const u=this.normalizeValue(n);o=n!=u}if(o)return t(n)}return e(n)}getValue(e=!1){const t=this.eInput;if(!t.validity.valid&&!e)return;const n=t.value;return this.isScientificNotation(n)?this.adjustPrecision(n,!0):super.getValue()}isScientificNotation(e){return typeof e=="string"&&e.includes("e")}},AgInputNumberFieldSelector={selector:"AG-INPUT-NUMBER-FIELD",component:AgInputNumberField},NumberCellElement={tag:"ag-input-number-field",ref:"eEditor",cls:"ag-cell-editor"},NumberCellEditorInput=class{constructor(e){this.getLocaleTextFunc=e}getTemplate(){return NumberCellElement}getAgComponents(){return[AgInputNumberFieldSelector]}init(e,t){this.eEditor=e,this.params=t;const{max:n,min:o,precision:u,step:d}=t;n!=null&&e.setMax(n),o!=null&&e.setMin(o),u!=null&&e.setPrecision(u),d!=null&&e.setStep(d);const f=e.getInputElement();t.preventStepping?e.addManagedElementListeners(f,{keydown:this.preventStepping}):t.showStepperButtons&&f.classList.add("ag-number-field-input-stepper")}getValidationErrors(){const{params:e}=this,{min:t,max:n,getValidationErrors:o}=e,d=this.eEditor.getInputElement().valueAsNumber,f=this.getLocaleTextFunc();let g=[];return typeof d=="number"&&(t!=null&&d<t&&g.push(f("minValueValidation",`Must be greater than or equal to ${t}.`,[String(t)])),n!=null&&d>n&&g.push(f("maxValueValidation",`Must be less than or equal to ${n}.`,[String(n)]))),g.length||(g=null),o?o({value:d,cellEditorParams:e,internalErrors:g}):g}preventStepping(e){(e.key===KeyCode.UP||e.key===KeyCode.DOWN)&&e.preventDefault()}getValue(){const{eEditor:e,params:t}=this,n=e.getValue();if(!_exists(n)&&!_exists(t.value))return t.value;let o=t.parseValue(n);if(o==null)return o;if(typeof o=="string"){if(o==="")return null;o=Number(o)}return isNaN(o)?null:o}getStartValue(){return this.params.value}setCaret(){_isBrowserSafari()&&this.eEditor.getInputElement().focus({preventScroll:!0})}},NumberCellEditor=class extends SimpleCellEditor{constructor(){super(new NumberCellEditorInput(()=>this.getLocaleTextFunc()))}},agListCSS=".ag-list-item{align-items:center;display:flex;height:var(--ag-list-item-height);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;&.ag-active-item{background-color:var(--ag-row-hover-color)}}",ACTIVE_CLASS="ag-active-item",getAgListElement=(e,t)=>({tag:"div",cls:`ag-list-item ag-${e}-list-item`,attrs:{role:"option"},children:[{tag:"span",cls:`ag-list-item-text ag-${e}-list-item-text`,ref:"eText",children:t}]}),AgListItem=class extends AgComponentStub{constructor(e,t,n){super(getAgListElement(e,t)),this.label=t,this.value=n,this.eText=RefPlaceholder}postConstruct(){this.createTooltip(),this.addEventListeners()}setHighlighted(e){const t=this.getGui();t.classList.toggle(ACTIVE_CLASS,e),_setAriaSelected(t,e),this.dispatchLocalEvent({type:"itemHighlighted",highlighted:e})}getHeight(){return this.getGui().clientHeight}setIndex(e,t){const n=this.getGui();_setAriaPosInSet(n,e),_setAriaSetSize(n,t)}createTooltip(){const e={getTooltipValue:()=>this.label,getGui:()=>this.getGui(),getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>_isHorizontalScrollShowing(this.eText)},t=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("highlightTooltipFeature",!1,e,this));t&&(this.tooltipFeature=t)}addEventListeners(){const e=this.getParentComponent();e&&(this.addGuiEventListener("mouseover",()=>{e.highlightItem(this)}),this.addGuiEventListener("mousedown",t=>{t.preventDefault(),t.stopPropagation(),e.setValue(this.value)}))}},AgList=class extends AgComponentStub{constructor(e="default"){super({tag:"div",cls:`ag-list ag-${e}-list`}),this.cssIdentifier=e,this.options=[],this.listItems=[],this.highlightedItem=null,this.registerCSS(agListCSS)}postConstruct(){const e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()})}handleKeyDown(e){const t=e.key;switch(t){case KeyCode.ENTER:if(!this.highlightedItem)this.setValue(this.getValue());else{const n=this.listItems.indexOf(this.highlightedItem);this.setValueByIndex(n)}break;case KeyCode.DOWN:case KeyCode.UP:e.preventDefault(),this.navigate(t);break;case KeyCode.PAGE_DOWN:case KeyCode.PAGE_UP:case KeyCode.PAGE_HOME:case KeyCode.PAGE_END:e.preventDefault(),this.navigateToPage(t);break}}addOptions(e){for(const t of e)this.addOption(t);return this}addOption(e){const{value:t,text:n}=e,o=n??t;return this.options.push({value:t,text:o}),this.renderOption(t,o),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0);for(const e of this.listItems)e.destroy();_clearElement(this.getGui()),this.listItems=[],this.refreshAriaRole()}updateOptions(e){const t=this.options!==e;return t&&(this.clearOptions(),this.addOptions(e)),t}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(t),this;const n=this.options.findIndex(o=>o.value===e);if(n!==-1){const o=this.options[n];this.value=o.value,this.displayValue=o.text,this.highlightItem(this.listItems[n]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex(t=>t.value===this.value);e!==-1&&this.highlightItem(this.listItems[e])}highlightItem(e){const t=e.getGui();if(!_isVisible(t))return;this.clearHighlighted(),e.setHighlighted(!0),this.highlightedItem=e;const n=this.getGui(),{scrollTop:o,clientHeight:u}=n,{offsetTop:d,offsetHeight:f}=t;(d+f>o+u||d<o)&&t.scrollIntoView({block:"nearest"})}hideItemTooltip(){this.highlightedItem?.tooltipFeature?.attemptToHideTooltip()}destroy(){this.hideItemTooltip(),super.destroy()}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}clearHighlighted(){this.highlightedItem?.setHighlighted(!1),this.highlightedItem=null}renderOption(e,t){const n=new AgListItem(this.cssIdentifier,t,e);n.setParentComponent(this);const o=this.createManagedBean(n);this.listItems.push(o),this.getGui().appendChild(o.getGui())}navigate(e){const t=e===KeyCode.DOWN;let n;const{listItems:o,highlightedItem:u}=this;if(!u)n=t?o[0]:_last(o);else{let f=o.indexOf(u)+(t?1:-1);f=Math.min(Math.max(f,0),o.length-1),n=o[f]}this.highlightItem(n)}navigateToPage(e){const{listItems:t,highlightedItem:n}=this;if(!n||t.length===0)return;const o=t.indexOf(n),u=this.options.length-1,d=t[0].getHeight(),f=Math.floor(this.getGui().clientHeight/d);let g=-1;e===KeyCode.PAGE_HOME?g=0:e===KeyCode.PAGE_END?g=u:e===KeyCode.PAGE_DOWN?g=Math.min(o+f,u):e===KeyCode.PAGE_UP&&(g=Math.max(o-f,0)),g!==-1&&this.highlightItem(t[g])}refreshAriaRole(){_setAriaRole(this.getGui(),this.options.length===0?"presentation":"listbox")}updateIndices(){this.refreshAriaRole();const e=this.listItems,t=e.length;e.forEach((n,o)=>{n.setIndex(o+1,t)})}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},agPickerFieldCSS=".ag-picker-field-display{flex:1 1 auto}.ag-picker-field{align-items:center;display:flex}.ag-picker-field-icon{border:0;cursor:pointer;display:flex;margin:0;padding:0}.ag-picker-field-wrapper{background-color:var(--ag-picker-button-background-color);border:var(--ag-picker-button-border);border-radius:5px;min-height:max(var(--ag-list-item-height),calc(var(--ag-spacing)*4));overflow:hidden;&:where(.invalid){background-color:var(--ag-input-invalid-background-color);border:var(--ag-input-invalid-border);color:var(--ag-input-invalid-text-color)}}.ag-picker-field-wrapper:where(.ag-picker-has-focus),.ag-picker-field-wrapper:where(:focus-within){background-color:var(--ag-picker-button-focus-background-color);border:var(--ag-picker-button-focus-border);box-shadow:var(--ag-focus-shadow);&:where(.invalid){box-shadow:var(--ag-focus-error-shadow)}}.ag-picker-field-wrapper:disabled{opacity:.5}",AgPickerFieldElement={tag:"div",cls:"ag-picker-field",role:"presentation",children:[{tag:"div",ref:"eLabel"},{tag:"div",ref:"eWrapper",cls:"ag-wrapper ag-picker-field-wrapper ag-picker-collapsed",children:[{tag:"div",ref:"eDisplayField",cls:"ag-picker-field-display"},{tag:"div",ref:"eIcon",cls:"ag-picker-field-icon",attrs:{"aria-hidden":"true"}}]}]},AgPickerField=class extends AgAbstractField{constructor(e){if(super(e,e?.template||AgPickerFieldElement,e?.agComponents||[],e?.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=RefPlaceholder,this.eWrapper=RefPlaceholder,this.eDisplayField=RefPlaceholder,this.eIcon=RefPlaceholder,this.registerCSS(agPickerFieldCSS),this.ariaRole=e?.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:t,maxPickerHeight:n,variableWidth:o,minPickerWidth:u,maxPickerWidth:d}=e;t!=null&&(this.pickerGap=t),this.variableWidth=!!o,n!=null&&this.setPickerMaxHeight(n),u!=null&&this.setPickerMinWidth(u),d!=null&&this.setPickerMaxWidth(d)}postConstruct(){super.postConstruct(),this.setupAria();const e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);const t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});const{pickerIcon:n,inputWidth:o}=this.config;if(n){const u=this.beans.iconSvc.createIconNoSpan(n);u&&this.eIcon.appendChild(u)}o!=null&&this.setInputWidth(o)}setupAria(){const e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),_setAriaExpanded(e,!1),this.ariaRole&&_setAriaRole(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const t=this.getFocusableElement();if(t!==this.eWrapper&&e?.target===t)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case KeyCode.UP:case KeyCode.DOWN:case KeyCode.ENTER:case KeyCode.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case KeyCode.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));const t=this.getLocaleTextFunc(),{config:{pickerAriaLabelKey:n,pickerAriaLabelValue:o,modalPicker:u=!0},maxPickerHeight:d,minPickerWidth:f,maxPickerWidth:g,variableWidth:v,beans:w,eWrapper:S}=this,R={modal:u,eChild:e,closeOnEsc:!0,closedCallback:()=>{const I=_isNothingFocused(w);this.beforeHidePicker(),I&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(n,o),anchorToElement:S};e.style.position="absolute";const _=w.popupSvc,F=_.addPopup(R);v?(f&&(e.style.minWidth=f),e.style.width=_formatSize(_getAbsoluteWidth(S)),g&&(e.style.maxWidth=g)):_setElementWidth(e,g??_getAbsoluteWidth(S));const M=d??`${_getInnerHeight(_.getPopupParent())}px`;return e.style.setProperty("max-height",M),this.alignPickerToComponent(),F.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerGap:e,config:{pickerType:t},beans:{popupSvc:n,gos:o},eWrapper:u,pickerComponent:d}=this,f=o.get("enableRtl")?"right":"left";n.positionPopupByComponent({type:t,eventSource:u,ePopup:d.getGui(),position:"under",alignSide:f,keepWithinBounds:!0,nudgeY:e})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;const t=this.getAriaElement();_setAriaExpanded(t,e);const n=this.eWrapper.classList;n.toggle("ag-picker-expanded",e),n.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){this.pickerComponent?.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&(this.hideCurrentPicker(),this.dispatchLocalEvent({type:"pickerHidden"}))}setInputWidth(e){return _setElementWidth(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return typeof e=="number"&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}},agSelectCSS=".ag-select{align-items:center;display:flex;&.ag-disabled{opacity:.5}}.ag-select:where(:not(.ag-cell-editor,.ag-label-align-top)){min-height:var(--ag-list-item-height)}:where(.ag-select){.ag-picker-field-wrapper{cursor:default;padding-left:var(--ag-spacing);padding-right:var(--ag-spacing)}&.ag-disabled .ag-picker-field-wrapper:focus{box-shadow:none}.ag-picker-field-display{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ag-picker-field-icon{align-items:center;display:flex}}.ag-select-list{background-color:var(--ag-picker-list-background-color);border:var(--ag-picker-list-border);border-radius:var(--ag-border-radius);box-shadow:var(--ag-dropdown-shadow);overflow:hidden auto}.ag-select-list-item{cursor:default;-webkit-user-select:none;-moz-user-select:none;user-select:none}:where(.ag-ltr) .ag-select-list-item{padding-left:var(--ag-spacing)}:where(.ag-rtl) .ag-select-list-item{padding-right:var(--ag-spacing)}.ag-select-list-item-text{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}",AgSelect=class extends AgPickerField{constructor(e){super({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"selectOpen",ariaRole:"combobox",...e}),this.registerCSS(agSelectCSS)}postConstruct(){this.tooltipFeature=this.createOptionalManagedBean(this.beans.registry.createDynamicBean("tooltipFeature",!1,{shouldDisplayTooltip:_isElementOverflowingCallback(()=>this.eDisplayField),getGui:()=>this.getGui()})),super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options:e,value:t,placeholder:n}=this.config;e!=null&&this.addOptions(e),t!=null&&this.setValue(t,!0),n&&t==null&&(this.eDisplayField.textContent=n),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){const e=this.createBean(new AgList("select"));this.listComponent=e,e.setParentComponent(this);const t=e.getAriaElement(),n=`ag-select-list-${e.getCompId()}`;t.setAttribute("id",n),_setAriaControlsAndLabel(this.getAriaElement(),t),e.addManagedElementListeners(e.getGui(),{mousedown:o=>{o?.preventDefault()}}),e.addManagedListeners(e,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})},fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}beforeHidePicker(){this.listComponent?.hideItemTooltip(),super.beforeHidePicker()}onKeyDown(e){const{key:t}=e;switch(t===KeyCode.TAB&&this.hidePicker(),t){case KeyCode.ENTER:case KeyCode.UP:case KeyCode.DOWN:case KeyCode.PAGE_UP:case KeyCode.PAGE_DOWN:case KeyCode.PAGE_HOME:case KeyCode.PAGE_END:e.preventDefault(),this.isPickerDisplayed?this.listComponent?.handleKeyDown(e):super.onKeyDown(e);break;case KeyCode.ESCAPE:super.onKeyDown(e);break;case KeyCode.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e);break}}showPicker(){const e=this.listComponent;e&&(super.showPicker(),e.refreshHighlighted())}addOptions(e){for(const t of e)this.addOption(t);return this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){return this.listComponent?.clearOptions(),this.setValue(void 0,!0),this}updateOptions(e){return this.listComponent?.updateOptions(e)&&this.setValue(void 0,!0),this}setValue(e,t,n){const{listComponent:o,config:{placeholder:u},eDisplayField:d,tooltipFeature:f}=this;if(this.value===e||!o)return this;if(n||o.setValue(e,!0),o.getValue()===this.getValue())return this;let v=o.getDisplayValue();return v==null&&u&&(v=u),d.textContent=v,f?.setTooltipAndRefresh(v??null),super.setValue(e,t)}destroy(){this.listComponent=this.destroyBean(this.listComponent),super.destroy()}},AgSelectSelector={selector:"AG-SELECT",component:AgSelect},SelectCellElement={tag:"div",cls:"ag-cell-edit-wrapper",children:[{tag:"ag-select",ref:"eEditor",cls:"ag-cell-editor"}]},SelectCellEditor=class extends AgAbstractCellEditor{constructor(){super(SelectCellElement,[AgSelectSelector]),this.eEditor=RefPlaceholder,this.startedByEnter=!1}wireBeans(e){this.valueSvc=e.valueSvc}initialiseEditor(e){this.focusAfterAttached=e.cellStartedEdit;const{eEditor:t,valueSvc:n,gos:o}=this,{values:u,value:d,eventKey:f}=e;if(_missing(u)){_warn(58);return}this.startedByEnter=f!=null?f===KeyCode.ENTER:!1;let g=!1;u.forEach(R=>{const _={value:R},F=n.formatValue(e.column,null,R),M=F!=null;_.text=M?F:R,t.addOption(_),g=g||d===R}),g?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);const{valueListGap:v,valueListMaxWidth:w,valueListMaxHeight:S}=e;v!=null&&t.setPickerGap(v),S!=null&&t.setPickerMaxHeight(S),w!=null&&t.setPickerMaxWidth(w),o.get("editType")!=="fullRow"&&this.addManagedListeners(this.eEditor,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eEditor.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eEditor.showPicker()})}focusIn(){this.eEditor.getFocusableElement().focus()}getValue(){return this.eEditor.getValue()}isPopup(){return!1}getValidationElement(){return this.eEditor.getAriaElement()}getValidationErrors(){const{params:e}=this,{values:t,getValidationErrors:n}=e,o=this.getValue();let u=[];if(t&&!t.includes(o)){const d=this.getLocaleTextFunc();u.push(d("invalidSelectionValidation","Invalid selection."))}else u=null;return n?n({value:o,internalErrors:u,cellEditorParams:e}):u}},TextCellEditorElement={tag:"ag-input-text-field",ref:"eEditor",cls:"ag-cell-editor"},TextCellEditorInput=class{constructor(e){this.getLocaleTextFunc=e}getTemplate(){return TextCellEditorElement}getAgComponents(){return[AgInputTextFieldSelector]}init(e,t){this.eEditor=e,this.params=t;const n=t.maxLength;n!=null&&e.setMaxLength(n)}getValidationErrors(){const{params:e}=this,{maxLength:t,getValidationErrors:n}=e,o=this.getValue(),u=this.getLocaleTextFunc();let d=[];return t!=null&&typeof o=="string"&&o.length>t&&d.push(u("maxLengthValidation",`Must be ${t} characters or fewer.`,[String(t)])),d.length||(d=null),n?n({value:o,cellEditorParams:e,internalErrors:d}):d}getValue(){const{eEditor:e,params:t}=this,n=e.getValue();return!_exists(n)&&!_exists(t.value)?t.value:t.parseValue(n)}getStartValue(){const e=this.params;return e.useFormatter||e.column.getColDef().refData?e.formatValue(e.value):e.value}setCaret(){_isBrowserSafari()&&this.eEditor.getInputElement().focus({preventScroll:!0});const e=this.eEditor,t=e.getValue(),n=_exists(t)&&t.length||0;n&&e.getInputElement().setSelectionRange(n,n)}},TextCellEditor=class extends SimpleCellEditor{constructor(){super(new TextCellEditorInput(()=>this.getLocaleTextFunc()))}};function undoCellEditing(e){e.undoRedo?.undo("api")}function redoCellEditing(e){e.undoRedo?.redo("api")}function getEditRowValues(e,t){return e.editModelSvc?.getEditRowDataValue(t,{checkSiblings:!0})}function getEditingCells(e){const t=e.editModelSvc?.getEditMap(),n=[];return t?.forEach((o,u)=>{const{rowIndex:d,rowPinned:f}=u;o.forEach((g,v)=>{const{editorValue:w,pendingValue:S,sourceValue:R,state:_}=g,F=_sourceAndPendingDiffer(g);let M=w??S;M===UNEDITED&&(M=void 0);const I={newValue:M,oldValue:R,state:_,column:v,colId:v.getColId(),colKey:v.getColId(),rowIndex:d,rowPinned:f},N=_==="editing";(N||!N&&F)&&n.push(I)})}),n}function stopEditing(e,t=!1){const{editSvc:n}=e;if(n?.isBatchEditing()){if(t)for(const o of e.editModelSvc?.getEditPositions()??[])o.state==="editing"&&n.revertSingleCellEdit(o);else _syncFromEditors(e,{persist:!0});_destroyEditors(e,void 0,{cancel:t})}else n?.stopEditing(void 0,{cancel:t,source:"edit",forceStop:!t,forceCancel:t})}function isEditing(e,t){const n=_getCellCtrl(e,t);return!!e.editSvc?.isEditing(n)}function startEditingCell(e,t){const{key:n,colKey:o,rowIndex:u,rowPinned:d}=t,{editSvc:f,colModel:g}=e,v=g.getCol(o);if(!v){_warn(12,{colKey:o});return}const S=_getRowNode(e,{rowIndex:u,rowPinned:d||null});if(!S){_warn(290,{rowIndex:u,rowPinned:d});return}if(!f?.isCellEditable({rowNode:S,column:v},"api"))return;d==null&&ensureIndexVisible(e,u),ensureColumnVisible(e,o),f?.startEditing({rowNode:S,column:v},{event:n?new KeyboardEvent("keydown",{key:n}):void 0,source:"api",editable:!0})}function validateEdit(e){return e.editSvc?.validateEdit()||null}function getCurrentUndoSize(e){return e.undoRedo?.getCurrentUndoStackSize()??0}function getCurrentRedoSize(e){return e.undoRedo?.getCurrentRedoStackSize()??0}var PopupEditorElement={tag:"div",cls:"ag-popup-editor",attrs:{tabindex:"-1"}},PopupEditorWrapper=class extends AgPopupComponent{constructor(e){super(PopupEditorElement),this.params=e}postConstruct(){_setDomData(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),t=this.params,n=o=>{_isUserSuppressingKeyboardEvent(this.gos,o,t.node,t.column,!0)||t.onKeyDown(o)};this.addManagedElementListeners(e,{keydown:n})}};function shouldStartEditing(e,{column:t},n,o,u="ui"){if(n instanceof KeyboardEvent&&(n.key===KeyCode.TAB||n.key===KeyCode.ENTER||n.key===KeyCode.F2||n.key===KeyCode.BACKSPACE&&o))return!0;if(n?.shiftKey&&e.rangeSvc?.getCellRanges().length!=0)return!1;const f=t?.getColDef(),g=deriveClickCount(e.gos,f),v=n?.type;return v==="click"&&n?.detail===1&&g===1||v==="dblclick"&&n?.detail===2&&g===2?!0:u==="api"?!!o:!1}function deriveClickCount(e,t){return e.get("suppressClickEdit")===!0?0:e.get("singleClickEdit")===!0||t?.singleClickEdit?1:2}function existingEditing(e,t){return e.editModelSvc?.hasEdits(t,{withOpenEditor:!0})??!1}function isCellEditable(e,t){const n=t.column,o=t.rowNode,u=n.getColDef();if(!o)return existingEditing(e,t);const d=u.editable;if(o.group){const f=u.groupRowEditable;if(f!=null)return n.isColumnFunc(o,f)?!0:existingEditing(e,t)}return n.isColumnFunc(o,d)?!0:existingEditing(e,t)}function isFullRowCellEditable(e,t,n="ui"){const o=isCellEditable(e,t);if(o||n==="ui")return o;const{rowNode:u,column:d}=t;for(const f of e.colModel.getCols())if(f!==d&&isCellEditable(e,{rowNode:u,column:f}))return!0;return!1}var editHighlightFn=(e,t=!1)=>{if(e!==void 0)return _sourceAndPendingDiffer(e)||t&&e.state==="editing"};function _hasEdits(e,t,n=!1){return editHighlightFn(e.editModelSvc?.getEdit(t),n)}var nodeHasLeafEdit=(e,t,n)=>{if(e)for(let o=0,u=e.length;o<u;++o){const d=e[o];if(d.data&&(editHighlightFn(t?.getEdit({rowNode:d,column:n}))||editHighlightFn(t?.getEdit({rowNode:d.pinnedSibling,column:n})))||nodeHasLeafEdit(d.childrenAfterGroup,t,n))return!0}};function _hasLeafEdits(e,t){const{column:n,rowNode:o}=t;return e.gos.get("groupTotalRow")&&!o?.footer?!1:nodeHasLeafEdit(o?.childrenAfterGroup,e.editModelSvc,n)}function _hasPinnedEdits(e,{rowNode:t,column:n}){if(t=t.pinnedSibling,!!t)return editHighlightFn(e.editModelSvc?.getEdit({rowNode:t,column:n}))}var CellEditStyleFeature=class extends BeanStub{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.editSvc=t.editSvc,this.editModelSvc=t.editModelSvc}setComp(e){this.cellComp=e,this.applyCellStyles()}applyCellStyles(){const{cellCtrl:e,editSvc:t,beans:n}=this;if(t?.isBatchEditing()&&t.isEditing()){const u=_hasEdits(n,e)||_hasLeafEdits(n,e)||_hasPinnedEdits(n,e);this.applyBatchingStyle(u)}else this.applyBatchingStyle(!1);const o=!!this.editModelSvc?.getCellValidationModel().hasCellValidation(this.cellCtrl);this.cellComp.toggleCss("ag-cell-editing-error",o)}applyBatchingStyle(e){this.cellComp.toggleCss("ag-cell-editing",e??!1),this.cellComp.toggleCss("ag-cell-batch-edit",(e&&this.editSvc?.isBatchEditing())??!1)}},RowEditStyleFeature=class extends BeanStub{constructor(e,t){super(),this.rowCtrl=e,this.beans=t,this.gos=t.gos,this.editSvc=t.editSvc,this.editModelSvc=t.editModelSvc}applyRowStyles(){const{rowCtrl:e,editModelSvc:t,beans:n}=this;let o=e.rowNode,u=t?.getEditRow(o);const d=this.editModelSvc?.getRowValidationModel().hasRowValidation({rowNode:o});if(!u&&o.pinnedSibling&&(o=o.pinnedSibling,u=t?.getEditRow(o)),u){const f=Array.from(u.keys()).some(g=>{const v={rowNode:o,column:g};return _hasEdits(n,v,!0)||_hasLeafEdits(n,v)||_hasPinnedEdits(n,v)});this.applyStyle(d,f);return}this.applyStyle(d)}applyStyle(e=!1,t=!1){const n=!!this.editSvc?.isBatchEditing(),o=this.gos.get("editType")==="fullRow";this.rowCtrl?.forEachGui(void 0,({rowComp:u})=>{u.toggleCss("ag-row-editing",o&&t),u.toggleCss("ag-row-batch-edit",o&&t&&n),u.toggleCss("ag-row-inline-editing",t),u.toggleCss("ag-row-not-inline-editing",!t),u.toggleCss("ag-row-editing-invalid",o&&t&&e)})}},purgeRows=({rowModel:e,pinnedRowModel:t,editModelSvc:n},o)=>{const u=new Set;e.forEachNode(d=>o.has(d)&&u.add(d)),t?.forEachPinnedRow("top",d=>o.has(d)&&u.add(d)),t?.forEachPinnedRow("bottom",d=>o.has(d)&&u.add(d));for(const d of o)u.has(d)||n.removeEdits({rowNode:d});return u},purgeCells=({editModelSvc:e},t,n)=>{for(const o of t)e?.getEditRow(o)?.forEach((u,d)=>!n.has(d)&&e.removeEdits({rowNode:o,column:d}))},_refreshEditCells=e=>()=>{const t=new Set(e.colModel.getCols()),n=e.editModelSvc.getEditMap(!0),o=new Set(n.keys());purgeCells(e,purgeRows(e,o),t)},KEEP_EDITOR_SOURCES=new Set(["undo","redo","paste","bulk","rangeSvc"]),INTERNAL_EDITOR_SOURCES=new Set(["ui","api"]),STOP_EDIT_SOURCE_TRANSFORM={paste:"api",rangeSvc:"api",fillHandle:"api",cellClear:"api",bulk:"api"},STOP_EDIT_SOURCE_TRANSFORM_KEYS=new Set(Object.keys(STOP_EDIT_SOURCE_TRANSFORM)),SET_DATA_SOURCE_AS_API=new Set(["paste","rangeSvc","cellClear","redo","undo"]),CANCEL_PARAMS={cancel:!0,source:"api"},COMMIT_PARAMS={cancel:!1,source:"api"},CHECK_SIBLING={checkSiblings:!0},FORCE_REFRESH={force:!0,suppressFlash:!0},EditService=class extends BeanStub{constructor(){super(...arguments),this.beanName="editSvc",this.committing=!1,this.batch=!1,this.batchStartDispatched=!1,this.stopping=!1,this.rangeSelectionWhileEditing=0}postConstruct(){const{beans:e}=this;this.model=e.editModelSvc,this.valueSvc=e.valueSvc,this.rangeSvc=e.rangeSvc,this.addManagedPropertyListener("editType",({currentValue:o})=>{this.stopEditing(void 0,CANCEL_PARAMS),this.createStrategy(o)});const t=_refreshEditCells(e),n=()=>{const o=this.model.getCellValidationModel().getCellValidationMap().size>0,u=this.model.getRowValidationModel().getRowValidationMap().size>0;return o||u?this.stopEditing(void 0,CANCEL_PARAMS):this.isEditing()&&(this.batch?_destroyEditors(e,this.model.getEditPositions()):this.stopEditing(void 0,COMMIT_PARAMS)),!1};this.addManagedEventListeners({columnPinned:t,columnVisible:t,columnRowGroupChanged:t,rowExpansionStateChanged:t,pinnedRowsChanged:t,displayedRowsChanged:t,sortChanged:n,filterChanged:n,cellFocused:this.onCellFocused.bind(this)})}isBatchEditing(){return this.batch}startBatchEditing(){this.batch||(this.batch=!0,this.batchStartDispatched=!1,this.stopEditing(void 0,CANCEL_PARAMS))}stopBatchEditing(e){this.batch&&(e&&this.stopEditing(void 0,e),this.batchStartDispatched&&this.dispatchBatchStopped(new Map,!1),this.batch=!1,this.batchStartDispatched=!1)}ensureBatchStarted(){!this.batch||this.batchStartDispatched||(this.batchStartDispatched=!0,this.dispatchBatchEvent("batchEditingStarted",new Map))}createStrategy(e){const{beans:t,gos:n,strategy:o}=this,u=getEditType(n,e);if(o){if(o.beanName===u)return o;this.destroyStrategy()}return this.strategy=this.createOptionalManagedBean(t.registry.createDynamicBean(u,!0))}destroyStrategy(){this.strategy&&(this.strategy.destroy(),this.strategy=this.destroyBean(this.strategy))}shouldStartEditing(e,t,n,o="ui"){const u=shouldStartEditing(this.beans,e,t,n,o);return u&&(this.strategy??(this.strategy=this.createStrategy())),u}shouldStopEditing(e,t,n="ui"){return this.strategy?.shouldStop(e,t,n)??null}shouldCancelEditing(e,t,n="ui"){return this.strategy?.shouldCancel(e,t,n)??null}validateEdit(){return _validateEdit(this.beans)}isEditing(e,t){return this.model.hasEdits(e??void 0,t??CHECK_SIBLING)}isRowEditing(e,t){return!!e&&this.model.hasRowEdits(e,t)}enableRangeSelectionWhileEditing(){this.beans.rangeSvc&&this.gos.get("cellSelection")&&this.rangeSelectionWhileEditing++}disableRangeSelectionWhileEditing(){this.rangeSelectionWhileEditing=Math.max(0,this.rangeSelectionWhileEditing-1)}isRangeSelectionEnabledWhileEditing(){return this.rangeSelectionWhileEditing>0}startEditing(e,t){const{startedEdit:n=!0,event:o=null,source:u="ui",ignoreEventKey:d=!1,silent:f}=t;if(this.strategy??(this.strategy=this.createStrategy()),!(t.editable??this.isCellEditable(e,"api")))return;const v=_getCellCtrl(this.beans,e);if(v&&!v.comp){t.editable=void 0,v.onCompAttachedFuncs.push(()=>this.startEditing(e,t));return}const w=this.shouldStartEditing(e,o,n,u);if(w===!1&&u!=="api"){this.isEditing(e)&&this.stopEditing();return}!this.batch&&this.shouldStopEditing(e,void 0,u)&&!t.continueEditing&&this.stopEditing(void 0,{source:u}),w&&this.ensureBatchStarted(),this.strategy.start({position:e,event:o,source:u,ignoreEventKey:d,startedEdit:n,silent:f})}stopEditing(e,t){const n=this.prepareStopContext(e,t);if(!n)return!1;this.stopping=!0;let o=!1,{edits:u}=n;try{const d=this.processStopRequest(n);return o||(o=d.res),u=d.edits,this.finishStopEditing({...n,edits:u,params:t,position:e,res:o}),o}finally{this.rangeSelectionWhileEditing=0,this.stopping=!1}}prepareStopContext(e,t){const{event:n=null,cancel:o=!1,source:u="ui",forceCancel:d=!1,forceStop:f=!1,commit:g=!1}=t||{};if(STOP_EDIT_SOURCE_TRANSFORM_KEYS.has(u)&&this.batch)return this.bulkRefresh(e),null;const v=this.committing?STOP_EDIT_SOURCE_TRANSFORM[u]:u;if(!(this.committing||this.isEditing(e)||this.batch&&this.model.hasEdits(e,CHECK_SIBLING))||!this.strategy||this.stopping)return null;const S=_getCellCtrl(this.beans,e);S&&(S.onEditorAttachedFuncs=[]);const R=!o&&(!!this.shouldStopEditing(e,n,v)||(this.committing||u==="paste")&&!this.batch)||f,_=o&&!!this.shouldCancelEditing(e,n,v)||d;return{cancel:o,cellCtrl:S,edits:this.model.getEditMap(!0),event:n??null,forceCancel:d,forceStop:f,commit:g,position:e,source:u,treatAsSource:v,willCancel:_,willStop:R}}processStopRequest(e){const{event:t,position:n,willCancel:o,willStop:u}=e;return u||o?this.handleStopOrCancel(e):this.shouldHandleMidBatchKey(t,n)?{res:!1,edits:this.handleMidBatchKey(t,n,e)}:(_syncFromEditors(this.beans,{persist:!0}),this.batch&&this.strategy?.cleanupEditors(n),{res:!1,edits:this.model.getEditMap()})}handleStopOrCancel(e){const{beans:t,model:n}=this,{cancel:o,commit:u,edits:d,event:f,source:g,willCancel:v,willStop:w}=e,S=!this.batch||!v;_syncFromEditors(t,{persist:S,isCancelling:v||o,isStopping:w});const R=n.getEditMap(),F=!v&&(!this.batch||u)?this.processEdits(R,g):[];o?this.strategy?.stopCancelled(e.forceCancel):this.strategy?.stopCommitted(f,u),this.clearValidationIfNoOpenEditors();for(const M of F)n.clearEditValue(M);this.bulkRefresh(void 0,d);for(const M of n.getEditPositions(R)){const I=_getCellCtrl(t,M),N=_sourceAndPendingDiffer(M);I?.refreshCell({force:!0,suppressFlash:!N})}return{res:w,edits:R}}shouldHandleMidBatchKey(e,t){return e instanceof KeyboardEvent&&this.batch&&!!this.strategy?.midBatchInputsAllowed(t)&&this.isEditing(t,{withOpenEditor:!0})}handleMidBatchKey(e,t,n){const{beans:o,model:u}=this,{cellCtrl:d,edits:f}=n,{key:g}=e,v=g===KeyCode.ENTER,w=g===KeyCode.ESCAPE,S=g===KeyCode.TAB;if(v||S||w){if(v||S)_syncFromEditors(o,{persist:!0});else if(w&&d){const{rowNode:R,column:_}=d;if(this.batch&&R&&_){const F={rowNode:R,column:_};_destroyEditors(o,[F],{silent:!0}),this.model.stop(F,!0,!0),_getCellCtrl(o,F)?.refreshCell(FORCE_REFRESH)}else this.revertSingleCellEdit(d)}return this.batch?this.strategy?.cleanupEditors():_destroyEditors(o,u.getEditPositions(),{event:e,cancel:w}),e.preventDefault(),this.bulkRefresh(t,f,{suppressFlash:!0}),u.getEditMap()}return f}finishStopEditing({cellCtrl:e,edits:t,params:n,position:o,res:u,commit:d,forceCancel:f,willCancel:g,willStop:v}){const w=this.beans;u&&o&&(!this.batch||d)&&this.model.removeEdits(o),this.navigateAfterEdit(n,e?.cellPosition),_purgeUnchangedEdits(w),this.clearValidationIfNoOpenEditors(),this.bulkRefresh();const{rowRenderer:S,formula:R}=w;if(g&&S.refreshRows({rowNodes:Array.from(t.keys())}),this.batch){R?R.refreshFormulas(!0):S.refreshRows({suppressFlash:!0,force:!0});const _=v&&d;(_||g&&f)&&this.dispatchBatchStopped(t,_)}}dispatchBatchStopped(e,t){let n;t&&(n=_filterChangedEdits(e),n.size>0&&this.ensureBatchStarted()),this.batchStartDispatched&&(this.batchStartDispatched=!1,this.dispatchBatchEvent("batchEditingStopped",n??new Map))}clearValidationIfNoOpenEditors(){this.model.hasEdits(void 0,{withOpenEditor:!0})||(this.model.getCellValidationModel().clearCellValidationMap(),this.model.getRowValidationModel().clearRowValidationMap())}navigateAfterEdit(e,t){if(!e||!t)return;const{event:n,suppressNavigateAfterEdit:o}=e;if(!(n instanceof KeyboardEvent)||o)return;const{key:d,shiftKey:f}=n,g=this.gos.get("enterNavigatesVerticallyAfterEdit");if(d!==KeyCode.ENTER||!g)return;const v=f?KeyCode.UP:KeyCode.DOWN;this.beans.navigation?.navigateToNextCell(null,v,t,!1)}processEdits(e,t){const n=Array.from(e.keys()),o=this.model.getCellValidationModel().getCellValidationMap().size>0||this.model.getRowValidationModel().getRowValidationMap().size>0,u=[];for(const d of n){const f=e.get(d);for(const g of f.keys()){const v=f.get(g),w={rowNode:d,column:g};if(_sourceAndPendingDiffer(v)&&!o){const S=_getCellCtrl(this.beans,w);this.setNodeDataValue(d,g,v.pendingValue,S,t)||u.push(w)}}}return u}setNodeDataValue(e,t,n,o,u="edit"){const d=INTERNAL_EDITOR_SOURCES.has(u)?"edit":u;o&&(o.suppressRefreshCell=!0),this.committing=!0;try{return e.setDataValue(t,n,d)}finally{this.committing=!1,o&&(o.suppressRefreshCell=!1)}}syncEditAfterCommit(e,t){const n=this.model.getEdit(e);n&&n.state!=="editing"&&(t?this.beans.editModelSvc?.setEdit(e,{sourceValue:this.valueSvc.getValue(e.column,e.rowNode,"data")}):this.model.clearEditValue(e))}setEditMap(e,t){this.strategy??(this.strategy=this.createStrategy()),this.strategy?.setEditMap(e,t),this.bulkRefresh();let n=FORCE_REFRESH;t?.forceRefreshOfEditCellsOnly&&(n={...getRowColumnsFromMap(e),...FORCE_REFRESH}),this.beans.rowRenderer.refreshCells(n)}dispatchEditValuesChanged({rowNode:e,column:t},n={}){if(!e||!t||!n)return;const{pendingValue:o,sourceValue:u}=n,{rowIndex:d,rowPinned:f,data:g}=e;this.beans.eventSvc.dispatchEvent({type:"cellEditValuesChanged",node:e,rowIndex:d,rowPinned:f,column:t,source:"api",data:g,newValue:o,oldValue:u,value:o,colDef:t.getColDef()})}bulkRefresh(e={},t,n={}){const{beans:o,gos:u}=this,{editModelSvc:d,rowModel:f}=o;_isClientSideRowModel(u)&&(e.rowNode&&e.column?this.refCell(e,this.model.getEdit(e),n):t&&d?.getEditMap(!1)?.forEach((g,v)=>{for(const w of g.keys())this.refCell({rowNode:v,column:w},g.get(w),n)}))}refCell({rowNode:e,column:t},n,o={}){const{beans:u,gos:d}=this,f=new Set([e]),g=new Set,v=e.pinnedSibling;v&&f.add(v);const w=e.sibling;w&&g.add(w);let S=e.parent;for(;S;)S.sibling?.footer&&d.get("groupTotalRow")||!S.parent&&S.sibling&&d.get("grandTotalRow")?g.add(S.sibling):g.add(S),S=S.parent;for(const R of f)this.dispatchEditValuesChanged({rowNode:R,column:t},n);for(const R of f)_getCellCtrl(u,{rowNode:R,column:t})?.refreshCell(o);for(const R of g)_getCellCtrl(u,{rowNode:R,column:t})?.refreshCell(o)}stopAllEditing(e=!1,t="ui"){this.isEditing()&&this.stopEditing(void 0,{cancel:e,source:t})}isCellEditable(e,t="ui"){const{gos:n,beans:o}=this,u=e.rowNode,d=e.column.getColDef();if(u.group&&d.groupRowEditable==null){if(n.get("treeData")){if(!u.data&&!n.get("enableGroupEdit"))return!1}else if(!n.get("enableGroupEdit"))return!1}const f=getEditType(n)==="fullRow"?isFullRowCellEditable(o,e,t):isCellEditable(o,e);return f&&(this.strategy??(this.strategy=this.createStrategy())),f}cellEditingInvalidCommitBlocks(){return this.gos.get("invalidEditValueMode")==="block"}checkNavWithValidation(e,t,n=!0){if(this.hasValidationErrors(e)){const o=_getCellCtrl(this.beans,e);return this.cellEditingInvalidCommitBlocks()?(t?.preventDefault?.(),n&&(o&&!o.hasBrowserFocus()&&o.focusCell(),o?.comp?.getCellEditor()?.focusIn?.()),"block-stop"):(o&&this.revertSingleCellEdit(o),"revert-continue")}return"continue"}revertSingleCellEdit(e,t=!1){const n=_getCellCtrl(this.beans,e);n?.comp?.getCellEditor()&&(_destroyEditors(this.beans,[e],{silent:!0}),this.model.clearEditValue(e),_setupEditor(this.beans,e,{silent:!0}),_populateModelValidationErrors(this.beans),n?.refreshCell(FORCE_REFRESH),t&&(n?.focusCell(),n?.comp?.getCellEditor()?.focusIn?.()))}hasValidationErrors(e){_populateModelValidationErrors(this.beans);const t=_getCellCtrl(this.beans,e);t&&(t.refreshCell(FORCE_REFRESH),t.rowCtrl.rowEditStyleFeature?.applyRowStyles());let n=!1;return e?.rowNode?(n||(n=this.model.getRowValidationModel().hasRowValidation({rowNode:e.rowNode})),e.column&&(n||(n=this.model.getCellValidationModel().hasCellValidation({rowNode:e.rowNode,column:e.column})))):(n||(n=this.model.getCellValidationModel().getCellValidationMap().size>0),n||(n=this.model.getRowValidationModel().getRowValidationMap().size>0)),n}moveToNextCell(e,t,n,o="ui"){let u;const d=this.isEditing(),f=d&&this.checkNavWithValidation(void 0,n)==="block-stop";return e instanceof CellCtrl&&d&&(u=this.strategy?.moveToNextEditingCell(e,t,n,o,f)),u===null||(u=u||!!this.beans.focusSvc.focusedHeader,u===!1&&!f&&this.stopEditing()),u}getPendingEditValue(e,t,n){if(n==="data"||n==="batch"&&!this.batch)return;const o=this.model.getEdit({rowNode:e,column:t},CHECK_SIBLING);if(!o||this.stopping&&!this.batch&&!o.editorState?.cellStartedEditing)return;if(n==="edit"){const d=o.editorValue;if(d!=null&&d!==UNEDITED)return d}const u=o.pendingValue;if(u!==UNEDITED)return u}getCellDataValue(e){const t=this.model.getEdit(e,CHECK_SIBLING);if(t){const n=t.pendingValue;if(n!==UNEDITED)return n;const o=t.sourceValue;if(o!=null)return o}return this.valueSvc.getValue(e.column,e.rowNode,"data")}addStopEditingWhenGridLosesFocus(e){_addStopEditingWhenGridLosesFocus(this,this.beans,e)}createPopupEditorWrapper(e){return new PopupEditorWrapper(e)}batchResetToSourceValue(e){if(!this.batch)return!1;const t=this.model.getEdit(e);if(!t)return!1;const{pendingValue:n,sourceValue:o,state:u}=t;return n===o||u==="editing"?!1:(this.dispatchEditValuesChanged(e,{...t,pendingValue:o}),this.beans.editModelSvc?.removeEdits(e),this.bulkRefresh(e),!0)}setDataValue(e,t,n){try{const o=this.batch,u=this.isEditing(o?void 0:e);if((!u||this.committing)&&!SET_DATA_SOURCE_AS_API.has(n)||!u&&!o&&n==="paste")return;const d=this.beans;this.strategy??(this.strategy=this.createStrategy());let f;if(o?f="ui":this.committing?f=n??"api":f="api",!n||KEEP_EDITOR_SOURCES.has(n))return this.applyDirectValue(e,t,n);const g=this.applyExistingEdit(e,t,n,f);return g!==void 0?g:(_syncFromEditor(d,e,t,n,void 0,{persist:!0}),this.ensureBatchStarted(),this.stopEditing(e,{source:f,suppressNavigateAfterEdit:!0}),!0)}finally{this.committing=!1}}applyExistingEdit(e,t,n,o){const u=this.model.getEdit(e);if(u)return u.pendingValue===t?!1:u.sourceValue!==t?(_syncFromEditor(this.beans,e,t,n,void 0,{persist:!0}),this.ensureBatchStarted(),this.stopEditing(e,{source:o,suppressNavigateAfterEdit:!0}),!0):(this.beans.editModelSvc?.removeEdits(e),this.ensureBatchStarted(),this.dispatchEditValuesChanged(e,{...u,pendingValue:t}),!0)}applyDirectValue(e,t,n){const o=this.beans;if(this.batch)return _syncFromEditor(o,e,t,n,void 0,{persist:!0}),this.cleanupEditors(),_purgeUnchangedEdits(o),this.ensureBatchStarted(),this.bulkRefresh(),!0;_syncFromEditor(o,e,t,n,void 0,{persist:!0});const u=_getCellCtrl(o,e),d=this.setNodeDataValue(e.rowNode,e.column,t,u,n);return this.syncEditAfterCommit(e,d),_getCellCtrl(o,e)?.refreshCell(FORCE_REFRESH),d}handleColDefChanged(e){_refreshEditorOnColDefChanged(this.beans,e)}destroy(){this.model.clear(),this.destroyStrategy(),super.destroy()}prepDetailsDuringBatch(e,t){const{model:n}=this;if(!this.batch||!n.hasRowEdits(e.rowNode,CHECK_SIBLING))return;const{rowNode:u}=e,{compDetails:d,valueToDisplay:f}=t;if(d){const{params:g}=d;return g.data=n.getEditRowDataValue(u,CHECK_SIBLING),{compDetails:d}}return{valueToDisplay:f}}cleanupEditors(){this.strategy?.cleanupEditors()}dispatchCellEvent(e,t,n,o){this.strategy?.dispatchCellEvent(e,t,n,o)}dispatchBatchEvent(e,t){this.eventSvc.dispatchEvent(this.createBatchEditEvent(e,t))}createBatchEditEvent(e,t){return _addGridCommonParams(this.gos,{type:e,...e==="batchEditingStopped"?{changes:this.toEventChangeList(t)}:{}})}toEventChangeList(e){return this.model.getEditPositions(e).map(t=>({rowIndex:t.rowNode.rowIndex,rowPinned:t.rowNode.rowPinned,columnId:t.column.getColId(),newValue:t.pendingValue,oldValue:t.sourceValue}))}applyBulkEdit({rowNode:e,column:t},n){if(!n||n.length===0)return;const{beans:o,rangeSvc:u,valueSvc:d}=this,{formula:f}=o;_syncFromEditors(o,{persist:!0});const g=this.model.getEditMap(!0);let v=g.get(e)?.get(t)?.pendingValue,w=!1;this.batch||(this.eventSvc.dispatchEvent({type:"bulkEditingStarted"}),w=!0);const S=f?.isFormula(v)??!1;n.forEach(_=>{const F=_.columns.some(M=>M?.isAllowFormula());if(u?.forEachRowInRange(_,M=>{const I=_getRowNode(o,M);if(I===void 0)return;const N=g.get(I)??new Map;let B=v;for(const H of _.columns){if(!H)continue;const U=!!S&&H.isAllowFormula();if(this.isCellEditable({rowNode:I,column:H},"api")){const $=d.getValue(H,I,"data",!0);let z=d.parseValue(H,I??null,B,$);Number.isNaN(z)&&(z=null),N.set(H,{editorValue:void 0,pendingValue:z,sourceValue:$,state:"changed",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}})}U&&(B=f?.updateFormulaByOffset({value:B,columnDelta:1}))}N.size>0&&g.set(I,N),S&&F&&(v=f?.updateFormulaByOffset({value:v,rowDelta:1}))}),this.setEditMap(g),this.batch){this.cleanupEditors(),_purgeUnchangedEdits(o),this.ensureBatchStarted(),this.bulkRefresh();return}this.committing=!0;try{this.stopEditing(void 0,{source:"bulk"})}finally{this.committing=!1,w&&this.eventSvc.dispatchEvent({type:"bulkEditingStopped",changes:this.toEventChangeList(g)})}}),this.bulkRefresh();const R=_getCellCtrl(o,{rowNode:e,column:t});R&&R.focusCell(!0)}createCellStyleFeature(e){return new CellEditStyleFeature(e,this.beans)}createRowStyleFeature(e){return new RowEditStyleFeature(e,this.beans)}setEditingCells(e,t){const{beans:n}=this,{colModel:o,valueSvc:u}=n,d=new Map;for(let{colId:f,column:g,colKey:v,rowIndex:w,rowPinned:S,newValue:R,state:_}of e){const F=f?o.getCol(f):v?o.getCol(v):g;if(!F)continue;const M=_getRowNode(n,{rowIndex:w,rowPinned:S});if(!M)continue;const I=u.getValue(F,M,"data",!0);if(!t?.forceRefreshOfEditCellsOnly&&!_sourceAndPendingDiffer({pendingValue:R,sourceValue:I})&&_!=="editing")continue;let N=d.get(M);N||(N=new Map,d.set(M,N)),R===void 0&&(R=UNEDITED),N.set(F,{editorValue:void 0,pendingValue:R,sourceValue:I,state:_??"changed",editorState:{isCancelAfterEnd:void 0,isCancelBeforeStart:void 0}})}this.setEditMap(d,t)}onCellFocused(e){const t=_getCellCtrl(this.beans,e);if(!t||!this.isEditing(t,CHECK_SIBLING))return;const n=this.model.getEdit(t);if(!n||!_sourceAndPendingDiffer(n))return;const u=this.getLocaleTextFunc()("ariaPendingChange","Pending Change");this.beans.ariaAnnounce?.announceValue(u,"pendingChange")}allowedFocusTargetOnValidation(e){return _getCellCtrl(this.beans,e)}};function getRowColumnsFromMap(e){return{rowNodes:e?Array.from(e.keys()):void 0,columns:e?[...new Set(Array.from(e.values()).flatMap(t=>Array.from(t.keys())))]:void 0}}function getEditType(e,t){return t??e.get("editType")??"singleCell"}var BaseEditStrategy=class extends BeanStub{postConstruct(){this.model=this.beans.editModelSvc,this.editSvc=this.beans.editSvc,this.addManagedEventListeners({cellFocused:this.onCellFocusChanged?.bind(this),cellFocusCleared:this.onCellFocusChanged?.bind(this)})}clearEdits(e){this.model.clearEditValue(e)}onCellFocusChanged(e){let t;const n=e.previousParams,{editSvc:o,beans:u}=this,d=e.type==="cellFocused"?e.sourceEvent:null;n&&(t=_getCellCtrl(u,n));const{gos:f,editModelSvc:g}=u,v=e.type==="cellFocusCleared";if(o.isEditing(void 0,{withOpenEditor:!0})){const{column:w,rowIndex:S,rowPinned:R}=e,_={column:w,rowNode:_getRowNode(u,{rowIndex:S,rowPinned:R})},F=f.get("invalidEditValueMode")==="block";if(F)return;const M=!F,I=!!g?.getCellValidationModel().hasCellValidation(_),N=M&&I;(n||v?o.stopEditing(void 0,{cancel:N,source:v&&M?"api":void 0,event:d}):!0)||(o.isBatchEditing()?o.cleanupEditors():o.stopEditing(void 0,{source:"api"}))}t?.refreshCell({suppressFlash:!0,force:!0})}stopCancelled(e){const t=this.editSvc.isBatchEditing()&&!e;for(const n of this.model.getEditPositions())_destroyEditor(this.beans,n,{cancel:!0},_getCellCtrl(this.beans,n)),this.model.stop(n,t,!0);return!0}stopCommitted(e,t){const n=this.model.getEditPositions(),o={all:[],pass:[],fail:[]};for(const f of n)o.all.push(f),(this.model.getCellValidationModel().getCellValidation(f)?.errorMessages?.length??0)>0?o.fail.push(f):o.pass.push(f);const u=this.processValidationResults(o),d=this.editSvc.isBatchEditing()&&!t;for(const f of u.destroy)_destroyEditor(this.beans,f,{event:e},_getCellCtrl(this.beans,f)),this.model.stop(f,d,!1);for(const f of u.keep){const g=_getCellCtrl(this.beans,f);!this.editSvc.cellEditingInvalidCommitBlocks()&&g&&this.editSvc.revertSingleCellEdit(g)}return!0}cleanupEditors({rowNode:e}={},t){_syncFromEditors(this.beans,{persist:!1});const n=this.model.getEditPositions(),o=[];if(e)for(const u of n)u.rowNode!==e&&o.push(u);else for(const u of n)o.push(u);_destroyEditors(this.beans,o),_purgeUnchangedEdits(this.beans,t)}setFocusOutOnEditor(e){e.comp?.getCellEditor()?.focusOut?.()}setFocusInOnEditor(e){const t=e.comp,n=t?.getCellEditor();if(n?.focusIn)n.focusIn();else{const o=this.beans.gos.get("editType")==="fullRow";e.focusCell(o),e.onEditorAttachedFuncs.push(()=>t?.getCellEditor()?.focusIn?.())}}setupEditors(e){const{event:t,ignoreEventKey:n=!1,startedEdit:o,position:u,cells:d=this.model.getEditPositions()}=e,f=t instanceof KeyboardEvent&&!n&&t.key||void 0;_setupEditors(this.beans,d,u,f,t,o)}dispatchCellEvent(e,t,n,o){const u=_getCellCtrl(this.beans,e);u&&this.eventSvc.dispatchEvent({...u.createEvent(t??null,n),...o})}dispatchRowEvent(e,t,n){if(n)return;const o=_getRowCtrl(this.beans,e);o&&this.eventSvc.dispatchEvent(o.createRowEvent(t))}shouldStop(e,t,n="ui"){const o=this.editSvc.isBatchEditing();return o&&n==="api"?!0:o&&(n==="ui"||n==="edit")?!1:n==="api"?!0:t instanceof KeyboardEvent&&!o?t.key===KeyCode.ENTER:null}shouldCancel(e,t,n="ui"){const o=this.editSvc.isBatchEditing();return!!(t instanceof KeyboardEvent&&!o&&t.key===KeyCode.ESCAPE||o&&n==="api"||n==="api")}setEditMap(e,t){t?.update||this.editSvc.stopEditing(void 0,{cancel:!0,source:"api"});const n=[];if(e.forEach((o,u)=>{o.forEach((d,f)=>{d.state==="editing"&&n.push({...d,rowNode:u,column:f})})}),t?.update&&(e=new Map([...this.model.getEditMap(),...e])),this.model?.setEditMap(e),n.length>0){const o=n.at(-1),u=o.pendingValue===UNEDITED?void 0:o.pendingValue;this.start({position:o,event:new KeyboardEvent("keydown",{key:u}),source:"api"});const d=_getCellCtrl(this.beans,o);d&&this.setFocusInOnEditor(d)}}destroy(){this.cleanupEditors(),super.destroy()}},FullRowEditStrategy=class extends BaseEditStrategy{constructor(){super(...arguments),this.beanName="fullRow",this.startedRows=[]}shouldStop(e,t,n="ui"){const{rowNode:o}=e||{};if(!_getRowCtrl(this.beans,{rowNode:this.rowNode}))return!0;const d=super.shouldStop({rowNode:this.rowNode},t,n);return d!==null?d:this.rowNode?o!==this.rowNode:!1}midBatchInputsAllowed({rowNode:e}){return e?this.model.hasEdits({rowNode:e}):!1}clearEdits(e){this.model.clearEditValue(e)}start(e){const{position:t,silent:n,startedEdit:o,event:u,ignoreEventKey:d}=e,{rowNode:f}=t;this.rowNode!==f&&super.cleanupEditors(t);const g=this.beans.visibleCols.allCols,v=[],w=[];for(const S of g)S.isCellEditable(f)&&w.push(S);if(w.length!=0){this.dispatchRowEvent({rowNode:f},"rowEditingStarted",n),this.startedRows.push(f);for(const S of w){const R={rowNode:f,column:S};v.push(R),this.model.hasEdits(R)||this.model.start(R)}this.rowNode=f,this.setupEditors({cells:v,position:t,startedEdit:o,event:u,ignoreEventKey:d})}}processValidationResults(e){return e.fail.length>0&&this.editSvc.cellEditingInvalidCommitBlocks()?{destroy:[],keep:e.all}:{destroy:e.all,keep:[]}}stopCancelled(e){const{rowNode:t}=this;return t&&!this.model.hasRowEdits(t)?!1:(super.stopCancelled(e),this.cleanupEditors({rowNode:t},!0),this.rowNode=void 0,!0)}stopCommitted(e,t){const{rowNode:n}=this;if(n&&!this.model.hasRowEdits(n))return!1;const o=[];if(this.model.getEditMap().forEach((u,d)=>{if(!(!u||u.size===0)){for(const f of u.values())if(_sourceAndPendingDiffer(f)){o.push(d);break}}}),_populateModelValidationErrors(this.beans),this.editSvc.checkNavWithValidation({rowNode:n})==="block-stop")return!1;if(super.stopCommitted(e,t),t||!this.editSvc.isBatchEditing())for(const u of o)this.dispatchRowEvent({rowNode:u},"rowValueChanged");return this.cleanupEditors({rowNode:n},!0),this.rowNode=void 0,!0}onCellFocusChanged(e){const{rowIndex:t}=e,n=e.previousParams;if(n?.rowIndex===t||e.sourceEvent instanceof KeyboardEvent||this.beans.editSvc?.isRangeSelectionEnabledWhileEditing())return;const o=_getCellCtrl(this.beans,n);this.gos.get("invalidEditValueMode")==="block"&&o&&(this.model.getCellValidationModel().getCellValidation(o)||this.model.getRowValidationModel().getRowValidation(o))||super.onCellFocusChanged(e)}cleanupEditors(e={},t){super.cleanupEditors(e,t);for(const n of this.startedRows)this.dispatchRowEvent({rowNode:n},"rowEditingStopped"),this.destroyEditorsForRow(n);this.startedRows.length=0}destroyEditorsForRow(e){const t=_getRowCtrl(this.beans,{rowNode:e});if(!t)return;const n={};for(const o of t.getAllCellCtrls())o.comp?.getCellEditor()&&_destroyEditor(this.beans,o,n,o)}moveToNextEditingCell(e,t,n,o="ui",u=!1){const d=e.cellPosition;let f;this.model.suspend(!0);try{f=this.beans.navigation?.findNextCellToFocusOn(d,{backwards:t,startEditing:!0,skipToNextEditableCell:!1})}finally{this.model.suspend(!1)}if(f===!1)return null;if(f==null)return!1;const g=f.cellPosition,v=e.isCellEditable(),w=f.isCellEditable(),S=g&&d.rowIndex===g.rowIndex&&d.rowPinned===g.rowPinned;v&&this.setFocusOutOnEditor(e),this.restoreEditors();const R=this.gos.get("suppressStartEditOnTab");return w&&!u?R?f.focusCell(!0,n):(f.comp?.getCellEditor()||_setupEditor(this.beans,f,{event:n,cellStartedEdit:!0}),this.setFocusInOnEditor(f),f.focusCell(!1,n)):(w&&u&&this.setFocusInOnEditor(f),f.focusCell(!0,n)),!S&&!u&&(this.editSvc?.stopEditing({rowNode:e.rowNode},{event:n,forceStop:!0}),this.editSvc?.isRowEditing(e.rowNode,{withOpenEditor:!0})&&this.cleanupEditors(f,!0),R?f.focusCell(!0,n):this.editSvc.startEditing(f,{startedEdit:!0,event:n,source:o,ignoreEventKey:!0,editable:w||void 0})),e.rowCtrl?.refreshRow({suppressFlash:!0,force:!0}),!0}restoreEditors(){this.model.getEditMap().forEach((e,t)=>e.forEach(({state:n},o)=>{if(n!=="editing")return;const u=_getCellCtrl(this.beans,{rowNode:t,column:o});u&&!u.comp?.getCellEditor()&&_setupEditor(this.beans,u,{silent:!0})}))}destroy(){super.destroy(),this.rowNode=void 0,this.startedRows.length=0}},SingleCellEditStrategy=class extends BaseEditStrategy{constructor(){super(...arguments),this.beanName="singleCell"}shouldStop(e,t,n="ui"){const o=super.shouldStop(e,t,n);if(o!==null)return o;const u=e?.rowNode,d=e?.column,f=this.rowNode,g=this.column;return(!f||!g)&&u&&d?null:f!==u||g!==d?!0:!f&&!g?this.model.hasEdits(void 0,{withOpenEditor:!0}):!1}midBatchInputsAllowed(e){return this.model.hasEdits(e)}start(e){const{position:t,startedEdit:n,event:o,ignoreEventKey:u}=e;(this.rowNode!==t.rowNode||this.column!==t.column)&&super.cleanupEditors(),this.rowNode=t.rowNode,this.column=t.column,this.model.start(t),this.setupEditors({cells:[t],position:t,startedEdit:n,event:o,ignoreEventKey:u})}dispatchRowEvent(e,t,n){}processValidationResults(e){return e.fail.length>0&&this.editSvc.cellEditingInvalidCommitBlocks()?{destroy:[],keep:e.all}:{destroy:e.all,keep:[]}}stopCancelled(e){return super.stopCancelled(e),this.clearPosition()}stopCommitted(e,t){return super.stopCommitted(e,t),this.clearPosition()}clearPosition(){return this.rowNode=void 0,this.column=void 0,!0}onCellFocusChanged(e){const{colModel:t,editSvc:n}=this.beans,{rowIndex:o,column:u,rowPinned:d}=e,f=_getRowNode(this.beans,{rowIndex:o,rowPinned:d}),g=_getColId(u),v=t.getCol(g),w=e.previousParams;if(w){const S=_getColId(w.column);if(w?.rowIndex===o&&S===g&&w?.rowPinned===d)return}e.type=="cellFocused"&&(n?.isRangeSelectionEnabledWhileEditing()||n?.isEditing({rowNode:f,column:v},{withOpenEditor:!0}))||super.onCellFocusChanged(e)}moveToNextEditingCell(e,t,n,o="ui",u=!1){const d=this.beans.focusSvc.getFocusedCell();d&&(e=_getCellByPosition(this.beans,d)??e);const f=e.cellPosition;let g;const v=this.beans.gos.get("editType")==="fullRow";v&&this.model.suspend(!0),u||(e.eGui.focus(),this.editSvc?.stopEditing(e,{source:this.editSvc?.isBatchEditing()?"ui":"api",event:n}));try{g=this.beans.navigation?.findNextCellToFocusOn(f,{backwards:t,startEditing:!0})}finally{v&&this.model.suspend(!1)}if(g===!1)return null;if(g==null)return!1;const w=g.cellPosition,S=e.isCellEditable(),R=g.isCellEditable(),_=w&&f.rowIndex===w.rowIndex&&f.rowPinned===w.rowPinned;S&&!u&&this.setFocusOutOnEditor(e);const F=this.gos.get("suppressStartEditOnTab");if(!_&&!u&&(super.cleanupEditors(g,!0),F?g.focusCell(!0,n):this.editSvc.startEditing(g,{startedEdit:!0,event:n,source:o,ignoreEventKey:!0,editable:R})),R&&!u){if(g.focusCell(!1,n),F)g.focusCell(!0,n);else if(!g.comp?.getCellEditor()){const M=this.editSvc?.isEditing(g,{withOpenEditor:!0});_setupEditor(this.beans,g,{event:n,cellStartedEdit:!0,silent:M}),this.setFocusInOnEditor(g),this.cleanupEditors(g)}}else R&&u&&this.setFocusInOnEditor(g),g.focusCell(!0,n);return e.rowCtrl?.refreshRow({suppressFlash:!0,force:!0}),!0}destroy(){super.destroy(),this.rowNode=void 0,this.column=void 0}},EditCoreModule={moduleName:"EditCore",version:VERSION,beans:[EditModelService,EditService],apiFunctions:{getEditingCells,getEditRowValues,getCellEditorInstances,startEditingCell,stopEditing,isEditing,validateEdit},dynamicBeans:{singleCell:SingleCellEditStrategy,fullRow:FullRowEditStrategy},dependsOn:[PopupModule,TooltipModule],css:[cellEditingCSS]},UndoRedoEditModule={moduleName:"UndoRedoEdit",version:VERSION,beans:[UndoRedoService],apiFunctions:{undoCellEditing,redoCellEditing,getCurrentUndoSize,getCurrentRedoSize},dependsOn:[EditCoreModule]},TextEditorModule={moduleName:"TextEditor",version:VERSION,userComponents:{agCellEditor:TextCellEditor,agTextCellEditor:TextCellEditor},dependsOn:[EditCoreModule]},NumberEditorModule={moduleName:"NumberEditor",version:VERSION,userComponents:{agNumberCellEditor:{classImp:NumberCellEditor}},dependsOn:[EditCoreModule]},DateEditorModule={moduleName:"DateEditor",version:VERSION,userComponents:{agDateCellEditor:DateCellEditor,agDateStringCellEditor:DateStringCellEditor},dependsOn:[EditCoreModule]},CheckboxEditorModule={moduleName:"CheckboxEditor",version:VERSION,userComponents:{agCheckboxCellEditor:CheckboxCellEditor},dependsOn:[EditCoreModule]},SelectEditorModule={moduleName:"SelectEditor",version:VERSION,userComponents:{agSelectCellEditor:SelectCellEditor},dependsOn:[EditCoreModule]},LargeTextEditorModule={moduleName:"LargeTextEditor",version:VERSION,userComponents:{agLargeTextCellEditor:LargeTextCellEditor},dependsOn:[EditCoreModule]},CustomEditorModule={moduleName:"CustomEditor",version:VERSION,dependsOn:[EditCoreModule]},FILTER_HANDLER_MAP={agSetColumnFilter:"agSetColumnFilterHandler",agMultiColumnFilter:"agMultiColumnFilterHandler",agGroupColumnFilter:"agGroupColumnFilterHandler",agNumberColumnFilter:"agNumberColumnFilterHandler",agBigIntColumnFilter:"agBigIntColumnFilterHandler",agDateColumnFilter:"agDateColumnFilterHandler",agTextColumnFilter:"agTextColumnFilterHandler"},FILTER_HANDLERS=new Set(Object.values(FILTER_HANDLER_MAP));function getFilterUiFromWrapper(e,t){const n=e.filterUi;if(!n)return null;if(n.created)return n.promise;if(t)return null;const o=n.create(n.refreshed),u=n;return u.created=!0,u.promise=o,o}function _refreshHandlerAndUi(e,t,n,o,u,d,f){return t.refresh?.({...n,model:o,source:d,additionalEventAttributes:f}),e().then(g=>{if(g){const{filter:v,filterParams:w}=g;_refreshFilterUi(v,w,o,u,d,f)}})}function _refreshFilterUi(e,t,n,o,u,d){e?.refresh?.({...t,model:n,state:o,source:u,additionalEventAttributes:d})}function getAndRefreshFilterUi(e,t,n,o){const u=e();u?.created&&u.promise.then(d=>{const f=t();_refreshFilterUi(d,u.filterParams,f,n()??{model:f},"ui",o)})}function _updateFilterModel(e){let t,n=!1,o;const{action:u,filterParams:d,getFilterUi:f,getModel:g,getState:v,updateState:w,updateModel:S,processModelToApply:R}=e;switch(u){case"apply":{const _=v();o=_?.model??null,R&&(o=R(o)),t={state:_?.state,model:o},n=!0;break}case"clear":{t={model:null},d?.buttons?.includes("apply")||(n=!0,o=null);break}case"reset":{t={model:null},n=!0,o=null;break}case"cancel":{t={model:g()};break}}w(t),n?S(o):getAndRefreshFilterUi(f,g,v,{fromAction:u})}function _getFilterModel(e,t){return e[t]??null}var HeaderFilterCellCtrl=class extends AbstractHeaderCellCtrl{constructor(){super(...arguments),this.iconCreated=!1}wireComp(e,t,n,o,u){this.comp=e;const d=setupCompBean(this,this.beans.context,u);this.eButtonShowMainFilter=n,this.eFloatingFilterBody=o,this.setGui(t,d),this.setupActive(),this.refreshHeaderStyles(),this.setupWidth(d),this.setupLeft(d),this.setupHover(d),this.setupFocus(d),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(d),this.setupUi(),d.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(d);const f=()=>this.onColDefChanged(d);d.addManagedListeners(this.column,{colDefChanged:f}),d.addManagedEventListeners({filterSwitched:({column:g})=>{g===this.column&&f()}}),d.addDestroyFunc(()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()})}resizeHeader(){}moveHeader(){}getHeaderClassParams(){const{column:e,beans:t}=this,n=e.colDef;return _addGridCommonParams(t.gos,{colDef:n,column:e,floatingFilter:!0})}setupActive(){const e=this.column.getColDef(),t=!!e.filter,n=!!e.floatingFilter;this.active=t&&n}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=_createIconNoSpan("filter",this.beans,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new ManagedFocusFeature(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.getLocaleTextFunc();_setAriaLabel(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){const{beans:t}=this;if(_getActiveDomElement(t)===this.eGui)return;const u=_findNextFocusableElement(t,this.eGui,null,e.shiftKey);if(u){t.headerNavigation?.scrollToColumn(this.column),e.preventDefault(),u.focus();return}const d=this.findNextColumnWithFloatingFilter(e.shiftKey);d&&t.focusSvc.focusHeaderPosition({headerPosition:{headerRowIndex:this.rowCtrl.rowIndex,column:d},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const t=this.beans.visibleCols;let n=this.column;do if(n=e?t.getColBefore(n):t.getColAfter(n),!n)break;while(!n.getColDef().filter||!n.getColDef().floatingFilter);return n}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();switch(e.key){case KeyCode.UP:case KeyCode.DOWN:case KeyCode.LEFT:case KeyCode.RIGHT:if(t)return;_stopPropagationForAgGrid(e);case KeyCode.ENTER:t&&_focusInto(this.eGui)&&e.preventDefault();break;case KeyCode.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const n=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),o=!!e.relatedTarget&&_isElementChildOfClass(e.relatedTarget,"ag-floating-filter");if(n&&o&&e.target===this.eGui){const u=this.lastFocusEvent,d=!!(u&&u.key===KeyCode.TAB);if(u&&d){const f=u.shiftKey;_focusInto(this.eGui,f)}}this.focusThis()}setupHover(e){this.beans.colHover?.addHeaderFilterColumnHoverListener(e,this.comp,this.column,this.eGui)}setupLeft(e){const t=new SetLeftFeature(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){this.suppressFilterButton=!this.beans.menuSvc?.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!_isLegacyMenuEnabled(this.gos)}setupUserComp(){if(!this.active)return;const e=this.beans.colFilter?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){const e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.beans.menuSvc?.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;const{beans:{colFilter:t},column:n,gos:o}=this,u=d=>{if(d?.source==="filterDestroyed"&&(!this.isAlive()||!t?.isAlive()))return;const f=this.comp.getFloatingFilterComp();f&&f.then(g=>{if(g){if(o.get("enableFilterHandlers")){const S=d;let R="filter";S?.afterFloatingFilter?R="ui":S?.afterDataChange?R="dataChanged":d?.source==="api"&&(R="api"),this.updateFloatingFilterParams(this.userCompDetails,R);return}const v=t?.getCurrentFloatingFilterParentModel(n),w=d?{...d,columns:d.columns??[],source:d.source==="api"?"api":"columnFilter"}:null;g.onParentModelChanged(v,w)}})};[this.destroySyncListener]=e.addManagedListeners(n,{filterChanged:u}),t?.isFilterActive(n)&&u(null)}setupWidth(e){const t=()=>{const n=`${this.column.getActualWidth()}px`;this.comp.setWidth(n)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){const e=!!this.beans.filterManager?.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(e),this.highlightFilterButtonWhenActive&&e&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){const t=this.active;this.setupActive();const n=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());const o=this.beans.colFilter,u=this.active?o?.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,d=this.comp.getFloatingFilterComp();!d||!u?this.updateCompDetails(e,u,n):d.then(f=>{!f||o?.areFilterCompsDifferent(this.userCompDetails??null,u)?this.updateCompDetails(e,u,n):this.updateFloatingFilterParams(u,"colDef")})}updateCompDetails(e,t,n){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),n&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e,t){if(!e)return;let n=e.params;this.comp.getFloatingFilterComp()?.then(o=>{typeof o?.refresh=="function"&&(this.gos.get("enableFilterHandlers")&&(n={...n,model:_getFilterModel(this.beans.colFilter?.model??{},this.column.getColId()),source:t}),o.refresh(n))})}addResizeAndMoveKeyboardListeners(){}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}};function showColumnMenu(e,t){const n=e.colModel.getCol(t);if(!n){_error(12,{colKey:t});return}e.menuSvc?.showColumnMenu({column:n,positionBy:"auto"})}function hidePopupMenu(e){e.menuSvc?.hidePopupMenu()}var MenuService=class extends BeanStub{constructor(){super(...arguments),this.beanName="menuSvc"}postConstruct(){const{enterpriseMenuFactory:e,filterMenuFactory:t}=this.beans;this.activeMenuFactory=e??t}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){this.showColumnMenuCommon(getFilterMenuFactory(this.beans),e,e.containerType,!0)}showHeaderContextMenu(e,t,n){this.activeMenuFactory?.showMenuAfterContextMenuEvent(e,t,n)}hidePopupMenu(){this.beans.contextMenuSvc?.hideActiveMenu(),this.activeMenuFactory?.hideActiveMenu()}hideFilterMenu(){getFilterMenuFactory(this.beans)?.hideActiveMenu()}isColumnMenuInHeaderEnabled(e){const{suppressHeaderMenuButton:t}=e.getColDef();return!t&&!!this.activeMenuFactory?.isMenuEnabled(e)&&(_isLegacyMenuEnabled(this.gos)||!!this.beans.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){return!e.getColDef().suppressHeaderFilterButton&&!!this.beans.filterManager?.isFilterAllowed(e)}isHeaderContextMenuEnabled(e){return!(e&&isColumn(e)?e.getColDef():e?.getColGroupDef())?.suppressHeaderContextMenu&&this.gos.get("columnMenu")==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!(_isIOSUserAgent()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!_isLegacyMenuEnabled(this.gos)&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){return!!this.beans.filterManager?.isFilterAllowed(e)&&!_isLegacyMenuEnabled(this.gos)&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isFloatingFilterButtonEnabled(e){return!e.getColDef().suppressFloatingFilterButton}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gos,t=e.get("suppressMenuHide");return _isLegacyMenuEnabled(e)?e.exists("suppressMenuHide")?t:!1:t}showColumnMenuCommon(e,t,n,o){const{positionBy:u,onClosedCallback:d}=t,f=t.column;if(u==="button"){const{buttonElement:g}=t;e?.showMenuAfterButtonClick(f,g,n,d,o)}else if(u==="mouse"){const{mouseEvent:g}=t;e?.showMenuAfterMouseEvent(f,g,n,d,o)}else if(f){const g=this.beans,v=g.ctrlsSvc;v.getScrollFeature().ensureColumnVisible(f,"auto"),_requestAnimationFrame(g,()=>{const w=v.getHeaderRowContainerCtrl(f.getPinned())?.getHeaderCtrlForColumn(f);w&&e?.showMenuAfterButtonClick(f,w.getAnchorElementForMenu(o),n,d,o)})}}};function _setColMenuVisible(e,t,n){e.menuVisible!==t&&(e.menuVisible=t,e.dispatchColEvent("menuVisibleChanged",n))}function getFilterMenuFactory(e){const{enterpriseMenuFactory:t,filterMenuFactory:n,gos:o}=e;return t&&_isLegacyMenuEnabled(o)?t:n}var SharedMenuModule={moduleName:"SharedMenu",version:VERSION,beans:[MenuService],apiFunctions:{showColumnMenu,hidePopupMenu}},columnFiltersCSS=".ag-set-filter{--ag-indentation-level:0}.ag-set-filter-item{align-items:center;display:flex;height:100%}:where(.ag-ltr) .ag-set-filter-item{padding-left:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}:where(.ag-rtl) .ag-set-filter-item{padding-right:calc(var(--ag-widget-container-horizontal-padding) + var(--ag-indentation-level)*var(--ag-set-filter-indent-size))}.ag-set-filter-item-checkbox{display:flex;height:100%;width:100%}.ag-set-filter-group-icons{display:block;:where(.ag-set-filter-group-closed-icon),:where(.ag-set-filter-group-indeterminate-icon),:where(.ag-set-filter-group-opened-icon){cursor:pointer}}:where(.ag-ltr) .ag-set-filter-group-icons{margin-right:var(--ag-widget-container-horizontal-padding)}:where(.ag-rtl) .ag-set-filter-group-icons{margin-left:var(--ag-widget-container-horizontal-padding)}.ag-filter-body-wrapper{display:flex;flex-direction:column}:where(.ag-menu:not(.ag-tabs) .ag-filter) .ag-filter-body-wrapper{min-width:180px}.ag-filter-filter{flex:1 1 0px}.ag-filter-condition{display:flex;justify-content:center}.ag-floating-filter-body{display:flex;flex:1 1 auto;height:100%;position:relative}.ag-floating-filter-full-body{align-items:center;display:flex;flex:1 1 auto;height:100%;overflow:hidden;width:100%}.ag-floating-filter-input{align-items:center;display:flex;width:100%;>:where(.ag-date-floating-filter-wrapper),>:where(.ag-floating-filter-input),>:where(.ag-input-field){flex:1 1 auto}:where(.ag-input-field-input[type=date]),:where(.ag-input-field-input[type=datetime-local]){width:1px}}.ag-floating-filter-button{display:flex;flex:none}.ag-date-floating-filter-wrapper{display:flex}.ag-set-floating-filter-input :where(.ag-input-field-input)[disabled]{pointer-events:none}.ag-floating-filter-button-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;height:var(--ag-icon-size);width:var(--ag-icon-size)}.ag-filter-loading{align-items:unset;background-color:var(--ag-chrome-background-color);height:100%;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);position:absolute;width:100%;z-index:1;:where(.ag-menu) &{background-color:var(--ag-menu-background-color)}}.ag-filter-separator{border-top:solid var(--ag-border-width) var(--menu-separator-color)}:where(.ag-filter-select) .ag-picker-field-wrapper{width:0}.ag-filter-condition-operator{height:17px}:where(.ag-ltr) .ag-filter-condition-operator-or{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-condition-operator-or{margin-right:calc(var(--ag-spacing)*2)}.ag-set-filter-select-all{padding-top:var(--ag-widget-container-vertical-padding)}.ag-filter-no-matches,.ag-set-filter-list{height:calc(var(--ag-list-item-height)*6)}.ag-filter-no-matches{padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}.ag-set-filter-tree-list{height:calc(var(--ag-list-item-height)*10)}.ag-set-filter-filter{margin-left:var(--ag-widget-container-horizontal-padding);margin-right:var(--ag-widget-container-horizontal-padding);margin-top:var(--ag-widget-container-vertical-padding)}.ag-filter-to{margin-top:var(--ag-widget-vertical-spacing)}.ag-mini-filter{margin:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}:where(.ag-ltr) .ag-set-filter-add-group-indent{margin-left:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-rtl) .ag-set-filter-add-group-indent{margin-right:calc(var(--ag-icon-size) + var(--ag-widget-container-horizontal-padding))}:where(.ag-filter-menu) .ag-set-filter-list{min-width:200px}.ag-filter-virtual-list-item:focus-visible{box-shadow:inset var(--ag-focus-shadow)}.ag-filter-apply-panel{display:flex;justify-content:flex-end;overflow:hidden;padding:var(--ag-widget-vertical-spacing) var(--ag-widget-container-horizontal-padding) var(--ag-widget-container-vertical-padding)}.ag-filter-apply-panel-button{line-height:1.5}:where(.ag-ltr) .ag-filter-apply-panel-button{margin-left:calc(var(--ag-spacing)*2)}:where(.ag-rtl) .ag-filter-apply-panel-button{margin-right:calc(var(--ag-spacing)*2)}.ag-simple-filter-body-wrapper{display:flex;flex-direction:column;gap:var(--ag-widget-vertical-spacing);min-height:calc(var(--ag-list-item-height) + var(--ag-widget-container-vertical-padding) + var(--ag-widget-vertical-spacing));overflow-y:auto;padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding);padding-bottom:var(--ag-widget-container-vertical-padding);:where(.ag-resizer-wrapper){margin:0}}.ag-multi-filter-menu-item{margin:var(--ag-spacing) 0}.ag-multi-filter-group-title-bar{background-color:transparent;color:var(--ag-header-text-color);font-weight:500;padding:calc(var(--ag-spacing)*1.5) var(--ag-spacing)}.ag-group-filter-field-select-wrapper{display:flex;flex-direction:column;gap:var(--ag-widget-vertical-spacing);padding:var(--ag-widget-container-vertical-padding) var(--ag-widget-container-horizontal-padding)}";function isColumnFilterPresent(e){const t=e.filterManager;return!!t?.isColumnFilterPresent()||!!t?.isAggregateFilterPresent()}function getColumnFilterInstance(e,t){return e.filterManager?.getColumnFilterInstance(t)??Promise.resolve(void 0)}function destroyFilter(e,t){const n=e.colModel.getColDefCol(t);if(n)return e.colFilter?.destroyFilter(n,"api")}function setFilterModel(e,t){e.frameworkOverrides.wrapIncoming(()=>e.filterManager?.setFilterModel(t))}function getFilterModel(e){return e.filterManager?.getFilterModel()??{}}function getColumnFilterModel(e,t,n){const{gos:o,colModel:u,colFilter:d}=e;n&&!o.get("enableFilterHandlers")&&(_warn(288),n=!1);const f=u.getColDefCol(t);return f?d?.getModelForColumn(f,n)??null:null}function setColumnFilterModel(e,t,n){return e.filterManager?.setColumnFilterModel(t,n)??Promise.resolve()}function showColumnFilter(e,t){const n=e.colModel.getCol(t);if(!n){_error(12,{colKey:t});return}e.menuSvc?.showFilterMenu({column:n,containerType:"columnFilter",positionBy:"auto"})}function hideColumnFilter(e){e.menuSvc?.hideFilterMenu()}function getColumnFilterHandler(e,t){const n=e.colModel.getCol(t);if(!n){_error(12,{colKey:t});return}return e.colFilter?.getHandler(n,!0)}function doFilterAction(e,t){const{colModel:n,colFilter:o,gos:u}=e;if(!u.get("enableFilterHandlers")){_warn(287);return}const{colId:d,action:f}=t;if(d){const g=n.getColById(d);g&&o?.updateModel(g,f)}else o?.updateAllModels(f)}var MONTH_LOCALE_TEXT={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},MONTH_KEYS=["january","february","march","april","may","june","july","august","september","october","november","december"];function setFilterNumberComparator(e,t){return e==null?-1:t==null?1:Number.parseFloat(e)-Number.parseFloat(t)}function setFilterBigIntComparator(e,t){if(e==null)return-1;if(t==null)return 1;const n=_parseBigIntOrNull(e),o=_parseBigIntOrNull(t);return n!=null&&o!=null?n===o?0:n>o?1:-1:String(e).localeCompare(String(t))}function isValidDate(e){return e instanceof Date&&!isNaN(e.getTime())}var filterParamsForEachDataType={number:()=>{},bigint:()=>{},boolean:()=>({maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(e,t)=>t,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(e,t)=>t===!1,numberOfInputs:0}]}),date:()=>({isValidDate}),dateString:({dataTypeDefinition:e})=>({comparator:(t,n)=>{const o=e.dateParser(n);return n==null||o<t?-1:o>t?1:0},isValidDate:t=>typeof t=="string"&&isValidDate(e.dateParser(t))}),dateTime:e=>filterParamsForEachDataType.date(e),dateTimeString:e=>filterParamsForEachDataType.dateString(e),object:()=>{},text:()=>{}},setFilterParamsForEachDataType={number:()=>({comparator:setFilterNumberComparator}),bigint:()=>({comparator:setFilterBigIntComparator}),boolean:({t:e})=>({valueFormatter:t=>_exists(t.value)?e(String(t.value),t.value?"True":"False"):e("blanks","(Blanks)")}),date:({formatValue:e,t})=>({valueFormatter:n=>{const o=e(n);return _exists(o)?o:t("blanks","(Blanks)")},treeList:!0,treeListFormatter:(n,o)=>{if(n==="NaN")return t("invalidDate","Invalid Date");if(o===1&&n!=null){const u=MONTH_KEYS[Number(n)-1];return t(u,MONTH_LOCALE_TEXT[u])}return n??t("blanks","(Blanks)")},treeListPathGetter:n=>_getDateParts(n,!1)}),dateString:({formatValue:e,dataTypeDefinition:t,t:n})=>({valueFormatter:o=>{const u=e(o);return _exists(u)?u:n("blanks","(Blanks)")},treeList:!0,treeListPathGetter:o=>_getDateParts(t.dateParser(o??void 0),!1),treeListFormatter:(o,u)=>{if(u===1&&o!=null){const d=MONTH_KEYS[Number(o)-1];return n(d,MONTH_LOCALE_TEXT[d])}return o??n("blanks","(Blanks)")}}),dateTime:e=>{const t=setFilterParamsForEachDataType.date(e);return t.treeListPathGetter=_getDateParts,t},dateTimeString(e){const t=e.dataTypeDefinition.dateParser,n=setFilterParamsForEachDataType.dateString(e);return n.treeListPathGetter=o=>_getDateParts(t(o??void 0)),n},object:({formatValue:e,t})=>({valueFormatter:n=>{const o=e(n);return _exists(o)?o:t("blanks","(Blanks)")}}),text:()=>{}};function _getFilterParamsForDataType(e,t,n,o,u,d,f){let g=t,v=n;const w=e==="agSetColumnFilter";!v&&o.baseDataType==="object"&&!w&&(v=({column:F,node:M})=>u({column:F,node:M,value:d.valueSvc.getValue(F,M,"data")}));const R=(w?setFilterParamsForEachDataType:filterParamsForEachDataType)[o.baseDataType],_=R({dataTypeDefinition:o,formatValue:u,t:f});return g=typeof t=="object"?{..._,...t}:_,{filterParams:g,filterValueGetter:v}}var defaultFilters={boolean:"agTextColumnFilter",date:"agDateColumnFilter",dateString:"agDateColumnFilter",dateTime:"agDateColumnFilter",dateTimeString:"agDateColumnFilter",bigint:"agBigIntColumnFilter",number:"agNumberColumnFilter",object:"agTextColumnFilter",text:"agTextColumnFilter"},defaultFloatingFilters={boolean:"agTextColumnFloatingFilter",date:"agDateColumnFloatingFilter",dateString:"agDateColumnFloatingFilter",dateTime:"agDateColumnFloatingFilter",dateTimeString:"agDateColumnFloatingFilter",bigint:"agBigIntColumnFloatingFilter",number:"agNumberColumnFloatingFilter",object:"agTextColumnFloatingFilter",text:"agTextColumnFloatingFilter"};function _getDefaultSimpleFilter(e,t=!1){return(t?defaultFloatingFilters:defaultFilters)[e??"text"]}function _getDefaultFloatingFilterType(e,t,n){if(t==null)return null;let o=null;const{compName:u,jsComp:d,fwComp:f}=_getFilterCompKeys(e,t);return u?o={agSetColumnFilter:"agSetColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",agBigIntColumnFilter:"agBigIntColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[u]:d==null&&f==null&&t.filter===!0&&(o=n()),o}var DUMMY_HANDLER={filterHandler:()=>({doesFilterPass:()=>!0})};function isAggFilter(e,t,n,o){if(!e.isPrimary())return!0;const d=!n;return!e.isValueActive()||!d?!1:t?!0:o}var ColumnFilterService=class extends BeanStub{constructor(){super(...arguments),this.beanName="colFilter",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.modelUpdates=[],this.columnModelUpdates=[],this.state=new Map,this.handlerMap={...FILTER_HANDLER_MAP},this.isGlobalButtons=!1,this.activeFilterComps=new Set}postConstruct(){this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.addManagedPropertyListener("pivotMode",this.onPivotModeChanged.bind(this));const e=this.gos,t={...e.get("initialState")?.filter?.filterModel??{}};this.initialModel=t,this.model={...t},e.get("enableFilterHandlers")||delete this.handlerMap.agMultiColumnFilter}refreshModel(){this.onNewRowsLoaded("rowDataUpdated")}setModel(e,t="api",n){const{colModel:o,dataTypeSvc:u,filterManager:d}=this.beans;if(u?.isPendingInference){this.modelUpdates.push({model:e,source:t});return}const f=[],g=this.getModel(!0);if(e){const v=new Set(Object.keys(e));this.allColumnFilters.forEach((w,S)=>{const R=e[S];f.push(this.setModelOnFilterWrapper(w,R)),v.delete(S)}),v.forEach(w=>{const S=o.getColDefCol(w)||o.getCol(w);if(!S){_warn(62,{colId:w});return}if(!S.isFilterAllowed()){_warn(63,{colId:w});return}const R=this.getOrCreateFilterWrapper(S,!0);if(!R){_warn(64,{colId:w});return}f.push(this.setModelOnFilterWrapper(R,e[w],!0))})}else this.model={},this.allColumnFilters.forEach(v=>{f.push(this.setModelOnFilterWrapper(v,null))});AgPromise.all(f).then(()=>{const v=this.getModel(!0),w=[];this.allColumnFilters.forEach((S,R)=>{const _=g?g[R]:null,F=v?v[R]:null;_jsonEquals(_,F)||w.push(S.column)}),w.length>0?d?.onFilterChanged({columns:w,source:t}):n&&this.updateActive("filterChanged")})}getModel(e){const t={},{allColumnFilters:n,initialModel:o,beans:{colModel:u}}=this;if(n.forEach((d,f)=>{const g=this.getModelFromFilterWrapper(d);_exists(g)&&(t[f]=g)}),!e)for(const d of Object.keys(o)){const f=o[d];_exists(f)&&!n.has(d)&&u.getCol(d)?.isFilterAllowed()&&(t[d]=f)}return t}setState(e,t,n="api"){if(this.state.clear(),t)for(const o of Object.keys(t)){const u=t[o];this.state.set(o,{model:_getFilterModel(this.model,o),state:u})}this.setModel(e,n,!0)}getState(){const e=this.state;if(!e.size)return;const t={};let n=!1;return e.forEach((o,u)=>{const d=o.state;d!=null&&(n=!0,t[u]=d)}),n?t:void 0}getModelFromFilterWrapper(e){const n=e.column.getColId();if(e.isHandler)return _getFilterModel(this.model,n);const o=e.filter;return o?typeof o.getModel!="function"?(_warn(66),null):o.getModel():_getFilterModel(this.initialModel,n)}isFilterPresent(){return this.activeColumnFilters.length>0}isAggFilterPresent(){return!!this.activeAggregateFilters.length}disableFilters(){this.initialModel={};const{allColumnFilters:e}=this;return e.size?(e.forEach(t=>this.disposeFilterWrapper(t,"advancedFilterEnabled")),!0):!1}updateActiveFilters(){const e=v=>v?v.isFilterActive?v.isFilterActive():(_warn(67),!1):!1,{colModel:t,gos:n}=this.beans,o=!!_getGroupAggFiltering(n),u=[],d=[],f=(v,w,S)=>{w&&(isAggFilter(v,t.isPivotMode(),t.isPivotActive(),o)?u.push(S):d.push(S))},g=[];return this.allColumnFilters.forEach(v=>{const w=v.column,S=w.getColId();if(v.isHandler)g.push(AgPromise.resolve().then(()=>{f(w,this.isHandlerActive(w),{colId:S,isHandler:!0,handler:v.handler,handlerParams:v.handlerParams})}));else{const R=getFilterUiFromWrapper(v);R&&g.push(R.then(_=>{f(w,e(_),{colId:S,isHandler:!1,comp:_})}))}}),AgPromise.all(g).then(()=>{this.activeAggregateFilters=u,this.activeColumnFilters=d})}updateFilterFlagInColumns(e,t){const n=[];return this.allColumnFilters.forEach(o=>{const u=o.column;if(o.isHandler)n.push(AgPromise.resolve().then(()=>{this.setColFilterActive(u,this.isHandlerActive(u),e,t)}));else{const d=getFilterUiFromWrapper(o);d&&n.push(d.then(f=>{this.setColFilterActive(u,f.isFilterActive(),e,t)}))}}),this.beans.groupFilter?.updateFilterFlags(e,t),AgPromise.all(n)}doFiltersPass(e,t,n){const{data:o,aggData:u}=e,d=n?this.activeAggregateFilters:this.activeColumnFilters,f=n?u:o,g=this.model;for(let v=0;v<d.length;v++){const w=d[v],{colId:S,isHandler:R}=w;if(S!==t)if(R){const{handler:_,handlerParams:F}=w;if(!_.doesFilterPass({node:e,data:f,model:_getFilterModel(g,S),handlerParams:F}))return!1}else{const _=w.comp;if(typeof _.doesFilterPass!="function"){_error(91);continue}if(!_.doesFilterPass({node:e,data:f}))return!1}}return!0}getHandlerParams(e){const t=this.allColumnFilters.get(e.getColId());return t?.isHandler?t.handlerParams:void 0}callOnFilterChangedOutsideRenderCycle(e){const{rowRenderer:t,filterManager:n}=this.beans,o=()=>{this.isAlive()&&n?.onFilterChanged(e)};t.isRefreshInProgress()?setTimeout(o,0):o()}updateBeforeFilterChanged(e={}){const{column:t,additionalEventAttributes:n}=e,o=t?.getColId();return this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",n).then(()=>{this.allColumnFilters.forEach(u=>{const{column:d,isHandler:f}=u;o!==d.getColId()&&(f&&u.handler.onAnyFilterChanged?.(),getFilterUiFromWrapper(u,f)?.then(g=>{typeof g?.onAnyFilterChanged=="function"&&g.onAnyFilterChanged()}))}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(e){const t=[];this.allColumnFilters.forEach(n=>{const o=n.isHandler;o&&n.handler.onNewRowsLoaded?.();const u=getFilterUiFromWrapper(n,o);u&&t.push(u.then(d=>{d.onNewRowsLoaded?.()}))}),AgPromise.all(t).then(()=>this.updateActive(e,{afterDataChange:!0}))}updateActive(e,t){this.updateFilterFlagInColumns(e,t).then(()=>this.updateActiveFilters())}createGetValue(e,t){const{filterValueSvc:n,colModel:o}=this.beans;return(u,d)=>{const f=d?o.getCol(d):e;return f?n.getValue(f,u,t):void 0}}isFilterActive(e){const t=this.cachedFilter(e);if(t?.isHandler)return this.isHandlerActive(e);const n=t?.filter;return n?n.isFilterActive():_getFilterModel(this.initialModel,e.getColId())!=null}isHandlerActive(e){const t=_exists(_getFilterModel(this.model,e.getColId()));if(t)return t;const n=this.beans.groupFilter;return n?.isGroupFilter(e)?n.isFilterActive(e):!1}getOrCreateFilterUi(e){const t=this.getOrCreateFilterWrapper(e,!0);return t?getFilterUiFromWrapper(t):null}getFilterUiForDisplay(e){const t=this.getOrCreateFilterWrapper(e,!0);if(!t)return null;const n=getFilterUiFromWrapper(t);return n?n.then(o=>({comp:o,params:t.filterUi.filterParams,isHandler:t.isHandler})):null}getHandler(e,t){const n=this.getOrCreateFilterWrapper(e,t);return n?.isHandler?n.handler:void 0}getOrCreateFilterWrapper(e,t){if(!e.isFilterAllowed())return;let n=this.cachedFilter(e);return!n&&t&&(n=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,n)),n}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e,t=!1){return this.getDefaultFilterFromDataType(()=>this.beans.dataTypeSvc?.getBaseDataType(e),t)}getDefaultFilterFromDataType(e,t=!1){return _isSetFilterByDefault(this.gos)?t?"agSetColumnFloatingFilter":"agSetColumnFilter":_getDefaultSimpleFilter(e(),t)}getDefaultFloatingFilter(e){return this.getDefaultFilter(e,!0)}createFilterComp(e,t,n,o,u,d){const f=()=>{const w=this.createFilterCompParams(e,u,d),S=o(w,u);return _getFilterDetails(this.beans.userCompFactory,t,S,n)},g=f();return g?{compDetails:g,createFilterUi:w=>(w?f():g).newAgStackInstance()}:null}createFilterInstance(e,t,n,o){const u=this.beans.selectableFilter;u?.isSelectable(t)&&(t=u.getFilterDef(e,t));const{handler:d,handlerParams:f,handlerGenerator:g}=this.createHandler(e,t,n)??{},v=this.createFilterComp(e,t,n,o,!!d,"init");if(!v)return{compDetails:null,createFilterUi:null,handler:d,handlerGenerator:g,handlerParams:f};const{compDetails:w,createFilterUi:S}=v;return this.isGlobalButtons&&(w.params?.buttons?.length||_warn(281,{colId:e.getColId()})),{compDetails:w,handler:d,handlerGenerator:g,handlerParams:f,createFilterUi:S}}createBaseFilterParams(e,t){const{filterManager:n,rowModel:o}=this.beans;return _addGridCommonParams(this.gos,{column:e,colDef:e.getColDef(),getValue:this.createGetValue(e),doesRowPassOtherFilter:t?()=>!0:u=>n?.doesRowPassOtherFilters(e.getColId(),u)??!0,rowModel:o})}createFilterCompParams(e,t,n,o){const u=this.filterChangedCallbackFactory(e),d=this.createBaseFilterParams(e,o);if(d.filterChangedCallback=u,d.filterModifiedCallback=o?()=>{}:f=>this.filterModified(e,f),t){const f=d,g=e.getColId(),v=_getFilterModel(this.model,g);f.model=v,f.state=this.state.get(g)??{model:v},f.onModelChange=(w,S)=>{this.updateStoredModel(g,w),this.refreshHandlerAndUi(e,w,"ui",!1,S).then(()=>{u({...S,source:"columnFilter"})})},f.onStateChange=w=>{this.updateState(e,w),this.updateOrRefreshFilterUi(e)},f.onAction=(w,S,R)=>{this.updateModel(e,w,S),this.dispatchLocalEvent({type:"filterAction",column:e,action:w,event:R})},f.getHandler=()=>this.getHandler(e,!0),f.onUiChange=w=>this.filterUiChanged(e,w),f.source=n}return d}createFilterUiForHandler(e,t){return t?{created:!1,create:t,filterParams:e.params,compDetails:e}:null}createFilterUiLegacy(e,t,n){const o=t(),u={created:!0,create:t,filterParams:e.params,compDetails:e,promise:o};return o.then(n),u}createFilterWrapper(e){const{compDetails:t,handler:n,handlerGenerator:o,handlerParams:u,createFilterUi:d}=this.createFilterInstance(e,e.getColDef(),this.getDefaultFilter(e),g=>g),f=e.getColId();if(n)return delete this.initialModel[f],n.init?.({...u,source:"init",model:_getFilterModel(this.model,f)}),{column:e,isHandler:!0,handler:n,handlerGenerator:o,handlerParams:u,filterUi:this.createFilterUiForHandler(t,d)};if(d){const g={column:e,filterUi:null,isHandler:!1};return g.filterUi=this.createFilterUiLegacy(t,d,v=>{g.filter=v??void 0}),g}return{column:e,filterUi:null,isHandler:!1}}createHandlerFunc(e,t,n){const{gos:o,frameworkOverrides:u,registry:d}=this.beans;let f;const g=F=>{const M=F.filter;if(isColumnFilterComp(M)){const I=M.handler;return I||(f=M.doesFilterPass,f?()=>({doesFilterPass:f}):void 0)}return typeof M=="string"?M:void 0},v=o.get("enableFilterHandlers"),w=v?g(t):void 0,S=F=>()=>this.createBean(d.createDynamicBean(F,!0));let R,_;if(typeof w=="string"){const F=o.get("filterHandlers")?.[w];F!=null?R=F:FILTER_HANDLERS.has(w)&&(R=S(w),_=w)}else R=w;if(!R){let F;const{compName:M,jsComp:I,fwComp:N}=_getFilterCompKeys(u,t);M?F=M:I==null&&N==null&&t.filter===!0&&(F=n),_=this.handlerMap[F],_&&(R=S(_))}return R?{filterHandler:R,handlerNameOrCallback:f??_}:v?(_isClientSideRowModel(o)&&_warn(277,{colId:e.getColId()}),DUMMY_HANDLER):void 0}createHandler(e,t,n){const o=this.createHandlerFunc(e,t,n);if(!o)return;const u=_mergeFilterParamsWithApplicationProvidedParams(this.beans.userCompFactory,t,this.createFilterCompParams(e,!0,"init")),{handlerNameOrCallback:d,filterHandler:f}=o,{handler:g,handlerParams:v}=this.createHandlerFromFunc(e,f,u);return{handler:g,handlerParams:v,handlerGenerator:d??f}}createHandlerFromFunc(e,t,n){const o=e.getColDef(),u=t(_addGridCommonParams(this.gos,{column:e,colDef:o})),d=this.createHandlerParams(e,n);return{handler:u,handlerParams:d}}createHandlerParams(e,t){const n=e.getColDef(),o=e.getColId(),u=this.filterChangedCallbackFactory(e);return _addGridCommonParams(this.gos,{colDef:n,column:e,getValue:this.createGetValue(e),doesRowPassOtherFilter:d=>this.beans.filterManager?.doesRowPassOtherFilters(o,d)??!0,onModelChange:(d,f)=>{this.updateStoredModel(o,d),this.refreshHandlerAndUi(e,d,"handler",!1,f).then(()=>{u({...f,source:"columnFilter"})})},onModelAsStringChange:()=>{e.dispatchColEvent("filterChanged","filterChanged"),this.dispatchLocalEvent({type:"filterModelAsStringChanged",column:e})},filterParams:t})}onColumnsChanged(){const e=[],{colModel:t,filterManager:n,groupFilter:o}=this.beans;this.allColumnFilters.forEach((d,f)=>{let g;d.column.isPrimary()?g=t.getColDefCol(f):g=t.getCol(f),!(g&&g===d.column)&&(e.push(d.column),this.disposeFilterWrapper(d,"columnChanged"),this.disposeColumnListener(f))});const u=o&&e.every(d=>o.isGroupFilter(d));e.length>0&&!u&&n?.onFilterChanged({columns:e,source:"api"})}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;const n=this.beans.groupFilter;return n?.isGroupFilter(e)?n.isFilterAllowed(e):!0}getFloatingFilterCompDetails(e,t){const{userCompFactory:n,frameworkOverrides:o,selectableFilter:u,gos:d}=this.beans,f=F=>{this.getOrCreateFilterUi(e)?.then(I=>{F(_unwrapUserComp(I))})},g=e.getColDef(),v=u?.isSelectable(g)?u.getFilterDef(e,g):g,w=_getDefaultFloatingFilterType(o,v,()=>this.getDefaultFloatingFilter(e))??"agReadOnlyFloatingFilter",S=d.get("enableFilterHandlers"),R=_mergeFilterParamsWithApplicationProvidedParams(n,v,this.createFilterCompParams(e,S,"init",!0)),_=_addGridCommonParams(d,{column:e,filterParams:R,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:f,showParentFilter:t});if(S){const F=_,M=e.getColId(),I=this.filterChangedCallbackFactory(e);F.onUiChange=N=>this.floatingFilterUiChanged(e,N),F.model=_getFilterModel(this.model,M),F.onModelChange=(N,B)=>{this.updateStoredModel(M,N),this.refreshHandlerAndUi(e,N,"floating",!0,B).then(()=>{I({...B,source:"columnFilter"})})},F.getHandler=()=>this.getHandler(e,!0),F.source="init"}return _getFloatingFilterCompDetails(n,g,_,w)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilterUi(e,t,n,o){const u="paramsUpdated";if(e.isHandler){const d=t.getColId();delete this.initialModel[d],this.state.delete(d);const f=e.filterUi,g=this.createFilterUiForHandler(n,o);e.filterUi=g;const v=this.eventSvc;f?.created?f.promise.then(w=>{this.destroyBean(w),v.dispatchEvent({type:"filterDestroyed",source:u,column:t})}):v.dispatchEvent({type:"filterHandlerDestroyed",source:u,column:t})}else this.destroyFilter(t,u)}destroyFilter(e,t="api"){const n=e.getColId(),o=this.allColumnFilters.get(n);this.disposeColumnListener(n),delete this.initialModel[n],o&&this.disposeFilterWrapper(o,t).then(u=>{u&&this.isAlive()&&this.beans.filterManager?.onFilterChanged({columns:[e],source:"api"})})}disposeColumnListener(e){const t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){let n=!1;const{column:o,isHandler:u,filterUi:d}=e,f=o.getColId();u&&(n=this.isHandlerActive(o),this.destroyBean(e.handler),delete this.model[f],this.state.delete(f));const g=()=>{this.setColFilterActive(o,!1,"filterDestroyed"),this.allColumnFilters.delete(f),this.eventSvc.dispatchEvent({type:"filterDestroyed",source:t,column:o})};if(d){if(d.created)return d.promise.then(v=>(n=u?n:!!v?.isFilterActive(),this.destroyBean(v),g(),n));g()}return AgPromise.resolve(n)}filterChangedCallbackFactory(e){return t=>{this.callOnFilterChangedOutsideRenderCycle({additionalEventAttributes:t,columns:[e],column:e,source:t?.source??"columnFilter"})}}filterParamsChanged(e,t="api"){const n=this.allColumnFilters.get(e);if(!n)return;const o=this.beans,u=n.column,d=u.getColDef(),f=u.isFilterAllowed(),g=this.getDefaultFilter(u),v=o.selectableFilter,w=v?.isSelectable(d)?v.getFilterDef(u,d):d,S=f?this.createHandlerFunc(u,w,this.getDefaultFilter(u)):void 0,R=!!S,_=n.isHandler;if(_!=R){this.destroyFilter(u,"paramsUpdated");return}const{compDetails:F,createFilterUi:M}=(f?this.createFilterComp(u,w,g,N=>N,R,"colDef"):null)??{compDetails:null,createFilterUi:null},I=F?.params??_mergeFilterParamsWithApplicationProvidedParams(o.userCompFactory,w,this.createFilterCompParams(u,R,"colDef"));if(_){const N=S?.handlerNameOrCallback??S?.filterHandler,B=_getFilterModel(this.model,e);if(n.handlerGenerator!=N){const H=n.handler,{handler:U,handlerParams:$}=this.createHandlerFromFunc(u,S.filterHandler,I);n.handler=U,n.handlerParams=$,n.handlerGenerator=N,delete this.model[e],U.init?.({...$,source:"init",model:null}),this.destroyBean(H),B!=null&&this.beans.filterManager?.onFilterChanged({columns:[u],source:t})}else{const H=this.createHandlerParams(u,F?.params);n.handlerParams=H,n.handler.refresh?.({...H,source:"colDef",model:B})}}if(this.areFilterCompsDifferent(n.filterUi?.compDetails??null,F)||!n.filterUi||!F){this.destroyFilterUi(n,u,F,M);return}n.filterUi.filterParams=I,getFilterUiFromWrapper(n,_)?.then(N=>{(N?.refresh?N.refresh(I):!0)===!1?this.destroyFilterUi(n,u,F,M):this.dispatchLocalEvent({type:"filterParamsChanged",column:u,params:I})})}refreshHandlerAndUi(e,t,n,o,u){const d=this.cachedFilter(e);if(!d)return o&&this.getOrCreateFilterWrapper(e,!0),AgPromise.resolve();if(!d.isHandler)return AgPromise.resolve();const{filterUi:f,handler:g,handlerParams:v}=d;return _refreshHandlerAndUi(()=>{if(f){const{created:w,filterParams:S}=f;if(w)return f.promise.then(R=>R?{filter:R,filterParams:S}:void 0);f.refreshed=!0}return AgPromise.resolve(void 0)},g,v,t,this.state.get(e.getColId())??{model:t},n,u)}setColumnFilterWrapper(e,t){const n=e.getColId();this.allColumnFilters.set(n,t),this.allColumnListeners.set(n,this.addManagedListeners(e,{colDefChanged:()=>this.filterParamsChanged(n)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;const{componentClass:n}=e,{componentClass:o}=t;return!(n===o||n?.render&&o?.render&&n.render===o.render)}hasFloatingFilters(){return this.beans.colModel.getCols().some(t=>t.getColDef().floatingFilter)}getFilterInstance(e){const t=this.beans.colModel.getColDefCol(e);if(!t)return Promise.resolve(void 0);const n=this.getOrCreateFilterUi(t);return n?new Promise(o=>{n.then(u=>{o(_unwrapUserComp(u))})}):Promise.resolve(null)}processFilterModelUpdateQueue(){this.modelUpdates.forEach(({model:e,source:t})=>this.setModel(e,t)),this.modelUpdates=[],this.columnModelUpdates.forEach(({key:e,model:t,resolve:n})=>{this.setModelForColumn(e,t).then(()=>n())}),this.columnModelUpdates=[]}getModelForColumn(e,t){if(t){const{state:o,model:u}=this,d=e.getColId(),f=o.get(d);return f?f.model??null:_getFilterModel(u,d)}const n=this.cachedFilter(e);return n?this.getModelFromFilterWrapper(n):null}setModelForColumn(e,t){if(this.beans.dataTypeSvc?.isPendingInference){let n=()=>{};const o=new Promise(u=>{n=u});return this.columnModelUpdates.push({key:e,model:t,resolve:n}),o}return new Promise(n=>{this.setModelForColumnLegacy(e,t).then(o=>n(o))})}getStateForColumn(e){return this.state.get(e)??{model:_getFilterModel(this.model,e)}}setModelForColumnLegacy(e,t){const n=this.beans.colModel.getColDefCol(e),o=n?this.getOrCreateFilterWrapper(n,!0):null;return o?this.setModelOnFilterWrapper(o,t):AgPromise.resolve()}setColDefPropsForDataType(e,t,n){const o=e.filter,u=o===!0?this.getDefaultFilterFromDataType(()=>t.baseDataType):o;if(typeof u!="string")return;let d,f;const g=this.beans,{filterParams:v,filterValueGetter:w}=e;u==="agMultiColumnFilter"?{filterParams:d,filterValueGetter:f}=g.multiFilter?.getParamsForDataType(v,w,t,n)??{}:{filterParams:d,filterValueGetter:f}=_getFilterParamsForDataType(u,v,w,t,n,g,this.getLocaleTextFunc()),e.filterParams=d,f&&(e.filterValueGetter=f)}setColFilterActive(e,t,n,o){e.filterActive!==t&&(e.filterActive=t,e.dispatchColEvent("filterActiveChanged",n)),e.dispatchColEvent("filterChanged",n,o)}setModelOnFilterWrapper(e,t,n){return new AgPromise(o=>{if(e.isHandler){const d=e.column,f=d.getColId(),g=this.model[f];if(this.updateStoredModel(f,t),n&&t===g){o();return}this.refreshHandlerAndUi(d,t,"api").then(()=>o());return}const u=getFilterUiFromWrapper(e);if(u){u.then(d=>{if(typeof d?.setModel!="function"){_warn(65),o();return}(d.setModel(t)||AgPromise.resolve()).then(()=>o())});return}o()})}updateStoredModel(e,t){_exists(t)?this.model[e]=t:delete this.model[e];const n=this.state.get(e),o={model:t,state:n?.state};this.state.set(e,o)}filterModified(e,t){this.getOrCreateFilterUi(e)?.then(n=>{this.eventSvc.dispatchEvent({type:"filterModified",column:e,filterInstance:n,...t})})}filterUiChanged(e,t){this.gos.get("enableFilterHandlers")&&this.eventSvc.dispatchEvent({type:"filterUiChanged",column:e,...t})}floatingFilterUiChanged(e,t){this.gos.get("enableFilterHandlers")&&this.eventSvc.dispatchEvent({type:"floatingFilterUiChanged",column:e,...t})}updateModel(e,t,n){const o=e.getColId(),u=this.cachedFilter(e),d=()=>u?.filterUi;_updateFilterModel({action:t,filterParams:u?.filterUi?.filterParams,getFilterUi:d,getModel:()=>_getFilterModel(this.model,o),getState:()=>this.state.get(o),updateState:f=>this.updateState(e,f),updateModel:f=>d()?.filterParams?.onModelChange(f,{...n,fromAction:t}),processModelToApply:u?.isHandler?u.handler.processModelToApply?.bind(u.handler):void 0})}updateAllModels(e,t){const n=[];this.allColumnFilters.forEach((o,u)=>{const d=this.beans.colModel.getColDefCol(u);d&&_updateFilterModel({action:e,filterParams:o.filterUi?.filterParams,getFilterUi:()=>o.filterUi,getModel:()=>_getFilterModel(this.model,u),getState:()=>this.state.get(u),updateState:f=>this.updateState(d,f),updateModel:f=>{this.updateStoredModel(u,f),this.dispatchLocalEvent({type:"filterAction",column:d,action:e}),n.push(this.refreshHandlerAndUi(d,f,"ui"))},processModelToApply:o?.isHandler?o.handler.processModelToApply?.bind(o.handler):void 0})}),n.length&&AgPromise.all(n).then(()=>{this.callOnFilterChangedOutsideRenderCycle({source:"columnFilter",additionalEventAttributes:t,columns:[]})})}updateOrRefreshFilterUi(e){const t=e.getColId();getAndRefreshFilterUi(()=>this.cachedFilter(e)?.filterUi,()=>_getFilterModel(this.model,t),()=>this.state.get(t))}updateState(e,t){this.state.set(e.getColId(),t),this.dispatchLocalEvent({type:"filterStateChanged",column:e,state:t})}canApplyAll(){const{state:e,model:t,activeFilterComps:n}=this;for(const u of n)if(u.source==="COLUMN_MENU")return!1;let o=!1;for(const u of e.keys()){const d=e.get(u);if(d.valid===!1)return!1;(d.model??null)!==_getFilterModel(t,u)&&(o=!0)}return o}hasUnappliedModel(e){const{model:t,state:n}=this;return(n.get(e)?.model??null)!==_getFilterModel(t,e)}setGlobalButtons(e){this.isGlobalButtons=e,this.dispatchLocalEvent({type:"filterGlobalButtons",isGlobal:e})}shouldKeepStateOnDetach(e,t){if(t==="newFiltersToolPanel")return!0;const n=this.beans.filterPanelSvc;return n?.isActive?!!n.getState(e.getColId()):!1}onPivotModeChanged(e){const{colModel:t,pivotColsSvc:n}=this.beans,o=!!_getGroupAggFiltering(this.gos),u=e.currentValue,d=u?this.activeColumnFilters:this.activeAggregateFilters,f=u?this.activeAggregateFilters:this.activeColumnFilters,g=[];for(const v of d){const w=t.getColById(v.colId),S=u&&!!n?.columns.length;w&&u===isAggFilter(w,u,S,o)&&(f.push(v),g.push(v))}_removeAllFromArray(d,g)}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear(),this.state.clear(),this.activeFilterComps.clear()}};function isAnyFilterPresent(e){return!!e.filterManager?.isAnyFilterPresent()}function onFilterChanged(e,t="api"){e.filterManager?.onFilterChanged({source:t})}var FilterManager=class extends BeanStub{constructor(){super(...arguments),this.beanName="filterManager",this.advFilterModelUpdateQueue=[]}wireBeans(e){this.quickFilter=e.quickFilter,this.advancedFilter=e.advancedFilter,this.colFilter=e.colFilter}postConstruct(){const e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:({enabled:o})=>this.onAdvFilterEnabledChanged(o),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.quickFilter&&this.addManagedListeners(this.quickFilter,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})});const{gos:n}=this;this.alwaysPassFilter=n.get("alwaysPassFilter"),this.addManagedPropertyListener("alwaysPassFilter",()=>{this.alwaysPassFilter=n.get("alwaysPassFilter"),this.onFilterChanged({source:"api"})})}isExternalFilterPresentCallback(){const e=this.gos.getCallback("isExternalFilterPresent");return typeof e=="function"&&e({})}doesExternalFilterPass(e){const t=this.gos.get("doesExternalFilterPass");return typeof t=="function"&&t(e)}setFilterState(e,t,n="api"){this.isAdvFilterEnabled()||this.colFilter?.setState(e,t,n)}setFilterModel(e,t="api",n){if(this.isAdvFilterEnabled()){n||this.warnAdvFilters();return}this.colFilter?.setModel(e,t)}getFilterModel(){return this.colFilter?.getModel()??{}}getFilterState(){return this.colFilter?.getState()}isColumnFilterPresent(){return!!this.colFilter?.isFilterPresent()}isAggregateFilterPresent(){return!!this.colFilter?.isAggFilterPresent()}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.externalFilterPresent||this.isAdvFilterPresent()}isAnyFilterPresent(){return this.isChildFilterPresent()||this.isAggregateFilterPresent()}isAdvFilterPresent(){return this.isAdvFilterEnabled()&&this.advancedFilter.isFilterPresent()}onAdvFilterEnabledChanged(e){e?this.colFilter?.disableFilters()&&this.onFilterChanged({source:"advancedFilter"}):this.advancedFilter?.isFilterPresent()&&(this.advancedFilter.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvFilterEnabled(){return!!this.advancedFilter?.isEnabled()}isAdvFilterHeaderActive(){return this.isAdvFilterEnabled()&&this.advancedFilter.isHeaderActive()}refreshFiltersForAggregations(){_getGroupAggFiltering(this.gos)&&this.isAnyFilterPresent()&&this.onFilterChanged()}onFilterChanged(e={}){const{source:t,additionalEventAttributes:n,columns:o=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.colFilter?this.colFilter.updateBeforeFilterChanged(e):AgPromise.resolve()).then(()=>{const u={source:t,type:"filterChanged",columns:o};n&&_mergeDeep(u,n),this.eventSvc.dispatchEvent(u),this.colFilter?.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){return!!this.colFilter?.isSuppressFlashingCellsBecauseFiltering()}isQuickFilterPresent(){return!!this.quickFilter?.isFilterPresent()}updateAggFiltering(){this.aggFiltering=!!_getGroupAggFiltering(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.beans.colModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,colIdToSkip:e})}doesRowPassAggregateFilters(e){const{rowNode:t}=e;return this.alwaysPassFilter?.(t)?!0:!(this.isAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.isAggregateFilterPresent()&&!this.colFilter.doFiltersPass(t,e.colIdToSkip,!0))}doesRowPassFilter(e){const{rowNode:t}=e;return this.alwaysPassFilter?.(t)?!0:!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilter.doesRowPass(t)||this.externalFilterPresent&&!this.doesExternalFilterPass(t)||this.isColumnFilterPresent()&&!this.colFilter.doFiltersPass(t,e.colIdToSkip)||this.isAdvFilterPresent()&&!this.advancedFilter.doesFilterPass(t))}isFilterAllowed(e){return this.isAdvFilterEnabled()?!1:!!this.colFilter?.isFilterAllowed(e)}getAdvFilterModel(){return this.isAdvFilterEnabled()?this.advancedFilter.getModel():null}setAdvFilterModel(e,t="api"){if(this.isAdvFilterEnabled()){if(this.beans.dataTypeSvc?.isPendingInference){this.advFilterModelUpdateQueue.push(e);return}this.advancedFilter.setModel(e??null),this.onFilterChanged({source:t})}}toggleAdvFilterBuilder(e,t){this.isAdvFilterEnabled()&&this.advancedFilter.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvFilterColumns(){this.isAdvFilterEnabled()&&this.advancedFilter.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return this.isAdvFilterEnabled()?!1:!!this.colFilter?.hasFloatingFilters()}getColumnFilterInstance(e){return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve(void 0)):this.colFilter?.getFilterInstance(e)??Promise.resolve(void 0)}warnAdvFilters(){_warn(68)}setupAdvFilterHeaderComp(e){this.advancedFilter?.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvFilterHeaderActive()?this.advancedFilter.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){for(const e of this.advFilterModelUpdateQueue)this.setAdvFilterModel(e);this.advFilterModelUpdateQueue=[]}setColumnFilterModel(e,t){return this.isAdvFilterEnabled()?(this.warnAdvFilters(),Promise.resolve()):this.colFilter?.setModelForColumn(e,t)??Promise.resolve()}},FilterMenuFactory=class extends BeanStub{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupSvc=e.popupSvc}hideActiveMenu(){this.hidePopup?.()}showMenuAfterMouseEvent(e,t,n,o){e&&!e.isColumn||this.showPopup(e,u=>{this.popupSvc?.positionPopupUnderMouseEvent({additionalParams:{column:e},type:n,mouseEvent:t,ePopup:u})},n,t.target,_isLegacyMenuEnabled(this.gos),o)}showMenuAfterButtonClick(e,t,n,o){if(e&&!e.isColumn)return;let u=-1,d="left";const f=_isLegacyMenuEnabled(this.gos);!f&&this.gos.get("enableRtl")&&(u=1,d="right");const g=f?void 0:4*u,v=f?void 0:4;this.showPopup(e,w=>{this.popupSvc?.positionPopupByComponent({type:n,eventSource:t,ePopup:w,nudgeX:g,nudgeY:v,alignSide:d,keepWithinBounds:!0,position:"under",additionalParams:{column:e}})},n,t,f,o)}showPopup(e,t,n,o,u,d){const f=e?this.createBean(new FilterComp(e,"COLUMN_MENU")):void 0;if(this.activeMenu=f,!f?.hasFilter()||!e){_error(57);return}const g=_createElement({tag:"div",cls:`ag-menu${u?"":" ag-filter-menu"}`,role:"presentation"});[this.tabListener]=this.addManagedElementListeners(g,{keydown:I=>this.trapFocusWithin(I,g)}),g.appendChild(f?.getGui());let v;const w=()=>f?.afterGuiDetached(),S=_isColumnMenuAnchoringEnabled(this.gos)?o??this.beans.ctrlsSvc.getGridBodyCtrl().eGridBody:void 0,R=I=>{_setColMenuVisible(e,!1,"contextMenu");const N=I instanceof KeyboardEvent;this.tabListener&&(this.tabListener=this.tabListener()),N&&o&&_isVisible(o)&&_findTabbableParent(o)?.focus({preventScroll:!0}),w(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,n,e),d?.()},_=this.getLocaleTextFunc(),F=u&&n!=="columnFilter"?_("ariaLabelColumnMenu","Column Menu"):_("ariaLabelColumnFilter","Column Filter"),M=this.popupSvc?.addPopup({modal:!0,eChild:g,closeOnEsc:!0,closedCallback:R,positionCallback:()=>t(g),anchorToElement:S,ariaLabel:F});M&&(this.hidePopup=v=M.hideFunc),f.afterInit().then(()=>{t(g),f.afterGuiAttached({container:n,hidePopup:v})}),_setColMenuVisible(e,!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,n,e)}trapFocusWithin(e,t){e.key!==KeyCode.TAB||e.defaultPrevented||_findNextFocusableElement(this.beans,t,!1,e.shiftKey)||(e.preventDefault(),_focusInto(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,n){this.eventSvc.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:n??null,columnGroup:null})}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},FilterValueService=class extends BeanStub{constructor(){super(...arguments),this.beanName="filterValueSvc"}getValue(e,t,n){if(!t)return;const o=e.getColDef(),{selectableFilter:u,valueSvc:d,formula:f}=this.beans,g=n??u?.getFilterValueGetter(e.getColId())??o.filterValueGetter;if(g)return this.executeFilterValueGetter(g,t.data,e,t,o);const v=d.getValue(e,t,"data");return e.isAllowFormula()&&f?.isFormula(v)?f.resolveValue(e,t):v}executeFilterValueGetter(e,t,n,o,u){const{expressionSvc:d,valueSvc:f}=this.beans,g=_addGridCommonParams(this.gos,{data:t,node:o,column:n,colDef:u,getValue:f.getValueCallback.bind(f,o)});return typeof e=="function"?e(g):d?.evaluate(e,g)}},ReadOnlyFloatingFilterElement={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eFloatingFilterText"}]},ReadOnlyFloatingFilter=class extends Component{constructor(){super(ReadOnlyFloatingFilterElement,[AgInputTextFieldSelector]),this.eFloatingFilterText=RefPlaceholder}init(e){this.params=e;const t=this.beans.colNames.getDisplayNameForColumn(e.column,"header",!0);if(this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`),this.gos.get("enableFilterHandlers")){const n=e,o=n.getHandler();if(o.getModelAsString){const u=o.getModelAsString(n.model);this.eFloatingFilterText.setValue(u)}}}onParentModelChanged(e){if(e==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){const n=t.getModelAsString(e);this.eFloatingFilterText.setValue(n)}})}refresh(e){this.init(e)}},AgRadioButton=class extends AgCheckbox{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){const t=this.eInput;e.selected&&e.name&&t.name&&t.name===e.name&&e.id&&t.id!==e.id&&this.setValue(!1,!0)}},OptionsFactory=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions??t,this.mapCustomOptions(),this.defaultOption=this.getDefaultItem(e.defaultOption)}refresh(e,t){const n=e.filterOptions??t;this.filterOptions!==n&&(this.filterOptions=n,this.customFilterOptions={},this.mapCustomOptions()),this.defaultOption=this.getDefaultItem(e.defaultOption)}mapCustomOptions(){const{filterOptions:e}=this;if(e)for(const t of e){if(typeof t=="string")continue;const n=[["displayKey"],["displayName"],["predicate","test"]],o=u=>u.some(d=>t[d]!=null)?!0:(_warn(72,{keys:u}),!1);if(!n.every(o)){this.filterOptions=e.filter(u=>u===t)||[];continue}this.customFilterOptions[t.displayKey]=t}}getDefaultItem(e){const{filterOptions:t}=this;if(e)return e;if(t.length>=1){const n=t[0];if(typeof n=="string")return n;if(n.displayKey)return n.displayKey;_warn(73)}else _warn(74)}getCustomOption(e){return this.customFilterOptions[e]}};function removeItems(e,t,n){return n==null?e.splice(t):e.splice(t,n)}function isBlank(e){return e==null||typeof e=="string"&&e.trim().length===0}function getDefaultJoinOperator(e){return e==="AND"||e==="OR"?e:"AND"}function evaluateCustomFilter(e,t,n){if(e==null)return;const{predicate:o}=e;if(o!=null&&!t.some(u=>u==null))return o(t,n)}function validateAndUpdateConditions(e,t){let n=e.length;return n>t&&(e.splice(t),_warn(78),n=t),n}var zeroInputTypes=new Set(["empty","notBlank","blank","today","yesterday","tomorrow","thisWeek","lastWeek","nextWeek","thisMonth","lastMonth","nextMonth","thisQuarter","lastQuarter","nextQuarter","thisYear","lastYear","nextYear","yearToDate","last7Days","last30Days","last90Days","last6Months","last12Months","last24Months"]);function getNumberOfInputs(e,t){const n=t.getCustomOption(e);if(n){const{numberOfInputs:o}=n;return o??1}return e&&zeroInputTypes.has(e)?0:e==="inRange"?2:1}var SimpleFilter=class extends ProvidedFilter{constructor(e,t,n){super(e,"simple-filter"),this.mapValuesFromModel=t,this.defaultOptions=n,this.eTypes=[],this.eJoinPanels=[],this.eJoinAnds=[],this.eJoinOrs=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}setParams(e){super.setParams(e);const t=new OptionsFactory;this.optionsFactory=t,t.init(e,this.defaultOptions),this.commonUpdateSimpleParams(e),this.createOption(),this.createMissingConditionsAndOperators()}updateParams(e,t){this.optionsFactory.refresh(e,this.defaultOptions),super.updateParams(e,t),this.commonUpdateSimpleParams(e)}commonUpdateSimpleParams(e){this.setNumConditions(e),this.defaultJoinOperator=getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.createFilterListOptions(),_addOrRemoveAttribute(this.getGui(),"tabindex",this.isReadOnly()?"-1":null)}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged("immediately",!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,n)=>{const o=n===0?e:this.optionsFactory.defaultOption;t.setValue(o,!0)})}getModelFromUi(){const e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.filterType,operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){const{eJoinOrs:e,defaultJoinOperator:t}=this;return e.length===0?t:e[0].getValue()===!0?"OR":"AND"}areNonNullModelsEqual(e,t){const n=!e.operator,o=!t.operator;if(!n&&o||n&&!o)return!1;let d;if(n){const f=e,g=t;d=this.areSimpleModelsEqual(f,g)}else{const f=e,g=t;d=f.operator===g.operator&&_areEqual(f.conditions,g.conditions,(v,w)=>this.areSimpleModelsEqual(v,w))}return d}setModelIntoUi(e,t){if(e==null)return this.resetUiToDefaults(t),AgPromise.resolve();if(e.operator){const o=e;let u=o.conditions;u==null&&(u=[],_warn(77));const d=validateAndUpdateConditions(u,this.maxNumConditions),f=this.getNumConditions();if(d<f)this.removeConditionsAndOperators(d);else if(d>f)for(let v=f;v<d;v++)this.createJoinOperatorPanel(),this.createOption();const g=o.operator==="OR";this.eJoinAnds.forEach(v=>v.setValue(!g,!0)),this.eJoinOrs.forEach(v=>v.setValue(g,!0)),u.forEach((v,w)=>{this.eTypes[w].setValue(v.type,!0),this.setConditionIntoUi(v,w)})}else{const o=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(o.type,!0),this.setConditionIntoUi(o,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.updateUiVisibility(),t||this.params.onUiChange(this.getUiChangeEventParams()),AgPromise.resolve()}setNumConditions(e){let t=e.maxNumConditions??2;t<1&&(_warn(79),t=1),this.maxNumConditions=t;let n=e.numAlwaysVisibleConditions??1;n<1&&(_warn(80),n=1),n>t&&(_warn(81),n=t),this.numAlwaysVisibleConditions=n}createOption(){const e=this.getGui(),t=this.createManagedBean(new AgSelect);this.eTypes.push(t),t.addCss("ag-filter-select"),e.appendChild(t.getGui());const n=this.createEValue();this.eConditionBodies.push(n),e.appendChild(n),this.putOptionsIntoDropdown(t),this.resetType(t);const o=this.getNumConditions()-1;this.forEachPositionInput(o,u=>this.resetInput(u)),this.addChangedListeners(t,o)}createJoinOperatorPanel(){const e=_createElement({tag:"div",cls:"ag-filter-condition"});this.eJoinPanels.push(e);const t=this.createJoinOperator(this.eJoinAnds,e,"and"),n=this.createJoinOperator(this.eJoinOrs,e,"or");this.getGui().appendChild(e);const o=this.eJoinPanels.length-1,u=this.joinOperatorId++;this.resetJoinOperatorAnd(t,o,u),this.resetJoinOperatorOr(n,o,u),this.isReadOnly()||(t.onValueChange(this.listener),n.onValueChange(this.listener))}createJoinOperator(e,t,n){const o=this.createManagedBean(new AgRadioButton);e.push(o);const u="ag-filter-condition-operator";return o.addCss(u),o.addCss(`${u}-${n}`),t.appendChild(o.getGui()),o}createFilterListOptions(){this.filterListOptions=this.optionsFactory.filterOptions.map(e=>typeof e=="string"?this.createBoilerplateListOption(e):this.createCustomListOption(e))}putOptionsIntoDropdown(e){const{filterListOptions:t}=this;for(const n of t)e.addOption(n);e.setDisabled(t.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:t}=e,n=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:n?this.getLocaleTextFunc()(n.displayKey,n.displayName):this.translate(t)}}createBodyTemplate(){return null}getAgComponents(){return[]}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let n=0;n<this.getNumConditions();n++)this.isConditionUiComplete(n)?e=n:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{const n=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<n){this.removeConditionsAndOperators(n+1);const o=e+1,u=n-o;u>0&&this.removeConditionsAndOperators(o,u),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((o,u)=>{const d=this.isConditionDisabled(u,e);o.setDisabled(d||this.filterListOptions.length<=1),u===1&&(_setDisabled(this.eJoinPanels[0],d),this.eJoinAnds[0].setDisabled(d),this.eJoinOrs[0].setDisabled(d))}),this.eConditionBodies.forEach((o,u)=>{_setDisplayed(o,this.isConditionBodyVisible(u))});const n=(t??this.getJoinOperator())==="OR";for(const o of this.eJoinAnds)o.setValue(!n,!0);for(const o of this.eJoinOrs)o.setValue(n,!0);this.forEachInput((o,u,d,f)=>{this.setElementDisplayed(o,u<f),this.setElementDisabled(o,this.isConditionDisabled(d,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;const{eTypes:n,eConditionBodies:o,eJoinPanels:u,eJoinAnds:d,eJoinOrs:f}=this;this.removeComponents(n,e,t),this.removeElements(o,e,t),this.removeEValues(e,t);const g=Math.max(e-1,0);this.removeElements(u,g,t),this.removeComponents(d,g,t),this.removeComponents(f,g,t)}removeElements(e,t,n){const o=removeItems(e,t,n);for(const u of o)_removeFromParent(u)}removeComponents(e,t,n){const o=removeItems(e,t,n);for(const u of o)_removeFromParent(u.getGui()),this.destroyBean(u)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!e?.suppressFocus){let t;if(!this.isReadOnly()){const n=this.getInputs(0)[0];n instanceof AgAbstractInputField&&this.isConditionBodyVisible(0)?t=n.getInputElement():t=this.eTypes[0]?.getFocusableElement()}(t??this.getGui()).focus({preventScroll:!0})}}shouldKeepInvalidInputState(){return!1}afterGuiDetached(){super.afterGuiDetached();const e=this.params;if(this.beans.colFilter?.shouldKeepStateOnDetach(e.column)||this.shouldKeepInvalidInputState())return;e.onStateChange({model:e.model});let t=-1,n=-1,o=!1;const u=this.getJoinOperator();for(let f=this.getNumConditions()-1;f>=0;f--)if(this.isConditionUiComplete(f))t===-1&&(t=f,n=f);else{const g=f>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(f-1),v=f<t;(g||v)&&(this.removeConditionsAndOperators(f,1),o=!0,v&&n--)}let d=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),d=!0),this.shouldAddNewConditionAtEnd(n===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),d=!0),d&&this.updateConditionStatusesAndValues(n,u),o&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=n}getModelAsString(e){return this.params.getHandler()?.getModelAsString?.(e)??""}resetPlaceholder(){const e=this.getLocaleTextFunc(),{filterPlaceholder:t,eTypes:n}=this;this.forEachInput((o,u,d,f)=>{if(!(o instanceof AgAbstractInputField))return;const g=u===0&&f>1?"inRangeStart":u===0?"filterOoo":"inRangeEnd",v=u===0&&f>1?e("ariaFilterFromValue","Filter from value"):u===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value"),w=n[d].getValue(),S=getPlaceholderText(this,t,g,w);o.setInputPlaceholder(S),o.setInputAriaLabel(v)})}setElementValue(e,t,n){e instanceof AgAbstractInputField&&e.setValue(t!=null?String(t):null,!0)}setElementDisplayed(e,t){_isComponent(e)&&_setDisplayed(e.getGui(),t)}setElementDisabled(e,t){_isComponent(e)&&_setDisabled(e.getGui(),t)}attachElementOnChange(e,t){e instanceof AgAbstractInputField&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,n)=>{this.forEachPositionTypeInput(n,t,e)})}forEachPositionInput(e,t){const n=this.getConditionType(e);this.forEachPositionTypeInput(e,n,t)}forEachPositionTypeInput(e,t,n){const o=getNumberOfInputs(t,this.optionsFactory),u=this.getInputs(e);for(let d=0;d<u.length;d++){const f=u[d];f!=null&&n(f,d,e,o)}}isConditionDisabled(e,t){return this.isReadOnly()?!0:e===0?!1:e>t+1}isConditionBodyVisible(e){const t=this.getConditionType(e);return getNumberOfInputs(t,this.optionsFactory)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)==="empty"||this.getValues(e).some(n=>n==null)||this.positionHasInvalidInputs(e))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(t=>this.resetType(t)),this.eJoinAnds.forEach((t,n)=>this.resetJoinOperatorAnd(t,n,this.joinOperatorId+n)),this.eJoinOrs.forEach((t,n)=>this.resetJoinOperatorOr(t,n,this.joinOperatorId+n)),this.joinOperatorId++,this.forEachInput(t=>this.resetInput(t)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,this.updateUiVisibility(),e||this.params.onUiChange(this.getUiChangeEventParams())}resetType(e){const n=this.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.defaultOption,!0).setAriaLabel(n).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,n){this.resetJoinOperator(e,t,this.defaultJoinOperator==="AND",this.translate("andCondition"),n)}resetJoinOperatorOr(e,t,n){this.resetJoinOperator(e,t,this.defaultJoinOperator==="OR",this.translate("orCondition"),n)}resetJoinOperator(e,t,n,o,u){this.updateJoinOperatorDisabled(e.setValue(n,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${u}`).setLabel(o),t)}updateJoinOperatorsDisabled(){const e=(t,n)=>this.updateJoinOperatorDisabled(t,n);this.eJoinAnds.forEach(e),this.eJoinOrs.forEach(e)}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){const n=this.mapValuesFromModel(e,this.optionsFactory);this.forEachInput((o,u,d)=>{d===t&&this.setElementValue(o,n[u]!=null?n[u]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,n,o)=>{this.setElementValue(t,n===0&&o===0?e:null,!0)})}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,n=>{this.attachElementOnChange(n,this.listener)}))}hasInvalidInputs(){return!1}positionHasInvalidInputs(e){return!1}isReadOnly(){return!!this.params.readOnly}},DEFAULT_BIGINT_FILTER_OPTIONS=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"];function getAllowedCharPattern(e){return e?.allowedCharPattern??null}function mapValuesFromBigIntFilterModel(e,t){const{filter:n,filterTo:o,type:u}=e||{};return[_parseBigIntOrNull(n),_parseBigIntOrNull(o)].slice(0,getNumberOfInputs(u,t))}var BigIntFilter=class extends SimpleFilter{constructor(){super("bigintFilter",mapValuesFromBigIntFilterModel,DEFAULT_BIGINT_FILTER_OPTIONS),this.eValuesFrom=[],this.eValuesTo=[],this.filterType="bigint",this.defaultDebounceMs=500}afterGuiAttached(e){super.afterGuiAttached(e),this.refreshInputValidation()}shouldKeepInvalidInputState(){return!_isBrowserFirefox()&&this.hasInvalidInputs()&&this.getConditionTypes().includes("inRange")}refreshInputValidation(){for(let e=0;e<this.eValuesFrom.length;e++){const t=this.eValuesFrom[e],n=this.eValuesTo[e];this.refreshInputPairValidation(t,n)}}refreshInputPairValidation(e,t,n=!1){const{bigintParser:o}=this.params,u=this.getParsedValue(e,o),d=this.getParsedValue(t,o),f=this.isInvalidValue(e,u),g=this.isInvalidValue(t,d),v=n?e:t,w=n?t:e,S=n?f:g,R=n?g:f;let _="";if(S)_=this.getLocaleTextFunc()("invalidBigInt","Invalid BigInt");else if(!f&&!g){const F=getValidityMessageKey(u,d,n);F&&(_=this.translate(F,[String(n?t.getValue():e.getValue())]))}v.setCustomValidity(_),R||w.setCustomValidity(""),_.length>0&&this.beans.ariaAnnounce.announceValue(_,"dateFilter")}getState(){return{isInvalid:this.hasInvalidInputs()}}areStatesEqual(e,t){return(e?.isInvalid??!1)===(t?.isInvalid??!1)}refresh(e){const t=super.refresh(e),{state:n,additionalEventAttributes:o}=e,u=this.state,d=o?.fromAction;return(d&&d!="apply"||n.model!==u.model||!this.areStatesEqual(n.state,u.state))&&this.refreshInputValidation(),t}setElementValue(e,t,n){super.setElementValue(e,t,n),t===null&&e.setCustomValidity("")}createEValue(){const{params:e,eValuesFrom:t,eValuesTo:n}=this,o=getAllowedCharPattern(e),u=_createElement({tag:"div",cls:"ag-filter-body",role:"presentation"}),d=this.createFromToElement(u,t,"from",o),f=this.createFromToElement(u,n,"to",o),g=(S,R,_)=>()=>this.refreshInputPairValidation(S,R,_),v=g(d,f,!0);d.onValueChange(v),d.addGuiEventListener("focusin",v);const w=g(d,f,!1);return f.onValueChange(w),f.addGuiEventListener("focusin",w),u}createFromToElement(e,t,n,o){const u=this.createManagedBean(o?new AgInputTextField({allowedCharPattern:o}):new AgInputTextField);return u.addCss(`ag-filter-${n}`),u.addCss("ag-filter-filter"),t.push(u),e.appendChild(u.getGui()),u}removeEValues(e,t){const n=o=>this.removeComponents(o,e,t);n(this.eValuesFrom),n(this.eValuesTo)}getValues(e){const t=[];return this.forEachPositionInput(e,(n,o,u,d)=>{o<d&&t.push(_parseBigIntOrNull(n.getValue()??null))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}createCondition(e){const t=this.getConditionType(e),n={filterType:this.filterType,type:t},o=this.getValues(e);return o.length>0&&(n.filter=String(o[0])),o.length>1&&(n.filterTo=String(o[1])),n}removeConditionsAndOperators(e,t){if(!this.hasInvalidInputs())return super.removeConditionsAndOperators(e,t)}getInputs(e){const{eValuesFrom:t,eValuesTo:n}=this;return e>=t.length?[null,null]:[t[e],n[e]]}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>e||(e=!t.getInputElement().validity.valid)),e}positionHasInvalidInputs(e){let t=!1;return this.forEachPositionInput(e,n=>t||(t=!n.getInputElement().validity.valid)),t}canApply(e){return!this.hasInvalidInputs()}getParsedValue(e,t){const n=e.getValue();return n==null||typeof n=="string"&&n.trim()===""?null:t?t(n):_parseBigIntOrNull(n)}isInvalidValue(e,t){const n=e.getValue();return n!=null&&String(n).trim()!==""&&t===null}};function getValidityMessageKey(e,t,n){return e!=null&&t!=null&&e>=t?`strict${n?"Max":"Min"}ValueValidation`:null}var SimpleFilterHandler=class extends BeanStub{constructor(e,t){super(),this.mapValuesFromModel=e,this.defaultOptions=t}init(e){const t=e.filterParams,n=new OptionsFactory;this.optionsFactory=n,n.init(t,this.defaultOptions),this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(n,t)),this.updateParams(e),this.validateModel(e)}refresh(e){if(e.source==="colDef"){const t=e.filterParams,n=this.optionsFactory;n.refresh(t,this.defaultOptions),this.filterModelFormatter.updateParams({optionsFactory:n,filterParams:t}),this.updateParams(e)}this.validateModel(e)}updateParams(e){this.params=e}doesFilterPass(e){const t=e.model;if(t==null)return!0;const{operator:n}=t,o=[];if(n){const f=t;o.push(...f.conditions??[])}else o.push(t);const u=n&&n==="OR"?"some":"every",d=this.params.getValue(e.node);return o[u](f=>this.individualConditionPasses(e,f,d))}getModelAsString(e,t){return this.filterModelFormatter.getModelAsString(e,t)??""}validateModel(e){const{model:t,filterParams:{filterOptions:n,maxNumConditions:o}}=e;if(t==null)return;let d=isCombinedFilterModel(t)?t.conditions:[t];const f=n?.map(S=>typeof S=="string"?S:S.displayKey)??this.defaultOptions;if(!(!d||d.every(S=>f.find(R=>R===S.type)!==void 0))){this.params={...e,model:null},e.onModelChange(null);return}let v=!1;const w=this.filterType;if((d&&!d.every(S=>S.filterType===w)||t.filterType!==w)&&(d=d.map(S=>({...S,filterType:w})),v=!0),typeof o=="number"&&d&&d.length>o&&(d=d.slice(0,o),v=!0),v){const S=d.length>1?{...t,filterType:w,conditions:d}:{...d[0],filterType:w};this.params={...e,model:S},e.onModelChange(S)}}individualConditionPasses(e,t,n){const o=this.optionsFactory,u=this.mapValuesFromModel(t,o),d=o.getCustomOption(t.type),f=evaluateCustomFilter(d,u,n);return f??(n==null?this.evaluateNullValue(t.type):this.evaluateNonNullValue(u,n,t,e))}},ScalarFilterHandler=class extends SimpleFilterHandler{evaluateNullValue(e){const{includeBlanksInEquals:t,includeBlanksInNotEqual:n,includeBlanksInGreaterThan:o,includeBlanksInLessThan:u,includeBlanksInRange:d}=this.params.filterParams;switch(e){case"equals":if(t)return!0;break;case"notEqual":if(n)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(o)return!0;break;case"lessThan":case"lessThanOrEqual":if(u)return!0;break;case"inRange":if(d)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,n){const o=n.type;if(!this.isValid(t))return o==="notEqual"||o==="notBlank";const u=this.comparator(),d=e[0]!=null?u(e[0],t):0;switch(o){case"equals":return d===0;case"notEqual":return d!==0;case"greaterThan":return d>0;case"greaterThanOrEqual":return d>=0;case"lessThan":return d<0;case"lessThanOrEqual":return d<=0;case"inRange":{const f=u(e[1],t);return this.params.filterParams.inRangeInclusive?d>=0&&f<=0:d>0&&f<0}case"blank":return isBlank(t);case"notBlank":return!isBlank(t);default:return _warn(76,{filterModelType:o}),!0}}},SCALAR_FILTER_TYPE_KEYS={equals:"Equals",notEqual:"NotEqual",greaterThan:"GreaterThan",greaterThanOrEqual:"GreaterThanOrEqual",lessThan:"LessThan",lessThanOrEqual:"LessThanOrEqual",inRange:"InRange"},TEXT_FILTER_TYPE_KEYS={contains:"Contains",notContains:"NotContains",equals:"TextEquals",notEqual:"TextNotEqual",startsWith:"StartsWith",endsWith:"EndsWith",inRange:"InRange"},SimpleFilterModelFormatter=class extends BeanStub{constructor(e,t,n){super(),this.optionsFactory=e,this.filterParams=t,this.valueFormatter=n}getModelAsString(e,t){const n=this.getLocaleTextFunc(),o=t==="filterToolPanel";if(!e)return o?translateForFilter(this,"filterSummaryInactive"):null;if(e.operator!=null){const d=e,g=(d.conditions??[]).map(w=>this.getModelAsString(w,t)),v=d.operator==="AND"?"andCondition":"orCondition";return g.join(` ${translateForFilter(this,v)} `)}else{if(e.type==="blank"||e.type==="notBlank")return o?translateForFilter(this,e.type==="blank"?"filterSummaryBlank":"filterSummaryNotBlank"):n(e.type,e.type);{const d=e,f=this.optionsFactory.getCustomOption(d.type),{displayKey:g,displayName:v,numberOfInputs:w}=f||{};return g&&v&&w===0?n(g,v):this.conditionToString(d,o,d.type==="inRange"||w===2,g,v)}}}updateParams(e){const{optionsFactory:t,filterParams:n}=e;this.optionsFactory=t,this.filterParams=n}conditionForToolPanel(e,t,n,o,u,d){let f;const g=this.getTypeKey(e);return g&&(f=translateForFilter(this,g)),u&&d&&(f=this.getLocaleTextFunc()(u,d)),f!=null?t?`${f} ${translateForFilter(this,"filterSummaryInRangeValues",[n(),o()])}`:`${f} ${n()}`:null}getTypeKey(e){const t=this.filterTypeKeys[e];return t?`filterSummary${t}`:null}formatValue(e){const t=this.valueFormatter;return t?t(e??null)??"":String(e)}},BigIntFilterModelFormatter=class extends SimpleFilterModelFormatter{constructor(e,t){super(e,t,t.bigintFormatter),this.filterTypeKeys=SCALAR_FILTER_TYPE_KEYS}conditionToString(e,t,n,o,u){const{filter:d,filterTo:f,type:g}=e,v=this.formatValue.bind(this),w=_parseBigIntOrNull(d),S=_parseBigIntOrNull(f);if(t){const R=this.conditionForToolPanel(g,n,()=>v(w),()=>v(S),o,u);if(R!=null)return R}return n?`${v(w)}-${v(S)}`:d!=null?v(w):`${g}`}},BigIntFilterHandler=class extends ScalarFilterHandler{constructor(){super(mapValuesFromBigIntFilterModel,DEFAULT_BIGINT_FILTER_OPTIONS),this.filterType="bigint",this.FilterModelFormatterClass=BigIntFilterModelFormatter}comparator(){return(e,t)=>e===t?0:e<t?1:-1}isValid(e){return _parseBigIntOrNull(e)!==null}},FloatingFilterTextInputService=class extends BeanStub{constructor(e){super(),this.params=e,this.eInput=RefPlaceholder,this.onValueChanged=()=>{}}setupGui(e){this.eInput=this.createManagedBean(new AgInputTextField(this.params?.config));const t=this.eInput.getGui();e.appendChild(t);const n=o=>this.onValueChanged(o);this.addManagedListeners(t,{input:n,keydown:n})}setEditable(e){this.eInput.setDisabled(!e)}getValue(){return this.eInput.getValue()}setValue(e,t){this.eInput.setValue(e,t)}setValueChangedListener(e){this.onValueChanged=e}setParams({ariaLabel:e,autoComplete:t,placeholder:n}){const{eInput:o}=this;o.setInputAriaLabel(e),t!==void 0&&o.setAutoComplete(t),o.toggleCss("ag-floating-filter-search-icon",!!n),o.setInputPlaceholder(n)}};function trimInputForFilter(e){const t=e?.trim();return t===""?e:t}function mapValuesFromTextFilterModel(e,t){const{filter:n,filterTo:o,type:u}=e||{};return[n||null,o||null].slice(0,getNumberOfInputs(u,t))}var SimpleFloatingFilter=class extends Component{constructor(){super(...arguments),this.defaultDebounceMs=0}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.defaultOption;return}const t=e.operator;let n;t?n=e.conditions[0]:n=e,this.lastType=n.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;const n=e;return this.isTypeEditable(n.type)}init(e){this.params=e;const t=this.gos.get("enableFilterHandlers");if(this.reactive=t,this.setParams(e),t){const n=e;this.onModelUpdated(n.model)}}setParams(e){const t=new OptionsFactory;this.optionsFactory=t,t.init(e.filterParams,this.defaultOptions),this.filterModelFormatter=this.createManagedBean(new this.FilterModelFormatterClass(t,e.filterParams)),this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){const n=this.optionsFactory.defaultOption;t||(this.lastType=n),this.readOnly=!!e.filterParams.readOnly;const o=this.isTypeEditable(n);this.setEditable(o)}refresh(e){this.params=e;const t=e,n=this.reactive;if((!n||t.source==="colDef")&&this.updateParams(e),n){const{source:o,model:u}=t;if(o==="dataChanged"||o==="ui")return;this.onModelUpdated(u)}}updateParams(e){const t=this.optionsFactory;t.refresh(e.filterParams,this.defaultOptions),this.setSimpleParams(e),this.filterModelFormatter.updateParams({optionsFactory:t,filterParams:e.filterParams})}onParentModelChanged(e,t){t?.afterFloatingFilter||t?.afterDataChange||this.onModelUpdated(e)}isTypeEditable(e){return!!e&&!this.readOnly&&getNumberOfInputs(e,this.optionsFactory)===1}getAriaLabel(e){return`${this.beans.colNames.getDisplayNameForColumn(e,"header",!0)} ${this.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`}},TextInputFloatingFilterElement={tag:"div",ref:"eFloatingFilterInputContainer",cls:"ag-floating-filter-input",role:"presentation"},TextInputFloatingFilter=class extends SimpleFloatingFilter{constructor(){super(...arguments),this.eFloatingFilterInputContainer=RefPlaceholder,this.defaultDebounceMs=500}postConstruct(){this.setTemplate(TextInputFloatingFilterElement)}onModelUpdated(e){this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.inputSvc.setValue(this.filterModelFormatter.getModelAsString(e))}setParams(e){this.setupFloatingFilterInputService(e),super.setParams(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.inputSvc=this.createFloatingFilterInputService(e),this.inputSvc.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){const{inputSvc:t,defaultDebounceMs:n,readOnly:o}=this,{filterPlaceholder:u,column:d,browserAutoComplete:f,filterParams:g}=e,v=this.lastType??this.optionsFactory.defaultOption,w=e.filterParams.filterPlaceholder,S=u===!0?getPlaceholderText(this,w,"filterOoo",v):u||void 0;if(t.setParams({ariaLabel:this.getAriaLabel(d),autoComplete:f??!1,placeholder:S}),this.applyActive=_isUseApplyButton(g),!o){const R=getDebounceMs(g,n);t.setValueChangedListener(_debounce(this,this.syncUpWithParentFilter.bind(this),R))}}updateParams(e){super.updateParams(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const{inputSvc:t}=this,n=t.getValue();_clearElement(this.eFloatingFilterInputContainer),this.destroyBean(t),this.setupFloatingFilterInputService(e),t.setValue(n,!0)}syncUpWithParentFilter(e){const t=e.key===KeyCode.ENTER,n=this.reactive;if(n&&this.params.onUiChange(),this.applyActive&&!t)return;const{inputSvc:o,params:u,lastType:d}=this;let f=o.getValue();if(u.filterParams.trimInput&&(f=trimInputForFilter(f),o.setValue(f,!0)),n){const g=u,v=g.model,w=this.convertValue(f),S=w==null?null:{...v??{filterType:this.filterType,type:d??this.optionsFactory.defaultOption},filter:w};g.onModelChange(S,{afterFloatingFilter:!0})}else u.parentFilterInstance(g=>{g?.onFloatingFilterChanged(d||null,f||null)})}convertValue(e){return e||null}setEditable(e){this.inputSvc.setEditable(e)}},BigIntFloatingFilter=class extends TextInputFloatingFilter{constructor(){super(...arguments),this.FilterModelFormatterClass=BigIntFilterModelFormatter,this.filterType="bigint",this.defaultOptions=DEFAULT_BIGINT_FILTER_OPTIONS}updateParams(e){const t=e.filterParams;getAllowedCharPattern(t)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),this.bigintParser=t?.bigintParser,super.updateParams(e)}createFloatingFilterInputService(e){const t=e.filterParams;this.allowedCharPattern=getAllowedCharPattern(t),this.bigintParser=t?.bigintParser;const n=this.allowedCharPattern?{allowedCharPattern:this.allowedCharPattern}:void 0;return this.createManagedBean(new FloatingFilterTextInputService({config:n}))}convertValue(e){return e==null||e===""?null:this.bigintParser?this.bigintParser(e):_parseBigIntOrNull(e)}},CLASS_INPUT_FIELD=".ag-input-field-input",DateCompWrapper=class{constructor(e,t,n,o,u,d){this.context=e,this.eParent=u,this.alive=!0,this.debouncedReport=_debounce({isAlive:()=>this.alive},reportValidity,500),this.timeoutHandle=null,_getDateCompDetails(t,n,o)?.newAgStackInstance().then(g=>{if(!this.alive){e.destroyBean(g);return}if(this.dateComp=g,!g)return;u.appendChild(g.getGui()),g?.afterGuiAttached?.();const{tempValue:v,disabled:w}=this;v&&g.setDate(v),w!=null&&g.setDisabled?.(w),d?.(this)})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){const t=this.dateComp;t?t.setDate(e):this.tempValue=e}setDisabled(e){const t=this.dateComp;t?t.setDisabled?.(e):this.disabled=e}setDisplayed(e){_setDisplayed(this.eParent,e)}setInputPlaceholder(e){this.dateComp?.setInputPlaceholder?.(e)}setInputAriaLabel(e){this.dateComp?.setInputAriaLabel?.(e)}afterGuiAttached(e){this.dateComp?.afterGuiAttached?.(e)}updateParams(e){this.dateComp?.refresh?.(e)}setCustomValidity(e,t=!1){const n=this.dateComp?.getGui().querySelector(CLASS_INPUT_FIELD);if(n&&"setCustomValidity"in n){const o=e.length>0;n.setCustomValidity(e),o?t?this.timeoutHandle=this.debouncedReport(n):reportValidity(n):this.timeoutHandle&&window.clearTimeout(this.timeoutHandle),_setAriaInvalid(n,o)}}getValidity(){return this.dateComp?.getGui().querySelector(CLASS_INPUT_FIELD)?.validity}};function reportValidity(e){e.reportValidity()}var DEFAULT_DATE_FILTER_OPTIONS=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"];function mapValuesFromDateFilterModel(e,t){const{dateFrom:n,dateTo:o,type:u}=e||{};return[n&&_parseDateTimeFromString(n,void 0,!0)||null,o&&_parseDateTimeFromString(o,void 0,!0)||null].slice(0,getNumberOfInputs(u,t))}var DEFAULT_MIN_YEAR=1e3,DEFAULT_MAX_YEAR=1/0,DateFilter=class extends SimpleFilter{constructor(){super("dateFilter",mapValuesFromDateFilterModel,DEFAULT_DATE_FILTER_OPTIONS),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=DEFAULT_MIN_YEAR,this.maxValidYear=DEFAULT_MAX_YEAR,this.minValidDate=null,this.maxValidDate=null,this.filterType="date"}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e),this.refreshInputValidation()}shouldKeepInvalidInputState(){return!_isBrowserFirefox()&&this.hasInvalidInputs()&&this.getConditionTypes().includes("inRange")}commonUpdateSimpleParams(e){super.commonUpdateSimpleParams(e);const t=(v,w)=>{const S=e[v];if(S!=null)if(isNaN(S))_warn(82,{param:v});else return S==null?w:Number(S);return w},n=t("minValidYear",DEFAULT_MIN_YEAR),o=t("maxValidYear",DEFAULT_MAX_YEAR);this.minValidYear=n,this.maxValidYear=o,n>o&&_warn(83);const{minValidDate:u,maxValidDate:d}=e,f=u instanceof Date?u:_parseDateTimeFromString(u);this.minValidDate=f;const g=d instanceof Date?d:_parseDateTimeFromString(d);this.maxValidDate=g,f&&g&&f>g&&_warn(84)}refreshInputValidation(){for(let e=0;e<this.dateConditionFromComps.length;e++)this.refreshInputPairValidation(e,!1,!0)}refreshInputPairValidation(e,t=!1,n=!1){const{dateConditionFromComps:o,dateConditionToComps:u,beans:d}=this,f=o[e],g=u[e],v=f.getDate(),w=g.getDate(),S=getValidityMessageKey2(v,w,t),R=S?this.translate(S,[String(t?w:v)]):"",_=!_isBrowserFirefox()&&!n;(t?f:g).setCustomValidity(R,_),(t?g:f).setCustomValidity("",_),R.length>0&&d.ariaAnnounce.announceValue(R,"dateFilter")}createDateCompWrapper(e,t,n){const{beans:{userCompFactory:o,context:u,gos:d},params:f}=this,g=n==="from",v=new DateCompWrapper(u,o,f.colDef,_addGridCommonParams(d,{onDateChanged:()=>{this.refreshInputPairValidation(t,g),this.onUiChanged()},onFocusIn:()=>this.refreshInputPairValidation(t,g),filterParams:f,location:"filter"}),e);return this.addDestroyFunc(()=>v.destroy()),v}getState(){return{isInvalid:this.hasInvalidInputs()}}areStatesEqual(e,t){return(e?.isInvalid??!1)===(t?.isInvalid??!1)}setElementValue(e,t){e.setDate(t),t||e.setCustomValidity("")}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}createEValue(){const e=_createElement({tag:"div",cls:"ag-filter-body"});return this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e}createFromToElement(e,t,n,o){const u=_createElement({tag:"div",cls:`ag-filter-${o} ag-filter-date-${o}`});t.push(u),e.appendChild(u),n.push(this.createDateCompWrapper(u,t.length-1,o))}removeEValues(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),removeItems(this.eConditionPanelsFrom,e,t),removeItems(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,n){const o=removeItems(e,t,n);for(const u of o)u.destroy()}isValidDateValue(e){if(e===null)return!1;const{minValidDate:t,maxValidDate:n,minValidYear:o,maxValidYear:u}=this;if(t){if(e<t)return!1}else if(e.getUTCFullYear()<o)return!1;if(n){if(e>n)return!1}else if(e.getUTCFullYear()>u)return!1;return!0}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>e||(e=t.getDate()!=null&&!(t.getValidity()?.valid??!0))),e}positionHasInvalidInputs(e){let t=!1;return this.forEachPositionInput(e,n=>t||(t=!(n.getValidity()?.valid??!0))),t}canApply(e){return!this.hasInvalidInputs()}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachPositionInput(e,(n,o,u,d)=>{!t||o>=d||t&&(t=this.isValidDateValue(n.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}createCondition(e){const t=this.getConditionType(e),n={},{params:o,filterType:u}=this,d=this.getValues(e),f=o.useIsoSeparator?"T":" ";return d.length>0&&(n.dateFrom=_serialiseDate(d[0],!0,f)),d.length>1&&(n.dateTo=_serialiseDate(d[1],!0,f)),{dateFrom:null,dateTo:null,filterType:u,type:t,...n}}removeConditionsAndOperators(e,t){if(!this.hasInvalidInputs())return super.removeConditionsAndOperators(e,t)}resetPlaceholder(){const e=this.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),n=e("ariaFilterValue","Filter Value");this.forEachInput(o=>{o.setInputPlaceholder(t),o.setInputAriaLabel(n)})}getInputs(e){const{dateConditionFromComps:t,dateConditionToComps:n}=this;return e>=t.length?[null,null]:[t[e],n[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,(n,o,u,d)=>{o<d&&t.push(n.getDate())}),t}translate(e,t){let n=e;return e==="lessThan"?n="before":e==="greaterThan"&&(n="after"),super.translate(n,t)}};function getValidityMessageKey2(e,t,n){return e!=null&&t!=null&&e>=t?`${n?"max":"min"}DateValidation`:null}var DateFilterModelFormatter=class extends SimpleFilterModelFormatter{constructor(e,t){super(e,t,n=>{const{dataTypeSvc:o,valueSvc:u}=this.beans,d=t.column,f=o?.getDateFormatterFunction(d),g=f?f(n??void 0):n;return u.formatValue(d,null,g)}),this.filterTypeKeys=SCALAR_FILTER_TYPE_KEYS}conditionToString(e,t,n,o,u){const{type:d}=e,f=_parseDateTimeFromString(e.dateFrom),g=_parseDateTimeFromString(e.dateTo),v=this.filterParams.inRangeFloatingFilterDateFormat,w=t?this.formatValue.bind(this):_=>_dateToFormattedString(_,v),S=()=>f!==null?w(f):"null",R=()=>g!==null?w(g):"null";if(f==null&&g==null)return translateForFilter(this,d);if(t){const _=this.conditionForToolPanel(d,n,S,R,o,u);if(_!=null)return _}return n?`${S()}-${R()}`:f!=null?w(f):`${d}`}};function defaultDateComparator(e,t){const n=t;return n<e?-1:n>e?1:0}var DateFilterHandler=class extends ScalarFilterHandler{constructor(){super(mapValuesFromDateFilterModel,DEFAULT_DATE_FILTER_OPTIONS),this.filterType="date",this.FilterModelFormatterClass=DateFilterModelFormatter,this.filterTypeToRangeCache=new Map}getOrRefreshRangeCacheItem(e,t){const{filterTypeToRangeCache:n}=this,o=Date.now();let u=n.get(e);if(u&&u.expires<o&&(u=void 0),!u){const[d,f]=t(new Date(o),new Date(o));u={from:d,to:f,expires:setStartOfNextDay(new Date(o)).getTime()-o},n.set(e,u)}return u}comparator(){return this.params.filterParams.comparator??defaultDateComparator}isValid(e){const t=this.params.filterParams.isValidDate;return!t||t(e)}evaluateNonNullValue(e,t,n){const o=n.type,u=this.comparator();if(!this.isValid(t))return o==="notEqual"||o==="notBlank";const d=o,f=presetDateFilterTypeRelativeFromToMap[d];if(f){const{from:g,to:v}=this.getOrRefreshRangeCacheItem(d,f);return u(g,t)>=0&&u(v,t)<0}return super.evaluateNonNullValue(e,t,n)}},DEFAULT_FIRST_DAY_OF_WEEK=1,cachedFirstDayOfWeek=null,getFirstDayOfWeek=()=>{if(cachedFirstDayOfWeek!=null)return cachedFirstDayOfWeek;let e;const t=typeof navigator>"u"?void 0:navigator.languages?.[0]??navigator.language;if(t&&typeof Intl<"u"&&typeof Intl.Locale=="function")try{e=new Intl.Locale(t).getWeekInfo?.()?.firstDay}catch{e=void 0}return cachedFirstDayOfWeek=e==null?DEFAULT_FIRST_DAY_OF_WEEK:e%7,cachedFirstDayOfWeek},setStartOfDay=e=>(e.setHours(0,0,0,0),e),setStartOfWeek=e=>{const t=e.getDay(),n=getFirstDayOfWeek(),o=(t-n+7)%7;return e.setDate(e.getDate()-o),setStartOfDay(e)},setPreviousNDay=(e,t=1)=>(e.setDate(e.getDate()-t),e),setStartOfNextDay=e=>(e.setDate(e.getDate()+1),setStartOfDay(e)),setStartOfNextWeek=e=>(setStartOfWeek(e),e.setDate(e.getDate()+6),setStartOfNextDay(e)),setStartOfMonth=e=>(e.setDate(1),setStartOfDay(e)),setStartOfNextMonth=e=>(e.setDate(1),e.setMonth(e.getMonth()+1),setStartOfDay(e)),setStartOfQuarter=e=>{const t=Math.floor(e.getMonth()/3);return e.setMonth(t*3),setStartOfMonth(e)},setStartOfNextQuarter=e=>{const t=Math.floor(e.getMonth()/3);return e.setMonth(t*3+2),setStartOfNextMonth(e)},setStartOfYear=e=>(e.setMonth(0,1),setStartOfDay(e)),setStartOfNextYear=e=>(e.setMonth(12,0),setStartOfNextDay(e)),setPreviousDay=e=>setPreviousNDay(e),setPreviousWeek=e=>setPreviousDay(setStartOfWeek(e)),setPreviousMonth=e=>setPreviousDay(setStartOfMonth(e)),setPreviousQuarter=e=>setPreviousDay(setStartOfQuarter(e)),today=(e,t)=>[setStartOfDay(e),setStartOfNextDay(t)],yesterday=(e,t)=>today(setPreviousDay(e),setPreviousDay(t)),thisWeek=(e,t)=>[setStartOfWeek(e),setStartOfNextWeek(t)],lastWeek=(e,t)=>thisWeek(setPreviousWeek(e),setPreviousWeek(t)),thisMonth=(e,t)=>[setStartOfMonth(e),setStartOfNextMonth(t)],lastMonth=(e,t)=>thisMonth(setPreviousMonth(e),setPreviousMonth(t)),thisQuarter=(e,t)=>[setStartOfQuarter(e),setStartOfNextQuarter(t)],lastQuarter=(e,t)=>thisQuarter(setPreviousQuarter(e),setPreviousQuarter(t)),thisYear=(e,t)=>[setStartOfYear(e),setStartOfNextYear(t)],yearToDate=(e,t)=>[setStartOfYear(e),setStartOfNextDay(t)],last7Days=(e,t)=>[setStartOfDay(setPreviousNDay(e,7)),setStartOfNextDay(t)],last30Days=(e,t)=>[setStartOfDay(setPreviousNDay(e,30)),setStartOfNextDay(t)],last90Days=(e,t)=>[setStartOfDay(setPreviousNDay(e,90)),setStartOfNextDay(t)],last6Months=(e,t)=>(e.setFullYear(e.getFullYear()-1),e.setMonth(e.getMonth()+6),[setStartOfDay(e),setStartOfNextDay(t)]),last12Months=(e,t)=>(e.setFullYear(e.getFullYear()-1),[setStartOfDay(e),setStartOfNextDay(t)]),last24Months=(e,t)=>(e.setFullYear(e.getFullYear()-2),[setStartOfDay(e),setStartOfNextDay(t)]),lastYear=(e,t)=>(e.setFullYear(e.getFullYear()-1),t.setFullYear(t.getFullYear()-1),thisYear(e,t)),nextYear=(e,t)=>(e.setFullYear(e.getFullYear()+1),t.setFullYear(t.getFullYear()+1),thisYear(e,t)),nextQuarter=(e,t)=>(e.setMonth(e.getMonth()+3),t.setMonth(t.getMonth()+3),thisQuarter(e,t)),nextMonth=(e,t)=>(e.setMonth(e.getMonth()+1),t.setMonth(t.getMonth()+1),thisMonth(e,t)),nextWeek=(e,t)=>(e.setDate(e.getDate()+7),t.setDate(t.getDate()+7),thisWeek(e,t)),tomorrow=(e,t)=>(e.setDate(e.getDate()+1),t.setDate(t.getDate()+1),today(e,t)),presetDateFilterTypeRelativeFromToMap={today,yesterday,tomorrow,thisWeek,lastWeek,nextWeek,thisMonth,lastMonth,nextMonth,thisQuarter,lastQuarter,nextQuarter,thisYear,lastYear,nextYear,yearToDate,last7Days,last30Days,last90Days,last6Months,last12Months,last24Months,setStartOfDay,setStartOfWeek,setStartOfNextDay,setStartOfNextWeek,setStartOfMonth,setStartOfNextMonth,setStartOfQuarter,setStartOfNextQuarter,setStartOfYear,setStartOfNextYear,setPreviousDay,setPreviousWeek,setPreviousMonth,setPreviousQuarter},DateFloatingFilterElement={tag:"div",cls:"ag-floating-filter-input",role:"presentation",children:[{tag:"ag-input-text-field",ref:"eReadOnlyText"},{tag:"div",ref:"eDateWrapper",cls:"ag-date-floating-filter-wrapper"}]},DateFloatingFilter=class extends SimpleFloatingFilter{constructor(){super(DateFloatingFilterElement,[AgInputTextFieldSelector]),this.eReadOnlyText=RefPlaceholder,this.eDateWrapper=RefPlaceholder,this.FilterModelFormatterClass=DateFilterModelFormatter,this.filterType="date",this.defaultOptions=DEFAULT_DATE_FILTER_OPTIONS}setParams(e){super.setParams(e),this.createDateComponent();const t=this.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}updateParams(e){super.updateParams(e),this.dateComp.updateParams(this.getDateComponentParams()),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){const t=!this.readOnly&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){const n=e?_parseDateTimeFromString(e.dateFrom):null;this.dateComp.setDate(n),this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){_setDisplayed(this.eDateWrapper,e),_setDisplayed(this.eReadOnlyText.getGui(),!e)}onModelUpdated(e){super.setLastTypeFromModel(e),this.updateCompOnModelChange(e)}onDateChanged(){const e=this.dateComp.getDate();if(this.reactive){const t=this.params;t.onUiChange();const n=t.model,o=_serialiseDate(e),u=o==null?null:{...n??{filterType:this.filterType,type:this.lastType??this.optionsFactory.defaultOption},dateFrom:o};t.onModelChange(u,{afterFloatingFilter:!0})}else this.params.parentFilterInstance(t=>{t?.onFloatingFilterChanged(this.lastType||null,e)})}getDateComponentParams(){const{filterParams:e}=this.params,t=getDebounceMs(e,this.defaultDebounceMs);return _addGridCommonParams(this.gos,{onDateChanged:_debounce(this,this.onDateChanged.bind(this),t),filterParams:e,location:"floatingFilter"})}createDateComponent(){const{beans:{context:e,userCompFactory:t},eDateWrapper:n,params:{column:o}}=this;this.dateComp=new DateCompWrapper(e,t,o.getColDef(),this.getDateComponentParams(),n,u=>{u.setInputAriaLabel(this.getAriaLabel(o))}),this.addDestroyFunc(()=>this.dateComp.destroy())}},DefaultDateElement={tag:"div",cls:"ag-filter-filter",children:[{tag:"ag-input-text-field",ref:"eDateInput",cls:"ag-date-filter"}]},DefaultDateComponent=class extends Component{constructor(){super(DefaultDateElement,[AgInputTextFieldSelector]),this.eDateInput=RefPlaceholder,this.isApply=!1,this.applyOnFocusOut=!1}init(e){this.params=e,this.setParams(e);const t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus({preventScroll:!0})},input:this.handleInput.bind(this,!1),change:this.handleInput.bind(this,!0),focusout:this.handleFocusOut.bind(this),focusin:this.handleFocusIn.bind(this)})}handleInput(e){if(!this.eDateInput.isDisabled()){if(this.isApply){this.applyOnFocusOut=!e,e&&this.params.onDateChanged();return}e||this.params.onDateChanged()}}handleFocusOut(){this.applyOnFocusOut&&(this.applyOnFocusOut=!1,this.params.onDateChanged())}handleFocusIn(){this.params.onFocusIn?.()}setParams(e){const t=this.eDateInput.getInputElement(),n=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=n&&_isBrowserSafari();const{minValidYear:o,maxValidYear:u,minValidDate:d,maxValidDate:f,buttons:g,includeTime:v,colDef:w}=e.filterParams||{},S=this.beans.dataTypeSvc,R=v??S?.getDateIncludesTimeFlag?.(w.cellDataType)??!1;n?R?(t.type="datetime-local",t.step="1"):t.type="date":t.type="text";const _=parseOrConstructDate(d,o,!0),F=parseOrConstructDate(f,u,!1);_&&F&&_.getTime()>F.getTime()&&_warn(87),_&&(t.min=_serialiseDate(_,R)),F&&(t.max=_serialiseDate(F,R)),this.isApply=e.location==="floatingFilter"&&!!g?.includes("apply")}refresh(e){this.params=e,this.setParams(e)}getDate(){return _parseDateTimeFromString(this.eDateInput.getValue())}setDate(e){const t=this.params.filterParams.colDef.cellDataType,n=this.beans.dataTypeSvc?.getDateIncludesTimeFlag(t)??!1;this.eDateInput.setValue(_serialiseDate(e,n))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){e?.suppressFocus||this.eDateInput.getInputElement().focus({preventScroll:!0})}shouldUseBrowserDatePicker(e){return e?.filterParams?.browserDatePicker??!0}};function parseOrConstructDate(e,t,n){return e&&t&&_warn(n?85:86),e instanceof Date?e:e?_parseDateTimeFromString(e):t?_parseDateTimeFromString(`${t}-${n?"01-01":"12-31"}`):null}var DEFAULT_NUMBER_FILTER_OPTIONS=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"];function getAllowedCharPattern2(e){return e?.allowedCharPattern??null}function processNumberFilterValue(e){return e==null||isNaN(e)?null:e}function mapValuesFromNumberFilterModel(e,t){const{filter:n,filterTo:o,type:u}=e||{};return[processNumberFilterValue(n),processNumberFilterValue(o)].slice(0,getNumberOfInputs(u,t))}var NumberFilter=class extends SimpleFilter{constructor(){super("numberFilter",mapValuesFromNumberFilterModel,DEFAULT_NUMBER_FILTER_OPTIONS),this.eValuesFrom=[],this.eValuesTo=[],this.filterType="number",this.defaultDebounceMs=500}afterGuiAttached(e){super.afterGuiAttached(e),this.refreshInputValidation()}shouldKeepInvalidInputState(){return!_isBrowserFirefox()&&this.hasInvalidInputs()&&this.getConditionTypes().includes("inRange")}refreshInputValidation(){for(let e=0;e<this.eValuesFrom.length;e++){const t=this.eValuesFrom[e],n=this.eValuesTo[e];this.refreshInputPairValidation(t,n)}}refreshInputPairValidation(e,t,n=!1){const o=this.params.numberParser,u=getNormalisedValue(o,e),d=getNormalisedValue(o,t),f=getValidityMessageKey3(u,d,n),g=f?this.translate(f,[String(n?d:u)]):"";(n?e:t).setCustomValidity(g),(n?t:e).setCustomValidity(""),g.length>0&&this.beans.ariaAnnounce.announceValue(g,"dateFilter")}getState(){return{isInvalid:this.hasInvalidInputs()}}areStatesEqual(e,t){return(e?.isInvalid??!1)===(t?.isInvalid??!1)}refresh(e){const t=super.refresh(e),{state:n,additionalEventAttributes:o}=e,u=this.state,d=o?.fromAction;return(d&&d!="apply"||n.model!==u.model||!this.areStatesEqual(n.state,u.state))&&this.refreshInputValidation(),t}setElementValue(e,t,n){const{numberFormatter:o}=this.params,u=!n&&o?o(t??null):t;super.setElementValue(e,u),u===null&&e.setCustomValidity("")}createEValue(){const{params:e,eValuesFrom:t,eValuesTo:n}=this,o=getAllowedCharPattern2(e),u=_createElement({tag:"div",cls:"ag-filter-body",role:"presentation"}),d=this.createFromToElement(u,t,"from",o),f=this.createFromToElement(u,n,"to",o),g=(S,R,_)=>()=>this.refreshInputPairValidation(S,R,_),v=g(d,f,!0);d.onValueChange(v),d.addGuiEventListener("focusin",v);const w=g(d,f,!1);return f.onValueChange(w),f.addGuiEventListener("focusin",w),u}createFromToElement(e,t,n,o){const u=this.createManagedBean(o?new AgInputTextField({allowedCharPattern:o}):new AgInputNumberField);return u.addCss(`ag-filter-${n}`),u.addCss("ag-filter-filter"),t.push(u),e.appendChild(u.getGui()),u}removeEValues(e,t){const n=o=>this.removeComponents(o,e,t);n(this.eValuesFrom),n(this.eValuesTo)}getValues(e){const t=[];return this.forEachPositionInput(e,(n,o,u,d)=>{o<d&&t.push(processNumberFilterValue(stringToFloat(this.params.numberParser,n.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}createCondition(e){const t=this.getConditionType(e),n={filterType:this.filterType,type:t},o=this.getValues(e);return o.length>0&&(n.filter=o[0]),o.length>1&&(n.filterTo=o[1]),n}removeConditionsAndOperators(e,t){if(!this.hasInvalidInputs())return super.removeConditionsAndOperators(e,t)}getInputs(e){const{eValuesFrom:t,eValuesTo:n}=this;return e>=t.length?[null,null]:[t[e],n[e]]}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>e||(e=!t.getInputElement().validity.valid)),e}positionHasInvalidInputs(e){let t=!1;return this.forEachPositionInput(e,n=>t||(t=!n.getInputElement().validity.valid)),t}canApply(e){return!this.hasInvalidInputs()}};function stringToFloat(e,t){if(typeof t=="number")return t;let n=_makeNull(t);return n!=null&&n.trim()===""&&(n=null),e?e(n):n==null||n.trim()==="-"?null:Number.parseFloat(n)}function getNormalisedValue(e,t){return processNumberFilterValue(stringToFloat(e,t.getValue(!0)))}function getValidityMessageKey3(e,t,n){return e!=null&&t!=null&&e>=t?`strict${n?"Max":"Min"}ValueValidation`:null}var NumberFilterModelFormatter=class extends SimpleFilterModelFormatter{constructor(e,t){super(e,t,t.numberFormatter),this.filterTypeKeys=SCALAR_FILTER_TYPE_KEYS}conditionToString(e,t,n,o,u){const{filter:d,filterTo:f,type:g}=e,v=this.formatValue.bind(this);if(t){const w=this.conditionForToolPanel(g,n,()=>v(d),()=>v(f),o,u);if(w!=null)return w}return n?`${v(d)}-${v(f)}`:d!=null?v(d):`${g}`}},NumberFilterHandler=class extends ScalarFilterHandler{constructor(){super(mapValuesFromNumberFilterModel,DEFAULT_NUMBER_FILTER_OPTIONS),this.filterType="number",this.FilterModelFormatterClass=NumberFilterModelFormatter}comparator(){return(e,t)=>e===t?0:e<t?1:-1}isValid(e){return!isNaN(e)}},FloatingFilterNumberInputService=class extends BeanStub{constructor(){super(...arguments),this.onValueChanged=()=>{},this.numberInputActive=!0}setupGui(e){this.eNumberInput=this.createManagedBean(new AgInputNumberField),this.eTextInput=this.createManagedBean(new AgInputTextField),this.eTextInput.setDisabled(!0);const t=this.eNumberInput.getGui(),n=this.eTextInput.getGui();e.appendChild(t),e.appendChild(n),this.setupListeners(t,o=>this.onValueChanged(o)),this.setupListeners(n,o=>this.onValueChanged(o))}setEditable(e){this.numberInputActive=e,this.eNumberInput.setDisplayed(this.numberInputActive),this.eTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eNumberInput.setAutoComplete(e),this.eTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eNumberInput:this.eTextInput}setValueChangedListener(e){this.onValueChanged=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams({ariaLabel:e,autoComplete:t,placeholder:n}){this.setAriaLabel(e),t!==void 0&&this.setAutoComplete(t),this.setPlaceholder(this.eNumberInput,n),this.setPlaceholder(this.eTextInput,n)}setPlaceholder(e,t){e.toggleCss("ag-floating-filter-search-icon",!!t),e.setInputPlaceholder(t)}setAriaLabel(e){this.eNumberInput.setInputAriaLabel(e),this.eTextInput.setInputAriaLabel(e)}},NumberFloatingFilter=class extends TextInputFloatingFilter{constructor(){super(...arguments),this.FilterModelFormatterClass=NumberFilterModelFormatter,this.filterType="number",this.defaultOptions=DEFAULT_NUMBER_FILTER_OPTIONS}updateParams(e){getAllowedCharPattern2(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.updateParams(e)}createFloatingFilterInputService(e){return this.allowedCharPattern=getAllowedCharPattern2(e.filterParams),this.allowedCharPattern?this.createManagedBean(new FloatingFilterTextInputService({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new FloatingFilterNumberInputService)}convertValue(e){return e?Number(e):null}},DEFAULT_TEXT_FILTER_OPTIONS=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],TextFilter=class extends SimpleFilter{constructor(){super("textFilter",mapValuesFromTextFilterModel,DEFAULT_TEXT_FILTER_OPTIONS),this.filterType="text",this.eValuesFrom=[],this.eValuesTo=[],this.defaultDebounceMs=500}createCondition(e){const t=this.getConditionType(e),n={filterType:this.filterType,type:t},o=this.getValues(e);return o.length>0&&(n.filter=o[0]),o.length>1&&(n.filterTo=o[1]),n}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){const{eValuesFrom:t,eValuesTo:n}=this;return e>=t.length?[null,null]:[t[e],n[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,(n,o,u,d)=>{o<d&&t.push(_makeNull(n.getValue()))}),t}createEValue(){const e=_createElement({tag:"div",cls:"ag-filter-body",role:"presentation"}),{eValuesFrom:t,eValuesTo:n}=this;return this.createFromToElement(e,t,"from"),this.createFromToElement(e,n,"to"),e}createFromToElement(e,t,n){const o=this.createManagedBean(new AgInputTextField);o.addCss(`ag-filter-${n}`),o.addCss("ag-filter-filter"),t.push(o),e.appendChild(o.getGui())}removeEValues(e,t){const n=d=>this.removeComponents(d,e,t),{eValuesFrom:o,eValuesTo:u}=this;n(o),n(u)}},TextFilterModelFormatter=class extends SimpleFilterModelFormatter{constructor(){super(...arguments),this.filterTypeKeys=TEXT_FILTER_TYPE_KEYS}conditionToString(e,t,n,o,u){const{filter:d,filterTo:f,type:g}=e;if(t){const v=S=>()=>translateForFilter(this,"filterSummaryTextQuote",[S]),w=this.conditionForToolPanel(g,n,v(d),v(f),o,u);if(w!=null)return w}return n?`${d}-${f}`:d!=null?`${d}`:`${g}`}},defaultMatcher=({filterOption:e,value:t,filterText:n})=>{if(n==null)return!1;switch(e){case"contains":return t.includes(n);case"notContains":return!t.includes(n);case"equals":return t===n;case"notEqual":return t!=n;case"startsWith":return t.indexOf(n)===0;case"endsWith":{const o=t.lastIndexOf(n);return o>=0&&o===t.length-n.length}default:return!1}},defaultFormatter=e=>e,defaultLowercaseFormatter=e=>e==null?null:e.toString().toLowerCase(),TextFilterHandler=class extends SimpleFilterHandler{constructor(){super(mapValuesFromTextFilterModel,DEFAULT_TEXT_FILTER_OPTIONS),this.filterType="text",this.FilterModelFormatterClass=TextFilterModelFormatter}updateParams(e){super.updateParams(e);const t=e.filterParams;this.matcher=t.textMatcher??defaultMatcher,this.formatter=t.textFormatter??(t.caseSensitive?defaultFormatter:defaultLowercaseFormatter)}evaluateNullValue(e){return e?["notEqual","notContains","blank"].indexOf(e)>=0:!1}evaluateNonNullValue(e,t,n,o){const u=e.map(_=>this.formatter(_))||[],d=this.formatter(t),{api:f,colDef:g,column:v,context:w,filterParams:{textFormatter:S}}=this.params;if(n.type==="blank")return isBlank(t);if(n.type==="notBlank")return!isBlank(t);const R={api:f,colDef:g,column:v,context:w,node:o.node,data:o.data,filterOption:n.type,value:d,textFormatter:S};return u.some(_=>this.matcher({...R,filterText:_}))}processModelToApply(e){if(e&&this.params.filterParams.trimInput){const t=n=>{const o={...n},{filter:u,filterTo:d}=n;return u&&(o.filter=trimInputForFilter(u)??null),d&&(o.filterTo=trimInputForFilter(d)??null),o};return isCombinedFilterModel(e)?{...e,conditions:e.conditions.map(t)}:t(e)}return e}},TextFloatingFilter=class extends TextInputFloatingFilter{constructor(){super(...arguments),this.FilterModelFormatterClass=TextFilterModelFormatter,this.filterType="text",this.defaultOptions=DEFAULT_TEXT_FILTER_OPTIONS}createFloatingFilterInputService(){return this.createManagedBean(new FloatingFilterTextInputService)}};function isQuickFilterPresent(e){return!!e.quickFilter?.isFilterPresent()}function getQuickFilter(e){return e.quickFilter?.getText()}function resetQuickFilter(e){e.quickFilter?.resetCache()}var QuickFilterService=class extends BeanStub{constructor(){super(...arguments),this.beanName="quickFilter",this.quickFilter=null,this.quickFilterParts=null}postConstruct(){const e=this.resetCache.bind(this),t=this.gos;this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{t.get("includeHiddenColumnsInQuickFilter")||this.resetCache()}}),this.addManagedPropertyListener("quickFilterText",n=>this.setFilter(n.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onColumnConfigChanged()),this.quickFilter=this.parseFilter(t.get("quickFilterText")),this.parser=t.get("quickFilterParser"),this.matcher=t.get("quickFilterMatcher"),this.setFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setParserAndMatcher())}refreshCols(){const{autoColSvc:e,colModel:t,gos:n,pivotResultCols:o}=this.beans,u=t.isPivotMode(),d=e?.getColumns(),f=t.getColDefCols();let g=(u&&!n.get("applyQuickFilterBeforePivotOrAgg")?o?.getPivotResultCols()?.list:f)??[];d&&(g=g.concat(d)),this.colsToUse=n.get("includeHiddenColumnsInQuickFilter")?g:g.filter(v=>v.isVisible()||v.isRowGroupActive())}isFilterPresent(){return this.quickFilter!==null}doesRowPass(e){const t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassMatcher(t,e):this.quickFilterParts.every(n=>t?this.doesRowPassCache(e,n):this.doesRowPassNoCache(e,n))}resetCache(){this.beans.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}getText(){return this.gos.get("quickFilterText")}setFilterParts(){const{quickFilter:e,parser:t}=this;e?this.quickFilterParts=t?t(e):e.split(" "):this.quickFilterParts=null}parseFilter(e){return _exists(e)?e.toUpperCase():null}setFilter(e){if(e!=null&&typeof e!="string"){_warn(70,{newFilter:e});return}const t=this.parseFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setParserAndMatcher(){const e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),n=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,n&&(this.setFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onColumnConfigChanged(){this.refreshCols(),this.resetCache(),this.isFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassNoCache(e,t){return this.colsToUse.some(n=>{const o=this.getTextForColumn(n,e);return _exists(o)&&o.includes(t)})}doesRowPassCache(e,t){return this.checkGenerateAggText(e),e.quickFilterAggregateText.includes(t)}doesRowPassMatcher(e,t){let n;e?(this.checkGenerateAggText(t),n=t.quickFilterAggregateText):n=this.getAggText(t);const{quickFilterParts:o,matcher:u}=this;return u(o,n)}checkGenerateAggText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getAggText(e))}getTextForColumn(e,t){let n=this.beans.filterValueSvc.getValue(e,t);const o=e.getColDef();if(o.getQuickFilterText){const u=_addGridCommonParams(this.gos,{value:n,node:t,data:t.data,column:e,colDef:o});n=o.getQuickFilterText(u)}return _exists(n)?n.toString().toUpperCase():null}getAggText(e){const t=[];for(const n of this.colsToUse){const o=this.getTextForColumn(n,e);_exists(o)&&t.push(o)}return t.join(`
`)}},ClientSideRowModelFilterModule={moduleName:"ClientSideRowModelFilter",version:VERSION,rowModels:["clientSide"],beans:[FilterStage]},FilterCoreModule={moduleName:"FilterCore",version:VERSION,beans:[FilterManager],apiFunctions:{isAnyFilterPresent,onFilterChanged},css:[columnFiltersCSS],dependsOn:[ClientSideRowModelFilterModule]},FilterValueModule={moduleName:"FilterValue",version:VERSION,beans:[FilterValueService]},ColumnFilterModule={moduleName:"ColumnFilter",version:VERSION,beans:[ColumnFilterService,FilterMenuFactory],dynamicBeans:{headerFilterCellCtrl:HeaderFilterCellCtrl},icons:{filter:"filter",filterActive:"filter"},apiFunctions:{isColumnFilterPresent,getColumnFilterInstance,destroyFilter,setFilterModel,getFilterModel,getColumnFilterModel,setColumnFilterModel,showColumnFilter,hideColumnFilter,getColumnFilterHandler,doFilterAction},dependsOn:[FilterCoreModule,PopupModule,FilterValueModule,SharedMenuModule]},CustomFilterModule={moduleName:"CustomFilter",version:VERSION,userComponents:{agReadOnlyFloatingFilter:ReadOnlyFloatingFilter},dependsOn:[ColumnFilterModule]},TextFilterModule={moduleName:"TextFilter",version:VERSION,dependsOn:[ColumnFilterModule],userComponents:{agTextColumnFilter:{classImp:TextFilter,params:{useForm:!0}},agTextColumnFloatingFilter:TextFloatingFilter},dynamicBeans:{agTextColumnFilterHandler:TextFilterHandler}},NumberFilterModule={moduleName:"NumberFilter",version:VERSION,dependsOn:[ColumnFilterModule],userComponents:{agNumberColumnFilter:{classImp:NumberFilter,params:{useForm:!0}},agNumberColumnFloatingFilter:NumberFloatingFilter},dynamicBeans:{agNumberColumnFilterHandler:NumberFilterHandler}},BigIntFilterModule={moduleName:"BigIntFilter",version:VERSION,dependsOn:[ColumnFilterModule],userComponents:{agBigIntColumnFilter:{classImp:BigIntFilter,params:{useForm:!0}},agBigIntColumnFloatingFilter:BigIntFloatingFilter},dynamicBeans:{agBigIntColumnFilterHandler:BigIntFilterHandler}},DateFilterModule={moduleName:"DateFilter",version:VERSION,dependsOn:[ColumnFilterModule],userComponents:{agDateColumnFilter:{classImp:DateFilter,params:{useForm:!0}},agDateInput:DefaultDateComponent,agDateColumnFloatingFilter:DateFloatingFilter},dynamicBeans:{agDateColumnFilterHandler:DateFilterHandler}},QuickFilterCoreModule={moduleName:"QuickFilterCore",version:VERSION,rowModels:["clientSide"],beans:[QuickFilterService],dependsOn:[FilterCoreModule,FilterValueModule]},QuickFilterModule={moduleName:"QuickFilter",version:VERSION,apiFunctions:{isQuickFilterPresent,getQuickFilter,resetQuickFilter},dependsOn:[QuickFilterCoreModule]},ExternalFilterModule={moduleName:"ExternalFilter",version:VERSION,dependsOn:[FilterCoreModule]},InfiniteBlock=class extends BeanStub{constructor(e,t,n){super(),this.id=e,this.parentCache=t,this.params=n,this.state="needsLoading",this.version=0,this.startRow=e*n.blockSize,this.endRow=this.startRow+n.blockSize}load(){this.state="loading",this.loadFromDatasource()}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed"),this.dispatchLocalEvent({type:"loadComplete"})}pageLoaded(e,t,n){this.successCommon(e,{rowData:t,rowCount:n})}isRequestMostRecentAndLive(e){const t=e===this.version,n=this.isAlive();return t&&n}successCommon(e,t){this.dispatchLocalEvent({type:"loadComplete"}),this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}postConstruct(){this.rowNodes=[];const{params:{blockSize:e,rowHeight:t},startRow:n,beans:o,rowNodes:u}=this;for(let d=0;d<e;d++){const f=n+d,g=new RowNode(o);g.setRowHeight(t),g.uiLevel=0,g.setRowIndex(f),g.setRowTop(t*f),u.push(g)}}getBlockStateJson(){const{id:e,startRow:t,endRow:n,state:o}=this;return{id:""+e,state:{blockNumber:e,startRow:t,endRow:n,pageStatus:o}}}setDataAndId(e,t,n){_exists(t)?e.setDataAndId(t,n.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){const e=this.createLoadParams();if(_missing(this.params.datasource.getRows)){_warn(90);return}window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}createLoadParams(){const{startRow:e,endRow:t,version:n,params:{sortModel:o,filterModel:u},gos:d}=this;return _addGridCommonParams(d,{startRow:e,endRow:t,successCallback:this.pageLoaded.bind(this,n),failCallback:this.pageLoadFailed.bind(this,n),sortModel:o,filterModel:u})}forEachNode(e,t,n){this.rowNodes.forEach((o,u)=>{this.startRow+u<n&&e(o,t.value++)})}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.value++);const n=e-this.startRow;return this.rowNodes[n]}processServerResult(e){const{rowNodes:t,beans:n}=this;t.forEach((u,d)=>{const f=e.rowData?e.rowData[d]:void 0;!u.id&&u.alreadyRendered&&f&&(t[d]=new RowNode(n),t[d].setRowIndex(u.rowIndex),t[d].setRowTop(u.rowTop),t[d].setRowHeight(u.rowHeight),u._destroy(!0)),this.setDataAndId(t[d],f,this.startRow+d)});const o=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,o)}destroy(){const e=this.rowNodes;for(let t=0,n=e.length;t<n;t++)e[t]._destroy(!1);e.length=0,super.destroy()}},MAX_EMPTY_BLOCKS_TO_KEEP=2,InfiniteCache=class extends BeanStub{constructor(e){super(),this.params=e,this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount}getRow(e,t=!1){const n=Math.floor(e/this.params.blockSize);let o=this.blocks[n];if(!o){if(t)return;o=this.createBlock(n)}return o.getRow(e)}createBlock(e){const t=this.params,n=this.createBean(new InfiniteBlock(e,this,t));return this.blocks[n.id]=n,this.blockCount++,this.purgeBlocksIfNeeded(n),t.rowNodeBlockLoader.addBlock(n),n}refreshCache(){if(this.blockCount==0){this.purgeCache();return}for(const t of this.getBlocksInOrder())t.setStateWaitingToLoad();this.params.rowNodeBlockLoader.checkBlockToLoad()}destroy(){for(const e of this.getBlocksInOrder())this.destroyBlock(e);super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(_logIfDebug(this.gos,`InfiniteCache - onPageLoaded: page = ${e.id}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){const t=this.getBlocksInOrder().filter(f=>f!=e),n=(f,g)=>g.lastAccessed-f.lastAccessed;t.sort(n);const o=this.params.maxBlocksInCache>0,u=o?this.params.maxBlocksInCache-1:null,d=MAX_EMPTY_BLOCKS_TO_KEEP-1;t.forEach((f,g)=>{const v=f.state==="needsLoading"&&g>=d,w=o?g>=u:!1;if(v||w){if(this.isBlockCurrentlyDisplayed(f)||this.isBlockFocused(f))return;this.removeBlockFromCache(f)}})}isBlockFocused(e){const t=this.beans.focusSvc.getFocusCellToUseAfterRefresh();if(!t||t.rowPinned!=null)return!1;const{startRow:n,endRow:o}=e;return t.rowIndex>=n&&t.rowIndex<o}isBlockCurrentlyDisplayed(e){const{startRow:t,endRow:n}=e;return this.beans.rowRenderer.isRangeInRenderedViewport(t,n-1)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if(typeof t=="number"&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const{blockSize:n,overflowSize:o}=this.params,d=(e.id+1)*n+o;this.rowCount<d&&(this.rowCount=d)}}setRowCount(e,t){this.rowCount=e,_exists(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){const t={value:0};for(const n of this.getBlocksInOrder())n.forEachNode(e,t,this.rowCount)}getBlocksInOrder(){const e=(n,o)=>n.id-o.id;return Object.values(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.id],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventSvc.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){const e=[];for(const t of this.getBlocksInOrder())t.id*this.params.blockSize>=this.rowCount&&e.push(t);if(e.length>0)for(const t of e)this.destroyBlock(t)}purgeCache(){for(const e of this.getBlocksInOrder())this.removeBlockFromCache(e);this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){const n=[];let o=-1,u=!1;const d={value:0};let f=!1;for(const v of this.getBlocksInOrder())if(!f){if(u&&o+1!==v.id){f=!0;continue}o=v.id,v.forEachNode(w=>{const S=w===e||w===t;(u||S)&&n.push(w),S&&(u=!u)},d,this.rowCount)}return f||u?[]:n}},InfiniteRowModel=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowModel",this.rootNode=null}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){if(this.gos.get("rowModelType")!=="infinite")return;const e=this.beans,t=new RowNode(e);this.rootNode=t,t.level=-1,this.rowHeight=_getRowHeightAsNumber(e),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache())}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy(),this.rootNode=null}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.beans.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.reset.bind(this),sortChanged:this.reset.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.dispatchModelUpdatedEvent.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=_getRowHeightAsNumber(this.beans),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onColumnEverything(){let e;this.cacheParams?e=!_jsonEquals(this.cacheParams.sortModel,this.beans.sortSvc?.getSortModel()??[]):e=!0,e&&this.reset()}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getOverlayType(){return this.infiniteCache?.getRowCount()===0?this.beans.filterManager?.isAnyFilterPresent()?"noMatchingRows":"noRows":null}getNodesInRangeForSelection(e,t){return this.infiniteCache?.getRowNodesInRange(e,t)??[]}reset(){if(!this.datasource)return;_getRowIdCallback(this.gos)!=null||this.beans.selectionSvc?.reset("rowDataChanged"),this.resetCache()}dispatchModelUpdatedEvent(){this.eventSvc.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){this.destroyCache();const e=this.beans,{filterManager:t,sortSvc:n,rowNodeBlockLoader:o,eventSvc:u,gos:d}=e;this.cacheParams={datasource:this.datasource,filterModel:t?.getFilterModel()??{},sortModel:n?.getSortModel()??[],rowNodeBlockLoader:o,initialRowCount:d.get("infiniteInitialRowCount"),maxBlocksInCache:d.get("maxBlocksInCache"),rowHeight:_getRowHeightAsNumber(e),overflowSize:d.get("cacheOverflowSize"),blockSize:d.get("cacheBlockSize"),lastAccessedSequence:{value:0}},this.infiniteCache=this.createBean(new InfiniteCache(this.cacheParams)),u.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)}),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache=this.destroyBean(this.infiniteCache)}getRow(e){const t=this.infiniteCache;if(t&&!(e>=t.getRowCount()))return t.getRow(e)}getRowNode(e){let t;return this.forEachNode(n=>{n.id===e&&(t=n)}),t}forEachNode(e){this.infiniteCache?.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(this.rowHeight!==0){const t=Math.floor(e/this.rowHeight),n=this.getRowCount()-1;return t>n?n:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache?.refreshCache()}purgeCache(){this.infiniteCache?.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?.isLastRowIndexKnown()??!1}setRowCount(e,t){this.infiniteCache?.setRowCount(e,t)}resetRowHeights(){}onRowHeightChanged(){}};function refreshInfiniteCache(e){_getInfiniteRowModel(e)?.refreshCache()}function purgeInfiniteCache(e){_getInfiniteRowModel(e)?.purgeCache()}function getInfiniteRowCount(e){return _getInfiniteRowModel(e)?.getRowCount()}var RowNodeBlockLoader=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){this.maxConcurrentRequests=_getMaxConcurrentDatasourceRequests(this.gos);const e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=_debounce(this,this.performCheckBlocksToLoad.bind(this),e))}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){_removeFromArray(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad()}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){_logIfDebug(this.gos,"RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");return}const e=this.maxConcurrentRequests!=null?this.maxConcurrentRequests-this.activeBlockLoadsCount:1,t=this.blocks.filter(n=>n.state==="needsLoading").slice(0,e);this.activeBlockLoadsCount+=t.length;for(const n of t)n.load();this.printCacheStatus()}getBlockState(){const e={};return this.blocks.forEach(t=>{const{id:n,state:o}=t.getBlockStateJson();e[n]=o}),e}printCacheStatus(){_logIfDebug(this.gos,`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}},InfiniteRowModelCoreModule={moduleName:"InfiniteRowModelCore",version:VERSION,rowModels:["infinite"],beans:[InfiniteRowModel,RowNodeBlockLoader]},InfiniteRowModelModule={moduleName:"InfiniteRowModel",version:VERSION,apiFunctions:{refreshInfiniteCache,purgeInfiniteCache,getInfiniteRowCount},dependsOn:[InfiniteRowModelCoreModule,SsrmInfiniteSharedApiModule]},ApiEventService=class extends BeanStub{constructor(){super(...arguments),this.beanName="apiEventSvc",this.syncListeners=new Map,this.asyncListeners=new Map,this.syncGlobalListeners=new Set,this.globalListenerPairs=new Map}postConstruct(){this.wrapSvc=this.beans.frameworkOverrides.createGlobalEventListenerWrapper?.()}addListener(e,t){const n=this.wrapSvc?.wrap(e,t)??t,o=!ALWAYS_SYNC_GLOBAL_EVENTS.has(e),u=o?this.asyncListeners:this.syncListeners;u.has(e)||u.set(e,new Set),u.get(e).add(n),this.eventSvc.addListener(e,n,o)}removeListener(e,t){const n=this.wrapSvc?.unwrap(e,t)??t,u=!!this.asyncListeners.get(e)?.delete(n);u||this.syncListeners.get(e)?.delete(n),this.eventSvc.removeListener(e,n,u)}addGlobalListener(e){const t=this.wrapSvc?.wrapGlobal(e)??e,n=(d,f)=>{ALWAYS_SYNC_GLOBAL_EVENTS.has(d)&&t(d,f)},o=(d,f)=>{ALWAYS_SYNC_GLOBAL_EVENTS.has(d)||t(d,f)};this.globalListenerPairs.set(e,{syncListener:n,asyncListener:o});const u=this.eventSvc;u.addGlobalListener(n,!1),u.addGlobalListener(o,!0)}removeGlobalListener(e){const{eventSvc:t,wrapSvc:n,globalListenerPairs:o}=this,u=n?.unwrapGlobal(e)??e;if(o.has(u)){const{syncListener:f,asyncListener:g}=o.get(u);t.removeGlobalListener(f,!1),t.removeGlobalListener(g,!0),o.delete(e)}else this.syncGlobalListeners.delete(u),t.removeGlobalListener(u,!1)}destroyEventListeners(e,t){e.forEach((n,o)=>{n.forEach(u=>this.eventSvc.removeListener(o,u,t)),n.clear()}),e.clear()}destroyGlobalListeners(e,t){for(const n of e)this.eventSvc.removeGlobalListener(n,t);e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncListeners,!1),this.destroyEventListeners(this.asyncListeners,!0),this.destroyGlobalListeners(this.syncGlobalListeners,!1);const{globalListenerPairs:e,eventSvc:t}=this;e.forEach(({syncListener:n,asyncListener:o})=>{t.removeGlobalListener(n,!1),t.removeGlobalListener(o,!0)}),e.clear()}};function addEventListener(e,t,n){e.apiEventSvc?.addListener(t,n)}function removeEventListener(e,t,n){e.apiEventSvc?.removeListener(t,n)}function addGlobalListener(e,t){e.apiEventSvc?.addGlobalListener(t)}function removeGlobalListener(e,t){e.apiEventSvc?.removeGlobalListener(t)}var EventApiModule={moduleName:"EventApi",version:VERSION,apiFunctions:{addEventListener,addGlobalListener,removeEventListener,removeGlobalListener},beans:[ApiEventService]},LocaleService=class extends BeanStub{constructor(){super(...arguments),this.beanName="localeSvc"}getLocaleTextFunc(){const e=this.gos,t=e.getCallback("getLocaleText");return t?_getLocaleTextFromFunc(t):_getLocaleTextFromMap(e.get("localeText"))}},LocaleModule={moduleName:"Locale",version:VERSION,beans:[LocaleService]};function getState(e){return e.stateSvc?.getState()??{}}function setState(e,t,n){return e.stateSvc?.setState(t,n)}function migrateGridStateModel(e){return e={...e},e.version||(e.version="32.1.0"),e.version==="32.1.0"&&(e=migrateV32_1(e)),e.version=VERSION,e}function migrateV32_1(e){return e.cellSelection=jsonGet(e,"rangeSelection"),e}function jsonGet(e,t){if(e&&typeof e=="object")return e[t]}var StateService=class extends BeanStub{constructor(){super(...arguments),this.beanName="stateSvc",this.updateRowGroupExpansionStateTimer=0,this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=_debounce(this,()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=_debounce(this,()=>{this.beans.gos.get("ssrmExpandAllAffectsAllRows")?(this.updateCachedState("ssrmRowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowGroupExpansion",void 0)):(this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("ssrmRowGroupExpansion",void 0))},0),this.onRowSelectedDebounced=_debounce(this,()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}postConstruct(){const{gos:e,ctrlsSvc:t,colDelayRenderSvc:n}=this.beans;this.isClientSideRowModel=_isClientSideRowModel(e);const o=migrateGridStateModel(e.get("initialState")??{}),u=o.partialColumnState;delete o.partialColumnState,this.cachedState=o;const d=this.suppressEventsAndDispatchInitEvent.bind(this);t.whenReady(this,()=>d(()=>this.setupStateOnGridReady(o))),(o.columnOrder||o.columnVisibility||o.columnSizing||o.columnPinning||o.columnGroup)&&n?.hideColumns("columnState");const[f,g,v]=this.addManagedEventListeners({newColumnsLoaded:({source:w})=>{w==="gridInitializing"&&(f(),d(()=>{this.setupStateOnColumnsInitialised(o,!!u),n?.revealColumns("columnState")}))},rowCountReady:()=>{g?.(),d(()=>this.setupStateOnRowCountReady(o))},firstDataRendered:()=>{v?.(),d(()=>this.setupStateOnFirstDataRendered(o))}})}destroy(){super.destroy(),clearTimeout(this.updateRowGroupExpansionStateTimer),this.queuedUpdateSources.clear()}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setState(e,t){const n=migrateGridStateModel(e);delete n.partialColumnState,this.cachedState=n,this.startSuppressEvents();const o="api",u=t?new Set(t):void 0;this.setGridReadyState(n,o,u),this.setColumnsInitialisedState(n,o,!!u,u),this.setRowCountState(n,o,u),setTimeout(()=>{this.isAlive()&&this.setFirstDataRenderedState(n,o,u),this.stopSuppressEvents(o)})}setGridReadyState(e,t,n){t==="api"&&!n?.has("sideBar")&&this.beans.sideBar?.comp?.setState(e.sideBar),this.updateCachedState("sideBar",this.getSideBarState())}setupStateOnGridReady(e){this.setGridReadyState(e,"gridInitializing");const t=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:t,sideBarUpdated:t})}updateColumnAndGroupState(){this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState())}setColumnsInitialisedState(e,t,n,o){this.setColumnState(e,t,n,o),this.setColumnGroupState(e,t,o),this.updateColumnAndGroupState()}setupStateOnColumnsInitialised(e,t){this.setColumnsInitialisedState(e,"gridInitializing",t);const n=o=>()=>this.updateColumnState([o]);this.addManagedEventListeners({columnValueChanged:n("aggregation"),columnMoved:n("columnOrder"),columnPinned:n("columnPinning"),columnResized:n("columnSizing"),columnVisible:n("columnVisibility"),columnPivotChanged:n("pivot"),columnPivotModeChanged:n("pivot"),columnRowGroupChanged:n("rowGroup"),sortChanged:n("sort"),newColumnsLoaded:this.updateColumnAndGroupState.bind(this),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setRowCountState(e,t,n){const{filter:o,rowGroupExpansion:u,ssrmRowGroupExpansion:d,rowSelection:f,pagination:g,rowPinning:v}=e,w=(R,_)=>!n?.has(R)&&(_||t==="api");w("filter",o)&&this.setFilterState(o),w("rowGroupExpansion",u)&&this.setRowGroupExpansionState(d,u,t),w("rowSelection",f)&&this.setRowSelectionState(f,t),w("pagination",g)&&this.setPaginationState(g,t),w("rowPinning",v)&&this.setRowPinningState(v);const S=this.updateCachedState.bind(this);S("filter",this.getFilterState()),this.beans.gos.get("ssrmExpandAllAffectsAllRows")?(S("ssrmRowGroupExpansion",this.getRowGroupExpansionState()),S("rowGroupExpansion",void 0)):(S("rowGroupExpansion",this.getRowGroupExpansionState()),S("ssrmRowGroupExpansion",void 0)),S("rowSelection",this.getRowSelectionState()),S("pagination",this.getPaginationState())}setupStateOnRowCountReady(e){this.setRowCountState(e,"gridInitializing");const t=this.updateCachedState.bind(this),n=()=>{this.updateRowGroupExpansionStateTimer=0,this.beans.gos.get("ssrmExpandAllAffectsAllRows")?(t("ssrmRowGroupExpansion",this.getRowGroupExpansionState()),t("rowGroupExpansion",void 0)):(t("rowGroupExpansion",this.getRowGroupExpansionState()),t("ssrmRowGroupExpansion",void 0))},o=()=>t("filter",this.getFilterState()),{gos:u,colFilter:d,selectableFilter:f}=this.beans;this.addManagedEventListeners({filterChanged:o,rowExpansionStateChanged:this.onRowGroupOpenedDebounced,expandOrCollapseAll:n,columnRowGroupChanged:n,rowDataUpdated:()=>{(u.get("groupDefaultExpanded")!==0||u.get("isGroupOpenByDefault"))&&(this.updateRowGroupExpansionStateTimer||(this.updateRowGroupExpansionStateTimer=setTimeout(n)))},selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:g=>{(g.newPage||g.newPageSize)&&t("pagination",this.getPaginationState())},pinnedRowsChanged:()=>t("rowPinning",this.getRowPinningState())}),d&&this.addManagedListeners(d,{filterStateChanged:o}),f&&this.addManagedListeners(f,{selectedFilterChanged:o})}setFirstDataRenderedState(e,t,n){const{scroll:o,cellSelection:u,focusedCell:d,columnOrder:f}=e,g=(S,R)=>!n?.has(S)&&(R||t==="api");g("focusedCell",d)&&this.setFocusedCellState(d),g("cellSelection",u)&&this.setCellSelectionState(u),g("scroll",o)&&this.setScrollState(o),this.setColumnPivotState(!!f?.orderedColIds,t);const v=this.updateCachedState.bind(this);v("sideBar",this.getSideBarState()),v("focusedCell",this.getFocusedCellState());const w=this.getRangeSelectionState();v("rangeSelection",w),v("cellSelection",w),v("scroll",this.getScrollState())}setupStateOnFirstDataRendered(e){this.setFirstDataRenderedState(e,"gridInitializing");const t=this.updateCachedState.bind(this),n=()=>t("focusedCell",this.getFocusedCellState());this.addManagedEventListeners({cellFocused:n,cellFocusCleared:n,cellSelectionChanged:o=>{if(o.finished){const u=this.getRangeSelectionState();t("rangeSelection",u),t("cellSelection",u)}},bodyScrollEnd:()=>t("scroll",this.getScrollState())})}getColumnState(){const e=this.beans;return convertColumnState(_getColumnState(e),e.colModel.isPivotMode())}setColumnState(e,t,n,o){const{sort:u,rowGroup:d,aggregation:f,pivot:g,columnPinning:v,columnVisibility:w,columnSizing:S,columnOrder:R}=e;let _=!1;const F=(de,Ce)=>{const be=!o?.has(de)&&!!(Ce||t==="api");return _||(_=be),be},M={},I=de=>{let Ce=M[de];return Ce||(Ce={colId:de},M[de]=Ce,Ce)},N={},B=F("sort",u);B&&u?.sortModel.forEach(({colId:de,sort:Ce},be)=>{const xe=I(de);xe.sort=Ce,xe.sortIndex=be}),(B||!n)&&(N.sort=null,N.sortIndex=null);const H=F("rowGroup",d);H&&d?.groupColIds.forEach((de,Ce)=>{const be=I(de);be.rowGroup=!0,be.rowGroupIndex=Ce}),(H||!n)&&(N.rowGroup=null,N.rowGroupIndex=null);const U=F("aggregation",f);U&&f?.aggregationModel.forEach(({colId:de,aggFunc:Ce})=>{I(de).aggFunc=Ce}),(U||!n)&&(N.aggFunc=null);const $=F("pivot",g);$&&(g?.pivotColIds.forEach((de,Ce)=>{const be=I(de);be.pivot=!0,be.pivotIndex=Ce}),this.gos.updateGridOptions({options:{pivotMode:!!g?.pivotMode},source:t})),($||!n)&&(N.pivot=null,N.pivotIndex=null);const z=F("columnPinning",v);if(z){for(const de of v?.leftColIds??[])I(de).pinned="left";for(const de of v?.rightColIds??[])I(de).pinned="right"}(z||!n)&&(N.pinned=null);const j=F("columnVisibility",w);if(j)for(const de of w?.hiddenColIds??[])I(de).hide=!0;(j||!n)&&(N.hide=null);const J=F("columnSizing",S);if(J)for(const{colId:de,flex:Ce,width:be}of S?.columnSizingModel??[]){const xe=I(de);xe.flex=Ce??null,xe.width=be}(J||!n)&&(N.flex=null);const ie=R?.orderedColIds,se=!!ie?.length&&!o?.has("columnOrder"),fe=se?ie.map(de=>I(de)):Object.values(M);(fe.length||_)&&(this.columnStates=fe,_applyColumnState(this.beans,{state:fe,applyOrder:se,defaultState:N},t))}setColumnPivotState(e,t){const n=this.columnStates;this.columnStates=void 0;const o=this.columnGroupStates;this.columnGroupStates=void 0;const u=this.beans,{pivotResultCols:d,colGroupSvc:f}=u;if(d?.isPivotResultColsPresent()){if(n){const g=[];for(const v of n)d.getPivotResultCol(v.colId)&&g.push(v);_applyColumnState(u,{state:g,applyOrder:e},t)}o&&f?.setColumnGroupState(o,t)}}getColumnGroupState(){const e=this.beans.colGroupSvc;if(!e)return;const t=e.getColumnGroupState();return _convertColumnGroupState(t)}setColumnGroupState(e,t,n){const o=this.beans.colGroupSvc;if(!o||n?.has("columnGroup")||t!=="api"&&!Object.prototype.hasOwnProperty.call(e,"columnGroup"))return;const u=new Set(e.columnGroup?.openColumnGroupIds),f=o.getColumnGroupState().map(({groupId:g})=>{const v=u.has(g);return v&&u.delete(g),{groupId:g,open:v}});for(const g of u)f.push({groupId:g,open:!0});f.length&&(this.columnGroupStates=f),o.setColumnGroupState(f,t)}getFilterState(){const{filterManager:e,selectableFilter:t}=this.beans;let n=e?.getFilterModel();n&&Object.keys(n).length===0&&(n=void 0);const o=e?.getFilterState(),u=e?.getAdvFilterModel()??void 0,d=t?.getState();return n||u||o||d?{filterModel:n,columnFilterState:o,advancedFilterModel:u,selectableFilters:d}:void 0}setFilterState(e){const{filterManager:t,selectableFilter:n}=this.beans,{filterModel:o,columnFilterState:u,advancedFilterModel:d,selectableFilters:f}=e??{filterModel:null,columnFilterState:null,advancedFilterModel:null};f!==void 0&&n?.setState(f??{}),(o!==void 0||u!==void 0)&&t?.setFilterState(o??null,u??null,"columnFilter"),d!==void 0&&t?.setAdvFilterModel(d??null,"advancedFilter")}getRangeSelectionState(){const e=this.beans.rangeSvc?.getCellRanges().map(t=>{const{id:n,type:o,startRow:u,endRow:d,columns:f,startColumn:g}=t;return{id:n,type:o,startRow:u,endRow:d,colIds:f.map(v=>v.getColId()),startColId:g.getColId()}});return e?.length?{cellRanges:e}:void 0}setCellSelectionState(e){const{gos:t,rangeSvc:n,colModel:o,visibleCols:u}=this.beans;if(!_isCellSelectionEnabled(t)||!n)return;const d=[];for(const f of e?.cellRanges??[]){const g=[];for(const w of f.colIds){const S=o.getCol(w);S&&g.push(S)}if(!g.length)continue;let v=o.getCol(f.startColId);if(!v){const w=u.allCols,S=new Set(g);v=w.find(R=>S.has(R))}d.push({...f,columns:g,startColumn:v})}n.setCellRanges(d)}getScrollState(){if(!this.isClientSideRowModel)return;const e=this.beans.ctrlsSvc.getScrollFeature(),{left:t}=e?.getHScrollPosition()??{left:0},{top:n}=e?.getVScrollPosition()??{top:0};return n||t?{top:n,left:t}:void 0}setScrollState(e){if(!this.isClientSideRowModel)return;const{top:t,left:n}=e??{top:0,left:0},{frameworkOverrides:o,rowRenderer:u,animationFrameSvc:d,ctrlsSvc:f}=this.beans;o.wrapIncoming(()=>{f.get("center").setCenterViewportScrollLeft(n),f.getScrollFeature()?.setVerticalScrollPosition(t),u.redraw({afterScroll:!0}),d?.flushAllFrames()})}getSideBarState(){return this.beans.sideBar?.comp?.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const e=this.beans.focusSvc.getFocusedCell();if(e){const{column:t,rowIndex:n,rowPinned:o}=e;return{colId:t.getColId(),rowIndex:n,rowPinned:o}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;const{focusSvc:t,colModel:n}=this.beans;if(!e){t.clearFocusedCell();return}const{colId:o,rowIndex:u,rowPinned:d}=e;t.setFocusedCell({column:n.getCol(o),rowIndex:u,rowPinned:d,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){const{pagination:e,gos:t}=this.beans;if(!e)return;const n=e.getCurrentPage(),o=t.get("paginationAutoPageSize")?void 0:e.getPageSize();if(!(!n&&!o))return{page:n,pageSize:o}}setPaginationState(e,t){const{pagination:n,gos:o}=this.beans;if(!n)return;const{pageSize:u,page:d}=e??{page:0,pageSize:o.get("paginationPageSize")},f=t==="gridInitializing";u&&!o.get("paginationAutoPageSize")&&n.setPageSize(u,f?"initialState":"pageSizeSelector"),typeof d=="number"&&(f?n.setPage(d):n.goToPage(d))}getRowSelectionState(){const e=this.beans.selectionSvc;if(!e)return;const t=e.getSelectionState();return!t||!Array.isArray(t)&&(t.selectAll===!1||t.selectAllChildren===!1)&&!t?.toggledNodes?.length?void 0:t}setRowSelectionState(e,t){this.beans.selectionSvc?.setSelectionState(e,t,t==="api")}getRowGroupExpansionState(){const{expansionSvc:e}=this.beans;if(e)return e.getExpansionState()}getRowPinningState(){return this.beans.pinnedRowModel?.getPinnedState()}setRowPinningState(e){const t=this.beans.pinnedRowModel;e?t?.setPinnedState(e):t?.reset()}setRowGroupExpansionState(e,t,n){const o=this.beans.expansionSvc;if(!o)return;const u=t??{expandedRowGroupIds:[],collapsedRowGroupIds:[]};o.setExpansionState(u,n)}updateColumnState(e){const t=this.getColumnState();let n=!1;const o=this.cachedState;for(const u of Object.keys(t)){const d=t[u];_jsonEquals(d,o[u])||(n=!0)}this.cachedState={...o,...t},n&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){const n=this.cachedState[e];this.setCachedStateValue(e,t),_jsonEquals(t,n)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState={...this.cachedState,[e]:t}}refreshStaleState(){const e=this.staleStateKeys;for(const t of e)t==="rowSelection"&&this.setCachedStateValue(t,this.getRowSelectionState());e.clear()}dispatchStateUpdateEvent(e){if(!this.suppressEvents){for(const t of e)this.queuedUpdateSources.add(t);this.dispatchStateUpdateEventDebounced()}}dispatchQueuedStateUpdateEvents(){const e=this.queuedUpdateSources,t=Array.from(e);e.clear(),this.eventSvc.dispatchEvent({type:"stateUpdated",sources:t,state:this.cachedState})}startSuppressEvents(){this.suppressEvents=!0,this.beans.colAnimation?.setSuppressAnimation(!0)}stopSuppressEvents(e){setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.beans.colAnimation?.setSuppressAnimation(!1),this.dispatchStateUpdateEvent([e]))})}suppressEventsAndDispatchInitEvent(e){this.startSuppressEvents(),e(),this.stopSuppressEvents("gridInitializing")}},GridStateModule={moduleName:"GridState",version:VERSION,beans:[StateService],apiFunctions:{getState,setState}};function paginationIsLastPageFound(e){return e.rowModel.isLastRowIndexKnown()}function paginationGetPageSize(e){return e.pagination?.getPageSize()??100}function paginationGetCurrentPage(e){return e.pagination?.getCurrentPage()??0}function paginationGetTotalPages(e){return e.pagination?.getTotalPages()??1}function paginationGetRowCount(e){return e.pagination?e.pagination.getMasterRowCount():e.rowModel.getRowCount()}function paginationGoToNextPage(e){e.pagination?.goToNextPage()}function paginationGoToPreviousPage(e){e.pagination?.goToPreviousPage()}function paginationGoToFirstPage(e){e.pagination?.goToFirstPage()}function paginationGoToLastPage(e){e.pagination?.goToLastPage()}function paginationGoToPage(e,t){e.pagination?.goToPage(t)}var PaginationAutoPageSizeService=class extends BeanStub{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeSvc"}postConstruct(){this.beans.ctrlsSvc.whenReady(this,e=>{this.centerRowsCtrl=e.center;const t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.beans.pagination.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const e=this.centerRowsCtrl.viewportSizeFeature.getBodyHeight();if(e>0){const t=this.beans,n=()=>{const o=Math.max(_getRowHeightAsNumber(t),1),u=Math.floor(e/o);t.pagination.setPageSize(u,"autoCalculated")};this.isBodyRendered?_debounce(this,n,50)():(n(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}};function _formatNumberCommas(e,t){if(typeof e!="number")return"";const n=t(),o=n("thousandSeparator",","),u=n("decimalSeparator",".");return e.toString().replace(".",u).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${o}`)}var paginationPageSizeSelector="paginationPageSizeSelector",PageSizeSelectorCompElement={tag:"span",cls:"ag-paging-page-size"},PageSizeSelectorComp=class extends Component{constructor(){super(PageSizeSelectorCompElement),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const e=this.selectPageSizeComp.getValue();if(!e)return;const t=Number(e);isNaN(t)||t<1||t===this.pagination.getPageSize()||(this.pagination.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.pagination=e.pagination}postConstruct(){this.addManagedPropertyListener(paginationPageSizeSelector,()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!e?.newPageSize)return;const t=this.pagination.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&!e&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){_clearElement(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get(paginationPageSizeSelector)!==!1}reloadPageSizesSelector(){const e=this.getPageSizeSelectorValues(),t=this.pagination.getPageSize(),n=!t||!e.includes(t);if(n){const u=this.gos.exists("paginationPageSize"),d=this.gos.get(paginationPageSizeSelector)!==!0;_warn(94,{pageSizeSet:u,pageSizesSet:d,pageSizeOptions:e,paginationPageSizeOption:t}),d||_warn(95,{paginationPageSizeOption:t,paginationPageSizeSelector}),e.unshift("")}const o=String(n?"":t);this.selectPageSizeComp?(_areEqual(this.pageSizeOptions,e)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(e)),this.pageSizeOptions=e),this.selectPageSizeComp.setValue(o,!0)):this.createPageSizeSelectorComp(e,o),this.hasEmptyOption=n}createPageSizeSelectOptions(e){return e.map(t=>({value:String(t)}))}createPageSizeSelectorComp(e,t){const n=this.getLocaleTextFunc(),o=n("pageSizeSelectorLabel","Page Size:"),u=n("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new AgSelect).addOptions(this.createPageSizeSelectOptions(e)).setValue(t).setAriaLabel(u).setLabel(o).onValueChange(()=>this.handlePageSizeItemSelected()),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){const e=[20,50,100],t=this.gos.get(paginationPageSizeSelector);return!Array.isArray(t)||!t?.length?e:[...t].sort((n,o)=>n-o)}destroy(){this.toggleSelectDisplay(!1),super.destroy()}},PageSizeSelectorSelector={selector:"AG-PAGE-SIZE-SELECTOR",component:PageSizeSelectorComp},paginationCompCSS=".ag-paging-panel{align-items:center;border-top:var(--ag-footer-row-border);display:flex;flex-wrap:wrap-reverse;gap:calc(var(--ag-spacing)*4);justify-content:flex-end;min-height:var(--ag-pagination-panel-height);padding:calc(var(--ag-spacing)*.5) var(--ag-cell-horizontal-padding);row-gap:calc(var(--ag-spacing)*.5);@container (width < 600px){justify-content:center}}:where(.ag-paging-page-size) .ag-wrapper{min-width:50px}.ag-paging-page-summary-panel,.ag-paging-row-summary-panel{margin:calc(var(--ag-spacing)*.5)}.ag-paging-page-summary-panel{align-items:center;display:flex;gap:var(--ag-cell-widget-spacing);.ag-disabled &{pointer-events:none}}.ag-paging-button{cursor:pointer;position:relative;&.ag-disabled{cursor:default;opacity:.5}}.ag-paging-number,.ag-paging-row-summary-panel-number{font-weight:500}.ag-paging-description{line-height:0}",PaginationComp=class extends TabGuardComp$1{constructor(){super(),this.btFirst=RefPlaceholder,this.btPrevious=RefPlaceholder,this.btNext=RefPlaceholder,this.btLast=RefPlaceholder,this.lbRecordCount=RefPlaceholder,this.lbFirstRowOnPage=RefPlaceholder,this.lbLastRowOnPage=RefPlaceholder,this.lbCurrent=RefPlaceholder,this.lbTotal=RefPlaceholder,this.pageSizeComp=RefPlaceholder,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1,this.registerCSS(paginationCompCSS)}wireBeans(e){this.rowModel=e.rowModel,this.pagination=e.pagination,this.ariaAnnounce=e.ariaAnnounce}postConstruct(){const e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[PageSizeSelectorSelector]);const{btFirst:t,btPrevious:n,btNext:o,btLast:u}=this;this.activateTabIndex([t,n,o,u]),t.insertAdjacentElement("afterbegin",_createIconNoSpan(e?"last":"first",this.beans)),n.insertAdjacentElement("afterbegin",_createIconNoSpan(e?"next":"previous",this.beans)),o.insertAdjacentElement("afterbegin",_createIconNoSpan(e?"previous":"next",this.beans)),u.insertAdjacentElement("afterbegin",_createIconNoSpan(e?"first":"last",this.beans)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:d=>this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(d):_focusGridInnerElement(this.beans,d),forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){const t=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){if(!this.areListenersSetup){this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)});for(const e of[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}]){const{el:t,fn:n}=e;this.addManagedListeners(t,{click:n,keydown:o=>{(o.key===KeyCode.ENTER||o.key===KeyCode.SPACE)&&(o.preventDefault(),n())}})}_addFocusableContainerListener(this.beans,this,this.getGui()),this.areListenersSetup=!0}}onBtFirst(){this.previousAndFirstButtonsDisabled||this.pagination.goToFirstPage()}formatNumber(e){const t=this.gos.getCallback("paginationNumberFormatter");return t?t({value:e}):_formatNumberCommas(e,this.getLocaleTextFunc.bind(this))}getTemplate(){const e=this.getLocaleTextFunc(),t=`ag-${this.getCompId()}`;return{tag:"div",cls:"ag-paging-panel ag-unselectable",attrs:{id:`${t}`},children:[{tag:"ag-page-size-selector",ref:"pageSizeComp"},{tag:"span",cls:"ag-paging-row-summary-panel",children:[{tag:"span",ref:"lbFirstRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-first-row`}},{tag:"span",attrs:{id:`${t}-to`},children:e("to","to")},{tag:"span",ref:"lbLastRowOnPage",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-last-row`}},{tag:"span",attrs:{id:`${t}-of`},children:e("of","of")},{tag:"span",ref:"lbRecordCount",cls:"ag-paging-row-summary-panel-number",attrs:{id:`${t}-row-count`}}]},{tag:"span",cls:"ag-paging-page-summary-panel",role:"presentation",children:[{tag:"div",ref:"btFirst",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("firstPage","First Page")}},{tag:"div",ref:"btPrevious",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("previousPage","Previous Page")}},{tag:"span",cls:"ag-paging-description",children:[{tag:"span",attrs:{id:`${t}-start-page`},children:e("page","Page")},{tag:"span",ref:"lbCurrent",cls:"ag-paging-number",attrs:{id:`${t}-start-page-number`}},{tag:"span",attrs:{id:`${t}-of-page`},children:e("of","of")},{tag:"span",ref:"lbTotal",cls:"ag-paging-number",attrs:{id:`${t}-of-page-number`}}]},{tag:"div",ref:"btNext",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("nextPage","Next Page")}},{tag:"div",ref:"btLast",cls:"ag-button ag-paging-button",role:"button",attrs:{"aria-label":e("lastPage","Last Page")}}]}]}}onBtNext(){this.nextButtonDisabled||this.pagination.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.pagination.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.pagination.goToLastPage()}enableOrDisableButtons(){const e=this.pagination.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),n=this.pagination.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const o=this.isZeroPagesToDisplay(),u=e===n-1;this.nextButtonDisabled=u||o,this.lastButtonDisabled=!t||o||e===n-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){_setAriaDisabled(e,t),e.classList.toggle("ag-disabled",t)}isZeroPagesToDisplay(){const e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages();return e&&t===0}updateLabels(){const e=this.rowModel.isLastRowIndexKnown(),t=this.pagination.getTotalPages(),n=this.pagination.getMasterRowCount(),o=e?n:null,u=this.pagination.getCurrentPage(),d=this.pagination.getPageSize();let f,g;this.isZeroPagesToDisplay()?f=g=0:(f=d*u+1,g=f+d-1,e&&g>o&&(g=o));const v=f+d-1,w=!e&&n<v,S=this.formatNumber(f);this.lbFirstRowOnPage.textContent=S;let R;const _=this.getLocaleTextFunc();w?R=_("pageLastRowUnknown","?"):R=this.formatNumber(g),this.lbLastRowOnPage.textContent=R;const M=t>0?u+1:0,I=this.formatNumber(M);this.lbCurrent.textContent=I;let N,B;if(e)N=this.formatNumber(t),B=this.formatNumber(o);else{const H=_("more","more");N=H,B=H}this.lbTotal.textContent=N,this.lbRecordCount.textContent=B,this.announceAriaStatus(S,R,B,I,N)}announceAriaStatus(e,t,n,o,u){const d=this.getLocaleTextFunc(),f=d("page","Page"),g=d("to","to"),v=d("of","of"),w=`${e} ${g} ${t} ${v} ${n}`,S=`${f} ${o} ${v} ${u}`;w!==this.ariaRowStatus&&(this.ariaRowStatus=w,this.ariaAnnounce?.announceValue(w,"paginationRow")),S!==this.ariaPageStatus&&(this.ariaPageStatus=S,this.ariaAnnounce?.announceValue(S,"paginationPage"))}},PaginationSelector={selector:"AG-PAGINATION",component:PaginationComp},DEFAULT_PAGE_SIZE=100,PaginationService=class extends BeanStub{constructor(){super(...arguments),this.beanName="pagination",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}postConstruct(){const e=this.gos;this.active=e.get("pagination"),this.pageSizeFromGridOptions=e.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return PaginationSelector}isPaginateChildRows(){const e=this.gos;return e.get("groupHideParentOfSingleChild")||e.get("groupRemoveSingleChildren")||e.get("groupRemoveLowestSingleChildren")?!0:e.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){const t=this.currentPage;if(!this.active||t===e||typeof t!="number")return;const{editSvc:n}=this.beans;n?.isEditing()&&(n.isBatchEditing()?n.cleanupEditors():n.stopEditing(void 0,{source:"api"})),this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0})}goToPageWithIndex(e){if(!this.active)return;let t=e;this.paginateChildRows||(t=this.beans.rowModel.getTopLevelIndexFromDisplayedIndex?.(e)??e),this.goToPage(Math.floor(t/this.pageSize))}isRowInPage(e){return this.active?e>=this.topDisplayedRowIndex&&e<=this.bottomDisplayedRowIndex:!0}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.beans.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return _exists(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:_exists(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:_exists(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:_exists(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:DEFAULT_PAGE_SIZE}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.beans.pageBounds.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;const e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){const n=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}n!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){const e=this.totalPages;this.currentPage>=e&&(this.currentPage=e-1);const t=this.currentPage;(!isFinite(t)||isNaN(t)||t<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){const e=this.beans.rowModel,t=e.getTopLevelRowCount();if(this.masterRowCount=t,t<=0){this.setZeroRows();return}const n=this.pageSize,o=t-1;this.totalPages=Math.floor(o/n)+1,this.adjustCurrentPageIfInvalid();const u=this.currentPage,d=n*u;let f=n*(u+1)-1;if(f>o&&(f=o),this.topDisplayedRowIndex=e.getTopLevelRowDisplayedIndex(d),f===o)this.bottomDisplayedRowIndex=e.getRowCount()-1;else{const g=e.getTopLevelRowDisplayedIndex(f+1);this.bottomDisplayedRowIndex=g-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){const e=this.beans.rowModel.getRowCount();if(this.masterRowCount=e,e===0){this.setZeroRows();return}const{pageSize:t,currentPage:n}=this,o=e-1;this.totalPages=Math.floor(o/t)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=t*n,this.bottomDisplayedRowIndex=t*(n+1)-1,this.bottomDisplayedRowIndex>o&&(this.bottomDisplayedRowIndex=o)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.beans.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){const{keepRenderedRows:t=!1,newPage:n=!1,newPageSize:o=!1}=e;this.eventSvc.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:n,newPageSize:o,keepRenderedRows:t})}},PaginationModule={moduleName:"Pagination",version:VERSION,beans:[PaginationService,PaginationAutoPageSizeService],icons:{first:"first",previous:"previous",next:"next",last:"last"},apiFunctions:{paginationIsLastPageFound,paginationGetPageSize,paginationGetCurrentPage,paginationGetTotalPages,paginationGetRowCount,paginationGoToNextPage,paginationGoToPreviousPage,paginationGoToFirstPage,paginationGoToLastPage,paginationGoToPage},dependsOn:[PopupModule]},manualPinnedRowCSS=".ag-row-pinned-source{background-color:var(--ag-pinned-source-row-background-color);color:var(--ag-pinned-source-row-text-color);font-weight:var(--ag-pinned-source-row-font-weight)}.ag-row-pinned-manual{background-color:var(--ag-pinned-row-background-color);color:var(--ag-pinned-row-text-color);font-weight:var(--ag-pinned-row-font-weight)}";function getPinnedTopRowCount(e){return e.pinnedRowModel?.getPinnedTopRowCount()??0}function getPinnedBottomRowCount(e){return e.pinnedRowModel?.getPinnedBottomRowCount()??0}function getPinnedTopRow(e,t){return e.pinnedRowModel?.getPinnedTopRow(t)}function getPinnedBottomRow(e,t){return e.pinnedRowModel?.getPinnedBottomRow(t)}function forEachPinnedRow(e,t,n){return e.pinnedRowModel?.forEachPinnedRow(t,n)}var PinnedRowModule={moduleName:"PinnedRow",version:VERSION,beans:[PinnedRowModel],css:[manualPinnedRowCSS],apiFunctions:{getPinnedTopRowCount,getPinnedBottomRowCount,getPinnedTopRow,getPinnedBottomRow,forEachPinnedRow},icons:{rowPin:"pin",rowPinTop:"pinned-top",rowPinBottom:"pinned-bottom",rowUnpin:"un-pin"}},ARROW_UP="",ARROW_DOWN="",AnimateShowChangeCellRendererElement={tag:"span",children:[{tag:"span",ref:"eDelta",cls:"ag-value-change-delta"},{tag:"span",ref:"eValue",cls:"ag-value-change-value"}]},AnimateShowChangeCellRenderer=class extends Component{constructor(){super(AnimateShowChangeCellRendererElement),this.eValue=RefPlaceholder,this.eDelta=RefPlaceholder,this.refreshCount=0}init(e){this.refresh(e,!0)}showDelta(e,t){const n=Math.abs(t),o=e.formatValue(n),u=_exists(o)?o:n,d=t>=0,f=this.eDelta;d?f.textContent=ARROW_UP+u:f.textContent=ARROW_DOWN+u,f.classList.toggle("ag-value-change-delta-up",d),f.classList.toggle("ag-value-change-delta-down",!d)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),_clearElement(this.eDelta)}refresh(e,t=!1){const{value:n,valueFormatted:o}=e,{eValue:u,lastValue:d,beans:f}=this;if(n===d||(_exists(o)?u.textContent=o:_exists(n)?u.textContent=n:_clearElement(u),f.filterManager?.isSuppressFlashingCellsBecauseFiltering()))return!1;const g=n&&typeof n=="object"&&"toNumber"in n?n.toNumber():n,v=d&&typeof d=="object"&&"toNumber"in d?d.toNumber():d;if(g===v)return!1;if(typeof g=="number"&&typeof v=="number"){const w=g-v;this.showDelta(e,w)}return d&&u.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=n,!0}},animateSlideCellRendererCSS=".ag-value-slide-out{opacity:1}:where(.ag-ltr) .ag-value-slide-out{margin-right:5px;transition:opacity 3s,margin-right 3s}:where(.ag-rtl) .ag-value-slide-out{margin-left:5px;transition:opacity 3s,margin-left 3s}:where(.ag-ltr,.ag-rtl) .ag-value-slide-out{transition-timing-function:linear}.ag-value-slide-out-end{opacity:0}:where(.ag-ltr) .ag-value-slide-out-end{margin-right:10px}:where(.ag-rtl) .ag-value-slide-out-end{margin-left:10px}",AnimateSlideCellRendererElement={tag:"span",children:[{tag:"span",ref:"eCurrent",cls:"ag-value-slide-current"}]},AnimateSlideCellRenderer=class extends Component{constructor(){super(AnimateSlideCellRendererElement),this.eCurrent=RefPlaceholder,this.refreshCount=0,this.registerCSS(animateSlideCellRendererCSS)}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;const e=this.refreshCount;this.ePrevious?.remove();const{beans:t,eCurrent:n}=this,o=_createElement({tag:"span",cls:"ag-value-slide-previous ag-value-slide-out"});this.ePrevious=o,o.textContent=n.textContent,this.getGui().insertBefore(o,n),t.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.ePrevious?.remove(),this.ePrevious=null)},3e3)})}refresh(e,t=!1){let n=e.value;if(_missing(n)&&(n=""),n===this.lastValue||this.beans.filterManager?.isSuppressFlashingCellsBecauseFiltering())return!1;t||this.addSlideAnimation(),this.lastValue=n;const o=this.eCurrent;return _exists(e.valueFormatted)?o.textContent=e.valueFormatted:_exists(e.value)?o.textContent=n:_clearElement(o),!0}},CellFlashService=class extends BeanStub{constructor(){super(...arguments),this.beanName="cellFlashSvc",this.nextAnimationTime=null,this.nextAnimationCycle=null,this.animations={highlight:new Map,"data-changed":new Map}}animateCell(e,t,n=this.beans.gos.get("cellFlashDuration"),o=this.beans.gos.get("cellFadeDuration")){const u=this.animations[t];u.delete(e);const d=Date.now(),f=d+n,g=d+n+o,v={phase:"flash",flashEndTime:f,fadeEndTime:g};u.set(e,v);const w=`ag-cell-${t}`,S=`${w}-animation`,{comp:R,eGui:{style:_}}=e;R.toggleCss(w,!0),R.toggleCss(S,!1),_.removeProperty("transition"),_.removeProperty("transition-delay"),this.nextAnimationTime&&f+15<this.nextAnimationTime&&(clearTimeout(this.nextAnimationCycle),this.nextAnimationCycle=null,this.nextAnimationTime=null),this.nextAnimationCycle||(this.beans.frameworkOverrides.wrapIncoming(()=>{this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),n)}),this.nextAnimationTime=f)}advanceAnimations(){const e=Date.now();let t=null;for(const n of Object.keys(this.animations)){const o=this.animations[n],u=`ag-cell-${n}`,d=`${u}-animation`;for(const[f,g]of o){if(!f.isAlive()||!f.comp){o.delete(f);continue}const{phase:v,flashEndTime:w,fadeEndTime:S}=g,R=v==="flash"?w:S;if(!(e+15>=R)){t=Math.min(R,t??1/0);continue}const{comp:F,eGui:{style:M}}=f;switch(v){case"flash":F.toggleCss(u,!1),F.toggleCss(d,!0),M.transition=`background-color ${S-w}ms`,M.transitionDelay=`${w-e}ms`,t=Math.min(S,t??1/0),g.phase="fade";break;case"fade":F.toggleCss(u,!1),F.toggleCss(d,!1),M.removeProperty("transition"),M.removeProperty("transition-delay"),o.delete(f);break}}}t==null?(this.nextAnimationTime=null,this.nextAnimationCycle=null):t&&(this.nextAnimationCycle=setTimeout(this.advanceAnimations.bind(this),t-e),this.nextAnimationTime=t)}onFlashCells(e,t){if(!e.comp)return;const n=_createCellId(e.cellPosition);t.cells[n]&&this.animateCell(e,"highlight")}flashCell(e,t){this.animateCell(e,"data-changed",t?.flashDuration,t?.fadeDuration)}destroy(){for(const e of Object.keys(this.animations))this.animations[e].clear()}};function flashCells(e,t={}){const{cellFlashSvc:n}=e;n&&e.frameworkOverrides.wrapIncoming(()=>{for(const o of e.rowRenderer.getCellCtrls(t.rowNodes,t.columns))n.flashCell(o,t)})}var HighlightChangesModule={moduleName:"HighlightChanges",version:VERSION,beans:[CellFlashService],userComponents:{agAnimateShowChangeCellRenderer:AnimateShowChangeCellRenderer,agAnimateSlideCellRenderer:AnimateSlideCellRenderer},apiFunctions:{flashCells}};function setGridAriaProperty(e,t,n){if(!t)return;const o=e.ctrlsSvc.getGridBodyCtrl().eGridBody,u=`aria-${t}`;n===null?o.removeAttribute(u):o.setAttribute(u,n)}function refreshCells(e,t={}){e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.refreshCells(t))}function refreshHeader(e){e.frameworkOverrides.wrapIncoming(()=>{for(const t of e.ctrlsSvc.getHeaderRowContainerCtrls())t.refresh()})}function isAnimationFrameQueueEmpty(e){return e.animationFrameSvc?.isQueueEmpty()??!0}function flushAllAnimationFrames(e){e.animationFrameSvc?.flushAllFrames()}function getSizesForCurrentTheme(e){return{rowHeight:_getRowHeightAsNumber(e),headerHeight:getHeaderHeight(e)}}function getCellRendererInstances(e,t={}){const n=[];for(const d of e.rowRenderer.getCellCtrls(t.rowNodes,t.columns)){const f=d.getCellRenderer();f!=null&&n.push(_unwrapUserComp(f))}if(t.columns?.length)return n;const o=[],u=mapRowNodes(t.rowNodes);for(const d of e.rowRenderer.getAllRowCtrls()){if(u&&!isRowInMap(d.rowNode,u)||!d.isFullWidth())continue;const f=d.getFullWidthCellRenderers();for(let g=0;g<f.length;g++){const v=f[g];v!=null&&o.push(_unwrapUserComp(v))}}return[...o,...n]}var RenderApiModule={moduleName:"RenderApi",version:VERSION,apiFunctions:{setGridAriaProperty,refreshCells,refreshHeader,isAnimationFrameQueueEmpty,flushAllAnimationFrames,getSizesForCurrentTheme,getCellRendererInstances}},RowAutoHeightService=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowAutoHeight",this.wasEverActive=!1,this._debouncedCalculateRowHeights=_debounce(this,this.calculateRowHeights.bind(this),1)}requestCheckAutoHeight(){this.wasEverActive&&this._debouncedCalculateRowHeights()}calculateRowHeights(){const{visibleCols:e,rowModel:t,rowSpanSvc:n,pinnedRowModel:o}=this.beans,u=e.autoHeightCols;let d=!1;const f=g=>{const v=g.__autoHeights;let w=_getRowHeightForNode(this.beans,g).height;for(const S of u){let R=v?.[S.getColId()];const _=n?.getCellSpan(S,g);if(_){if(_.getLastNode()!==g)continue;if(R=n?.getCellSpan(S,g)?.getLastNodeAutoHeight(),!R)return}if(R==null){if(this.colSpanSkipCell(S,g))continue;return}w=Math.max(R,w)}w!==g.rowHeight&&(g.setRowHeight(w),d=!0)};o?.forEachPinnedRow?.("top",f),o?.forEachPinnedRow?.("bottom",f),t.forEachDisplayedNode?.(f),d&&t.onRowHeightChanged?.()}setRowAutoHeight(e,t,n){if(e.__autoHeights??(e.__autoHeights={}),t==null){delete e.__autoHeights[n.getId()];return}const o=e.__autoHeights[n.getId()];e.__autoHeights[n.getId()]=t,o!==t&&this.requestCheckAutoHeight()}colSpanSkipCell(e,t){const{colModel:n,colViewport:o,visibleCols:u}=this.beans;if(!n.colSpanActive)return!1;let d=[];switch(e.getPinned()){case"left":d=u.getLeftColsForRow(t);break;case"right":d=u.getRightColsForRow(t);break;case null:d=o.getColsWithinViewport(t);break}return!d.includes(e)}setupCellAutoHeight(e,t,n){if(!e.column.isAutoHeight()||!t)return!1;this.wasEverActive=!0;const o=t.parentElement,{rowNode:u,column:d}=e,f=this.beans,g=S=>{if(this.beans.editSvc?.isEditing(e)||!e.isAlive()||!n.isAlive())return;const{paddingTop:R,paddingBottom:_,borderBottomWidth:F,borderTopWidth:M}=_getElementSize(o),I=R+_+F+M,B=t.offsetHeight+I;if(S<5){const U=!_getDocument(f)?.contains(t),$=B==0;if(U||$){window.setTimeout(()=>g(S+1),0);return}}this.setRowAutoHeight(u,B,d)},v=()=>g(0);v();const w=_observeResize(f,t,v);return n.addDestroyFunc(()=>{w(),this.setRowAutoHeight(u,void 0,d)}),!0}setAutoHeightActive(e){this.active=e.list.some(t=>t.isVisible()&&t.isAutoHeight())}areRowsMeasured(){if(!this.active)return!0;const e=this.beans.rowRenderer.getAllRowCtrls();let t=null;for(const{rowNode:n}of e)if((!t||this.beans.colModel.colSpanActive)&&(t=this.beans.colViewport.getColsWithinViewport(n).filter(u=>u.isAutoHeight())),t.length!==0){if(!n.__autoHeights)return!1;for(const o of t){const u=n.__autoHeights[o.getColId()];if(!u||n.rowHeight<u)return!1}}return!0}},RowAutoHeightModule={moduleName:"RowAutoHeight",version:VERSION,beans:[RowAutoHeightService]},CellSpan=class{constructor(e,t){this.col=e,this.firstNode=t,this.cellSpan=!0,this.spannedNodes=new Set,this.addSpannedNode(t)}reset(){this.spannedNodes.clear(),this.addSpannedNode(this.firstNode)}addSpannedNode(e){this.spannedNodes.add(e),this.lastNode=e}getLastNode(){return this.lastNode}getCellHeight(){return this.lastNode.rowTop+this.lastNode.rowHeight-this.firstNode.rowTop-1}doesSpanContain(e){return e.column!==this.col||e.rowPinned!=this.firstNode.rowPinned?!1:this.firstNode.rowIndex<=e.rowIndex&&e.rowIndex<=this.lastNode.rowIndex}getLastNodeAutoHeight(){const e=this.firstNode.__autoHeights?.[this.col.getColId()];if(e==null)return;let t=0;for(const n of this.spannedNodes)n!==this.lastNode&&(t+=n.rowHeight);return e-t}},RowSpanCache=class extends BeanStub{constructor(e){super(),this.column=e}buildCache(e){const{column:t,beans:{gos:n,pinnedRowModel:o,rowModel:u,valueSvc:d,pagination:f}}=this,{colDef:g}=t,v=this.getNodeMap(e),w=new Map,S=n.getCallback("isFullWidthRow"),R=g.equals,_=g.spanRows,F=typeof _=="function";let M=null,I=null,N;const B=(U,$)=>{M=U,I=null,N=$},H=U=>{const $=!U.isExpandable()&&!U.group&&!U.detail&&(S?!S({rowNode:U}):!0);if(U.rowIndex==null||!$){B(null,null);return}if(M==null||U.level!==M.level||U.footer||I&&U.rowIndex-1!==I?.getLastNode().rowIndex){B(U,d.getValue(t,U,"data"));return}const z=d.getValue(t,U,"data");if(F){const j=_addGridCommonParams(n,{valueA:N,nodeA:M,valueB:z,nodeB:U,column:t,colDef:g});if(!_(j)){B(U,z);return}}else if(R?!R(N,z):N!==z){B(U,z);return}if(!I){const j=v?.get(M);j?.firstNode===M?(j.reset(),I=j):I=new CellSpan(t,M),w.set(M,I)}I.addSpannedNode(U),w.set(U,I)};switch(e){case"center":u.forEachDisplayedNode?.(U=>{(!f||f.isRowInPage(U.rowIndex))&&H(U)}),this.centerValueNodeMap=w;break;case"top":o?.forEachPinnedRow("top",H),this.topValueNodeMap=w;break;case"bottom":o?.forEachPinnedRow("bottom",H),this.bottomValueNodeMap=w;break}}isCellSpanning(e){return!!this.getCellSpan(e)}getCellSpan(e){return this.getNodeMap(e.rowPinned).get(e)}getNodeMap(e){switch(e){case"top":return this.topValueNodeMap;case"bottom":return this.bottomValueNodeMap;default:return this.centerValueNodeMap}}},RowSpanService=class extends BeanStub{constructor(){super(...arguments),this.beanName="rowSpanSvc",this.spanningColumns=new Map,this.debouncePinnedEvent=_debounce(this,this.dispatchCellsUpdatedEvent.bind(this,!0),0),this.debounceModelEvent=_debounce(this,this.dispatchCellsUpdatedEvent.bind(this,!1),0),this.pinnedTimeout=null,this.modelTimeout=null}postConstruct(){const e=this.onRowDataUpdated.bind(this),t=this.buildPinnedCaches.bind(this);this.addManagedEventListeners({paginationChanged:this.buildModelCaches.bind(this),pinnedRowDataChanged:t,pinnedRowsChanged:t,rowNodeDataChanged:e,cellValueChanged:e})}register(e){const{gos:t}=this.beans;if(!t.get("enableCellSpan")||this.spanningColumns.has(e))return;const n=this.createManagedBean(new RowSpanCache(e));this.spanningColumns.set(e,n),n.buildCache("top"),n.buildCache("bottom"),n.buildCache("center"),this.debouncePinnedEvent(),this.debounceModelEvent()}dispatchCellsUpdatedEvent(e){this.dispatchLocalEvent({type:"spannedCellsUpdated",pinned:e})}deregister(e){this.spanningColumns.delete(e)}onRowDataUpdated({node:e}){const{spannedRowRenderer:t}=this.beans;if(e.rowPinned){if(this.pinnedTimeout!=null)return;this.pinnedTimeout=window.setTimeout(()=>{this.pinnedTimeout=null,this.buildPinnedCaches(),t?.createCtrls("top"),t?.createCtrls("bottom")},0);return}this.modelTimeout==null&&(this.modelTimeout=window.setTimeout(()=>{this.modelTimeout=null,this.buildModelCaches(),t?.createCtrls("center")},0))}buildModelCaches(){this.modelTimeout!=null&&clearTimeout(this.modelTimeout),this.spanningColumns.forEach(e=>e.buildCache("center")),this.debounceModelEvent()}buildPinnedCaches(){this.pinnedTimeout!=null&&clearTimeout(this.pinnedTimeout),this.spanningColumns.forEach(e=>{e.buildCache("top"),e.buildCache("bottom")}),this.debouncePinnedEvent()}isCellSpanning(e,t){const n=this.spanningColumns.get(e);return n?n.isCellSpanning(t):!1}getCellSpanByPosition(e){const{pinnedRowModel:t,rowModel:n}=this.beans,o=e.column,u=e.rowIndex,d=this.spanningColumns.get(o);if(!d)return;let f;switch(e.rowPinned){case"top":f=t?.getPinnedTopRow(u);break;case"bottom":f=t?.getPinnedBottomRow(u);break;default:f=n.getRow(u)}if(f)return d.getCellSpan(f)}getCellStart(e){const t=this.getCellSpanByPosition(e);return t?{...e,rowIndex:t.firstNode.rowIndex}:e}getCellEnd(e){const t=this.getCellSpanByPosition(e);return t?{...e,rowIndex:t.getLastNode().rowIndex}:e}getCellSpan(e,t){const n=this.spanningColumns.get(e);if(n)return n.getCellSpan(t)}forEachSpannedColumn(e,t){for(const[n,o]of this.spanningColumns)if(o.isCellSpanning(e)){const u=o.getCellSpan(e);t(n,u)}}destroy(){super.destroy(),this.spanningColumns.clear()}},SpannedCellCtrl=class extends CellCtrl{constructor(e,t,n){super(e.col,e.firstNode,n,t),this.cellSpan=e,this.SPANNED_CELL_CSS_CLASS="ag-spanned-cell"}setComp(e,t,n,o,u,d,f){this.eWrapper=n,super.setComp(e,t,n,o,u,d,f),this.setAriaRowSpan(),this.refreshAriaRowIndex()}isCellSpanning(){return!0}getCellSpan(){return this.cellSpan}refreshAriaRowIndex(){const{eGui:e,rowNode:t}=this;!e||t.rowIndex==null||_setAriaRowIndex(e,t.rowIndex)}setAriaRowSpan(){_setAriaRowSpan(this.eGui,this.cellSpan.spannedNodes.size)}setFocusedCellPosition(e){this.focusedCellPosition=e}getFocusedCellPosition(){return this.focusedCellPosition??this.cellPosition}checkCellFocused(){const e=this.beans.focusSvc.getFocusedCell();return!!e&&this.cellSpan.doesSpanContain(e)}applyStaticCssClasses(){super.applyStaticCssClasses(),this.comp.toggleCss(this.SPANNED_CELL_CSS_CLASS,!0)}onCellFocused(e){const{beans:t}=this;if(_isCellFocusSuppressed(t)){this.focusedCellPosition=void 0;return}const n=this.isCellFocused();n||(this.focusedCellPosition=void 0),e&&n&&(this.focusedCellPosition={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column}),super.onCellFocused(e)}getRootElement(){return this.eWrapper}},SpannedRowCtrl=class extends RowCtrl{onRowIndexChanged(){super.onRowIndexChanged();for(const e of this.getAllCellCtrls())e.refreshAriaRowIndex()}getInitialRowClasses(e){return["ag-spanned-row"]}getNewCellCtrl(e){const t=this.beans.rowSpanSvc?.getCellSpan(e,this.rowNode);if(!(!t||t.firstNode!==this.rowNode))return new SpannedCellCtrl(t,this,this.beans)}isCorrectCtrlForSpan(e){const t=this.beans.rowSpanSvc?.getCellSpan(e.column,this.rowNode);return!t||t.firstNode!==this.rowNode?!1:e.getCellSpan()===t}onRowHeightChanged(){}refreshFirstAndLastRowStyles(){}addHoverFunctionality(){}resetHoveredStatus(){}},SpannedRowRenderer=class extends BeanStub{constructor(){super(...arguments),this.beanName="spannedRowRenderer",this.topCtrls=new Map,this.bottomCtrls=new Map,this.centerCtrls=new Map}postConstruct(){this.addManagedEventListeners({displayedRowsChanged:this.createAllCtrls.bind(this)})}createAllCtrls(){this.createCtrls("top"),this.createCtrls("bottom"),this.createCtrls("center")}createCtrls(e){const{rowSpanSvc:t}=this.beans,n=this.getCtrlsMap(e),o=n.size,u=this.getAllRelevantRowControls(e),d=new Map;let f=!1;for(const v of u)v.isAlive()&&t?.forEachSpannedColumn(v.rowNode,(w,S)=>{if(d.has(S.firstNode))return;const R=n.get(S.firstNode);if(R){d.set(S.firstNode,R),n.delete(S.firstNode);return}f=!0;const _=new SpannedRowCtrl(S.firstNode,this.beans,!1,!1,!1);d.set(S.firstNode,_)});this.setCtrlsMap(e,d);const g=d.size===o;if(!(!f&&g)){for(const v of n.values())v.destroyFirstPass(!0),v.destroySecondPass();this.dispatchLocalEvent({type:"spannedRowsUpdated",ctrlsKey:e})}}getAllRelevantRowControls(e){const{rowRenderer:t}=this.beans;switch(e){case"top":return t.topRowCtrls;case"bottom":return t.bottomRowCtrls;case"center":return t.allRowCtrls}}getCellByPosition(e){const{rowSpanSvc:t}=this.beans,n=t?.getCellSpanByPosition(e);if(!n)return;const o=this.getCtrlsMap(e.rowPinned).get(n.firstNode);if(o)return o.getAllCellCtrls().find(u=>u.column===e.column)}getCtrls(e){return[...this.getCtrlsMap(e).values()]}destroyRowCtrls(e){for(const t of this.getCtrlsMap(e).values())t.destroyFirstPass(!0),t.destroySecondPass();this.setCtrlsMap(e,new Map)}getCtrlsMap(e){switch(e){case"top":return this.topCtrls;case"bottom":return this.bottomCtrls;default:return this.centerCtrls}}setCtrlsMap(e,t){switch(e){case"top":this.topCtrls=t;break;case"bottom":this.bottomCtrls=t;break;default:this.centerCtrls=t;break}}destroy(){super.destroy(),this.destroyRowCtrls("top"),this.destroyRowCtrls("bottom"),this.destroyRowCtrls("center")}},CellSpanModule={moduleName:"CellSpan",version:VERSION,beans:[RowSpanService,SpannedRowRenderer]},SelectionColService=class extends BeanStub{constructor(){super(...arguments),this.beanName="selectionColSvc"}postConstruct(){this.addManagedPropertyListener("rowSelection",e=>{this.onSelectionOptionsChanged(e.currentValue,e.previousValue,_convertColumnEventSourceType(e.source))}),this.addManagedPropertyListener("selectionColumnDef",this.updateColumns.bind(this))}addColumns(e){const t=this.columns;t!=null&&(e.list=t.list.concat(e.list),e.tree=t.tree.concat(e.tree),_updateColsMap(e))}createColumns(e,t){const n=()=>{_destroyColumnTree(this.beans,this.columns?.tree),this.columns=null},o=e.treeDepth,d=(this.columns?.treeDepth??-1)==o,f=this.generateSelectionCols();if(_areColIdsEqual(f,this.columns?.list??[])&&d)return;n();const{colGroupSvc:v}=this.beans,w=v?.findDepth(e.tree)??0,S=v?.balanceTreeForAutoCols(f,w)??[];this.columns={list:f,tree:S,treeDepth:w,map:{}},t(_=>{if(!_)return null;const F=_.filter(M=>!isColumnSelectionCol(M));return[...f,...F]})}updateColumns(e){const t=_convertColumnEventSourceType(e.source),{beans:n}=this;for(const o of this.columns?.list??[]){const u=this.createSelectionColDef(e.currentValue);o.setColDef(u,null,t),_applyColumnState(n,{state:[_getColumnStateFromColDef(u,o.colId)]},t)}}getColumn(e){return this.columns?.list.find(t=>_columnsMatch(t,e))??null}getColumns(){return this.columns?.list??null}isSelectionColumnEnabled(){const{gos:e,beans:t}=this,n=e.get("rowSelection");if(typeof n!="object"||!_isRowSelection(e))return!1;const o=(t.autoColSvc?.getColumns()?.length??0)>0;if(n.checkboxLocation==="autoGroupColumn"&&o)return!1;const u=!!_getCheckboxes(n),d=_getHeaderCheckbox(n);return u||d}createSelectionColDef(e){const{gos:t}=this,n=e??t.get("selectionColumnDef"),o=t.get("enableRtl"),{rowSpan:u,spanRows:d,...f}=n??{};return{width:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:o?"right":"left",comparator(g,v,w,S){const R=w.isSelected(),_=S.isSelected();return R===_?0:R?1:-1},editable:!1,suppressFillHandle:!0,suppressAutoSize:!0,pinned:null,...f,colId:SELECTION_COLUMN_ID,chartDataType:"excluded"}}generateSelectionCols(){if(!this.isSelectionColumnEnabled())return[];const e=this.createSelectionColDef(),t=e.colId;this.gos.validateColDef(e,t,!0);const n=new AgColumn(e,null,t,!1);return this.createBean(n),[n]}onSelectionOptionsChanged(e,t,n){const o=t&&typeof t!="string"?_getCheckboxes(t):void 0,u=e&&typeof e!="string"?_getCheckboxes(e):void 0,d=o!==u,f=t&&typeof t!="string"?_getHeaderCheckbox(t):void 0,g=e&&typeof e!="string"?_getHeaderCheckbox(e):void 0,v=f!==g,w=_getCheckboxLocation(e),S=_getCheckboxLocation(t);(d||v||w!==S)&&this.beans.colModel.refreshAll(n)}destroy(){_destroyColumnTree(this.beans,this.columns?.tree),super.destroy()}refreshVisibility(e,t,n){if(!this.columns?.list.length)return;const o=e.length+t.length+n.length;if(o===0)return;const u=this.columns.list[0];if(!u.isVisible())return;const d=()=>{let v;switch(u.pinned){case"left":case!0:v=e;break;case"right":v=n;break;default:v=t}v&&_removeFromArray(v,u)};(this.beans.rowNumbersSvc?.getColumn(ROW_NUMBERS_COLUMN_ID)?2:1)===o&&d()}},rowSelectionCSS=':where(.ag-selection-checkbox) .ag-checkbox-input-wrapper:before{content:"";cursor:pointer;inset:-8px;position:absolute}';function setNodesSelected(e,t){if(!t.nodes.every(f=>f.rowPinned&&!_isManualPinnedRow(f)?(_warn(59),!1):f.id===void 0?(_warn(60),!1):!0))return;const{nodes:o,source:u,newValue:d}=t;e.selectionSvc?.setNodesSelected({nodes:o,source:u??"api",newValue:d})}function selectAll(e,t,n="apiSelectAll"){e.selectionSvc?.selectAllRowNodes({source:n,selectAll:t})}function deselectAll(e,t,n="apiSelectAll"){e.selectionSvc?.deselectAllRowNodes({source:n,selectAll:t})}function selectAllFiltered(e,t="apiSelectAllFiltered"){e.selectionSvc?.selectAllRowNodes({source:t,selectAll:"filtered"})}function deselectAllFiltered(e,t="apiSelectAllFiltered"){e.selectionSvc?.deselectAllRowNodes({source:t,selectAll:"filtered"})}function selectAllOnCurrentPage(e,t="apiSelectAllCurrentPage"){e.selectionSvc?.selectAllRowNodes({source:t,selectAll:"currentPage"})}function deselectAllOnCurrentPage(e,t="apiSelectAllCurrentPage"){e.selectionSvc?.deselectAllRowNodes({source:t,selectAll:"currentPage"})}function getSelectedNodes(e){return e.selectionSvc?.getSelectedNodes()??[]}function getSelectedRows(e){return e.selectionSvc?.getSelectedRows()??[]}var CheckboxSelectionComponentElement={tag:"div",cls:"ag-selection-checkbox",role:"presentation",children:[{tag:"ag-checkbox",ref:"eCheckbox",role:"presentation"}]},CheckboxSelectionComponent=class extends Component{constructor(){super(CheckboxSelectionComponentElement,[AgCheckboxSelector]),this.eCheckbox=RefPlaceholder}postConstruct(){this.eCheckbox.setPassive(!0)}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.getLocaleTextFunc(),{rowNode:t,eCheckbox:n}=this,o=t.isSelected(),u=_getAriaCheckboxStateName(e,o),[d,f]=t.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],g=e(d,f);n.setValue(o,!0),n.setInputAriaLabel(`${g} (${u})`)}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getWrapperElement(),{dblclick:_stopPropagationForAgGrid,click:o=>{_stopPropagationForAgGrid(o),!this.eCheckbox.isDisabled()&&this.beans.selectionSvc?.handleSelectionEvent(o,this.rowNode,"checkboxSelected")}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),this.addManagedPropertyListener("rowSelection",({currentValue:o,previousValue:u})=>{const d=typeof o=="object"?_getHideDisabledCheckboxes(o):void 0,f=typeof u=="object"?_getHideDisabledCheckboxes(u):void 0;d!==f&&this.onSelectableChanged()}),_getIsRowSelectable(this.gos)||typeof this.getIsVisible()=="function"){const o=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:o}),this.addManagedListeners(this.rowNode,{dataChanged:o,cellChanged:o}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}showOrHideSelect(){const{column:e,rowNode:t,overrides:n,gos:o}=this,u=t.selectable,d=this.getIsVisible();let f;if(typeof d=="function"){const R=n?.callbackParams;if(!e)f=d({...R,node:t,data:t.data});else{const _=e.createColumnFunctionCallbackParams(t);f=d({...R,..._})}}else f=d??!1;const g=u&&!f||!u&&f,v=u||f,w=o.get("rowSelection"),S=w&&typeof w!="string"?!_getHideDisabledCheckboxes(w):!!e?.getColDef().showDisabledCheckboxes;this.setVisible(v&&(g?S:!0)),this.setDisplayed(v&&(g?S:!0)),v&&this.eCheckbox.setDisabled(g),n?.removeHidden&&this.setDisplayed(v)}getIsVisible(){const e=this.overrides;if(e)return e.isVisible;const t=this.gos.get("rowSelection");return t&&typeof t!="string"?_getCheckboxes(t):this.column?.getColDef()?.checkboxSelection}},RowRangeSelectionContext=class{constructor(e,t){this.rowModel=e,this.pinnedRowModel=t,this.selectAll=!1,this.rootId=null,this.endId=null,this.cachedRange=[]}reset(){this.rootId=null,this.endId=null,this.cachedRange.length=0}setRoot(e){this.rootId=e.id,this.endId=null,this.cachedRange.length=0}setEndRange(e){this.endId=e.id,this.cachedRange.length=0}getRange(){if(this.cachedRange.length===0){const e=this.getRoot(),t=this.getEnd();if(e==null||t==null)return this.cachedRange;this.cachedRange=this.getNodesInRange(e,t)??[]}return this.cachedRange}isInRange(e){return this.rootId===null?!1:this.getRange().some(t=>t.id===e.id)}getRoot(e){if(this.rootId)return this.getRowNode(this.rootId);if(e)return this.setRoot(e),e}getEnd(){if(this.endId)return this.getRowNode(this.endId)}getRowNode(e){let t;const{rowModel:n,pinnedRowModel:o}=this;return t??(t=n.getRowNode(e)),o?.isManual()&&(t??(t=o.getPinnedRowById(e,"top")),t??(t=o.getPinnedRowById(e,"bottom"))),t}truncate(e){const t=this.getRange();if(t.length===0)return{keep:[],discard:[]};const n=t[0].id===this.rootId,o=t.findIndex(u=>u.id===e.id);if(o>-1){const u=t.slice(0,o),d=t.slice(o+1);return this.setEndRange(e),n?{keep:u,discard:d}:{keep:d,discard:u}}else return{keep:t,discard:[]}}extend(e,t=!1){const n=this.getRoot();if(n==null){const u=this.getRange().slice();return t&&e.depthFirstSearch(d=>!d.group&&u.push(d)),u.push(e),this.setRoot(e),{keep:u,discard:[]}}const o=this.getNodesInRange(n,e);if(!o)return this.setRoot(e),{keep:[e],discard:[]};if(o.find(u=>u.id===this.endId))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{const u=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:u}}}getNodesInRange(e,t){const{pinnedRowModel:n,rowModel:o}=this;if(!n?.isManual())return o.getNodesInRangeForSelection(e,t);if(e.rowPinned==="top"&&!t.rowPinned)return _getNodesInRangeForSelection(n,"top",e,void 0).concat(o.getNodesInRangeForSelection(o.getRow(0),t)??[]);if(e.rowPinned==="bottom"&&!t.rowPinned){const u=_getNodesInRangeForSelection(n,"bottom",void 0,e),d=o.getRowCount(),f=o.getRow(d-1);return(o.getNodesInRangeForSelection(t,f)??[]).concat(u)}if(!e.rowPinned&&!t.rowPinned)return o.getNodesInRangeForSelection(e,t);if(e.rowPinned==="top"&&t.rowPinned==="top")return _getNodesInRangeForSelection(n,"top",e,t);if(e.rowPinned==="bottom"&&t.rowPinned==="top"){const u=_getNodesInRangeForSelection(n,"top",t,void 0),d=_getNodesInRangeForSelection(n,"bottom",void 0,e),f=o.getRow(0),g=o.getRow(o.getRowCount()-1);return u.concat(o.getNodesInRangeForSelection(f,g)??[]).concat(d)}if(!e.rowPinned&&t.rowPinned==="top")return _getNodesInRangeForSelection(n,"top",t,void 0).concat(o.getNodesInRangeForSelection(o.getRow(0),e)??[]);if(e.rowPinned==="top"&&t.rowPinned==="bottom"){const u=_getNodesInRangeForSelection(n,"top",e,void 0),d=_getNodesInRangeForSelection(n,"bottom",void 0,t),f=o.getRow(0),g=o.getRow(o.getRowCount()-1);return u.concat(o.getNodesInRangeForSelection(f,g)??[]).concat(d)}if(e.rowPinned==="bottom"&&t.rowPinned==="bottom")return _getNodesInRangeForSelection(n,"bottom",e,t);if(!e.rowPinned&&t.rowPinned==="bottom"){const u=_getNodesInRangeForSelection(n,"bottom",void 0,t),d=o.getRow(o.getRowCount());return(o.getNodesInRangeForSelection(e,d)??[]).concat(u)}return null}},SelectAllFeature=class extends BeanStub{constructor(e){super(),this.column=e,this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1}onSpaceKeyDown(e){const t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(_getActiveDomElement(this.beans))&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e;const t=this.createManagedBean(new AgCheckbox);this.cbSelectAll=t,t.addCss("ag-header-select-all"),_setAriaRole(t.getGui(),"presentation"),this.showOrHideSelectAll();const n=this.updateStateOfCheckbox.bind(this);this.addManagedEventListeners({newColumnsLoaded:()=>this.showOrHideSelectAll(),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:n,paginationChanged:n,modelUpdated:n}),this.addManagedPropertyListener("rowSelection",({currentValue:o,previousValue:u})=>{const d=f=>typeof f=="string"||!f||f.mode==="singleRow"?void 0:f.selectAll;d(o)!==d(u)&&this.showOrHideSelectAll(),this.updateStateOfCheckbox()}),this.addManagedListeners(t,{fieldValueChanged:this.onCbSelectAll.bind(this)}),t.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onDisplayedColumnsChanged(e){this.isAlive()&&this.showOrHideSelectAll(e.source==="uiColumnMoved")}showOrHideSelectAll(e=!1){const t=this.isCheckboxSelection();this.cbSelectAllVisible=t,this.cbSelectAll.setDisplayed(t),t&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel(e)}updateStateOfCheckbox(){if(!this.cbSelectAllVisible||this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.getSelectAllMode(),t=this.beans.selectionSvc,n=this.cbSelectAll,o=t.getSelectAllState(e);n.setValue(o);const u=t.hasNodesToSelect(e);n.setDisabled(!u),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(e=!1){const t=this.getLocaleTextFunc(),{headerCellCtrl:n,cbSelectAll:o,cbSelectAllVisible:u}=this,d=o.getValue(),f=_getAriaCheckboxStateName(t,d),g=t("ariaRowSelectAll","Press Space to toggle all rows selection");n.setAriaDescriptionProperty("selectAll",u?`${g} (${f})`:null),o.setInputAriaLabel(t("ariaHeaderSelection","Column with Header Selection")),e||n.announceAriaDescription()}checkSelectionType(e){return _isMultiRowSelection(this.gos)?!0:(_warn(128,{feature:e}),!1)}checkRightRowModelType(e){const{gos:t,rowModel:n}=this.beans;return _isClientSideRowModel(t)||_isServerSideRowModel(t)?!0:(_warn(129,{feature:e,rowModel:n.getType()}),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue(),t=this.getSelectAllMode();let n="uiSelectAll";t==="currentPage"?n="uiSelectAllCurrentPage":t==="filtered"&&(n="uiSelectAllFiltered");const o={source:n,selectAll:t},u=this.beans.selectionSvc;e?u.selectAllRowNodes(o):u.deselectAllRowNodes(o)}isCheckboxSelection(){const{column:e,gos:t,beans:n}=this,d=typeof t.get("rowSelection")=="object"?"headerCheckbox":"headerCheckboxSelection";return isCheckboxSelection(n,e)&&this.checkRightRowModelType(d)&&this.checkSelectionType(d)}getSelectAllMode(){const e=_getSelectAll(this.gos,!1);if(e)return e;const{headerCheckboxSelectionCurrentPageOnly:t,headerCheckboxSelectionFilteredOnly:n}=this.column.getColDef();return t?"currentPage":n?"filtered":"all"}destroy(){super.destroy(),this.cbSelectAll=void 0,this.headerCellCtrl=void 0}};function isCheckboxSelection({gos:e,selectionColSvc:t},n){const o=e.get("rowSelection"),u=n.getColDef(),{headerCheckboxSelection:d}=u;let f=!1;if(typeof o=="object"){const v=isColumnSelectionCol(n),w=isColumnGroupAutoCol(n);(_getCheckboxLocation(o)==="autoGroupColumn"&&w||v&&t?.isSelectionColumnEnabled())&&(f=_getHeaderCheckbox(o))}else typeof d=="function"?f=d(_addGridCommonParams(e,{column:n,colDef:u})):f=!!d;return f}var BaseSelectionService=class extends BeanStub{postConstruct(){const{gos:e,beans:t}=this;this.selectionCtx=new RowRangeSelectionContext(t.rowModel,t.pinnedRowModel),this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],()=>{const n=_getIsRowSelectable(e);n!==this.isRowSelectable&&(this.isRowSelectable=n,this.updateSelectable())}),this.isRowSelectable=_getIsRowSelectable(e),this.addManagedEventListeners({cellValueChanged:n=>this.updateRowSelectable(n.node),rowNodeDataChanged:n=>this.updateRowSelectable(n.node)})}destroy(){super.destroy(),this.selectionCtx.reset()}createCheckboxSelectionComponent(){return new CheckboxSelectionComponent}createSelectAllFeature(e){if(isCheckboxSelection(this.beans,e))return new SelectAllFeature(e)}isMultiSelect(){return _isMultiRowSelection(this.gos)}onRowCtrlSelected(e,t,n){const o=!!e.rowNode.isSelected();e.forEachGui(n,u=>{u.rowComp.toggleCss("ag-row-selected",o);const d=u.element;_setAriaSelected(d,o),d.contains(_getActiveDomElement(this.beans))&&t(u)})}announceAriaRowSelection(e){if(this.isRowSelectionBlocked(e))return;const t=e.isSelected(),n=this.beans.editSvc?.isEditing({rowNode:e});if(!e.selectable||n)return;const u=this.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row`);this.beans.ariaAnnounce?.announceValue(u,"rowSelection")}isRowSelectionBlocked(e){return!e.selectable||e.rowPinned&&!_isManualPinnedRow(e)||!_isRowSelection(this.gos)}updateRowSelectable(e,t){const n=e.rowPinned&&e.pinnedSibling?e.pinnedSibling.selectable:this.isRowSelectable?.(e)??!0;return this.setRowSelectable(e,n,t),n}setRowSelectable(e,t,n){if(e.selectable!==t){if(e.selectable=t,e.dispatchRowEvent("selectableChanged"),n)return;if(_getGroupSelectsDescendants(this.gos)){const u=this.calculateSelectedFromChildren(e);this.setNodesSelected({nodes:[e],newValue:u??!1,source:"selectableChanged"});return}e.isSelected()&&!e.selectable&&this.setNodesSelected({nodes:[e],newValue:!1,source:"selectableChanged"})}}calculateSelectedFromChildren(e){let t=!1,n=!1;if(!e.childrenAfterGroup?.length)return e.selectable?e.__selected:null;for(let o=0;o<e.childrenAfterGroup.length;o++){const u=e.childrenAfterGroup[o];let d=u.isSelected();if(!u.selectable){const f=this.calculateSelectedFromChildren(u);if(f===null)continue;d=f}switch(d){case!0:t=!0;break;case!1:n=!0;break;default:return}}if(!(t&&n))return t?!0:n?!1:e.selectable?e.__selected:null}selectRowNode(e,t,n,o="api"){if(t&&e.destroyed)return!1;const u=!e.selectable&&t,d=e.__selected===t;if(u||d)return!1;e.__selected=t,e.dispatchRowEvent("rowSelected");const f=e.sibling;f&&f.footer&&f.__localEventService&&f.dispatchRowEvent("rowSelected");const g=e.pinnedSibling;return g?.rowPinned&&g.__localEventService&&g.dispatchRowEvent("rowSelected"),this.eventSvc.dispatchEvent({..._createGlobalRowEvent(e,this.gos,"rowSelected"),event:n||null,source:o}),!0}isCellCheckboxSelection(e,t){const n=this.gos.get("rowSelection");if(n&&typeof n!="string"){const o=isColumnSelectionCol(e)&&_getCheckboxes(n);return e.isColumnFunc(t,o)}else return e.isColumnFunc(t,e.colDef.checkboxSelection)}inferNodeSelections(e,t,n,o){const{gos:u,selectionCtx:d}=this,f=e.isSelected(),g=_getGroupSelectsDescendants(u),v=_getEnableSelection(u),w=_getEnableDeselection(u),S=this.isMultiSelect(),R=o==="rowClicked";if(R&&!(v||w))return null;if(t&&n&&S){const _=d.getRoot();if(_)if(_.isSelected()){const F=d.isInRange(e)?d.truncate(e):d.extend(e,g);return{deselect:F.discard,select:F.keep,reset:!1}}else{const F=d.extend(e,g);return{select:[],deselect:F.keep,reset:!1}}else return null}else if(t&&S){const _=d.selectAll?this.beans.rowModel.getRow(0):void 0,F=d.getRoot(_),M=d.isInRange(e)?d.truncate(e):d.extend(e,g);return{select:M.keep,deselect:M.discard,reset:d.selectAll||!!(F&&!F.isSelected())}}else if(n){if(R){const _=!f;return _&&!v||!_&&!w?null:(d.setRoot(e),{node:e,newValue:_,clearSelection:!1})}return d.setRoot(e),{node:e,newValue:!f,clearSelection:!S}}else{d.setRoot(e);const _=_getEnableSelectionWithoutKeys(u),F=_getGroupSelection(u)==="filteredDescendants",M=R&&(!_||!v);if(F&&f===void 0&&_isClientSideRowModel(u))return{node:e,newValue:!1,checkFilteredNodes:!0,clearSelection:!S||M};if(R){const I=f?!_:v;return I===f&&!M||I&&!v||!I&&!w?null:{node:e,newValue:I,clearSelection:!S||M,keepDescendants:e.group&&g}}return{node:e,newValue:!f,clearSelection:!S||M}}}},SelectionService=class extends BaseSelectionService{constructor(){super(...arguments),this.beanName="selectionSvc",this.selectedNodes=new Map,this.detailSelection=new Map,this.masterSelectsDetail=!1}postConstruct(){super.postConstruct();const{gos:e}=this;this.mode=_getRowSelectionMode(e),this.groupSelectsDescendants=_getGroupSelectsDescendants(e),this.groupSelectsFiltered=_getGroupSelection(e)==="filteredDescendants",this.masterSelectsDetail=_getMasterSelects(e)==="detail",this.addManagedPropertyListeners(["groupSelectsChildren","groupSelectsFiltered","rowSelection"],()=>{const t=_getGroupSelectsDescendants(e),n=_getRowSelectionMode(e),o=_getGroupSelection(e)==="filteredDescendants";this.masterSelectsDetail=_getMasterSelects(e)==="detail",(t!==this.groupSelectsDescendants||o!==this.groupSelectsFiltered||n!==this.mode)&&(this.deselectAllRowNodes({source:"api"}),this.groupSelectsDescendants=t,this.groupSelectsFiltered=o,this.mode=n)}),this.addManagedEventListeners({rowSelected:this.onRowSelected.bind(this)})}destroy(){super.destroy(),this.resetNodes()}handleSelectionEvent(e,t,n){if(this.isRowSelectionBlocked(t))return 0;const o=this.inferNodeSelections(t,e.shiftKey,e.metaKey||e.ctrlKey,n);if(o==null)return 0;if(this.selectionCtx.selectAll=!1,"select"in o)return o.reset?this.resetNodes():this.selectRange(o.deselect,!1,n),this.selectRange(o.select,!0,n);{const u=o.checkFilteredNodes?recursiveCanNodesBeSelected(o.node):o.newValue;return this.setNodesSelected({nodes:[o.node],newValue:u,clearSelection:o.clearSelection,keepDescendants:o.keepDescendants,event:e,source:n})}}setNodesSelected({newValue:e,clearSelection:t,suppressFinishActions:n,nodes:o,event:u,source:d,keepDescendants:f=!1}){if(o.length===0)return 0;const{gos:g}=this;if(!_isRowSelection(g)&&e)return _warn(132),0;if(o.length>1&&!this.isMultiSelect())return _warn(130),0;let v=0;for(let w=0;w<o.length;w++){const S=o[w],R=_normaliseSiblingRef(S);if(R.rowPinned&&!_isManualPinnedRow(R)){_warn(59);continue}if(R.id===void 0){_warn(60);continue}if(e&&S.destroyed)continue;this.groupSelectsFiltered&&R.group&&!g.get("treeData")||this.selectRowNode(R,e,u,d)&&(this.detailSelection.delete(R.id),v++),this.groupSelectsDescendants&&R.childrenAfterGroup?.length&&(v+=this.selectChildren(R,e,d))}return n||(o.length===1&&d==="api"&&this.selectionCtx.setRoot(_normaliseSiblingRef(o[0])),e&&(t||!this.isMultiSelect())&&(v+=this.clearOtherNodes(_normaliseSiblingRef(o[0]),f,d)),v>0&&(this.updateGroupsFromChildrenSelections(d),this.dispatchSelectionChanged(d))),v}selectRange(e,t,n){let o=0;return e.forEach(u=>{const d=_normaliseSiblingRef(u);if(d.group&&this.groupSelectsDescendants)return;this.selectRowNode(d,t,void 0,n)&&o++}),o>0&&(this.updateGroupsFromChildrenSelections(n),this.dispatchSelectionChanged(n)),o}selectChildren(e,t,n){const o=this.groupSelectsFiltered?e.childrenAfterAggFilter:e.childrenAfterGroup;return o?this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,source:n,nodes:o}):0}getSelectedNodes(){return Array.from(this.selectedNodes.values())}getSelectedRows(){const e=[];return this.selectedNodes.forEach(t=>t.data&&e.push(t.data)),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){const t=new Map;this.selectedNodes.forEach((n,o)=>{e(n)&&t.set(o,n)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsDescendants)return!1;const{gos:n,rowModel:o}=this.beans;if(!_isClientSideRowModel(n))return!1;const u=o.rootNode;if(!u)return!1;t||(t=new ChangedPath(!0,u),t.active=!1);let d=!1;return t.forEachChangedNodeDepthFirst(f=>{if(f!==u){const g=this.calculateSelectedFromChildren(f);d=this.selectRowNode(f,g===null?!1:g,void 0,e)||d}}),d}clearOtherNodes(e,t,n){const o=new Map;let u=0;return this.selectedNodes.forEach(d=>{const f=d.id==e.id;if((t?!isDescendantOf(e,d):!0)&&!f){const v=this.selectedNodes.get(d.id);u+=this.setNodesSelected({nodes:[v],newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:n}),this.groupSelectsDescendants&&d.parent&&o.set(d.parent.id,d.parent)}}),o.forEach(d=>{const f=this.calculateSelectedFromChildren(d);this.selectRowNode(d,f===null?!1:f,void 0,n)}),u}onRowSelected(e){const t=e.node;this.groupSelectsDescendants&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}createDaemonNode(e){if(!e.id)return;const t=new RowNode(this.beans);return t.id=e.id,t.data=e.data,t.__selected=e.__selected,t.level=e.level,t}syncInOldRowNode(e,t){t&&e.id!==t.id&&this.selectedNodes.get(t.id)==e&&this.selectedNodes.set(t.id,t)}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.__selected=!0,this.selectedNodes.set(e.id,e)):e.__selected=!1}reset(e){const t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){this.selectedNodes.forEach(e=>{this.selectRowNode(e,!1)}),this.selectedNodes.clear()}getBestCostNodeSelection(){const{gos:e,rowModel:t}=this.beans;if(!_isClientSideRowModel(e))return;const n=t.getTopLevelNodes();if(n===null)return;const o=[];function u(d){for(let f=0,g=d.length;f<g;f++){const v=d[f];v.isSelected()?o.push(v):v.group&&v.childrenAfterGroup&&u(v.childrenAfterGroup)}}return u(n),o}isEmpty(){return this.getSelectionCount()===0}deselectAllRowNodes({source:e,selectAll:t}){const n=_isClientSideRowModel(this.gos);let o=!1;const u=d=>{const f=this.selectRowNode(_normaliseSiblingRef(d),!1,void 0,e);o||(o=f)};if(t==="currentPage"||t==="filtered"){if(!n){_error(102);return}this.getNodesToSelect(t).forEach(u)}else this.selectedNodes.forEach(u),this.reset(e);if(this.selectionCtx.selectAll=!1,n&&this.groupSelectsDescendants){const d=this.updateGroupsFromChildrenSelections(e);o||(o=d)}o&&this.dispatchSelectionChanged(e)}getSelectedCounts(e){let t=0,n=0;return this.getNodesToSelect(e).forEach(o=>{this.groupSelectsDescendants&&o.group||(o.isSelected()?t++:o.selectable&&n++)}),{selectedCount:t,notSelectedCount:n}}getSelectAllState(e){const{selectedCount:t,notSelectedCount:n}=this.getSelectedCounts(e);return _calculateSelectAllState(t,n)??null}hasNodesToSelect(e){return this.getNodesToSelect(e).filter(t=>t.selectable).length>0}getNodesToSelect(e){if(!this.canSelectAll())return[];const t=[],n=u=>t.push(u);if(e==="currentPage")return this.forEachNodeOnPage(u=>{if(!u.group){n(u);return}if(!u.expanded&&!u.footer){const d=f=>{n(f),f.childrenAfterFilter?.forEach(d)};d(u);return}this.groupSelectsDescendants||n(u)}),t;const o=this.beans.rowModel;return e==="filtered"?(o.forEachNodeAfterFilter(n),t):(o.forEachNode(n),t)}forEachNodeOnPage(e){const{pageBounds:t,rowModel:n}=this.beans,o=t.getFirstRow(),u=t.getLastRow();for(let d=o;d<=u;d++){const f=n.getRow(d);f&&e(f)}}selectAllRowNodes(e){const{gos:t,selectionCtx:n}=this;if(!_isRowSelection(t)){_warn(132);return}if(_isUsingNewRowSelectionAPI(t)&&!_isMultiRowSelection(t)){_warn(130);return}if(!this.canSelectAll())return;const{source:o,selectAll:u}=e;let d=!1;if(this.getNodesToSelect(u).forEach(f=>{const g=this.selectRowNode(_normaliseSiblingRef(f),!0,void 0,o);d||(d=g)}),n.selectAll=!0,_isClientSideRowModel(t)&&this.groupSelectsDescendants){const f=this.updateGroupsFromChildrenSelections(o);d||(d=f)}d&&this.dispatchSelectionChanged(o)}getSelectionState(){return this.isEmpty()?null:Array.from(this.selectedNodes.keys())}setSelectionState(e,t,n){if(e||(e=[]),!Array.isArray(e)){_error(103);return}const o=new Set(e),u=[];this.beans.rowModel.forEachNode(d=>{o.has(d.id)&&u.push(d)}),n&&this.resetNodes(),this.setNodesSelected({newValue:!0,nodes:u,source:t})}canSelectAll(){return _isClientSideRowModel(this.beans.gos)}updateSelectable(e){const{gos:t,rowModel:n}=this.beans;if(!_isRowSelection(t))return;const o="selectableChanged",u=e!==void 0,d=_isClientSideRowModel(t)&&this.groupSelectsDescendants,f=[],g=v=>{if(u&&!v.group)return;if(d&&v.group){const S=v.childrenAfterGroup?.some(R=>R.selectable)??!1;this.setRowSelectable(v,S,!0);return}!this.updateRowSelectable(v,!0)&&v.isSelected()&&f.push(v)};if(d){if(e===void 0){const v=n.rootNode;e=v?new ChangedPath(!1,v):void 0}e?.forEachChangedNodeDepthFirst(g,!u,!u)}else n.forEachNode(g);f.length&&this.setNodesSelected({nodes:f,newValue:!1,source:o}),!u&&d&&this.updateGroupsFromChildrenSelections?.(o)}updateSelectableAfterGrouping(e){this.updateSelectable(e),this.groupSelectsDescendants&&this.updateGroupsFromChildrenSelections?.("rowGroupChanged",e)&&this.dispatchSelectionChanged("rowGroupChanged")}refreshMasterNodeState(e,t){if(!this.masterSelectsDetail)return;const n=e.detailNode?.detailGridInfo?.api;if(!n)return;const o=_isAllSelected(n);e.isSelected()!==o&&this.selectRowNode(e,o,t,"masterDetail")&&this.dispatchSelectionChanged("masterDetail"),o||this.detailSelection.set(e.id,new Set(n.getSelectedNodes().map(d=>d.id)))}setDetailSelectionState(e,t,n){if(this.masterSelectsDetail){if(!_isMultiRowSelection(t)){_warn(269);return}switch(e.isSelected()){case!0:{n.selectAll();break}case!1:{n.deselectAll();break}case void 0:{const o=this.detailSelection.get(e.id);if(o){const u=[];for(const d of o){const f=n.getRowNode(d);f&&u.push(f)}n.setNodesSelected({nodes:u,newValue:!0,source:"masterDetail"})}break}}}}dispatchSelectionChanged(e){this.eventSvc.dispatchEvent({type:"selectionChanged",source:e,selectedNodes:this.getSelectedNodes(),serverSideState:null})}};function _normaliseSiblingRef(e){return _isManualPinnedRow(e)?e.pinnedSibling:e.footer?e.sibling:e}function _isAllSelected(e){let t=0,n=0;return e.forEachNode(o=>{o.isSelected()?t++:o.selectable&&n++}),_calculateSelectAllState(t,n)}function _calculateSelectAllState(e,t){if(e===0&&t===0)return!1;if(!(e>0&&t>0))return e>0}function isDescendantOf(e,t){let n=t.parent;for(;n;){if(n===e)return!0;n=n.parent}return!1}function recursiveCanNodesBeSelected(e){const t=e.isSelected()===!1,n=e.childrenAfterFilter?.some(recursiveCanNodesBeSelected)??!1;return t||n}var SharedRowSelectionModule={moduleName:"SharedRowSelection",version:VERSION,beans:[SelectionColService],css:[rowSelectionCSS],apiFunctions:{setNodesSelected,selectAll,deselectAll,selectAllFiltered,deselectAllFiltered,selectAllOnCurrentPage,deselectAllOnCurrentPage,getSelectedNodes,getSelectedRows}},RowSelectionModule={moduleName:"RowSelection",version:VERSION,rowModels:["clientSide","infinite","viewport"],beans:[SelectionService],dependsOn:[SharedRowSelectionModule]},CellCustomStyleFeature=class extends BeanStub{constructor(e,t){super(),this.cellCtrl=e,this.staticClasses=[],this.beans=t,this.column=e.column}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const{column:e,cellComp:t}=this,n=e.colDef,o=n.cellClassRules,u=this.getCellClassParams(e,n);processClassRules(this.beans.expressionSvc,o===this.cellClassRules?void 0:this.cellClassRules,o,u,d=>t.toggleCss(d,!0),d=>t.toggleCss(d,!1)),this.cellClassRules=o}applyUserStyles(){const e=this.column,t=e.colDef,n=t.cellStyle;if(!n)return;let o;if(typeof n=="function"){const u=this.getCellClassParams(e,t);o=n(u)}else o=n;o&&this.cellComp.setUserStyles(o)}applyClassesFromColDef(){const{column:e,cellComp:t}=this,n=e.colDef,o=this.getCellClassParams(e,n);for(const d of this.staticClasses)t.toggleCss(d,!1);const u=this.beans.cellStyles.getStaticCellClasses(n,o);this.staticClasses=u;for(const d of u)t.toggleCss(d,!0)}getCellClassParams(e,t){const{value:n,rowNode:o}=this.cellCtrl;return _addGridCommonParams(this.beans.gos,{value:n,data:o.data,node:o,colDef:t,column:e,rowIndex:o.rowIndex})}},CellStyleService=class extends BeanStub{constructor(){super(...arguments),this.beanName="cellStyles"}processAllCellClasses(e,t,n,o){processClassRules(this.beans.expressionSvc,void 0,e.cellClassRules,t,n,o),this.processStaticCellClasses(e,t,n)}getStaticCellClasses(e,t){const{cellClass:n}=e;if(!n)return[];let o;return typeof n=="function"?o=n(t):o=n,typeof o=="string"&&(o=[o]),o||[]}createCellCustomStyleFeature(e){return new CellCustomStyleFeature(e,this.beans)}processStaticCellClasses(e,t,n){this.getStaticCellClasses(e,t).forEach(u=>{n(u)})}},CellStyleModule={moduleName:"CellStyle",version:VERSION,beans:[CellStyleService]},RowStyleModule={moduleName:"RowStyle",version:VERSION,beans:[RowStyleService]},INITIAL_GRID_OPTION_KEYS={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,overlayComponent:!0,suppressOverlays:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,groupLockGroupColumns:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,renderingMode:!0,columnMenu:!0,suppressSetFilterByDefault:!0,getDataPath:!0,enableCellSpan:!0,enableFilterHandlers:!0,filterHandlers:!0},clientSide="clientSide",serverSide="serverSide",infinite="infinite",functionRowModels={onGroupExpandedOrCollapsed:[clientSide],refreshClientSideRowModel:[clientSide],isRowDataEmpty:[clientSide],forEachLeafNode:[clientSide],forEachNodeAfterFilter:[clientSide],forEachNodeAfterFilterAndSort:[clientSide],resetRowHeights:[clientSide,serverSide],applyTransaction:[clientSide],applyTransactionAsync:[clientSide],flushAsyncTransactions:[clientSide],getBestCostNodeSelection:[clientSide],getServerSideSelectionState:[serverSide],setServerSideSelectionState:[serverSide],applyServerSideTransaction:[serverSide],applyServerSideTransactionAsync:[serverSide],applyServerSideRowData:[serverSide],retryServerSideLoads:[serverSide],flushServerSideAsyncTransactions:[serverSide],refreshServerSide:[serverSide],getServerSideGroupLevelState:[serverSide],refreshInfiniteCache:[infinite],purgeInfiniteCache:[infinite],getInfiniteRowCount:[infinite],isLastRowIndexKnown:[infinite,serverSide],expandAll:[clientSide,serverSide],collapseAll:[clientSide,serverSide],onRowHeightChanged:[clientSide,serverSide],setRowCount:[infinite,serverSide],getCacheBlockState:[infinite,serverSide]},deprecatedFunctions={showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"},selectAllFiltered:{version:"v33",old:"selectAllFiltered()",new:'selectAll("filtered")'},deselectAllFiltered:{version:"v33",old:"deselectAllFiltered()",new:'deselectAll("filtered")'},selectAllOnCurrentPage:{version:"v33",old:"selectAllOnCurrentPage()",new:'selectAll("currentPage")'},deselectAllOnCurrentPage:{version:"v33",old:"deselectAllOnCurrentPage()",new:'deselectAll("currentPage")'}};function validateApiFunction(e,t,n){const o=deprecatedFunctions[e];if(o){const{version:d,new:f,old:g,message:v}=o,w=g??e;return(...S)=>{const R=f?`Please use ${f} instead. `:"";return _warnOnce(`Since ${d} api.${w} is deprecated. ${R}${v??""}`),t.apply(t,S)}}const u=functionRowModels[e];return u?(...d)=>{const f=n.rowModel.getType();if(!u.includes(f)){_errorOnce(`api.${e} can only be called when gridOptions.rowModelType is ${u.join(" or ")}`);return}return t.apply(t,d)}:t}var DYNAMIC_BEAN_MODULES={detailCellRendererCtrl:"SharedMasterDetail",dndSourceComp:"DragAndDrop",fillHandle:"CellSelection",groupCellRendererCtrl:"GroupCellRenderer",headerFilterCellCtrl:"ColumnFilter",headerGroupCellCtrl:"ColumnGroup",rangeHandle:"CellSelection",tooltipFeature:"Tooltip",highlightTooltipFeature:"Tooltip",tooltipStateManager:"Tooltip",groupStrategy:"RowGrouping",treeGroupStrategy:"TreeData",rowNumberRowResizer:"RowNumbers",singleCell:"EditCore",fullRow:"EditCore",agSetColumnFilterHandler:"SetFilter",agMultiColumnFilterHandler:"MultiFilter",agGroupColumnFilterHandler:"GroupFilter",agNumberColumnFilterHandler:"NumberFilter",agBigIntColumnFilterHandler:"BigIntFilter",agDateColumnFilterHandler:"DateFilter",agTextColumnFilterHandler:"TextFilter"},ICON_VALUES={expanded:1,contracted:1,"tree-closed":1,"tree-open":1,"tree-indeterminate":1,pin:1,"eye-slash":1,arrows:1,left:1,right:1,group:1,aggregation:1,pivot:1,"not-allowed":1,chart:1,cross:1,cancel:1,tick:1,first:1,previous:1,next:1,last:1,linked:1,unlinked:1,"color-picker":1,loading:1,menu:1,"menu-alt":1,filter:1,"filter-add":1,columns:1,maximize:1,minimize:1,copy:1,cut:1,paste:1,grip:1,save:1,csv:1,excel:1,"small-down":1,"small-left":1,"small-right":1,"small-up":1,asc:1,desc:1,aasc:1,adesc:1,none:1,up:1,down:1,plus:1,minus:1,settings:1,"checkbox-checked":1,"checkbox-indeterminate":1,"checkbox-unchecked":1,"radio-button-on":1,"radio-button-off":1,eye:1,"column-arrow":1,"un-pin":1,"pinned-top":1,"pinned-bottom":1,"chevron-up":1,"chevron-down":1,"chevron-left":1,"chevron-right":1,edit:1},ICON_MODULES={chart:"MenuCore",cancel:"EnterpriseCore",first:"Pagination",previous:"Pagination",next:"Pagination",last:"Pagination",linked:"IntegratedCharts",loadingMenuItems:"MenuCore",unlinked:"IntegratedCharts",menu:"ColumnHeaderComp",legacyMenu:"ColumnMenu",filter:"ColumnFilter",filterActive:"ColumnFilter",filterAdd:"NewFiltersToolPanel",filterCardCollapse:"NewFiltersToolPanel",filterCardExpand:"NewFiltersToolPanel",filterCardEditing:"NewFiltersToolPanel",filterTab:"ColumnMenu",filtersToolPanel:"FiltersToolPanel",columns:["MenuCore"],columnsToolPanel:["ColumnsToolPanel"],maximize:"EnterpriseCore",minimize:"EnterpriseCore",save:"MenuCore",columnGroupOpened:"ColumnGroupHeaderComp",columnGroupClosed:"ColumnGroupHeaderComp",accordionOpen:"EnterpriseCore",accordionClosed:"EnterpriseCore",accordionIndeterminate:"EnterpriseCore",columnSelectClosed:["ColumnsToolPanel","ColumnMenu"],columnSelectOpen:["ColumnsToolPanel","ColumnMenu"],columnSelectIndeterminate:["ColumnsToolPanel","ColumnMenu"],columnMovePin:"SharedDragAndDrop",columnMoveHide:"SharedDragAndDrop",columnMoveMove:"SharedDragAndDrop",columnMoveLeft:"SharedDragAndDrop",columnMoveRight:"SharedDragAndDrop",columnMoveGroup:"SharedDragAndDrop",columnMoveValue:"SharedDragAndDrop",columnMovePivot:"SharedDragAndDrop",dropNotAllowed:"SharedDragAndDrop",ensureColumnVisible:["ColumnsToolPanel","ColumnMenu"],groupContracted:"GroupCellRenderer",groupExpanded:"GroupCellRenderer",setFilterGroupClosed:"SetFilter",setFilterGroupOpen:"SetFilter",setFilterGroupIndeterminate:"SetFilter",setFilterLoading:"SetFilter",close:"EnterpriseCore",check:"MenuItem",colorPicker:"CommunityCore",groupLoading:"LoadingCellRenderer",overlayLoading:"Overlay",overlayExporting:"Overlay",menuAlt:"ColumnHeaderComp",menuPin:"MenuCore",menuValue:"MenuCore",menuAddRowGroup:["MenuCore","ColumnsToolPanel"],menuRemoveRowGroup:["MenuCore","ColumnsToolPanel"],clipboardCopy:"MenuCore",clipboardCut:"MenuCore",clipboardPaste:"MenuCore",pivotPanel:["ColumnsToolPanel","RowGroupingPanel"],rowGroupPanel:["ColumnsToolPanel","RowGroupingPanel"],valuePanel:"ColumnsToolPanel",columnDrag:"EnterpriseCore",rowDrag:["RowDrag","DragAndDrop"],csvExport:"MenuCore",excelExport:"MenuCore",smallDown:"CommunityCore",selectOpen:"CommunityCore",richSelectOpen:"RichSelect",richSelectRemove:"RichSelect",richSelectLoading:"RichSelect",smallLeft:"CommunityCore",smallRight:"CommunityCore",subMenuOpen:"MenuItem",subMenuOpenRtl:"MenuItem",panelDelimiter:"RowGroupingPanel",panelDelimiterRtl:"RowGroupingPanel",smallUp:"CommunityCore",sortAscending:["MenuCore","Sort"],sortDescending:["MenuCore","Sort"],sortAbsoluteAscending:["MenuCore","Sort"],sortAbsoluteDescending:["MenuCore","Sort"],sortUnSort:["MenuCore","Sort"],advancedFilterBuilder:"AdvancedFilter",advancedFilterBuilderDrag:"AdvancedFilter",advancedFilterBuilderInvalid:"AdvancedFilter",advancedFilterBuilderMoveUp:"AdvancedFilter",advancedFilterBuilderMoveDown:"AdvancedFilter",advancedFilterBuilderAdd:"AdvancedFilter",advancedFilterBuilderRemove:"AdvancedFilter",advancedFilterBuilderSelectOpen:"AdvancedFilter",chartsMenu:"IntegratedCharts",chartsMenuEdit:"IntegratedCharts",chartsMenuAdvancedSettings:"IntegratedCharts",chartsMenuAdd:"IntegratedCharts",chartsColorPicker:"IntegratedCharts",chartsThemePrevious:"IntegratedCharts",chartsThemeNext:"IntegratedCharts",chartsDownload:"IntegratedCharts",checkboxChecked:"CommunityCore",checkboxIndeterminate:"CommunityCore",checkboxUnchecked:"CommunityCore",radioButtonOn:"CommunityCore",radioButtonOff:"CommunityCore",rowPin:"PinnedRow",rowUnpin:"PinnedRow",rowPinBottom:"PinnedRow",rowPinTop:"PinnedRow"},DEPRECATED_ICONS_V33=new Set(["colorPicker","smallUp","checkboxChecked","checkboxIndeterminate","checkboxUnchecked","radioButtonOn","radioButtonOff","smallDown","smallLeft","smallRight"]),ValidationService=class extends BeanStub{constructor(){super(...arguments),this.beanName="validation"}wireBeans(e){this.gridOptions=e.gridOptions,provideValidationServiceLogger(getError)}warnOnInitialPropertyUpdate(e,t){e==="api"&&INITIAL_GRID_OPTION_KEYS[t]&&_warn(22,{key:t})}processGridOptions(e){this.processOptions(e,GRID_OPTIONS_VALIDATORS())}validateApiFunction(e,t){return validateApiFunction(e,t,this.beans)}missingUserComponent(e,t,n,o){const u=USER_COMP_MODULES[t];u?this.gos.assertModuleRegistered(u,`AG Grid '${e}' component: ${t}`):_warn(101,{propertyName:e,componentName:t,agGridDefaults:n,jsComps:o})}missingDynamicBean(e){const t=DYNAMIC_BEAN_MODULES[e];return t?_errMsg(200,{...this.gos.getModuleErrorParams(),moduleName:t,reasonOrId:e}):void 0}checkRowEvents(e){DEPRECATED_ROW_NODE_EVENTS.has(e)&&_warn(10,{eventType:e})}validateIcon(e){if(DEPRECATED_ICONS_V33.has(e)&&_warn(43,{iconName:e}),ICON_VALUES[e])return;const t=ICON_MODULES[e];if(t){_error(200,{reasonOrId:`icon '${e}'`,moduleName:t,gridScoped:_areModulesGridScoped(),gridId:this.beans.context.getId(),rowModelType:this.gos.get("rowModelType"),additionalText:"Alternatively, use the CSS icon name directly."});return}_warn(134,{iconName:e})}isProvidedUserComp(e){return!!USER_COMP_MODULES[e]}validateColDef(e){this.processOptions(e,COL_DEF_VALIDATORS())}processOptions(e,t){const{validations:n,deprecations:o,allProperties:u,propertyExceptions:d,objectName:f,docsUrl:g}=t;u&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(e,[...d??[],...Object.keys(o)],u,f,g);const v=new Set;if(Object.keys(e).forEach(S=>{const R=o[S];if(R){const{message:H,version:U}=R;v.add(`As of v${U}, ${String(S)} is deprecated. ${H??""}`)}const _=e[S];if(_==null||_===!1)return;const F=n[S];if(!F)return;const{dependencies:M,validate:I,supportedRowModels:N,expectedType:B}=F;if(B){const H=typeof _;if(H!==B){v.add(`${String(S)} should be of type '${B}' but received '${H}' (${_}).`);return}}if(N){const H=this.gridOptions.rowModelType??"clientSide";if(!N.includes(H)){v.add(`${String(S)} is not supported with the '${H}' row model. It is only valid with: ${N.join(", ")}.`);return}}if(M){const H=this.checkForRequiredDependencies(S,M,e);if(H){v.add(H);return}}if(I){const H=I(e,this.gridOptions,this.beans);if(H){v.add(H);return}}}),v.size>0)for(const S of v)_warnOnce(S)}checkForRequiredDependencies(e,t,n){const u=Object.entries(t).filter(([d,f])=>{const g=n[d];return!f.required.includes(g)});return u.length===0?null:u.map(([d,f])=>`'${String(e)}' requires '${d}' to be one of [${f.required.map(g=>g===null?"null":g===void 0?"undefined":g).join(", ")}]. ${f.reason??""}`).join(`
           `)}checkProperties(e,t,n,o,u){const d=["__ob__","__v_skip","__metadata__"],f=_fuzzyCheckStrings(Object.getOwnPropertyNames(e),[...d,...t,...n],n),g=Object.keys(f);for(const v of g){const w=f[v];let S=`invalid ${o} property '${v}' did you mean any of these: ${w.slice(0,8).join(", ")}.`;n.includes("context")&&(S+=`
If you are trying to annotate ${o} with application data, use the '${o}.context' property instead.`),_warnOnce(S)}if(g.length>0&&u){const v=this.beans.frameworkOverrides.getDocLink(u);_warnOnce(`to see all the valid ${o} properties please check: ${v}`)}}};function _fuzzyCheckStrings(e,t,n){const o={},u=e.filter(d=>!t.some(f=>f===d));if(u.length>0)for(const d of u)o[d]=_fuzzySuggestions({inputValue:d,allSuggestions:n}).values;return o}var DEPRECATED_ROW_NODE_EVENTS=new Set(["firstChildChanged","lastChildChanged","childIndexChanged"]),ValidationModule={moduleName:"Validation",version:VERSION,beans:[ValidationService]},AllCommunityModule={moduleName:"AllCommunity",version:VERSION,dependsOn:[ClientSideRowModelModule,CsvExportModule,InfiniteRowModelModule,ValidationModule,TextEditorModule,NumberEditorModule,DateEditorModule,CheckboxEditorModule,SelectEditorModule,LargeTextEditorModule,CustomEditorModule,UndoRedoEditModule,TextFilterModule,NumberFilterModule,BigIntFilterModule,DateFilterModule,CustomFilterModule,QuickFilterModule,ExternalFilterModule,GridStateModule,AlignedGridsModule,PaginationModule,ColumnApiModule,RowApiModule,ScrollApiModule,RenderApiModule,ColumnAutoSizeModule,RowDragModule,PinnedRowModule,RowSelectionModule,ValueCacheModule,CellStyleModule,ColumnHoverModule,RowStyleModule,EventApiModule,CellApiModule,HighlightChangesModule,TooltipModule,LocaleModule,RowAutoHeightModule,DragAndDropModule,ClientSideRowModelApiModule,CellSpanModule]},BaseComponentWrapper=class{wrap(e,t,n,o){const u=this.createWrapper(e,o);for(const d of t??[])this.createMethod(u,d,!0);for(const d of n??[])this.createMethod(u,d,!1);return u}createMethod(e,t,n){e.addMethod(t,this.createMethodProxy(e,t,n))}createMethodProxy(e,t,n){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(n&&_warn(49,{methodName:t}),null)}}},TabGuardCtrl=class extends AgTabGuardCtrl{constructor(e){super(e,STOP_PROPAGATION_CALLBACKS)}},BeansContext=React.createContext({}),RenderModeContext=React.createContext("default"),showJsComp=(e,t,n,o)=>{if(!e||e.componentFromFramework||t.isDestroyed())return;const d=e.newAgStackInstance();let f,g,v=!1;return d.then(w=>{if(v){t.destroyBean(w);return}f=w,g=f.getGui(),n.appendChild(g),setRef(o,f)}),()=>{v=!0,f&&(g?.remove(),t.destroyBean(f),o&&setRef(o,void 0))}},setRef=(e,t)=>{if(e)if(e instanceof Function)e(t);else{const n=e;n.current=t}},classesList=(...e)=>e.filter(n=>n!=null&&n!=="").join(" "),CssClasses=class wp{constructor(...t){this.classesMap={};for(const n of t)this.classesMap[n]=!0}setClass(t,n){if(!!this.classesMap[t]==n)return this;const u=new wp;return u.classesMap={...this.classesMap},u.classesMap[t]=n,u}toString(){return Object.keys(this.classesMap).filter(n=>this.classesMap[n]).join(" ")}},isComponentStateless=e=>{const t=()=>typeof Symbol=="function"&&Symbol.for,n=()=>t()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===n()},reactVersion=React.version?.split(".")[0],isReactVersion17Minus=reactVersion==="16"||reactVersion==="17";function isReact19(){return reactVersion==="19"}var disableFlushSync=!1;function runWithoutFlushSync(e){return disableFlushSync||setTimeout(()=>disableFlushSync=!1,0),disableFlushSync=!0,e()}var agFlushSync=(e,t)=>{!isReactVersion17Minus&&e&&!disableFlushSync?ReactDOM.flushSync(t):t()},agStartTransition=e=>{isReactVersion17Minus?e():React.startTransition(e)};function agUseSyncExternalStore(e,t,n){return React.useSyncExternalStore?React.useSyncExternalStore(e,t):n}function getNextValueIfDifferent(e,t,n){if(t==null||e==null)return t;if(e===t||t.length===0&&e.length===0)return e;if(n||e.length===0&&t.length>0||e.length>0&&t.length===0)return t;const o=[],u=[],d=new Map,f=new Map;for(let g=0;g<t.length;g++){const v=t[g];f.set(v.instanceId,v)}for(let g=0;g<e.length;g++){const v=e[g];d.set(v.instanceId,v),f.has(v.instanceId)&&o.push(v)}for(let g=0;g<t.length;g++){const v=t[g],w=v.instanceId;d.has(w)||u.push(v)}return o.length===e.length&&u.length===0?e:o.length===0&&u.length===t.length?t:o.length===0?u:u.length===0?o:[...o,...u]}var GroupCellRenderer=reactExports.forwardRef((e,t)=>{const{registry:n,context:o}=reactExports.useContext(BeansContext),u=reactExports.useRef(null),d=reactExports.useRef(null),f=reactExports.useRef(null),g=reactExports.useRef(null),v=reactExports.useRef(null),w=reactExports.useRef(),[S,R]=reactExports.useState(),[_,F]=reactExports.useState(),[M,I]=reactExports.useState(),[N,B]=reactExports.useState(()=>new CssClasses),[H,U]=reactExports.useState(()=>new CssClasses("ag-hidden")),[$,z]=reactExports.useState(()=>new CssClasses("ag-hidden")),[j,J]=reactExports.useState(()=>new CssClasses("ag-invisible"));reactExports.useImperativeHandle(t,()=>({refresh(){return!1}})),reactExports.useLayoutEffect(()=>showJsComp(S,o,d.current),[S]);const ie=reactExports.useCallback(oe=>{if(u.current=oe,!oe||o.isDestroyed()){w.current=o.destroyBean(w.current);return}const ee={setInnerRenderer:(Q,K)=>{R(Q),I(K)},setChildCount:Q=>F(Q),toggleCss:(Q,K)=>B(ne=>ne.setClass(Q,K)),setContractedDisplayed:Q=>z(K=>K.setClass("ag-hidden",!Q)),setExpandedDisplayed:Q=>U(K=>K.setClass("ag-hidden",!Q)),setCheckboxVisible:Q=>J(K=>K.setClass("ag-invisible",!Q)),setCheckboxSpacing:Q=>J(K=>K.setClass("ag-group-checkbox-spacing",Q))},Z=n.createDynamicBean("groupCellRendererCtrl",!0);Z&&(w.current=o.createBean(Z),w.current.init(ee,oe,f.current,g.current,v.current,GroupCellRenderer,e))},[]),se=reactExports.useMemo(()=>`ag-cell-wrapper ${N.toString()}`,[N]),fe=reactExports.useMemo(()=>`ag-group-expanded ${H.toString()}`,[H]),de=reactExports.useMemo(()=>`ag-group-contracted ${$.toString()}`,[$]),Ce=reactExports.useMemo(()=>`ag-group-checkbox ${j.toString()}`,[j]),be=S?.componentFromFramework,xe=be?S.componentClass:void 0,Ee=S==null&&M!=null,ae=_toString(M);return React.createElement("span",{className:se,ref:ie,...e.colDef?{}:{role:w.current?.getCellAriaRole()}},React.createElement("span",{className:fe,ref:g}),React.createElement("span",{className:de,ref:v}),React.createElement("span",{className:Ce,ref:f}),React.createElement("span",{className:"ag-group-value",ref:d},Ee?ae:be?React.createElement(xe,{...S.params}):null),React.createElement("span",{className:"ag-group-child-count"},_))}),groupCellRenderer_default=GroupCellRenderer,CustomContext=reactExports.createContext({setMethods:()=>{}}),CustomWrapperComp=e=>{const{initialProps:t,addUpdateCallback:n,CustomComponentClass:o,setMethods:u}=e,[{key:d,...f},g]=reactExports.useState(t);return reactExports.useEffect(()=>{n(v=>g(v))},[]),React.createElement(CustomContext.Provider,{value:{setMethods:u}},React.createElement(o,{key:d,...f}))},customWrapperComp_default=reactExports.memo(CustomWrapperComp),counter=0;function generateNewKey(){return`agPortalKey_${++counter}`}var ReactComponent=class{constructor(e,t,n,o){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=t,this.componentType=n,this.suppressFallbackMethods=!!o,this.statelessComponent=this.isStateless(this.reactComponent),this.key=generateNewKey(),this.portalKey=generateNewKey(),this.instanceCreated=this.isStatelessComponent()?AgPromise.resolve(!1):new AgPromise(u=>{this.resolveInstanceCreated=u})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const t=this.portalManager.getComponentWrappingElement(),n=document.createElement(t||"div");return n.classList.add("ag-react-container"),e.reactContainer=n,n}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const t=this.getFrameworkComponentInstance();return!!t&&t[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,t){const n=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,t&&t[0]?t[0]:{});if(!n){setTimeout(()=>this.callMethod(e,t));return}const o=n[e];if(o)return o.apply(n,t);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,t&&t[0]?t[0]:{})}addMethod(e,t){this[e]=t}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new AgPromise(t=>this.createReactComponent(t))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=t=>{this.componentInstance=t,this.resolveInstanceCreated?.(!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=reactDomExports.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,t){return reactExports.createElement(e,t)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,t){const n=this[`${e}Component`];if(!this.suppressFallbackMethods&&n)return n.bind(this)(t)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this[`${e}Component`]}};function addOptionalMethods(e,t,n){for(const o of e){const u=t[o];u&&(n[o]=u)}}var CustomComponentWrapper=class extends ReactComponent{constructor(){super(...arguments),this.awaitUpdateCallback=new AgPromise(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=customWrapperComp_default}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,t){return super.createElement(this.wrapperComponent,{initialProps:t,CustomComponentClass:e,setMethods:n=>this.setMethods(n),addUpdateCallback:n=>{this.updateCallback=()=>(n(this.getProps()),new AgPromise(o=>{setTimeout(()=>{o()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,addOptionalMethods(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new AgPromise(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},CellRendererComponentWrapper=class extends CustomComponentWrapper{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},CustomOverlayComponentWrapper=class extends CustomComponentWrapper{refresh(e){this.sourceParams=e,this.refreshProps()}},DateComponentWrapper=class extends CustomComponentWrapper{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},DragAndDropImageComponentWrapper=class extends CustomComponentWrapper{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,t){this.icon=e,this.shake=t,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:t,icon:n,shake:o}=this;return e.label=t,e.icon=n,e.shake=o,e}},FilterComponentWrapper=class extends CustomComponentWrapper{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterModifiedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1,this.awaitSetMethodsCallback=new AgPromise(e=>{this.resolveSetMethodsCallback=e})}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const t=this.providedMethods;t?t.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){this.expectingNewMethods===!1&&this.hasBeenActive&&this.providedMethods?.doesFilterPass!==e?.doesFilterPass&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e),this.resolveSetMethodsCallback(),this.resolveFilterPassCallback?.(),this.resolveFilterPassCallback=void 0}updateModel(e){this.resolveFilterPassCallback?.();const t=new AgPromise(n=>{this.resolveFilterPassCallback=n});this.setModel(e).then(()=>{t.then(()=>{this.sourceParams.filterChangedCallback()})})}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,e}},FilterDisplayComponentWrapper=class extends CustomComponentWrapper{constructor(){super(...arguments),this.awaitSetMethodsCallback=new AgPromise(e=>{this.resolveSetMethodsCallback=e})}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const t=this.providedMethods;t?t.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","onAnyFilterChanged"]}setMethods(e){super.setMethods(e),this.resolveSetMethodsCallback()}};function updateFloatingFilterParent(e,t){e.parentFilterInstance(n=>{(n.setModel(t)||AgPromise.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var FloatingFilterComponentProxy=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t,this.model=null,this.onModelChange=n=>this.updateModel(n)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){addOptionalMethods(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),updateFloatingFilterParent(this.floatingFilterParams,e)}},FloatingFilterComponentWrapper=class extends CustomComponentWrapper{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),updateFloatingFilterParent(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},FloatingFilterDisplayComponentWrapper=class extends CustomComponentWrapper{refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}},InnerHeaderComponentWrapper=class extends CustomComponentWrapper{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},MenuItemComponentWrapper=class extends CustomComponentWrapper{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const t=this.awaitSetActive(e);e&&t.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},StatusPanelComponentWrapper=class extends CustomComponentWrapper{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},ToolPanelComponentWrapper=class extends CustomComponentWrapper{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function warnReactiveCustomComponents(){_warn(231)}var MAX_COMPONENT_CREATION_TIME_IN_MS=1e3,PortalManager=class{constructor(e,t,n){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=t||"div",this.refresher=e,this.maxComponentCreationTimeMs=n||MAX_COMPONENT_CREATION_TIME_IN_MS}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(t=>t!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,t,n){this.portals=[...this.portals,e],this.waitForInstance(t,n),this.batchUpdate()}updateReactPortal(e,t){this.portals[this.portals.indexOf(e)]=t,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,t,n=Date.now()){if(this.destroyed){t(null);return}if(e.rendered())t(e);else{if(Date.now()-n>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate){agFlushSync(!0,()=>this.refresher()),e.rendered()&&t(e);return}window.setTimeout(()=>{this.waitForInstance(e,t,n)})}}},ModulesContext=React.createContext([]),LicenseContext=React.createContext(void 0),HeaderCellComp=({ctrl:e})=>{const t=e.isAlive(),{context:n}=reactExports.useContext(BeansContext),[o,u]=reactExports.useState(),[d,f]=reactExports.useState(),g=reactExports.useRef(),v=reactExports.useRef(null),w=reactExports.useRef(null),S=reactExports.useRef(null),R=reactExports.useRef(),_=reactExports.useRef();t&&!_.current&&(_.current=new CssClassManager(()=>v.current));const F=reactExports.useCallback(B=>{if(v.current=B,!B||!e.isAlive()||n.isDestroyed()){g.current=n.destroyBean(g.current);return}g.current=n.createBean(new EmptyBean);const H=()=>{const $=e.getSelectAllGui();$&&(w.current?.insertAdjacentElement("afterend",$),g.current.addDestroyFunc(()=>$.remove()))},U={setWidth:$=>{v.current&&(v.current.style.width=$)},toggleCss:($,z)=>_.current.toggleCss($,z),setUserStyles:$=>f($),setAriaSort:$=>{v.current&&($?_setAriaSort(v.current,$):_removeAriaSort(v.current))},setUserCompDetails:$=>u($),getUserCompInstance:()=>R.current||void 0,refreshSelectAllGui:H,removeSelectAllGui:()=>e.getSelectAllGui()?.remove()};e.setComp(U,B,w.current,S.current,g.current),H()},[]);reactExports.useLayoutEffect(()=>showJsComp(o,n,S.current,R),[o]),reactExports.useEffect(()=>{e.setDragSource(v.current)},[o]);const M=reactExports.useMemo(()=>!!(o?.componentFromFramework&&isComponentStateless(o.componentClass)),[o]),I=o?.componentFromFramework,N=o?.componentClass;return React.createElement("div",{ref:F,style:d,className:"ag-header-cell",role:"columnheader"},React.createElement("div",{ref:w,className:"ag-header-cell-resize",role:"presentation"}),React.createElement("div",{ref:S,className:"ag-header-cell-comp-wrapper",role:"presentation"},I?M?React.createElement(N,{...o.params}):React.createElement(N,{...o.params,ref:R}):null))},headerCellComp_default=reactExports.memo(HeaderCellComp),FloatingFilterDisplayComponentProxy=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t}getProps(){return this.floatingFilterParams}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){addOptionalMethods(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}},HeaderFilterCellComp=({ctrl:e})=>{const{context:t,gos:n}=reactExports.useContext(BeansContext),[o,u]=reactExports.useState(),[d,f]=reactExports.useState(()=>new CssClasses("ag-header-cell","ag-floating-filter")),[g,v]=reactExports.useState(()=>new CssClasses),[w,S]=reactExports.useState(()=>new CssClasses("ag-floating-filter-button","ag-hidden")),[R,_]=reactExports.useState("false"),[F,M]=reactExports.useState(),[,I]=reactExports.useState(1),N=reactExports.useRef(),B=reactExports.useRef(null),H=reactExports.useRef(null),U=reactExports.useRef(null),$=reactExports.useRef(null),z=reactExports.useRef(),j=reactExports.useRef(),J=Q=>{Q!=null&&z.current?.(Q)},ie=reactExports.useCallback(Q=>{if(B.current=Q,!Q||!e.isAlive()||t.isDestroyed()){N.current=t.destroyBean(N.current);return}N.current=t.createBean(new EmptyBean),j.current=new AgPromise(ne=>{z.current=ne});const K={toggleCss:(ne,ue)=>f(ye=>ye.setClass(ne,ue)),setUserStyles:ne=>u(ne),addOrRemoveBodyCssClass:(ne,ue)=>v(ye=>ye.setClass(ne,ue)),setButtonWrapperDisplayed:ne=>{S(ue=>ue.setClass("ag-hidden",!ne)),_(ne?"false":"true")},setWidth:ne=>{B.current&&(B.current.style.width=ne)},setCompDetails:ne=>M(ne),getFloatingFilterComp:()=>j.current?j.current:null,setMenuIcon:ne=>$.current?.appendChild(ne)};e.setComp(K,Q,$.current,H.current,N.current)},[]);reactExports.useLayoutEffect(()=>showJsComp(F,t,H.current,J),[F]);const se=reactExports.useMemo(()=>d.toString(),[d]),fe=reactExports.useMemo(()=>g.toString(),[g]),de=reactExports.useMemo(()=>w.toString(),[w]),Ce=reactExports.useMemo(()=>!!(F&&F.componentFromFramework&&isComponentStateless(F.componentClass)),[F]),be=reactExports.useMemo(()=>n.get("reactiveCustomComponents"),[]),xe=reactExports.useMemo(()=>n.get("enableFilterHandlers"),[]),[Ee,ae]=reactExports.useState();reactExports.useEffect(()=>{if(F?.componentFromFramework)if(be){const Q=xe?FloatingFilterDisplayComponentProxy:FloatingFilterComponentProxy,K=new Q(F.params,()=>I(ne=>ne+1));J(K),ae(K)}else warnReactiveCustomComponents()},[F]);const oe=Ee?.getProps(),ee=F?.componentFromFramework,Z=F?.componentClass;return React.createElement("div",{ref:ie,style:o,className:se,role:"gridcell"},React.createElement("div",{ref:H,className:fe,role:"presentation"},ee?be?oe&&React.createElement(CustomContext.Provider,{value:{setMethods:Q=>Ee.setMethods(Q)}},React.createElement(Z,{...oe})):React.createElement(Z,{...F.params,ref:Ce?()=>{}:J}):null),React.createElement("div",{ref:U,"aria-hidden":R,className:de,role:"presentation"},React.createElement("button",{ref:$,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},headerFilterCellComp_default=reactExports.memo(HeaderFilterCellComp),HeaderGroupCellComp=({ctrl:e})=>{const{context:t}=reactExports.useContext(BeansContext),[n,o]=reactExports.useState(),[u,d]=reactExports.useState(()=>new CssClasses),[f,g]=reactExports.useState(()=>new CssClasses),[v,w]=reactExports.useState("false"),[S,R]=reactExports.useState(),[_,F]=reactExports.useState(),M=reactExports.useRef(),I=reactExports.useRef(null),N=reactExports.useRef(null),B=reactExports.useRef(null),H=reactExports.useRef(),U=reactExports.useCallback(se=>{if(I.current=se,!se||!e.isAlive()||t.isDestroyed()){M.current=t.destroyBean(M.current);return}M.current=t.createBean(new EmptyBean);const fe={setWidth:de=>{I.current&&(I.current.style.width=de)},toggleCss:(de,Ce)=>d(be=>be.setClass(de,Ce)),setUserStyles:de=>o(de),setHeaderWrapperHidden:de=>{const Ce=B.current;Ce&&(de?Ce.style.setProperty("display","none"):Ce.style.removeProperty("display"))},setHeaderWrapperMaxHeight:de=>{const Ce=B.current;Ce&&(de!=null?Ce.style.setProperty("max-height",`${de}px`):Ce.style.removeProperty("max-height"),Ce.classList.toggle("ag-header-cell-comp-wrapper-limited-height",de!=null))},setUserCompDetails:de=>F(de),setResizableDisplayed:de=>{g(Ce=>Ce.setClass("ag-hidden",!de)),w(de?"false":"true")},setAriaExpanded:de=>R(de),getUserCompInstance:()=>H.current||void 0};e.setComp(fe,se,N.current,B.current,M.current)},[]);reactExports.useLayoutEffect(()=>showJsComp(_,t,B.current),[_]),reactExports.useEffect(()=>{I.current&&e.setDragSource(I.current)},[_]);const $=reactExports.useMemo(()=>!!(_?.componentFromFramework&&isComponentStateless(_.componentClass)),[_]),z=reactExports.useMemo(()=>"ag-header-group-cell "+u.toString(),[u]),j=reactExports.useMemo(()=>"ag-header-cell-resize "+f.toString(),[f]),J=_?.componentFromFramework,ie=_?.componentClass;return React.createElement("div",{ref:U,style:n,className:z,role:"columnheader","aria-expanded":S},React.createElement("div",{ref:B,className:"ag-header-cell-comp-wrapper",role:"presentation"},J?$?React.createElement(ie,{..._.params}):React.createElement(ie,{..._.params,ref:H}):null),React.createElement("div",{ref:N,"aria-hidden":v,className:j}))},headerGroupCellComp_default=reactExports.memo(HeaderGroupCellComp),HeaderRowComp=({ctrl:e})=>{const{gos:t,context:n}=reactExports.useContext(BeansContext),{topOffset:o,rowHeight:u}=reactExports.useMemo(()=>e.getTopAndHeight(),[]),d=reactExports.useMemo(()=>t.get("tabIndex"),[]),[f,g]=reactExports.useState(()=>e.getAriaRowIndex()),v=e.headerRowClass,[w,S]=reactExports.useState(()=>u+"px"),[R,_]=reactExports.useState(()=>o+"px"),F=reactExports.useRef(null),[M,I]=reactExports.useState(()=>e.getUpdatedHeaderCtrls()),N=reactExports.useRef(),B=reactExports.useRef(null),H=reactExports.useCallback(z=>{if(B.current=z,!z||!e.isAlive()||n.isDestroyed()){N.current=n.destroyBean(N.current);return}N.current=n.createBean(new EmptyBean);const j={setHeight:J=>S(J),setTop:J=>_(J),setHeaderCtrls:(J,ie,se)=>{const fe=F.current,de=getNextValueIfDifferent(fe,J,ie);de!==fe&&(F.current=de,agFlushSync(se,()=>I(de)))},setWidth:J=>{B.current&&(B.current.style.width=J)},setRowIndex:J=>{g(J)}};e.setComp(j,N.current,!1)},[]),U=reactExports.useMemo(()=>({height:w,top:R}),[w,R]),$=reactExports.useCallback(z=>{switch(e.type){case"group":return React.createElement(headerGroupCellComp_default,{ctrl:z,key:z.instanceId});case"filter":return React.createElement(headerFilterCellComp_default,{ctrl:z,key:z.instanceId});default:return React.createElement(headerCellComp_default,{ctrl:z,key:z.instanceId})}},[]);return React.createElement("div",{ref:H,className:v,role:"row",style:U,tabIndex:d,"aria-rowindex":f},M.map($))},headerRowComp_default=reactExports.memo(HeaderRowComp),HeaderRowContainerComp=({pinned:e})=>{const[t,n]=reactExports.useState(!0),[o,u]=reactExports.useState([]),{context:d}=reactExports.useContext(BeansContext),f=reactExports.useRef(null),g=reactExports.useRef(null),v=reactExports.useRef(),w=e==="left",S=e==="right",R=!w&&!S,_=reactExports.useCallback(I=>{if(f.current=I,!I||d.isDestroyed()){v.current=d.destroyBean(v.current);return}v.current=d.createBean(new HeaderRowContainerCtrl(e));const N={setDisplayed:n,setCtrls:B=>u(B),setCenterWidth:B=>{g.current&&(g.current.style.width=B)},setViewportScrollLeft:B=>{f.current&&(f.current.scrollLeft=B)},setPinnedContainerWidth:B=>{f.current&&(f.current.style.width=B,f.current.style.minWidth=B,f.current.style.maxWidth=B)}};v.current.setComp(N,f.current)},[]),F=t?"":"ag-hidden",M=()=>o.map(I=>React.createElement(headerRowComp_default,{ctrl:I,key:I.instanceId}));return w?React.createElement("div",{ref:_,className:"ag-pinned-left-header "+F,"aria-hidden":!t,role:"rowgroup"},M()):S?React.createElement("div",{ref:_,className:"ag-pinned-right-header "+F,"aria-hidden":!t,role:"rowgroup"},M()):R?React.createElement("div",{ref:_,className:"ag-header-viewport "+F,role:"rowgroup",tabIndex:-1},React.createElement("div",{ref:g,className:"ag-header-container",role:"presentation"},M())):null},headerRowContainerComp_default=reactExports.memo(HeaderRowContainerComp),GridHeaderComp=()=>{const[e,t]=reactExports.useState(()=>new CssClasses),[n,o]=reactExports.useState(),{context:u}=reactExports.useContext(BeansContext),d=reactExports.useRef(null),f=reactExports.useRef(),g=reactExports.useCallback(S=>{if(d.current=S,!S||u.isDestroyed()){f.current=u.destroyBean(f.current);return}f.current=u.createBean(new GridHeaderCtrl);const R={toggleCss:(_,F)=>t(M=>M.setClass(_,F)),setHeightAndMinHeight:_=>o(_)};f.current.setComp(R,S,S)},[]),v=reactExports.useMemo(()=>"ag-header "+e.toString(),[e]),w=reactExports.useMemo(()=>({height:n,minHeight:n}),[n]);return React.createElement("div",{ref:g,className:v,style:w,role:"presentation"},React.createElement(headerRowContainerComp_default,{pinned:"left"}),React.createElement(headerRowContainerComp_default,{pinned:null}),React.createElement(headerRowContainerComp_default,{pinned:"right"}))},gridHeaderComp_default=reactExports.memo(GridHeaderComp),useReactCommentEffect=(e,t)=>{reactExports.useEffect(()=>{const n=t.current;if(n){const o=n.parentElement;if(o){const u=document.createComment(e);return o.insertBefore(u,n),()=>{u.remove()}}}},[e])},reactComment_default=useReactCommentEffect,CellEditorComponentProxy=class{constructor(e,t){this.cellEditorParams=e,this.refreshProps=t,this.instanceCreated=new AgPromise(n=>{this.resolveInstanceCreated=n}),this.onValueChange=n=>this.updateValue(n),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){addOptionalMethods(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){this.componentInstance=e,this.resolveInstanceCreated?.(),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached","getValidationErrors","getValidationElement"]}updateValue(e){this.value=e,this.refreshProps()}},useEffectOnce=e=>{const t=reactExports.useRef(e),n=reactExports.useRef(),o=reactExports.useRef(!1),u=reactExports.useRef(!1),[,d]=reactExports.useState(0);o.current&&(u.current=!0),reactExports.useEffect(()=>(o.current||(n.current=t.current(),o.current=!0),d(f=>f+1),()=>{u.current&&n.current?.()}),[])},PopupEditorComp=e=>{const[t,n]=reactExports.useState(),o=reactExports.useContext(BeansContext),{context:u,popupSvc:d,gos:f,editSvc:g}=o,{editDetails:v,cellCtrl:w,eParentCell:S}=e;return useEffectOnce(()=>{const{compDetails:R}=v,_=f.get("stopEditingWhenCellsLoseFocus");let F,M;if(!u.isDestroyed()){M=u.createBean(g.createPopupEditorWrapper(R.params));const I=M.getGui();if(e.jsChildComp){const z=e.jsChildComp.getGui();z&&I.appendChild(z)}const{column:N,rowNode:B}=w,H={column:N,rowNode:B,type:"popupCellEditor",eventSource:S,ePopup:I,position:v.popupPosition,keepWithinBounds:!0},U=d?.positionPopupByComponent.bind(d,H),$=d?.addPopup({modal:_,eChild:I,closeOnEsc:!0,closedCallback:()=>{w.onPopupEditorClosed()},anchorToElement:S,positionCallback:U,ariaOwns:S});F=$?$.hideFunc:void 0,n(M),e.jsChildComp?.afterGuiAttached?.()}return()=>{F?.(),u.destroyBean(M)}}),reactExports.useLayoutEffect(()=>()=>{w.isCellFocused()&&t?.getGui().contains(_getActiveDomElement(o))&&S.focus({preventScroll:!0})},[t]),t&&e.wrappedContent?reactDomExports.createPortal(e.wrappedContent,t.getGui()):null},popupEditorComp_default=reactExports.memo(PopupEditorComp),jsxEditorProxy=(e,t,n)=>{const{compProxy:o}=e;n(o);const u=o.getProps(),d=isComponentStateless(t);return React.createElement(CustomContext.Provider,{value:{setMethods:f=>o.setMethods(f)}},d?React.createElement(t,{...u}):React.createElement(t,{...u,ref:f=>o.setRef(f)}))},jsxEditor=(e,t,n)=>e.compProxy?jsxEditorProxy(e,t,n):React.createElement(t,{...e.compDetails.params,ref:n}),jsxEditValue=(e,t,n,o,u)=>{const d=e.compDetails,f=d.componentClass,g=d.componentFromFramework&&!e.popup,v=d.componentFromFramework&&e.popup,w=!d.componentFromFramework&&e.popup;return g?jsxEditor(e,f,t):v?React.createElement(popupEditorComp_default,{editDetails:e,cellCtrl:o,eParentCell:n,wrappedContent:jsxEditor(e,f,t)}):w&&u?React.createElement(popupEditorComp_default,{editDetails:e,cellCtrl:o,eParentCell:n,jsChildComp:u}):null},useJsCellRenderer=(e,t,n,o,u,d,f=!1)=>{const{context:g}=reactExports.useContext(BeansContext),v=reactExports.useCallback(()=>{const w=u.current;if(!w)return;const S=w.getGui();S&&S.parentElement&&S.remove(),g.destroyBean(w),u.current=void 0},[]);reactExports.useEffect(()=>{const w=e!=null&&!f,S=e?.compDetails&&!e.compDetails.componentFromFramework,R=t&&n==null;if(!(w&&S&&!R)){v();return}const F=e.compDetails;if(u.current){const I=u.current,B=I.refresh!=null&&e.force==!1?I.refresh(F.params):!1;if(B===!0||B===void 0)return;v()}F.newAgStackInstance().then(I=>{if(!I)return;const N=I.getGui();if(!N)return;(t?n:d.current).appendChild(N),u.current=I})},[e,t,o,f]),reactExports.useEffect(()=>v,[])},showJsRenderer_default=useJsCellRenderer,SkeletonCellRenderer=({cellCtrl:e,parent:t})=>{const n=reactExports.useRef(),o=reactExports.useMemo(()=>{const{loadingComp:u}=e.getDeferLoadingCellRenderer();return u?{value:void 0,compDetails:u,force:!1}:void 0},[e]);if(showJsRenderer_default(o,!1,void 0,1,n,t),o?.compDetails?.componentFromFramework){const u=o.compDetails.componentClass;return React.createElement(u,{...o.compDetails.params})}return React.createElement(React.Fragment,null)},CellComp=({cellCtrl:e,printLayout:t,editingCell:n})=>{const o=reactExports.useContext(BeansContext),{context:u}=o,{column:{colIdSanitised:d},instanceId:f}=e,g=reactExports.useRef(),[v,w]=reactExports.useState(()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1}),[S,R]=reactExports.useState(),[_,F]=reactExports.useState(1),[M,I]=reactExports.useState(),[N,B]=reactExports.useState(!1),[H,U]=reactExports.useState(!1),[$,z]=reactExports.useState(!1),[j,J]=reactExports.useState(),ie=reactExports.useMemo(()=>e.isForceWrapper(),[e]),se=reactExports.useMemo(()=>e.getCellAriaRole(),[e]),fe=reactExports.useRef(null),de=reactExports.useRef(null),Ce=reactExports.useRef(null),be=reactExports.useRef(),xe=reactExports.useRef(),Ee=reactExports.useRef(),ae=reactExports.useRef([]),oe=reactExports.useRef(),ee=reactExports.useRef(),[Z,Q]=reactExports.useState(0),K=reactExports.useCallback(De=>{ee.current=De,Q(Be=>Be+1)},[]),ne=v!=null&&(N||$||H)&&(S==null||!!S.popup),ue=ie||ne,ye=reactExports.useMemo(()=>e.getCellValueClass(),[e]),pe=reactExports.useCallback(De=>{if(xe.current=De,De){const Be=De.isCancelBeforeStart&&De.isCancelBeforeStart();setTimeout(()=>{Be?(e.stopEditing(!0),e.focusCell(!0)):(e.cellEditorAttached(),e.enableEditorTooltipFeature(De))})}},[e]),X=reactExports.useRef();X.current||(X.current=new CssClassManager(()=>fe.current));const le=!!S&&!S.popup;showJsRenderer_default(v,ue,ee.current,Z,be,fe,le);const he=reactExports.useRef();reactExports.useLayoutEffect(()=>{const De=he.current,Be=v;if(he.current=v,De==null||De.compDetails==null||Be==null||Be.compDetails==null)return;oe.current?.refreshVisibility();const $e=De.compDetails,Ze=Be.compDetails;if($e.componentClass!=Ze.componentClass||Ce.current?.refresh==null)return;Ce.current.refresh(Ze.params)!=!0&&F(nt=>nt+1)},[v]),reactExports.useLayoutEffect(()=>{if(!(S&&!S.compDetails.componentFromFramework)||u.isDestroyed())return;const Be=S.compDetails,$e=S.popup===!0,Ze=Be.newAgStackInstance();return Ze.then(Ye=>{if(!Ye)return;const nt=Ye.getGui();pe(Ye),$e||((ie?Ee:fe).current?.appendChild(nt),Ye.afterGuiAttached?.()),J(Ye)}),()=>{Ze.then(Ye=>{const nt=Ye.getGui();e.disableEditorTooltipFeature(),u.destroyBean(Ye),pe(void 0),J(void 0),nt?.remove()})}},[S]);const ce=reactExports.useCallback(De=>{if(Ee.current=De,!De||u.isDestroyed()||!e.isAlive()){const Ze=ae.current;ae.current=[];for(const Ye of Ze)Ye();return}let Be;const $e=Ze=>{Ze&&(De.insertAdjacentElement("afterbegin",Ze.getGui()),ae.current.push(()=>{_removeFromParent(Ze.getGui()),u.destroyBean(Ze),oe.current===Be&&(oe.current=void 0)}))};N&&$e(e.createSelectionCheckbox()),$&&$e(e.createDndSource()),H&&(Be=e.createRowDragComp(),oe.current=Be,Be&&($e(Be),Be.refreshVisibility()))},[e,u,$,H,N]),me=reactExports.useCallback(()=>{const De=!e.isCellSpanning()||de.current,Be=fe.current;if(!Be||!De||!e||!e.isAlive()||u.isDestroyed()){g.current=u.destroyBean(g.current);return}g.current=u.createBean(new EmptyBean);const $e={toggleCss:(Ye,nt)=>X.current.toggleCss(Ye,nt),setUserStyles:Ye=>I(Ye),getFocusableElement:()=>fe.current,setIncludeSelection:Ye=>B(Ye),setIncludeRowDrag:Ye=>U(Ye),setIncludeDndSource:Ye=>z(Ye),getCellEditor:()=>xe.current??null,getCellRenderer:()=>Ce.current??be.current,getParentOfValue:()=>ee.current??Ee.current??fe.current,setRenderDetails:(Ye,nt,it)=>{const ot=()=>{w(vt=>vt?.compDetails!==Ye||vt?.value!==nt||vt?.force!==it?{value:nt,compDetails:Ye,force:it}:vt)};if(Ye?.params?.deferRender&&!e.rowNode.group){const{loadingComp:vt,onReady:nn}=e.getDeferLoadingCellRenderer();if(vt){w({value:void 0,compDetails:vt,force:!1}),nn.then(()=>agStartTransition(ot));return}}ot()},setEditDetails:(Ye,nt,it,ot)=>{if(Ye){let vt;Ye.componentFromFramework&&(ot?vt=new CellEditorComponentProxy(Ye.params,()=>F(nn=>nn+1)):warnReactiveCustomComponents()),R({compDetails:Ye,popup:nt,popupPosition:it,compProxy:vt}),nt||w(void 0)}else e.hasBrowserFocus()&&$e.getFocusableElement().focus({preventScroll:!0}),xe.current=void 0,R(void 0)},refreshEditStyles:(Ye,nt)=>{if(!fe.current)return;const{current:it}=X;it.toggleCss("ag-cell-value",!ue),it.toggleCss("ag-cell-inline-editing",!!Ye&&!nt),it.toggleCss("ag-cell-popup-editing",!!Ye&&!!nt),it.toggleCss("ag-cell-not-inline-editing",!Ye||!!nt)}},Ze=Ee.current||void 0;e.setComp($e,Be,de.current??void 0,Ze,t,n,g.current)},[]),we=reactExports.useCallback(De=>{fe.current=De,me()},[]),Se=reactExports.useCallback(De=>{de.current=De,me()},[]),_e=reactExports.useMemo(()=>!!(v?.compDetails?.componentFromFramework&&isComponentStateless(v.compDetails.componentClass)),[v]);reactExports.useLayoutEffect(()=>{if(!fe.current)return;const{current:De}=X;De.toggleCss("ag-cell-value",!ue),De.toggleCss("ag-cell-inline-editing",!!S&&!S.popup),De.toggleCss("ag-cell-popup-editing",!!S&&!!S.popup),De.toggleCss("ag-cell-not-inline-editing",!S||!!S.popup)});const We=()=>{const{compDetails:De,value:Be}=v;if(!De)return Be?.toString?.()??Be;if(De.componentFromFramework){const $e=De.componentClass;return React.createElement(reactExports.Suspense,{fallback:React.createElement(SkeletonCellRenderer,{cellCtrl:e,parent:fe})},_e?React.createElement($e,{...De.params,key:_}):React.createElement($e,{...De.params,key:_,ref:Ce}))}},Fe=()=>{const De=()=>v==null?null:ue?React.createElement("span",{role:"presentation",id:`cell-${f}`,className:ye,ref:K},We()):We(),Be=$e=>jsxEditValue($e,pe,fe.current,e,j);return S!=null?S.popup?React.createElement(React.Fragment,null,De(),Be(S)):Be(S):De()},Le=()=>React.createElement("div",{ref:we,style:M,role:se,"col-id":d},ue?React.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:ce},Fe()):Fe());return e.isCellSpanning()?React.createElement("div",{ref:Se,className:"ag-spanned-cell-wrapper",role:"presentation"},Le()):Le()},cellComp_default=reactExports.memo(CellComp),RowComp=({rowCtrl:e,containerType:t})=>{const{context:n,gos:o,editSvc:u}=reactExports.useContext(BeansContext),d=reactExports.useContext(RenderModeContext)==="default",f=reactExports.useRef(),g=reactExports.useRef(e.getDomOrder()),v=e.isFullWidth(),w=e.rowNode.displayed,[S,R]=reactExports.useState(()=>w?e.rowNode.getRowIndexString():null),[_,F]=reactExports.useState(()=>e.rowId),[M,I]=reactExports.useState(()=>e.businessKey),[N,B]=reactExports.useState(()=>e.rowStyles),H=reactExports.useRef(null),[U,$]=reactExports.useState(()=>null),[z,j]=reactExports.useState(),[J,ie]=reactExports.useState(()=>w?e.getInitialRowTop(t):void 0),[se,fe]=reactExports.useState(()=>w?e.getInitialTransform(t):void 0),de=reactExports.useRef(null),Ce=reactExports.useRef(),be=reactExports.useRef(),xe=reactExports.useRef(!1),[Ee,ae]=reactExports.useState(0);reactExports.useEffect(()=>{if(xe.current||!z||Ee>10)return;const me=de.current?.firstChild;me?(e.setupDetailRowAutoHeight(me),xe.current=!0):ae(we=>we+1)},[z,Ee]);const oe=reactExports.useRef();oe.current||(oe.current=new CssClassManager(()=>de.current));const ee=reactExports.useRef(()=>{}),Z=reactExports.useCallback(me=>(ee.current=me,()=>{ee.current=()=>{}}),[]),Q=agUseSyncExternalStore(Z,()=>H.current,[]),K=d?Q:U,ne=reactExports.useCallback(me=>{if(de.current=me,f.current=me?n.createBean(new EmptyBean):n.destroyBean(f.current),!me){e.unsetComp(t);return}if(!e.isAlive()||n.isDestroyed())return;const we={setTop:ie,setTransform:fe,toggleCss:(Se,_e)=>oe.current.toggleCss(Se,_e),setDomOrder:Se=>g.current=Se,setRowIndex:R,setRowId:F,setRowBusinessKey:I,setUserStyles:B,setCellCtrls:(Se,_e)=>{const We=H.current,Fe=getNextValueIfDifferent(We,Se,g.current);Fe!==We&&(H.current=Fe,d?ee.current():agFlushSync(_e,()=>$(Fe)))},showFullWidth:Se=>{be.current=Se.params,j(Se)},getFullWidthCellRenderer:()=>Ce.current,getFullWidthCellRendererParams:()=>be.current,refreshFullWidth:Se=>{const _e=Se();return be.current=_e,le.current?(j(We=>({...We,params:_e})),!0):!Ce.current||!Ce.current.refresh?!1:Ce.current.refresh(_e)}};e.setComp(we,me,t,f.current)},[]);reactExports.useLayoutEffect(()=>showJsComp(z,n,de.current,Ce),[z]);const ue=reactExports.useMemo(()=>{const me={top:J,transform:se};return Object.assign(me,N),me},[J,se,N]),ye=v&&z?.componentFromFramework,pe=!v&&K!=null,X=reactExports.useMemo(()=>!!(z?.componentFromFramework&&isComponentStateless(z.componentClass)),[z]),le=reactExports.useRef(!1);reactExports.useEffect(()=>{le.current=X&&!!z&&!!o.get("reactiveCustomComponents")},[X,z]);const he=()=>K?.map(me=>React.createElement(cellComp_default,{cellCtrl:me,editingCell:u?.isEditing(me,{withOpenEditor:!0})??!1,printLayout:e.printLayout,key:me.instanceId})),ce=()=>{const me=z.componentClass;return X?React.createElement(me,{...z.params}):React.createElement(me,{...z.params,ref:Ce})};return React.createElement("div",{ref:ne,role:"row",style:ue,"row-index":S,"row-id":_,"row-business-key":M},pe?he():ye?ce():null)},rowComp_default=reactExports.memo(RowComp),RowContainerComp=({name:e})=>{const{context:t,gos:n}=reactExports.useContext(BeansContext),o=reactExports.useMemo(()=>_getRowContainerOptions(e),[e]),u=reactExports.useRef(null),d=reactExports.useRef(null),f=reactExports.useRef(null),g=reactExports.useRef([]),v=reactExports.useRef([]),[w,S]=reactExports.useState(()=>[]),R=!!n.get("enableCellSpan")&&!!o.getSpannedRowCtrls,_=reactExports.useRef([]),F=reactExports.useRef([]),[M,I]=reactExports.useState(()=>[]),N=reactExports.useRef(!1),B=reactExports.useRef(),H=reactExports.useMemo(()=>classesList("ag-viewport",_getRowViewportClass(e)),[e]),U=reactExports.useMemo(()=>classesList(_getRowContainerClass(e)),[e]),$=reactExports.useMemo(()=>classesList("ag-spanning-container",_getRowSpanContainerClass(e)),[e]),z=o.type==="center"||R,j=z?u:d;reactComment_default(" AG Row Container "+e+" ",j);const J=reactExports.useCallback(()=>{const Ee=!z||u.current!=null,ae=d.current!=null,oe=!R||f.current!=null;return Ee&&ae&&oe},[]),ie=reactExports.useCallback(()=>u.current==null&&d.current==null&&f.current==null,[]),se=reactExports.useCallback(()=>{if(ie()&&(B.current=t.destroyBean(B.current)),!t.isDestroyed()&&J()){const Ee=ee=>{const Z=getNextValueIfDifferent(v.current,g.current,N.current);Z!==v.current&&(v.current=Z,agFlushSync(ee,()=>S(Z)))},ae=ee=>{const Z=getNextValueIfDifferent(F.current,_.current,N.current);Z!==F.current&&(F.current=Z,agFlushSync(ee,()=>I(Z)))},oe={setHorizontalScroll:ee=>{u.current&&(u.current.scrollLeft=ee)},setViewportHeight:ee=>{u.current&&(u.current.style.height=ee)},setRowCtrls:({rowCtrls:ee,useFlushSync:Z})=>{const Q=!!Z&&g.current.length>0&&ee.length>0;g.current=ee,Ee(Q)},setSpannedRowCtrls:(ee,Z)=>{const Q=!!Z&&_.current.length>0&&ee.length>0;_.current=ee,ae(Q)},setDomOrder:ee=>{N.current!=ee&&(N.current=ee,Ee(!1))},setContainerWidth:ee=>{d.current&&(d.current.style.width=ee)},setOffsetTop:ee=>{d.current&&(d.current.style.transform=`translateY(${ee})`)}};B.current=t.createBean(new RowContainerCtrl(e)),B.current.setComp(oe,d.current,f.current??void 0,u.current)}},[J,ie]),fe=reactExports.useCallback(Ee=>{d.current=Ee,se()},[se]),de=reactExports.useCallback(Ee=>{f.current=Ee,se()},[se]),Ce=reactExports.useCallback(Ee=>{u.current=Ee,se()},[se]),be=()=>React.createElement("div",{className:U,ref:fe,role:z?"presentation":"rowgroup"},w.map(Ee=>React.createElement(rowComp_default,{rowCtrl:Ee,containerType:o.type,key:Ee.instanceId})));if(!z)return be();const xe=()=>React.createElement("div",{className:$,ref:de,role:"presentation"},M.map(Ee=>React.createElement(rowComp_default,{rowCtrl:Ee,containerType:o.type,key:Ee.instanceId})));return React.createElement("div",{className:H,ref:Ce,role:"rowgroup"},be(),R?xe():null)},rowContainerComp_default=reactExports.memo(RowContainerComp),GridBodyComp=()=>{const e=reactExports.useContext(BeansContext),{context:t,overlays:n}=e,[o,u]=reactExports.useState(""),[d,f]=reactExports.useState(0),[g,v]=reactExports.useState(0),[w,S]=reactExports.useState("0px"),[R,_]=reactExports.useState("0px"),[F,M]=reactExports.useState("100%"),[I,N]=reactExports.useState("0px"),[B,H]=reactExports.useState("0px"),[U,$]=reactExports.useState("100%"),[z,j]=reactExports.useState(!0),[J,ie]=reactExports.useState(!0),[se,fe]=reactExports.useState(null),[de,Ce]=reactExports.useState(""),[be,xe]=reactExports.useState(null),[Ee,ae]=reactExports.useState("ag-layout-normal"),oe=reactExports.useRef();oe.current||(oe.current=new CssClassManager(()=>ee.current));const ee=reactExports.useRef(null),Z=reactExports.useRef(null),Q=reactExports.useRef(null),K=reactExports.useRef(null),ne=reactExports.useRef(null),ue=reactExports.useRef(null),ye=reactExports.useRef(null),pe=reactExports.useRef([]),X=reactExports.useRef([]);reactComment_default(" AG Grid Body ",ee),reactComment_default(" AG Pinned Top ",Z),reactComment_default(" AG Sticky Top ",Q),reactComment_default(" AG Middle ",ue),reactComment_default(" AG Pinned Bottom ",ye);const le=reactExports.useCallback(Ye=>{if(ee.current=Ye,!Ye||t.isDestroyed()){pe.current=t.destroyBeans(pe.current);for(const Dt of X.current)Dt();X.current=[];return}const nt=(Dt,wt)=>{Dt.appendChild(wt),X.current.push(()=>wt.remove())},it=Dt=>{const wt=t.createBean(new Dt);return pe.current.push(wt),wt},ot=(Dt,wt,Bn)=>{nt(Dt,document.createComment(Bn)),nt(Dt,it(wt).getGui())};ot(Ye,FakeHScrollComp," AG Fake Horizontal Scroll ");const vt=n?.getOverlayWrapperCompClass();vt&&ot(Ye,vt," AG Overlay Wrapper "),ne.current&&ot(ne.current,FakeVScrollComp," AG Fake Vertical Scroll ");const nn={setRowAnimationCssOnBodyViewport:u,setColumnCount:Dt=>{ee.current&&_setAriaColCount(ee.current,Dt)},setRowCount:Dt=>{ee.current&&_setAriaRowCount(ee.current,Dt)},setTopHeight:f,setBottomHeight:v,setStickyTopHeight:S,setStickyTopTop:_,setStickyTopWidth:M,setTopInvisible:j,setBottomInvisible:ie,setColumnMovingCss:(Dt,wt)=>oe.current.toggleCss(Dt,wt),updateLayoutClasses:ae,setAlwaysVerticalScrollClass:fe,setPinnedTopBottomOverflowY:Ce,setCellSelectableCss:(Dt,wt)=>xe(wt?Dt:null),setBodyViewportWidth:Dt=>{ue.current&&(ue.current.style.width=Dt)},registerBodyViewportResizeListener:Dt=>{if(ue.current){const wt=_observeResize(e,ue.current,Dt);X.current.push(()=>wt())}},setStickyBottomHeight:N,setStickyBottomBottom:H,setStickyBottomWidth:$,setGridRootRole:Dt=>Ye.setAttribute("role",Dt)},en=t.createBean(new GridBodyCtrl);pe.current.push(en),en.setComp(nn,Ye,ue.current,Z.current,ye.current,Q.current,K.current)},[]),he=reactExports.useMemo(()=>classesList("ag-root","ag-unselectable",Ee),[Ee]),ce=reactExports.useMemo(()=>classesList("ag-body-viewport",o,Ee,se,be),[o,Ee,se,be]),me=reactExports.useMemo(()=>classesList("ag-body",Ee),[Ee]),we=reactExports.useMemo(()=>classesList("ag-floating-top",z?"ag-invisible":null,be),[be,z]),Se=reactExports.useMemo(()=>classesList("ag-sticky-top",be),[be]),_e=reactExports.useMemo(()=>classesList("ag-sticky-bottom",I==="0px"?"ag-invisible":null,be),[be,I]),We=reactExports.useMemo(()=>classesList("ag-floating-bottom",J?"ag-invisible":null,be),[be,J]),Fe=reactExports.useMemo(()=>({height:d,minHeight:d,overflowY:de}),[d,de]),Le=reactExports.useMemo(()=>({height:w,top:R,width:F}),[w,R,F]),De=reactExports.useMemo(()=>({height:I,bottom:B,width:U}),[I,B,U]),Be=reactExports.useMemo(()=>({height:g,minHeight:g,overflowY:de}),[g,de]),$e=Ye=>React.createElement(rowContainerComp_default,{name:Ye,key:`${Ye}-container`}),Ze=({section:Ye,children:nt,className:it,style:ot})=>React.createElement("div",{ref:Ye,className:it,role:"presentation",style:ot},nt.map($e));return React.createElement("div",{ref:le,className:he},React.createElement(gridHeaderComp_default,null),Ze({section:Z,className:we,style:Fe,children:["topLeft","topCenter","topRight","topFullWidth"]}),React.createElement("div",{className:me,ref:ne,role:"presentation"},Ze({section:ue,className:ce,children:["left","center","right","fullWidth"]})),Ze({section:Q,className:Se,style:Le,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),Ze({section:K,className:_e,style:De,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),Ze({section:ye,className:We,style:Be,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},gridBodyComp_default=reactExports.memo(GridBodyComp),TabGuardCompRef=(e,t)=>{const{children:n,eFocusableElement:o,onTabKeyDown:u,gridCtrl:d,forceFocusOutWhenTabGuardsAreEmpty:f,isEmpty:g}=e,{context:v}=reactExports.useContext(BeansContext),w=reactExports.useRef(null),S=reactExports.useRef(null),R=reactExports.useRef(),_=B=>{const H=B==null?void 0:parseInt(B,10).toString();for(const U of[w,S])H===void 0?U.current?.removeAttribute("tabindex"):U.current?.setAttribute("tabindex",H)};reactExports.useImperativeHandle(t,()=>({forceFocusOutOfContainer(B){R.current?.forceFocusOutOfContainer(B)}}));const F=reactExports.useCallback(()=>{const B=w.current,H=S.current;if(!B&&!H||v.isDestroyed()){R.current=v.destroyBean(R.current);return}if(B&&H){const U={setTabIndex:_};R.current=v.createBean(new TabGuardCtrl({comp:U,eTopGuard:B,eBottomGuard:H,eFocusableElement:o,onTabKeyDown:u,forceFocusOutWhenTabGuardsAreEmpty:f,focusInnerElement:$=>d.focusInnerElement($),isEmpty:g}))}},[]),M=reactExports.useCallback(B=>{w.current=B,F()},[F]),I=reactExports.useCallback(B=>{S.current=B,F()},[F]),N=B=>{const H=B==="top"?TabGuardClassNames.TAB_GUARD_TOP:TabGuardClassNames.TAB_GUARD_BOTTOM;return React.createElement("div",{className:`${TabGuardClassNames.TAB_GUARD} ${H}`,role:"presentation",ref:B==="top"?M:I})};return React.createElement(React.Fragment,null,N("top"),n,N("bottom"))},TabGuardComp=reactExports.forwardRef(TabGuardCompRef),tabGuardComp_default=reactExports.memo(TabGuardComp),GridComp=({context:e})=>{const[t,n]=reactExports.useState(""),[o,u]=reactExports.useState(""),[d,f]=reactExports.useState(null),[g,v]=reactExports.useState(null),[w,S]=reactExports.useState(!1),[R,_]=reactExports.useState(),F=reactExports.useRef(),M=reactExports.useRef(null),I=reactExports.useRef(),[N,B]=reactExports.useState(null),H=reactExports.useRef(()=>{}),U=reactExports.useRef(),$=reactExports.useRef([]),z=reactExports.useCallback(()=>{},[]);reactComment_default(" AG Grid ",M);const j=reactExports.useCallback(Ce=>{if(M.current=Ce,F.current=Ce?e.createBean(new GridCtrl):e.destroyBean(F.current),!Ce||e.isDestroyed())return;const be=F.current;H.current=be.focusInnerElement.bind(be);const xe={destroyGridUi:()=>{},setRtlClass:n,forceFocusOutOfContainer:Ee=>{if(!Ee&&U.current?.isDisplayed()){U.current.forceFocusOutOfContainer(Ee);return}I.current?.forceFocusOutOfContainer(Ee)},updateLayoutClasses:u,getFocusableContainers:()=>{const Ee=[],ae=M.current?.querySelector(".ag-root");ae&&Ee.push({getGui:()=>ae});for(const oe of $.current)oe.isDisplayed()&&Ee.push(oe);return Ee},setCursor:f,setUserSelect:v};be.setComp(xe,Ce,Ce),S(!0)},[]);reactExports.useEffect(()=>{const Ce=F.current,be=M.current;if(!R||!Ce||!N||!be||e.isDestroyed())return;const xe=[],{watermarkSelector:Ee,paginationSelector:ae,sideBarSelector:oe,statusBarSelector:ee,gridHeaderDropZonesSelector:Z}=Ce.getOptionalSelectors(),Q=[];if(Z){const ne=e.createBean(new Z.component),ue=ne.getGui();be.insertAdjacentElement("afterbegin",ue),Q.push(ue),xe.push(ne)}if(oe){const ne=e.createBean(new oe.component),ue=ne.getGui(),ye=N.querySelector(".ag-tab-guard-bottom");ye&&(ye.insertAdjacentElement("beforebegin",ue),Q.push(ue)),xe.push(ne),$.current.push(ne)}const K=ne=>{const ue=e.createBean(new ne),ye=ue.getGui();return be.insertAdjacentElement("beforeend",ye),Q.push(ye),xe.push(ue),ue};if(ee&&K(ee.component),ae){const ne=K(ae.component);U.current=ne,$.current.push(ne)}return Ee&&K(Ee.component),()=>{e.destroyBeans(xe);for(const ne of Q)ne.remove()}},[R,N,e]);const J=reactExports.useMemo(()=>classesList("ag-root-wrapper",t,o),[t,o]),ie=reactExports.useMemo(()=>classesList("ag-root-wrapper-body","ag-focus-managed",o),[o]),se=reactExports.useMemo(()=>({userSelect:g??"",WebkitUserSelect:g??"",cursor:d??""}),[g,d]),fe=reactExports.useCallback(Ce=>{I.current=Ce,_(Ce!==null)},[]),de=reactExports.useCallback(()=>!F.current?.isFocusable(),[]);return React.createElement("div",{ref:j,className:J,style:se,role:"presentation"},React.createElement("div",{className:ie,ref:B,role:"presentation"},w&&N&&!e.isDestroyed()&&React.createElement(BeansContext.Provider,{value:e.getBeans()},React.createElement(tabGuardComp_default,{ref:fe,eFocusableElement:N,onTabKeyDown:z,gridCtrl:F.current,forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:de},React.createElement(gridBodyComp_default,null)))))},gridComp_default=reactExports.memo(GridComp),RenderStatusService=class extends BeanStub{postConstruct(){if(this.beans.colAutosize){const e=this.queueResizeOperationsForTick.bind(this);this.addManagedEventListeners({rowExpansionStateChanged:e,expandOrCollapseAll:e,cellValueChanged:e,rowNodeDataChanged:e,rowDataUpdated:e})}}queueResizeOperationsForTick(){const e=this.beans.colAutosize;e.shouldQueueResizeOperations=!0,setTimeout(()=>{e.processResizeOperations()},0)}areHeaderCellsRendered(){return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(t=>t.areCellsRendered()))}areCellsRendered(){return this.beans.rowRenderer.getAllRowCtrls().every(e=>e.isRowRendered()&&e.getAllCellCtrls().every(t=>!!t.eGui))}},useIsomorphicLayoutEffect=typeof window>"u"?reactExports.useEffect:reactExports.useLayoutEffect,deprecatedProps={setGridApi:void 0,maxComponentCreationTimeMs:void 0,children:void 0},reactPropsNotGridOptions={gridOptions:void 0,modules:void 0,containerStyle:void 0,className:void 0,passGridApi:void 0,componentWrappingElement:void 0,...deprecatedProps},excludeReactCompProps=new Set(Object.keys(reactPropsNotGridOptions)),deprecatedReactCompProps=new Set(Object.keys(deprecatedProps)),AgGridReactUi=e=>{const t=reactExports.useContext(ModulesContext),n=reactExports.useContext(LicenseContext),o=reactExports.useRef(),u=reactExports.useRef(null),d=reactExports.useRef(null),f=reactExports.useRef([]),g=reactExports.useRef([]),v=reactExports.useRef(e),w=reactExports.useRef(),S=reactExports.useRef(),R=reactExports.useRef(!1),[_,F]=reactExports.useState(void 0),[,M]=reactExports.useState(0),I=reactExports.useRef(),N=z=>{const j=u.current?.classList,J=(ie="")=>ie.trim().split(/\s+/g).filter(Boolean);if(I.current!==z){for(const ie of J(I.current))j?.contains(ie)&&j.remove(ie);for(const ie of J(z))j?.contains(ie)||j?.add(ie);I.current=z}};useIsomorphicLayoutEffect(()=>{N(e.className)},[e.className]);const B=reactExports.useCallback(z=>{if(u.current=z,N(e.className),!z){for(const Ee of f.current)Ee();f.current.length=0;return}const j=[...e.modules??[],...t??[]];n&&_findEnterpriseCoreModule(j)?.setLicenseKey(n),d.current||(d.current=new PortalManager(()=>M(Ee=>Ee+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),f.current.push(()=>{d.current?.destroy(),d.current=null}));const J=_combineAttributesAndGridOptions(e.gridOptions,e,Object.keys(e).filter(Ee=>!excludeReactCompProps.has(Ee))),ie=()=>{if(R.current){const Ee=()=>w.current?.shouldQueueUpdates()?void 0:g.current.shift();let ae=Ee();for(;ae;)ae(),ae=Ee()}},se=new ReactFrameworkOverrides(ie);w.current=se;const fe=new RenderStatusService,de={providedBeanInstances:{frameworkCompWrapper:new ReactFrameworkComponentWrapper(d.current,J),renderStatus:fe},modules:j,frameworkOverrides:se,setThemeOnGridDiv:!0},Ce=Ee=>{F(Ee),Ee.createBean(fe),f.current.push(()=>{Ee.destroy()}),Ee.getBean("ctrlsSvc").whenReady({addDestroyFunc:ae=>{f.current.push(ae)}},()=>{if(Ee.isDestroyed())return;const ae=o.current;ae&&e.passGridApi?.(ae)})},be=Ee=>{Ee.getBean("ctrlsSvc").whenReady({addDestroyFunc:ae=>{f.current.push(ae)}},()=>{for(const ae of g.current)ae();g.current.length=0,R.current=!0})},xe=new GridCoreCreator;J.gridId??(J.gridId=S.current),o.current=xe.create(z,J,Ce,be,de),f.current.push(()=>{o.current=void 0}),o.current&&(S.current=o.current.getGridId())},[]),H=reactExports.useMemo(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),U=reactExports.useCallback(z=>{R.current&&!w.current?.shouldQueueUpdates()?z():g.current.push(z)},[]);reactExports.useEffect(()=>{const z=extractGridPropertyChanges(v.current,e);v.current=e,U(()=>{o.current&&_processOnChange(z,o.current)})},[e]);const $=!React.useSyncExternalStore||_getGridOption(e,"renderingMode")==="legacy"?"legacy":"default";return React.createElement("div",{style:H,ref:B},React.createElement(RenderModeContext.Provider,{value:$},_&&!_.isDestroyed()?React.createElement(gridComp_default,{key:_.instanceId,context:_}):null,d.current?.getPortals()??null))};function extractGridPropertyChanges(e,t){const n={};for(const o of Object.keys(t)){if(excludeReactCompProps.has(o)){deprecatedReactCompProps.has(o)&&_warn(274,{prop:o});continue}const u=t[o];e[o]!==u&&(n[o]=u)}return n}var ReactFrameworkComponentWrapper=class extends BaseComponentWrapper{constructor(e,t){super(),this.parent=e,this.gridOptions=t}createWrapper(e,t){const n=this.gridOptions;if(_getGridOption(n,"reactiveCustomComponents")){const f=(g=>{switch(g){case"filter":return _getGridOption(n,"enableFilterHandlers")?FilterDisplayComponentWrapper:FilterComponentWrapper;case"floatingFilterComponent":return _getGridOption(n,"enableFilterHandlers")?FloatingFilterDisplayComponentWrapper:FloatingFilterComponentWrapper;case"dateComponent":return DateComponentWrapper;case"dragAndDropImageComponent":return DragAndDropImageComponentWrapper;case"loadingOverlayComponent":case"noRowsOverlayComponent":case"activeOverlay":return CustomOverlayComponentWrapper;case"statusPanel":return StatusPanelComponentWrapper;case"toolPanel":return ToolPanelComponentWrapper;case"menuItem":return MenuItemComponentWrapper;case"cellRenderer":return CellRendererComponentWrapper;case"innerHeaderComponent":return InnerHeaderComponentWrapper}})(t.name);if(f)return new f(e,this.parent,t)}else switch(t.name){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"activeOverlay":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":warnReactiveCustomComponents();break}const u=!t.cellRenderer&&t.name!=="toolPanel";return new ReactComponent(e,this.parent,t,u)}},DetailCellRenderer=reactExports.forwardRef((e,t)=>{const n=reactExports.useContext(BeansContext),{registry:o,context:u,gos:d,rowModel:f}=n,[g,v]=reactExports.useState(()=>new CssClasses),[w,S]=reactExports.useState(()=>new CssClasses),[R,_]=reactExports.useState(),[F,M]=reactExports.useState(),I=reactExports.useRef(),N=reactExports.useRef(null),B=reactExports.useRef(),H=reactExports.useMemo(()=>_getGridRegisteredModules(e.api.getGridId(),R?.rowModelType??"clientSide"),[e]),U=reactExports.useMemo(()=>g.toString()+" ag-details-row",[g]),$=reactExports.useMemo(()=>w.toString()+" ag-details-grid",[w]);t&&reactExports.useImperativeHandle(t,()=>({refresh(){return I.current?.refresh()??!1}})),e.template&&_warn(230);const z=reactExports.useCallback(J=>{if(N.current=J,!J||u.isDestroyed()){I.current=u.destroyBean(I.current),B.current?.();return}const ie={toggleCss:(fe,de)=>v(Ce=>Ce.setClass(fe,de)),toggleDetailGridCss:(fe,de)=>S(Ce=>Ce.setClass(fe,de)),setDetailGrid:fe=>_(fe),setRowData:fe=>M(fe),getGui:()=>N.current},se=o.createDynamicBean("detailCellRendererCtrl",!0);if(se&&(u.createBean(se),se.init(ie,e),I.current=se,d.get("detailRowAutoHeight"))){const fe=()=>{if(N.current==null)return;const de=N.current.clientHeight;de!=null&&de>0&&setTimeout(()=>{e.node.setRowHeight(de),(_isClientSideRowModel(d)||_isServerSideRowModel(d))&&f.onRowHeightChanged()},0)};B.current=_observeResize(n,J,fe),fe()}},[]),j=reactExports.useCallback(J=>{I.current?.registerDetailWithMaster(J)},[]);return React.createElement("div",{className:U,ref:z},R&&React.createElement(AgGridReactUi,{className:$,...R,modules:H,rowData:F,passGridApi:j}))}),ReactFrameworkOverrides=class extends VanillaFrameworkOverrides{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.renderingEngine="react",this.frameworkComponents={agGroupCellRenderer:groupCellRenderer_default,agGroupRowRenderer:groupCellRenderer_default,agDetailCellRenderer:DetailCellRenderer},this.wrapIncoming=(t,n)=>n==="ensureVisible"?runWithoutFlushSync(t):t()}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const t=e.prototype;return!(t&&"getGui"in t)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return isReact19()}},AgGridReact=class extends reactExports.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e;for(const t of this.apiListeners)t(e)}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return React.createElement(AgGridReactUi,{...this.props,passGridApi:this.setGridApi})}};ModuleRegistry.registerModules([AllCommunityModule]);pdfExports.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js";const ROOM_COLORS=["#93C5FD","#86EFAC","#FCD34D","#F9A8D4","#A5B4FC","#6EE7B7","#FCA5A5","#C4B5FD","#67E8F9","#FDE68A"],USE_TYPES=["Office","Conference Room","Corridor","Storage","Restroom","Open Area","Lab","Reception","Utility","Other"];function Editor(){const[e,t]=reactExports.useState(null),[n,o]=reactExports.useState({width:900,height:600}),[u,d]=reactExports.useState("select"),[f,g]=reactExports.useState([]),[v,w]=reactExports.useState(!1),[S,R]=reactExports.useState(null),[_,F]=reactExports.useState([]),[M,I]=reactExports.useState(null),[N,B]=reactExports.useState(1),[H,U]=reactExports.useState(""),$=reactExports.useRef(null),z=reactExports.useRef(null),j=[{field:"id",headerName:"ID",width:60,editable:!1},{field:"name",headerName:"Room Name",editable:!0,flex:1},{field:"useType",headerName:"Use Type",editable:!0,flex:1,cellEditor:"agSelectCellEditor",cellEditorParams:{values:USE_TYPES}},{field:"area",headerName:"Area (sq ft)",editable:!0,width:120,valueParser:ae=>Number(ae.newValue)},{field:"department",headerName:"Department",editable:!0,flex:1},{field:"notes",headerName:"Notes",editable:!0,flex:1}];reactExports.useEffect(()=>{const ae=new ResizeObserver(()=>{z.current&&o({width:z.current.offsetWidth,height:z.current.offsetHeight})});return z.current&&ae.observe(z.current),()=>ae.disconnect()},[]);const J=async ae=>{const oe=ae.target.files[0];if(oe){U("");try{const ee=await oe.arrayBuffer(),Q=await(await pdfExports.getDocument({data:ee}).promise).getPage(1),K=Q.getViewport({scale:1.5}),ne=document.createElement("canvas");ne.width=K.width,ne.height=K.height;const ue=ne.getContext("2d");await Q.render({canvasContext:ue,viewport:K}).promise;const ye=new window.Image;ye.src=ne.toDataURL(),ye.onload=()=>{t(ye);const pe=n.width/K.width;B(Math.min(pe,1))}}catch(ee){console.error(ee),U("Failed to load PDF. Make sure it's a valid PDF file.")}}},ie=()=>{const ae=$.current.getPointerPosition();return{x:ae.x/N,y:ae.y/N}},se=()=>{if(u==="rect"){const ae=ie();R({x:ae.x,y:ae.y,width:0,height:0}),w(!0)}else if(u==="polygon"){const ae=ie();F(oe=>[...oe,ae.x,ae.y])}else u==="select"&&I(null)},fe=()=>{if(u==="rect"&&v&&S){const ae=ie();R(oe=>({...oe,width:ae.x-oe.x,height:ae.y-oe.y}))}},de=()=>{if(u==="rect"&&v&&S){if(w(!1),Math.abs(S.width)>5&&Math.abs(S.height)>5){const ae={id:f.length+1,type:"rect",x:S.width<0?S.x+S.width:S.x,y:S.height<0?S.y+S.height:S.y,width:Math.abs(S.width),height:Math.abs(S.height),name:`Room ${f.length+1}`,useType:"Office",area:Math.round(Math.abs(S.width)*Math.abs(S.height)/100),department:"",notes:"",color:ROOM_COLORS[f.length%ROOM_COLORS.length]};g(oe=>[...oe,ae])}R(null)}},Ce=()=>{if(_.length<6)return;const ae={id:f.length+1,type:"polygon",points:_,name:`Room ${f.length+1}`,useType:"Office",area:0,department:"",notes:"",color:ROOM_COLORS[f.length%ROOM_COLORS.length]};g(oe=>[...oe,ae]),F([])},be=()=>{M&&(g(ae=>ae.filter(oe=>oe.id!==M)),I(null))},xe=ae=>{g(oe=>oe.map(ee=>ee.id===ae.data.id?{...ee,...ae.data}:ee))},Ee=()=>{const ae=["ID","Name","Use Type","Area (sq ft)","Department","Notes"],oe=f.map(ne=>[ne.id,ne.name,ne.useType,ne.area,ne.department,ne.notes].join(",")),ee=[ae.join(","),...oe].join(`
`),Z=new Blob([ee],{type:"text/csv"}),Q=URL.createObjectURL(Z),K=document.createElement("a");K.href=Q,K.download="space-data.csv",K.click(),URL.revokeObjectURL(Q)};return jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-2xl shadow-md border border-gray-200 p-4 flex flex-wrap items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold text-gray-700 mr-2",children:"Floor Plan Editor"}),jsxRuntimeExports.jsxs("label",{className:"cursor-pointer px-4 py-2 bg-gray-800 text-white text-sm rounded-md hover:bg-gray-700 transition",children:[" Load PDF",jsxRuntimeExports.jsx("input",{type:"file",accept:".pdf",className:"hidden",onChange:J})]}),jsxRuntimeExports.jsx("div",{className:"h-6 w-px bg-gray-300"}),[{id:"select",label:" Select"},{id:"rect",label:" Rectangle"},{id:"polygon",label:" Polygon"}].map(ae=>jsxRuntimeExports.jsx("button",{onClick:()=>{d(ae.id),F([])},className:`px-3 py-2 text-sm rounded-md border transition ${u===ae.id?"bg-gray-800 text-white border-gray-800":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:ae.label},ae.id)),u==="polygon"&&_.length>=6&&jsxRuntimeExports.jsx("button",{onClick:Ce,className:"px-3 py-2 text-sm rounded-md bg-green-600 text-white hover:bg-green-700 transition",children:" Finish Polygon"}),M&&jsxRuntimeExports.jsx("button",{onClick:be,className:"px-3 py-2 text-sm rounded-md bg-red-500 text-white hover:bg-red-600 transition",children:" Delete Room"}),jsxRuntimeExports.jsx("div",{className:"ml-auto",children:jsxRuntimeExports.jsx("button",{onClick:Ee,disabled:f.length===0,className:"px-4 py-2 text-sm rounded-md bg-blue-600 text-white hover:bg-blue-700 transition disabled:opacity-40",children:" Export CSV"})})]}),H&&jsxRuntimeExports.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 rounded-xl px-4 py-3 text-sm",children:[" ",H]}),jsxRuntimeExports.jsx("div",{className:"bg-white rounded-2xl shadow-md border border-gray-200 overflow-hidden",children:jsxRuntimeExports.jsxs("div",{ref:z,className:"w-full",style:{height:"560px",background:"#F8FAFC",cursor:u==="select"?"default":"crosshair"},children:[!e&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center h-full text-gray-400 flex-col gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-4xl",children:""}),jsxRuntimeExports.jsx("span",{className:"text-lg",children:"Load a PDF floor plan to get started"}),jsxRuntimeExports.jsx("span",{className:"text-sm",children:"Then use the Rectangle or Polygon tool to draw rooms"})]}),jsxRuntimeExports.jsx(Stage,{ref:$,width:n.width,height:n.height,scaleX:N,scaleY:N,onMouseDown:se,onMouseMove:fe,onMouseUp:de,children:jsxRuntimeExports.jsxs(Layer,{children:[e&&jsxRuntimeExports.jsx(Image$1,{image:e,x:0,y:0,width:e.naturalWidth,height:e.naturalHeight}),f.map(ae=>{const oe=ae.id===M;return ae.type==="rect"?jsxRuntimeExports.jsxs(React.Fragment,{children:[jsxRuntimeExports.jsx(Rect,{x:ae.x,y:ae.y,width:ae.width,height:ae.height,fill:ae.color,opacity:.45,stroke:oe?"#1D4ED8":"#374151",strokeWidth:oe?2:1,onClick:()=>u==="select"&&I(ae.id)}),jsxRuntimeExports.jsx(Text,{x:ae.x+4,y:ae.y+4,text:ae.name,fontSize:11,fill:"#1F2937",listening:!1})]},ae.id):ae.type==="polygon"?jsxRuntimeExports.jsxs(React.Fragment,{children:[jsxRuntimeExports.jsx(Line,{points:ae.points,fill:ae.color,opacity:.45,stroke:oe?"#1D4ED8":"#374151",strokeWidth:oe?2:1,closed:!0,onClick:()=>u==="select"&&I(ae.id)}),jsxRuntimeExports.jsx(Text,{x:ae.points[0]+4,y:ae.points[1]+4,text:ae.name,fontSize:11,fill:"#1F2937",listening:!1})]},ae.id):null}),S&&jsxRuntimeExports.jsx(Rect,{x:S.x,y:S.y,width:S.width,height:S.height,fill:"#93C5FD",opacity:.35,stroke:"#3B82F6",strokeWidth:1,dash:[4,4]}),_.length>0&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Line,{points:_,stroke:"#3B82F6",strokeWidth:1.5,dash:[4,4]}),Array.from({length:_.length/2}).map((ae,oe)=>jsxRuntimeExports.jsx(Circle,{x:_[oe*2],y:_[oe*2+1],radius:4,fill:"#3B82F6"},oe))]})]})})]})}),jsxRuntimeExports.jsxs("div",{className:"bg-white rounded-2xl shadow-md border border-gray-200 p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-3",children:[jsxRuntimeExports.jsxs("h3",{className:"font-semibold text-gray-700",children:["Room Data  ",f.length," room",f.length!==1?"s":""]}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:"Click any cell to edit"})]}),f.length===0?jsxRuntimeExports.jsx("div",{className:"text-center text-gray-400 py-8 border border-dashed border-gray-300 rounded-xl",children:"Draw rooms on the floor plan to populate this table"}):jsxRuntimeExports.jsx("div",{className:"ag-theme-alpine w-full",style:{height:300},children:jsxRuntimeExports.jsx(AgGridReact,{rowData:f,columnDefs:j,onCellValueChanged:xe,getRowId:ae=>String(ae.data.id),stopEditingWhenCellsLoseFocus:!0,onRowClicked:ae=>I(ae.data.id)})})]})]})}function App(){const[e,t]=reactExports.useState([]),n=({isActive:o})=>`px-3 py-2 rounded-md text-sm font-medium transition ${o?"bg-gray-700 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"}`;return jsxRuntimeExports.jsx(HashRouter,{children:jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-gray-100 text-gray-900",children:[jsxRuntimeExports.jsxs("nav",{className:"bg-gray-900 shadow-md p-4 flex justify-between items-center",children:[jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold text-white",children:" Space Manager"}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-2",children:[jsxRuntimeExports.jsx(NavLink,{to:"/",className:n,children:"Dashboard"}),jsxRuntimeExports.jsx(NavLink,{to:"/upload",className:n,children:"Upload"}),jsxRuntimeExports.jsx(NavLink,{to:"/editor",className:n,children:"Floor Plan"})]})]}),jsxRuntimeExports.jsx("main",{className:"max-w-7xl mx-auto mt-8 p-4",children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Dashboard,{data:e})}),jsxRuntimeExports.jsx(Route,{path:"/upload",element:jsxRuntimeExports.jsx(FileUploader,{onUpload:t})}),jsxRuntimeExports.jsx(Route,{path:"/editor",element:jsxRuntimeExports.jsx(Editor,{})})]})}),jsxRuntimeExports.jsxs("footer",{className:"text-center text-gray-500 text-sm py-6",children:[" ",new Date().getFullYear()," Space Management Dashboard"]})]})})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
